var jne=Object.defineProperty;var Gne=(n,e,t)=>e in n?jne(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var dL=(n,e,t)=>(Gne(n,typeof e!="symbol"?e+"":e,t),t);import{Octokit as jc}from"https://esm.sh/octokit@2.0.19";function qne(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var go=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fa(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Xne(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var fV={exports:{}},q_={},dV={exports:{}},yn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hy=Symbol.for("react.element"),Yne=Symbol.for("react.portal"),Kne=Symbol.for("react.fragment"),Zne=Symbol.for("react.strict_mode"),Jne=Symbol.for("react.profiler"),Qne=Symbol.for("react.provider"),ere=Symbol.for("react.context"),tre=Symbol.for("react.forward_ref"),nre=Symbol.for("react.suspense"),rre=Symbol.for("react.memo"),ire=Symbol.for("react.lazy"),hL=Symbol.iterator;function sre(n){return n===null||typeof n!="object"?null:(n=hL&&n[hL]||n["@@iterator"],typeof n=="function"?n:null)}var hV={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pV=Object.assign,mV={};function Am(n,e,t){this.props=n,this.context=e,this.refs=mV,this.updater=t||hV}Am.prototype.isReactComponent={};Am.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Am.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function gV(){}gV.prototype=Am.prototype;function sP(n,e,t){this.props=n,this.context=e,this.refs=mV,this.updater=t||hV}var oP=sP.prototype=new gV;oP.constructor=sP;pV(oP,Am.prototype);oP.isPureReactComponent=!0;var pL=Array.isArray,vV=Object.prototype.hasOwnProperty,aP={current:null},yV={key:!0,ref:!0,__self:!0,__source:!0};function xV(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)vV.call(e,r)&&!yV.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:hy,type:n,key:s,ref:o,props:i,_owner:aP.current}}function ore(n,e){return{$$typeof:hy,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function lP(n){return typeof n=="object"&&n!==null&&n.$$typeof===hy}function are(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var mL=/\/+/g;function B2(n,e){return typeof n=="object"&&n!==null&&n.key!=null?are(""+n.key):e.toString(36)}function pw(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case hy:case Yne:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+B2(o,0):r,pL(i)?(t="",n!=null&&(t=n.replace(mL,"$&/")+"/"),pw(i,e,t,"",function(u){return u})):i!=null&&(lP(i)&&(i=ore(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(mL,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",pL(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+B2(s,a);o+=pw(s,e,t,l,i)}else if(l=sre(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+B2(s,a++),o+=pw(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function q1(n,e,t){if(n==null)return n;var r=[],i=0;return pw(n,r,"","",function(s){return e.call(t,s,i++)}),r}function lre(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Rs={current:null},mw={transition:null},ure={ReactCurrentDispatcher:Rs,ReactCurrentBatchConfig:mw,ReactCurrentOwner:aP};yn.Children={map:q1,forEach:function(n,e,t){q1(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return q1(n,function(){e++}),e},toArray:function(n){return q1(n,function(e){return e})||[]},only:function(n){if(!lP(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};yn.Component=Am;yn.Fragment=Kne;yn.Profiler=Jne;yn.PureComponent=sP;yn.StrictMode=Zne;yn.Suspense=nre;yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ure;yn.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=pV({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=aP.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)vV.call(e,l)&&!yV.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:hy,type:n.type,key:i,ref:s,props:r,_owner:o}};yn.createContext=function(n){return n={$$typeof:ere,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Qne,_context:n},n.Consumer=n};yn.createElement=xV;yn.createFactory=function(n){var e=xV.bind(null,n);return e.type=n,e};yn.createRef=function(){return{current:null}};yn.forwardRef=function(n){return{$$typeof:tre,render:n}};yn.isValidElement=lP;yn.lazy=function(n){return{$$typeof:ire,_payload:{_status:-1,_result:n},_init:lre}};yn.memo=function(n,e){return{$$typeof:rre,type:n,compare:e===void 0?null:e}};yn.startTransition=function(n){var e=mw.transition;mw.transition={};try{n()}finally{mw.transition=e}};yn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};yn.useCallback=function(n,e){return Rs.current.useCallback(n,e)};yn.useContext=function(n){return Rs.current.useContext(n)};yn.useDebugValue=function(){};yn.useDeferredValue=function(n){return Rs.current.useDeferredValue(n)};yn.useEffect=function(n,e){return Rs.current.useEffect(n,e)};yn.useId=function(){return Rs.current.useId()};yn.useImperativeHandle=function(n,e,t){return Rs.current.useImperativeHandle(n,e,t)};yn.useInsertionEffect=function(n,e){return Rs.current.useInsertionEffect(n,e)};yn.useLayoutEffect=function(n,e){return Rs.current.useLayoutEffect(n,e)};yn.useMemo=function(n,e){return Rs.current.useMemo(n,e)};yn.useReducer=function(n,e,t){return Rs.current.useReducer(n,e,t)};yn.useRef=function(n){return Rs.current.useRef(n)};yn.useState=function(n){return Rs.current.useState(n)};yn.useSyncExternalStore=function(n,e,t){return Rs.current.useSyncExternalStore(n,e,t)};yn.useTransition=function(){return Rs.current.useTransition()};yn.version="18.2.0";dV.exports=yn;var k=dV.exports;const De=fa(k),Qw=qne({__proto__:null,default:De},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cre=k,fre=Symbol.for("react.element"),dre=Symbol.for("react.fragment"),hre=Object.prototype.hasOwnProperty,pre=cre.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mre={key:!0,ref:!0,__self:!0,__source:!0};function bV(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)hre.call(e,r)&&!mre.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:fre,type:n,key:s,ref:o,props:i,_owner:pre.current}}q_.Fragment=dre;q_.jsx=bV;q_.jsxs=bV;fV.exports=q_;var se=fV.exports,xT={},wV={exports:{}},No={},SV={exports:{}},_V={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(U,L){var q=U.length;U.push(L);e:for(;0<q;){var Z=q-1>>>1,J=U[Z];if(0<i(J,L))U[Z]=L,U[q]=J,q=Z;else break e}}function t(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var L=U[0],q=U.pop();if(q!==L){U[0]=q;e:for(var Z=0,J=U.length,Y=J>>>1;Z<Y;){var ee=2*(Z+1)-1,ae=U[ee],ce=ee+1,pe=U[ce];if(0>i(ae,q))ce<J&&0>i(pe,ae)?(U[Z]=pe,U[ce]=q,Z=ce):(U[Z]=ae,U[ee]=q,Z=ee);else if(ce<J&&0>i(pe,q))U[Z]=pe,U[ce]=q,Z=ce;else break e}}return L}function i(U,L){var q=U.sortIndex-L.sortIndex;return q!==0?q:U.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,f=null,d=3,h=!1,m=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(U){for(var L=t(u);L!==null;){if(L.callback===null)r(u);else if(L.startTime<=U)r(u),L.sortIndex=L.expirationTime,e(l,L);else break;L=t(u)}}function g(U){if(v=!1,b(U),!m)if(t(l)!==null)m=!0,D(w);else{var L=t(u);L!==null&&I(g,L.startTime-U)}}function w(U,L){m=!1,v&&(v=!1,p(A),A=-1),h=!0;var q=d;try{for(b(L),f=t(l);f!==null&&(!(f.expirationTime>L)||U&&!T());){var Z=f.callback;if(typeof Z=="function"){f.callback=null,d=f.priorityLevel;var J=Z(f.expirationTime<=L);L=n.unstable_now(),typeof J=="function"?f.callback=J:f===t(l)&&r(l),b(L)}else r(l);f=t(l)}if(f!==null)var Y=!0;else{var ee=t(u);ee!==null&&I(g,ee.startTime-L),Y=!1}return Y}finally{f=null,d=q,h=!1}}var x=!1,M=null,A=-1,N=5,C=-1;function T(){return!(n.unstable_now()-C<N)}function R(){if(M!==null){var U=n.unstable_now();C=U;var L=!0;try{L=M(!0,U)}finally{L?$():(x=!1,M=null)}}else x=!1}var $;if(typeof S=="function")$=function(){S(R)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,z=B.port2;B.port1.onmessage=R,$=function(){z.postMessage(null)}}else $=function(){y(R,0)};function D(U){M=U,x||(x=!0,$())}function I(U,L){A=y(function(){U(n.unstable_now())},L)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_continueExecution=function(){m||h||(m=!0,D(w))},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(U){switch(d){case 1:case 2:case 3:var L=3;break;default:L=d}var q=d;d=L;try{return U()}finally{d=q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(U,L){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var q=d;d=U;try{return L()}finally{d=q}},n.unstable_scheduleCallback=function(U,L,q){var Z=n.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?Z+q:Z):q=Z,U){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=q+J,U={id:c++,callback:L,priorityLevel:U,startTime:q,expirationTime:J,sortIndex:-1},q>Z?(U.sortIndex=q,e(u,U),t(l)===null&&U===t(u)&&(v?(p(A),A=-1):v=!0,I(g,q-Z))):(U.sortIndex=J,e(l,U),m||h||(m=!0,D(w))),U},n.unstable_shouldYield=T,n.unstable_wrapCallback=function(U){var L=d;return function(){var q=d;d=L;try{return U.apply(this,arguments)}finally{d=q}}}})(_V);SV.exports=_V;var gre=SV.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EV=k,Ao=gre;function ut(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var MV=new Set,Gv={};function Vd(n,e){Qp(n,e),Qp(n+"Capture",e)}function Qp(n,e){for(Gv[n]=e,n=0;n<e.length;n++)MV.add(e[n])}var Su=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bT=Object.prototype.hasOwnProperty,vre=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gL={},vL={};function yre(n){return bT.call(vL,n)?!0:bT.call(gL,n)?!1:vre.test(n)?vL[n]=!0:(gL[n]=!0,!1)}function xre(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function bre(n,e,t,r){if(e===null||typeof e>"u"||xre(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Os(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var zi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){zi[n]=new Os(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];zi[e]=new Os(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){zi[n]=new Os(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){zi[n]=new Os(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){zi[n]=new Os(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){zi[n]=new Os(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){zi[n]=new Os(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){zi[n]=new Os(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){zi[n]=new Os(n,5,!1,n.toLowerCase(),null,!1,!1)});var uP=/[\-:]([a-z])/g;function cP(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(uP,cP);zi[e]=new Os(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(uP,cP);zi[e]=new Os(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(uP,cP);zi[e]=new Os(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){zi[n]=new Os(n,1,!1,n.toLowerCase(),null,!1,!1)});zi.xlinkHref=new Os("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){zi[n]=new Os(n,1,!1,n.toLowerCase(),null,!0,!0)});function fP(n,e,t,r){var i=zi.hasOwnProperty(e)?zi[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(bre(e,t,i,r)&&(t=null),r||i===null?yre(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Bu=EV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,X1=Symbol.for("react.element"),cp=Symbol.for("react.portal"),fp=Symbol.for("react.fragment"),dP=Symbol.for("react.strict_mode"),wT=Symbol.for("react.profiler"),CV=Symbol.for("react.provider"),AV=Symbol.for("react.context"),hP=Symbol.for("react.forward_ref"),ST=Symbol.for("react.suspense"),_T=Symbol.for("react.suspense_list"),pP=Symbol.for("react.memo"),cc=Symbol.for("react.lazy"),TV=Symbol.for("react.offscreen"),yL=Symbol.iterator;function _g(n){return n===null||typeof n!="object"?null:(n=yL&&n[yL]||n["@@iterator"],typeof n=="function"?n:null)}var Mr=Object.assign,z2;function sv(n){if(z2===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);z2=e&&e[1]||""}return`
`+z2+n}var U2=!1;function $2(n,e){if(!n||U2)return"";U2=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){r=u}n.call(e.prototype)}else{try{throw Error()}catch(u){r=u}n()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{U2=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?sv(n):""}function wre(n){switch(n.tag){case 5:return sv(n.type);case 16:return sv("Lazy");case 13:return sv("Suspense");case 19:return sv("SuspenseList");case 0:case 2:case 15:return n=$2(n.type,!1),n;case 11:return n=$2(n.type.render,!1),n;case 1:return n=$2(n.type,!0),n;default:return""}}function ET(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case fp:return"Fragment";case cp:return"Portal";case wT:return"Profiler";case dP:return"StrictMode";case ST:return"Suspense";case _T:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case AV:return(n.displayName||"Context")+".Consumer";case CV:return(n._context.displayName||"Context")+".Provider";case hP:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case pP:return e=n.displayName||null,e!==null?e:ET(n.type)||"Memo";case cc:e=n._payload,n=n._init;try{return ET(n(e))}catch{}}return null}function Sre(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ET(e);case 8:return e===dP?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Gc(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function DV(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _re(n){var e=DV(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Y1(n){n._valueTracker||(n._valueTracker=_re(n))}function NV(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=DV(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function eS(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function MT(n,e){var t=e.checked;return Mr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function xL(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Gc(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function PV(n,e){e=e.checked,e!=null&&fP(n,"checked",e,!1)}function CT(n,e){PV(n,e);var t=Gc(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?AT(n,e.type,t):e.hasOwnProperty("defaultValue")&&AT(n,e.type,Gc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function bL(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function AT(n,e,t){(e!=="number"||eS(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var ov=Array.isArray;function Op(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Gc(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function TT(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ut(91));return Mr({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function wL(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(ut(92));if(ov(t)){if(1<t.length)throw Error(ut(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Gc(t)}}function RV(n,e){var t=Gc(e.value),r=Gc(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function SL(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function OV(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function DT(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?OV(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var K1,kV=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(K1=K1||document.createElement("div"),K1.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=K1.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function qv(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var _v={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ere=["Webkit","ms","Moz","O"];Object.keys(_v).forEach(function(n){Ere.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),_v[e]=_v[n]})});function IV(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||_v.hasOwnProperty(n)&&_v[n]?(""+e).trim():e+"px"}function LV(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=IV(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var Mre=Mr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function NT(n,e){if(e){if(Mre[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ut(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ut(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ut(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ut(62))}}function PT(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var RT=null;function mP(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var OT=null,kp=null,Ip=null;function _L(n){if(n=gy(n)){if(typeof OT!="function")throw Error(ut(280));var e=n.stateNode;e&&(e=J_(e),OT(n.stateNode,n.type,e))}}function FV(n){kp?Ip?Ip.push(n):Ip=[n]:kp=n}function BV(){if(kp){var n=kp,e=Ip;if(Ip=kp=null,_L(n),e)for(n=0;n<e.length;n++)_L(e[n])}}function zV(n,e){return n(e)}function UV(){}var V2=!1;function $V(n,e,t){if(V2)return n(e,t);V2=!0;try{return zV(n,e,t)}finally{V2=!1,(kp!==null||Ip!==null)&&(UV(),BV())}}function Xv(n,e){var t=n.stateNode;if(t===null)return null;var r=J_(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(ut(231,e,typeof t));return t}var kT=!1;if(Su)try{var Eg={};Object.defineProperty(Eg,"passive",{get:function(){kT=!0}}),window.addEventListener("test",Eg,Eg),window.removeEventListener("test",Eg,Eg)}catch{kT=!1}function Cre(n,e,t,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(c){this.onError(c)}}var Ev=!1,tS=null,nS=!1,IT=null,Are={onError:function(n){Ev=!0,tS=n}};function Tre(n,e,t,r,i,s,o,a,l){Ev=!1,tS=null,Cre.apply(Are,arguments)}function Dre(n,e,t,r,i,s,o,a,l){if(Tre.apply(this,arguments),Ev){if(Ev){var u=tS;Ev=!1,tS=null}else throw Error(ut(198));nS||(nS=!0,IT=u)}}function Hd(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function VV(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function EL(n){if(Hd(n)!==n)throw Error(ut(188))}function Nre(n){var e=n.alternate;if(!e){if(e=Hd(n),e===null)throw Error(ut(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return EL(i),n;if(s===r)return EL(i),e;s=s.sibling}throw Error(ut(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(ut(189))}}if(t.alternate!==r)throw Error(ut(190))}if(t.tag!==3)throw Error(ut(188));return t.stateNode.current===t?n:e}function HV(n){return n=Nre(n),n!==null?WV(n):null}function WV(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=WV(n);if(e!==null)return e;n=n.sibling}return null}var jV=Ao.unstable_scheduleCallback,ML=Ao.unstable_cancelCallback,Pre=Ao.unstable_shouldYield,Rre=Ao.unstable_requestPaint,$r=Ao.unstable_now,Ore=Ao.unstable_getCurrentPriorityLevel,gP=Ao.unstable_ImmediatePriority,GV=Ao.unstable_UserBlockingPriority,rS=Ao.unstable_NormalPriority,kre=Ao.unstable_LowPriority,qV=Ao.unstable_IdlePriority,X_=null,El=null;function Ire(n){if(El&&typeof El.onCommitFiberRoot=="function")try{El.onCommitFiberRoot(X_,n,void 0,(n.current.flags&128)===128)}catch{}}var Da=Math.clz32?Math.clz32:Bre,Lre=Math.log,Fre=Math.LN2;function Bre(n){return n>>>=0,n===0?32:31-(Lre(n)/Fre|0)|0}var Z1=64,J1=4194304;function av(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function iS(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=av(a):(s&=o,s!==0&&(r=av(s)))}else o=t&~i,o!==0?r=av(o):s!==0&&(r=av(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Da(e),i=1<<t,r|=n[t],e&=~i;return r}function zre(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ure(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Da(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=zre(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function LT(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function XV(){var n=Z1;return Z1<<=1,!(Z1&4194240)&&(Z1=64),n}function H2(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function py(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Da(e),n[e]=t}function $re(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Da(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function vP(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Da(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var jn=0;function YV(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var KV,yP,ZV,JV,QV,FT=!1,Q1=[],Nc=null,Pc=null,Rc=null,Yv=new Map,Kv=new Map,gc=[],Vre="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function CL(n,e){switch(n){case"focusin":case"focusout":Nc=null;break;case"dragenter":case"dragleave":Pc=null;break;case"mouseover":case"mouseout":Rc=null;break;case"pointerover":case"pointerout":Yv.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kv.delete(e.pointerId)}}function Mg(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=gy(e),e!==null&&yP(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function Hre(n,e,t,r,i){switch(e){case"focusin":return Nc=Mg(Nc,n,e,t,r,i),!0;case"dragenter":return Pc=Mg(Pc,n,e,t,r,i),!0;case"mouseover":return Rc=Mg(Rc,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return Yv.set(s,Mg(Yv.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Kv.set(s,Mg(Kv.get(s)||null,n,e,t,r,i)),!0}return!1}function eH(n){var e=td(n.target);if(e!==null){var t=Hd(e);if(t!==null){if(e=t.tag,e===13){if(e=VV(t),e!==null){n.blockedOn=e,QV(n.priority,function(){ZV(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function gw(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=BT(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);RT=r,t.target.dispatchEvent(r),RT=null}else return e=gy(t),e!==null&&yP(e),n.blockedOn=t,!1;e.shift()}return!0}function AL(n,e,t){gw(n)&&t.delete(e)}function Wre(){FT=!1,Nc!==null&&gw(Nc)&&(Nc=null),Pc!==null&&gw(Pc)&&(Pc=null),Rc!==null&&gw(Rc)&&(Rc=null),Yv.forEach(AL),Kv.forEach(AL)}function Cg(n,e){n.blockedOn===e&&(n.blockedOn=null,FT||(FT=!0,Ao.unstable_scheduleCallback(Ao.unstable_NormalPriority,Wre)))}function Zv(n){function e(i){return Cg(i,n)}if(0<Q1.length){Cg(Q1[0],n);for(var t=1;t<Q1.length;t++){var r=Q1[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Nc!==null&&Cg(Nc,n),Pc!==null&&Cg(Pc,n),Rc!==null&&Cg(Rc,n),Yv.forEach(e),Kv.forEach(e),t=0;t<gc.length;t++)r=gc[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<gc.length&&(t=gc[0],t.blockedOn===null);)eH(t),t.blockedOn===null&&gc.shift()}var Lp=Bu.ReactCurrentBatchConfig,sS=!0;function jre(n,e,t,r){var i=jn,s=Lp.transition;Lp.transition=null;try{jn=1,xP(n,e,t,r)}finally{jn=i,Lp.transition=s}}function Gre(n,e,t,r){var i=jn,s=Lp.transition;Lp.transition=null;try{jn=4,xP(n,e,t,r)}finally{jn=i,Lp.transition=s}}function xP(n,e,t,r){if(sS){var i=BT(n,e,t,r);if(i===null)Q2(n,e,r,oS,t),CL(n,r);else if(Hre(i,n,e,t,r))r.stopPropagation();else if(CL(n,r),e&4&&-1<Vre.indexOf(n)){for(;i!==null;){var s=gy(i);if(s!==null&&KV(s),s=BT(n,e,t,r),s===null&&Q2(n,e,r,oS,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else Q2(n,e,r,null,t)}}var oS=null;function BT(n,e,t,r){if(oS=null,n=mP(r),n=td(n),n!==null)if(e=Hd(n),e===null)n=null;else if(t=e.tag,t===13){if(n=VV(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return oS=n,null}function tH(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ore()){case gP:return 1;case GV:return 4;case rS:case kre:return 16;case qV:return 536870912;default:return 16}default:return 16}}var bc=null,bP=null,vw=null;function nH(){if(vw)return vw;var n,e=bP,t=e.length,r,i="value"in bc?bc.value:bc.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return vw=i.slice(n,1<r?1-r:void 0)}function yw(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function ex(){return!0}function TL(){return!1}function Po(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ex:TL,this.isPropagationStopped=TL,this}return Mr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=ex)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=ex)},persist:function(){},isPersistent:ex}),e}var Tm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wP=Po(Tm),my=Mr({},Tm,{view:0,detail:0}),qre=Po(my),W2,j2,Ag,Y_=Mr({},my,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:SP,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ag&&(Ag&&n.type==="mousemove"?(W2=n.screenX-Ag.screenX,j2=n.screenY-Ag.screenY):j2=W2=0,Ag=n),W2)},movementY:function(n){return"movementY"in n?n.movementY:j2}}),DL=Po(Y_),Xre=Mr({},Y_,{dataTransfer:0}),Yre=Po(Xre),Kre=Mr({},my,{relatedTarget:0}),G2=Po(Kre),Zre=Mr({},Tm,{animationName:0,elapsedTime:0,pseudoElement:0}),Jre=Po(Zre),Qre=Mr({},Tm,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),eie=Po(Qre),tie=Mr({},Tm,{data:0}),NL=Po(tie),nie={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rie={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iie={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sie(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=iie[n])?!!e[n]:!1}function SP(){return sie}var oie=Mr({},my,{key:function(n){if(n.key){var e=nie[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=yw(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?rie[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:SP,charCode:function(n){return n.type==="keypress"?yw(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?yw(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),aie=Po(oie),lie=Mr({},Y_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),PL=Po(lie),uie=Mr({},my,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:SP}),cie=Po(uie),fie=Mr({},Tm,{propertyName:0,elapsedTime:0,pseudoElement:0}),die=Po(fie),hie=Mr({},Y_,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),pie=Po(hie),mie=[9,13,27,32],_P=Su&&"CompositionEvent"in window,Mv=null;Su&&"documentMode"in document&&(Mv=document.documentMode);var gie=Su&&"TextEvent"in window&&!Mv,rH=Su&&(!_P||Mv&&8<Mv&&11>=Mv),RL=" ",OL=!1;function iH(n,e){switch(n){case"keyup":return mie.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sH(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var dp=!1;function vie(n,e){switch(n){case"compositionend":return sH(e);case"keypress":return e.which!==32?null:(OL=!0,RL);case"textInput":return n=e.data,n===RL&&OL?null:n;default:return null}}function yie(n,e){if(dp)return n==="compositionend"||!_P&&iH(n,e)?(n=nH(),vw=bP=bc=null,dp=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rH&&e.locale!=="ko"?null:e.data;default:return null}}var xie={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kL(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!xie[n.type]:e==="textarea"}function oH(n,e,t,r){FV(r),e=aS(e,"onChange"),0<e.length&&(t=new wP("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Cv=null,Jv=null;function bie(n){vH(n,0)}function K_(n){var e=mp(n);if(NV(e))return n}function wie(n,e){if(n==="change")return e}var aH=!1;if(Su){var q2;if(Su){var X2="oninput"in document;if(!X2){var IL=document.createElement("div");IL.setAttribute("oninput","return;"),X2=typeof IL.oninput=="function"}q2=X2}else q2=!1;aH=q2&&(!document.documentMode||9<document.documentMode)}function LL(){Cv&&(Cv.detachEvent("onpropertychange",lH),Jv=Cv=null)}function lH(n){if(n.propertyName==="value"&&K_(Jv)){var e=[];oH(e,Jv,n,mP(n)),$V(bie,e)}}function Sie(n,e,t){n==="focusin"?(LL(),Cv=e,Jv=t,Cv.attachEvent("onpropertychange",lH)):n==="focusout"&&LL()}function _ie(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return K_(Jv)}function Eie(n,e){if(n==="click")return K_(e)}function Mie(n,e){if(n==="input"||n==="change")return K_(e)}function Cie(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var ka=typeof Object.is=="function"?Object.is:Cie;function Qv(n,e){if(ka(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!bT.call(e,i)||!ka(n[i],e[i]))return!1}return!0}function FL(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function BL(n,e){var t=FL(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=FL(t)}}function uH(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?uH(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function cH(){for(var n=window,e=eS();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=eS(n.document)}return e}function EP(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function Aie(n){var e=cH(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&uH(t.ownerDocument.documentElement,t)){if(r!==null&&EP(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=BL(t,s);var o=BL(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Tie=Su&&"documentMode"in document&&11>=document.documentMode,hp=null,zT=null,Av=null,UT=!1;function zL(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;UT||hp==null||hp!==eS(r)||(r=hp,"selectionStart"in r&&EP(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Av&&Qv(Av,r)||(Av=r,r=aS(zT,"onSelect"),0<r.length&&(e=new wP("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=hp)))}function tx(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var pp={animationend:tx("Animation","AnimationEnd"),animationiteration:tx("Animation","AnimationIteration"),animationstart:tx("Animation","AnimationStart"),transitionend:tx("Transition","TransitionEnd")},Y2={},fH={};Su&&(fH=document.createElement("div").style,"AnimationEvent"in window||(delete pp.animationend.animation,delete pp.animationiteration.animation,delete pp.animationstart.animation),"TransitionEvent"in window||delete pp.transitionend.transition);function Z_(n){if(Y2[n])return Y2[n];if(!pp[n])return n;var e=pp[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in fH)return Y2[n]=e[t];return n}var dH=Z_("animationend"),hH=Z_("animationiteration"),pH=Z_("animationstart"),mH=Z_("transitionend"),gH=new Map,UL="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function uf(n,e){gH.set(n,e),Vd(e,[n])}for(var K2=0;K2<UL.length;K2++){var Z2=UL[K2],Die=Z2.toLowerCase(),Nie=Z2[0].toUpperCase()+Z2.slice(1);uf(Die,"on"+Nie)}uf(dH,"onAnimationEnd");uf(hH,"onAnimationIteration");uf(pH,"onAnimationStart");uf("dblclick","onDoubleClick");uf("focusin","onFocus");uf("focusout","onBlur");uf(mH,"onTransitionEnd");Qp("onMouseEnter",["mouseout","mouseover"]);Qp("onMouseLeave",["mouseout","mouseover"]);Qp("onPointerEnter",["pointerout","pointerover"]);Qp("onPointerLeave",["pointerout","pointerover"]);Vd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vd("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pie=new Set("cancel close invalid load scroll toggle".split(" ").concat(lv));function $L(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,Dre(r,e,void 0,n),n.currentTarget=null}function vH(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;$L(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;$L(i,a,u),s=l}}}if(nS)throw n=IT,nS=!1,IT=null,n}function or(n,e){var t=e[jT];t===void 0&&(t=e[jT]=new Set);var r=n+"__bubble";t.has(r)||(yH(e,n,2,!1),t.add(r))}function J2(n,e,t){var r=0;e&&(r|=4),yH(t,n,r,e)}var nx="_reactListening"+Math.random().toString(36).slice(2);function e0(n){if(!n[nx]){n[nx]=!0,MV.forEach(function(t){t!=="selectionchange"&&(Pie.has(t)||J2(t,!1,n),J2(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[nx]||(e[nx]=!0,J2("selectionchange",!1,e))}}function yH(n,e,t,r){switch(tH(e)){case 1:var i=jre;break;case 4:i=Gre;break;default:i=xP}t=i.bind(null,e,t,n),i=void 0,!kT||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function Q2(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=td(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}$V(function(){var u=s,c=mP(t),f=[];e:{var d=gH.get(n);if(d!==void 0){var h=wP,m=n;switch(n){case"keypress":if(yw(t)===0)break e;case"keydown":case"keyup":h=aie;break;case"focusin":m="focus",h=G2;break;case"focusout":m="blur",h=G2;break;case"beforeblur":case"afterblur":h=G2;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=DL;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Yre;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=cie;break;case dH:case hH:case pH:h=Jre;break;case mH:h=die;break;case"scroll":h=qre;break;case"wheel":h=pie;break;case"copy":case"cut":case"paste":h=eie;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=PL}var v=(e&4)!==0,y=!v&&n==="scroll",p=v?d!==null?d+"Capture":null:d;v=[];for(var S=u,b;S!==null;){b=S;var g=b.stateNode;if(b.tag===5&&g!==null&&(b=g,p!==null&&(g=Xv(S,p),g!=null&&v.push(t0(S,g,b)))),y)break;S=S.return}0<v.length&&(d=new h(d,m,null,t,c),f.push({event:d,listeners:v}))}}if(!(e&7)){e:{if(d=n==="mouseover"||n==="pointerover",h=n==="mouseout"||n==="pointerout",d&&t!==RT&&(m=t.relatedTarget||t.fromElement)&&(td(m)||m[_u]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(m=t.relatedTarget||t.toElement,h=u,m=m?td(m):null,m!==null&&(y=Hd(m),m!==y||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=u),h!==m)){if(v=DL,g="onMouseLeave",p="onMouseEnter",S="mouse",(n==="pointerout"||n==="pointerover")&&(v=PL,g="onPointerLeave",p="onPointerEnter",S="pointer"),y=h==null?d:mp(h),b=m==null?d:mp(m),d=new v(g,S+"leave",h,t,c),d.target=y,d.relatedTarget=b,g=null,td(c)===u&&(v=new v(p,S+"enter",m,t,c),v.target=b,v.relatedTarget=y,g=v),y=g,h&&m)t:{for(v=h,p=m,S=0,b=v;b;b=yh(b))S++;for(b=0,g=p;g;g=yh(g))b++;for(;0<S-b;)v=yh(v),S--;for(;0<b-S;)p=yh(p),b--;for(;S--;){if(v===p||p!==null&&v===p.alternate)break t;v=yh(v),p=yh(p)}v=null}else v=null;h!==null&&VL(f,d,h,v,!1),m!==null&&y!==null&&VL(f,y,m,v,!0)}}e:{if(d=u?mp(u):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var w=wie;else if(kL(d))if(aH)w=Mie;else{w=_ie;var x=Sie}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(w=Eie);if(w&&(w=w(n,u))){oH(f,w,t,c);break e}x&&x(n,d,u),n==="focusout"&&(x=d._wrapperState)&&x.controlled&&d.type==="number"&&AT(d,"number",d.value)}switch(x=u?mp(u):window,n){case"focusin":(kL(x)||x.contentEditable==="true")&&(hp=x,zT=u,Av=null);break;case"focusout":Av=zT=hp=null;break;case"mousedown":UT=!0;break;case"contextmenu":case"mouseup":case"dragend":UT=!1,zL(f,t,c);break;case"selectionchange":if(Tie)break;case"keydown":case"keyup":zL(f,t,c)}var M;if(_P)e:{switch(n){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else dp?iH(n,t)&&(A="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(A="onCompositionStart");A&&(rH&&t.locale!=="ko"&&(dp||A!=="onCompositionStart"?A==="onCompositionEnd"&&dp&&(M=nH()):(bc=c,bP="value"in bc?bc.value:bc.textContent,dp=!0)),x=aS(u,A),0<x.length&&(A=new NL(A,n,null,t,c),f.push({event:A,listeners:x}),M?A.data=M:(M=sH(t),M!==null&&(A.data=M)))),(M=gie?vie(n,t):yie(n,t))&&(u=aS(u,"onBeforeInput"),0<u.length&&(c=new NL("onBeforeInput","beforeinput",null,t,c),f.push({event:c,listeners:u}),c.data=M))}vH(f,e)})}function t0(n,e,t){return{instance:n,listener:e,currentTarget:t}}function aS(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Xv(n,t),s!=null&&r.unshift(t0(n,s,i)),s=Xv(n,e),s!=null&&r.push(t0(n,s,i))),n=n.return}return r}function yh(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function VL(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Xv(t,s),l!=null&&o.unshift(t0(t,l,a))):i||(l=Xv(t,s),l!=null&&o.push(t0(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var Rie=/\r\n?/g,Oie=/\u0000|\uFFFD/g;function HL(n){return(typeof n=="string"?n:""+n).replace(Rie,`
`).replace(Oie,"")}function rx(n,e,t){if(e=HL(e),HL(n)!==e&&t)throw Error(ut(425))}function lS(){}var $T=null,VT=null;function HT(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var WT=typeof setTimeout=="function"?setTimeout:void 0,kie=typeof clearTimeout=="function"?clearTimeout:void 0,WL=typeof Promise=="function"?Promise:void 0,Iie=typeof queueMicrotask=="function"?queueMicrotask:typeof WL<"u"?function(n){return WL.resolve(null).then(n).catch(Lie)}:WT;function Lie(n){setTimeout(function(){throw n})}function eC(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),Zv(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);Zv(e)}function Oc(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function jL(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Dm=Math.random().toString(36).slice(2),pl="__reactFiber$"+Dm,n0="__reactProps$"+Dm,_u="__reactContainer$"+Dm,jT="__reactEvents$"+Dm,Fie="__reactListeners$"+Dm,Bie="__reactHandles$"+Dm;function td(n){var e=n[pl];if(e)return e;for(var t=n.parentNode;t;){if(e=t[_u]||t[pl]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=jL(n);n!==null;){if(t=n[pl])return t;n=jL(n)}return e}n=t,t=n.parentNode}return null}function gy(n){return n=n[pl]||n[_u],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function mp(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(ut(33))}function J_(n){return n[n0]||null}var GT=[],gp=-1;function cf(n){return{current:n}}function ur(n){0>gp||(n.current=GT[gp],GT[gp]=null,gp--)}function ir(n,e){gp++,GT[gp]=n.current,n.current=e}var qc={},ls=cf(qc),Ks=cf(!1),Md=qc;function em(n,e){var t=n.type.contextTypes;if(!t)return qc;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Zs(n){return n=n.childContextTypes,n!=null}function uS(){ur(Ks),ur(ls)}function GL(n,e,t){if(ls.current!==qc)throw Error(ut(168));ir(ls,e),ir(Ks,t)}function xH(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ut(108,Sre(n)||"Unknown",i));return Mr({},t,r)}function cS(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||qc,Md=ls.current,ir(ls,n),ir(Ks,Ks.current),!0}function qL(n,e,t){var r=n.stateNode;if(!r)throw Error(ut(169));t?(n=xH(n,e,Md),r.__reactInternalMemoizedMergedChildContext=n,ur(Ks),ur(ls),ir(ls,n)):ur(Ks),ir(Ks,t)}var ou=null,Q_=!1,tC=!1;function bH(n){ou===null?ou=[n]:ou.push(n)}function zie(n){Q_=!0,bH(n)}function ff(){if(!tC&&ou!==null){tC=!0;var n=0,e=jn;try{var t=ou;for(jn=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}ou=null,Q_=!1}catch(i){throw ou!==null&&(ou=ou.slice(n+1)),jV(gP,ff),i}finally{jn=e,tC=!1}}return null}var vp=[],yp=0,fS=null,dS=0,Go=[],qo=0,Cd=null,cu=1,fu="";function Vf(n,e){vp[yp++]=dS,vp[yp++]=fS,fS=n,dS=e}function wH(n,e,t){Go[qo++]=cu,Go[qo++]=fu,Go[qo++]=Cd,Cd=n;var r=cu;n=fu;var i=32-Da(r)-1;r&=~(1<<i),t+=1;var s=32-Da(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,cu=1<<32-Da(e)+i|t<<i|r,fu=s+n}else cu=1<<s|t<<i|r,fu=n}function MP(n){n.return!==null&&(Vf(n,1),wH(n,1,0))}function CP(n){for(;n===fS;)fS=vp[--yp],vp[yp]=null,dS=vp[--yp],vp[yp]=null;for(;n===Cd;)Cd=Go[--qo],Go[qo]=null,fu=Go[--qo],Go[qo]=null,cu=Go[--qo],Go[qo]=null}var _o=null,bo=null,hr=!1,Ea=null;function SH(n,e){var t=Jo(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function XL(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,_o=n,bo=Oc(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,_o=n,bo=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Cd!==null?{id:cu,overflow:fu}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Jo(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,_o=n,bo=null,!0):!1;default:return!1}}function qT(n){return(n.mode&1)!==0&&(n.flags&128)===0}function XT(n){if(hr){var e=bo;if(e){var t=e;if(!XL(n,e)){if(qT(n))throw Error(ut(418));e=Oc(t.nextSibling);var r=_o;e&&XL(n,e)?SH(r,t):(n.flags=n.flags&-4097|2,hr=!1,_o=n)}}else{if(qT(n))throw Error(ut(418));n.flags=n.flags&-4097|2,hr=!1,_o=n}}}function YL(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;_o=n}function ix(n){if(n!==_o)return!1;if(!hr)return YL(n),hr=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!HT(n.type,n.memoizedProps)),e&&(e=bo)){if(qT(n))throw _H(),Error(ut(418));for(;e;)SH(n,e),e=Oc(e.nextSibling)}if(YL(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(ut(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){bo=Oc(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}bo=null}}else bo=_o?Oc(n.stateNode.nextSibling):null;return!0}function _H(){for(var n=bo;n;)n=Oc(n.nextSibling)}function tm(){bo=_o=null,hr=!1}function AP(n){Ea===null?Ea=[n]:Ea.push(n)}var Uie=Bu.ReactCurrentBatchConfig;function wa(n,e){if(n&&n.defaultProps){e=Mr({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var hS=cf(null),pS=null,xp=null,TP=null;function DP(){TP=xp=pS=null}function NP(n){var e=hS.current;ur(hS),n._currentValue=e}function YT(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Fp(n,e){pS=n,TP=xp=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Gs=!0),n.firstContext=null)}function sa(n){var e=n._currentValue;if(TP!==n)if(n={context:n,memoizedValue:e,next:null},xp===null){if(pS===null)throw Error(ut(308));xp=n,pS.dependencies={lanes:0,firstContext:n}}else xp=xp.next=n;return e}var nd=null;function PP(n){nd===null?nd=[n]:nd.push(n)}function EH(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,PP(e)):(t.next=i.next,i.next=t),e.interleaved=t,Eu(n,r)}function Eu(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var fc=!1;function RP(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function MH(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function gu(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function kc(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Tn&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Eu(n,t)}return i=r.interleaved,i===null?(e.next=e,PP(r)):(e.next=i.next,i.next=e),r.interleaved=e,Eu(n,t)}function xw(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,vP(n,t)}}function KL(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function mS(n,e,t,r){var i=n.updateQueue;fc=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=n.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,c=u=l=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=n,v=a;switch(d=e,h=t,v.tag){case 1:if(m=v.payload,typeof m=="function"){f=m.call(h,f,d);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,d=typeof m=="function"?m.call(h,f,d):m,d==null)break e;f=Mr({},f,d);break e;case 2:fc=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=h,l=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Td|=o,n.lanes=o,n.memoizedState=f}}function ZL(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(ut(191,i));i.call(r)}}}var CH=new EV.Component().refs;function KT(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Mr({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var eE={isMounted:function(n){return(n=n._reactInternals)?Hd(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Cs(),i=Lc(n),s=gu(r,i);s.payload=e,t!=null&&(s.callback=t),e=kc(n,s,i),e!==null&&(Na(e,n,i,r),xw(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Cs(),i=Lc(n),s=gu(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=kc(n,s,i),e!==null&&(Na(e,n,i,r),xw(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Cs(),r=Lc(n),i=gu(t,r);i.tag=2,e!=null&&(i.callback=e),e=kc(n,i,r),e!==null&&(Na(e,n,r,t),xw(e,n,r))}};function JL(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Qv(t,r)||!Qv(i,s):!0}function AH(n,e,t){var r=!1,i=qc,s=e.contextType;return typeof s=="object"&&s!==null?s=sa(s):(i=Zs(e)?Md:ls.current,r=e.contextTypes,s=(r=r!=null)?em(n,i):qc),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=eE,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function QL(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&eE.enqueueReplaceState(e,e.state,null)}function ZT(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=CH,RP(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=sa(s):(s=Zs(e)?Md:ls.current,i.context=em(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(KT(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&eE.enqueueReplaceState(i,i.state,null),mS(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Tg(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(ut(309));var r=t.stateNode}if(!r)throw Error(ut(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===CH&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(ut(284));if(!t._owner)throw Error(ut(290,n))}return n}function sx(n,e){throw n=Object.prototype.toString.call(e),Error(ut(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function eF(n){var e=n._init;return e(n._payload)}function TH(n){function e(p,S){if(n){var b=p.deletions;b===null?(p.deletions=[S],p.flags|=16):b.push(S)}}function t(p,S){if(!n)return null;for(;S!==null;)e(p,S),S=S.sibling;return null}function r(p,S){for(p=new Map;S!==null;)S.key!==null?p.set(S.key,S):p.set(S.index,S),S=S.sibling;return p}function i(p,S){return p=Fc(p,S),p.index=0,p.sibling=null,p}function s(p,S,b){return p.index=b,n?(b=p.alternate,b!==null?(b=b.index,b<S?(p.flags|=2,S):b):(p.flags|=2,S)):(p.flags|=1048576,S)}function o(p){return n&&p.alternate===null&&(p.flags|=2),p}function a(p,S,b,g){return S===null||S.tag!==6?(S=lC(b,p.mode,g),S.return=p,S):(S=i(S,b),S.return=p,S)}function l(p,S,b,g){var w=b.type;return w===fp?c(p,S,b.props.children,g,b.key):S!==null&&(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===cc&&eF(w)===S.type)?(g=i(S,b.props),g.ref=Tg(p,S,b),g.return=p,g):(g=Mw(b.type,b.key,b.props,null,p.mode,g),g.ref=Tg(p,S,b),g.return=p,g)}function u(p,S,b,g){return S===null||S.tag!==4||S.stateNode.containerInfo!==b.containerInfo||S.stateNode.implementation!==b.implementation?(S=uC(b,p.mode,g),S.return=p,S):(S=i(S,b.children||[]),S.return=p,S)}function c(p,S,b,g,w){return S===null||S.tag!==7?(S=hd(b,p.mode,g,w),S.return=p,S):(S=i(S,b),S.return=p,S)}function f(p,S,b){if(typeof S=="string"&&S!==""||typeof S=="number")return S=lC(""+S,p.mode,b),S.return=p,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case X1:return b=Mw(S.type,S.key,S.props,null,p.mode,b),b.ref=Tg(p,null,S),b.return=p,b;case cp:return S=uC(S,p.mode,b),S.return=p,S;case cc:var g=S._init;return f(p,g(S._payload),b)}if(ov(S)||_g(S))return S=hd(S,p.mode,b,null),S.return=p,S;sx(p,S)}return null}function d(p,S,b,g){var w=S!==null?S.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return w!==null?null:a(p,S,""+b,g);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case X1:return b.key===w?l(p,S,b,g):null;case cp:return b.key===w?u(p,S,b,g):null;case cc:return w=b._init,d(p,S,w(b._payload),g)}if(ov(b)||_g(b))return w!==null?null:c(p,S,b,g,null);sx(p,b)}return null}function h(p,S,b,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return p=p.get(b)||null,a(S,p,""+g,w);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case X1:return p=p.get(g.key===null?b:g.key)||null,l(S,p,g,w);case cp:return p=p.get(g.key===null?b:g.key)||null,u(S,p,g,w);case cc:var x=g._init;return h(p,S,b,x(g._payload),w)}if(ov(g)||_g(g))return p=p.get(b)||null,c(S,p,g,w,null);sx(S,g)}return null}function m(p,S,b,g){for(var w=null,x=null,M=S,A=S=0,N=null;M!==null&&A<b.length;A++){M.index>A?(N=M,M=null):N=M.sibling;var C=d(p,M,b[A],g);if(C===null){M===null&&(M=N);break}n&&M&&C.alternate===null&&e(p,M),S=s(C,S,A),x===null?w=C:x.sibling=C,x=C,M=N}if(A===b.length)return t(p,M),hr&&Vf(p,A),w;if(M===null){for(;A<b.length;A++)M=f(p,b[A],g),M!==null&&(S=s(M,S,A),x===null?w=M:x.sibling=M,x=M);return hr&&Vf(p,A),w}for(M=r(p,M);A<b.length;A++)N=h(M,p,A,b[A],g),N!==null&&(n&&N.alternate!==null&&M.delete(N.key===null?A:N.key),S=s(N,S,A),x===null?w=N:x.sibling=N,x=N);return n&&M.forEach(function(T){return e(p,T)}),hr&&Vf(p,A),w}function v(p,S,b,g){var w=_g(b);if(typeof w!="function")throw Error(ut(150));if(b=w.call(b),b==null)throw Error(ut(151));for(var x=w=null,M=S,A=S=0,N=null,C=b.next();M!==null&&!C.done;A++,C=b.next()){M.index>A?(N=M,M=null):N=M.sibling;var T=d(p,M,C.value,g);if(T===null){M===null&&(M=N);break}n&&M&&T.alternate===null&&e(p,M),S=s(T,S,A),x===null?w=T:x.sibling=T,x=T,M=N}if(C.done)return t(p,M),hr&&Vf(p,A),w;if(M===null){for(;!C.done;A++,C=b.next())C=f(p,C.value,g),C!==null&&(S=s(C,S,A),x===null?w=C:x.sibling=C,x=C);return hr&&Vf(p,A),w}for(M=r(p,M);!C.done;A++,C=b.next())C=h(M,p,A,C.value,g),C!==null&&(n&&C.alternate!==null&&M.delete(C.key===null?A:C.key),S=s(C,S,A),x===null?w=C:x.sibling=C,x=C);return n&&M.forEach(function(R){return e(p,R)}),hr&&Vf(p,A),w}function y(p,S,b,g){if(typeof b=="object"&&b!==null&&b.type===fp&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case X1:e:{for(var w=b.key,x=S;x!==null;){if(x.key===w){if(w=b.type,w===fp){if(x.tag===7){t(p,x.sibling),S=i(x,b.props.children),S.return=p,p=S;break e}}else if(x.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===cc&&eF(w)===x.type){t(p,x.sibling),S=i(x,b.props),S.ref=Tg(p,x,b),S.return=p,p=S;break e}t(p,x);break}else e(p,x);x=x.sibling}b.type===fp?(S=hd(b.props.children,p.mode,g,b.key),S.return=p,p=S):(g=Mw(b.type,b.key,b.props,null,p.mode,g),g.ref=Tg(p,S,b),g.return=p,p=g)}return o(p);case cp:e:{for(x=b.key;S!==null;){if(S.key===x)if(S.tag===4&&S.stateNode.containerInfo===b.containerInfo&&S.stateNode.implementation===b.implementation){t(p,S.sibling),S=i(S,b.children||[]),S.return=p,p=S;break e}else{t(p,S);break}else e(p,S);S=S.sibling}S=uC(b,p.mode,g),S.return=p,p=S}return o(p);case cc:return x=b._init,y(p,S,x(b._payload),g)}if(ov(b))return m(p,S,b,g);if(_g(b))return v(p,S,b,g);sx(p,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,S!==null&&S.tag===6?(t(p,S.sibling),S=i(S,b),S.return=p,p=S):(t(p,S),S=lC(b,p.mode,g),S.return=p,p=S),o(p)):t(p,S)}return y}var nm=TH(!0),DH=TH(!1),vy={},Ml=cf(vy),r0=cf(vy),i0=cf(vy);function rd(n){if(n===vy)throw Error(ut(174));return n}function OP(n,e){switch(ir(i0,e),ir(r0,n),ir(Ml,vy),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:DT(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=DT(e,n)}ur(Ml),ir(Ml,e)}function rm(){ur(Ml),ur(r0),ur(i0)}function NH(n){rd(i0.current);var e=rd(Ml.current),t=DT(e,n.type);e!==t&&(ir(r0,n),ir(Ml,t))}function kP(n){r0.current===n&&(ur(Ml),ur(r0))}var br=cf(0);function gS(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var nC=[];function IP(){for(var n=0;n<nC.length;n++)nC[n]._workInProgressVersionPrimary=null;nC.length=0}var bw=Bu.ReactCurrentDispatcher,rC=Bu.ReactCurrentBatchConfig,Ad=0,_r=null,ti=null,vi=null,vS=!1,Tv=!1,s0=0,$ie=0;function qi(){throw Error(ut(321))}function LP(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!ka(n[t],e[t]))return!1;return!0}function FP(n,e,t,r,i,s){if(Ad=s,_r=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,bw.current=n===null||n.memoizedState===null?jie:Gie,n=t(r,i),Tv){s=0;do{if(Tv=!1,s0=0,25<=s)throw Error(ut(301));s+=1,vi=ti=null,e.updateQueue=null,bw.current=qie,n=t(r,i)}while(Tv)}if(bw.current=yS,e=ti!==null&&ti.next!==null,Ad=0,vi=ti=_r=null,vS=!1,e)throw Error(ut(300));return n}function BP(){var n=s0!==0;return s0=0,n}function cl(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vi===null?_r.memoizedState=vi=n:vi=vi.next=n,vi}function oa(){if(ti===null){var n=_r.alternate;n=n!==null?n.memoizedState:null}else n=ti.next;var e=vi===null?_r.memoizedState:vi.next;if(e!==null)vi=e,ti=n;else{if(n===null)throw Error(ut(310));ti=n,n={memoizedState:ti.memoizedState,baseState:ti.baseState,baseQueue:ti.baseQueue,queue:ti.queue,next:null},vi===null?_r.memoizedState=vi=n:vi=vi.next=n}return vi}function o0(n,e){return typeof e=="function"?e(n):e}function iC(n){var e=oa(),t=e.queue;if(t===null)throw Error(ut(311));t.lastRenderedReducer=n;var r=ti,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((Ad&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:n(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,_r.lanes|=c,Td|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,ka(r,e.memoizedState)||(Gs=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,_r.lanes|=s,Td|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function sC(n){var e=oa(),t=e.queue;if(t===null)throw Error(ut(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);ka(s,e.memoizedState)||(Gs=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function PH(){}function RH(n,e){var t=_r,r=oa(),i=e(),s=!ka(r.memoizedState,i);if(s&&(r.memoizedState=i,Gs=!0),r=r.queue,zP(IH.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||vi!==null&&vi.memoizedState.tag&1){if(t.flags|=2048,a0(9,kH.bind(null,t,r,i,e),void 0,null),xi===null)throw Error(ut(349));Ad&30||OH(t,e,i)}return i}function OH(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=_r.updateQueue,e===null?(e={lastEffect:null,stores:null},_r.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function kH(n,e,t,r){e.value=t,e.getSnapshot=r,LH(e)&&FH(n)}function IH(n,e,t){return t(function(){LH(e)&&FH(n)})}function LH(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!ka(n,t)}catch{return!0}}function FH(n){var e=Eu(n,1);e!==null&&Na(e,n,1,-1)}function tF(n){var e=cl();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o0,lastRenderedState:n},e.queue=n,n=n.dispatch=Wie.bind(null,_r,n),[e.memoizedState,n]}function a0(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=_r.updateQueue,e===null?(e={lastEffect:null,stores:null},_r.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function BH(){return oa().memoizedState}function ww(n,e,t,r){var i=cl();_r.flags|=n,i.memoizedState=a0(1|e,t,void 0,r===void 0?null:r)}function tE(n,e,t,r){var i=oa();r=r===void 0?null:r;var s=void 0;if(ti!==null){var o=ti.memoizedState;if(s=o.destroy,r!==null&&LP(r,o.deps)){i.memoizedState=a0(e,t,s,r);return}}_r.flags|=n,i.memoizedState=a0(1|e,t,s,r)}function nF(n,e){return ww(8390656,8,n,e)}function zP(n,e){return tE(2048,8,n,e)}function zH(n,e){return tE(4,2,n,e)}function UH(n,e){return tE(4,4,n,e)}function $H(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function VH(n,e,t){return t=t!=null?t.concat([n]):null,tE(4,4,$H.bind(null,e,n),t)}function UP(){}function HH(n,e){var t=oa();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&LP(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function WH(n,e){var t=oa();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&LP(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function jH(n,e,t){return Ad&21?(ka(t,e)||(t=XV(),_r.lanes|=t,Td|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Gs=!0),n.memoizedState=t)}function Vie(n,e){var t=jn;jn=t!==0&&4>t?t:4,n(!0);var r=rC.transition;rC.transition={};try{n(!1),e()}finally{jn=t,rC.transition=r}}function GH(){return oa().memoizedState}function Hie(n,e,t){var r=Lc(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},qH(n))XH(e,t);else if(t=EH(n,e,t,r),t!==null){var i=Cs();Na(t,n,r,i),YH(t,e,r)}}function Wie(n,e,t){var r=Lc(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(qH(n))XH(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,ka(a,o)){var l=e.interleaved;l===null?(i.next=i,PP(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=EH(n,e,i,r),t!==null&&(i=Cs(),Na(t,n,r,i),YH(t,e,r))}}function qH(n){var e=n.alternate;return n===_r||e!==null&&e===_r}function XH(n,e){Tv=vS=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function YH(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,vP(n,t)}}var yS={readContext:sa,useCallback:qi,useContext:qi,useEffect:qi,useImperativeHandle:qi,useInsertionEffect:qi,useLayoutEffect:qi,useMemo:qi,useReducer:qi,useRef:qi,useState:qi,useDebugValue:qi,useDeferredValue:qi,useTransition:qi,useMutableSource:qi,useSyncExternalStore:qi,useId:qi,unstable_isNewReconciler:!1},jie={readContext:sa,useCallback:function(n,e){return cl().memoizedState=[n,e===void 0?null:e],n},useContext:sa,useEffect:nF,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,ww(4194308,4,$H.bind(null,e,n),t)},useLayoutEffect:function(n,e){return ww(4194308,4,n,e)},useInsertionEffect:function(n,e){return ww(4,2,n,e)},useMemo:function(n,e){var t=cl();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=cl();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=Hie.bind(null,_r,n),[r.memoizedState,n]},useRef:function(n){var e=cl();return n={current:n},e.memoizedState=n},useState:tF,useDebugValue:UP,useDeferredValue:function(n){return cl().memoizedState=n},useTransition:function(){var n=tF(!1),e=n[0];return n=Vie.bind(null,n[1]),cl().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=_r,i=cl();if(hr){if(t===void 0)throw Error(ut(407));t=t()}else{if(t=e(),xi===null)throw Error(ut(349));Ad&30||OH(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,nF(IH.bind(null,r,s,n),[n]),r.flags|=2048,a0(9,kH.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=cl(),e=xi.identifierPrefix;if(hr){var t=fu,r=cu;t=(r&~(1<<32-Da(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=s0++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=$ie++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},Gie={readContext:sa,useCallback:HH,useContext:sa,useEffect:zP,useImperativeHandle:VH,useInsertionEffect:zH,useLayoutEffect:UH,useMemo:WH,useReducer:iC,useRef:BH,useState:function(){return iC(o0)},useDebugValue:UP,useDeferredValue:function(n){var e=oa();return jH(e,ti.memoizedState,n)},useTransition:function(){var n=iC(o0)[0],e=oa().memoizedState;return[n,e]},useMutableSource:PH,useSyncExternalStore:RH,useId:GH,unstable_isNewReconciler:!1},qie={readContext:sa,useCallback:HH,useContext:sa,useEffect:zP,useImperativeHandle:VH,useInsertionEffect:zH,useLayoutEffect:UH,useMemo:WH,useReducer:sC,useRef:BH,useState:function(){return sC(o0)},useDebugValue:UP,useDeferredValue:function(n){var e=oa();return ti===null?e.memoizedState=n:jH(e,ti.memoizedState,n)},useTransition:function(){var n=sC(o0)[0],e=oa().memoizedState;return[n,e]},useMutableSource:PH,useSyncExternalStore:RH,useId:GH,unstable_isNewReconciler:!1};function im(n,e){try{var t="",r=e;do t+=wre(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function oC(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function JT(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Xie=typeof WeakMap=="function"?WeakMap:Map;function KH(n,e,t){t=gu(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){bS||(bS=!0,l3=r),JT(n,e)},t}function ZH(n,e,t){t=gu(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){JT(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){JT(n,e),typeof r!="function"&&(Ic===null?Ic=new Set([this]):Ic.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function rF(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new Xie;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=lse.bind(null,n,e,t),e.then(n,n))}function iF(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function sF(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=gu(-1,1),e.tag=2,kc(t,e,1))),t.lanes|=1),n)}var Yie=Bu.ReactCurrentOwner,Gs=!1;function xs(n,e,t,r){e.child=n===null?DH(e,null,t,r):nm(e,n.child,t,r)}function oF(n,e,t,r,i){t=t.render;var s=e.ref;return Fp(e,i),r=FP(n,e,t,r,s,i),t=BP(),n!==null&&!Gs?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Mu(n,e,i)):(hr&&t&&MP(e),e.flags|=1,xs(n,e,r,i),e.child)}function aF(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!XP(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,JH(n,e,s,r,i)):(n=Mw(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Qv,t(o,r)&&n.ref===e.ref)return Mu(n,e,i)}return e.flags|=1,n=Fc(s,r),n.ref=e.ref,n.return=e,e.child=n}function JH(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(Qv(s,r)&&n.ref===e.ref)if(Gs=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(Gs=!0);else return e.lanes=n.lanes,Mu(n,e,i)}return QT(n,e,t,r,i)}function QH(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ir(wp,fo),fo|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,ir(wp,fo),fo|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,ir(wp,fo),fo|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,ir(wp,fo),fo|=r;return xs(n,e,i,t),e.child}function eW(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function QT(n,e,t,r,i){var s=Zs(t)?Md:ls.current;return s=em(e,s),Fp(e,i),t=FP(n,e,t,r,s,i),r=BP(),n!==null&&!Gs?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Mu(n,e,i)):(hr&&r&&MP(e),e.flags|=1,xs(n,e,t,i),e.child)}function lF(n,e,t,r,i){if(Zs(t)){var s=!0;cS(e)}else s=!1;if(Fp(e,i),e.stateNode===null)Sw(n,e),AH(e,t,r),ZT(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=sa(u):(u=Zs(t)?Md:ls.current,u=em(e,u));var c=t.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&QL(e,o,r,u),fc=!1;var d=e.memoizedState;o.state=d,mS(e,r,o,i),l=e.memoizedState,a!==r||d!==l||Ks.current||fc?(typeof c=="function"&&(KT(e,t,c,r),l=e.memoizedState),(a=fc||JL(e,t,a,r,d,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,MH(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:wa(e.type,a),o.props=u,f=e.pendingProps,d=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=sa(l):(l=Zs(t)?Md:ls.current,l=em(e,l));var h=t.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==l)&&QL(e,o,r,l),fc=!1,d=e.memoizedState,o.state=d,mS(e,r,o,i);var m=e.memoizedState;a!==f||d!==m||Ks.current||fc?(typeof h=="function"&&(KT(e,t,h,r),m=e.memoizedState),(u=fc||JL(e,t,u,r,d,m,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),r=!1)}return e3(n,e,t,r,s,i)}function e3(n,e,t,r,i,s){eW(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&qL(e,t,!1),Mu(n,e,s);r=e.stateNode,Yie.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=nm(e,n.child,null,s),e.child=nm(e,null,a,s)):xs(n,e,a,s),e.memoizedState=r.state,i&&qL(e,t,!0),e.child}function tW(n){var e=n.stateNode;e.pendingContext?GL(n,e.pendingContext,e.pendingContext!==e.context):e.context&&GL(n,e.context,!1),OP(n,e.containerInfo)}function uF(n,e,t,r,i){return tm(),AP(i),e.flags|=256,xs(n,e,t,r),e.child}var t3={dehydrated:null,treeContext:null,retryLane:0};function n3(n){return{baseLanes:n,cachePool:null,transitions:null}}function nW(n,e,t){var r=e.pendingProps,i=br.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),ir(br,i&1),n===null)return XT(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=iE(o,r,0,null),n=hd(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=n3(t),e.memoizedState=t3,n):$P(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Kie(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Fc(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Fc(a,s):(s=hd(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?n3(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=t3,r}return s=n.child,n=s.sibling,r=Fc(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function $P(n,e){return e=iE({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function ox(n,e,t,r){return r!==null&&AP(r),nm(e,n.child,null,t),n=$P(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function Kie(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=oC(Error(ut(422))),ox(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=iE({mode:"visible",children:r.children},i,0,null),s=hd(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&nm(e,n.child,null,o),e.child.memoizedState=n3(o),e.memoizedState=t3,s);if(!(e.mode&1))return ox(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ut(419)),r=oC(s,r,void 0),ox(n,e,o,r)}if(a=(o&n.childLanes)!==0,Gs||a){if(r=xi,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Eu(n,i),Na(r,n,i,-1))}return qP(),r=oC(Error(ut(421))),ox(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=use.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,bo=Oc(i.nextSibling),_o=e,hr=!0,Ea=null,n!==null&&(Go[qo++]=cu,Go[qo++]=fu,Go[qo++]=Cd,cu=n.id,fu=n.overflow,Cd=e),e=$P(e,r.children),e.flags|=4096,e)}function cF(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),YT(n.return,e,t)}function aC(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function rW(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(xs(n,e,r.children,t),r=br.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&cF(n,t,e);else if(n.tag===19)cF(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(ir(br,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&gS(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),aC(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&gS(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}aC(e,!0,t,null,s);break;case"together":aC(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Sw(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Mu(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Td|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(ut(153));if(e.child!==null){for(n=e.child,t=Fc(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Fc(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function Zie(n,e,t){switch(e.tag){case 3:tW(e),tm();break;case 5:NH(e);break;case 1:Zs(e.type)&&cS(e);break;case 4:OP(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ir(hS,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ir(br,br.current&1),e.flags|=128,null):t&e.child.childLanes?nW(n,e,t):(ir(br,br.current&1),n=Mu(n,e,t),n!==null?n.sibling:null);ir(br,br.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return rW(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ir(br,br.current),r)break;return null;case 22:case 23:return e.lanes=0,QH(n,e,t)}return Mu(n,e,t)}var iW,r3,sW,oW;iW=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};r3=function(){};sW=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,rd(Ml.current);var s=null;switch(t){case"input":i=MT(n,i),r=MT(n,r),s=[];break;case"select":i=Mr({},i,{value:void 0}),r=Mr({},r,{value:void 0}),s=[];break;case"textarea":i=TT(n,i),r=TT(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=lS)}NT(t,r);var o;t=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Gv.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Gv.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&or("scroll",n),s||a===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};oW=function(n,e,t,r){t!==r&&(e.flags|=4)};function Dg(n,e){if(!hr)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Xi(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function Jie(n,e,t){var r=e.pendingProps;switch(CP(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xi(e),null;case 1:return Zs(e.type)&&uS(),Xi(e),null;case 3:return r=e.stateNode,rm(),ur(Ks),ur(ls),IP(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(ix(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ea!==null&&(f3(Ea),Ea=null))),r3(n,e),Xi(e),null;case 5:kP(e);var i=rd(i0.current);if(t=e.type,n!==null&&e.stateNode!=null)sW(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ut(166));return Xi(e),null}if(n=rd(Ml.current),ix(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[pl]=e,r[n0]=s,n=(e.mode&1)!==0,t){case"dialog":or("cancel",r),or("close",r);break;case"iframe":case"object":case"embed":or("load",r);break;case"video":case"audio":for(i=0;i<lv.length;i++)or(lv[i],r);break;case"source":or("error",r);break;case"img":case"image":case"link":or("error",r),or("load",r);break;case"details":or("toggle",r);break;case"input":xL(r,s),or("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},or("invalid",r);break;case"textarea":wL(r,s),or("invalid",r)}NT(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&rx(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&rx(r.textContent,a,n),i=["children",""+a]):Gv.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&or("scroll",r)}switch(t){case"input":Y1(r),bL(r,s,!0);break;case"textarea":Y1(r),SL(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=lS)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=OV(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[pl]=e,n[n0]=r,iW(n,e,!1,!1),e.stateNode=n;e:{switch(o=PT(t,r),t){case"dialog":or("cancel",n),or("close",n),i=r;break;case"iframe":case"object":case"embed":or("load",n),i=r;break;case"video":case"audio":for(i=0;i<lv.length;i++)or(lv[i],n);i=r;break;case"source":or("error",n),i=r;break;case"img":case"image":case"link":or("error",n),or("load",n),i=r;break;case"details":or("toggle",n),i=r;break;case"input":xL(n,r),i=MT(n,r),or("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=Mr({},r,{value:void 0}),or("invalid",n);break;case"textarea":wL(n,r),i=TT(n,r),or("invalid",n);break;default:i=r}NT(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?LV(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&kV(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&qv(n,l):typeof l=="number"&&qv(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Gv.hasOwnProperty(s)?l!=null&&s==="onScroll"&&or("scroll",n):l!=null&&fP(n,s,l,o))}switch(t){case"input":Y1(n),bL(n,r,!1);break;case"textarea":Y1(n),SL(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Gc(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Op(n,!!r.multiple,s,!1):r.defaultValue!=null&&Op(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=lS)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Xi(e),null;case 6:if(n&&e.stateNode!=null)oW(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ut(166));if(t=rd(i0.current),rd(Ml.current),ix(e)){if(r=e.stateNode,t=e.memoizedProps,r[pl]=e,(s=r.nodeValue!==t)&&(n=_o,n!==null))switch(n.tag){case 3:rx(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&rx(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[pl]=e,e.stateNode=r}return Xi(e),null;case 13:if(ur(br),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(hr&&bo!==null&&e.mode&1&&!(e.flags&128))_H(),tm(),e.flags|=98560,s=!1;else if(s=ix(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(ut(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ut(317));s[pl]=e}else tm(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Xi(e),s=!1}else Ea!==null&&(f3(Ea),Ea=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||br.current&1?si===0&&(si=3):qP())),e.updateQueue!==null&&(e.flags|=4),Xi(e),null);case 4:return rm(),r3(n,e),n===null&&e0(e.stateNode.containerInfo),Xi(e),null;case 10:return NP(e.type._context),Xi(e),null;case 17:return Zs(e.type)&&uS(),Xi(e),null;case 19:if(ur(br),s=e.memoizedState,s===null)return Xi(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Dg(s,!1);else{if(si!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=gS(n),o!==null){for(e.flags|=128,Dg(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return ir(br,br.current&1|2),e.child}n=n.sibling}s.tail!==null&&$r()>sm&&(e.flags|=128,r=!0,Dg(s,!1),e.lanes=4194304)}else{if(!r)if(n=gS(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Dg(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!hr)return Xi(e),null}else 2*$r()-s.renderingStartTime>sm&&t!==1073741824&&(e.flags|=128,r=!0,Dg(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=$r(),e.sibling=null,t=br.current,ir(br,r?t&1|2:t&1),e):(Xi(e),null);case 22:case 23:return GP(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?fo&1073741824&&(Xi(e),e.subtreeFlags&6&&(e.flags|=8192)):Xi(e),null;case 24:return null;case 25:return null}throw Error(ut(156,e.tag))}function Qie(n,e){switch(CP(e),e.tag){case 1:return Zs(e.type)&&uS(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return rm(),ur(Ks),ur(ls),IP(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return kP(e),null;case 13:if(ur(br),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(ut(340));tm()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return ur(br),null;case 4:return rm(),null;case 10:return NP(e.type._context),null;case 22:case 23:return GP(),null;case 24:return null;default:return null}}var ax=!1,ts=!1,ese=typeof WeakSet=="function"?WeakSet:Set,Mt=null;function bp(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Pr(n,e,r)}else t.current=null}function i3(n,e,t){try{t()}catch(r){Pr(n,e,r)}}var fF=!1;function tse(n,e){if($T=sS,n=cH(),EP(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,u=0,c=0,f=n,d=null;t:for(;;){for(var h;f!==t||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===n)break t;if(d===t&&++u===i&&(a=o),d===s&&++c===r&&(l=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(VT={focusedElem:n,selectionRange:t},sS=!1,Mt=e;Mt!==null;)if(e=Mt,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Mt=n;else for(;Mt!==null;){e=Mt;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,y=m.memoizedState,p=e.stateNode,S=p.getSnapshotBeforeUpdate(e.elementType===e.type?v:wa(e.type,v),y);p.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ut(163))}}catch(g){Pr(e,e.return,g)}if(n=e.sibling,n!==null){n.return=e.return,Mt=n;break}Mt=e.return}return m=fF,fF=!1,m}function Dv(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&i3(e,t,s)}i=i.next}while(i!==r)}}function nE(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function s3(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function aW(n){var e=n.alternate;e!==null&&(n.alternate=null,aW(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[pl],delete e[n0],delete e[jT],delete e[Fie],delete e[Bie])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function lW(n){return n.tag===5||n.tag===3||n.tag===4}function dF(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||lW(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function o3(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=lS));else if(r!==4&&(n=n.child,n!==null))for(o3(n,e,t),n=n.sibling;n!==null;)o3(n,e,t),n=n.sibling}function a3(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(a3(n,e,t),n=n.sibling;n!==null;)a3(n,e,t),n=n.sibling}var Ti=null,_a=!1;function Qu(n,e,t){for(t=t.child;t!==null;)uW(n,e,t),t=t.sibling}function uW(n,e,t){if(El&&typeof El.onCommitFiberUnmount=="function")try{El.onCommitFiberUnmount(X_,t)}catch{}switch(t.tag){case 5:ts||bp(t,e);case 6:var r=Ti,i=_a;Ti=null,Qu(n,e,t),Ti=r,_a=i,Ti!==null&&(_a?(n=Ti,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Ti.removeChild(t.stateNode));break;case 18:Ti!==null&&(_a?(n=Ti,t=t.stateNode,n.nodeType===8?eC(n.parentNode,t):n.nodeType===1&&eC(n,t),Zv(n)):eC(Ti,t.stateNode));break;case 4:r=Ti,i=_a,Ti=t.stateNode.containerInfo,_a=!0,Qu(n,e,t),Ti=r,_a=i;break;case 0:case 11:case 14:case 15:if(!ts&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&i3(t,e,o),i=i.next}while(i!==r)}Qu(n,e,t);break;case 1:if(!ts&&(bp(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Pr(t,e,a)}Qu(n,e,t);break;case 21:Qu(n,e,t);break;case 22:t.mode&1?(ts=(r=ts)||t.memoizedState!==null,Qu(n,e,t),ts=r):Qu(n,e,t);break;default:Qu(n,e,t)}}function hF(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new ese),e.forEach(function(r){var i=cse.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function va(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ti=a.stateNode,_a=!1;break e;case 3:Ti=a.stateNode.containerInfo,_a=!0;break e;case 4:Ti=a.stateNode.containerInfo,_a=!0;break e}a=a.return}if(Ti===null)throw Error(ut(160));uW(s,o,i),Ti=null,_a=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Pr(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)cW(e,n),e=e.sibling}function cW(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(va(e,n),nl(n),r&4){try{Dv(3,n,n.return),nE(3,n)}catch(v){Pr(n,n.return,v)}try{Dv(5,n,n.return)}catch(v){Pr(n,n.return,v)}}break;case 1:va(e,n),nl(n),r&512&&t!==null&&bp(t,t.return);break;case 5:if(va(e,n),nl(n),r&512&&t!==null&&bp(t,t.return),n.flags&32){var i=n.stateNode;try{qv(i,"")}catch(v){Pr(n,n.return,v)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&PV(i,s),PT(a,o);var u=PT(a,s);for(o=0;o<l.length;o+=2){var c=l[o],f=l[o+1];c==="style"?LV(i,f):c==="dangerouslySetInnerHTML"?kV(i,f):c==="children"?qv(i,f):fP(i,c,f,u)}switch(a){case"input":CT(i,s);break;case"textarea":RV(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Op(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?Op(i,!!s.multiple,s.defaultValue,!0):Op(i,!!s.multiple,s.multiple?[]:"",!1))}i[n0]=s}catch(v){Pr(n,n.return,v)}}break;case 6:if(va(e,n),nl(n),r&4){if(n.stateNode===null)throw Error(ut(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(v){Pr(n,n.return,v)}}break;case 3:if(va(e,n),nl(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Zv(e.containerInfo)}catch(v){Pr(n,n.return,v)}break;case 4:va(e,n),nl(n);break;case 13:va(e,n),nl(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(WP=$r())),r&4&&hF(n);break;case 22:if(c=t!==null&&t.memoizedState!==null,n.mode&1?(ts=(u=ts)||c,va(e,n),ts=u):va(e,n),nl(n),r&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!c&&n.mode&1)for(Mt=n,c=n.child;c!==null;){for(f=Mt=c;Mt!==null;){switch(d=Mt,h=d.child,d.tag){case 0:case 11:case 14:case 15:Dv(4,d,d.return);break;case 1:bp(d,d.return);var m=d.stateNode;if(typeof m.componentWillUnmount=="function"){r=d,t=d.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(v){Pr(r,t,v)}}break;case 5:bp(d,d.return);break;case 22:if(d.memoizedState!==null){mF(f);continue}}h!==null?(h.return=d,Mt=h):mF(f)}c=c.sibling}e:for(c=null,f=n;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=IV("display",o))}catch(v){Pr(n,n.return,v)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){Pr(n,n.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:va(e,n),nl(n),r&4&&hF(n);break;case 21:break;default:va(e,n),nl(n)}}function nl(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(lW(t)){var r=t;break e}t=t.return}throw Error(ut(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(qv(i,""),r.flags&=-33);var s=dF(n);a3(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=dF(n);o3(n,a,o);break;default:throw Error(ut(161))}}catch(l){Pr(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function nse(n,e,t){Mt=n,fW(n)}function fW(n,e,t){for(var r=(n.mode&1)!==0;Mt!==null;){var i=Mt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ax;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ts;a=ax;var u=ts;if(ax=o,(ts=l)&&!u)for(Mt=i;Mt!==null;)o=Mt,l=o.child,o.tag===22&&o.memoizedState!==null?gF(i):l!==null?(l.return=o,Mt=l):gF(i);for(;s!==null;)Mt=s,fW(s),s=s.sibling;Mt=i,ax=a,ts=u}pF(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Mt=s):pF(n)}}function pF(n){for(;Mt!==null;){var e=Mt;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ts||nE(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ts)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:wa(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&ZL(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}ZL(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Zv(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ut(163))}ts||e.flags&512&&s3(e)}catch(d){Pr(e,e.return,d)}}if(e===n){Mt=null;break}if(t=e.sibling,t!==null){t.return=e.return,Mt=t;break}Mt=e.return}}function mF(n){for(;Mt!==null;){var e=Mt;if(e===n){Mt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Mt=t;break}Mt=e.return}}function gF(n){for(;Mt!==null;){var e=Mt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{nE(4,e)}catch(l){Pr(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Pr(e,i,l)}}var s=e.return;try{s3(e)}catch(l){Pr(e,s,l)}break;case 5:var o=e.return;try{s3(e)}catch(l){Pr(e,o,l)}}}catch(l){Pr(e,e.return,l)}if(e===n){Mt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Mt=a;break}Mt=e.return}}var rse=Math.ceil,xS=Bu.ReactCurrentDispatcher,VP=Bu.ReactCurrentOwner,ta=Bu.ReactCurrentBatchConfig,Tn=0,xi=null,Xr=null,Bi=0,fo=0,wp=cf(0),si=0,l0=null,Td=0,rE=0,HP=0,Nv=null,Vs=null,WP=0,sm=1/0,su=null,bS=!1,l3=null,Ic=null,lx=!1,wc=null,wS=0,Pv=0,u3=null,_w=-1,Ew=0;function Cs(){return Tn&6?$r():_w!==-1?_w:_w=$r()}function Lc(n){return n.mode&1?Tn&2&&Bi!==0?Bi&-Bi:Uie.transition!==null?(Ew===0&&(Ew=XV()),Ew):(n=jn,n!==0||(n=window.event,n=n===void 0?16:tH(n.type)),n):1}function Na(n,e,t,r){if(50<Pv)throw Pv=0,u3=null,Error(ut(185));py(n,t,r),(!(Tn&2)||n!==xi)&&(n===xi&&(!(Tn&2)&&(rE|=t),si===4&&vc(n,Bi)),Js(n,r),t===1&&Tn===0&&!(e.mode&1)&&(sm=$r()+500,Q_&&ff()))}function Js(n,e){var t=n.callbackNode;Ure(n,e);var r=iS(n,n===xi?Bi:0);if(r===0)t!==null&&ML(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&ML(t),e===1)n.tag===0?zie(vF.bind(null,n)):bH(vF.bind(null,n)),Iie(function(){!(Tn&6)&&ff()}),t=null;else{switch(YV(r)){case 1:t=gP;break;case 4:t=GV;break;case 16:t=rS;break;case 536870912:t=qV;break;default:t=rS}t=xW(t,dW.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function dW(n,e){if(_w=-1,Ew=0,Tn&6)throw Error(ut(327));var t=n.callbackNode;if(Bp()&&n.callbackNode!==t)return null;var r=iS(n,n===xi?Bi:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=SS(n,r);else{e=r;var i=Tn;Tn|=2;var s=pW();(xi!==n||Bi!==e)&&(su=null,sm=$r()+500,dd(n,e));do try{ose();break}catch(a){hW(n,a)}while(!0);DP(),xS.current=s,Tn=i,Xr!==null?e=0:(xi=null,Bi=0,e=si)}if(e!==0){if(e===2&&(i=LT(n),i!==0&&(r=i,e=c3(n,i))),e===1)throw t=l0,dd(n,0),vc(n,r),Js(n,$r()),t;if(e===6)vc(n,r);else{if(i=n.current.alternate,!(r&30)&&!ise(i)&&(e=SS(n,r),e===2&&(s=LT(n),s!==0&&(r=s,e=c3(n,s))),e===1))throw t=l0,dd(n,0),vc(n,r),Js(n,$r()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(ut(345));case 2:Hf(n,Vs,su);break;case 3:if(vc(n,r),(r&130023424)===r&&(e=WP+500-$r(),10<e)){if(iS(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Cs(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=WT(Hf.bind(null,n,Vs,su),e);break}Hf(n,Vs,su);break;case 4:if(vc(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Da(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=$r()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*rse(r/1960))-r,10<r){n.timeoutHandle=WT(Hf.bind(null,n,Vs,su),r);break}Hf(n,Vs,su);break;case 5:Hf(n,Vs,su);break;default:throw Error(ut(329))}}}return Js(n,$r()),n.callbackNode===t?dW.bind(null,n):null}function c3(n,e){var t=Nv;return n.current.memoizedState.isDehydrated&&(dd(n,e).flags|=256),n=SS(n,e),n!==2&&(e=Vs,Vs=t,e!==null&&f3(e)),n}function f3(n){Vs===null?Vs=n:Vs.push.apply(Vs,n)}function ise(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!ka(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function vc(n,e){for(e&=~HP,e&=~rE,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Da(e),r=1<<t;n[t]=-1,e&=~r}}function vF(n){if(Tn&6)throw Error(ut(327));Bp();var e=iS(n,0);if(!(e&1))return Js(n,$r()),null;var t=SS(n,e);if(n.tag!==0&&t===2){var r=LT(n);r!==0&&(e=r,t=c3(n,r))}if(t===1)throw t=l0,dd(n,0),vc(n,e),Js(n,$r()),t;if(t===6)throw Error(ut(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Hf(n,Vs,su),Js(n,$r()),null}function jP(n,e){var t=Tn;Tn|=1;try{return n(e)}finally{Tn=t,Tn===0&&(sm=$r()+500,Q_&&ff())}}function Dd(n){wc!==null&&wc.tag===0&&!(Tn&6)&&Bp();var e=Tn;Tn|=1;var t=ta.transition,r=jn;try{if(ta.transition=null,jn=1,n)return n()}finally{jn=r,ta.transition=t,Tn=e,!(Tn&6)&&ff()}}function GP(){fo=wp.current,ur(wp)}function dd(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,kie(t)),Xr!==null)for(t=Xr.return;t!==null;){var r=t;switch(CP(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&uS();break;case 3:rm(),ur(Ks),ur(ls),IP();break;case 5:kP(r);break;case 4:rm();break;case 13:ur(br);break;case 19:ur(br);break;case 10:NP(r.type._context);break;case 22:case 23:GP()}t=t.return}if(xi=n,Xr=n=Fc(n.current,null),Bi=fo=e,si=0,l0=null,HP=rE=Td=0,Vs=Nv=null,nd!==null){for(e=0;e<nd.length;e++)if(t=nd[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}nd=null}return n}function hW(n,e){do{var t=Xr;try{if(DP(),bw.current=yS,vS){for(var r=_r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}vS=!1}if(Ad=0,vi=ti=_r=null,Tv=!1,s0=0,VP.current=null,t===null||t.return===null){si=1,l0=e,Xr=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Bi,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=iF(o);if(h!==null){h.flags&=-257,sF(h,o,a,s,e),h.mode&1&&rF(s,u,e),e=h,l=u;var m=e.updateQueue;if(m===null){var v=new Set;v.add(l),e.updateQueue=v}else m.add(l);break e}else{if(!(e&1)){rF(s,u,e),qP();break e}l=Error(ut(426))}}else if(hr&&a.mode&1){var y=iF(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),sF(y,o,a,s,e),AP(im(l,a));break e}}s=l=im(l,a),si!==4&&(si=2),Nv===null?Nv=[s]:Nv.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=KH(s,l,e);KL(s,p);break e;case 1:a=l;var S=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ic===null||!Ic.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var g=ZH(s,a,e);KL(s,g);break e}}s=s.return}while(s!==null)}gW(t)}catch(w){e=w,Xr===t&&t!==null&&(Xr=t=t.return);continue}break}while(!0)}function pW(){var n=xS.current;return xS.current=yS,n===null?yS:n}function qP(){(si===0||si===3||si===2)&&(si=4),xi===null||!(Td&268435455)&&!(rE&268435455)||vc(xi,Bi)}function SS(n,e){var t=Tn;Tn|=2;var r=pW();(xi!==n||Bi!==e)&&(su=null,dd(n,e));do try{sse();break}catch(i){hW(n,i)}while(!0);if(DP(),Tn=t,xS.current=r,Xr!==null)throw Error(ut(261));return xi=null,Bi=0,si}function sse(){for(;Xr!==null;)mW(Xr)}function ose(){for(;Xr!==null&&!Pre();)mW(Xr)}function mW(n){var e=yW(n.alternate,n,fo);n.memoizedProps=n.pendingProps,e===null?gW(n):Xr=e,VP.current=null}function gW(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=Qie(t,e),t!==null){t.flags&=32767,Xr=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{si=6,Xr=null;return}}else if(t=Jie(t,e,fo),t!==null){Xr=t;return}if(e=e.sibling,e!==null){Xr=e;return}Xr=e=n}while(e!==null);si===0&&(si=5)}function Hf(n,e,t){var r=jn,i=ta.transition;try{ta.transition=null,jn=1,ase(n,e,t,r)}finally{ta.transition=i,jn=r}return null}function ase(n,e,t,r){do Bp();while(wc!==null);if(Tn&6)throw Error(ut(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(ut(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if($re(n,s),n===xi&&(Xr=xi=null,Bi=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||lx||(lx=!0,xW(rS,function(){return Bp(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=ta.transition,ta.transition=null;var o=jn;jn=1;var a=Tn;Tn|=4,VP.current=null,tse(n,t),cW(t,n),Aie(VT),sS=!!$T,VT=$T=null,n.current=t,nse(t),Rre(),Tn=a,jn=o,ta.transition=s}else n.current=t;if(lx&&(lx=!1,wc=n,wS=i),s=n.pendingLanes,s===0&&(Ic=null),Ire(t.stateNode),Js(n,$r()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(bS)throw bS=!1,n=l3,l3=null,n;return wS&1&&n.tag!==0&&Bp(),s=n.pendingLanes,s&1?n===u3?Pv++:(Pv=0,u3=n):Pv=0,ff(),null}function Bp(){if(wc!==null){var n=YV(wS),e=ta.transition,t=jn;try{if(ta.transition=null,jn=16>n?16:n,wc===null)var r=!1;else{if(n=wc,wc=null,wS=0,Tn&6)throw Error(ut(331));var i=Tn;for(Tn|=4,Mt=n.current;Mt!==null;){var s=Mt,o=s.child;if(Mt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Mt=u;Mt!==null;){var c=Mt;switch(c.tag){case 0:case 11:case 15:Dv(8,c,s)}var f=c.child;if(f!==null)f.return=c,Mt=f;else for(;Mt!==null;){c=Mt;var d=c.sibling,h=c.return;if(aW(c),c===u){Mt=null;break}if(d!==null){d.return=h,Mt=d;break}Mt=h}}}var m=s.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(v!==null)}}Mt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Mt=o;else e:for(;Mt!==null;){if(s=Mt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Dv(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,Mt=p;break e}Mt=s.return}}var S=n.current;for(Mt=S;Mt!==null;){o=Mt;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Mt=b;else e:for(o=S;Mt!==null;){if(a=Mt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:nE(9,a)}}catch(w){Pr(a,a.return,w)}if(a===o){Mt=null;break e}var g=a.sibling;if(g!==null){g.return=a.return,Mt=g;break e}Mt=a.return}}if(Tn=i,ff(),El&&typeof El.onPostCommitFiberRoot=="function")try{El.onPostCommitFiberRoot(X_,n)}catch{}r=!0}return r}finally{jn=t,ta.transition=e}}return!1}function yF(n,e,t){e=im(t,e),e=KH(n,e,1),n=kc(n,e,1),e=Cs(),n!==null&&(py(n,1,e),Js(n,e))}function Pr(n,e,t){if(n.tag===3)yF(n,n,t);else for(;e!==null;){if(e.tag===3){yF(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ic===null||!Ic.has(r))){n=im(t,n),n=ZH(e,n,1),e=kc(e,n,1),n=Cs(),e!==null&&(py(e,1,n),Js(e,n));break}}e=e.return}}function lse(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Cs(),n.pingedLanes|=n.suspendedLanes&t,xi===n&&(Bi&t)===t&&(si===4||si===3&&(Bi&130023424)===Bi&&500>$r()-WP?dd(n,0):HP|=t),Js(n,e)}function vW(n,e){e===0&&(n.mode&1?(e=J1,J1<<=1,!(J1&130023424)&&(J1=4194304)):e=1);var t=Cs();n=Eu(n,e),n!==null&&(py(n,e,t),Js(n,t))}function use(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),vW(n,t)}function cse(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(ut(314))}r!==null&&r.delete(e),vW(n,t)}var yW;yW=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Ks.current)Gs=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Gs=!1,Zie(n,e,t);Gs=!!(n.flags&131072)}else Gs=!1,hr&&e.flags&1048576&&wH(e,dS,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Sw(n,e),n=e.pendingProps;var i=em(e,ls.current);Fp(e,t),i=FP(null,e,r,n,i,t);var s=BP();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zs(r)?(s=!0,cS(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,RP(e),i.updater=eE,e.stateNode=i,i._reactInternals=e,ZT(e,r,n,t),e=e3(null,e,r,!0,s,t)):(e.tag=0,hr&&s&&MP(e),xs(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Sw(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=dse(r),n=wa(r,n),i){case 0:e=QT(null,e,r,n,t);break e;case 1:e=lF(null,e,r,n,t);break e;case 11:e=oF(null,e,r,n,t);break e;case 14:e=aF(null,e,r,wa(r.type,n),t);break e}throw Error(ut(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wa(r,i),QT(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wa(r,i),lF(n,e,r,i,t);case 3:e:{if(tW(e),n===null)throw Error(ut(387));r=e.pendingProps,s=e.memoizedState,i=s.element,MH(n,e),mS(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=im(Error(ut(423)),e),e=uF(n,e,r,t,i);break e}else if(r!==i){i=im(Error(ut(424)),e),e=uF(n,e,r,t,i);break e}else for(bo=Oc(e.stateNode.containerInfo.firstChild),_o=e,hr=!0,Ea=null,t=DH(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(tm(),r===i){e=Mu(n,e,t);break e}xs(n,e,r,t)}e=e.child}return e;case 5:return NH(e),n===null&&XT(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,HT(r,i)?o=null:s!==null&&HT(r,s)&&(e.flags|=32),eW(n,e),xs(n,e,o,t),e.child;case 6:return n===null&&XT(e),null;case 13:return nW(n,e,t);case 4:return OP(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=nm(e,null,r,t):xs(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wa(r,i),oF(n,e,r,i,t);case 7:return xs(n,e,e.pendingProps,t),e.child;case 8:return xs(n,e,e.pendingProps.children,t),e.child;case 12:return xs(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ir(hS,r._currentValue),r._currentValue=o,s!==null)if(ka(s.value,o)){if(s.children===i.children&&!Ks.current){e=Mu(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=gu(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),YT(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ut(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),YT(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}xs(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Fp(e,t),i=sa(i),r=r(i),e.flags|=1,xs(n,e,r,t),e.child;case 14:return r=e.type,i=wa(r,e.pendingProps),i=wa(r.type,i),aF(n,e,r,i,t);case 15:return JH(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wa(r,i),Sw(n,e),e.tag=1,Zs(r)?(n=!0,cS(e)):n=!1,Fp(e,t),AH(e,r,i),ZT(e,r,i,t),e3(null,e,r,!0,n,t);case 19:return rW(n,e,t);case 22:return QH(n,e,t)}throw Error(ut(156,e.tag))};function xW(n,e){return jV(n,e)}function fse(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jo(n,e,t,r){return new fse(n,e,t,r)}function XP(n){return n=n.prototype,!(!n||!n.isReactComponent)}function dse(n){if(typeof n=="function")return XP(n)?1:0;if(n!=null){if(n=n.$$typeof,n===hP)return 11;if(n===pP)return 14}return 2}function Fc(n,e){var t=n.alternate;return t===null?(t=Jo(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Mw(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")XP(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case fp:return hd(t.children,i,s,e);case dP:o=8,i|=8;break;case wT:return n=Jo(12,t,e,i|2),n.elementType=wT,n.lanes=s,n;case ST:return n=Jo(13,t,e,i),n.elementType=ST,n.lanes=s,n;case _T:return n=Jo(19,t,e,i),n.elementType=_T,n.lanes=s,n;case TV:return iE(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case CV:o=10;break e;case AV:o=9;break e;case hP:o=11;break e;case pP:o=14;break e;case cc:o=16,r=null;break e}throw Error(ut(130,n==null?n:typeof n,""))}return e=Jo(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function hd(n,e,t,r){return n=Jo(7,n,r,e),n.lanes=t,n}function iE(n,e,t,r){return n=Jo(22,n,r,e),n.elementType=TV,n.lanes=t,n.stateNode={isHidden:!1},n}function lC(n,e,t){return n=Jo(6,n,null,e),n.lanes=t,n}function uC(n,e,t){return e=Jo(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function hse(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=H2(0),this.expirationTimes=H2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=H2(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function YP(n,e,t,r,i,s,o,a,l){return n=new hse(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Jo(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},RP(s),n}function pse(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cp,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function bW(n){if(!n)return qc;n=n._reactInternals;e:{if(Hd(n)!==n||n.tag!==1)throw Error(ut(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zs(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ut(171))}if(n.tag===1){var t=n.type;if(Zs(t))return xH(n,t,e)}return e}function wW(n,e,t,r,i,s,o,a,l){return n=YP(t,r,!0,n,i,s,o,a,l),n.context=bW(null),t=n.current,r=Cs(),i=Lc(t),s=gu(r,i),s.callback=e??null,kc(t,s,i),n.current.lanes=i,py(n,i,r),Js(n,r),n}function sE(n,e,t,r){var i=e.current,s=Cs(),o=Lc(i);return t=bW(t),e.context===null?e.context=t:e.pendingContext=t,e=gu(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=kc(i,e,o),n!==null&&(Na(n,i,o,s),xw(n,i,o)),o}function _S(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function xF(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function KP(n,e){xF(n,e),(n=n.alternate)&&xF(n,e)}function mse(){return null}var SW=typeof reportError=="function"?reportError:function(n){console.error(n)};function ZP(n){this._internalRoot=n}oE.prototype.render=ZP.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(ut(409));sE(n,e,null,null)};oE.prototype.unmount=ZP.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Dd(function(){sE(null,n,null,null)}),e[_u]=null}};function oE(n){this._internalRoot=n}oE.prototype.unstable_scheduleHydration=function(n){if(n){var e=JV();n={blockedOn:null,target:n,priority:e};for(var t=0;t<gc.length&&e!==0&&e<gc[t].priority;t++);gc.splice(t,0,n),t===0&&eH(n)}};function JP(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function aE(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function bF(){}function gse(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=_S(o);s.call(u)}}var o=wW(e,r,n,0,null,!1,!1,"",bF);return n._reactRootContainer=o,n[_u]=o.current,e0(n.nodeType===8?n.parentNode:n),Dd(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=_S(l);a.call(u)}}var l=YP(n,0,!1,null,null,!1,!1,"",bF);return n._reactRootContainer=l,n[_u]=l.current,e0(n.nodeType===8?n.parentNode:n),Dd(function(){sE(e,l,t,r)}),l}function lE(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=_S(o);a.call(l)}}sE(e,o,n,i)}else o=gse(t,e,n,i,r);return _S(o)}KV=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=av(e.pendingLanes);t!==0&&(vP(e,t|1),Js(e,$r()),!(Tn&6)&&(sm=$r()+500,ff()))}break;case 13:Dd(function(){var r=Eu(n,1);if(r!==null){var i=Cs();Na(r,n,1,i)}}),KP(n,1)}};yP=function(n){if(n.tag===13){var e=Eu(n,134217728);if(e!==null){var t=Cs();Na(e,n,134217728,t)}KP(n,134217728)}};ZV=function(n){if(n.tag===13){var e=Lc(n),t=Eu(n,e);if(t!==null){var r=Cs();Na(t,n,e,r)}KP(n,e)}};JV=function(){return jn};QV=function(n,e){var t=jn;try{return jn=n,e()}finally{jn=t}};OT=function(n,e,t){switch(e){case"input":if(CT(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=J_(r);if(!i)throw Error(ut(90));NV(r),CT(r,i)}}}break;case"textarea":RV(n,t);break;case"select":e=t.value,e!=null&&Op(n,!!t.multiple,e,!1)}};zV=jP;UV=Dd;var vse={usingClientEntryPoint:!1,Events:[gy,mp,J_,FV,BV,jP]},Ng={findFiberByHostInstance:td,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},yse={bundleType:Ng.bundleType,version:Ng.version,rendererPackageName:Ng.rendererPackageName,rendererConfig:Ng.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bu.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=HV(n),n===null?null:n.stateNode},findFiberByHostInstance:Ng.findFiberByHostInstance||mse,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ux=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ux.isDisabled&&ux.supportsFiber)try{X_=ux.inject(yse),El=ux}catch{}}No.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vse;No.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!JP(e))throw Error(ut(200));return pse(n,e,null,t)};No.createRoot=function(n,e){if(!JP(n))throw Error(ut(299));var t=!1,r="",i=SW;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=YP(n,1,!1,null,null,t,!1,r,i),n[_u]=e.current,e0(n.nodeType===8?n.parentNode:n),new ZP(e)};No.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(ut(188)):(n=Object.keys(n).join(","),Error(ut(268,n)));return n=HV(e),n=n===null?null:n.stateNode,n};No.flushSync=function(n){return Dd(n)};No.hydrate=function(n,e,t){if(!aE(e))throw Error(ut(200));return lE(null,n,e,!0,t)};No.hydrateRoot=function(n,e,t){if(!JP(n))throw Error(ut(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=SW;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=wW(e,null,n,1,t??null,i,!1,s,o),n[_u]=e.current,e0(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new oE(e)};No.render=function(n,e,t){if(!aE(e))throw Error(ut(200));return lE(null,n,e,!1,t)};No.unmountComponentAtNode=function(n){if(!aE(n))throw Error(ut(40));return n._reactRootContainer?(Dd(function(){lE(null,null,n,!1,function(){n._reactRootContainer=null,n[_u]=null})}),!0):!1};No.unstable_batchedUpdates=jP;No.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!aE(t))throw Error(ut(200));if(n==null||n._reactInternals===void 0)throw Error(ut(38));return lE(n,e,t,!1,r)};No.version="18.2.0-next-9e3b772b8-20220608";function _W(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_W)}catch(n){console.error(n)}}_W(),wV.exports=No;var Nm=wV.exports;const EW=fa(Nm);var MW,wF=Nm;MW=xT.createRoot=wF.createRoot,xT.hydrateRoot=wF.hydrateRoot;function cx(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var CW={exports:{}};(function(n,e){(function(t){n.exports=t()})(function(){return function t(r,i,s){function o(u,c){if(!i[u]){if(!r[u]){var f=typeof cx=="function"&&cx;if(!c&&f)return f(u,!0);if(a)return a(u,!0);var d=new Error("Cannot find module '"+u+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[u]={exports:{}};r[u][0].call(h.exports,function(m){var v=r[u][1][m];return o(v||m)},h,h.exports,t,r,i,s)}return i[u].exports}for(var a=typeof cx=="function"&&cx,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(t,r,i){r.exports={oauthd_url:"https://oauth.io",oauthd_api:"https://oauth.io/api",version:"web-0.6.1",options:{}}},{}],2:[function(t,r,i){r.exports=function(s){var o,a;return o=s.getJquery(),a=function(l){return function(u,c,f){var d,h,m;return h=o.Deferred(),d=s.getOAuthdURL(),m={url:d+c,type:u},u==="post"||u==="put"?(m.dataType="json",m.contentType="application/json",m.data=JSON.stringify(f)):m.data=f,o.ajax(m).then(function(v){return h.resolve(v)},function(v){return h.reject(v&&v.responseJSON)}),h.promise()}}(),{get:function(l){return function(u,c){return a("get",u,c)}}(),post:function(l){return function(u,c){return a("post",u,c)}}(),put:function(l){return function(u,c){return a("put",u,c)}}(),del:function(l){return function(u,c){return a("delete",u,c)}}()}}},{}],3:[function(t,r,i){var s,o,a,l,u,c;l=t("../config"),o=t("../tools/url"),s=t("../tools/location_operations"),u=t("../tools/cookies"),c=t("../tools/lstorage"),a=t("../tools/cache"),r.exports=function(f,d,h,m){var v,y;return o=o(d),v=s(d),y=c.active()&&c||u,u.init(l,d),a.init(y,l),{initialize:function(p,S){var b;if(l.key=p,S)for(b in S)l.options[b]=S[b]},setOAuthdURL:function(p){l.oauthd_url=p,l.oauthd_base=o.getAbsUrl(l.oauthd_url).match(/^.{2,5}:\/\/[^\/]+/)[0]},getOAuthdURL:function(){return l.oauthd_url},getVersion:function(){return l.version},extend:function(p,S){return this[p]=S(this)},getConfig:function(){return l},getWindow:function(){return f},getDocument:function(){return d},getNavigator:function(){return m},getJquery:function(){return h},getUrl:function(){return o},getCache:function(){return a},getStorage:function(){return y},getLocationOperations:function(){return v}}}},{"../config":1,"../tools/cache":9,"../tools/cookies":10,"../tools/location_operations":12,"../tools/lstorage":13,"../tools/url":15}],4:[function(t,r,i){var s,o,a;s=t("../tools/cookies"),o=t("./request"),a=t("../tools/sha1"),r.exports=function(l){var u,c,f,d,h,m,v,y,p,S,b,g;return c=l.getUrl(),h=l.getConfig(),m=l.getDocument(),g=l.getWindow(),u=l.getJquery(),f=l.getCache(),b=t("./providers")(l),h.oauthd_base=c.getAbsUrl(h.oauthd_url).match(/^.{2,5}:\/\/[^\/]+/)[0],d=[],p=void 0,function(){var w,x;x=/[\\#&]oauthio=([^&]*)/.exec(m.location.hash),x&&(m.location.hash=m.location.hash.replace(/&?oauthio=[^&]*/,""),p=decodeURIComponent(x[1].replace(/\+/g," ")),w=s.read("oauthio_state"),w&&(d.push(w),s.erase("oauthio_state")))}(),v=l.getLocationOperations(),S={request:o(l,d,b)},y={initialize:function(w,x){return l.initialize(w,x)},setOAuthdURL:function(w){h.oauthd_url=w,h.oauthd_base=c.getAbsUrl(h.oauthd_url).match(/^.{2,5}:\/\/[^\/]+/)[0]},create:function(w,x,M){var A,N,C;if(!x)return f.tryCache(y,w,!0);typeof M!="object"&&b.fetchDescription(w),N=function(T){return S.request.mkHttp(w,x,M,T)},C={};for(A in x)C[A]=x[A];return C.toJson=function(){var T;return T={},C.access_token!=null&&(T.access_token=C.access_token),C.oauth_token!=null&&(T.oauth_token=C.oauth_token),C.oauth_token_secret!=null&&(T.oauth_token_secret=C.oauth_token_secret),C.expires_in!=null&&(T.expires_in=C.expires_in),C.token_type!=null&&(T.token_type=C.token_type),C.id_token!=null&&(T.id_token=C.id_token),C.provider!=null&&(T.provider=C.provider),C.email!=null&&(T.email=C.email),T},C.get=N("GET"),C.post=N("POST"),C.put=N("PUT"),C.patch=N("PATCH"),C.del=N("DELETE"),C.me=S.request.mkHttpMe(w,x,M,"GET"),C},popup:function(w,x,M){var A,N,C,T,R,$,B,z,D,I,U;return T=!1,C=function(L){if(!T){if(L.origin!==h.oauthd_base)return;try{z.close()}catch{}return x.data=L.data,S.request.sendCallback(x,A),T=!0}},z=void 0,N=void 0,D=void 0,A=u.Deferred(),x=x||{},h.key?(arguments.length===2&&typeof x=="function"&&(M=x,x={}),f.cacheEnabled(x.cache)&&($=f.tryCache(y,w,x.cache))?(A!=null&&A.resolve($),M?M(null,$):A.promise()):(x.state||(x.state=a.create_hash(),x.state_type="client"),d.push(x.state),B=h.oauthd_url+"/auth/"+w+"?k="+h.key,B+="&d="+encodeURIComponent(c.getAbsUrl("/")),x&&(B+="&opts="+encodeURIComponent(JSON.stringify(x))),x.wnd_settings?(U=x.wnd_settings,delete x.wnd_settings):U={width:Math.floor(.8*g.outerWidth),height:Math.floor(.5*g.outerHeight)},U.width<1e3&&(U.width=1e3),U.height<630&&(U.height=630),U.left=Math.floor(g.screenX+(g.outerWidth-U.width)/2),U.top=Math.floor(g.screenY+(g.outerHeight-U.height)/8),I="width="+U.width+",height="+U.height,I+=",toolbar=0,scrollbars=1,status=1,resizable=1,location=1,menuBar=0",I+=",left="+U.left+",top="+U.top,x={provider:w,cache:x.cache},x.callback=function(L,q){return g.removeEventListener?g.removeEventListener("message",C,!1):g.detachEvent?g.detachEvent("onmessage",C):m.detachEvent&&m.detachEvent("onmessage",C),x.callback=function(){},D&&(clearTimeout(D),D=void 0),M?M(L,q):void 0},g.attachEvent?g.attachEvent("onmessage",C):m.attachEvent?m.attachEvent("onmessage",C):g.addEventListener&&g.addEventListener("message",C,!1),typeof chrome<"u"&&chrome.runtime&&chrome.runtime.onMessageExternal&&chrome.runtime.onMessageExternal.addListener(function(L,q,Z){return L.origin=q.url.match(/^.{2,5}:\/\/[^\/]+/)[0],C(L)}),!N&&(navigator.userAgent.indexOf("MSIE")!==-1||navigator.appVersion.indexOf("Trident/")>0)&&(N=m.createElement("iframe"),N.src=h.oauthd_url+"/auth/iframe?d="+encodeURIComponent(c.getAbsUrl("/")),N.width=0,N.height=0,N.frameBorder=0,N.style.visibility="hidden",m.body.appendChild(N)),D=setTimeout(function(){A!=null&&A.reject(new Error("Authorization timed out")),x.callback&&typeof x.callback=="function"&&x.callback(new Error("Authorization timed out"));try{z.close()}catch{}},12e5),z=g.open(B,"Authorization",I),z?(z.focus(),R=g.setInterval(function(){return z!==null&&!z.closed||(g.clearInterval(R),T||(A!=null&&A.reject(new Error("The popup was closed")),!x.callback||typeof x.callback!="function"))?void 0:x.callback(new Error("The popup was closed"))},500)):(A!=null&&A.reject(new Error("Could not open a popup")),x.callback&&typeof x.callback=="function"&&x.callback(new Error("Could not open a popup"))),A!=null?A.promise():void 0)):(A!=null&&A.reject(new Error("OAuth object must be initialized")),M==null?A.promise():M(new Error("OAuth object must be initialized")))},redirect:function(w,x,M){var A;if(arguments.length===2&&(M=x,x={}),typeof M!="string")throw new Error("You must specify an url");return f.cacheEnabled(x.cache)&&f.tryCache(y,w,x.cache)?(M=c.getAbsUrl(M)+(M.indexOf("#")===-1?"#":"&")+"oauthio=cache:"+w,v.changeHref(M),void v.reload()):(x.state||(x.state=a.create_hash(),x.state_type="client"),s.create("oauthio_state",x.state),A=encodeURIComponent(c.getAbsUrl(M)),M=h.oauthd_url+"/auth/"+w+"?k="+h.key,M+="&redirect_uri="+A,x&&(M+="&opts="+encodeURIComponent(JSON.stringify(x))),void v.changeHref(M))},isRedirect:function(w){var x,M;if(p==null)return!1;if((p!=null?p.substr(0,6):void 0)==="cache:")return x=p!=null?p.substr(6):void 0,w?x.toLowerCase()===w.toLowerCase():x;try{M=JSON.parse(p)}catch{return!1}return w?M.provider.toLowerCase()===w.toLowerCase():M.provider},callback:function(w,x,M){var A,N,C;if(A=u.Deferred(),arguments.length===1&&typeof w=="function"&&(M=w,w=void 0,x={}),arguments.length===1&&typeof w=="string"&&(x={}),arguments.length===2&&typeof x=="function"&&(M=x,x={}),f.cacheEnabled(x!=null?x.cache:void 0)||(p!=null?p.substr(0,6):void 0)==="cache:"){if(w||(p!=null?p.substr(0,6):void 0)!=="cache:"||(w=p.substr(6)),C=f.tryCache(y,w,!0)){if(!M)return A!=null&&A.resolve(C),A!=null?A.promise():void 0;if(C)return M(null,C)}else if((p!=null?p.substr(0,6):void 0)==="cache:")return N=new Error("Could not fetch data from cache"),M?M(N):(A!=null&&A.reject(N),A!=null?A.promise():void 0)}return p?(S.request.sendCallback({data:p,provider:w,cache:x!=null?x.cache:void 0,expires:x!=null?x.expires:void 0,callback:M},A),A!=null?A.promise():void 0):void 0},clearCache:function(w){return f.clearCache(w)},http_me:function(w){S.request.http_me&&S.request.http_me(w)},http:function(w){S.request.http&&S.request.http(w)},getVersion:function(){return l.getVersion.apply(this)}}}},{"../tools/cookies":10,"../tools/sha1":14,"./providers":5,"./request":6}],5:[function(t,r,i){var s;s=t("../config"),r.exports=function(o){var a,l,u,c;return a=o.getJquery(),c={},u={},l={execProvidersCb:function(f,d,h){var m,v;if(u[f]){m=u[f],delete u[f];for(v in m)m[v](d,h)}},fetchDescription:function(f){c[f]||(c[f]=!0,a.ajax({url:s.oauthd_api+"/providers/"+f,data:{extend:!0},dataType:"json"}).done(function(d){c[f]=d.data,l.execProvidersCb(f,null,d.data)}).always(function(){typeof c[f]!="object"&&(delete c[f],l.execProvidersCb(f,new Error("Unable to fetch request description")))}))},getDescription:function(f,d,h){return d=d||{},typeof c[f]=="object"?h(null,c[f]):(c[f]||l.fetchDescription(f),d.wait?(u[f]=u[f]||[],void u[f].push(h)):h(null,{}))}}}},{"../config":1}],6:[function(t,r,i){var s,o=[].indexOf||function(a){for(var l=0,u=this.length;u>l;l++)if(l in this&&this[l]===a)return l;return-1};s=t("../tools/url")(),r.exports=function(a,l,u){var c,f,d,h,m;return c=a.getJquery(),d=a.getConfig(),f=a.getCache(),h=[],m=!1,{retrieveMethods:function(){var v;return v=c.Deferred(),m?v.resolve(h):c.ajax(d.oauthd_url+"/api/extended-endpoints").then(function(y){return h=y.data,m=!0,v.resolve()}).fail(function(y){return m=!0,v.reject(y)}),v.promise()},generateMethods:function(v,y,p){var S,b,g,w,x,M,A,N,C;if(h!=null){for(A=[],b=S=0,w=h.length;w>S;b=++S)N=h[b],x=N.name.split("."),M=v,A.push((function(){var T,R,$;for($=[],g=T=0,R=x.length;R>T;g=++T)C=x[g],g<x.length-1?(M[C]==null&&(M[C]={}),$.push(M=M[C])):$.push(M[C]=this.mkHttpAll(p,y,N,arguments));return $}).apply(this,arguments));return A}},http:function(v){var y,p,S,b,g;S=function(){var w,x,M,A;if(A=g.oauthio.request||{},!A.cors){g.url=encodeURIComponent(g.url),g.url[0]!=="/"&&(g.url="/"+g.url),g.url=d.oauthd_url+"/request/"+g.oauthio.provider+g.url,g.headers=g.headers||{},g.headers.oauthio="k="+d.key,g.oauthio.tokens.oauth_token&&g.oauthio.tokens.oauth_token_secret&&(g.headers.oauthio+="&oauthv=1");for(x in g.oauthio.tokens)g.headers.oauthio+="&"+encodeURIComponent(x)+"="+encodeURIComponent(g.oauthio.tokens[x]);return delete g.oauthio,c.ajax(g)}if(g.oauthio.tokens){if(g.oauthio.tokens.access_token&&(g.oauthio.tokens.token=g.oauthio.tokens.access_token),g.url.match(/^[a-z]{2,16}:\/\//)||(g.url[0]!=="/"&&(g.url="/"+g.url),g.url=A.url+g.url),g.url=s.replaceParam(g.url,g.oauthio.tokens,A.parameters),A.query){M=[];for(w in A.query)M.push(encodeURIComponent(w)+"="+encodeURIComponent(s.replaceParam(A.query[w],g.oauthio.tokens,A.parameters)));o.call(g.url,"?")>=0?g.url+="&"+M:g.url+="?"+M}if(A.headers){g.headers=g.headers||{};for(w in A.headers)g.headers[w]=s.replaceParam(A.headers[w],g.oauthio.tokens,A.parameters)}return delete g.oauthio,c.ajax(g)}},g={},b=void 0;for(b in v)g[b]=v[b];return g.oauthio.request&&g.oauthio.request!==!0?S():(p={wait:!!g.oauthio.request},y=c.Deferred(),u.getDescription(g.oauthio.provider,p,function(w,x){return w?y.reject(w):(g.oauthio.tokens.oauth_token&&g.oauthio.tokens.oauth_token_secret?g.oauthio.request=x.oauth1&&x.oauth1.request:g.oauthio.request=x.oauth2&&x.oauth2.request,void y.resolve())}),y.then(S))},http_me:function(v){var y,p,S,b,g;S=function(){var w,x,M;w=c.Deferred(),g.oauthio.request,g.url=d.oauthd_url+"/auth/"+g.oauthio.provider+"/me",g.headers=g.headers||{},g.headers.oauthio="k="+d.key,g.oauthio.tokens.oauth_token&&g.oauthio.tokens.oauth_token_secret&&(g.headers.oauthio+="&oauthv=1");for(x in g.oauthio.tokens)g.headers.oauthio+="&"+encodeURIComponent(x)+"="+encodeURIComponent(g.oauthio.tokens[x]);return delete g.oauthio,M=c.ajax(g),c.when(M).done(function(A){w.resolve(A.data)}).fail(function(A){A.responseJSON?w.reject(A.responseJSON.data):w.reject(new Error("An error occured while trying to access the resource"))}),w.promise()},g={};for(b in v)g[b]=v[b];return g.oauthio.request&&g.oauthio.request!==!0?S():(p={wait:!!g.oauthio.request},y=c.Deferred(),u.getDescription(g.oauthio.provider,p,function(w,x){return w?y.reject(w):(g.oauthio.tokens.oauth_token&&g.oauthio.tokens.oauth_token_secret?g.oauthio.request=x.oauth1&&x.oauth1.request:g.oauthio.request=x.oauth2&&x.oauth2.request,void y.resolve())}),y.then(S))},http_all:function(v,y,p){return function(){var S,b,g;S=c.Deferred(),v.oauthio.request,v.headers=v.headers||{},v.headers.oauthio="k="+d.key,v.oauthio.tokens.oauth_token&&v.oauthio.tokens.oauth_token_secret&&(v.headers.oauthio+="&oauthv=1");for(b in v.oauthio.tokens)v.headers.oauthio+="&"+encodeURIComponent(b)+"="+encodeURIComponent(v.oauthio.tokens[b]);return delete v.oauthio,g=c.ajax(v),c.when(g).done(function(w){if(typeof w.data=="string")try{w.data=JSON.parse(w.data)}catch{w.data=w.data}finally{S.resolve(w.data)}}).fail(function(w){w.responseJSON?S.reject(w.responseJSON.data):S.reject(new Error("An error occured while trying to access the resource"))}),S.promise()}()},mkHttp:function(v,y,p,S){var b;return b=this,function(g,w){var x,M;if(M={},typeof g=="string"){if(typeof w=="object")for(x in w)M[x]=w[x];M.url=g}else if(typeof g=="object")for(x in g)M[x]=g[x];return M.type=M.type||S,M.oauthio={provider:v,tokens:y,request:p},b.http(M)}},mkHttpMe:function(v,y,p,S){var b;return b=this,function(g){var w;return w={},w.type=w.type||S,w.oauthio={provider:v,tokens:y,request:p},w.data=w.data||{},g&&(w.data.filter=g.join(",")),b.http_me(w)}},mkHttpAll:function(v,y,p){var S;return S=this,function(){var b,g,w,x;g={},g.type=p.method,g.url=d.oauthd_url+p.endpoint.replace(":provider",v),g.oauthio={provider:v,tokens:y},g.data={};for(b in arguments)x=arguments[b],w=p.params[b],w!=null&&(g.data[w.name]=x);return g.data=g.data||{},S.http_all(g,p,arguments)}},sendCallback:function(v,y){var p,S,b,g,w,x,M,A;p=this,S=void 0,b=void 0;try{S=JSON.parse(v.data)}catch{return y.reject(new Error("Error while parsing result")),v.callback(new Error("Error while parsing result"))}if(S&&S.provider){if(v.provider&&S.provider.toLowerCase()!==v.provider.toLowerCase())return b=new Error("Returned provider name does not match asked provider"),y.reject(b),v.callback&&typeof v.callback=="function"?v.callback(b):void 0;if(S.status==="error"||S.status==="fail")return b=new Error(S.message),b.body=S.data,y.reject(b),v.callback&&typeof v.callback=="function"?v.callback(b):void 0;if(S.status!=="success"||!S.data)return b=new Error,b.body=S.data,y.reject(b),v.callback&&typeof v.callback=="function"?v.callback(b):void 0;for(S.state=S.state.replace(/\s+/g,""),g=0;g<l.length;)l[g]=l[g].replace(/\s+/g,""),g++;if(!S.state||l.indexOf(S.state)===-1)return y.reject(new Error("State is not matching")),v.callback&&typeof v.callback=="function"?v.callback(new Error("State is not matching")):void 0;if(v.provider||(S.data.provider=S.provider),M=S.data,M.provider=S.provider.toLowerCase(),f.cacheEnabled(v.cache)&&M&&(v.expires&&!M.expires_in&&(M.expires_in=v.expires),f.storeCache(S.provider,M)),x=M.request,delete M.request,A=void 0,M.access_token?A={access_token:M.access_token}:M.oauth_token&&M.oauth_token_secret&&(A={oauth_token:M.oauth_token,oauth_token_secret:M.oauth_token_secret}),!x)return y.resolve(M),v.callback&&typeof v.callback=="function"?v.callback(null,M):void 0;if(x.required)for(g in x.required)A[x.required[g]]=M[x.required[g]];return w=function(N){return p.mkHttp(S.provider,A,x,N)},M.toJson=function(){var N;return N={},M.access_token!=null&&(N.access_token=M.access_token),M.oauth_token!=null&&(N.oauth_token=M.oauth_token),M.oauth_token_secret!=null&&(N.oauth_token_secret=M.oauth_token_secret),M.expires_in!=null&&(N.expires_in=M.expires_in),M.token_type!=null&&(N.token_type=M.token_type),M.id_token!=null&&(N.id_token=M.id_token),M.provider!=null&&(N.provider=M.provider),M.email!=null&&(N.email=M.email),N},M.get=w("GET"),M.post=w("POST"),M.put=w("PUT"),M.patch=w("PATCH"),M.del=w("DELETE"),M.me=p.mkHttpMe(S.provider,A,x,"GET"),this.retrieveMethods().then(function(N){return function(){return N.generateMethods(M,A,S.provider),y.resolve(M),v.callback&&typeof v.callback=="function"?v.callback(null,M):void 0}}(this)).fail(function(N){return function(C){return console.log("Could not retrieve methods",C),y.resolve(M),v.callback&&typeof v.callback=="function"?v.callback(null,M):void 0}}())}}}}},{"../tools/url":15}],7:[function(t,r,i){r.exports=function(s){var o,a,l,u,c;return o=s.getJquery(),l=s.getConfig(),c=s.getStorage(),u=null,a=function(){function f(d){this.token=d.token,this.data=d.user,this.providers=d.providers,u=this.getEditableData()}return f.prototype.getEditableData=function(){var d,h;d=[];for(h in this.data)["id","email"].indexOf(h)===-1&&d.push({key:h,value:this.data[h]});return d},f.prototype.save=function(){var d,h,m,v,y,p,S,b;for(h={},m=0,p=u.length;p>m;m++)d=u[m],this.data[d.key]!==d.value&&(h[d.key]=this.data[d.key]),this.data[d.key]===null&&delete this.data[d.key];for(y=function(g){var w,x,M;for(w=0,x=u.length;x>w;w++)if(M=u[w],M.key===g)return!0;return!1},b=this.getEditableData(),v=0,S=b.length;S>v;v++)d=b[v],y(d.key)||(h[d.key]=this.data[d.key]);return this.saveLocal(),s.API.put("/api/usermanagement/user?k="+l.key+"&token="+this.token,h)},f.prototype.select=function(d){return null},f.prototype.saveLocal=function(){var d;return d={token:this.token,user:this.data,providers:this.providers},c.erase("oio_auth"),c.create("oio_auth",JSON.stringify(d),21600)},f.prototype.hasProvider=function(d){return!!this.providers&&this.providers.indexOf(d)!==-1},f.prototype.getProviders=function(){var d;return d=o.Deferred(),s.API.get("/api/usermanagement/user/providers?k="+l.key+"&token="+this.token).done(function(h){return function(m){return h.providers=m.data,h.saveLocal(),d.resolve(h.providers)}}(this)).fail(function(h){return d.reject(h)}),d.promise()},f.prototype.addProvider=function(d){var h;return h=o.Deferred(),typeof d.toJson=="function"&&(d=d.toJson()),d.email=this.data.email,this.providers||(this.providers=[]),this.providers.push(d.provider),s.API.post("/api/usermanagement/user/providers?k="+l.key+"&token="+this.token,d).done(function(m){return function(v){return m.data=v.data,m.saveLocal(),h.resolve()}}(this)).fail(function(m){return function(v){return m.providers.splice(m.providers.indexOf(d.provider),1),h.reject(v)}}(this)),h.promise()},f.prototype.removeProvider=function(d){var h;return h=o.Deferred(),this.providers.splice(this.providers.indexOf(d),1),s.API.del("/api/usermanagement/user/providers/"+d+"?k="+l.key+"&token="+this.token).done(function(m){return function(v){return m.saveLocal(),h.resolve(v)}}(this)).fail(function(m){return function(v){return m.providers.push(d),h.reject(v)}}(this)),h.promise()},f.prototype.changePassword=function(d,h){return s.API.post("/api/usermanagement/user/password?k="+l.key+"&token="+this.token,{password:h})},f.prototype.isLoggued=function(){return s.User.isLogged()},f.prototype.isLogged=function(){return s.User.isLogged()},f.prototype.logout=function(){var d;return d=o.Deferred(),c.erase("oio_auth"),s.API.post("/api/usermanagement/user/logout?k="+l.key+"&token="+this.token).done(function(){return d.resolve()}).fail(function(h){return d.reject(h)}),d.promise()},f}(),{initialize:function(f,d){return s.initialize(f,d)},setOAuthdURL:function(f){return s.setOAuthdURL(f)},signup:function(f){var d;return d=o.Deferred(),typeof f.toJson=="function"&&(f=f.toJson()),s.API.post("/api/usermanagement/signup?k="+l.key,f).done(function(h){return c.create("oio_auth",JSON.stringify(h.data),h.data.expires_in||21600),d.resolve(new a(h.data))}).fail(function(h){return d.reject(h)}),d.promise()},signin:function(f,d){var h,m;return h=o.Deferred(),typeof f=="string"||d?s.API.post("/api/usermanagement/signin?k="+l.key,{email:f,password:d}).done(function(v){return c.create("oio_auth",JSON.stringify(v.data),v.data.expires_in||21600),h.resolve(new a(v.data))}).fail(function(v){return h.reject(v)}):(m=f,typeof m.toJson=="function"&&(m=m.toJson()),s.API.post("/api/usermanagement/signin?k="+l.key,m).done(function(v){return c.create("oio_auth",JSON.stringify(v.data),v.data.expires_in||21600),h.resolve(new a(v.data))}).fail(function(v){return h.reject(v)})),h.promise()},confirmResetPassword:function(f,d){return s.API.post("/api/usermanagement/user/password?k="+l.key,{password:f,token:d})},resetPassword:function(f,d){return s.API.post("/api/usermanagement/user/password/reset?k="+l.key,{email:f})},refreshIdentity:function(){var f;return f=o.Deferred(),s.API.get("/api/usermanagement/user?k="+l.key+"&token="+JSON.parse(c.read("oio_auth")).token).done(function(d){return f.resolve(new a(d.data))}).fail(function(d){return f.reject(d)}),f.promise()},getIdentity:function(){var f;return f=c.read("oio_auth"),f?new a(JSON.parse(f)):null},isLogged:function(){var f;return f=c.read("oio_auth"),!!f}}}},{}],8:[function(t,r,i){(function(){var s,o;return o=t("./tools/jquery-lite.js"),s=t("./lib/core")(window,document,o,navigator),s.extend("OAuth",t("./lib/oauth")),s.extend("API",t("./lib/api")),s.extend("User",t("./lib/user")),typeof angular<"u"&&angular!==null&&angular.module("oauthio",[]).factory("OAuth",[function(){return s.OAuth}]).factory("User",[function(){return s.User}]),i.OAuthio=s,window.User=i.User=i.OAuthio.User,window.OAuth=i.OAuth=i.OAuthio.OAuth,typeof r<"u"&&r!==null&&r.exports&&(r.exports=i),i})()},{"./lib/api":2,"./lib/core":3,"./lib/oauth":4,"./lib/user":7,"./tools/jquery-lite.js":11}],9:[function(t,r,i){r.exports={init:function(s,o){return this.config=o,this.storage=s},tryCache:function(s,o,a){var l,u;if(this.cacheEnabled(a)){if(a=this.storage.read("oauthio_provider_"+o),!a)return!1;a=decodeURIComponent(a)}if(typeof a=="string")try{a=JSON.parse(a)}catch{return!1}if(typeof a=="object"){u={};for(l in a)l!=="request"&&typeof a[l]!="function"&&(u[l]=a[l]);return s.create(o,u,a.request)}return!1},storeCache:function(s,o){var a;a=3600,o.expires_in?a=o.expires_in:(this.config.options.expires||this.config.options.expires===!1)&&(a=this.config.options.expires),this.storage.create("oauthio_provider_"+s,encodeURIComponent(JSON.stringify(o)),a)},cacheEnabled:function(s){return typeof s>"u"?this.config.options.cache:s},clearCache:function(s){s?this.storage.erase("oauthio_provider_"+s):this.storage.eraseFrom("oauthio_provider_")}}},{}],10:[function(t,r,i){r.exports={init:function(s,o){return this.config=s,this.document=o},create:function(s,o,a){var l;this.erase(s),l=new Date,a?l.setTime(l.getTime()+1e3*(a||1200)):l.setFullYear(l.getFullYear()+3),a="; expires="+l.toGMTString(),this.document.cookie=s+"="+o+a+"; path=/"},read:function(s){var o,a,l,u;for(u=s+"=",a=this.document.cookie.split(";"),l=0;l<a.length;){for(o=a[l];o.charAt(0)===" ";)o=o.substring(1,o.length);if(o.indexOf(u)===0)return o.substring(u.length,o.length);l++}return null},erase:function(s){var o;o=new Date,o.setTime(o.getTime()-864e5),this.document.cookie=s+"=; expires="+o.toGMTString()+"; path=/"},eraseFrom:function(s){var o,a,l,u,c;for(l=this.document.cookie.split(";"),u=0,c=l.length;c>u;u++)a=l[u],o=a.split("=")[0].trim(),o.substr(0,s.length)===s&&this.erase(o)}}},{}],11:[function(t,r,i){(function(s,o){typeof r=="object"&&typeof r.exports=="object"?r.exports=s.document?o(s,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return o(a)}:o(s)})(typeof window<"u"?window:this,function(s,o){function a(H){var ne=H.length,fe=D.type(H);return fe==="function"||D.isWindow(H)?!1:H.nodeType===1&&ne?!0:fe==="array"||ne===0||typeof ne=="number"&&ne>0&&ne-1 in H}function l(H){var ne=ce[H]={};return D.each(H.match(ae)||[],function(fe,xe){ne[xe]=!0}),ne}function u(){B.removeEventListener("DOMContentLoaded",u,!1),s.removeEventListener("load",u,!1),D.ready()}function c(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=D.expando+Math.random()}function f(H,ne,fe){var xe;if(fe===void 0&&H.nodeType===1)if(xe="data-"+ne.replace(Ee,"-$1").toLowerCase(),fe=H.getAttribute(xe),typeof fe=="string"){try{fe=fe==="true"?!0:fe==="false"?!1:fe==="null"?null:+fe+""===fe?+fe:Ae.test(fe)?D.parseJSON(fe):fe}catch{}data_user.set(H,ne,fe)}else fe=void 0;return fe}function d(){return!0}function h(){return!1}function m(){try{return B.activeElement}catch{}}function v(H){return function(ne,fe){typeof ne!="string"&&(fe=ne,ne="*");var xe,Ce=0,Oe=ne.toLowerCase().match(ae)||[];if(D.isFunction(fe))for(;xe=Oe[Ce++];)xe[0]==="+"?(xe=xe.slice(1)||"*",(H[xe]=H[xe]||[]).unshift(fe)):(H[xe]=H[xe]||[]).push(fe)}}function y(H,ne,fe,xe){function Ce(Xe){var tt;return Oe[Xe]=!0,D.each(H[Xe]||[],function(ht,Pt){var rt=Pt(ne,fe,xe);return typeof rt!="string"||$e||Oe[rt]?$e?!(tt=rt):void 0:(ne.dataTypes.unshift(rt),Ce(rt),!1)}),tt}var Oe={},$e=H===He;return Ce(ne.dataTypes[0])||!Oe["*"]&&Ce("*")}function p(H,ne){var fe,xe,Ce=D.ajaxSettings.flatOptions||{};for(fe in ne)ne[fe]!==void 0&&((Ce[fe]?H:xe||(xe={}))[fe]=ne[fe]);return xe&&D.extend(!0,H,xe),H}function S(H,ne,fe){for(var xe,Ce,Oe,$e,Xe=H.contents,tt=H.dataTypes;tt[0]==="*";)tt.shift(),xe===void 0&&(xe=H.mimeType||ne.getResponseHeader("Content-Type"));if(xe){for(Ce in Xe)if(Xe[Ce]&&Xe[Ce].test(xe)){tt.unshift(Ce);break}}if(tt[0]in fe)Oe=tt[0];else{for(Ce in fe){if(!tt[0]||H.converters[Ce+" "+tt[0]]){Oe=Ce;break}$e||($e=Ce)}Oe=Oe||$e}return Oe?(Oe!==tt[0]&&tt.unshift(Oe),fe[Oe]):void 0}function b(H,ne,fe,xe){var Ce,Oe,$e,Xe,tt,ht={},Pt=H.dataTypes.slice();if(Pt[1])for($e in H.converters)ht[$e.toLowerCase()]=H.converters[$e];for(Oe=Pt.shift();Oe;)if(H.responseFields[Oe]&&(fe[H.responseFields[Oe]]=ne),!tt&&xe&&H.dataFilter&&(ne=H.dataFilter(ne,H.dataType)),tt=Oe,Oe=Pt.shift()){if(Oe==="*")Oe=tt;else if(tt!=="*"&&tt!==Oe){if($e=ht[tt+" "+Oe]||ht["* "+Oe],!$e){for(Ce in ht)if(Xe=Ce.split(" "),Xe[1]===Oe&&($e=ht[tt+" "+Xe[0]]||ht["* "+Xe[0]])){$e===!0?$e=ht[Ce]:ht[Ce]!==!0&&(Oe=Xe[0],Pt.unshift(Xe[1]));break}}if($e!==!0)if($e&&H.throws)ne=$e(ne);else try{ne=$e(ne)}catch(rt){return{state:"parsererror",error:$e?rt:"No conversion from "+tt+" to "+Oe}}}}return{state:"success",data:ne}}function g(H,ne,fe,xe){var Ce;if(D.isArray(ne))D.each(ne,function(Oe,$e){fe||qe.test(H)?xe(H,$e):g(H+"["+(typeof $e=="object"?Oe:"")+"]",$e,fe,xe)});else if(fe||D.type(ne)!=="object")xe(H,ne);else for(Ce in ne)g(H+"["+Ce+"]",ne[Ce],fe,xe)}var w=[],x=w.slice,M=w.concat,A=w.push,N=w.indexOf,C={},T=C.toString,R=C.hasOwnProperty,$={},B=s.document,z="2.1.1 -attributes,-attributes/attr,-attributes/classes,-attributes/prop,-attributes/support,-attributes/val,-css/addGetHookIf,-css/curCSS,-css/defaultDisplay,-css/hiddenVisibleSelectors,-css/support,-css/swap,-css/var,-css/var/cssExpand,-css/var/getStyles,-css/var/isHidden,-css/var/rmargin,-css/var/rnumnonpx,-css,-effects,-effects/Tween,-effects/animatedSelector,-dimensions,-offset,-data/var/data_user,-deprecated,-event/alias,-event/support,-intro,-manipulation/_evalUrl,-manipulation/support,-manipulation/var,-manipulation/var/rcheckableType,-manipulation,-outro,-queue,-queue/delay,-selector-native,-selector-sizzle,-sizzle/dist,-sizzle/dist/sizzle,-sizzle/dist/min,-sizzle/test,-sizzle/test/jquery,-traversing,-traversing/findFilter,-traversing/var/rneedsContext,-traversing/var,-wrap,-exports,-exports/amd",D=function(H,ne){return new D.fn.init(H,ne)},I=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,U=/^-ms-/,L=/-([\da-z])/gi,q=function(H,ne){return ne.toUpperCase()};D.fn=D.prototype={jquery:z,constructor:D,selector:"",length:0,toArray:function(){return x.call(this)},get:function(H){return H!=null?0>H?this[H+this.length]:this[H]:x.call(this)},pushStack:function(H){var ne=D.merge(this.constructor(),H);return ne.prevObject=this,ne.context=this.context,ne},each:function(H,ne){return D.each(this,H,ne)},map:function(H){return this.pushStack(D.map(this,function(ne,fe){return H.call(ne,fe,ne)}))},slice:function(){return this.pushStack(x.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(H){var ne=this.length,fe=+H+(0>H?ne:0);return this.pushStack(fe>=0&&ne>fe?[this[fe]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:A,sort:w.sort,splice:w.splice},D.extend=D.fn.extend=function(){var H,ne,fe,xe,Ce,Oe,$e=arguments[0]||{},Xe=1,tt=arguments.length,ht=!1;for(typeof $e=="boolean"&&(ht=$e,$e=arguments[Xe]||{},Xe++),typeof $e=="object"||D.isFunction($e)||($e={}),Xe===tt&&($e=this,Xe--);tt>Xe;Xe++)if((H=arguments[Xe])!=null)for(ne in H)fe=$e[ne],xe=H[ne],$e!==xe&&(ht&&xe&&(D.isPlainObject(xe)||(Ce=D.isArray(xe)))?(Ce?(Ce=!1,Oe=fe&&D.isArray(fe)?fe:[]):Oe=fe&&D.isPlainObject(fe)?fe:{},$e[ne]=D.extend(ht,Oe,xe)):xe!==void 0&&($e[ne]=xe));return $e},D.extend({expando:"jQuery"+(z+Math.random()).replace(/\D/g,""),isReady:!0,error:function(H){throw new Error(H)},noop:function(){},isFunction:function(H){return D.type(H)==="function"},isArray:Array.isArray,isWindow:function(H){return H!=null&&H===H.window},isNumeric:function(H){return!D.isArray(H)&&H-parseFloat(H)>=0},isPlainObject:function(H){return D.type(H)!=="object"||H.nodeType||D.isWindow(H)?!1:!H.constructor||R.call(H.constructor.prototype,"isPrototypeOf")},isEmptyObject:function(H){var ne;for(ne in H)return!1;return!0},type:function(H){return H==null?H+"":typeof H=="object"||typeof H=="function"?C[T.call(H)]||"object":typeof H},globalEval:function(H){var ne,fe=eval;H=D.trim(H),H&&(H.indexOf("use strict")===1?(ne=B.createElement("script"),ne.text=H,B.head.appendChild(ne).parentNode.removeChild(ne)):fe(H))},camelCase:function(H){return H.replace(U,"ms-").replace(L,q)},nodeName:function(H,ne){return H.nodeName&&H.nodeName.toLowerCase()===ne.toLowerCase()},each:function(H,ne,fe){var xe,Ce=0,Oe=H.length,$e=a(H);if(fe){if($e)for(;Oe>Ce&&(xe=ne.apply(H[Ce],fe),xe!==!1);Ce++);else for(Ce in H)if(xe=ne.apply(H[Ce],fe),xe===!1)break}else if($e)for(;Oe>Ce&&(xe=ne.call(H[Ce],Ce,H[Ce]),xe!==!1);Ce++);else for(Ce in H)if(xe=ne.call(H[Ce],Ce,H[Ce]),xe===!1)break;return H},trim:function(H){return H==null?"":(H+"").replace(I,"")},makeArray:function(H,ne){var fe=ne||[];return H!=null&&(a(Object(H))?D.merge(fe,typeof H=="string"?[H]:H):A.call(fe,H)),fe},inArray:function(H,ne,fe){return ne==null?-1:N.call(ne,H,fe)},merge:function(H,ne){for(var fe=+ne.length,xe=0,Ce=H.length;fe>xe;xe++)H[Ce++]=ne[xe];return H.length=Ce,H},grep:function(H,ne,fe){for(var xe,Ce=[],Oe=0,$e=H.length,Xe=!fe;$e>Oe;Oe++)xe=!ne(H[Oe],Oe),xe!==Xe&&Ce.push(H[Oe]);return Ce},map:function(H,ne,fe){var xe,Ce=0,Oe=H.length,$e=a(H),Xe=[];if($e)for(;Oe>Ce;Ce++)xe=ne(H[Ce],Ce,fe),xe!=null&&Xe.push(xe);else for(Ce in H)xe=ne(H[Ce],Ce,fe),xe!=null&&Xe.push(xe);return M.apply([],Xe)},guid:1,proxy:function(H,ne){var fe,xe,Ce;return typeof ne=="string"&&(fe=H[ne],ne=H,H=fe),D.isFunction(H)?(xe=x.call(arguments,2),Ce=function(){return H.apply(ne||this,xe.concat(x.call(arguments)))},Ce.guid=H.guid=H.guid||D.guid++,Ce):void 0},now:Date.now,support:$}),D.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(H,ne){C["[object "+ne+"]"]=ne.toLowerCase()});var Z,J=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Y=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ee=D.fn.init=function(H,ne){var fe,xe;if(!H)return this;if(typeof H=="string"){if(fe=H[0]==="<"&&H[H.length-1]===">"&&H.length>=3?[null,H,null]:Y.exec(H),!fe||!fe[1]&&ne)return!ne||ne.jquery?(ne||Z).find(H):this.constructor(ne).find(H);if(fe[1]){if(ne=ne instanceof D?ne[0]:ne,D.merge(this,D.parseHTML(fe[1],ne&&ne.nodeType?ne.ownerDocument||ne:B,!0)),J.test(fe[1])&&D.isPlainObject(ne))for(fe in ne)D.isFunction(this[fe])?this[fe](ne[fe]):this.attr(fe,ne[fe]);return this}return xe=B.getElementById(fe[2]),xe&&xe.parentNode&&(this.length=1,this[0]=xe),this.context=B,this.selector=H,this}return H.nodeType?(this.context=this[0]=H,this.length=1,this):D.isFunction(H)?typeof Z.ready<"u"?Z.ready(H):H(D):(H.selector!==void 0&&(this.selector=H.selector,this.context=H.context),D.makeArray(H,this))};ee.prototype=D.fn,Z=D(B);var ae=/\S+/g,ce={};D.Callbacks=function(H){H=typeof H=="string"?ce[H]||l(H):D.extend({},H);var ne,fe,xe,Ce,Oe,$e,Xe=[],tt=!H.once&&[],ht=function(rt){for(ne=H.memory&&rt,fe=!0,$e=Ce||0,Ce=0,Oe=Xe.length,xe=!0;Xe&&Oe>$e;$e++)if(Xe[$e].apply(rt[0],rt[1])===!1&&H.stopOnFalse){ne=!1;break}xe=!1,Xe&&(tt?tt.length&&ht(tt.shift()):ne?Xe=[]:Pt.disable())},Pt={add:function(){if(Xe){var rt=Xe.length;(function Et(Ht){D.each(Ht,function(kr,Ar){var er=D.type(Ar);er==="function"?H.unique&&Pt.has(Ar)||Xe.push(Ar):Ar&&Ar.length&&er!=="string"&&Et(Ar)})})(arguments),xe?Oe=Xe.length:ne&&(Ce=rt,ht(ne))}return this},remove:function(){return Xe&&D.each(arguments,function(rt,Et){for(var Ht;(Ht=D.inArray(Et,Xe,Ht))>-1;)Xe.splice(Ht,1),xe&&(Oe>=Ht&&Oe--,$e>=Ht&&$e--)}),this},has:function(rt){return rt?D.inArray(rt,Xe)>-1:!(!Xe||!Xe.length)},empty:function(){return Xe=[],Oe=0,this},disable:function(){return Xe=tt=ne=void 0,this},disabled:function(){return!Xe},lock:function(){return tt=void 0,ne||Pt.disable(),this},locked:function(){return!tt},fireWith:function(rt,Et){return!Xe||fe&&!tt||(Et=Et||[],Et=[rt,Et.slice?Et.slice():Et],xe?tt.push(Et):ht(Et)),this},fire:function(){return Pt.fireWith(this,arguments),this},fired:function(){return!!fe}};return Pt},D.extend({Deferred:function(H){var ne=[["resolve","done",D.Callbacks("once memory"),"resolved"],["reject","fail",D.Callbacks("once memory"),"rejected"],["notify","progress",D.Callbacks("memory")]],fe="pending",xe={state:function(){return fe},always:function(){return Ce.done(arguments).fail(arguments),this},then:function(){var Oe=arguments;return D.Deferred(function($e){D.each(ne,function(Xe,tt){var ht=D.isFunction(Oe[Xe])&&Oe[Xe];Ce[tt[1]](function(){var Pt=ht&&ht.apply(this,arguments);Pt&&D.isFunction(Pt.promise)?Pt.promise().done($e.resolve).fail($e.reject).progress($e.notify):$e[tt[0]+"With"](this===xe?$e.promise():this,ht?[Pt]:arguments)})}),Oe=null}).promise()},promise:function(Oe){return Oe!=null?D.extend(Oe,xe):xe}},Ce={};return xe.pipe=xe.then,D.each(ne,function(Oe,$e){var Xe=$e[2],tt=$e[3];xe[$e[1]]=Xe.add,tt&&Xe.add(function(){fe=tt},ne[1^Oe][2].disable,ne[2][2].lock),Ce[$e[0]]=function(){return Ce[$e[0]+"With"](this===Ce?xe:this,arguments),this},Ce[$e[0]+"With"]=Xe.fireWith}),xe.promise(Ce),H&&H.call(Ce,Ce),Ce},when:function(H){var ne,fe,xe,Ce=0,Oe=x.call(arguments),$e=Oe.length,Xe=$e!==1||H&&D.isFunction(H.promise)?$e:0,tt=Xe===1?H:D.Deferred(),ht=function(Pt,rt,Et){return function(Ht){rt[Pt]=this,Et[Pt]=arguments.length>1?x.call(arguments):Ht,Et===ne?tt.notifyWith(rt,Et):--Xe||tt.resolveWith(rt,Et)}};if($e>1)for(ne=new Array($e),fe=new Array($e),xe=new Array($e);$e>Ce;Ce++)Oe[Ce]&&D.isFunction(Oe[Ce].promise)?Oe[Ce].promise().done(ht(Ce,xe,Oe)).fail(tt.reject).progress(ht(Ce,fe,ne)):--Xe;return Xe||tt.resolveWith(xe,Oe),tt.promise()}});var pe;D.fn.ready=function(H){return D.ready.promise().done(H),this},D.extend({isReady:!1,readyWait:1,holdReady:function(H){H?D.readyWait++:D.ready(!0)},ready:function(H){(H===!0?--D.readyWait:D.isReady)||(D.isReady=!0,H!==!0&&--D.readyWait>0||(pe.resolveWith(B,[D]),D.fn.triggerHandler&&(D(B).triggerHandler("ready"),D(B).off("ready"))))}}),D.ready.promise=function(H){return pe||(pe=D.Deferred(),B.readyState==="complete"?setTimeout(D.ready):(B.addEventListener("DOMContentLoaded",u,!1),s.addEventListener("load",u,!1))),pe.promise(H)},D.ready.promise();var we=D.access=function(H,ne,fe,xe,Ce,Oe,$e){var Xe=0,tt=H.length,ht=fe==null;if(D.type(fe)==="object"){Ce=!0;for(Xe in fe)D.access(H,ne,Xe,fe[Xe],!0,Oe,$e)}else if(xe!==void 0&&(Ce=!0,D.isFunction(xe)||($e=!0),ht&&($e?(ne.call(H,xe),ne=null):(ht=ne,ne=function(Pt,rt,Et){return ht.call(D(Pt),Et)})),ne))for(;tt>Xe;Xe++)ne(H[Xe],fe,$e?xe:xe.call(H[Xe],Xe,ne(H[Xe],fe)));return Ce?H:ht?ne.call(H):tt?ne(H[0],fe):Oe};D.acceptData=function(H){return H.nodeType===1||H.nodeType===9||!+H.nodeType},c.uid=1,c.accepts=D.acceptData,c.prototype={key:function(H){if(!c.accepts(H))return 0;var ne={},fe=H[this.expando];if(!fe){fe=c.uid++;try{ne[this.expando]={value:fe},Object.defineProperties(H,ne)}catch{ne[this.expando]=fe,D.extend(H,ne)}}return this.cache[fe]||(this.cache[fe]={}),fe},set:function(H,ne,fe){var xe,Ce=this.key(H),Oe=this.cache[Ce];if(typeof ne=="string")Oe[ne]=fe;else if(D.isEmptyObject(Oe))D.extend(this.cache[Ce],ne);else for(xe in ne)Oe[xe]=ne[xe];return Oe},get:function(H,ne){var fe=this.cache[this.key(H)];return ne===void 0?fe:fe[ne]},access:function(H,ne,fe){var xe;return ne===void 0||ne&&typeof ne=="string"&&fe===void 0?(xe=this.get(H,ne),xe!==void 0?xe:this.get(H,D.camelCase(ne))):(this.set(H,ne,fe),fe!==void 0?fe:ne)},remove:function(H,ne){var fe,xe,Ce,Oe=this.key(H),$e=this.cache[Oe];if(ne===void 0)this.cache[Oe]={};else for(D.isArray(ne)?xe=ne.concat(ne.map(D.camelCase)):(Ce=D.camelCase(ne),ne in $e?xe=[ne,Ce]:(xe=Ce,xe=xe in $e?[xe]:xe.match(ae)||[])),fe=xe.length;fe--;)delete $e[xe[fe]]},hasData:function(H){return!D.isEmptyObject(this.cache[H[this.expando]]||{})},discard:function(H){H[this.expando]&&delete this.cache[H[this.expando]]}};var me=new c,Ae=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ee=/([A-Z])/g;D.extend({hasData:function(H){return data_user.hasData(H)||me.hasData(H)},data:function(H,ne,fe){return data_user.access(H,ne,fe)},removeData:function(H,ne){data_user.remove(H,ne)},_data:function(H,ne,fe){return me.access(H,ne,fe)},_removeData:function(H,ne){me.remove(H,ne)}}),D.fn.extend({data:function(H,ne){var fe,xe,Ce,Oe=this[0],$e=Oe&&Oe.attributes;if(H===void 0){if(this.length&&(Ce=data_user.get(Oe),Oe.nodeType===1&&!me.get(Oe,"hasDataAttrs"))){for(fe=$e.length;fe--;)$e[fe]&&(xe=$e[fe].name,xe.indexOf("data-")===0&&(xe=D.camelCase(xe.slice(5)),f(Oe,xe,Ce[xe])));me.set(Oe,"hasDataAttrs",!0)}return Ce}return typeof H=="object"?this.each(function(){data_user.set(this,H)}):we(this,function(Xe){var tt,ht=D.camelCase(H);if(Oe&&Xe===void 0){if(tt=data_user.get(Oe,H),tt!==void 0||(tt=data_user.get(Oe,ht),tt!==void 0)||(tt=f(Oe,ht,void 0),tt!==void 0))return tt}else this.each(function(){var Pt=data_user.get(this,ht);data_user.set(this,ht,Xe),H.indexOf("-")!==-1&&Pt!==void 0&&data_user.set(this,H,Xe)})},null,ne,arguments.length>1,null,!0)},removeData:function(H){return this.each(function(){data_user.remove(this,H)})}});var re="undefined",Pe=/^key/,Re=/^(?:mouse|pointer|contextmenu)|click/,te=/^(?:focusinfocus|focusoutblur)$/,ie=/^([^.]*)(?:\.(.+)|)$/;D.event={global:{},add:function(H,ne,fe,xe,Ce){var Oe,$e,Xe,tt,ht,Pt,rt,Et,Ht,kr,Ar,er=me.get(H);if(er)for(fe.handler&&(Oe=fe,fe=Oe.handler,Ce=Oe.selector),fe.guid||(fe.guid=D.guid++),(tt=er.events)||(tt=er.events={}),($e=er.handle)||($e=er.handle=function(Ga){return typeof D!==re&&D.event.triggered!==Ga.type?D.event.dispatch.apply(H,arguments):void 0}),ne=(ne||"").match(ae)||[""],ht=ne.length;ht--;)Xe=ie.exec(ne[ht])||[],Ht=Ar=Xe[1],kr=(Xe[2]||"").split(".").sort(),Ht&&(rt=D.event.special[Ht]||{},Ht=(Ce?rt.delegateType:rt.bindType)||Ht,rt=D.event.special[Ht]||{},Pt=D.extend({type:Ht,origType:Ar,data:xe,handler:fe,guid:fe.guid,selector:Ce,needsContext:Ce&&D.expr.match.needsContext.test(Ce),namespace:kr.join(".")},Oe),(Et=tt[Ht])||(Et=tt[Ht]=[],Et.delegateCount=0,rt.setup&&rt.setup.call(H,xe,kr,$e)!==!1||H.addEventListener&&H.addEventListener(Ht,$e,!1)),rt.add&&(rt.add.call(H,Pt),Pt.handler.guid||(Pt.handler.guid=fe.guid)),Ce?Et.splice(Et.delegateCount++,0,Pt):Et.push(Pt),D.event.global[Ht]=!0)},remove:function(H,ne,fe,xe,Ce){var Oe,$e,Xe,tt,ht,Pt,rt,Et,Ht,kr,Ar,er=me.hasData(H)&&me.get(H);if(er&&(tt=er.events)){for(ne=(ne||"").match(ae)||[""],ht=ne.length;ht--;)if(Xe=ie.exec(ne[ht])||[],Ht=Ar=Xe[1],kr=(Xe[2]||"").split(".").sort(),Ht){for(rt=D.event.special[Ht]||{},Ht=(xe?rt.delegateType:rt.bindType)||Ht,Et=tt[Ht]||[],Xe=Xe[2]&&new RegExp("(^|\\.)"+kr.join("\\.(?:.*\\.|)")+"(\\.|$)"),$e=Oe=Et.length;Oe--;)Pt=Et[Oe],!Ce&&Ar!==Pt.origType||fe&&fe.guid!==Pt.guid||Xe&&!Xe.test(Pt.namespace)||xe&&xe!==Pt.selector&&(xe!=="**"||!Pt.selector)||(Et.splice(Oe,1),Pt.selector&&Et.delegateCount--,rt.remove&&rt.remove.call(H,Pt));$e&&!Et.length&&(rt.teardown&&rt.teardown.call(H,kr,er.handle)!==!1||D.removeEvent(H,Ht,er.handle),delete tt[Ht])}else for(Ht in tt)D.event.remove(H,Ht+ne[ht],fe,xe,!0);D.isEmptyObject(tt)&&(delete er.handle,me.remove(H,"events"))}},trigger:function(H,ne,fe,xe){var Ce,Oe,$e,Xe,tt,ht,Pt,rt=[fe||B],Et=R.call(H,"type")?H.type:H,Ht=R.call(H,"namespace")?H.namespace.split("."):[];if(Oe=$e=fe=fe||B,fe.nodeType!==3&&fe.nodeType!==8&&!te.test(Et+D.event.triggered)&&(Et.indexOf(".")>=0&&(Ht=Et.split("."),Et=Ht.shift(),Ht.sort()),tt=Et.indexOf(":")<0&&"on"+Et,H=H[D.expando]?H:new D.Event(Et,typeof H=="object"&&H),H.isTrigger=xe?2:3,H.namespace=Ht.join("."),H.namespace_re=H.namespace?new RegExp("(^|\\.)"+Ht.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,H.result=void 0,H.target||(H.target=fe),ne=ne==null?[H]:D.makeArray(ne,[H]),Pt=D.event.special[Et]||{},xe||!Pt.trigger||Pt.trigger.apply(fe,ne)!==!1)){if(!xe&&!Pt.noBubble&&!D.isWindow(fe)){for(Xe=Pt.delegateType||Et,te.test(Xe+Et)||(Oe=Oe.parentNode);Oe;Oe=Oe.parentNode)rt.push(Oe),$e=Oe;$e===(fe.ownerDocument||B)&&rt.push($e.defaultView||$e.parentWindow||s)}for(Ce=0;(Oe=rt[Ce++])&&!H.isPropagationStopped();)H.type=Ce>1?Xe:Pt.bindType||Et,ht=(me.get(Oe,"events")||{})[H.type]&&me.get(Oe,"handle"),ht&&ht.apply(Oe,ne),ht=tt&&Oe[tt],ht&&ht.apply&&D.acceptData(Oe)&&(H.result=ht.apply(Oe,ne),H.result===!1&&H.preventDefault());return H.type=Et,xe||H.isDefaultPrevented()||Pt._default&&Pt._default.apply(rt.pop(),ne)!==!1||!D.acceptData(fe)||tt&&D.isFunction(fe[Et])&&!D.isWindow(fe)&&($e=fe[tt],$e&&(fe[tt]=null),D.event.triggered=Et,fe[Et](),D.event.triggered=void 0,$e&&(fe[tt]=$e)),H.result}},dispatch:function(H){H=D.event.fix(H);var ne,fe,xe,Ce,Oe,$e=[],Xe=x.call(arguments),tt=(me.get(this,"events")||{})[H.type]||[],ht=D.event.special[H.type]||{};if(Xe[0]=H,H.delegateTarget=this,!ht.preDispatch||ht.preDispatch.call(this,H)!==!1){for($e=D.event.handlers.call(this,H,tt),ne=0;(Ce=$e[ne++])&&!H.isPropagationStopped();)for(H.currentTarget=Ce.elem,fe=0;(Oe=Ce.handlers[fe++])&&!H.isImmediatePropagationStopped();)H.namespace_re&&!H.namespace_re.test(Oe.namespace)||(H.handleObj=Oe,H.data=Oe.data,xe=((D.event.special[Oe.origType]||{}).handle||Oe.handler).apply(Ce.elem,Xe),xe!==void 0&&(H.result=xe)===!1&&(H.preventDefault(),H.stopPropagation()));return ht.postDispatch&&ht.postDispatch.call(this,H),H.result}},handlers:function(H,ne){var fe,xe,Ce,Oe,$e=[],Xe=ne.delegateCount,tt=H.target;if(Xe&&tt.nodeType&&(!H.button||H.type!=="click")){for(;tt!==this;tt=tt.parentNode||this)if(tt.disabled!==!0||H.type!=="click"){for(xe=[],fe=0;Xe>fe;fe++)Oe=ne[fe],Ce=Oe.selector+" ",xe[Ce]===void 0&&(xe[Ce]=Oe.needsContext?D(Ce,this).index(tt)>=0:D.find(Ce,this,null,[tt]).length),xe[Ce]&&xe.push(Oe);xe.length&&$e.push({elem:tt,handlers:xe})}}return Xe<ne.length&&$e.push({elem:this,handlers:ne.slice(Xe)}),$e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(H,ne){return H.which==null&&(H.which=ne.charCode!=null?ne.charCode:ne.keyCode),H}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(H,ne){var fe,xe,Ce,Oe=ne.button;return H.pageX==null&&ne.clientX!=null&&(fe=H.target.ownerDocument||B,xe=fe.documentElement,Ce=fe.body,H.pageX=ne.clientX+(xe&&xe.scrollLeft||Ce&&Ce.scrollLeft||0)-(xe&&xe.clientLeft||Ce&&Ce.clientLeft||0),H.pageY=ne.clientY+(xe&&xe.scrollTop||Ce&&Ce.scrollTop||0)-(xe&&xe.clientTop||Ce&&Ce.clientTop||0)),H.which||Oe===void 0||(H.which=1&Oe?1:2&Oe?3:4&Oe?2:0),H}},fix:function(H){if(H[D.expando])return H;var ne,fe,xe,Ce=H.type,Oe=H,$e=this.fixHooks[Ce];for($e||(this.fixHooks[Ce]=$e=Re.test(Ce)?this.mouseHooks:Pe.test(Ce)?this.keyHooks:{}),xe=$e.props?this.props.concat($e.props):this.props,H=new D.Event(Oe),ne=xe.length;ne--;)fe=xe[ne],H[fe]=Oe[fe];return H.target||(H.target=B),H.target.nodeType===3&&(H.target=H.target.parentNode),$e.filter?$e.filter(H,Oe):H},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==m()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===m()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return this.type==="checkbox"&&this.click&&D.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(H){return D.nodeName(H.target,"a")}},beforeunload:{postDispatch:function(H){H.result!==void 0&&H.originalEvent&&(H.originalEvent.returnValue=H.result)}}},simulate:function(H,ne,fe,xe){var Ce=D.extend(new D.Event,fe,{type:H,isSimulated:!0,originalEvent:{}});xe?D.event.trigger(Ce,null,ne):D.event.dispatch.call(ne,Ce),Ce.isDefaultPrevented()&&fe.preventDefault()}},D.removeEvent=function(H,ne,fe){H.removeEventListener&&H.removeEventListener(ne,fe,!1)},D.Event=function(H,ne){return this instanceof D.Event?(H&&H.type?(this.originalEvent=H,this.type=H.type,this.isDefaultPrevented=H.defaultPrevented||H.defaultPrevented===void 0&&H.returnValue===!1?d:h):this.type=H,ne&&D.extend(this,ne),this.timeStamp=H&&H.timeStamp||D.now(),void(this[D.expando]=!0)):new D.Event(H,ne)},D.Event.prototype={isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h,preventDefault:function(){var H=this.originalEvent;this.isDefaultPrevented=d,H&&H.preventDefault&&H.preventDefault()},stopPropagation:function(){var H=this.originalEvent;this.isPropagationStopped=d,H&&H.stopPropagation&&H.stopPropagation()},stopImmediatePropagation:function(){var H=this.originalEvent;this.isImmediatePropagationStopped=d,H&&H.stopImmediatePropagation&&H.stopImmediatePropagation(),this.stopPropagation()}},D.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(H,ne){D.event.special[H]={delegateType:ne,bindType:ne,handle:function(fe){var xe,Ce=this,Oe=fe.relatedTarget,$e=fe.handleObj;return Oe&&(Oe===Ce||D.contains(Ce,Oe))||(fe.type=$e.origType,xe=$e.handler.apply(this,arguments),fe.type=ne),xe}}}),$.focusinBubbles||D.each({focus:"focusin",blur:"focusout"},function(H,ne){var fe=function(xe){D.event.simulate(ne,xe.target,D.event.fix(xe),!0)};D.event.special[ne]={setup:function(){var xe=this.ownerDocument||this,Ce=me.access(xe,ne);Ce||xe.addEventListener(H,fe,!0),me.access(xe,ne,(Ce||0)+1)},teardown:function(){var xe=this.ownerDocument||this,Ce=me.access(xe,ne)-1;Ce?me.access(xe,ne,Ce):(xe.removeEventListener(H,fe,!0),me.remove(xe,ne))}}}),D.fn.extend({on:function(H,ne,fe,xe,Ce){var Oe,$e;if(typeof H=="object"){typeof ne!="string"&&(fe=fe||ne,ne=void 0);for($e in H)this.on($e,ne,fe,H[$e],Ce);return this}if(fe==null&&xe==null?(xe=ne,fe=ne=void 0):xe==null&&(typeof ne=="string"?(xe=fe,fe=void 0):(xe=fe,fe=ne,ne=void 0)),xe===!1)xe=h;else if(!xe)return this;return Ce===1&&(Oe=xe,xe=function(Xe){return D().off(Xe),Oe.apply(this,arguments)},xe.guid=Oe.guid||(Oe.guid=D.guid++)),this.each(function(){D.event.add(this,H,xe,fe,ne)})},one:function(H,ne,fe,xe){return this.on(H,ne,fe,xe,1)},off:function(H,ne,fe){var xe,Ce;if(H&&H.preventDefault&&H.handleObj)return xe=H.handleObj,D(H.delegateTarget).off(xe.namespace?xe.origType+"."+xe.namespace:xe.origType,xe.selector,xe.handler),this;if(typeof H=="object"){for(Ce in H)this.off(Ce,ne,H[Ce]);return this}return ne!==!1&&typeof ne!="function"||(fe=ne,ne=void 0),fe===!1&&(fe=h),this.each(function(){D.event.remove(this,H,fe,ne)})},trigger:function(H,ne){return this.each(function(){D.event.trigger(H,ne,this)})},triggerHandler:function(H,ne){var fe=this[0];return fe?D.event.trigger(H,ne,fe,!0):void 0}});var Me=D.now(),oe=/\?/;D.parseJSON=function(H){return JSON.parse(H+"")},D.parseXML=function(H){var ne,fe;if(!H||typeof H!="string")return null;try{fe=new DOMParser,ne=fe.parseFromString(H,"text/xml")}catch{ne=void 0}return ne&&!ne.getElementsByTagName("parsererror").length||D.error("Invalid XML: "+H),ne};var G,j,de=/#.*$/,Te=/([?&])_=[^&]*/,X=/^(.*?):[ \t]*([^\r\n]*)$/gm,Q=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,be=/^(?:GET|HEAD)$/,_e=/^\/\//,Ne=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Fe={},He={},Ie="*/".concat("*");try{j=location.href}catch{j=B.createElement("a"),j.href="",j=j.href}G=Ne.exec(j.toLowerCase())||[],D.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:j,type:"GET",isLocal:Q.test(G[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ie,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":D.parseJSON,"text xml":D.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(H,ne){return ne?p(p(H,D.ajaxSettings),ne):p(D.ajaxSettings,H)},ajaxPrefilter:v(Fe),ajaxTransport:v(He),ajax:function(H,ne){function fe(Ue,Ve,je,yt){var St,It,ft,_t,zt,Ot=Ve;Si!==2&&(Si=2,Xe&&clearTimeout(Xe),xe=void 0,Oe=yt||"",Le.readyState=Ue>0?4:0,St=Ue>=200&&300>Ue||Ue===304,je&&(_t=S(rt,Le,je)),_t=b(rt,_t,Le,St),St?(rt.ifModified&&(zt=Le.getResponseHeader("Last-Modified"),zt&&(D.lastModified[Ce]=zt),zt=Le.getResponseHeader("etag"),zt&&(D.etag[Ce]=zt)),Ue===204||rt.type==="HEAD"?Ot="nocontent":Ue===304?Ot="notmodified":(Ot=_t.state,It=_t.data,ft=_t.error,St=!ft)):(ft=Ot,!Ue&&Ot||(Ot="error",0>Ue&&(Ue=0))),Le.status=Ue,Le.statusText=(Ve||Ot)+"",St?kr.resolveWith(Et,[It,Ot,Le]):kr.rejectWith(Et,[Le,Ot,ft]),Le.statusCode(er),er=void 0,ht&&Ht.trigger(St?"ajaxSuccess":"ajaxError",[Le,rt,St?It:ft]),Ar.fireWith(Et,[Le,Ot]),ht&&(Ht.trigger("ajaxComplete",[Le,rt]),--D.active||D.event.trigger("ajaxStop")))}typeof H=="object"&&(ne=H,H=void 0),ne=ne||{};var xe,Ce,Oe,$e,Xe,tt,ht,Pt,rt=D.ajaxSetup({},ne),Et=rt.context||rt,Ht=rt.context&&(Et.nodeType||Et.jquery)?D(Et):D.event,kr=D.Deferred(),Ar=D.Callbacks("once memory"),er=rt.statusCode||{},Ga={},Wu={},Si=0,ge="canceled",Le={readyState:0,getResponseHeader:function(Ue){var Ve;if(Si===2){if(!$e)for($e={};Ve=X.exec(Oe);)$e[Ve[1].toLowerCase()]=Ve[2];Ve=$e[Ue.toLowerCase()]}return Ve??null},getAllResponseHeaders:function(){return Si===2?Oe:null},setRequestHeader:function(Ue,Ve){var je=Ue.toLowerCase();return Si||(Ue=Wu[je]=Wu[je]||Ue,Ga[Ue]=Ve),this},overrideMimeType:function(Ue){return Si||(rt.mimeType=Ue),this},statusCode:function(Ue){var Ve;if(Ue)if(2>Si)for(Ve in Ue)er[Ve]=[er[Ve],Ue[Ve]];else Le.always(Ue[Le.status]);return this},abort:function(Ue){var Ve=Ue||ge;return xe&&xe.abort(Ve),fe(0,Ve),this}};if(kr.promise(Le).complete=Ar.add,Le.success=Le.done,Le.error=Le.fail,rt.url=((H||rt.url||j)+"").replace(de,"").replace(_e,G[1]+"//"),rt.type=ne.method||ne.type||rt.method||rt.type,rt.dataTypes=D.trim(rt.dataType||"*").toLowerCase().match(ae)||[""],rt.crossDomain==null&&(tt=Ne.exec(rt.url.toLowerCase()),rt.crossDomain=!(!tt||tt[1]===G[1]&&tt[2]===G[2]&&(tt[3]||(tt[1]==="http:"?"80":"443"))===(G[3]||(G[1]==="http:"?"80":"443")))),rt.data&&rt.processData&&typeof rt.data!="string"&&(rt.data=D.param(rt.data,rt.traditional)),y(Fe,rt,ne,Le),Si===2)return Le;ht=rt.global,ht&&D.active++===0&&D.event.trigger("ajaxStart"),rt.type=rt.type.toUpperCase(),rt.hasContent=!be.test(rt.type),Ce=rt.url,rt.hasContent||(rt.data&&(Ce=rt.url+=(oe.test(Ce)?"&":"?")+rt.data,delete rt.data),rt.cache===!1&&(rt.url=Te.test(Ce)?Ce.replace(Te,"$1_="+Me++):Ce+(oe.test(Ce)?"&":"?")+"_="+Me++)),rt.ifModified&&(D.lastModified[Ce]&&Le.setRequestHeader("If-Modified-Since",D.lastModified[Ce]),D.etag[Ce]&&Le.setRequestHeader("If-None-Match",D.etag[Ce])),(rt.data&&rt.hasContent&&rt.contentType!==!1||ne.contentType)&&Le.setRequestHeader("Content-Type",rt.contentType),Le.setRequestHeader("Accept",rt.dataTypes[0]&&rt.accepts[rt.dataTypes[0]]?rt.accepts[rt.dataTypes[0]]+(rt.dataTypes[0]!=="*"?", "+Ie+"; q=0.01":""):rt.accepts["*"]);for(Pt in rt.headers)Le.setRequestHeader(Pt,rt.headers[Pt]);if(rt.beforeSend&&(rt.beforeSend.call(Et,Le,rt)===!1||Si===2))return Le.abort();ge="abort";for(Pt in{success:1,error:1,complete:1})Le[Pt](rt[Pt]);if(xe=y(He,rt,ne,Le)){Le.readyState=1,ht&&Ht.trigger("ajaxSend",[Le,rt]),rt.async&&rt.timeout>0&&(Xe=setTimeout(function(){Le.abort("timeout")},rt.timeout));try{Si=1,xe.send(Ga,fe)}catch(Ue){if(!(2>Si))throw Ue;fe(-1,Ue)}}else fe(-1,"No Transport");return Le},getJSON:function(H,ne,fe){return D.get(H,ne,fe,"json")},getScript:function(H,ne){return D.get(H,void 0,ne,"script")}}),D.each(["get","post"],function(H,ne){D[ne]=function(fe,xe,Ce,Oe){return D.isFunction(xe)&&(Oe=Oe||Ce,Ce=xe,xe=void 0),D.ajax({url:fe,type:ne,dataType:Oe,data:xe,success:Ce})}}),D.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(H,ne){D.fn[ne]=function(fe){return this.on(ne,fe)}});var Je=/%20/g,qe=/\[\]$/,lt=/\r?\n/g,ot=/^(?:submit|button|image|reset|file)$/i,ye=/^(?:input|select|textarea|keygen)/i;D.param=function(H,ne){var fe,xe=[],Ce=function(Oe,$e){$e=D.isFunction($e)?$e():$e??"",xe[xe.length]=encodeURIComponent(Oe)+"="+encodeURIComponent($e)};if(ne===void 0&&(ne=D.ajaxSettings&&D.ajaxSettings.traditional),D.isArray(H)||H.jquery&&!D.isPlainObject(H))D.each(H,function(){Ce(this.name,this.value)});else for(fe in H)g(fe,H[fe],ne,Ce);return xe.join("&").replace(Je,"+")},D.fn.extend({serialize:function(){return D.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var H=D.prop(this,"elements");return H?D.makeArray(H):this}).filter(function(){var H=this.type;return this.name&&!D(this).is(":disabled")&&ye.test(this.nodeName)&&!ot.test(H)&&(this.checked||!rcheckableType.test(H))}).map(function(H,ne){var fe=D(this).val();return fe==null?null:D.isArray(fe)?D.map(fe,function(xe){return{name:ne.name,value:xe.replace(lt,`\r
`)}}):{name:ne.name,value:fe.replace(lt,`\r
`)}}).get()}}),D.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch{}};var We=0,W={},ve={0:200,1223:204},ke=D.ajaxSettings.xhr();s.ActiveXObject&&D(s).on("unload",function(){for(var H in W)W[H]()}),$.cors=!!ke&&"withCredentials"in ke,$.ajax=ke=!!ke,D.ajaxTransport(function(H){var ne;return $.cors||ke&&!H.crossDomain?{send:function(fe,xe){var Ce,Oe=H.xhr(),$e=++We;if(Oe.open(H.type,H.url,H.async,H.username,H.password),H.xhrFields)for(Ce in H.xhrFields)Oe[Ce]=H.xhrFields[Ce];H.mimeType&&Oe.overrideMimeType&&Oe.overrideMimeType(H.mimeType),H.crossDomain||fe["X-Requested-With"]||(fe["X-Requested-With"]="XMLHttpRequest");for(Ce in fe)Oe.setRequestHeader(Ce,fe[Ce]);ne=function(Xe){return function(){ne&&(delete W[$e],ne=Oe.onload=Oe.onerror=null,Xe==="abort"?Oe.abort():Xe==="error"?xe(Oe.status,Oe.statusText):xe(ve[Oe.status]||Oe.status,Oe.statusText,typeof Oe.responseText=="string"?{text:Oe.responseText}:void 0,Oe.getAllResponseHeaders()))}},Oe.onload=ne(),Oe.onerror=ne("error"),ne=W[$e]=ne("abort");try{Oe.send(H.hasContent&&H.data||null)}catch(Xe){if(ne)throw Xe}},abort:function(){ne&&ne()}}:void 0}),D.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(H){return D.globalEval(H),H}}}),D.ajaxPrefilter("script",function(H){H.cache===void 0&&(H.cache=!1),H.crossDomain&&(H.type="GET")}),D.ajaxTransport("script",function(H){if(H.crossDomain){var ne,fe;return{send:function(xe,Ce){ne=D("<script>").prop({async:!0,charset:H.scriptCharset,src:H.url}).on("load error",fe=function(Oe){ne.remove(),fe=null,Oe&&Ce(Oe.type==="error"?404:200,Oe.type)}),B.head.appendChild(ne[0])},abort:function(){fe&&fe()}}}});var Ye=[],he=/(=)\?(?=&|$)|\?\?/;D.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var H=Ye.pop()||D.expando+"_"+Me++;return this[H]=!0,H}}),D.ajaxPrefilter("json jsonp",function(H,ne,fe){var xe,Ce,Oe,$e=H.jsonp!==!1&&(he.test(H.url)?"url":typeof H.data=="string"&&!(H.contentType||"").indexOf("application/x-www-form-urlencoded")&&he.test(H.data)&&"data");return $e||H.dataTypes[0]==="jsonp"?(xe=H.jsonpCallback=D.isFunction(H.jsonpCallback)?H.jsonpCallback():H.jsonpCallback,$e?H[$e]=H[$e].replace(he,"$1"+xe):H.jsonp!==!1&&(H.url+=(oe.test(H.url)?"&":"?")+H.jsonp+"="+xe),H.converters["script json"]=function(){return Oe||D.error(xe+" was not called"),Oe[0]},H.dataTypes[0]="json",Ce=s[xe],s[xe]=function(){Oe=arguments},fe.always(function(){s[xe]=Ce,H[xe]&&(H.jsonpCallback=ne.jsonpCallback,Ye.push(xe)),Oe&&D.isFunction(Ce)&&Ce(Oe[0]),Oe=Ce=void 0}),"script"):void 0}),D.parseHTML=function(H,ne,fe){if(!H||typeof H!="string")return null;typeof ne=="boolean"&&(fe=ne,ne=!1),ne=ne||B;var xe=J.exec(H),Ce=!fe&&[];return xe?[ne.createElement(xe[1])]:(xe=D.buildFragment([H],ne,Ce),Ce&&Ce.length&&D(Ce).remove(),D.merge([],xe.childNodes))};var Ze=D.fn.load;return D.fn.load=function(H,ne,fe){if(typeof H!="string"&&Ze)return Ze.apply(this,arguments);var xe,Ce,Oe,$e=this,Xe=H.indexOf(" ");return Xe>=0&&(xe=D.trim(H.slice(Xe)),H=H.slice(0,Xe)),D.isFunction(ne)?(fe=ne,ne=void 0):ne&&typeof ne=="object"&&(Ce="POST"),$e.length>0&&D.ajax({url:H,type:Ce,dataType:"html",data:ne}).done(function(tt){Oe=arguments,$e.html(xe?D("<div>").append(D.parseHTML(tt)).find(xe):tt)}).complete(fe&&function(tt,ht){$e.each(fe,Oe||[tt.responseText,ht,tt])}),this},D.noConflict=function(){},D})},{}],12:[function(t,r,i){r.exports=function(s){return{reload:function(){return s.location.reload()},getHash:function(){return s.location.hash},setHash:function(o){return s.location.hash=o},changeHref:function(o){return s.location.href=o}}}},{}],13:[function(t,r,i){var s;s=function(o){var a;return a=localStorage.getItem("oauthio_cache"),a=a?JSON.parse(a):{},o(a,function(){return localStorage.setItem("oauthio_cache",JSON.stringify(a))})},r.exports={init:function(o,a){return this.config=o,this.document=a},active:function(){return typeof localStorage<"u"&&localStorage!==null},create:function(o,a,l){var u;this.erase(o),u=new Date,localStorage.setItem(o,a),s(function(c,f){return c[o]=l?u.getTime()+1e3*(l||1200):!1,f()})},read:function(o){return s(function(a,l){return a[o]==null?null:a[o]===!1?localStorage.getItem(o):new Date().getTime()>a[o]?(localStorage.removeItem(o),delete a[o],l(),null):localStorage.getItem(o)})},erase:function(o){return s(function(a,l){return localStorage.removeItem(o),delete a[o],l()})},eraseFrom:function(o){s(function(a,l){var u,c,f,d;for(u=Object.keys(a),c=0,f=u.length;f>c;c++)d=u[c],d.substr(0,o.length)===o&&(localStorage.removeItem(d),delete a[d]);return l()})}}},{}],14:[function(t,r,i){var s,o;o=0,s="",r.exports={hex_sha1:function(a){return this.rstr2hex(this.rstr_sha1(this.str2rstr_utf8(a)))},b64_sha1:function(a){return this.rstr2b64(this.rstr_sha1(this.str2rstr_utf8(a)))},any_sha1:function(a,l){return this.rstr2any(this.rstr_sha1(this.str2rstr_utf8(a)),l)},hex_hmac_sha1:function(a,l){return this.rstr2hex(this.rstr_hmac_sha1(this.str2rstr_utf8(a),this.str2rstr_utf8(l)))},b64_hmac_sha1:function(a,l){return this.rstr2b64(this.rstr_hmac_sha1(this.str2rstr_utf8(a),this.str2rstr_utf8(l)))},any_hmac_sha1:function(a,l,u){return this.rstr2any(this.rstr_hmac_sha1(this.str2rstr_utf8(a),this.str2rstr_utf8(l)),u)},sha1_vm_test:function(){return thishex_sha1("abc").toLowerCase()==="a9993e364706816aba3e25717850c26c9cd0d89d"},rstr_sha1:function(a){return this.binb2rstr(this.binb_sha1(this.rstr2binb(a),8*a.length))},rstr_hmac_sha1:function(a,l){var u,c,f,d,h;for(u=this.rstr2binb(a),u.length>16&&(u=this.binb_sha1(u,8*a.length)),d=Array(16),h=Array(16),f=0;16>f;)d[f]=909522486^u[f],h[f]=1549556828^u[f],f++;return c=this.binb_sha1(d.concat(this.rstr2binb(l)),512+8*l.length),this.binb2rstr(this.binb_sha1(h.concat(c),672))},rstr2hex:function(a){var l,u,c,f;for(l=o?"0123456789ABCDEF":"0123456789abcdef",c="",f=void 0,u=0;u<a.length;)f=a.charCodeAt(u),c+=l.charAt(f>>>4&15)+l.charAt(15&f),u++;return c},rstr2b64:function(a){var l,u,c,f,d,h;for(d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f="",c=a.length,l=0;c>l;){for(h=a.charCodeAt(l)<<16|(c>l+1?a.charCodeAt(l+1)<<8:0)|(c>l+2?a.charCodeAt(l+2):0),u=0;4>u;)f+=8*l+6*u>8*a.length?s:d.charAt(h>>>6*(3-u)&63),u++;l+=3}return f},rstr2any:function(a,l){var u,c,f,d,h,m,v,y,p;for(c=l.length,y=Array(),d=void 0,m=void 0,p=void 0,v=void 0,u=Array(Math.ceil(a.length/2)),d=0;d<u.length;)u[d]=a.charCodeAt(2*d)<<8|a.charCodeAt(2*d+1),d++;for(;u.length>0;){for(v=Array(),p=0,d=0;d<u.length;)p=(p<<16)+u[d],m=Math.floor(p/c),p-=m*c,(v.length>0||m>0)&&(v[v.length]=m),d++;y[y.length]=p,u=v}for(h="",d=y.length-1;d>=0;)h+=l.charAt(y[d]),d--;for(f=Math.ceil(8*a.length/(Math.log(l.length)/Math.log(2))),d=h.length;f>d;)h=l[0]+h,d++;return h},str2rstr_utf8:function(a){var l,u,c,f;for(u="",l=-1,c=void 0,f=void 0;++l<a.length;)c=a.charCodeAt(l),f=l+1<a.length?a.charCodeAt(l+1):0,c>=55296&&56319>=c&&f>=56320&&57343>=f&&(c=65536+((1023&c)<<10)+(1023&f),l++),127>=c?u+=String.fromCharCode(c):2047>=c?u+=String.fromCharCode(192|c>>>6&31,128|63&c):65535>=c?u+=String.fromCharCode(224|c>>>12&15,128|c>>>6&63,128|63&c):2097151>=c&&(u+=String.fromCharCode(240|c>>>18&7,128|c>>>12&63,128|c>>>6&63,128|63&c));return u},str2rstr_utf16le:function(a){var l,u;for(u="",l=0;l<a.length;)u+=String.fromCharCode(255&a.charCodeAt(l),a.charCodeAt(l)>>>8&255),l++;return u},str2rstr_utf16be:function(a){var l,u;for(u="",l=0;l<a.length;)u+=String.fromCharCode(a.charCodeAt(l)>>>8&255,255&a.charCodeAt(l)),l++;return u},rstr2binb:function(a){var l,u;for(u=Array(a.length>>2),l=0;l<u.length;)u[l]=0,l++;for(l=0;l<8*a.length;)u[l>>5]|=(255&a.charCodeAt(l/8))<<24-l%32,l+=8;return u},binb2rstr:function(a){var l,u;for(u="",l=0;l<32*a.length;)u+=String.fromCharCode(a[l>>5]>>>24-l%32&255),l+=8;return u},binb_sha1:function(a,l){var u,c,f,d,h,m,v,y,p,S,b,g,w,x;for(a[l>>5]|=128<<24-l%32,a[(l+64>>9<<4)+15]=l,x=Array(80),u=1732584193,c=-271733879,f=-1732584194,d=271733878,h=-1009589776,m=0;m<a.length;){for(y=u,p=c,S=f,b=d,g=h,v=0;80>v;)16>v?x[v]=a[m+v]:x[v]=this.bit_rol(x[v-3]^x[v-8]^x[v-14]^x[v-16],1),w=this.safe_add(this.safe_add(this.bit_rol(u,5),this.sha1_ft(v,c,f,d)),this.safe_add(this.safe_add(h,x[v]),this.sha1_kt(v))),h=d,d=f,f=this.bit_rol(c,30),c=u,u=w,v++;u=this.safe_add(u,y),c=this.safe_add(c,p),f=this.safe_add(f,S),d=this.safe_add(d,b),h=this.safe_add(h,g),m+=16}return Array(u,c,f,d,h)},sha1_ft:function(a,l,u,c){return 20>a?l&u|~l&c:40>a?l^u^c:60>a?l&u|l&c|u&c:l^u^c},sha1_kt:function(a){return 20>a?1518500249:40>a?1859775393:60>a?-1894007588:-899497514},safe_add:function(a,l){var u,c;return u=(65535&a)+(65535&l),c=(a>>16)+(l>>16)+(u>>16),c<<16|65535&u},bit_rol:function(a,l){return a<<l|a>>>32-l},create_hash:function(){var a;return a=this.b64_sha1(new Date().getTime()+":"+Math.floor(9999999*Math.random())),a.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"")}}},{}],15:[function(t,r,i){r.exports=function(s){return{getAbsUrl:function(o){var a;return o.match(/^.{2,5}:\/\//)?o:o[0]==="/"?s.location.protocol+"//"+s.location.host+o:(a=s.location.protocol+"//"+s.location.host+s.location.pathname,a[a.length-1]!=="/"&&o[0]!=="#"?a+"/"+o:a+o)},replaceParam:function(o,a,l){return o=o.replace(/\{\{(.*?)\}\}/g,function(u,c){return a[c]||""}),l&&(o=o.replace(/\{(.*?)\}/g,function(u,c){return l[c]||""})),o}}}},{}]},{},[8])(8)})})(CW);var cC=CW.exports;/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function u0(){return u0=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},u0.apply(this,arguments)}var Sc;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Sc||(Sc={}));const SF="popstate";function xse(n){n===void 0&&(n={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=Wd(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),d3("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof s=="string"?s:ES(s))}function r(i,s){QP(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return wse(e,t,r,n)}function Yr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function QP(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bse(){return Math.random().toString(36).substr(2,8)}function _F(n,e){return{usr:n.state,key:n.key,idx:e}}function d3(n,e,t,r){return t===void 0&&(t=null),u0({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Wd(e):e,{state:t,key:e&&e.key||r||bse()})}function ES(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Wd(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function wse(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Sc.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(u0({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=Sc.Pop;let y=c(),p=y==null?null:y-u;u=y,l&&l({action:a,location:v.location,delta:p})}function d(y,p){a=Sc.Push;let S=d3(v.location,y,p);t&&t(S,y),u=c()+1;let b=_F(S,u),g=v.createHref(S);try{o.pushState(b,"",g)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;i.location.assign(g)}s&&l&&l({action:a,location:v.location,delta:1})}function h(y,p){a=Sc.Replace;let S=d3(v.location,y,p);t&&t(S,y),u=c();let b=_F(S,u),g=v.createHref(S);o.replaceState(b,"",g),s&&l&&l({action:a,location:v.location,delta:0})}function m(y){let p=i.location.origin!=="null"?i.location.origin:i.location.href,S=typeof y=="string"?y:ES(y);return S=S.replace(/ $/,"%20"),Yr(p,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,p)}let v={get action(){return a},get location(){return n(i,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(SF,f),l=y,()=>{i.removeEventListener(SF,f),l=null}},createHref(y){return e(i,y)},createURL:m,encodeLocation(y){let p=m(y);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:d,replace:h,go(y){return o.go(y)}};return v}var EF;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(EF||(EF={}));function Sse(n,e,t){t===void 0&&(t="/");let r=typeof e=="string"?Wd(e):e,i=eR(r.pathname||"/",t);if(i==null)return null;let s=AW(n);_se(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let l=Ise(i);o=Rse(s[a],l)}return o}function AW(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Yr(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Bc([r,l.relativePath]),c=t.concat(l);s.children&&s.children.length>0&&(Yr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),AW(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:Nse(u,s.index),routesMeta:c})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of TW(s.path))i(s,o,l)}),e}function TW(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=TW(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function _se(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Pse(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const Ese=/^:[\w-]+$/,Mse=3,Cse=2,Ase=1,Tse=10,Dse=-2,MF=n=>n==="*";function Nse(n,e){let t=n.split("/"),r=t.length;return t.some(MF)&&(r+=Dse),e&&(r+=Cse),t.filter(i=>!MF(i)).reduce((i,s)=>i+(Ese.test(s)?Mse:s===""?Ase:Tse),r)}function Pse(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function Rse(n,e){let{routesMeta:t}=n,r={},i="/",s=[];for(let o=0;o<t.length;++o){let a=t[o],l=o===t.length-1,u=i==="/"?e:e.slice(i.length)||"/",c=Ose({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:Bc([i,c.pathname]),pathnameBase:zse(Bc([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=Bc([i,c.pathnameBase]))}return s}function Ose(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=kse(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let v=a[f]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const m=a[f];return h&&!m?u[d]=void 0:u[d]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:n}}function kse(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),QP(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Ise(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return QP(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function eR(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function Lse(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Wd(n):n;return{pathname:t?t.startsWith("/")?t:Fse(t,e):e,search:Use(r),hash:$se(i)}}function Fse(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function fC(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Bse(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function DW(n,e){let t=Bse(n);return e?t.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function NW(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Wd(n):(i=u0({},n),Yr(!i.pathname||!i.pathname.includes("?"),fC("?","pathname","search",i)),Yr(!i.pathname||!i.pathname.includes("#"),fC("#","pathname","hash",i)),Yr(!i.search||!i.search.includes("#"),fC("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=t;else{let f=e.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?e[f]:"/"}let l=Lse(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Bc=n=>n.join("/").replace(/\/\/+/g,"/"),zse=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Use=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,$se=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Vse(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const PW=["post","put","patch","delete"];new Set(PW);const Hse=["get",...PW];new Set(Hse);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function c0(){return c0=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},c0.apply(this,arguments)}const tR=k.createContext(null),Wse=k.createContext(null),jd=k.createContext(null),uE=k.createContext(null),df=k.createContext({outlet:null,matches:[],isDataRoute:!1}),RW=k.createContext(null);function jse(n,e){let{relative:t}=e===void 0?{}:e;yy()||Yr(!1);let{basename:r,navigator:i}=k.useContext(jd),{hash:s,pathname:o,search:a}=IW(n,{relative:t}),l=o;return r!=="/"&&(l=o==="/"?r:Bc([r,o])),i.createHref({pathname:l,search:a,hash:s})}function yy(){return k.useContext(uE)!=null}function cE(){return yy()||Yr(!1),k.useContext(uE).location}function OW(n){k.useContext(jd).static||k.useLayoutEffect(n)}function Gd(){let{isDataRoute:n}=k.useContext(df);return n?ioe():Gse()}function Gse(){yy()||Yr(!1);let n=k.useContext(tR),{basename:e,future:t,navigator:r}=k.useContext(jd),{matches:i}=k.useContext(df),{pathname:s}=cE(),o=JSON.stringify(DW(i,t.v7_relativeSplatPath)),a=k.useRef(!1);return OW(()=>{a.current=!0}),k.useCallback(function(u,c){if(c===void 0&&(c={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let f=NW(u,JSON.parse(o),s,c.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Bc([e,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[e,r,o,s,n])}function kW(){let{matches:n}=k.useContext(df),e=n[n.length-1];return e?e.params:{}}function IW(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=k.useContext(jd),{matches:i}=k.useContext(df),{pathname:s}=cE(),o=JSON.stringify(DW(i,r.v7_relativeSplatPath));return k.useMemo(()=>NW(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}function qse(n,e){return Xse(n,e)}function Xse(n,e,t,r){yy()||Yr(!1);let{navigator:i}=k.useContext(jd),{matches:s}=k.useContext(df),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=cE(),c;if(e){var f;let y=typeof e=="string"?Wd(e):e;l==="/"||(f=y.pathname)!=null&&f.startsWith(l)||Yr(!1),c=y}else c=u;let d=c.pathname||"/",h=d;if(l!=="/"){let y=l.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(y.length).join("/")}let m=Sse(n,{pathname:h}),v=Qse(m&&m.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:Bc([l,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:Bc([l,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,t,r);return e&&v?k.createElement(uE.Provider,{value:{location:c0({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Sc.Pop}},v):v}function Yse(){let n=roe(),e=Vse(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),t?k.createElement("pre",{style:i},t):null,null)}const Kse=k.createElement(Yse,null);class Zse extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?k.createElement(df.Provider,{value:this.props.routeContext},k.createElement(RW.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Jse(n){let{routeContext:e,match:t,children:r}=n,i=k.useContext(tR);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),k.createElement(df.Provider,{value:e},r)}function Qse(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if((s=t)!=null&&s.errors)n=t.matches;else return null}let o=n,a=(i=t)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||Yr(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(t&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=c),f.route.id){let{loaderData:d,errors:h}=t,m=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||m){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,m=!1,v=null,y=null;t&&(h=a&&f.route.id?a[f.route.id]:void 0,v=f.route.errorElement||Kse,l&&(u<0&&d===0?(m=!0,y=null):u===d&&(m=!0,y=f.route.hydrateFallbackElement||null)));let p=e.concat(o.slice(0,d+1)),S=()=>{let b;return h?b=v:m?b=y:f.route.Component?b=k.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=c,k.createElement(Jse,{match:f,routeContext:{outlet:c,matches:p,isDataRoute:t!=null},children:b})};return t&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?k.createElement(Zse,{location:t.location,revalidation:t.revalidation,component:v,error:h,children:S(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):S()},null)}var LW=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(LW||{}),MS=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(MS||{});function eoe(n){let e=k.useContext(tR);return e||Yr(!1),e}function toe(n){let e=k.useContext(Wse);return e||Yr(!1),e}function noe(n){let e=k.useContext(df);return e||Yr(!1),e}function FW(n){let e=noe(),t=e.matches[e.matches.length-1];return t.route.id||Yr(!1),t.route.id}function roe(){var n;let e=k.useContext(RW),t=toe(MS.UseRouteError),r=FW(MS.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function ioe(){let{router:n}=eoe(LW.UseNavigateStable),e=FW(MS.UseNavigateStable),t=k.useRef(!1);return OW(()=>{t.current=!0}),k.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,c0({fromRouteId:e},s)))},[n,e])}function uv(n){Yr(!1)}function soe(n){let{basename:e="/",children:t=null,location:r,navigationType:i=Sc.Pop,navigator:s,static:o=!1,future:a}=n;yy()&&Yr(!1);let l=e.replace(/^\/*/,"/"),u=k.useMemo(()=>({basename:l,navigator:s,static:o,future:c0({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Wd(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:m="default"}=r,v=k.useMemo(()=>{let y=eR(c,l);return y==null?null:{location:{pathname:y,search:f,hash:d,state:h,key:m},navigationType:i}},[l,c,f,d,h,m,i]);return v==null?null:k.createElement(jd.Provider,{value:u},k.createElement(uE.Provider,{children:t,value:v}))}function ooe(n){let{children:e,location:t}=n;return qse(h3(e),t)}new Promise(()=>{});function h3(n,e){e===void 0&&(e=[]);let t=[];return k.Children.forEach(n,(r,i)=>{if(!k.isValidElement(r))return;let s=[...e,i];if(r.type===k.Fragment){t.push.apply(t,h3(r.props.children,s));return}r.type!==uv&&Yr(!1),!r.props.index||!r.props.children||Yr(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=h3(r.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function p3(){return p3=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},p3.apply(this,arguments)}function aoe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function loe(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function uoe(n,e){return n.button===0&&(!e||e==="_self")&&!loe(n)}const coe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],foe="6";try{window.__reactRouterVersion=foe}catch{}const doe="startTransition",CF=Qw[doe];function hoe(n){let{basename:e,children:t,future:r,window:i}=n,s=k.useRef();s.current==null&&(s.current=xse({window:i,v5Compat:!0}));let o=s.current,[a,l]=k.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},c=k.useCallback(f=>{u&&CF?CF(()=>l(f)):l(f)},[l,u]);return k.useLayoutEffect(()=>o.listen(c),[o,c]),k.createElement(soe,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:r})}const poe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",moe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,f0=k.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,unstable_viewTransition:f}=e,d=aoe(e,coe),{basename:h}=k.useContext(jd),m,v=!1;if(typeof u=="string"&&moe.test(u)&&(m=u,poe))try{let b=new URL(window.location.href),g=u.startsWith("//")?new URL(b.protocol+u):new URL(u),w=eR(g.pathname,h);g.origin===b.origin&&w!=null?u=w+g.search+g.hash:v=!0}catch{}let y=jse(u,{relative:i}),p=goe(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,unstable_viewTransition:f});function S(b){r&&r(b),b.defaultPrevented||p(b)}return k.createElement("a",p3({},d,{href:m||y,onClick:v||s?r:S,ref:t,target:l}))});var AF;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(AF||(AF={}));var TF;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(TF||(TF={}));function goe(n,e){let{target:t,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=Gd(),u=cE(),c=IW(n,{relative:o});return k.useCallback(f=>{if(uoe(f,t)){f.preventDefault();let d=r!==void 0?r:ES(u)===ES(c);l(n,{replace:d,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[u,l,c,r,i,t,n,s,o,a])}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BW=Symbol("Comlink.proxy"),voe=Symbol("Comlink.endpoint"),yoe=Symbol("Comlink.releaseProxy"),dC=Symbol("Comlink.finalizer"),Cw=Symbol("Comlink.thrown"),zW=n=>typeof n=="object"&&n!==null||typeof n=="function",xoe={canHandle:n=>zW(n)&&n[BW],serialize(n){const{port1:e,port2:t}=new MessageChannel;return $W(n,e),[t,[t]]},deserialize(n){return n.start(),HW(n)}},boe={canHandle:n=>zW(n)&&Cw in n,serialize({value:n}){let e;return n instanceof Error?e={isError:!0,value:{message:n.message,name:n.name,stack:n.stack}}:e={isError:!1,value:n},[e,[]]},deserialize(n){throw n.isError?Object.assign(new Error(n.value.message),n.value):n.value}},UW=new Map([["proxy",xoe],["throw",boe]]);function woe(n,e){for(const t of n)if(e===t||t==="*"||t instanceof RegExp&&t.test(e))return!0;return!1}function $W(n,e=globalThis,t=["*"]){e.addEventListener("message",function r(i){if(!i||!i.data)return;if(!woe(t,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}const{id:s,type:o,path:a}=Object.assign({path:[]},i.data),l=(i.data.argumentList||[]).map(Xf);let u;try{const c=a.slice(0,-1).reduce((d,h)=>d[h],n),f=a.reduce((d,h)=>d[h],n);switch(o){case"GET":u=f;break;case"SET":c[a.slice(-1)[0]]=Xf(i.data.value),u=!0;break;case"APPLY":u=f.apply(c,l);break;case"CONSTRUCT":{const d=new f(...l);u=GW(d)}break;case"ENDPOINT":{const{port1:d,port2:h}=new MessageChannel;$W(n,h),u=Coe(d,[d])}break;case"RELEASE":u=void 0;break;default:return}}catch(c){u={value:c,[Cw]:0}}Promise.resolve(u).catch(c=>({value:c,[Cw]:0})).then(c=>{const[f,d]=TS(c);e.postMessage(Object.assign(Object.assign({},f),{id:s}),d),o==="RELEASE"&&(e.removeEventListener("message",r),VW(e),dC in n&&typeof n[dC]=="function"&&n[dC]())}).catch(c=>{const[f,d]=TS({value:new TypeError("Unserializable return value"),[Cw]:0});e.postMessage(Object.assign(Object.assign({},f),{id:s}),d)})}),e.start&&e.start()}function Soe(n){return n.constructor.name==="MessagePort"}function VW(n){Soe(n)&&n.close()}function HW(n,e){return m3(n,[],e)}function fx(n){if(n)throw new Error("Proxy has been released and is not useable")}function WW(n){return sp(n,{type:"RELEASE"}).then(()=>{VW(n)})}const CS=new WeakMap,AS="FinalizationRegistry"in globalThis&&new FinalizationRegistry(n=>{const e=(CS.get(n)||0)-1;CS.set(n,e),e===0&&WW(n)});function _oe(n,e){const t=(CS.get(e)||0)+1;CS.set(e,t),AS&&AS.register(n,e,n)}function Eoe(n){AS&&AS.unregister(n)}function m3(n,e=[],t=function(){}){let r=!1;const i=new Proxy(t,{get(s,o){if(fx(r),o===yoe)return()=>{Eoe(i),WW(n),r=!0};if(o==="then"){if(e.length===0)return{then:()=>i};const a=sp(n,{type:"GET",path:e.map(l=>l.toString())}).then(Xf);return a.then.bind(a)}return m3(n,[...e,o])},set(s,o,a){fx(r);const[l,u]=TS(a);return sp(n,{type:"SET",path:[...e,o].map(c=>c.toString()),value:l},u).then(Xf)},apply(s,o,a){fx(r);const l=e[e.length-1];if(l===voe)return sp(n,{type:"ENDPOINT"}).then(Xf);if(l==="bind")return m3(n,e.slice(0,-1));const[u,c]=DF(a);return sp(n,{type:"APPLY",path:e.map(f=>f.toString()),argumentList:u},c).then(Xf)},construct(s,o){fx(r);const[a,l]=DF(o);return sp(n,{type:"CONSTRUCT",path:e.map(u=>u.toString()),argumentList:a},l).then(Xf)}});return _oe(i,n),i}function Moe(n){return Array.prototype.concat.apply([],n)}function DF(n){const e=n.map(TS);return[e.map(t=>t[0]),Moe(e.map(t=>t[1]))]}const jW=new WeakMap;function Coe(n,e){return jW.set(n,e),n}function GW(n){return Object.assign(n,{[BW]:!0})}function TS(n){for(const[e,t]of UW)if(t.canHandle(n)){const[r,i]=t.serialize(n);return[{type:"HANDLER",name:e,value:r},i]}return[{type:"RAW",value:n},jW.get(n)||[]]}function Xf(n){switch(n.type){case"HANDLER":return UW.get(n.name).deserialize(n.value);case"RAW":return n.value}}function sp(n,e,t){return new Promise(r=>{const i=Aoe();n.addEventListener("message",function s(o){!o.data||!o.data.id||o.data.id!==i||(n.removeEventListener("message",s),r(o.data))}),n.start&&n.start(),n.postMessage(Object.assign({id:i},e),t)})}function Aoe(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function at(){return at=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},at.apply(null,arguments)}var qW={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function tn(n){return typeof n=="number"}function Jt(n){return!n||typeof n!="object"||typeof n.constructor!="function"?!1:n.isBigNumber===!0&&typeof n.constructor.prototype=="object"&&n.constructor.prototype.isBigNumber===!0||typeof n.constructor.isDecimal=="function"&&n.constructor.isDecimal(n)===!0}function Pa(n){return n&&typeof n=="object"&&Object.getPrototypeOf(n).isComplex===!0||!1}function qd(n){return n&&typeof n=="object"&&Object.getPrototypeOf(n).isFraction===!0||!1}function Hs(n){return n&&n.constructor.prototype.isUnit===!0||!1}function Pi(n){return typeof n=="string"}var _n=Array.isArray;function $t(n){return n&&n.constructor.prototype.isMatrix===!0||!1}function To(n){return Array.isArray(n)||$t(n)}function d0(n){return n&&n.isDenseMatrix&&n.constructor.prototype.isMatrix===!0||!1}function _c(n){return n&&n.isSparseMatrix&&n.constructor.prototype.isMatrix===!0||!1}function fE(n){return n&&n.constructor.prototype.isRange===!0||!1}function xy(n){return n&&n.constructor.prototype.isIndex===!0||!1}function XW(n){return typeof n=="boolean"}function YW(n){return n&&n.constructor.prototype.isResultSet===!0||!1}function nR(n){return n&&n.constructor.prototype.isHelp===!0||!1}function KW(n){return typeof n=="function"}function ZW(n){return n instanceof Date}function JW(n){return n instanceof RegExp}function by(n){return!!(n&&typeof n=="object"&&n.constructor===Object&&!Pa(n)&&!qd(n))}function QW(n){return n===null}function ej(n){return n===void 0}function Xc(n){return n&&n.isAccessorNode===!0&&n.constructor.prototype.isNode===!0||!1}function po(n){return n&&n.isArrayNode===!0&&n.constructor.prototype.isNode===!0||!1}function tj(n){return n&&n.isAssignmentNode===!0&&n.constructor.prototype.isNode===!0||!1}function nj(n){return n&&n.isBlockNode===!0&&n.constructor.prototype.isNode===!0||!1}function rj(n){return n&&n.isConditionalNode===!0&&n.constructor.prototype.isNode===!0||!1}function vn(n){return n&&n.isConstantNode===!0&&n.constructor.prototype.isNode===!0||!1}function g3(n){return vn(n)||Br(n)&&n.args.length===1&&vn(n.args[0])&&"-+~".includes(n.op)}function Pm(n){return n&&n.isFunctionAssignmentNode===!0&&n.constructor.prototype.isNode===!0||!1}function Cu(n){return n&&n.isFunctionNode===!0&&n.constructor.prototype.isNode===!0||!1}function Xd(n){return n&&n.isIndexNode===!0&&n.constructor.prototype.isNode===!0||!1}function In(n){return n&&n.isNode===!0&&n.constructor.prototype.isNode===!0||!1}function wy(n){return n&&n.isObjectNode===!0&&n.constructor.prototype.isNode===!0||!1}function Br(n){return n&&n.isOperatorNode===!0&&n.constructor.prototype.isNode===!0||!1}function Pl(n){return n&&n.isParenthesisNode===!0&&n.constructor.prototype.isNode===!0||!1}function ij(n){return n&&n.isRangeNode===!0&&n.constructor.prototype.isNode===!0||!1}function sj(n){return n&&n.isRelationalNode===!0&&n.constructor.prototype.isNode===!0||!1}function oi(n){return n&&n.isSymbolNode===!0&&n.constructor.prototype.isNode===!0||!1}function rR(n){return n&&n.constructor.prototype.isChain===!0||!1}function Wn(n){var e=typeof n;return e==="object"?n===null?"null":Jt(n)?"BigNumber":n.constructor&&n.constructor.name?n.constructor.name:"Object":e}function Yt(n){var e=typeof n;if(e==="number"||e==="string"||e==="boolean"||n===null||n===void 0)return n;if(typeof n.clone=="function")return n.clone();if(Array.isArray(n))return n.map(function(t){return Yt(t)});if(n instanceof Date)return new Date(n.valueOf());if(Jt(n))return n;if(by(n))return cv(n,Yt);throw new TypeError("Cannot clone: unknown type of value (value: ".concat(n,")"))}function cv(n,e){var t={};for(var r in n)gt(n,r)&&(t[r]=e(n[r]));return t}function oj(n,e){for(var t in e)gt(e,t)&&(n[t]=e[t]);return n}function aj(n,e){if(Array.isArray(e))throw new TypeError("Arrays are not supported by deepExtend");for(var t in e)if(gt(e,t)&&!(t in Object.prototype)&&!(t in Function.prototype))if(e[t]&&e[t].constructor===Object)n[t]===void 0&&(n[t]={}),n[t]&&n[t].constructor===Object?aj(n[t],e[t]):n[t]=e[t];else{if(Array.isArray(e[t]))throw new TypeError("Arrays are not supported by deepExtend");n[t]=e[t]}return n}function Nd(n,e){var t,r,i;if(Array.isArray(n)){if(!Array.isArray(e)||n.length!==e.length)return!1;for(r=0,i=n.length;r<i;r++)if(!Nd(n[r],e[r]))return!1;return!0}else{if(typeof n=="function")return n===e;if(n instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(t in n)if(!(t in e)||!Nd(n[t],e[t]))return!1;for(t in e)if(!(t in n))return!1;return!0}else return n===e}}function Toe(n){var e={};return lj(n,e),e}function lj(n,e){for(var t in n)if(gt(n,t)){var r=n[t];typeof r=="object"&&r!==null?lj(r,e):e[t]=r}}function Aw(n,e,t){var r=!0,i;Object.defineProperty(n,e,{get:function(){return r&&(i=t(),r=!1),i},set:function(o){i=o,r=!1},configurable:!0,enumerable:!0})}function gt(n,e){return n&&Object.hasOwnProperty.call(n,e)}function Doe(n){return n&&typeof n.factory=="function"}function Noe(n,e){for(var t={},r=0;r<e.length;r++){var i=e[r],s=n[i];s!==void 0&&(t[i]=s)}return t}var NF=["Matrix","Array"],PF=["number","BigNumber","Fraction"];function Poe(n,e){function t(r){if(r){var i=cv(n,Yt);RF(r,"matrix",NF),RF(r,"number",PF),aj(n,r);var s=cv(n,Yt),o=cv(r,Yt);return e("config",s,i,o),s}else return cv(n,Yt)}return t.MATRIX_OPTIONS=NF,t.NUMBER_OPTIONS=PF,Object.keys(qW).forEach(r=>{Object.defineProperty(t,r,{get:()=>n[r],enumerable:!0,configurable:!0})}),t}function RF(n,e,t){n[e]!==void 0&&!t.includes(n[e])&&console.warn('Warning: Unknown value "'+n[e]+'" for configuration option "'+e+'". Available options: '+t.map(r=>JSON.stringify(r)).join(", ")+".")}function OF(){return!0}function Wo(){return!1}function xh(){}const kF="Argument is not a typed-function.";function uj(){function n(X){return typeof X=="object"&&X!==null&&X.constructor===Object}const e=[{name:"number",test:function(X){return typeof X=="number"}},{name:"string",test:function(X){return typeof X=="string"}},{name:"boolean",test:function(X){return typeof X=="boolean"}},{name:"Function",test:function(X){return typeof X=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(X){return X instanceof Date}},{name:"RegExp",test:function(X){return X instanceof RegExp}},{name:"Object",test:n},{name:"null",test:function(X){return X===null}},{name:"undefined",test:function(X){return X===void 0}}],t={name:"any",test:OF,isAny:!0};let r,i,s=0,o={createCount:0};function a(X){const Q=r.get(X);if(Q)return Q;let be='Unknown type "'+X+'"';const _e=X.toLowerCase();let Ne;for(Ne of i)if(Ne.toLowerCase()===_e){be+='. Did you mean "'+Ne+'" ?';break}throw new TypeError(be)}function l(X){let Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const be=Q?a(Q).index:i.length,_e=[];for(let Fe=0;Fe<X.length;++Fe){if(!X[Fe]||typeof X[Fe].name!="string"||typeof X[Fe].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const He=X[Fe].name;if(r.has(He))throw new TypeError('Duplicate type name "'+He+'"');_e.push(He),r.set(He,{name:He,test:X[Fe].test,isAny:X[Fe].isAny,index:be+Fe,conversionsTo:[]})}const Ne=i.slice(be);i=i.slice(0,be).concat(_e).concat(Ne);for(let Fe=be+_e.length;Fe<i.length;++Fe)r.get(i[Fe]).index=Fe}function u(){r=new Map,i=[],s=0,l([t],!1)}u(),l(e);function c(){let X;for(X of i)r.get(X).conversionsTo=[];s=0}function f(X){const Q=i.filter(be=>{const _e=r.get(be);return!_e.isAny&&_e.test(X)});return Q.length?Q:["any"]}function d(X){return X&&typeof X=="function"&&"_typedFunctionData"in X}function h(X,Q,be){if(!d(X))throw new TypeError(kF);const _e=be&&be.exact,Ne=Array.isArray(Q)?Q.join(","):Q,Fe=g(Ne),He=y(Fe);if(!_e||He in X.signatures){const lt=X._typedFunctionData.signatureMap.get(He);if(lt)return lt}const Ie=Fe.length;let Je;if(_e){Je=[];let lt;for(lt in X.signatures)Je.push(X._typedFunctionData.signatureMap.get(lt))}else Je=X._typedFunctionData.signatures;for(let lt=0;lt<Ie;++lt){const ot=Fe[lt],ye=[];let We;for(We of Je){const W=A(We.params,lt);if(!(!W||ot.restParam&&!W.restParam)){if(!W.hasAny){const ve=b(W);if(ot.types.some(ke=>!ve.has(ke.name)))continue}ye.push(We)}}if(Je=ye,Je.length===0)break}let qe;for(qe of Je)if(qe.params.length<=Ie)return qe;throw new TypeError("Signature not found (signature: "+(X.name||"unnamed")+"("+y(Fe,", ")+"))")}function m(X,Q,be){return h(X,Q,be).implementation}function v(X,Q){const be=a(Q);if(be.test(X))return X;const _e=be.conversionsTo;if(_e.length===0)throw new Error("There are no conversions to "+Q+" defined.");for(let Ne=0;Ne<_e.length;Ne++)if(a(_e[Ne].from).test(X))return _e[Ne].convert(X);throw new Error("Cannot convert "+X+" to "+Q)}function y(X){let Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return X.map(be=>be.name).join(Q)}function p(X){const Q=X.indexOf("...")===0,_e=(Q?X.length>3?X.slice(3):"any":X).split("|").map(Ie=>a(Ie.trim()));let Ne=!1,Fe=Q?"...":"";return{types:_e.map(function(Ie){return Ne=Ie.isAny||Ne,Fe+=Ie.name+"|",{name:Ie.name,typeIndex:Ie.index,test:Ie.test,isAny:Ie.isAny,conversion:null,conversionIndex:-1}}),name:Fe.slice(0,-1),hasAny:Ne,hasConversion:!1,restParam:Q}}function S(X){const Q=X.types.map(He=>He.name),be=I(Q);let _e=X.hasAny,Ne=X.name;const Fe=be.map(function(He){const Ie=a(He.from);return _e=Ie.isAny||_e,Ne+="|"+He.from,{name:He.from,typeIndex:Ie.index,test:Ie.test,isAny:Ie.isAny,conversion:He,conversionIndex:He.index}});return{types:X.types.concat(Fe),name:Ne,hasAny:_e,hasConversion:Fe.length>0,restParam:X.restParam}}function b(X){return X.typeSet||(X.typeSet=new Set,X.types.forEach(Q=>X.typeSet.add(Q.name))),X.typeSet}function g(X){const Q=[];if(typeof X!="string")throw new TypeError("Signatures must be strings");const be=X.trim();if(be==="")return Q;const _e=be.split(",");for(let Ne=0;Ne<_e.length;++Ne){const Fe=p(_e[Ne].trim());if(Fe.restParam&&Ne!==_e.length-1)throw new SyntaxError('Unexpected rest parameter "'+_e[Ne]+'": only allowed for the last parameter');if(Fe.types.length===0)return null;Q.push(Fe)}return Q}function w(X){const Q=me(X);return Q?Q.restParam:!1}function x(X){if(!X||X.types.length===0)return OF;if(X.types.length===1)return a(X.types[0].name).test;if(X.types.length===2){const Q=a(X.types[0].name).test,be=a(X.types[1].name).test;return function(Ne){return Q(Ne)||be(Ne)}}else{const Q=X.types.map(function(be){return a(be.name).test});return function(_e){for(let Ne=0;Ne<Q.length;Ne++)if(Q[Ne](_e))return!0;return!1}}}function M(X){let Q,be,_e;if(w(X)){Q=we(X).map(x);const Ne=Q.length,Fe=x(me(X)),He=function(Ie){for(let Je=Ne;Je<Ie.length;Je++)if(!Fe(Ie[Je]))return!1;return!0};return function(Je){for(let qe=0;qe<Q.length;qe++)if(!Q[qe](Je[qe]))return!1;return He(Je)&&Je.length>=Ne+1}}else return X.length===0?function(Fe){return Fe.length===0}:X.length===1?(be=x(X[0]),function(Fe){return be(Fe[0])&&Fe.length===1}):X.length===2?(be=x(X[0]),_e=x(X[1]),function(Fe){return be(Fe[0])&&_e(Fe[1])&&Fe.length===2}):(Q=X.map(x),function(Fe){for(let He=0;He<Q.length;He++)if(!Q[He](Fe[He]))return!1;return Fe.length===Q.length})}function A(X,Q){return Q<X.length?X[Q]:w(X)?me(X):null}function N(X,Q){const be=A(X,Q);return be?b(be):new Set}function C(X){return X.conversion===null||X.conversion===void 0}function T(X,Q){const be=new Set;return X.forEach(_e=>{const Ne=N(_e.params,Q);let Fe;for(Fe of Ne)be.add(Fe)}),be.has("any")?["any"]:Array.from(be)}function R(X,Q,be){let _e,Ne;const Fe=X||"unnamed";let He=be,Ie;for(Ie=0;Ie<Q.length;Ie++){const ot=[];if(He.forEach(ye=>{const We=A(ye.params,Ie),W=x(We);(Ie<ye.params.length||w(ye.params))&&W(Q[Ie])&&ot.push(ye)}),ot.length===0){if(Ne=T(He,Ie),Ne.length>0){const ye=f(Q[Ie]);return _e=new TypeError("Unexpected type of argument in function "+Fe+" (expected: "+Ne.join(" or ")+", actual: "+ye.join(" | ")+", index: "+Ie+")"),_e.data={category:"wrongType",fn:Fe,index:Ie,actual:ye,expected:Ne},_e}}else He=ot}const Je=He.map(function(ot){return w(ot.params)?1/0:ot.params.length});if(Q.length<Math.min.apply(null,Je))return Ne=T(He,Ie),_e=new TypeError("Too few arguments in function "+Fe+" (expected: "+Ne.join(" or ")+", index: "+Q.length+")"),_e.data={category:"tooFewArgs",fn:Fe,index:Q.length,expected:Ne},_e;const qe=Math.max.apply(null,Je);if(Q.length>qe)return _e=new TypeError("Too many arguments in function "+Fe+" (expected: "+qe+", actual: "+Q.length+")"),_e.data={category:"tooManyArgs",fn:Fe,index:Q.length,expectedLength:qe},_e;const lt=[];for(let ot=0;ot<Q.length;++ot)lt.push(f(Q[ot]).join("|"));return _e=new TypeError('Arguments of type "'+lt.join(", ")+'" do not match any of the defined signatures of function '+Fe+"."),_e.data={category:"mismatch",actual:lt},_e}function $(X){let Q=i.length+1;for(let be=0;be<X.types.length;be++)C(X.types[be])&&(Q=Math.min(Q,X.types[be].typeIndex));return Q}function B(X){let Q=s+1;for(let be=0;be<X.types.length;be++)C(X.types[be])||(Q=Math.min(Q,X.types[be].conversionIndex));return Q}function z(X,Q){if(X.hasAny){if(!Q.hasAny)return 1}else if(Q.hasAny)return-1;if(X.restParam){if(!Q.restParam)return 1}else if(Q.restParam)return-1;if(X.hasConversion){if(!Q.hasConversion)return 1}else if(Q.hasConversion)return-1;const be=$(X)-$(Q);if(be<0)return-1;if(be>0)return 1;const _e=B(X)-B(Q);return _e<0?-1:_e>0?1:0}function D(X,Q){const be=X.params,_e=Q.params,Ne=me(be),Fe=me(_e),He=w(be),Ie=w(_e);if(He&&Ne.hasAny){if(!Ie||!Fe.hasAny)return 1}else if(Ie&&Fe.hasAny)return-1;let Je=0,qe=0,lt;for(lt of be)lt.hasAny&&++Je,lt.hasConversion&&++qe;let ot=0,ye=0;for(lt of _e)lt.hasAny&&++ot,lt.hasConversion&&++ye;if(Je!==ot)return Je-ot;if(He&&Ne.hasConversion){if(!Ie||!Fe.hasConversion)return 1}else if(Ie&&Fe.hasConversion)return-1;if(qe!==ye)return qe-ye;if(He){if(!Ie)return 1}else if(Ie)return-1;const We=(be.length-_e.length)*(He?-1:1);if(We!==0)return We;const W=[];let ve=0;for(let Ye=0;Ye<be.length;++Ye){const he=z(be[Ye],_e[Ye]);W.push(he),ve+=he}if(ve!==0)return ve;let ke;for(ke of W)if(ke!==0)return ke;return 0}function I(X){if(X.length===0)return[];const Q=X.map(a);X.length>1&&Q.sort((Ne,Fe)=>Ne.index-Fe.index);let be=Q[0].conversionsTo;if(X.length===1)return be;be=be.concat([]);const _e=new Set(X);for(let Ne=1;Ne<Q.length;++Ne){let Fe;for(Fe of Q[Ne].conversionsTo)_e.has(Fe.from)||(be.push(Fe),_e.add(Fe.from))}return be}function U(X,Q){let be=Q;if(X.some(Ne=>Ne.hasConversion)){const Ne=w(X),Fe=X.map(L);be=function(){const Ie=[],Je=Ne?arguments.length-1:arguments.length;for(let qe=0;qe<Je;qe++)Ie[qe]=Fe[qe](arguments[qe]);return Ne&&(Ie[Je]=arguments[Je].map(Fe[Je])),Q.apply(this,Ie)}}let _e=be;if(w(X)){const Ne=X.length-1;_e=function(){return be.apply(this,Ae(arguments,0,Ne).concat([Ae(arguments,Ne)]))}}return _e}function L(X){let Q,be,_e,Ne;const Fe=[],He=[];switch(X.types.forEach(function(Ie){Ie.conversion&&(Fe.push(a(Ie.conversion.from).test),He.push(Ie.conversion.convert))}),He.length){case 0:return function(Je){return Je};case 1:return Q=Fe[0],_e=He[0],function(Je){return Q(Je)?_e(Je):Je};case 2:return Q=Fe[0],be=Fe[1],_e=He[0],Ne=He[1],function(Je){return Q(Je)?_e(Je):be(Je)?Ne(Je):Je};default:return function(Je){for(let qe=0;qe<He.length;qe++)if(Fe[qe](Je))return He[qe](Je);return Je}}}function q(X){function Q(be,_e,Ne){if(_e<be.length){const Fe=be[_e];let He=[];if(Fe.restParam){const Ie=Fe.types.filter(C);Ie.length<Fe.types.length&&He.push({types:Ie,name:"..."+Ie.map(Je=>Je.name).join("|"),hasAny:Ie.some(Je=>Je.isAny),hasConversion:!1,restParam:!0}),He.push(Fe)}else He=Fe.types.map(function(Ie){return{types:[Ie],name:Ie.name,hasAny:Ie.isAny,hasConversion:Ie.conversion,restParam:!1}});return re(He,function(Ie){return Q(be,_e+1,Ne.concat([Ie]))})}else return[Ne]}return Q(X,0,[])}function Z(X,Q){const be=Math.max(X.length,Q.length);for(let Ie=0;Ie<be;Ie++){const Je=N(X,Ie),qe=N(Q,Ie);let lt=!1,ot;for(ot of qe)if(Je.has(ot)){lt=!0;break}if(!lt)return!1}const _e=X.length,Ne=Q.length,Fe=w(X),He=w(Q);return Fe?He?_e===Ne:Ne>=_e:He?_e>=Ne:_e===Ne}function J(X){return X.map(Q=>Me(Q)?te(Q.referToSelf.callback):ie(Q)?Re(Q.referTo.references,Q.referTo.callback):Q)}function Y(X,Q,be){const _e=[];let Ne;for(Ne of X){let Fe=be[Ne];if(typeof Fe!="number")throw new TypeError('No definition for referenced signature "'+Ne+'"');if(Fe=Q[Fe],typeof Fe!="function")return!1;_e.push(Fe)}return _e}function ee(X,Q,be){const _e=J(X),Ne=new Array(_e.length).fill(!1);let Fe=!0;for(;Fe;){Fe=!1;let He=!0;for(let Ie=0;Ie<_e.length;++Ie){if(Ne[Ie])continue;const Je=_e[Ie];if(Me(Je))_e[Ie]=Je.referToSelf.callback(be),_e[Ie].referToSelf=Je.referToSelf,Ne[Ie]=!0,He=!1;else if(ie(Je)){const qe=Y(Je.referTo.references,_e,Q);qe?(_e[Ie]=Je.referTo.callback.apply(this,qe),_e[Ie].referTo=Je.referTo,Ne[Ie]=!0,He=!1):Fe=!0}}if(He&&Fe)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return _e}function ae(X){const Q=/\bthis(\(|\.signatures\b)/;Object.keys(X).forEach(be=>{const _e=X[be];if(Q.test(_e.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function ce(X,Q){if(o.createCount++,Object.keys(Q).length===0)throw new SyntaxError("No signatures provided");o.warnAgainstDeprecatedThis&&ae(Q);const be=[],_e=[],Ne={},Fe=[];let He;for(He in Q){if(!Object.prototype.hasOwnProperty.call(Q,He))continue;const ft=g(He);if(!ft)continue;be.forEach(function(zn){if(Z(zn,ft))throw new TypeError('Conflicting signatures "'+y(zn)+'" and "'+y(ft)+'".')}),be.push(ft);const _t=_e.length;_e.push(Q[He]);const zt=ft.map(S);let Ot;for(Ot of q(zt)){const zn=y(Ot);Fe.push({params:Ot,name:zn,fn:_t}),Ot.every(Jr=>!Jr.hasConversion)&&(Ne[zn]=_t)}}Fe.sort(D);const Ie=ee(_e,Ne,It);let Je;for(Je in Ne)Object.prototype.hasOwnProperty.call(Ne,Je)&&(Ne[Je]=Ie[Ne[Je]]);const qe=[],lt=new Map;for(Je of Fe)lt.has(Je.name)||(Je.fn=Ie[Je.fn],qe.push(Je),lt.set(Je.name,Je));const ot=qe[0]&&qe[0].params.length<=2&&!w(qe[0].params),ye=qe[1]&&qe[1].params.length<=2&&!w(qe[1].params),We=qe[2]&&qe[2].params.length<=2&&!w(qe[2].params),W=qe[3]&&qe[3].params.length<=2&&!w(qe[3].params),ve=qe[4]&&qe[4].params.length<=2&&!w(qe[4].params),ke=qe[5]&&qe[5].params.length<=2&&!w(qe[5].params),Ye=ot&&ye&&We&&W&&ve&&ke;for(let ft=0;ft<qe.length;++ft)qe[ft].test=M(qe[ft].params);const he=ot?x(qe[0].params[0]):Wo,Ze=ye?x(qe[1].params[0]):Wo,H=We?x(qe[2].params[0]):Wo,ne=W?x(qe[3].params[0]):Wo,fe=ve?x(qe[4].params[0]):Wo,xe=ke?x(qe[5].params[0]):Wo,Ce=ot?x(qe[0].params[1]):Wo,Oe=ye?x(qe[1].params[1]):Wo,$e=We?x(qe[2].params[1]):Wo,Xe=W?x(qe[3].params[1]):Wo,tt=ve?x(qe[4].params[1]):Wo,ht=ke?x(qe[5].params[1]):Wo;for(let ft=0;ft<qe.length;++ft)qe[ft].implementation=U(qe[ft].params,qe[ft].fn);const Pt=ot?qe[0].implementation:xh,rt=ye?qe[1].implementation:xh,Et=We?qe[2].implementation:xh,Ht=W?qe[3].implementation:xh,kr=ve?qe[4].implementation:xh,Ar=ke?qe[5].implementation:xh,er=ot?qe[0].params.length:-1,Ga=ye?qe[1].params.length:-1,Wu=We?qe[2].params.length:-1,Si=W?qe[3].params.length:-1,ge=ve?qe[4].params.length:-1,Le=ke?qe[5].params.length:-1,Ue=Ye?6:0,Ve=qe.length,je=qe.map(ft=>ft.test),yt=qe.map(ft=>ft.implementation),St=function(){for(let _t=Ue;_t<Ve;_t++)if(je[_t](arguments))return yt[_t].apply(this,arguments);return o.onMismatch(X,arguments,qe)};function It(ft,_t){return arguments.length===er&&he(ft)&&Ce(_t)?Pt.apply(this,arguments):arguments.length===Ga&&Ze(ft)&&Oe(_t)?rt.apply(this,arguments):arguments.length===Wu&&H(ft)&&$e(_t)?Et.apply(this,arguments):arguments.length===Si&&ne(ft)&&Xe(_t)?Ht.apply(this,arguments):arguments.length===ge&&fe(ft)&&tt(_t)?kr.apply(this,arguments):arguments.length===Le&&xe(ft)&&ht(_t)?Ar.apply(this,arguments):St.apply(this,arguments)}try{Object.defineProperty(It,"name",{value:X})}catch{}return It.signatures=Ne,It._typedFunctionData={signatures:qe,signatureMap:lt},It}function pe(X,Q,be){throw R(X,Q,be)}function we(X){return Ae(X,0,X.length-1)}function me(X){return X[X.length-1]}function Ae(X,Q,be){return Array.prototype.slice.call(X,Q,be)}function Ee(X,Q){for(let be=0;be<X.length;be++)if(Q(X[be]))return X[be]}function re(X,Q){return Array.prototype.concat.apply([],X.map(Q))}function Pe(){const X=we(arguments).map(be=>y(g(be))),Q=me(arguments);if(typeof Q!="function")throw new TypeError("Callback function expected as last argument");return Re(X,Q)}function Re(X,Q){return{referTo:{references:X,callback:Q}}}function te(X){if(typeof X!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:X}}}function ie(X){return X&&typeof X.referTo=="object"&&Array.isArray(X.referTo.references)&&typeof X.referTo.callback=="function"}function Me(X){return X&&typeof X.referToSelf=="object"&&typeof X.referToSelf.callback=="function"}function oe(X,Q){if(!X)return Q;if(Q&&Q!==X){const be=new Error("Function names do not match (expected: "+X+", actual: "+Q+")");throw be.data={actual:Q,expected:X},be}return X}function G(X){let Q;for(const be in X)Object.prototype.hasOwnProperty.call(X,be)&&(d(X[be])||typeof X[be].signature=="string")&&(Q=oe(Q,X[be].name));return Q}function j(X,Q){let be;for(be in Q)if(Object.prototype.hasOwnProperty.call(Q,be)){if(be in X&&Q[be]!==X[be]){const _e=new Error('Signature "'+be+'" is defined twice');throw _e.data={signature:be,sourceFunction:Q[be],destFunction:X[be]},_e}X[be]=Q[be]}}const de=o;o=function(X){const Q=typeof X=="string",be=Q?1:0;let _e=Q?X:"";const Ne={};for(let Fe=be;Fe<arguments.length;++Fe){const He=arguments[Fe];let Ie={},Je;if(typeof He=="function"?(Je=He.name,typeof He.signature=="string"?Ie[He.signature]=He:d(He)&&(Ie=He.signatures)):n(He)&&(Ie=He,Q||(Je=G(He))),Object.keys(Ie).length===0){const qe=new TypeError("Argument to 'typed' at index "+Fe+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw qe.data={index:Fe,argument:He},qe}Q||(_e=oe(_e,Je)),j(Ne,Ie)}return ce(_e||"",Ne)},o.create=uj,o.createCount=de.createCount,o.onMismatch=pe,o.throwMismatchError=pe,o.createError=R,o.clear=u,o.clearConversions=c,o.addTypes=l,o._findType=a,o.referTo=Pe,o.referToSelf=te,o.convert=v,o.findSignature=h,o.find=m,o.isTypedFunction=d,o.warnAgainstDeprecatedThis=!0,o.addType=function(X,Q){let be="any";Q!==!1&&r.has("Object")&&(be="Object"),o.addTypes([X],be)};function Te(X){if(!X||typeof X.from!="string"||typeof X.to!="string"||typeof X.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(X.to===X.from)throw new SyntaxError('Illegal to define conversion from "'+X.from+'" to itself.')}return o.addConversion=function(X){let Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};Te(X);const be=a(X.to),_e=be.conversionsTo.find(Ne=>Ne.from===X.from);if(_e)if(Q&&Q.override)o.removeConversion({from:_e.from,to:X.to,convert:_e.convert});else throw new Error('There is already a conversion from "'+X.from+'" to "'+be.name+'"');be.conversionsTo.push({from:X.from,convert:X.convert,index:s++})},o.addConversions=function(X,Q){X.forEach(be=>o.addConversion(be,Q))},o.removeConversion=function(X){Te(X);const Q=a(X.to),be=Ee(Q.conversionsTo,Ne=>Ne.from===X.from);if(!be)throw new Error("Attempt to remove nonexistent conversion from "+X.from+" to "+X.to);if(be.convert!==X.convert)throw new Error("Conversion to remove does not match existing conversion");const _e=Q.conversionsTo.indexOf(be);Q.conversionsTo.splice(_e,1)},o.resolve=function(X,Q){if(!d(X))throw new TypeError(kF);const be=X._typedFunctionData.signatures;for(let _e=0;_e<be.length;++_e)if(be[_e].test(Q))return be[_e];return null},o}const id=uj();function kt(n){return typeof n=="boolean"?!0:isFinite(n)?n===Math.round(n):!1}var Ec=Math.sign||function(n){return n>0?1:n<0?-1:0},Roe=Math.log2||function(e){return Math.log(e)/Math.LN2},Ooe=Math.log10||function(e){return Math.log(e)/Math.LN10},koe=Math.log1p||function(n){return Math.log(n+1)},Ioe=Math.cbrt||function(e){if(e===0)return e;var t=e<0,r;return t&&(e=-e),isFinite(e)?(r=Math.exp(Math.log(e)/3),r=(e/(r*r)+2*r)/3):r=e,t?-r:r},Loe=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function hC(n,e,t){var r={2:"0b",8:"0o",16:"0x"},i=r[e],s="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!kt(t))throw new Error("size must be an integer");if(n>2**(t-1)-1||n<-(2**(t-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!kt(n))throw new Error("Value must be an integer");n<0&&(n=n+2**t),s="i".concat(t)}var o="";return n<0&&(n=-n,o="-"),"".concat(o).concat(i).concat(n.toString(e)).concat(s)}function pd(n,e){if(typeof e=="function")return e(n);if(n===1/0)return"Infinity";if(n===-1/0)return"-Infinity";if(isNaN(n))return"NaN";var{notation:t,precision:r,wordSize:i}=cj(e);switch(t){case"fixed":return fj(n,r);case"exponential":return dj(n,r);case"engineering":return Foe(n,r);case"bin":return hC(n,2,i);case"oct":return hC(n,8,i);case"hex":return hC(n,16,i);case"auto":return Boe(n,r,e).replace(/((\.\d*?)(0+))($|e)/,function(){var s=arguments[2],o=arguments[4];return s!=="."?s+o:o});default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function cj(n){var e="auto",t,r;if(n!==void 0)if(tn(n))t=n;else if(Jt(n))t=n.toNumber();else if(by(n))n.precision!==void 0&&(t=IF(n.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),n.wordSize!==void 0&&(r=IF(n.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),n.notation&&(e=n.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:e,precision:t,wordSize:r}}function Sy(n){var e=String(n).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+n);var t=e[1],r=e[2],i=parseFloat(e[4]||"0"),s=r.indexOf(".");i+=s!==-1?s-1:r.length-1;var o=r.replace(".","").replace(/^0*/,function(a){return i-=a.length,""}).replace(/0*$/,"").split("").map(function(a){return parseInt(a)});return o.length===0&&(o.push(0),i++),{sign:t,coefficients:o,exponent:i}}function Foe(n,e){if(isNaN(n)||!isFinite(n))return String(n);var t=Sy(n),r=dE(t,e),i=r.exponent,s=r.coefficients,o=i%3===0?i:i<0?i-3-i%3:i-i%3;if(tn(e))for(;e>s.length||i-o+1>s.length;)s.push(0);else for(var a=Math.abs(i-o)-(s.length-1),l=0;l<a;l++)s.push(0);for(var u=Math.abs(i-o),c=1;u>0;)c++,u--;var f=s.slice(c).join(""),d=tn(e)&&f.length||f.match(/[1-9]/)?"."+f:"",h=s.slice(0,c).join("")+d+"e"+(i>=0?"+":"")+o.toString();return r.sign+h}function fj(n,e){if(isNaN(n)||!isFinite(n))return String(n);var t=Sy(n),r=typeof e=="number"?dE(t,t.exponent+1+e):t,i=r.coefficients,s=r.exponent+1,o=s+(e||0);return i.length<o&&(i=i.concat(zp(o-i.length))),s<0&&(i=zp(-s+1).concat(i),s=1),s<i.length&&i.splice(s,0,s===0?"0.":"."),r.sign+i.join("")}function dj(n,e){if(isNaN(n)||!isFinite(n))return String(n);var t=Sy(n),r=e?dE(t,e):t,i=r.coefficients,s=r.exponent;i.length<e&&(i=i.concat(zp(e-i.length)));var o=i.shift();return r.sign+o+(i.length>0?"."+i.join(""):"")+"e"+(s>=0?"+":"")+s}function Boe(n,e,t){if(isNaN(n)||!isFinite(n))return String(n);var r=LF(t==null?void 0:t.lowerExp,-3),i=LF(t==null?void 0:t.upperExp,5),s=Sy(n),o=e?dE(s,e):s;if(o.exponent<r||o.exponent>=i)return dj(n,e);var a=o.coefficients,l=o.exponent;a.length<e&&(a=a.concat(zp(e-a.length))),a=a.concat(zp(l-a.length+1+(a.length<e?e-a.length:0))),a=zp(-l).concat(a);var u=l>0?l:0;return u<a.length-1&&a.splice(u+1,0,"."),o.sign+a.join("")}function dE(n,e){for(var t={sign:n.sign,coefficients:n.coefficients,exponent:n.exponent},r=t.coefficients;e<=0;)r.unshift(0),t.exponent++,e++;if(r.length>e){var i=r.splice(e,r.length-e);if(i[0]>=5){var s=e-1;for(r[s]++;r[s]===10;)r.pop(),s===0&&(r.unshift(0),t.exponent++,s++),s--,r[s]++}}return t}function zp(n){for(var e=[],t=0;t<n;t++)e.push(0);return e}function zoe(n){return n.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var Uoe=Number.EPSILON||2220446049250313e-31;function Ns(n,e,t){if(t==null)return n===e;if(n===e)return!0;if(isNaN(n)||isNaN(e))return!1;if(isFinite(n)&&isFinite(e)){var r=Math.abs(n-e);return r<=Uoe?!0:r<=Math.max(Math.abs(n),Math.abs(e))*t}return!1}var $oe=Math.acosh||function(n){return Math.log(Math.sqrt(n*n-1)+n)},Voe=Math.asinh||function(n){return Math.log(Math.sqrt(n*n+1)+n)},Hoe=Math.atanh||function(n){return Math.log((1+n)/(1-n))/2},Woe=Math.cosh||function(n){return(Math.exp(n)+Math.exp(-n))/2},joe=Math.sinh||function(n){return(Math.exp(n)-Math.exp(-n))/2},Goe=Math.tanh||function(n){var e=Math.exp(2*n);return(e-1)/(e+1)};function qoe(n,e){var t=!0,r=e>0?!0:e<0?!1:1/e===1/0;return t^r?-n:n}function IF(n,e){if(tn(n))return n;if(Jt(n))return n.toNumber();e()}function LF(n,e){return tn(n)?n:Jt(n)?n.toNumber():e}function ue(n,e,t,r){function i(s){var o=Noe(s,e.map(hj));return Xoe(n,e,s),t(o)}return i.isFactory=!0,i.fn=n,i.dependencies=e.slice().sort(),r&&(i.meta=r),i}function Rv(n){return typeof n=="function"&&typeof n.fn=="string"&&Array.isArray(n.dependencies)}function Xoe(n,e,t){var r=e.filter(s=>!Yoe(s)).every(s=>t[s]!==void 0);if(!r){var i=e.filter(s=>t[s]===void 0);throw new Error('Cannot create function "'.concat(n,'", ')+"some dependencies are missing: ".concat(i.map(s=>'"'.concat(s,'"')).join(", "),"."))}}function Yoe(n){return n&&n[0]==="?"}function hj(n){return n&&n[0]==="?"?n.slice(1):n}function As(n,e){if(mj(n)&&pj(n,e))return n[e];throw typeof n[e]=="function"&&iR(n,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function om(n,e,t){if(mj(n)&&pj(n,e))return n[e]=t,t;throw new Error('No access to property "'+e+'"')}function Koe(n,e){return e in n}function pj(n,e){return!n||typeof n!="object"?!1:gt(Joe,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Zoe(n,e){if(!iR(n,e))throw new Error('No access to method "'+e+'"');return n[e]}function iR(n,e){return n==null||typeof n[e]!="function"||gt(n,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(n)?!1:gt(Qoe,e)?!0:!(e in Object.prototype||e in Function.prototype)}function mj(n){return typeof n=="object"&&n&&n.constructor===Object}var Joe={length:!0,name:!0},Qoe={toString:!0,valueOf:!0,toLocaleString:!0};class hE{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).values()}get(e){return As(this.wrappedObject,e)}set(e,t){return om(this.wrappedObject,e,t),this}has(e){return Koe(this.wrappedObject,e)}entries(){return vj(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}class gj{constructor(e,t,r){this.a=e,this.b=t,this.bKeys=r,this[Symbol.iterator]=this.entries}get(e){return this.bKeys.has(e)?this.b.get(e):this.a.get(e)}set(e,t){return this.bKeys.has(e)?this.b.set(e,t):this.a.set(e,t),this}has(e){return this.b.has(e)||this.a.has(e)}keys(){return new Set([...this.a.keys(),...this.b.keys()])[Symbol.iterator]()}entries(){return vj(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){return this.bKeys.has(e)?this.b.delete(e):this.a.delete(e)}clear(){this.a.clear(),this.b.clear()}get size(){return[...this.keys()].length}}function vj(n,e){return{next:()=>{var t=n.next();return t.done?t:{value:e(t.value),done:!1}}}}function h0(){return new Map}function Up(n){if(!n)return h0();if(yj(n))return n;if(by(n))return new hE(n);throw new Error("createMap can create maps from objects or Maps")}function eae(n){if(n instanceof hE)return n.wrappedObject;var e={};for(var t of n.keys()){var r=n.get(t);om(e,t,r)}return e}function yj(n){return n?n instanceof Map||n instanceof hE||typeof n.set=="function"&&typeof n.get=="function"&&typeof n.keys=="function"&&typeof n.has=="function":!1}var xj=function(){return xj=id.create,id},tae=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],nae=ue("typed",tae,function(e){var{BigNumber:t,Complex:r,DenseMatrix:i,Fraction:s}=e,o=xj();return o.clear(),o.addTypes([{name:"number",test:tn},{name:"Complex",test:Pa},{name:"BigNumber",test:Jt},{name:"Fraction",test:qd},{name:"Unit",test:Hs},{name:"identifier",test:a=>Pi&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(a)},{name:"string",test:Pi},{name:"Chain",test:rR},{name:"Array",test:_n},{name:"Matrix",test:$t},{name:"DenseMatrix",test:d0},{name:"SparseMatrix",test:_c},{name:"Range",test:fE},{name:"Index",test:xy},{name:"boolean",test:XW},{name:"ResultSet",test:YW},{name:"Help",test:nR},{name:"function",test:KW},{name:"Date",test:ZW},{name:"RegExp",test:JW},{name:"null",test:QW},{name:"undefined",test:ej},{name:"AccessorNode",test:Xc},{name:"ArrayNode",test:po},{name:"AssignmentNode",test:tj},{name:"BlockNode",test:nj},{name:"ConditionalNode",test:rj},{name:"ConstantNode",test:vn},{name:"FunctionNode",test:Cu},{name:"FunctionAssignmentNode",test:Pm},{name:"IndexNode",test:Xd},{name:"Node",test:In},{name:"ObjectNode",test:wy},{name:"OperatorNode",test:Br},{name:"ParenthesisNode",test:Pl},{name:"RangeNode",test:ij},{name:"RelationalNode",test:sj},{name:"SymbolNode",test:oi},{name:"Map",test:yj},{name:"Object",test:by}]),o.addConversions([{from:"number",to:"BigNumber",convert:function(l){if(t||pC(l),zoe(l)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+l+"). Use function bignumber(x) to convert to BigNumber.");return new t(l)}},{from:"number",to:"Complex",convert:function(l){return r||dx(l),new r(l,0)}},{from:"BigNumber",to:"Complex",convert:function(l){return r||dx(l),new r(l.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(l){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(l){return r||dx(l),new r(l.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(l){s||mC(l);var u=new s(l);if(u.valueOf()!==l)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+l+"). Use function fraction(x) to convert to Fraction.");return u}},{from:"string",to:"number",convert:function(l){var u=Number(l);if(isNaN(u))throw new Error('Cannot convert "'+l+'" to a number');return u}},{from:"string",to:"BigNumber",convert:function(l){t||pC(l);try{return new t(l)}catch{throw new Error('Cannot convert "'+l+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(l){s||mC(l);try{return new s(l)}catch{throw new Error('Cannot convert "'+l+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(l){r||dx(l);try{return new r(l)}catch{throw new Error('Cannot convert "'+l+'" to Complex')}}},{from:"boolean",to:"number",convert:function(l){return+l}},{from:"boolean",to:"BigNumber",convert:function(l){return t||pC(l),new t(+l)}},{from:"boolean",to:"Fraction",convert:function(l){return s||mC(l),new s(+l)}},{from:"boolean",to:"string",convert:function(l){return String(l)}},{from:"Array",to:"Matrix",convert:function(l){return i||rae(),new i(l)}},{from:"Matrix",to:"Array",convert:function(l){return l.valueOf()}}]),o.onMismatch=(a,l,u)=>{var c=o.createError(a,l,u);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&To(l[0])&&u.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(a,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(a,")'."));throw f.data=c.data,f}throw c},o.onMismatch=(a,l,u)=>{var c=o.createError(a,l,u);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&To(l[0])&&u.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(a,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(a,")'."));throw f.data=c.data,f}throw c},o});function pC(n){throw new Error("Cannot convert value ".concat(n," into a BigNumber: no class 'BigNumber' provided"))}function dx(n){throw new Error("Cannot convert value ".concat(n," into a Complex number: no class 'Complex' provided"))}function rae(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function mC(n){throw new Error("Cannot convert value ".concat(n," into a Fraction, no class 'Fraction' provided."))}var iae="ResultSet",sae=[],oae=ue(iae,sae,()=>{function n(e){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this.entries=e||[]}return n.prototype.type="ResultSet",n.prototype.isResultSet=!0,n.prototype.valueOf=function(){return this.entries},n.prototype.toString=function(){return"["+this.entries.join(", ")+"]"},n.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},n.fromJSON=function(e){return new n(e.entries)},n},{isClass:!0});/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Sp=9e15,hf=1e9,v3="0123456789abcdef",DS="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",NS="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",y3={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Sp,maxE:Sp,crypto:!1},bj,du,Qt=!0,pE="[DecimalError] ",Yc=pE+"Invalid argument: ",wj=pE+"Precision limit exceeded",Sj=pE+"crypto unavailable",_j="[object Decimal]",us=Math.floor,ni=Math.pow,aae=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,lae=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,uae=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Ej=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ra=1e7,Xt=7,cae=9007199254740991,fae=DS.length-1,x3=NS.length-1,st={toStringTag:_j};st.absoluteValue=st.abs=function(){var n=new this.constructor(this);return n.s<0&&(n.s=1),Bt(n)};st.ceil=function(){return Bt(new this.constructor(this),this.e+1,2)};st.clampedTo=st.clamp=function(n,e){var t,r=this,i=r.constructor;if(n=new i(n),e=new i(e),!n.s||!e.s)return new i(NaN);if(n.gt(e))throw Error(Yc+e);return t=r.cmp(n),t<0?n:r.cmp(e)>0?e:new i(r)};st.comparedTo=st.cmp=function(n){var e,t,r,i,s=this,o=s.d,a=(n=new s.constructor(n)).d,l=s.s,u=n.s;if(!o||!a)return!l||!u?NaN:l!==u?l:o===a?0:!o^l<0?1:-1;if(!o[0]||!a[0])return o[0]?l:a[0]?-u:0;if(l!==u)return l;if(s.e!==n.e)return s.e>n.e^l<0?1:-1;for(r=o.length,i=a.length,e=0,t=r<i?r:i;e<t;++e)if(o[e]!==a[e])return o[e]>a[e]^l<0?1:-1;return r===i?0:r>i^l<0?1:-1};st.cosine=st.cos=function(){var n,e,t=this,r=t.constructor;return t.d?t.d[0]?(n=r.precision,e=r.rounding,r.precision=n+Math.max(t.e,t.sd())+Xt,r.rounding=1,t=dae(r,Dj(r,t)),r.precision=n,r.rounding=e,Bt(du==2||du==3?t.neg():t,n,e,!0)):new r(1):new r(NaN)};st.cubeRoot=st.cbrt=function(){var n,e,t,r,i,s,o,a,l,u,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(Qt=!1,s=c.s*ni(c.s*c,1/3),!s||Math.abs(s)==1/0?(t=Li(c.d),n=c.e,(s=(n-t.length+1)%3)&&(t+=s==1||s==-2?"0":"00"),s=ni(t,1/3),n=us((n+1)/3)-(n%3==(n<0?-1:2)),s==1/0?t="5e"+n:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+n),r=new f(t),r.s=c.s):r=new f(s.toString()),o=(n=f.precision)+3;;)if(a=r,l=a.times(a).times(a),u=l.plus(c),r=Qn(u.plus(c).times(a),u.plus(l),o+2,1),Li(a.d).slice(0,o)===(t=Li(r.d)).slice(0,o))if(t=t.slice(o-3,o+1),t=="9999"||!i&&t=="4999"){if(!i&&(Bt(a,n+1,0),a.times(a).times(a).eq(c))){r=a;break}o+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(Bt(r,n+1,1),e=!r.times(r).times(r).eq(c));break}return Qt=!0,Bt(r,n,f.rounding,e)};st.decimalPlaces=st.dp=function(){var n,e=this.d,t=NaN;if(e){if(n=e.length-1,t=(n-us(this.e/Xt))*Xt,n=e[n],n)for(;n%10==0;n/=10)t--;t<0&&(t=0)}return t};st.dividedBy=st.div=function(n){return Qn(this,new this.constructor(n))};st.dividedToIntegerBy=st.divToInt=function(n){var e=this,t=e.constructor;return Bt(Qn(e,new t(n),0,1,1),t.precision,t.rounding)};st.equals=st.eq=function(n){return this.cmp(n)===0};st.floor=function(){return Bt(new this.constructor(this),this.e+1,3)};st.greaterThan=st.gt=function(n){return this.cmp(n)>0};st.greaterThanOrEqualTo=st.gte=function(n){var e=this.cmp(n);return e==1||e===0};st.hyperbolicCosine=st.cosh=function(){var n,e,t,r,i,s=this,o=s.constructor,a=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return a;t=o.precision,r=o.rounding,o.precision=t+Math.max(s.e,s.sd())+4,o.rounding=1,i=s.d.length,i<32?(n=Math.ceil(i/3),e=(1/gE(4,n)).toString()):(n=16,e="2.3283064365386962890625e-10"),s=am(o,1,s.times(e),new o(1),!0);for(var l,u=n,c=new o(8);u--;)l=s.times(s),s=a.minus(l.times(c.minus(l.times(c))));return Bt(s,o.precision=t,o.rounding=r,!0)};st.hyperbolicSine=st.sinh=function(){var n,e,t,r,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(e=s.precision,t=s.rounding,s.precision=e+Math.max(i.e,i.sd())+4,s.rounding=1,r=i.d.length,r<3)i=am(s,2,i,i,!0);else{n=1.4*Math.sqrt(r),n=n>16?16:n|0,i=i.times(1/gE(5,n)),i=am(s,2,i,i,!0);for(var o,a=new s(5),l=new s(16),u=new s(20);n--;)o=i.times(i),i=i.times(a.plus(o.times(l.times(o).plus(u))))}return s.precision=e,s.rounding=t,Bt(i,e,t,!0)};st.hyperbolicTangent=st.tanh=function(){var n,e,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+7,r.rounding=1,Qn(t.sinh(),t.cosh(),r.precision=n,r.rounding=e)):new r(t.s)};st.inverseCosine=st.acos=function(){var n,e=this,t=e.constructor,r=e.abs().cmp(1),i=t.precision,s=t.rounding;return r!==-1?r===0?e.isNeg()?Aa(t,i,s):new t(0):new t(NaN):e.isZero()?Aa(t,i+4,s).times(.5):(t.precision=i+6,t.rounding=1,e=e.asin(),n=Aa(t,i+4,s).times(.5),t.precision=i,t.rounding=s,n.minus(e))};st.inverseHyperbolicCosine=st.acosh=function(){var n,e,t=this,r=t.constructor;return t.lte(1)?new r(t.eq(1)?0:NaN):t.isFinite()?(n=r.precision,e=r.rounding,r.precision=n+Math.max(Math.abs(t.e),t.sd())+4,r.rounding=1,Qt=!1,t=t.times(t).minus(1).sqrt().plus(t),Qt=!0,r.precision=n,r.rounding=e,t.ln()):new r(t)};st.inverseHyperbolicSine=st.asinh=function(){var n,e,t=this,r=t.constructor;return!t.isFinite()||t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+2*Math.max(Math.abs(t.e),t.sd())+6,r.rounding=1,Qt=!1,t=t.times(t).plus(1).sqrt().plus(t),Qt=!0,r.precision=n,r.rounding=e,t.ln())};st.inverseHyperbolicTangent=st.atanh=function(){var n,e,t,r,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(n=s.precision,e=s.rounding,r=i.sd(),Math.max(r,n)<2*-i.e-1?Bt(new s(i),n,e,!0):(s.precision=t=r-i.e,i=Qn(i.plus(1),new s(1).minus(i),t+n,1),s.precision=n+4,s.rounding=1,i=i.ln(),s.precision=n,s.rounding=e,i.times(.5))):new s(NaN)};st.inverseSine=st.asin=function(){var n,e,t,r,i=this,s=i.constructor;return i.isZero()?new s(i):(e=i.abs().cmp(1),t=s.precision,r=s.rounding,e!==-1?e===0?(n=Aa(s,t+4,r).times(.5),n.s=i.s,n):new s(NaN):(s.precision=t+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=t,s.rounding=r,i.times(2)))};st.inverseTangent=st.atan=function(){var n,e,t,r,i,s,o,a,l,u=this,c=u.constructor,f=c.precision,d=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&f+4<=x3)return o=Aa(c,f+4,d).times(.25),o.s=u.s,o}else{if(!u.s)return new c(NaN);if(f+4<=x3)return o=Aa(c,f+4,d).times(.5),o.s=u.s,o}for(c.precision=a=f+10,c.rounding=1,t=Math.min(28,a/Xt+2|0),n=t;n;--n)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(Qt=!1,e=Math.ceil(a/Xt),r=1,l=u.times(u),o=new c(u),i=u;n!==-1;)if(i=i.times(l),s=o.minus(i.div(r+=2)),i=i.times(l),o=s.plus(i.div(r+=2)),o.d[e]!==void 0)for(n=e;o.d[n]===s.d[n]&&n--;);return t&&(o=o.times(2<<t-1)),Qt=!0,Bt(o,c.precision=f,c.rounding=d,!0)};st.isFinite=function(){return!!this.d};st.isInteger=st.isInt=function(){return!!this.d&&us(this.e/Xt)>this.d.length-2};st.isNaN=function(){return!this.s};st.isNegative=st.isNeg=function(){return this.s<0};st.isPositive=st.isPos=function(){return this.s>0};st.isZero=function(){return!!this.d&&this.d[0]===0};st.lessThan=st.lt=function(n){return this.cmp(n)<0};st.lessThanOrEqualTo=st.lte=function(n){return this.cmp(n)<1};st.logarithm=st.log=function(n){var e,t,r,i,s,o,a,l,u=this,c=u.constructor,f=c.precision,d=c.rounding,h=5;if(n==null)n=new c(10),e=!0;else{if(n=new c(n),t=n.d,n.s<0||!t||!t[0]||n.eq(1))return new c(NaN);e=n.eq(10)}if(t=u.d,u.s<0||!t||!t[0]||u.eq(1))return new c(t&&!t[0]?-1/0:u.s!=1?NaN:t?0:1/0);if(e)if(t.length>1)s=!0;else{for(i=t[0];i%10===0;)i/=10;s=i!==1}if(Qt=!1,a=f+h,o=Mc(u,a),r=e?PS(c,a+10):Mc(n,a),l=Qn(o,r,a,1),p0(l.d,i=f,d))do if(a+=10,o=Mc(u,a),r=e?PS(c,a+10):Mc(n,a),l=Qn(o,r,a,1),!s){+Li(l.d).slice(i+1,i+15)+1==1e14&&(l=Bt(l,f+1,0));break}while(p0(l.d,i+=10,d));return Qt=!0,Bt(l,f,d)};st.minus=st.sub=function(n){var e,t,r,i,s,o,a,l,u,c,f,d,h=this,m=h.constructor;if(n=new m(n),!h.d||!n.d)return!h.s||!n.s?n=new m(NaN):h.d?n.s=-n.s:n=new m(n.d||h.s!==n.s?h:NaN),n;if(h.s!=n.s)return n.s=-n.s,h.plus(n);if(u=h.d,d=n.d,a=m.precision,l=m.rounding,!u[0]||!d[0]){if(d[0])n.s=-n.s;else if(u[0])n=new m(h);else return new m(l===3?-0:0);return Qt?Bt(n,a,l):n}if(t=us(n.e/Xt),c=us(h.e/Xt),u=u.slice(),s=c-t,s){for(f=s<0,f?(e=u,s=-s,o=d.length):(e=d,t=c,o=u.length),r=Math.max(Math.ceil(a/Xt),o)+2,s>r&&(s=r,e.length=1),e.reverse(),r=s;r--;)e.push(0);e.reverse()}else{for(r=u.length,o=d.length,f=r<o,f&&(o=r),r=0;r<o;r++)if(u[r]!=d[r]){f=u[r]<d[r];break}s=0}for(f&&(e=u,u=d,d=e,n.s=-n.s),o=u.length,r=d.length-o;r>0;--r)u[o++]=0;for(r=d.length;r>s;){if(u[--r]<d[r]){for(i=r;i&&u[--i]===0;)u[i]=Ra-1;--u[i],u[r]+=Ra}u[r]-=d[r]}for(;u[--o]===0;)u.pop();for(;u[0]===0;u.shift())--t;return u[0]?(n.d=u,n.e=mE(u,t),Qt?Bt(n,a,l):n):new m(l===3?-0:0)};st.modulo=st.mod=function(n){var e,t=this,r=t.constructor;return n=new r(n),!t.d||!n.s||n.d&&!n.d[0]?new r(NaN):!n.d||t.d&&!t.d[0]?Bt(new r(t),r.precision,r.rounding):(Qt=!1,r.modulo==9?(e=Qn(t,n.abs(),0,3,1),e.s*=n.s):e=Qn(t,n,0,r.modulo,1),e=e.times(n),Qt=!0,t.minus(e))};st.naturalExponential=st.exp=function(){return b3(this)};st.naturalLogarithm=st.ln=function(){return Mc(this)};st.negated=st.neg=function(){var n=new this.constructor(this);return n.s=-n.s,Bt(n)};st.plus=st.add=function(n){var e,t,r,i,s,o,a,l,u,c,f=this,d=f.constructor;if(n=new d(n),!f.d||!n.d)return!f.s||!n.s?n=new d(NaN):f.d||(n=new d(n.d||f.s===n.s?f:NaN)),n;if(f.s!=n.s)return n.s=-n.s,f.minus(n);if(u=f.d,c=n.d,a=d.precision,l=d.rounding,!u[0]||!c[0])return c[0]||(n=new d(f)),Qt?Bt(n,a,l):n;if(s=us(f.e/Xt),r=us(n.e/Xt),u=u.slice(),i=s-r,i){for(i<0?(t=u,i=-i,o=c.length):(t=c,r=s,o=u.length),s=Math.ceil(a/Xt),o=s>o?s+1:o+1,i>o&&(i=o,t.length=1),t.reverse();i--;)t.push(0);t.reverse()}for(o=u.length,i=c.length,o-i<0&&(i=o,t=c,c=u,u=t),e=0;i;)e=(u[--i]=u[i]+c[i]+e)/Ra|0,u[i]%=Ra;for(e&&(u.unshift(e),++r),o=u.length;u[--o]==0;)u.pop();return n.d=u,n.e=mE(u,r),Qt?Bt(n,a,l):n};st.precision=st.sd=function(n){var e,t=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error(Yc+n);return t.d?(e=Mj(t.d),n&&t.e+1>e&&(e=t.e+1)):e=NaN,e};st.round=function(){var n=this,e=n.constructor;return Bt(new e(n),n.e+1,e.rounding)};st.sine=st.sin=function(){var n,e,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+Math.max(t.e,t.sd())+Xt,r.rounding=1,t=pae(r,Dj(r,t)),r.precision=n,r.rounding=e,Bt(du>2?t.neg():t,n,e,!0)):new r(NaN)};st.squareRoot=st.sqrt=function(){var n,e,t,r,i,s,o=this,a=o.d,l=o.e,u=o.s,c=o.constructor;if(u!==1||!a||!a[0])return new c(!u||u<0&&(!a||a[0])?NaN:a?o:1/0);for(Qt=!1,u=Math.sqrt(+o),u==0||u==1/0?(e=Li(a),(e.length+l)%2==0&&(e+="0"),u=Math.sqrt(e),l=us((l+1)/2)-(l<0||l%2),u==1/0?e="5e"+l:(e=u.toExponential(),e=e.slice(0,e.indexOf("e")+1)+l),r=new c(e)):r=new c(u.toString()),t=(l=c.precision)+3;;)if(s=r,r=s.plus(Qn(o,s,t+2,1)).times(.5),Li(s.d).slice(0,t)===(e=Li(r.d)).slice(0,t))if(e=e.slice(t-3,t+1),e=="9999"||!i&&e=="4999"){if(!i&&(Bt(s,l+1,0),s.times(s).eq(o))){r=s;break}t+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Bt(r,l+1,1),n=!r.times(r).eq(o));break}return Qt=!0,Bt(r,l,c.rounding,n)};st.tangent=st.tan=function(){var n,e,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+10,r.rounding=1,t=t.sin(),t.s=1,t=Qn(t,new r(1).minus(t.times(t)).sqrt(),n+10,0),r.precision=n,r.rounding=e,Bt(du==2||du==4?t.neg():t,n,e,!0)):new r(NaN)};st.times=st.mul=function(n){var e,t,r,i,s,o,a,l,u,c=this,f=c.constructor,d=c.d,h=(n=new f(n)).d;if(n.s*=c.s,!d||!d[0]||!h||!h[0])return new f(!n.s||d&&!d[0]&&!h||h&&!h[0]&&!d?NaN:!d||!h?n.s/0:n.s*0);for(t=us(c.e/Xt)+us(n.e/Xt),l=d.length,u=h.length,l<u&&(s=d,d=h,h=s,o=l,l=u,u=o),s=[],o=l+u,r=o;r--;)s.push(0);for(r=u;--r>=0;){for(e=0,i=l+r;i>r;)a=s[i]+h[r]*d[i-r-1]+e,s[i--]=a%Ra|0,e=a/Ra|0;s[i]=(s[i]+e)%Ra|0}for(;!s[--o];)s.pop();return e?++t:s.shift(),n.d=s,n.e=mE(s,t),Qt?Bt(n,f.precision,f.rounding):n};st.toBinary=function(n,e){return sR(this,2,n,e)};st.toDecimalPlaces=st.toDP=function(n,e){var t=this,r=t.constructor;return t=new r(t),n===void 0?t:(Qs(n,0,hf),e===void 0?e=r.rounding:Qs(e,0,8),Bt(t,n+t.e+1,e))};st.toExponential=function(n,e){var t,r=this,i=r.constructor;return n===void 0?t=Rl(r,!0):(Qs(n,0,hf),e===void 0?e=i.rounding:Qs(e,0,8),r=Bt(new i(r),n+1,e),t=Rl(r,!0,n+1)),r.isNeg()&&!r.isZero()?"-"+t:t};st.toFixed=function(n,e){var t,r,i=this,s=i.constructor;return n===void 0?t=Rl(i):(Qs(n,0,hf),e===void 0?e=s.rounding:Qs(e,0,8),r=Bt(new s(i),n+i.e+1,e),t=Rl(r,!1,n+r.e+1)),i.isNeg()&&!i.isZero()?"-"+t:t};st.toFraction=function(n){var e,t,r,i,s,o,a,l,u,c,f,d,h=this,m=h.d,v=h.constructor;if(!m)return new v(h);if(u=t=new v(1),r=l=new v(0),e=new v(r),s=e.e=Mj(m)-h.e-1,o=s%Xt,e.d[0]=ni(10,o<0?Xt+o:o),n==null)n=s>0?e:u;else{if(a=new v(n),!a.isInt()||a.lt(u))throw Error(Yc+a);n=a.gt(e)?s>0?e:u:a}for(Qt=!1,a=new v(Li(m)),c=v.precision,v.precision=s=m.length*Xt*2;f=Qn(a,e,0,1,1),i=t.plus(f.times(r)),i.cmp(n)!=1;)t=r,r=i,i=u,u=l.plus(f.times(i)),l=i,i=e,e=a.minus(f.times(i)),a=i;return i=Qn(n.minus(t),r,0,1,1),l=l.plus(i.times(u)),t=t.plus(i.times(r)),l.s=u.s=h.s,d=Qn(u,r,s,1).minus(h).abs().cmp(Qn(l,t,s,1).minus(h).abs())<1?[u,r]:[l,t],v.precision=c,Qt=!0,d};st.toHexadecimal=st.toHex=function(n,e){return sR(this,16,n,e)};st.toNearest=function(n,e){var t=this,r=t.constructor;if(t=new r(t),n==null){if(!t.d)return t;n=new r(1),e=r.rounding}else{if(n=new r(n),e===void 0?e=r.rounding:Qs(e,0,8),!t.d)return n.s?t:n;if(!n.d)return n.s&&(n.s=t.s),n}return n.d[0]?(Qt=!1,t=Qn(t,n,0,e,1).times(n),Qt=!0,Bt(t)):(n.s=t.s,t=n),t};st.toNumber=function(){return+this};st.toOctal=function(n,e){return sR(this,8,n,e)};st.toPower=st.pow=function(n){var e,t,r,i,s,o,a=this,l=a.constructor,u=+(n=new l(n));if(!a.d||!n.d||!a.d[0]||!n.d[0])return new l(ni(+a,u));if(a=new l(a),a.eq(1))return a;if(r=l.precision,s=l.rounding,n.eq(1))return Bt(a,r,s);if(e=us(n.e/Xt),e>=n.d.length-1&&(t=u<0?-u:u)<=cae)return i=Cj(l,a,t,r),n.s<0?new l(1).div(i):Bt(i,r,s);if(o=a.s,o<0){if(e<n.d.length-1)return new l(NaN);if(n.d[e]&1||(o=1),a.e==0&&a.d[0]==1&&a.d.length==1)return a.s=o,a}return t=ni(+a,u),e=t==0||!isFinite(t)?us(u*(Math.log("0."+Li(a.d))/Math.LN10+a.e+1)):new l(t+"").e,e>l.maxE+1||e<l.minE-1?new l(e>0?o/0:0):(Qt=!1,l.rounding=a.s=1,t=Math.min(12,(e+"").length),i=b3(n.times(Mc(a,r+t)),r),i.d&&(i=Bt(i,r+5,1),p0(i.d,r,s)&&(e=r+10,i=Bt(b3(n.times(Mc(a,e+t)),e),e+5,1),+Li(i.d).slice(r+1,r+15)+1==1e14&&(i=Bt(i,r+1,0)))),i.s=o,Qt=!0,l.rounding=s,Bt(i,r,s))};st.toPrecision=function(n,e){var t,r=this,i=r.constructor;return n===void 0?t=Rl(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(Qs(n,1,hf),e===void 0?e=i.rounding:Qs(e,0,8),r=Bt(new i(r),n,e),t=Rl(r,n<=r.e||r.e<=i.toExpNeg,n)),r.isNeg()&&!r.isZero()?"-"+t:t};st.toSignificantDigits=st.toSD=function(n,e){var t=this,r=t.constructor;return n===void 0?(n=r.precision,e=r.rounding):(Qs(n,1,hf),e===void 0?e=r.rounding:Qs(e,0,8)),Bt(new r(t),n,e)};st.toString=function(){var n=this,e=n.constructor,t=Rl(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()&&!n.isZero()?"-"+t:t};st.truncated=st.trunc=function(){return Bt(new this.constructor(this),this.e+1,1)};st.valueOf=st.toJSON=function(){var n=this,e=n.constructor,t=Rl(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()?"-"+t:t};function Li(n){var e,t,r,i=n.length-1,s="",o=n[0];if(i>0){for(s+=o,e=1;e<i;e++)r=n[e]+"",t=Xt-r.length,t&&(s+=dc(t)),s+=r;o=n[e],r=o+"",t=Xt-r.length,t&&(s+=dc(t))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}function Qs(n,e,t){if(n!==~~n||n<e||n>t)throw Error(Yc+n)}function p0(n,e,t,r){var i,s,o,a;for(s=n[0];s>=10;s/=10)--e;return--e<0?(e+=Xt,i=0):(i=Math.ceil((e+1)/Xt),e%=Xt),s=ni(10,Xt-e),a=n[i]%s|0,r==null?e<3?(e==0?a=a/100|0:e==1&&(a=a/10|0),o=t<4&&a==99999||t>3&&a==49999||a==5e4||a==0):o=(t<4&&a+1==s||t>3&&a+1==s/2)&&(n[i+1]/s/100|0)==ni(10,e-2)-1||(a==s/2||a==0)&&(n[i+1]/s/100|0)==0:e<4?(e==0?a=a/1e3|0:e==1?a=a/100|0:e==2&&(a=a/10|0),o=(r||t<4)&&a==9999||!r&&t>3&&a==4999):o=((r||t<4)&&a+1==s||!r&&t>3&&a+1==s/2)&&(n[i+1]/s/1e3|0)==ni(10,e-3)-1,o}function Tw(n,e,t){for(var r,i=[0],s,o=0,a=n.length;o<a;){for(s=i.length;s--;)i[s]*=e;for(i[0]+=v3.indexOf(n.charAt(o++)),r=0;r<i.length;r++)i[r]>t-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/t|0,i[r]%=t)}return i.reverse()}function dae(n,e){var t,r,i;if(e.isZero())return e;r=e.d.length,r<32?(t=Math.ceil(r/3),i=(1/gE(4,t)).toString()):(t=16,i="2.3283064365386962890625e-10"),n.precision+=t,e=am(n,1,e.times(i),new n(1));for(var s=t;s--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return n.precision-=t,e}var Qn=function(){function n(r,i,s){var o,a=0,l=r.length;for(r=r.slice();l--;)o=r[l]*i+a,r[l]=o%s|0,a=o/s|0;return a&&r.unshift(a),r}function e(r,i,s,o){var a,l;if(s!=o)l=s>o?1:-1;else for(a=l=0;a<s;a++)if(r[a]!=i[a]){l=r[a]>i[a]?1:-1;break}return l}function t(r,i,s,o){for(var a=0;s--;)r[s]-=a,a=r[s]<i[s]?1:0,r[s]=a*o+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,o,a,l){var u,c,f,d,h,m,v,y,p,S,b,g,w,x,M,A,N,C,T,R,$=r.constructor,B=r.s==i.s?1:-1,z=r.d,D=i.d;if(!z||!z[0]||!D||!D[0])return new $(!r.s||!i.s||(z?D&&z[0]==D[0]:!D)?NaN:z&&z[0]==0||!D?B*0:B/0);for(l?(h=1,c=r.e-i.e):(l=Ra,h=Xt,c=us(r.e/h)-us(i.e/h)),T=D.length,N=z.length,p=new $(B),S=p.d=[],f=0;D[f]==(z[f]||0);f++);if(D[f]>(z[f]||0)&&c--,s==null?(x=s=$.precision,o=$.rounding):a?x=s+(r.e-i.e)+1:x=s,x<0)S.push(1),m=!0;else{if(x=x/h+2|0,f=0,T==1){for(d=0,D=D[0],x++;(f<N||d)&&x--;f++)M=d*l+(z[f]||0),S[f]=M/D|0,d=M%D|0;m=d||f<N}else{for(d=l/(D[0]+1)|0,d>1&&(D=n(D,d,l),z=n(z,d,l),T=D.length,N=z.length),A=T,b=z.slice(0,T),g=b.length;g<T;)b[g++]=0;R=D.slice(),R.unshift(0),C=D[0],D[1]>=l/2&&++C;do d=0,u=e(D,b,T,g),u<0?(w=b[0],T!=g&&(w=w*l+(b[1]||0)),d=w/C|0,d>1?(d>=l&&(d=l-1),v=n(D,d,l),y=v.length,g=b.length,u=e(v,b,y,g),u==1&&(d--,t(v,T<y?R:D,y,l))):(d==0&&(u=d=1),v=D.slice()),y=v.length,y<g&&v.unshift(0),t(b,v,g,l),u==-1&&(g=b.length,u=e(D,b,T,g),u<1&&(d++,t(b,T<g?R:D,g,l))),g=b.length):u===0&&(d++,b=[0]),S[f++]=d,u&&b[0]?b[g++]=z[A]||0:(b=[z[A]],g=1);while((A++<N||b[0]!==void 0)&&x--);m=b[0]!==void 0}S[0]||S.shift()}if(h==1)p.e=c,bj=m;else{for(f=1,d=S[0];d>=10;d/=10)f++;p.e=f+c*h-1,Bt(p,a?s+p.e+1:s,o,m)}return p}}();function Bt(n,e,t,r){var i,s,o,a,l,u,c,f,d,h=n.constructor;e:if(e!=null){if(f=n.d,!f)return n;for(i=1,a=f[0];a>=10;a/=10)i++;if(s=e-i,s<0)s+=Xt,o=e,c=f[d=0],l=c/ni(10,i-o-1)%10|0;else if(d=Math.ceil((s+1)/Xt),a=f.length,d>=a)if(r){for(;a++<=d;)f.push(0);c=l=0,i=1,s%=Xt,o=s-Xt+1}else break e;else{for(c=a=f[d],i=1;a>=10;a/=10)i++;s%=Xt,o=s-Xt+i,l=o<0?0:c/ni(10,i-o-1)%10|0}if(r=r||e<0||f[d+1]!==void 0||(o<0?c:c%ni(10,i-o-1)),u=t<4?(l||r)&&(t==0||t==(n.s<0?3:2)):l>5||l==5&&(t==4||r||t==6&&(s>0?o>0?c/ni(10,i-o):0:f[d-1])%10&1||t==(n.s<0?8:7)),e<1||!f[0])return f.length=0,u?(e-=n.e+1,f[0]=ni(10,(Xt-e%Xt)%Xt),n.e=-e||0):f[0]=n.e=0,n;if(s==0?(f.length=d,a=1,d--):(f.length=d+1,a=ni(10,Xt-s),f[d]=o>0?(c/ni(10,i-o)%ni(10,o)|0)*a:0),u)for(;;)if(d==0){for(s=1,o=f[0];o>=10;o/=10)s++;for(o=f[0]+=a,a=1;o>=10;o/=10)a++;s!=a&&(n.e++,f[0]==Ra&&(f[0]=1));break}else{if(f[d]+=a,f[d]!=Ra)break;f[d--]=0,a=1}for(s=f.length;f[--s]===0;)f.pop()}return Qt&&(n.e>h.maxE?(n.d=null,n.e=NaN):n.e<h.minE&&(n.e=0,n.d=[0])),n}function Rl(n,e,t){if(!n.isFinite())return Tj(n);var r,i=n.e,s=Li(n.d),o=s.length;return e?(t&&(r=t-o)>0?s=s.charAt(0)+"."+s.slice(1)+dc(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(n.e<0?"e":"e+")+n.e):i<0?(s="0."+dc(-i-1)+s,t&&(r=t-o)>0&&(s+=dc(r))):i>=o?(s+=dc(i+1-o),t&&(r=t-i-1)>0&&(s=s+"."+dc(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),t&&(r=t-o)>0&&(i+1===o&&(s+="."),s+=dc(r))),s}function mE(n,e){var t=n[0];for(e*=Xt;t>=10;t/=10)e++;return e}function PS(n,e,t){if(e>fae)throw Qt=!0,t&&(n.precision=t),Error(wj);return Bt(new n(DS),e,1,!0)}function Aa(n,e,t){if(e>x3)throw Error(wj);return Bt(new n(NS),e,t,!0)}function Mj(n){var e=n.length-1,t=e*Xt+1;if(e=n[e],e){for(;e%10==0;e/=10)t--;for(e=n[0];e>=10;e/=10)t++}return t}function dc(n){for(var e="";n--;)e+="0";return e}function Cj(n,e,t,r){var i,s=new n(1),o=Math.ceil(r/Xt+4);for(Qt=!1;;){if(t%2&&(s=s.times(e),BF(s.d,o)&&(i=!0)),t=us(t/2),t===0){t=s.d.length-1,i&&s.d[t]===0&&++s.d[t];break}e=e.times(e),BF(e.d,o)}return Qt=!0,s}function FF(n){return n.d[n.d.length-1]&1}function Aj(n,e,t){for(var r,i=new n(e[0]),s=0;++s<e.length;)if(r=new n(e[s]),r.s)i[t](r)&&(i=r);else{i=r;break}return i}function b3(n,e){var t,r,i,s,o,a,l,u=0,c=0,f=0,d=n.constructor,h=d.rounding,m=d.precision;if(!n.d||!n.d[0]||n.e>17)return new d(n.d?n.d[0]?n.s<0?0:1/0:1:n.s?n.s<0?0:n:NaN);for(e==null?(Qt=!1,l=m):l=e,a=new d(.03125);n.e>-2;)n=n.times(a),f+=5;for(r=Math.log(ni(2,f))/Math.LN10*2+5|0,l+=r,t=s=o=new d(1),d.precision=l;;){if(s=Bt(s.times(n),l,1),t=t.times(++c),a=o.plus(Qn(s,t,l,1)),Li(a.d).slice(0,l)===Li(o.d).slice(0,l)){for(i=f;i--;)o=Bt(o.times(o),l,1);if(e==null)if(u<3&&p0(o.d,l-r,h,u))d.precision=l+=10,t=s=a=new d(1),c=0,u++;else return Bt(o,d.precision=m,h,Qt=!0);else return d.precision=m,o}o=a}}function Mc(n,e){var t,r,i,s,o,a,l,u,c,f,d,h=1,m=10,v=n,y=v.d,p=v.constructor,S=p.rounding,b=p.precision;if(v.s<0||!y||!y[0]||!v.e&&y[0]==1&&y.length==1)return new p(y&&!y[0]?-1/0:v.s!=1?NaN:y?0:v);if(e==null?(Qt=!1,c=b):c=e,p.precision=c+=m,t=Li(y),r=t.charAt(0),Math.abs(s=v.e)<15e14){for(;r<7&&r!=1||r==1&&t.charAt(1)>3;)v=v.times(n),t=Li(v.d),r=t.charAt(0),h++;s=v.e,r>1?(v=new p("0."+t),s++):v=new p(r+"."+t.slice(1))}else return u=PS(p,c+2,b).times(s+""),v=Mc(new p(r+"."+t.slice(1)),c-m).plus(u),p.precision=b,e==null?Bt(v,b,S,Qt=!0):v;for(f=v,l=o=v=Qn(v.minus(1),v.plus(1),c,1),d=Bt(v.times(v),c,1),i=3;;){if(o=Bt(o.times(d),c,1),u=l.plus(Qn(o,new p(i),c,1)),Li(u.d).slice(0,c)===Li(l.d).slice(0,c))if(l=l.times(2),s!==0&&(l=l.plus(PS(p,c+2,b).times(s+""))),l=Qn(l,new p(h),c,1),e==null)if(p0(l.d,c-m,S,a))p.precision=c+=m,u=o=v=Qn(f.minus(1),f.plus(1),c,1),d=Bt(v.times(v),c,1),i=a=1;else return Bt(l,p.precision=b,S,Qt=!0);else return p.precision=b,l;l=u,i+=2}}function Tj(n){return String(n.s*n.s/0)}function w3(n,e){var t,r,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(t<0&&(t=r),t+=+e.slice(r+1),e=e.substring(0,r)):t<0&&(t=e.length),r=0;e.charCodeAt(r)===48;r++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(r,i),e){if(i-=r,n.e=t=t-r-1,n.d=[],r=(t+1)%Xt,t<0&&(r+=Xt),r<i){for(r&&n.d.push(+e.slice(0,r)),i-=Xt;r<i;)n.d.push(+e.slice(r,r+=Xt));e=e.slice(r),r=Xt-e.length}else r-=i;for(;r--;)e+="0";n.d.push(+e),Qt&&(n.e>n.constructor.maxE?(n.d=null,n.e=NaN):n.e<n.constructor.minE&&(n.e=0,n.d=[0]))}else n.e=0,n.d=[0];return n}function hae(n,e){var t,r,i,s,o,a,l,u,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),Ej.test(e))return w3(n,e)}else if(e==="Infinity"||e==="NaN")return+e||(n.s=NaN),n.e=NaN,n.d=null,n;if(lae.test(e))t=16,e=e.toLowerCase();else if(aae.test(e))t=2;else if(uae.test(e))t=8;else throw Error(Yc+e);for(s=e.search(/p/i),s>0?(l=+e.slice(s+1),e=e.substring(2,s)):e=e.slice(2),s=e.indexOf("."),o=s>=0,r=n.constructor,o&&(e=e.replace(".",""),a=e.length,s=a-s,i=Cj(r,new r(t),s,s*2)),u=Tw(e,t,Ra),c=u.length-1,s=c;u[s]===0;--s)u.pop();return s<0?new r(n.s*0):(n.e=mE(u,c),n.d=u,Qt=!1,o&&(n=Qn(n,i,a*4)),l&&(n=n.times(Math.abs(l)<54?ni(2,l):Kc.pow(2,l))),Qt=!0,n)}function pae(n,e){var t,r=e.d.length;if(r<3)return e.isZero()?e:am(n,2,e,e);t=1.4*Math.sqrt(r),t=t>16?16:t|0,e=e.times(1/gE(5,t)),e=am(n,2,e,e);for(var i,s=new n(5),o=new n(16),a=new n(20);t--;)i=e.times(e),e=e.times(s.plus(i.times(o.times(i).minus(a))));return e}function am(n,e,t,r,i){var s,o,a,l,u=n.precision,c=Math.ceil(u/Xt);for(Qt=!1,l=t.times(t),a=new n(r);;){if(o=Qn(a.times(l),new n(e++*e++),u,1),a=i?r.plus(o):r.minus(o),r=Qn(o.times(l),new n(e++*e++),u,1),o=a.plus(r),o.d[c]!==void 0){for(s=c;o.d[s]===a.d[s]&&s--;);if(s==-1)break}s=a,a=r,r=o,o=s}return Qt=!0,o.d.length=c+1,o}function gE(n,e){for(var t=n;--e;)t*=n;return t}function Dj(n,e){var t,r=e.s<0,i=Aa(n,n.precision,1),s=i.times(.5);if(e=e.abs(),e.lte(s))return du=r?4:1,e;if(t=e.divToInt(i),t.isZero())du=r?3:2;else{if(e=e.minus(t.times(i)),e.lte(s))return du=FF(t)?r?2:3:r?4:1,e;du=FF(t)?r?1:4:r?3:2}return e.minus(i).abs()}function sR(n,e,t,r){var i,s,o,a,l,u,c,f,d,h=n.constructor,m=t!==void 0;if(m?(Qs(t,1,hf),r===void 0?r=h.rounding:Qs(r,0,8)):(t=h.precision,r=h.rounding),!n.isFinite())c=Tj(n);else{for(c=Rl(n),o=c.indexOf("."),m?(i=2,e==16?t=t*4-3:e==8&&(t=t*3-2)):i=e,o>=0&&(c=c.replace(".",""),d=new h(1),d.e=c.length-o,d.d=Tw(Rl(d),10,i),d.e=d.d.length),f=Tw(c,10,i),s=l=f.length;f[--l]==0;)f.pop();if(!f[0])c=m?"0p+0":"0";else{if(o<0?s--:(n=new h(n),n.d=f,n.e=s,n=Qn(n,d,t,r,0,i),f=n.d,s=n.e,u=bj),o=f[t],a=i/2,u=u||f[t+1]!==void 0,u=r<4?(o!==void 0||u)&&(r===0||r===(n.s<0?3:2)):o>a||o===a&&(r===4||u||r===6&&f[t-1]&1||r===(n.s<0?8:7)),f.length=t,u)for(;++f[--t]>i-1;)f[t]=0,t||(++s,f.unshift(1));for(l=f.length;!f[l-1];--l);for(o=0,c="";o<l;o++)c+=v3.charAt(f[o]);if(m){if(l>1)if(e==16||e==8){for(o=e==16?4:3,--l;l%o;l++)c+="0";for(f=Tw(c,i,e),l=f.length;!f[l-1];--l);for(o=1,c="1.";o<l;o++)c+=v3.charAt(f[o])}else c=c.charAt(0)+"."+c.slice(1);c=c+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)c="0"+c;c="0."+c}else if(++s>l)for(s-=l;s--;)c+="0";else s<l&&(c=c.slice(0,s)+"."+c.slice(s))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return n.s<0?"-"+c:c}function BF(n,e){if(n.length>e)return n.length=e,!0}function mae(n){return new this(n).abs()}function gae(n){return new this(n).acos()}function vae(n){return new this(n).acosh()}function yae(n,e){return new this(n).plus(e)}function xae(n){return new this(n).asin()}function bae(n){return new this(n).asinh()}function wae(n){return new this(n).atan()}function Sae(n){return new this(n).atanh()}function _ae(n,e){n=new this(n),e=new this(e);var t,r=this.precision,i=this.rounding,s=r+4;return!n.s||!e.s?t=new this(NaN):!n.d&&!e.d?(t=Aa(this,s,1).times(e.s>0?.25:.75),t.s=n.s):!e.d||n.isZero()?(t=e.s<0?Aa(this,r,i):new this(0),t.s=n.s):!n.d||e.isZero()?(t=Aa(this,s,1).times(.5),t.s=n.s):e.s<0?(this.precision=s,this.rounding=1,t=this.atan(Qn(n,e,s,1)),e=Aa(this,s,1),this.precision=r,this.rounding=i,t=n.s<0?t.minus(e):t.plus(e)):t=this.atan(Qn(n,e,s,1)),t}function Eae(n){return new this(n).cbrt()}function Mae(n){return Bt(n=new this(n),n.e+1,2)}function Cae(n,e,t){return new this(n).clamp(e,t)}function Aae(n){if(!n||typeof n!="object")throw Error(pE+"Object expected");var e,t,r,i=n.defaults===!0,s=["precision",1,hf,"rounding",0,8,"toExpNeg",-Sp,0,"toExpPos",0,Sp,"maxE",0,Sp,"minE",-Sp,0,"modulo",0,9];for(e=0;e<s.length;e+=3)if(t=s[e],i&&(this[t]=y3[t]),(r=n[t])!==void 0)if(us(r)===r&&r>=s[e+1]&&r<=s[e+2])this[t]=r;else throw Error(Yc+t+": "+r);if(t="crypto",i&&(this[t]=y3[t]),(r=n[t])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(Sj);else this[t]=!1;else throw Error(Yc+t+": "+r);return this}function Tae(n){return new this(n).cos()}function Dae(n){return new this(n).cosh()}function Nj(n){var e,t,r;function i(s){var o,a,l,u=this;if(!(u instanceof i))return new i(s);if(u.constructor=i,zF(s)){u.s=s.s,Qt?!s.d||s.e>i.maxE?(u.e=NaN,u.d=null):s.e<i.minE?(u.e=0,u.d=[0]):(u.e=s.e,u.d=s.d.slice()):(u.e=s.e,u.d=s.d?s.d.slice():s.d);return}if(l=typeof s,l==="number"){if(s===0){u.s=1/s<0?-1:1,u.e=0,u.d=[0];return}if(s<0?(s=-s,u.s=-1):u.s=1,s===~~s&&s<1e7){for(o=0,a=s;a>=10;a/=10)o++;Qt?o>i.maxE?(u.e=NaN,u.d=null):o<i.minE?(u.e=0,u.d=[0]):(u.e=o,u.d=[s]):(u.e=o,u.d=[s]);return}else if(s*0!==0){s||(u.s=NaN),u.e=NaN,u.d=null;return}return w3(u,s.toString())}else if(l!=="string")throw Error(Yc+s);return(a=s.charCodeAt(0))===45?(s=s.slice(1),u.s=-1):(a===43&&(s=s.slice(1)),u.s=1),Ej.test(s)?w3(u,s):hae(u,s)}if(i.prototype=st,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=Aae,i.clone=Nj,i.isDecimal=zF,i.abs=mae,i.acos=gae,i.acosh=vae,i.add=yae,i.asin=xae,i.asinh=bae,i.atan=wae,i.atanh=Sae,i.atan2=_ae,i.cbrt=Eae,i.ceil=Mae,i.clamp=Cae,i.cos=Tae,i.cosh=Dae,i.div=Nae,i.exp=Pae,i.floor=Rae,i.hypot=Oae,i.ln=kae,i.log=Iae,i.log10=Fae,i.log2=Lae,i.max=Bae,i.min=zae,i.mod=Uae,i.mul=$ae,i.pow=Vae,i.random=Hae,i.round=Wae,i.sign=jae,i.sin=Gae,i.sinh=qae,i.sqrt=Xae,i.sub=Yae,i.sum=Kae,i.tan=Zae,i.tanh=Jae,i.trunc=Qae,n===void 0&&(n={}),n&&n.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<r.length;)n.hasOwnProperty(t=r[e++])||(n[t]=this[t]);return i.config(n),i}function Nae(n,e){return new this(n).div(e)}function Pae(n){return new this(n).exp()}function Rae(n){return Bt(n=new this(n),n.e+1,3)}function Oae(){var n,e,t=new this(0);for(Qt=!1,n=0;n<arguments.length;)if(e=new this(arguments[n++]),e.d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return Qt=!0,new this(1/0);t=e}return Qt=!0,t.sqrt()}function zF(n){return n instanceof Kc||n&&n.toStringTag===_j||!1}function kae(n){return new this(n).ln()}function Iae(n,e){return new this(n).log(e)}function Lae(n){return new this(n).log(2)}function Fae(n){return new this(n).log(10)}function Bae(){return Aj(this,arguments,"lt")}function zae(){return Aj(this,arguments,"gt")}function Uae(n,e){return new this(n).mod(e)}function $ae(n,e){return new this(n).mul(e)}function Vae(n,e){return new this(n).pow(e)}function Hae(n){var e,t,r,i,s=0,o=new this(1),a=[];if(n===void 0?n=this.precision:Qs(n,1,hf),r=Math.ceil(n/Xt),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));s<r;)i=e[s],i>=429e7?e[s]=crypto.getRandomValues(new Uint32Array(1))[0]:a[s++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(r*=4);s<r;)i=e[s]+(e[s+1]<<8)+(e[s+2]<<16)+((e[s+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,s):(a.push(i%1e7),s+=4);s=r/4}else throw Error(Sj);else for(;s<r;)a[s++]=Math.random()*1e7|0;for(r=a[--s],n%=Xt,r&&n&&(i=ni(10,Xt-n),a[s]=(r/i|0)*i);a[s]===0;s--)a.pop();if(s<0)t=0,a=[0];else{for(t=-1;a[0]===0;t-=Xt)a.shift();for(r=1,i=a[0];i>=10;i/=10)r++;r<Xt&&(t-=Xt-r)}return o.e=t,o.d=a,o}function Wae(n){return Bt(n=new this(n),n.e+1,this.rounding)}function jae(n){return n=new this(n),n.d?n.d[0]?n.s:0*n.s:n.s||NaN}function Gae(n){return new this(n).sin()}function qae(n){return new this(n).sinh()}function Xae(n){return new this(n).sqrt()}function Yae(n,e){return new this(n).sub(e)}function Kae(){var n=0,e=arguments,t=new this(e[n]);for(Qt=!1;t.s&&++n<e.length;)t=t.plus(e[n]);return Qt=!0,Bt(t,this.precision,this.rounding)}function Zae(n){return new this(n).tan()}function Jae(n){return new this(n).tanh()}function Qae(n){return Bt(n=new this(n),n.e+1,1)}st[Symbol.for("nodejs.util.inspect.custom")]=st.toString;st[Symbol.toStringTag]="Decimal";var Kc=st.constructor=Nj(y3);DS=new Kc(DS);NS=new Kc(NS);var ele="BigNumber",tle=["?on","config"],nle=ue(ele,tle,n=>{var{on:e,config:t}=n,r=Kc.clone({precision:t.precision,modulo:Kc.EUCLID});return r.prototype=Object.create(r.prototype),r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(i){return new r(i.value)},e&&e("config",function(i,s){i.precision!==s.precision&&r.config({precision:i.precision})}),r},{isClass:!0}),Pj={exports:{}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(n,e){(function(t){var r=Math.cosh||function(f){return Math.abs(f)<1e-9?1-f:(Math.exp(f)+Math.exp(-f))*.5},i=Math.sinh||function(f){return Math.abs(f)<1e-9?f:(Math.exp(f)-Math.exp(-f))*.5},s=function(f){var d=Math.PI/4;if(-d>f||f>d)return Math.cos(f)-1;var h=f*f;return h*(h*(h*(h*(h*(h*(h*(h/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},o=function(f,d){var h=Math.abs(f),m=Math.abs(d);return h<3e3&&m<3e3?Math.sqrt(h*h+m*m):(h<m?(h=m,m=f/d):m=d/f,h*Math.sqrt(1+m*m))},a=function(){throw SyntaxError("Invalid Param")};function l(f,d){var h=Math.abs(f),m=Math.abs(d);return f===0?Math.log(m):d===0?Math.log(h):h<3e3&&m<3e3?Math.log(f*f+d*d)*.5:(f=f/2,d=d/2,.5*Math.log(f*f+d*d)+Math.LN2)}var u=function(f,d){var h={re:0,im:0};if(f==null)h.re=h.im=0;else if(d!==void 0)h.re=f,h.im=d;else switch(typeof f){case"object":if("im"in f&&"re"in f)h.re=f.re,h.im=f.im;else if("abs"in f&&"arg"in f){if(!Number.isFinite(f.abs)&&Number.isFinite(f.arg))return c.INFINITY;h.re=f.abs*Math.cos(f.arg),h.im=f.abs*Math.sin(f.arg)}else if("r"in f&&"phi"in f){if(!Number.isFinite(f.r)&&Number.isFinite(f.phi))return c.INFINITY;h.re=f.r*Math.cos(f.phi),h.im=f.r*Math.sin(f.phi)}else f.length===2?(h.re=f[0],h.im=f[1]):a();break;case"string":h.im=h.re=0;var m=f.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),v=1,y=0;m===null&&a();for(var p=0;p<m.length;p++){var S=m[p];S===" "||S==="	"||S===`
`||(S==="+"?v++:S==="-"?y++:S==="i"||S==="I"?(v+y===0&&a(),m[p+1]!==" "&&!isNaN(m[p+1])?(h.im+=parseFloat((y%2?"-":"")+m[p+1]),p++):h.im+=parseFloat((y%2?"-":"")+"1"),v=y=0):((v+y===0||isNaN(S))&&a(),m[p+1]==="i"||m[p+1]==="I"?(h.im+=parseFloat((y%2?"-":"")+S),p++):h.re+=parseFloat((y%2?"-":"")+S),v=y=0))}v+y>0&&a();break;case"number":h.im=0,h.re=f;break;default:a()}return isNaN(h.re)||isNaN(h.im),h};function c(f,d){if(!(this instanceof c))return new c(f,d);var h=u(f,d);this.re=h.re,this.im=h.im}c.prototype={re:0,im:0,sign:function(){var f=this.abs();return new c(this.re/f,this.im/f)},add:function(f,d){var h=new c(f,d);return this.isInfinite()&&h.isInfinite()?c.NAN:this.isInfinite()||h.isInfinite()?c.INFINITY:new c(this.re+h.re,this.im+h.im)},sub:function(f,d){var h=new c(f,d);return this.isInfinite()&&h.isInfinite()?c.NAN:this.isInfinite()||h.isInfinite()?c.INFINITY:new c(this.re-h.re,this.im-h.im)},mul:function(f,d){var h=new c(f,d);return this.isInfinite()&&h.isZero()||this.isZero()&&h.isInfinite()?c.NAN:this.isInfinite()||h.isInfinite()?c.INFINITY:h.im===0&&this.im===0?new c(this.re*h.re,0):new c(this.re*h.re-this.im*h.im,this.re*h.im+this.im*h.re)},div:function(f,d){var h=new c(f,d);if(this.isZero()&&h.isZero()||this.isInfinite()&&h.isInfinite())return c.NAN;if(this.isInfinite()||h.isZero())return c.INFINITY;if(this.isZero()||h.isInfinite())return c.ZERO;f=this.re,d=this.im;var m=h.re,v=h.im,y,p;return v===0?new c(f/m,d/m):Math.abs(m)<Math.abs(v)?(p=m/v,y=m*p+v,new c((f*p+d)/y,(d*p-f)/y)):(p=v/m,y=v*p+m,new c((f+d*p)/y,(d-f*p)/y))},pow:function(f,d){var h=new c(f,d);if(f=this.re,d=this.im,h.isZero())return c.ONE;if(h.im===0){if(d===0&&f>0)return new c(Math.pow(f,h.re),0);if(f===0)switch((h.re%4+4)%4){case 0:return new c(Math.pow(d,h.re),0);case 1:return new c(0,Math.pow(d,h.re));case 2:return new c(-Math.pow(d,h.re),0);case 3:return new c(0,-Math.pow(d,h.re))}}if(f===0&&d===0&&h.re>0&&h.im>=0)return c.ZERO;var m=Math.atan2(d,f),v=l(f,d);return f=Math.exp(h.re*v-h.im*m),d=h.im*v+h.re*m,new c(f*Math.cos(d),f*Math.sin(d))},sqrt:function(){var f=this.re,d=this.im,h=this.abs(),m,v;if(f>=0){if(d===0)return new c(Math.sqrt(f),0);m=.5*Math.sqrt(2*(h+f))}else m=Math.abs(d)/Math.sqrt(2*(h-f));return f<=0?v=.5*Math.sqrt(2*(h-f)):v=Math.abs(d)/Math.sqrt(2*(h+f)),new c(m,d<0?-v:v)},exp:function(){var f=Math.exp(this.re);return this.im,new c(f*Math.cos(this.im),f*Math.sin(this.im))},expm1:function(){var f=this.re,d=this.im;return new c(Math.expm1(f)*Math.cos(d)+s(d),Math.exp(f)*Math.sin(d))},log:function(){var f=this.re,d=this.im;return new c(l(f,d),Math.atan2(d,f))},abs:function(){return o(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var f=this.re,d=this.im;return new c(Math.sin(f)*r(d),Math.cos(f)*i(d))},cos:function(){var f=this.re,d=this.im;return new c(Math.cos(f)*r(d),-Math.sin(f)*i(d))},tan:function(){var f=2*this.re,d=2*this.im,h=Math.cos(f)+r(d);return new c(Math.sin(f)/h,i(d)/h)},cot:function(){var f=2*this.re,d=2*this.im,h=Math.cos(f)-r(d);return new c(-Math.sin(f)/h,i(d)/h)},sec:function(){var f=this.re,d=this.im,h=.5*r(2*d)+.5*Math.cos(2*f);return new c(Math.cos(f)*r(d)/h,Math.sin(f)*i(d)/h)},csc:function(){var f=this.re,d=this.im,h=.5*r(2*d)-.5*Math.cos(2*f);return new c(Math.sin(f)*r(d)/h,-Math.cos(f)*i(d)/h)},asin:function(){var f=this.re,d=this.im,h=new c(d*d-f*f+1,-2*f*d).sqrt(),m=new c(h.re-d,h.im+f).log();return new c(m.im,-m.re)},acos:function(){var f=this.re,d=this.im,h=new c(d*d-f*f+1,-2*f*d).sqrt(),m=new c(h.re-d,h.im+f).log();return new c(Math.PI/2-m.im,m.re)},atan:function(){var f=this.re,d=this.im;if(f===0){if(d===1)return new c(0,1/0);if(d===-1)return new c(0,-1/0)}var h=f*f+(1-d)*(1-d),m=new c((1-d*d-f*f)/h,-2*f/h).log();return new c(-.5*m.im,.5*m.re)},acot:function(){var f=this.re,d=this.im;if(d===0)return new c(Math.atan2(1,f),0);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).atan():new c(f!==0?f/0:0,d!==0?-d/0:0).atan()},asec:function(){var f=this.re,d=this.im;if(f===0&&d===0)return new c(0,1/0);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).acos():new c(f!==0?f/0:0,d!==0?-d/0:0).acos()},acsc:function(){var f=this.re,d=this.im;if(f===0&&d===0)return new c(Math.PI/2,1/0);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).asin():new c(f!==0?f/0:0,d!==0?-d/0:0).asin()},sinh:function(){var f=this.re,d=this.im;return new c(i(f)*Math.cos(d),r(f)*Math.sin(d))},cosh:function(){var f=this.re,d=this.im;return new c(r(f)*Math.cos(d),i(f)*Math.sin(d))},tanh:function(){var f=2*this.re,d=2*this.im,h=r(f)+Math.cos(d);return new c(i(f)/h,Math.sin(d)/h)},coth:function(){var f=2*this.re,d=2*this.im,h=r(f)-Math.cos(d);return new c(i(f)/h,-Math.sin(d)/h)},csch:function(){var f=this.re,d=this.im,h=Math.cos(2*d)-r(2*f);return new c(-2*i(f)*Math.cos(d)/h,2*r(f)*Math.sin(d)/h)},sech:function(){var f=this.re,d=this.im,h=Math.cos(2*d)+r(2*f);return new c(2*r(f)*Math.cos(d)/h,-2*i(f)*Math.sin(d)/h)},asinh:function(){var f=this.im;this.im=-this.re,this.re=f;var d=this.asin();return this.re=-this.im,this.im=f,f=d.re,d.re=-d.im,d.im=f,d},acosh:function(){var f=this.acos();if(f.im<=0){var d=f.re;f.re=-f.im,f.im=d}else{var d=f.im;f.im=-f.re,f.re=d}return f},atanh:function(){var f=this.re,d=this.im,h=f>1&&d===0,m=1-f,v=1+f,y=m*m+d*d,p=y!==0?new c((v*m-d*d)/y,(d*m+v*d)/y):new c(f!==-1?f/0:0,d!==0?d/0:0),S=p.re;return p.re=l(p.re,p.im)/2,p.im=Math.atan2(p.im,S)/2,h&&(p.im=-p.im),p},acoth:function(){var f=this.re,d=this.im;if(f===0&&d===0)return new c(0,Math.PI/2);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).atanh():new c(f!==0?f/0:0,d!==0?-d/0:0).atanh()},acsch:function(){var f=this.re,d=this.im;if(d===0)return new c(f!==0?Math.log(f+Math.sqrt(f*f+1)):1/0,0);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).asinh():new c(f!==0?f/0:0,d!==0?-d/0:0).asinh()},asech:function(){var f=this.re,d=this.im;if(this.isZero())return c.INFINITY;var h=f*f+d*d;return h!==0?new c(f/h,-d/h).acosh():new c(f!==0?f/0:0,d!==0?-d/0:0).acosh()},inverse:function(){if(this.isZero())return c.INFINITY;if(this.isInfinite())return c.ZERO;var f=this.re,d=this.im,h=f*f+d*d;return new c(f/h,-d/h)},conjugate:function(){return new c(this.re,-this.im)},neg:function(){return new c(-this.re,-this.im)},ceil:function(f){return f=Math.pow(10,f||0),new c(Math.ceil(this.re*f)/f,Math.ceil(this.im*f)/f)},floor:function(f){return f=Math.pow(10,f||0),new c(Math.floor(this.re*f)/f,Math.floor(this.im*f)/f)},round:function(f){return f=Math.pow(10,f||0),new c(Math.round(this.re*f)/f,Math.round(this.im*f)/f)},equals:function(f,d){var h=new c(f,d);return Math.abs(h.re-this.re)<=c.EPSILON&&Math.abs(h.im-this.im)<=c.EPSILON},clone:function(){return new c(this.re,this.im)},toString:function(){var f=this.re,d=this.im,h="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(f)<c.EPSILON&&(f=0),Math.abs(d)<c.EPSILON&&(d=0),d===0?h+f:(f!==0?(h+=f,h+=" ",d<0?(d=-d,h+="-"):h+="+",h+=" "):d<0&&(d=-d,h+="-"),d!==1&&(h+=d),h+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},c.ZERO=new c(0,0),c.ONE=new c(1,0),c.I=new c(0,1),c.PI=new c(Math.PI,0),c.E=new c(Math.E,0),c.INFINITY=new c(1/0,1/0),c.NAN=new c(NaN,NaN),c.EPSILON=1e-15,Object.defineProperty(c,"__esModule",{value:!0}),c.default=c,c.Complex=c,n.exports=c})()})(Pj);var rle=Pj.exports;const Mi=fa(rle);var ile="Complex",sle=[],ole=ue(ile,sle,()=>(Object.defineProperty(Mi,"name",{value:"Complex"}),Mi.prototype.constructor=Mi,Mi.prototype.type="Complex",Mi.prototype.isComplex=!0,Mi.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Mi.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Mi.prototype.format=function(n){var e="",t=this.im,r=this.re,i=pd(this.re,n),s=pd(this.im,n),o=tn(n)?n:n?n.precision:null;if(o!==null){var a=Math.pow(10,-o);Math.abs(r/t)<a&&(r=0),Math.abs(t/r)<a&&(t=0)}return t===0?e=i:r===0?t===1?e="i":t===-1?e="-i":e=s+"i":t<0?t===-1?e=i+" - i":e=i+" - "+s.substring(1)+"i":t===1?e=i+" + i":e=i+" + "+s+"i",e},Mi.fromPolar=function(n){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return Mi(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var t=arguments[0],r=arguments[1];if(tn(t)){if(Hs(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),tn(r))return new Mi({r:t,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Mi.prototype.valueOf=Mi.prototype.toString,Mi.fromJSON=function(n){return new Mi(n)},Mi.compare=function(n,e){return n.re>e.re?1:n.re<e.re?-1:n.im>e.im?1:n.im<e.im?-1:0},Mi),{isClass:!0}),Rj={exports:{}};/**
 * @license Fraction.js v4.3.0 20/08/2023
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2023, Robert Eisele (robert@raw.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(n,e){(function(t){var r=2e3,i={s:1,n:0,d:1};function s(p,S){if(isNaN(p=parseInt(p,10)))throw v();return p*S}function o(p,S){if(S===0)throw m();var b=Object.create(h.prototype);b.s=p<0?-1:1,p=p<0?-p:p;var g=d(p,S);return b.n=p/g,b.d=S/g,b}function a(p){for(var S={},b=p,g=2,w=4;w<=b;){for(;b%g===0;)b/=g,S[g]=(S[g]||0)+1;w+=1+2*g++}return b!==p?b>1&&(S[b]=(S[b]||0)+1):S[p]=(S[p]||0)+1,S}var l=function(p,S){var b=0,g=1,w=1,x=0,M=0,A=0,N=1,C=1,T=0,R=1,$=1,B=1,z=1e7,D;if(p!=null)if(S!==void 0){if(b=p,g=S,w=b*g,b%1!==0||g%1!==0)throw y()}else switch(typeof p){case"object":{if("d"in p&&"n"in p)b=p.n,g=p.d,"s"in p&&(b*=p.s);else if(0 in p)b=p[0],1 in p&&(g=p[1]);else throw v();w=b*g;break}case"number":{if(p<0&&(w=p,p=-p),p%1===0)b=p;else if(p>0){for(p>=1&&(C=Math.pow(10,Math.floor(1+Math.log(p)/Math.LN10)),p/=C);R<=z&&B<=z;)if(D=(T+$)/(R+B),p===D){R+B<=z?(b=T+$,g=R+B):B>R?(b=$,g=B):(b=T,g=R);break}else p>D?(T+=$,R+=B):($+=T,B+=R),R>z?(b=$,g=B):(b=T,g=R);b*=C}else(isNaN(p)||isNaN(S))&&(g=b=NaN);break}case"string":{if(R=p.match(/\d+|./g),R===null)throw v();if(R[T]==="-"?(w=-1,T++):R[T]==="+"&&T++,R.length===T+1?M=s(R[T++],w):R[T+1]==="."||R[T]==="."?(R[T]!=="."&&(x=s(R[T++],w)),T++,(T+1===R.length||R[T+1]==="("&&R[T+3]===")"||R[T+1]==="'"&&R[T+3]==="'")&&(M=s(R[T],w),N=Math.pow(10,R[T].length),T++),(R[T]==="("&&R[T+2]===")"||R[T]==="'"&&R[T+2]==="'")&&(A=s(R[T+1],w),C=Math.pow(10,R[T+1].length)-1,T+=3)):R[T+1]==="/"||R[T+1]===":"?(M=s(R[T],w),N=s(R[T+2],1),T+=3):R[T+3]==="/"&&R[T+1]===" "&&(x=s(R[T],w),M=s(R[T+2],w),N=s(R[T+4],1),T+=5),R.length<=T){g=N*C,w=b=A+g*x+C*M;break}}default:throw v()}if(g===0)throw m();i.s=w<0?-1:1,i.n=Math.abs(b),i.d=Math.abs(g)};function u(p,S,b){for(var g=1;S>0;p=p*p%b,S>>=1)S&1&&(g=g*p%b);return g}function c(p,S){for(;S%2===0;S/=2);for(;S%5===0;S/=5);if(S===1)return 0;for(var b=10%S,g=1;b!==1;g++)if(b=b*10%S,g>r)return 0;return g}function f(p,S,b){for(var g=1,w=u(10,b,S),x=0;x<300;x++){if(g===w)return x;g=g*10%S,w=w*10%S}return 0}function d(p,S){if(!p)return S;if(!S)return p;for(;;){if(p%=S,!p)return S;if(S%=p,!S)return p}}function h(p,S){if(l(p,S),this instanceof h)p=d(i.d,i.n),this.s=i.s,this.n=i.n/p,this.d=i.d/p;else return o(i.s*i.n,i.d)}var m=function(){return new Error("Division by Zero")},v=function(){return new Error("Invalid argument")},y=function(){return new Error("Parameters must be integer")};h.prototype={s:1,n:0,d:1,abs:function(){return o(this.n,this.d)},neg:function(){return o(-this.s*this.n,this.d)},add:function(p,S){return l(p,S),o(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(p,S){return l(p,S),o(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(p,S){return l(p,S),o(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(p,S){return l(p,S),o(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return o(this.s*this.n,this.d)},mod:function(p,S){if(isNaN(this.n)||isNaN(this.d))return new h(NaN);if(p===void 0)return o(this.s*this.n%this.d,1);if(l(p,S),i.n===0&&this.d===0)throw m();return o(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d)},gcd:function(p,S){return l(p,S),o(d(i.n,this.n)*d(i.d,this.d),i.d*this.d)},lcm:function(p,S){return l(p,S),i.n===0&&this.n===0?o(0,1):o(i.n*this.n,d(i.n,this.n)*d(i.d,this.d))},ceil:function(p){return p=Math.pow(10,p||0),isNaN(this.n)||isNaN(this.d)?new h(NaN):o(Math.ceil(p*this.s*this.n/this.d),p)},floor:function(p){return p=Math.pow(10,p||0),isNaN(this.n)||isNaN(this.d)?new h(NaN):o(Math.floor(p*this.s*this.n/this.d),p)},round:function(p){return p=Math.pow(10,p||0),isNaN(this.n)||isNaN(this.d)?new h(NaN):o(Math.round(p*this.s*this.n/this.d),p)},inverse:function(){return o(this.s*this.d,this.n)},pow:function(p,S){if(l(p,S),i.d===1)return i.s<0?o(Math.pow(this.s*this.d,i.n),Math.pow(this.n,i.n)):o(Math.pow(this.s*this.n,i.n),Math.pow(this.d,i.n));if(this.s<0)return null;var b=a(this.n),g=a(this.d),w=1,x=1;for(var M in b)if(M!=="1"){if(M==="0"){w=0;break}if(b[M]*=i.n,b[M]%i.d===0)b[M]/=i.d;else return null;w*=Math.pow(M,b[M])}for(var M in g)if(M!=="1"){if(g[M]*=i.n,g[M]%i.d===0)g[M]/=i.d;else return null;x*=Math.pow(M,g[M])}return i.s<0?o(x,w):o(w,x)},equals:function(p,S){return l(p,S),this.s*this.n*i.d===i.s*i.n*this.d},compare:function(p,S){l(p,S);var b=this.s*this.n*i.d-i.s*i.n*this.d;return(0<b)-(b<0)},simplify:function(p){if(isNaN(this.n)||isNaN(this.d))return this;p=p||.001;for(var S=this.abs(),b=S.toContinued(),g=1;g<b.length;g++){for(var w=o(b[g-1],1),x=g-2;x>=0;x--)w=w.inverse().add(b[x]);if(Math.abs(w.sub(S).valueOf())<p)return w.mul(this.s)}return this},divisible:function(p,S){return l(p,S),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(p){var S,b="",g=this.n,w=this.d;return this.s<0&&(b+="-"),w===1?b+=g:(p&&(S=Math.floor(g/w))>0&&(b+=S,b+=" ",g%=w),b+=g,b+="/",b+=w),b},toLatex:function(p){var S,b="",g=this.n,w=this.d;return this.s<0&&(b+="-"),w===1?b+=g:(p&&(S=Math.floor(g/w))>0&&(b+=S,g%=w),b+="\\frac{",b+=g,b+="}{",b+=w,b+="}"),b},toContinued:function(){var p,S=this.n,b=this.d,g=[];if(isNaN(S)||isNaN(b))return g;do g.push(Math.floor(S/b)),p=S%b,S=b,b=p;while(S!==1);return g},toString:function(p){var S=this.n,b=this.d;if(isNaN(S)||isNaN(b))return"NaN";p=p||15;var g=c(S,b),w=f(S,b,g),x=this.s<0?"-":"";if(x+=S/b|0,S%=b,S*=10,S&&(x+="."),g){for(var M=w;M--;)x+=S/b|0,S%=b,S*=10;x+="(";for(var M=g;M--;)x+=S/b|0,S%=b,S*=10;x+=")"}else for(var M=p;S&&M--;)x+=S/b|0,S%=b,S*=10;return x}},Object.defineProperty(h,"__esModule",{value:!0}),h.default=h,h.Fraction=h,n.exports=h})()})(Rj);var ale=Rj.exports;const Kl=fa(ale);var lle="Fraction",ule=[],cle=ue(lle,ule,()=>(Object.defineProperty(Kl,"name",{value:"Fraction"}),Kl.prototype.constructor=Kl,Kl.prototype.type="Fraction",Kl.prototype.isFraction=!0,Kl.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},Kl.fromJSON=function(n){return new Kl(n)},Kl),{isClass:!0}),fle="Range",dle=[],hle=ue(fle,dle,()=>{function n(e,t,r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");var i=e!=null,s=t!=null,o=r!=null;if(i){if(Jt(e))e=e.toNumber();else if(typeof e!="number")throw new TypeError("Parameter start must be a number")}if(s){if(Jt(t))t=t.toNumber();else if(typeof t!="number")throw new TypeError("Parameter end must be a number")}if(o){if(Jt(r))r=r.toNumber();else if(typeof r!="number")throw new TypeError("Parameter step must be a number")}this.start=i?parseFloat(e):0,this.end=s?parseFloat(t):0,this.step=o?parseFloat(r):1}return n.prototype.type="Range",n.prototype.isRange=!0,n.parse=function(e){if(typeof e!="string")return null;var t=e.split(":"),r=t.map(function(s){return parseFloat(s)}),i=r.some(function(s){return isNaN(s)});if(i)return null;switch(r.length){case 2:return new n(r[0],r[1]);case 3:return new n(r[0],r[2],r[1]);default:return null}},n.prototype.clone=function(){return new n(this.start,this.end,this.step)},n.prototype.size=function(){var e=0,t=this.start,r=this.step,i=this.end,s=i-t;return Ec(r)===Ec(s)?e=Math.ceil(s/r):s===0&&(e=0),isNaN(e)&&(e=0),[e]},n.prototype.min=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start:this.start+(e-1)*this.step},n.prototype.max=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start+(e-1)*this.step:this.start},n.prototype.forEach=function(e){var t=this.start,r=this.step,i=this.end,s=0;if(r>0)for(;t<i;)e(t,[s],this),t+=r,s++;else if(r<0)for(;t>i;)e(t,[s],this),t+=r,s++},n.prototype.map=function(e){var t=[];return this.forEach(function(r,i,s){t[i[0]]=e(r,i,s)}),t},n.prototype.toArray=function(){var e=[];return this.forEach(function(t,r){e[r[0]]=t}),e},n.prototype.valueOf=function(){return this.toArray()},n.prototype.format=function(e){var t=pd(this.start,e);return this.step!==1&&(t+=":"+pd(this.step,e)),t+=":"+pd(this.end,e),t},n.prototype.toString=function(){return this.format()},n.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},n.fromJSON=function(e){return new n(e.start,e.end,e.step)},n},{isClass:!0}),ple="Matrix",mle=[],gle=ue(ple,mle,()=>{function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator")}return n.prototype.type="Matrix",n.prototype.isMatrix=!0,n.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},n.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},n.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface")},n.prototype.subset=function(e,t,r){throw new Error("Cannot invoke subset on a Matrix interface")},n.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},n.prototype.set=function(e,t,r){throw new Error("Cannot invoke set on a Matrix interface")},n.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface")},n.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface")},n.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},n.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},n.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface")},n.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},n.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},n.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},n.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},n.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},n.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},n},{isClass:!0});function gC(n,e,t){var r=n.constructor,i=new r(2),s="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!kt(t))throw new Error("size must be an integer");if(n.greaterThan(i.pow(t-1).sub(1))||n.lessThan(i.pow(t-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!n.isInteger())throw new Error("Value must be an integer");n.lessThan(0)&&(n=n.add(i.pow(t))),s="i".concat(t)}switch(e){case 2:return"".concat(n.toBinary()).concat(s);case 8:return"".concat(n.toOctal()).concat(s);case 16:return"".concat(n.toHexadecimal()).concat(s);default:throw new Error("Base ".concat(e," not supported "))}}function vle(n,e){if(typeof e=="function")return e(n);if(!n.isFinite())return n.isNaN()?"NaN":n.gt(0)?"Infinity":"-Infinity";var{notation:t,precision:r,wordSize:i}=cj(e);switch(t){case"fixed":return xle(n,r);case"exponential":return UF(n,r);case"engineering":return yle(n,r);case"bin":return gC(n,2,i);case"oct":return gC(n,8,i);case"hex":return gC(n,16,i);case"auto":{var s=$F(e==null?void 0:e.lowerExp,-3),o=$F(e==null?void 0:e.upperExp,5);if(n.isZero())return"0";var a,l=n.toSignificantDigits(r),u=l.e;return u>=s&&u<o?a=l.toFixed():a=UF(n,r),a.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function yle(n,e){var t=n.e,r=t%3===0?t:t<0?t-3-t%3:t-t%3,i=n.mul(Math.pow(10,-r)),s=i.toPrecision(e);if(s.includes("e")){var o=n.constructor;s=new o(s).toFixed()}return s+"e"+(t>=0?"+":"")+r.toString()}function UF(n,e){return e!==void 0?n.toExponential(e-1):n.toExponential()}function xle(n,e){return n.toFixed(e)}function $F(n,e){return tn(n)?n:Jt(n)?n.toNumber():e}function ble(n,e){var t=n.length-e.length,r=n.length;return n.substring(t,r)===e}function un(n,e){var t=wle(n,e);return e&&typeof e=="object"&&"truncate"in e&&t.length>e.truncate?t.substring(0,e.truncate-3)+"...":t}function wle(n,e){if(typeof n=="number")return pd(n,e);if(Jt(n))return vle(n,e);if(Sle(n))return!e||e.fraction!=="decimal"?n.s*n.n+"/"+n.d:n.toString();if(Array.isArray(n))return Oj(n,e);if(Pi(n))return _p(n);if(typeof n=="function")return n.syntax?String(n.syntax):"function";if(n&&typeof n=="object"){if(typeof n.format=="function")return n.format(e);if(n&&n.toString(e)!=={}.toString())return n.toString(e);var t=Object.keys(n).map(r=>_p(r)+": "+un(n[r],e));return"{"+t.join(", ")+"}"}return String(n)}function _p(n){for(var e=String(n),t="",r=0;r<e.length;){var i=e.charAt(r);t+=i in VF?VF[i]:i,r++}return'"'+t+'"'}var VF={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function Ko(n){var e=String(n);return e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e}function Oj(n,e){if(Array.isArray(n)){for(var t="[",r=n.length,i=0;i<r;i++)i!==0&&(t+=", "),t+=Oj(n[i],e);return t+="]",t}else return un(n,e)}function Sle(n){return n&&typeof n=="object"&&typeof n.s=="number"&&typeof n.n=="number"&&typeof n.d=="number"||!1}function S3(n,e){if(!Pi(n))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Wn(n)+", index: 0)");if(!Pi(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Wn(e)+", index: 1)");return n===e?0:n>e?1:-1}function an(n,e,t){if(!(this instanceof an))throw new SyntaxError("Constructor must be called with the new operator");this.actual=n,this.expected=e,this.relation=t,this.message="Dimension mismatch ("+(Array.isArray(n)?"["+n.join(", ")+"]":n)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}an.prototype=new RangeError;an.prototype.constructor=RangeError;an.prototype.name="DimensionError";an.prototype.isDimensionError=!0;function da(n,e,t){if(!(this instanceof da))throw new SyntaxError("Constructor must be called with the new operator");this.index=n,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=t),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}da.prototype=new RangeError;da.prototype.constructor=RangeError;da.prototype.name="IndexError";da.prototype.isIndexError=!0;function nn(n){for(var e=[];Array.isArray(n);)e.push(n.length),n=n[0];return e}function kj(n,e,t){var r,i=n.length;if(i!==e[t])throw new an(i,e[t]);if(t<e.length-1){var s=t+1;for(r=0;r<i;r++){var o=n[r];if(!Array.isArray(o))throw new an(e.length-1,e.length,"<");kj(n[r],e,s)}}else for(r=0;r<i;r++)if(Array.isArray(n[r]))throw new an(e.length+1,e.length,">")}function HF(n,e){var t=e.length===0;if(t){if(Array.isArray(n))throw new an(n.length,0)}else kj(n,e,0)}function RS(n,e){var t=n.isMatrix?n._size:nn(n),r=e._sourceSize;r.forEach((i,s)=>{if(i!==null&&i!==t[s])throw new an(i,t[s])})}function Un(n,e){if(n!==void 0){if(!tn(n)||!kt(n))throw new TypeError("Index must be an integer (value: "+n+")");if(n<0||typeof e=="number"&&n>=e)throw new da(n,e)}}function lm(n){for(var e=0;e<n._dimensions.length;++e){var t=n._dimensions[e];if(t._data&&_n(t._data)){if(t._size[0]===0)return!0}else if(t.isRange){if(t.start===t.end)return!0}else if(Pi(t)&&t.length===0)return!0}return!1}function um(n,e,t){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!tn(i)||!kt(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+un(e)+")")}),(tn(n)||Jt(n))&&(n=[n]);var r=t!==void 0?t:0;return _3(n,e,0,r),n}function _3(n,e,t,r){var i,s,o=n.length,a=e[t],l=Math.min(o,a);if(n.length=a,t<e.length-1){var u=t+1;for(i=0;i<l;i++)s=n[i],Array.isArray(s)||(s=[s],n[i]=s),_3(s,e,u,r);for(i=l;i<a;i++)s=[],n[i]=s,_3(s,e,u,r)}else{for(i=0;i<l;i++)for(;Array.isArray(n[i]);)n[i]=n[i][0];for(i=l;i<a;i++)n[i]=r}}function oR(n,e){var t=wn(n),r=t.length;if(!Array.isArray(n)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new an(0,r,"!=");e=aR(e,r);var i=Ij(e);if(r!==i)throw new an(i,r,"!=");try{return _le(t,e)}catch(s){throw s instanceof an?new an(i,r,"!="):s}}function aR(n,e){var t=Ij(n),r=n.slice(),i=-1,s=n.indexOf(i),o=n.indexOf(i,s+1)>=0;if(o)throw new Error("More than one wildcard in sizes");var a=s>=0,l=e%t===0;if(a)if(l)r[s]=-e/t;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-t);return r}function Ij(n){return n.reduce((e,t)=>e*t,1)}function _le(n,e){for(var t=n,r,i=e.length-1;i>0;i--){var s=e[i];r=[];for(var o=t.length/s,a=0;a<o;a++)r.push(t.slice(a*s,(a+1)*s));t=r}return t}function OS(n,e){for(var t=nn(n);Array.isArray(n)&&n.length===1;)n=n[0],t.shift();for(var r=t.length;t[r-1]===1;)r--;return r<t.length&&(n=Lj(n,r,0),t.length=r),n}function Lj(n,e,t){var r,i;if(t<e){var s=t+1;for(r=0,i=n.length;r<i;r++)n[r]=Lj(n[r],e,s)}else for(;Array.isArray(n);)n=n[0];return n}function Fj(n,e,t,r){var i=r||nn(n);if(t)for(var s=0;s<t;s++)n=[n],i.unshift(1);for(n=Bj(n,e,0);i.length<e;)i.push(1);return n}function Bj(n,e,t){var r,i;if(Array.isArray(n)){var s=t+1;for(r=0,i=n.length;r<i;r++)n[r]=Bj(n[r],e,s)}else for(var o=t;o<e;o++)n=[n];return n}function wn(n){if(!Array.isArray(n))return n;var e=[];return n.forEach(function t(r){Array.isArray(r)?r.forEach(t):e.push(r)}),e}function vu(n,e){return Array.prototype.map.call(n,e)}function vE(n,e){Array.prototype.forEach.call(n,e)}function zj(n,e){if(nn(n).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(n,e)}function kS(n,e){if(nn(n).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(n,t=>e.test(t))}function WF(n,e){return Array.prototype.join.call(n,e)}function cm(n){if(!Array.isArray(n))throw new TypeError("Array input expected");if(n.length===0)return n;var e=[],t=0;e[0]={value:n[0],identifier:0};for(var r=1;r<n.length;r++)n[r]===n[r-1]?t++:t=0,e.push({value:n[r],identifier:t});return e}function IS(n){if(!Array.isArray(n))throw new TypeError("Array input expected");if(n.length===0)return n;for(var e=[],t=0;t<n.length;t++)e.push(n[t].value);return e}function m0(n,e){for(var t,r=0,i=0;i<n.length;i++){var s=n[i],o=Array.isArray(s);if(i===0&&o&&(r=s.length),o&&s.length!==r)return;var a=o?m0(s,e):e(s);if(t===void 0)t=a;else if(t!==a)return"mixed"}return t}function Uj(n,e,t,r){if(r<t){if(n.length!==e.length)throw new an(n.length,e.length);for(var i=[],s=0;s<n.length;s++)i[s]=Uj(n[s],e[s],t,r+1);return i}else return n.concat(e)}function $j(){var n=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(n.length===1)return n[0];if(n.length>1)return n.slice(1).reduce(function(t,r){return Uj(t,r,e,0)},n[0]);throw new Error("Wrong number of arguments in function concat")}function Ele(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];for(var r=e.map(d=>d.length),i=Math.max(...r),s=new Array(i).fill(null),o=0;o<e.length;o++)for(var a=e[o],l=r[o],u=0;u<l;u++){var c=i-l+u;a[u]>s[c]&&(s[c]=a[u])}for(var f=0;f<e.length;f++)LS(e[f],s);return s}function LS(n,e){for(var t=e.length,r=n.length,i=0;i<r;i++){var s=t-r+i;if(n[i]<e[s]&&n[i]>1||n[i]>e[s])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(n,") not possible to broadcast dimension ").concat(r," with size ").concat(n[i]," to size ").concat(e[s]))}}function jF(n,e){var t=nn(n);if(Nd(t,e))return n;LS(t,e);var r=Ele(t,e),i=r.length,s=[...Array(i-t.length).fill(1),...t],o=Cle(n);t.length<i&&(o=oR(o,s),t=nn(o));for(var a=0;a<i;a++)t[a]<r[a]&&(o=Mle(o,r[a],a),t=nn(o));return o}function Mle(n,e,t){return $j(...Array(e).fill(n),t)}function Cle(n){return at([],n)}function Ale(n){var e=0,t=1,r=Object.create(null),i=Object.create(null),s=0,o=function(l){var u=i[l];if(u&&(delete r[u],delete i[l],--e,t===u)){if(!e){s=0,t=1;return}for(;!Object.prototype.hasOwnProperty.call(r,++t););}};return n=Math.abs(n),{hit:function(l){var u=i[l],c=++s;if(r[c]=l,i[l]=c,!u)return++e,e<=n?void 0:(l=r[t],o(l),l);if(delete r[u],t===u)for(;!Object.prototype.hasOwnProperty.call(r,++t););},delete:o,clear:function(){e=s=0,t=1,r=Object.create(null),i=Object.create(null)}}}function _y(n){var{hasher:e,limit:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t=t??Number.POSITIVE_INFINITY,e=e??JSON.stringify,function r(){typeof r.cache!="object"&&(r.cache={values:new Map,lru:Ale(t||Number.POSITIVE_INFINITY)});for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var o=e(i);if(r.cache.values.has(o))return r.cache.lru.hit(o),r.cache.values.get(o);var a=n.apply(n,i);return r.cache.values.set(o,a),r.cache.values.delete(r.cache.lru.hit(o)),a}}function Vj(n){return Object.keys(n.signatures||{}).reduce(function(e,t){var r=(t.match(/,/g)||[]).length+1;return Math.max(e,r)},-1)}var Tle="DenseMatrix",Dle=["Matrix"],Nle=ue(Tle,Dle,n=>{var{Matrix:e}=n;function t(c,f){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!Pi(f))throw new Error("Invalid datatype: "+f);if($t(c))c.type==="DenseMatrix"?(this._data=Yt(c._data),this._size=Yt(c._size),this._datatype=f||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=f||c._datatype);else if(c&&_n(c.data)&&_n(c.size))this._data=c.data,this._size=c.size,HF(this._data,this._size),this._datatype=f||c.datatype;else if(_n(c))this._data=u(c),this._size=nn(this._data),HF(this._data,this._size),this._datatype=f;else{if(c)throw new TypeError("Unsupported type of data ("+Wn(c)+")");this._data=[],this._size=[0],this._datatype=f}}t.prototype=new e,t.prototype.createDenseMatrix=function(c,f){return new t(c,f)},Object.defineProperty(t,"name",{value:"DenseMatrix"}),t.prototype.constructor=t,t.prototype.type="DenseMatrix",t.prototype.isDenseMatrix=!0,t.prototype.getDataType=function(){return m0(this._data,Wn)},t.prototype.storage=function(){return"dense"},t.prototype.datatype=function(){return this._datatype},t.prototype.create=function(c,f){return new t(c,f)},t.prototype.subset=function(c,f,d){switch(arguments.length){case 1:return r(this,c);case 2:case 3:return s(this,c,f,d);default:throw new SyntaxError("Wrong number of arguments")}},t.prototype.get=function(c){if(!_n(c))throw new TypeError("Array expected");if(c.length!==this._size.length)throw new an(c.length,this._size.length);for(var f=0;f<c.length;f++)Un(c[f],this._size[f]);for(var d=this._data,h=0,m=c.length;h<m;h++){var v=c[h];Un(v,d.length),d=d[v]}return d},t.prototype.set=function(c,f,d){if(!_n(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new an(c.length,this._size.length,"<");var h,m,v,y=c.map(function(S){return S+1});l(this,y,d);var p=this._data;for(h=0,m=c.length-1;h<m;h++)v=c[h],Un(v,p.length),p=p[v];return v=c[c.length-1],Un(v,p.length),p[v]=f,this};function r(c,f){if(!xy(f))throw new TypeError("Invalid index");var d=f.isScalar();if(d)return c.get(f.min());var h=f.size();if(h.length!==c._size.length)throw new an(h.length,c._size.length);for(var m=f.min(),v=f.max(),y=0,p=c._size.length;y<p;y++)Un(m[y],c._size[y]),Un(v[y],c._size[y]);return new t(i(c._data,f,h.length,0),c._datatype)}function i(c,f,d,h){var m=h===d-1,v=f.dimension(h);return m?v.map(function(y){return Un(y,c.length),c[y]}).valueOf():v.map(function(y){Un(y,c.length);var p=c[y];return i(p,f,d,h+1)}).valueOf()}function s(c,f,d,h){if(!f||f.isIndex!==!0)throw new TypeError("Invalid index");var m=f.size(),v=f.isScalar(),y;if($t(d)?(y=d.size(),d=d.valueOf()):y=nn(d),v){if(y.length!==0)throw new TypeError("Scalar expected");c.set(f.min(),d,h)}else{if(!Nd(y,m))try{y.length===0?d=jF([d],m):d=jF(d,m),y=nn(d)}catch{}if(m.length<c._size.length)throw new an(m.length,c._size.length,"<");if(y.length<m.length){for(var p=0,S=0;m[p]===1&&y[p]===1;)p++;for(;m[p]===1;)S++,p++;d=Fj(d,m.length,S,y)}if(!Nd(m,y))throw new an(m,y,">");var b=f.max().map(function(x){return x+1});l(c,b,h);var g=m.length,w=0;o(c._data,f,d,g,w)}return c}function o(c,f,d,h,m){var v=m===h-1,y=f.dimension(m);v?y.forEach(function(p,S){Un(p),c[p]=d[S[0]]}):y.forEach(function(p,S){Un(p),o(c[p],f,d[S[0]],h,m+1)})}t.prototype.resize=function(c,f,d){if(!To(c))throw new TypeError("Array or Matrix expected");var h=c.valueOf().map(v=>Array.isArray(v)&&v.length===1?v[0]:v),m=d?this.clone():this;return a(m,h,f)};function a(c,f,d){if(f.length===0){for(var h=c._data;_n(h);)h=h[0];return h}return c._size=f.slice(0),c._data=um(c._data,c._size,d),c}t.prototype.reshape=function(c,f){var d=f?this.clone():this;d._data=oR(d._data,c);var h=d._size.reduce((m,v)=>m*v);return d._size=aR(c,h),d};function l(c,f,d){for(var h=c._size.slice(0),m=!1;h.length<f.length;)h.push(0),m=!0;for(var v=0,y=f.length;v<y;v++)f[v]>h[v]&&(h[v]=f[v],m=!0);m&&a(c,h,d)}t.prototype.clone=function(){var c=new t({data:Yt(this._data),size:Yt(this._size),datatype:this._datatype});return c},t.prototype.size=function(){return this._size.slice(0)},t.prototype.map=function(c){var f=this,d=Vj(c),h=function y(p,S){return _n(p)?p.map(function(b,g){return y(b,S.concat(g))}):d===1?c(p):d===2?c(p,S):c(p,S,f)},m=h(this._data,[]),v=this._datatype!==void 0?m0(m,Wn):void 0;return new t(m,v)},t.prototype.forEach=function(c){var f=this,d=function h(m,v){_n(m)?m.forEach(function(y,p){h(y,v.concat(p))}):c(m,v,f)};d(this._data,[])},t.prototype[Symbol.iterator]=function*(){var c=function*f(d,h){if(_n(d))for(var m=0;m<d.length;m++)yield*f(d[m],h.concat(m));else yield{value:d,index:h}};yield*c(this._data,[])},t.prototype.rows=function(){var c=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var d=this._data;for(var h of d)c.push(new t([h],this._datatype));return c},t.prototype.columns=function(){var c=this,f=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var h=this._data,m=function(p){var S=h.map(b=>[b[p]]);f.push(new t(S,c._datatype))},v=0;v<d[1];v++)m(v);return f},t.prototype.toArray=function(){return Yt(this._data)},t.prototype.valueOf=function(){return this._data},t.prototype.format=function(c){return un(this._data,c)},t.prototype.toString=function(){return un(this._data)},t.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},t.prototype.diagonal=function(c){if(c){if(Jt(c)&&(c=c.toNumber()),!tn(c)||!kt(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var f=c>0?c:0,d=c<0?-c:0,h=this._size[0],m=this._size[1],v=Math.min(h-d,m-f),y=[],p=0;p<v;p++)y[p]=this._data[p+d][p+f];return new t({data:y,size:[v],datatype:this._datatype})},t.diagonal=function(c,f,d,h){if(!_n(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(M){if(Jt(M)&&(M=M.toNumber()),!tn(M)||!kt(M)||M<1)throw new Error("Size values must be positive integers");return M}),d){if(Jt(d)&&(d=d.toNumber()),!tn(d)||!kt(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var m=d>0?d:0,v=d<0?-d:0,y=c[0],p=c[1],S=Math.min(y-v,p-m),b;if(_n(f)){if(f.length!==S)throw new Error("Invalid value array length");b=function(A){return f[A]}}else if($t(f)){var g=f.size();if(g.length!==1||g[0]!==S)throw new Error("Invalid matrix length");b=function(A){return f.get([A])}}else b=function(){return f};h||(h=Jt(b(0))?b(0).mul(0):0);var w=[];if(c.length>0){w=um(w,c,h);for(var x=0;x<S;x++)w[x+v][x+m]=b(x)}return new t({data:w,size:[y,p]})},t.fromJSON=function(c){return new t(c)},t.prototype.swapRows=function(c,f){if(!tn(c)||!kt(c)||!tn(f)||!kt(f))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Un(c,this._size[0]),Un(f,this._size[0]),t._swapRows(c,f,this._data),this},t._swapRows=function(c,f,d){var h=d[c];d[c]=d[f],d[f]=h};function u(c){return $t(c)?u(c.valueOf()):_n(c)?c.map(u):c}return t},{isClass:!0}),GF="clone",Ple=["typed"],Rle=ue(GF,Ple,n=>{var{typed:e}=n;return e(GF,{any:Yt})});function Hj(n){var e=n.length,t=n[0].length,r,i,s=[];for(i=0;i<t;i++){var o=[];for(r=0;r<e;r++)o.push(n[r][i]);s.push(o)}return s}function Rm(n){for(var e=0;e<n.length;e++)if(To(n[e]))return!0;return!1}function Au(n,e){$t(n)&&(n=n.valueOf());for(var t=0,r=n.length;t<r;t++){var i=n[t];Array.isArray(i)?Au(i,e):e(i)}}function cn(n,e,t){return n&&typeof n.map=="function"?n.map(function(r){return cn(r,e)}):e(n)}function yE(n,e,t){var r=Array.isArray(n)?nn(n):n.size();if(e<0||e>=r.length)throw new da(e,r.length);return $t(n)?n.create(FS(n.valueOf(),e,t)):FS(n,e,t)}function FS(n,e,t){var r,i,s,o;if(e<=0)if(Array.isArray(n[0])){for(o=Hj(n),i=[],r=0;r<o.length;r++)i[r]=FS(o[r],e-1,t);return i}else{for(s=n[0],r=1;r<n.length;r++)s=t(s,n[r]);return s}else{for(i=[],r=0;r<n.length;r++)i[r]=FS(n[r],e-1,t);return i}}function qF(n,e,t,r,i,s,o,a,l,u,c){var f=n._values,d=n._index,h=n._ptr,m,v,y,p;if(r)for(v=h[e],y=h[e+1],m=v;m<y;m++)p=d[m],t[p]!==s?(t[p]=s,o.push(p),r[p]=f[m]):(r[p]=a(r[p],f[m]),i[p]=s);else for(v=h[e],y=h[e+1],m=v;m<y;m++)p=d[m],t[p]!==s?(t[p]=s,o.push(p)):i[p]=s}var XF="isInteger",Ole=["typed"],kle=ue(XF,Ole,n=>{var{typed:e}=n;return e(XF,{number:kt,BigNumber:function(r){return r.isInt()},Fraction:function(r){return r.d===1&&isFinite(r.n)},"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),za="number",Om="number, number";function Wj(n){return Math.abs(n)}Wj.signature=za;function jj(n,e){return n+e}jj.signature=Om;function Gj(n,e){return n-e}Gj.signature=Om;function qj(n,e){return n*e}qj.signature=Om;function Xj(n){return-n}Xj.signature=za;function Yj(n){return n}Yj.signature=za;function fv(n){return Ioe(n)}fv.signature=za;function Kj(n){return n*n*n}Kj.signature=za;function Zj(n){return Math.exp(n)}Zj.signature=za;function Jj(n){return Loe(n)}Jj.signature=za;function Qj(n,e){if(!kt(n)||!kt(e))throw new Error("Parameters in function lcm must be integer numbers");if(n===0||e===0)return 0;for(var t,r=n*e;e!==0;)t=e,e=n%t,n=t;return Math.abs(r/n)}Qj.signature=Om;function Ile(n,e){return Math.log(n)}function eG(n){return Ooe(n)}eG.signature=za;function tG(n){return Roe(n)}tG.signature=za;function YF(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,t=e<0;if(t&&(e=-e),e===0)throw new Error("Root must be non-zero");if(n<0&&Math.abs(e)%2!==1)throw new Error("Root must be odd when a is negative.");if(n===0)return t?1/0:0;if(!isFinite(n))return t?0:n;var r=Math.pow(Math.abs(n),1/e);return r=n<0?-r:r,t?1/r:r}function E3(n){return Ec(n)}E3.signature=za;function nG(n){return n*n}nG.signature=za;function rG(n,e){var t,r,i,s=0,o=1,a=1,l=0;if(!kt(n)||!kt(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)r=Math.floor(n/e),i=n-r*e,t=s,s=o-r*s,o=t,t=a,a=l-r*a,l=t,n=e,e=i;var u;return n<0?u=[-n,-o,-l]:u=[n,n?o:0,l],u}rG.signature=Om;function iG(n,e){return n*n<1&&e===1/0||n*n>1&&e===-1/0?0:Math.pow(n,e)}iG.signature=Om;function Pg(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!kt(e)||e<0||e>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(fj(n,e))}var Lle="number",km="number, number";function sG(n,e){if(!kt(n)||!kt(e))throw new Error("Integers expected in function bitAnd");return n&e}sG.signature=km;function oG(n){if(!kt(n))throw new Error("Integer expected in function bitNot");return~n}oG.signature=Lle;function aG(n,e){if(!kt(n)||!kt(e))throw new Error("Integers expected in function bitOr");return n|e}aG.signature=km;function lG(n,e){if(!kt(n)||!kt(e))throw new Error("Integers expected in function bitXor");return n^e}lG.signature=km;function uG(n,e){if(!kt(n)||!kt(e))throw new Error("Integers expected in function leftShift");return n<<e}uG.signature=km;function cG(n,e){if(!kt(n)||!kt(e))throw new Error("Integers expected in function rightArithShift");return n>>e}cG.signature=km;function fG(n,e){if(!kt(n)||!kt(e))throw new Error("Integers expected in function rightLogShift");return n>>>e}fG.signature=km;function hu(n,e){if(e<n)return 1;if(e===n)return e;var t=e+n>>1;return hu(n,t)*hu(t+1,e)}function dG(n,e){if(!kt(n)||n<0)throw new TypeError("Positive integer value expected in function combinations");if(!kt(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>n)throw new TypeError("k must be less than or equal to n");for(var t=n-e,r=1,i=e<t?t+1:e+1,s=2,o=e<t?e:t,a=i;a<=n;++a)for(r*=a;s<=o&&r%s===0;)r/=s,++s;return s<=o&&(r/=hu(s,o)),r}dG.signature="number, number";var Fle=Math.PI,Ble=2*Math.PI,zle=Math.E,Ule=1.618033988749895,$le="number",lR="number, number";function hG(n){return!n}hG.signature=$le;function pG(n,e){return!!(n||e)}pG.signature=lR;function mG(n,e){return!!n!=!!e}mG.signature=lR;function gG(n,e){return!!(n&&e)}gG.signature=lR;function BS(n){var e;if(kt(n))return n<=0?isFinite(n)?1/0:NaN:n>171?1/0:hu(1,n-1);if(n<.5)return Math.PI/(Math.sin(Math.PI*n)*BS(1-n));if(n>=171.35)return 1/0;if(n>85){var t=n*n,r=t*n,i=r*n,s=i*n;return Math.sqrt(2*Math.PI/n)*Math.pow(n/Math.E,n)*(1+1/(12*n)+1/(288*t)-139/(51840*r)-571/(2488320*i)+163879/(209018880*s)+5246819/(75246796800*s*n))}--n,e=$p[0];for(var o=1;o<$p.length;++o)e+=$p[o]/(n+o);var a=n+vG+.5;return Math.sqrt(2*Math.PI)*Math.pow(a,n+.5)*Math.exp(-a)*e}BS.signature="number";var vG=4.7421875,$p=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],yG=.9189385332046728,Vle=5,Hle=7,KF=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function zS(n){if(n<0)return NaN;if(n===0)return 1/0;if(!isFinite(n))return n;if(n<.5)return Math.log(Math.PI/Math.sin(Math.PI*n))-zS(1-n);n=n-1;for(var e=n+Vle+.5,t=KF[0],r=Hle-1;r>=1;r--)t+=KF[r]/(n+r);return yG+(n+.5)*Math.log(e)-e+Math.log(t)}zS.signature="number";var fs="number";function xG(n){return $oe(n)}xG.signature=fs;function bG(n){return Math.atan(1/n)}bG.signature=fs;function wG(n){return isFinite(n)?(Math.log((n+1)/n)+Math.log(n/(n-1)))/2:0}wG.signature=fs;function SG(n){return Math.asin(1/n)}SG.signature=fs;function _G(n){var e=1/n;return Math.log(e+Math.sqrt(e*e+1))}_G.signature=fs;function EG(n){return Math.acos(1/n)}EG.signature=fs;function MG(n){var e=1/n,t=Math.sqrt(e*e-1);return Math.log(t+e)}MG.signature=fs;function CG(n){return Voe(n)}CG.signature=fs;function AG(n){return Hoe(n)}AG.signature=fs;function TG(n){return 1/Math.tan(n)}TG.signature=fs;function DG(n){var e=Math.exp(2*n);return(e+1)/(e-1)}DG.signature=fs;function NG(n){return 1/Math.sin(n)}NG.signature=fs;function PG(n){return n===0?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(n)-Math.exp(-n)))*Ec(n)}PG.signature=fs;function RG(n){return 1/Math.cos(n)}RG.signature=fs;function OG(n){return 2/(Math.exp(n)+Math.exp(-n))}OG.signature=fs;function kG(n){return joe(n)}kG.signature=fs;var xE="number";function IG(n){return n<0}IG.signature=xE;function LG(n){return n>0}LG.signature=xE;function FG(n){return n===0}FG.signature=xE;function BG(n){return Number.isNaN(n)}BG.signature=xE;var ZF="isNegative",Wle=["typed"],jle=ue(ZF,Wle,n=>{var{typed:e}=n;return e(ZF,{number:IG,BigNumber:function(r){return r.isNeg()&&!r.isZero()&&!r.isNaN()},Fraction:function(r){return r.s<0},Unit:e.referToSelf(t=>r=>e.find(t,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),JF="isNumeric",Gle=["typed"],qle=ue(JF,Gle,n=>{var{typed:e}=n;return e(JF,{"number | BigNumber | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),QF="hasNumericValue",Xle=["typed","isNumeric"],Yle=ue(QF,Xle,n=>{var{typed:e,isNumeric:t}=n;return e(QF,{boolean:()=>!0,string:function(i){return i.trim().length>0&&!isNaN(Number(i))},any:function(i){return t(i)}})}),e4="isPositive",Kle=["typed"],Zle=ue(e4,Kle,n=>{var{typed:e}=n;return e(e4,{number:LG,BigNumber:function(r){return!r.isNeg()&&!r.isZero()&&!r.isNaN()},Fraction:function(r){return r.s>0&&r.n>0},Unit:e.referToSelf(t=>r=>e.find(t,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),t4="isZero",Jle=["typed"],Qle=ue(t4,Jle,n=>{var{typed:e}=n;return e(t4,{number:FG,BigNumber:function(r){return r.isZero()},Complex:function(r){return r.re===0&&r.im===0},Fraction:function(r){return r.d===1&&r.n===0},Unit:e.referToSelf(t=>r=>e.find(t,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),n4="isNaN",eue=["typed"],tue=ue(n4,eue,n=>{var{typed:e}=n;return e(n4,{number:BG,BigNumber:function(r){return r.isNaN()},Fraction:function(r){return!1},Complex:function(r){return r.isNaN()},Unit:function(r){return Number.isNaN(r.value)},"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),r4="typeOf",nue=["typed"],rue=ue(r4,nue,n=>{var{typed:e}=n;return e(r4,{any:Wn})});function aa(n,e,t){if(t==null)return n.eq(e);if(n.eq(e))return!0;if(n.isNaN()||e.isNaN())return!1;if(n.isFinite()&&e.isFinite()){var r=n.minus(e).abs();if(r.isZero())return!0;var i=n.constructor.max(n.abs(),e.abs());return r.lte(i.times(t))}return!1}function iue(n,e,t){return Ns(n.re,e.re,t)&&Ns(n.im,e.im,t)}var Im=ue("compareUnits",["typed"],n=>{var{typed:e}=n;return{"Unit, Unit":e.referToSelf(t=>(r,i)=>{if(!r.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(t,[r.valueType(),i.valueType()])(r.value,i.value)})}}),US="equalScalar",sue=["typed","config"],oue=ue(US,sue,n=>{var{typed:e,config:t}=n,r=Im({typed:e});return e(US,{"boolean, boolean":function(s,o){return s===o},"number, number":function(s,o){return Ns(s,o,t.epsilon)},"BigNumber, BigNumber":function(s,o){return s.eq(o)||aa(s,o,t.epsilon)},"Fraction, Fraction":function(s,o){return s.equals(o)},"Complex, Complex":function(s,o){return iue(s,o,t.epsilon)}},r)});ue(US,["typed","config"],n=>{var{typed:e,config:t}=n;return e(US,{"number, number":function(i,s){return Ns(i,s,t.epsilon)}})});var aue="SparseMatrix",lue=["typed","equalScalar","Matrix"],uue=ue(aue,lue,n=>{var{typed:e,equalScalar:t,Matrix:r}=n;function i(v,y){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(y&&!Pi(y))throw new Error("Invalid datatype: "+y);if($t(v))s(this,v,y);else if(v&&_n(v.index)&&_n(v.ptr)&&_n(v.size))this._values=v.values,this._index=v.index,this._ptr=v.ptr,this._size=v.size,this._datatype=y||v.datatype;else if(_n(v))o(this,v,y);else{if(v)throw new TypeError("Unsupported type of data ("+Wn(v)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=y}}function s(v,y,p){y.type==="SparseMatrix"?(v._values=y._values?Yt(y._values):void 0,v._index=Yt(y._index),v._ptr=Yt(y._ptr),v._size=Yt(y._size),v._datatype=p||y._datatype):o(v,y.valueOf(),p||y._datatype)}function o(v,y,p){v._values=[],v._index=[],v._ptr=[],v._datatype=p;var S=y.length,b=0,g=t,w=0;if(Pi(p)&&(g=e.find(t,[p,p])||t,w=e.convert(0,p)),S>0){var x=0;do{v._ptr.push(v._index.length);for(var M=0;M<S;M++){var A=y[M];if(_n(A)){if(x===0&&b<A.length&&(b=A.length),x<A.length){var N=A[x];g(N,w)||(v._values.push(N),v._index.push(M))}}else x===0&&b<1&&(b=1),g(A,w)||(v._values.push(A),v._index.push(M))}x++}while(x<b)}v._ptr.push(v._index.length),v._size=[S,b]}i.prototype=new r,i.prototype.createSparseMatrix=function(v,y){return new i(v,y)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return m0(this._values,Wn)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(v,y){return new i(v,y)},i.prototype.density=function(){var v=this._size[0],y=this._size[1];return v!==0&&y!==0?this._index.length/(v*y):0},i.prototype.subset=function(v,y,p){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return a(this,v);case 2:case 3:return l(this,v,y,p);default:throw new SyntaxError("Wrong number of arguments")}};function a(v,y){if(!xy(y))throw new TypeError("Invalid index");var p=y.isScalar();if(p)return v.get(y.min());var S=y.size();if(S.length!==v._size.length)throw new an(S.length,v._size.length);var b,g,w,x,M=y.min(),A=y.max();for(b=0,g=v._size.length;b<g;b++)Un(M[b],v._size[b]),Un(A[b],v._size[b]);var N=v._values,C=v._index,T=v._ptr,R=y.dimension(0),$=y.dimension(1),B=[],z=[];R.forEach(function(L,q){z[L]=q[0],B[L]=!0});var D=N?[]:void 0,I=[],U=[];return $.forEach(function(L){for(U.push(I.length),w=T[L],x=T[L+1];w<x;w++)b=C[w],B[b]===!0&&(I.push(z[b]),D&&D.push(N[w]))}),U.push(I.length),new i({values:D,index:I,ptr:U,size:S,datatype:v._datatype})}function l(v,y,p,S){if(!y||y.isIndex!==!0)throw new TypeError("Invalid index");var b=y.size(),g=y.isScalar(),w;if($t(p)?(w=p.size(),p=p.toArray()):w=nn(p),g){if(w.length!==0)throw new TypeError("Scalar expected");v.set(y.min(),p,S)}else{if(b.length!==1&&b.length!==2)throw new an(b.length,v._size.length,"<");if(w.length<b.length){for(var x=0,M=0;b[x]===1&&w[x]===1;)x++;for(;b[x]===1;)M++,x++;p=Fj(p,b.length,M,w)}if(!Nd(b,w))throw new an(b,w,">");if(b.length===1){var A=y.dimension(0);A.forEach(function(T,R){Un(T),v.set([T,0],p[R[0]],S)})}else{var N=y.dimension(0),C=y.dimension(1);N.forEach(function(T,R){Un(T),C.forEach(function($,B){Un($),v.set([T,$],p[R[0]][B[0]],S)})})}}return v}i.prototype.get=function(v){if(!_n(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new an(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var y=v[0],p=v[1];Un(y,this._size[0]),Un(p,this._size[1]);var S=u(y,this._ptr[p],this._ptr[p+1],this._index);return S<this._ptr[p+1]&&this._index[S]===y?this._values[S]:0},i.prototype.set=function(v,y,p){if(!_n(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new an(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var S=v[0],b=v[1],g=this._size[0],w=this._size[1],x=t,M=0;Pi(this._datatype)&&(x=e.find(t,[this._datatype,this._datatype])||t,M=e.convert(0,this._datatype)),(S>g-1||b>w-1)&&(d(this,Math.max(S+1,g),Math.max(b+1,w),p),g=this._size[0],w=this._size[1]),Un(S,g),Un(b,w);var A=u(S,this._ptr[b],this._ptr[b+1],this._index);return A<this._ptr[b+1]&&this._index[A]===S?x(y,M)?c(A,b,this._values,this._index,this._ptr):this._values[A]=y:x(y,M)||f(A,S,b,y,this._values,this._index,this._ptr),this};function u(v,y,p,S){if(p-y===0)return p;for(var b=y;b<p;b++)if(S[b]===v)return b;return y}function c(v,y,p,S,b){p.splice(v,1),S.splice(v,1);for(var g=y+1;g<b.length;g++)b[g]--}function f(v,y,p,S,b,g,w){b.splice(v,0,S),g.splice(v,0,y);for(var x=p+1;x<w.length;x++)w[x]++}i.prototype.resize=function(v,y,p){if(!To(v))throw new TypeError("Array or Matrix expected");var S=v.valueOf().map(g=>Array.isArray(g)&&g.length===1?g[0]:g);if(S.length!==2)throw new Error("Only two dimensions matrix are supported");S.forEach(function(g){if(!tn(g)||!kt(g)||g<0)throw new TypeError("Invalid size, must contain positive integers (size: "+un(S)+")")});var b=p?this.clone():this;return d(b,S[0],S[1],y)};function d(v,y,p,S){var b=S||0,g=t,w=0;Pi(v._datatype)&&(g=e.find(t,[v._datatype,v._datatype])||t,w=e.convert(0,v._datatype),b=e.convert(b,v._datatype));var x=!g(b,w),M=v._size[0],A=v._size[1],N,C,T;if(p>A){for(C=A;C<p;C++)if(v._ptr[C]=v._values.length,x)for(N=0;N<M;N++)v._values.push(b),v._index.push(N);v._ptr[p]=v._values.length}else p<A&&(v._ptr.splice(p+1,A-p),v._values.splice(v._ptr[p],v._values.length),v._index.splice(v._ptr[p],v._index.length));if(A=p,y>M){if(x){var R=0;for(C=0;C<A;C++){v._ptr[C]=v._ptr[C]+R,T=v._ptr[C+1]+R;var $=0;for(N=M;N<y;N++,$++)v._values.splice(T+$,0,b),v._index.splice(T+$,0,N),R++}v._ptr[A]=v._values.length}}else if(y<M){var B=0;for(C=0;C<A;C++){v._ptr[C]=v._ptr[C]-B;var z=v._ptr[C],D=v._ptr[C+1]-B;for(T=z;T<D;T++)N=v._index[T],N>y-1&&(v._values.splice(T,1),v._index.splice(T,1),B++)}v._ptr[C]=v._values.length}return v._size[0]=y,v._size[1]=p,v}i.prototype.reshape=function(v,y){if(!_n(v))throw new TypeError("Array expected");if(v.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");v.forEach(function(L){if(!tn(L)||!kt(L)||L<=-2||L===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+un(v)+")")});var p=this._size[0]*this._size[1];v=aR(v,p);var S=v[0]*v[1];if(p!==S)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var b=y?this.clone():this;if(this._size[0]===v[0]&&this._size[1]===v[1])return b;for(var g=[],w=0;w<b._ptr.length;w++)for(var x=0;x<b._ptr[w+1]-b._ptr[w];x++)g.push(w);for(var M=b._values.slice(),A=b._index.slice(),N=0;N<b._index.length;N++){var C=A[N],T=g[N],R=C*b._size[1]+T;g[N]=R%v[1],A[N]=Math.floor(R/v[1])}b._values.length=0,b._index.length=0,b._ptr.length=v[1]+1,b._size=v.slice();for(var $=0;$<b._ptr.length;$++)b._ptr[$]=0;for(var B=0;B<M.length;B++){var z=A[B],D=g[B],I=M[B],U=u(z,b._ptr[D],b._ptr[D+1],b._index);f(U,z,D,I,b._values,b._index,b._ptr)}return b},i.prototype.clone=function(){var v=new i({values:this._values?Yt(this._values):void 0,index:Yt(this._index),ptr:Yt(this._ptr),size:Yt(this._size),datatype:this._datatype});return v},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(v,y){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var p=this,S=this._size[0],b=this._size[1],g=Vj(v),w=function(M,A,N){return g===1?v(M):g===2?v(M,[A,N]):v(M,[A,N],p)};return h(this,0,S-1,0,b-1,w,y)};function h(v,y,p,S,b,g,w){var x=[],M=[],A=[],N=t,C=0;Pi(v._datatype)&&(N=e.find(t,[v._datatype,v._datatype])||t,C=e.convert(0,v._datatype));for(var T=function(Y,ee,ae){Y=g(Y,ee,ae),N(Y,C)||(x.push(Y),M.push(ee))},R=S;R<=b;R++){A.push(x.length);var $=v._ptr[R],B=v._ptr[R+1];if(w)for(var z=$;z<B;z++){var D=v._index[z];D>=y&&D<=p&&T(v._values[z],D-y,R-S)}else{for(var I={},U=$;U<B;U++){var L=v._index[U];I[L]=v._values[U]}for(var q=y;q<=p;q++){var Z=q in I?I[q]:0;T(Z,q-y,R-S)}}}return A.push(x.length),new i({values:x,index:M,ptr:A,size:[p-y+1,b-S+1]})}i.prototype.forEach=function(v,y){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var p=this,S=this._size[0],b=this._size[1],g=0;g<b;g++){var w=this._ptr[g],x=this._ptr[g+1];if(y)for(var M=w;M<x;M++){var A=this._index[M];v(this._values[M],[A,g],p)}else{for(var N={},C=w;C<x;C++){var T=this._index[C];N[T]=this._values[C]}for(var R=0;R<S;R++){var $=R in N?N[R]:0;v($,[R,g],p)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var v=this._size[1],y=0;y<v;y++)for(var p=this._ptr[y],S=this._ptr[y+1],b=p;b<S;b++){var g=this._index[b];yield{value:this._values[b],index:[g,y]}}},i.prototype.toArray=function(){return m(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return m(this._values,this._index,this._ptr,this._size,!1)};function m(v,y,p,S,b){var g=S[0],w=S[1],x=[],M,A;for(M=0;M<g;M++)for(x[M]=[],A=0;A<w;A++)x[M][A]=0;for(A=0;A<w;A++)for(var N=p[A],C=p[A+1],T=N;T<C;T++)M=y[T],x[M][A]=v?b?Yt(v[T]):v[T]:1;return x}return i.prototype.format=function(v){for(var y=this._size[0],p=this._size[1],S=this.density(),b="Sparse Matrix ["+un(y,v)+" x "+un(p,v)+"] density: "+un(S,v)+`
`,g=0;g<p;g++)for(var w=this._ptr[g],x=this._ptr[g+1],M=w;M<x;M++){var A=this._index[M];b+=`
    (`+un(A,v)+", "+un(g,v)+") ==> "+(this._values?un(this._values[M],v):"X")}return b},i.prototype.toString=function(){return un(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(v){if(v){if(Jt(v)&&(v=v.toNumber()),!tn(v)||!kt(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var y=v>0?v:0,p=v<0?-v:0,S=this._size[0],b=this._size[1],g=Math.min(S-p,b-y),w=[],x=[],M=[];M[0]=0;for(var A=y;A<b&&w.length<g;A++)for(var N=this._ptr[A],C=this._ptr[A+1],T=N;T<C;T++){var R=this._index[T];if(R===A-y+p){w.push(this._values[T]),x[w.length-1]=R-p;break}}return M.push(w.length),new i({values:w,index:x,ptr:M,size:[g,1]})},i.fromJSON=function(v){return new i(v)},i.diagonal=function(v,y,p,S,b){if(!_n(v))throw new TypeError("Array expected, size parameter");if(v.length!==2)throw new Error("Only two dimensions matrix are supported");if(v=v.map(function(L){if(Jt(L)&&(L=L.toNumber()),!tn(L)||!kt(L)||L<1)throw new Error("Size values must be positive integers");return L}),p){if(Jt(p)&&(p=p.toNumber()),!tn(p)||!kt(p))throw new TypeError("The parameter k must be an integer number")}else p=0;var g=t,w=0;Pi(b)&&(g=e.find(t,[b,b])||t,w=e.convert(0,b));var x=p>0?p:0,M=p<0?-p:0,A=v[0],N=v[1],C=Math.min(A-M,N-x),T;if(_n(y)){if(y.length!==C)throw new Error("Invalid value array length");T=function(q){return y[q]}}else if($t(y)){var R=y.size();if(R.length!==1||R[0]!==C)throw new Error("Invalid matrix length");T=function(q){return y.get([q])}}else T=function(){return y};for(var $=[],B=[],z=[],D=0;D<N;D++){z.push($.length);var I=D-x;if(I>=0&&I<C){var U=T(I);g(U,w)||(B.push(I+M),$.push(U))}}return z.push($.length),new i({values:$,index:B,ptr:z,size:[A,N]})},i.prototype.swapRows=function(v,y){if(!tn(v)||!kt(v)||!tn(y)||!kt(y))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Un(v,this._size[0]),Un(y,this._size[0]),i._swapRows(v,y,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(v,y,p,S,b){for(var g=S[v],w=S[v+1],x=g;x<w;x++)b(p[x],y[x])},i._swapRows=function(v,y,p,S,b,g){for(var w=0;w<p;w++){var x=g[w],M=g[w+1],A=u(v,x,M,b),N=u(y,x,M,b);if(A<M&&N<M&&b[A]===v&&b[N]===y){if(S){var C=S[A];S[A]=S[N],S[N]=C}continue}if(A<M&&b[A]===v&&(N>=M||b[N]!==y)){var T=S?S[A]:void 0;b.splice(N,0,y),S&&S.splice(N,0,T),b.splice(N<=A?A+1:A,1),S&&S.splice(N<=A?A+1:A,1);continue}if(N<M&&b[N]===y&&(A>=M||b[A]!==v)){var R=S?S[N]:void 0;b.splice(A,0,v),S&&S.splice(A,0,R),b.splice(A<=N?N+1:N,1),S&&S.splice(A<=N?N+1:N,1)}}},i},{isClass:!0}),cue="number",fue=["typed"];function due(n){var e=n.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var t={"0b":2,"0o":8,"0x":16}[e[1]],r=e[2],i=e[3];return{input:n,radix:t,integerPart:r,fractionalPart:i}}else return null}function hue(n){for(var e=parseInt(n.integerPart,n.radix),t=0,r=0;r<n.fractionalPart.length;r++){var i=parseInt(n.fractionalPart[r],n.radix);t+=i/Math.pow(n.radix,r+1)}var s=e+t;if(isNaN(s))throw new SyntaxError('String "'+n.input+'" is not a valid number');return s}var pue=ue(cue,fue,n=>{var{typed:e}=n,t=e("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var s=due(i);if(s)return hue(s);var o=0,a=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);a&&(o=Number(a[2]),i=a[1]);var l=Number(i);if(isNaN(l))throw new SyntaxError('String "'+i+'" is not a valid number');if(a){if(l>2**o-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));l>=2**(o-1)&&(l=l-2**o)}return l},BigNumber:function(i){return i.toNumber()},Fraction:function(i){return i.valueOf()},Unit:e.referToSelf(r=>i=>{var s=i.clone();return s.value=r(i.value),s}),null:function(i){return 0},"Unit, string | Unit":function(i,s){return i.toNumber(s)},"Array | Matrix":e.referToSelf(r=>i=>cn(i,r))});return t.fromJSON=function(r){return parseFloat(r.value)},t}),i4="string",mue=["typed"],gue=ue(i4,mue,n=>{var{typed:e}=n;return e(i4,{"":function(){return""},number:pd,null:function(r){return"null"},boolean:function(r){return r+""},string:function(r){return r},"Array | Matrix":e.referToSelf(t=>r=>cn(r,t)),any:function(r){return String(r)}})}),s4="boolean",vue=["typed"],yue=ue(s4,vue,n=>{var{typed:e}=n;return e(s4,{"":function(){return!1},boolean:function(r){return r},number:function(r){return!!r},null:function(r){return!1},BigNumber:function(r){return!r.isZero()},string:function(r){var i=r.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;var s=Number(r);if(r!==""&&!isNaN(s))return!!s;throw new Error('Cannot convert "'+r+'" to a boolean')},"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),xue="bignumber",bue=["typed","BigNumber"],wue=ue(xue,bue,n=>{var{typed:e,BigNumber:t}=n;return e("bignumber",{"":function(){return new t(0)},number:function(i){return new t(i+"")},string:function(i){var s=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(s){var o=s[2],a=t(s[1]),l=new t(2).pow(Number(o));if(a.gt(l.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var u=new t(2).pow(Number(o)-1);return a.gte(u)?a.sub(l):a}return new t(i)},BigNumber:function(i){return i},Unit:e.referToSelf(r=>i=>{var s=i.clone();return s.value=r(i.value),s}),Fraction:function(i){return new t(i.n).div(i.d).times(i.s)},null:function(i){return new t(0)},"Array | Matrix":e.referToSelf(r=>i=>cn(i,r))})}),Sue="complex",_ue=["typed","Complex"],Eue=ue(Sue,_ue,n=>{var{typed:e,Complex:t}=n;return e("complex",{"":function(){return t.ZERO},number:function(i){return new t(i,0)},"number, number":function(i,s){return new t(i,s)},"BigNumber, BigNumber":function(i,s){return new t(i.toNumber(),s.toNumber())},Fraction:function(i){return new t(i.valueOf(),0)},Complex:function(i){return i.clone()},string:function(i){return t(i)},null:function(i){return t(0)},Object:function(i){if("re"in i&&"im"in i)return new t(i.re,i.im);if("r"in i&&"phi"in i||"abs"in i&&"arg"in i)return new t(i);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":e.referToSelf(r=>i=>cn(i,r))})}),Mue="fraction",Cue=["typed","Fraction"],Aue=ue(Mue,Cue,n=>{var{typed:e,Fraction:t}=n;return e("fraction",{number:function(i){if(!isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new t(i)},string:function(i){return new t(i)},"number, number":function(i,s){return new t(i,s)},null:function(i){return new t(0)},BigNumber:function(i){return new t(i.toString())},Fraction:function(i){return i},Unit:e.referToSelf(r=>i=>{var s=i.clone();return s.value=r(i.value),s}),Object:function(i){return new t(i)},"Array | Matrix":e.referToSelf(r=>i=>cn(i,r))})}),o4="matrix",Tue=["typed","Matrix","DenseMatrix","SparseMatrix"],Due=ue(o4,Tue,n=>{var{typed:e,Matrix:t,DenseMatrix:r,SparseMatrix:i}=n;return e(o4,{"":function(){return s([])},string:function(a){return s([],a)},"string, string":function(a,l){return s([],a,l)},Array:function(a){return s(a)},Matrix:function(a){return s(a,a.storage())},"Array | Matrix, string":s,"Array | Matrix, string, string":s});function s(o,a,l){if(a==="dense"||a==="default"||a===void 0)return new r(o,l);if(a==="sparse")return new i(o,l);throw new TypeError("Unknown matrix type "+JSON.stringify(a)+".")}}),a4="matrixFromFunction",Nue=["typed","matrix","isZero"],Pue=ue(a4,Nue,n=>{var{typed:e,matrix:t,isZero:r}=n;return e(a4,{"Array | Matrix, function, string, string":function(o,a,l,u){return i(o,a,l,u)},"Array | Matrix, function, string":function(o,a,l){return i(o,a,l)},"Matrix, function":function(o,a){return i(o,a,"dense")},"Array, function":function(o,a){return i(o,a,"dense").toArray()},"Array | Matrix, string, function":function(o,a,l){return i(o,l,a)},"Array | Matrix, string, string, function":function(o,a,l,u){return i(o,u,a,l)}});function i(s,o,a,l){var u;return l!==void 0?u=t(a,l):u=t(a),u.resize(s),u.forEach(function(c,f){var d=o(f);r(d)||u.set(f,d)}),u}}),l4="matrixFromRows",Rue=["typed","matrix","flatten","size"],Oue=ue(l4,Rue,n=>{var{typed:e,matrix:t,flatten:r,size:i}=n;return e(l4,{"...Array":function(l){return s(l)},"...Matrix":function(l){return t(s(l.map(u=>u.toArray())))}});function s(a){if(a.length===0)throw new TypeError("At least one row is needed to construct a matrix.");var l=o(a[0]),u=[];for(var c of a){var f=o(c);if(f!==l)throw new TypeError("The vectors had different length: "+(l|0)+"  "+(f|0));u.push(r(c))}return u}function o(a){var l=i(a);if(l.length===1)return l[0];if(l.length===2){if(l[0]===1)return l[1];if(l[1]===1)return l[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),u4="matrixFromColumns",kue=["typed","matrix","flatten","size"],Iue=ue(u4,kue,n=>{var{typed:e,matrix:t,flatten:r,size:i}=n;return e(u4,{"...Array":function(l){return s(l)},"...Matrix":function(l){return t(s(l.map(u=>u.toArray())))}});function s(a){if(a.length===0)throw new TypeError("At least one column is needed to construct a matrix.");for(var l=o(a[0]),u=[],c=0;c<l;c++)u[c]=[];for(var f of a){var d=o(f);if(d!==l)throw new TypeError("The vectors had different length: "+(l|0)+"  "+(d|0));for(var h=r(f),m=0;m<l;m++)u[m].push(h[m])}return u}function o(a){var l=i(a);if(l.length===1)return l[0];if(l.length===2){if(l[0]===1)return l[1];if(l[1]===1)return l[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),c4="splitUnit",Lue=["typed"],Fue=ue(c4,Lue,n=>{var{typed:e}=n;return e(c4,{"Unit, Array":function(r,i){return r.splitUnit(i)}})}),f4="unaryMinus",Bue=["typed"],zue=ue(f4,Bue,n=>{var{typed:e}=n;return e(f4,{number:Xj,"Complex | BigNumber | Fraction":t=>t.neg(),Unit:e.referToSelf(t=>r=>{var i=r.clone();return i.value=e.find(t,i.valueType())(r.value),i}),"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),d4="unaryPlus",Uue=["typed","config","BigNumber"],$ue=ue(d4,Uue,n=>{var{typed:e,config:t,BigNumber:r}=n;return e(d4,{number:Yj,Complex:function(s){return s},BigNumber:function(s){return s},Fraction:function(s){return s},Unit:function(s){return s.clone()},"Array | Matrix":e.referToSelf(i=>s=>cn(s,i)),"boolean | string":function(s){return t.number==="BigNumber"?new r(+s):+s}})}),h4="abs",Vue=["typed"],Hue=ue(h4,Vue,n=>{var{typed:e}=n;return e(h4,{number:Wj,"Complex | BigNumber | Fraction | Unit":t=>t.abs(),"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),p4="apply",Wue=["typed","isInteger"],uR=ue(p4,Wue,n=>{var{typed:e,isInteger:t}=n;return e(p4,{"Array | Matrix, number | BigNumber, function":function(i,s,o){if(!t(s))throw new TypeError("Integer number expected for dimension");var a=Array.isArray(i)?nn(i):i.size();if(s<0||s>=a.length)throw new da(s,a.length);return $t(i)?i.create($S(i.valueOf(),s,o)):$S(i,s,o)}})});function $S(n,e,t){var r,i,s;if(e<=0)if(Array.isArray(n[0])){for(s=jue(n),i=[],r=0;r<s.length;r++)i[r]=$S(s[r],e-1,t);return i}else return t(n);else{for(i=[],r=0;r<n.length;r++)i[r]=$S(n[r],e-1,t);return i}}function jue(n){var e=n.length,t=n[0].length,r,i,s=[];for(i=0;i<t;i++){var o=[];for(r=0;r<e;r++)o.push(n[r][i]);s.push(o)}return s}var m4="addScalar",Gue=["typed"],que=ue(m4,Gue,n=>{var{typed:e}=n;return e(m4,{"number, number":jj,"Complex, Complex":function(r,i){return r.add(i)},"BigNumber, BigNumber":function(r,i){return r.plus(i)},"Fraction, Fraction":function(r,i){return r.add(i)},"Unit, Unit":e.referToSelf(t=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var s=r.clone();return s.value=e.find(t,[s.valueType(),i.valueType()])(s.value,i.value),s.fixPrefix=!1,s})})}),g4="subtractScalar",Xue=["typed"],Yue=ue(g4,Xue,n=>{var{typed:e}=n;return e(g4,{"number, number":Gj,"Complex, Complex":function(r,i){return r.sub(i)},"BigNumber, BigNumber":function(r,i){return r.minus(i)},"Fraction, Fraction":function(r,i){return r.sub(i)},"Unit, Unit":e.referToSelf(t=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var s=r.clone();return s.value=e.find(t,[s.valueType(),i.valueType()])(s.value,i.value),s.fixPrefix=!1,s})})}),v4="cbrt",Kue=["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],Zue=ue(v4,Kue,n=>{var{config:e,typed:t,isNegative:r,unaryMinus:i,matrix:s,Complex:o,BigNumber:a,Fraction:l}=n;return t(v4,{number:fv,Complex:u,"Complex, boolean":u,BigNumber:function(d){return d.cbrt()},Unit:c});function u(f,d){var h=f.arg()/3,m=f.abs(),v=new o(fv(m),0).mul(new o(0,h).exp());if(d){var y=[v,new o(fv(m),0).mul(new o(0,h+Math.PI*2/3).exp()),new o(fv(m),0).mul(new o(0,h-Math.PI*2/3).exp())];return e.matrix==="Array"?y:s(y)}else return v}function c(f){if(f.value&&Pa(f.value)){var d=f.clone();return d.value=1,d=d.pow(1/3),d.value=u(f.value),d}else{var h=r(f.value);h&&(f.value=i(f.value));var m;Jt(f.value)?m=new a(1).div(3):qd(f.value)?m=new l(1,3):m=1/3;var v=f.pow(m);return h&&(v.value=i(v.value)),v}}}),Jue="matAlgo11xS0s",Que=["typed","equalScalar"],Ui=ue(Jue,Que,n=>{var{typed:e,equalScalar:t}=n;return function(i,s,o,a){var l=i._values,u=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],m=f[1],v,y=t,p=0,S=o;typeof d=="string"&&(v=d,y=e.find(t,[v,v]),p=e.convert(0,v),s=e.convert(s,v),S=e.find(o,[v,v]));for(var b=[],g=[],w=[],x=0;x<m;x++){w[x]=g.length;for(var M=c[x],A=c[x+1],N=M;N<A;N++){var C=u[N],T=a?S(s,l[N]):S(l[N],s);y(T,p)||(g.push(C),b.push(T))}}return w[m]=g.length,i.createSparseMatrix({values:b,index:g,ptr:w,size:[h,m],datatype:v})}}),ece="matAlgo12xSfs",tce=["typed","DenseMatrix"],ci=ue(ece,tce,n=>{var{typed:e,DenseMatrix:t}=n;return function(i,s,o,a){var l=i._values,u=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],m=f[1],v,y=o;typeof d=="string"&&(v=d,s=e.convert(s,v),y=e.find(o,[v,v]));for(var p=[],S=[],b=[],g=0;g<m;g++){for(var w=g+1,x=c[g],M=c[g+1],A=x;A<M;A++){var N=u[A];S[N]=l[A],b[N]=w}for(var C=0;C<h;C++)g===0&&(p[C]=[]),b[C]===w?p[C][g]=a?y(s,S[C]):y(S[C],s):p[C][g]=a?y(s,0):y(0,s)}return new t({data:p,size:[h,m],datatype:v})}}),nce="matAlgo14xDs",rce=["typed"],Ua=ue(nce,rce,n=>{var{typed:e}=n;return function(i,s,o,a){var l=i._data,u=i._size,c=i._datatype,f,d=o;typeof c=="string"&&(f=c,s=e.convert(s,f),d=e.find(o,[f,f]));var h=u.length>0?t(d,0,u,u[0],l,s,a):[];return i.createDenseMatrix({data:h,size:Yt(u),datatype:f})};function t(r,i,s,o,a,l,u){var c=[];if(i===s.length-1)for(var f=0;f<o;f++)c[f]=u?r(l,a[f]):r(a[f],l);else for(var d=0;d<o;d++)c[d]=t(r,i+1,s,s[i+1],a[d],l,u);return c}}),M3="ceil",ice=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],sce=ue(M3,["typed","config","round"],n=>{var{typed:e,config:t,round:r}=n;return e(M3,{number:function(s){return Ns(s,r(s),t.epsilon)?r(s):Math.ceil(s)},"number, number":function(s,o){if(Ns(s,r(s,o),t.epsilon))return r(s,o);var[a,l]="".concat(s,"e").split("e"),u=Math.ceil(Number("".concat(a,"e").concat(Number(l)+o)));return[a,l]="".concat(u,"e").split("e"),Number("".concat(a,"e").concat(Number(l)-o))}})}),oce=ue(M3,ice,n=>{var{typed:e,config:t,round:r,matrix:i,equalScalar:s,zeros:o,DenseMatrix:a}=n,l=Ui({typed:e,equalScalar:s}),u=ci({typed:e,DenseMatrix:a}),c=Ua({typed:e}),f=sce({typed:e,config:t,round:r});return e("ceil",{number:f.signatures.number,"number,number":f.signatures["number,number"],Complex:function(h){return h.ceil()},"Complex, number":function(h,m){return h.ceil(m)},"Complex, BigNumber":function(h,m){return h.ceil(m.toNumber())},BigNumber:function(h){return aa(h,r(h),t.epsilon)?r(h):h.ceil()},"BigNumber, BigNumber":function(h,m){return aa(h,r(h,m),t.epsilon)?r(h,m):h.toDecimalPlaces(m.toNumber(),Kc.ROUND_CEIL)},Fraction:function(h){return h.ceil()},"Fraction, number":function(h,m){return h.ceil(m)},"Fraction, BigNumber":function(h,m){return h.ceil(m.toNumber())},"Array | Matrix":e.referToSelf(d=>h=>cn(h,d)),"Array, number | BigNumber":e.referToSelf(d=>(h,m)=>cn(h,v=>d(v,m))),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>l(h,m,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>c(h,m,d,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(h,m)=>c(i(m),h,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(h,m)=>s(h,0)?o(m.size(),m.storage()):m.storage()==="dense"?c(m,h,d,!0):u(m,h,d,!0))})}),y4="cube",ace=["typed"],lce=ue(y4,ace,n=>{var{typed:e}=n;return e(y4,{number:Kj,Complex:function(r){return r.mul(r).mul(r)},BigNumber:function(r){return r.times(r).times(r)},Fraction:function(r){return r.pow(3)},Unit:function(r){return r.pow(3)}})}),x4="exp",uce=["typed"],cce=ue(x4,uce,n=>{var{typed:e}=n;return e(x4,{number:Zj,Complex:function(r){return r.exp()},BigNumber:function(r){return r.exp()}})}),b4="expm1",fce=["typed","Complex"],dce=ue(b4,fce,n=>{var{typed:e,Complex:t}=n;return e(b4,{number:Jj,Complex:function(i){var s=Math.exp(i.re);return new t(s*Math.cos(i.im)-1,s*Math.sin(i.im))},BigNumber:function(i){return i.exp().minus(1)}})}),C3="fix",hce=["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],pce=ue(C3,["typed","ceil","floor"],n=>{var{typed:e,ceil:t,floor:r}=n;return e(C3,{number:function(s){return s>0?r(s):t(s)},"number, number":function(s,o){return s>0?r(s,o):t(s,o)}})}),mce=ue(C3,hce,n=>{var{typed:e,Complex:t,matrix:r,ceil:i,floor:s,equalScalar:o,zeros:a,DenseMatrix:l}=n,u=ci({typed:e,DenseMatrix:l}),c=Ua({typed:e}),f=pce({typed:e,ceil:i,floor:s});return e("fix",{number:f.signatures.number,"number, number | BigNumber":f.signatures["number,number"],Complex:function(h){return new t(h.re>0?Math.floor(h.re):Math.ceil(h.re),h.im>0?Math.floor(h.im):Math.ceil(h.im))},"Complex, number":function(h,m){return new t(h.re>0?s(h.re,m):i(h.re,m),h.im>0?s(h.im,m):i(h.im,m))},"Complex, BigNumber":function(h,m){var v=m.toNumber();return new t(h.re>0?s(h.re,v):i(h.re,v),h.im>0?s(h.im,v):i(h.im,v))},BigNumber:function(h){return h.isNegative()?i(h):s(h)},"BigNumber, number | BigNumber":function(h,m){return h.isNegative()?i(h,m):s(h,m)},Fraction:function(h){return h.s<0?h.ceil():h.floor()},"Fraction, number | BigNumber":function(h,m){return h.s<0?i(h,m):s(h,m)},"Array | Matrix":e.referToSelf(d=>h=>cn(h,d)),"Array | Matrix, number | BigNumber":e.referToSelf(d=>(h,m)=>cn(h,v=>d(v,m))),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(h,m)=>c(r(m),h,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(h,m)=>o(h,0)?a(m.size(),m.storage()):m.storage()==="dense"?c(m,h,d,!0):u(m,h,d,!0))})}),A3="floor",gce=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],vce=ue(A3,["typed","config","round"],n=>{var{typed:e,config:t,round:r}=n;return e(A3,{number:function(s){return Ns(s,r(s),t.epsilon)?r(s):Math.floor(s)},"number, number":function(s,o){if(Ns(s,r(s,o),t.epsilon))return r(s,o);var[a,l]="".concat(s,"e").split("e"),u=Math.floor(Number("".concat(a,"e").concat(Number(l)+o)));return[a,l]="".concat(u,"e").split("e"),Number("".concat(a,"e").concat(Number(l)-o))}})}),zG=ue(A3,gce,n=>{var{typed:e,config:t,round:r,matrix:i,equalScalar:s,zeros:o,DenseMatrix:a}=n,l=Ui({typed:e,equalScalar:s}),u=ci({typed:e,DenseMatrix:a}),c=Ua({typed:e}),f=vce({typed:e,config:t,round:r});return e("floor",{number:f.signatures.number,"number,number":f.signatures["number,number"],Complex:function(h){return h.floor()},"Complex, number":function(h,m){return h.floor(m)},"Complex, BigNumber":function(h,m){return h.floor(m.toNumber())},BigNumber:function(h){return aa(h,r(h),t.epsilon)?r(h):h.floor()},"BigNumber, BigNumber":function(h,m){return aa(h,r(h,m),t.epsilon)?r(h,m):h.toDecimalPlaces(m.toNumber(),Kc.ROUND_FLOOR)},Fraction:function(h){return h.floor()},"Fraction, number":function(h,m){return h.floor(m)},"Fraction, BigNumber":function(h,m){return h.floor(m.toNumber())},"Array | Matrix":e.referToSelf(d=>h=>cn(h,d)),"Array, number | BigNumber":e.referToSelf(d=>(h,m)=>cn(h,v=>d(v,m))),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>l(h,m,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>c(h,m,d,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(h,m)=>c(i(m),h,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(h,m)=>s(h,0)?o(m.size(),m.storage()):m.storage()==="dense"?c(m,h,d,!0):u(m,h,d,!0))})}),yce="matAlgo02xDS0",xce=["typed","equalScalar"],$a=ue(yce,xce,n=>{var{typed:e,equalScalar:t}=n;return function(i,s,o,a){var l=i._data,u=i._size,c=i._datatype||i.getDataType(),f=s._values,d=s._index,h=s._ptr,m=s._size,v=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(u.length!==m.length)throw new an(u.length,m.length);if(u[0]!==m[0]||u[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+m+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var y=u[0],p=u[1],S,b=t,g=0,w=o;typeof c=="string"&&c===v&&c!=="mixed"&&(S=c,b=e.find(t,[S,S]),g=e.convert(0,S),w=e.find(o,[S,S]));for(var x=[],M=[],A=[],N=0;N<p;N++){A[N]=M.length;for(var C=h[N],T=h[N+1],R=C;R<T;R++){var $=d[R],B=a?w(f[R],l[$][N]):w(l[$][N],f[R]);b(B,g)||(M.push($),x.push(B))}}return A[p]=M.length,s.createSparseMatrix({values:x,index:M,ptr:A,size:[y,p],datatype:c===i._datatype&&v===s._datatype?S:void 0})}}),bce="matAlgo03xDSf",wce=["typed"],ks=ue(bce,wce,n=>{var{typed:e}=n;return function(r,i,s,o){var a=r._data,l=r._size,u=r._datatype||r.getDataType(),c=i._values,f=i._index,d=i._ptr,h=i._size,m=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(l.length!==h.length)throw new an(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=l[0],y=l[1],p,S=0,b=s;typeof u=="string"&&u===m&&u!=="mixed"&&(p=u,S=e.convert(0,p),b=e.find(s,[p,p]));for(var g=[],w=0;w<v;w++)g[w]=[];for(var x=[],M=[],A=0;A<y;A++){for(var N=A+1,C=d[A],T=d[A+1],R=C;R<T;R++){var $=f[R];x[$]=o?b(c[R],a[$][A]):b(a[$][A],c[R]),M[$]=N}for(var B=0;B<v;B++)M[B]===N?g[B][A]=x[B]:g[B][A]=o?b(S,a[B][A]):b(a[B][A],S)}return r.createDenseMatrix({data:g,size:[v,y],datatype:u===r._datatype&&m===i._datatype?p:void 0})}}),Sce="matAlgo05xSfSf",_ce=["typed","equalScalar"],bE=ue(Sce,_ce,n=>{var{typed:e,equalScalar:t}=n;return function(i,s,o){var a=i._values,l=i._index,u=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=s._values,h=s._index,m=s._ptr,v=s._size,y=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==v.length)throw new an(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var p=c[0],S=c[1],b,g=t,w=0,x=o;typeof f=="string"&&f===y&&f!=="mixed"&&(b=f,g=e.find(t,[b,b]),w=e.convert(0,b),x=e.find(o,[b,b]));var M=a&&d?[]:void 0,A=[],N=[],C=M?[]:void 0,T=M?[]:void 0,R=[],$=[],B,z,D,I;for(z=0;z<S;z++){N[z]=A.length;var U=z+1;for(D=u[z],I=u[z+1];D<I;D++)B=l[D],A.push(B),R[B]=U,C&&(C[B]=a[D]);for(D=m[z],I=m[z+1];D<I;D++)B=h[D],R[B]!==U&&A.push(B),$[B]=U,T&&(T[B]=d[D]);if(M)for(D=N[z];D<A.length;){B=A[D];var L=R[B],q=$[B];if(L===U||q===U){var Z=L===U?C[B]:w,J=q===U?T[B]:w,Y=x(Z,J);g(Y,w)?A.splice(D,1):(M.push(Y),D++)}}}return N[S]=A.length,i.createSparseMatrix({values:M,index:A,ptr:N,size:[p,S],datatype:f===i._datatype&&y===s._datatype?b:void 0})}}),Ece="matAlgo13xDD",Mce=["typed"],Cce=ue(Ece,Mce,n=>{var{typed:e}=n;return function(i,s,o){var a=i._data,l=i._size,u=i._datatype,c=s._data,f=s._size,d=s._datatype,h=[];if(l.length!==f.length)throw new an(l.length,f.length);for(var m=0;m<l.length;m++){if(l[m]!==f[m])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");h[m]=l[m]}var v,y=o;typeof u=="string"&&u===d&&(v=u,y=e.find(o,[v,v]));var p=h.length>0?t(y,0,h,h[0],a,c):[];return i.createDenseMatrix({data:p,size:h,datatype:v})};function t(r,i,s,o,a,l){var u=[];if(i===s.length-1)for(var c=0;c<o;c++)u[c]=r(a[c],l[c]);else for(var f=0;f<o;f++)u[f]=t(r,i+1,s,s[i+1],a[f],l[f]);return u}}),Ace="broadcast",Tce=["concat"],Dce=ue(Ace,Tce,n=>{var{concat:e}=n;return function(i,s){var o=Math.max(i._size.length,s._size.length);if(i._size.length===s._size.length&&i._size.every((m,v)=>m===s._size[v]))return[i,s];for(var a=t(i._size,o,0),l=t(s._size,o,0),u=[],c=0;c<o;c++)u[c]=Math.max(a[c],l[c]);LS(a,u),LS(l,u);var f=i.clone(),d=s.clone();f._size.length<o?f.reshape(t(f._size,o,1)):d._size.length<o&&d.reshape(t(d._size,o,1));for(var h=0;h<o;h++)f._size[h]<u[h]&&(f=r(f,u[h],h)),d._size[h]<u[h]&&(d=r(d,u[h],h));return[f,d]};function t(i,s,o){return[...Array(s-i.length).fill(o),...i]}function r(i,s,o){return e(...Array(s).fill(i),o)}}),Nce="matrixAlgorithmSuite",Pce=["typed","matrix","concat"],Yn=ue(Nce,Pce,n=>{var{typed:e,matrix:t,concat:r}=n,i=Cce({typed:e}),s=Ua({typed:e}),o=Dce({concat:r});return function(l){var u=l.elop,c=l.SD||l.DS,f;u?(f={"DenseMatrix, DenseMatrix":(v,y)=>i(...o(v,y),u),"Array, Array":(v,y)=>i(...o(t(v),t(y)),u).valueOf(),"Array, DenseMatrix":(v,y)=>i(...o(t(v),y),u),"DenseMatrix, Array":(v,y)=>i(...o(v,t(y)),u)},l.SS&&(f["SparseMatrix, SparseMatrix"]=(v,y)=>l.SS(...o(v,y),u,!1)),l.DS&&(f["DenseMatrix, SparseMatrix"]=(v,y)=>l.DS(...o(v,y),u,!1),f["Array, SparseMatrix"]=(v,y)=>l.DS(...o(t(v),y),u,!1)),c&&(f["SparseMatrix, DenseMatrix"]=(v,y)=>c(...o(y,v),u,!0),f["SparseMatrix, Array"]=(v,y)=>c(...o(t(y),v),u,!0))):(f={"DenseMatrix, DenseMatrix":e.referToSelf(v=>(y,p)=>i(...o(y,p),v)),"Array, Array":e.referToSelf(v=>(y,p)=>i(...o(t(y),t(p)),v).valueOf()),"Array, DenseMatrix":e.referToSelf(v=>(y,p)=>i(...o(t(y),p),v)),"DenseMatrix, Array":e.referToSelf(v=>(y,p)=>i(...o(y,t(p)),v))},l.SS&&(f["SparseMatrix, SparseMatrix"]=e.referToSelf(v=>(y,p)=>l.SS(...o(y,p),v,!1))),l.DS&&(f["DenseMatrix, SparseMatrix"]=e.referToSelf(v=>(y,p)=>l.DS(...o(y,p),v,!1)),f["Array, SparseMatrix"]=e.referToSelf(v=>(y,p)=>l.DS(...o(t(y),p),v,!1))),c&&(f["SparseMatrix, DenseMatrix"]=e.referToSelf(v=>(y,p)=>c(...o(p,y),v,!0)),f["SparseMatrix, Array"]=e.referToSelf(v=>(y,p)=>c(...o(t(p),y),v,!0))));var d=l.scalar||"any",h=l.Ds||l.Ss;h&&(u?(f["DenseMatrix,"+d]=(v,y)=>s(v,y,u,!1),f[d+", DenseMatrix"]=(v,y)=>s(y,v,u,!0),f["Array,"+d]=(v,y)=>s(t(v),y,u,!1).valueOf(),f[d+", Array"]=(v,y)=>s(t(y),v,u,!0).valueOf()):(f["DenseMatrix,"+d]=e.referToSelf(v=>(y,p)=>s(y,p,v,!1)),f[d+", DenseMatrix"]=e.referToSelf(v=>(y,p)=>s(p,y,v,!0)),f["Array,"+d]=e.referToSelf(v=>(y,p)=>s(t(y),p,v,!1).valueOf()),f[d+", Array"]=e.referToSelf(v=>(y,p)=>s(t(p),y,v,!0).valueOf())));var m=l.sS!==void 0?l.sS:l.Ss;return u?(l.Ss&&(f["SparseMatrix,"+d]=(v,y)=>l.Ss(v,y,u,!1)),m&&(f[d+", SparseMatrix"]=(v,y)=>m(y,v,u,!0))):(l.Ss&&(f["SparseMatrix,"+d]=e.referToSelf(v=>(y,p)=>l.Ss(y,p,v,!1))),m&&(f[d+", SparseMatrix"]=e.referToSelf(v=>(y,p)=>m(p,y,v,!0)))),u&&u.signatures&&oj(f,u.signatures),f}}),w4="mod",Rce=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix","concat"],UG=ue(w4,Rce,n=>{var{typed:e,config:t,round:r,matrix:i,equalScalar:s,zeros:o,DenseMatrix:a,concat:l}=n,u=zG({typed:e,config:t,round:r,matrix:i,equalScalar:s,zeros:o,DenseMatrix:a}),c=$a({typed:e,equalScalar:s}),f=ks({typed:e}),d=bE({typed:e,equalScalar:s}),h=Ui({typed:e,equalScalar:s}),m=ci({typed:e,DenseMatrix:a}),v=Yn({typed:e,matrix:i,concat:l});return e(w4,{"number, number":y,"BigNumber, BigNumber":function(S,b){return b.isZero()?S:S.sub(b.mul(u(S.div(b))))},"Fraction, Fraction":function(S,b){return b.equals(0)?S:S.sub(b.mul(u(S.div(b))))}},v({SS:d,DS:f,SD:c,Ss:h,sS:m}));function y(p,S){return S===0?p:p-S*u(p/S)}}),Oce="matAlgo01xDSid",kce=["typed"],pf=ue(Oce,kce,n=>{var{typed:e}=n;return function(r,i,s,o){var a=r._data,l=r._size,u=r._datatype||r.getDataType(),c=i._values,f=i._index,d=i._ptr,h=i._size,m=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(l.length!==h.length)throw new an(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=l[0],y=l[1],p=typeof u=="string"&&u!=="mixed"&&u===m?u:void 0,S=p?e.find(s,[p,p]):s,b,g,w=[];for(b=0;b<v;b++)w[b]=[];var x=[],M=[];for(g=0;g<y;g++){for(var A=g+1,N=d[g],C=d[g+1],T=N;T<C;T++)b=f[T],x[b]=o?S(c[T],a[b][g]):S(a[b][g],c[T]),M[b]=A;for(b=0;b<v;b++)M[b]===A?w[b][g]=x[b]:w[b][g]=a[b][g]}return r.createDenseMatrix({data:w,size:[v,y],datatype:u===r._datatype&&m===i._datatype?p:void 0})}}),Ice="matAlgo04xSidSid",Lce=["typed","equalScalar"],cR=ue(Ice,Lce,n=>{var{typed:e,equalScalar:t}=n;return function(i,s,o){var a=i._values,l=i._index,u=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=s._values,h=s._index,m=s._ptr,v=s._size,y=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==v.length)throw new an(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var p=c[0],S=c[1],b,g=t,w=0,x=o;typeof f=="string"&&f===y&&f!=="mixed"&&(b=f,g=e.find(t,[b,b]),w=e.convert(0,b),x=e.find(o,[b,b]));var M=a&&d?[]:void 0,A=[],N=[],C=a&&d?[]:void 0,T=a&&d?[]:void 0,R=[],$=[],B,z,D,I,U;for(z=0;z<S;z++){N[z]=A.length;var L=z+1;for(I=u[z],U=u[z+1],D=I;D<U;D++)B=l[D],A.push(B),R[B]=L,C&&(C[B]=a[D]);for(I=m[z],U=m[z+1],D=I;D<U;D++)if(B=h[D],R[B]===L){if(C){var q=x(C[B],d[D]);g(q,w)?R[B]=null:C[B]=q}}else A.push(B),$[B]=L,T&&(T[B]=d[D]);if(C&&T)for(D=N[z];D<A.length;)B=A[D],R[B]===L?(M[D]=C[B],D++):$[B]===L?(M[D]=T[B],D++):A.splice(D,1)}return N[S]=A.length,i.createSparseMatrix({values:M,index:A,ptr:N,size:[p,S],datatype:f===i._datatype&&y===s._datatype?b:void 0})}}),Fce="matAlgo10xSids",Bce=["typed","DenseMatrix"],Yd=ue(Fce,Bce,n=>{var{typed:e,DenseMatrix:t}=n;return function(i,s,o,a){var l=i._values,u=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],m=f[1],v,y=o;typeof d=="string"&&(v=d,s=e.convert(s,v),y=e.find(o,[v,v]));for(var p=[],S=[],b=[],g=0;g<m;g++){for(var w=g+1,x=c[g],M=c[g+1],A=x;A<M;A++){var N=u[A];S[N]=l[A],b[N]=w}for(var C=0;C<h;C++)g===0&&(p[C]=[]),b[C]===w?p[C][g]=a?y(s,S[C]):y(S[C],s):p[C][g]=s}return new t({data:p,size:[h,m],datatype:v})}});function zu(n,e,t,r){if(!(this instanceof zu))throw new SyntaxError("Constructor must be called with the new operator");this.fn=n,this.count=e,this.min=t,this.max=r,this.message="Wrong number of arguments in function "+n+" ("+e+" provided, "+t+(r!=null?"-"+r:"")+" expected)",this.stack=new Error().stack}zu.prototype=new Error;zu.prototype.constructor=Error;zu.prototype.name="ArgumentsError";zu.prototype.isArgumentsError=!0;var S4="gcd",zce=["typed","config","round","matrix","equalScalar","zeros","BigNumber","DenseMatrix","concat"],vC="number | BigNumber | Fraction | Matrix | Array",Uce="".concat(vC,", ").concat(vC,", ...").concat(vC);function _4(n){return!n.some(e=>Array.isArray(e))}var $ce=ue(S4,zce,n=>{var{typed:e,matrix:t,config:r,round:i,equalScalar:s,zeros:o,BigNumber:a,DenseMatrix:l,concat:u}=n,c=UG({typed:e,config:r,round:i,matrix:t,equalScalar:s,zeros:o,DenseMatrix:l,concat:u}),f=pf({typed:e}),d=cR({typed:e,equalScalar:s}),h=Yd({typed:e,DenseMatrix:l}),m=Yn({typed:e,matrix:t,concat:u});return e(S4,{"number, number":v,"BigNumber, BigNumber":y,"Fraction, Fraction":(p,S)=>p.gcd(S)},m({SS:d,DS:f,Ss:h}),{[Uce]:e.referToSelf(p=>(S,b,g)=>{for(var w=p(S,b),x=0;x<g.length;x++)w=p(w,g[x]);return w}),Array:e.referToSelf(p=>S=>{if(S.length===1&&Array.isArray(S[0])&&_4(S[0]))return p(...S[0]);if(_4(S))return p(...S);throw new zu("gcd() supports only 1d matrices!")}),Matrix:e.referToSelf(p=>S=>p(S.toArray()))});function v(p,S){if(!kt(p)||!kt(S))throw new Error("Parameters in function gcd must be integer numbers");for(var b;S!==0;)b=c(p,S),p=S,S=b;return p<0?-p:p}function y(p,S){if(!p.isInt()||!S.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var b=new a(0);!S.isZero();){var g=c(p,S);p=S,S=g}return p.lt(b)?p.neg():p}}),Vce="matAlgo06xS0S0",Hce=["typed","equalScalar"],wE=ue(Vce,Hce,n=>{var{typed:e,equalScalar:t}=n;return function(i,s,o){var a=i._values,l=i._size,u=i._datatype||i._data===void 0?i._datatype:i.getDataType(),c=s._values,f=s._size,d=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(l.length!==f.length)throw new an(l.length,f.length);if(l[0]!==f[0]||l[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");var h=l[0],m=l[1],v,y=t,p=0,S=o;typeof u=="string"&&u===d&&u!=="mixed"&&(v=u,y=e.find(t,[v,v]),p=e.convert(0,v),S=e.find(o,[v,v]));for(var b=a&&c?[]:void 0,g=[],w=[],x=b?[]:void 0,M=[],A=[],N=0;N<m;N++){w[N]=g.length;var C=N+1;if(qF(i,N,M,x,A,C,g,S),qF(s,N,M,x,A,C,g,S),x)for(var T=w[N];T<g.length;){var R=g[T];if(A[R]===C){var $=x[R];y($,p)?g.splice(T,1):(b.push($),T++)}else g.splice(T,1)}else for(var B=w[N];B<g.length;){var z=g[B];A[z]!==C?g.splice(B,1):B++}}return w[m]=g.length,i.createSparseMatrix({values:b,index:g,ptr:w,size:[h,m],datatype:u===i._datatype&&d===s._datatype?v:void 0})}}),E4="lcm",Wce=["typed","matrix","equalScalar","concat"],jce=ue(E4,Wce,n=>{var{typed:e,matrix:t,equalScalar:r,concat:i}=n,s=$a({typed:e,equalScalar:r}),o=wE({typed:e,equalScalar:r}),a=Ui({typed:e,equalScalar:r}),l=Yn({typed:e,matrix:t,concat:i}),u="number | BigNumber | Fraction | Matrix | Array",c={};return c["".concat(u,", ").concat(u,", ...").concat(u)]=e.referToSelf(d=>(h,m,v)=>{for(var y=d(h,m),p=0;p<v.length;p++)y=d(y,v[p]);return y}),e(E4,{"number, number":Qj,"BigNumber, BigNumber":f,"Fraction, Fraction":(d,h)=>d.lcm(h)},l({SS:o,DS:s,Ss:a}),c);function f(d,h){if(!d.isInt()||!h.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(d.isZero())return d;if(h.isZero())return h;for(var m=d.times(h);!h.isZero();){var v=h;h=d.mod(v),d=v}return m.div(d).abs()}}),M4="log10",Gce=["typed","config","Complex"],qce=ue(M4,Gce,n=>{var{typed:e,config:t,Complex:r}=n;return e(M4,{number:function(s){return s>=0||t.predictable?eG(s):new r(s,0).log().div(Math.LN10)},Complex:function(s){return new r(s).log().div(Math.LN10)},BigNumber:function(s){return!s.isNegative()||t.predictable?s.log():new r(s.toNumber(),0).log().div(Math.LN10)},"Array | Matrix":e.referToSelf(i=>s=>cn(s,i))})}),C4="log2",Xce=["typed","config","Complex"],Yce=ue(C4,Xce,n=>{var{typed:e,config:t,Complex:r}=n;return e(C4,{number:function(o){return o>=0||t.predictable?tG(o):i(new r(o,0))},Complex:i,BigNumber:function(o){return!o.isNegative()||t.predictable?o.log(2):i(new r(o.toNumber(),0))},"Array | Matrix":e.referToSelf(s=>o=>cn(o,s))});function i(s){var o=Math.sqrt(s.re*s.re+s.im*s.im);return new r(Math.log2?Math.log2(o):Math.log(o)/Math.LN2,Math.atan2(s.im,s.re)/Math.LN2)}}),Kce="multiplyScalar",Zce=["typed"],Jce=ue(Kce,Zce,n=>{var{typed:e}=n;return e("multiplyScalar",{"number, number":qj,"Complex, Complex":function(r,i){return r.mul(i)},"BigNumber, BigNumber":function(r,i){return r.times(i)},"Fraction, Fraction":function(r,i){return r.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(t,r)=>r.multiply(t),"Unit, number | Fraction | BigNumber | Complex | Unit":(t,r)=>t.multiply(r)})}),A4="multiply",Qce=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],efe=ue(A4,Qce,n=>{var{typed:e,matrix:t,addScalar:r,multiplyScalar:i,equalScalar:s,dot:o}=n,a=Ui({typed:e,equalScalar:s}),l=Ua({typed:e});function u(w,x){switch(w.length){case 1:switch(x.length){case 1:if(w[0]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(w[0]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+w[0]+") must match Matrix rows ("+x[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+x.length+" dimensions)")}break;case 2:switch(x.length){case 1:if(w[1]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+w[1]+") must match Vector length ("+x[0]+")");break;case 2:if(w[1]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+w[1]+") must match Matrix B rows ("+x[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+x.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+w.length+" dimensions)")}}function c(w,x,M){if(M===0)throw new Error("Cannot multiply two empty vectors");return o(w,x)}function f(w,x){if(x.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(w,x)}function d(w,x){var M=w._data,A=w._size,N=w._datatype||w.getDataType(),C=x._data,T=x._size,R=x._datatype||x.getDataType(),$=A[0],B=T[1],z,D=r,I=i;N&&R&&N===R&&typeof N=="string"&&N!=="mixed"&&(z=N,D=e.find(r,[z,z]),I=e.find(i,[z,z]));for(var U=[],L=0;L<B;L++){for(var q=I(M[0],C[0][L]),Z=1;Z<$;Z++)q=D(q,I(M[Z],C[Z][L]));U[L]=q}return w.createDenseMatrix({data:U,size:[B],datatype:N===w._datatype&&R===x._datatype?z:void 0})}var h=e("_multiplyMatrixVector",{"DenseMatrix, any":v,"SparseMatrix, any":S}),m=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":y,"DenseMatrix, SparseMatrix":p,"SparseMatrix, DenseMatrix":b,"SparseMatrix, SparseMatrix":g});function v(w,x){var M=w._data,A=w._size,N=w._datatype||w.getDataType(),C=x._data,T=x._datatype||x.getDataType(),R=A[0],$=A[1],B,z=r,D=i;N&&T&&N===T&&typeof N=="string"&&N!=="mixed"&&(B=N,z=e.find(r,[B,B]),D=e.find(i,[B,B]));for(var I=[],U=0;U<R;U++){for(var L=M[U],q=D(L[0],C[0]),Z=1;Z<$;Z++)q=z(q,D(L[Z],C[Z]));I[U]=q}return w.createDenseMatrix({data:I,size:[R],datatype:N===w._datatype&&T===x._datatype?B:void 0})}function y(w,x){var M=w._data,A=w._size,N=w._datatype||w.getDataType(),C=x._data,T=x._size,R=x._datatype||x.getDataType(),$=A[0],B=A[1],z=T[1],D,I=r,U=i;N&&R&&N===R&&typeof N=="string"&&N!=="mixed"&&N!=="mixed"&&(D=N,I=e.find(r,[D,D]),U=e.find(i,[D,D]));for(var L=[],q=0;q<$;q++){var Z=M[q];L[q]=[];for(var J=0;J<z;J++){for(var Y=U(Z[0],C[0][J]),ee=1;ee<B;ee++)Y=I(Y,U(Z[ee],C[ee][J]));L[q][J]=Y}}return w.createDenseMatrix({data:L,size:[$,z],datatype:N===w._datatype&&R===x._datatype?D:void 0})}function p(w,x){var M=w._data,A=w._size,N=w._datatype||w.getDataType(),C=x._values,T=x._index,R=x._ptr,$=x._size,B=x._datatype||x._data===void 0?x._datatype:x.getDataType();if(!C)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var z=A[0],D=$[1],I,U=r,L=i,q=s,Z=0;N&&B&&N===B&&typeof N=="string"&&N!=="mixed"&&(I=N,U=e.find(r,[I,I]),L=e.find(i,[I,I]),q=e.find(s,[I,I]),Z=e.convert(0,I));for(var J=[],Y=[],ee=[],ae=x.createSparseMatrix({values:J,index:Y,ptr:ee,size:[z,D],datatype:N===w._datatype&&B===x._datatype?I:void 0}),ce=0;ce<D;ce++){ee[ce]=Y.length;var pe=R[ce],we=R[ce+1];if(we>pe)for(var me=0,Ae=0;Ae<z;Ae++){for(var Ee=Ae+1,re=void 0,Pe=pe;Pe<we;Pe++){var Re=T[Pe];me!==Ee?(re=L(M[Ae][Re],C[Pe]),me=Ee):re=U(re,L(M[Ae][Re],C[Pe]))}me===Ee&&!q(re,Z)&&(Y.push(Ae),J.push(re))}}return ee[D]=Y.length,ae}function S(w,x){var M=w._values,A=w._index,N=w._ptr,C=w._datatype||w._data===void 0?w._datatype:w.getDataType();if(!M)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var T=x._data,R=x._datatype||x.getDataType(),$=w._size[0],B=x._size[0],z=[],D=[],I=[],U,L=r,q=i,Z=s,J=0;C&&R&&C===R&&typeof C=="string"&&C!=="mixed"&&(U=C,L=e.find(r,[U,U]),q=e.find(i,[U,U]),Z=e.find(s,[U,U]),J=e.convert(0,U));var Y=[],ee=[];I[0]=0;for(var ae=0;ae<B;ae++){var ce=T[ae];if(!Z(ce,J))for(var pe=N[ae],we=N[ae+1],me=pe;me<we;me++){var Ae=A[me];ee[Ae]?Y[Ae]=L(Y[Ae],q(ce,M[me])):(ee[Ae]=!0,D.push(Ae),Y[Ae]=q(ce,M[me]))}}for(var Ee=D.length,re=0;re<Ee;re++){var Pe=D[re];z[re]=Y[Pe]}return I[1]=D.length,w.createSparseMatrix({values:z,index:D,ptr:I,size:[$,1],datatype:C===w._datatype&&R===x._datatype?U:void 0})}function b(w,x){var M=w._values,A=w._index,N=w._ptr,C=w._datatype||w._data===void 0?w._datatype:w.getDataType();if(!M)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var T=x._data,R=x._datatype||x.getDataType(),$=w._size[0],B=x._size[0],z=x._size[1],D,I=r,U=i,L=s,q=0;C&&R&&C===R&&typeof C=="string"&&C!=="mixed"&&(D=C,I=e.find(r,[D,D]),U=e.find(i,[D,D]),L=e.find(s,[D,D]),q=e.convert(0,D));for(var Z=[],J=[],Y=[],ee=w.createSparseMatrix({values:Z,index:J,ptr:Y,size:[$,z],datatype:C===w._datatype&&R===x._datatype?D:void 0}),ae=[],ce=[],pe=0;pe<z;pe++){Y[pe]=J.length;for(var we=pe+1,me=0;me<B;me++){var Ae=T[me][pe];if(!L(Ae,q))for(var Ee=N[me],re=N[me+1],Pe=Ee;Pe<re;Pe++){var Re=A[Pe];ce[Re]!==we?(ce[Re]=we,J.push(Re),ae[Re]=U(Ae,M[Pe])):ae[Re]=I(ae[Re],U(Ae,M[Pe]))}}for(var te=Y[pe],ie=J.length,Me=te;Me<ie;Me++){var oe=J[Me];Z[Me]=ae[oe]}}return Y[z]=J.length,ee}function g(w,x){var M=w._values,A=w._index,N=w._ptr,C=w._datatype||w._data===void 0?w._datatype:w.getDataType(),T=x._values,R=x._index,$=x._ptr,B=x._datatype||x._data===void 0?x._datatype:x.getDataType(),z=w._size[0],D=x._size[1],I=M&&T,U,L=r,q=i;C&&B&&C===B&&typeof C=="string"&&C!=="mixed"&&(U=C,L=e.find(r,[U,U]),q=e.find(i,[U,U]));for(var Z=I?[]:void 0,J=[],Y=[],ee=w.createSparseMatrix({values:Z,index:J,ptr:Y,size:[z,D],datatype:C===w._datatype&&B===x._datatype?U:void 0}),ae=I?[]:void 0,ce=[],pe,we,me,Ae,Ee,re,Pe,Re,te=0;te<D;te++){Y[te]=J.length;var ie=te+1;for(Ee=$[te],re=$[te+1],Ae=Ee;Ae<re;Ae++)if(Re=R[Ae],I)for(we=N[Re],me=N[Re+1],pe=we;pe<me;pe++)Pe=A[pe],ce[Pe]!==ie?(ce[Pe]=ie,J.push(Pe),ae[Pe]=q(T[Ae],M[pe])):ae[Pe]=L(ae[Pe],q(T[Ae],M[pe]));else for(we=N[Re],me=N[Re+1],pe=we;pe<me;pe++)Pe=A[pe],ce[Pe]!==ie&&(ce[Pe]=ie,J.push(Pe));if(I)for(var Me=Y[te],oe=J.length,G=Me;G<oe;G++){var j=J[G];Z[G]=ae[j]}}return Y[D]=J.length,ee}return e(A4,i,{"Array, Array":e.referTo("Matrix, Matrix",w=>(x,M)=>{u(nn(x),nn(M));var A=w(t(x),t(M));return $t(A)?A.valueOf():A}),"Matrix, Matrix":function(x,M){var A=x.size(),N=M.size();return u(A,N),A.length===1?N.length===1?c(x,M,A[0]):f(x,M):N.length===1?h(x,M):m(x,M)},"Matrix, Array":e.referTo("Matrix,Matrix",w=>(x,M)=>w(x,t(M))),"Array, Matrix":e.referToSelf(w=>(x,M)=>w(t(x,M.storage()),M)),"SparseMatrix, any":function(x,M){return a(x,M,i,!1)},"DenseMatrix, any":function(x,M){return l(x,M,i,!1)},"any, SparseMatrix":function(x,M){return a(M,x,i,!0)},"any, DenseMatrix":function(x,M){return l(M,x,i,!0)},"Array, any":function(x,M){return l(t(x),M,i,!1).valueOf()},"any, Array":function(x,M){return l(t(M),x,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(w=>(x,M,A)=>{for(var N=w(x,M),C=0;C<A.length;C++)N=w(N,A[C]);return N})})}),T4="nthRoot",tfe=["typed","matrix","equalScalar","BigNumber","concat"],nfe=ue(T4,tfe,n=>{var{typed:e,matrix:t,equalScalar:r,BigNumber:i,concat:s}=n,o=pf({typed:e}),a=$a({typed:e,equalScalar:r}),l=wE({typed:e,equalScalar:r}),u=Ui({typed:e,equalScalar:r}),c=Yn({typed:e,matrix:t,concat:s});function f(){throw new Error("Complex number not supported in function nthRoot. Use nthRoots instead.")}return e(T4,{number:YF,"number, number":YF,BigNumber:h=>d(h,new i(2)),"BigNumber, BigNumber":d,Complex:f,"Complex, number":f,Array:e.referTo("DenseMatrix,number",h=>m=>h(t(m),2).valueOf()),DenseMatrix:e.referTo("DenseMatrix,number",h=>m=>h(m,2)),SparseMatrix:e.referTo("SparseMatrix,number",h=>m=>h(m,2)),"SparseMatrix, SparseMatrix":e.referToSelf(h=>(m,v)=>{if(v.density()===1)return l(m,v,h);throw new Error("Root must be non-zero")}),"DenseMatrix, SparseMatrix":e.referToSelf(h=>(m,v)=>{if(v.density()===1)return o(m,v,h,!1);throw new Error("Root must be non-zero")}),"Array, SparseMatrix":e.referTo("DenseMatrix,SparseMatrix",h=>(m,v)=>h(t(m),v)),"number | BigNumber, SparseMatrix":e.referToSelf(h=>(m,v)=>{if(v.density()===1)return u(v,m,h,!0);throw new Error("Root must be non-zero")})},c({scalar:"number | BigNumber",SD:a,Ss:u,sS:!1}));function d(h,m){var v=i.precision,y=i.clone({precision:v+2}),p=new i(0),S=new y(1),b=m.isNegative();if(b&&(m=m.neg()),m.isZero())throw new Error("Root must be non-zero");if(h.isNegative()&&!m.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(h.isZero())return b?new y(1/0):0;if(!h.isFinite())return b?p:h;var g=h.abs().pow(S.div(m));return g=h.isNeg()?g.neg():g,new i((b?S.div(g):g).toPrecision(v))}}),D4="sign",rfe=["typed","BigNumber","Fraction","complex"],ife=ue(D4,rfe,n=>{var{typed:e,BigNumber:t,complex:r,Fraction:i}=n;return e(D4,{number:E3,Complex:function(o){return o.im===0?r(E3(o.re)):o.sign()},BigNumber:function(o){return new t(o.cmp(0))},Fraction:function(o){return new i(o.s,1)},"Array | Matrix":e.referToSelf(s=>o=>cn(o,s)),Unit:e.referToSelf(s=>o=>{if(!o._isDerived()&&o.units[0].unit.offset!==0)throw new TypeError("sign is ambiguous for units with offset");return e.find(s,o.valueType())(o.value)})})}),sfe="sqrt",ofe=["config","typed","Complex"],afe=ue(sfe,ofe,n=>{var{config:e,typed:t,Complex:r}=n;return t("sqrt",{number:i,Complex:function(o){return o.sqrt()},BigNumber:function(o){return!o.isNegative()||e.predictable?o.sqrt():i(o.toNumber())},Unit:function(o){return o.pow(.5)}});function i(s){return isNaN(s)?NaN:s>=0||e.predictable?Math.sqrt(s):new r(s,0).sqrt()}}),N4="square",lfe=["typed"],ufe=ue(N4,lfe,n=>{var{typed:e}=n;return e(N4,{number:nG,Complex:function(r){return r.mul(r)},BigNumber:function(r){return r.times(r)},Fraction:function(r){return r.mul(r)},Unit:function(r){return r.pow(2)}})}),P4="subtract",cfe=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],ffe=ue(P4,cfe,n=>{var{typed:e,matrix:t,equalScalar:r,subtractScalar:i,unaryMinus:s,DenseMatrix:o,concat:a}=n,l=pf({typed:e}),u=ks({typed:e}),c=bE({typed:e,equalScalar:r}),f=Yd({typed:e,DenseMatrix:o}),d=ci({typed:e,DenseMatrix:o}),h=Yn({typed:e,matrix:t,concat:a});return e(P4,{"any, any":i},h({elop:i,SS:c,DS:l,SD:u,Ss:d,sS:f}))}),R4="xgcd",dfe=["typed","config","matrix","BigNumber"],hfe=ue(R4,dfe,n=>{var{typed:e,config:t,matrix:r,BigNumber:i}=n;return e(R4,{"number, number":function(a,l){var u=rG(a,l);return t.matrix==="Array"?u:r(u)},"BigNumber, BigNumber":s});function s(o,a){var l,u,c,f=new i(0),d=new i(1),h=f,m=d,v=d,y=f;if(!o.isInt()||!a.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!a.isZero();)u=o.div(a).floor(),c=o.mod(a),l=h,h=m.minus(u.times(h)),m=l,l=v,v=y.minus(u.times(v)),y=l,o=a,a=c;var p;return o.lt(f)?p=[o.neg(),m.neg(),y.neg()]:p=[o,o.isZero()?0:m,y],t.matrix==="Array"?p:r(p)}}),O4="invmod",pfe=["typed","config","BigNumber","xgcd","equal","smaller","mod","add","isInteger"],mfe=ue(O4,pfe,n=>{var{typed:e,config:t,BigNumber:r,xgcd:i,equal:s,smaller:o,mod:a,add:l,isInteger:u}=n;return e(O4,{"number, number":c,"BigNumber, BigNumber":c});function c(f,d){if(!u(f)||!u(d))throw new Error("Parameters in function invmod must be integer numbers");if(f=a(f,d),s(d,0))throw new Error("Divisor must be non zero");var h=i(f,d);h=h.valueOf();var[m,v]=h;return s(m,r(1))?(v=a(v,d),o(v,r(0))&&(v=l(v,d)),v):NaN}}),gfe="matAlgo09xS0Sf",vfe=["typed","equalScalar"],$G=ue(gfe,vfe,n=>{var{typed:e,equalScalar:t}=n;return function(i,s,o){var a=i._values,l=i._index,u=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=s._values,h=s._index,m=s._ptr,v=s._size,y=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==v.length)throw new an(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var p=c[0],S=c[1],b,g=t,w=0,x=o;typeof f=="string"&&f===y&&f!=="mixed"&&(b=f,g=e.find(t,[b,b]),w=e.convert(0,b),x=e.find(o,[b,b]));var M=a&&d?[]:void 0,A=[],N=[],C=M?[]:void 0,T=[],R,$,B,z,D;for($=0;$<S;$++){N[$]=A.length;var I=$+1;if(C)for(z=m[$],D=m[$+1],B=z;B<D;B++)R=h[B],T[R]=I,C[R]=d[B];for(z=u[$],D=u[$+1],B=z;B<D;B++)if(R=l[B],C){var U=T[R]===I?C[R]:w,L=x(a[B],U);g(L,w)||(A.push(R),M.push(L))}else A.push(R)}return N[S]=A.length,i.createSparseMatrix({values:M,index:A,ptr:N,size:[p,S],datatype:f===i._datatype&&y===s._datatype?b:void 0})}}),k4="dotMultiply",yfe=["typed","matrix","equalScalar","multiplyScalar","concat"],xfe=ue(k4,yfe,n=>{var{typed:e,matrix:t,equalScalar:r,multiplyScalar:i,concat:s}=n,o=$a({typed:e,equalScalar:r}),a=$G({typed:e,equalScalar:r}),l=Ui({typed:e,equalScalar:r}),u=Yn({typed:e,matrix:t,concat:s});return e(k4,u({elop:i,SS:a,DS:o,Ss:l}))});function bfe(n,e){if(n.isFinite()&&!n.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitAnd");var t=n.constructor;if(n.isNaN()||e.isNaN())return new t(NaN);if(n.isZero()||e.eq(-1)||n.eq(e))return n;if(e.isZero()||n.eq(-1))return e;if(!n.isFinite()||!e.isFinite()){if(!n.isFinite()&&!e.isFinite())return n.isNegative()===e.isNegative()?n:new t(0);if(!n.isFinite())return e.isNegative()?n:n.isNegative()?new t(0):e;if(!e.isFinite())return n.isNegative()?e:e.isNegative()?new t(0):n}return fR(n,e,function(r,i){return r&i})}function g0(n){if(n.isFinite()&&!n.isInteger())throw new Error("Integer expected in function bitNot");var e=n.constructor,t=e.precision;e.config({precision:1e9});var r=n.plus(new e(1));return r.s=-r.s||null,e.config({precision:t}),r}function wfe(n,e){if(n.isFinite()&&!n.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitOr");var t=n.constructor;if(n.isNaN()||e.isNaN())return new t(NaN);var r=new t(-1);return n.isZero()||e.eq(r)||n.eq(e)?e:e.isZero()||n.eq(r)?n:!n.isFinite()||!e.isFinite()?!n.isFinite()&&!n.isNegative()&&e.isNegative()||n.isNegative()&&!e.isNegative()&&!e.isFinite()?r:n.isNegative()&&e.isNegative()?n.isFinite()?n:e:n.isFinite()?e:n:fR(n,e,function(i,s){return i|s})}function fR(n,e,t){var r=n.constructor,i,s,o=+(n.s<0),a=+(e.s<0);if(o){i=hx(g0(n));for(var l=0;l<i.length;++l)i[l]^=1}else i=hx(n);if(a){s=hx(g0(e));for(var u=0;u<s.length;++u)s[u]^=1}else s=hx(e);var c,f,d;i.length<=s.length?(c=i,f=s,d=o):(c=s,f=i,d=a);var h=c.length,m=f.length,v=t(o,a)^1,y=new r(v^1),p=new r(1),S=new r(2),b=r.precision;for(r.config({precision:1e9});h>0;)t(c[--h],f[--m])===v&&(y=y.plus(p)),p=p.times(S);for(;m>0;)t(d,f[--m])===v&&(y=y.plus(p)),p=p.times(S);return r.config({precision:b}),v===0&&(y.s=-y.s),y}function hx(n){for(var e=n.d,t=e[0]+"",r=1;r<e.length;++r){for(var i=e[r]+"",s=7-i.length;s--;)i="0"+i;t+=i}for(var o=t.length;t.charAt(o)==="0";)o--;var a=n.e,l=t.slice(0,o+1||1),u=l.length;if(a>0)if(++a>u)for(a-=u;a--;)l+="0";else a<u&&(l=l.slice(0,a)+"."+l.slice(a));for(var c=[0],f=0;f<l.length;){for(var d=c.length;d--;)c[d]*=10;c[0]+=parseInt(l.charAt(f++));for(var h=0;h<c.length;++h)c[h]>1&&((c[h+1]===null||c[h+1]===void 0)&&(c[h+1]=0),c[h+1]+=c[h]>>1,c[h]&=1)}return c.reverse()}function Sfe(n,e){if(n.isFinite()&&!n.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitXor");var t=n.constructor;if(n.isNaN()||e.isNaN())return new t(NaN);if(n.isZero())return e;if(e.isZero())return n;if(n.eq(e))return new t(0);var r=new t(-1);return n.eq(r)?g0(e):e.eq(r)?g0(n):!n.isFinite()||!e.isFinite()?!n.isFinite()&&!e.isFinite()?r:new t(n.isNegative()===e.isNegative()?1/0:-1/0):fR(n,e,function(i,s){return i^s})}function _fe(n,e){if(n.isFinite()&&!n.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function leftShift");var t=n.constructor;return n.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new t(NaN):n.isZero()||e.isZero()?n:!n.isFinite()&&!e.isFinite()?new t(NaN):e.lt(55)?n.times(Math.pow(2,e.toNumber())+""):n.times(new t(2).pow(e))}function Efe(n,e){if(n.isFinite()&&!n.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function rightArithShift");var t=n.constructor;return n.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new t(NaN):n.isZero()||e.isZero()?n:e.isFinite()?e.lt(55)?n.div(Math.pow(2,e.toNumber())+"").floor():n.div(new t(2).pow(e)).floor():n.isNegative()?new t(-1):n.isFinite()?new t(0):new t(NaN)}var I4="bitAnd",Mfe=["typed","matrix","equalScalar","concat"],VG=ue(I4,Mfe,n=>{var{typed:e,matrix:t,equalScalar:r,concat:i}=n,s=$a({typed:e,equalScalar:r}),o=wE({typed:e,equalScalar:r}),a=Ui({typed:e,equalScalar:r}),l=Yn({typed:e,matrix:t,concat:i});return e(I4,{"number, number":sG,"BigNumber, BigNumber":bfe},l({SS:o,DS:s,Ss:a}))}),L4="bitNot",Cfe=["typed"],Afe=ue(L4,Cfe,n=>{var{typed:e}=n;return e(L4,{number:oG,BigNumber:g0,"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),F4="bitOr",Tfe=["typed","matrix","equalScalar","DenseMatrix","concat"],HG=ue(F4,Tfe,n=>{var{typed:e,matrix:t,equalScalar:r,DenseMatrix:i,concat:s}=n,o=pf({typed:e}),a=cR({typed:e,equalScalar:r}),l=Yd({typed:e,DenseMatrix:i}),u=Yn({typed:e,matrix:t,concat:s});return e(F4,{"number, number":aG,"BigNumber, BigNumber":wfe},u({SS:a,DS:o,Ss:l}))}),Dfe="matAlgo07xSSf",Nfe=["typed","DenseMatrix"],Fl=ue(Dfe,Nfe,n=>{var{typed:e,DenseMatrix:t}=n;return function(s,o,a){var l=s._size,u=s._datatype||s._data===void 0?s._datatype:s.getDataType(),c=o._size,f=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(l.length!==c.length)throw new an(l.length,c.length);if(l[0]!==c[0]||l[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+c+")");var d=l[0],h=l[1],m,v=0,y=a;typeof u=="string"&&u===f&&u!=="mixed"&&(m=u,v=e.convert(0,m),y=e.find(a,[m,m]));var p,S,b=[];for(p=0;p<d;p++)b[p]=[];var g=[],w=[],x=[],M=[];for(S=0;S<h;S++){var A=S+1;for(r(s,S,x,g,A),r(o,S,M,w,A),p=0;p<d;p++){var N=x[p]===A?g[p]:v,C=M[p]===A?w[p]:v;b[p][S]=y(N,C)}}return new t({data:b,size:[d,h],datatype:u===s._datatype&&f===o._datatype?m:void 0})};function r(i,s,o,a,l){for(var u=i._values,c=i._index,f=i._ptr,d=f[s],h=f[s+1];d<h;d++){var m=c[d];o[m]=l,a[m]=u[d]}}}),B4="bitXor",Pfe=["typed","matrix","DenseMatrix","concat"],Rfe=ue(B4,Pfe,n=>{var{typed:e,matrix:t,DenseMatrix:r,concat:i}=n,s=ks({typed:e}),o=Fl({typed:e,DenseMatrix:r}),a=ci({typed:e,DenseMatrix:r}),l=Yn({typed:e,matrix:t,concat:i});return e(B4,{"number, number":lG,"BigNumber, BigNumber":Sfe},l({SS:o,DS:s,Ss:a}))}),z4="arg",Ofe=["typed"],kfe=ue(z4,Ofe,n=>{var{typed:e}=n;return e(z4,{number:function(r){return Math.atan2(0,r)},BigNumber:function(r){return r.constructor.atan2(0,r)},Complex:function(r){return r.arg()},"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),U4="conj",Ife=["typed"],Lfe=ue(U4,Ife,n=>{var{typed:e}=n;return e(U4,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.conjugate(),"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),$4="im",Ffe=["typed"],Bfe=ue($4,Ffe,n=>{var{typed:e}=n;return e($4,{number:()=>0,"BigNumber | Fraction":t=>t.mul(0),Complex:t=>t.im,"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),V4="re",zfe=["typed"],Ufe=ue(V4,zfe,n=>{var{typed:e}=n;return e(V4,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.re,"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),H4="not",$fe=["typed"],Vfe=ue(H4,$fe,n=>{var{typed:e}=n;return e(H4,{"null | undefined":()=>!0,number:hG,Complex:function(r){return r.re===0&&r.im===0},BigNumber:function(r){return r.isZero()||r.isNaN()},Unit:e.referToSelf(t=>r=>e.find(t,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),W4="or",Hfe=["typed","matrix","equalScalar","DenseMatrix","concat"],WG=ue(W4,Hfe,n=>{var{typed:e,matrix:t,equalScalar:r,DenseMatrix:i,concat:s}=n,o=ks({typed:e}),a=bE({typed:e,equalScalar:r}),l=ci({typed:e,DenseMatrix:i}),u=Yn({typed:e,matrix:t,concat:s});return e(W4,{"number, number":pG,"Complex, Complex":function(f,d){return f.re!==0||f.im!==0||d.re!==0||d.im!==0},"BigNumber, BigNumber":function(f,d){return!f.isZero()&&!f.isNaN()||!d.isZero()&&!d.isNaN()},"Unit, Unit":e.referToSelf(c=>(f,d)=>c(f.value||0,d.value||0))},u({SS:a,DS:o,Ss:l}))}),j4="xor",Wfe=["typed","matrix","DenseMatrix","concat"],jfe=ue(j4,Wfe,n=>{var{typed:e,matrix:t,DenseMatrix:r,concat:i}=n,s=ks({typed:e}),o=Fl({typed:e,DenseMatrix:r}),a=ci({typed:e,DenseMatrix:r}),l=Yn({typed:e,matrix:t,concat:i});return e(j4,{"number, number":mG,"Complex, Complex":function(c,f){return(c.re!==0||c.im!==0)!=(f.re!==0||f.im!==0)},"BigNumber, BigNumber":function(c,f){return(!c.isZero()&&!c.isNaN())!=(!f.isZero()&&!f.isNaN())},"Unit, Unit":e.referToSelf(u=>(c,f)=>u(c.value||0,f.value||0))},l({SS:o,DS:s,Ss:a}))}),G4="concat",Gfe=["typed","matrix","isInteger"],jG=ue(G4,Gfe,n=>{var{typed:e,matrix:t,isInteger:r}=n;return e(G4,{"...Array | Matrix | number | BigNumber":function(s){var o,a=s.length,l=-1,u,c=!1,f=[];for(o=0;o<a;o++){var d=s[o];if($t(d)&&(c=!0),tn(d)||Jt(d)){if(o!==a-1)throw new Error("Dimension must be specified as last argument");if(u=l,l=d.valueOf(),!r(l))throw new TypeError("Integer number expected for dimension");if(l<0||o>0&&l>u)throw new da(l,u+1)}else{var h=Yt(d).valueOf(),m=nn(h);if(f[o]=h,u=l,l=m.length-1,o>0&&l!==u)throw new an(u+1,l+1)}}if(f.length===0)throw new SyntaxError("At least one matrix expected");for(var v=f.shift();f.length;)v=$j(v,f.shift(),l);return c?t(v):v},"...string":function(s){return s.join("")}})}),q4="column",qfe=["typed","Index","matrix","range"],GG=ue(q4,qfe,n=>{var{typed:e,Index:t,matrix:r,range:i}=n;return e(q4,{"Matrix, number":s,"Array, number":function(a,l){return s(r(Yt(a)),l).valueOf()}});function s(o,a){if(o.size().length!==2)throw new Error("Only two dimensional matrix is supported");Un(a,o.size()[1]);var l=i(0,o.size()[0]),u=new t(l,a),c=o.subset(u);return $t(c)?c:r([[c]])}}),X4="count",Xfe=["typed","size","prod"],Yfe=ue(X4,Xfe,n=>{var{typed:e,size:t,prod:r}=n;return e(X4,{string:function(s){return s.length},"Matrix | Array":function(s){return r(t(s))}})}),Y4="cross",Kfe=["typed","matrix","subtract","multiply"],Zfe=ue(Y4,Kfe,n=>{var{typed:e,matrix:t,subtract:r,multiply:i}=n;return e(Y4,{"Matrix, Matrix":function(a,l){return t(s(a.toArray(),l.toArray()))},"Matrix, Array":function(a,l){return t(s(a.toArray(),l))},"Array, Matrix":function(a,l){return t(s(a,l.toArray()))},"Array, Array":s});function s(o,a){var l=Math.max(nn(o).length,nn(a).length);o=OS(o),a=OS(a);var u=nn(o),c=nn(a);if(u.length!==1||c.length!==1||u[0]!==3||c[0]!==3)throw new RangeError("Vectors with length 3 expected (Size A = ["+u.join(", ")+"], B = ["+c.join(", ")+"])");var f=[r(i(o[1],a[2]),i(o[2],a[1])),r(i(o[2],a[0]),i(o[0],a[2])),r(i(o[0],a[1]),i(o[1],a[0]))];return l>1?[f]:f}}),K4="diag",Jfe=["typed","matrix","DenseMatrix","SparseMatrix"],Qfe=ue(K4,Jfe,n=>{var{typed:e,matrix:t,DenseMatrix:r,SparseMatrix:i}=n;return e(K4,{Array:function(u){return s(u,0,nn(u),null)},"Array, number":function(u,c){return s(u,c,nn(u),null)},"Array, BigNumber":function(u,c){return s(u,c.toNumber(),nn(u),null)},"Array, string":function(u,c){return s(u,0,nn(u),c)},"Array, number, string":function(u,c,f){return s(u,c,nn(u),f)},"Array, BigNumber, string":function(u,c,f){return s(u,c.toNumber(),nn(u),f)},Matrix:function(u){return s(u,0,u.size(),u.storage())},"Matrix, number":function(u,c){return s(u,c,u.size(),u.storage())},"Matrix, BigNumber":function(u,c){return s(u,c.toNumber(),u.size(),u.storage())},"Matrix, string":function(u,c){return s(u,0,u.size(),c)},"Matrix, number, string":function(u,c,f){return s(u,c,u.size(),f)},"Matrix, BigNumber, string":function(u,c,f){return s(u,c.toNumber(),u.size(),f)}});function s(l,u,c,f){if(!kt(u))throw new TypeError("Second parameter in function diag must be an integer");var d=u>0?u:0,h=u<0?-u:0;switch(c.length){case 1:return o(l,u,f,c[0],h,d);case 2:return a(l,u,f,c,h,d)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function o(l,u,c,f,d,h){var m=[f+d,f+h];if(c&&c!=="sparse"&&c!=="dense")throw new TypeError("Unknown matrix type ".concat(c,'"'));var v=c==="sparse"?i.diagonal(m,l,u):r.diagonal(m,l,u);return c!==null?v:v.valueOf()}function a(l,u,c,f,d,h){if($t(l)){var m=l.diagonal(u);return c!==null?c!==m.storage()?t(m,c):m:m.valueOf()}for(var v=Math.min(f[0]-d,f[1]-h),y=[],p=0;p<v;p++)y[p]=l[p+d][p+h];return c!==null?t(y):y}});function Lm(n,e,t,r,i){if(id.isTypedFunction(n)){var s=[e,t,r],o=id.resolve(n,s);if(o)return f(o.implementation,s);var a=[e,t],l=id.resolve(n,a);if(l)return f(l.implementation,a);var u=[e],c=id.resolve(n,u);return c?f(c.implementation,u):f(n,s)}else return n(e,t,r);function f(d,h){try{return d.apply(d,h)}catch(y){var m;if(y instanceof TypeError&&((m=y.data)===null||m===void 0?void 0:m.category)==="wrongType"){var v=[];throw v.push("value: ".concat(Wn(e))),h.length>=2&&v.push("index: ".concat(Wn(t))),h.length>=3&&v.push("array: ".concat(Wn(r))),new TypeError("Function ".concat(i," cannot apply callback arguments ")+"".concat(n.name,"(").concat(v.join(", "),") at index ").concat(JSON.stringify(t)))}else throw new TypeError("Function ".concat(i," cannot apply callback arguments ")+"to function ".concat(n.name,": ").concat(y.message))}}}var ede="filter",tde=["typed"],nde=ue(ede,tde,n=>{var{typed:e}=n;return e("filter",{"Array, function":Z4,"Matrix, function":function(r,i){return r.create(Z4(r.toArray(),i))},"Array, RegExp":kS,"Matrix, RegExp":function(r,i){return r.create(kS(r.toArray(),i))}})});function Z4(n,e){return zj(n,function(t,r,i){return Lm(e,t,[r],i,"filter")})}var J4="flatten",rde=["typed","matrix"],ide=ue(J4,rde,n=>{var{typed:e,matrix:t}=n;return e(J4,{Array:function(i){return wn(i)},Matrix:function(i){var s=wn(i.toArray());return t(s)}})}),Q4="forEach",sde=["typed"],ode=ue(Q4,sde,n=>{var{typed:e}=n;return e(Q4,{"Array, function":ade,"Matrix, function":function(r,i){r.forEach(i)}})});function ade(n,e){var t=function r(i,s){if(Array.isArray(i))vE(i,function(o,a){r(o,s.concat(a))});else return Lm(e,i,s,n,"forEach")};t(n,[])}var e8="getMatrixDataType",lde=["typed"],ude=ue(e8,lde,n=>{var{typed:e}=n;return e(e8,{Array:function(r){return m0(r,Wn)},Matrix:function(r){return r.getDataType()}})}),t8="identity",cde=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],fde=ue(t8,cde,n=>{var{typed:e,config:t,matrix:r,BigNumber:i,DenseMatrix:s,SparseMatrix:o}=n;return e(t8,{"":function(){return t.matrix==="Matrix"?r([]):[]},string:function(c){return r(c)},"number | BigNumber":function(c){return l(c,c,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,f){return l(c,c,f)},"number | BigNumber, number | BigNumber":function(c,f){return l(c,f,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,f,d){return l(c,f,d)},Array:function(c){return a(c)},"Array, string":function(c,f){return a(c,f)},Matrix:function(c){return a(c.valueOf(),c.storage())},"Matrix, string":function(c,f){return a(c.valueOf(),f)}});function a(u,c){switch(u.length){case 0:return c?r(c):[];case 1:return l(u[0],u[0],c);case 2:return l(u[0],u[1],c);default:throw new Error("Vector containing two values expected")}}function l(u,c,f){var d=Jt(u)||Jt(c)?i:null;if(Jt(u)&&(u=u.toNumber()),Jt(c)&&(c=c.toNumber()),!kt(u)||u<1)throw new Error("Parameters in function identity must be positive integers");if(!kt(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var h=d?new i(1):1,m=d?new d(0):0,v=[u,c];if(f){if(f==="sparse")return o.diagonal(v,h,0,m);if(f==="dense")return s.diagonal(v,h,0,m);throw new TypeError('Unknown matrix type "'.concat(f,'"'))}for(var y=um([],v,m),p=u<c?u:c,S=0;S<p;S++)y[S][S]=h;return y}}),n8="kron",dde=["typed","matrix","multiplyScalar"],hde=ue(n8,dde,n=>{var{typed:e,matrix:t,multiplyScalar:r}=n;return e(n8,{"Matrix, Matrix":function(o,a){return t(i(o.toArray(),a.toArray()))},"Matrix, Array":function(o,a){return t(i(o.toArray(),a))},"Array, Matrix":function(o,a){return t(i(o,a.toArray()))},"Array, Array":i});function i(s,o){if(nn(s).length===1&&(s=[s]),nn(o).length===1&&(o=[o]),nn(s).length>2||nn(o).length>2)throw new RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(s.length)+", y = "+JSON.stringify(o.length)+")");var a=[],l=[];return s.map(function(u){return o.map(function(c){return l=[],a.push(l),u.map(function(f){return c.map(function(d){return l.push(r(f,d))})})})})&&a}}),r8="map",pde=["typed"],mde=ue(r8,pde,n=>{var{typed:e}=n;return e(r8,{"Array, function":gde,"Matrix, function":function(r,i){return r.map(i)}})});function gde(n,e){var t=function r(i,s){return Array.isArray(i)?i.map(function(o,a){return r(o,s.concat(a))}):Lm(e,i,s,n,"map")};return t(n,[])}var i8="diff",vde=["typed","matrix","subtract","number"],qG=ue(i8,vde,n=>{var{typed:e,matrix:t,subtract:r,number:i}=n;return e(i8,{"Array | Matrix":function(c){return $t(c)?t(o(c.toArray())):o(c)},"Array | Matrix, number":function(c,f){if(!kt(f))throw new RangeError("Dimension must be a whole number");return $t(c)?t(s(c.toArray(),f)):s(c,f)},"Array, BigNumber":e.referTo("Array,number",u=>(c,f)=>u(c,i(f))),"Matrix, BigNumber":e.referTo("Matrix,number",u=>(c,f)=>u(c,i(f)))});function s(u,c){if($t(u)&&(u=u.toArray()),!Array.isArray(u))throw RangeError("Array/Matrix does not have that many dimensions");if(c>0){var f=[];return u.forEach(d=>{f.push(s(d,c-1))}),f}else{if(c===0)return o(u);throw RangeError("Cannot have negative dimension")}}function o(u){for(var c=[],f=u.length,d=1;d<f;d++)c.push(a(u[d-1],u[d]));return c}function a(u,c){$t(u)&&(u=u.toArray()),$t(c)&&(c=c.toArray());var f=Array.isArray(u),d=Array.isArray(c);if(f&&d)return l(u,c);if(!f&&!d)return r(c,u);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}function l(u,c){if(u.length!==c.length)throw RangeError("Not all sub-arrays have the same length");for(var f=[],d=u.length,h=0;h<d;h++)f.push(a(u[h],c[h]));return f}}),yde="ones",xde=["typed","config","matrix","BigNumber"],bde=ue(yde,xde,n=>{var{typed:e,config:t,matrix:r,BigNumber:i}=n;return e("ones",{"":function(){return t.matrix==="Array"?s([]):s([],"default")},"...number | BigNumber | string":function(u){var c=u[u.length-1];if(typeof c=="string"){var f=u.pop();return s(u,f)}else return t.matrix==="Array"?s(u):s(u,"default")},Array:s,Matrix:function(u){var c=u.storage();return s(u.valueOf(),c)},"Array | Matrix, string":function(u,c){return s(u.valueOf(),c)}});function s(l,u){var c=o(l),f=c?new i(1):1;if(a(l),u){var d=r(u);return l.length>0?d.resize(l,f):d}else{var h=[];return l.length>0?um(h,l,f):h}}function o(l){var u=!1;return l.forEach(function(c,f,d){Jt(c)&&(u=!0,d[f]=c.toNumber())}),u}function a(l){l.forEach(function(u){if(typeof u!="number"||!kt(u)||u<0)throw new Error("Parameters in function ones must be positive integers")})}});function dR(){throw new Error('No "bignumber" implementation available')}function XG(){throw new Error('No "fraction" implementation available')}function YG(){throw new Error('No "matrix" implementation available')}var s8="range",wde=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],KG=ue(s8,wde,n=>{var{typed:e,config:t,matrix:r,bignumber:i,smaller:s,smallerEq:o,larger:a,largerEq:l,add:u,isPositive:c}=n;return e(s8,{string:d,"string, boolean":d,"number, number":function(y,p){return f(h(y,p,1,!1))},"number, number, number":function(y,p,S){return f(h(y,p,S,!1))},"number, number, boolean":function(y,p,S){return f(h(y,p,1,S))},"number, number, number, boolean":function(y,p,S,b){return f(h(y,p,S,b))},"BigNumber, BigNumber":function(y,p){var S=y.constructor;return f(h(y,p,new S(1),!1))},"BigNumber, BigNumber, BigNumber":function(y,p,S){return f(h(y,p,S,!1))},"BigNumber, BigNumber, boolean":function(y,p,S){var b=y.constructor;return f(h(y,p,new b(1),S))},"BigNumber, BigNumber, BigNumber, boolean":function(y,p,S,b){return f(h(y,p,S,b))},"Unit, Unit, Unit":function(y,p,S){return f(h(y,p,S,!1))},"Unit, Unit, Unit, boolean":function(y,p,S,b){return f(h(y,p,S,b))}});function f(v){return t.matrix==="Matrix"?r?r(v):YG():v}function d(v,y){var p=m(v);if(!p)throw new SyntaxError('String "'+v+'" is no valid range');return t.number==="BigNumber"?(i===void 0&&dR(),f(h(i(p.start),i(p.end),i(p.step)))):f(h(p.start,p.end,p.step,y))}function h(v,y,p,S){for(var b=[],g=c(p)?S?o:s:S?l:a,w=v;g(w,y);)b.push(w),w=u(w,p);return b}function m(v){var y=v.split(":"),p=y.map(function(b){return Number(b)}),S=p.some(function(b){return isNaN(b)});if(S)return null;switch(p.length){case 2:return{start:p[0],end:p[1],step:1};case 3:return{start:p[0],end:p[2],step:p[1]};default:return null}}}),o8="reshape",Sde=["typed","isInteger","matrix"],_de=ue(o8,Sde,n=>{var{typed:e,isInteger:t}=n;return e(o8,{"Matrix, Array":function(i,s){return i.reshape(s,!0)},"Array, Array":function(i,s){return s.forEach(function(o){if(!t(o))throw new TypeError("Invalid size for dimension: "+o)}),oR(i,s)}})}),Ede="resize",Mde=["config","matrix"],Cde=ue(Ede,Mde,n=>{var{config:e,matrix:t}=n;return function(s,o,a){if(arguments.length!==2&&arguments.length!==3)throw new zu("resize",arguments.length,2,3);if($t(o)&&(o=o.valueOf()),Jt(o[0])&&(o=o.map(function(c){return Jt(c)?c.toNumber():c})),$t(s))return s.resize(o,a,!0);if(typeof s=="string")return r(s,o,a);var l=Array.isArray(s)?!1:e.matrix!=="Array";if(o.length===0){for(;Array.isArray(s);)s=s[0];return Yt(s)}else{Array.isArray(s)||(s=[s]),s=Yt(s);var u=um(s,o,a);return l?t(u):u}};function r(i,s,o){if(o!==void 0){if(typeof o!="string"||o.length!==1)throw new TypeError("Single character expected as defaultValue")}else o=" ";if(s.length!==1)throw new an(s.length,1);var a=s[0];if(typeof a!="number"||!kt(a))throw new TypeError("Invalid size, must contain positive integers (size: "+un(s)+")");if(i.length>a)return i.substring(0,a);if(i.length<a){for(var l=i,u=0,c=a-i.length;u<c;u++)l+=o;return l}else return i}}),a8="rotate",Ade=["typed","multiply","rotationMatrix"],Tde=ue(a8,Ade,n=>{var{typed:e,multiply:t,rotationMatrix:r}=n;return e(a8,{"Array , number | BigNumber | Complex | Unit":function(o,a){i(o,2);var l=t(r(a),o);return l.toArray()},"Matrix , number | BigNumber | Complex | Unit":function(o,a){return i(o,2),t(r(a),o)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(o,a,l){i(o,3);var u=t(r(a,l),o);return u},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(o,a,l){return i(o,3),t(r(a,l),o)}});function i(s,o){var a=Array.isArray(s)?nn(s):s.size();if(a.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(o));if(a.length===2&&a[1]!==1)throw new RangeError("Vector must be of dimensions 1x".concat(o));if(a[0]!==o)throw new RangeError("Vector must be of dimensions 1x".concat(o))}}),l8="rotationMatrix",Dde=["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],Nde=ue(l8,Dde,n=>{var{typed:e,config:t,multiplyScalar:r,addScalar:i,unaryMinus:s,norm:o,BigNumber:a,matrix:l,DenseMatrix:u,SparseMatrix:c,cos:f,sin:d}=n;return e(l8,{"":function(){return t.matrix==="Matrix"?l([]):[]},string:function(b){return l(b)},"number | BigNumber | Complex | Unit":function(b){return h(b,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(b,g){return h(b,g)},"number | BigNumber | Complex | Unit, Array":function(b,g){var w=l(g);return m(w),p(b,w,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(b,g){m(g);var w=g.storage()||(t.matrix==="Matrix"?"dense":void 0);return p(b,g,w)},"number | BigNumber | Complex | Unit, Array, string":function(b,g,w){var x=l(g);return m(x),p(b,x,w)},"number | BigNumber | Complex | Unit, Matrix, string":function(b,g,w){return m(g),p(b,g,w)}});function h(S,b){var g=Jt(S),w=g?new a(-1):-1,x=f(S),M=d(S),A=[[x,r(w,M)],[M,x]];return y(A,b)}function m(S){var b=S.size();if(b.length<1||b[0]!==3)throw new RangeError("Vector must be of dimensions 1x3")}function v(S){return S.reduce((b,g)=>r(b,g))}function y(S,b){if(b){if(b==="sparse")return new c(S);if(b==="dense")return new u(S);throw new TypeError('Unknown matrix type "'.concat(b,'"'))}return S}function p(S,b,g){var w=o(b);if(w===0)throw new RangeError("Rotation around zero vector");var x=Jt(S)?a:null,M=x?new x(1):1,A=x?new x(-1):-1,N=x?new x(b.get([0])/w):b.get([0])/w,C=x?new x(b.get([1])/w):b.get([1])/w,T=x?new x(b.get([2])/w):b.get([2])/w,R=f(S),$=i(M,s(R)),B=d(S),z=i(R,v([N,N,$])),D=i(v([N,C,$]),v([A,T,B])),I=i(v([N,T,$]),v([C,B])),U=i(v([N,C,$]),v([T,B])),L=i(R,v([C,C,$])),q=i(v([C,T,$]),v([A,N,B])),Z=i(v([N,T,$]),v([A,C,B])),J=i(v([C,T,$]),v([N,B])),Y=i(R,v([T,T,$])),ee=[[z,D,I],[U,L,q],[Z,J,Y]];return y(ee,g)}}),u8="row",Pde=["typed","Index","matrix","range"],ZG=ue(u8,Pde,n=>{var{typed:e,Index:t,matrix:r,range:i}=n;return e(u8,{"Matrix, number":s,"Array, number":function(a,l){return s(r(Yt(a)),l).valueOf()}});function s(o,a){if(o.size().length!==2)throw new Error("Only two dimensional matrix is supported");Un(a,o.size()[0]);var l=i(0,o.size()[1]),u=new t(a,l),c=o.subset(u);return $t(c)?c:r([[c]])}}),c8="size",Rde=["typed","config","?matrix"],Ode=ue(c8,Rde,n=>{var{typed:e,config:t,matrix:r}=n;return e(c8,{Matrix:function(s){return s.create(s.size())},Array:nn,string:function(s){return t.matrix==="Array"?[s.length]:r([s.length])},"number | Complex | BigNumber | Unit | boolean | null":function(s){return t.matrix==="Array"?[]:r?r([]):YG()}})}),f8="squeeze",kde=["typed","matrix"],Ide=ue(f8,kde,n=>{var{typed:e,matrix:t}=n;return e(f8,{Array:function(i){return OS(Yt(i))},Matrix:function(i){var s=OS(i.toArray());return Array.isArray(s)?t(s):s},any:function(i){return Yt(i)}})}),d8="subset",Lde=["typed","matrix","zeros","add"],JG=ue(d8,Lde,n=>{var{typed:e,matrix:t,zeros:r,add:i}=n;return e(d8,{"Matrix, Index":function(a,l){return lm(l)?t():(RS(a,l),a.subset(l))},"Array, Index":e.referTo("Matrix, Index",function(o){return function(a,l){var u=o(t(a),l);return l.isScalar()?u:u.valueOf()}}),"Object, Index":Bde,"string, Index":Fde,"Matrix, Index, any, any":function(a,l,u,c){return lm(l)?a:(RS(a,l),a.clone().subset(l,s(u,l),c))},"Array, Index, any, any":e.referTo("Matrix, Index, any, any",function(o){return function(a,l,u,c){var f=o(t(a),l,u,c);return f.isMatrix?f.valueOf():f}}),"Array, Index, any":e.referTo("Matrix, Index, any, any",function(o){return function(a,l,u){return o(t(a),l,u,void 0).valueOf()}}),"Matrix, Index, any":e.referTo("Matrix, Index, any, any",function(o){return function(a,l,u){return o(a,l,u,void 0)}}),"string, Index, string":h8,"string, Index, string, string":h8,"Object, Index, any":zde});function s(o,a){if(typeof o=="string")throw new Error("can't boradcast a string");if(a._isScalar)return o;var l=a.size();if(l.every(u=>u>0))try{return i(o,r(l))}catch{return o}else return o}});function Fde(n,e){if(!xy(e))throw new TypeError("Index expected");if(lm(e))return"";if(RS(Array.from(n),e),e.size().length!==1)throw new an(e.size().length,1);var t=n.length;Un(e.min()[0],t),Un(e.max()[0],t);var r=e.dimension(0),i="";return r.forEach(function(s){i+=n.charAt(s)}),i}function h8(n,e,t,r){if(!e||e.isIndex!==!0)throw new TypeError("Index expected");if(lm(e))return n;if(RS(Array.from(n),e),e.size().length!==1)throw new an(e.size().length,1);if(r!==void 0){if(typeof r!="string"||r.length!==1)throw new TypeError("Single character expected as defaultValue")}else r=" ";var i=e.dimension(0),s=i.size()[0];if(s!==t.length)throw new an(i.size()[0],t.length);var o=n.length;Un(e.min()[0]),Un(e.max()[0]);for(var a=[],l=0;l<o;l++)a[l]=n.charAt(l);if(i.forEach(function(f,d){a[f]=t.charAt(d[0])}),a.length>o)for(var u=o-1,c=a.length;u<c;u++)a[u]||(a[u]=r);return a.join("")}function Bde(n,e){if(!lm(e)){if(e.size().length!==1)throw new an(e.size(),1);var t=e.dimension(0);if(typeof t!="string")throw new TypeError("String expected as index to retrieve an object property");return As(n,t)}}function zde(n,e,t){if(lm(e))return n;if(e.size().length!==1)throw new an(e.size(),1);var r=e.dimension(0);if(typeof r!="string")throw new TypeError("String expected as index to retrieve an object property");var i=Yt(n);return om(i,r,t),i}var p8="transpose",Ude=["typed","matrix"],$de=ue(p8,Ude,n=>{var{typed:e,matrix:t}=n;return e(p8,{Array:o=>r(t(o)).valueOf(),Matrix:r,any:Yt});function r(o){var a=o.size(),l;switch(a.length){case 1:l=o.clone();break;case 2:{var u=a[0],c=a[1];if(c===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+un(a)+")");switch(o.storage()){case"dense":l=i(o,u,c);break;case"sparse":l=s(o,u,c);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+un(a)+")")}return l}function i(o,a,l){for(var u=o._data,c=[],f,d=0;d<l;d++){f=c[d]=[];for(var h=0;h<a;h++)f[h]=Yt(u[h][d])}return o.createDenseMatrix({data:c,size:[l,a],datatype:o._datatype})}function s(o,a,l){for(var u=o._values,c=o._index,f=o._ptr,d=u?[]:void 0,h=[],m=[],v=[],y=0;y<a;y++)v[y]=0;var p,S,b;for(p=0,S=c.length;p<S;p++)v[c[p]]++;for(var g=0,w=0;w<a;w++)m.push(g),g+=v[w],v[w]=m[w];for(m.push(g),b=0;b<l;b++)for(var x=f[b],M=f[b+1],A=x;A<M;A++){var N=v[c[A]]++;h[N]=b,u&&(d[N]=Yt(u[A]))}return o.createSparseMatrix({values:d,index:h,ptr:m,size:[l,a],datatype:o._datatype})}}),m8="ctranspose",Vde=["typed","transpose","conj"],Hde=ue(m8,Vde,n=>{var{typed:e,transpose:t,conj:r}=n;return e(m8,{any:function(s){return r(t(s))}})}),g8="zeros",Wde=["typed","config","matrix","BigNumber"],jde=ue(g8,Wde,n=>{var{typed:e,config:t,matrix:r,BigNumber:i}=n;return e(g8,{"":function(){return t.matrix==="Array"?s([]):s([],"default")},"...number | BigNumber | string":function(u){var c=u[u.length-1];if(typeof c=="string"){var f=u.pop();return s(u,f)}else return t.matrix==="Array"?s(u):s(u,"default")},Array:s,Matrix:function(u){var c=u.storage();return s(u.valueOf(),c)},"Array | Matrix, string":function(u,c){return s(u.valueOf(),c)}});function s(l,u){var c=o(l),f=c?new i(0):0;if(a(l),u){var d=r(u);return l.length>0?d.resize(l,f):d}else{var h=[];return l.length>0?um(h,l,f):h}}function o(l){var u=!1;return l.forEach(function(c,f,d){Jt(c)&&(u=!0,d[f]=c.toNumber())}),u}function a(l){l.forEach(function(u){if(typeof u!="number"||!kt(u)||u<0)throw new Error("Parameters in function zeros must be positive integers")})}}),v8="fft",Gde=["typed","matrix","addScalar","multiplyScalar","divideScalar","exp","tau","i","dotDivide","conj","pow","ceil","log2"],qde=ue(v8,Gde,n=>{var{typed:e,matrix:t,addScalar:r,multiplyScalar:i,divideScalar:s,exp:o,tau:a,i:l,dotDivide:u,conj:c,pow:f,ceil:d,log2:h}=n;return e(v8,{Array:m,Matrix:function(b){return b.create(m(b.toArray()))}});function m(S){var b=nn(S);return b.length===1?p(S,b[0]):v(S.map(g=>m(g,b.slice(1))),0)}function v(S,b){var g=nn(S);if(b!==0)return new Array(g[0]).fill(0).map((x,M)=>v(S[M],b-1));if(g.length===1)return p(S);function w(x){var M=nn(x);return new Array(M[1]).fill(0).map((A,N)=>new Array(M[0]).fill(0).map((C,T)=>x[T][N]))}return w(v(w(S),1))}function y(S){for(var b=S.length,g=o(s(i(-1,i(l,a)),b)),w=[],x=1-b;x<b;x++)w.push(f(g,s(f(x,2),2)));for(var M=f(2,d(h(b+b-1))),A=[...new Array(b).fill(0).map((D,I)=>i(S[I],w[b-1+I])),...new Array(M-b).fill(0)],N=[...new Array(b+b-1).fill(0).map((D,I)=>s(1,w[I])),...new Array(M-(b+b-1)).fill(0)],C=p(A),T=p(N),R=new Array(M).fill(0).map((D,I)=>i(C[I],T[I])),$=u(c(m(c(R))),M),B=[],z=b-1;z<b+b-1;z++)B.push(i($[z],w[z]));return B}function p(S){var b=S.length;if(b===1)return[S[0]];if(b%2===0){for(var g=[...p(S.filter((A,N)=>N%2===0)),...p(S.filter((A,N)=>N%2===1))],w=0;w<b/2;w++){var x=g[w],M=i(g[w+b/2],o(i(i(a,l),s(-w,b))));g[w]=r(x,M),g[w+b/2]=r(x,i(-1,M))}return g}else return y(S)}}),y8="ifft",Xde=["typed","fft","dotDivide","conj"],Yde=ue(y8,Xde,n=>{var{typed:e,fft:t,dotDivide:r,conj:i}=n;return e(y8,{"Array | Matrix":function(o){var a=$t(o)?o.size():nn(o);return r(i(t(i(o))),a.reduce((l,u)=>l*u,1))}})});function Pd(n){"@babel/helpers - typeof";return Pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pd(n)}function Kde(n,e){if(Pd(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(Pd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function QG(n){var e=Kde(n,"string");return Pd(e)=="symbol"?e:e+""}function mr(n,e,t){return(e=QG(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function x8(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Zde(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?x8(Object(t),!0).forEach(function(r){mr(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):x8(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var Jde="solveODE",Qde=["typed","add","subtract","multiply","divide","max","map","abs","isPositive","isNegative","larger","smaller","matrix","bignumber","unaryMinus"],ehe=ue(Jde,Qde,n=>{var{typed:e,add:t,subtract:r,multiply:i,divide:s,max:o,map:a,abs:l,isPositive:u,isNegative:c,larger:f,smaller:d,matrix:h,bignumber:m,unaryMinus:v}=n;function y(A){return function(N,C,T,R){var $=!(C.length===2&&(C.every(x)||C.every(Hs)));if($)throw new Error('"tspan" must be an Array of two numeric values or two units [tStart, tEnd]');var B=C[0],z=C[1],D=f(z,B),I=R.firstStep;if(I!==void 0&&!u(I))throw new Error('"firstStep" must be positive');var U=R.maxStep;if(U!==void 0&&!u(U))throw new Error('"maxStep" must be positive');var L=R.minStep;if(L&&c(L))throw new Error('"minStep" must be positive or zero');var q=[B,z,I,L,U].filter(X=>X!==void 0);if(!(q.every(x)||q.every(Hs)))throw new Error('Inconsistent type of "t" dependant variables');for(var Z=1,J=R.tol?R.tol:1e-4,Y=R.minDelta?R.minDelta:.2,ee=R.maxDelta?R.maxDelta:5,ae=R.maxIter?R.maxIter:1e4,ce=[B,z,...T,U,L].some(Jt),[pe,we,me,Ae]=ce?[m(A.a),m(A.c),m(A.b),m(A.bp)]:[A.a,A.c,A.b,A.bp],Ee=I?D?I:v(I):s(r(z,B),Z),re=[B],Pe=[T],Re=r(me,Ae),te=0,ie=0,Me=g(D),oe=w(D);Me(re[te],z);){var G=[];Ee=oe(re[te],z,Ee),G.push(N(re[te],Pe[te]));for(var j=1;j<we.length;++j)G.push(N(t(re[te],i(we[j],Ee)),t(Pe[te],i(Ee,pe[j],G))));var de=o(l(a(i(Re,G),X=>Hs(X)?X.value:X)));de<J&&J/de>1/4&&(re.push(t(re[te],Ee)),Pe.push(t(Pe[te],i(Ee,me,G))),te++);var Te=.84*(J/de)**(1/5);if(d(Te,Y)?Te=Y:f(Te,ee)&&(Te=ee),Te=ce?m(Te):Te,Ee=i(Ee,Te),U&&f(l(Ee),U)?Ee=D?U:v(U):L&&d(l(Ee),L)&&(Ee=D?L:v(L)),ie++,ie>ae)throw new Error("Maximum number of iterations reached, try changing options")}return{t:re,y:Pe}}}function p(A,N,C,T){var R=[[],[.5],[0,.75],[.2222222222222222,.3333333333333333,.4444444444444444]],$=[null,1/2,3/4,1],B=[2/9,1/3,4/9,0],z=[7/24,1/4,1/3,1/8],D={a:R,c:$,b:B,bp:z};return y(D)(A,N,C,T)}function S(A,N,C,T){var R=[[],[.2],[.075,.225],[.9777777777777777,-3.7333333333333334,3.5555555555555554],[2.9525986892242035,-11.595793324188385,9.822892851699436,-.2908093278463649],[2.8462752525252526,-10.757575757575758,8.906422717743473,.2784090909090909,-.2735313036020583],[.09114583333333333,0,.44923629829290207,.6510416666666666,-.322376179245283,.13095238095238096]],$=[null,1/5,3/10,4/5,8/9,1,1],B=[35/384,0,500/1113,125/192,-2187/6784,11/84,0],z=[5179/57600,0,7571/16695,393/640,-92097/339200,187/2100,1/40],D={a:R,c:$,b:B,bp:z};return y(D)(A,N,C,T)}function b(A,N,C,T){var R=T.method?T.method:"RK45",$={RK23:p,RK45:S};if(R.toUpperCase()in $){var B=Zde({},T);return delete B.method,$[R.toUpperCase()](A,N,C,B)}else{var z=Object.keys($).map(I=>'"'.concat(I,'"')),D="".concat(z.slice(0,-1).join(", ")," and ").concat(z.slice(-1));throw new Error('Unavailable method "'.concat(R,'". Available methods are ').concat(D))}}function g(A){return A?d:f}function w(A){var N=A?f:d;return function(C,T,R){var $=t(C,R);return N($,T)?r(T,C):R}}function x(A){return Jt(A)||tn(A)}function M(A,N,C,T){var R=b(A,N.toArray(),C.toArray(),T);return{t:h(R.t),y:h(R.y)}}return e("solveODE",{"function, Array, Array, Object":b,"function, Matrix, Matrix, Object":M,"function, Array, Array":(A,N,C)=>b(A,N,C,{}),"function, Matrix, Matrix":(A,N,C)=>M(A,N,C,{}),"function, Array, number | BigNumber | Unit":(A,N,C)=>{var T=b(A,N,[C],{});return{t:T.t,y:T.y.map(R=>R[0])}},"function, Matrix, number | BigNumber | Unit":(A,N,C)=>{var T=b(A,N.toArray(),[C],{});return{t:h(T.t),y:h(T.y.map(R=>R[0]))}},"function, Array, number | BigNumber | Unit, Object":(A,N,C,T)=>{var R=b(A,N,[C],T);return{t:R.t,y:R.y.map($=>$[0])}},"function, Matrix, number | BigNumber | Unit, Object":(A,N,C,T)=>{var R=b(A,N.toArray(),[C],T);return{t:h(R.t),y:h(R.y.map($=>$[0]))}}})}),the="erf",nhe=["typed"],rhe=ue(the,nhe,n=>{var{typed:e}=n;return e("name",{number:function(o){var a=Math.abs(o);return a>=ohe?Ec(o):a<=ihe?Ec(o)*t(a):a<=4?Ec(o)*(1-r(a)):Ec(o)*(1-i(a))},"Array | Matrix":e.referToSelf(s=>o=>cn(o,s))});function t(s){var o=s*s,a=Zl[0][4]*o,l=o,u;for(u=0;u<3;u+=1)a=(a+Zl[0][u])*o,l=(l+bh[0][u])*o;return s*(a+Zl[0][3])/(l+bh[0][3])}function r(s){var o=Zl[1][8]*s,a=s,l;for(l=0;l<7;l+=1)o=(o+Zl[1][l])*s,a=(a+bh[1][l])*s;var u=(o+Zl[1][7])/(a+bh[1][7]),c=parseInt(s*16)/16,f=(s-c)*(s+c);return Math.exp(-c*c)*Math.exp(-f)*u}function i(s){var o=1/(s*s),a=Zl[2][5]*o,l=o,u;for(u=0;u<4;u+=1)a=(a+Zl[2][u])*o,l=(l+bh[2][u])*o;var c=o*(a+Zl[2][4])/(l+bh[2][4]);c=(she-c)/s,o=parseInt(s*16)/16;var f=(s-o)*(s+o);return Math.exp(-o*o)*Math.exp(-f)*c}}),ihe=.46875,she=.5641895835477563,Zl=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,21531153547440383e-24],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],bh=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],ohe=Math.pow(2,53),b8="zeta",ahe=["typed","config","multiply","pow","divide","factorial","equal","smallerEq","isNegative","gamma","sin","subtract","add","?Complex","?BigNumber","pi"],lhe=ue(b8,ahe,n=>{var{typed:e,config:t,multiply:r,pow:i,divide:s,factorial:o,equal:a,smallerEq:l,isNegative:u,gamma:c,sin:f,subtract:d,add:h,Complex:m,BigNumber:v,pi:y}=n;return e(b8,{number:x=>p(x,M=>M,()=>20),BigNumber:x=>p(x,M=>new v(M),()=>Math.abs(Math.log10(t.epsilon))),Complex:S});function p(x,M,A){return a(x,0)?M(-.5):a(x,1)?M(NaN):isFinite(x)?b(x,M,A,N=>N):u(x)?M(NaN):M(1)}function S(x){return x.re===0&&x.im===0?new m(-.5):x.re===1?new m(NaN,NaN):x.re===1/0&&x.im===0?new m(1):x.im===1/0||x.re===-1/0?new m(NaN,NaN):b(x,M=>M,M=>Math.round(1.3*15+.9*Math.abs(M.im)),M=>M.re)}function b(x,M,A,N){var C=A(x);if(N(x)>-(C-1)/2)return w(x,M(C),M);var T=r(i(2,x),i(M(y),d(x,1)));return T=r(T,f(r(s(M(y),2),x))),T=r(T,c(d(1,x))),r(T,b(d(1,x),M,A,N))}function g(x,M){for(var A=x,N=x;l(N,M);N=h(N,1)){var C=s(r(o(h(M,d(N,1))),i(4,N)),r(o(d(M,N)),o(r(2,N))));A=h(A,C)}return r(M,A)}function w(x,M,A){for(var N=s(1,r(g(A(0),M),d(1,i(2,d(1,x))))),C=A(0),T=A(1);l(T,M);T=h(T,1))C=h(C,s(r((-1)**(T-1),g(T,M)),i(T,x)));return r(N,C)}}),w8="mode",uhe=["typed","isNaN","isNumeric"],che=ue(w8,uhe,n=>{var{typed:e,isNaN:t,isNumeric:r}=n;return e(w8,{"Array | Matrix":i,"...":function(o){return i(o)}});function i(s){s=wn(s.valueOf());var o=s.length;if(o===0)throw new Error("Cannot calculate mode of an empty array");for(var a={},l=[],u=0,c=0;c<s.length;c++){var f=s[c];if(r(f)&&t(f))throw new Error("Cannot calculate mode of an array containing NaN values");f in a||(a[f]=0),a[f]++,a[f]===u?l.push(f):a[f]>u&&(u=a[f],l=[f])}return l}});function Ps(n,e,t){var r;return String(n).includes("Unexpected type")?(r=arguments.length>2?" (type: "+Wn(t)+", value: "+JSON.stringify(t)+")":" (type: "+n.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+r)):String(n).includes("complex numbers")?(r=arguments.length>2?" (type: "+Wn(t)+", value: "+JSON.stringify(t)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+r)):n}var S8="prod",fhe=["typed","config","multiplyScalar","numeric"],dhe=ue(S8,fhe,n=>{var{typed:e,config:t,multiplyScalar:r,numeric:i}=n;return e(S8,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(a,l){throw new Error("prod(A, dim) is not yet supported")},"...":function(a){return s(a)}});function s(o){var a;if(Au(o,function(l){try{a=a===void 0?l:r(a,l)}catch(u){throw Ps(u,"prod",l)}}),typeof a=="string"&&(a=i(a,t.number)),a===void 0)throw new Error("Cannot calculate prod of an empty array");return a}}),_8="format",hhe=["typed"],phe=ue(_8,hhe,n=>{var{typed:e}=n;return e(_8,{any:un,"any, Object | function | number | BigNumber":un})}),E8="bin",mhe=["typed","format"],ghe=ue(E8,mhe,n=>{var{typed:e,format:t}=n;return e(E8,{"number | BigNumber":function(i){return t(i,{notation:"bin"})},"number | BigNumber, number | BigNumber":function(i,s){return t(i,{notation:"bin",wordSize:s})}})}),M8="oct",vhe=["typed","format"],yhe=ue(M8,vhe,n=>{var{typed:e,format:t}=n;return e(M8,{"number | BigNumber":function(i){return t(i,{notation:"oct"})},"number | BigNumber, number | BigNumber":function(i,s){return t(i,{notation:"oct",wordSize:s})}})}),C8="hex",xhe=["typed","format"],bhe=ue(C8,xhe,n=>{var{typed:e,format:t}=n;return e(C8,{"number | BigNumber":function(i){return t(i,{notation:"hex"})},"number | BigNumber, number | BigNumber":function(i,s){return t(i,{notation:"hex",wordSize:s})}})}),eq=/\$([\w.]+)/g,A8="print",whe=["typed"],tq=ue(A8,whe,n=>{var{typed:e}=n;return e(A8,{"string, Object | Array":T8,"string, Object | Array, number | Object":T8})});function T8(n,e,t){return n.replace(eq,function(r,i){var s=i.split("."),o=e[s.shift()];for(o!==void 0&&o.isMatrix&&(o=o.toArray());s.length&&o!==void 0;){var a=s.shift();o=a?o[a]:o+"."}return o!==void 0?Pi(o)?o:un(o,t):r})}var D8="to",She=["typed","matrix","concat"],_he=ue(D8,She,n=>{var{typed:e,matrix:t,concat:r}=n,i=Yn({typed:e,matrix:t,concat:r});return e(D8,{"Unit, Unit | string":(s,o)=>s.to(o)},i({Ds:!0}))}),N8="isPrime",Ehe=["typed"],Mhe=ue(N8,Ehe,n=>{var{typed:e}=n;return e(N8,{number:function(r){if(r*0!==0)return!1;if(r<=3)return r>1;if(r%2===0||r%3===0)return!1;for(var i=5;i*i<=r;i+=6)if(r%i===0||r%(i+2)===0)return!1;return!0},BigNumber:function(r){if(r.toNumber()*0!==0)return!1;if(r.lte(3))return r.gt(1);if(r.mod(2).eq(0)||r.mod(3).eq(0))return!1;if(r.lt(Math.pow(2,32))){for(var i=r.toNumber(),s=5;s*s<=i;s+=6)if(i%s===0||i%(s+2)===0)return!1;return!0}function o(S,b,g){for(var w=1;!b.eq(0);)b.mod(2).eq(0)?(b=b.div(2),S=S.mul(S).mod(g)):(b=b.sub(1),w=S.mul(w).mod(g));return w}var a=r.constructor.clone({precision:r.toFixed(0).length*2});r=new a(r);for(var l=0,u=r.sub(1);u.mod(2).eq(0);)u=u.div(2),l+=1;var c=null;if(r.lt("3317044064679887385961981"))c=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter(S=>S<r);else{var f=Math.min(r.toNumber()-2,Math.floor(2*Math.pow(r.toFixed(0).length*Math.log(10),2)));c=[];for(var d=2;d<=f;d+=1)c.push(f)}for(var h=0;h<c.length;h+=1){var m=c[h],v=o(r.sub(r).add(m),u,r);if(!v.eq(1)){for(var y=0,p=v;!p.eq(r.sub(1));y+=1,p=p.mul(p).mod(r))if(y===l-1)return!1}}return!0},"Array | Matrix":e.referToSelf(t=>r=>cn(r,t))})}),Che="numeric",Ahe=["number","?bignumber","?fraction"],The=ue(Che,Ahe,n=>{var{number:e,bignumber:t,fraction:r}=n,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},s={number:o=>e(o),BigNumber:t?o=>t(o):dR,Fraction:r?o=>r(o):XG};return function(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",u=arguments.length>2?arguments[2]:void 0;if(u!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=Wn(a);if(!(c in i))throw new TypeError("Cannot convert "+a+' of type "'+c+'"; valid input types are '+Object.keys(i).join(", "));if(!(l in s))throw new TypeError("Cannot convert "+a+' to type "'+l+'"; valid output types are '+Object.keys(s).join(", "));return l===c?a:s[l](a)}}),P8="divideScalar",Dhe=["typed","numeric"],Nhe=ue(P8,Dhe,n=>{var{typed:e,numeric:t}=n;return e(P8,{"number, number":function(i,s){return i/s},"Complex, Complex":function(i,s){return i.div(s)},"BigNumber, BigNumber":function(i,s){return i.div(s)},"Fraction, Fraction":function(i,s){return i.div(s)},"Unit, number | Complex | Fraction | BigNumber | Unit":(r,i)=>r.divide(i),"number | Fraction | Complex | BigNumber, Unit":(r,i)=>i.divideInto(r)})}),R8="pow",Phe=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],Rhe=ue(R8,Phe,n=>{var{typed:e,config:t,identity:r,multiply:i,matrix:s,inv:o,number:a,fraction:l,Complex:u}=n;return e(R8,{"number, number":c,"Complex, Complex":function(m,v){return m.pow(v)},"BigNumber, BigNumber":function(m,v){return v.isInteger()||m>=0||t.predictable?m.pow(v):new u(m.toNumber(),0).pow(v.toNumber(),0)},"Fraction, Fraction":function(m,v){var y=m.pow(v);if(y!=null)return y;if(t.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return c(m.valueOf(),v.valueOf())},"Array, number":f,"Array, BigNumber":function(m,v){return f(m,v.toNumber())},"Matrix, number":d,"Matrix, BigNumber":function(m,v){return d(m,v.toNumber())},"Unit, number | BigNumber":function(m,v){return m.pow(v)}});function c(h,m){if(t.predictable&&!kt(m)&&h<0)try{var v=l(m),y=a(v);if((m===y||Math.abs((m-y)/m)<1e-14)&&v.d%2===1)return(v.n%2===0?1:-1)*Math.pow(-h,m)}catch{}return t.predictable&&(h<-1&&m===1/0||h>-1&&h<0&&m===-1/0)?NaN:kt(m)||h>=0||t.predictable?iG(h,m):h*h<1&&m===1/0||h*h>1&&m===-1/0?0:new u(h,0).pow(m,0)}function f(h,m){if(!kt(m))throw new TypeError("For A^b, b must be an integer (value is "+m+")");var v=nn(h);if(v.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+v.length+" dimensions)");if(v[0]!==v[1])throw new Error("For A^b, A must be square (size is "+v[0]+"x"+v[1]+")");if(m<0)try{return f(o(h),-m)}catch(S){throw S.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+m+")"):S}for(var y=r(v[0]).valueOf(),p=h;m>=1;)(m&1)===1&&(y=i(p,y)),m>>=1,p=i(p,p);return y}function d(h,m){return s(f(h.valueOf(),m))}}),wh="Number of decimals in function round must be an integer",O8="round",Ohe=["typed","config","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],khe=ue(O8,Ohe,n=>{var{typed:e,config:t,matrix:r,equalScalar:i,zeros:s,BigNumber:o,DenseMatrix:a}=n,l=Ui({typed:e,equalScalar:i}),u=ci({typed:e,DenseMatrix:a}),c=Ua({typed:e});function f(d){return Math.abs(Sy(d).exponent)}return e(O8,{number:function(h){var m=Pg(h,f(t.epsilon)),v=Ns(h,m,t.epsilon)?m:h;return Pg(v)},"number, number":function(h,m){var v=f(t.epsilon);if(m>=v)return Pg(h,m);var y=Pg(h,v),p=Ns(h,y,t.epsilon)?y:h;return Pg(p,m)},"number, BigNumber":function(h,m){if(!m.isInteger())throw new TypeError(wh);return new o(h).toDecimalPlaces(m.toNumber())},Complex:function(h){return h.round()},"Complex, number":function(h,m){if(m%1)throw new TypeError(wh);return h.round(m)},"Complex, BigNumber":function(h,m){if(!m.isInteger())throw new TypeError(wh);var v=m.toNumber();return h.round(v)},BigNumber:function(h){var m=new o(h).toDecimalPlaces(f(t.epsilon)),v=aa(h,m,t.epsilon)?m:h;return v.toDecimalPlaces(0)},"BigNumber, BigNumber":function(h,m){if(!m.isInteger())throw new TypeError(wh);var v=f(t.epsilon);if(m>=v)return h.toDecimalPlaces(m.toNumber());var y=h.toDecimalPlaces(v),p=aa(h,y,t.epsilon)?y:h;return p.toDecimalPlaces(m.toNumber())},Fraction:function(h){return h.round()},"Fraction, number":function(h,m){if(m%1)throw new TypeError(wh);return h.round(m)},"Fraction, BigNumber":function(h,m){if(!m.isInteger())throw new TypeError(wh);return h.round(m.toNumber())},"Unit, number, Unit":e.referToSelf(d=>function(h,m,v){var y=h.toNumeric(v);return v.multiply(d(y,m))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(h,m,v)=>d(h,m.toNumber(),v)),"Unit, Unit":e.referToSelf(d=>(h,m)=>d(h,0,m)),"Array | Matrix, number, Unit":e.referToSelf(d=>(h,m,v)=>cn(h,y=>d(y,m,v))),"Array | Matrix, BigNumber, Unit":e.referToSelf(d=>(h,m,v)=>d(h,m.toNumber(),v)),"Array | Matrix, Unit":e.referToSelf(d=>(h,m)=>d(h,0,m)),"Array | Matrix":e.referToSelf(d=>h=>cn(h,d)),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>l(h,m,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>c(h,m,d,!1)),"Array, number | BigNumber":e.referToSelf(d=>(h,m)=>c(r(h),m,d,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":e.referToSelf(d=>(h,m)=>i(h,0)?s(m.size(),m.storage()):u(m,h,d,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":e.referToSelf(d=>(h,m)=>i(h,0)?s(m.size(),m.storage()):c(m,h,d,!0)),"number | Complex | BigNumber | Fraction, Array":e.referToSelf(d=>(h,m)=>c(r(m),h,d,!0).valueOf())})}),k8="log",Ihe=["config","typed","divideScalar","Complex"],Lhe=ue(k8,Ihe,n=>{var{typed:e,config:t,divideScalar:r,Complex:i}=n;return e(k8,{number:function(o){return o>=0||t.predictable?Ile(o):new i(o,0).log()},Complex:function(o){return o.log()},BigNumber:function(o){return!o.isNegative()||t.predictable?o.ln():new i(o.toNumber(),0).log()},"any, any":e.referToSelf(s=>(o,a)=>r(s(o),s(a)))})}),I8="log1p",Fhe=["typed","config","divideScalar","log","Complex"],Bhe=ue(I8,Fhe,n=>{var{typed:e,config:t,divideScalar:r,log:i,Complex:s}=n;return e(I8,{number:function(l){return l>=-1||t.predictable?koe(l):o(new s(l,0))},Complex:o,BigNumber:function(l){var u=l.plus(1);return!u.isNegative()||t.predictable?u.ln():o(new s(l.toNumber(),0))},"Array | Matrix":e.referToSelf(a=>l=>cn(l,a)),"any, any":e.referToSelf(a=>(l,u)=>r(a(l),i(u)))});function o(a){var l=a.re+1;return new s(Math.log(Math.sqrt(l*l+a.im*a.im)),Math.atan2(a.im,l))}}),L8="nthRoots",zhe=["config","typed","divideScalar","Complex"],Uhe=ue(L8,zhe,n=>{var{typed:e,config:t,divideScalar:r,Complex:i}=n,s=[function(l){return new i(l,0)},function(l){return new i(0,l)},function(l){return new i(-l,0)},function(l){return new i(0,-l)}];function o(a,l){if(l<0)throw new Error("Root must be greater than zero");if(l===0)throw new Error("Root must be non-zero");if(l%1!==0)throw new Error("Root must be an integer");if(a===0||a.abs()===0)return[new i(0,0)];var u=typeof a=="number",c;(u||a.re===0||a.im===0)&&(u?c=2*+(a<0):a.im===0?c=2*+(a.re<0):c=2*+(a.im<0)+1);for(var f=a.arg(),d=a.abs(),h=[],m=Math.pow(d,1/l),v=0;v<l;v++){var y=(c+4*v)/l;if(y===Math.round(y)){h.push(s[y%4](m));continue}h.push(new i({r:m,phi:(f+2*Math.PI*v)/l}))}return h}return e(L8,{Complex:function(l){return o(l,2)},"Complex, number":o})}),F8="dotPow",$he=["typed","equalScalar","matrix","pow","DenseMatrix","concat"],Vhe=ue(F8,$he,n=>{var{typed:e,equalScalar:t,matrix:r,pow:i,DenseMatrix:s,concat:o}=n,a=ks({typed:e}),l=Fl({typed:e,DenseMatrix:s}),u=Ui({typed:e,equalScalar:t}),c=ci({typed:e,DenseMatrix:s}),f=Yn({typed:e,matrix:r,concat:o}),d={};for(var h in i.signatures)Object.prototype.hasOwnProperty.call(i.signatures,h)&&!h.includes("Matrix")&&!h.includes("Array")&&(d[h]=i.signatures[h]);var m=e(d);return e(F8,f({elop:m,SS:l,DS:a,Ss:u,sS:c}))}),B8="dotDivide",Hhe=["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat"],Whe=ue(B8,Hhe,n=>{var{typed:e,matrix:t,equalScalar:r,divideScalar:i,DenseMatrix:s,concat:o}=n,a=$a({typed:e,equalScalar:r}),l=ks({typed:e}),u=Fl({typed:e,DenseMatrix:s}),c=Ui({typed:e,equalScalar:r}),f=ci({typed:e,DenseMatrix:s}),d=Yn({typed:e,matrix:t,concat:o});return e(B8,d({elop:i,SS:u,DS:l,SD:a,Ss:c,sS:f}))});function Ey(n){var{DenseMatrix:e}=n;return function(r,i,s){var o=r.size();if(o.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+un(o)+")");var a=o[0],l=o[1];if(a!==l)throw new RangeError("Matrix must be square (size: "+un(o)+")");var u=[];if($t(i)){var c=i.size(),f=i._data;if(c.length===1){if(c[0]!==a)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var d=0;d<a;d++)u[d]=[f[d]];return new e({data:u,size:[a,1],datatype:i._datatype})}if(c.length===2){if(c[0]!==a||c[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(d0(i)){if(s){u=[];for(var h=0;h<a;h++)u[h]=[f[h][0]];return new e({data:u,size:[a,1],datatype:i._datatype})}return i}if(_c(i)){for(var m=0;m<a;m++)u[m]=[0];for(var v=i._values,y=i._index,p=i._ptr,S=p[1],b=p[0];b<S;b++){var g=y[b];u[g][0]=v[b]}return new e({data:u,size:[a,1],datatype:i._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(_n(i)){var w=nn(i);if(w.length===1){if(w[0]!==a)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var x=0;x<a;x++)u[x]=[i[x]];return new e({data:u,size:[a,1]})}if(w.length===2){if(w[0]!==a||w[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var M=0;M<a;M++)u[M]=[i[M][0]];return new e({data:u,size:[a,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var z8="lsolve",jhe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],Ghe=ue(z8,jhe,n=>{var{typed:e,matrix:t,divideScalar:r,multiplyScalar:i,subtractScalar:s,equalScalar:o,DenseMatrix:a}=n,l=Ey({DenseMatrix:a});return e(z8,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return u(d,h)},"Array, Array | Matrix":function(d,h){var m=t(d),v=u(m,h);return v.valueOf()}});function u(f,d){d=l(f,d,!0);for(var h=d._data,m=f._size[0],v=f._size[1],y=[],p=f._data,S=0;S<v;S++){var b=h[S][0]||0,g=void 0;if(o(b,0))g=0;else{var w=p[S][S];if(o(w,0))throw new Error("Linear system cannot be solved since matrix is singular");g=r(b,w);for(var x=S+1;x<m;x++)h[x]=[s(h[x][0]||0,i(g,p[x][S]))]}y[S]=[g]}return new a({data:y,size:[m,1]})}function c(f,d){d=l(f,d,!0);for(var h=d._data,m=f._size[0],v=f._size[1],y=f._values,p=f._index,S=f._ptr,b=[],g=0;g<v;g++){var w=h[g][0]||0;if(o(w,0))b[g]=[0];else{for(var x=0,M=[],A=[],N=S[g],C=S[g+1],T=N;T<C;T++){var R=p[T];R===g?x=y[T]:R>g&&(M.push(y[T]),A.push(R))}if(o(x,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var $=r(w,x),B=0,z=A.length;B<z;B++){var D=A[B];h[D]=[s(h[D][0]||0,i($,M[B]))]}b[g]=[$]}}return new a({data:b,size:[m,1]})}}),U8="usolve",qhe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],Xhe=ue(U8,qhe,n=>{var{typed:e,matrix:t,divideScalar:r,multiplyScalar:i,subtractScalar:s,equalScalar:o,DenseMatrix:a}=n,l=Ey({DenseMatrix:a});return e(U8,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return u(d,h)},"Array, Array | Matrix":function(d,h){var m=t(d),v=u(m,h);return v.valueOf()}});function u(f,d){d=l(f,d,!0);for(var h=d._data,m=f._size[0],v=f._size[1],y=[],p=f._data,S=v-1;S>=0;S--){var b=h[S][0]||0,g=void 0;if(o(b,0))g=0;else{var w=p[S][S];if(o(w,0))throw new Error("Linear system cannot be solved since matrix is singular");g=r(b,w);for(var x=S-1;x>=0;x--)h[x]=[s(h[x][0]||0,i(g,p[x][S]))]}y[S]=[g]}return new a({data:y,size:[m,1]})}function c(f,d){d=l(f,d,!0);for(var h=d._data,m=f._size[0],v=f._size[1],y=f._values,p=f._index,S=f._ptr,b=[],g=v-1;g>=0;g--){var w=h[g][0]||0;if(o(w,0))b[g]=[0];else{for(var x=0,M=[],A=[],N=S[g],C=S[g+1],T=C-1;T>=N;T--){var R=p[T];R===g?x=y[T]:R<g&&(M.push(y[T]),A.push(R))}if(o(x,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var $=r(w,x),B=0,z=A.length;B<z;B++){var D=A[B];h[D]=[s(h[D][0],i($,M[B]))]}b[g]=[$]}}return new a({data:b,size:[m,1]})}}),$8="lsolveAll",Yhe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],Khe=ue($8,Yhe,n=>{var{typed:e,matrix:t,divideScalar:r,multiplyScalar:i,subtractScalar:s,equalScalar:o,DenseMatrix:a}=n,l=Ey({DenseMatrix:a});return e($8,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return u(d,h)},"Array, Array | Matrix":function(d,h){var m=t(d),v=u(m,h);return v.map(y=>y.valueOf())}});function u(f,d){for(var h=[l(f,d,!0)._data.map(A=>A[0])],m=f._data,v=f._size[0],y=f._size[1],p=0;p<y;p++)for(var S=h.length,b=0;b<S;b++){var g=h[b];if(o(m[p][p],0))if(o(g[p],0)){if(b===0){var x=[...g];x[p]=1;for(var M=p+1;M<y;M++)x[M]=s(x[M],m[M][p]);h.push(x)}}else{if(b===0)return[];h.splice(b,1),b-=1,S-=1}else{g[p]=r(g[p],m[p][p]);for(var w=p+1;w<y;w++)g[w]=s(g[w],i(g[p],m[w][p]))}}return h.map(A=>new a({data:A.map(N=>[N]),size:[v,1]}))}function c(f,d){for(var h=[l(f,d,!0)._data.map(Z=>Z[0])],m=f._size[0],v=f._size[1],y=f._values,p=f._index,S=f._ptr,b=0;b<v;b++)for(var g=h.length,w=0;w<g;w++){for(var x=h[w],M=[],A=[],N=S[b],C=S[b+1],T=0,R=N;R<C;R++){var $=p[R];$===b?T=y[R]:$>b&&(M.push(y[R]),A.push($))}if(o(T,0))if(o(x[b],0)){if(w===0){var I=[...x];I[b]=1;for(var U=0,L=A.length;U<L;U++){var q=A[U];I[q]=s(I[q],M[U])}h.push(I)}}else{if(w===0)return[];h.splice(w,1),w-=1,g-=1}else{x[b]=r(x[b],T);for(var B=0,z=A.length;B<z;B++){var D=A[B];x[D]=s(x[D],i(x[b],M[B]))}}}return h.map(Z=>new a({data:Z.map(J=>[J]),size:[m,1]}))}}),V8="usolveAll",Zhe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],Jhe=ue(V8,Zhe,n=>{var{typed:e,matrix:t,divideScalar:r,multiplyScalar:i,subtractScalar:s,equalScalar:o,DenseMatrix:a}=n,l=Ey({DenseMatrix:a});return e(V8,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return u(d,h)},"Array, Array | Matrix":function(d,h){var m=t(d),v=u(m,h);return v.map(y=>y.valueOf())}});function u(f,d){for(var h=[l(f,d,!0)._data.map(A=>A[0])],m=f._data,v=f._size[0],y=f._size[1],p=y-1;p>=0;p--)for(var S=h.length,b=0;b<S;b++){var g=h[b];if(o(m[p][p],0))if(o(g[p],0)){if(b===0){var x=[...g];x[p]=1;for(var M=p-1;M>=0;M--)x[M]=s(x[M],m[M][p]);h.push(x)}}else{if(b===0)return[];h.splice(b,1),b-=1,S-=1}else{g[p]=r(g[p],m[p][p]);for(var w=p-1;w>=0;w--)g[w]=s(g[w],i(g[p],m[w][p]))}}return h.map(A=>new a({data:A.map(N=>[N]),size:[v,1]}))}function c(f,d){for(var h=[l(f,d,!0)._data.map(Z=>Z[0])],m=f._size[0],v=f._size[1],y=f._values,p=f._index,S=f._ptr,b=v-1;b>=0;b--)for(var g=h.length,w=0;w<g;w++){for(var x=h[w],M=[],A=[],N=S[b],C=S[b+1],T=0,R=C-1;R>=N;R--){var $=p[R];$===b?T=y[R]:$<b&&(M.push(y[R]),A.push($))}if(o(T,0))if(o(x[b],0)){if(w===0){var I=[...x];I[b]=1;for(var U=0,L=A.length;U<L;U++){var q=A[U];I[q]=s(I[q],M[U])}h.push(I)}}else{if(w===0)return[];h.splice(w,1),w-=1,g-=1}else{x[b]=r(x[b],T);for(var B=0,z=A.length;B<z;B++){var D=A[B];x[D]=s(x[D],i(x[b],M[B]))}}}return h.map(Z=>new a({data:Z.map(J=>[J]),size:[m,1]}))}}),Qhe="matAlgo08xS0Sid",epe=["typed","equalScalar"],hR=ue(Qhe,epe,n=>{var{typed:e,equalScalar:t}=n;return function(i,s,o){var a=i._values,l=i._index,u=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=s._values,h=s._index,m=s._ptr,v=s._size,y=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==v.length)throw new an(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");if(!a||!d)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var p=c[0],S=c[1],b,g=t,w=0,x=o;typeof f=="string"&&f===y&&f!=="mixed"&&(b=f,g=e.find(t,[b,b]),w=e.convert(0,b),x=e.find(o,[b,b]));for(var M=[],A=[],N=[],C=[],T=[],R,$,B,z,D=0;D<S;D++){N[D]=A.length;var I=D+1;for($=u[D],B=u[D+1],R=$;R<B;R++)z=l[R],T[z]=I,C[z]=a[R],A.push(z);for($=m[D],B=m[D+1],R=$;R<B;R++)z=h[R],T[z]===I&&(C[z]=x(C[z],d[R]));for(R=N[D];R<A.length;){z=A[R];var U=C[z];g(U,w)?A.splice(R,1):(M.push(U),R++)}}return N[S]=A.length,i.createSparseMatrix({values:M,index:A,ptr:N,size:[p,S],datatype:f===i._datatype&&y===s._datatype?b:void 0})}}),pR=ue("useMatrixForArrayScalar",["typed","matrix"],n=>{var{typed:e,matrix:t}=n;return{"Array, number":e.referTo("DenseMatrix, number",r=>(i,s)=>r(t(i),s).valueOf()),"Array, BigNumber":e.referTo("DenseMatrix, BigNumber",r=>(i,s)=>r(t(i),s).valueOf()),"number, Array":e.referTo("number, DenseMatrix",r=>(i,s)=>r(i,t(s)).valueOf()),"BigNumber, Array":e.referTo("BigNumber, DenseMatrix",r=>(i,s)=>r(i,t(s)).valueOf())}}),H8="leftShift",tpe=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],npe=ue(H8,tpe,n=>{var{typed:e,matrix:t,equalScalar:r,zeros:i,DenseMatrix:s,concat:o}=n,a=pf({typed:e}),l=$a({typed:e,equalScalar:r}),u=hR({typed:e,equalScalar:r}),c=Yd({typed:e,DenseMatrix:s}),f=Ui({typed:e,equalScalar:r}),d=Ua({typed:e}),h=Yn({typed:e,matrix:t,concat:o}),m=pR({typed:e,matrix:t});return e(H8,{"number, number":uG,"BigNumber, BigNumber":_fe,"SparseMatrix, number | BigNumber":e.referToSelf(v=>(y,p)=>r(p,0)?y.clone():f(y,p,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(y,p)=>r(p,0)?y.clone():d(y,p,v,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(v=>(y,p)=>r(y,0)?i(p.size(),p.storage()):c(p,y,v,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(v=>(y,p)=>r(y,0)?i(p.size(),p.storage()):d(p,y,v,!0))},m,h({SS:u,DS:a,SD:l}))}),W8="rightArithShift",rpe=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],ipe=ue(W8,rpe,n=>{var{typed:e,matrix:t,equalScalar:r,zeros:i,DenseMatrix:s,concat:o}=n,a=pf({typed:e}),l=$a({typed:e,equalScalar:r}),u=hR({typed:e,equalScalar:r}),c=Yd({typed:e,DenseMatrix:s}),f=Ui({typed:e,equalScalar:r}),d=Ua({typed:e}),h=Yn({typed:e,matrix:t,concat:o}),m=pR({typed:e,matrix:t});return e(W8,{"number, number":cG,"BigNumber, BigNumber":Efe,"SparseMatrix, number | BigNumber":e.referToSelf(v=>(y,p)=>r(p,0)?y.clone():f(y,p,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(y,p)=>r(p,0)?y.clone():d(y,p,v,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(v=>(y,p)=>r(y,0)?i(p.size(),p.storage()):c(p,y,v,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(v=>(y,p)=>r(y,0)?i(p.size(),p.storage()):d(p,y,v,!0))},m,h({SS:u,DS:a,SD:l}))}),j8="rightLogShift",spe=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],ope=ue(j8,spe,n=>{var{typed:e,matrix:t,equalScalar:r,zeros:i,DenseMatrix:s,concat:o}=n,a=pf({typed:e}),l=$a({typed:e,equalScalar:r}),u=hR({typed:e,equalScalar:r}),c=Yd({typed:e,DenseMatrix:s}),f=Ui({typed:e,equalScalar:r}),d=Ua({typed:e}),h=Yn({typed:e,matrix:t,concat:o}),m=pR({typed:e,matrix:t});return e(j8,{"number, number":fG,"SparseMatrix, number | BigNumber":e.referToSelf(v=>(y,p)=>r(p,0)?y.clone():f(y,p,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(y,p)=>r(p,0)?y.clone():d(y,p,v,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(v=>(y,p)=>r(y,0)?i(p.size(),p.storage()):c(p,y,v,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(v=>(y,p)=>r(y,0)?i(p.size(),p.storage()):d(p,y,v,!0))},m,h({SS:u,DS:a,SD:l}))}),G8="and",ape=["typed","matrix","equalScalar","zeros","not","concat"],nq=ue(G8,ape,n=>{var{typed:e,matrix:t,equalScalar:r,zeros:i,not:s,concat:o}=n,a=$a({typed:e,equalScalar:r}),l=wE({typed:e,equalScalar:r}),u=Ui({typed:e,equalScalar:r}),c=Ua({typed:e}),f=Yn({typed:e,matrix:t,concat:o});return e(G8,{"number, number":gG,"Complex, Complex":function(h,m){return(h.re!==0||h.im!==0)&&(m.re!==0||m.im!==0)},"BigNumber, BigNumber":function(h,m){return!h.isZero()&&!m.isZero()&&!h.isNaN()&&!m.isNaN()},"Unit, Unit":e.referToSelf(d=>(h,m)=>d(h.value||0,m.value||0)),"SparseMatrix, any":e.referToSelf(d=>(h,m)=>s(m)?i(h.size(),h.storage()):u(h,m,d,!1)),"DenseMatrix, any":e.referToSelf(d=>(h,m)=>s(m)?i(h.size(),h.storage()):c(h,m,d,!1)),"any, SparseMatrix":e.referToSelf(d=>(h,m)=>s(h)?i(h.size(),h.storage()):u(m,h,d,!0)),"any, DenseMatrix":e.referToSelf(d=>(h,m)=>s(h)?i(h.size(),h.storage()):c(m,h,d,!0)),"Array, any":e.referToSelf(d=>(h,m)=>d(t(h),m).valueOf()),"any, Array":e.referToSelf(d=>(h,m)=>d(h,t(m)).valueOf())},f({SS:l,DS:a}))}),VS="compare",lpe=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix","concat"],upe=ue(VS,lpe,n=>{var{typed:e,config:t,equalScalar:r,matrix:i,BigNumber:s,Fraction:o,DenseMatrix:a,concat:l}=n,u=ks({typed:e}),c=bE({typed:e,equalScalar:r}),f=ci({typed:e,DenseMatrix:a}),d=Yn({typed:e,matrix:i,concat:l}),h=Im({typed:e});return e(VS,cpe({typed:e,config:t}),{"boolean, boolean":function(v,y){return v===y?0:v>y?1:-1},"BigNumber, BigNumber":function(v,y){return aa(v,y,t.epsilon)?new s(0):new s(v.cmp(y))},"Fraction, Fraction":function(v,y){return new o(v.compare(y))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},h,d({SS:c,DS:u,Ss:f}))}),cpe=ue(VS,["typed","config"],n=>{var{typed:e,config:t}=n;return e(VS,{"number, number":function(i,s){return Ns(i,s,t.epsilon)?0:i>s?1:-1}})}),fpe=function n(e,t){var r=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,i=/(^[ ]*|[ ]*$)/g,s=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,o=/^0x[0-9a-f]+$/i,a=/^0/,l=function(b){return n.insensitive&&(""+b).toLowerCase()||""+b},u=l(e).replace(i,"")||"",c=l(t).replace(i,"")||"",f=u.replace(r,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),d=c.replace(r,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),h=parseInt(u.match(o),16)||f.length!==1&&u.match(s)&&Date.parse(u),m=parseInt(c.match(o),16)||h&&c.match(s)&&Date.parse(c)||null,v,y;if(m){if(h<m)return-1;if(h>m)return 1}for(var p=0,S=Math.max(f.length,d.length);p<S;p++){if(v=!(f[p]||"").match(a)&&parseFloat(f[p])||f[p]||0,y=!(d[p]||"").match(a)&&parseFloat(d[p])||d[p]||0,isNaN(v)!==isNaN(y))return isNaN(v)?1:-1;if(typeof v!=typeof y&&(v+="",y+=""),v<y)return-1;if(v>y)return 1}return 0};const Sh=fa(fpe);var q8="compareNatural",dpe=["typed","compare"],hpe=ue(q8,dpe,n=>{var{typed:e,compare:t}=n,r=t.signatures["boolean,boolean"];return e(q8,{"any, any":i});function i(l,u){var c=Wn(l),f=Wn(u),d;if((c==="number"||c==="BigNumber"||c==="Fraction")&&(f==="number"||f==="BigNumber"||f==="Fraction"))return d=t(l,u),d.toString()!=="0"?d>0?1:-1:Sh(c,f);var h=["Array","DenseMatrix","SparseMatrix"];if(h.includes(c)||h.includes(f))return d=s(i,l,u),d!==0?d:Sh(c,f);if(c!==f)return Sh(c,f);if(c==="Complex")return ppe(l,u);if(c==="Unit")return l.equalBase(u)?i(l.value,u.value):o(i,l.formatUnits(),u.formatUnits());if(c==="boolean")return r(l,u);if(c==="string")return Sh(l,u);if(c==="Object")return a(i,l,u);if(c==="null"||c==="undefined")return 0;throw new TypeError('Unsupported type of value "'+c+'"')}function s(l,u,c){return _c(u)&&_c(c)?o(l,u.toJSON().values,c.toJSON().values):_c(u)?s(l,u.toArray(),c):_c(c)?s(l,u,c.toArray()):d0(u)?s(l,u.toJSON().data,c):d0(c)?s(l,u,c.toJSON().data):Array.isArray(u)?Array.isArray(c)?o(l,u,c):s(l,u,[c]):s(l,[u],c)}function o(l,u,c){for(var f=0,d=Math.min(u.length,c.length);f<d;f++){var h=l(u[f],c[f]);if(h!==0)return h}return u.length>c.length?1:u.length<c.length?-1:0}function a(l,u,c){var f=Object.keys(u),d=Object.keys(c);f.sort(Sh),d.sort(Sh);var h=o(l,f,d);if(h!==0)return h;for(var m=0;m<f.length;m++){var v=l(u[f[m]],c[d[m]]);if(v!==0)return v}return 0}});function ppe(n,e){return n.re>e.re?1:n.re<e.re?-1:n.im>e.im?1:n.im<e.im?-1:0}var X8="compareText",mpe=["typed","matrix","concat"];S3.signature="any, any";var gpe=ue(X8,mpe,n=>{var{typed:e,matrix:t,concat:r}=n,i=Yn({typed:e,matrix:t,concat:r});return e(X8,S3,i({elop:S3,Ds:!0}))}),HS="equal",vpe=["typed","matrix","equalScalar","DenseMatrix","concat"],ype=ue(HS,vpe,n=>{var{typed:e,matrix:t,equalScalar:r,DenseMatrix:i,concat:s}=n,o=ks({typed:e}),a=Fl({typed:e,DenseMatrix:i}),l=ci({typed:e,DenseMatrix:i}),u=Yn({typed:e,matrix:t,concat:s});return e(HS,xpe({typed:e,equalScalar:r}),u({elop:r,SS:a,DS:o,Ss:l}))}),xpe=ue(HS,["typed","equalScalar"],n=>{var{typed:e,equalScalar:t}=n;return e(HS,{"any, any":function(i,s){return i===null?s===null:s===null?i===null:i===void 0?s===void 0:s===void 0?i===void 0:t(i,s)}})}),Y8="equalText",bpe=["typed","compareText","isZero"],wpe=ue(Y8,bpe,n=>{var{typed:e,compareText:t,isZero:r}=n;return e(Y8,{"any, any":function(s,o){return r(t(s,o))}})}),WS="smaller",Spe=["typed","config","matrix","DenseMatrix","concat"],_pe=ue(WS,Spe,n=>{var{typed:e,config:t,matrix:r,DenseMatrix:i,concat:s}=n,o=ks({typed:e}),a=Fl({typed:e,DenseMatrix:i}),l=ci({typed:e,DenseMatrix:i}),u=Yn({typed:e,matrix:r,concat:s}),c=Im({typed:e});return e(WS,Epe({typed:e,config:t}),{"boolean, boolean":(f,d)=>f<d,"BigNumber, BigNumber":function(d,h){return d.lt(h)&&!aa(d,h,t.epsilon)},"Fraction, Fraction":(f,d)=>f.compare(d)===-1,"Complex, Complex":function(d,h){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:a,DS:o,Ss:l}))}),Epe=ue(WS,["typed","config"],n=>{var{typed:e,config:t}=n;return e(WS,{"number, number":function(i,s){return i<s&&!Ns(i,s,t.epsilon)}})}),jS="smallerEq",Mpe=["typed","config","matrix","DenseMatrix","concat"],Cpe=ue(jS,Mpe,n=>{var{typed:e,config:t,matrix:r,DenseMatrix:i,concat:s}=n,o=ks({typed:e}),a=Fl({typed:e,DenseMatrix:i}),l=ci({typed:e,DenseMatrix:i}),u=Yn({typed:e,matrix:r,concat:s}),c=Im({typed:e});return e(jS,Ape({typed:e,config:t}),{"boolean, boolean":(f,d)=>f<=d,"BigNumber, BigNumber":function(d,h){return d.lte(h)||aa(d,h,t.epsilon)},"Fraction, Fraction":(f,d)=>f.compare(d)!==1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:a,DS:o,Ss:l}))}),Ape=ue(jS,["typed","config"],n=>{var{typed:e,config:t}=n;return e(jS,{"number, number":function(i,s){return i<=s||Ns(i,s,t.epsilon)}})}),GS="larger",Tpe=["typed","config","matrix","DenseMatrix","concat"],Dpe=ue(GS,Tpe,n=>{var{typed:e,config:t,matrix:r,DenseMatrix:i,concat:s}=n,o=ks({typed:e}),a=Fl({typed:e,DenseMatrix:i}),l=ci({typed:e,DenseMatrix:i}),u=Yn({typed:e,matrix:r,concat:s}),c=Im({typed:e});return e(GS,Npe({typed:e,config:t}),{"boolean, boolean":(f,d)=>f>d,"BigNumber, BigNumber":function(d,h){return d.gt(h)&&!aa(d,h,t.epsilon)},"Fraction, Fraction":(f,d)=>f.compare(d)===1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:a,DS:o,Ss:l}))}),Npe=ue(GS,["typed","config"],n=>{var{typed:e,config:t}=n;return e(GS,{"number, number":function(i,s){return i>s&&!Ns(i,s,t.epsilon)}})}),qS="largerEq",Ppe=["typed","config","matrix","DenseMatrix","concat"],Rpe=ue(qS,Ppe,n=>{var{typed:e,config:t,matrix:r,DenseMatrix:i,concat:s}=n,o=ks({typed:e}),a=Fl({typed:e,DenseMatrix:i}),l=ci({typed:e,DenseMatrix:i}),u=Yn({typed:e,matrix:r,concat:s}),c=Im({typed:e});return e(qS,Ope({typed:e,config:t}),{"boolean, boolean":(f,d)=>f>=d,"BigNumber, BigNumber":function(d,h){return d.gte(h)||aa(d,h,t.epsilon)},"Fraction, Fraction":(f,d)=>f.compare(d)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:a,DS:o,Ss:l}))}),Ope=ue(qS,["typed","config"],n=>{var{typed:e,config:t}=n;return e(qS,{"number, number":function(i,s){return i>=s||Ns(i,s,t.epsilon)}})}),K8="deepEqual",kpe=["typed","equal"],Ipe=ue(K8,kpe,n=>{var{typed:e,equal:t}=n;return e(K8,{"any, any":function(s,o){return r(s.valueOf(),o.valueOf())}});function r(i,s){if(Array.isArray(i))if(Array.isArray(s)){var o=i.length;if(o!==s.length)return!1;for(var a=0;a<o;a++)if(!r(i[a],s[a]))return!1;return!0}else return!1;else return Array.isArray(s)?!1:t(i,s)}}),XS="unequal",Lpe=["typed","config","equalScalar","matrix","DenseMatrix","concat"],Fpe=ue(XS,Lpe,n=>{var{typed:e,config:t,equalScalar:r,matrix:i,DenseMatrix:s,concat:o}=n,a=ks({typed:e}),l=Fl({typed:e,DenseMatrix:s}),u=ci({typed:e,DenseMatrix:s}),c=Yn({typed:e,matrix:i,concat:o});return e(XS,Bpe({typed:e,equalScalar:r}),c({elop:f,SS:l,DS:a,Ss:u}));function f(d,h){return!r(d,h)}}),Bpe=ue(XS,["typed","equalScalar"],n=>{var{typed:e,equalScalar:t}=n;return e(XS,{"any, any":function(i,s){return i===null?s!==null:s===null?i!==null:i===void 0?s!==void 0:s===void 0?i!==void 0:!t(i,s)}})}),Z8="partitionSelect",zpe=["typed","isNumeric","isNaN","compare"],Upe=ue(Z8,zpe,n=>{var{typed:e,isNumeric:t,isNaN:r,compare:i}=n,s=i,o=(u,c)=>-i(u,c);return e(Z8,{"Array | Matrix, number":function(c,f){return a(c,f,s)},"Array | Matrix, number, string":function(c,f,d){if(d==="asc")return a(c,f,s);if(d==="desc")return a(c,f,o);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":a});function a(u,c,f){if(!kt(c)||c<0)throw new Error("k must be a non-negative integer");if($t(u)){var d=u.size();if(d.length>1)throw new Error("Only one dimensional matrices supported");return l(u.valueOf(),c,f)}if(Array.isArray(u))return l(u,c,f)}function l(u,c,f){if(c>=u.length)throw new Error("k out of bounds");for(var d=0;d<u.length;d++)if(t(u[d])&&r(u[d]))return u[d];for(var h=0,m=u.length-1;h<m;){for(var v=h,y=m,p=u[Math.floor(Math.random()*(m-h+1))+h];v<y;)if(f(u[v],p)>=0){var S=u[y];u[y]=u[v],u[v]=S,--y}else++v;f(u[v],p)>0&&--v,c<=v?m=v:h=v+1}return u[c]}}),J8="sort",$pe=["typed","matrix","compare","compareNatural"],Vpe=ue(J8,$pe,n=>{var{typed:e,matrix:t,compare:r,compareNatural:i}=n,s=r,o=(c,f)=>-r(c,f);return e(J8,{Array:function(f){return l(f),f.sort(s)},Matrix:function(f){return u(f),t(f.toArray().sort(s),f.storage())},"Array, function":function(f,d){return l(f),f.sort(d)},"Matrix, function":function(f,d){return u(f),t(f.toArray().sort(d),f.storage())},"Array, string":function(f,d){return l(f),f.sort(a(d))},"Matrix, string":function(f,d){return u(f),t(f.toArray().sort(a(d)),f.storage())}});function a(c){if(c==="asc")return s;if(c==="desc")return o;if(c==="natural")return i;throw new Error('String "asc", "desc", or "natural" expected')}function l(c){if(nn(c).length!==1)throw new Error("One dimensional array expected")}function u(c){if(c.size().length!==1)throw new Error("One dimensional matrix expected")}}),Q8="max",Hpe=["typed","config","numeric","larger"],rq=ue(Q8,Hpe,n=>{var{typed:e,config:t,numeric:r,larger:i}=n;return e(Q8,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(l,u){return yE(l,u.valueOf(),s)},"...":function(l){if(Rm(l))throw new TypeError("Scalar values expected in function max");return o(l)}});function s(a,l){try{return i(a,l)?a:l}catch(u){throw Ps(u,"max",l)}}function o(a){var l;if(Au(a,function(u){try{isNaN(u)&&typeof u=="number"?l=NaN:(l===void 0||i(u,l))&&(l=u)}catch(c){throw Ps(c,"max",u)}}),l===void 0)throw new Error("Cannot calculate max of an empty array");return typeof l=="string"&&(l=r(l,t.number)),l}}),eB="min",Wpe=["typed","config","numeric","smaller"],iq=ue(eB,Wpe,n=>{var{typed:e,config:t,numeric:r,smaller:i}=n;return e(eB,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(l,u){return yE(l,u.valueOf(),s)},"...":function(l){if(Rm(l))throw new TypeError("Scalar values expected in function min");return o(l)}});function s(a,l){try{return i(a,l)?a:l}catch(u){throw Ps(u,"min",l)}}function o(a){var l;if(Au(a,function(u){try{isNaN(u)&&typeof u=="number"?l=NaN:(l===void 0||i(u,l))&&(l=u)}catch(c){throw Ps(c,"min",u)}}),l===void 0)throw new Error("Cannot calculate min of an empty array");return typeof l=="string"&&(l=r(l,t.number)),l}}),jpe="ImmutableDenseMatrix",Gpe=["smaller","DenseMatrix"],qpe=ue(jpe,Gpe,n=>{var{smaller:e,DenseMatrix:t}=n;function r(i,s){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(s&&!Pi(s))throw new Error("Invalid datatype: "+s);if($t(i)||_n(i)){var o=new t(i,s);this._data=o._data,this._size=o._size,this._datatype=o._datatype,this._min=null,this._max=null}else if(i&&_n(i.data)&&_n(i.size))this._data=i.data,this._size=i.size,this._datatype=i.datatype,this._min=typeof i.min<"u"?i.min:null,this._max=typeof i.max<"u"?i.max:null;else{if(i)throw new TypeError("Unsupported type of data ("+Wn(i)+")");this._data=[],this._size=[0],this._datatype=s,this._min=null,this._max=null}}return r.prototype=new t,r.prototype.type="ImmutableDenseMatrix",r.prototype.isImmutableDenseMatrix=!0,r.prototype.subset=function(i){switch(arguments.length){case 1:{var s=t.prototype.subset.call(this,i);return $t(s)?new r({data:s._data,size:s._size,datatype:s._datatype}):s}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},r.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},r.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},r.prototype.clone=function(){return new r({data:Yt(this._data),size:Yt(this._size),datatype:this._datatype})},r.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.fromJSON=function(i){return new r(i)},r.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},r.prototype.min=function(){if(this._min===null){var i=null;this.forEach(function(s){(i===null||e(s,i))&&(i=s)}),this._min=i!==null?i:void 0}return this._min},r.prototype.max=function(){if(this._max===null){var i=null;this.forEach(function(s){(i===null||e(i,s))&&(i=s)}),this._max=i!==null?i:void 0}return this._max},r},{isClass:!0}),Xpe="Index",Ype=["ImmutableDenseMatrix","getMatrixDataType"],Kpe=ue(Xpe,Ype,n=>{var{ImmutableDenseMatrix:e,getMatrixDataType:t}=n;function r(s){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var o=0,a=arguments.length;o<a;o++){var l=arguments[o],u=_n(l),c=$t(l),f=null;if(fE(l))this._dimensions.push(l),this._isScalar=!1;else if(u||c){var d=void 0;t(l)==="boolean"?(u&&(d=i(tB(l).valueOf())),c&&(d=i(tB(l._data).valueOf())),f=l.valueOf().length):d=i(l.valueOf()),this._dimensions.push(d);var h=d.size();(h.length!==1||h[0]!==1||f!==null)&&(this._isScalar=!1)}else if(typeof l=="number")this._dimensions.push(i([l]));else if(typeof l=="string")this._dimensions.push(l);else throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._sourceSize.push(f)}}r.prototype.type="Index",r.prototype.isIndex=!0;function i(s){for(var o=0,a=s.length;o<a;o++)if(typeof s[o]!="number"||!kt(s[o]))throw new TypeError("Index parameters must be positive integer numbers");return new e(s)}return r.prototype.clone=function(){var s=new r;return s._dimensions=Yt(this._dimensions),s._isScalar=this._isScalar,s._sourceSize=this._sourceSize,s},r.create=function(s){var o=new r;return r.apply(o,s),o},r.prototype.size=function(){for(var s=[],o=0,a=this._dimensions.length;o<a;o++){var l=this._dimensions[o];s[o]=typeof l=="string"?1:l.size()[0]}return s},r.prototype.max=function(){for(var s=[],o=0,a=this._dimensions.length;o<a;o++){var l=this._dimensions[o];s[o]=typeof l=="string"?l:l.max()}return s},r.prototype.min=function(){for(var s=[],o=0,a=this._dimensions.length;o<a;o++){var l=this._dimensions[o];s[o]=typeof l=="string"?l:l.min()}return s},r.prototype.forEach=function(s){for(var o=0,a=this._dimensions.length;o<a;o++)s(this._dimensions[o],o,this)},r.prototype.dimension=function(s){return this._dimensions[s]||null},r.prototype.isObjectProperty=function(){return this._dimensions.length===1&&typeof this._dimensions[0]=="string"},r.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},r.prototype.isScalar=function(){return this._isScalar},r.prototype.toArray=function(){for(var s=[],o=0,a=this._dimensions.length;o<a;o++){var l=this._dimensions[o];s.push(typeof l=="string"?l:l.toArray())}return s},r.prototype.valueOf=r.prototype.toArray,r.prototype.toString=function(){for(var s=[],o=0,a=this._dimensions.length;o<a;o++){var l=this._dimensions[o];typeof l=="string"?s.push(JSON.stringify(l)):s.push(l.toString())}return"["+s.join(", ")+"]"},r.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},r.fromJSON=function(s){return r.create(s.dimensions)},r},{isClass:!0});function tB(n){var e=[];return n.forEach((t,r)=>{t&&e.push(r)}),e}var Zpe="FibonacciHeap",Jpe=["smaller","larger"],Qpe=ue(Zpe,Jpe,n=>{var{smaller:e,larger:t}=n,r=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(c,f){var d={key:c,value:f,degree:0};if(this._minimum){var h=this._minimum;d.left=h,d.right=h.right,h.right=d,d.right.left=d,e(c,h.key)&&(this._minimum=d)}else d.left=d,d.right=d,this._minimum=d;return this._size++,d},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return this._size===0},i.prototype.extractMinimum=function(){var c=this._minimum;if(c===null)return c;for(var f=this._minimum,d=c.degree,h=c.child;d>0;){var m=h.right;h.left.right=h.right,h.right.left=h.left,h.left=f,h.right=f.right,f.right=h,h.right.left=h,h.parent=null,h=m,d--}return c.left.right=c.right,c.right.left=c.left,c===c.right?f=null:(f=c.right,f=u(f,this._size)),this._size--,this._minimum=f,c},i.prototype.remove=function(c){this._minimum=s(this._minimum,c,-1),this.extractMinimum()};function s(c,f,d){f.key=d;var h=f.parent;return h&&e(f.key,h.key)&&(o(c,f,h),a(c,h)),e(f.key,c.key)&&(c=f),c}function o(c,f,d){f.left.right=f.right,f.right.left=f.left,d.degree--,d.child===f&&(d.child=f.right),d.degree===0&&(d.child=null),f.left=c,f.right=c.right,c.right=f,f.right.left=f,f.parent=null,f.mark=!1}function a(c,f){var d=f.parent;d&&(f.mark?(o(c,f,d),a(d)):f.mark=!0)}var l=function(f,d){f.left.right=f.right,f.right.left=f.left,f.parent=d,d.child?(f.left=d.child,f.right=d.child.right,d.child.right=f,f.right.left=f):(d.child=f,f.right=f,f.left=f),d.degree++,f.mark=!1};function u(c,f){var d=Math.floor(Math.log(f)*r)+1,h=new Array(d),m=0,v=c;if(v)for(m++,v=v.right;v!==c;)m++,v=v.right;for(var y;m>0;){for(var p=v.degree,S=v.right;y=h[p],!!y;){if(t(v.key,y.key)){var b=y;y=v,v=b}l(y,v),h[p]=null,p++}h[p]=v,v=S,m--}c=null;for(var g=0;g<d;g++)y=h[g],y&&(c?(y.left.right=y.right,y.right.left=y.left,y.left=c,y.right=c.right,c.right=y,y.right.left=y,e(y.key,c.key)&&(c=y)):c=y);return c}return i},{isClass:!0}),eme="Spa",tme=["addScalar","equalScalar","FibonacciHeap"],nme=ue(eme,tme,n=>{var{addScalar:e,equalScalar:t,FibonacciHeap:r}=n;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new r}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(s,o){if(this._values[s])this._values[s].value=o;else{var a=this._heap.insert(s,o);this._values[s]=a}},i.prototype.get=function(s){var o=this._values[s];return o?o.value:0},i.prototype.accumulate=function(s,o){var a=this._values[s];a?a.value=e(a.value,o):(a=this._heap.insert(s,o),this._values[s]=a)},i.prototype.forEach=function(s,o,a){var l=this._heap,u=this._values,c=[],f=l.extractMinimum();for(f&&c.push(f);f&&f.key<=o;)f.key>=s&&(t(f.value,0)||a(f.key,f.value,this)),f=l.extractMinimum(),f&&c.push(f);for(var d=0;d<c.length;d++){var h=c[d];f=l.insert(h.key,h.value),u[f.key]=f}},i.prototype.swap=function(s,o){var a=this._values[s],l=this._values[o];if(!a&&l)a=this._heap.insert(s,l.value),this._heap.remove(l),this._values[s]=a,this._values[o]=void 0;else if(a&&!l)l=this._heap.insert(o,a.value),this._heap.remove(a),this._values[o]=l,this._values[s]=void 0;else if(a&&l){var u=a.value;a.value=l.value,l.value=u}},i},{isClass:!0}),rme=_y(function(n){return new n(1).exp()},{hasher:SE}),ime=_y(function(n){return new n(1).plus(new n(5).sqrt()).div(2)},{hasher:SE}),mR=_y(function(n){return n.acos(-1)},{hasher:SE}),sme=_y(function(n){return mR(n).times(2)},{hasher:SE});function SE(n){return n[0].precision}function nB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function yC(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?nB(Object(t),!0).forEach(function(r){mr(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):nB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var ome="Unit",ame=["?on","config","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],lme=ue(ome,ame,n=>{var{on:e,config:t,addScalar:r,subtractScalar:i,multiplyScalar:s,divideScalar:o,pow:a,abs:l,fix:u,round:c,equal:f,isNumeric:d,format:h,number:m,Complex:v,BigNumber:y,Fraction:p}=n,S=m;function b(te,ie){if(!(this instanceof b))throw new Error("Constructor must be called with the new operator");if(!(te==null||d(te)||Pa(te)))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=!1,this.skipAutomaticSimplification=!0,ie===void 0)this.units=[],this.dimensions=U.map(oe=>0);else if(typeof ie=="string"){var Me=b.parse(ie);this.units=Me.units,this.dimensions=Me.dimensions}else if(Hs(ie)&&ie.value===null)this.fixPrefix=ie.fixPrefix,this.skipAutomaticSimplification=ie.skipAutomaticSimplification,this.dimensions=ie.dimensions.slice(0),this.units=ie.units.map(oe=>at({},oe));else throw new TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.value=this._normalize(te)}Object.defineProperty(b,"name",{value:"Unit"}),b.prototype.constructor=b,b.prototype.type="Unit",b.prototype.isUnit=!0;var g,w,x;function M(){for(;x===" "||x==="	";)C()}function A(te){return te>="0"&&te<="9"||te==="."}function N(te){return te>="0"&&te<="9"}function C(){w++,x=g.charAt(w)}function T(te){w=te,x=g.charAt(w)}function R(){var te="",ie=w;if(x==="+"?C():x==="-"&&(te+=x,C()),!A(x))return T(ie),null;if(x==="."){if(te+=x,C(),!N(x))return T(ie),null}else{for(;N(x);)te+=x,C();x==="."&&(te+=x,C())}for(;N(x);)te+=x,C();if(x==="E"||x==="e"){var Me="",oe=w;if(Me+=x,C(),(x==="+"||x==="-")&&(Me+=x,C()),!N(x))return T(oe),te;for(te=te+Me;N(x);)te+=x,C()}return te}function $(){for(var te="";N(x)||b.isValidAlpha(x);)te+=x,C();var ie=te.charAt(0);return b.isValidAlpha(ie)?te:null}function B(te){return x===te?(C(),te):null}b.parse=function(te,ie){if(ie=ie||{},g=te,w=-1,x="",typeof g!="string")throw new TypeError("Invalid argument in Unit.parse, string expected");var Me=new b;Me.units=[];var oe=1,G=!1;C(),M();var j=R(),de=null;if(j){if(t.number==="BigNumber")de=new y(j);else if(t.number==="Fraction")try{de=new p(j)}catch{de=parseFloat(j)}else de=parseFloat(j);M(),B("*")?(oe=1,G=!0):B("/")&&(oe=-1,G=!0)}for(var Te=[],X=1;;){for(M();x==="(";)Te.push(oe),X*=oe,oe=1,C(),M();var Q=void 0;if(x){var be=x;if(Q=$(),Q===null)throw new SyntaxError('Unexpected "'+be+'" in "'+g+'" at index '+w.toString())}else break;var _e=z(Q);if(_e===null)throw new SyntaxError('Unit "'+Q+'" not found.');var Ne=oe*X;if(M(),B("^")){M();var Fe=R();if(Fe===null)throw new SyntaxError('In "'+te+'", "^" must be followed by a floating-point number');Ne*=Fe}Me.units.push({unit:_e.unit,prefix:_e.prefix,power:Ne});for(var He=0;He<U.length;He++)Me.dimensions[He]+=(_e.unit.dimensions[He]||0)*Ne;for(M();x===")";){if(Te.length===0)throw new SyntaxError('Unmatched ")" in "'+g+'" at index '+w.toString());X/=Te.pop(),C(),M()}if(G=!1,B("*")?(oe=1,G=!0):B("/")?(oe=-1,G=!0):oe=1,_e.unit.base){var Ie=_e.unit.base.key;ce.auto[Ie]={unit:_e.unit,prefix:_e.prefix}}}if(M(),x)throw new SyntaxError('Could not parse: "'+te+'"');if(G)throw new SyntaxError('Trailing characters: "'+te+'"');if(Te.length!==0)throw new SyntaxError('Unmatched "(" in "'+g+'"');if(Me.units.length===0&&!ie.allowNoUnits)throw new SyntaxError('"'+te+'" contains no units');return Me.value=de!==void 0?Me._normalize(de):null,Me},b.prototype.clone=function(){var te=new b;te.fixPrefix=this.fixPrefix,te.skipAutomaticSimplification=this.skipAutomaticSimplification,te.value=Yt(this.value),te.dimensions=this.dimensions.slice(0),te.units=[];for(var ie=0;ie<this.units.length;ie++){te.units[ie]={};for(var Me in this.units[ie])gt(this.units[ie],Me)&&(te.units[ie][Me]=this.units[ie][Me])}return te},b.prototype.valueType=function(){return Wn(this.value)},b.prototype._isDerived=function(){return this.units.length===0?!1:this.units.length>1||Math.abs(this.units[0].power-1)>1e-15},b.prototype._normalize=function(te){if(te==null||this.units.length===0)return te;for(var ie=te,Me=b._getNumberConverter(Wn(te)),oe=0;oe<this.units.length;oe++){var G=Me(this.units[oe].unit.value),j=Me(this.units[oe].prefix.value),de=Me(this.units[oe].power);ie=s(ie,a(s(G,j),de))}return ie},b.prototype._denormalize=function(te,ie){if(te==null||this.units.length===0)return te;for(var Me=te,oe=b._getNumberConverter(Wn(te)),G=0;G<this.units.length;G++){var j=oe(this.units[G].unit.value),de=oe(this.units[G].prefix.value),Te=oe(this.units[G].power);Me=o(Me,a(s(j,de),Te))}return Me};var z=_y(te=>{if(gt(Y,te)){var ie=Y[te],Me=ie.prefixes[""];return{unit:ie,prefix:Me}}for(var oe in Y)if(gt(Y,oe)&&ble(te,oe)){var G=Y[oe],j=te.length-oe.length,de=te.substring(0,j),Te=gt(G.prefixes,de)?G.prefixes[de]:void 0;if(Te!==void 0)return{unit:G,prefix:Te}}return null},{hasher:te=>te[0],limit:100});b.isValuelessUnit=function(te){return z(te)!==null},b.prototype.hasBase=function(te){if(typeof te=="string"&&(te=L[te]),!te)return!1;for(var ie=0;ie<U.length;ie++)if(Math.abs((this.dimensions[ie]||0)-(te.dimensions[ie]||0))>1e-12)return!1;return!0},b.prototype.equalBase=function(te){for(var ie=0;ie<U.length;ie++)if(Math.abs((this.dimensions[ie]||0)-(te.dimensions[ie]||0))>1e-12)return!1;return!0},b.prototype.equals=function(te){return this.equalBase(te)&&f(this.value,te.value)},b.prototype.multiply=function(te){for(var ie=this.clone(),Me=Hs(te)?te:new b(te),oe=0;oe<U.length;oe++)ie.dimensions[oe]=(this.dimensions[oe]||0)+(Me.dimensions[oe]||0);for(var G=0;G<Me.units.length;G++){var j=yC({},Me.units[G]);ie.units.push(j)}if(this.value!==null||Me.value!==null){var de=this.value===null?this._normalize(1):this.value,Te=Me.value===null?Me._normalize(1):Me.value;ie.value=s(de,Te)}else ie.value=null;return Hs(te)&&(ie.skipAutomaticSimplification=!1),D(ie)},b.prototype.divideInto=function(te){return new b(te).divide(this)},b.prototype.divide=function(te){for(var ie=this.clone(),Me=Hs(te)?te:new b(te),oe=0;oe<U.length;oe++)ie.dimensions[oe]=(this.dimensions[oe]||0)-(Me.dimensions[oe]||0);for(var G=0;G<Me.units.length;G++){var j=yC(yC({},Me.units[G]),{},{power:-Me.units[G].power});ie.units.push(j)}if(this.value!==null||Me.value!==null){var de=this.value===null?this._normalize(1):this.value,Te=Me.value===null?Me._normalize(1):Me.value;ie.value=o(de,Te)}else ie.value=null;return Hs(te)&&(ie.skipAutomaticSimplification=!1),D(ie)},b.prototype.pow=function(te){for(var ie=this.clone(),Me=0;Me<U.length;Me++)ie.dimensions[Me]=(this.dimensions[Me]||0)*te;for(var oe=0;oe<ie.units.length;oe++)ie.units[oe].power*=te;return ie.value!==null?ie.value=a(ie.value,te):ie.value=null,ie.skipAutomaticSimplification=!1,D(ie)};function D(te){return te.equalBase(L.NONE)&&te.value!==null&&!t.predictable?te.value:te}b.prototype.abs=function(){var te=this.clone();if(te.value!==null)if(te._isDerived()||te.units.length===0||te.units[0].unit.offset===0)te.value=l(te.value);else{var ie=te._numberConverter(),Me=ie(te.units[0].unit.value),oe=ie(te.units[0].unit.offset),G=s(Me,oe);te.value=i(l(r(te.value,G)),G)}for(var j in te.units)(te.units[j].unit.name==="VA"||te.units[j].unit.name==="VAR")&&(te.units[j].unit=Y.W);return te},b.prototype.to=function(te){var ie=this.value===null?this._normalize(1):this.value,Me;if(typeof te=="string")Me=b.parse(te);else if(Hs(te))Me=te.clone();else throw new Error("String or Unit expected as parameter");if(!this.equalBase(Me))throw new Error("Units do not match ('".concat(Me.toString(),"' != '").concat(this.toString(),"')"));if(Me.value!==null)throw new Error("Cannot convert to a unit with a value");if(this.value===null||this._isDerived()||this.units.length===0||Me.units.length===0||this.units[0].unit.offset===Me.units[0].unit.offset)Me.value=Yt(ie);else{var oe=b._getNumberConverter(Wn(ie)),G=this.units[0].unit.value,j=this.units[0].unit.offset,de=s(G,j),Te=Me.units[0].unit.value,X=Me.units[0].unit.offset,Q=s(Te,X);Me.value=r(ie,oe(i(de,Q)))}return Me.fixPrefix=!0,Me.skipAutomaticSimplification=!0,Me},b.prototype.toNumber=function(te){return S(this.toNumeric(te))},b.prototype.toNumeric=function(te){var ie;return te?ie=this.to(te):ie=this.clone(),ie._isDerived()||ie.units.length===0?ie._denormalize(ie.value):ie._denormalize(ie.value,ie.units[0].prefix.value)},b.prototype.toString=function(){return this.format()},b.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.units.length>0?this.formatUnits():null,fixPrefix:this.fixPrefix}},b.fromJSON=function(te){var ie,Me=new b(te.value,(ie=te.unit)!==null&&ie!==void 0?ie:void 0);return Me.fixPrefix=te.fixPrefix||!1,Me},b.prototype.valueOf=b.prototype.toString,b.prototype.simplify=function(){var te=this.clone(),ie=[],Me;for(var oe in pe)if(gt(pe,oe)&&te.hasBase(L[oe])){Me=oe;break}if(Me==="NONE")te.units=[];else{var G;if(Me&&gt(pe,Me)&&(G=pe[Me]),G)te.units=[{unit:G.unit,prefix:G.prefix,power:1}];else{for(var j=!1,de=0;de<U.length;de++){var Te=U[de];Math.abs(te.dimensions[de]||0)>1e-12&&(gt(pe,Te)?ie.push({unit:pe[Te].unit,prefix:pe[Te].prefix,power:te.dimensions[de]||0}):j=!0)}ie.length<te.units.length&&!j&&(te.units=ie)}}return te},b.prototype.toSI=function(){for(var te=this.clone(),ie=[],Me=0;Me<U.length;Me++){var oe=U[Me];if(Math.abs(te.dimensions[Me]||0)>1e-12)if(gt(ce.si,oe))ie.push({unit:ce.si[oe].unit,prefix:ce.si[oe].prefix,power:te.dimensions[Me]||0});else throw new Error("Cannot express custom unit "+oe+" in SI units")}return te.units=ie,te.fixPrefix=!0,te.skipAutomaticSimplification=!0,this.value!==null?(te.value=null,this.to(te)):te},b.prototype.formatUnits=function(){for(var te="",ie="",Me=0,oe=0,G=0;G<this.units.length;G++)this.units[G].power>0?(Me++,te+=" "+this.units[G].prefix.name+this.units[G].unit.name,Math.abs(this.units[G].power-1)>1e-15&&(te+="^"+this.units[G].power)):this.units[G].power<0&&oe++;if(oe>0)for(var j=0;j<this.units.length;j++)this.units[j].power<0&&(Me>0?(ie+=" "+this.units[j].prefix.name+this.units[j].unit.name,Math.abs(this.units[j].power+1)>1e-15&&(ie+="^"+-this.units[j].power)):(ie+=" "+this.units[j].prefix.name+this.units[j].unit.name,ie+="^"+this.units[j].power));te=te.substr(1),ie=ie.substr(1),Me>1&&oe>0&&(te="("+te+")"),oe>1&&Me>0&&(ie="("+ie+")");var de=te;return Me>0&&oe>0&&(de+=" / "),de+=ie,de},b.prototype.format=function(te){var ie=this.skipAutomaticSimplification||this.value===null?this.clone():this.simplify(),Me=!1;typeof ie.value<"u"&&ie.value!==null&&Pa(ie.value)&&(Me=Math.abs(ie.value.re)<1e-14);for(var oe in ie.units)gt(ie.units,oe)&&ie.units[oe].unit&&(ie.units[oe].unit.name==="VA"&&Me?ie.units[oe].unit=Y.VAR:ie.units[oe].unit.name==="VAR"&&!Me&&(ie.units[oe].unit=Y.VA));ie.units.length===1&&!ie.fixPrefix&&Math.abs(ie.units[0].power-Math.round(ie.units[0].power))<1e-14&&(ie.units[0].prefix=ie._bestPrefix());var G=ie._denormalize(ie.value),j=ie.value!==null?h(G,te||{}):"",de=ie.formatUnits();return ie.value&&Pa(ie.value)&&(j="("+j+")"),de.length>0&&j.length>0&&(j+=" "),j+=de,j},b.prototype._bestPrefix=function(){if(this.units.length!==1)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var te=this.value!==null?l(this.value):0,ie=l(this.units[0].unit.value),Me=this.units[0].prefix;if(te===0)return Me;var oe=this.units[0].power,G=Math.log(te/Math.pow(Me.value*ie,oe))/Math.LN10-1.2;if(G>-2.200001&&G<1.800001)return Me;G=Math.abs(G);var j=this.units[0].unit.prefixes;for(var de in j)if(gt(j,de)){var Te=j[de];if(Te.scientific){var X=Math.abs(Math.log(te/Math.pow(Te.value*ie,oe))/Math.LN10-1.2);(X<G||X===G&&Te.name.length<Me.name.length)&&(Me=Te,G=X)}}return Me},b.prototype.splitUnit=function(te){for(var ie=this.clone(),Me=[],oe=0;oe<te.length&&(ie=ie.to(te[oe]),oe!==te.length-1);oe++){var G=ie.toNumeric(),j=c(G),de=void 0,Te=f(j,G);Te?de=j:de=u(ie.toNumeric());var X=new b(de,te[oe].toString());Me.push(X),ie=i(ie,X)}for(var Q=0,be=0;be<Me.length;be++)Q=r(Q,Me[be].value);return f(Q,this.value)&&(ie.value=0),Me.push(ie),Me};var I={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},R:{name:"R",value:1e27,scientific:!0},Q:{name:"Q",value:1e30,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0},r:{name:"r",value:1e-27,scientific:!0},q:{name:"q",value:1e-30,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},ronna:{name:"ronna",value:1e27,scientific:!0},quetta:{name:"quetta",value:1e30,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0},ronto:{name:"ronto",value:1e-27,scientific:!0},quecto:{name:"quecto",value:1e-30,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},R:{name:"R",value:1e54,scientific:!0},Q:{name:"Q",value:1e60,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0},r:{name:"r",value:1e-54,scientific:!0},q:{name:"q",value:1e-60,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},R:{name:"R",value:1e81,scientific:!0},Q:{name:"Q",value:1e90,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0},r:{name:"r",value:1e-81,scientific:!0},q:{name:"q",value:1e-90,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};I.SHORTLONG=at({},I.SHORT,I.LONG),I.BINARY_SHORT=at({},I.BINARY_SHORT_SI,I.BINARY_SHORT_IEC),I.BINARY_LONG=at({},I.BINARY_LONG_SI,I.BINARY_LONG_IEC);var U=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],L={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var q in L)gt(L,q)&&(L[q].key=q);var Z={},J={name:"",base:Z,value:1,offset:0,dimensions:U.map(te=>0)},Y={meter:{name:"meter",base:L.LENGTH,prefixes:I.LONG,value:1,offset:0},inch:{name:"inch",base:L.LENGTH,prefixes:I.NONE,value:.0254,offset:0},foot:{name:"foot",base:L.LENGTH,prefixes:I.NONE,value:.3048,offset:0},yard:{name:"yard",base:L.LENGTH,prefixes:I.NONE,value:.9144,offset:0},mile:{name:"mile",base:L.LENGTH,prefixes:I.NONE,value:1609.344,offset:0},link:{name:"link",base:L.LENGTH,prefixes:I.NONE,value:.201168,offset:0},rod:{name:"rod",base:L.LENGTH,prefixes:I.NONE,value:5.0292,offset:0},chain:{name:"chain",base:L.LENGTH,prefixes:I.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:L.LENGTH,prefixes:I.NONE,value:1e-10,offset:0},m:{name:"m",base:L.LENGTH,prefixes:I.SHORT,value:1,offset:0},in:{name:"in",base:L.LENGTH,prefixes:I.NONE,value:.0254,offset:0},ft:{name:"ft",base:L.LENGTH,prefixes:I.NONE,value:.3048,offset:0},yd:{name:"yd",base:L.LENGTH,prefixes:I.NONE,value:.9144,offset:0},mi:{name:"mi",base:L.LENGTH,prefixes:I.NONE,value:1609.344,offset:0},li:{name:"li",base:L.LENGTH,prefixes:I.NONE,value:.201168,offset:0},rd:{name:"rd",base:L.LENGTH,prefixes:I.NONE,value:5.02921,offset:0},ch:{name:"ch",base:L.LENGTH,prefixes:I.NONE,value:20.1168,offset:0},mil:{name:"mil",base:L.LENGTH,prefixes:I.NONE,value:254e-7,offset:0},m2:{name:"m2",base:L.SURFACE,prefixes:I.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:L.SURFACE,prefixes:I.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:L.SURFACE,prefixes:I.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:L.SURFACE,prefixes:I.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:L.SURFACE,prefixes:I.NONE,value:2589988110336e-6,offset:0},sqrd:{name:"sqrd",base:L.SURFACE,prefixes:I.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:L.SURFACE,prefixes:I.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:L.SURFACE,prefixes:I.NONE,value:64516e-14,offset:0},acre:{name:"acre",base:L.SURFACE,prefixes:I.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:L.SURFACE,prefixes:I.NONE,value:1e4,offset:0},m3:{name:"m3",base:L.VOLUME,prefixes:I.CUBIC,value:1,offset:0},L:{name:"L",base:L.VOLUME,prefixes:I.SHORT,value:.001,offset:0},l:{name:"l",base:L.VOLUME,prefixes:I.SHORT,value:.001,offset:0},litre:{name:"litre",base:L.VOLUME,prefixes:I.LONG,value:.001,offset:0},cuin:{name:"cuin",base:L.VOLUME,prefixes:I.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:L.VOLUME,prefixes:I.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:L.VOLUME,prefixes:I.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:L.VOLUME,prefixes:I.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:L.VOLUME,prefixes:I.NONE,value:15e-6,offset:0},drop:{name:"drop",base:L.VOLUME,prefixes:I.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:L.VOLUME,prefixes:I.NONE,value:5e-8,offset:0},minim:{name:"minim",base:L.VOLUME,prefixes:I.NONE,value:6161152e-14,offset:0},fluiddram:{name:"fluiddram",base:L.VOLUME,prefixes:I.NONE,value:36966911e-13,offset:0},fluidounce:{name:"fluidounce",base:L.VOLUME,prefixes:I.NONE,value:2957353e-11,offset:0},gill:{name:"gill",base:L.VOLUME,prefixes:I.NONE,value:.0001182941,offset:0},cc:{name:"cc",base:L.VOLUME,prefixes:I.NONE,value:1e-6,offset:0},cup:{name:"cup",base:L.VOLUME,prefixes:I.NONE,value:.0002365882,offset:0},pint:{name:"pint",base:L.VOLUME,prefixes:I.NONE,value:.0004731765,offset:0},quart:{name:"quart",base:L.VOLUME,prefixes:I.NONE,value:.0009463529,offset:0},gallon:{name:"gallon",base:L.VOLUME,prefixes:I.NONE,value:.003785412,offset:0},beerbarrel:{name:"beerbarrel",base:L.VOLUME,prefixes:I.NONE,value:.1173478,offset:0},oilbarrel:{name:"oilbarrel",base:L.VOLUME,prefixes:I.NONE,value:.1589873,offset:0},hogshead:{name:"hogshead",base:L.VOLUME,prefixes:I.NONE,value:.238481,offset:0},fldr:{name:"fldr",base:L.VOLUME,prefixes:I.NONE,value:36966911e-13,offset:0},floz:{name:"floz",base:L.VOLUME,prefixes:I.NONE,value:2957353e-11,offset:0},gi:{name:"gi",base:L.VOLUME,prefixes:I.NONE,value:.0001182941,offset:0},cp:{name:"cp",base:L.VOLUME,prefixes:I.NONE,value:.0002365882,offset:0},pt:{name:"pt",base:L.VOLUME,prefixes:I.NONE,value:.0004731765,offset:0},qt:{name:"qt",base:L.VOLUME,prefixes:I.NONE,value:.0009463529,offset:0},gal:{name:"gal",base:L.VOLUME,prefixes:I.NONE,value:.003785412,offset:0},bbl:{name:"bbl",base:L.VOLUME,prefixes:I.NONE,value:.1173478,offset:0},obl:{name:"obl",base:L.VOLUME,prefixes:I.NONE,value:.1589873,offset:0},g:{name:"g",base:L.MASS,prefixes:I.SHORT,value:.001,offset:0},gram:{name:"gram",base:L.MASS,prefixes:I.LONG,value:.001,offset:0},ton:{name:"ton",base:L.MASS,prefixes:I.SHORT,value:907.18474,offset:0},t:{name:"t",base:L.MASS,prefixes:I.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:L.MASS,prefixes:I.LONG,value:1e3,offset:0},grain:{name:"grain",base:L.MASS,prefixes:I.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:L.MASS,prefixes:I.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:L.MASS,prefixes:I.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:L.MASS,prefixes:I.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:L.MASS,prefixes:I.NONE,value:45.359237,offset:0},stick:{name:"stick",base:L.MASS,prefixes:I.NONE,value:.115,offset:0},stone:{name:"stone",base:L.MASS,prefixes:I.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:L.MASS,prefixes:I.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:L.MASS,prefixes:I.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:L.MASS,prefixes:I.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:L.MASS,prefixes:I.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:L.MASS,prefixes:I.NONE,value:45.359237,offset:0},s:{name:"s",base:L.TIME,prefixes:I.SHORT,value:1,offset:0},min:{name:"min",base:L.TIME,prefixes:I.NONE,value:60,offset:0},h:{name:"h",base:L.TIME,prefixes:I.NONE,value:3600,offset:0},second:{name:"second",base:L.TIME,prefixes:I.LONG,value:1,offset:0},sec:{name:"sec",base:L.TIME,prefixes:I.LONG,value:1,offset:0},minute:{name:"minute",base:L.TIME,prefixes:I.NONE,value:60,offset:0},hour:{name:"hour",base:L.TIME,prefixes:I.NONE,value:3600,offset:0},day:{name:"day",base:L.TIME,prefixes:I.NONE,value:86400,offset:0},week:{name:"week",base:L.TIME,prefixes:I.NONE,value:7*86400,offset:0},month:{name:"month",base:L.TIME,prefixes:I.NONE,value:2629800,offset:0},year:{name:"year",base:L.TIME,prefixes:I.NONE,value:31557600,offset:0},decade:{name:"decade",base:L.TIME,prefixes:I.NONE,value:315576e3,offset:0},century:{name:"century",base:L.TIME,prefixes:I.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:L.TIME,prefixes:I.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:L.FREQUENCY,prefixes:I.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:L.FREQUENCY,prefixes:I.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:L.ANGLE,prefixes:I.SHORT,value:1,offset:0},radian:{name:"radian",base:L.ANGLE,prefixes:I.LONG,value:1,offset:0},deg:{name:"deg",base:L.ANGLE,prefixes:I.SHORT,value:null,offset:0},degree:{name:"degree",base:L.ANGLE,prefixes:I.LONG,value:null,offset:0},grad:{name:"grad",base:L.ANGLE,prefixes:I.SHORT,value:null,offset:0},gradian:{name:"gradian",base:L.ANGLE,prefixes:I.LONG,value:null,offset:0},cycle:{name:"cycle",base:L.ANGLE,prefixes:I.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:L.ANGLE,prefixes:I.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:L.ANGLE,prefixes:I.NONE,value:null,offset:0},A:{name:"A",base:L.CURRENT,prefixes:I.SHORT,value:1,offset:0},ampere:{name:"ampere",base:L.CURRENT,prefixes:I.LONG,value:1,offset:0},K:{name:"K",base:L.TEMPERATURE,prefixes:I.SHORT,value:1,offset:0},degC:{name:"degC",base:L.TEMPERATURE,prefixes:I.SHORT,value:1,offset:273.15},degF:{name:"degF",base:L.TEMPERATURE,prefixes:I.SHORT,value:new p(5,9),offset:459.67},degR:{name:"degR",base:L.TEMPERATURE,prefixes:I.SHORT,value:new p(5,9),offset:0},kelvin:{name:"kelvin",base:L.TEMPERATURE,prefixes:I.LONG,value:1,offset:0},celsius:{name:"celsius",base:L.TEMPERATURE,prefixes:I.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:L.TEMPERATURE,prefixes:I.LONG,value:new p(5,9),offset:459.67},rankine:{name:"rankine",base:L.TEMPERATURE,prefixes:I.LONG,value:new p(5,9),offset:0},mol:{name:"mol",base:L.AMOUNT_OF_SUBSTANCE,prefixes:I.SHORT,value:1,offset:0},mole:{name:"mole",base:L.AMOUNT_OF_SUBSTANCE,prefixes:I.LONG,value:1,offset:0},cd:{name:"cd",base:L.LUMINOUS_INTENSITY,prefixes:I.SHORT,value:1,offset:0},candela:{name:"candela",base:L.LUMINOUS_INTENSITY,prefixes:I.LONG,value:1,offset:0},N:{name:"N",base:L.FORCE,prefixes:I.SHORT,value:1,offset:0},newton:{name:"newton",base:L.FORCE,prefixes:I.LONG,value:1,offset:0},dyn:{name:"dyn",base:L.FORCE,prefixes:I.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:L.FORCE,prefixes:I.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:L.FORCE,prefixes:I.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:L.FORCE,prefixes:I.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:L.FORCE,prefixes:I.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:L.FORCE,prefixes:I.NONE,value:9.80665,offset:0},J:{name:"J",base:L.ENERGY,prefixes:I.SHORT,value:1,offset:0},joule:{name:"joule",base:L.ENERGY,prefixes:I.LONG,value:1,offset:0},erg:{name:"erg",base:L.ENERGY,prefixes:I.SHORTLONG,value:1e-7,offset:0},Wh:{name:"Wh",base:L.ENERGY,prefixes:I.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:L.ENERGY,prefixes:I.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:L.ENERGY,prefixes:I.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:L.ENERGY,prefixes:I.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:L.POWER,prefixes:I.SHORT,value:1,offset:0},watt:{name:"watt",base:L.POWER,prefixes:I.LONG,value:1,offset:0},hp:{name:"hp",base:L.POWER,prefixes:I.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:L.POWER,prefixes:I.SHORT,value:v.I,offset:0},VA:{name:"VA",base:L.POWER,prefixes:I.SHORT,value:1,offset:0},Pa:{name:"Pa",base:L.PRESSURE,prefixes:I.SHORT,value:1,offset:0},psi:{name:"psi",base:L.PRESSURE,prefixes:I.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:L.PRESSURE,prefixes:I.NONE,value:101325,offset:0},bar:{name:"bar",base:L.PRESSURE,prefixes:I.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:L.PRESSURE,prefixes:I.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:L.PRESSURE,prefixes:I.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:L.PRESSURE,prefixes:I.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:L.PRESSURE,prefixes:I.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:L.ELECTRIC_CHARGE,prefixes:I.LONG,value:1,offset:0},C:{name:"C",base:L.ELECTRIC_CHARGE,prefixes:I.SHORT,value:1,offset:0},farad:{name:"farad",base:L.ELECTRIC_CAPACITANCE,prefixes:I.LONG,value:1,offset:0},F:{name:"F",base:L.ELECTRIC_CAPACITANCE,prefixes:I.SHORT,value:1,offset:0},volt:{name:"volt",base:L.ELECTRIC_POTENTIAL,prefixes:I.LONG,value:1,offset:0},V:{name:"V",base:L.ELECTRIC_POTENTIAL,prefixes:I.SHORT,value:1,offset:0},ohm:{name:"ohm",base:L.ELECTRIC_RESISTANCE,prefixes:I.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:L.ELECTRIC_INDUCTANCE,prefixes:I.LONG,value:1,offset:0},H:{name:"H",base:L.ELECTRIC_INDUCTANCE,prefixes:I.SHORT,value:1,offset:0},siemens:{name:"siemens",base:L.ELECTRIC_CONDUCTANCE,prefixes:I.LONG,value:1,offset:0},S:{name:"S",base:L.ELECTRIC_CONDUCTANCE,prefixes:I.SHORT,value:1,offset:0},weber:{name:"weber",base:L.MAGNETIC_FLUX,prefixes:I.LONG,value:1,offset:0},Wb:{name:"Wb",base:L.MAGNETIC_FLUX,prefixes:I.SHORT,value:1,offset:0},tesla:{name:"tesla",base:L.MAGNETIC_FLUX_DENSITY,prefixes:I.LONG,value:1,offset:0},T:{name:"T",base:L.MAGNETIC_FLUX_DENSITY,prefixes:I.SHORT,value:1,offset:0},b:{name:"b",base:L.BIT,prefixes:I.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:L.BIT,prefixes:I.BINARY_LONG,value:1,offset:0},B:{name:"B",base:L.BIT,prefixes:I.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:L.BIT,prefixes:I.BINARY_LONG,value:8,offset:0}},ee={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fluiddrams:"fluiddram",fluidounces:"fluidounce",gills:"gill",cups:"cup",pints:"pint",quarts:"quart",gallons:"gallon",beerbarrels:"beerbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",amps:"ampere",amp:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function ae(te){if(te.number==="BigNumber"){var ie=mR(y);Y.rad.value=new y(1),Y.deg.value=ie.div(180),Y.grad.value=ie.div(200),Y.cycle.value=ie.times(2),Y.arcsec.value=ie.div(648e3),Y.arcmin.value=ie.div(10800)}else Y.rad.value=1,Y.deg.value=Math.PI/180,Y.grad.value=Math.PI/200,Y.cycle.value=Math.PI*2,Y.arcsec.value=Math.PI/648e3,Y.arcmin.value=Math.PI/10800;Y.radian.value=Y.rad.value,Y.degree.value=Y.deg.value,Y.gradian.value=Y.grad.value}ae(t),e&&e("config",function(te,ie){te.number!==ie.number&&ae(te)});var ce={si:{NONE:{unit:J,prefix:I.NONE[""]},LENGTH:{unit:Y.m,prefix:I.SHORT[""]},MASS:{unit:Y.g,prefix:I.SHORT.k},TIME:{unit:Y.s,prefix:I.SHORT[""]},CURRENT:{unit:Y.A,prefix:I.SHORT[""]},TEMPERATURE:{unit:Y.K,prefix:I.SHORT[""]},LUMINOUS_INTENSITY:{unit:Y.cd,prefix:I.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:Y.mol,prefix:I.SHORT[""]},ANGLE:{unit:Y.rad,prefix:I.SHORT[""]},BIT:{unit:Y.bits,prefix:I.SHORT[""]},FORCE:{unit:Y.N,prefix:I.SHORT[""]},ENERGY:{unit:Y.J,prefix:I.SHORT[""]},POWER:{unit:Y.W,prefix:I.SHORT[""]},PRESSURE:{unit:Y.Pa,prefix:I.SHORT[""]},ELECTRIC_CHARGE:{unit:Y.C,prefix:I.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:Y.F,prefix:I.SHORT[""]},ELECTRIC_POTENTIAL:{unit:Y.V,prefix:I.SHORT[""]},ELECTRIC_RESISTANCE:{unit:Y.ohm,prefix:I.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:Y.H,prefix:I.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:Y.S,prefix:I.SHORT[""]},MAGNETIC_FLUX:{unit:Y.Wb,prefix:I.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:Y.T,prefix:I.SHORT[""]},FREQUENCY:{unit:Y.Hz,prefix:I.SHORT[""]}}};ce.cgs=JSON.parse(JSON.stringify(ce.si)),ce.cgs.LENGTH={unit:Y.m,prefix:I.SHORT.c},ce.cgs.MASS={unit:Y.g,prefix:I.SHORT[""]},ce.cgs.FORCE={unit:Y.dyn,prefix:I.SHORT[""]},ce.cgs.ENERGY={unit:Y.erg,prefix:I.NONE[""]},ce.us=JSON.parse(JSON.stringify(ce.si)),ce.us.LENGTH={unit:Y.ft,prefix:I.NONE[""]},ce.us.MASS={unit:Y.lbm,prefix:I.NONE[""]},ce.us.TEMPERATURE={unit:Y.degF,prefix:I.NONE[""]},ce.us.FORCE={unit:Y.lbf,prefix:I.NONE[""]},ce.us.ENERGY={unit:Y.BTU,prefix:I.BTU[""]},ce.us.POWER={unit:Y.hp,prefix:I.NONE[""]},ce.us.PRESSURE={unit:Y.psi,prefix:I.NONE[""]},ce.auto=JSON.parse(JSON.stringify(ce.si));var pe=ce.auto;b.setUnitSystem=function(te){if(gt(ce,te))pe=ce[te];else throw new Error("Unit system "+te+" does not exist. Choices are: "+Object.keys(ce).join(", "))},b.getUnitSystem=function(){for(var te in ce)if(gt(ce,te)&&ce[te]===pe)return te},b.typeConverters={BigNumber:function(ie){return ie!=null&&ie.isFraction?new y(ie.n).div(ie.d).times(ie.s):new y(ie+"")},Fraction:function(ie){return new p(ie)},Complex:function(ie){return ie},number:function(ie){return ie!=null&&ie.isFraction?m(ie):ie}},b.prototype._numberConverter=function(){var te=b.typeConverters[this.valueType()];if(te)return te;throw new TypeError('Unsupported Unit value type "'+this.valueType()+'"')},b._getNumberConverter=function(te){if(!b.typeConverters[te])throw new TypeError('Unsupported type "'+te+'"');return b.typeConverters[te]};for(var we in Y)if(gt(Y,we)){var me=Y[we];me.dimensions=me.base.dimensions}for(var Ae in ee)if(gt(ee,Ae)){var Ee=Y[ee[Ae]],re={};for(var Pe in Ee)gt(Ee,Pe)&&(re[Pe]=Ee[Pe]);re.name=Ae,Y[Ae]=re}b.isValidAlpha=function(ie){return/^[a-zA-Z]$/.test(ie)};function Re(te){for(var ie=0;ie<te.length;ie++){if(x=te.charAt(ie),ie===0&&!b.isValidAlpha(x))throw new Error('Invalid unit name (must begin with alpha character): "'+te+'"');if(ie>0&&!(b.isValidAlpha(x)||N(x)))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+te+'"')}}return b.createUnit=function(te,ie){if(typeof te!="object")throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(ie&&ie.override){for(var Me in te)if(gt(te,Me)&&b.deleteUnit(Me),te[Me].aliases)for(var oe=0;oe<te[Me].aliases.length;oe++)b.deleteUnit(te[Me].aliases[oe])}var G;for(var j in te)gt(te,j)&&(G=b.createUnitSingle(j,te[j]));return G},b.createUnitSingle=function(te,ie){if((typeof ie>"u"||ie===null)&&(ie={}),typeof te!="string")throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(gt(Y,te))throw new Error('Cannot create unit "'+te+'": a unit with that name already exists');Re(te);var Me=null,oe=[],G=0,j,de,Te;if(ie&&ie.type==="Unit")Me=ie.clone();else if(typeof ie=="string")ie!==""&&(j=ie);else if(typeof ie=="object")j=ie.definition,de=ie.prefixes,G=ie.offset,Te=ie.baseName,ie.aliases&&(oe=ie.aliases.valueOf());else throw new TypeError('Cannot create unit "'+te+'" from "'+ie.toString()+'": expecting "string" or "Unit" or "Object"');if(oe){for(var X=0;X<oe.length;X++)if(gt(Y,oe[X]))throw new Error('Cannot create alias "'+oe[X]+'": a unit with that name already exists')}if(j&&typeof j=="string"&&!Me)try{Me=b.parse(j,{allowNoUnits:!0})}catch(W){throw W.message='Could not create unit "'+te+'" from "'+j+'": '+W.message,W}else j&&j.type==="Unit"&&(Me=j.clone());oe=oe||[],G=G||0,de&&de.toUpperCase?de=I[de.toUpperCase()]||I.NONE:de=I.NONE;var Q={};if(Me){Q={name:te,value:Me.value,dimensions:Me.dimensions.slice(0),prefixes:de,offset:G};var Fe=!1;for(var He in L)if(gt(L,He)){for(var Ie=!0,Je=0;Je<U.length;Je++)if(Math.abs((Q.dimensions[Je]||0)-(L[He].dimensions[Je]||0))>1e-12){Ie=!1;break}if(Ie){Fe=!0,Q.base=L[He];break}}if(!Fe){Te=Te||te+"_STUFF";var qe={dimensions:Me.dimensions.slice(0)};qe.key=Te,L[Te]=qe,pe[Te]={unit:Q,prefix:I.NONE[""]},Q.base=L[Te]}}else{if(Te=Te||te+"_STUFF",U.indexOf(Te)>=0)throw new Error('Cannot create new base unit "'+te+'": a base unit with that name already exists (and cannot be overridden)');U.push(Te);for(var be in L)gt(L,be)&&(L[be].dimensions[U.length-1]=0);for(var _e={dimensions:[]},Ne=0;Ne<U.length;Ne++)_e.dimensions[Ne]=0;_e.dimensions[U.length-1]=1,_e.key=Te,L[Te]=_e,Q={name:te,value:1,dimensions:L[Te].dimensions.slice(0),prefixes:de,offset:G,base:L[Te]},pe[Te]={unit:Q,prefix:I.NONE[""]}}b.UNITS[te]=Q;for(var lt=0;lt<oe.length;lt++){var ot=oe[lt],ye={};for(var We in Q)gt(Q,We)&&(ye[We]=Q[We]);ye.name=ot,b.UNITS[ot]=ye}return delete z.cache,new b(null,te)},b.deleteUnit=function(te){delete b.UNITS[te],delete z.cache},b.PREFIXES=I,b.BASE_DIMENSIONS=U,b.BASE_UNITS=L,b.UNIT_SYSTEMS=ce,b.UNITS=Y,b},{isClass:!0}),rB="unit",ume=["typed","Unit"],cme=ue(rB,ume,n=>{var{typed:e,Unit:t}=n;return e(rB,{Unit:function(i){return i.clone()},string:function(i){return t.isValuelessUnit(i)?new t(null,i):t.parse(i,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string | Unit":function(i,s){return new t(i,s)},"number | BigNumber | Fraction":function(i){return new t(i)},"Array | Matrix":e.referToSelf(r=>i=>cn(i,r))})}),iB="sparse",fme=["typed","SparseMatrix"],dme=ue(iB,fme,n=>{var{typed:e,SparseMatrix:t}=n;return e(iB,{"":function(){return new t([])},string:function(i){return new t([],i)},"Array | Matrix":function(i){return new t(i)},"Array | Matrix, string":function(i,s){return new t(i,s)}})}),sB="createUnit",hme=["typed","Unit"],pme=ue(sB,hme,n=>{var{typed:e,Unit:t}=n;return e(sB,{"Object, Object":function(i,s){return t.createUnit(i,s)},Object:function(i){return t.createUnit(i,{})},"string, Unit | string | Object, Object":function(i,s,o){var a={};return a[i]=s,t.createUnit(a,o)},"string, Unit | string | Object":function(i,s){var o={};return o[i]=s,t.createUnit(o,{})},string:function(i){var s={};return s[i]={},t.createUnit(s,{})}})}),oB="acos",mme=["typed","config","Complex"],gme=ue(oB,mme,n=>{var{typed:e,config:t,Complex:r}=n;return e(oB,{number:function(s){return s>=-1&&s<=1||t.predictable?Math.acos(s):new r(s,0).acos()},Complex:function(s){return s.acos()},BigNumber:function(s){return s.acos()}})}),aB="acosh",vme=["typed","config","Complex"],yme=ue(aB,vme,n=>{var{typed:e,config:t,Complex:r}=n;return e(aB,{number:function(s){return s>=1||t.predictable?xG(s):s<=-1?new r(Math.log(Math.sqrt(s*s-1)-s),Math.PI):new r(s,0).acosh()},Complex:function(s){return s.acosh()},BigNumber:function(s){return s.acosh()}})}),lB="acot",xme=["typed","BigNumber"],bme=ue(lB,xme,n=>{var{typed:e,BigNumber:t}=n;return e(lB,{number:bG,Complex:function(i){return i.acot()},BigNumber:function(i){return new t(1).div(i).atan()}})}),uB="acoth",wme=["typed","config","Complex","BigNumber"],Sme=ue(uB,wme,n=>{var{typed:e,config:t,Complex:r,BigNumber:i}=n;return e(uB,{number:function(o){return o>=1||o<=-1||t.predictable?wG(o):new r(o,0).acoth()},Complex:function(o){return o.acoth()},BigNumber:function(o){return new i(1).div(o).atanh()}})}),cB="acsc",_me=["typed","config","Complex","BigNumber"],Eme=ue(cB,_me,n=>{var{typed:e,config:t,Complex:r,BigNumber:i}=n;return e(cB,{number:function(o){return o<=-1||o>=1||t.predictable?SG(o):new r(o,0).acsc()},Complex:function(o){return o.acsc()},BigNumber:function(o){return new i(1).div(o).asin()}})}),fB="acsch",Mme=["typed","BigNumber"],Cme=ue(fB,Mme,n=>{var{typed:e,BigNumber:t}=n;return e(fB,{number:_G,Complex:function(i){return i.acsch()},BigNumber:function(i){return new t(1).div(i).asinh()}})}),dB="asec",Ame=["typed","config","Complex","BigNumber"],Tme=ue(dB,Ame,n=>{var{typed:e,config:t,Complex:r,BigNumber:i}=n;return e(dB,{number:function(o){return o<=-1||o>=1||t.predictable?EG(o):new r(o,0).asec()},Complex:function(o){return o.asec()},BigNumber:function(o){return new i(1).div(o).acos()}})}),hB="asech",Dme=["typed","config","Complex","BigNumber"],Nme=ue(hB,Dme,n=>{var{typed:e,config:t,Complex:r,BigNumber:i}=n;return e(hB,{number:function(o){if(o<=1&&o>=-1||t.predictable){var a=1/o;if(a>0||t.predictable)return MG(o);var l=Math.sqrt(a*a-1);return new r(Math.log(l-a),Math.PI)}return new r(o,0).asech()},Complex:function(o){return o.asech()},BigNumber:function(o){return new i(1).div(o).acosh()}})}),pB="asin",Pme=["typed","config","Complex"],Rme=ue(pB,Pme,n=>{var{typed:e,config:t,Complex:r}=n;return e(pB,{number:function(s){return s>=-1&&s<=1||t.predictable?Math.asin(s):new r(s,0).asin()},Complex:function(s){return s.asin()},BigNumber:function(s){return s.asin()}})}),Ome="asinh",kme=["typed"],Ime=ue(Ome,kme,n=>{var{typed:e}=n;return e("asinh",{number:CG,Complex:function(r){return r.asinh()},BigNumber:function(r){return r.asinh()}})}),Lme="atan",Fme=["typed"],Bme=ue(Lme,Fme,n=>{var{typed:e}=n;return e("atan",{number:function(r){return Math.atan(r)},Complex:function(r){return r.atan()},BigNumber:function(r){return r.atan()}})}),mB="atan2",zme=["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],Ume=ue(mB,zme,n=>{var{typed:e,matrix:t,equalScalar:r,BigNumber:i,DenseMatrix:s,concat:o}=n,a=$a({typed:e,equalScalar:r}),l=ks({typed:e}),u=$G({typed:e,equalScalar:r}),c=Ui({typed:e,equalScalar:r}),f=ci({typed:e,DenseMatrix:s}),d=Yn({typed:e,matrix:t,concat:o});return e(mB,{"number, number":Math.atan2,"BigNumber, BigNumber":(h,m)=>i.atan2(h,m)},d({scalar:"number | BigNumber",SS:u,DS:l,SD:a,Ss:c,sS:f}))}),gB="atanh",$me=["typed","config","Complex"],Vme=ue(gB,$me,n=>{var{typed:e,config:t,Complex:r}=n;return e(gB,{number:function(s){return s<=1&&s>=-1||t.predictable?AG(s):new r(s,0).atanh()},Complex:function(s){return s.atanh()},BigNumber:function(s){return s.atanh()}})}),Fm=ue("trigUnit",["typed"],n=>{var{typed:e}=n;return{Unit:e.referToSelf(t=>r=>{if(!r.hasBase(r.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return e.find(t,r.valueType())(r.value)})}}),vB="cos",Hme=["typed"],Wme=ue(vB,Hme,n=>{var{typed:e}=n,t=Fm({typed:e});return e(vB,{number:Math.cos,"Complex | BigNumber":r=>r.cos()},t)}),yB="cosh",jme=["typed"],Gme=ue(yB,jme,n=>{var{typed:e}=n;return e(yB,{number:Woe,"Complex | BigNumber":t=>t.cosh()})}),xB="cot",qme=["typed","BigNumber"],Xme=ue(xB,qme,n=>{var{typed:e,BigNumber:t}=n,r=Fm({typed:e});return e(xB,{number:TG,Complex:i=>i.cot(),BigNumber:i=>new t(1).div(i.tan())},r)}),bB="coth",Yme=["typed","BigNumber"],Kme=ue(bB,Yme,n=>{var{typed:e,BigNumber:t}=n;return e(bB,{number:DG,Complex:r=>r.coth(),BigNumber:r=>new t(1).div(r.tanh())})}),wB="csc",Zme=["typed","BigNumber"],Jme=ue(wB,Zme,n=>{var{typed:e,BigNumber:t}=n,r=Fm({typed:e});return e(wB,{number:NG,Complex:i=>i.csc(),BigNumber:i=>new t(1).div(i.sin())},r)}),SB="csch",Qme=["typed","BigNumber"],ege=ue(SB,Qme,n=>{var{typed:e,BigNumber:t}=n;return e(SB,{number:PG,Complex:r=>r.csch(),BigNumber:r=>new t(1).div(r.sinh())})}),_B="sec",tge=["typed","BigNumber"],nge=ue(_B,tge,n=>{var{typed:e,BigNumber:t}=n,r=Fm({typed:e});return e(_B,{number:RG,Complex:i=>i.sec(),BigNumber:i=>new t(1).div(i.cos())},r)}),EB="sech",rge=["typed","BigNumber"],ige=ue(EB,rge,n=>{var{typed:e,BigNumber:t}=n;return e(EB,{number:OG,Complex:r=>r.sech(),BigNumber:r=>new t(1).div(r.cosh())})}),MB="sin",sge=["typed"],oge=ue(MB,sge,n=>{var{typed:e}=n,t=Fm({typed:e});return e(MB,{number:Math.sin,"Complex | BigNumber":r=>r.sin()},t)}),CB="sinh",age=["typed"],lge=ue(CB,age,n=>{var{typed:e}=n;return e(CB,{number:kG,"Complex | BigNumber":t=>t.sinh()})}),AB="tan",uge=["typed"],cge=ue(AB,uge,n=>{var{typed:e}=n,t=Fm({typed:e});return e(AB,{number:Math.tan,"Complex | BigNumber":r=>r.tan()},t)}),fge="tanh",dge=["typed"],hge=ue(fge,dge,n=>{var{typed:e}=n;return e("tanh",{number:Goe,"Complex | BigNumber":t=>t.tanh()})}),TB="setCartesian",pge=["typed","size","subset","compareNatural","Index","DenseMatrix"],mge=ue(TB,pge,n=>{var{typed:e,size:t,subset:r,compareNatural:i,Index:s,DenseMatrix:o}=n;return e(TB,{"Array | Matrix, Array | Matrix":function(l,u){var c=[];if(r(t(l),new s(0))!==0&&r(t(u),new s(0))!==0){var f=wn(Array.isArray(l)?l:l.toArray()).sort(i),d=wn(Array.isArray(u)?u:u.toArray()).sort(i);c=[];for(var h=0;h<f.length;h++)for(var m=0;m<d.length;m++)c.push([f[h],d[m]])}return Array.isArray(l)&&Array.isArray(u)?c:new o(c)}})}),DB="setDifference",gge=["typed","size","subset","compareNatural","Index","DenseMatrix"],vge=ue(DB,gge,n=>{var{typed:e,size:t,subset:r,compareNatural:i,Index:s,DenseMatrix:o}=n;return e(DB,{"Array | Matrix, Array | Matrix":function(l,u){var c;if(r(t(l),new s(0))===0)c=[];else{if(r(t(u),new s(0))===0)return wn(l.toArray());var f=cm(wn(Array.isArray(l)?l:l.toArray()).sort(i)),d=cm(wn(Array.isArray(u)?u:u.toArray()).sort(i));c=[];for(var h,m=0;m<f.length;m++){h=!1;for(var v=0;v<d.length;v++)if(i(f[m].value,d[v].value)===0&&f[m].identifier===d[v].identifier){h=!0;break}h||c.push(f[m])}}return Array.isArray(l)&&Array.isArray(u)?IS(c):new o(IS(c))}})}),NB="setDistinct",yge=["typed","size","subset","compareNatural","Index","DenseMatrix"],xge=ue(NB,yge,n=>{var{typed:e,size:t,subset:r,compareNatural:i,Index:s,DenseMatrix:o}=n;return e(NB,{"Array | Matrix":function(l){var u;if(r(t(l),new s(0))===0)u=[];else{var c=wn(Array.isArray(l)?l:l.toArray()).sort(i);u=[],u.push(c[0]);for(var f=1;f<c.length;f++)i(c[f],c[f-1])!==0&&u.push(c[f])}return Array.isArray(l)?u:new o(u)}})}),PB="setIntersect",bge=["typed","size","subset","compareNatural","Index","DenseMatrix"],wge=ue(PB,bge,n=>{var{typed:e,size:t,subset:r,compareNatural:i,Index:s,DenseMatrix:o}=n;return e(PB,{"Array | Matrix, Array | Matrix":function(l,u){var c;if(r(t(l),new s(0))===0||r(t(u),new s(0))===0)c=[];else{var f=cm(wn(Array.isArray(l)?l:l.toArray()).sort(i)),d=cm(wn(Array.isArray(u)?u:u.toArray()).sort(i));c=[];for(var h=0;h<f.length;h++)for(var m=0;m<d.length;m++)if(i(f[h].value,d[m].value)===0&&f[h].identifier===d[m].identifier){c.push(f[h]);break}}return Array.isArray(l)&&Array.isArray(u)?IS(c):new o(IS(c))}})}),RB="setIsSubset",Sge=["typed","size","subset","compareNatural","Index"],_ge=ue(RB,Sge,n=>{var{typed:e,size:t,subset:r,compareNatural:i,Index:s}=n;return e(RB,{"Array | Matrix, Array | Matrix":function(a,l){if(r(t(a),new s(0))===0)return!0;if(r(t(l),new s(0))===0)return!1;for(var u=cm(wn(Array.isArray(a)?a:a.toArray()).sort(i)),c=cm(wn(Array.isArray(l)?l:l.toArray()).sort(i)),f,d=0;d<u.length;d++){f=!1;for(var h=0;h<c.length;h++)if(i(u[d].value,c[h].value)===0&&u[d].identifier===c[h].identifier){f=!0;break}if(f===!1)return!1}return!0}})}),OB="setMultiplicity",Ege=["typed","size","subset","compareNatural","Index"],Mge=ue(OB,Ege,n=>{var{typed:e,size:t,subset:r,compareNatural:i,Index:s}=n;return e(OB,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(a,l){if(r(t(l),new s(0))===0)return 0;for(var u=wn(Array.isArray(l)?l:l.toArray()),c=0,f=0;f<u.length;f++)i(u[f],a)===0&&c++;return c}})}),kB="setPowerset",Cge=["typed","size","subset","compareNatural","Index"],Age=ue(kB,Cge,n=>{var{typed:e,size:t,subset:r,compareNatural:i,Index:s}=n;return e(kB,{"Array | Matrix":function(u){if(r(t(u),new s(0))===0)return[];for(var c=wn(Array.isArray(u)?u:u.toArray()).sort(i),f=[],d=0;d.toString(2).length<=c.length;)f.push(o(c,d.toString(2).split("").reverse())),d++;return a(f)}});function o(l,u){for(var c=[],f=0;f<u.length;f++)u[f]==="1"&&c.push(l[f]);return c}function a(l){for(var u=[],c=l.length-1;c>0;c--)for(var f=0;f<c;f++)l[f].length>l[f+1].length&&(u=l[f],l[f]=l[f+1],l[f+1]=u);return l}}),IB="setSize",Tge=["typed","compareNatural"],Dge=ue(IB,Tge,n=>{var{typed:e,compareNatural:t}=n;return e(IB,{"Array | Matrix":function(i){return Array.isArray(i)?wn(i).length:wn(i.toArray()).length},"Array | Matrix, boolean":function(i,s){if(s===!1||i.length===0)return Array.isArray(i)?wn(i).length:wn(i.toArray()).length;for(var o=wn(Array.isArray(i)?i:i.toArray()).sort(t),a=1,l=1;l<o.length;l++)t(o[l],o[l-1])!==0&&a++;return a}})}),LB="setSymDifference",Nge=["typed","size","concat","subset","setDifference","Index"],Pge=ue(LB,Nge,n=>{var{typed:e,size:t,concat:r,subset:i,setDifference:s,Index:o}=n;return e(LB,{"Array | Matrix, Array | Matrix":function(l,u){if(i(t(l),new o(0))===0)return wn(u);if(i(t(u),new o(0))===0)return wn(l);var c=wn(l),f=wn(u);return r(s(c,f),s(f,c))}})}),FB="setUnion",Rge=["typed","size","concat","subset","setIntersect","setSymDifference","Index"],Oge=ue(FB,Rge,n=>{var{typed:e,size:t,concat:r,subset:i,setIntersect:s,setSymDifference:o,Index:a}=n;return e(FB,{"Array | Matrix, Array | Matrix":function(u,c){if(i(t(u),new a(0))===0)return wn(c);if(i(t(c),new a(0))===0)return wn(u);var f=wn(u),d=wn(c);return r(o(f,d),s(f,d))}})}),BB="add",kge=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],Ige=ue(BB,kge,n=>{var{typed:e,matrix:t,addScalar:r,equalScalar:i,DenseMatrix:s,SparseMatrix:o,concat:a}=n,l=pf({typed:e}),u=cR({typed:e,equalScalar:i}),c=Yd({typed:e,DenseMatrix:s}),f=Yn({typed:e,matrix:t,concat:a});return e(BB,{"any, any":r,"any, any, ...any":e.referToSelf(d=>(h,m,v)=>{for(var y=d(h,m),p=0;p<v.length;p++)y=d(y,v[p]);return y})},f({elop:r,DS:l,SS:u,Ss:c}))}),zB="hypot",Lge=["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],Fge=ue(zB,Lge,n=>{var{typed:e,abs:t,addScalar:r,divideScalar:i,multiplyScalar:s,sqrt:o,smaller:a,isPositive:l}=n;return e(zB,{"... number | BigNumber":u,Array:u,Matrix:c=>u(wn(c.toArray()))});function u(c){for(var f=0,d=0,h=0;h<c.length;h++){if(Pa(c[h]))throw new TypeError("Unexpected type of argument to hypot");var m=t(c[h]);a(d,m)?(f=s(f,s(i(d,m),i(d,m))),f=r(f,1),d=m):f=r(f,l(m)?s(i(m,d),i(m,d)):m)}return s(d,o(f))}}),UB="norm",Bge=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],zge=ue(UB,Bge,n=>{var{typed:e,abs:t,add:r,pow:i,conj:s,sqrt:o,multiply:a,equalScalar:l,larger:u,smaller:c,matrix:f,ctranspose:d,eigs:h}=n;return e(UB,{number:Math.abs,Complex:function(A){return A.abs()},BigNumber:function(A){return A.abs()},boolean:function(A){return Math.abs(A)},Array:function(A){return x(f(A),2)},Matrix:function(A){return x(A,2)},"Array, number | BigNumber | string":function(A,N){return x(f(A),N)},"Matrix, number | BigNumber | string":function(A,N){return x(A,N)}});function m(M){var A=0;return M.forEach(function(N){var C=t(N);u(C,A)&&(A=C)},!0),A}function v(M){var A;return M.forEach(function(N){var C=t(N);(!A||c(C,A))&&(A=C)},!0),A||0}function y(M,A){if(A===Number.POSITIVE_INFINITY||A==="inf")return m(M);if(A===Number.NEGATIVE_INFINITY||A==="-inf")return v(M);if(A==="fro")return x(M,2);if(typeof A=="number"&&!isNaN(A)){if(!l(A,0)){var N=0;return M.forEach(function(C){N=r(i(t(C),A),N)},!0),i(N,1/A)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function p(M){var A=0;return M.forEach(function(N,C){A=r(A,a(N,s(N)))}),t(o(A))}function S(M){var A=[],N=0;return M.forEach(function(C,T){var R=T[1],$=r(A[R]||0,t(C));u($,N)&&(N=$),A[R]=$},!0),N}function b(M){var A=M.size();if(A[0]!==A[1])throw new RangeError("Invalid matrix dimensions");var N=d(M),C=a(N,M),T=h(C).values.toArray(),R=T[T.length-1];return t(o(R))}function g(M){var A=[],N=0;return M.forEach(function(C,T){var R=T[0],$=r(A[R]||0,t(C));u($,N)&&(N=$),A[R]=$},!0),N}function w(M,A){if(A===1)return S(M);if(A===Number.POSITIVE_INFINITY||A==="inf")return g(M);if(A==="fro")return p(M);if(A===2)return b(M);throw new Error("Unsupported parameter value "+A)}function x(M,A){var N=M.size();if(N.length===1)return y(M,A);if(N.length===2){if(N[0]&&N[1])return w(M,A);throw new RangeError("Invalid matrix dimensions")}}}),$B="dot",Uge=["typed","addScalar","multiplyScalar","conj","size"],$ge=ue($B,Uge,n=>{var{typed:e,addScalar:t,multiplyScalar:r,conj:i,size:s}=n;return e($B,{"Array | DenseMatrix, Array | DenseMatrix":a,"SparseMatrix, SparseMatrix":l});function o(c,f){var d=u(c),h=u(f),m,v;if(d.length===1)m=d[0];else if(d.length===2&&d[1]===1)m=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(h.length===1)v=h[0];else if(h.length===2&&h[1]===1)v=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(m!==v)throw new RangeError("Vectors must have equal length ("+m+" != "+v+")");if(m===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return m}function a(c,f){var d=o(c,f),h=$t(c)?c._data:c,m=$t(c)?c._datatype||c.getDataType():void 0,v=$t(f)?f._data:f,y=$t(f)?f._datatype||f.getDataType():void 0,p=u(c).length===2,S=u(f).length===2,b=t,g=r;if(m&&y&&m===y&&typeof m=="string"&&m!=="mixed"){var w=m;b=e.find(t,[w,w]),g=e.find(r,[w,w])}if(!p&&!S){for(var x=g(i(h[0]),v[0]),M=1;M<d;M++)x=b(x,g(i(h[M]),v[M]));return x}if(!p&&S){for(var A=g(i(h[0]),v[0][0]),N=1;N<d;N++)A=b(A,g(i(h[N]),v[N][0]));return A}if(p&&!S){for(var C=g(i(h[0][0]),v[0]),T=1;T<d;T++)C=b(C,g(i(h[T][0]),v[T]));return C}if(p&&S){for(var R=g(i(h[0][0]),v[0][0]),$=1;$<d;$++)R=b(R,g(i(h[$][0]),v[$][0]));return R}}function l(c,f){o(c,f);for(var d=c._index,h=c._values,m=f._index,v=f._values,y=0,p=t,S=r,b=0,g=0;b<d.length&&g<m.length;){var w=d[b],x=m[g];if(w<x){b++;continue}if(w>x){g++;continue}w===x&&(y=p(y,S(h[b],v[g])),b++,g++)}return y}function u(c){return $t(c)?c.size():s(c)}}),Vge="trace",Hge=["typed","matrix","add"],Wge=ue(Vge,Hge,n=>{var{typed:e,matrix:t,add:r}=n;return e("trace",{Array:function(a){return i(t(a))},SparseMatrix:s,DenseMatrix:i,any:Yt});function i(o){var a=o._size,l=o._data;switch(a.length){case 1:if(a[0]===1)return Yt(l[0]);throw new RangeError("Matrix must be square (size: "+un(a)+")");case 2:{var u=a[0],c=a[1];if(u===c){for(var f=0,d=0;d<u;d++)f=r(f,l[d][d]);return f}else throw new RangeError("Matrix must be square (size: "+un(a)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+un(a)+")")}}function s(o){var a=o._values,l=o._index,u=o._ptr,c=o._size,f=c[0],d=c[1];if(f===d){var h=0;if(a.length>0)for(var m=0;m<d;m++)for(var v=u[m],y=u[m+1],p=v;p<y;p++){var S=l[p];if(S===m){h=r(h,a[p]);break}if(S>m)break}return h}throw new RangeError("Matrix must be square (size: "+un(c)+")")}}),VB="index",jge=["typed","Index"],Gge=ue(VB,jge,n=>{var{typed:e,Index:t}=n;return e(VB,{"...number | string | BigNumber | Range | Array | Matrix":function(i){var s=i.map(function(a){return Jt(a)?a.toNumber():_n(a)||$t(a)?a.map(function(l){return Jt(l)?l.toNumber():l}):a}),o=new t;return t.apply(o,s),o}})}),sq=new Set(["end"]),qge="Node",Xge=["mathWithTransform"],Yge=ue(qge,Xge,n=>{var{mathWithTransform:e}=n;function t(i){for(var s of[...sq])if(i.has(s))throw new Error('Scope contains an illegal symbol, "'+s+'" is a reserved keyword')}class r{get type(){return"Node"}get isNode(){return!0}evaluate(s){return this.compile().evaluate(s)}compile(){var s=this._compile(e,{}),o={},a=null;function l(u){var c=Up(u);return t(c),s(c,o,a)}return{evaluate:l}}_compile(s,o){throw new Error("Method _compile must be implemented by type "+this.type)}forEach(s){throw new Error("Cannot run forEach on a Node interface")}map(s){throw new Error("Cannot run map on a Node interface")}_ifNode(s){if(!In(s))throw new TypeError("Callback function must return a Node");return s}traverse(s){s(this,null,null);function o(a,l){a.forEach(function(u,c,f){l(u,c,f),o(u,l)})}o(this,s)}transform(s){function o(a,l,u){var c=s(a,l,u);return c!==a?c:a.map(o)}return o(this,null,null)}filter(s){var o=[];return this.traverse(function(a,l,u){s(a,l,u)&&o.push(a)}),o}clone(){throw new Error("Cannot clone a Node interface")}cloneDeep(){return this.map(function(s){return s.cloneDeep()})}equals(s){return s?this.type===s.type&&Nd(this,s):!1}toString(s){var o=this._getCustomString(s);return typeof o<"u"?o:this._toString(s)}_toString(){throw new Error("_toString not implemented for "+this.type)}toJSON(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)}toHTML(s){var o=this._getCustomString(s);return typeof o<"u"?o:this._toHTML(s)}_toHTML(){throw new Error("_toHTML not implemented for "+this.type)}toTex(s){var o=this._getCustomString(s);return typeof o<"u"?o:this._toTex(s)}_toTex(s){throw new Error("_toTex not implemented for "+this.type)}_getCustomString(s){if(s&&typeof s=="object")switch(typeof s.handler){case"object":case"undefined":return;case"function":return s.handler(this,s);default:throw new TypeError("Object or function expected as callback")}}getIdentifier(){return this.type}getContent(){return this}}return r},{isClass:!0,isNode:!0});function Is(n){return n&&n.isIndexError?new da(n.index+1,n.min+1,n.max!==void 0?n.max+1:void 0):n}function oq(n){var{subset:e}=n;return function(r,i){try{if(Array.isArray(r))return e(r,i);if(r&&typeof r.subset=="function")return r.subset(i);if(typeof r=="string")return e(r,i);if(typeof r=="object"){if(!i.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return As(r,i.getObjectProperty())}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(s){throw Is(s)}}}var px="AccessorNode",Kge=["subset","Node"],Zge=ue(px,Kge,n=>{var{subset:e,Node:t}=n,r=oq({subset:e});function i(o){return!(Xc(o)||po(o)||vn(o)||Cu(o)||wy(o)||Pl(o)||oi(o))}class s extends t{constructor(a,l){if(super(),!In(a))throw new TypeError('Node expected for parameter "object"');if(!Xd(l))throw new TypeError('IndexNode expected for parameter "index"');this.object=a,this.index=l}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return px}get isAccessorNode(){return!0}_compile(a,l){var u=this.object._compile(a,l),c=this.index._compile(a,l);if(this.index.isObjectProperty()){var f=this.index.getObjectProperty();return function(h,m,v){return As(u(h,m,v),f)}}else return function(h,m,v){var y=u(h,m,v),p=c(h,m,y);return r(y,p)}}forEach(a){a(this.object,"object",this),a(this.index,"index",this)}map(a){return new s(this._ifNode(a(this.object,"object",this)),this._ifNode(a(this.index,"index",this)))}clone(){return new s(this.object,this.index)}_toString(a){var l=this.object.toString(a);return i(this.object)&&(l="("+l+")"),l+this.index.toString(a)}_toHTML(a){var l=this.object.toHTML(a);return i(this.object)&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+this.index.toHTML(a)}_toTex(a){var l=this.object.toTex(a);return i(this.object)&&(l="\\left(' + object + '\\right)"),l+this.index.toTex(a)}toJSON(){return{mathjs:px,object:this.object,index:this.index}}static fromJSON(a){return new s(a.object,a.index)}}return mr(s,"name",px),s},{isClass:!0,isNode:!0}),mx="ArrayNode",Jge=["Node"],Qge=ue(mx,Jge,n=>{var{Node:e}=n;class t extends e{constructor(i){if(super(),this.items=i||[],!Array.isArray(this.items)||!this.items.every(In))throw new TypeError("Array containing Nodes expected")}get type(){return mx}get isArrayNode(){return!0}_compile(i,s){var o=vu(this.items,function(u){return u._compile(i,s)}),a=i.config.matrix!=="Array";if(a){var l=i.matrix;return function(c,f,d){return l(vu(o,function(h){return h(c,f,d)}))}}else return function(c,f,d){return vu(o,function(h){return h(c,f,d)})}}forEach(i){for(var s=0;s<this.items.length;s++){var o=this.items[s];i(o,"items["+s+"]",this)}}map(i){for(var s=[],o=0;o<this.items.length;o++)s[o]=this._ifNode(i(this.items[o],"items["+o+"]",this));return new t(s)}clone(){return new t(this.items.slice(0))}_toString(i){var s=this.items.map(function(o){return o.toString(i)});return"["+s.join(", ")+"]"}toJSON(){return{mathjs:mx,items:this.items}}static fromJSON(i){return new t(i.items)}_toHTML(i){var s=this.items.map(function(o){return o.toHTML(i)});return'<span class="math-parenthesis math-square-parenthesis">[</span>'+s.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(i){function s(o,a){var l=o.some(po)&&!o.every(po),u=a||l,c=u?"&":"\\\\",f=o.map(function(d){return d.items?s(d.items,!a):d.toTex(i)}).join(c);return l||!u||u&&!a?"\\begin{bmatrix}"+f+"\\end{bmatrix}":f}return s(this.items,!1)}}return mr(t,"name",mx),t},{isClass:!0,isNode:!0});function eve(n){var{subset:e,matrix:t}=n;return function(i,s,o){try{if(Array.isArray(i)){var a=t(i).subset(s,o).valueOf();return a.forEach((l,u)=>{i[u]=l}),i}else{if(i&&typeof i.subset=="function")return i.subset(s,o);if(typeof i=="string")return e(i,s,o);if(typeof i=="object"){if(!s.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return om(i,s.getObjectProperty(),o),i}else throw new TypeError("Cannot apply index: unsupported type of object")}}catch(l){throw Is(l)}}}var Ma=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{op:"or",associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{op:"xor",associativity:"left",associativeWith:[]}},{"OperatorNode:and":{op:"and",associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{op:"|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{op:"^|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{op:"&",associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{op:"==",associativity:"left",associativeWith:[]},"OperatorNode:unequal":{op:"!=",associativity:"left",associativeWith:[]},"OperatorNode:smaller":{op:"<",associativity:"left",associativeWith:[]},"OperatorNode:larger":{op:">",associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{op:"<=",associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{op:">=",associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{op:"<<",associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{op:">>",associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{op:">>>",associativity:"left",associativeWith:[]}},{"OperatorNode:to":{op:"to",associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{op:"+",associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{op:"-",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{op:"*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{op:"/",associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{op:".*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{op:"./",associativity:"left",associativeWith:[]},"OperatorNode:mod":{op:"mod",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]}},{"OperatorNode:unaryPlus":{op:"+",associativity:"right"},"OperatorNode:unaryMinus":{op:"-",associativity:"right"},"OperatorNode:bitNot":{op:"~",associativity:"right"},"OperatorNode:not":{op:"not",associativity:"right"}},{"OperatorNode:pow":{op:"^",associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{op:".^",associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{op:"!",associativity:"left"}},{"OperatorNode:ctranspose":{op:"'",associativity:"left"}}];function gx(n,e){if(!e||e!=="auto")return n;for(var t=n;Pl(t);)t=t.content;return t}function Hn(n,e,t,r){var i=n;e!=="keep"&&(i=n.getContent());for(var s=i.getIdentifier(),o=null,a=0;a<Ma.length;a++)if(s in Ma[a]){o=a;break}if(s==="OperatorNode:multiply"&&i.implicit&&t!=="show"){var l=gx(i.args[0],e);!(vn(l)&&r&&r.getIdentifier()==="OperatorNode:divide"&&g3(gx(r.args[0],e)))&&!(l.getIdentifier()==="OperatorNode:divide"&&g3(gx(l.args[0],e))&&vn(gx(l.args[1])))&&(o+=1)}return o}function Rg(n,e){var t=n;e!=="keep"&&(t=n.getContent());var r=t.getIdentifier(),i=Hn(t,e);if(i===null)return null;var s=Ma[i][r];if(gt(s,"associativity")){if(s.associativity==="left")return"left";if(s.associativity==="right")return"right";throw Error("'"+r+"' has the invalid associativity '"+s.associativity+"'.")}return null}function xC(n,e,t){var r=t!=="keep"?n.getContent():n,i=t!=="keep"?n.getContent():e,s=r.getIdentifier(),o=i.getIdentifier(),a=Hn(r,t);if(a===null)return null;var l=Ma[a][s];if(gt(l,"associativeWith")&&l.associativeWith instanceof Array){for(var u=0;u<l.associativeWith.length;u++)if(l.associativeWith[u]===o)return!0;return!1}return null}function tve(n){var e="OperatorNode:"+n;for(var t of Ma)if(e in t)return t[e].op;return null}var vx="AssignmentNode",nve=["subset","?matrix","Node"],rve=ue(vx,nve,n=>{var{subset:e,matrix:t,Node:r}=n,i=oq({subset:e}),s=eve({subset:e,matrix:t});function o(l,u,c){u||(u="keep");var f=Hn(l,u,c),d=Hn(l.value,u,c);return u==="all"||d!==null&&d<=f}class a extends r{constructor(u,c,f){if(super(),this.object=u,this.index=f?c:null,this.value=f||c,!oi(u)&&!Xc(u))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(oi(u)&&u.name==="end")throw new Error('Cannot assign to symbol "end"');if(this.index&&!Xd(this.index))throw new TypeError('IndexNode expected as "index"');if(!In(this.value))throw new TypeError('Node expected as "value"')}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return vx}get isAssignmentNode(){return!0}_compile(u,c){var f=this.object._compile(u,c),d=this.index?this.index._compile(u,c):null,h=this.value._compile(u,c),m=this.object.name;if(this.index)if(this.index.isObjectProperty()){var v=this.index.getObjectProperty();return function(g,w,x){var M=f(g,w,x),A=h(g,w,x);return om(M,v,A),A}}else{if(oi(this.object))return function(g,w,x){var M=f(g,w,x),A=h(g,w,x),N=d(g,w,M);return g.set(m,s(M,N,A)),A};var y=this.object.object._compile(u,c);if(this.object.index.isObjectProperty()){var p=this.object.index.getObjectProperty();return function(g,w,x){var M=y(g,w,x),A=As(M,p),N=d(g,w,A),C=h(g,w,x);return om(M,p,s(A,N,C)),C}}else{var S=this.object.index._compile(u,c);return function(g,w,x){var M=y(g,w,x),A=S(g,w,M),N=i(M,A),C=d(g,w,N),T=h(g,w,x);return s(M,A,s(N,C,T)),T}}}else{if(!oi(this.object))throw new TypeError("SymbolNode expected as object");return function(g,w,x){var M=h(g,w,x);return g.set(m,M),M}}}forEach(u){u(this.object,"object",this),this.index&&u(this.index,"index",this),u(this.value,"value",this)}map(u){var c=this._ifNode(u(this.object,"object",this)),f=this.index?this._ifNode(u(this.index,"index",this)):null,d=this._ifNode(u(this.value,"value",this));return new a(c,f,d)}clone(){return new a(this.object,this.index,this.value)}_toString(u){var c=this.object.toString(u),f=this.index?this.index.toString(u):"",d=this.value.toString(u);return o(this,u&&u.parenthesis,u&&u.implicit)&&(d="("+d+")"),c+f+" = "+d}toJSON(){return{mathjs:vx,object:this.object,index:this.index,value:this.value}}static fromJSON(u){return new a(u.object,u.index,u.value)}_toHTML(u){var c=this.object.toHTML(u),f=this.index?this.index.toHTML(u):"",d=this.value.toHTML(u);return o(this,u&&u.parenthesis,u&&u.implicit)&&(d='<span class="math-paranthesis math-round-parenthesis">(</span>'+d+'<span class="math-paranthesis math-round-parenthesis">)</span>'),c+f+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+d}_toTex(u){var c=this.object.toTex(u),f=this.index?this.index.toTex(u):"",d=this.value.toTex(u);return o(this,u&&u.parenthesis,u&&u.implicit)&&(d="\\left(".concat(d,"\\right)")),c+f+"="+d}}return mr(a,"name",vx),a},{isClass:!0,isNode:!0}),yx="BlockNode",ive=["ResultSet","Node"],sve=ue(yx,ive,n=>{var{ResultSet:e,Node:t}=n;class r extends t{constructor(s){if(super(),!Array.isArray(s))throw new Error("Array expected");this.blocks=s.map(function(o){var a=o&&o.node,l=o&&o.visible!==void 0?o.visible:!0;if(!In(a))throw new TypeError('Property "node" must be a Node');if(typeof l!="boolean")throw new TypeError('Property "visible" must be a boolean');return{node:a,visible:l}})}get type(){return yx}get isBlockNode(){return!0}_compile(s,o){var a=vu(this.blocks,function(l){return{evaluate:l.node._compile(s,o),visible:l.visible}});return function(u,c,f){var d=[];return vE(a,function(m){var v=m.evaluate(u,c,f);m.visible&&d.push(v)}),new e(d)}}forEach(s){for(var o=0;o<this.blocks.length;o++)s(this.blocks[o].node,"blocks["+o+"].node",this)}map(s){for(var o=[],a=0;a<this.blocks.length;a++){var l=this.blocks[a],u=this._ifNode(s(l.node,"blocks["+a+"].node",this));o[a]={node:u,visible:l.visible}}return new r(o)}clone(){var s=this.blocks.map(function(o){return{node:o.node,visible:o.visible}});return new r(s)}_toString(s){return this.blocks.map(function(o){return o.node.toString(s)+(o.visible?"":";")}).join(`
`)}toJSON(){return{mathjs:yx,blocks:this.blocks}}static fromJSON(s){return new r(s.blocks)}_toHTML(s){return this.blocks.map(function(o){return o.node.toHTML(s)+(o.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')}_toTex(s){return this.blocks.map(function(o){return o.node.toTex(s)+(o.visible?"":";")}).join(`\\;\\;
`)}}return mr(r,"name",yx),r},{isClass:!0,isNode:!0}),xx="ConditionalNode",ove=["Node"],ave=ue(xx,ove,n=>{var{Node:e}=n;function t(i){if(typeof i=="number"||typeof i=="boolean"||typeof i=="string")return!!i;if(i){if(Jt(i))return!i.isZero();if(Pa(i))return!!(i.re||i.im);if(Hs(i))return!!i.value}if(i==null)return!1;throw new TypeError('Unsupported type of condition "'+Wn(i)+'"')}class r extends e{constructor(s,o,a){if(super(),!In(s))throw new TypeError("Parameter condition must be a Node");if(!In(o))throw new TypeError("Parameter trueExpr must be a Node");if(!In(a))throw new TypeError("Parameter falseExpr must be a Node");this.condition=s,this.trueExpr=o,this.falseExpr=a}get type(){return xx}get isConditionalNode(){return!0}_compile(s,o){var a=this.condition._compile(s,o),l=this.trueExpr._compile(s,o),u=this.falseExpr._compile(s,o);return function(f,d,h){return t(a(f,d,h))?l(f,d,h):u(f,d,h)}}forEach(s){s(this.condition,"condition",this),s(this.trueExpr,"trueExpr",this),s(this.falseExpr,"falseExpr",this)}map(s){return new r(this._ifNode(s(this.condition,"condition",this)),this._ifNode(s(this.trueExpr,"trueExpr",this)),this._ifNode(s(this.falseExpr,"falseExpr",this)))}clone(){return new r(this.condition,this.trueExpr,this.falseExpr)}_toString(s){var o=s&&s.parenthesis?s.parenthesis:"keep",a=Hn(this,o,s&&s.implicit),l=this.condition.toString(s),u=Hn(this.condition,o,s&&s.implicit);(o==="all"||this.condition.type==="OperatorNode"||u!==null&&u<=a)&&(l="("+l+")");var c=this.trueExpr.toString(s),f=Hn(this.trueExpr,o,s&&s.implicit);(o==="all"||this.trueExpr.type==="OperatorNode"||f!==null&&f<=a)&&(c="("+c+")");var d=this.falseExpr.toString(s),h=Hn(this.falseExpr,o,s&&s.implicit);return(o==="all"||this.falseExpr.type==="OperatorNode"||h!==null&&h<=a)&&(d="("+d+")"),l+" ? "+c+" : "+d}toJSON(){return{mathjs:xx,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}static fromJSON(s){return new r(s.condition,s.trueExpr,s.falseExpr)}_toHTML(s){var o=s&&s.parenthesis?s.parenthesis:"keep",a=Hn(this,o,s&&s.implicit),l=this.condition.toHTML(s),u=Hn(this.condition,o,s&&s.implicit);(o==="all"||this.condition.type==="OperatorNode"||u!==null&&u<=a)&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>');var c=this.trueExpr.toHTML(s),f=Hn(this.trueExpr,o,s&&s.implicit);(o==="all"||this.trueExpr.type==="OperatorNode"||f!==null&&f<=a)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>');var d=this.falseExpr.toHTML(s),h=Hn(this.falseExpr,o,s&&s.implicit);return(o==="all"||this.falseExpr.type==="OperatorNode"||h!==null&&h<=a)&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+'<span class="math-operator math-conditional-operator">?</span>'+c+'<span class="math-operator math-conditional-operator">:</span>'+d}_toTex(s){return"\\begin{cases} {"+this.trueExpr.toTex(s)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(s)+"}\\\\{"+this.falseExpr.toTex(s)+"}, &\\quad{\\text{otherwise}}\\end{cases}"}}return mr(r,"name",xx),r},{isClass:!0,isNode:!0}),T3=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},lve={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},uve={"":"\\--","":"\\---"," ":"~","	":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},cve=function(e,t){return T3({},e,t)},fve=function(n){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.preserveFormatting,r=t===void 0?!1:t,i=e.escapeMapFn,s=i===void 0?cve:i,o=String(n),a="",l=s(T3({},lve),r?T3({},uve):{}),u=Object.keys(l),c=function(){var d=!1;u.forEach(function(h,m){d||o.length>=h.length&&o.slice(0,h.length)===h&&(a+=l[u[m]],o=o.slice(h.length,o.length),d=!0)}),d||(a+=o.slice(0,1),o=o.slice(1,o.length))};o;)c();return a};const dve=fa(fve);var D3={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},xn={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},HB={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(xn.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(xn.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(xn.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(xn.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(xn.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(xn.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(xn.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : $y^{args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(xn.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(xn.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(xn.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(xn.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(xn.bitAnd,"${args[1]}\\right)")},bitNot:{1:xn.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(xn.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(xn.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(xn.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(xn.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(xn.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(xn.and,"${args[1]}\\right)")},not:{1:xn.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(xn.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(xn.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(xn.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},pinv:{1:"\\left(${args[0]}\\right)^{+}"},sqrtm:{1:"{${args[0]}}".concat(xn.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(xn.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(xn.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},lgamma:{1:"\\ln\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(xn.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(xn.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(xn.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(xn.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(xn.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(xn.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(xn.to,"${args[1]}\\right)")},numeric:function(e,t){return e.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(D3.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},hve="\\mathrm{${name}}\\left(${args}\\right)",WB={deg:"^\\circ"};function N3(n){return dve(n,{preserveFormatting:!0})}function aq(n,e){return e=typeof e>"u"?!1:e,e?gt(WB,n)?WB[n]:"\\mathrm{"+N3(n)+"}":gt(D3,n)?D3[n]:N3(n)}var bx="ConstantNode",pve=["Node"],mve=ue(bx,pve,n=>{var{Node:e}=n;class t extends e{constructor(i){super(),this.value=i}get type(){return bx}get isConstantNode(){return!0}_compile(i,s){var o=this.value;return function(){return o}}forEach(i){}map(i){return this.clone()}clone(){return new t(this.value)}_toString(i){return un(this.value,i)}_toHTML(i){var s=this._toString(i);switch(Wn(this.value)){case"number":case"BigNumber":case"Fraction":return'<span class="math-number">'+s+"</span>";case"string":return'<span class="math-string">'+s+"</span>";case"boolean":return'<span class="math-boolean">'+s+"</span>";case"null":return'<span class="math-null-symbol">'+s+"</span>";case"undefined":return'<span class="math-undefined">'+s+"</span>";default:return'<span class="math-symbol">'+s+"</span>"}}toJSON(){return{mathjs:bx,value:this.value}}static fromJSON(i){return new t(i.value)}_toTex(i){var s=this._toString(i),o=Wn(this.value);switch(o){case"string":return"\\mathtt{"+N3(s)+"}";case"number":case"BigNumber":{var a=o==="BigNumber"?this.value.isFinite():isFinite(this.value);if(!a)return this.value.valueOf()<0?"-\\infty":"\\infty";var l=s.toLowerCase().indexOf("e");return l!==-1?s.substring(0,l)+"\\cdot10^{"+s.substring(l+1)+"}":s}case"Fraction":return this.value.toLatex();default:return s}}}return mr(t,"name",bx),t},{isClass:!0,isNode:!0}),wx="FunctionAssignmentNode",gve=["typed","Node"],vve=ue(wx,gve,n=>{var{typed:e,Node:t}=n;function r(s,o,a){var l=Hn(s,o,a),u=Hn(s.expr,o,a);return o==="all"||u!==null&&u<=l}class i extends t{constructor(o,a,l){if(super(),typeof o!="string")throw new TypeError('String expected for parameter "name"');if(!Array.isArray(a))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!In(l))throw new TypeError('Node expected for parameter "expr"');if(sq.has(o))throw new Error('Illegal function name, "'+o+'" is a reserved keyword');var u=new Set;for(var c of a){var f=typeof c=="string"?c:c.name;if(u.has(f))throw new Error('Duplicate parameter name "'.concat(f,'"'));u.add(f)}this.name=o,this.params=a.map(function(d){return d&&d.name||d}),this.types=a.map(function(d){return d&&d.type||"any"}),this.expr=l}get type(){return wx}get isFunctionAssignmentNode(){return!0}_compile(o,a){var l=Object.create(a);vE(this.params,function(m){l[m]=!0});var u=this.expr._compile(o,l),c=this.name,f=this.params,d=WF(this.types,","),h=c+"("+WF(this.params,", ")+")";return function(v,y,p){var S={};S[d]=function(){for(var g=Object.create(y),w=0;w<f.length;w++)g[f[w]]=arguments[w];return u(v,g,p)};var b=e(c,S);return b.syntax=h,v.set(c,b),b}}forEach(o){o(this.expr,"expr",this)}map(o){var a=this._ifNode(o(this.expr,"expr",this));return new i(this.name,this.params.slice(0),a)}clone(){return new i(this.name,this.params.slice(0),this.expr)}_toString(o){var a=o&&o.parenthesis?o.parenthesis:"keep",l=this.expr.toString(o);return r(this,a,o&&o.implicit)&&(l="("+l+")"),this.name+"("+this.params.join(", ")+") = "+l}toJSON(){var o=this.types;return{mathjs:wx,name:this.name,params:this.params.map(function(a,l){return{name:a,type:o[l]}}),expr:this.expr}}static fromJSON(o){return new i(o.name,o.params,o.expr)}_toHTML(o){for(var a=o&&o.parenthesis?o.parenthesis:"keep",l=[],u=0;u<this.params.length;u++)l.push('<span class="math-symbol math-parameter">'+Ko(this.params[u])+"</span>");var c=this.expr.toHTML(o);return r(this,a,o&&o.implicit)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+Ko(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+l.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+c}_toTex(o){var a=o&&o.parenthesis?o.parenthesis:"keep",l=this.expr.toTex(o);return r(this,a,o&&o.implicit)&&(l="\\left(".concat(l,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(aq).join(",")+"\\right)="+l}}return mr(i,"name",wx),i},{isClass:!0,isNode:!0}),Sx="IndexNode",yve=["Node","size"],xve=ue(Sx,yve,n=>{var{Node:e,size:t}=n;class r extends e{constructor(s,o){if(super(),this.dimensions=s,this.dotNotation=o||!1,!Array.isArray(s)||!s.every(In))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}get type(){return Sx}get isIndexNode(){return!0}_compile(s,o){var a=vu(this.dimensions,function(u,c){var f=u.filter(m=>m.isSymbolNode&&m.name==="end").length>0;if(f){var d=Object.create(o);d.end=!0;var h=u._compile(s,d);return function(v,y,p){if(!$t(p)&&!_n(p)&&!Pi(p))throw new TypeError('Cannot resolve "end": context must be a Matrix, Array, or string but is '+Wn(p));var S=t(p).valueOf(),b=Object.create(y);return b.end=S[c],h(v,b,p)}}else return u._compile(s,o)}),l=As(s,"index");return function(c,f,d){var h=vu(a,function(m){return m(c,f,d)});return l(...h)}}forEach(s){for(var o=0;o<this.dimensions.length;o++)s(this.dimensions[o],"dimensions["+o+"]",this)}map(s){for(var o=[],a=0;a<this.dimensions.length;a++)o[a]=this._ifNode(s(this.dimensions[a],"dimensions["+a+"]",this));return new r(o,this.dotNotation)}clone(){return new r(this.dimensions.slice(0),this.dotNotation)}isObjectProperty(){return this.dimensions.length===1&&vn(this.dimensions[0])&&typeof this.dimensions[0].value=="string"}getObjectProperty(){return this.isObjectProperty()?this.dimensions[0].value:null}_toString(s){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"}toJSON(){return{mathjs:Sx,dimensions:this.dimensions,dotNotation:this.dotNotation}}static fromJSON(s){return new r(s.dimensions,s.dotNotation)}_toHTML(s){for(var o=[],a=0;a<this.dimensions.length;a++)o[a]=this.dimensions[a].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+Ko(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+o.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(s){var o=this.dimensions.map(function(a){return a.toTex(s)});return this.dotNotation?"."+this.getObjectProperty():"_{"+o.join(",")+"}"}}return mr(r,"name",Sx),r},{isClass:!0,isNode:!0}),_x="ObjectNode",bve=["Node"],wve=ue(_x,bve,n=>{var{Node:e}=n;class t extends e{constructor(i){if(super(),this.properties=i||{},i&&(typeof i!="object"||!Object.keys(i).every(function(s){return In(i[s])})))throw new TypeError("Object containing Nodes expected")}get type(){return _x}get isObjectNode(){return!0}_compile(i,s){var o={};for(var a in this.properties)if(gt(this.properties,a)){var l=_p(a),u=JSON.parse(l),c=As(this.properties,a);o[u]=c._compile(i,s)}return function(d,h,m){var v={};for(var y in o)gt(o,y)&&(v[y]=o[y](d,h,m));return v}}forEach(i){for(var s in this.properties)gt(this.properties,s)&&i(this.properties[s],"properties["+_p(s)+"]",this)}map(i){var s={};for(var o in this.properties)gt(this.properties,o)&&(s[o]=this._ifNode(i(this.properties[o],"properties["+_p(o)+"]",this)));return new t(s)}clone(){var i={};for(var s in this.properties)gt(this.properties,s)&&(i[s]=this.properties[s]);return new t(i)}_toString(i){var s=[];for(var o in this.properties)gt(this.properties,o)&&s.push(_p(o)+": "+this.properties[o].toString(i));return"{"+s.join(", ")+"}"}toJSON(){return{mathjs:_x,properties:this.properties}}static fromJSON(i){return new t(i.properties)}_toHTML(i){var s=[];for(var o in this.properties)gt(this.properties,o)&&s.push('<span class="math-symbol math-property">'+Ko(o)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[o].toHTML(i));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+s.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'}_toTex(i){var s=[];for(var o in this.properties)gt(this.properties,o)&&s.push("\\mathbf{"+o+":} & "+this.properties[o].toTex(i)+"\\\\");var a="\\left\\{\\begin{array}{ll}"+s.join(`
`)+"\\end{array}\\right\\}";return a}}return mr(t,"name",_x),t},{isClass:!0,isNode:!0});function dv(n,e){return new gj(n,new hE(e),new Set(Object.keys(e)))}var Ex="OperatorNode",Sve=["Node"],_ve=ue(Ex,Sve,n=>{var{Node:e}=n;function t(s,o){var a=s;if(o==="auto")for(;Pl(a);)a=a.content;return vn(a)?!0:Br(a)?t(a.args[0],o):!1}function r(s,o,a,l,u){var c=Hn(s,o,a),f=Rg(s,o);if(o==="all"||l.length>2&&s.getIdentifier()!=="OperatorNode:add"&&s.getIdentifier()!=="OperatorNode:multiply")return l.map(function(C){switch(C.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});var d;switch(l.length){case 0:d=[];break;case 1:{var h=Hn(l[0],o,a,s);if(u&&h!==null){var m,v;if(o==="keep"?(m=l[0].getIdentifier(),v=s.getIdentifier()):(m=l[0].getContent().getIdentifier(),v=s.getContent().getIdentifier()),Ma[c][v].latexLeftParens===!1){d=[!1];break}if(Ma[h][m].latexParens===!1){d=[!1];break}}if(h===null){d=[!1];break}if(h<=c){d=[!0];break}d=[!1]}break;case 2:{var y,p=Hn(l[0],o,a,s),S=xC(s,l[0],o);p===null?y=!1:p===c&&f==="right"&&!S||p<c?y=!0:y=!1;var b,g=Hn(l[1],o,a,s),w=xC(s,l[1],o);if(g===null?b=!1:g===c&&f==="left"&&!w||g<c?b=!0:b=!1,u){var x,M,A;o==="keep"?(x=s.getIdentifier(),M=s.args[0].getIdentifier(),A=s.args[1].getIdentifier()):(x=s.getContent().getIdentifier(),M=s.args[0].getContent().getIdentifier(),A=s.args[1].getContent().getIdentifier()),p!==null&&(Ma[c][x].latexLeftParens===!1&&(y=!1),Ma[p][M].latexParens===!1&&(y=!1)),g!==null&&(Ma[c][x].latexRightParens===!1&&(b=!1),Ma[g][A].latexParens===!1&&(b=!1))}d=[y,b]}break;default:(s.getIdentifier()==="OperatorNode:add"||s.getIdentifier()==="OperatorNode:multiply")&&(d=l.map(function(C){var T=Hn(C,o,a,s),R=xC(s,C,o),$=Rg(C,o);return T===null?!1:c===T&&f===$&&!R?!0:T<c}));break}if(l.length>=2&&s.getIdentifier()==="OperatorNode:multiply"&&s.implicit&&o!=="all"&&a==="hide")for(var N=1;N<d.length;++N)t(l[N],o)&&!d[N-1]&&(o!=="keep"||!Pl(l[N-1]))&&(d[N]=!0);return d}class i extends e{constructor(o,a,l,u,c){if(super(),typeof o!="string")throw new TypeError('string expected for parameter "op"');if(typeof a!="string")throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(l)||!l.every(In))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=u===!0,this.isPercentage=c===!0,this.op=o,this.fn=a,this.args=l||[]}get type(){return Ex}get isOperatorNode(){return!0}_compile(o,a){if(typeof this.fn!="string"||!iR(o,this.fn))throw o[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var l=As(o,this.fn),u=vu(this.args,function(m){return m._compile(o,a)});if(typeof l=="function"&&l.rawArgs===!0){var c=this.args;return function(v,y,p){return l(c,o,dv(v,y))}}else if(u.length===1){var f=u[0];return function(v,y,p){return l(f(v,y,p))}}else if(u.length===2){var d=u[0],h=u[1];return function(v,y,p){return l(d(v,y,p),h(v,y,p))}}else return function(v,y,p){return l.apply(null,vu(u,function(S){return S(v,y,p)}))}}forEach(o){for(var a=0;a<this.args.length;a++)o(this.args[a],"args["+a+"]",this)}map(o){for(var a=[],l=0;l<this.args.length;l++)a[l]=this._ifNode(o(this.args[l],"args["+l+"]",this));return new i(this.op,this.fn,a,this.implicit,this.isPercentage)}clone(){return new i(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}isUnary(){return this.args.length===1}isBinary(){return this.args.length===2}_toString(o){var a=o&&o.parenthesis?o.parenthesis:"keep",l=o&&o.implicit?o.implicit:"hide",u=this.args,c=r(this,a,l,u,!1);if(u.length===1){var f=Rg(this,a),d=u[0].toString(o);c[0]&&(d="("+d+")");var h=/[a-zA-Z]+/.test(this.op);return f==="right"?this.op+(h?" ":"")+d:f==="left"?d+(h?" ":"")+this.op:d+this.op}else if(u.length===2){var m=u[0].toString(o),v=u[1].toString(o);return c[0]&&(m="("+m+")"),c[1]&&(v="("+v+")"),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?m+" "+v:m+" "+this.op+" "+v}else if(u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var y=u.map(function(p,S){return p=p.toString(o),c[S]&&(p="("+p+")"),p});return this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?y.join(" "):y.join(" "+this.op+" ")}else return this.fn+"("+this.args.join(", ")+")"}toJSON(){return{mathjs:Ex,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}static fromJSON(o){return new i(o.op,o.fn,o.args,o.implicit,o.isPercentage)}_toHTML(o){var a=o&&o.parenthesis?o.parenthesis:"keep",l=o&&o.implicit?o.implicit:"hide",u=this.args,c=r(this,a,l,u,!1);if(u.length===1){var f=Rg(this,a),d=u[0].toHTML(o);return c[0]&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),f==="right"?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+Ko(this.op)+"</span>"+d:d+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+Ko(this.op)+"</span>"}else if(u.length===2){var h=u[0].toHTML(o),m=u[1].toHTML(o);return c[0]&&(h='<span class="math-parenthesis math-round-parenthesis">(</span>'+h+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c[1]&&(m='<span class="math-parenthesis math-round-parenthesis">(</span>'+m+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?h+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+m:h+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Ko(this.op)+"</span>"+m}else{var v=u.map(function(y,p){return y=y.toHTML(o),c[p]&&(y='<span class="math-parenthesis math-round-parenthesis">(</span>'+y+'<span class="math-parenthesis math-round-parenthesis">)</span>'),y});return u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")?this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?v.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):v.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Ko(this.op)+"</span>"):'<span class="math-function">'+Ko(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+v.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}}_toTex(o){var a=o&&o.parenthesis?o.parenthesis:"keep",l=o&&o.implicit?o.implicit:"hide",u=this.args,c=r(this,a,l,u,!0),f=xn[this.fn];if(f=typeof f>"u"?this.op:f,u.length===1){var d=Rg(this,a),h=u[0].toTex(o);return c[0]&&(h="\\left(".concat(h,"\\right)")),d==="right"?f+h:h+f}else if(u.length===2){var m=u[0],v=m.toTex(o);c[0]&&(v="\\left(".concat(v,"\\right)"));var y=u[1],p=y.toTex(o);c[1]&&(p="\\left(".concat(p,"\\right)"));var S;switch(a==="keep"?S=m.getIdentifier():S=m.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return f+"{"+v+"}{"+p+"}";case"OperatorNode:pow":switch(v="{"+v+"}",p="{"+p+"}",S){case"ConditionalNode":case"OperatorNode:divide":v="\\left(".concat(v,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&l==="hide")return v+"~"+p}return v+f+p}else if(u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var b=u.map(function(g,w){return g=g.toTex(o),c[w]&&(g="\\left(".concat(g,"\\right)")),g});return this.getIdentifier()==="OperatorNode:multiply"&&this.implicit&&l==="hide"?b.join("~"):b.join(f)}else return"\\mathrm{"+this.fn+"}\\left("+u.map(function(g){return g.toTex(o)}).join(",")+"\\right)"}getIdentifier(){return this.type+":"+this.fn}}return mr(i,"name",Ex),i},{isClass:!0,isNode:!0}),Mx="ParenthesisNode",Eve=["Node"],Mve=ue(Mx,Eve,n=>{var{Node:e}=n;class t extends e{constructor(i){if(super(),!In(i))throw new TypeError('Node expected for parameter "content"');this.content=i}get type(){return Mx}get isParenthesisNode(){return!0}_compile(i,s){return this.content._compile(i,s)}getContent(){return this.content.getContent()}forEach(i){i(this.content,"content",this)}map(i){var s=i(this.content,"content",this);return new t(s)}clone(){return new t(this.content)}_toString(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"("+this.content.toString(i)+")":this.content.toString(i)}toJSON(){return{mathjs:Mx,content:this.content}}static fromJSON(i){return new t(i.content)}_toHTML(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(i)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(i)}_toTex(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"\\left(".concat(this.content.toTex(i),"\\right)"):this.content.toTex(i)}}return mr(t,"name",Mx),t},{isClass:!0,isNode:!0}),Cx="RangeNode",Cve=["Node"],Ave=ue(Cx,Cve,n=>{var{Node:e}=n;function t(i,s,o){var a=Hn(i,s,o),l={},u=Hn(i.start,s,o);if(l.start=u!==null&&u<=a||s==="all",i.step){var c=Hn(i.step,s,o);l.step=c!==null&&c<=a||s==="all"}var f=Hn(i.end,s,o);return l.end=f!==null&&f<=a||s==="all",l}class r extends e{constructor(s,o,a){if(super(),!In(s))throw new TypeError("Node expected");if(!In(o))throw new TypeError("Node expected");if(a&&!In(a))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=s,this.end=o,this.step=a||null}get type(){return Cx}get isRangeNode(){return!0}needsEnd(){var s=this.filter(function(o){return oi(o)&&o.name==="end"});return s.length>0}_compile(s,o){var a=s.range,l=this.start._compile(s,o),u=this.end._compile(s,o);if(this.step){var c=this.step._compile(s,o);return function(d,h,m){return a(l(d,h,m),u(d,h,m),c(d,h,m))}}else return function(d,h,m){return a(l(d,h,m),u(d,h,m))}}forEach(s){s(this.start,"start",this),s(this.end,"end",this),this.step&&s(this.step,"step",this)}map(s){return new r(this._ifNode(s(this.start,"start",this)),this._ifNode(s(this.end,"end",this)),this.step&&this._ifNode(s(this.step,"step",this)))}clone(){return new r(this.start,this.end,this.step&&this.step)}_toString(s){var o=s&&s.parenthesis?s.parenthesis:"keep",a=t(this,o,s&&s.implicit),l,u=this.start.toString(s);if(a.start&&(u="("+u+")"),l=u,this.step){var c=this.step.toString(s);a.step&&(c="("+c+")"),l+=":"+c}var f=this.end.toString(s);return a.end&&(f="("+f+")"),l+=":"+f,l}toJSON(){return{mathjs:Cx,start:this.start,end:this.end,step:this.step}}static fromJSON(s){return new r(s.start,s.end,s.step)}_toHTML(s){var o=s&&s.parenthesis?s.parenthesis:"keep",a=t(this,o,s&&s.implicit),l,u=this.start.toHTML(s);if(a.start&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l=u,this.step){var c=this.step.toHTML(s);a.step&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+='<span class="math-operator math-range-operator">:</span>'+c}var f=this.end.toHTML(s);return a.end&&(f='<span class="math-parenthesis math-round-parenthesis">(</span>'+f+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+='<span class="math-operator math-range-operator">:</span>'+f,l}_toTex(s){var o=s&&s.parenthesis?s.parenthesis:"keep",a=t(this,o,s&&s.implicit),l=this.start.toTex(s);if(a.start&&(l="\\left(".concat(l,"\\right)")),this.step){var u=this.step.toTex(s);a.step&&(u="\\left(".concat(u,"\\right)")),l+=":"+u}var c=this.end.toTex(s);return a.end&&(c="\\left(".concat(c,"\\right)")),l+=":"+c,l}}return mr(r,"name",Cx),r},{isClass:!0,isNode:!0}),Ax="RelationalNode",Tve=["Node"],Dve=ue(Ax,Tve,n=>{var{Node:e}=n,t={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="};class r extends e{constructor(s,o){if(super(),!Array.isArray(s))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(o))throw new TypeError("Parameter params must be an array");if(s.length!==o.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=s,this.params=o}get type(){return Ax}get isRelationalNode(){return!0}_compile(s,o){var a=this,l=this.params.map(u=>u._compile(s,o));return function(c,f,d){for(var h,m=l[0](c,f,d),v=0;v<a.conditionals.length;v++){h=m,m=l[v+1](c,f,d);var y=As(s,a.conditionals[v]);if(!y(h,m))return!1}return!0}}forEach(s){this.params.forEach((o,a)=>s(o,"params["+a+"]",this),this)}map(s){return new r(this.conditionals.slice(),this.params.map((o,a)=>this._ifNode(s(o,"params["+a+"]",this)),this))}clone(){return new r(this.conditionals,this.params)}_toString(s){for(var o=s&&s.parenthesis?s.parenthesis:"keep",a=Hn(this,o,s&&s.implicit),l=this.params.map(function(f,d){var h=Hn(f,o,s&&s.implicit);return o==="all"||h!==null&&h<=a?"("+f.toString(s)+")":f.toString(s)}),u=l[0],c=0;c<this.conditionals.length;c++)u+=" "+t[this.conditionals[c]],u+=" "+l[c+1];return u}toJSON(){return{mathjs:Ax,conditionals:this.conditionals,params:this.params}}static fromJSON(s){return new r(s.conditionals,s.params)}_toHTML(s){for(var o=s&&s.parenthesis?s.parenthesis:"keep",a=Hn(this,o,s&&s.implicit),l=this.params.map(function(f,d){var h=Hn(f,o,s&&s.implicit);return o==="all"||h!==null&&h<=a?'<span class="math-parenthesis math-round-parenthesis">(</span>'+f.toHTML(s)+'<span class="math-parenthesis math-round-parenthesis">)</span>':f.toHTML(s)}),u=l[0],c=0;c<this.conditionals.length;c++)u+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Ko(t[this.conditionals[c]])+"</span>"+l[c+1];return u}_toTex(s){for(var o=s&&s.parenthesis?s.parenthesis:"keep",a=Hn(this,o,s&&s.implicit),l=this.params.map(function(f,d){var h=Hn(f,o,s&&s.implicit);return o==="all"||h!==null&&h<=a?"\\left("+f.toTex(s)+"\right)":f.toTex(s)}),u=l[0],c=0;c<this.conditionals.length;c++)u+=xn[this.conditionals[c]]+l[c+1];return u}}return mr(r,"name",Ax),r},{isClass:!0,isNode:!0}),Nve="SymbolNode",Pve=["math","?Unit","Node"],Rve=ue(Nve,Pve,n=>{var{math:e,Unit:t,Node:r}=n;function i(o){return t?t.isValuelessUnit(o):!1}class s extends r{constructor(a){if(super(),typeof a!="string")throw new TypeError('String expected for parameter "name"');this.name=a}get type(){return"SymbolNode"}get isSymbolNode(){return!0}_compile(a,l){var u=this.name;if(l[u]===!0)return function(f,d,h){return As(d,u)};if(u in a)return function(f,d,h){return f.has(u)?f.get(u):As(a,u)};var c=i(u);return function(f,d,h){return f.has(u)?f.get(u):c?new t(null,u):s.onUndefinedSymbol(u)}}forEach(a){}map(a){return this.clone()}static onUndefinedSymbol(a){throw new Error("Undefined symbol "+a)}clone(){return new s(this.name)}_toString(a){return this.name}_toHTML(a){var l=Ko(this.name);return l==="true"||l==="false"?'<span class="math-symbol math-boolean">'+l+"</span>":l==="i"?'<span class="math-symbol math-imaginary-symbol">'+l+"</span>":l==="Infinity"?'<span class="math-symbol math-infinity-symbol">'+l+"</span>":l==="NaN"?'<span class="math-symbol math-nan-symbol">'+l+"</span>":l==="null"?'<span class="math-symbol math-null-symbol">'+l+"</span>":l==="undefined"?'<span class="math-symbol math-undefined-symbol">'+l+"</span>":'<span class="math-symbol">'+l+"</span>"}toJSON(){return{mathjs:"SymbolNode",name:this.name}}static fromJSON(a){return new s(a.name)}_toTex(a){var l=!1;typeof e[this.name]>"u"&&i(this.name)&&(l=!0);var u=aq(this.name,l);return u[0]==="\\"?u:" "+u}}return s},{isClass:!0,isNode:!0}),Tx="FunctionNode",Ove=["math","Node","SymbolNode"],kve=ue(Tx,Ove,n=>{var e,{math:t,Node:r,SymbolNode:i}=n,s=l=>un(l,{truncate:78});function o(l,u,c){for(var f="",d=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,h=0,m;(m=d.exec(l))!==null;)if(f+=l.substring(h,m.index),h=m.index,m[0]==="$$")f+="$",h++;else{h+=m[0].length;var v=u[m[1]];if(!v)throw new ReferenceError("Template: Property "+m[1]+" does not exist.");if(m[2]===void 0)switch(typeof v){case"string":f+=v;break;case"object":if(In(v))f+=v.toTex(c);else if(Array.isArray(v))f+=v.map(function(y,p){if(In(y))return y.toTex(c);throw new TypeError("Template: "+m[1]+"["+p+"] is not a Node.")}).join(",");else throw new TypeError("Template: "+m[1]+" has to be a Node, String or array of Nodes");break;default:throw new TypeError("Template: "+m[1]+" has to be a Node, String or array of Nodes")}else if(In(v[m[2]]&&v[m[2]]))f+=v[m[2]].toTex(c);else throw new TypeError("Template: "+m[1]+"["+m[2]+"] is not a Node.")}return f+=l.slice(h),f}class a extends r{constructor(u,c){if(super(),typeof u=="string"&&(u=new i(u)),!In(u))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(c)||!c.every(In))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=u,this.args=c||[]}get name(){return this.fn.name||""}get type(){return Tx}get isFunctionNode(){return!0}_compile(u,c){var f=this.args.map(A=>A._compile(u,c));if(oi(this.fn)){var d=this.fn.name;if(c[d]){var p=this.args;return function(N,C,T){var R=As(C,d);if(typeof R!="function")throw new TypeError("Argument '".concat(d,"' was not a function; received: ").concat(s(R)));if(R.rawArgs)return R(p,u,dv(N,C));var $=f.map(B=>B(N,C,T));return R.apply(R,$)}}else{var h=d in u?As(u,d):void 0,m=typeof h=="function"&&h.rawArgs===!0,v=A=>{var N;if(A.has(d))N=A.get(d);else if(d in u)N=As(u,d);else return a.onUndefinedFunction(d);if(typeof N=="function")return N;throw new TypeError("'".concat(d,`' is not a function; its value is:
  `).concat(s(N)))};if(m){var y=this.args;return function(N,C,T){var R=v(N);return R(y,u,dv(N,C))}}else switch(f.length){case 0:return function(N,C,T){var R=v(N);return R()};case 1:return function(N,C,T){var R=v(N),$=f[0];return R($(N,C,T))};case 2:return function(N,C,T){var R=v(N),$=f[0],B=f[1];return R($(N,C,T),B(N,C,T))};default:return function(N,C,T){var R=v(N),$=f.map(B=>B(N,C,T));return R(...$)}}}}else if(Xc(this.fn)&&Xd(this.fn.index)&&this.fn.index.isObjectProperty()){var S=this.fn.object._compile(u,c),b=this.fn.index.getObjectProperty(),g=this.args;return function(N,C,T){var R=S(N,C,T),$=Zoe(R,b);if($!=null&&$.rawArgs)return $(g,u,dv(N,C));var B=f.map(z=>z(N,C,T));return $.apply(R,B)}}else{var w=this.fn.toString(),x=this.fn._compile(u,c),M=this.args;return function(N,C,T){var R=x(N,C,T);if(typeof R!="function")throw new TypeError("Expression '".concat(w,"' did not evaluate to a function; value is:")+`
  `.concat(s(R)));if(R.rawArgs)return R(M,u,dv(N,C));var $=f.map(B=>B(N,C,T));return R.apply(R,$)}}}forEach(u){u(this.fn,"fn",this);for(var c=0;c<this.args.length;c++)u(this.args[c],"args["+c+"]",this)}map(u){for(var c=this._ifNode(u(this.fn,"fn",this)),f=[],d=0;d<this.args.length;d++)f[d]=this._ifNode(u(this.args[d],"args["+d+"]",this));return new a(c,f)}clone(){return new a(this.fn,this.args.slice(0))}toString(u){var c,f=this.fn.toString(u);return u&&typeof u.handler=="object"&&gt(u.handler,f)&&(c=u.handler[f](this,u)),typeof c<"u"?c:super.toString(u)}_toString(u){var c=this.args.map(function(d){return d.toString(u)}),f=Pm(this.fn)?"("+this.fn.toString(u)+")":this.fn.toString(u);return f+"("+c.join(", ")+")"}toJSON(){return{mathjs:Tx,fn:this.fn,args:this.args}}_toHTML(u){var c=this.args.map(function(f){return f.toHTML(u)});return'<span class="math-function">'+Ko(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+c.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}toTex(u){var c;return u&&typeof u.handler=="object"&&gt(u.handler,this.name)&&(c=u.handler[this.name](this,u)),typeof c<"u"?c:super.toTex(u)}_toTex(u){var c=this.args.map(function(h){return h.toTex(u)}),f;HB[this.name]&&(f=HB[this.name]),t[this.name]&&(typeof t[this.name].toTex=="function"||typeof t[this.name].toTex=="object"||typeof t[this.name].toTex=="string")&&(f=t[this.name].toTex);var d;switch(typeof f){case"function":d=f(this,u);break;case"string":d=o(f,this,u);break;case"object":switch(typeof f[c.length]){case"function":d=f[c.length](this,u);break;case"string":d=o(f[c.length],this,u);break}}return typeof d<"u"?d:o(hve,this,u)}getIdentifier(){return this.type+":"+this.name}}return e=a,mr(a,"name",Tx),mr(a,"onUndefinedFunction",function(l){throw new Error("Undefined function "+l)}),mr(a,"fromJSON",function(l){return new e(l.fn,l.args)}),a},{isClass:!0,isNode:!0}),jB="parse",Ive=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],Lve=ue(jB,Ive,n=>{var{typed:e,numeric:t,config:r,AccessorNode:i,ArrayNode:s,AssignmentNode:o,BlockNode:a,ConditionalNode:l,ConstantNode:u,FunctionAssignmentNode:c,FunctionNode:f,IndexNode:d,ObjectNode:h,OperatorNode:m,ParenthesisNode:v,RangeNode:y,RelationalNode:p,SymbolNode:S}=n,b=e(jB,{string:function(ve){return Z(ve,{})},"Array | Matrix":function(ve){return g(ve,{})},"string, Object":function(ve,ke){var Ye=ke.nodes!==void 0?ke.nodes:{};return Z(ve,Ye)},"Array | Matrix, Object":g});function g(W){var ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ke=ve.nodes!==void 0?ve.nodes:{};return cn(W,function(Ye){if(typeof Ye!="string")throw new TypeError("String expected");return Z(Ye,ke)})}var w={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},x={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},M={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},A={true:!0,false:!1,null:null,undefined:void 0},N=["NaN","Infinity"],C={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function T(){return{extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:w.NULL,nestingLevel:0,conditionalLevel:null}}function R(W,ve){return W.expression.substr(W.index,ve)}function $(W){return R(W,1)}function B(W){W.index++}function z(W){return W.expression.charAt(W.index-1)}function D(W){return W.expression.charAt(W.index+1)}function I(W){for(W.tokenType=w.NULL,W.token="",W.comment="";;){if($(W)==="#")for(;$(W)!==`
`&&$(W)!=="";)W.comment+=$(W),B(W);if(b.isWhitespace($(W),W.nestingLevel))B(W);else break}if($(W)===""){W.tokenType=w.DELIMITER;return}if($(W)===`
`&&!W.nestingLevel){W.tokenType=w.DELIMITER,W.token=$(W),B(W);return}var ve=$(W),ke=R(W,2),Ye=R(W,3);if(Ye.length===3&&x[Ye]){W.tokenType=w.DELIMITER,W.token=Ye,B(W),B(W),B(W);return}if(ke.length===2&&x[ke]){W.tokenType=w.DELIMITER,W.token=ke,B(W),B(W);return}if(x[ve]){W.tokenType=w.DELIMITER,W.token=ve,B(W);return}if(b.isDigitDot(ve)){W.tokenType=w.NUMBER;var he=R(W,2);if(he==="0b"||he==="0o"||he==="0x"){for(W.token+=$(W),B(W),W.token+=$(W),B(W);b.isHexDigit($(W));)W.token+=$(W),B(W);if($(W)===".")for(W.token+=".",B(W);b.isHexDigit($(W));)W.token+=$(W),B(W);else if($(W)==="i")for(W.token+="i",B(W);b.isDigit($(W));)W.token+=$(W),B(W);return}if($(W)==="."){if(W.token+=$(W),B(W),!b.isDigit($(W))){W.tokenType=w.DELIMITER;return}}else{for(;b.isDigit($(W));)W.token+=$(W),B(W);b.isDecimalMark($(W),D(W))&&(W.token+=$(W),B(W))}for(;b.isDigit($(W));)W.token+=$(W),B(W);if($(W)==="E"||$(W)==="e"){if(b.isDigit(D(W))||D(W)==="-"||D(W)==="+"){if(W.token+=$(W),B(W),($(W)==="+"||$(W)==="-")&&(W.token+=$(W),B(W)),!b.isDigit($(W)))throw ye(W,'Digit expected, got "'+$(W)+'"');for(;b.isDigit($(W));)W.token+=$(W),B(W);if(b.isDecimalMark($(W),D(W)))throw ye(W,'Digit expected, got "'+$(W)+'"')}else if(D(W)===".")throw B(W),ye(W,'Digit expected, got "'+$(W)+'"')}return}if(b.isAlpha($(W),z(W),D(W))){for(;b.isAlpha($(W),z(W),D(W))||b.isDigit($(W));)W.token+=$(W),B(W);gt(M,W.token)?W.tokenType=w.DELIMITER:W.tokenType=w.SYMBOL;return}for(W.tokenType=w.UNKNOWN;$(W)!=="";)W.token+=$(W),B(W);throw ye(W,'Syntax error in part "'+W.token+'"')}function U(W){do I(W);while(W.token===`
`)}function L(W){W.nestingLevel++}function q(W){W.nestingLevel--}b.isAlpha=function(ve,ke,Ye){return b.isValidLatinOrGreek(ve)||b.isValidMathSymbol(ve,Ye)||b.isValidMathSymbol(ke,ve)},b.isValidLatinOrGreek=function(ve){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(ve)},b.isValidMathSymbol=function(ve,ke){return/^[\uD835]$/.test(ve)&&/^[\uDC00-\uDFFF]$/.test(ke)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(ke)},b.isWhitespace=function(ve,ke){return ve===" "||ve==="	"||ve===`
`&&ke>0},b.isDecimalMark=function(ve,ke){return ve==="."&&ke!=="/"&&ke!=="*"&&ke!=="^"},b.isDigitDot=function(ve){return ve>="0"&&ve<="9"||ve==="."},b.isDigit=function(ve){return ve>="0"&&ve<="9"},b.isHexDigit=function(ve){return ve>="0"&&ve<="9"||ve>="a"&&ve<="f"||ve>="A"&&ve<="F"};function Z(W,ve){var ke=T();at(ke,{expression:W,extraNodes:ve}),I(ke);var Ye=J(ke);if(ke.token!=="")throw ke.tokenType===w.DELIMITER?We(ke,"Unexpected operator "+ke.token):ye(ke,'Unexpected part "'+ke.token+'"');return Ye}function J(W){var ve,ke=[],Ye;for(W.token!==""&&W.token!==`
`&&W.token!==";"&&(ve=Y(W),W.comment&&(ve.comment=W.comment));W.token===`
`||W.token===";";)ke.length===0&&ve&&(Ye=W.token!==";",ke.push({node:ve,visible:Ye})),I(W),W.token!==`
`&&W.token!==";"&&W.token!==""&&(ve=Y(W),W.comment&&(ve.comment=W.comment),Ye=W.token!==";",ke.push({node:ve,visible:Ye}));return ke.length>0?new a(ke):(ve||(ve=new u(void 0),W.comment&&(ve.comment=W.comment)),ve)}function Y(W){var ve,ke,Ye,he,Ze=ee(W);if(W.token==="="){if(oi(Ze))return ve=Ze.name,U(W),Ye=Y(W),new o(new S(ve),Ye);if(Xc(Ze))return U(W),Ye=Y(W),new o(Ze.object,Ze.index,Ye);if(Cu(Ze)&&oi(Ze.fn)&&(he=!0,ke=[],ve=Ze.name,Ze.args.forEach(function(H,ne){oi(H)?ke[ne]=H.name:he=!1}),he))return U(W),Ye=Y(W),new c(ve,ke,Ye);throw ye(W,"Invalid left hand side of assignment operator =")}return Ze}function ee(W){for(var ve=ae(W);W.token==="?";){var ke=W.conditionalLevel;W.conditionalLevel=W.nestingLevel,U(W);var Ye=ve,he=Y(W);if(W.token!==":")throw ye(W,"False part of conditional expression expected");W.conditionalLevel=null,U(W);var Ze=Y(W);ve=new l(Ye,he,Ze),W.conditionalLevel=ke}return ve}function ae(W){for(var ve=ce(W);W.token==="or";)U(W),ve=new m("or","or",[ve,ce(W)]);return ve}function ce(W){for(var ve=pe(W);W.token==="xor";)U(W),ve=new m("xor","xor",[ve,pe(W)]);return ve}function pe(W){for(var ve=we(W);W.token==="and";)U(W),ve=new m("and","and",[ve,we(W)]);return ve}function we(W){for(var ve=me(W);W.token==="|";)U(W),ve=new m("|","bitOr",[ve,me(W)]);return ve}function me(W){for(var ve=Ae(W);W.token==="^|";)U(W),ve=new m("^|","bitXor",[ve,Ae(W)]);return ve}function Ae(W){for(var ve=Ee(W);W.token==="&";)U(W),ve=new m("&","bitAnd",[ve,Ee(W)]);return ve}function Ee(W){for(var ve=[re(W)],ke=[],Ye={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};gt(Ye,W.token);){var he={name:W.token,fn:Ye[W.token]};ke.push(he),U(W),ve.push(re(W))}return ve.length===1?ve[0]:ve.length===2?new m(ke[0].name,ke[0].fn,ve):new p(ke.map(Ze=>Ze.fn),ve)}function re(W){var ve,ke,Ye,he;ve=Pe(W);for(var Ze={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};gt(Ze,W.token);)ke=W.token,Ye=Ze[ke],U(W),he=[ve,Pe(W)],ve=new m(ke,Ye,he);return ve}function Pe(W){var ve,ke,Ye,he;ve=Re(W);for(var Ze={to:"to",in:"to"};gt(Ze,W.token);)ke=W.token,Ye=Ze[ke],U(W),ke==="in"&&W.token===""?ve=new m("*","multiply",[ve,new S("in")],!0):(he=[ve,Re(W)],ve=new m(ke,Ye,he));return ve}function Re(W){var ve,ke=[];if(W.token===":"?ve=new u(1):ve=te(W),W.token===":"&&W.conditionalLevel!==W.nestingLevel){for(ke.push(ve);W.token===":"&&ke.length<3;)U(W),W.token===")"||W.token==="]"||W.token===","||W.token===""?ke.push(new S("end")):ke.push(te(W));ke.length===3?ve=new y(ke[0],ke[2],ke[1]):ve=new y(ke[0],ke[1])}return ve}function te(W){var ve,ke,Ye,he;ve=ie(W);for(var Ze={"+":"add","-":"subtract"};gt(Ze,W.token);){ke=W.token,Ye=Ze[ke],U(W);var H=ie(W);H.isPercentage?he=[ve,new m("*","multiply",[ve,H])]:he=[ve,H],ve=new m(ke,Ye,he)}return ve}function ie(W){var ve,ke,Ye,he;ve=Me(W),ke=ve;for(var Ze={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide"};gt(Ze,W.token);)Ye=W.token,he=Ze[Ye],U(W),ke=Me(W),ve=new m(Ye,he,[ve,ke]);return ve}function Me(W){var ve,ke;for(ve=oe(W),ke=ve;W.tokenType===w.SYMBOL||W.token==="in"&&vn(ve)||W.tokenType===w.NUMBER&&!vn(ke)&&(!Br(ke)||ke.op==="!")||W.token==="(";)ke=oe(W),ve=new m("*","multiply",[ve,ke],!0);return ve}function oe(W){for(var ve=G(W),ke=ve,Ye=[];W.token==="/"&&g3(ke);)if(Ye.push(at({},W)),U(W),W.tokenType===w.NUMBER)if(Ye.push(at({},W)),U(W),W.tokenType===w.SYMBOL||W.token==="(")at(W,Ye.pop()),Ye.pop(),ke=G(W),ve=new m("/","divide",[ve,ke]);else{Ye.pop(),at(W,Ye.pop());break}else{at(W,Ye.pop());break}return ve}function G(W){var ve,ke,Ye,he;ve=j(W);for(var Ze={"%":"mod",mod:"mod"};gt(Ze,W.token);)ke=W.token,Ye=Ze[ke],U(W),ke==="%"&&W.tokenType===w.DELIMITER&&W.token!=="("?ve=new m("/","divide",[ve,new u(100)],!1,!0):(he=[ve,j(W)],ve=new m(ke,Ye,he));return ve}function j(W){var ve,ke,Ye,he={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return gt(he,W.token)?(Ye=he[W.token],ve=W.token,U(W),ke=[j(W)],new m(ve,Ye,ke)):de(W)}function de(W){var ve,ke,Ye,he;return ve=Te(W),(W.token==="^"||W.token===".^")&&(ke=W.token,Ye=ke==="^"?"pow":"dotPow",U(W),he=[ve,j(W)],ve=new m(ke,Ye,he)),ve}function Te(W){var ve,ke,Ye,he;ve=X(W);for(var Ze={"!":"factorial","'":"ctranspose"};gt(Ze,W.token);)ke=W.token,Ye=Ze[ke],I(W),he=[ve],ve=new m(ke,Ye,he),ve=be(W,ve);return ve}function X(W){var ve=[];if(W.tokenType===w.SYMBOL&&gt(W.extraNodes,W.token)){var ke=W.extraNodes[W.token];if(I(W),W.token==="("){if(ve=[],L(W),I(W),W.token!==")")for(ve.push(Y(W));W.token===",";)I(W),ve.push(Y(W));if(W.token!==")")throw ye(W,"Parenthesis ) expected");q(W),I(W)}return new ke(ve)}return Q(W)}function Q(W){var ve,ke;return W.tokenType===w.SYMBOL||W.tokenType===w.DELIMITER&&W.token in M?(ke=W.token,I(W),gt(A,ke)?ve=new u(A[ke]):N.includes(ke)?ve=new u(t(ke,"number")):ve=new S(ke),ve=be(W,ve),ve):_e(W)}function be(W,ve,ke){for(var Ye;(W.token==="("||W.token==="["||W.token===".")&&!ke;)if(Ye=[],W.token==="(")if(oi(ve)||Xc(ve)){if(L(W),I(W),W.token!==")")for(Ye.push(Y(W));W.token===",";)I(W),Ye.push(Y(W));if(W.token!==")")throw ye(W,"Parenthesis ) expected");q(W),I(W),ve=new f(ve,Ye)}else return ve;else if(W.token==="["){if(L(W),I(W),W.token!=="]")for(Ye.push(Y(W));W.token===",";)I(W),Ye.push(Y(W));if(W.token!=="]")throw ye(W,"Parenthesis ] expected");q(W),I(W),ve=new i(ve,new d(Ye))}else{I(W);var he=W.tokenType===w.SYMBOL||W.tokenType===w.DELIMITER&&W.token in M;if(!he)throw ye(W,"Property name expected after dot");Ye.push(new u(W.token)),I(W);var Ze=!0;ve=new i(ve,new d(Ye,Ze))}return ve}function _e(W){var ve,ke;return W.token==='"'||W.token==="'"?(ke=Ne(W,W.token),ve=new u(ke),ve=be(W,ve),ve):Fe(W)}function Ne(W,ve){for(var ke="";$(W)!==""&&$(W)!==ve;)if($(W)==="\\"){B(W);var Ye=$(W),he=C[Ye];if(he!==void 0)ke+=he,W.index+=1;else if(Ye==="u"){var Ze=W.expression.slice(W.index+1,W.index+5);if(/^[0-9A-Fa-f]{4}$/.test(Ze))ke+=String.fromCharCode(parseInt(Ze,16)),W.index+=5;else throw ye(W,"Invalid unicode character \\u".concat(Ze))}else throw ye(W,"Bad escape character \\".concat(Ye))}else ke+=$(W),B(W);if(I(W),W.token!==ve)throw ye(W,"End of string ".concat(ve," expected"));return I(W),ke}function Fe(W){var ve,ke,Ye,he;if(W.token==="["){if(L(W),I(W),W.token!=="]"){var Ze=He(W);if(W.token===";"){for(Ye=1,ke=[Ze];W.token===";";)I(W),W.token!=="]"&&(ke[Ye]=He(W),Ye++);if(W.token!=="]")throw ye(W,"End of matrix ] expected");q(W),I(W),he=ke[0].items.length;for(var H=1;H<Ye;H++)if(ke[H].items.length!==he)throw We(W,"Column dimensions mismatch ("+ke[H].items.length+" !== "+he+")");ve=new s(ke)}else{if(W.token!=="]")throw ye(W,"End of matrix ] expected");q(W),I(W),ve=Ze}}else q(W),I(W),ve=new s([]);return be(W,ve)}return Ie(W)}function He(W){for(var ve=[Y(W)],ke=1;W.token===",";)I(W),W.token!=="]"&&W.token!==";"&&(ve[ke]=Y(W),ke++);return new s(ve)}function Ie(W){if(W.token==="{"){L(W);var ve,ke={};do if(I(W),W.token!=="}"){if(W.token==='"'||W.token==="'")ve=Ne(W,W.token);else if(W.tokenType===w.SYMBOL||W.tokenType===w.DELIMITER&&W.token in M)ve=W.token,I(W);else throw ye(W,"Symbol or string expected as object key");if(W.token!==":")throw ye(W,"Colon : expected after object key");I(W),ke[ve]=Y(W)}while(W.token===",");if(W.token!=="}")throw ye(W,"Comma , or bracket } expected after object value");q(W),I(W);var Ye=new h(ke);return Ye=be(W,Ye),Ye}return Je(W)}function Je(W){var ve;return W.tokenType===w.NUMBER?(ve=W.token,I(W),new u(t(ve,r.number))):qe(W)}function qe(W){var ve;if(W.token==="("){if(L(W),I(W),ve=Y(W),W.token!==")")throw ye(W,"Parenthesis ) expected");return q(W),I(W),ve=new v(ve),ve=be(W,ve),ve}return lt(W)}function lt(W){throw W.token===""?ye(W,"Unexpected end of expression"):ye(W,"Value expected")}function ot(W){return W.index-W.token.length+1}function ye(W,ve){var ke=ot(W),Ye=new SyntaxError(ve+" (char "+ke+")");return Ye.char=ke,Ye}function We(W,ve){var ke=ot(W),Ye=new SyntaxError(ve+" (char "+ke+")");return Ye.char=ke,Ye}return e.addConversion({from:"string",to:"Node",convert:b}),b}),GB="compile",Fve=["typed","parse"],Bve=ue(GB,Fve,n=>{var{typed:e,parse:t}=n;return e(GB,{string:function(i){return t(i).compile()},"Array | Matrix":function(i){return cn(i,function(s){return t(s).compile()})}})}),qB="evaluate",zve=["typed","parse"],Uve=ue(qB,zve,n=>{var{typed:e,parse:t}=n;return e(qB,{string:function(i){var s=h0();return t(i).compile().evaluate(s)},"string, Map | Object":function(i,s){return t(i).compile().evaluate(s)},"Array | Matrix":function(i){var s=h0();return cn(i,function(o){return t(o).compile().evaluate(s)})},"Array | Matrix, Map | Object":function(i,s){return cn(i,function(o){return t(o).compile().evaluate(s)})}})}),$ve="Parser",Vve=["evaluate"],Hve=ue($ve,Vve,n=>{var{evaluate:e}=n;function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:h0(),writable:!1})}return t.prototype.type="Parser",t.prototype.isParser=!0,t.prototype.evaluate=function(r){return e(r,this.scope)},t.prototype.get=function(r){if(this.scope.has(r))return this.scope.get(r)},t.prototype.getAll=function(){return eae(this.scope)},t.prototype.getAllAsMap=function(){return this.scope},t.prototype.set=function(r,i){return this.scope.set(r,i),i},t.prototype.remove=function(r){this.scope.delete(r)},t.prototype.clear=function(){this.scope.clear()},t},{isClass:!0}),XB="parser",Wve=["typed","Parser"],jve=ue(XB,Wve,n=>{var{typed:e,Parser:t}=n;return e(XB,{"":function(){return new t}})}),YB="lup",Gve=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],qve=ue(YB,Gve,n=>{var{typed:e,matrix:t,abs:r,addScalar:i,divideScalar:s,multiplyScalar:o,subtractScalar:a,larger:l,equalScalar:u,unaryMinus:c,DenseMatrix:f,SparseMatrix:d,Spa:h}=n;return e(YB,{DenseMatrix:function(p){return m(p)},SparseMatrix:function(p){return v(p)},Array:function(p){var S=t(p),b=m(S);return{L:b.L.valueOf(),U:b.U.valueOf(),p:b.p}}});function m(y){var p=y._size[0],S=y._size[1],b=Math.min(p,S),g=Yt(y._data),w=[],x=[p,b],M=[],A=[b,S],N,C,T,R=[];for(N=0;N<p;N++)R[N]=N;for(C=0;C<S;C++){if(C>0)for(N=0;N<p;N++){var $=Math.min(N,C),B=0;for(T=0;T<$;T++)B=i(B,o(g[N][T],g[T][C]));g[N][C]=a(g[N][C],B)}var z=C,D=0,I=0;for(N=C;N<p;N++){var U=g[N][C],L=r(U);l(L,D)&&(z=N,D=L,I=U)}if(C!==z&&(R[C]=[R[z],R[z]=R[C]][0],f._swapRows(C,z,g)),C<p)for(N=C+1;N<p;N++){var q=g[N][C];u(q,0)||(g[N][C]=s(g[N][C],I))}}for(C=0;C<S;C++)for(N=0;N<p;N++){if(C===0&&(N<S&&(M[N]=[]),w[N]=[]),N<C){N<S&&(M[N][C]=g[N][C]),C<p&&(w[N][C]=0);continue}if(N===C){N<S&&(M[N][C]=g[N][C]),C<p&&(w[N][C]=1);continue}N<S&&(M[N][C]=0),C<p&&(w[N][C]=g[N][C])}var Z=new f({data:w,size:x}),J=new f({data:M,size:A}),Y=[];for(N=0,b=R.length;N<b;N++)Y[R[N]]=N;return{L:Z,U:J,p:Y,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function v(y){var p=y._size[0],S=y._size[1],b=Math.min(p,S),g=y._values,w=y._index,x=y._ptr,M=[],A=[],N=[],C=[p,b],T=[],R=[],$=[],B=[b,S],z,D,I,U=[],L=[];for(z=0;z<p;z++)U[z]=z,L[z]=z;var q=function(Y,ee){var ae=L[Y],ce=L[ee];U[ae]=ee,U[ce]=Y,L[Y]=ce,L[ee]=ae},Z=function(){var Y=new h;D<p&&(N.push(M.length),M.push(1),A.push(D)),$.push(T.length);var ee=x[D],ae=x[D+1];for(I=ee;I<ae;I++)z=w[I],Y.set(U[z],g[I]);D>0&&Y.forEach(0,D-1,function(me,Ae){d._forEachRow(me,M,A,N,function(Ee,re){Ee>me&&Y.accumulate(Ee,c(o(re,Ae)))})});var ce=D,pe=Y.get(D),we=r(pe);Y.forEach(D+1,p-1,function(me,Ae){var Ee=r(Ae);l(Ee,we)&&(ce=me,we=Ee,pe=Ae)}),D!==ce&&(d._swapRows(D,ce,C[1],M,A,N),d._swapRows(D,ce,B[1],T,R,$),Y.swap(D,ce),q(D,ce)),Y.forEach(0,p-1,function(me,Ae){me<=D?(T.push(Ae),R.push(me)):(Ae=s(Ae,pe),u(Ae,0)||(M.push(Ae),A.push(me)))})};for(D=0;D<S;D++)Z();return $.push(T.length),N.push(M.length),{L:new d({values:M,index:A,ptr:N,size:C}),U:new d({values:T,index:R,ptr:$,size:B}),p:U,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}}),KB="qr",Xve=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],Yve=ue(KB,Xve,n=>{var{typed:e,matrix:t,zeros:r,identity:i,isZero:s,equal:o,sign:a,sqrt:l,conj:u,unaryMinus:c,addScalar:f,divideScalar:d,multiplyScalar:h,subtractScalar:m,complex:v}=n;return at(e(KB,{DenseMatrix:function(g){return p(g)},SparseMatrix:function(g){return S()},Array:function(g){var w=t(g),x=p(w);return{Q:x.Q.valueOf(),R:x.R.valueOf()}}}),{_denseQRimpl:y});function y(b){var g=b._size[0],w=b._size[1],x=i([g],"dense"),M=x._data,A=b.clone(),N=A._data,C,T,R,$=r([g],"");for(R=0;R<Math.min(w,g);++R){var B=N[R][R],z=c(o(B,0)?1:a(B)),D=u(z),I=0;for(C=R;C<g;C++)I=f(I,h(N[C][R],u(N[C][R])));var U=h(z,l(I));if(!s(U)){var L=m(B,U);for($[R]=1,C=R+1;C<g;C++)$[C]=d(N[C][R],L);var q=c(u(d(L,U))),Z=void 0;for(T=R;T<w;T++){for(Z=0,C=R;C<g;C++)Z=f(Z,h(u($[C]),N[C][T]));for(Z=h(Z,q),C=R;C<g;C++)N[C][T]=h(m(N[C][T],h($[C],Z)),D)}for(C=0;C<g;C++){for(Z=0,T=R;T<g;T++)Z=f(Z,h(M[C][T],$[T]));for(Z=h(Z,q),T=R;T<g;++T)M[C][T]=d(m(M[C][T],h(Z,u($[T]))),D)}}}return{Q:x,R:A,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function p(b){var g=y(b),w=g.R._data;if(b._data.length>0)for(var x=w[0][0].type==="Complex"?v(0):0,M=0;M<w.length;++M)for(var A=0;A<M&&A<(w[0]||[]).length;++A)w[M][A]=x;return g}function S(b){throw new Error("qr not implemented for sparse matrices yet")}});function Kve(n,e,t,r){n._values;for(var i=n._index,s=n._ptr,o=n._size,a=n._datatype,l=o[0],u=o[1],c=null,f=[],d=[],h=0,m=0;m<u;m++){d[m]=h;for(var v=t?t[m]:m,y=s[v],p=s[v+1],S=y;S<p;S++){var b=i[S];f[h]=b,h++}}return d[u]=h,n.createSparseMatrix({values:c,index:f,ptr:d,size:[l,u],datatype:a})}function lq(n,e,t,r,i,s,o){var a=0;for(t[o]=n;a>=0;){var l=t[o+a],u=t[r+l];u===-1?(a--,s[e++]=l):(t[r+l]=t[i+u],++a,t[o+a]=u)}return e}function Zve(n,e){if(!n)return null;var t=0,r,i=[],s=[],o=0,a=e,l=2*e;for(r=0;r<e;r++)s[o+r]=-1;for(r=e-1;r>=0;r--)n[r]!==-1&&(s[a+r]=s[o+n[r]],s[o+n[r]]=r);for(r=0;r<e;r++)n[r]===-1&&(t=lq(r,t,s,o,a,i,l));return i}function Jve(n,e){if(!n)return null;var t=n._index,r=n._ptr,i=n._size,s=i[0],o=i[1],a=[],l=[],u=0,c=o,f,d;for(f=0;f<s;f++)l[c+f]=-1;for(var h=0;h<o;h++){a[h]=-1,l[u+h]=-1;for(var m=r[h],v=r[h+1],y=m;y<v;y++){var p=t[y];for(f=l[c+p];f!==-1&&f<h;f=d)d=l[u+f],l[u+f]=h,d===-1&&(a[f]=h);l[c+p]=h}}return a}function Qve(n,e,t){for(var r=n._values,i=n._index,s=n._ptr,o=n._size,a=o[1],l=0,u=0;u<a;u++){var c=s[u];for(s[u]=l;c<s[u+1];c++)e(i[c],u,r?r[c]:1,t)&&(i[l]=i[c],r&&(r[l]=r[c]),l++)}return s[a]=l,i.splice(l,i.length-l),r&&r.splice(l,r.length-l),l}function hc(n){return-n-2}var e0e="csAmd",t0e=["add","multiply","transpose"],n0e=ue(e0e,t0e,n=>{var{add:e,multiply:t,transpose:r}=n;return function(c,f){if(!f||c<=0||c>3)return null;var d=f._size,h=d[0],m=d[1],v=0,y=Math.max(16,10*Math.sqrt(m));y=Math.min(m-2,y);var p=i(c,f,h,m,y);Qve(p,l,null);for(var S=p._index,b=p._ptr,g=b[m],w=[],x=[],M=0,A=m+1,N=2*(m+1),C=3*(m+1),T=4*(m+1),R=5*(m+1),$=6*(m+1),B=7*(m+1),z=w,D=s(m,b,x,M,C,z,N,B,A,$,T,R),I=o(m,b,x,R,T,$,y,A,C,z,N),U=0,L,q,Z,J,Y,ee,ae,ce,pe,we,me,Ae,Ee,re,Pe,Re;I<m;){for(Z=-1;U<m&&(Z=x[C+U])===-1;U++);x[N+Z]!==-1&&(z[x[N+Z]]=-1),x[C+U]=x[N+Z];var te=x[T+Z],ie=x[A+Z];I+=ie;var Me=0;x[A+Z]=-ie;var oe=b[Z],G=te===0?oe:g,j=G;for(J=1;J<=te+1;J++){for(J>te?(ee=Z,ae=oe,ce=x[M+Z]-te):(ee=S[oe++],ae=b[ee],ce=x[M+ee]),Y=1;Y<=ce;Y++)L=S[ae++],!((pe=x[A+L])<=0)&&(Me+=pe,x[A+L]=-pe,S[j++]=L,x[N+L]!==-1&&(z[x[N+L]]=z[L]),z[L]!==-1?x[N+z[L]]=x[N+L]:x[C+x[R+L]]=x[N+L]);ee!==Z&&(b[ee]=hc(Z),x[$+ee]=0)}for(te!==0&&(g=j),x[R+Z]=Me,b[Z]=G,x[M+Z]=j-G,x[T+Z]=-2,D=a(D,v,x,$,m),we=G;we<j;we++)if(L=S[we],!((me=x[T+L])<=0)){pe=-x[A+L];var de=D-pe;for(oe=b[L],Ae=b[L]+me-1;oe<=Ae;oe++)ee=S[oe],x[$+ee]>=D?x[$+ee]-=pe:x[$+ee]!==0&&(x[$+ee]=x[R+ee]+de)}for(we=G;we<j;we++){for(L=S[we],Ae=b[L],Ee=Ae+x[T+L]-1,re=Ae,Pe=0,Re=0,oe=Ae;oe<=Ee;oe++)if(ee=S[oe],x[$+ee]!==0){var Te=x[$+ee]-D;Te>0?(Re+=Te,S[re++]=ee,Pe+=ee):(b[ee]=hc(Z),x[$+ee]=0)}x[T+L]=re-Ae+1;var X=re,Q=Ae+x[M+L];for(oe=Ee+1;oe<Q;oe++){q=S[oe];var be=x[A+q];be<=0||(Re+=be,S[re++]=q,Pe+=q)}Re===0?(b[L]=hc(Z),pe=-x[A+L],Me-=pe,ie+=pe,I+=pe,x[A+L]=0,x[T+L]=-1):(x[R+L]=Math.min(x[R+L],Re),S[re]=S[X],S[X]=S[Ae],S[Ae]=Z,x[M+L]=re-Ae+1,Pe=(Pe<0?-Pe:Pe)%m,x[N+L]=x[B+Pe],x[B+Pe]=L,z[L]=Pe)}for(x[R+Z]=Me,v=Math.max(v,Me),D=a(D+v,v,x,$,m),we=G;we<j;we++)if(L=S[we],!(x[A+L]>=0))for(Pe=z[L],L=x[B+Pe],x[B+Pe]=-1;L!==-1&&x[N+L]!==-1;L=x[N+L],D++){for(ce=x[M+L],me=x[T+L],oe=b[L]+1;oe<=b[L]+ce-1;oe++)x[$+S[oe]]=D;var _e=L;for(q=x[N+L];q!==-1;){var Ne=x[M+q]===ce&&x[T+q]===me;for(oe=b[q]+1;Ne&&oe<=b[q]+ce-1;oe++)x[$+S[oe]]!==D&&(Ne=0);Ne?(b[q]=hc(L),x[A+L]+=x[A+q],x[A+q]=0,x[T+q]=-1,q=x[N+q],x[N+_e]=q):(_e=q,q=x[N+q])}}for(oe=G,we=G;we<j;we++)L=S[we],!((pe=-x[A+L])<=0)&&(x[A+L]=pe,Re=x[R+L]+Me-pe,Re=Math.min(Re,m-I-pe),x[C+Re]!==-1&&(z[x[C+Re]]=L),x[N+L]=x[C+Re],z[L]=-1,x[C+Re]=L,U=Math.min(U,Re),x[R+L]=Re,S[oe++]=L);x[A+Z]=ie,(x[M+Z]=oe-G)===0&&(b[Z]=-1,x[$+Z]=0),te!==0&&(g=oe)}for(L=0;L<m;L++)b[L]=hc(b[L]);for(q=0;q<=m;q++)x[C+q]=-1;for(q=m;q>=0;q--)x[A+q]>0||(x[N+q]=x[C+b[q]],x[C+b[q]]=q);for(ee=m;ee>=0;ee--)x[A+ee]<=0||b[ee]!==-1&&(x[N+ee]=x[C+b[ee]],x[C+b[ee]]=ee);for(Z=0,L=0;L<=m;L++)b[L]===-1&&(Z=lq(L,Z,x,C,N,w,$));return w.splice(w.length-1,1),w};function i(u,c,f,d,h){var m=r(c);if(u===1&&d===f)return e(c,m);if(u===2){for(var v=m._index,y=m._ptr,p=0,S=0;S<f;S++){var b=y[S];if(y[S]=p,!(y[S+1]-b>h))for(var g=y[S+1];b<g;b++)v[p++]=v[b]}return y[f]=p,c=r(m),t(m,c)}return t(m,c)}function s(u,c,f,d,h,m,v,y,p,S,b,g){for(var w=0;w<u;w++)f[d+w]=c[w+1]-c[w];f[d+u]=0;for(var x=0;x<=u;x++)f[h+x]=-1,m[x]=-1,f[v+x]=-1,f[y+x]=-1,f[p+x]=1,f[S+x]=1,f[b+x]=0,f[g+x]=f[d+x];var M=a(0,0,f,S,u);return f[b+u]=-2,c[u]=-1,f[S+u]=0,M}function o(u,c,f,d,h,m,v,y,p,S,b){for(var g=0,w=0;w<u;w++){var x=f[d+w];if(x===0)f[h+w]=-2,g++,c[w]=-1,f[m+w]=0;else if(x>v)f[y+w]=0,f[h+w]=-1,g++,c[w]=hc(u),f[y+u]++;else{var M=f[p+x];M!==-1&&(S[M]=w),f[b+w]=f[p+x],f[p+x]=w}}return g}function a(u,c,f,d,h){if(u<2||u+c<0){for(var m=0;m<h;m++)f[d+m]!==0&&(f[d+m]=1);u=2}return u}function l(u,c){return u!==c}});function r0e(n,e,t,r,i,s,o){var a,l,u=0,c;if(n<=e||t[r+e]<=t[i+n])return-1;t[i+n]=t[r+e];var f=t[s+n];if(t[s+n]=e,f===-1)u=1,c=n;else{for(u=2,c=f;c!==t[o+c];c=t[o+c]);for(a=f;a!==c;a=l)l=t[o+a],t[o+a]=c}return{jleaf:u,q:c}}var i0e="csCounts",s0e=["transpose"],o0e=ue(i0e,s0e,n=>{var{transpose:e}=n;return function(t,r,i,s){if(!t||!r||!i)return null;var o=t._size,a=o[0],l=o[1],u,c,f,d,h,m,v,y=4*l+(s?l+a+1:0),p=[],S=0,b=l,g=2*l,w=3*l,x=4*l,M=5*l+1;for(f=0;f<y;f++)p[f]=-1;var A=[],N=e(t),C=N._index,T=N._ptr;for(f=0;f<l;f++)for(c=i[f],A[c]=p[w+c]===-1?1:0;c!==-1&&p[w+c]===-1;c=r[c])p[w+c]=f;if(s){for(f=0;f<l;f++)p[i[f]]=f;for(u=0;u<a;u++){for(f=l,m=T[u],v=T[u+1],h=m;h<v;h++)f=Math.min(f,p[C[h]]);p[M+u]=p[x+f],p[x+f]=u}}for(u=0;u<l;u++)p[S+u]=u;for(f=0;f<l;f++){for(c=i[f],r[c]!==-1&&A[r[c]]--,d=s?p[x+f]:c;d!==-1;d=s?p[M+d]:-1)for(h=T[d];h<T[d+1];h++){u=C[h];var R=r0e(u,c,p,w,b,g,S);R.jleaf>=1&&A[c]++,R.jleaf===2&&A[R.q]--}r[c]!==-1&&(p[S+c]=r[c])}for(c=0;c<l;c++)r[c]!==-1&&(A[r[c]]+=A[c]);return A}}),a0e="csSqr",l0e=["add","multiply","transpose"],u0e=ue(a0e,l0e,n=>{var{add:e,multiply:t,transpose:r}=n,i=n0e({add:e,multiply:t,transpose:r}),s=o0e({transpose:r});return function(l,u,c){var f=u._ptr,d=u._size,h=d[1],m,v={};if(v.q=i(l,u),l&&!v.q)return null;if(c){var y=l?Kve(u,null,v.q):u;v.parent=Jve(y);var p=Zve(v.parent,h);if(v.cp=s(y,v.parent,p,1),y&&v.parent&&v.cp&&o(y,v))for(v.unz=0,m=0;m<h;m++)v.unz+=v.cp[m]}else v.unz=4*f[h]+h,v.lnz=v.unz;return v};function o(a,l){var u=a._ptr,c=a._index,f=a._size,d=f[0],h=f[1];l.pinv=[],l.leftmost=[];var m=l.parent,v=l.pinv,y=l.leftmost,p=[],S=0,b=d,g=d+h,w=d+2*h,x,M,A,N,C;for(M=0;M<h;M++)p[b+M]=-1,p[g+M]=-1,p[w+M]=0;for(x=0;x<d;x++)y[x]=-1;for(M=h-1;M>=0;M--)for(N=u[M],C=u[M+1],A=N;A<C;A++)y[c[A]]=M;for(x=d-1;x>=0;x--)v[x]=-1,M=y[x],M!==-1&&(p[w+M]++===0&&(p[g+M]=x),p[S+x]=p[b+M],p[b+M]=x);for(l.lnz=0,l.m2=d,M=0;M<h;M++)if(x=p[b+M],l.lnz++,x<0&&(x=l.m2++),v[x]=M,!(--w[M]<=0)){l.lnz+=p[w+M];var T=m[M];T!==-1&&(p[w+T]===0&&(p[g+T]=p[g+M]),p[S+p[g+M]]=p[b+T],p[b+T]=p[S+x],p[w+T]+=p[w+M])}for(x=0;x<d;x++)v[x]<0&&(v[x]=M++);return!0}});function P3(n,e){return n[e]<0}function uq(n,e){n[e]=hc(n[e])}function ZB(n){return n<0?hc(n):n}function c0e(n,e,t,r,i){var s=e._index,o=e._ptr,a=e._size,l=a[1],u,c,f,d=0;for(r[0]=n;d>=0;){n=r[d];var h=i?i[n]:n;P3(o,n)||(uq(o,n),r[l+d]=h<0?0:ZB(o[h]));var m=1;for(c=r[l+d],f=h<0?0:ZB(o[h+1]);c<f;c++)if(u=s[c],!P3(o,u)){r[l+d]=c,r[++d]=u,m=0;break}m&&(d--,r[--t]=n)}return t}function f0e(n,e,t,r,i){var s=n._ptr,o=n._size,a=e._index,l=e._ptr,u=o[1],c,f,d,h=u;for(f=l[t],d=l[t+1],c=f;c<d;c++){var m=a[c];P3(s,m)||(h=c0e(m,n,h,r,i))}for(c=h;c<u;c++)uq(s,r[c]);return h}var d0e="csSpsolve",h0e=["divideScalar","multiply","subtract"],p0e=ue(d0e,h0e,n=>{var{divideScalar:e,multiply:t,subtract:r}=n;return function(s,o,a,l,u,c,f){var d=s._values,h=s._index,m=s._ptr,v=s._size,y=v[1],p=o._values,S=o._index,b=o._ptr,g,w,x,M,A=f0e(s,o,a,l,c);for(g=A;g<y;g++)u[l[g]]=0;for(w=b[a],x=b[a+1],g=w;g<x;g++)u[S[g]]=p[g];for(var N=A;N<y;N++){var C=l[N],T=c?c[C]:C;if(!(T<0))for(w=m[T],x=m[T+1],u[C]=e(u[C],d[f?w:x-1]),g=f?w+1:w,M=f?x:x-1;g<M;g++){var R=h[g];u[R]=r(u[R],t(d[g],u[C]))}}return A}}),m0e="csLu",g0e=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],v0e=ue(m0e,g0e,n=>{var{abs:e,divideScalar:t,multiply:r,subtract:i,larger:s,largerEq:o,SparseMatrix:a}=n,l=p0e({divideScalar:t,multiply:r,subtract:i});return function(c,f,d){if(!c)return null;var h=c._size,m=h[1],v,y=100,p=100;f&&(v=f.q,y=f.lnz||y,p=f.unz||p);var S=[],b=[],g=[],w=new a({values:S,index:b,ptr:g,size:[m,m]}),x=[],M=[],A=[],N=new a({values:x,index:M,ptr:A,size:[m,m]}),C=[],T,R,$=[],B=[];for(T=0;T<m;T++)$[T]=0,C[T]=-1,g[T+1]=0;y=0,p=0;for(var z=0;z<m;z++){g[z]=y,A[z]=p;var D=v?v[z]:z,I=l(w,c,D,B,$,C,1),U=-1,L=-1;for(R=I;R<m;R++)if(T=B[R],C[T]<0){var q=e($[T]);s(q,L)&&(L=q,U=T)}else M[p]=C[T],x[p++]=$[T];if(U===-1||L<=0)return null;C[D]<0&&o(e($[D]),r(L,d))&&(U=D);var Z=$[U];for(M[p]=z,x[p++]=Z,C[U]=z,b[y]=U,S[y++]=1,R=I;R<m;R++)T=B[R],C[T]<0&&(b[y]=T,S[y++]=t($[T],Z)),$[T]=0}for(g[m]=y,A[m]=p,R=0;R<y;R++)b[R]=C[b[R]];return S.splice(y,S.length-y),b.splice(y,b.length-y),x.splice(p,x.length-p),M.splice(p,M.length-p),{L:w,U:N,pinv:C}}}),JB="slu",y0e=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],x0e=ue(JB,y0e,n=>{var{typed:e,abs:t,add:r,multiply:i,transpose:s,divideScalar:o,subtract:a,larger:l,largerEq:u,SparseMatrix:c}=n,f=u0e({add:r,multiply:i,transpose:s}),d=v0e({abs:t,divideScalar:o,multiply:i,subtract:a,larger:l,largerEq:u,SparseMatrix:c});return e(JB,{"SparseMatrix, number, number":function(m,v,y){if(!kt(v)||v<0||v>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(y<0||y>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var p=f(v,m,!1),S=d(m,p,y);return{L:S.L,U:S.U,p:S.pinv,q:p.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function QB(n,e){var t,r=e.length,i=[];if(n)for(t=0;t<r;t++)i[n[t]]=e[t];else for(t=0;t<r;t++)i[t]=e[t];return i}var e5="lusolve",b0e=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],w0e=ue(e5,b0e,n=>{var{typed:e,matrix:t,lup:r,slu:i,usolve:s,lsolve:o,DenseMatrix:a}=n,l=Ey({DenseMatrix:a});return e(e5,{"Array, Array | Matrix":function(d,h){d=t(d);var m=r(d),v=c(m.L,m.U,m.p,null,h);return v.valueOf()},"DenseMatrix, Array | Matrix":function(d,h){var m=r(d);return c(m.L,m.U,m.p,null,h)},"SparseMatrix, Array | Matrix":function(d,h){var m=r(d);return c(m.L,m.U,m.p,null,h)},"SparseMatrix, Array | Matrix, number, number":function(d,h,m,v){var y=i(d,m,v);return c(y.L,y.U,y.p,y.q,h)},"Object, Array | Matrix":function(d,h){return c(d.L,d.U,d.p,d.q,h)}});function u(f){if($t(f))return f;if(_n(f))return t(f);throw new TypeError("Invalid Matrix LU decomposition")}function c(f,d,h,m,v){f=u(f),d=u(d),h&&(v=l(f,v,!0),v._data=QB(h,v._data));var y=o(f,v),p=s(d,y);return m&&(p._data=QB(m,p._data)),p}}),t5="polynomialRoot",S0e=["typed","isZero","equalScalar","add","subtract","multiply","divide","sqrt","unaryMinus","cbrt","typeOf","im","re"],_0e=ue(t5,S0e,n=>{var{typed:e,isZero:t,equalScalar:r,add:i,subtract:s,multiply:o,divide:a,sqrt:l,unaryMinus:u,cbrt:c,typeOf:f,im:d,re:h}=n;return e(t5,{"number|Complex, ...number|Complex":(m,v)=>{for(var y=[m,...v];y.length>0&&t(y[y.length-1]);)y.pop();if(y.length<2)throw new RangeError("Polynomial [".concat(m,", ").concat(v,"] must have a non-zero non-constant coefficient"));switch(y.length){case 2:return[u(a(y[0],y[1]))];case 3:{var[p,S,b]=y,g=o(2,b),w=o(S,S),x=o(4,b,p);if(r(w,x))return[a(u(S),g)];var M=l(s(w,x));return[a(s(M,S),g),a(s(u(M),S),g)]}case 4:{var[A,N,C,T]=y,R=u(o(3,T)),$=o(C,C),B=o(3,T,N),z=i(o(2,C,C,C),o(27,T,T,A)),D=o(9,T,C,N);if(r($,B)&&r(z,D))return[a(C,R)];var I=s($,B),U=s(z,D),L=i(o(18,T,C,N,A),o(C,C,N,N)),q=i(o(4,C,C,C,A),o(4,T,N,N,N),o(27,T,T,A,A));if(r(L,q))return[a(s(o(4,T,C,N),i(o(9,T,T,A),o(C,C,C))),o(T,I)),a(s(o(9,T,A),o(C,N)),o(2,I))];var Z;r($,B)?Z=U:Z=a(i(U,l(s(o(U,U),o(4,I,I,I)))),2);var J=!0,Y=c(Z,J).toArray().map(ee=>a(i(C,ee,a(I,ee)),R));return Y.map(ee=>f(ee)==="Complex"&&r(h(ee),h(ee)+d(ee))?h(ee):ee)}default:throw new RangeError("only implemented for cubic or lower-order polynomials, not ".concat(y))}}})}),E0e="Help",M0e=["evaluate"],C0e=ue(E0e,M0e,n=>{var{evaluate:e}=n;function t(r){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(!r)throw new Error('Argument "doc" missing');this.doc=r}return t.prototype.type="Help",t.prototype.isHelp=!0,t.prototype.toString=function(){var r=this.doc||{},i=`
`;if(r.name&&(i+="Name: "+r.name+`

`),r.category&&(i+="Category: "+r.category+`

`),r.description&&(i+=`Description:
    `+r.description+`

`),r.syntax&&(i+=`Syntax:
    `+r.syntax.join(`
    `)+`

`),r.examples){i+=`Examples:
`;for(var s=!1,o=e("config()"),a={config:f=>(s=!0,e("config(newConfig)",{newConfig:f}))},l=0;l<r.examples.length;l++){var u=r.examples[l];i+="    "+u+`
`;var c=void 0;try{c=e(u,a)}catch(f){c=f}c!==void 0&&!nR(c)&&(i+="        "+un(c,{precision:14})+`
`)}i+=`
`,s&&e("config(originalConfig)",{originalConfig:o})}return r.mayThrow&&r.mayThrow.length&&(i+="Throws: "+r.mayThrow.join(", ")+`

`),r.seealso&&r.seealso.length&&(i+="See also: "+r.seealso.join(", ")+`
`),i},t.prototype.toJSON=function(){var r=Yt(this.doc);return r.mathjs="Help",r},t.fromJSON=function(r){var i={};return Object.keys(r).filter(s=>s!=="mathjs").forEach(s=>{i[s]=r[s]}),new t(i)},t.prototype.valueOf=t.prototype.toString,t},{isClass:!0}),A0e="Chain",T0e=["?on","math","typed"],D0e=ue(A0e,T0e,n=>{var{on:e,math:t,typed:r}=n;function i(u){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");rR(u)?this.value=u.value:this.value=u}i.prototype.type="Chain",i.prototype.isChain=!0,i.prototype.done=function(){return this.value},i.prototype.valueOf=function(){return this.value},i.prototype.toString=function(){return un(this.value)},i.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},i.fromJSON=function(u){return new i(u.value)};function s(u,c){typeof c=="function"&&(i.prototype[u]=a(c))}function o(u,c){Aw(i.prototype,u,function(){var d=c();if(typeof d=="function")return a(d)})}function a(u){return function(){if(arguments.length===0)return new i(u(this.value));for(var c=[this.value],f=0;f<arguments.length;f++)c[f+1]=arguments[f];if(r.isTypedFunction(u)){var d=r.resolve(u,c);if(d.params.length===1)throw new Error("chain function "+u.name+" cannot match rest parameter between chain value and additional arguments.");return new i(d.implementation.apply(u,c))}return new i(u.apply(u,c))}}i.createProxy=function(u,c){if(typeof u=="string")s(u,c);else{var f=function(m){gt(u,m)&&l[m]===void 0&&o(m,()=>u[m])};for(var d in u)f(d)}};var l={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return i.createProxy(t),e&&e("import",function(u,c,f){f||o(u,c)}),i},{isClass:!0}),n5={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},N0e={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},P0e={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},R0e={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},O0e={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},k0e={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},I0e={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},L0e={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},F0e={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},B0e={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},z0e={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},r5={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},U0e={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},$0e={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},V0e={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},H0e={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},W0e={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},j0e={name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","complex","fraction","index","matrix","string","unit"]},G0e={name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},q0e={name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},X0e={name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},Y0e={name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(matrix)","fraction(num,den)","fraction({n: num, d: den})"],description:"Create a fraction from a number or from integer numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)","fraction({n: 333, d: 53})","fraction([sqrt(9), sqrt(10), sqrt(11)])"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},K0e={name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[1:2, 1:2] = 1","B = [1, 2, 3]","B[B>1 and B<3]"],seealso:["bignumber","boolean","complex","matrix,","number","range","string","unit"]},Z0e={name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},J0e={name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","boolean","complex","fraction","index","matrix","string","unit"]},Q0e={name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},eye={name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},tye={name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},nye={name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},rye={name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},iye={name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},sye={name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number": f(x)=x+x, "string": f(x)=concat(x,x) })',"double(2)",'double("hello")'],seealso:[]},oye={name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},aye={name:"leafCount",category:"Algebra",syntax:["leafCount(expr)"],description:"Computes the number of leaves in the parse tree of the given expression",examples:['leafCount("e^(i*pi)-1")','leafCount(parse("{a: 22/7, b: 10^(1/2)}"))'],seealso:["simplify"]},lye={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]},uye={name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]},cye={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},fye={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},dye={name:"polynomialRoot",category:"Algebra",syntax:["x=polynomialRoot(-6, 3)","x=polynomialRoot(4, -4, 1)","x=polynomialRoot(-8, 12, -6, 1)"],description:"Finds the roots of a univariate polynomial given by its coefficients starting from constant, linear, and so on, increasing in degree.",examples:["a = polynomialRoot(-6, 11, -6, 1)"],seealso:["cbrt","sqrt"]},hye={name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},pye={name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},mye={name:"resolve",category:"Algebra",syntax:["resolve(node, scope)"],description:"Recursively substitute variables in an expression tree.",examples:['resolve(parse("1 + x"), { x: 7 })','resolve(parse("size(text)"), { text: "Hello World" })','resolve(parse("x + y"), { x: parse("3z") })','resolve(parse("3x"), { x: parse("y+z"), z: parse("w^y") })'],seealso:["simplify","evaluate"],mayThrow:["ReferenceError"]},gye={name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["simplifyCore","derivative","evaluate","parse","rationalize","resolve"]},vye={name:"simplifyConstant",category:"Algebra",syntax:["simplifyConstant(expr)","simplifyConstant(expr, options)"],description:"Replace constant subexpressions of node with their values.",examples:['simplifyConstant("(3-3)*x")','simplifyConstant(parse("z-cos(tau/8)"))'],seealso:["simplify","simplifyCore","evaluate"]},yye={name:"simplifyCore",category:"Algebra",syntax:["simplifyCore(node)"],description:"Perform simple one-pass simplifications on an expression tree.",examples:['simplifyCore(parse("0*x"))','simplifyCore(parse("(x+0)*2"))'],seealso:["simplify","simplifyConstant","evaluate"]},xye={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},bye={name:"symbolicEqual",category:"Algebra",syntax:["symbolicEqual(expr1, expr2)","symbolicEqual(expr1, expr2, options)"],description:"Returns true if the difference of the expressions simplifies to 0",examples:['symbolicEqual("x*y","y*x")','symbolicEqual("abs(x^2)", "x^2")','symbolicEqual("abs(x)", "x", {context: {abs: {trivial: true}}})'],seealso:["simplify","evaluate"]},wye={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]},Sye={name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]},_ye={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},Eye={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},Mye={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},Cye={name:"ceil",category:"Arithmetic",syntax:["ceil(x)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)"],seealso:["floor","fix","round"]},Aye={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},Tye={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},Dye={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},Nye={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},Pye={name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},Rye={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},Oye={name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},kye={name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},Iye={name:"fix",category:"Arithmetic",syntax:["fix(x)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)"],seealso:["ceil","floor","round"]},Lye={name:"floor",category:"Arithmetic",syntax:["floor(x)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)"],seealso:["ceil","fix","round"]},Fye={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},Bye={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenusa of a list with values. ",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},zye={name:"invmod",category:"Arithmetic",syntax:["invmod(a, b)"],description:"Calculate the (modular) multiplicative inverse of a modulo b. Solution to the equation ax  1 (mod b)",examples:["invmod(8, 12)","invmod(7, 13)","invmod(15151, 15122)"],seealso:["gcd","xgcd"]},Uye={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},$ye={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},Vye={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},Hye={name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},Wye={name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},jye={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},Gye={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},qye={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},Xye={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},Yye={name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},Kye={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)","pow([[1, 2], [4, 3]], 2)","pow([[1, 2], [4, 3]], -1)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},Zye={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)","round(unit, valuelessUnit)","round(unit, n, valuelessUnit)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)","round(3.241cm, 2, cm)","round([3.2, 3.8, -4.7])"],seealso:["ceil","floor","fix"]},Jye={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>1, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},Qye={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},e1e={name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[33, 24], [48, 57]])"],seealso:["sqrt","abs","square","multiply"]},t1e={name:"sylvester",category:"Algebra",syntax:["sylvester(A,B,C)"],description:"Solves the real-valued Sylvester equation AX+XB=C for X",examples:["sylvester([[-1, -2], [1, 1]], [[-2, 1], [-1, 2]], [[-3, 2], [3, 0]])","A = [[-1, -2], [1, 1]]; B = [[2, -1], [1, -2]]; C = [[-3, 2], [3, 0]]","sylvester(A, B, C)"],seealso:["schur","lyap"]},n1e={name:"schur",category:"Algebra",syntax:["schur(A)"],description:"Performs a real Schur decomposition of the real matrix A = UTU'",examples:["schur([[1, 0], [-4, 3]])","A = [[1, 0], [-4, 3]]","schur(A)"],seealso:["lyap","sylvester"]},r1e={name:"lyap",category:"Algebra",syntax:["lyap(A,Q)"],description:"Solves the Continuous-time Lyapunov equation AP+PA'+Q=0 for P",examples:["lyap([[-2, 0], [1, -4]], [[3, 1], [1, 3]])","A = [[-2, 0], [1, -4]]","Q = [[3, 1], [1, 3]]","lyap(A,Q)"],seealso:["schur","sylvester"]},i1e={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},s1e={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},o1e={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},a1e={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},l1e={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},u1e={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},c1e={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},f1e={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},d1e={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},h1e={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},p1e={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},m1e={name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},g1e={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},v1e={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},y1e={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},x1e={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]},b1e={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},w1e={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},S1e={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},_1e={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},E1e={name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate(expression, scope)","evaluate([expr1, expr2, expr3, ...])","evaluate([expr1, expr2, expr3, ...], scope)"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(16)")','evaluate("2 inch to cm")','evaluate("sin(x * pi)", { "x": 1/2 })','evaluate(["width=2", "height=4","width*height"])'],seealso:[]},M1e={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},C1e={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},A1e={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},T1e={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},D1e={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},N1e={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},P1e={name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},R1e={name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]},O1e={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},k1e={name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]},I1e={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},L1e={name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},F1e={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},B1e={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},z1e={name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicant the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["A = [1, 2, 4, 7, 0]","diff(A)","diff(A, 1)","B = [[1, 2], [3, 4]]","diff(B)","diff(B, 1)","diff(B, 2)","diff(B, bignumber(2))","diff([[1, 2], matrix([3, 4])], 2)"],seealso:["subtract","partitionSelect"]},U1e={name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},$1e={name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and optionally eigenvectors of a square matrix",examples:["eigs([[5, 2.3], [2.3, 1]])","eigs([[1, 2, 3], [4, 5, 6], [7, 8, 9]], { precision: 1e-6, eigenvectors: false })"],seealso:["inv"]},V1e={name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},H1e={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},W1e={name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["numberOfPets = {}","addPet(n) = numberOfPets[n] = (numberOfPets[n] ? numberOfPets[n]:0 ) + 1;",'forEach(["Dog","Cat","Cat"], addPet)',"numberOfPets"],seealso:["map","sort","filter"]},j1e={name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},G1e={name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},q1e={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},X1e={name:"pinv",category:"Matrix",syntax:["pinv(x)"],description:"Calculate the MoorePenrose inverse of a matrix",examples:["pinv([1, 2; 3, 4])","pinv([[1, 0], [0, 1], [0, 1]])","pinv(4)"],seealso:["inv"]},Y1e={name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},K1e={name:"map",category:"Matrix",syntax:["map(x, callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array.",examples:["map([1, 2, 3], square)"],seealso:["filter","forEach"]},Z1e={name:"matrixFromColumns",category:"Matrix",syntax:["matrixFromColumns(...arr)","matrixFromColumns(row1, row2)","matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]},J1e={name:"matrixFromFunction",category:"Matrix",syntax:["matrixFromFunction(size, fn)","matrixFromFunction(size, fn, format)","matrixFromFunction(size, fn, format, datatype)","matrixFromFunction(size, format, fn)","matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]},Q1e={name:"matrixFromRows",category:"Matrix",syntax:["matrixFromRows(...arr)","matrixFromRows(row1, row2)","matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]},exe={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},txe={name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1, compareText)',"arr = [5, 2, 1]","partitionSelect(arr, 0) # returns 1, arr is now: [1, 2, 5]","arr","partitionSelect(arr, 1, 'desc') # returns 2, arr is now: [5, 2, 1]","arr"],seealso:["sort"]},nxe={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"range(1m, 1m, 3m)","a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},rxe={name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])","reshape([1, 2, 3, 4], [-1, 2])"],seealso:["size","squeeze","resize"]},ixe={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},sxe={name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]},oxe={name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]},axe={name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]},lxe={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},uxe={name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"], "natural")',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},cxe={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},fxe={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of the entries of a matrix or characters of a string. Indexes are one-based. There should be one index specification for each dimension of the target. Each specification can be a single index, a list of indices, or a range in colon notation `l:u`. In a range, both the lower bound l and upper bound u are included; and if a bound is omitted it defaults to the most extreme valid value. The cartesian product of the indices specified in each dimension determines the target of the operation.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]","f[[1,2], [1,3]] = [9, 10; 11, 12]","f"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},dxe={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},hxe={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},pxe={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},mxe={name:"fft",category:"Matrix",syntax:["fft(x)"],description:"Calculate N-dimensional fourier transform",examples:["fft([[1, 0], [1, 0]])"],seealso:["ifft"]},gxe={name:"ifft",category:"Matrix",syntax:["ifft(x)"],description:"Calculate N-dimensional inverse fourier transform",examples:["ifft([[2, 2], [0, 0]])"],seealso:["fft"]},vxe={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},yxe={name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},xxe={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},bxe={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},wxe={name:"lgamma",category:"Probability",syntax:["lgamma(n)"],description:"Logarithm of the gamma function for real, positive numbers and complex numbers, using Lanczos approximation for numbers and Stirling series for complex numbers.",examples:["lgamma(4)","lgamma(1/2)","lgamma(i)","lgamma(complex(1.1, 2))"],seealso:["gamma"]},Sxe={name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},_xe={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},Exe={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},Mxe={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},Cxe={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},Axe={name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},Txe={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},Dxe={name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},Nxe={name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},Pxe={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},Rxe={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},Oxe={name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},kxe={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},Ixe={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},Lxe={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},Fxe={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},Bxe={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},zxe={name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},Uxe={name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},$xe={name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},Vxe={name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},Hxe={name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},Wxe={name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},jxe={name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},Gxe={name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},qxe={name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},Xxe={name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},Yxe={name:"zpk2tf",category:"Signal",syntax:["zpk2tf(z, p, k)"],description:"Compute the transfer function of a zero-pole-gain model.",examples:["zpk2tf([1, 2], [-1, -2], 1)","zpk2tf([1, 2], [-1, -2])","zpk2tf([1 - 3i, 2 + 2i], [-1, -2])"],seealso:[]},Kxe={name:"freqz",category:"Signal",syntax:["freqz(b, a)","freqz(b, a, w)"],description:"Calculates the frequency response of a filter given its numerator and denominator coefficients.",examples:["freqz([1, 2], [1, 2, 3])","freqz([1, 2], [1, 2, 3], [0, 1])","freqz([1, 2], [1, 2, 3], 512)"],seealso:[]},Zxe={name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},Jxe={name:"zeta",category:"Special",syntax:["zeta(s)"],description:"Compute the Riemann Zeta Function using an infinite series and Riemanns Functional Equation for the entire complex plane",examples:["zeta(0.2)","zeta(-0.5)","zeta(4)"],seealso:[]},Qxe={name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},ebe={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dimension)"],description:"Compute the maximum value of a list of values.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},tbe={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dimension)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},nbe={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},rbe={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dimension)"],description:"Compute the minimum value of a list of values.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},ibe={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},sbe={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},obe={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:`Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probablity are: Number, BigNumber. 

In case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.`,examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},abe={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, dimension)","std(A, normalization)","std(A, dimension, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},lbe={name:"cumsum",category:"Statistics",syntax:["cumsum(a, b, c, ...)","cumsum(A)"],description:"Compute the cumulative sum of all values.",examples:["cumsum(2, 3, 4, 1)","cumsum([2, 3, 4, 1])","cumsum([1, 2; 3, 4])","cumsum([1, 2; 3, 4], 1)","cumsum([1, 2; 3, 4], 2)"],seealso:["max","mean","median","min","prod","std","sum","variance"]},ube={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)","sum(A, dimension)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","sum","variance"]},cbe={name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, dimension)","variance(A, normalization)","variance(A, dimension, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},fbe={name:"corr",category:"Statistics",syntax:["corr(A,B)"],description:"Compute the correlation coefficient of a two list with values, For matrices, the matrix correlation coefficient is calculated.",examples:["corr([2, 4, 6, 8],[1, 2, 3, 6])","corr(matrix([[1, 2.2, 3, 4.8, 5], [1, 2, 3, 4, 5]]), matrix([[4, 5.3, 6.6, 7, 8], [1, 2, 3, 4, 5]]))"],seealso:["max","mean","min","median","min","prod","std","sum"]},dbe={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},hbe={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},pbe={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},mbe={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the hyperbolic arccotangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},gbe={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},vbe={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the hyperbolic arccosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},ybe={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},xbe={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},bbe={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},wbe={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},Sbe={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},_be={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},Ebe={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},Mbe={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},Cbe={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},Abe={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},Tbe={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},Dbe={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},Nbe={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},Pbe={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},Rbe={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},Obe={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},kbe={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},Ibe={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},Lbe={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},Fbe={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},Bbe={name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]},zbe={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables,and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},Ube={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},$be={name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},Vbe={name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]},Hbe={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},Wbe={name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]},jbe={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},Gbe={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue"]},qbe={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},Xbe={name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},Ybe={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},Kbe={name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "BigNumber")','numeric("4", "Fraction")','numeric(4, "Fraction")','numeric(fraction(2, 5), "number")'],seealso:["number","fraction","bignumber","string","format"]},Zbe={name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]},Jbe={name:"print",category:"Utils",syntax:["print(template, values)","print(template, values, precision)"],description:"Interpolate values into a string template.",examples:['print("Lucy is $age years old", {age: 5})','print("The value of pi is $pi", {pi: pi}, 3)','print("Hello, $user.name!", {user: {name: "John"}})','print("Values: $1, $2, $3", [6, 9, 4])'],seealso:["format"]},Qbe={name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},ewe={name:"solveODE",category:"Numeric",syntax:["solveODE(func, tspan, y0)","solveODE(func, tspan, y0, options)"],description:"Numerical Integration of Ordinary Differential Equations.",examples:["f(t,y) = y","tspan = [0, 4]","solveODE(f, tspan, 1)","solveODE(f, tspan, [1, 2])",'solveODE(f, tspan, 1, { method:"RK23", maxStep:0.1 })'],seealso:["derivative","simplifyCore"]},twe={bignumber:j0e,boolean:G0e,complex:q0e,createUnit:X0e,fraction:Y0e,index:K0e,matrix:Z0e,number:J0e,sparse:Q0e,splitUnit:eye,string:tye,unit:nye,e:n5,E:n5,false:N0e,i:P0e,Infinity:R0e,LN2:k0e,LN10:O0e,LOG2E:L0e,LOG10E:I0e,NaN:F0e,null:B0e,pi:r5,PI:r5,phi:z0e,SQRT1_2:U0e,SQRT2:$0e,tau:V0e,true:H0e,version:W0e,speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant",examples:["coulomb"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Borh magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Borh radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:oye,lsolve:lye,lsolveAll:uye,lup:cye,lusolve:fye,leafCount:aye,polynomialRoot:dye,resolve:mye,simplify:gye,simplifyConstant:vye,simplifyCore:yye,symbolicEqual:bye,rationalize:pye,slu:xye,usolve:wye,usolveAll:Sye,qr:hye,abs:_ye,add:Eye,cbrt:Mye,ceil:Cye,cube:Aye,divide:Tye,dotDivide:Dye,dotMultiply:Nye,dotPow:Pye,exp:Rye,expm:Oye,expm1:kye,fix:Iye,floor:Lye,gcd:Fye,hypot:Bye,lcm:Uye,log:$ye,log2:Wye,log1p:Hye,log10:Vye,mod:jye,multiply:Gye,norm:qye,nthRoot:Xye,nthRoots:Yye,pow:Kye,round:Zye,sign:Jye,sqrt:Qye,sqrtm:e1e,square:i1e,subtract:s1e,unaryMinus:o1e,unaryPlus:a1e,xgcd:l1e,invmod:zye,bitAnd:u1e,bitNot:c1e,bitOr:f1e,bitXor:d1e,leftShift:h1e,rightArithShift:p1e,rightLogShift:m1e,bellNumbers:g1e,catalan:v1e,composition:y1e,stirlingS2:x1e,config:rye,import:iye,typed:sye,arg:b1e,conj:w1e,re:_1e,im:S1e,evaluate:E1e,help:M1e,distance:C1e,intersect:A1e,and:T1e,not:D1e,or:N1e,xor:P1e,concat:O1e,count:k1e,cross:I1e,column:R1e,ctranspose:L1e,det:F1e,diag:B1e,diff:z1e,dot:U1e,getMatrixDataType:j1e,identity:G1e,filter:V1e,flatten:H1e,forEach:W1e,inv:q1e,pinv:X1e,eigs:$1e,kron:Y1e,matrixFromFunction:J1e,matrixFromRows:Q1e,matrixFromColumns:Z1e,map:K1e,ones:exe,partitionSelect:txe,range:nxe,resize:ixe,reshape:rxe,rotate:sxe,rotationMatrix:oxe,row:axe,size:lxe,sort:uxe,squeeze:cxe,subset:fxe,trace:dxe,transpose:hxe,zeros:pxe,fft:mxe,ifft:gxe,sylvester:t1e,schur:n1e,lyap:r1e,solveODE:ewe,combinations:vxe,combinationsWithRep:yxe,factorial:xxe,gamma:bxe,kldivergence:Sxe,lgamma:wxe,multinomial:_xe,permutations:Exe,pickRandom:Mxe,random:Cxe,randomInt:Axe,compare:Txe,compareNatural:Dxe,compareText:Nxe,deepEqual:Pxe,equal:Rxe,equalText:Oxe,larger:kxe,largerEq:Ixe,smaller:Lxe,smallerEq:Fxe,unequal:Bxe,setCartesian:zxe,setDifference:Uxe,setDistinct:$xe,setIntersect:Vxe,setIsSubset:Hxe,setMultiplicity:Wxe,setPowerset:jxe,setSize:Gxe,setSymDifference:qxe,setUnion:Xxe,zpk2tf:Yxe,freqz:Kxe,erf:Zxe,zeta:Jxe,cumsum:lbe,mad:Qxe,max:ebe,mean:tbe,median:nbe,min:rbe,mode:ibe,prod:sbe,quantileSeq:obe,std:abe,sum:ube,variance:cbe,corr:fbe,acos:dbe,acosh:hbe,acot:pbe,acoth:mbe,acsc:gbe,acsch:vbe,asec:ybe,asech:xbe,asin:bbe,asinh:wbe,atan:Sbe,atanh:Ebe,atan2:_be,cos:Mbe,cosh:Cbe,cot:Abe,coth:Tbe,csc:Dbe,csch:Nbe,sec:Pbe,sech:Rbe,sin:Obe,sinh:kbe,tan:Ibe,tanh:Lbe,to:Fbe,clone:zbe,format:Ube,bin:Bbe,oct:Zbe,hex:Vbe,isNaN:Wbe,isInteger:Hbe,isNegative:jbe,isNumeric:Gbe,hasNumericValue:$be,isPositive:qbe,isPrime:Xbe,isZero:Ybe,print:Jbe,typeOf:Qbe,numeric:Kbe},i5="help",nwe=["typed","mathWithTransform","Help"],rwe=ue(i5,nwe,n=>{var{typed:e,mathWithTransform:t,Help:r}=n;return e(i5,{any:function(s){var o,a=s;if(typeof s!="string"){for(o in t)if(gt(t,o)&&s===t[o]){a=o;break}}var l=As(twe,a);if(!l){var u=typeof a=="function"?a.name:a;throw new Error('No documentation found on "'+u+'"')}return new r(l)}})}),s5="chain",iwe=["typed","Chain"],swe=ue(s5,iwe,n=>{var{typed:e,Chain:t}=n;return e(s5,{"":function(){return new t},any:function(i){return new t(i)}})}),o5="det",owe=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],awe=ue(o5,owe,n=>{var{typed:e,matrix:t,subtractScalar:r,multiply:i,divideScalar:s,isZero:o,unaryMinus:a}=n;return e(o5,{any:function(c){return Yt(c)},"Array | Matrix":function(c){var f;switch($t(c)?f=c.size():Array.isArray(c)?(c=t(c),f=c.size()):f=[],f.length){case 0:return Yt(c);case 1:if(f[0]===1)return Yt(c.valueOf()[0]);if(f[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+un(f)+")");case 2:{var d=f[0],h=f[1];if(d===h)return l(c.clone().valueOf(),d);if(h===0)return 1;throw new RangeError("Matrix must be square (size: "+un(f)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+un(f)+")")}}});function l(u,c,f){if(c===1)return Yt(u[0][0]);if(c===2)return r(i(u[0][0],u[1][1]),i(u[1][0],u[0][1]));for(var d=!1,h=new Array(c).fill(0).map((M,A)=>A),m=0;m<c;m++){var v=h[m];if(o(u[v][m])){var y=void 0;for(y=m+1;y<c;y++)if(!o(u[h[y]][m])){v=h[y],h[y]=h[m],h[m]=v,d=!d;break}if(y===c)return u[v][m]}for(var p=u[v][m],S=m===0?1:u[h[m-1]][m-1],b=m+1;b<c;b++)for(var g=h[b],w=m+1;w<c;w++)u[g][w]=s(r(i(u[g][w],p),i(u[g][m],u[v][w])),S)}var x=u[h[c-1]][c-1];return d?a(x):x}}),a5="inv",lwe=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],uwe=ue(a5,lwe,n=>{var{typed:e,matrix:t,divideScalar:r,addScalar:i,multiply:s,unaryMinus:o,det:a,identity:l,abs:u}=n;return e(a5,{"Array | Matrix":function(d){var h=$t(d)?d.size():nn(d);switch(h.length){case 1:if(h[0]===1)return $t(d)?t([r(1,d.valueOf()[0])]):[r(1,d[0])];throw new RangeError("Matrix must be square (size: "+un(h)+")");case 2:{var m=h[0],v=h[1];if(m===v)return $t(d)?t(c(d.valueOf(),m,v),d.storage()):c(d,m,v);throw new RangeError("Matrix must be square (size: "+un(h)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+un(h)+")")}},any:function(d){return r(1,d)}});function c(f,d,h){var m,v,y,p,S;if(d===1){if(p=f[0][0],p===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(1,p)]]}else if(d===2){var b=a(f);if(b===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(f[1][1],b),r(o(f[0][1]),b)],[r(o(f[1][0]),b),r(f[0][0],b)]]}else{var g=f.concat();for(m=0;m<d;m++)g[m]=g[m].concat();for(var w=l(d).valueOf(),x=0;x<h;x++){var M=u(g[x][x]),A=x;for(m=x+1;m<d;)u(g[m][x])>M&&(M=u(g[m][x]),A=m),m++;if(M===0)throw Error("Cannot calculate inverse, determinant is zero");m=A,m!==x&&(S=g[x],g[x]=g[m],g[m]=S,S=w[x],w[x]=w[m],w[m]=S);var N=g[x],C=w[x];for(m=0;m<d;m++){var T=g[m],R=w[m];if(m!==x){if(T[x]!==0){for(y=r(o(T[x]),N[x]),v=x;v<h;v++)T[v]=i(T[v],s(y,N[v]));for(v=0;v<h;v++)R[v]=i(R[v],s(y,C[v]))}}else{for(y=N[x],v=x;v<h;v++)T[v]=r(T[v],y);for(v=0;v<h;v++)R[v]=r(R[v],y)}}}return w}}}),l5="pinv",cwe=["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],fwe=ue(l5,cwe,n=>{var{typed:e,matrix:t,inv:r,deepEqual:i,equal:s,dotDivide:o,dot:a,ctranspose:l,divideScalar:u,multiply:c,add:f,Complex:d}=n;return e(l5,{"Array | Matrix":function(b){var g=$t(b)?b.size():nn(b);switch(g.length){case 1:return p(b)?l(b):g[0]===1?r(b):o(l(b),a(b,b));case 2:{if(p(b))return l(b);var w=g[0],x=g[1];if(w===x)try{return r(b)}catch(M){if(!(M instanceof Error&&M.message.match(/Cannot calculate inverse, determinant is zero/)))throw M}return $t(b)?t(h(b.valueOf(),w,x),b.storage()):h(b,w,x)}default:throw new RangeError("Matrix must be two dimensional (size: "+un(g)+")")}},any:function(b){return s(b,0)?Yt(b):u(1,b)}});function h(S,b,g){var{C:w,F:x}=v(S,b,g),M=c(r(c(l(w),w)),l(w)),A=c(l(x),r(c(x,l(x))));return c(A,M)}function m(S,b,g){for(var w=Yt(S),x=0,M=0;M<b;M++){if(g<=x)return w;for(var A=M;y(w[A][x]);)if(A++,b===A&&(A=M,x++,g===x))return w;[w[A],w[M]]=[w[M],w[A]];for(var N=w[M][x],C=0;C<g;C++)w[M][C]=o(w[M][C],N);for(var T=0;T<b;T++)if(T!==M){N=w[T][x];for(var R=0;R<g;R++)w[T][R]=f(w[T][R],c(-1,c(N,w[M][R])))}x++}return w}function v(S,b,g){var w=m(S,b,g),x=S.map((A,N)=>A.filter((C,T)=>T<b&&!y(a(w[T],w[T])))),M=w.filter((A,N)=>!y(a(w[N],w[N])));return{C:x,F:M}}function y(S){return s(f(S,d(1,1)),f(0,d(1,1)))}function p(S){return i(f(S,d(1,1)),f(c(S,0),d(1,1)))}});function dwe(n){var{addScalar:e,subtract:t,flatten:r,multiply:i,multiplyScalar:s,divideScalar:o,sqrt:a,abs:l,bignumber:u,diag:c,size:f,reshape:d,inv:h,qr:m,usolve:v,usolveAll:y,equal:p,complex:S,larger:b,smaller:g,matrixFromColumns:w,dot:x}=n;function M(J,Y,ee,ae){var ce=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,pe=A(J,Y,ee,ae,ce);N(J,Y,ee,ae,ce,pe);var{values:we,C:me}=C(J,Y,ee,ae,ce);if(ce){var Ae=T(J,Y,me,pe,we,ee,ae);return{values:we,eigenvectors:Ae}}return{values:we}}function A(J,Y,ee,ae,ce){var pe=ae==="BigNumber",we=ae==="Complex",me=pe?u(0):0,Ae=pe?u(1):we?S(1):1,Ee=pe?u(1):1,re=pe?u(10):2,Pe=s(re,re),Re;ce&&(Re=Array(Y).fill(Ae));for(var te=!1;!te;){te=!0;for(var ie=0;ie<Y;ie++){for(var Me=me,oe=me,G=0;G<Y;G++)ie!==G&&(Me=e(Me,l(J[G][ie])),oe=e(oe,l(J[ie][G])));if(!p(Me,0)&&!p(oe,0)){for(var j=Ee,de=Me,Te=o(oe,re),X=s(oe,re);g(de,Te);)de=s(de,Pe),j=s(j,re);for(;b(de,X);)de=o(de,Pe),j=o(j,re);var Q=g(o(e(de,oe),j),s(e(Me,oe),.95));if(Q){te=!1;for(var be=o(1,j),_e=0;_e<Y;_e++)ie!==_e&&(J[ie][_e]=s(J[ie][_e],be),J[_e][ie]=s(J[_e][ie],j));ce&&(Re[ie]=s(Re[ie],be))}}}}return ce?c(Re):null}function N(J,Y,ee,ae,ce,pe){var we=ae==="BigNumber",me=ae==="Complex",Ae=we?u(0):me?S(0):0;we&&(ee=u(ee));for(var Ee=0;Ee<Y-2;Ee++){for(var re=0,Pe=Ae,Re=Ee+1;Re<Y;Re++){var te=J[Re][Ee];g(l(Pe),l(te))&&(Pe=te,re=Re)}if(!g(l(Pe),ee)){if(re!==Ee+1){var ie=J[re];J[re]=J[Ee+1],J[Ee+1]=ie;for(var Me=0;Me<Y;Me++){var oe=J[Me][re];J[Me][re]=J[Me][Ee+1],J[Me][Ee+1]=oe}if(ce){var G=pe[re];pe[re]=pe[Ee+1],pe[Ee+1]=G}}for(var j=Ee+2;j<Y;j++){var de=o(J[j][Ee],Pe);if(de!==0){for(var Te=0;Te<Y;Te++)J[j][Te]=t(J[j][Te],s(de,J[Ee+1][Te]));for(var X=0;X<Y;X++)J[X][Ee+1]=e(J[X][Ee+1],s(de,J[X][j]));if(ce)for(var Q=0;Q<Y;Q++)pe[j][Q]=t(pe[j][Q],s(de,pe[Ee+1][Q]))}}}}return pe}function C(J,Y,ee,ae,ce){var pe=ae==="BigNumber",we=ae==="Complex",me=pe?u(1):we?S(1):1;pe&&(ee=u(ee));for(var Ae=Yt(J),Ee=[],re=Y,Pe=[],Re=ce?c(Array(Y).fill(me)):void 0,te=ce?c(Array(re).fill(me)):void 0,ie=0;ie<=100;){ie+=1;for(var Me=Ae[re-1][re-1],oe=0;oe<re;oe++)Ae[oe][oe]=t(Ae[oe][oe],Me);var{Q:G,R:j}=m(Ae);Ae=i(j,G);for(var de=0;de<re;de++)Ae[de][de]=e(Ae[de][de],Me);if(ce&&(te=i(te,G)),re===1||g(l(Ae[re-1][re-2]),ee)){ie=0,Ee.push(Ae[re-1][re-1]),ce&&(Pe.unshift([[1]]),B(te,Y),Re=i(Re,te),re>1&&(te=c(Array(re-1).fill(me)))),re-=1,Ae.pop();for(var Te=0;Te<re;Te++)Ae[Te].pop()}else if(re===2||g(l(Ae[re-2][re-3]),ee)){ie=0;var X=R(Ae[re-2][re-2],Ae[re-2][re-1],Ae[re-1][re-2],Ae[re-1][re-1]);Ee.push(...X),ce&&(Pe.unshift($(Ae[re-2][re-2],Ae[re-2][re-1],Ae[re-1][re-2],Ae[re-1][re-1],X[0],X[1],ee,ae)),B(te,Y),Re=i(Re,te),re>2&&(te=c(Array(re-2).fill(me)))),re-=2,Ae.pop(),Ae.pop();for(var Q=0;Q<re;Q++)Ae[Q].pop(),Ae[Q].pop()}if(re===0)break}if(Ee.sort((Ne,Fe)=>+t(l(Ne),l(Fe))),ie>100){var be=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+Ee.join(", "));throw be.values=Ee,be.vectors=[],be}var _e=ce?i(Re,z(Pe,Y)):void 0;return{values:Ee,C:_e}}function T(J,Y,ee,ae,ce,pe,we){var me=h(ee),Ae=i(me,J,ee),Ee=we==="BigNumber",re=we==="Complex",Pe=Ee?u(0):re?S(0):0,Re=Ee?u(1):re?S(1):1,te=[],ie=[];for(var Me of ce){var oe=D(te,Me,p);oe===-1?(te.push(Me),ie.push(1)):ie[oe]+=1}for(var G=[],j=te.length,de=Array(Y).fill(Pe),Te=c(Array(Y).fill(Re)),X=function(){var _e=te[Q],Ne=t(Ae,i(_e,Te)),Fe=y(Ne,de);for(Fe.shift();Fe.length<ie[Q];){var He=I(Ne,Y,Fe,pe,we);if(He===null)break;Fe.push(He)}var Ie=i(h(ae),ee);Fe=Fe.map(Je=>i(Ie,Je)),G.push(...Fe.map(Je=>({value:_e,vector:r(Je)})))},Q=0;Q<j;Q++)X();return G}function R(J,Y,ee,ae){var ce=e(J,ae),pe=t(s(J,ae),s(Y,ee)),we=s(ce,.5),me=s(a(t(s(ce,ce),s(4,pe))),.5);return[e(we,me),t(we,me)]}function $(J,Y,ee,ae,ce,pe,we,me){var Ae=me==="BigNumber",Ee=me==="Complex",re=Ae?u(0):Ee?S(0):0,Pe=Ae?u(1):Ee?S(1):1;if(g(l(ee),we))return[[Pe,re],[re,Pe]];if(b(l(t(ce,pe)),we))return[[t(ce,ae),t(pe,ae)],[ee,ee]];var Re=t(J,ce),te=t(ae,ce);return g(l(Y),we)&&g(l(te),we)?[[Re,Pe],[ee,re]]:[[Y,re],[te,Pe]]}function B(J,Y){for(var ee=0;ee<J.length;ee++)J[ee].push(...Array(Y-J[ee].length).fill(0));for(var ae=J.length;ae<Y;ae++)J.push(Array(Y).fill(0)),J[ae][ae]=1;return J}function z(J,Y){for(var ee=[],ae=0;ae<Y;ae++)ee[ae]=Array(Y).fill(0);var ce=0;for(var pe of J){for(var we=pe.length,me=0;me<we;me++)for(var Ae=0;Ae<we;Ae++)ee[ce+me][ce+Ae]=pe[me][Ae];ce+=we}return ee}function D(J,Y,ee){for(var ae=0;ae<J.length;ae++)if(ee(J[ae],Y))return ae;return-1}function I(J,Y,ee,ae,ce){for(var pe=ce==="BigNumber"?u(1e3):1e3,we,me=0;me<5;++me){we=U(Y,ee,ce);try{we=v(J,we)}catch{continue}if(b(q(we),pe))break}if(me>=5)return null;for(me=0;;){var Ae=v(J,we);if(g(q(L(we,[Ae])),ae))break;if(++me>=10)return null;we=Z(Ae)}return we}function U(J,Y,ee){var ae=ee==="BigNumber",ce=ee==="Complex",pe=Array(J).fill(0).map(we=>2*Math.random()-1);return ae&&(pe=pe.map(we=>u(we))),ce&&(pe=pe.map(we=>S(we))),pe=L(pe,Y),Z(pe,ee)}function L(J,Y){var ee=f(J);for(var ae of Y)ae=d(ae,ee),J=t(J,i(o(x(ae,J),x(ae,ae)),ae));return J}function q(J){return l(a(x(J,J)))}function Z(J,Y){var ee=Y==="BigNumber",ae=Y==="Complex",ce=ee?u(1):ae?S(1):1;return i(o(ce,q(J)),J)}return M}function hwe(n){var{config:e,addScalar:t,subtract:r,abs:i,atan:s,cos:o,sin:a,multiplyScalar:l,inv:u,bignumber:c,multiply:f,add:d}=n;function h(N,C){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.epsilon,R=arguments.length>3?arguments[3]:void 0,$=arguments.length>4?arguments[4]:void 0;if(R==="number")return m(N,T,$);if(R==="BigNumber")return v(N,T,$);throw TypeError("Unsupported data type: "+R)}function m(N,C,T){var R=N.length,$=Math.abs(C/R),B,z;if(T){z=new Array(R);for(var D=0;D<R;D++)z[D]=Array(R).fill(0),z[D][D]=1}for(var I=x(N);Math.abs(I[1])>=Math.abs($);){var U=I[0][0],L=I[0][1];B=y(N[U][U],N[L][L],N[U][L]),N=w(N,B,U,L),T&&(z=S(z,B,U,L)),I=x(N)}for(var q=Array(R).fill(0),Z=0;Z<R;Z++)q[Z]=N[Z][Z];return A(Yt(q),z,T)}function v(N,C,T){var R=N.length,$=i(C/R),B,z;if(T){z=new Array(R);for(var D=0;D<R;D++)z[D]=Array(R).fill(0),z[D][D]=1}for(var I=M(N);i(I[1])>=i($);){var U=I[0][0],L=I[0][1];B=p(N[U][U],N[L][L],N[U][L]),N=g(N,B,U,L),T&&(z=b(z,B,U,L)),I=M(N)}for(var q=Array(R).fill(0),Z=0;Z<R;Z++)q[Z]=N[Z][Z];return A(Yt(q),z,T)}function y(N,C,T){var R=C-N;return Math.abs(R)<=e.epsilon?Math.PI/4:.5*Math.atan(2*T/(C-N))}function p(N,C,T){var R=r(C,N);return i(R)<=e.epsilon?c(-1).acos().div(4):l(.5,s(f(2,T,u(R))))}function S(N,C,T,R){for(var $=N.length,B=Math.cos(C),z=Math.sin(C),D=Array($).fill(0),I=Array($).fill(0),U=0;U<$;U++)D[U]=B*N[U][T]-z*N[U][R],I[U]=z*N[U][T]+B*N[U][R];for(var L=0;L<$;L++)N[L][T]=D[L],N[L][R]=I[L];return N}function b(N,C,T,R){for(var $=N.length,B=o(C),z=a(C),D=Array($).fill(c(0)),I=Array($).fill(c(0)),U=0;U<$;U++)D[U]=r(l(B,N[U][T]),l(z,N[U][R])),I[U]=t(l(z,N[U][T]),l(B,N[U][R]));for(var L=0;L<$;L++)N[L][T]=D[L],N[L][R]=I[L];return N}function g(N,C,T,R){for(var $=N.length,B=c(o(C)),z=c(a(C)),D=l(B,B),I=l(z,z),U=Array($).fill(c(0)),L=Array($).fill(c(0)),q=f(c(2),B,z,N[T][R]),Z=t(r(l(D,N[T][T]),q),l(I,N[R][R])),J=d(l(I,N[T][T]),q,l(D,N[R][R])),Y=0;Y<$;Y++)U[Y]=r(l(B,N[T][Y]),l(z,N[R][Y])),L[Y]=t(l(z,N[T][Y]),l(B,N[R][Y]));N[T][T]=Z,N[R][R]=J,N[T][R]=c(0),N[R][T]=c(0);for(var ee=0;ee<$;ee++)ee!==T&&ee!==R&&(N[T][ee]=U[ee],N[ee][T]=U[ee],N[R][ee]=L[ee],N[ee][R]=L[ee]);return N}function w(N,C,T,R){for(var $=N.length,B=Math.cos(C),z=Math.sin(C),D=B*B,I=z*z,U=Array($).fill(0),L=Array($).fill(0),q=D*N[T][T]-2*B*z*N[T][R]+I*N[R][R],Z=I*N[T][T]+2*B*z*N[T][R]+D*N[R][R],J=0;J<$;J++)U[J]=B*N[T][J]-z*N[R][J],L[J]=z*N[T][J]+B*N[R][J];N[T][T]=q,N[R][R]=Z,N[T][R]=0,N[R][T]=0;for(var Y=0;Y<$;Y++)Y!==T&&Y!==R&&(N[T][Y]=U[Y],N[Y][T]=U[Y],N[R][Y]=L[Y],N[Y][R]=L[Y]);return N}function x(N){for(var C=N.length,T=0,R=[0,1],$=0;$<C;$++)for(var B=$+1;B<C;B++)Math.abs(T)<Math.abs(N[$][B])&&(T=Math.abs(N[$][B]),R=[$,B]);return[R,T]}function M(N){for(var C=N.length,T=0,R=[0,1],$=0;$<C;$++)for(var B=$+1;B<C;B++)i(T)<i(N[$][B])&&(T=i(N[$][B]),R=[$,B]);return[R,T]}function A(N,C,T){var R=N.length,$=Array(R),B;if(T){B=Array(R);for(var z=0;z<R;z++)B[z]=Array(R)}for(var D=0;D<R;D++){for(var I=0,U=N[0],L=0;L<N.length;L++)i(N[L])<i(U)&&(I=L,U=N[I]);if($[D]=N.splice(I,1)[0],T)for(var q=0;q<R;q++)B[D][q]=C[q][I],C[q].splice(I,1)}if(!T)return{values:$};var Z=B.map((J,Y)=>({value:$[Y],vector:J}));return{values:$,eigenvectors:Z}}return h}var pwe="eigs",mwe=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],gwe=ue(pwe,mwe,n=>{var{config:e,typed:t,matrix:r,addScalar:i,subtract:s,equal:o,abs:a,atan:l,cos:u,sin:c,multiplyScalar:f,divideScalar:d,inv:h,bignumber:m,multiply:v,add:y,larger:p,column:S,flatten:b,number:g,complex:w,sqrt:x,diag:M,size:A,reshape:N,qr:C,usolve:T,usolveAll:R,im:$,re:B,smaller:z,matrixFromColumns:D,dot:I}=n,U=hwe({config:e,addScalar:i,subtract:s,column:S,flatten:b,equal:o,abs:a,atan:l,cos:u,sin:c,multiplyScalar:f,inv:h,bignumber:m,complex:w,multiply:v,add:y}),L=dwe({config:e,addScalar:i,subtract:s,multiply:v,multiplyScalar:f,flatten:b,divideScalar:d,sqrt:x,abs:a,bignumber:m,diag:M,size:A,reshape:N,qr:C,inv:h,usolve:T,usolveAll:R,equal:o,complex:w,larger:p,smaller:z,matrixFromColumns:D,dot:I});return t("eigs",{Array:function(pe){return q(r(pe))},"Array, number|BigNumber":function(pe,we){return q(r(pe),{precision:we})},"Array, Object"(ce,pe){return q(r(ce),pe)},Matrix:function(pe){return q(pe,{matricize:!0})},"Matrix, number|BigNumber":function(pe,we){return q(pe,{precision:we,matricize:!0})},"Matrix, Object":function(pe,we){var me={matricize:!0};return at(me,we),q(pe,me)}});function q(ce){var pe,we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},me="eigenvectors"in we?we.eigenvectors:!0,Ae=(pe=we.precision)!==null&&pe!==void 0?pe:e.epsilon,Ee=Z(ce,Ae,me);return we.matricize&&(Ee.values=r(Ee.values),me&&(Ee.eigenvectors=Ee.eigenvectors.map(re=>{var{value:Pe,vector:Re}=re;return{value:Pe,vector:r(Re)}}))),me&&Object.defineProperty(Ee,"vectors",{enumerable:!1,get:()=>{throw new Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),Ee}function Z(ce,pe,we){var me=ce.toArray(),Ae=ce.size();if(Ae.length!==2||Ae[0]!==Ae[1])throw new RangeError("Matrix must be square (size: ".concat(un(Ae),")"));var Ee=Ae[0];if(Y(me,Ee,pe)&&(ee(me,Ee),J(me,Ee,pe))){var re=ae(ce,me,Ee);return U(me,Ee,pe,re,we)}var Pe=ae(ce,me,Ee);return L(me,Ee,pe,Pe,we)}function J(ce,pe,we){for(var me=0;me<pe;me++)for(var Ae=me;Ae<pe;Ae++)if(p(m(a(s(ce[me][Ae],ce[Ae][me]))),we))return!1;return!0}function Y(ce,pe,we){for(var me=0;me<pe;me++)for(var Ae=0;Ae<pe;Ae++)if(p(m(a($(ce[me][Ae]))),we))return!1;return!0}function ee(ce,pe){for(var we=0;we<pe;we++)for(var me=0;me<pe;me++)ce[we][me]=B(ce[we][me])}function ae(ce,pe,we){var me=ce.datatype();if(me==="number"||me==="BigNumber"||me==="Complex")return me;for(var Ae=!1,Ee=!1,re=!1,Pe=0;Pe<we;Pe++)for(var Re=0;Re<we;Re++){var te=pe[Pe][Re];if(tn(te)||qd(te))Ae=!0;else if(Jt(te))Ee=!0;else if(Pa(te))re=!0;else throw TypeError("Unsupported type in Matrix: "+Wn(te))}if(Ee&&re&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),re){for(var ie=0;ie<we;ie++)for(var Me=0;Me<we;Me++)pe[ie][Me]=w(pe[ie][Me]);return"Complex"}if(Ee){for(var oe=0;oe<we;oe++)for(var G=0;G<we;G++)pe[oe][G]=m(pe[oe][G]);return"BigNumber"}if(Ae){for(var j=0;j<we;j++)for(var de=0;de<we;de++)pe[j][de]=g(pe[j][de]);return"number"}else throw TypeError("Matrix contains unsupported types only.")}}),u5="expm",vwe=["typed","abs","add","identity","inv","multiply"],ywe=ue(u5,vwe,n=>{var{typed:e,abs:t,add:r,identity:i,inv:s,multiply:o}=n;return e(u5,{Matrix:function(f){var d=f.size();if(d.length!==2||d[0]!==d[1])throw new RangeError("Matrix must be square (size: "+un(d)+")");for(var h=d[0],m=1e-15,v=a(f),y=l(v,m),p=y.q,S=y.j,b=o(f,Math.pow(2,-S)),g=i(h),w=i(h),x=1,M=b,A=-1,N=1;N<=p;N++)N>1&&(M=o(M,b),A=-A),x=x*(p-N+1)/((2*p-N+1)*N),g=r(g,o(x,M)),w=r(w,o(x*A,M));for(var C=o(s(w),g),T=0;T<S;T++)C=o(C,C);return _c(f)?f.createSparseMatrix(C):C}});function a(c){for(var f=c.size()[0],d=0,h=0;h<f;h++){for(var m=0,v=0;v<f;v++)m+=t(c.get([h,v]));d=Math.max(m,d)}return d}function l(c,f){for(var d=30,h=0;h<d;h++)for(var m=0;m<=h;m++){var v=h-m;if(u(c,m,v)<f)return{q:m,j:v}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}function u(c,f,d){for(var h=1,m=2;m<=f;m++)h*=m;for(var v=h,y=f+1;y<=2*f;y++)v*=y;var p=v*(2*f+1);return 8*Math.pow(c/Math.pow(2,d),2*f)*h*h/(v*p)}}),c5="sqrtm",xwe=["typed","abs","add","multiply","map","sqrt","subtract","inv","size","max","identity"],bwe=ue(c5,xwe,n=>{var{typed:e,abs:t,add:r,multiply:i,map:s,sqrt:o,subtract:a,inv:l,size:u,max:c,identity:f}=n,d=1e3,h=1e-6;function m(v){var y,p=0,S=v,b=f(u(v));do{var g=S;if(S=i(.5,r(g,l(b))),b=i(.5,r(b,l(g))),y=c(t(a(S,g))),y>h&&++p>d)throw new Error("computing square root of matrix: iterative method could not converge")}while(y>h);return S}return e(c5,{"Array | Matrix":function(y){var p=$t(y)?y.size():nn(y);switch(p.length){case 1:if(p[0]===1)return s(y,o);throw new RangeError("Matrix must be square (size: "+un(p)+")");case 2:{var S=p[0],b=p[1];if(S===b)return m(y);throw new RangeError("Matrix must be square (size: "+un(p)+")")}default:throw new RangeError("Matrix must be at most two dimensional (size: "+un(p)+")")}}})}),f5="sylvester",wwe=["typed","schur","matrixFromColumns","matrix","multiply","range","concat","transpose","index","subset","add","subtract","identity","lusolve","abs"],Swe=ue(f5,wwe,n=>{var{typed:e,schur:t,matrixFromColumns:r,matrix:i,multiply:s,range:o,concat:a,transpose:l,index:u,subset:c,add:f,subtract:d,identity:h,lusolve:m,abs:v}=n;return e(f5,{"Matrix, Matrix, Matrix":y,"Array, Matrix, Matrix":function(S,b,g){return y(i(S),b,g)},"Array, Array, Matrix":function(S,b,g){return y(i(S),i(b),g)},"Array, Matrix, Array":function(S,b,g){return y(i(S),b,i(g))},"Matrix, Array, Matrix":function(S,b,g){return y(S,i(b),g)},"Matrix, Array, Array":function(S,b,g){return y(S,i(b),i(g))},"Matrix, Matrix, Array":function(S,b,g){return y(S,b,i(g))},"Array, Array, Array":function(S,b,g){return y(i(S),i(b),i(g)).toArray()}});function y(p,S,b){for(var g=S.size()[0],w=p.size()[0],x=t(p),M=x.T,A=x.U,N=t(s(-1,S)),C=N.T,T=N.U,R=s(s(l(A),b),T),$=o(0,w),B=[],z=(re,Pe)=>a(re,Pe,1),D=(re,Pe)=>a(re,Pe,0),I=0;I<g;I++)if(I<g-1&&v(c(C,u(I+1,I)))>1e-5){for(var U=D(c(R,u($,I)),c(R,u($,I+1))),L=0;L<I;L++)U=f(U,D(s(B[L],c(C,u(L,I))),s(B[L],c(C,u(L,I+1)))));var q=s(h(w),s(-1,c(C,u(I,I)))),Z=s(h(w),s(-1,c(C,u(I+1,I)))),J=s(h(w),s(-1,c(C,u(I,I+1)))),Y=s(h(w),s(-1,c(C,u(I+1,I+1)))),ee=D(z(f(M,q),Z),z(J,f(M,Y))),ae=m(ee,U);B[I]=ae.subset(u(o(0,w),0)),B[I+1]=ae.subset(u(o(w,2*w),0)),I++}else{for(var ce=c(R,u($,I)),pe=0;pe<I;pe++)ce=f(ce,s(B[pe],c(C,u(pe,I))));var we=c(C,u(I,I)),me=d(M,s(we,h(w)));B[I]=m(me,ce)}var Ae=i(r(...B)),Ee=s(A,s(Ae,l(T)));return Ee}}),d5="schur",_we=["typed","matrix","identity","multiply","qr","norm","subtract"],Ewe=ue(d5,_we,n=>{var{typed:e,matrix:t,identity:r,multiply:i,qr:s,norm:o,subtract:a}=n;return e(d5,{Array:function(c){var f=l(t(c));return{U:f.U.valueOf(),T:f.T.valueOf()}},Matrix:function(c){return l(c)}});function l(u){var c=u.size()[0],f=u,d=r(c),h=0,m;do{m=f;var v=s(f),y=v.Q,p=v.R;if(f=i(p,y),d=i(d,y),h++>100)break}while(o(a(f,m))>1e-4);return{U:d,T:f}}}),h5="lyap",Mwe=["typed","matrix","sylvester","multiply","transpose"],Cwe=ue(h5,Mwe,n=>{var{typed:e,matrix:t,sylvester:r,multiply:i,transpose:s}=n;return e(h5,{"Matrix, Matrix":function(a,l){return r(a,s(a),i(-1,l))},"Array, Matrix":function(a,l){return r(t(a),s(t(a)),i(-1,l))},"Matrix, Array":function(a,l){return r(a,s(t(a)),t(i(-1,l)))},"Array, Array":function(a,l){return r(t(a),s(t(a)),t(i(-1,l))).toArray()}})}),Awe="divide",Twe=["typed","matrix","multiply","equalScalar","divideScalar","inv"],Dwe=ue(Awe,Twe,n=>{var{typed:e,matrix:t,multiply:r,equalScalar:i,divideScalar:s,inv:o}=n,a=Ui({typed:e,equalScalar:i}),l=Ua({typed:e});return e("divide",oj({"Array | Matrix, Array | Matrix":function(c,f){return r(c,o(f))},"DenseMatrix, any":function(c,f){return l(c,f,s,!1)},"SparseMatrix, any":function(c,f){return a(c,f,s,!1)},"Array, any":function(c,f){return l(t(c),f,s,!1).valueOf()},"any, Array | Matrix":function(c,f){return r(c,o(f))}},s.signatures))}),p5="distance",Nwe=["typed","addScalar","subtractScalar","divideScalar","multiplyScalar","deepEqual","sqrt","abs"],Pwe=ue(p5,Nwe,n=>{var{typed:e,addScalar:t,subtractScalar:r,multiplyScalar:i,divideScalar:s,deepEqual:o,sqrt:a,abs:l}=n;return e(p5,{"Array, Array, Array":function(w,x,M){if(w.length===2&&x.length===2&&M.length===2){if(!c(w))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!c(x))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!c(M))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(o(x,M))throw new TypeError("LinePoint1 should not be same with LinePoint2");var A=r(M[1],x[1]),N=r(x[0],M[0]),C=r(i(M[0],x[1]),i(x[0],M[1]));return y(w[0],w[1],A,N,C)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(w,x,M){if(Object.keys(w).length===2&&Object.keys(x).length===2&&Object.keys(M).length===2){if(!c(w))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!c(x))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!c(M))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(o(m(x),m(M)))throw new TypeError("LinePoint1 should not be same with LinePoint2");if("pointX"in w&&"pointY"in w&&"lineOnePtX"in x&&"lineOnePtY"in x&&"lineTwoPtX"in M&&"lineTwoPtY"in M){var A=r(M.lineTwoPtY,x.lineOnePtY),N=r(x.lineOnePtX,M.lineTwoPtX),C=r(i(M.lineTwoPtX,x.lineOnePtY),i(x.lineOnePtX,M.lineTwoPtY));return y(w.pointX,w.pointY,A,N,C)}else throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(w,x){if(w.length===2&&x.length===3){if(!c(w))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!f(x))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return y(w[0],w[1],x[0],x[1],x[2])}else if(w.length===3&&x.length===6){if(!f(w))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!h(x))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return p(w[0],w[1],w[2],x[0],x[1],x[2],x[3],x[4],x[5])}else if(w.length===x.length&&w.length>0){if(!d(w))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!d(x))throw new TypeError("All values of an array should be numbers or BigNumbers");return S(w,x)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(w,x){if(Object.keys(w).length===2&&Object.keys(x).length===3){if(!c(w))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!f(x))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in w&&"pointY"in w&&"xCoeffLine"in x&&"yCoeffLine"in x&&"constant"in x)return y(w.pointX,w.pointY,x.xCoeffLine,x.yCoeffLine,x.constant);throw new TypeError("Key names do not match")}else if(Object.keys(w).length===3&&Object.keys(x).length===6){if(!f(w))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!h(x))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in w&&"pointY"in w&&"x0"in x&&"y0"in x&&"z0"in x&&"a"in x&&"b"in x&&"c"in x)return p(w.pointX,w.pointY,w.pointZ,x.x0,x.y0,x.z0,x.a,x.b,x.c);throw new TypeError("Key names do not match")}else if(Object.keys(w).length===2&&Object.keys(x).length===2){if(!c(w))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!c(x))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in w&&"pointOneY"in w&&"pointTwoX"in x&&"pointTwoY"in x)return S([w.pointOneX,w.pointOneY],[x.pointTwoX,x.pointTwoY]);throw new TypeError("Key names do not match")}else if(Object.keys(w).length===3&&Object.keys(x).length===3){if(!f(w))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!f(x))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in w&&"pointOneY"in w&&"pointOneZ"in w&&"pointTwoX"in x&&"pointTwoY"in x&&"pointTwoZ"in x)return S([w.pointOneX,w.pointOneY,w.pointOneZ],[x.pointTwoX,x.pointTwoY,x.pointTwoZ]);throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},Array:function(w){if(!v(w))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return b(w)}});function u(g){return typeof g=="number"||Jt(g)}function c(g){return g.constructor!==Array&&(g=m(g)),u(g[0])&&u(g[1])}function f(g){return g.constructor!==Array&&(g=m(g)),u(g[0])&&u(g[1])&&u(g[2])}function d(g){return Array.isArray(g)||(g=m(g)),g.every(u)}function h(g){return g.constructor!==Array&&(g=m(g)),u(g[0])&&u(g[1])&&u(g[2])&&u(g[3])&&u(g[4])&&u(g[5])}function m(g){for(var w=Object.keys(g),x=[],M=0;M<w.length;M++)x.push(g[w[M]]);return x}function v(g){if(g[0].length===2&&u(g[0][0])&&u(g[0][1])){if(g.some(w=>w.length!==2||!u(w[0])||!u(w[1])))return!1}else if(g[0].length===3&&u(g[0][0])&&u(g[0][1])&&u(g[0][2])){if(g.some(w=>w.length!==3||!u(w[0])||!u(w[1])||!u(w[2])))return!1}else return!1;return!0}function y(g,w,x,M,A){var N=l(t(t(i(x,g),i(M,w)),A)),C=a(t(i(x,x),i(M,M)));return s(N,C)}function p(g,w,x,M,A,N,C,T,R){var $=[r(i(r(A,w),R),i(r(N,x),T)),r(i(r(N,x),C),i(r(M,g),R)),r(i(r(M,g),T),i(r(A,w),C))];$=a(t(t(i($[0],$[0]),i($[1],$[1])),i($[2],$[2])));var B=a(t(t(i(C,C),i(T,T)),i(R,R)));return s($,B)}function S(g,w){for(var x=g.length,M=0,A=0,N=0;N<x;N++)A=r(g[N],w[N]),M=t(i(A,A),M);return a(M)}function b(g){for(var w=[],x=[],M=[],A=0;A<g.length-1;A++)for(var N=A+1;N<g.length;N++)g[0].length===2?(x=[g[A][0],g[A][1]],M=[g[N][0],g[N][1]]):g[0].length===3&&(x=[g[A][0],g[A][1],g[A][2]],M=[g[N][0],g[N][1],g[N][2]]),w.push(S(x,M));return w}}),Rwe="intersect",Owe=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],kwe=ue(Rwe,Owe,n=>{var{typed:e,config:t,abs:r,add:i,addScalar:s,matrix:o,multiply:a,multiplyScalar:l,divideScalar:u,subtract:c,smaller:f,equalScalar:d,flatten:h,isZero:m,isNumeric:v}=n;return e("intersect",{"Array, Array, Array":y,"Array, Array, Array, Array":p,"Matrix, Matrix, Matrix":function(T,R,$){var B=y(T.valueOf(),R.valueOf(),$.valueOf());return B===null?null:o(B)},"Matrix, Matrix, Matrix, Matrix":function(T,R,$,B){var z=p(T.valueOf(),R.valueOf(),$.valueOf(),B.valueOf());return z===null?null:o(z)}});function y(C,T,R){if(C=S(C),T=S(T),R=S(R),!g(C))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!g(T))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!w(R))throw new TypeError("Array with 4 numbers expected as third argument");return N(C[0],C[1],C[2],T[0],T[1],T[2],R[0],R[1],R[2],R[3])}function p(C,T,R,$){if(C=S(C),T=S(T),R=S(R),$=S($),C.length===2){if(!b(C))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!b(T))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!b(R))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!b($))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return x(C,T,R,$)}else if(C.length===3){if(!g(C))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!g(T))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!g(R))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!g($))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return A(C[0],C[1],C[2],T[0],T[1],T[2],R[0],R[1],R[2],$[0],$[1],$[2])}else throw new TypeError("Arrays with two or thee dimensional points expected")}function S(C){return C.length===1?C[0]:C.length>1&&Array.isArray(C[0])&&C.every(T=>Array.isArray(T)&&T.length===1)?h(C):C}function b(C){return C.length===2&&v(C[0])&&v(C[1])}function g(C){return C.length===3&&v(C[0])&&v(C[1])&&v(C[2])}function w(C){return C.length===4&&v(C[0])&&v(C[1])&&v(C[2])&&v(C[3])}function x(C,T,R,$){var B=C,z=R,D=c(B,T),I=c(z,$),U=c(l(D[0],I[1]),l(I[0],D[1]));if(m(U)||f(r(U),t.epsilon))return null;var L=l(I[0],B[1]),q=l(I[1],B[0]),Z=l(I[0],z[1]),J=l(I[1],z[0]),Y=u(s(c(c(L,q),Z),J),U);return i(a(D,Y),B)}function M(C,T,R,$,B,z,D,I,U,L,q,Z){var J=l(c(C,T),c(R,$)),Y=l(c(B,z),c(D,I)),ee=l(c(U,L),c(q,Z));return s(s(J,Y),ee)}function A(C,T,R,$,B,z,D,I,U,L,q,Z){var J=M(C,D,L,D,T,I,q,I,R,U,Z,U),Y=M(L,D,$,C,q,I,B,T,Z,U,z,R),ee=M(C,D,$,C,T,I,B,T,R,U,z,R),ae=M(L,D,L,D,q,I,q,I,Z,U,Z,U),ce=M($,C,$,C,B,T,B,T,z,R,z,R),pe=c(l(J,Y),l(ee,ae)),we=c(l(ce,ae),l(Y,Y));if(m(we))return null;var me=u(pe,we),Ae=u(s(J,l(me,Y)),ae),Ee=s(C,l(me,c($,C))),re=s(T,l(me,c(B,T))),Pe=s(R,l(me,c(z,R))),Re=s(D,l(Ae,c(L,D))),te=s(I,l(Ae,c(q,I))),ie=s(U,l(Ae,c(Z,U)));return d(Ee,Re)&&d(re,te)&&d(Pe,ie)?[Ee,re,Pe]:null}function N(C,T,R,$,B,z,D,I,U,L){var q=l(C,D),Z=l($,D),J=l(T,I),Y=l(B,I),ee=l(R,U),ae=l(z,U),ce=c(c(c(L,q),J),ee),pe=c(c(c(s(s(Z,Y),ae),q),J),ee),we=u(ce,pe),me=s(C,l(we,c($,C))),Ae=s(T,l(we,c(B,T))),Ee=s(R,l(we,c(z,R)));return[me,Ae,Ee]}}),m5="sum",Iwe=["typed","config","add","numeric"],cq=ue(m5,Iwe,n=>{var{typed:e,config:t,add:r,numeric:i}=n;return e(m5,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":o,"...":function(l){if(Rm(l))throw new TypeError("Scalar values expected in function sum");return s(l)}});function s(a){var l;return Au(a,function(u){try{l=l===void 0?u:r(l,u)}catch(c){throw Ps(c,"sum",u)}}),l===void 0&&(l=i(0,t.number)),typeof l=="string"&&(l=i(l,t.number)),l}function o(a,l){try{var u=yE(a,l,r);return u}catch(c){throw Ps(c,"sum")}}}),Dx="cumsum",Lwe=["typed","add","unaryPlus"],fq=ue(Dx,Lwe,n=>{var{typed:e,add:t,unaryPlus:r}=n;return e(Dx,{Array:i,Matrix:function(u){return u.create(i(u.valueOf()))},"Array, number | BigNumber":o,"Matrix, number | BigNumber":function(u,c){return u.create(o(u.valueOf(),c))},"...":function(u){if(Rm(u))throw new TypeError("All values expected to be scalar in function cumsum");return i(u)}});function i(l){try{return s(l)}catch(u){throw Ps(u,Dx)}}function s(l){if(l.length===0)return[];for(var u=[r(l[0])],c=1;c<l.length;++c)u.push(t(u[c-1],l[c]));return u}function o(l,u){var c=nn(l);if(u<0||u>=c.length)throw new da(u,c.length);try{return a(l,u)}catch(f){throw Ps(f,Dx)}}function a(l,u){var c,f,d;if(u<=0){var h=l[0][0];if(Array.isArray(h)){for(d=Hj(l),f=[],c=0;c<d.length;c++)f[c]=a(d[c],u-1);return f}else return s(l)}else{for(f=[],c=0;c<l.length;c++)f[c]=a(l[c],u-1);return f}}}),g5="mean",Fwe=["typed","add","divide"],dq=ue(g5,Fwe,n=>{var{typed:e,add:t,divide:r}=n;return e(g5,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":i,"...":function(a){if(Rm(a))throw new TypeError("Scalar values expected in function mean");return s(a)}});function i(o,a){try{var l=yE(o,a,t),u=Array.isArray(o)?nn(o):o.size();return r(l,u[a])}catch(c){throw Ps(c,"mean")}}function s(o){var a,l=0;if(Au(o,function(u){try{a=a===void 0?u:t(a,u),l++}catch(c){throw Ps(c,"mean",u)}}),l===0)throw new Error("Cannot calculate the mean of an empty array");return r(a,l)}}),v5="median",Bwe=["typed","add","divide","compare","partitionSelect"],zwe=ue(v5,Bwe,n=>{var{typed:e,add:t,divide:r,compare:i,partitionSelect:s}=n;function o(u){try{u=wn(u.valueOf());var c=u.length;if(c===0)throw new Error("Cannot calculate median of an empty array");if(c%2===0){for(var f=c/2-1,d=s(u,f+1),h=u[f],m=0;m<f;++m)i(u[m],h)>0&&(h=u[m]);return l(h,d)}else{var v=s(u,(c-1)/2);return a(v)}}catch(y){throw Ps(y,"median")}}var a=e({"number | BigNumber | Complex | Unit":function(c){return c}}),l=e({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(c,f){return r(t(c,f),2)}});return e(v5,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(c,f){throw new Error("median(A, dim) is not yet supported")},"...":function(c){if(Rm(c))throw new TypeError("Scalar values expected in function median");return o(c)}})}),y5="mad",Uwe=["typed","abs","map","median","subtract"],$we=ue(y5,Uwe,n=>{var{typed:e,abs:t,map:r,median:i,subtract:s}=n;return e(y5,{"Array | Matrix":o,"...":function(l){return o(l)}});function o(a){if(a=wn(a.valueOf()),a.length===0)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var l=i(a);return i(r(a,function(u){return t(s(u,l))}))}catch(u){throw u instanceof TypeError&&u.message.includes("median")?new TypeError(u.message.replace("median","mad")):Ps(u,"mad")}}}),bC="unbiased",x5="variance",Vwe=["typed","add","subtract","multiply","divide","apply","isNaN"],hq=ue(x5,Vwe,n=>{var{typed:e,add:t,subtract:r,multiply:i,divide:s,apply:o,isNaN:a}=n;return e(x5,{"Array | Matrix":function(f){return l(f,bC)},"Array | Matrix, string":l,"Array | Matrix, number | BigNumber":function(f,d){return u(f,d,bC)},"Array | Matrix, number | BigNumber, string":u,"...":function(f){return l(f,bC)}});function l(c,f){var d,h=0;if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(Au(c,function(y){try{d=d===void 0?y:t(d,y),h++}catch(p){throw Ps(p,"variance",y)}}),h===0)throw new Error("Cannot calculate variance of an empty array");var m=s(d,h);if(d=void 0,Au(c,function(y){var p=r(y,m);d=d===void 0?i(p,p):t(d,i(p,p))}),a(d))return d;switch(f){case"uncorrected":return s(d,h);case"biased":return s(d,h+1);case"unbiased":{var v=Jt(d)?d.mul(0):0;return h===1?v:s(d,h-1)}default:throw new Error('Unknown normalization "'+f+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function u(c,f,d){try{if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return o(c,f,h=>l(h,d))}catch(h){throw Ps(h,"variance")}}}),b5="quantileSeq",Hwe=["typed","?bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger"],pq=ue(b5,Hwe,n=>{var{typed:e,bignumber:t,add:r,subtract:i,divide:s,multiply:o,partitionSelect:a,compare:l,isInteger:u,smaller:c,smallerEq:f,larger:d}=n,h=uR({typed:e,isInteger:u});return e(b5,{"Array | Matrix, number | BigNumber":(S,b)=>v(S,b,!1),"Array | Matrix, number | BigNumber, number":(S,b,g)=>m(S,b,!1,g,v),"Array | Matrix, number | BigNumber, boolean":v,"Array | Matrix, number | BigNumber, boolean, number":(S,b,g,w)=>m(S,b,g,w,v),"Array | Matrix, Array | Matrix":(S,b)=>y(S,b,!1),"Array | Matrix, Array | Matrix, number":(S,b,g)=>m(S,b,!1,g,y),"Array | Matrix, Array | Matrix, boolean":y,"Array | Matrix, Array | Matrix, boolean, number":(S,b,g,w)=>m(S,b,g,w,y)});function m(S,b,g,w,x){return h(S,w,M=>x(M,b,g))}function v(S,b,g){var w,x=S.valueOf();if(c(b,0))throw new Error("N/prob must be non-negative");if(f(b,1))return tn(b)?p(x,b,g):t(p(x,b,g));if(d(b,1)){if(!u(b))throw new Error("N must be a positive integer");if(d(b,4294967295))throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var M=r(b,1);w=[];for(var A=0;c(A,b);A++){var N=s(A+1,M);w.push(p(x,N,g))}return tn(b)?w:t(w)}}function y(S,b,g){for(var w=S.valueOf(),x=b.valueOf(),M=[],A=0;A<x.length;++A)M.push(p(w,x[A],g));return M}function p(S,b,g){var w=wn(S),x=w.length;if(x===0)throw new Error("Cannot calculate quantile of an empty sequence");var M=tn(b)?b*(x-1):b.times(x-1),A=tn(b)?Math.floor(M):M.floor().toNumber(),N=tn(b)?M%1:M.minus(A);if(u(M))return g?w[M]:a(w,tn(b)?M:M.valueOf());var C,T;if(g)C=w[A],T=w[A+1];else{T=a(w,A+1),C=w[A];for(var R=0;R<A;++R)l(w[R],C)>0&&(C=w[R])}return r(o(C,i(1,N)),o(T,N))}}),w5="std",Wwe=["typed","map","sqrt","variance"],mq=ue(w5,Wwe,n=>{var{typed:e,map:t,sqrt:r,variance:i}=n;return e(w5,{"Array | Matrix":s,"Array | Matrix, string":s,"Array | Matrix, number | BigNumber":s,"Array | Matrix, number | BigNumber, string":s,"...":function(a){return s(a)}});function s(o,a){if(o.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var l=i.apply(null,arguments);return To(l)?t(l,r):r(l)}catch(u){throw u instanceof TypeError&&u.message.includes(" variance")?new TypeError(u.message.replace(" variance"," std")):u}}}),S5="corr",jwe=["typed","matrix","mean","sqrt","sum","add","subtract","multiply","pow","divide"],Gwe=ue(S5,jwe,n=>{var{typed:e,matrix:t,sqrt:r,sum:i,add:s,subtract:o,multiply:a,pow:l,divide:u}=n;return e(S5,{"Array, Array":function(h,m){return c(h,m)},"Matrix, Matrix":function(h,m){var v=c(h.toArray(),m.toArray());return Array.isArray(v)?t(v):v}});function c(d,h){var m=[];if(Array.isArray(d[0])&&Array.isArray(h[0])){if(d.length!==h.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same length.");for(var v=0;v<d.length;v++){if(d[v].length!==h[v].length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");m.push(f(d[v],h[v]))}return m}else{if(d.length!==h.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");return f(d,h)}}function f(d,h){var m=d.length,v=i(d),y=i(h),p=d.reduce((x,M,A)=>s(x,a(M,h[A])),0),S=i(d.map(x=>l(x,2))),b=i(h.map(x=>l(x,2))),g=o(a(m,p),a(v,y)),w=r(a(o(a(m,S),l(v,2)),o(a(m,b),l(y,2))));return u(g,w)}}),_5="combinations",qwe=["typed"],Xwe=ue(_5,qwe,n=>{var{typed:e}=n;return e(_5,{"number, number":dG,"BigNumber, BigNumber":function(r,i){var s=r.constructor,o,a,l=r.minus(i),u=new s(1);if(!E5(r)||!E5(i))throw new TypeError("Positive integer value expected in function combinations");if(i.gt(r))throw new TypeError("k must be less than n in function combinations");if(o=u,i.lt(l))for(a=u;a.lte(l);a=a.plus(u))o=o.times(i.plus(a)).dividedBy(a);else for(a=u;a.lte(i);a=a.plus(u))o=o.times(l.plus(a)).dividedBy(a);return o}})});function E5(n){return n.isInteger()&&n.gte(0)}var M5="combinationsWithRep",Ywe=["typed"],Kwe=ue(M5,Ywe,n=>{var{typed:e}=n;return e(M5,{"number, number":function(r,i){if(!kt(r)||r<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!kt(i)||i<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(r<1)throw new TypeError("k must be less than or equal to n + k - 1");if(i<r-1){var s=hu(r,r+i-1);return s/hu(1,i)}var o=hu(i+1,r+i-1);return o/hu(1,r-1)},"BigNumber, BigNumber":function(r,i){var s=r.constructor,o,a,l=new s(1),u=r.minus(l);if(!C5(r)||!C5(i))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(r.lt(l))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(o=l,i.lt(u))for(a=l;a.lte(u);a=a.plus(l))o=o.times(i.plus(a)).dividedBy(a);else for(a=l;a.lte(i);a=a.plus(l))o=o.times(u.plus(a)).dividedBy(a);return o}})});function C5(n){return n.isInteger()&&n.gte(0)}var A5="gamma",Zwe=["typed","config","multiplyScalar","pow","BigNumber","Complex"],Jwe=ue(A5,Zwe,n=>{var{typed:e,config:t,multiplyScalar:r,pow:i,BigNumber:s,Complex:o}=n;function a(u){if(u.im===0)return BS(u.re);if(u.re<.5){var c=new o(1-u.re,-u.im),f=new o(Math.PI*u.re,Math.PI*u.im);return new o(Math.PI).div(f.sin()).div(a(c))}u=new o(u.re-1,u.im);for(var d=new o($p[0],0),h=1;h<$p.length;++h){var m=new o($p[h],0);d=d.add(m.div(u.add(h)))}var v=new o(u.re+vG+.5,u.im),y=Math.sqrt(2*Math.PI),p=v.pow(u.add(.5)),S=v.neg().exp();return d.mul(y).mul(p).mul(S)}return e(A5,{number:BS,Complex:a,BigNumber:function(c){if(c.isInteger())return c.isNegative()||c.isZero()?new s(1/0):l(c.minus(1));if(!c.isFinite())return new s(c.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function l(u){if(u<8)return new s([1,1,2,6,24,120,720,5040][u]);var c=t.precision+(Math.log(u.toNumber())|0),f=s.clone({precision:c});if(u%2===1)return u.times(l(new s(u-1)));for(var d=u,h=new f(u),m=u.toNumber();d>2;)d-=2,m+=d,h=h.times(m);return new s(h.toPrecision(s.precision))}}),T5="lgamma",Qwe=["Complex","typed"],eSe=ue(T5,Qwe,n=>{var{Complex:e,typed:t}=n,r=7,i=7,s=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return t(T5,{number:zS,Complex:o,BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function o(u){var c=6.283185307179586,f=1.1447298858494002,d=.1;if(u.isNaN())return new e(NaN,NaN);if(u.im===0)return new e(zS(u.re),0);if(u.re>=r||Math.abs(u.im)>=i)return a(u);if(u.re<=d){var h=qoe(c,u.im)*Math.floor(.5*u.re+.25),m=u.mul(Math.PI).sin().log(),v=o(new e(1-u.re,-u.im));return new e(f,h).sub(m).sub(v)}else return u.im>=0?l(u):l(u.conjugate()).conjugate()}function a(u){for(var c=u.sub(.5).mul(u.log()).sub(u).add(yG),f=new e(1,0).div(u),d=f.div(u),h=s[0],m=s[1],v=2*d.re,y=d.re*d.re+d.im*d.im,p=2;p<8;p++){var S=m;m=-y*h+s[p],h=v*h+S}var b=f.mul(d.mul(h).add(m));return c.add(b)}function l(u){var c=0,f=0,d=u;for(u=u.add(1);u.re<=r;){d=d.mul(u);var h=d.im<0?1:0;h!==0&&f===0&&c++,f=h,u=u.add(1)}return a(u).sub(d.log()).sub(new e(0,c*2*Math.PI*1))}}),D5="factorial",tSe=["typed","gamma"],nSe=ue(D5,tSe,n=>{var{typed:e,gamma:t}=n;return e(D5,{number:function(i){if(i<0)throw new Error("Value must be non-negative");return t(i+1)},BigNumber:function(i){if(i.isNegative())throw new Error("Value must be non-negative");return t(i.plus(1))},"Array | Matrix":e.referToSelf(r=>i=>cn(i,r))})}),N5="kldivergence",rSe=["typed","matrix","divide","sum","multiply","map","dotDivide","log","isNumeric"],iSe=ue(N5,rSe,n=>{var{typed:e,matrix:t,divide:r,sum:i,multiply:s,map:o,dotDivide:a,log:l,isNumeric:u}=n;return e(N5,{"Array, Array":function(d,h){return c(t(d),t(h))},"Matrix, Array":function(d,h){return c(d,t(h))},"Array, Matrix":function(d,h){return c(t(d),h)},"Matrix, Matrix":function(d,h){return c(d,h)}});function c(f,d){var h=d.size().length,m=f.size().length;if(h>1)throw new Error("first object must be one dimensional");if(m>1)throw new Error("second object must be one dimensional");if(h!==m)throw new Error("Length of two vectors must be equal");var v=i(f);if(v===0)throw new Error("Sum of elements in first object must be non zero");var y=i(d);if(y===0)throw new Error("Sum of elements in second object must be non zero");var p=r(f,i(f)),S=r(d,i(d)),b=i(s(p,o(a(p,S),g=>l(g))));return u(b)?b:Number.NaN}}),P5="multinomial",sSe=["typed","add","divide","multiply","factorial","isInteger","isPositive"],oSe=ue(P5,sSe,n=>{var{typed:e,add:t,divide:r,multiply:i,factorial:s,isInteger:o,isPositive:a}=n;return e(P5,{"Array | Matrix":function(u){var c=0,f=1;return Au(u,function(d){if(!o(d)||!a(d))throw new TypeError("Positive integer value expected in function multinomial");c=t(c,d),f=i(f,s(d))}),r(s(c),f)}})}),R5="permutations",aSe=["typed","factorial"],lSe=ue(R5,aSe,n=>{var{typed:e,factorial:t}=n;return e(R5,{"number | BigNumber":t,"number, number":function(i,s){if(!kt(i)||i<0)throw new TypeError("Positive integer value expected in function permutations");if(!kt(s)||s<0)throw new TypeError("Positive integer value expected in function permutations");if(s>i)throw new TypeError("second argument k must be less than or equal to first argument n");return hu(i-s+1,i)},"BigNumber, BigNumber":function(i,s){var o,a;if(!O5(i)||!O5(s))throw new TypeError("Positive integer value expected in function permutations");if(s.gt(i))throw new TypeError("second argument k must be less than or equal to first argument n");var l=i.mul(0).add(1);for(o=l,a=i.minus(s).plus(1);a.lte(i);a=a.plus(1))o=o.times(a);return o}})});function O5(n){return n.isInteger()&&n.gte(0)}var gR={exports:{}};gR.exports;(function(n){(function(e,t,r){function i(l){var u=this,c=a();u.next=function(){var f=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=f-(u.c=f|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function s(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function o(l,u){var c=new i(l),f=u&&u.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,f&&(typeof f=="object"&&s(f,c),d.state=function(){return s(c,{})}),d}function a(){var l=4022871197,u=function(c){c=String(c);for(var f=0;f<c.length;f++){l+=c.charCodeAt(f);var d=.02519603282416938*l;l=d>>>0,d-=l,d*=l,l=d>>>0,d-=l,l+=d*4294967296}return(l>>>0)*23283064365386963e-26};return u}t&&t.exports?t.exports=o:this.alea=o})(go,n)})(gR);var uSe=gR.exports,vR={exports:{}};vR.exports;(function(n){(function(e,t,r){function i(a){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var f=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^f^f>>>8},a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function o(a,l){var u=new i(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&s(c,u),f.state=function(){return s(u,{})}),f}t&&t.exports?t.exports=o:this.xor128=o})(go,n)})(vR);var cSe=vR.exports,yR={exports:{}};yR.exports;(function(n){(function(e,t,r){function i(a){var l=this,u="";l.next=function(){var f=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(f^f<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function o(a,l){var u=new i(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&s(c,u),f.state=function(){return s(u,{})}),f}t&&t.exports?t.exports=o:this.xorwow=o})(go,n)})(yR);var fSe=yR.exports,xR={exports:{}};xR.exports;(function(n){(function(e,t,r){function i(a){var l=this;l.next=function(){var c=l.x,f=l.i,d,h;return d=c[f],d^=d>>>7,h=d^d<<24,d=c[f+1&7],h^=d^d>>>10,d=c[f+3&7],h^=d^d>>>3,d=c[f+4&7],h^=d^d<<7,d=c[f+7&7],d=d^d<<13,h^=d^d<<9,c[f]=h,l.i=f+1&7,h};function u(c,f){var d,h=[];if(f===(f|0))h[0]=f;else for(f=""+f,d=0;d<f.length;++d)h[d&7]=h[d&7]<<15^f.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?h[7]=-1:h[d],c.x=h,c.i=0,d=256;d>0;--d)c.next()}u(l,a)}function s(a,l){return l.x=a.x.slice(),l.i=a.i,l}function o(a,l){a==null&&(a=+new Date);var u=new i(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(c.x&&s(c,u),f.state=function(){return s(u,{})}),f}t&&t.exports?t.exports=o:this.xorshift7=o})(go,n)})(xR);var dSe=xR.exports,bR={exports:{}};bR.exports;(function(n){(function(e,t,r){function i(a){var l=this;l.next=function(){var c=l.w,f=l.X,d=l.i,h,m;return l.w=c=c+1640531527|0,m=f[d+34&127],h=f[d=d+1&127],m^=m<<13,h^=h<<17,m^=m>>>15,h^=h>>>12,m=f[d]=m^h,l.i=d,m+(c^c>>>16)|0};function u(c,f){var d,h,m,v,y,p=[],S=128;for(f===(f|0)?(h=f,f=null):(f=f+"\0",h=0,S=Math.max(S,f.length)),m=0,v=-32;v<S;++v)f&&(h^=f.charCodeAt((v+32)%f.length)),v===0&&(y=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,v>=0&&(y=y+1640531527|0,d=p[v&127]^=h+y,m=d==0?m+1:0);for(m>=128&&(p[(f&&f.length||0)&127]=-1),m=127,v=4*128;v>0;--v)h=p[m+34&127],d=p[m=m+1&127],h^=h<<13,d^=d<<17,h^=h>>>15,d^=d>>>12,p[m]=h^d;c.w=y,c.X=p,c.i=m}u(l,a)}function s(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function o(a,l){a==null&&(a=+new Date);var u=new i(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(c.X&&s(c,u),f.state=function(){return s(u,{})}),f}t&&t.exports?t.exports=o:this.xor4096=o})(go,n)})(bR);var hSe=bR.exports,wR={exports:{}};wR.exports;(function(n){(function(e,t,r){function i(a){var l=this,u="";l.next=function(){var f=l.b,d=l.c,h=l.d,m=l.a;return f=f<<25^f>>>7^d,d=d-h|0,h=h<<24^h>>>8^m,m=m-f|0,l.b=f=f<<20^f>>>12^d,l.c=d=d-h|0,l.d=h<<16^d>>>16^m,l.a=m-f|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):u+=a;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function s(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function o(a,l){var u=new i(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&s(c,u),f.state=function(){return s(u,{})}),f}t&&t.exports?t.exports=o:this.tychei=o})(go,n)})(wR);var pSe=wR.exports,gq={exports:{}};const mSe={},gSe=Object.freeze(Object.defineProperty({__proto__:null,default:mSe},Symbol.toStringTag,{value:"Module"})),vSe=Xne(gSe);(function(n){(function(e,t,r){var i=256,s=6,o=52,a="random",l=r.pow(i,s),u=r.pow(2,o),c=u*2,f=i-1,d;function h(g,w,x){var M=[];w=w==!0?{entropy:!0}:w||{};var A=p(y(w.entropy?[g,b(t)]:g??S(),3),M),N=new m(M),C=function(){for(var T=N.g(s),R=l,$=0;T<u;)T=(T+$)*i,R*=i,$=N.g(1);for(;T>=c;)T/=2,R/=2,$>>>=1;return(T+$)/R};return C.int32=function(){return N.g(4)|0},C.quick=function(){return N.g(4)/4294967296},C.double=C,p(b(N.S),t),(w.pass||x||function(T,R,$,B){return B&&(B.S&&v(B,N),T.state=function(){return v(N,{})}),$?(r[a]=T,R):T})(C,A,"global"in w?w.global:this==r,w.state)}function m(g){var w,x=g.length,M=this,A=0,N=M.i=M.j=0,C=M.S=[];for(x||(g=[x++]);A<i;)C[A]=A++;for(A=0;A<i;A++)C[A]=C[N=f&N+g[A%x]+(w=C[A])],C[N]=w;(M.g=function(T){for(var R,$=0,B=M.i,z=M.j,D=M.S;T--;)R=D[B=f&B+1],$=$*i+D[f&(D[B]=D[z=f&z+R])+(D[z]=R)];return M.i=B,M.j=z,$})(i)}function v(g,w){return w.i=g.i,w.j=g.j,w.S=g.S.slice(),w}function y(g,w){var x=[],M=typeof g,A;if(w&&M=="object")for(A in g)try{x.push(y(g[A],w-1))}catch{}return x.length?x:M=="string"?g:g+"\0"}function p(g,w){for(var x=g+"",M,A=0;A<x.length;)w[f&A]=f&(M^=w[f&A]*19)+x.charCodeAt(A++);return b(w)}function S(){try{var g;return d&&(g=d.randomBytes)?g=g(i):(g=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(g)),b(g)}catch{var w=e.navigator,x=w&&w.plugins;return[+new Date,e,x,e.screen,b(t)]}}function b(g){return String.fromCharCode.apply(0,g)}if(p(r.random(),t),n.exports){n.exports=h;try{d=vSe}catch{}}else r["seed"+a]=h})(typeof self<"u"?self:go,[],Math)})(gq);var ySe=gq.exports,xSe=uSe,bSe=cSe,wSe=fSe,SSe=dSe,_Se=hSe,ESe=pSe,Kd=ySe;Kd.alea=xSe;Kd.xor128=bSe;Kd.xorwow=wSe;Kd.xorshift7=SSe;Kd.xor4096=_Se;Kd.tychei=ESe;var MSe=Kd;const vq=fa(MSe);var CSe=vq(Date.now());function fm(n){var e;function t(i){e=i===null?CSe:vq(String(i))}t(n);function r(){return e()}return r}var k5="pickRandom",ASe=["typed","config","?on"],TSe=ue(k5,ASe,n=>{var{typed:e,config:t,on:r}=n,i=fm(t.randomSeed);return r&&r("config",function(o,a){o.randomSeed!==a.randomSeed&&(i=fm(o.randomSeed))}),e(k5,{"Array | Matrix":function(a){return s(a,{})},"Array | Matrix, Object":function(a,l){return s(a,l)},"Array | Matrix, number":function(a,l){return s(a,{number:l})},"Array | Matrix, Array | Matrix":function(a,l){return s(a,{weights:l})},"Array | Matrix, Array | Matrix, number":function(a,l,u){return s(a,{number:u,weights:l})},"Array | Matrix, number, Array | Matrix":function(a,l,u){return s(a,{number:l,weights:u})}});function s(o,a){var{number:l,weights:u,elementWise:c=!0}=a,f=typeof l>"u";f&&(l=1);var d=$t(o)?o.create:$t(u)?u.create:null;o=o.valueOf(),u&&(u=u.valueOf()),c===!0&&(o=wn(o),u=wn(u));var h=0;if(typeof u<"u"){if(u.length!==o.length)throw new Error("Weights must have the same length as possibles");for(var m=0,v=u.length;m<v;m++){if(!tn(u[m])||u[m]<0)throw new Error("Weights must be an array of positive numbers");h+=u[m]}}for(var y=o.length,p=[],S;p.length<l;){if(typeof u>"u")S=o[Math.floor(i()*y)];else for(var b=i()*h,g=0,w=o.length;g<w;g++)if(b-=u[g],b<0){S=o[g];break}p.push(S)}return f?p[0]:d?d(p):p}});function SR(n,e){var t=[];if(n=n.slice(0),n.length>1)for(var r=0,i=n.shift();r<i;r++)t.push(SR(n,e));else for(var s=0,o=n.shift();s<o;s++)t.push(e());return t}var I5="random",DSe=["typed","config","?on"],NSe=ue(I5,DSe,n=>{var{typed:e,config:t,on:r}=n,i=fm(t.randomSeed);return r&&r("config",function(a,l){a.randomSeed!==l.randomSeed&&(i=fm(a.randomSeed))}),e(I5,{"":()=>o(0,1),number:a=>o(0,a),"number, number":(a,l)=>o(a,l),"Array | Matrix":a=>s(a,0,1),"Array | Matrix, number":(a,l)=>s(a,0,l),"Array | Matrix, number, number":(a,l,u)=>s(a,l,u)});function s(a,l,u){var c=SR(a.valueOf(),()=>o(l,u));return $t(a)?a.create(c):c}function o(a,l){return a+i()*(l-a)}}),L5="randomInt",PSe=["typed","config","?on"],RSe=ue(L5,PSe,n=>{var{typed:e,config:t,on:r}=n,i=fm(t.randomSeed);return r&&r("config",function(a,l){a.randomSeed!==l.randomSeed&&(i=fm(a.randomSeed))}),e(L5,{"":()=>o(0,1),number:a=>o(0,a),"number, number":(a,l)=>o(a,l),"Array | Matrix":a=>s(a,0,1),"Array | Matrix, number":(a,l)=>s(a,0,l),"Array | Matrix, number, number":(a,l,u)=>s(a,l,u)});function s(a,l,u){var c=SR(a.valueOf(),()=>o(l,u));return $t(a)?a.create(c):c}function o(a,l){return Math.floor(a+i()*(l-a))}}),F5="stirlingS2",OSe=["typed","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","number","?bignumber","larger"],kSe=ue(F5,OSe,n=>{var{typed:e,addScalar:t,subtractScalar:r,multiplyScalar:i,divideScalar:s,pow:o,factorial:a,combinations:l,isNegative:u,isInteger:c,number:f,bignumber:d,larger:h}=n,m=[],v=[];return e(F5,{"number | BigNumber, number | BigNumber":function(p,S){if(!c(p)||u(p)||!c(S)||u(S))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(h(S,p))throw new TypeError("k must be less than or equal to n in function stirlingS2");var b=!(tn(p)&&tn(S)),g=b?v:m,w=b?d:f,x=f(p),M=f(S);if(g[x]&&g[x].length>M)return g[x][M];for(var A=0;A<=x;++A)if(g[A]||(g[A]=[w(A===0?1:0)]),A!==0)for(var N=g[A],C=g[A-1],T=N.length;T<=A&&T<=M;++T)T===A?N[T]=1:N[T]=t(i(w(T),C[T]),C[T-1]);return g[x][M]}})}),B5="bellNumbers",ISe=["typed","addScalar","isNegative","isInteger","stirlingS2"],LSe=ue(B5,ISe,n=>{var{typed:e,addScalar:t,isNegative:r,isInteger:i,stirlingS2:s}=n;return e(B5,{"number | BigNumber":function(a){if(!i(a)||r(a))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var l=0,u=0;u<=a;u++)l=t(l,s(a,u));return l}})}),z5="catalan",FSe=["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],BSe=ue(z5,FSe,n=>{var{typed:e,addScalar:t,divideScalar:r,multiplyScalar:i,combinations:s,isNegative:o,isInteger:a}=n;return e(z5,{"number | BigNumber":function(u){if(!a(u)||o(u))throw new TypeError("Non-negative integer value expected in function catalan");return r(s(i(u,2),u),t(u,1))}})}),U5="composition",zSe=["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],USe=ue(U5,zSe,n=>{var{typed:e,addScalar:t,combinations:r,isPositive:i,isNegative:s,isInteger:o,larger:a}=n;return e(U5,{"number | BigNumber, number | BigNumber":function(u,c){if(!o(u)||!i(u)||!o(c)||!i(c))throw new TypeError("Positive integer value expected in function composition");if(a(c,u))throw new TypeError("k must be less than or equal to n in function composition");return r(t(u,-1),t(c,-1))}})}),$5="leafCount",$Se=["parse","typed"],VSe=ue($5,$Se,n=>{var{parse:e,typed:t}=n;function r(i){var s=0;return i.forEach(o=>{s+=r(o)}),s||1}return t($5,{Node:function(s){return r(s)}})});function V5(n){return vn(n)||Br(n)&&n.isUnary()&&vn(n.args[0])}function YS(n){return!!(vn(n)||(Cu(n)||Br(n))&&n.args.every(YS)||Pl(n)&&YS(n.content))}function H5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function wC(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?H5(Object(t),!0).forEach(function(r){mr(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):H5(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var HSe="simplifyUtil",WSe=["FunctionNode","OperatorNode","SymbolNode"],_R=ue(HSe,WSe,n=>{var{FunctionNode:e,OperatorNode:t,SymbolNode:r}=n,i=!0,s=!1,o="defaultF",a={add:{trivial:i,total:i,commutative:i,associative:i},unaryPlus:{trivial:i,total:i,commutative:i,associative:i},subtract:{trivial:s,total:i,commutative:s,associative:s},multiply:{trivial:i,total:i,commutative:i,associative:i},divide:{trivial:s,total:i,commutative:s,associative:s},paren:{trivial:i,total:i,commutative:i,associative:s},defaultF:{trivial:s,total:i,commutative:s,associative:s}},l={divide:{total:s},log:{total:s}},u={subtract:{total:s},abs:{trivial:i},log:{total:i}};function c(b,g){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a,x=o;if(typeof b=="string"?x=b:Br(b)?x=b.fn.toString():Cu(b)?x=b.name:Pl(b)&&(x="paren"),gt(w,x)){var M=w[x];if(gt(M,g))return M[g];if(gt(a,x))return a[x][g]}if(gt(w,o)){var A=w[o];return gt(A,g)?A[g]:a[o][g]}if(gt(a,x)){var N=a[x];if(gt(N,g))return N[g]}return a[o][g]}function f(b){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a;return c(b,"commutative",g)}function d(b){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a;return c(b,"associative",g)}function h(b,g){var w=wC({},b);for(var x in g)gt(b,x)?w[x]=wC(wC({},g[x]),b[x]):w[x]=g[x];return w}function m(b,g){if(!b.args||b.args.length===0)return b;b.args=v(b,g);for(var w=0;w<b.args.length;w++)m(b.args[w],g)}function v(b,g){var w,x=[],M=function A(N){for(var C=0;C<N.args.length;C++){var T=N.args[C];Br(T)&&w===T.op?A(T):x.push(T)}};return d(b,g)?(w=b.op,M(b),x):b.args}function y(b,g){if(!(!b.args||b.args.length===0)){for(var w=S(b),x=b.args.length,M=0;M<x;M++)y(b.args[M],g);if(x>2&&d(b,g)){for(var A=b.args.pop();b.args.length>0;)A=w([b.args.pop(),A]);b.args=A.args}}}function p(b,g){if(!(!b.args||b.args.length===0)){for(var w=S(b),x=b.args.length,M=0;M<x;M++)p(b.args[M],g);if(x>2&&d(b,g)){for(var A=b.args.shift();b.args.length>0;)A=w([A,b.args.shift()]);b.args=A.args}}}function S(b){return Br(b)?function(g){try{return new t(b.op,b.fn,g,b.implicit)}catch(w){return console.error(w),[]}}:function(g){return new e(new r(b.name),g)}}return{createMakeNodeFunction:S,hasProperty:c,isCommutative:f,isAssociative:d,mergeContext:h,flatten:m,allChildren:v,unflattenr:y,unflattenl:p,defaultContext:a,realContext:l,positiveContext:u}}),jSe="simplify",GSe=["config","typed","parse","add","subtract","multiply","divide","pow","isZero","equal","resolve","simplifyConstant","simplifyCore","?fraction","?bignumber","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],qSe=ue(jSe,GSe,n=>{var{config:e,typed:t,parse:r,add:i,subtract:s,multiply:o,divide:a,pow:l,isZero:u,equal:c,resolve:f,simplifyConstant:d,simplifyCore:h,fraction:m,bignumber:v,mathWithTransform:y,matrix:p,AccessorNode:S,ArrayNode:b,ConstantNode:g,FunctionNode:w,IndexNode:x,ObjectNode:M,OperatorNode:A,ParenthesisNode:N,SymbolNode:C}=n,{hasProperty:T,isCommutative:R,isAssociative:$,mergeContext:B,flatten:z,unflattenr:D,unflattenl:I,createMakeNodeFunction:U,defaultContext:L,realContext:q,positiveContext:Z}=_R({FunctionNode:w,OperatorNode:A,SymbolNode:C});t.addConversion({from:"Object",to:"Map",convert:Up});var J=t("simplify",{Node:me,"Node, Map":(oe,G)=>me(oe,!1,G),"Node, Map, Object":(oe,G,j)=>me(oe,!1,G,j),"Node, Array":me,"Node, Array, Map":me,"Node, Array, Map, Object":me});t.removeConversion({from:"Object",to:"Map",convert:Up}),J.defaultContext=L,J.realContext=q,J.positiveContext=Z;function Y(oe){return oe.transform(function(G,j,de){return Pl(G)?Y(G.content):G})}var ee={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};J.rules=[h,{l:"log(e)",r:"1"},{s:"n-n1 -> n+-n1",assuming:{subtract:{total:!0}}},{s:"n-n -> 0",assuming:{subtract:{total:!1}}},{s:"-(cl*v) -> v * (-cl)",assuming:{multiply:{commutative:!0},subtract:{total:!0}}},{s:"-(cl*v) -> (-cl) * v",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{s:"-(v*cl) -> v * (-cl)",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{l:"-(n1/n2)",r:"-n1/n2"},{l:"-v",r:"v * (-1)"},{l:"(n1 + n2)*(-1)",r:"n1*(-1) + n2*(-1)",repeat:!0},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{s:"(n1*n2)^n3 -> n1^n3 * n2^n3",assuming:{multiply:{commutative:!0}}},{s:"(n1*n2)^(-1) -> n2^(-1) * n1^(-1)",assuming:{multiply:{commutative:!1}}},{s:"(n ^ n1) ^ n2 -> n ^ (n1 * n2)",assuming:{divide:{total:!0}}},{l:" vd   * ( vd   * n1 + n2)",r:"vd^2       * n1 +  vd   * n2"},{s:" vd   * (vd^n4 * n1 + n2)   ->  vd^(1+n4)  * n1 +  vd   * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * ( vd   * n1 + n2)   ->  vd^(n3+1)  * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * (vd^n4 * n1 + n2)   ->  vd^(n3+n4) * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{l:"n*n",r:"n^2"},{s:"n * n^n1 -> n^(n1+1)",assuming:{divide:{total:!0}}},{s:"n^n1 * n^n2 -> n^(n1+n2)",assuming:{divide:{total:!0}}},d,{s:"n+n -> 2*n",assuming:{add:{total:!0}}},{l:"n+-n",r:"0"},{l:"vd*n + vd",r:"vd*(n+1)"},{l:"n3*n1 + n3*n2",r:"n3*(n1+n2)"},{l:"n3^(-n4)*n1 +   n3  * n2",r:"n3^(-n4)*(n1 + n3^(n4+1) *n2)"},{l:"n3^(-n4)*n1 + n3^n5 * n2",r:"n3^(-n4)*(n1 + n3^(n4+n5)*n2)"},{s:"n*vd + vd -> (n+1)*vd",assuming:{multiply:{commutative:!1}}},{s:"vd + n*vd -> (1+n)*vd",assuming:{multiply:{commutative:!1}}},{s:"n1*n3 + n2*n3 -> (n1+n2)*n3",assuming:{multiply:{commutative:!1}}},{s:"n^n1 * n -> n^(n1+1)",assuming:{divide:{total:!0},multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3    -> (n1 + n2*n3^(n4 +  1))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3^n5 -> (n1 + n2*n3^(n4 + n5))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{l:"n*cd + cd",r:"(n+1)*cd"},{s:"cd*n + cd -> cd*(n+1)",assuming:{multiply:{commutative:!1}}},{s:"cd + cd*n -> cd*(1+n)",assuming:{multiply:{commutative:!1}}},d,{s:"(-n)*n1 -> -(n*n1)",assuming:{subtract:{total:!0}}},{s:"n1*(-n) -> -(n1*n)",assuming:{subtract:{total:!0},multiply:{commutative:!1}}},{s:"ce+ve -> ve+ce",assuming:{add:{commutative:!0}},imposeContext:{add:{commutative:!1}}},{s:"vd*cd -> cd*vd",assuming:{multiply:{commutative:!0}},imposeContext:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n+-(n1)",r:"n-(n1)"},{s:"n*(n1^-1) -> n/n1",assuming:{multiply:{commutative:!0}}},{s:"n*n1^-n2 -> n/n1^n2",assuming:{multiply:{commutative:!0}}},{s:"n^-1 -> 1/n",assuming:{multiply:{commutative:!0}}},{l:"n^1",r:"n"},{s:"n*(n1/n2) -> (n*n1)/n2",assuming:{multiply:{associative:!0}}},{s:"n-(n1+n2) -> n-n1-n2",assuming:{addition:{associative:!0,commutative:!0}}},{l:"1*n",r:"n",imposeContext:{multiply:{commutative:!0}}},{s:"n1/(n2/n3) -> (n1*n3)/n2",assuming:{multiply:{associative:!0}}},{l:"n1/(-n2)",r:"-n1/n2"}];function ae(oe,G){var j={};if(oe.s){var de=oe.s.split("->");if(de.length===2)j.l=de[0],j.r=de[1];else throw SyntaxError("Could not parse rule: "+oe.s)}else j.l=oe.l,j.r=oe.r;j.l=Y(r(j.l)),j.r=Y(r(j.r));for(var Te of["imposeContext","repeat","assuming"])Te in oe&&(j[Te]=oe[Te]);if(oe.evaluate&&(j.evaluate=r(oe.evaluate)),$(j.l,G)){var X=!R(j.l,G),Q;X&&(Q=we());var be=U(j.l),_e=we();j.expanded={},j.expanded.l=be([j.l,_e]),z(j.expanded.l,G),D(j.expanded.l,G),j.expanded.r=be([j.r,_e]),X&&(j.expandedNC1={},j.expandedNC1.l=be([Q,j.l]),j.expandedNC1.r=be([Q,j.r]),j.expandedNC2={},j.expandedNC2.l=be([Q,j.expanded.l]),j.expandedNC2.r=be([Q,j.expanded.r]))}return j}function ce(oe,G){for(var j=[],de=0;de<oe.length;de++){var Te=oe[de],X=void 0,Q=typeof Te;switch(Q){case"string":Te={s:Te};case"object":X=ae(Te,G);break;case"function":X=Te;break;default:throw TypeError("Unsupported type of rule: "+Q)}j.push(X)}return j}var pe=0;function we(){return new C("_p"+pe++)}function me(oe,G){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:h0(),de=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},Te=de.consoleDebug;G=ce(G||J.rules,de.context);var X=f(oe,j);X=Y(X);for(var Q={},be=X.toString({parenthesis:"all"});!Q[be];){Q[be]=!0,pe=0;var _e=be;Te&&console.log("Working on: ",be);for(var Ne=0;Ne<G.length;Ne++){var Fe="";if(typeof G[Ne]=="function"?(X=G[Ne](X,de),Te&&(Fe=G[Ne].name)):(z(X,de.context),X=Ee(X,G[Ne],de.context),Te&&(Fe="".concat(G[Ne].l.toString()," -> ").concat(G[Ne].r.toString()))),Te){var He=X.toString({parenthesis:"all"});He!==_e&&(console.log("Applying",Fe,"produced",He),_e=He)}I(X,de.context)}be=X.toString({parenthesis:"all"})}return X}function Ae(oe,G,j){var de=oe;if(oe)for(var Te=0;Te<oe.length;++Te){var X=Ee(oe[Te],G,j);X!==oe[Te]&&(de===oe&&(de=oe.slice()),de[Te]=X)}return de}function Ee(oe,G,j){if(G.assuming){for(var de in G.assuming)for(var Te in G.assuming[de])if(T(de,Te,j)!==G.assuming[de][Te])return oe}var X=B(G.imposeContext,j),Q=oe;if(Q instanceof A||Q instanceof w){var be=Ae(Q.args,G,j);be!==Q.args&&(Q=Q.clone(),Q.args=be)}else if(Q instanceof N){if(Q.content){var _e=Ee(Q.content,G,j);_e!==Q.content&&(Q=new N(_e))}}else if(Q instanceof b){var Ne=Ae(Q.items,G,j);Ne!==Q.items&&(Q=new b(Ne))}else if(Q instanceof S){var Fe=Q.object;Q.object&&(Fe=Ee(Q.object,G,j));var He=Q.index;Q.index&&(He=Ee(Q.index,G,j)),(Fe!==Q.object||He!==Q.index)&&(Q=new S(Fe,He))}else if(Q instanceof x){var Ie=Ae(Q.dimensions,G,j);Ie!==Q.dimensions&&(Q=new x(Ie))}else if(Q instanceof M){var Je=!1,qe={};for(var lt in Q.properties)qe[lt]=Ee(Q.properties[lt],G,j),qe[lt]!==Q.properties[lt]&&(Je=!0);Je&&(Q=new M(qe))}var ot=G.r,ye=ie(G.l,Q,X)[0];if(!ye&&G.expanded&&(ot=G.expanded.r,ye=ie(G.expanded.l,Q,X)[0]),!ye&&G.expandedNC1&&(ot=G.expandedNC1.r,ye=ie(G.expandedNC1.l,Q,X)[0],ye||(ot=G.expandedNC2.r,ye=ie(G.expandedNC2.l,Q,X)[0])),ye){var We=Q.implicit;Q=ot.clone(),We&&"implicit"in ot&&(Q.implicit=!0),Q=Q.transform(function(W){return W.isSymbolNode&&gt(ye.placeholders,W.name)?ye.placeholders[W.name].clone():W})}return G.repeat&&Q!==oe&&(Q=Ee(Q,G,j)),Q}function re(oe,G){var j=[],de,Te,X=U(oe);if(R(oe,G))for(var Q=0;Q<oe.args.length;Q++)Te=oe.args.slice(0),Te.splice(Q,1),de=Te.length===1?Te[0]:X(Te),j.push(X([oe.args[Q],de]));else for(var be=1;be<oe.args.length;be++){var _e=oe.args[0];be>1&&(_e=X(oe.args.slice(0,be))),Te=oe.args.slice(be),de=Te.length===1?Te[0]:X(Te),j.push(X([_e,de]))}return j}function Pe(oe,G){var j={placeholders:{}};if(!oe.placeholders&&!G.placeholders)return j;if(oe.placeholders){if(!G.placeholders)return oe}else return G;for(var de in oe.placeholders)if(gt(oe.placeholders,de)&&(j.placeholders[de]=oe.placeholders[de],gt(G.placeholders,de)&&!Me(oe.placeholders[de],G.placeholders[de])))return null;for(var Te in G.placeholders)gt(G.placeholders,Te)&&(j.placeholders[Te]=G.placeholders[Te]);return j}function Re(oe,G){var j=[];if(oe.length===0||G.length===0)return j;for(var de,Te=0;Te<oe.length;Te++)for(var X=0;X<G.length;X++)de=Pe(oe[Te],G[X]),de&&j.push(de);return j}function te(oe){if(oe.length===0)return oe;for(var G=oe.reduce(Re),j=[],de={},Te=0;Te<G.length;Te++){var X=JSON.stringify(G[Te]);de[X]||(de[X]=!0,j.push(G[Te]))}return j}function ie(oe,G,j,de){var Te=[{placeholders:{}}];if(oe instanceof A&&G instanceof A||oe instanceof w&&G instanceof w){if(oe instanceof A){if(oe.op!==G.op||oe.fn!==G.fn)return[]}else if(oe instanceof w&&oe.name!==G.name)return[];if(G.args.length===1&&oe.args.length===1||!$(G,j)&&G.args.length===oe.args.length||de){for(var X=[],Q=0;Q<oe.args.length;Q++){var be=ie(oe.args[Q],G.args[Q],j);if(be.length===0)break;X.push(be)}if(X.length!==oe.args.length){if(!R(G,j)||oe.args.length===1)return[];if(oe.args.length>2)throw new Error("permuting >2 commutative non-associative rule arguments not yet implemented");var _e=ie(oe.args[0],G.args[1],j);if(_e.length===0)return[];var Ne=ie(oe.args[1],G.args[0],j);if(Ne.length===0)return[];X=[_e,Ne]}Te=te(X)}else if(G.args.length>=2&&oe.args.length===2){for(var Fe=re(G,j),He=[],Ie=0;Ie<Fe.length;Ie++){var Je=ie(oe,Fe[Ie],j,!0);He=He.concat(Je)}return He}else{if(oe.args.length>2)throw Error("Unexpected non-binary associative function: "+oe.toString());return[]}}else if(oe instanceof C){if(oe.name.length===0)throw new Error("Symbol in rule has 0 length...!?");if(ee[oe.name]){if(oe.name!==G.name)return[]}else switch(oe.name[1]>="a"&&oe.name[1]<="z"?oe.name.substring(0,2):oe.name[0]){case"n":case"_p":Te[0].placeholders[oe.name]=G;break;case"c":case"cl":if(vn(G))Te[0].placeholders[oe.name]=G;else return[];break;case"v":if(!vn(G))Te[0].placeholders[oe.name]=G;else return[];break;case"vl":if(oi(G))Te[0].placeholders[oe.name]=G;else return[];break;case"cd":if(V5(G))Te[0].placeholders[oe.name]=G;else return[];break;case"vd":if(!V5(G))Te[0].placeholders[oe.name]=G;else return[];break;case"ce":if(YS(G))Te[0].placeholders[oe.name]=G;else return[];break;case"ve":if(!YS(G))Te[0].placeholders[oe.name]=G;else return[];break;default:throw new Error("Invalid symbol in rule: "+oe.name)}}else if(oe instanceof g){if(!c(oe.value,G.value))return[]}else return[];return Te}function Me(oe,G){if(oe instanceof g&&G instanceof g){if(!c(oe.value,G.value))return!1}else if(oe instanceof C&&G instanceof C){if(oe.name!==G.name)return!1}else if(oe instanceof A&&G instanceof A||oe instanceof w&&G instanceof w){if(oe instanceof A){if(oe.op!==G.op||oe.fn!==G.fn)return!1}else if(oe instanceof w&&oe.name!==G.name)return!1;if(oe.args.length!==G.args.length)return!1;for(var j=0;j<oe.args.length;j++)if(!Me(oe.args[j],G.args[j]))return!1}else return!1;return!0}return J}),XSe="simplifyConstant",YSe=["typed","config","mathWithTransform","matrix","?fraction","?bignumber","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode"],KSe=ue(XSe,YSe,n=>{var{typed:e,config:t,mathWithTransform:r,matrix:i,fraction:s,bignumber:o,AccessorNode:a,ArrayNode:l,ConstantNode:u,FunctionNode:c,IndexNode:f,ObjectNode:d,OperatorNode:h,SymbolNode:m}=n,{isCommutative:v,isAssociative:y,allChildren:p,createMakeNodeFunction:S}=_R({FunctionNode:c,OperatorNode:h,SymbolNode:m}),b=e("simplifyConstant",{Node:z=>M(B(z,{})),"Node, Object":function(D,I){return M(B(D,I))}});function g(z){return qd(z)?z.valueOf():z instanceof Array?z.map(g):$t(z)?i(g(z.valueOf())):z}function w(z,D,I){try{return r[z].apply(null,D)}catch{return D=D.map(g),N(r[z].apply(null,D),I)}}var x=e({Fraction:T,number:function(D){return D<0?C(new u(-D)):new u(D)},BigNumber:function(D){return D<0?C(new u(-D)):new u(D)},Complex:function(D){throw new Error("Cannot convert Complex number to Node")},string:function(D){return new u(D)},Matrix:function(D){return new l(D.valueOf().map(I=>x(I)))}});function M(z){return In(z)?z:x(z)}function A(z,D){var I=D&&D.exactFractions!==!1;if(I&&isFinite(z)&&s){var U=s(z),L=D&&typeof D.fractionsLimit=="number"?D.fractionsLimit:1/0;if(U.valueOf()===z&&U.n<L&&U.d<L)return U}return z}var N=e({"string, Object":function(D,I){if(t.number==="BigNumber")return o===void 0&&dR(),o(D);if(t.number==="Fraction")return s===void 0&&XG(),s(D);var U=parseFloat(D);return A(U,I)},"Fraction, Object":function(D,I){return D},"BigNumber, Object":function(D,I){return D},"number, Object":function(D,I){return A(D,I)},"Complex, Object":function(D,I){return D.im!==0?D:A(D.re,I)},"Matrix, Object":function(D,I){return i(A(D.valueOf()))},"Array, Object":function(D,I){return D.map(A)}});function C(z){return new h("-","unaryMinus",[z])}function T(z){var D,I=z.s*z.n;return I<0?D=new h("-","unaryMinus",[new u(-I)]):D=new u(I),z.d===1?D:new h("/","divide",[D,new u(z.d)])}function R(z,D,I){if(!Xd(D))return new a(M(z),M(D));if(po(z)||$t(z)){for(var U=Array.from(D.dimensions);U.length>0;)if(vn(U[0])&&typeof U[0].value!="string"){var L=N(U.shift().value,I);po(z)?z=z.items[L-1]:(z=z.valueOf()[L-1],z instanceof Array&&(z=i(z)))}else if(U.length>1&&vn(U[1])&&typeof U[1].value!="string"){var q=N(U[1].value,I),Z=[],J=po(z)?z.items:z.valueOf();for(var Y of J)if(po(Y))Z.push(Y.items[q-1]);else if($t(z))Z.push(Y[q-1]);else break;if(Z.length===J.length)po(z)?z=new l(Z):z=i(Z),U.splice(1,1);else break}else break;return U.length===D.dimensions.length?new a(M(z),D):U.length>0?(D=new f(U),new a(M(z),D)):z}if(wy(z)&&D.dimensions.length===1&&vn(D.dimensions[0])){var ee=D.dimensions[0].value;return ee in z.properties?z.properties[ee]:new u}return new a(M(z),D)}function $(z,D,I,U){var L=D.shift(),q=D.reduce((Z,J)=>{if(!In(J)){var Y=Z.pop();if(In(Y))return[Y,J];try{return Z.push(w(z,[Y,J],U)),Z}catch{Z.push(Y)}}Z.push(M(Z.pop()));var ee=Z.length===1?Z[0]:I(Z);return[I([ee,M(J)])]},[L]);return q.length===1?q[0]:I([q[0],x(q[1])])}function B(z,D){switch(z.type){case"SymbolNode":return z;case"ConstantNode":switch(typeof z.value){case"number":return N(z.value,D);case"string":return z.value;default:if(!isNaN(z.value))return N(z.value,D)}return z;case"FunctionNode":if(r[z.name]&&r[z.name].rawArgs)return z;{var I=["add","multiply"];if(!I.includes(z.name)){var U=z.args.map(Ee=>B(Ee,D));if(!U.some(In))try{return w(z.name,U,D)}catch{}if(z.name==="size"&&U.length===1&&po(U[0])){for(var L=[],q=U[0];po(q);)L.push(q.items.length),q=q.items[0];return i(L)}return new c(z.name,U.map(M))}}case"OperatorNode":{var Z=z.fn.toString(),J,Y,ee=S(z);if(Br(z)&&z.isUnary())J=[B(z.args[0],D)],In(J[0])?Y=ee(J):Y=w(Z,J,D);else if(y(z,D.context))if(J=p(z,D.context),J=J.map(Ee=>B(Ee,D)),v(Z,D.context)){for(var ae=[],ce=[],pe=0;pe<J.length;pe++)In(J[pe])?ce.push(J[pe]):ae.push(J[pe]);ae.length>1?(Y=$(Z,ae,ee,D),ce.unshift(Y),Y=$(Z,ce,ee,D)):Y=$(Z,J,ee,D)}else Y=$(Z,J,ee,D);else J=z.args.map(Ee=>B(Ee,D)),Y=$(Z,J,ee,D);return Y}case"ParenthesisNode":return B(z.content,D);case"AccessorNode":return R(B(z.object,D),B(z.index,D),D);case"ArrayNode":{var we=z.items.map(Ee=>B(Ee,D));return we.some(In)?new l(we.map(M)):i(we)}case"IndexNode":return new f(z.dimensions.map(Ee=>b(Ee,D)));case"ObjectNode":{var me={};for(var Ae in z.properties)me[Ae]=b(z.properties[Ae],D);return new d(me)}case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"RangeNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(z.type))}}return b}),W5="simplifyCore",ZSe=["typed","parse","equal","isZero","add","subtract","multiply","divide","pow","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],JSe=ue(W5,ZSe,n=>{var{typed:e,parse:t,equal:r,isZero:i,add:s,subtract:o,multiply:a,divide:l,pow:u,AccessorNode:c,ArrayNode:f,ConstantNode:d,FunctionNode:h,IndexNode:m,ObjectNode:v,OperatorNode:y,ParenthesisNode:p,SymbolNode:S}=n,b=new d(0),g=new d(1),w=new d(!0),x=new d(!1);function M(T){return Br(T)&&["and","not","or"].includes(T.op)}var{hasProperty:A,isCommutative:N}=_R({FunctionNode:h,OperatorNode:y,SymbolNode:S});function C(T){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$=R?R.context:void 0;if(A(T,"trivial",$)){if(Cu(T)&&T.args.length===1)return C(T.args[0],R);var B=!1,z=0;if(T.forEach(ce=>{++z,z===1&&(B=C(ce,R))}),z===1)return B}var D=T;if(Cu(D)){var I=tve(D.name);if(I){if(D.args.length>2&&A(D,"associative",$))for(;D.args.length>2;){var U=D.args.pop(),L=D.args.pop();D.args.push(new y(I,D.name,[U,L]))}D=new y(I,D.name,D.args)}else return new h(C(D.fn),D.args.map(ce=>C(ce,R)))}if(Br(D)&&D.isUnary()){var q=C(D.args[0],R);if(D.op==="~"&&Br(q)&&q.isUnary()&&q.op==="~"||D.op==="not"&&Br(q)&&q.isUnary()&&q.op==="not"&&M(q.args[0]))return q.args[0];var Z=!0;if(D.op==="-"&&Br(q)&&(q.isBinary()&&q.fn==="subtract"&&(D=new y("-","subtract",[q.args[1],q.args[0]]),Z=!1),q.isUnary()&&q.op==="-"))return q.args[0];if(Z)return new y(D.op,D.fn,[q])}if(Br(D)&&D.isBinary()){var J=C(D.args[0],R),Y=C(D.args[1],R);if(D.op==="+"){if(vn(J)&&i(J.value))return Y;if(vn(Y)&&i(Y.value))return J;Br(Y)&&Y.isUnary()&&Y.op==="-"&&(Y=Y.args[0],D=new y("-","subtract",[J,Y]))}if(D.op==="-")return Br(Y)&&Y.isUnary()&&Y.op==="-"?C(new y("+","add",[J,Y.args[0]]),R):vn(J)&&i(J.value)?C(new y("-","unaryMinus",[Y])):vn(Y)&&i(Y.value)?J:new y(D.op,D.fn,[J,Y]);if(D.op==="*"){if(vn(J)){if(i(J.value))return b;if(r(J.value,1))return Y}if(vn(Y)){if(i(Y.value))return b;if(r(Y.value,1))return J;if(N(D,$))return new y(D.op,D.fn,[Y,J],D.implicit)}return new y(D.op,D.fn,[J,Y],D.implicit)}if(D.op==="/")return vn(J)&&i(J.value)?b:vn(Y)&&r(Y.value,1)?J:new y(D.op,D.fn,[J,Y]);if(D.op==="^"&&vn(Y)){if(i(Y.value))return g;if(r(Y.value,1))return J}if(D.op==="and"){if(vn(J))if(J.value){if(M(Y))return Y;if(vn(Y))return Y.value?w:x}else return x;if(vn(Y))if(Y.value){if(M(J))return J}else return x}if(D.op==="or"){if(vn(J)){if(J.value)return w;if(M(Y))return Y}if(vn(Y)){if(Y.value)return w;if(M(J))return J}}return new y(D.op,D.fn,[J,Y])}if(Br(D))return new y(D.op,D.fn,D.args.map(ce=>C(ce,R)));if(po(D))return new f(D.items.map(ce=>C(ce,R)));if(Xc(D))return new c(C(D.object,R),C(D.index,R));if(Xd(D))return new m(D.dimensions.map(ce=>C(ce,R)));if(wy(D)){var ee={};for(var ae in D.properties)ee[ae]=C(D.properties[ae],R);return new v(ee)}return D}return e(W5,{Node:C,"Node,Object":C})}),QSe="resolve",e_e=["typed","parse","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode"],t_e=ue(QSe,e_e,n=>{var{typed:e,parse:t,ConstantNode:r,FunctionNode:i,OperatorNode:s,ParenthesisNode:o}=n;function a(l,u){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Set;if(!u)return l;if(oi(l)){if(c.has(l.name)){var f=Array.from(c).join(", ");throw new ReferenceError("recursive loop of variable definitions among {".concat(f,"}"))}var d=u.get(l.name);if(In(d)){var h=new Set(c);return h.add(l.name),a(d,u,h)}else return typeof d=="number"?t(String(d)):d!==void 0?new r(d):l}else if(Br(l)){var m=l.args.map(function(y){return a(y,u,c)});return new s(l.op,l.fn,m,l.implicit)}else{if(Pl(l))return new o(a(l.content,u,c));if(Cu(l)){var v=l.args.map(function(y){return a(y,u,c)});return new i(l.name,v)}}return l.map(y=>a(y,u,c))}return e("resolve",{Node:a,"Node, Map | null | undefined":a,"Node, Object":(l,u)=>a(l,Up(u)),"Array | Matrix":e.referToSelf(l=>u=>u.map(c=>l(c))),"Array | Matrix, null | undefined":e.referToSelf(l=>u=>u.map(c=>l(c))),"Array, Object":e.referTo("Array,Map",l=>(u,c)=>l(u,Up(c))),"Matrix, Object":e.referTo("Matrix,Map",l=>(u,c)=>l(u,Up(c))),"Array | Matrix, Map":e.referToSelf(l=>(u,c)=>u.map(f=>l(f,c)))})}),j5="symbolicEqual",n_e=["parse","simplify","typed","OperatorNode"],r_e=ue(j5,n_e,n=>{var{parse:e,simplify:t,typed:r,OperatorNode:i}=n;function s(o,a){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=new i("-","subtract",[o,a]),c=t(u,{},l);return vn(c)&&!c.value}return r(j5,{"Node, Node":s,"Node, Node, Object":s})}),G5="derivative",i_e=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],s_e=ue(G5,i_e,n=>{var{typed:e,config:t,parse:r,simplify:i,equal:s,isZero:o,numeric:a,ConstantNode:l,FunctionNode:u,OperatorNode:c,ParenthesisNode:f,SymbolNode:d}=n;function h(b,g){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{simplify:!0},x={};y(x,b,g.name);var M=p(b,x);return w.simplify?i(M):M}e.addConversion({from:"identifier",to:"SymbolNode",convert:r});var m=e(G5,{"Node, SymbolNode":h,"Node, SymbolNode, Object":h});e.removeConversion({from:"identifier",to:"SymbolNode",convert:r}),m._simplify=!0,m.toTex=function(b){return v.apply(null,b.args)};var v=e("_derivTex",{"Node, SymbolNode":function(g,w){return vn(g)&&Wn(g.value)==="string"?v(r(g.value).toString(),w.toString(),1):v(g.toTex(),w.toString(),1)},"Node, ConstantNode":function(g,w){if(Wn(w.value)==="string")return v(g,r(w.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(g,w,x){return v(g.toString(),w.name,x.value)},"string, string, number":function(g,w,x){var M;return x===1?M="{d\\over d"+w+"}":M="{d^{"+x+"}\\over d"+w+"^{"+x+"}}",M+"\\left[".concat(g,"\\right]")}}),y=e("constTag",{"Object, ConstantNode, string":function(g,w){return g[w]=!0,!0},"Object, SymbolNode, string":function(g,w,x){return w.name!==x?(g[w]=!0,!0):!1},"Object, ParenthesisNode, string":function(g,w,x){return y(g,w.content,x)},"Object, FunctionAssignmentNode, string":function(g,w,x){return w.params.includes(x)?y(g,w.expr,x):(g[w]=!0,!0)},"Object, FunctionNode | OperatorNode, string":function(g,w,x){if(w.args.length>0){for(var M=y(g,w.args[0],x),A=1;A<w.args.length;++A)M=y(g,w.args[A],x)&&M;if(M)return g[w]=!0,!0}return!1}}),p=e("_derivative",{"ConstantNode, Object":function(g){return S(0)},"SymbolNode, Object":function(g,w){return w[g]!==void 0?S(0):S(1)},"ParenthesisNode, Object":function(g,w){return new f(p(g.content,w))},"FunctionAssignmentNode, Object":function(g,w){return w[g]!==void 0?S(0):p(g.expr,w)},"FunctionNode, Object":function(g,w){if(w[g]!==void 0)return S(0);var x=g.args[0],M,A=!1,N=!1,C;switch(g.name){case"cbrt":A=!0,C=new c("*","multiply",[S(3),new c("^","pow",[x,new c("/","divide",[S(2),S(3)])])]);break;case"sqrt":case"nthRoot":if(g.args.length===1)A=!0,C=new c("*","multiply",[S(2),new u("sqrt",[x])]);else if(g.args.length===2)return M=new c("/","divide",[S(1),g.args[1]]),w[M]=w[g.args[1]],p(new c("^","pow",[x,M]),w);break;case"log10":M=S(10);case"log":if(!M&&g.args.length===1)C=x.clone(),A=!0;else if(g.args.length===1&&M||g.args.length===2&&w[g.args[1]]!==void 0)C=new c("*","multiply",[x.clone(),new u("log",[M||g.args[1]])]),A=!0;else if(g.args.length===2)return p(new c("/","divide",[new u("log",[x]),new u("log",[g.args[1]])]),w);break;case"pow":if(g.args.length===2)return w[M]=w[g.args[1]],p(new c("^","pow",[x,g.args[1]]),w);break;case"exp":C=new u("exp",[x.clone()]);break;case"sin":C=new u("cos",[x.clone()]);break;case"cos":C=new c("-","unaryMinus",[new u("sin",[x.clone()])]);break;case"tan":C=new c("^","pow",[new u("sec",[x.clone()]),S(2)]);break;case"sec":C=new c("*","multiply",[g,new u("tan",[x.clone()])]);break;case"csc":N=!0,C=new c("*","multiply",[g,new u("cot",[x.clone()])]);break;case"cot":N=!0,C=new c("^","pow",[new u("csc",[x.clone()]),S(2)]);break;case"asin":A=!0,C=new u("sqrt",[new c("-","subtract",[S(1),new c("^","pow",[x.clone(),S(2)])])]);break;case"acos":A=!0,N=!0,C=new u("sqrt",[new c("-","subtract",[S(1),new c("^","pow",[x.clone(),S(2)])])]);break;case"atan":A=!0,C=new c("+","add",[new c("^","pow",[x.clone(),S(2)]),S(1)]);break;case"asec":A=!0,C=new c("*","multiply",[new u("abs",[x.clone()]),new u("sqrt",[new c("-","subtract",[new c("^","pow",[x.clone(),S(2)]),S(1)])])]);break;case"acsc":A=!0,N=!0,C=new c("*","multiply",[new u("abs",[x.clone()]),new u("sqrt",[new c("-","subtract",[new c("^","pow",[x.clone(),S(2)]),S(1)])])]);break;case"acot":A=!0,N=!0,C=new c("+","add",[new c("^","pow",[x.clone(),S(2)]),S(1)]);break;case"sinh":C=new u("cosh",[x.clone()]);break;case"cosh":C=new u("sinh",[x.clone()]);break;case"tanh":C=new c("^","pow",[new u("sech",[x.clone()]),S(2)]);break;case"sech":N=!0,C=new c("*","multiply",[g,new u("tanh",[x.clone()])]);break;case"csch":N=!0,C=new c("*","multiply",[g,new u("coth",[x.clone()])]);break;case"coth":N=!0,C=new c("^","pow",[new u("csch",[x.clone()]),S(2)]);break;case"asinh":A=!0,C=new u("sqrt",[new c("+","add",[new c("^","pow",[x.clone(),S(2)]),S(1)])]);break;case"acosh":A=!0,C=new u("sqrt",[new c("-","subtract",[new c("^","pow",[x.clone(),S(2)]),S(1)])]);break;case"atanh":A=!0,C=new c("-","subtract",[S(1),new c("^","pow",[x.clone(),S(2)])]);break;case"asech":A=!0,N=!0,C=new c("*","multiply",[x.clone(),new u("sqrt",[new c("-","subtract",[S(1),new c("^","pow",[x.clone(),S(2)])])])]);break;case"acsch":A=!0,N=!0,C=new c("*","multiply",[new u("abs",[x.clone()]),new u("sqrt",[new c("+","add",[new c("^","pow",[x.clone(),S(2)]),S(1)])])]);break;case"acoth":A=!0,N=!0,C=new c("-","subtract",[S(1),new c("^","pow",[x.clone(),S(2)])]);break;case"abs":C=new c("/","divide",[new u(new d("abs"),[x.clone()]),x.clone()]);break;case"gamma":default:throw new Error('Cannot process function "'+g.name+'" in derivative: the function is not supported, undefined, or the number of arguments passed to it are not supported')}var T,R;A?(T="/",R="divide"):(T="*",R="multiply");var $=p(x,w);return N&&($=new c("-","unaryMinus",[$])),new c(T,R,[$,C])},"OperatorNode, Object":function(g,w){if(w[g]!==void 0)return S(0);if(g.op==="+")return new c(g.op,g.fn,g.args.map(function(z){return p(z,w)}));if(g.op==="-"){if(g.isUnary())return new c(g.op,g.fn,[p(g.args[0],w)]);if(g.isBinary())return new c(g.op,g.fn,[p(g.args[0],w),p(g.args[1],w)])}if(g.op==="*"){var x=g.args.filter(function(z){return w[z]!==void 0});if(x.length>0){var M=g.args.filter(function(z){return w[z]===void 0}),A=M.length===1?M[0]:new c("*","multiply",M),N=x.concat(p(A,w));return new c("*","multiply",N)}return new c("+","add",g.args.map(function(z){return new c("*","multiply",g.args.map(function(D){return D===z?p(D,w):D.clone()}))}))}if(g.op==="/"&&g.isBinary()){var C=g.args[0],T=g.args[1];return w[T]!==void 0?new c("/","divide",[p(C,w),T]):w[C]!==void 0?new c("*","multiply",[new c("-","unaryMinus",[C]),new c("/","divide",[p(T,w),new c("^","pow",[T.clone(),S(2)])])]):new c("/","divide",[new c("-","subtract",[new c("*","multiply",[p(C,w),T.clone()]),new c("*","multiply",[C.clone(),p(T,w)])]),new c("^","pow",[T.clone(),S(2)])])}if(g.op==="^"&&g.isBinary()){var R=g.args[0],$=g.args[1];if(w[R]!==void 0)return vn(R)&&(o(R.value)||s(R.value,1))?S(0):new c("*","multiply",[g,new c("*","multiply",[new u("log",[R.clone()]),p($.clone(),w)])]);if(w[$]!==void 0){if(vn($)){if(o($.value))return S(0);if(s($.value,1))return p(R,w)}var B=new c("^","pow",[R.clone(),new c("-","subtract",[$,S(1)])]);return new c("*","multiply",[$.clone(),new c("*","multiply",[p(R,w),B])])}return new c("*","multiply",[new c("^","pow",[R.clone(),$.clone()]),new c("+","add",[new c("*","multiply",[p(R,w),new c("/","divide",[$.clone(),R.clone()])]),new c("*","multiply",[p($,w),new u("log",[R.clone()])])])])}throw new Error('Cannot process operator "'+g.op+'" in derivative: the operator is not supported, undefined, or the number of arguments passed to it are not supported')}});function S(b,g){return new l(a(b,t.number))}return m}),q5="rationalize",o_e=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplifyConstant","simplifyCore","simplify","?bignumber","?fraction","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode","ParenthesisNode"],a_e=ue(q5,o_e,n=>{var{config:e,typed:t,equal:r,isZero:i,add:s,subtract:o,multiply:a,divide:l,pow:u,parse:c,simplifyConstant:f,simplifyCore:d,simplify:h,fraction:m,bignumber:v,mathWithTransform:y,matrix:p,AccessorNode:S,ArrayNode:b,ConstantNode:g,FunctionNode:w,IndexNode:x,ObjectNode:M,OperatorNode:A,SymbolNode:N,ParenthesisNode:C}=n;function T(D){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,L=$(),q=R(D,I,!0,L.firstRules),Z=q.variables.length,J={exactFractions:!1},Y={exactFractions:!0};if(D=q.expression,Z>=1){D=B(D);var ee,ae,ce=!0,pe=!1;D=h(D,L.firstRules,{},J);for(var we;ae=ce?L.distrDivRules:L.sucDivRules,D=h(D,ae,{},Y),ce=!ce,we=D.toString(),we!==ee;)pe=!0,ee=we;pe&&(D=h(D,L.firstRulesAgain,{},J)),D=h(D,L.finalRules,{},J)}var me=[],Ae={};return D.type==="OperatorNode"&&D.isBinary()&&D.op==="/"?(Z===1&&(D.args[0]=z(D.args[0],me),D.args[1]=z(D.args[1])),U&&(Ae.numerator=D.args[0],Ae.denominator=D.args[1])):(Z===1&&(D=z(D,me)),U&&(Ae.numerator=D,Ae.denominator=null)),U?(Ae.coefficients=me,Ae.variables=q.variables,Ae.expression=D,Ae):D}return t(q5,{Node:T,"Node, boolean":(D,I)=>T(D,{},I),"Node, Object":T,"Node, Object, boolean":T});function R(D,I,U,L){var q=[],Z=h(D,L,I,{exactFractions:!1});U=!!U;var J="+-*"+(U?"/":"");ee(Z);var Y={};return Y.expression=Z,Y.variables=q,Y;function ee(ae){var ce=ae.type;if(ce==="FunctionNode")throw new Error("There is an unsolved function call");if(ce==="OperatorNode")if(ae.op==="^"){if(ae.args[1].type!=="ConstantNode"||!kt(parseFloat(ae.args[1].value)))throw new Error("There is a non-integer exponent");ee(ae.args[0])}else{if(!J.includes(ae.op))throw new Error("Operator "+ae.op+" invalid in polynomial expression");for(var pe=0;pe<ae.args.length;pe++)ee(ae.args[pe])}else if(ce==="SymbolNode"){var we=ae.name,me=q.indexOf(we);me===-1&&q.push(we)}else if(ce==="ParenthesisNode")ee(ae.content);else if(ce!=="ConstantNode")throw new Error("type "+ce+" is not allowed in polynomial expression")}}function $(){var D=[d,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},f,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],I=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],U=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],L=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],q={};return q.firstRules=D.concat(I,L),q.distrDivRules=U,q.sucDivRules=L,q.firstRulesAgain=D.concat(I),q.finalRules=[d,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},f,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],q}function B(D,I,U){var L=D.type,q=arguments.length>1;if(L==="OperatorNode"&&D.isBinary()){var Z=!1,J;if(D.op==="^"&&(D.args[0].type==="ParenthesisNode"||D.args[0].type==="OperatorNode")&&D.args[1].type==="ConstantNode"&&(J=parseFloat(D.args[1].value),Z=J>=2&&kt(J)),Z){if(J>2){var Y=D.args[0],ee=new A("^","pow",[D.args[0].cloneDeep(),new g(J-1)]);D=new A("*","multiply",[Y,ee])}else D=new A("*","multiply",[D.args[0],D.args[0].cloneDeep()]);q&&(U==="content"?I.content=D:I.args[U]=D)}}if(L==="ParenthesisNode")B(D.content,D,"content");else if(L!=="ConstantNode"&&L!=="SymbolNode")for(var ae=0;ae<D.args.length;ae++)B(D.args[ae],D,ae);if(!q)return D}function z(D,I){I===void 0&&(I=[]),I[0]=0;var U={};U.cte=1,U.oper="+",U.fire="";var L=0,q="";we(D,null,U),L=I.length-1;for(var Z=!0,J,Y=L;Y>=0;Y--)if(I[Y]!==0){var ee=new g(Z?I[Y]:Math.abs(I[Y])),ae=I[Y]<0?"-":"+";if(Y>0){var ce=new N(q);if(Y>1){var pe=new g(Y);ce=new A("^","pow",[ce,pe])}I[Y]===-1&&Z?ee=new A("-","unaryMinus",[ce]):Math.abs(I[Y])===1?ee=ce:ee=new A("*","multiply",[ee,ce])}Z?J=ee:ae==="+"?J=new A("+","add",[J,ee]):J=new A("-","subtract",[J,ee]),Z=!1}if(Z)return new g(0);return J;function we(me,Ae,Ee){var re=me.type;if(re==="FunctionNode")throw new Error("There is an unsolved function call");if(re==="OperatorNode"){if(!"+-*^".includes(me.op))throw new Error("Operator "+me.op+" invalid");if(Ae!==null){if((me.fn==="unaryMinus"||me.fn==="pow")&&Ae.fn!=="add"&&Ae.fn!=="subtract"&&Ae.fn!=="multiply")throw new Error("Invalid "+me.op+" placing");if((me.fn==="subtract"||me.fn==="add"||me.fn==="multiply")&&Ae.fn!=="add"&&Ae.fn!=="subtract")throw new Error("Invalid "+me.op+" placing");if((me.fn==="subtract"||me.fn==="add"||me.fn==="unaryMinus")&&Ee.noFil!==0)throw new Error("Invalid "+me.op+" placing")}(me.op==="^"||me.op==="*")&&(Ee.fire=me.op);for(var Pe=0;Pe<me.args.length;Pe++)me.fn==="unaryMinus"&&(Ee.oper="-"),(me.op==="+"||me.fn==="subtract")&&(Ee.fire="",Ee.cte=1,Ee.oper=Pe===0?"+":me.op),Ee.noFil=Pe,we(me.args[Pe],me,Ee)}else if(re==="SymbolNode"){if(me.name!==q&&q!=="")throw new Error("There is more than one variable");if(q=me.name,Ae===null){I[1]=1;return}if(Ae.op==="^"&&Ee.noFil!==0)throw new Error("In power the variable should be the first parameter");if(Ae.op==="*"&&Ee.noFil!==1)throw new Error("In multiply the variable should be the second parameter");(Ee.fire===""||Ee.fire==="*")&&(L<1&&(I[1]=0),I[1]+=Ee.cte*(Ee.oper==="+"?1:-1),L=Math.max(1,L))}else if(re==="ConstantNode"){var Re=parseFloat(me.value);if(Ae===null){I[0]=Re;return}if(Ae.op==="^"){if(Ee.noFil!==1)throw new Error("Constant cannot be powered");if(!kt(Re)||Re<=0)throw new Error("Non-integer exponent is not allowed");for(var te=L+1;te<Re;te++)I[te]=0;Re>L&&(I[Re]=0),I[Re]+=Ee.cte*(Ee.oper==="+"?1:-1),L=Math.max(Re,L);return}Ee.cte=Re,Ee.fire===""&&(I[0]+=Ee.cte*(Ee.oper==="+"?1:-1))}else throw new Error("Type "+re+" is not allowed")}}}),X5="zpk2tf",l_e=["typed","add","multiply","Complex","number"],u_e=ue(X5,l_e,n=>{var{typed:e,add:t,multiply:r,Complex:i,number:s}=n;return e(X5,{"Array,Array,number":function(u,c,f){return o(u,c,f)},"Array,Array":function(u,c){return o(u,c,1)},"Matrix,Matrix,number":function(u,c,f){return o(u.valueOf(),c.valueOf(),f)},"Matrix,Matrix":function(u,c){return o(u.valueOf(),c.valueOf(),1)}});function o(l,u,c){l.some(S=>S.type==="BigNumber")&&(l=l.map(S=>s(S))),u.some(S=>S.type==="BigNumber")&&(u=u.map(S=>s(S)));for(var f=[i(1,0)],d=[i(1,0)],h=0;h<l.length;h++){var m=l[h];typeof m=="number"&&(m=i(m,0)),f=a(f,[i(1,0),i(-m.re,-m.im)])}for(var v=0;v<u.length;v++){var y=u[v];typeof y=="number"&&(y=i(y,0)),d=a(d,[i(1,0),i(-y.re,-y.im)])}for(var p=0;p<f.length;p++)f[p]=r(f[p],c);return[f,d]}function a(l,u){for(var c=[],f=0;f<l.length+u.length-1;f++){c[f]=i(0,0);for(var d=0;d<l.length;d++)f-d>=0&&f-d<u.length&&(c[f]=t(c[f],r(l[d],u[f-d])))}return c}}),Y5="freqz",c_e=["typed","add","multiply","Complex","divide","matrix"],f_e=ue(Y5,c_e,n=>{var{typed:e,add:t,multiply:r,Complex:i,divide:s,matrix:o}=n;return e(Y5,{"Array, Array":function(c,f){var d=l(512);return a(c,f,d)},"Array, Array, Array":function(c,f,d){return a(c,f,d)},"Array, Array, number":function(c,f,d){if(d<0)throw new Error("w must be a positive number");var h=l(d);return a(c,f,h)},"Matrix, Matrix":function(c,f){var d=l(512),{w:h,h:m}=a(c.valueOf(),f.valueOf(),d);return{w:o(h),h:o(m)}},"Matrix, Matrix, Matrix":function(c,f,d){var{h}=a(c.valueOf(),f.valueOf(),d.valueOf());return{h:o(h),w:o(d)}},"Matrix, Matrix, number":function(c,f,d){if(d<0)throw new Error("w must be a positive number");var h=l(d),{h:m}=a(c.valueOf(),f.valueOf(),h);return{h:o(m),w:o(h)}}});function a(u,c,f){for(var d=[],h=[],m=0;m<f.length;m++){for(var v=i(0,0),y=i(0,0),p=0;p<u.length;p++)v=t(v,r(u[p],i(Math.cos(-p*f[m]),Math.sin(-p*f[m]))));for(var S=0;S<c.length;S++)y=t(y,r(c[S],i(Math.cos(-S*f[m]),Math.sin(-S*f[m]))));d.push(v),h.push(y)}for(var b=[],g=0;g<d.length;g++)b.push(s(d[g],h[g]));return{h:b,w:f}}function l(u){for(var c=[],f=0;f<u;f++)c.push(f/u*Math.PI);return c}}),d_e="reviver",h_e=["classes"],p_e=ue(d_e,h_e,n=>{var{classes:e}=n;return function(r,i){var s=e[i&&i.mathjs];return s&&typeof s.fromJSON=="function"?s.fromJSON(i):i}}),m_e="replacer",g_e=[],v_e=ue(m_e,g_e,()=>function(e,t){return typeof t=="number"&&(!isFinite(t)||isNaN(t))?{mathjs:"number",value:String(t)}:t}),y_e="12.4.3",x_e=ue("true",[],()=>!0),b_e=ue("false",[],()=>!1),w_e=ue("null",[],()=>null),S_e=Ro("Infinity",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?new t(1/0):1/0}),__e=Ro("NaN",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?new t(NaN):NaN}),E_e=Ro("pi",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?mR(t):Fle}),M_e=Ro("tau",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?sme(t):Ble}),C_e=Ro("e",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?rme(t):zle}),A_e=Ro("phi",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?ime(t):Ule}),T_e=Ro("LN2",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?new t(2).ln():Math.LN2}),D_e=Ro("LN10",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?new t(10).ln():Math.LN10}),N_e=Ro("LOG2E",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?new t(1).div(new t(2).ln()):Math.LOG2E}),P_e=Ro("LOG10E",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?new t(1).div(new t(10).ln()):Math.LOG10E}),R_e=Ro("SQRT1_2",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?new t("0.5").sqrt():Math.SQRT1_2}),O_e=Ro("SQRT2",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?new t(2).sqrt():Math.SQRT2}),k_e=Ro("i",["Complex"],n=>{var{Complex:e}=n;return e.I}),I_e=ue("PI",["pi"],n=>{var{pi:e}=n;return e}),L_e=ue("E",["e"],n=>{var{e}=n;return e}),F_e=ue("version",[],()=>y_e);function Ro(n,e,t){return ue(n,e,t,{recreateOnConfigChange:!0})}var B_e=en("speedOfLight","299792458","m s^-1"),z_e=en("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),U_e=en("planckConstant","6.62607015e-34","J s"),$_e=en("reducedPlanckConstant","1.0545718176461565e-34","J s"),V_e=en("magneticConstant","1.25663706212e-6","N A^-2"),H_e=en("electricConstant","8.8541878128e-12","F m^-1"),W_e=en("vacuumImpedance","376.730313667","ohm"),j_e=en("coulomb","8.987551792261171e9","N m^2 C^-2"),G_e=en("elementaryCharge","1.602176634e-19","C"),q_e=en("bohrMagneton","9.2740100783e-24","J T^-1"),X_e=en("conductanceQuantum","7.748091729863649e-5","S"),Y_e=en("inverseConductanceQuantum","12906.403729652257","ohm"),K_e=en("magneticFluxQuantum","2.0678338484619295e-15","Wb"),Z_e=en("nuclearMagneton","5.0507837461e-27","J T^-1"),J_e=en("klitzing","25812.807459304513","ohm"),Q_e=en("bohrRadius","5.29177210903e-11","m"),eEe=en("classicalElectronRadius","2.8179403262e-15","m"),tEe=en("electronMass","9.1093837015e-31","kg"),nEe=en("fermiCoupling","1.1663787e-5","GeV^-2"),rEe=_E("fineStructure",.0072973525693),iEe=en("hartreeEnergy","4.3597447222071e-18","J"),sEe=en("protonMass","1.67262192369e-27","kg"),oEe=en("deuteronMass","3.3435830926e-27","kg"),aEe=en("neutronMass","1.6749271613e-27","kg"),lEe=en("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),uEe=en("rydberg","10973731.568160","m^-1"),cEe=en("thomsonCrossSection","6.6524587321e-29","m^2"),fEe=_E("weakMixingAngle",.2229),dEe=_E("efimovFactor",22.7),hEe=en("atomicMass","1.66053906660e-27","kg"),pEe=en("avogadro","6.02214076e23","mol^-1"),mEe=en("boltzmann","1.380649e-23","J K^-1"),gEe=en("faraday","96485.33212331001","C mol^-1"),vEe=en("firstRadiation","3.7417718521927573e-16","W m^2"),yEe=en("loschmidt","2.686780111798444e25","m^-3"),xEe=en("gasConstant","8.31446261815324","J K^-1 mol^-1"),bEe=en("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),wEe=en("molarVolume","0.022413969545014137","m^3 mol^-1"),SEe=_E("sackurTetrode",-1.16487052358),_Ee=en("secondRadiation","0.014387768775039337","m K"),EEe=en("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),MEe=en("wienDisplacement","2.897771955e-3","m K"),CEe=en("molarMass","0.99999999965e-3","kg mol^-1"),AEe=en("molarMassC12","11.9999999958e-3","kg mol^-1"),TEe=en("gravity","9.80665","m s^-2"),DEe=en("planckLength","1.616255e-35","m"),NEe=en("planckMass","2.176435e-8","kg"),PEe=en("planckTime","5.391245e-44","s"),REe=en("planckCharge","1.87554603778e-18","C"),OEe=en("planckTemperature","1.416785e+32","K");function en(n,e,t){var r=["config","Unit","BigNumber"];return ue(n,r,i=>{var{config:s,Unit:o,BigNumber:a}=i,l=s.number==="BigNumber"?new a(e):parseFloat(e),u=new o(l,t);return u.fixPrefix=!0,u})}function _E(n,e){var t=["config","BigNumber"];return ue(n,t,r=>{var{config:i,BigNumber:s}=r;return i.number==="BigNumber"?new s(e):e})}var kEe="apply",IEe=["typed","isInteger"],LEe=ue(kEe,IEe,n=>{var{typed:e,isInteger:t}=n,r=uR({typed:e,isInteger:t});return e("apply",{"...any":function(s){var o=s[1];tn(o)?s[1]=o-1:Jt(o)&&(s[1]=o.minus(1));try{return r.apply(null,s)}catch(a){throw Is(a)}}})},{isTransformFunction:!0}),FEe="column",BEe=["typed","Index","matrix","range"],zEe=ue(FEe,BEe,n=>{var{typed:e,Index:t,matrix:r,range:i}=n,s=GG({typed:e,Index:t,matrix:r,range:i});return e("column",{"...any":function(a){var l=a.length-1,u=a[l];tn(u)&&(a[l]=u-1);try{return s.apply(null,a)}catch(c){throw Is(c)}}})},{isTransformFunction:!0});function ER(n,e,t){var r=n.filter(function(l){return oi(l)&&!(l.name in e)&&!t.has(l.name)})[0];if(!r)throw new Error('No undefined variable found in inline expression "'+n+'"');var i=r.name,s=new Map,o=new gj(t,s,new Set([i])),a=n.compile();return function(u){return s.set(i,u),a.evaluate(o)}}var UEe="filter",$Ee=["typed"],VEe=ue(UEe,$Ee,n=>{var{typed:e}=n;function t(i,s,o){var a,l;return i[0]&&(a=i[0].compile().evaluate(o)),i[1]&&(oi(i[1])||Pm(i[1])?l=i[1].compile().evaluate(o):l=ER(i[1],s,o)),r(a,l)}t.rawArgs=!0;var r=e("filter",{"Array, function":K5,"Matrix, function":function(s,o){return s.create(K5(s.toArray(),o))},"Array, RegExp":kS,"Matrix, RegExp":function(s,o){return s.create(kS(s.toArray(),o))}});return t},{isTransformFunction:!0});function K5(n,e){return zj(n,function(t,r,i){return Lm(e,t,[r+1],i,"filter")})}var HEe="forEach",WEe=["typed"],jEe=ue(HEe,WEe,n=>{var{typed:e}=n;function t(i,s,o){var a,l;return i[0]&&(a=i[0].compile().evaluate(o)),i[1]&&(oi(i[1])||Pm(i[1])?l=i[1].compile().evaluate(o):l=ER(i[1],s,o)),r(a,l)}t.rawArgs=!0;var r=e("forEach",{"Array | Matrix, function":function(s,o){var a=function l(u,c){if(Array.isArray(u))vE(u,function(f,d){l(f,c.concat(d+1))});else return Lm(o,u,c,s,"forEach")};a(s.valueOf(),[])}});return t},{isTransformFunction:!0}),GEe="index",qEe=["Index","getMatrixDataType"],XEe=ue(GEe,qEe,n=>{var{Index:e,getMatrixDataType:t}=n;return function(){for(var i=[],s=0,o=arguments.length;s<o;s++){var a=arguments[s];if(fE(a))a.start--,a.end-=a.step>0?0:2;else if(a&&a.isSet===!0)a=a.map(function(u){return u-1});else if(_n(a)||$t(a))t(a)!=="boolean"&&(a=a.map(function(u){return u-1}));else if(tn(a))a--;else if(Jt(a))a=a.toNumber()-1;else if(typeof a!="string")throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");i[s]=a}var l=new e;return e.apply(l,i),l}},{isTransformFunction:!0}),YEe="map",KEe=["typed"],ZEe=ue(YEe,KEe,n=>{var{typed:e}=n;function t(i,s,o){var a,l;return i[0]&&(a=i[0].compile().evaluate(o)),i[1]&&(oi(i[1])||Pm(i[1])?l=i[1].compile().evaluate(o):l=ER(i[1],s,o)),r(a,l)}t.rawArgs=!0;var r=e("map",{"Array, function":function(s,o){return Z5(s,o,s)},"Matrix, function":function(s,o){return s.create(Z5(s.valueOf(),o,s))}});return t},{isTransformFunction:!0});function Z5(n,e,t){function r(i,s){return Array.isArray(i)?vu(i,function(o,a){return r(o,s.concat(a+1))}):Lm(e,i,s,t,"map")}return r(n,[])}function mf(n){if(n.length===2&&To(n[0])){n=n.slice();var e=n[1];tn(e)?n[1]=e-1:Jt(e)&&(n[1]=e.minus(1))}return n}var JEe="max",QEe=["typed","config","numeric","larger"],eMe=ue(JEe,QEe,n=>{var{typed:e,config:t,numeric:r,larger:i}=n,s=rq({typed:e,config:t,numeric:r,larger:i});return e("max",{"...any":function(a){a=mf(a);try{return s.apply(null,a)}catch(l){throw Is(l)}}})},{isTransformFunction:!0}),tMe="mean",nMe=["typed","add","divide"],rMe=ue(tMe,nMe,n=>{var{typed:e,add:t,divide:r}=n,i=dq({typed:e,add:t,divide:r});return e("mean",{"...any":function(o){o=mf(o);try{return i.apply(null,o)}catch(a){throw Is(a)}}})},{isTransformFunction:!0}),iMe="min",sMe=["typed","config","numeric","smaller"],oMe=ue(iMe,sMe,n=>{var{typed:e,config:t,numeric:r,smaller:i}=n,s=iq({typed:e,config:t,numeric:r,smaller:i});return e("min",{"...any":function(a){a=mf(a);try{return s.apply(null,a)}catch(l){throw Is(l)}}})},{isTransformFunction:!0}),aMe="range",lMe=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],uMe=ue(aMe,lMe,n=>{var{typed:e,config:t,matrix:r,bignumber:i,smaller:s,smallerEq:o,larger:a,largerEq:l,add:u,isPositive:c}=n,f=KG({typed:e,config:t,matrix:r,bignumber:i,smaller:s,smallerEq:o,larger:a,largerEq:l,add:u,isPositive:c});return e("range",{"...any":function(h){var m=h.length-1,v=h[m];return typeof v!="boolean"&&h.push(!0),f.apply(null,h)}})},{isTransformFunction:!0}),cMe="row",fMe=["typed","Index","matrix","range"],dMe=ue(cMe,fMe,n=>{var{typed:e,Index:t,matrix:r,range:i}=n,s=ZG({typed:e,Index:t,matrix:r,range:i});return e("row",{"...any":function(a){var l=a.length-1,u=a[l];tn(u)&&(a[l]=u-1);try{return s.apply(null,a)}catch(c){throw Is(c)}}})},{isTransformFunction:!0}),hMe="subset",pMe=["typed","matrix","zeros","add"],mMe=ue(hMe,pMe,n=>{var{typed:e,matrix:t,zeros:r,add:i}=n,s=JG({typed:e,matrix:t,zeros:r,add:i});return e("subset",{"...any":function(a){try{return s.apply(null,a)}catch(l){throw Is(l)}}})},{isTransformFunction:!0}),gMe="concat",vMe=["typed","matrix","isInteger"],yMe=ue(gMe,vMe,n=>{var{typed:e,matrix:t,isInteger:r}=n,i=jG({typed:e,matrix:t,isInteger:r});return e("concat",{"...any":function(o){var a=o.length-1,l=o[a];tn(l)?o[a]=l-1:Jt(l)&&(o[a]=l.minus(1));try{return i.apply(null,o)}catch(u){throw Is(u)}}})},{isTransformFunction:!0}),J5="diff",xMe=["typed","matrix","subtract","number","bignumber"],bMe=ue(J5,xMe,n=>{var{typed:e,matrix:t,subtract:r,number:i,bignumber:s}=n,o=qG({typed:e,matrix:t,subtract:r,number:i,bignumber:s});return e(J5,{"...any":function(l){l=mf(l);try{return o.apply(null,l)}catch(u){throw Is(u)}}})},{isTransformFunction:!0}),wMe="std",SMe=["typed","map","sqrt","variance"],_Me=ue(wMe,SMe,n=>{var{typed:e,map:t,sqrt:r,variance:i}=n,s=mq({typed:e,map:t,sqrt:r,variance:i});return e("std",{"...any":function(a){a=mf(a);try{return s.apply(null,a)}catch(l){throw Is(l)}}})},{isTransformFunction:!0}),Q5="sum",EMe=["typed","config","add","numeric"],MMe=ue(Q5,EMe,n=>{var{typed:e,config:t,add:r,numeric:i}=n,s=cq({typed:e,config:t,add:r,numeric:i});return e(Q5,{"...any":function(a){a=mf(a);try{return s.apply(null,a)}catch(l){throw Is(l)}}})},{isTransformFunction:!0}),CMe="quantileSeq",AMe=["typed","bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger"],TMe=ue(CMe,AMe,n=>{var{typed:e,bignumber:t,add:r,subtract:i,divide:s,multiply:o,partitionSelect:a,compare:l,isInteger:u,smaller:c,smallerEq:f,larger:d}=n,h=pq({typed:e,bignumber:t,add:r,subtract:i,divide:s,multiply:o,partitionSelect:a,compare:l,isInteger:u,smaller:c,smallerEq:f,larger:d});return e("quantileSeq",{"Array | Matrix, number | BigNumber":h,"Array | Matrix, number | BigNumber, number":(v,y,p)=>h(v,y,m(p)),"Array | Matrix, number | BigNumber, boolean":h,"Array | Matrix, number | BigNumber, boolean, number":(v,y,p,S)=>h(v,y,p,m(S)),"Array | Matrix, Array | Matrix":h,"Array | Matrix, Array | Matrix, number":(v,y,p)=>h(v,y,m(p)),"Array | Matrix, Array | Matrix, boolean":h,"Array | Matrix, Array | Matrix, boolean, number":(v,y,p,S)=>h(v,y,p,m(S))});function m(v){return mf([[],v])[1]}},{isTransformFunction:!0}),ez="cumsum",DMe=["typed","add","unaryPlus"],NMe=ue(ez,DMe,n=>{var{typed:e,add:t,unaryPlus:r}=n,i=fq({typed:e,add:t,unaryPlus:r});return e(ez,{"...any":function(o){if(o.length===2&&To(o[0])){var a=o[1];tn(a)?o[1]=a-1:Jt(a)&&(o[1]=a.minus(1))}try{return i.apply(null,o)}catch(l){throw Is(l)}}})},{isTransformFunction:!0}),tz="variance",PMe=["typed","add","subtract","multiply","divide","apply","isNaN"],RMe=ue(tz,PMe,n=>{var{typed:e,add:t,subtract:r,multiply:i,divide:s,apply:o,isNaN:a}=n,l=hq({typed:e,add:t,subtract:r,multiply:i,divide:s,apply:o,isNaN:a});return e(tz,{"...any":function(c){c=mf(c);try{return l.apply(null,c)}catch(f){throw Is(f)}}})},{isTransformFunction:!0}),nz="print",OMe=["typed","matrix","zeros","add"],kMe=ue(nz,OMe,n=>{var{typed:e,matrix:t,zeros:r,add:i}=n,s=tq({typed:e,matrix:t,zeros:r,add:i});return e(nz,{"string, Object | Array":function(l,u){return s(o(l),u)},"string, Object | Array, number | Object":function(l,u,c){return s(o(l),u,c)}});function o(a){return a.replace(eq,l=>{var u=l.slice(1).split("."),c=u.map(function(f){return!isNaN(f)&&f.length>0?parseInt(f)-1:f});return"$"+c.join(".")})}},{isTransformFunction:!0}),IMe="and",LMe=["typed","matrix","zeros","add","equalScalar","not","concat"],FMe=ue(IMe,LMe,n=>{var{typed:e,matrix:t,equalScalar:r,zeros:i,not:s,concat:o}=n,a=nq({typed:e,matrix:t,equalScalar:r,zeros:i,not:s,concat:o});function l(u,c,f){var d=u[0].compile().evaluate(f);if(!To(d)&&!a(d,!0))return!1;var h=u[1].compile().evaluate(f);return a(d,h)}return l.rawArgs=!0,l},{isTransformFunction:!0}),BMe="or",zMe=["typed","matrix","equalScalar","DenseMatrix","concat"],UMe=ue(BMe,zMe,n=>{var{typed:e,matrix:t,equalScalar:r,DenseMatrix:i,concat:s}=n,o=WG({typed:e,matrix:t,equalScalar:r,DenseMatrix:i,concat:s});function a(l,u,c){var f=l[0].compile().evaluate(c);if(!To(f)&&o(f,!1))return!0;var d=l[1].compile().evaluate(c);return o(f,d)}return a.rawArgs=!0,a},{isTransformFunction:!0}),$Me="bitAnd",VMe=["typed","matrix","zeros","add","equalScalar","not","concat"],HMe=ue($Me,VMe,n=>{var{typed:e,matrix:t,equalScalar:r,zeros:i,not:s,concat:o}=n,a=VG({typed:e,matrix:t,equalScalar:r,zeros:i,not:s,concat:o});function l(u,c,f){var d=u[0].compile().evaluate(f);if(!To(d)){if(isNaN(d))return NaN;if(d===0||d===!1)return 0}var h=u[1].compile().evaluate(f);return a(d,h)}return l.rawArgs=!0,l},{isTransformFunction:!0}),WMe="bitOr",jMe=["typed","matrix","equalScalar","DenseMatrix","concat"],GMe=ue(WMe,jMe,n=>{var{typed:e,matrix:t,equalScalar:r,DenseMatrix:i,concat:s}=n,o=HG({typed:e,matrix:t,equalScalar:r,DenseMatrix:i,concat:s});function a(l,u,c){var f=l[0].compile().evaluate(c);if(!To(f)){if(isNaN(f))return NaN;if(f===-1)return-1;if(f===!0)return 1}var d=l[1].compile().evaluate(c);return o(f,d)}return a.rawArgs=!0,a},{isTransformFunction:!0});const qMe=Object.freeze(Object.defineProperty({__proto__:null,createAbs:Hue,createAccessorNode:Zge,createAcos:gme,createAcosh:yme,createAcot:bme,createAcoth:Sme,createAcsc:Eme,createAcsch:Cme,createAdd:Ige,createAddScalar:que,createAnd:nq,createAndTransform:FMe,createApply:uR,createApplyTransform:LEe,createArg:kfe,createArrayNode:Qge,createAsec:Tme,createAsech:Nme,createAsin:Rme,createAsinh:Ime,createAssignmentNode:rve,createAtan:Bme,createAtan2:Ume,createAtanh:Vme,createAtomicMass:hEe,createAvogadro:pEe,createBellNumbers:LSe,createBigNumberClass:nle,createBignumber:wue,createBin:ghe,createBitAnd:VG,createBitAndTransform:HMe,createBitNot:Afe,createBitOr:HG,createBitOrTransform:GMe,createBitXor:Rfe,createBlockNode:sve,createBohrMagneton:q_e,createBohrRadius:Q_e,createBoltzmann:mEe,createBoolean:yue,createCatalan:BSe,createCbrt:Zue,createCeil:oce,createChain:swe,createChainClass:D0e,createClassicalElectronRadius:eEe,createClone:Rle,createColumn:GG,createColumnTransform:zEe,createCombinations:Xwe,createCombinationsWithRep:Kwe,createCompare:upe,createCompareNatural:hpe,createCompareText:gpe,createCompile:Bve,createComplex:Eue,createComplexClass:ole,createComposition:USe,createConcat:jG,createConcatTransform:yMe,createConditionalNode:ave,createConductanceQuantum:X_e,createConj:Lfe,createConstantNode:mve,createCorr:Gwe,createCos:Wme,createCosh:Gme,createCot:Xme,createCoth:Kme,createCoulomb:j_e,createCount:Yfe,createCreateUnit:pme,createCross:Zfe,createCsc:Jme,createCsch:ege,createCtranspose:Hde,createCube:lce,createCumSum:fq,createCumSumTransform:NMe,createDeepEqual:Ipe,createDenseMatrixClass:Nle,createDerivative:s_e,createDet:awe,createDeuteronMass:oEe,createDiag:Qfe,createDiff:qG,createDiffTransform:bMe,createDistance:Pwe,createDivide:Dwe,createDivideScalar:Nhe,createDot:$ge,createDotDivide:Whe,createDotMultiply:xfe,createDotPow:Vhe,createE:C_e,createEfimovFactor:dEe,createEigs:gwe,createElectricConstant:H_e,createElectronMass:tEe,createElementaryCharge:G_e,createEqual:ype,createEqualScalar:oue,createEqualText:wpe,createErf:rhe,createEvaluate:Uve,createExp:cce,createExpm:ywe,createExpm1:dce,createFactorial:nSe,createFalse:b_e,createFaraday:gEe,createFermiCoupling:nEe,createFft:qde,createFibonacciHeapClass:Qpe,createFilter:nde,createFilterTransform:VEe,createFineStructure:rEe,createFirstRadiation:vEe,createFix:mce,createFlatten:ide,createFloor:zG,createForEach:ode,createForEachTransform:jEe,createFormat:phe,createFraction:Aue,createFractionClass:cle,createFreqz:f_e,createFunctionAssignmentNode:vve,createFunctionNode:kve,createGamma:Jwe,createGasConstant:xEe,createGcd:$ce,createGetMatrixDataType:ude,createGravitationConstant:z_e,createGravity:TEe,createHartreeEnergy:iEe,createHasNumericValue:Yle,createHelp:rwe,createHelpClass:C0e,createHex:bhe,createHypot:Fge,createI:k_e,createIdentity:fde,createIfft:Yde,createIm:Bfe,createImmutableDenseMatrixClass:qpe,createIndex:Gge,createIndexClass:Kpe,createIndexNode:xve,createIndexTransform:XEe,createInfinity:S_e,createIntersect:kwe,createInv:uwe,createInverseConductanceQuantum:Y_e,createInvmod:mfe,createIsInteger:kle,createIsNaN:tue,createIsNegative:jle,createIsNumeric:qle,createIsPositive:Zle,createIsPrime:Mhe,createIsZero:Qle,createKldivergence:iSe,createKlitzing:J_e,createKron:hde,createLN10:D_e,createLN2:T_e,createLOG10E:P_e,createLOG2E:N_e,createLarger:Dpe,createLargerEq:Rpe,createLcm:jce,createLeafCount:VSe,createLeftShift:npe,createLgamma:eSe,createLog:Lhe,createLog10:qce,createLog1p:Bhe,createLog2:Yce,createLoschmidt:yEe,createLsolve:Ghe,createLsolveAll:Khe,createLup:qve,createLusolve:w0e,createLyap:Cwe,createMad:$we,createMagneticConstant:V_e,createMagneticFluxQuantum:K_e,createMap:mde,createMapTransform:ZEe,createMatrix:Due,createMatrixClass:gle,createMatrixFromColumns:Iue,createMatrixFromFunction:Pue,createMatrixFromRows:Oue,createMax:rq,createMaxTransform:eMe,createMean:dq,createMeanTransform:rMe,createMedian:zwe,createMin:iq,createMinTransform:oMe,createMod:UG,createMode:che,createMolarMass:CEe,createMolarMassC12:AEe,createMolarPlanckConstant:bEe,createMolarVolume:wEe,createMultinomial:oSe,createMultiply:efe,createMultiplyScalar:Jce,createNaN:__e,createNeutronMass:aEe,createNode:Yge,createNorm:zge,createNot:Vfe,createNthRoot:nfe,createNthRoots:Uhe,createNuclearMagneton:Z_e,createNull:w_e,createNumber:pue,createNumeric:The,createObjectNode:wve,createOct:yhe,createOnes:bde,createOperatorNode:_ve,createOr:WG,createOrTransform:UMe,createParenthesisNode:Mve,createParse:Lve,createParser:jve,createParserClass:Hve,createPartitionSelect:Upe,createPermutations:lSe,createPhi:A_e,createPi:E_e,createPickRandom:TSe,createPinv:fwe,createPlanckCharge:REe,createPlanckConstant:U_e,createPlanckLength:DEe,createPlanckMass:NEe,createPlanckTemperature:OEe,createPlanckTime:PEe,createPolynomialRoot:_0e,createPow:Rhe,createPrint:tq,createPrintTransform:kMe,createProd:dhe,createProtonMass:sEe,createQr:Yve,createQuantileSeq:pq,createQuantileSeqTransform:TMe,createQuantumOfCirculation:lEe,createRandom:NSe,createRandomInt:RSe,createRange:KG,createRangeClass:hle,createRangeNode:Ave,createRangeTransform:uMe,createRationalize:a_e,createRe:Ufe,createReducedPlanckConstant:$_e,createRelationalNode:Dve,createReplacer:v_e,createReshape:_de,createResize:Cde,createResolve:t_e,createResultSet:oae,createReviver:p_e,createRightArithShift:ipe,createRightLogShift:ope,createRotate:Tde,createRotationMatrix:Nde,createRound:khe,createRow:ZG,createRowTransform:dMe,createRydberg:uEe,createSQRT1_2:R_e,createSQRT2:O_e,createSackurTetrode:SEe,createSchur:Ewe,createSec:nge,createSech:ige,createSecondRadiation:_Ee,createSetCartesian:mge,createSetDifference:vge,createSetDistinct:xge,createSetIntersect:wge,createSetIsSubset:_ge,createSetMultiplicity:Mge,createSetPowerset:Age,createSetSize:Dge,createSetSymDifference:Pge,createSetUnion:Oge,createSign:ife,createSimplify:qSe,createSimplifyConstant:KSe,createSimplifyCore:JSe,createSin:oge,createSinh:lge,createSize:Ode,createSlu:x0e,createSmaller:_pe,createSmallerEq:Cpe,createSolveODE:ehe,createSort:Vpe,createSpaClass:nme,createSparse:dme,createSparseMatrixClass:uue,createSpeedOfLight:B_e,createSplitUnit:Fue,createSqrt:afe,createSqrtm:bwe,createSquare:ufe,createSqueeze:Ide,createStd:mq,createStdTransform:_Me,createStefanBoltzmann:EEe,createStirlingS2:kSe,createString:gue,createSubset:JG,createSubsetTransform:mMe,createSubtract:ffe,createSubtractScalar:Yue,createSum:cq,createSumTransform:MMe,createSylvester:Swe,createSymbolNode:Rve,createSymbolicEqual:r_e,createTan:cge,createTanh:hge,createTau:M_e,createThomsonCrossSection:cEe,createTo:_he,createTrace:Wge,createTranspose:$de,createTrue:x_e,createTypeOf:rue,createTyped:nae,createUnaryMinus:zue,createUnaryPlus:$ue,createUnequal:Fpe,createUnitClass:lme,createUnitFunction:cme,createUppercaseE:L_e,createUppercasePi:I_e,createUsolve:Xhe,createUsolveAll:Jhe,createVacuumImpedance:W_e,createVariance:hq,createVarianceTransform:RMe,createVersion:F_e,createWeakMixingAngle:fEe,createWienDisplacement:MEe,createXgcd:hfe,createXor:jfe,createZeros:jde,createZeta:lhe,createZpk2tf:u_e},Symbol.toStringTag,{value:"Module"}));var XMe=qMe,MR={exports:{}};function CR(){}CR.prototype={on:function(n,e,t){var r=this.e||(this.e={});return(r[n]||(r[n]=[])).push({fn:e,ctx:t}),this},once:function(n,e,t){var r=this;function i(){r.off(n,i),e.apply(t,arguments)}return i._=e,this.on(n,i,t)},emit:function(n){var e=[].slice.call(arguments,1),t=((this.e||(this.e={}))[n]||[]).slice(),r=0,i=t.length;for(r;r<i;r++)t[r].fn.apply(t[r].ctx,e);return this},off:function(n,e){var t=this.e||(this.e={}),r=t[n],i=[];if(r&&e)for(var s=0,o=r.length;s<o;s++)r[s].fn!==e&&r[s].fn._!==e&&i.push(r[s]);return i.length?t[n]=i:delete t[n],this}};MR.exports=CR;MR.exports.TinyEmitter=CR;var YMe=MR.exports;const KMe=fa(YMe);function ZMe(n){var e=new KMe;return n.on=e.on.bind(e),n.off=e.off.bind(e),n.once=e.once.bind(e),n.emit=e.emit.bind(e),n}function JMe(n,e,t,r){function i(y,p){var S=arguments.length;if(S!==1&&S!==2)throw new zu("import",S,1,2);p||(p={});function b(M,A,N){if(Array.isArray(A))A.forEach(R=>b(M,R));else if(typeof A=="object")for(var C in A)gt(A,C)&&b(M,A[C],C);else if(Rv(A)||N!==void 0){var T=Rv(A)?m(A)?A.fn+".transform":A.fn:N;if(gt(M,T)&&M[T]!==A&&!p.silent)throw new Error('Cannot import "'+T+'" twice');M[T]=A}else if(!p.silent)throw new TypeError("Factory, Object, or Array expected")}var g={};b(g,y);for(var w in g)if(gt(g,w)){var x=g[w];if(Rv(x))u(x,p);else if(c(x))s(w,x,p);else if(!p.silent)throw new TypeError("Factory, Object, or Array expected")}}function s(y,p,S){if(S.wrap&&typeof p=="function"&&(p=l(p)),f(p)&&(p=n(y,{[p.signature]:p})),n.isTypedFunction(t[y])&&n.isTypedFunction(p)){S.override?p=n(y,p.signatures):p=n(t[y],p),t[y]=p,delete r[y],o(y,p),t.emit("import",y,function(){return p});return}if(t[y]===void 0||S.override){t[y]=p,delete r[y],o(y,p),t.emit("import",y,function(){return p});return}if(!S.silent)throw new Error('Cannot import "'+y+'": already exists')}function o(y,p){p&&typeof p.transform=="function"?(t.expression.transform[y]=p.transform,d(y)&&(t.expression.mathWithTransform[y]=p.transform)):(delete t.expression.transform[y],d(y)&&(t.expression.mathWithTransform[y]=p))}function a(y){delete t.expression.transform[y],d(y)?t.expression.mathWithTransform[y]=t[y]:delete t.expression.mathWithTransform[y]}function l(y){var p=function(){for(var b=[],g=0,w=arguments.length;g<w;g++){var x=arguments[g];b[g]=x&&x.valueOf()}return y.apply(t,b)};return y.transform&&(p.transform=y.transform),p}function u(y,p){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.fn;if(S.includes("."))throw new Error("Factory name should not contain a nested path. Name: "+JSON.stringify(S));var b=m(y)?t.expression.transform:t,g=S in t.expression.transform,w=gt(b,S)?b[S]:void 0,x=function(){var A={};y.dependencies.map(hj).forEach(C=>{if(C.includes("."))throw new Error("Factory dependency should not contain a nested path. Name: "+JSON.stringify(C));C==="math"?A.math=t:C==="mathWithTransform"?A.mathWithTransform=t.expression.mathWithTransform:C==="classes"?A.classes=t:A[C]=t[C]});var N=y(A);if(N&&typeof N.transform=="function")throw new Error('Transforms cannot be attached to factory functions. Please create a separate function for it with exports.path="expression.transform"');if(w===void 0||p.override)return N;if(n.isTypedFunction(w)&&n.isTypedFunction(N))return n(w,N);if(p.silent)return w;throw new Error('Cannot import "'+S+'": already exists')};!y.meta||y.meta.lazy!==!1?(Aw(b,S,x),w&&g?a(S):(m(y)||h(y))&&Aw(t.expression.mathWithTransform,S,()=>b[S])):(b[S]=x(),w&&g?a(S):(m(y)||h(y))&&Aw(t.expression.mathWithTransform,S,()=>b[S])),r[S]=y,t.emit("import",S,x)}function c(y){return typeof y=="function"||typeof y=="number"||typeof y=="string"||typeof y=="boolean"||y===null||Hs(y)||Pa(y)||Jt(y)||qd(y)||$t(y)||Array.isArray(y)}function f(y){return typeof y=="function"&&typeof y.signature=="string"}function d(y){return!gt(v,y)}function h(y){return!y.fn.includes(".")&&!gt(v,y.fn)&&(!y.meta||!y.meta.isClass)}function m(y){return y!==void 0&&y.meta!==void 0&&y.meta.isTransformFunction===!0||!1}var v={expression:!0,type:!0,docs:!0,error:!0,json:!0,chain:!0};return i}function yq(n,e){var t=at({},qW,e);if(typeof Object.create!="function")throw new Error("ES5 not supported by this JavaScript engine. Please load the es5-shim and es5-sham library for compatibility.");var r=ZMe({isNumber:tn,isComplex:Pa,isBigNumber:Jt,isFraction:qd,isUnit:Hs,isString:Pi,isArray:_n,isMatrix:$t,isCollection:To,isDenseMatrix:d0,isSparseMatrix:_c,isRange:fE,isIndex:xy,isBoolean:XW,isResultSet:YW,isHelp:nR,isFunction:KW,isDate:ZW,isRegExp:JW,isObject:by,isNull:QW,isUndefined:ej,isAccessorNode:Xc,isArrayNode:po,isAssignmentNode:tj,isBlockNode:nj,isConditionalNode:rj,isConstantNode:vn,isFunctionAssignmentNode:Pm,isFunctionNode:Cu,isIndexNode:Xd,isNode:In,isObjectNode:wy,isOperatorNode:Br,isParenthesisNode:Pl,isRangeNode:ij,isRelationalNode:sj,isSymbolNode:oi,isChain:rR});r.config=Poe(t,r.emit),r.expression={transform:{},mathWithTransform:{config:r.config}};var i=[],s=[];function o(c){if(Rv(c))return c(r);var f=c[Object.keys(c)[0]];if(Rv(f))return f(r);if(!Doe(c))throw console.warn("Factory object with properties `type`, `name`, and `factory` expected",c),new Error("Factory object with properties `type`, `name`, and `factory` expected");var d=i.indexOf(c),h;return d===-1?(c.math===!0?h=c.factory(r.type,t,o,r.typed,r):h=c.factory(r.type,t,o,r.typed),i.push(c),s.push(h)):h=s[d],h}var a={};function l(){for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return r.typed.apply(r.typed,f)}l.isTypedFunction=id.isTypedFunction;var u=JMe(l,o,r,a);return r.import=u,r.on("config",()=>{Object.values(a).forEach(c=>{c&&c.meta&&c.meta.recreateOnConfigChange&&u(c,{override:!0})})}),r.create=yq.bind(null,n),r.factory=ue,r.import(Object.values(Toe(n))),r.ArgumentsError=zu,r.DimensionError=an,r.IndexError=da,r}class xq{constructor(e){this.isMoving=!1,this.color="black",this.atomType="Connector",this.selected=!1,this.attachmentPoint1=null,this.attachmentPoint2=null;for(var t in e)this[t]=e[t];this.startX=this.attachmentPoint1.parentMolecule.outputX,this.startY=this.attachmentPoint1.parentMolecule.y,this.attachmentPoint1.connectors.push(this),this.attachmentPoint2!=null&&this.attachmentPoint2.connectors.push(this)}draw(){let e=O.widthToPixels(this.startX),t=O.heightToPixels(this.startY),r=O.widthToPixels(this.endX),i=O.heightToPixels(this.endY);O.c.beginPath(),O.c.fillStyle=this.color,O.c.strokeStyle=this.color,O.c.globalCompositeOperation="destination-over",this.selected?O.c.lineWidth=3:O.c.lineWidth=1,O.c.moveTo(e,t),O.c.bezierCurveTo(e+100,t,r-100,i,r,i),O.c.stroke(),O.c.globalCompositeOperation="source-over"}clickUp(e,t){if(this.isMoving){var r=!1;O.currentMolecule.nodesOnTheScreen.forEach(i=>{i.inputs.forEach(s=>{s.wasConnectionMade(e,t)&&!r&&this.attachmentPoint1.parentMolecule!==s.parentMolecule&&(r=!0,this.attachmentPoint2=s,s.attach(this),this.propogate())})}),r||this.deleteSelf(),this.isMoving=!1}}mouseMove(e,t){this.isMoving==!0&&(this.endX=O.pixelsToWidth(e),this.endY=O.pixelsToHeight(t))}keyPress(e){this.selected&&["Delete","Backspace"].includes(e)&&this.deleteSelf()}deleteSelf(e=!1){this.attachmentPoint1.deleteConnector(this),this.attachmentPoint2!=null&&(this.attachmentPoint2.deleteConnector(this),e||this.attachmentPoint2.setDefault())}serialize(){if(this.attachmentPoint2!=null){var e={ap1Name:this.attachmentPoint1.name,ap2Name:this.attachmentPoint2.name,ap2Primary:this.attachmentPoint2.primary,ap1ID:this.attachmentPoint1.parentMolecule.uniqueID,ap2ID:this.attachmentPoint2.parentMolecule.uniqueID};return e}}waitOnComingInformation(){this.attachmentPoint2&&this.attachmentPoint2.waitOnComingInformation()}propogate(){this.attachmentPoint1.ready&&this.attachmentPoint2&&this.attachmentPoint2.setValue(this.attachmentPoint1.getValue())}walkBackForConstants(e){this.attachmentPoint1.parentMolecule.walkBackForConstants(e)}update(){this.startX=this.attachmentPoint1.x,this.startY=this.attachmentPoint1.y,this.attachmentPoint2&&(this.endX=this.attachmentPoint2.x,this.endY=this.attachmentPoint2.y),this.draw()}}class co{static get DIST_FROM_PARENT(){return 3.5}static get TARGET_SCALEUP(){return 1.2}static get RADIUS(){return 1/150}constructor(e){this.isVisible=!1,this.isTargetted=!1,this.x,this.y,this.uniqueID=0,this.atomType="AttachmentPoint",this.valueType="number",this.type="output",this.value=10,this.defaultValue=10,this.ready=!0,this.connectors=[];for(var t in e)this[t]=e[t];this.unexpand()}draw(){if(!this.isVisible)return;let e=O.widthToPixels(this.x),t=O.heightToPixels(this.y),r=O.widthToPixels(co.RADIUS);this.isTargetted&&(r=r*co.TARGET_SCALEUP),O.c.font="10px Work Sans";var i=O.c.measureText(this.name).width,s=this.name==="geometry"?this.parentMolecule.selectedColor:"#C300FF",o=r*.5;O.c.globalCompositeOperation="source-over",O.c.beginPath(),O.c.fillStyle=s;var a=t-r,l=e;this.type=="input"&&(l=e-i-r-o);var u=l;this.type=="output"&&(u=l+r+o),O.c.arc(l,t,r,Math.PI/2,-1*Math.PI/2),O.c.rect(l,a,i+r+o,r*2),O.c.arc(l+i+r+o,t,r,-1*Math.PI/2,Math.PI/2),O.c.fill(),O.c.beginPath(),O.c.fillStyle=this.parentMolecule.defaultColor,O.c.fillText(this.name,u,t+2),O.c.fill(),O.c.closePath(),O.c.beginPath(),this.ready?O.c.fillStyle=this.parentMolecule.color:O.c.fillStyle="#6ba4ff",O.c.strokeStyle=this.parentMolecule.strokeColor,O.c.lineWidth=1,O.c.arc(e,t,r,0,Math.PI*2,!1),O.c.fill(),O.c.stroke(),O.c.closePath()}clickDown(e,t,r){return this.isCloseEnoughToTarget(e,t)&&!r?(this.type=="output"&&new xq({parentMolecule:this.parentMolecule,attachmentPoint1:this,atomType:"Connector",isMoving:!0}),this.type=="input"&&this.connectors.forEach(i=>{i.selected=!0}),!0):(this.type=="input"&&this.connectors.forEach(i=>{i.selected=!1}),!1)}clickUp(e,t){this.connectors.forEach(r=>{r.clickUp(e,t)})}mouseMove(e,t){let r=co.DIST_FROM_PARENT*this.parentMolecule.radius,i=O.widthToPixels(this.parentMolecule.x),s=O.heightToPixels(this.parentMolecule.y);O.distBetweenPoints(i,e,s,t)<=O.widthToPixels(r)?(this.isVisible=!0,[this.x,this.y]=this.computePosition(r),[this.x,this.y]=O.constrainToCanvasBorders(this.x,this.y),this.isTargetted=this.isCloseEnoughToTarget(e,t)):this.unexpand(),this.connectors.forEach(o=>{o.mouseMove(e,t)})}unexpand(){this.isVisible=!1,this.isTargetted=!1,this.y=this.parentMolecule.y,this.type=="input"?this.x=this.parentMolecule.x-this.parentMolecule.radius:this.x=this.parentMolecule.x+this.parentMolecule.radius,[this.x,this.y]=O.constrainToCanvasBorders(this.x,this.y)}computePosition(e){const t=this.parentMolecule.inputs.filter(r=>r.type=="input");if(this.type=="output")return[this.parentMolecule.x+this.parentMolecule.radius+co.RADIUS*.75,this.parentMolecule.y];if(this.type=="input"&&t.length==1)return[this.parentMolecule.x-this.parentMolecule.radius-co.RADIUS*.75,this.parentMolecule.y];{const r=t.indexOf(this),i=Math.PI/(t.length+1),s=e-co.RADIUS*co.TARGET_SCALEUP,o=Math.PI/2+i;let a=s*Math.cos(r*i+o),l=-1*O.pixelsToHeight(O.widthToPixels(s)*Math.sin(r*i+o));return[this.parentMolecule.x+a,this.parentMolecule.y+l]}}isCloseEnoughToTarget(e,t){if(!this.isVisible)return!1;const r=O.distBetweenPoints(e,O.widthToPixels(this.x),t,O.heightToPixels(this.y)),i=O.widthToPixels(co.RADIUS);if(this.type=="output")return r<=i*2;{let s=i*2;const o=this.parentMolecule.inputs.filter(c=>c.type=="input").length;let a=O.widthToPixels(co.DIST_FROM_PARENT*this.parentMolecule.radius-co.RADIUS*co.TARGET_SCALEUP);const l=Math.PI/(o+1),u=a*Math.sin(l/2);return s=Math.max(i,Math.min(s,u)),r<s}}keyPress(e){this.connectors.forEach(t=>{t.keyPress(e)})}deleteSelf(e=!1){var t=[...this.connectors];t.forEach(r=>{r.deleteSelf(e)})}deleteConnector(e="all"){try{const t=this.connectors.indexOf(e);t!=-1?this.connectors.splice(t,1):this.connectors=[]}catch(t){console.warn("Error deleting connector: "),console.warn(t)}}wasConnectionMade(e,t){return this.isCloseEnoughToTarget(e,t)&&this.connectors.length==0}attach(e){this.connectors.push(e)}beginPropagation(){this.connectors.length==0&&this.setValue(this.value)}waitOnComingInformation(){this.type=="output"?this.connectors.forEach(e=>{e.waitOnComingInformation()}):(this.ready=!1,this.parentMolecule.waitOnComingInformation(this.name))}setDefault(){this.setValue(this.defaultValue)}updateDefault(e){var t=this.defaultValue;this.defaultValue=e,this.connectors.length==0&&this.value==t&&(this.value=this.defaultValue)}getValue(){return this.value}setValue(e){this.value=e,this.ready=!0,this.type=="output"?this.connectors.forEach(t=>{t.propogate()}):this.parentMolecule.updateValue(this.name)}update(){this.draw(),this.connectors.forEach(e=>{e.update()})}}var QMe={exports:{}};(function(n){(function(){function e(g){var w={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:`Remove only spaces, ' and " from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids`,type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,describe:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,describe:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,describe:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,describe:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,describe:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",describe:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,describe:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,describe:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,describe:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,describe:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,describe:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},ellipsis:{defaultValue:!0,describe:"Replaces three dots with the ellipsis unicode character",type:"boolean"},completeHTMLDocument:{defaultValue:!1,describe:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,describe:"Enable support for document metadata (defined at the top of the document between `` and `` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,describe:"Split adjacent blockquote blocks",type:"boolean"}};if(g===!1)return JSON.parse(JSON.stringify(w));var x={};for(var M in w)w.hasOwnProperty(M)&&(x[M]=w[M].defaultValue);return x}function t(){var g=e(!0),w={};for(var x in g)g.hasOwnProperty(x)&&(w[x]=!0);return w}var r={},i={},s={},o=e(!0),a="vanilla",l={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:e(!0),allOn:t()};r.helper={},r.extensions={},r.setOption=function(g,w){return o[g]=w,this},r.getOption=function(g){return o[g]},r.getOptions=function(){return o},r.resetOptions=function(){o=e(!0)},r.setFlavor=function(g){if(!l.hasOwnProperty(g))throw Error(g+" flavor was not found");r.resetOptions();var w=l[g];a=g;for(var x in w)w.hasOwnProperty(x)&&(o[x]=w[x])},r.getFlavor=function(){return a},r.getFlavorOptions=function(g){if(l.hasOwnProperty(g))return l[g]},r.getDefaultOptions=function(g){return e(g)},r.subParser=function(g,w){if(r.helper.isString(g))if(typeof w<"u")i[g]=w;else{if(i.hasOwnProperty(g))return i[g];throw Error("SubParser named "+g+" not registered!")}},r.extension=function(g,w){if(!r.helper.isString(g))throw Error("Extension 'name' must be a string");if(g=r.helper.stdExtName(g),r.helper.isUndefined(w)){if(!s.hasOwnProperty(g))throw Error("Extension named "+g+" is not registered!");return s[g]}else{typeof w=="function"&&(w=w()),r.helper.isArray(w)||(w=[w]);var x=u(w,g);if(x.valid)s[g]=w;else throw Error(x.error)}},r.getAllExtensions=function(){return s},r.removeExtension=function(g){delete s[g]},r.resetExtensions=function(){s={}};function u(g,w){var x=w?"Error in "+w+" extension->":"Error in unnamed extension",M={valid:!0,error:""};r.helper.isArray(g)||(g=[g]);for(var A=0;A<g.length;++A){var N=x+" sub-extension "+A+": ",C=g[A];if(typeof C!="object")return M.valid=!1,M.error=N+"must be an object, but "+typeof C+" given",M;if(!r.helper.isString(C.type))return M.valid=!1,M.error=N+'property "type" must be a string, but '+typeof C.type+" given",M;var T=C.type=C.type.toLowerCase();if(T==="language"&&(T=C.type="lang"),T==="html"&&(T=C.type="output"),T!=="lang"&&T!=="output"&&T!=="listener")return M.valid=!1,M.error=N+"type "+T+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',M;if(T==="listener"){if(r.helper.isUndefined(C.listeners))return M.valid=!1,M.error=N+'. Extensions of type "listener" must have a property called "listeners"',M}else if(r.helper.isUndefined(C.filter)&&r.helper.isUndefined(C.regex))return M.valid=!1,M.error=N+T+' extensions must define either a "regex" property or a "filter" method',M;if(C.listeners){if(typeof C.listeners!="object")return M.valid=!1,M.error=N+'"listeners" property must be an object but '+typeof C.listeners+" given",M;for(var R in C.listeners)if(C.listeners.hasOwnProperty(R)&&typeof C.listeners[R]!="function")return M.valid=!1,M.error=N+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+R+" must be a function but "+typeof C.listeners[R]+" given",M}if(C.filter){if(typeof C.filter!="function")return M.valid=!1,M.error=N+'"filter" must be a function, but '+typeof C.filter+" given",M}else if(C.regex){if(r.helper.isString(C.regex)&&(C.regex=new RegExp(C.regex,"g")),!(C.regex instanceof RegExp))return M.valid=!1,M.error=N+'"regex" property must either be a string or a RegExp object, but '+typeof C.regex+" given",M;if(r.helper.isUndefined(C.replace))return M.valid=!1,M.error=N+'"regex" extensions must implement a replace string or function',M}}return M}r.validateExtension=function(g){var w=u(g,null);return w.valid?!0:(console.warn(w.error),!1)},r.hasOwnProperty("helper")||(r.helper={}),r.helper.isString=function(g){return typeof g=="string"||g instanceof String},r.helper.isFunction=function(g){var w={};return g&&w.toString.call(g)==="[object Function]"},r.helper.isArray=function(g){return Array.isArray(g)},r.helper.isUndefined=function(g){return typeof g>"u"},r.helper.forEach=function(g,w){if(r.helper.isUndefined(g))throw new Error("obj param is required");if(r.helper.isUndefined(w))throw new Error("callback param is required");if(!r.helper.isFunction(w))throw new Error("callback param must be a function/closure");if(typeof g.forEach=="function")g.forEach(w);else if(r.helper.isArray(g))for(var x=0;x<g.length;x++)w(g[x],x,g);else if(typeof g=="object")for(var M in g)g.hasOwnProperty(M)&&w(g[M],M,g);else throw new Error("obj does not seem to be an array or an iterable object")},r.helper.stdExtName=function(g){return g.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()};function c(g,w){var x=w.charCodeAt(0);return"E"+x+"E"}r.helper.escapeCharactersCallback=c,r.helper.escapeCharacters=function(g,w,x){var M="(["+w.replace(/([\[\]\\])/g,"\\$1")+"])";x&&(M="\\\\"+M);var A=new RegExp(M,"g");return g=g.replace(A,c),g},r.helper.unescapeHTMLEntities=function(g){return g.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var f=function(g,w,x,M){var A=M||"",N=A.indexOf("g")>-1,C=new RegExp(w+"|"+x,"g"+A.replace(/g/g,"")),T=new RegExp(w,A.replace(/g/g,"")),R=[],$,B,z,D,I;do for($=0;z=C.exec(g);)if(T.test(z[0]))$++||(B=C.lastIndex,D=B-z[0].length);else if($&&!--$){I=z.index+z[0].length;var U={left:{start:D,end:B},match:{start:B,end:z.index},right:{start:z.index,end:I},wholeMatch:{start:D,end:I}};if(R.push(U),!N)return R}while($&&(C.lastIndex=B));return R};r.helper.matchRecursiveRegExp=function(g,w,x,M){for(var A=f(g,w,x,M),N=[],C=0;C<A.length;++C)N.push([g.slice(A[C].wholeMatch.start,A[C].wholeMatch.end),g.slice(A[C].match.start,A[C].match.end),g.slice(A[C].left.start,A[C].left.end),g.slice(A[C].right.start,A[C].right.end)]);return N},r.helper.replaceRecursiveRegExp=function(g,w,x,M,A){if(!r.helper.isFunction(w)){var N=w;w=function(){return N}}var C=f(g,x,M,A),T=g,R=C.length;if(R>0){var $=[];C[0].wholeMatch.start!==0&&$.push(g.slice(0,C[0].wholeMatch.start));for(var B=0;B<R;++B)$.push(w(g.slice(C[B].wholeMatch.start,C[B].wholeMatch.end),g.slice(C[B].match.start,C[B].match.end),g.slice(C[B].left.start,C[B].left.end),g.slice(C[B].right.start,C[B].right.end))),B<R-1&&$.push(g.slice(C[B].wholeMatch.end,C[B+1].wholeMatch.start));C[R-1].wholeMatch.end<g.length&&$.push(g.slice(C[R-1].wholeMatch.end)),T=$.join("")}return T},r.helper.regexIndexOf=function(g,w,x){if(!r.helper.isString(g))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(!(w instanceof RegExp))throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var M=g.substring(x||0).search(w);return M>=0?M+(x||0):M},r.helper.splitAtIndex=function(g,w){if(!r.helper.isString(g))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[g.substring(0,w),g.substring(w)]},r.helper.encodeEmailAddress=function(g){var w=[function(x){return"&#"+x.charCodeAt(0)+";"},function(x){return"&#x"+x.charCodeAt(0).toString(16)+";"},function(x){return x}];return g=g.replace(/./g,function(x){if(x==="@")x=w[Math.floor(Math.random()*2)](x);else{var M=Math.random();x=M>.9?w[2](x):M>.45?w[1](x):w[0](x)}return x}),g},r.helper.padEnd=function(w,x,M){return x=x>>0,M=String(M||" "),w.length>x?String(w):(x=x-w.length,x>M.length&&(M+=M.repeat(x/M.length)),String(w)+M.slice(0,x))},typeof console>"u"&&(console={warn:function(g){alert(g)},log:function(g){alert(g)},error:function(g){throw g}}),r.helper.regexes={asteriskDashAndColon:/([*_:~])/g},r.helper.emojis={"+1":"","-1":"",100:"",1234:"","1st_place_medal":"","2nd_place_medal":"","3rd_place_medal":"","8ball":"",a:"",ab:"",abc:"",abcd:"",accept:"",aerial_tramway:"",airplane:"",alarm_clock:"",alembic:"",alien:"",ambulance:"",amphora:"",anchor:"",angel:"",anger:"",angry:"",anguished:"",ant:"",apple:"",aquarius:"",aries:"",arrow_backward:"",arrow_double_down:"",arrow_double_up:"",arrow_down:"",arrow_down_small:"",arrow_forward:"",arrow_heading_down:"",arrow_heading_up:"",arrow_left:"",arrow_lower_left:"",arrow_lower_right:"",arrow_right:"",arrow_right_hook:"",arrow_up:"",arrow_up_down:"",arrow_up_small:"",arrow_upper_left:"",arrow_upper_right:"",arrows_clockwise:"",arrows_counterclockwise:"",art:"",articulated_lorry:"",artificial_satellite:"",astonished:"",athletic_shoe:"",atm:"",atom_symbol:"",avocado:"",b:"",baby:"",baby_bottle:"",baby_chick:"",baby_symbol:"",back:"",bacon:"",badminton:"",baggage_claim:"",baguette_bread:"",balance_scale:"",balloon:"",ballot_box:"",ballot_box_with_check:"",bamboo:"",banana:"",bangbang:"",bank:"",bar_chart:"",barber:"",baseball:"",basketball:"",basketball_man:"",basketball_woman:"&zwj;",bat:"",bath:"",bathtub:"",battery:"",beach_umbrella:"",bear:"",bed:"",bee:"",beer:"",beers:"",beetle:"",beginner:"",bell:"",bellhop_bell:"",bento:"",biking_man:"",bike:"",biking_woman:"&zwj;",bikini:"",biohazard:"",bird:"",birthday:"",black_circle:"",black_flag:"",black_heart:"",black_joker:"",black_large_square:"",black_medium_small_square:"",black_medium_square:"",black_nib:"",black_small_square:"",black_square_button:"",blonde_man:"",blonde_woman:"&zwj;",blossom:"",blowfish:"",blue_book:"",blue_car:"",blue_heart:"",blush:"",boar:"",boat:"",bomb:"",book:"",bookmark:"",bookmark_tabs:"",books:"",boom:"",boot:"",bouquet:"",bowing_man:"",bow_and_arrow:"",bowing_woman:"&zwj;",bowling:"",boxing_glove:"",boy:"",bread:"",bride_with_veil:"",bridge_at_night:"",briefcase:"",broken_heart:"",bug:"",building_construction:"",bulb:"",bullettrain_front:"",bullettrain_side:"",burrito:"",bus:"",business_suit_levitating:"",busstop:"",bust_in_silhouette:"",busts_in_silhouette:"",butterfly:"",cactus:"",cake:"",calendar:"",call_me_hand:"",calling:"",camel:"",camera:"",camera_flash:"",camping:"",cancer:"",candle:"",candy:"",canoe:"",capital_abcd:"",capricorn:"",car:"",card_file_box:"",card_index:"",card_index_dividers:"",carousel_horse:"",carrot:"",cat:"",cat2:"",cd:"",chains:"",champagne:"",chart:"",chart_with_downwards_trend:"",chart_with_upwards_trend:"",checkered_flag:"",cheese:"",cherries:"",cherry_blossom:"",chestnut:"",chicken:"",children_crossing:"",chipmunk:"",chocolate_bar:"",christmas_tree:"",church:"",cinema:"",circus_tent:"",city_sunrise:"",city_sunset:"",cityscape:"",cl:"",clamp:"",clap:"",clapper:"",classical_building:"",clinking_glasses:"",clipboard:"",clock1:"",clock10:"",clock1030:"",clock11:"",clock1130:"",clock12:"",clock1230:"",clock130:"",clock2:"",clock230:"",clock3:"",clock330:"",clock4:"",clock430:"",clock5:"",clock530:"",clock6:"",clock630:"",clock7:"",clock730:"",clock8:"",clock830:"",clock9:"",clock930:"",closed_book:"",closed_lock_with_key:"",closed_umbrella:"",cloud:"",cloud_with_lightning:"",cloud_with_lightning_and_rain:"",cloud_with_rain:"",cloud_with_snow:"",clown_face:"",clubs:"",cocktail:"",coffee:"",coffin:"",cold_sweat:"",comet:"",computer:"",computer_mouse:"",confetti_ball:"",confounded:"",confused:"",congratulations:"",construction:"",construction_worker_man:"",construction_worker_woman:"&zwj;",control_knobs:"",convenience_store:"",cookie:"",cool:"",policeman:"",copyright:"",corn:"",couch_and_lamp:"",couple:"",couple_with_heart_woman_man:"",couple_with_heart_man_man:"&zwj;&zwj;",couple_with_heart_woman_woman:"&zwj;&zwj;",couplekiss_man_man:"&zwj;&zwj;&zwj;",couplekiss_man_woman:"",couplekiss_woman_woman:"&zwj;&zwj;&zwj;",cow:"",cow2:"",cowboy_hat_face:"",crab:"",crayon:"",credit_card:"",crescent_moon:"",cricket:"",crocodile:"",croissant:"",crossed_fingers:"",crossed_flags:"",crossed_swords:"",crown:"",cry:"",crying_cat_face:"",crystal_ball:"",cucumber:"",cupid:"",curly_loop:"",currency_exchange:"",curry:"",custard:"",customs:"",cyclone:"",dagger:"",dancer:"",dancing_women:"",dancing_men:"&zwj;",dango:"",dark_sunglasses:"",dart:"",dash:"",date:"",deciduous_tree:"",deer:"",department_store:"",derelict_house:"",desert:"",desert_island:"",desktop_computer:"",male_detective:"",diamond_shape_with_a_dot_inside:"",diamonds:"",disappointed:"",disappointed_relieved:"",dizzy:"",dizzy_face:"",do_not_litter:"",dog:"",dog2:"",dollar:"",dolls:"",dolphin:"",door:"",doughnut:"",dove:"",dragon:"",dragon_face:"",dress:"",dromedary_camel:"",drooling_face:"",droplet:"",drum:"",duck:"",dvd:"","e-mail":"",eagle:"",ear:"",ear_of_rice:"",earth_africa:"",earth_americas:"",earth_asia:"",egg:"",eggplant:"",eight_pointed_black_star:"",eight_spoked_asterisk:"",electric_plug:"",elephant:"",email:"",end:"",envelope_with_arrow:"",euro:"",european_castle:"",european_post_office:"",evergreen_tree:"",exclamation:"",expressionless:"",eye:"",eye_speech_bubble:"&zwj;",eyeglasses:"",eyes:"",face_with_head_bandage:"",face_with_thermometer:"",fist_oncoming:"",factory:"",fallen_leaf:"",family_man_woman_boy:"",family_man_boy:"&zwj;",family_man_boy_boy:"&zwj;&zwj;",family_man_girl:"&zwj;",family_man_girl_boy:"&zwj;&zwj;",family_man_girl_girl:"&zwj;&zwj;",family_man_man_boy:"&zwj;&zwj;",family_man_man_boy_boy:"&zwj;&zwj;&zwj;",family_man_man_girl:"&zwj;&zwj;",family_man_man_girl_boy:"&zwj;&zwj;&zwj;",family_man_man_girl_girl:"&zwj;&zwj;&zwj;",family_man_woman_boy_boy:"&zwj;&zwj;&zwj;",family_man_woman_girl:"&zwj;&zwj;",family_man_woman_girl_boy:"&zwj;&zwj;&zwj;",family_man_woman_girl_girl:"&zwj;&zwj;&zwj;",family_woman_boy:"&zwj;",family_woman_boy_boy:"&zwj;&zwj;",family_woman_girl:"&zwj;",family_woman_girl_boy:"&zwj;&zwj;",family_woman_girl_girl:"&zwj;&zwj;",family_woman_woman_boy:"&zwj;&zwj;",family_woman_woman_boy_boy:"&zwj;&zwj;&zwj;",family_woman_woman_girl:"&zwj;&zwj;",family_woman_woman_girl_boy:"&zwj;&zwj;&zwj;",family_woman_woman_girl_girl:"&zwj;&zwj;&zwj;",fast_forward:"",fax:"",fearful:"",feet:"",female_detective:"&zwj;",ferris_wheel:"",ferry:"",field_hockey:"",file_cabinet:"",file_folder:"",film_projector:"",film_strip:"",fire:"",fire_engine:"",fireworks:"",first_quarter_moon:"",first_quarter_moon_with_face:"",fish:"",fish_cake:"",fishing_pole_and_fish:"",fist_raised:"",fist_left:"",fist_right:"",flags:"",flashlight:"",fleur_de_lis:"",flight_arrival:"",flight_departure:"",floppy_disk:"",flower_playing_cards:"",flushed:"",fog:"",foggy:"",football:"",footprints:"",fork_and_knife:"",fountain:"",fountain_pen:"",four_leaf_clover:"",fox_face:"",framed_picture:"",free:"",fried_egg:"",fried_shrimp:"",fries:"",frog:"",frowning:"",frowning_face:"",frowning_man:"&zwj;",frowning_woman:"",middle_finger:"",fuelpump:"",full_moon:"",full_moon_with_face:"",funeral_urn:"",game_die:"",gear:"",gem:"",gemini:"",ghost:"",gift:"",gift_heart:"",girl:"",globe_with_meridians:"",goal_net:"",goat:"",golf:"",golfing_man:"",golfing_woman:"&zwj;",gorilla:"",grapes:"",green_apple:"",green_book:"",green_heart:"",green_salad:"",grey_exclamation:"",grey_question:"",grimacing:"",grin:"",grinning:"",guardsman:"",guardswoman:"&zwj;",guitar:"",gun:"",haircut_woman:"",haircut_man:"&zwj;",hamburger:"",hammer:"",hammer_and_pick:"",hammer_and_wrench:"",hamster:"",hand:"",handbag:"",handshake:"",hankey:"",hatched_chick:"",hatching_chick:"",headphones:"",hear_no_evil:"",heart:"",heart_decoration:"",heart_eyes:"",heart_eyes_cat:"",heartbeat:"",heartpulse:"",hearts:"",heavy_check_mark:"",heavy_division_sign:"",heavy_dollar_sign:"",heavy_heart_exclamation:"",heavy_minus_sign:"",heavy_multiplication_x:"",heavy_plus_sign:"",helicopter:"",herb:"",hibiscus:"",high_brightness:"",high_heel:"",hocho:"",hole:"",honey_pot:"",horse:"",horse_racing:"",hospital:"",hot_pepper:"",hotdog:"",hotel:"",hotsprings:"",hourglass:"",hourglass_flowing_sand:"",house:"",house_with_garden:"",houses:"",hugs:"",hushed:"",ice_cream:"",ice_hockey:"",ice_skate:"",icecream:"",id:"",ideograph_advantage:"",imp:"",inbox_tray:"",incoming_envelope:"",tipping_hand_woman:"",information_source:"",innocent:"",interrobang:"",iphone:"",izakaya_lantern:"",jack_o_lantern:"",japan:"",japanese_castle:"",japanese_goblin:"",japanese_ogre:"",jeans:"",joy:"",joy_cat:"",joystick:"",kaaba:"",key:"",keyboard:"",keycap_ten:"",kick_scooter:"",kimono:"",kiss:"",kissing:"",kissing_cat:"",kissing_closed_eyes:"",kissing_heart:"",kissing_smiling_eyes:"",kiwi_fruit:"",koala:"",koko:"",label:"",large_blue_circle:"",large_blue_diamond:"",large_orange_diamond:"",last_quarter_moon:"",last_quarter_moon_with_face:"",latin_cross:"",laughing:"",leaves:"",ledger:"",left_luggage:"",left_right_arrow:"",leftwards_arrow_with_hook:"",lemon:"",leo:"",leopard:"",level_slider:"",libra:"",light_rail:"",link:"",lion:"",lips:"",lipstick:"",lizard:"",lock:"",lock_with_ink_pen:"",lollipop:"",loop:"",loud_sound:"",loudspeaker:"",love_hotel:"",love_letter:"",low_brightness:"",lying_face:"",m:"",mag:"",mag_right:"",mahjong:"",mailbox:"",mailbox_closed:"",mailbox_with_mail:"",mailbox_with_no_mail:"",man:"",man_artist:"&zwj;",man_astronaut:"&zwj;",man_cartwheeling:"&zwj;",man_cook:"&zwj;",man_dancing:"",man_facepalming:"&zwj;",man_factory_worker:"&zwj;",man_farmer:"&zwj;",man_firefighter:"&zwj;",man_health_worker:"&zwj;",man_in_tuxedo:"",man_judge:"&zwj;",man_juggling:"&zwj;",man_mechanic:"&zwj;",man_office_worker:"&zwj;",man_pilot:"&zwj;",man_playing_handball:"&zwj;",man_playing_water_polo:"&zwj;",man_scientist:"&zwj;",man_shrugging:"&zwj;",man_singer:"&zwj;",man_student:"&zwj;",man_teacher:"&zwj;",man_technologist:"&zwj;",man_with_gua_pi_mao:"",man_with_turban:"",tangerine:"",mans_shoe:"",mantelpiece_clock:"",maple_leaf:"",martial_arts_uniform:"",mask:"",massage_woman:"",massage_man:"&zwj;",meat_on_bone:"",medal_military:"",medal_sports:"",mega:"",melon:"",memo:"",men_wrestling:"&zwj;",menorah:"",mens:"",metal:"",metro:"",microphone:"",microscope:"",milk_glass:"",milky_way:"",minibus:"",minidisc:"",mobile_phone_off:"",money_mouth_face:"",money_with_wings:"",moneybag:"",monkey:"",monkey_face:"",monorail:"",moon:"",mortar_board:"",mosque:"",motor_boat:"",motor_scooter:"",motorcycle:"",motorway:"",mount_fuji:"",mountain:"",mountain_biking_man:"",mountain_biking_woman:"&zwj;",mountain_cableway:"",mountain_railway:"",mountain_snow:"",mouse:"",mouse2:"",movie_camera:"",moyai:"",mrs_claus:"",muscle:"",mushroom:"",musical_keyboard:"",musical_note:"",musical_score:"",mute:"",nail_care:"",name_badge:"",national_park:"",nauseated_face:"",necktie:"",negative_squared_cross_mark:"",nerd_face:"",neutral_face:"",new:"",new_moon:"",new_moon_with_face:"",newspaper:"",newspaper_roll:"",next_track_button:"",ng:"",no_good_man:"&zwj;",no_good_woman:"",night_with_stars:"",no_bell:"",no_bicycles:"",no_entry:"",no_entry_sign:"",no_mobile_phones:"",no_mouth:"",no_pedestrians:"",no_smoking:"","non-potable_water":"",nose:"",notebook:"",notebook_with_decorative_cover:"",notes:"",nut_and_bolt:"",o:"",o2:"",ocean:"",octopus:"",oden:"",office:"",oil_drum:"",ok:"",ok_hand:"",ok_man:"&zwj;",ok_woman:"",old_key:"",older_man:"",older_woman:"",om:"",on:"",oncoming_automobile:"",oncoming_bus:"",oncoming_police_car:"",oncoming_taxi:"",open_file_folder:"",open_hands:"",open_mouth:"",open_umbrella:"",ophiuchus:"",orange_book:"",orthodox_cross:"",outbox_tray:"",owl:"",ox:"",package:"",page_facing_up:"",page_with_curl:"",pager:"",paintbrush:"",palm_tree:"",pancakes:"",panda_face:"",paperclip:"",paperclips:"",parasol_on_ground:"",parking:"",part_alternation_mark:"",partly_sunny:"",passenger_ship:"",passport_control:"",pause_button:"",peace_symbol:"",peach:"",peanuts:"",pear:"",pen:"",pencil2:"",penguin:"",pensive:"",performing_arts:"",persevere:"",person_fencing:"",pouting_woman:"",phone:"",pick:"",pig:"",pig2:"",pig_nose:"",pill:"",pineapple:"",ping_pong:"",pisces:"",pizza:"",place_of_worship:"",plate_with_cutlery:"",play_or_pause_button:"",point_down:"",point_left:"",point_right:"",point_up:"",point_up_2:"",police_car:"",policewoman:"&zwj;",poodle:"",popcorn:"",post_office:"",postal_horn:"",postbox:"",potable_water:"",potato:"",pouch:"",poultry_leg:"",pound:"",rage:"",pouting_cat:"",pouting_man:"&zwj;",pray:"",prayer_beads:"",pregnant_woman:"",previous_track_button:"",prince:"",princess:"",printer:"",purple_heart:"",purse:"",pushpin:"",put_litter_in_its_place:"",question:"",rabbit:"",rabbit2:"",racehorse:"",racing_car:"",radio:"",radio_button:"",radioactive:"",railway_car:"",railway_track:"",rainbow:"",rainbow_flag:"&zwj;",raised_back_of_hand:"",raised_hand_with_fingers_splayed:"",raised_hands:"",raising_hand_woman:"",raising_hand_man:"&zwj;",ram:"",ramen:"",rat:"",record_button:"",recycle:"",red_circle:"",registered:"",relaxed:"",relieved:"",reminder_ribbon:"",repeat:"",repeat_one:"",rescue_worker_helmet:"",restroom:"",revolving_hearts:"",rewind:"",rhinoceros:"",ribbon:"",rice:"",rice_ball:"",rice_cracker:"",rice_scene:"",right_anger_bubble:"",ring:"",robot:"",rocket:"",rofl:"",roll_eyes:"",roller_coaster:"",rooster:"",rose:"",rosette:"",rotating_light:"",round_pushpin:"",rowing_man:"",rowing_woman:"&zwj;",rugby_football:"",running_man:"",running_shirt_with_sash:"",running_woman:"&zwj;",sa:"",sagittarius:"",sake:"",sandal:"",santa:"",satellite:"",saxophone:"",school:"",school_satchel:"",scissors:"",scorpion:"",scorpius:"",scream:"",scream_cat:"",scroll:"",seat:"",secret:"",see_no_evil:"",seedling:"",selfie:"",shallow_pan_of_food:"",shamrock:"",shark:"",shaved_ice:"",sheep:"",shell:"",shield:"",shinto_shrine:"",ship:"",shirt:"",shopping:"",shopping_cart:"",shower:"",shrimp:"",signal_strength:"",six_pointed_star:"",ski:"",skier:"",skull:"",skull_and_crossbones:"",sleeping:"",sleeping_bed:"",sleepy:"",slightly_frowning_face:"",slightly_smiling_face:"",slot_machine:"",small_airplane:"",small_blue_diamond:"",small_orange_diamond:"",small_red_triangle:"",small_red_triangle_down:"",smile:"",smile_cat:"",smiley:"",smiley_cat:"",smiling_imp:"",smirk:"",smirk_cat:"",smoking:"",snail:"",snake:"",sneezing_face:"",snowboarder:"",snowflake:"",snowman:"",snowman_with_snow:"",sob:"",soccer:"",soon:"",sos:"",sound:"",space_invader:"",spades:"",spaghetti:"",sparkle:"",sparkler:"",sparkles:"",sparkling_heart:"",speak_no_evil:"",speaker:"",speaking_head:"",speech_balloon:"",speedboat:"",spider:"",spider_web:"",spiral_calendar:"",spiral_notepad:"",spoon:"",squid:"",stadium:"",star:"",star2:"",star_and_crescent:"",star_of_david:"",stars:"",station:"",statue_of_liberty:"",steam_locomotive:"",stew:"",stop_button:"",stop_sign:"",stopwatch:"",straight_ruler:"",strawberry:"",stuck_out_tongue:"",stuck_out_tongue_closed_eyes:"",stuck_out_tongue_winking_eye:"",studio_microphone:"",stuffed_flatbread:"",sun_behind_large_cloud:"",sun_behind_rain_cloud:"",sun_behind_small_cloud:"",sun_with_face:"",sunflower:"",sunglasses:"",sunny:"",sunrise:"",sunrise_over_mountains:"",surfing_man:"",surfing_woman:"&zwj;",sushi:"",suspension_railway:"",sweat:"",sweat_drops:"",sweat_smile:"",sweet_potato:"",swimming_man:"",swimming_woman:"&zwj;",symbols:"",synagogue:"",syringe:"",taco:"",tada:"",tanabata_tree:"",taurus:"",taxi:"",tea:"",telephone_receiver:"",telescope:"",tennis:"",tent:"",thermometer:"",thinking:"",thought_balloon:"",ticket:"",tickets:"",tiger:"",tiger2:"",timer_clock:"",tipping_hand_man:"&zwj;",tired_face:"",tm:"",toilet:"",tokyo_tower:"",tomato:"",tongue:"",top:"",tophat:"",tornado:"",trackball:"",tractor:"",traffic_light:"",train:"",train2:"",tram:"",triangular_flag_on_post:"",triangular_ruler:"",trident:"",triumph:"",trolleybus:"",trophy:"",tropical_drink:"",tropical_fish:"",truck:"",trumpet:"",tulip:"",tumbler_glass:"",turkey:"",turtle:"",tv:"",twisted_rightwards_arrows:"",two_hearts:"",two_men_holding_hands:"",two_women_holding_hands:"",u5272:"",u5408:"",u55b6:"",u6307:"",u6708:"",u6709:"",u6e80:"",u7121:"",u7533:"",u7981:"",u7a7a:"",umbrella:"",unamused:"",underage:"",unicorn:"",unlock:"",up:"",upside_down_face:"",v:"",vertical_traffic_light:"",vhs:"",vibration_mode:"",video_camera:"",video_game:"",violin:"",virgo:"",volcano:"",volleyball:"",vs:"",vulcan_salute:"",walking_man:"",walking_woman:"&zwj;",waning_crescent_moon:"",waning_gibbous_moon:"",warning:"",wastebasket:"",watch:"",water_buffalo:"",watermelon:"",wave:"",wavy_dash:"",waxing_crescent_moon:"",wc:"",weary:"",wedding:"",weight_lifting_man:"",weight_lifting_woman:"&zwj;",whale:"",whale2:"",wheel_of_dharma:"",wheelchair:"",white_check_mark:"",white_circle:"",white_flag:"",white_flower:"",white_large_square:"",white_medium_small_square:"",white_medium_square:"",white_small_square:"",white_square_button:"",wilted_flower:"",wind_chime:"",wind_face:"",wine_glass:"",wink:"",wolf:"",woman:"",woman_artist:"&zwj;",woman_astronaut:"&zwj;",woman_cartwheeling:"&zwj;",woman_cook:"&zwj;",woman_facepalming:"&zwj;",woman_factory_worker:"&zwj;",woman_farmer:"&zwj;",woman_firefighter:"&zwj;",woman_health_worker:"&zwj;",woman_judge:"&zwj;",woman_juggling:"&zwj;",woman_mechanic:"&zwj;",woman_office_worker:"&zwj;",woman_pilot:"&zwj;",woman_playing_handball:"&zwj;",woman_playing_water_polo:"&zwj;",woman_scientist:"&zwj;",woman_shrugging:"&zwj;",woman_singer:"&zwj;",woman_student:"&zwj;",woman_teacher:"&zwj;",woman_technologist:"&zwj;",woman_with_turban:"&zwj;",womans_clothes:"",womans_hat:"",women_wrestling:"&zwj;",womens:"",world_map:"",worried:"",wrench:"",writing_hand:"",x:"",yellow_heart:"",yen:"",yin_yang:"",yum:"",zap:"",zipper_mouth_face:"",zzz:"",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:`<span style="font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;">S</span>`},r.Converter=function(g){var w={},x=[],M=[],A={},N=a,C={parsed:{},raw:"",format:""};T();function T(){g=g||{};for(var D in o)o.hasOwnProperty(D)&&(w[D]=o[D]);if(typeof g=="object")for(var I in g)g.hasOwnProperty(I)&&(w[I]=g[I]);else throw Error("Converter expects the passed parameter to be an object, but "+typeof g+" was passed instead.");w.extensions&&r.helper.forEach(w.extensions,R)}function R(D,I){if(I=I||null,r.helper.isString(D))if(D=r.helper.stdExtName(D),I=D,r.extensions[D]){console.warn("DEPRECATION WARNING: "+D+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),$(r.extensions[D],D);return}else if(!r.helper.isUndefined(s[D]))D=s[D];else throw Error('Extension "'+D+'" could not be loaded. It was either not found or is not a valid extension.');typeof D=="function"&&(D=D()),r.helper.isArray(D)||(D=[D]);var U=u(D,I);if(!U.valid)throw Error(U.error);for(var L=0;L<D.length;++L){switch(D[L].type){case"lang":x.push(D[L]);break;case"output":M.push(D[L]);break}if(D[L].hasOwnProperty("listeners"))for(var q in D[L].listeners)D[L].listeners.hasOwnProperty(q)&&B(q,D[L].listeners[q])}}function $(D,I){typeof D=="function"&&(D=D(new r.Converter)),r.helper.isArray(D)||(D=[D]);var U=u(D,I);if(!U.valid)throw Error(U.error);for(var L=0;L<D.length;++L)switch(D[L].type){case"lang":x.push(D[L]);break;case"output":M.push(D[L]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}function B(D,I){if(!r.helper.isString(D))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof D+" given");if(typeof I!="function")throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof I+" given");A.hasOwnProperty(D)||(A[D]=[]),A[D].push(I)}function z(D){var I=D.match(/^\s*/)[0].length,U=new RegExp("^\\s{0,"+I+"}","gm");return D.replace(U,"")}this._dispatch=function(I,U,L,q){if(A.hasOwnProperty(I))for(var Z=0;Z<A[I].length;++Z){var J=A[I][Z](I,U,this,L,q);J&&typeof J<"u"&&(U=J)}return U},this.listen=function(D,I){return B(D,I),this},this.makeHtml=function(D){if(!D)return D;var I={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:x,outputModifiers:M,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return D=D.replace(//g,"T"),D=D.replace(/\$/g,"D"),D=D.replace(/\r\n/g,`
`),D=D.replace(/\r/g,`
`),D=D.replace(/\u00A0/g,"&nbsp;"),w.smartIndentationFix&&(D=z(D)),D=`

`+D+`

`,D=r.subParser("detab")(D,w,I),D=D.replace(/^[ \t]+$/mg,""),r.helper.forEach(x,function(U){D=r.subParser("runExtension")(U,D,w,I)}),D=r.subParser("metadata")(D,w,I),D=r.subParser("hashPreCodeTags")(D,w,I),D=r.subParser("githubCodeBlocks")(D,w,I),D=r.subParser("hashHTMLBlocks")(D,w,I),D=r.subParser("hashCodeTags")(D,w,I),D=r.subParser("stripLinkDefinitions")(D,w,I),D=r.subParser("blockGamut")(D,w,I),D=r.subParser("unhashHTMLSpans")(D,w,I),D=r.subParser("unescapeSpecialChars")(D,w,I),D=D.replace(/D/g,"$$"),D=D.replace(/T/g,""),D=r.subParser("completeHTMLDocument")(D,w,I),r.helper.forEach(M,function(U){D=r.subParser("runExtension")(U,D,w,I)}),C=I.metadata,D},this.makeMarkdown=this.makeMd=function(D,I){if(D=D.replace(/\r\n/g,`
`),D=D.replace(/\r/g,`
`),D=D.replace(/>[ \t]+</,">NBSP;<"),!I)if(window&&window.document)I=window.document;else throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");var U=I.createElement("div");U.innerHTML=D;var L={preList:ee(U)};Y(U);for(var q=U.childNodes,Z="",J=0;J<q.length;J++)Z+=r.subParser("makeMarkdown.node")(q[J],L);function Y(ae){for(var ce=0;ce<ae.childNodes.length;++ce){var pe=ae.childNodes[ce];pe.nodeType===3?!/\S/.test(pe.nodeValue)&&!/^[ ]+$/.test(pe.nodeValue)?(ae.removeChild(pe),--ce):(pe.nodeValue=pe.nodeValue.split(`
`).join(" "),pe.nodeValue=pe.nodeValue.replace(/(\s)+/g,"$1")):pe.nodeType===1&&Y(pe)}}function ee(ae){for(var ce=ae.querySelectorAll("pre"),pe=[],we=0;we<ce.length;++we)if(ce[we].childElementCount===1&&ce[we].firstChild.tagName.toLowerCase()==="code"){var me=ce[we].firstChild.innerHTML.trim(),Ae=ce[we].firstChild.getAttribute("data-language")||"";if(Ae==="")for(var Ee=ce[we].firstChild.className.split(" "),re=0;re<Ee.length;++re){var Pe=Ee[re].match(/^language-(.+)$/);if(Pe!==null){Ae=Pe[1];break}}me=r.helper.unescapeHTMLEntities(me),pe.push(me),ce[we].outerHTML='<precode language="'+Ae+'" precodenum="'+we.toString()+'"></precode>'}else pe.push(ce[we].innerHTML),ce[we].innerHTML="",ce[we].setAttribute("prenum",we.toString());return pe}return Z},this.setOption=function(D,I){w[D]=I},this.getOption=function(D){return w[D]},this.getOptions=function(){return w},this.addExtension=function(D,I){I=I||null,R(D,I)},this.useExtension=function(D){R(D)},this.setFlavor=function(D){if(!l.hasOwnProperty(D))throw Error(D+" flavor was not found");var I=l[D];N=D;for(var U in I)I.hasOwnProperty(U)&&(w[U]=I[U])},this.getFlavor=function(){return N},this.removeExtension=function(D){r.helper.isArray(D)||(D=[D]);for(var I=0;I<D.length;++I){for(var U=D[I],L=0;L<x.length;++L)x[L]===U&&x.splice(L,1);for(var q=0;q<M.length;++q)M[q]===U&&M.splice(q,1)}},this.getAllExtensions=function(){return{language:x,output:M}},this.getMetadata=function(D){return D?C.raw:C.parsed},this.getMetadataFormat=function(){return C.format},this._setMetadataPair=function(D,I){C.parsed[D]=I},this._setMetadataFormat=function(D){C.format=D},this._setMetadataRaw=function(D){C.raw=D}},r.subParser("anchors",function(g,w,x){g=x.converter._dispatch("anchors.before",g,w,x);var M=function(A,N,C,T,R,$,B){if(r.helper.isUndefined(B)&&(B=""),C=C.toLowerCase(),A.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)T="";else if(!T)if(C||(C=N.toLowerCase().replace(/ ?\n/g," ")),T="#"+C,!r.helper.isUndefined(x.gUrls[C]))T=x.gUrls[C],r.helper.isUndefined(x.gTitles[C])||(B=x.gTitles[C]);else return A;T=T.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var z='<a href="'+T+'"';return B!==""&&B!==null&&(B=B.replace(/"/g,"&quot;"),B=B.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),z+=' title="'+B+'"'),w.openLinksInNewWindow&&!/^#/.test(T)&&(z+=' rel="noopener noreferrer" target="E95Eblank"'),z+=">"+N+"</a>",z};return g=g.replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,M),g=g.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,M),g=g.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,M),g=g.replace(/\[([^\[\]]+)]()()()()()/g,M),w.ghMentions&&(g=g.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gmi,function(A,N,C,T,R){if(C==="\\")return N+T;if(!r.helper.isString(w.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var $=w.ghMentionsLink.replace(/\{u}/g,R),B="";return w.openLinksInNewWindow&&(B=' rel="noopener noreferrer" target="E95Eblank"'),N+'<a href="'+$+'"'+B+">"+T+"</a>"})),g=x.converter._dispatch("anchors.after",g,w,x),g});var d=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,h=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,m=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,v=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gmi,y=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,p=function(g){return function(w,x,M,A,N,C,T){M=M.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var R=M,$="",B="",z=x||"",D=T||"";return/^www\./i.test(M)&&(M=M.replace(/^www\./i,"http://www.")),g.excludeTrailingPunctuationFromURLs&&C&&($=C),g.openLinksInNewWindow&&(B=' rel="noopener noreferrer" target="E95Eblank"'),z+'<a href="'+M+'"'+B+">"+R+"</a>"+$+D}},S=function(g,w){return function(x,M,A){var N="mailto:";return M=M||"",A=r.subParser("unescapeSpecialChars")(A,g,w),g.encodeEmails?(N=r.helper.encodeEmailAddress(N+A),A=r.helper.encodeEmailAddress(A)):N=N+A,M+'<a href="'+N+'">'+A+"</a>"}};r.subParser("autoLinks",function(g,w,x){return g=x.converter._dispatch("autoLinks.before",g,w,x),g=g.replace(m,p(w)),g=g.replace(y,S(w,x)),g=x.converter._dispatch("autoLinks.after",g,w,x),g}),r.subParser("simplifiedAutoLinks",function(g,w,x){return w.simplifiedAutoLink&&(g=x.converter._dispatch("simplifiedAutoLinks.before",g,w,x),w.excludeTrailingPunctuationFromURLs?g=g.replace(h,p(w)):g=g.replace(d,p(w)),g=g.replace(v,S(w,x)),g=x.converter._dispatch("simplifiedAutoLinks.after",g,w,x)),g}),r.subParser("blockGamut",function(g,w,x){return g=x.converter._dispatch("blockGamut.before",g,w,x),g=r.subParser("blockQuotes")(g,w,x),g=r.subParser("headers")(g,w,x),g=r.subParser("horizontalRule")(g,w,x),g=r.subParser("lists")(g,w,x),g=r.subParser("codeBlocks")(g,w,x),g=r.subParser("tables")(g,w,x),g=r.subParser("hashHTMLBlocks")(g,w,x),g=r.subParser("paragraphs")(g,w,x),g=x.converter._dispatch("blockGamut.after",g,w,x),g}),r.subParser("blockQuotes",function(g,w,x){g=x.converter._dispatch("blockQuotes.before",g,w,x),g=g+`

`;var M=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return w.splitAdjacentBlockquotes&&(M=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),g=g.replace(M,function(A){return A=A.replace(/^[ \t]*>[ \t]?/gm,""),A=A.replace(/0/g,""),A=A.replace(/^[ \t]+$/gm,""),A=r.subParser("githubCodeBlocks")(A,w,x),A=r.subParser("blockGamut")(A,w,x),A=A.replace(/(^|\n)/g,"$1  "),A=A.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(N,C){var T=C;return T=T.replace(/^  /mg,"0"),T=T.replace(/0/g,""),T}),r.subParser("hashBlock")(`<blockquote>
`+A+`
</blockquote>`,w,x)}),g=x.converter._dispatch("blockQuotes.after",g,w,x),g}),r.subParser("codeBlocks",function(g,w,x){g=x.converter._dispatch("codeBlocks.before",g,w,x),g+="0";var M=/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=0))/g;return g=g.replace(M,function(A,N,C){var T=N,R=C,$=`
`;return T=r.subParser("outdent")(T,w,x),T=r.subParser("encodeCode")(T,w,x),T=r.subParser("detab")(T,w,x),T=T.replace(/^\n+/g,""),T=T.replace(/\n+$/g,""),w.omitExtraWLInCodeBlocks&&($=""),T="<pre><code>"+T+$+"</code></pre>",r.subParser("hashBlock")(T,w,x)+R}),g=g.replace(/0/,""),g=x.converter._dispatch("codeBlocks.after",g,w,x),g}),r.subParser("codeSpans",function(g,w,x){return g=x.converter._dispatch("codeSpans.before",g,w,x),typeof g>"u"&&(g=""),g=g.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(M,A,N,C){var T=C;return T=T.replace(/^([ \t]*)/g,""),T=T.replace(/[ \t]*$/g,""),T=r.subParser("encodeCode")(T,w,x),T=A+"<code>"+T+"</code>",T=r.subParser("hashHTMLSpans")(T,w,x),T}),g=x.converter._dispatch("codeSpans.after",g,w,x),g}),r.subParser("completeHTMLDocument",function(g,w,x){if(!w.completeHTMLDocument)return g;g=x.converter._dispatch("completeHTMLDocument.before",g,w,x);var M="html",A=`<!DOCTYPE HTML>
`,N="",C=`<meta charset="utf-8">
`,T="",R="";typeof x.metadata.parsed.doctype<"u"&&(A="<!DOCTYPE "+x.metadata.parsed.doctype+`>
`,M=x.metadata.parsed.doctype.toString().toLowerCase(),(M==="html"||M==="html5")&&(C='<meta charset="utf-8">'));for(var $ in x.metadata.parsed)if(x.metadata.parsed.hasOwnProperty($))switch($.toLowerCase()){case"doctype":break;case"title":N="<title>"+x.metadata.parsed.title+`</title>
`;break;case"charset":M==="html"||M==="html5"?C='<meta charset="'+x.metadata.parsed.charset+`">
`:C='<meta name="charset" content="'+x.metadata.parsed.charset+`">
`;break;case"language":case"lang":T=' lang="'+x.metadata.parsed[$]+'"',R+='<meta name="'+$+'" content="'+x.metadata.parsed[$]+`">
`;break;default:R+='<meta name="'+$+'" content="'+x.metadata.parsed[$]+`">
`}return g=A+"<html"+T+`>
<head>
`+N+C+R+`</head>
<body>
`+g.trim()+`
</body>
</html>`,g=x.converter._dispatch("completeHTMLDocument.after",g,w,x),g}),r.subParser("detab",function(g,w,x){return g=x.converter._dispatch("detab.before",g,w,x),g=g.replace(/\t(?=\t)/g,"    "),g=g.replace(/\t/g,"AB"),g=g.replace(/B(.+?)A/g,function(M,A){for(var N=A,C=4-N.length%4,T=0;T<C;T++)N+=" ";return N}),g=g.replace(/A/g,"    "),g=g.replace(/B/g,""),g=x.converter._dispatch("detab.after",g,w,x),g}),r.subParser("ellipsis",function(g,w,x){return w.ellipsis&&(g=x.converter._dispatch("ellipsis.before",g,w,x),g=g.replace(/\.\.\./g,""),g=x.converter._dispatch("ellipsis.after",g,w,x)),g}),r.subParser("emoji",function(g,w,x){if(!w.emoji)return g;g=x.converter._dispatch("emoji.before",g,w,x);var M=/:([\S]+?):/g;return g=g.replace(M,function(A,N){return r.helper.emojis.hasOwnProperty(N)?r.helper.emojis[N]:A}),g=x.converter._dispatch("emoji.after",g,w,x),g}),r.subParser("encodeAmpsAndAngles",function(g,w,x){return g=x.converter._dispatch("encodeAmpsAndAngles.before",g,w,x),g=g.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),g=g.replace(/<(?![a-z\/?$!])/gi,"&lt;"),g=g.replace(/</g,"&lt;"),g=g.replace(/>/g,"&gt;"),g=x.converter._dispatch("encodeAmpsAndAngles.after",g,w,x),g}),r.subParser("encodeBackslashEscapes",function(g,w,x){return g=x.converter._dispatch("encodeBackslashEscapes.before",g,w,x),g=g.replace(/\\(\\)/g,r.helper.escapeCharactersCallback),g=g.replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g,r.helper.escapeCharactersCallback),g=x.converter._dispatch("encodeBackslashEscapes.after",g,w,x),g}),r.subParser("encodeCode",function(g,w,x){return g=x.converter._dispatch("encodeCode.before",g,w,x),g=g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,r.helper.escapeCharactersCallback),g=x.converter._dispatch("encodeCode.after",g,w,x),g}),r.subParser("escapeSpecialCharsWithinTagAttributes",function(g,w,x){g=x.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",g,w,x);var M=/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,A=/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi;return g=g.replace(M,function(N){return N.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),g=g.replace(A,function(N){return N.replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),g=x.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",g,w,x),g}),r.subParser("githubCodeBlocks",function(g,w,x){return w.ghCodeBlocks?(g=x.converter._dispatch("githubCodeBlocks.before",g,w,x),g+="0",g=g.replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,function(M,A,N,C){var T=w.omitExtraWLInCodeBlocks?"":`
`;return C=r.subParser("encodeCode")(C,w,x),C=r.subParser("detab")(C,w,x),C=C.replace(/^\n+/g,""),C=C.replace(/\n+$/g,""),C="<pre><code"+(N?' class="'+N+" language-"+N+'"':"")+">"+C+T+"</code></pre>",C=r.subParser("hashBlock")(C,w,x),`

G`+(x.ghCodeBlocks.push({text:M,codeblock:C})-1)+`G

`}),g=g.replace(/0/,""),x.converter._dispatch("githubCodeBlocks.after",g,w,x)):g}),r.subParser("hashBlock",function(g,w,x){return g=x.converter._dispatch("hashBlock.before",g,w,x),g=g.replace(/(^\n+|\n+$)/g,""),g=`

K`+(x.gHtmlBlocks.push(g)-1)+`K

`,g=x.converter._dispatch("hashBlock.after",g,w,x),g}),r.subParser("hashCodeTags",function(g,w,x){g=x.converter._dispatch("hashCodeTags.before",g,w,x);var M=function(A,N,C,T){var R=C+r.subParser("encodeCode")(N,w,x)+T;return"C"+(x.gHtmlSpans.push(R)-1)+"C"};return g=r.helper.replaceRecursiveRegExp(g,M,"<code\\b[^>]*>","</code>","gim"),g=x.converter._dispatch("hashCodeTags.after",g,w,x),g}),r.subParser("hashElement",function(g,w,x){return function(M,A){var N=A;return N=N.replace(/\n\n/g,`
`),N=N.replace(/^\n/,""),N=N.replace(/\n+$/g,""),N=`

K`+(x.gHtmlBlocks.push(N)-1)+`K

`,N}}),r.subParser("hashHTMLBlocks",function(g,w,x){g=x.converter._dispatch("hashHTMLBlocks.before",g,w,x);var M=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],A=function(D,I,U,L){var q=D;return U.search(/\bmarkdown\b/)!==-1&&(q=U+x.converter.makeHtml(I)+L),`

K`+(x.gHtmlBlocks.push(q)-1)+`K

`};w.backslashEscapesHTMLTags&&(g=g.replace(/\\<(\/?[^>]+?)>/g,function(D,I){return"&lt;"+I+"&gt;"}));for(var N=0;N<M.length;++N)for(var C,T=new RegExp("^ {0,3}(<"+M[N]+"\\b[^>]*>)","im"),R="<"+M[N]+"\\b[^>]*>",$="</"+M[N]+">";(C=r.helper.regexIndexOf(g,T))!==-1;){var B=r.helper.splitAtIndex(g,C),z=r.helper.replaceRecursiveRegExp(B[1],A,R,$,"im");if(z===B[1])break;g=B[0].concat(z)}return g=g.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(g,w,x)),g=r.helper.replaceRecursiveRegExp(g,function(D){return`

K`+(x.gHtmlBlocks.push(D)-1)+`K

`},"^ {0,3}<!--","-->","gm"),g=g.replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(g,w,x)),g=x.converter._dispatch("hashHTMLBlocks.after",g,w,x),g}),r.subParser("hashHTMLSpans",function(g,w,x){g=x.converter._dispatch("hashHTMLSpans.before",g,w,x);function M(A){return"C"+(x.gHtmlSpans.push(A)-1)+"C"}return g=g.replace(/<[^>]+?\/>/gi,function(A){return M(A)}),g=g.replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,function(A){return M(A)}),g=g.replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,function(A){return M(A)}),g=g.replace(/<[^>]+?>/gi,function(A){return M(A)}),g=x.converter._dispatch("hashHTMLSpans.after",g,w,x),g}),r.subParser("unhashHTMLSpans",function(g,w,x){g=x.converter._dispatch("unhashHTMLSpans.before",g,w,x);for(var M=0;M<x.gHtmlSpans.length;++M){for(var A=x.gHtmlSpans[M],N=0;/C(\d+)C/.test(A);){var C=RegExp.$1;if(A=A.replace("C"+C+"C",x.gHtmlSpans[C]),N===10){console.error("maximum nesting of 10 spans reached!!!");break}++N}g=g.replace("C"+M+"C",A)}return g=x.converter._dispatch("unhashHTMLSpans.after",g,w,x),g}),r.subParser("hashPreCodeTags",function(g,w,x){g=x.converter._dispatch("hashPreCodeTags.before",g,w,x);var M=function(A,N,C,T){var R=C+r.subParser("encodeCode")(N,w,x)+T;return`

G`+(x.ghCodeBlocks.push({text:A,codeblock:R})-1)+`G

`};return g=r.helper.replaceRecursiveRegExp(g,M,"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),g=x.converter._dispatch("hashPreCodeTags.after",g,w,x),g}),r.subParser("headers",function(g,w,x){g=x.converter._dispatch("headers.before",g,w,x);var M=isNaN(parseInt(w.headerLevelStart))?1:parseInt(w.headerLevelStart),A=w.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,N=w.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;g=g.replace(A,function(R,$){var B=r.subParser("spanGamut")($,w,x),z=w.noHeaderId?"":' id="'+T($)+'"',D=M,I="<h"+D+z+">"+B+"</h"+D+">";return r.subParser("hashBlock")(I,w,x)}),g=g.replace(N,function(R,$){var B=r.subParser("spanGamut")($,w,x),z=w.noHeaderId?"":' id="'+T($)+'"',D=M+1,I="<h"+D+z+">"+B+"</h"+D+">";return r.subParser("hashBlock")(I,w,x)});var C=w.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;g=g.replace(C,function(R,$,B){var z=B;w.customizedHeaderId&&(z=B.replace(/\s?\{([^{]+?)}\s*$/,""));var D=r.subParser("spanGamut")(z,w,x),I=w.noHeaderId?"":' id="'+T(B)+'"',U=M-1+$.length,L="<h"+U+I+">"+D+"</h"+U+">";return r.subParser("hashBlock")(L,w,x)});function T(R){var $,B;if(w.customizedHeaderId){var z=R.match(/\{([^{]+?)}\s*$/);z&&z[1]&&(R=z[1])}return $=R,r.helper.isString(w.prefixHeaderId)?B=w.prefixHeaderId:w.prefixHeaderId===!0?B="section-":B="",w.rawPrefixHeaderId||($=B+$),w.ghCompatibleHeaderId?$=$.replace(/ /g,"-").replace(/&amp;/g,"").replace(/T/g,"").replace(/D/g,"").replace(/[&+$,\/:;=?@"#{}|^~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():w.rawHeaderId?$=$.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/T/g,"").replace(/D/g,"$").replace(/["']/g,"-").toLowerCase():$=$.replace(/[^\w]/g,"").toLowerCase(),w.rawPrefixHeaderId&&($=B+$),x.hashLinkCounts[$]?$=$+"-"+x.hashLinkCounts[$]++:x.hashLinkCounts[$]=1,$}return g=x.converter._dispatch("headers.after",g,w,x),g}),r.subParser("horizontalRule",function(g,w,x){g=x.converter._dispatch("horizontalRule.before",g,w,x);var M=r.subParser("hashBlock")("<hr />",w,x);return g=g.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,M),g=g.replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,M),g=g.replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,M),g=x.converter._dispatch("horizontalRule.after",g,w,x),g}),r.subParser("images",function(g,w,x){g=x.converter._dispatch("images.before",g,w,x);var M=/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,A=/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,N=/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,C=/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,T=/!\[([^\[\]]+)]()()()()()/g;function R(B,z,D,I,U,L,q,Z){return I=I.replace(/\s/g,""),$(B,z,D,I,U,L,q,Z)}function $(B,z,D,I,U,L,q,Z){var J=x.gUrls,Y=x.gTitles,ee=x.gDimensions;if(D=D.toLowerCase(),Z||(Z=""),B.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)I="";else if(I===""||I===null)if((D===""||D===null)&&(D=z.toLowerCase().replace(/ ?\n/g," ")),I="#"+D,!r.helper.isUndefined(J[D]))I=J[D],r.helper.isUndefined(Y[D])||(Z=Y[D]),r.helper.isUndefined(ee[D])||(U=ee[D].width,L=ee[D].height);else return B;z=z.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),I=I.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var ae='<img src="'+I+'" alt="'+z+'"';return Z&&r.helper.isString(Z)&&(Z=Z.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),ae+=' title="'+Z+'"'),U&&L&&(U=U==="*"?"auto":U,L=L==="*"?"auto":L,ae+=' width="'+U+'"',ae+=' height="'+L+'"'),ae+=" />",ae}return g=g.replace(C,$),g=g.replace(N,R),g=g.replace(A,$),g=g.replace(M,$),g=g.replace(T,$),g=x.converter._dispatch("images.after",g,w,x),g}),r.subParser("italicsAndBold",function(g,w,x){g=x.converter._dispatch("italicsAndBold.before",g,w,x);function M(A,N,C){return N+A+C}return w.literalMidWordUnderscores?(g=g.replace(/\b___(\S[\s\S]*?)___\b/g,function(A,N){return M(N,"<strong><em>","</em></strong>")}),g=g.replace(/\b__(\S[\s\S]*?)__\b/g,function(A,N){return M(N,"<strong>","</strong>")}),g=g.replace(/\b_(\S[\s\S]*?)_\b/g,function(A,N){return M(N,"<em>","</em>")})):(g=g.replace(/___(\S[\s\S]*?)___/g,function(A,N){return/\S$/.test(N)?M(N,"<strong><em>","</em></strong>"):A}),g=g.replace(/__(\S[\s\S]*?)__/g,function(A,N){return/\S$/.test(N)?M(N,"<strong>","</strong>"):A}),g=g.replace(/_([^\s_][\s\S]*?)_/g,function(A,N){return/\S$/.test(N)?M(N,"<em>","</em>"):A})),w.literalMidWordAsterisks?(g=g.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,function(A,N,C){return M(C,N+"<strong><em>","</em></strong>")}),g=g.replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,function(A,N,C){return M(C,N+"<strong>","</strong>")}),g=g.replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,function(A,N,C){return M(C,N+"<em>","</em>")})):(g=g.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,function(A,N){return/\S$/.test(N)?M(N,"<strong><em>","</em></strong>"):A}),g=g.replace(/\*\*(\S[\s\S]*?)\*\*/g,function(A,N){return/\S$/.test(N)?M(N,"<strong>","</strong>"):A}),g=g.replace(/\*([^\s*][\s\S]*?)\*/g,function(A,N){return/\S$/.test(N)?M(N,"<em>","</em>"):A})),g=x.converter._dispatch("italicsAndBold.after",g,w,x),g}),r.subParser("lists",function(g,w,x){function M(C,T){x.gListLevel++,C=C.replace(/\n{2,}$/,`
`),C+="0";var R=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,$=/\n[ \t]*\n(?!0)/.test(C);return w.disableForced4SpacesIndentedSublists&&(R=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0|\2([*+-]|\d+[.])[ \t]+))/gm),C=C.replace(R,function(B,z,D,I,U,L,q){q=q&&q.trim()!=="";var Z=r.subParser("outdent")(U,w,x),J="";return L&&w.tasklists&&(J=' class="task-list-item" style="list-style-type: none;"',Z=Z.replace(/^[ \t]*\[(x|X| )?]/m,function(){var Y='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return q&&(Y+=" checked"),Y+=">",Y})),Z=Z.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,function(Y){return"A"+Y}),z||Z.search(/\n{2,}/)>-1?(Z=r.subParser("githubCodeBlocks")(Z,w,x),Z=r.subParser("blockGamut")(Z,w,x)):(Z=r.subParser("lists")(Z,w,x),Z=Z.replace(/\n$/,""),Z=r.subParser("hashHTMLBlocks")(Z,w,x),Z=Z.replace(/\n\n+/g,`

`),$?Z=r.subParser("paragraphs")(Z,w,x):Z=r.subParser("spanGamut")(Z,w,x)),Z=Z.replace("A",""),Z="<li"+J+">"+Z+`</li>
`,Z}),C=C.replace(/0/g,""),x.gListLevel--,T&&(C=C.replace(/\s+$/,"")),C}function A(C,T){if(T==="ol"){var R=C.match(/^ *(\d+)\./);if(R&&R[1]!=="1")return' start="'+R[1]+'"'}return""}function N(C,T,R){var $=w.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,B=w.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,z=T==="ul"?$:B,D="";if(C.search(z)!==-1)(function U(L){var q=L.search(z),Z=A(C,T);q!==-1?(D+=`

<`+T+Z+`>
`+M(L.slice(0,q),!!R)+"</"+T+`>
`,T=T==="ul"?"ol":"ul",z=T==="ul"?$:B,U(L.slice(q))):D+=`

<`+T+Z+`>
`+M(L,!!R)+"</"+T+`>
`})(C);else{var I=A(C,T);D=`

<`+T+I+`>
`+M(C,!!R)+"</"+T+`>
`}return D}return g=x.converter._dispatch("lists.before",g,w,x),g+="0",x.gListLevel?g=g.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(C,T,R){var $=R.search(/[*+-]/g)>-1?"ul":"ol";return N(T,$,!0)}):g=g.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(C,T,R,$){var B=$.search(/[*+-]/g)>-1?"ul":"ol";return N(R,B,!1)}),g=g.replace(/0/,""),g=x.converter._dispatch("lists.after",g,w,x),g}),r.subParser("metadata",function(g,w,x){if(!w.metadata)return g;g=x.converter._dispatch("metadata.before",g,w,x);function M(A){x.metadata.raw=A,A=A.replace(/&/g,"&amp;").replace(/"/g,"&quot;"),A=A.replace(/\n {4}/g," "),A.replace(/^([\S ]+): +([\s\S]+?)$/gm,function(N,C,T){return x.metadata.parsed[C]=T,""})}return g=g.replace(/^\s*+(\S*?)\n([\s\S]+?)\n+\n/,function(A,N,C){return M(C),"M"}),g=g.replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,function(A,N,C){return N&&(x.metadata.format=N),M(C),"M"}),g=g.replace(/M/g,""),g=x.converter._dispatch("metadata.after",g,w,x),g}),r.subParser("outdent",function(g,w,x){return g=x.converter._dispatch("outdent.before",g,w,x),g=g.replace(/^(\t|[ ]{1,4})/gm,"0"),g=g.replace(/0/g,""),g=x.converter._dispatch("outdent.after",g,w,x),g}),r.subParser("paragraphs",function(g,w,x){g=x.converter._dispatch("paragraphs.before",g,w,x),g=g.replace(/^\n+/g,""),g=g.replace(/\n+$/g,"");for(var M=g.split(/\n{2,}/g),A=[],N=M.length,C=0;C<N;C++){var T=M[C];T.search(/(K|G)(\d+)\1/g)>=0?A.push(T):T.search(/\S/)>=0&&(T=r.subParser("spanGamut")(T,w,x),T=T.replace(/^([ \t]*)/g,"<p>"),T+="</p>",A.push(T))}for(N=A.length,C=0;C<N;C++){for(var R="",$=A[C],B=!1;/(K|G)(\d+)\1/.test($);){var z=RegExp.$1,D=RegExp.$2;z==="K"?R=x.gHtmlBlocks[D]:B?R=r.subParser("encodeCode")(x.ghCodeBlocks[D].text,w,x):R=x.ghCodeBlocks[D].codeblock,R=R.replace(/\$/g,"$$$$"),$=$.replace(/(\n\n)?(K|G)\d+\2(\n\n)?/,R),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test($)&&(B=!0)}A[C]=$}return g=A.join(`
`),g=g.replace(/^\n+/g,""),g=g.replace(/\n+$/g,""),x.converter._dispatch("paragraphs.after",g,w,x)}),r.subParser("runExtension",function(g,w,x,M){if(g.filter)w=g.filter(w,M.converter,x);else if(g.regex){var A=g.regex;A instanceof RegExp||(A=new RegExp(A,"g")),w=w.replace(A,g.replace)}return w}),r.subParser("spanGamut",function(g,w,x){return g=x.converter._dispatch("spanGamut.before",g,w,x),g=r.subParser("codeSpans")(g,w,x),g=r.subParser("escapeSpecialCharsWithinTagAttributes")(g,w,x),g=r.subParser("encodeBackslashEscapes")(g,w,x),g=r.subParser("images")(g,w,x),g=r.subParser("anchors")(g,w,x),g=r.subParser("autoLinks")(g,w,x),g=r.subParser("simplifiedAutoLinks")(g,w,x),g=r.subParser("emoji")(g,w,x),g=r.subParser("underline")(g,w,x),g=r.subParser("italicsAndBold")(g,w,x),g=r.subParser("strikethrough")(g,w,x),g=r.subParser("ellipsis")(g,w,x),g=r.subParser("hashHTMLSpans")(g,w,x),g=r.subParser("encodeAmpsAndAngles")(g,w,x),w.simpleLineBreaks?/\n\nK/.test(g)||(g=g.replace(/\n+/g,`<br />
`)):g=g.replace(/  +\n/g,`<br />
`),g=x.converter._dispatch("spanGamut.after",g,w,x),g}),r.subParser("strikethrough",function(g,w,x){function M(A){return w.simplifiedAutoLink&&(A=r.subParser("simplifiedAutoLinks")(A,w,x)),"<del>"+A+"</del>"}return w.strikethrough&&(g=x.converter._dispatch("strikethrough.before",g,w,x),g=g.replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,function(A,N){return M(N)}),g=x.converter._dispatch("strikethrough.after",g,w,x)),g}),r.subParser("stripLinkDefinitions",function(g,w,x){var M=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=0))/gm,A=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=0)|(?=\n\[))/gm;g+="0";var N=function(C,T,R,$,B,z,D){return T=T.toLowerCase(),g.toLowerCase().split(T).length-1<2?C:(R.match(/^data:.+?\/.+?;base64,/)?x.gUrls[T]=R.replace(/\s/g,""):x.gUrls[T]=r.subParser("encodeAmpsAndAngles")(R,w,x),z?z+D:(D&&(x.gTitles[T]=D.replace(/"|'/g,"&quot;")),w.parseImgDimensions&&$&&B&&(x.gDimensions[T]={width:$,height:B}),""))};return g=g.replace(A,N),g=g.replace(M,N),g=g.replace(/0/,""),g}),r.subParser("tables",function(g,w,x){if(!w.tables)return g;var M=/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|0)/gm,A=/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|0)/gm;function N(B){return/^:[ \t]*--*$/.test(B)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(B)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(B)?' style="text-align:center;"':""}function C(B,z){var D="";return B=B.trim(),(w.tablesHeaderId||w.tableHeaderId)&&(D=' id="'+B.replace(/ /g,"_").toLowerCase()+'"'),B=r.subParser("spanGamut")(B,w,x),"<th"+D+z+">"+B+`</th>
`}function T(B,z){var D=r.subParser("spanGamut")(B,w,x);return"<td"+z+">"+D+`</td>
`}function R(B,z){for(var D=`<table>
<thead>
<tr>
`,I=B.length,U=0;U<I;++U)D+=B[U];for(D+=`</tr>
</thead>
<tbody>
`,U=0;U<z.length;++U){D+=`<tr>
`;for(var L=0;L<I;++L)D+=z[U][L];D+=`</tr>
`}return D+=`</tbody>
</table>
`,D}function $(B){var z,D=B.split(`
`);for(z=0;z<D.length;++z)/^ {0,3}\|/.test(D[z])&&(D[z]=D[z].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(D[z])&&(D[z]=D[z].replace(/\|[ \t]*$/,"")),D[z]=r.subParser("codeSpans")(D[z],w,x);var I=D[0].split("|").map(function(ae){return ae.trim()}),U=D[1].split("|").map(function(ae){return ae.trim()}),L=[],q=[],Z=[],J=[];for(D.shift(),D.shift(),z=0;z<D.length;++z)D[z].trim()!==""&&L.push(D[z].split("|").map(function(ae){return ae.trim()}));if(I.length<U.length)return B;for(z=0;z<U.length;++z)Z.push(N(U[z]));for(z=0;z<I.length;++z)r.helper.isUndefined(Z[z])&&(Z[z]=""),q.push(C(I[z],Z[z]));for(z=0;z<L.length;++z){for(var Y=[],ee=0;ee<q.length;++ee)r.helper.isUndefined(L[z][ee]),Y.push(T(L[z][ee],Z[ee]));J.push(Y)}return R(q,J)}return g=x.converter._dispatch("tables.before",g,w,x),g=g.replace(/\\(\|)/g,r.helper.escapeCharactersCallback),g=g.replace(M,$),g=g.replace(A,$),g=x.converter._dispatch("tables.after",g,w,x),g}),r.subParser("underline",function(g,w,x){return w.underline&&(g=x.converter._dispatch("underline.before",g,w,x),w.literalMidWordUnderscores?(g=g.replace(/\b___(\S[\s\S]*?)___\b/g,function(M,A){return"<u>"+A+"</u>"}),g=g.replace(/\b__(\S[\s\S]*?)__\b/g,function(M,A){return"<u>"+A+"</u>"})):(g=g.replace(/___(\S[\s\S]*?)___/g,function(M,A){return/\S$/.test(A)?"<u>"+A+"</u>":M}),g=g.replace(/__(\S[\s\S]*?)__/g,function(M,A){return/\S$/.test(A)?"<u>"+A+"</u>":M})),g=g.replace(/(_)/g,r.helper.escapeCharactersCallback),g=x.converter._dispatch("underline.after",g,w,x)),g}),r.subParser("unescapeSpecialChars",function(g,w,x){return g=x.converter._dispatch("unescapeSpecialChars.before",g,w,x),g=g.replace(/E(\d+)E/g,function(M,A){var N=parseInt(A);return String.fromCharCode(N)}),g=x.converter._dispatch("unescapeSpecialChars.after",g,w,x),g}),r.subParser("makeMarkdown.blockquote",function(g,w){var x="";if(g.hasChildNodes())for(var M=g.childNodes,A=M.length,N=0;N<A;++N){var C=r.subParser("makeMarkdown.node")(M[N],w);C!==""&&(x+=C)}return x=x.trim(),x="> "+x.split(`
`).join(`
> `),x}),r.subParser("makeMarkdown.codeBlock",function(g,w){var x=g.getAttribute("language"),M=g.getAttribute("precodenum");return"```"+x+`
`+w.preList[M]+"\n```"}),r.subParser("makeMarkdown.codeSpan",function(g){return"`"+g.innerHTML+"`"}),r.subParser("makeMarkdown.emphasis",function(g,w){var x="";if(g.hasChildNodes()){x+="*";for(var M=g.childNodes,A=M.length,N=0;N<A;++N)x+=r.subParser("makeMarkdown.node")(M[N],w);x+="*"}return x}),r.subParser("makeMarkdown.header",function(g,w,x){var M=new Array(x+1).join("#"),A="";if(g.hasChildNodes()){A=M+" ";for(var N=g.childNodes,C=N.length,T=0;T<C;++T)A+=r.subParser("makeMarkdown.node")(N[T],w)}return A}),r.subParser("makeMarkdown.hr",function(){return"---"}),r.subParser("makeMarkdown.image",function(g){var w="";return g.hasAttribute("src")&&(w+="!["+g.getAttribute("alt")+"](",w+="<"+g.getAttribute("src")+">",g.hasAttribute("width")&&g.hasAttribute("height")&&(w+=" ="+g.getAttribute("width")+"x"+g.getAttribute("height")),g.hasAttribute("title")&&(w+=' "'+g.getAttribute("title")+'"'),w+=")"),w}),r.subParser("makeMarkdown.links",function(g,w){var x="";if(g.hasChildNodes()&&g.hasAttribute("href")){var M=g.childNodes,A=M.length;x="[";for(var N=0;N<A;++N)x+=r.subParser("makeMarkdown.node")(M[N],w);x+="](",x+="<"+g.getAttribute("href")+">",g.hasAttribute("title")&&(x+=' "'+g.getAttribute("title")+'"'),x+=")"}return x}),r.subParser("makeMarkdown.list",function(g,w,x){var M="";if(!g.hasChildNodes())return"";for(var A=g.childNodes,N=A.length,C=g.getAttribute("start")||1,T=0;T<N;++T)if(!(typeof A[T].tagName>"u"||A[T].tagName.toLowerCase()!=="li")){var R="";x==="ol"?R=C.toString()+". ":R="- ",M+=R+r.subParser("makeMarkdown.listItem")(A[T],w),++C}return M+=`
<!-- -->
`,M.trim()}),r.subParser("makeMarkdown.listItem",function(g,w){for(var x="",M=g.childNodes,A=M.length,N=0;N<A;++N)x+=r.subParser("makeMarkdown.node")(M[N],w);return/\n$/.test(x)?x=x.split(`
`).join(`
    `).replace(/^ {4}$/gm,"").replace(/\n\n+/g,`

`):x+=`
`,x}),r.subParser("makeMarkdown.node",function(g,w,x){x=x||!1;var M="";if(g.nodeType===3)return r.subParser("makeMarkdown.txt")(g,w);if(g.nodeType===8)return"<!--"+g.data+`-->

`;if(g.nodeType!==1)return"";var A=g.tagName.toLowerCase();switch(A){case"h1":x||(M=r.subParser("makeMarkdown.header")(g,w,1)+`

`);break;case"h2":x||(M=r.subParser("makeMarkdown.header")(g,w,2)+`

`);break;case"h3":x||(M=r.subParser("makeMarkdown.header")(g,w,3)+`

`);break;case"h4":x||(M=r.subParser("makeMarkdown.header")(g,w,4)+`

`);break;case"h5":x||(M=r.subParser("makeMarkdown.header")(g,w,5)+`

`);break;case"h6":x||(M=r.subParser("makeMarkdown.header")(g,w,6)+`

`);break;case"p":x||(M=r.subParser("makeMarkdown.paragraph")(g,w)+`

`);break;case"blockquote":x||(M=r.subParser("makeMarkdown.blockquote")(g,w)+`

`);break;case"hr":x||(M=r.subParser("makeMarkdown.hr")(g,w)+`

`);break;case"ol":x||(M=r.subParser("makeMarkdown.list")(g,w,"ol")+`

`);break;case"ul":x||(M=r.subParser("makeMarkdown.list")(g,w,"ul")+`

`);break;case"precode":x||(M=r.subParser("makeMarkdown.codeBlock")(g,w)+`

`);break;case"pre":x||(M=r.subParser("makeMarkdown.pre")(g,w)+`

`);break;case"table":x||(M=r.subParser("makeMarkdown.table")(g,w)+`

`);break;case"code":M=r.subParser("makeMarkdown.codeSpan")(g,w);break;case"em":case"i":M=r.subParser("makeMarkdown.emphasis")(g,w);break;case"strong":case"b":M=r.subParser("makeMarkdown.strong")(g,w);break;case"del":M=r.subParser("makeMarkdown.strikethrough")(g,w);break;case"a":M=r.subParser("makeMarkdown.links")(g,w);break;case"img":M=r.subParser("makeMarkdown.image")(g,w);break;default:M=g.outerHTML+`

`}return M}),r.subParser("makeMarkdown.paragraph",function(g,w){var x="";if(g.hasChildNodes())for(var M=g.childNodes,A=M.length,N=0;N<A;++N)x+=r.subParser("makeMarkdown.node")(M[N],w);return x=x.trim(),x}),r.subParser("makeMarkdown.pre",function(g,w){var x=g.getAttribute("prenum");return"<pre>"+w.preList[x]+"</pre>"}),r.subParser("makeMarkdown.strikethrough",function(g,w){var x="";if(g.hasChildNodes()){x+="~~";for(var M=g.childNodes,A=M.length,N=0;N<A;++N)x+=r.subParser("makeMarkdown.node")(M[N],w);x+="~~"}return x}),r.subParser("makeMarkdown.strong",function(g,w){var x="";if(g.hasChildNodes()){x+="**";for(var M=g.childNodes,A=M.length,N=0;N<A;++N)x+=r.subParser("makeMarkdown.node")(M[N],w);x+="**"}return x}),r.subParser("makeMarkdown.table",function(g,w){var x="",M=[[],[]],A=g.querySelectorAll("thead>tr>th"),N=g.querySelectorAll("tbody>tr"),C,T;for(C=0;C<A.length;++C){var R=r.subParser("makeMarkdown.tableCell")(A[C],w),$="---";if(A[C].hasAttribute("style")){var B=A[C].getAttribute("style").toLowerCase().replace(/\s/g,"");switch(B){case"text-align:left;":$=":---";break;case"text-align:right;":$="---:";break;case"text-align:center;":$=":---:";break}}M[0][C]=R.trim(),M[1][C]=$}for(C=0;C<N.length;++C){var z=M.push([])-1,D=N[C].getElementsByTagName("td");for(T=0;T<A.length;++T){var I=" ";typeof D[T]<"u"&&(I=r.subParser("makeMarkdown.tableCell")(D[T],w)),M[z].push(I)}}var U=3;for(C=0;C<M.length;++C)for(T=0;T<M[C].length;++T){var L=M[C][T].length;L>U&&(U=L)}for(C=0;C<M.length;++C){for(T=0;T<M[C].length;++T)C===1?M[C][T].slice(-1)===":"?M[C][T]=r.helper.padEnd(M[C][T].slice(-1),U-1,"-")+":":M[C][T]=r.helper.padEnd(M[C][T],U,"-"):M[C][T]=r.helper.padEnd(M[C][T],U);x+="| "+M[C].join(" | ")+` |
`}return x.trim()}),r.subParser("makeMarkdown.tableCell",function(g,w){var x="";if(!g.hasChildNodes())return"";for(var M=g.childNodes,A=M.length,N=0;N<A;++N)x+=r.subParser("makeMarkdown.node")(M[N],w,!0);return x.trim()}),r.subParser("makeMarkdown.txt",function(g){var w=g.nodeValue;return w=w.replace(/ +/g," "),w=w.replace(/NBSP;/g," "),w=r.helper.unescapeHTMLEntities(w),w=w.replace(/([*_~|`])/g,"\\$1"),w=w.replace(/^(\s*)>/g,"\\$1>"),w=w.replace(/^#/gm,"\\#"),w=w.replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3"),w=w.replace(/^( {0,3}\d+)\./gm,"$1\\."),w=w.replace(/^( {0,3})([+-])/gm,"$1\\$2"),w=w.replace(/]([\s]*)\(/g,"\\]$1\\("),w=w.replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:"),w});var b=this;n.exports?n.exports=r:b.showdown=r}).call(go)})(QMe);class Bn{constructor(e){this.inputs=[],this.output=null,this.uniqueID=O.generateUniqueID(),this.description="none",this.x=0,this.y=0,this.radius=1/75,this.defaultColor="#F3EFEF",this.selectedColor="#484848",this.strokeColor="#484848",this.selected=!1,this.color="#F3EFEF",this.name="name0",this.parentMolecule=null,this.value=null,this.isMoving=!1,this.showHover=!1,this.x=0,this.y=0,this.alertMessage="",this.processing=!1;for(var t in e)this[t]=e[t]}setValues(e){for(var t in e)this[t]=e[t];typeof this.ioValues<"u"&&this.ioValues.forEach(r=>{this.inputs.forEach(i=>{r.name==i.name&&i.type=="input"&&(i.value=r.ioValue)})})}draw(e){let t=O.widthToPixels(this.x),r=O.heightToPixels(this.y),i=O.widthToPixels(this.radius);if(this.inputs.forEach(s=>{s.draw()}),O.c.beginPath(),O.c.font="10px Work Sans",this.processing?O.c.fillStyle="blue":this.selected?(O.c.fillStyle=this.selectedColor,O.c.strokeStyle=this.selectedColor,this.color=this.selectedColor,this.strokeColor=this.defaultColor):(O.c.fillStyle=this.defaultColor,O.c.strokeStyle=this.selectedColor,this.color=this.defaultColor,this.strokeColor=this.selectedColor),O.c.beginPath(),e=="rect"?O.c.rect(t-i*1.25,r-this.height/1.5,2.5*i,this.height*1.25):e=="square"?O.c.rect(t-i,r-i,2*i,2*i):O.c.arc(t,r,i,0,Math.PI*2,!1),O.c.textAlign="start",O.c.fill(),O.c.strokeStyle=this.strokeColor,O.c.fillStyle="white",O.c.stroke(),O.c.closePath(),O.c.beginPath(),O.c.textAlign="start",O.c.fillText(this.name,t+i,r-i),O.c.fill(),O.c.strokeStyle=this.strokeColor,O.c.lineWidth=1,O.c.stroke(),O.c.closePath(),this.showHover&&this.alertMessage.length>0){this.color="red",O.c.beginPath();const s=10;O.c.fillStyle="red",O.c.rect(t+i-s/2,r-i+s/2,O.c.measureText(this.alertMessage.toUpperCase()).width+s,-(parseInt(O.c.font)+s)),O.c.fill(),O.c.strokeStyle="black",O.c.lineWidth=1,O.c.stroke(),O.c.closePath(),O.c.beginPath(),O.c.fillStyle="black",O.c.fillText(this.alertMessage.toUpperCase(),t+i,r-i),O.c.closePath()}}addIO(e,t,r,i,s,o,a=!1){if(r.inputs.find(c=>c.name===t&&c.type===e)==null){var l;e=="input"?l=-1*r.scaledRadius:l=r.scaledRadius;var u=new co({parentMolecule:r,defaultOffsetX:l,defaultOffsetY:0,type:e,valueType:i,name:t,primary:a,value:s,defaultValue:s,uniqueID:O.generateUniqueID(),atomType:"AttachmentPoint",ready:!0});e=="input"?r.inputs.push(u):r.output=u}}removeIO(e,t,r,i=!1){r.inputs.forEach(s=>{s.name==t&&s.type==e&&(r.inputs.splice(r.inputs.indexOf(s),1),s.deleteSelf(i))})}alertingErrorHandler(){return e=>{this.processing=!1,console.log(e),this.setAlert(e.message)}}setAlert(e){this.color="orange",this.alertMessage=String(e)}clearAlert(){this.color=this.defaultColor,this.alertMessage=""}selectBox(e,t,r,i){let s=Math.min(e,r),o=Math.max(e,r),a=Math.min(t,i),l=Math.max(t,i),u=O.widthToPixels(this.x),c=O.heightToPixels(this.y);u>=s&&u<=o&&c>=a&&c<=l&&(this.selected=!0)}clickDown(e,t,r){let i=O.widthToPixels(this.x),s=O.heightToPixels(this.y),o=O.widthToPixels(this.radius),a;return!r&&O.distBetweenPoints(e,i,t,s)<o?(this.isMoving=!0,this.selected=!0,a=this,this.sendToRender()):O.ctrlDown||(this.selected=!1),this.inputs.forEach(l=>{l.clickDown(e,t,r)==!0&&(r=!0)}),this.output&&!a&&this.output.clickDown(e,t,r)==!0&&(r=!0),a}doubleClick(e,t){let r=O.widthToPixels(this.x),i=O.heightToPixels(this.y);var s=!1,o=O.distBetweenPoints(e,r,t,i);return o<r&&(s=!0),s}clickUp(e,t){this.isMoving=!1,this.inputs.forEach(r=>{r.clickUp(e,t)}),this.output&&this.output.clickUp(e,t)}mouseMove(e,t){let r=O.widthToPixels(this.x),i=O.heightToPixels(this.y),s=O.widthToPixels(this.radius);this.isMoving==!0&&(this.x=O.pixelsToWidth(e),this.y=O.pixelsToHeight(t)),this.inputs.forEach(a=>{a.mouseMove(e,t)}),this.output&&this.output.mouseMove(e,t);var o=O.distBetweenPoints(e,r,t,i);o<s?this.showHover=!0:this.showHover=!1}keyPress(e){this.inputs.forEach(t=>{t.keyPress(e)})}deleteNode(e=!0,t=!0,r=!1){this.inputs.forEach(s=>{s.ready=!1}),[...this.inputs].forEach(s=>{s.deleteSelf(r)}),this.output&&this.output.deleteSelf(r),O.cad.deleteFromLibrary(this.uniqueID).then(()=>{}),this.parent.nodesOnTheScreen.splice(this.parent.nodesOnTheScreen.indexOf(this),1)}update(){this.inputs.forEach(e=>{e.update()}),this.output&&this.output.update(),this.draw()}serialize(e={x:0,y:0}){var t=[];this.inputs.forEach(i=>{if(typeof i.getValue()=="number"||typeof i.getValue()=="string"){var s={name:i.name,ioValue:i.getValue()};t.push(s)}});var r={atomType:this.atomType,name:this.name,x:this.x+e.x,y:this.y-e.y,uniqueID:this.uniqueID,ioValues:t,description:this.description};return r}requestReadme(){return[]}decreaseToProcessCountByOne(){O.topLevelMolecule.census()}updateValue(){this.waitOnComingInformation()}walkBackForConstants(e){this.inputs.forEach(t=>{t.connectors.forEach(r=>{r.walkBackForConstants(e)})})}waitOnComingInformation(){this.output&&this.output.waitOnComingInformation(),this.processing}basicThreadValueProcessing(){this.decreaseToProcessCountByOne(),this.clearAlert(),this.output&&(this.output.setValue(this.uniqueID),this.output.ready=!0),this.processing=!1,this.selected&&this.sendToRender()}beginPropagation(){}census(){var e=0;return this.inputs.forEach(t=>{t.ready!=!0&&(e=1)}),[1,e]}sendToRender(){try{O.writeToDisplay(this.uniqueID)}catch(e){this.setAlert(e)}}createLevaInputs(){let e={};if(this.inputs)return this.inputs.map(t=>{const r=()=>t.connectors.length>0;t.valueType!=="geometry"&&(e[this.uniqueID+t.name]={value:t.value,label:t.name,step:.25,disabled:r(),onChange:i=>{t.value!==i&&t.setValue(i)}})}),e}findIOValue(e){e=e.split("~").join("");var t=null;return this.inputs.forEach(r=>{r.name==e&&r.type=="input"&&(t=r.getValue())}),t}}const rz=function(n){var e=0;return n.inputs.forEach(t=>{t.type=="input"&&t.connectors.length==0&&(e=e+1)}),e},e2e=function(n){var e;for(e=0;e<n.inputs.length-1;e++){var t=n.inputs[e];if(t.type=="input"&&t.connectors.length==0){n.removeIO("input",t.name,n);return}}},iz=function(n){var e=0;return n.inputs.forEach(t=>{e=Math.max(e,parseInt(t.name.match(/\d+$/)[0]))}),e},v0=n=>{rz(n)==0&&(iz(n),n.addIO("input","Shape "+(iz(n)+1),n,"geometry","",!0)),rz(n)>=2&&e2e(n)};class t2e extends Bn{constructor(e){super(e),this.addIO("output","geometry",this,"geometry",""),this.name="Join",this.atomType="Join",this.ioValues=[],this.removeCutawayGeometry=!0,this.description="Pick between assembly and fusion to join input geometries. Assembly takes multiple shapes together into one, shapes higher in the inputs list will cut into shapes lower on the input list where they overlap. Fusion takes all shapes or sketches and fuses them permanently into a single shape",this.setValues(e),typeof this.ioValues<"u"&&this.ioValues.forEach(t=>{this.addIO("input",t.name,this,"geometry","")}),this.unionType,this.unionIndex=0,this.setValues([])}beginPropagation(){super.beginPropagation()}draw(){super.draw();const e=O.widthToPixels(this.x),t=O.heightToPixels(this.y),r=O.widthToPixels(this.radius);O.c.beginPath(),O.c.fillStyle="#949294",O.c.moveTo(e-r/2,t+r/2),O.c.lineTo(e+r/2,t+r/2),O.c.lineTo(e+r/2,t),O.c.lineTo(e-r/2,t),O.c.lineTo(e-r/2,t+r/2),O.c.stroke(),O.c.closePath(),O.c.beginPath(),O.c.lineTo(e+r/4,t-r/2),O.c.lineTo(e-r/4,t-r/2),O.c.lineTo(e-r/4,t),O.c.lineTo(e+r/2,t),O.c.lineTo(e+r/4,t-r/2),O.c.lineWidth=1,O.c.lineJoin="round",O.c.stroke(),O.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(t=>t.ready)){this.processing=!0;var e=[];this.inputs.forEach(t=>{t.connectors.length>0&&t.type=="input"&&e.push(t.getValue())}),this.unionType==="Fusion"?O.cad.fusion(this.uniqueID,e).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler()):this.unionType==="Assembly"&&O.cad.assembly(e,this.uniqueID).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler()),v0(this)}}createLevaInputs(){let e={};const t=["Assembly","Fusion"];return e[this.uniqueID+"union_ops"]={value:this.unionType||t[this.unionIndex],options:t,label:"Union Type",onChange:r=>{this.unionIndex=t.indexOf(r),this.unionType!==t[this.unionIndex]&&(this.unionType=t[this.unionIndex],this.name=this.unionType,this.updateValue())}},e}serialize(e){var t=super.serialize(e),r=[];return this.inputs.forEach(i=>{if(i.connectors.length>0){var s={name:i.name,ioValue:i.getValue()};r.push(s)}}),t.ioValues=r,t.unionType=this.unionType,t}}class n2e extends Bn{constructor(e){super(e),this.name="Circle",this.atomType="Circle",this.description="Creates a new circle.",this.addIO("input","diameter",this,"number",10),this.addIO("output","geometry",this,"geometry",""),this.setValues(e)}beginPropagation(e=!1){this.inputs.forEach(t=>{t.beginPropagation()})}draw(){super.draw(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.arc(O.widthToPixels(this.x),O.heightToPixels(this.y),O.widthToPixels(this.radius/2),0,Math.PI*2,!1),O.c.stroke(),O.c.closePath()}updateValue(){super.updateValue();var e=this.findIOValue("diameter");O.cad.circle(this.uniqueID,e).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}let r2e=class extends Bn{constructor(e){super(e),this.name="Color",this.atomType="Color",this.description="Changes the color of the shape.",this.selectedColorIndex=0,this.colorOptions={Red:"#FF9065",Orange:"#FFB458",Yellow:"#FFD600",Olive:"#C7DF66",Teal:"#71D1C2","Light Blue":"#75DBF2",Green:"#A3CE5B","Lavender ":"#CCABED",Brown:"#CFAB7C",Pink:"#FFB09D",Sand:"#E2C66C",Clay:"#C4D3AC",Blue:"#91C8D5","Light Green":"#96E1BB",Purple:"#ACAFDD","Light Purple":"#DFB1E8",Tan:"#F5D3B6","Mauve ":"#DBADA9",Grey:"#BABABA",Black:"#3C3C3C",White:"#FFFCF7","Keep Out":"#D9544D"},this.addIO("input","geometry",this,"geometry",null,!1,!0),this.addIO("output","geometry",this,"geometry",null),this.selectedValueColor,this.setValues(e)}draw(){super.draw(),O.c.beginPath(),O.c.fillStyle=this.selectedValueColor,O.c.arc(O.widthToPixels(this.x),O.heightToPixels(this.y),O.widthToPixels(this.radius/1.5),0,Math.PI*2,!1),O.c.fill(),O.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(r=>r.ready)){this.processing=!0;var e=this.findIOValue("geometry"),t=Object.values(this.colorOptions)[this.selectedColorIndex];this.selectedValueColor=Object.keys(this.colorOptions)[this.selectedColorIndex],O.cad.color(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}changeColor(e){this.selectedColorIndex=e,this.updateValue()}createLevaInputs(){let e={};if(this.inputs)return this.inputs.map(t=>{const r=()=>t.connectors.length>0;e[this.uniqueID+"color"]={value:Object.keys(this.colorOptions)[this.selectedColorIndex],label:"Color",options:Object.keys(this.colorOptions),onChange:i=>{this.changeColor(Object.keys(this.colorOptions).indexOf(i)),this.sendToRender()}},t.valueType!=="geometry"&&(e[this.uniqueID+t.name]={value:t.value,label:t.name,disabled:r(),onChange:i=>{t.value!==i&&t.setValue(i)}})}),e}updateSidebar(){const e=super.updateSidebar(),t=document.createElement("div");e.appendChild(t),this.createDropDown(t,this,Object.keys(this.colorOptions),this.selectedColorIndex,"Color",r=>{this.changeColor(r)})}serialize(e={x:0,y:0}){var t=super.serialize(e);return t.selectedColorIndex=this.selectedColorIndex,t}};function i2e(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function bq(...n){return e=>n.forEach(t=>i2e(t,e))}function Bm(...n){return k.useCallback(bq(...n),n)}const wq=k.forwardRef((n,e)=>{const{children:t,...r}=n,i=k.Children.toArray(t),s=i.find(s2e);if(s){const o=s.props.children,a=i.map(l=>l===s?k.Children.count(o)>1?k.Children.only(null):k.isValidElement(o)?o.props.children:null:l);return k.createElement(R3,at({},r,{ref:e}),k.isValidElement(o)?k.cloneElement(o,void 0,a):null)}return k.createElement(R3,at({},r,{ref:e}),t)});wq.displayName="Slot";const R3=k.forwardRef((n,e)=>{const{children:t,...r}=n;return k.isValidElement(t)?k.cloneElement(t,{...o2e(r,t.props),ref:e?bq(e,t.ref):t.ref}):k.Children.count(t)>1?k.Children.only(null):null});R3.displayName="SlotClone";const Sq=({children:n})=>k.createElement(k.Fragment,null,n);function s2e(n){return k.isValidElement(n)&&n.type===Sq}function o2e(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...a)=>{s(...a),i(...a)}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}const a2e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Zd=a2e.reduce((n,e)=>{const t=k.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?wq:e;return k.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),k.createElement(a,at({},o,{ref:i}))});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function l2e(n,e){n&&Nm.flushSync(()=>n.dispatchEvent(e))}const u2e=k.forwardRef((n,e)=>{var t;const{container:r=globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body,...i}=n;return r?EW.createPortal(k.createElement(Zd.div,at({},i,{ref:e})),r):null}),c2e=u2e;var sz=Object.prototype.hasOwnProperty;function y0(n,e){var t,r;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((r=n.length)===e.length)for(;r--&&y0(n[r],e[r]););return r===-1}if(!t||typeof n=="object"){r=0;for(t in n)if(sz.call(n,t)&&++r&&!sz.call(e,t)||!(t in e)||!y0(n[t],e[t]))return!1;return Object.keys(e).length===r}}return n!==n&&e!==e}function EE(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let r=0;r<t.length;r++)if(!Object.prototype.hasOwnProperty.call(e,t[r])||!Object.is(n[t[r]],e[t[r]]))return!1;return!0}var ME=function(e,t,r,i){this.name=e,this.fn=t,this.args=r,this.modifiers=i};ME.prototype._test=function(e){var t=this.fn;try{Vp(this.modifiers.slice(),t,this)(e)}catch{t=function(){return!1}}try{return Vp(this.modifiers.slice(),t,this)(e)}catch{return!1}};ME.prototype._check=function(e){try{Vp(this.modifiers.slice(),this.fn,this)(e)}catch{if(Vp(this.modifiers.slice(),function(r){return r},this)(!1))return}if(!Vp(this.modifiers.slice(),this.fn,this)(e))throw null};ME.prototype._testAsync=function(e){var t=this;return new Promise(function(r,i){Eq(t.modifiers.slice(),t.fn,t)(e).then(function(s){s?r(e):i(null)}).catch(function(s){return i(s)})})};function _q(n,e){return e===void 0&&(e="simple"),typeof n=="object"?n[e]:n}function Vp(n,e,t){if(n.length){var r=n.shift(),i=Vp(n,e,t);return r.perform(i,t)}else return _q(e)}function Eq(n,e,t){if(n.length){var r=n.shift(),i=Eq(n,e,t);return r.performAsync(i,t)}else return function(s){return Promise.resolve(_q(e,"async")(s))}}var f2e=function(e,t,r){this.name=e,this.perform=t,this.performAsync=r},AR=function(n){function e(t,r,i,s){for(var o=[],a=arguments.length-4;a-- >0;)o[a]=arguments[a+4];n.call(this,o),n.captureStackTrace&&n.captureStackTrace(this,e),this.rule=t,this.value=r,this.cause=i,this.target=s}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e}(Error),Ol=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};Ol.prototype._applyRule=function(e,t){var r=this;return function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return r.chain.push(new ME(t,e.apply(r,i),i,r.nextRuleModifiers)),r.nextRuleModifiers=[],r}};Ol.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new f2e(t,e.simple,e.async)),this};Ol.prototype._clone=function(){return new Ol(this.chain.slice(),this.nextRuleModifiers.slice())};Ol.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})};Ol.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(r){try{r._check(e)}catch(i){t.push(new AR(r,e,i))}}),t};Ol.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(r){throw new AR(t,e,r)}})};Ol.prototype.testAsync=function(e){var t=this;return new Promise(function(r,i){Mq(e,t.chain.slice(),r,i)})};function Mq(n,e,t,r){if(e.length){var i=e.shift();i._testAsync(n).then(function(){Mq(n,e,t,r)},function(s){r(new AR(i,n,s))})}else t(n)}var oz=function(n,e){return e&&typeof n=="string"&&n.trim().length===0?!0:n==null};function d2e(n,e){return e===void 0&&(e=!1),{simple:function(t){return oz(t,e)||n.check(t)===void 0},async:function(t){return oz(t,e)||n.testAsync(t)}}}function qs(){return typeof Proxy<"u"?Cq(new Ol):O3(new Ol)}var x0={};qs.extend=function(n){Object.assign(x0,n)};qs.clearCustomRules=function(){x0={}};function Cq(n){return new Proxy(n,{get:function(t,r){if(r in t)return t[r];var i=Cq(n._clone());if(r in KS)return i._applyModifier(KS[r],r);if(r in x0)return i._applyRule(x0[r],r);if(r in k3)return i._applyRule(k3[r],r)}})}function O3(n){var e=function(i,s){return Object.keys(i).forEach(function(o){s[o]=function(){for(var a=[],l=arguments.length;l--;)a[l]=arguments[l];var u=O3(s._clone()),c=u._applyRule(i[o],o).apply(void 0,a);return c}}),s},t=e(k3,n),r=e(x0,t);return Object.keys(KS).forEach(function(i){Object.defineProperty(r,i,{get:function(){var s=O3(r._clone());return s._applyModifier(KS[i],i)}})}),r}var KS={not:{simple:function(n){return function(e){return!n(e)}},async:function(n){return function(e){return Promise.resolve(n(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(n){return function(e){return Nx(e).some(function(t){try{return n(t)}catch{return!1}})}},async:function(n){return function(e){return Promise.all(Nx(e).map(function(t){try{return n(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(n){return function(e){return e!==!1&&Nx(e).every(n)}},async:function(n){return function(e){return Promise.all(Nx(e).map(n)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(n,e){return function(t){return az(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&n(t):n(t)}},async:function(n,e){return function(t){return Promise.resolve(n(t)).then(function(r){return az(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&r:r}).catch(function(){return!1})}}}};function az(n){return n&&n.name==="schema"&&n.args.length>0&&typeof n.args[0]=="object"}function Nx(n){return typeof n=="string"?n.split(""):n}var k3={equal:function(n){return function(e){return e==n}},exact:function(n){return function(e){return e===n}},number:function(n){return n===void 0&&(n=!0),function(e){return typeof e=="number"&&(n||isFinite(e))}},integer:function(){return function(n){var e=Number.isInteger||h2e;return e(n)}},numeric:function(){return function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},string:function(){return _h("string")},boolean:function(){return _h("boolean")},undefined:function(){return _h("undefined")},null:function(){return _h("null")},array:function(){return _h("array")},object:function(){return _h("object")},instanceOf:function(n){return function(e){return e instanceof n}},pattern:function(n){return function(e){return n.test(e)}},lowercase:function(){return function(n){return typeof n=="boolean"||n===n.toLowerCase()&&n.trim()!==""}},uppercase:function(){return function(n){return n===n.toUpperCase()&&n.trim()!==""}},vowel:function(){return function(n){return/^[aeiou]+$/i.test(n)}},consonant:function(){return function(n){return/^(?=[^aeiou])([a-z]+)$/i.test(n)}},first:function(n){return function(e){return e[0]==n}},last:function(n){return function(e){return e[e.length-1]==n}},empty:function(){return function(n){return n.length===0}},length:function(n,e){return function(t){return t.length>=n&&t.length<=(e||n)}},minLength:function(n){return function(e){return e.length>=n}},maxLength:function(n){return function(e){return e.length<=n}},negative:function(){return function(n){return n<0}},positive:function(){return function(n){return n>=0}},between:function(n,e){return function(t){return t>=n&&t<=e}},range:function(n,e){return function(t){return t>=n&&t<=e}},lessThan:function(n){return function(e){return e<n}},lessThanOrEqual:function(n){return function(e){return e<=n}},greaterThan:function(n){return function(e){return e>n}},greaterThanOrEqual:function(n){return function(e){return e>=n}},even:function(){return function(n){return n%2===0}},odd:function(){return function(n){return n%2!==0}},includes:function(n){return function(e){return~e.indexOf(n)}},schema:function(n){return p2e(n)},passesAnyOf:function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return function(t){return n.some(function(r){return r.test(t)})}},optional:d2e};function _h(n){return function(e){return Array.isArray(e)&&n==="array"||e===null&&n==="null"||typeof e===n}}function h2e(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n}function p2e(n){return{simple:function(e){var t=[];if(Object.keys(n).forEach(function(r){var i=n[r];try{i.check((e||{})[r])}catch(s){s.target=r,t.push(s)}}),t.length>0)throw t;return!0},async:function(e){var t=[],r=Object.keys(n).map(function(i){var s=n[i];return s.testAsync((e||{})[i]).catch(function(o){o.target=i,t.push(o)})});return Promise.all(r).then(function(){if(t.length>0)throw t;return!0})}}}var Xn="colors",gs="sizes",Dt="space",m2e={gap:Dt,gridGap:Dt,columnGap:Dt,gridColumnGap:Dt,rowGap:Dt,gridRowGap:Dt,inset:Dt,insetBlock:Dt,insetBlockEnd:Dt,insetBlockStart:Dt,insetInline:Dt,insetInlineEnd:Dt,insetInlineStart:Dt,margin:Dt,marginTop:Dt,marginRight:Dt,marginBottom:Dt,marginLeft:Dt,marginBlock:Dt,marginBlockEnd:Dt,marginBlockStart:Dt,marginInline:Dt,marginInlineEnd:Dt,marginInlineStart:Dt,padding:Dt,paddingTop:Dt,paddingRight:Dt,paddingBottom:Dt,paddingLeft:Dt,paddingBlock:Dt,paddingBlockEnd:Dt,paddingBlockStart:Dt,paddingInline:Dt,paddingInlineEnd:Dt,paddingInlineStart:Dt,top:Dt,right:Dt,bottom:Dt,left:Dt,scrollMargin:Dt,scrollMarginTop:Dt,scrollMarginRight:Dt,scrollMarginBottom:Dt,scrollMarginLeft:Dt,scrollMarginX:Dt,scrollMarginY:Dt,scrollMarginBlock:Dt,scrollMarginBlockEnd:Dt,scrollMarginBlockStart:Dt,scrollMarginInline:Dt,scrollMarginInlineEnd:Dt,scrollMarginInlineStart:Dt,scrollPadding:Dt,scrollPaddingTop:Dt,scrollPaddingRight:Dt,scrollPaddingBottom:Dt,scrollPaddingLeft:Dt,scrollPaddingX:Dt,scrollPaddingY:Dt,scrollPaddingBlock:Dt,scrollPaddingBlockEnd:Dt,scrollPaddingBlockStart:Dt,scrollPaddingInline:Dt,scrollPaddingInlineEnd:Dt,scrollPaddingInlineStart:Dt,fontSize:"fontSizes",background:Xn,backgroundColor:Xn,backgroundImage:Xn,borderImage:Xn,border:Xn,borderBlock:Xn,borderBlockEnd:Xn,borderBlockStart:Xn,borderBottom:Xn,borderBottomColor:Xn,borderColor:Xn,borderInline:Xn,borderInlineEnd:Xn,borderInlineStart:Xn,borderLeft:Xn,borderLeftColor:Xn,borderRight:Xn,borderRightColor:Xn,borderTop:Xn,borderTopColor:Xn,caretColor:Xn,color:Xn,columnRuleColor:Xn,fill:Xn,outline:Xn,outlineColor:Xn,stroke:Xn,textDecorationColor:Xn,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:gs,minBlockSize:gs,maxBlockSize:gs,inlineSize:gs,minInlineSize:gs,maxInlineSize:gs,width:gs,minWidth:gs,maxWidth:gs,height:gs,minHeight:gs,maxHeight:gs,flexBasis:gs,gridTemplateColumns:gs,gridTemplateRows:gs,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},g2e=(n,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,zm=()=>{const n=Object.create(null);return(e,t,...r)=>{const i=(s=>JSON.stringify(s,g2e))(e);return i in n?n[i]:n[i]=t(e,...r)}},md=Symbol.for("sxs.internal"),TR=(n,e)=>Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)),lz=n=>{for(const e in n)return!0;return!1},{hasOwnProperty:v2e}=Object.prototype,I3=n=>n.includes("-")?n:n.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),y2e=/\s+(?![^()]*\))/,Eh=n=>e=>n(...typeof e=="string"?String(e).split(y2e):[e]),uz={appearance:n=>({WebkitAppearance:n,appearance:n}),backfaceVisibility:n=>({WebkitBackfaceVisibility:n,backfaceVisibility:n}),backdropFilter:n=>({WebkitBackdropFilter:n,backdropFilter:n}),backgroundClip:n=>({WebkitBackgroundClip:n,backgroundClip:n}),boxDecorationBreak:n=>({WebkitBoxDecorationBreak:n,boxDecorationBreak:n}),clipPath:n=>({WebkitClipPath:n,clipPath:n}),content:n=>({content:n.includes('"')||n.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(n)?n:`"${n}"`}),hyphens:n=>({WebkitHyphens:n,hyphens:n}),maskImage:n=>({WebkitMaskImage:n,maskImage:n}),maskSize:n=>({WebkitMaskSize:n,maskSize:n}),tabSize:n=>({MozTabSize:n,tabSize:n}),textSizeAdjust:n=>({WebkitTextSizeAdjust:n,textSizeAdjust:n}),userSelect:n=>({WebkitUserSelect:n,userSelect:n}),marginBlock:Eh((n,e)=>({marginBlockStart:n,marginBlockEnd:e||n})),marginInline:Eh((n,e)=>({marginInlineStart:n,marginInlineEnd:e||n})),maxSize:Eh((n,e)=>({maxBlockSize:n,maxInlineSize:e||n})),minSize:Eh((n,e)=>({minBlockSize:n,minInlineSize:e||n})),paddingBlock:Eh((n,e)=>({paddingBlockStart:n,paddingBlockEnd:e||n})),paddingInline:Eh((n,e)=>({paddingInlineStart:n,paddingInlineEnd:e||n}))},SC=/([\d.]+)([^]*)/,x2e=(n,e)=>n.length?n.reduce((t,r)=>(t.push(...e.map(i=>i.includes("&")?i.replace(/&/g,/[ +>|~]/.test(r)&&/&.*&/.test(i)?`:is(${r})`:r):r+" "+i)),t),[]):e,b2e=(n,e)=>n in w2e&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(t,r,i,s)=>r+(i==="stretch"?`-moz-available${s};${I3(n)}:${r}-webkit-fill-available`:`-moz-fit-content${s};${I3(n)}:${r}fit-content`)+s):String(e),w2e={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},Tu=n=>n?n+"-":"",Aq=(n,e,t)=>n.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(r,i,s,o,a)=>o=="$"==!!s?r:(i||o=="--"?"calc(":"")+"var(--"+(o==="$"?Tu(e)+(a.includes("$")?"":Tu(t))+a.replace(/\$/g,"-"):a)+")"+(i||o=="--"?"*"+(i||"")+(s||"1")+")":"")),S2e=/\s*,\s*(?![^()]*\))/,_2e=Object.prototype.toString,Ep=(n,e,t,r,i)=>{let s,o,a;const l=(u,c,f)=>{let d,h;const m=v=>{for(d in v){const S=d.charCodeAt(0)===64,b=S&&Array.isArray(v[d])?v[d]:[v[d]];for(h of b){const g=/[A-Z]/.test(p=d)?p:p.replace(/-[^]/g,x=>x[1].toUpperCase()),w=typeof h=="object"&&h&&h.toString===_2e&&(!r.utils[g]||!c.length);if(g in r.utils&&!w){const x=r.utils[g];if(x!==o){o=x,m(x(h)),o=null;continue}}else if(g in uz){const x=uz[g];if(x!==a){a=x,m(x(h)),a=null;continue}}if(S&&(y=d.slice(1)in r.media?"@media "+r.media[d.slice(1)]:d,d=y.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(x,M,A,N,C,T)=>{const R=SC.test(M),$=.0625*(R?-1:1),[B,z]=R?[N,M]:[M,N];return"("+(A[0]==="="?"":A[0]===">"===R?"max-":"min-")+B+":"+(A[0]!=="="&&A.length===1?z.replace(SC,(D,I,U)=>Number(I)+$*(A===">"?1:-1)+U):z)+(C?") and ("+(C[0]===">"?"min-":"max-")+B+":"+(C.length===1?T.replace(SC,(D,I,U)=>Number(I)+$*(C===">"?-1:1)+U):T):"")+")"})),w){const x=S?f.concat(d):[...f],M=S?[...c]:x2e(c,d.split(S2e));s!==void 0&&i(cz(...s)),s=void 0,l(h,M,x)}else s===void 0&&(s=[[],c,f]),d=S||d.charCodeAt(0)!==36?d:`--${Tu(r.prefix)}${d.slice(1).replace(/\$/g,"-")}`,h=w?h:typeof h=="number"?h&&g in E2e?String(h)+"px":String(h):Aq(b2e(g,h??""),r.prefix,r.themeMap[g]),s[0].push(`${S?`${d} `:`${I3(d)}:`}${h}`)}}var y,p};m(u),s!==void 0&&i(cz(...s)),s=void 0};l(n,e,t)},cz=(n,e,t)=>`${t.map(r=>`${r}{`).join("")}${e.length?`${e.join(",")}{`:""}${n.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,E2e={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},fz=n=>String.fromCharCode(n+(n>25?39:97)),gd=n=>(e=>{let t,r="";for(t=Math.abs(e);t>52;t=t/52|0)r=fz(t%52)+r;return fz(t%52)+r})(((e,t)=>{let r=t.length;for(;r;)e=33*e^t.charCodeAt(--r);return e})(5381,JSON.stringify(n))>>>0),hv=["themed","global","styled","onevar","resonevar","allvar","inline"],M2e=n=>{if(n.href&&!n.href.startsWith(location.origin))return!1;try{return!!n.cssRules}catch{return!1}},C2e=n=>{let e;const t=()=>{const{cssRules:i}=e.sheet;return[].map.call(i,(s,o)=>{const{cssText:a}=s;let l="";if(a.startsWith("--sxs"))return"";if(i[o-1]&&(l=i[o-1].cssText).startsWith("--sxs")){if(!s.cssRules.length)return"";for(const u in e.rules)if(e.rules[u].group===s)return`--sxs{--sxs:${[...e.rules[u].cache].join(" ")}}${a}`;return s.cssRules.length?`${l}${a}`:""}return a}).join("")},r=()=>{if(e){const{rules:a,sheet:l}=e;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const u in a)delete a[u]}const i=Object(n).styleSheets||[];for(const a of i)if(M2e(a)){for(let l=0,u=a.cssRules;u[l];++l){const c=Object(u[l]);if(c.type!==1)continue;const f=Object(u[l+1]);if(f.type!==4)continue;++l;const{cssText:d}=c;if(!d.startsWith("--sxs"))continue;const h=d.slice(14,-3).trim().split(/\s+/),m=hv[h[0]];m&&(e||(e={sheet:a,reset:r,rules:{},toString:t}),e.rules[m]={group:f,index:l,cache:new Set(h)})}if(e)break}if(!e){const a=(l,u)=>({type:u,cssRules:[],insertRule(c,f){this.cssRules.splice(f,0,a(c,{import:3,undefined:1}[(c.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,c=>c.cssText).join("")}}`:l}});e={sheet:n?(n.head||n).appendChild(document.createElement("style")).sheet:a("","text/css"),rules:{},reset:r,toString:t}}const{sheet:s,rules:o}=e;for(let a=hv.length-1;a>=0;--a){const l=hv[a];if(!o[l]){const u=hv[a+1],c=o[u]?o[u].index:s.cssRules.length;s.insertRule("@media{}",c),s.insertRule(`--sxs{--sxs:${a}}`,c),o[l]={group:s.cssRules[c+1],index:c,cache:new Set([a])}}A2e(o[l])}};return r(),e},A2e=n=>{const e=n.group;let t=e.cssRules.length;n.apply=r=>{try{e.insertRule(r,t),++t}catch{}}},Og=Symbol(),T2e=zm(),dz=(n,e)=>T2e(n,()=>(...t)=>{let r={type:null,composers:new Set};for(const i of t)if(i!=null)if(i[md]){r.type==null&&(r.type=i[md].type);for(const s of i[md].composers)r.composers.add(s)}else i.constructor!==Object||i.$$typeof?r.type==null&&(r.type=i):r.composers.add(D2e(i,n));return r.type==null&&(r.type="span"),r.composers.size||r.composers.add(["PJLV",{},[],[],{},[]]),N2e(n,r,e)}),D2e=({variants:n,compoundVariants:e,defaultVariants:t,...r},i)=>{const s=`${Tu(i.prefix)}c-${gd(r)}`,o=[],a=[],l=Object.create(null),u=[];for(const d in t)l[d]=String(t[d]);if(typeof n=="object"&&n)for(const d in n){c=l,f=d,v2e.call(c,f)||(l[d]="undefined");const h=n[d];for(const m in h){const v={[d]:String(m)};String(m)==="undefined"&&u.push(d);const y=h[m],p=[v,y,!lz(y)];o.push(p)}}var c,f;if(typeof e=="object"&&e)for(const d of e){let{css:h,...m}=d;h=typeof h=="object"&&h||{};for(const y in m)m[y]=String(m[y]);const v=[m,h,!lz(h)];a.push(v)}return[s,r,o,a,l,u]},N2e=(n,e,t)=>{const[r,i,s,o]=P2e(e.composers),a=typeof e.type=="function"||e.type.$$typeof?(f=>{function d(){for(let h=0;h<d[Og].length;h++){const[m,v]=d[Og][h];f.rules[m].apply(v)}return d[Og]=[],null}return d[Og]=[],d.rules={},hv.forEach(h=>d.rules[h]={apply:m=>d[Og].push([h,m])}),d})(t):null,l=(a||t).rules,u=`.${r}${i.length>1?`:where(.${i.slice(1).join(".")})`:""}`,c=f=>{f=typeof f=="object"&&f||R2e;const{css:d,...h}=f,m={};for(const p in s)if(delete h[p],p in f){let S=f[p];typeof S=="object"&&S?m[p]={"@initial":s[p],...S}:(S=String(S),m[p]=S!=="undefined"||o.has(p)?S:s[p])}else m[p]=s[p];const v=new Set([...i]);for(const[p,S,b,g]of e.composers){t.rules.styled.cache.has(p)||(t.rules.styled.cache.add(p),Ep(S,[`.${p}`],[],n,M=>{l.styled.apply(M)}));const w=hz(b,m,n.media),x=hz(g,m,n.media,!0);for(const M of w)if(M!==void 0)for(const[A,N,C]of M){const T=`${p}-${gd(N)}-${A}`;v.add(T);const R=(C?t.rules.resonevar:t.rules.onevar).cache,$=C?l.resonevar:l.onevar;R.has(T)||(R.add(T),Ep(N,[`.${T}`],[],n,B=>{$.apply(B)}))}for(const M of x)if(M!==void 0)for(const[A,N]of M){const C=`${p}-${gd(N)}-${A}`;v.add(C),t.rules.allvar.cache.has(C)||(t.rules.allvar.cache.add(C),Ep(N,[`.${C}`],[],n,T=>{l.allvar.apply(T)}))}}if(typeof d=="object"&&d){const p=`${r}-i${gd(d)}-css`;v.add(p),t.rules.inline.cache.has(p)||(t.rules.inline.cache.add(p),Ep(d,[`.${p}`],[],n,S=>{l.inline.apply(S)}))}for(const p of String(f.className||"").trim().split(/\s+/))p&&v.add(p);const y=h.className=[...v].join(" ");return{type:e.type,className:y,selector:u,props:h,toString:()=>y,deferredInjector:a}};return TR(c,{className:r,selector:u,[md]:e,toString:()=>(t.rules.styled.cache.has(r)||c(),r)})},P2e=n=>{let e="";const t=[],r={},i=[];for(const[s,,,,o,a]of n){e===""&&(e=s),t.push(s),i.push(...a);for(const l in o){const u=o[l];(r[l]===void 0||u!=="undefined"||a.includes(u))&&(r[l]=u)}}return[e,t,r,new Set(i)]},hz=(n,e,t,r)=>{const i=[];e:for(let[s,o,a]of n){if(a)continue;let l,u=0,c=!1;for(l in s){const f=s[l];let d=e[l];if(d!==f){if(typeof d!="object"||!d)continue e;{let h,m,v=0;for(const y in d){if(f===String(d[y])){if(y!=="@initial"){const p=y.slice(1);(m=m||[]).push(p in t?t[p]:y.replace(/^@media ?/,"")),c=!0}u+=v,h=!0}++v}if(m&&m.length&&(o={["@media "+m.join(", ")]:o}),!h)continue e}}}(i[u]=i[u]||[]).push([r?"cv":`${l}-${s[l]}`,o,c])}return i},R2e={},O2e=zm(),k2e=(n,e)=>O2e(n,()=>(...t)=>{const r=()=>{for(let i of t){i=typeof i=="object"&&i||{};let s=gd(i);if(!e.rules.global.cache.has(s)){if(e.rules.global.cache.add(s),"@import"in i){let o=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let a of[].concat(i["@import"]))a=a.includes('"')||a.includes("'")?a:`"${a}"`,e.sheet.insertRule(`@import ${a};`,o++);delete i["@import"]}Ep(i,[],[],n,o=>{e.rules.global.apply(o)})}}return""};return TR(r,{toString:r})}),I2e=zm(),L2e=(n,e)=>I2e(n,()=>t=>{const r=`${Tu(n.prefix)}k-${gd(t)}`,i=()=>{if(!e.rules.global.cache.has(r)){e.rules.global.cache.add(r);const s=[];Ep(t,[],[],n,a=>s.push(a));const o=`@keyframes ${r}{${s.join("")}}`;e.rules.global.apply(o)}return r};return TR(i,{get name(){return i()},toString:i})}),F2e=class{constructor(n,e,t,r){this.token=n==null?"":String(n),this.value=e==null?"":String(e),this.scale=t==null?"":String(t),this.prefix=r==null?"":String(r)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+Tu(this.prefix)+Tu(this.scale)+this.token}toString(){return this.computedValue}},B2e=zm(),z2e=(n,e)=>B2e(n,()=>(t,r)=>{r=typeof t=="object"&&t||Object(r);const i=`.${t=(t=typeof t=="string"?t:"")||`${Tu(n.prefix)}t-${gd(r)}`}`,s={},o=[];for(const l in r){s[l]={};for(const u in r[l]){const c=`--${Tu(n.prefix)}${l}-${u}`,f=Aq(String(r[l][u]),n.prefix,l);s[l][u]=new F2e(u,f,l,n.prefix),o.push(`${c}:${f}`)}}const a=()=>{if(o.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const l=`${r===n.theme?":root,":""}.${t}{${o.join(";")}}`;e.rules.themed.apply(l)}return t};return{...s,get className(){return a()},selector:i,toString:a}}),U2e=zm(),$2e=zm(),V2e=n=>{const e=(t=>{let r=!1;const i=U2e(t,s=>{r=!0;const o="prefix"in(s=typeof s=="object"&&s||{})?String(s.prefix):"",a=typeof s.media=="object"&&s.media||{},l=typeof s.root=="object"?s.root||null:globalThis.document||null,u=typeof s.theme=="object"&&s.theme||{},c={prefix:o,media:a,theme:u,themeMap:typeof s.themeMap=="object"&&s.themeMap||{...m2e},utils:typeof s.utils=="object"&&s.utils||{}},f=C2e(l),d={css:dz(c,f),globalCss:k2e(c,f),keyframes:L2e(c,f),createTheme:z2e(c,f),reset(){f.reset(),d.theme.toString()},theme:{},sheet:f,config:c,prefix:o,getCssText:f.toString,toString:f.toString};return String(d.theme=d.createTheme(u)),d});return r||i.reset(),i})(n);return e.styled=(({config:t,sheet:r})=>$2e(t,()=>{const i=dz(t,r);return(...s)=>{const o=i(...s),a=o[md].type,l=De.forwardRef((u,c)=>{const f=u&&u.as||a,{props:d,deferredInjector:h}=o(u);return delete d.as,d.ref=c,h?De.createElement(De.Fragment,null,De.createElement(f,d),De.createElement(h,null)):De.createElement(f,d)});return l.className=o.className,l.displayName=`Styled.${a.displayName||a.name||a}`,l.selector=o.selector,l.toString=()=>o.selector,l[md]=o[md],l}}))(e),e};function H2e(n,e,t){return Math.max(e,Math.min(n,t))}const ss={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function pz(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function mz(n,e,t,r=.15){return r===0?H2e(n,e,t):n<e?-pz(e-n,t-e,r)+e:n>t?+pz(n-t,t-e,r)+t:n}function W2e(n,[e,t],[r,i]){const[[s,o],[a,l]]=n;return[mz(e,s,o,r),mz(t,a,l,i)]}function j2e(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function G2e(n){var e=j2e(n,"string");return typeof e=="symbol"?e:String(e)}function $s(n,e,t){return e=G2e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function gz(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Sr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gz(Object(t),!0).forEach(function(r){$s(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):gz(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const Tq={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function vz(n){return n?n[0].toUpperCase()+n.slice(1):""}const q2e=["enter","leave"];function X2e(n=!1,e){return n&&!q2e.includes(e)}function Y2e(n,e="",t=!1){const r=Tq[n],i=r&&r[e]||e;return"on"+vz(n)+vz(i)+(X2e(t,i)?"Capture":"")}const K2e=["gotpointercapture","lostpointercapture"];function Z2e(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const r=K2e.includes(e)?"capturecapture":"capture",i=!!~e.indexOf(r);return i&&(e=e.replace("capture","")),{device:e,capture:i,passive:t}}function J2e(n,e=""){const t=Tq[n],r=t&&t[e]||e;return n+r}function CE(n){return"touches"in n}function Dq(n){return CE(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function Q2e(n){return Array.from(n.touches).filter(e=>{var t,r;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(r=t.contains)===null||r===void 0?void 0:r.call(t,e.target))})}function eCe(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function Nq(n){return CE(n)?eCe(n)[0]:n}function tCe(n){return Q2e(n).map(e=>e.identifier)}function _C(n){const e=Nq(n);return CE(n)?e.identifier:e.pointerId}function yz(n){const e=Nq(n);return[e.clientX,e.clientY]}function nCe(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:r,metaKey:i,ctrlKey:s}=n;Object.assign(e,{shiftKey:t,altKey:r,metaKey:i,ctrlKey:s})}return e}function ZS(n,...e){return typeof n=="function"?n(...e):n}function rCe(){}function iCe(...n){return n.length===0?rCe:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function xz(n,e){return Object.assign({},e,n||{})}const sCe=32;class oCe{constructor(e,t,r){this.ctrl=e,this.args=t,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:r,args:i}=this;t[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,r=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=r.from?ZS(r.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:r,shared:i}=this;t.args=this.args;let s=0;if(e&&(t.event=e,r.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,nCe(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const x=t._delta.map(Math.abs);ss.addTo(t._distance,x)}this.axisIntent&&this.axisIntent(e);const[o,a]=t._movement,[l,u]=r.threshold,{_step:c,values:f}=t;if(r.hasCustomTransform?(c[0]===!1&&(c[0]=Math.abs(o)>=l&&f[0]),c[1]===!1&&(c[1]=Math.abs(a)>=u&&f[1])):(c[0]===!1&&(c[0]=Math.abs(o)>=l&&Math.sign(o)*l),c[1]===!1&&(c[1]=Math.abs(a)>=u&&Math.sign(a)*u)),t.intentional=c[0]!==!1||c[1]!==!1,!t.intentional)return;const d=[0,0];if(r.hasCustomTransform){const[x,M]=f;d[0]=c[0]!==!1?x-c[0]:0,d[1]=c[1]!==!1?M-c[1]:0}else d[0]=c[0]!==!1?o-c[0]:0,d[1]=c[1]!==!1?a-c[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(d);const h=t.offset,m=t._active&&!t._blocked||t.active;m&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=i[this.ingKey]=t._active,e&&(t.first&&("bounds"in r&&(t._bounds=ZS(r.bounds,t)),this.setup&&this.setup()),t.movement=d,this.computeOffset()));const[v,y]=t.offset,[[p,S],[b,g]]=t._bounds;t.overflow=[v<p?-1:v>S?1:0,y<b?-1:y>g?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const w=t._active?r.rubberband||[0,0]:[0,0];if(t.offset=W2e(t._bounds,t.offset,w),t.delta=ss.sub(t.offset,h),this.computeMovement(),m&&(!t.last||s>sCe)){t.delta=ss.sub(t.offset,h);const x=t.delta.map(Math.abs);ss.addTo(t.distance,x),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[x[0]/s,x[1]/s],t.timeDelta=s)}}emit(){const e=this.state,t=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const i=this.handler(Sr(Sr(Sr({},t),e),{},{[this.aliasKey]:e.values}));i!==void 0&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function aCe([n,e],t){const r=Math.abs(n),i=Math.abs(e);if(r>i&&r>t)return"x";if(i>r&&i>t)return"y"}class lCe extends oCe{constructor(...e){super(...e),$s(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=ss.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=ss.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,r=this.config;if(!t.axis&&e){const i=typeof r.axisThreshold=="object"?r.axisThreshold[Dq(e)]:r.axisThreshold;t.axis=aCe(t._movement,i)}t._blocked=(r.lockDirection||!!r.axis)&&!t.axis||!!r.axis&&r.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const uCe=n=>n,bz=.15,Pq={enabled(n=!0){return n},eventOptions(n,e,t){return Sr(Sr({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[bz,bz];case!1:return[0,0];default:return ss.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return ss.toVector(n)},transform(n,e,t){const r=n||t.shared.transform;return this.hasCustomTransform=!!r,r||uCe},threshold(n){return ss.toVector(n,0)}},cCe=0,My=Sr(Sr({},Pq),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=cCe){return n},bounds(n={}){if(typeof n=="function")return s=>My.bounds(n(s));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:r=-1/0,bottom:i=1/0}=n;return[[e,t],[r,i]]}}),wz={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class fCe extends lCe{constructor(...e){super(...e),$s(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),i={left:t.left-r.left+e.offset[0],right:t.right-r.right+e.offset[0],top:t.top-r.top+e.offset[1],bottom:t.bottom-r.bottom+e.offset[1]};e._bounds=My.bounds(i)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,r=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const i=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(i&&i.size>1&&r._pointerActive)&&(this.start(e),this.setupPointer(e),r._pointerId=_C(e),r._pointerActive=!0,this.computeValues(yz(e)),this.computeInitial(),t.preventScrollAxis&&Dq(e)!=="mouse"?(r._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,r=this.config;if(!t._pointerActive)return;const i=_C(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;const s=yz(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=ss.sub(s,t._values),this.computeValues(s)),ss.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(r.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,r=this.config;if(!t._active||!t._pointerActive)return;const i=_C(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=t._distance;if(t.tap=s<=r.tapsThreshold&&o<=r.tapsThreshold,t.tap&&r.filterTaps)t._force=!0;else{const[a,l]=t._delta,[u,c]=t._movement,[f,d]=r.swipe.velocity,[h,m]=r.swipe.distance,v=r.swipe.duration;if(t.elapsedTime<v){const y=Math.abs(a/t.timeDelta),p=Math.abs(l/t.timeDelta);y>f&&Math.abs(u)>h&&(t.swipe[0]=Math.sign(a)),p>d&&Math.abs(c)>m&&(t.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,r=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,dCe(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=wz[e.key];if(t){const r=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),r._delta=t(this.config.keyboardDisplacement,i),r._keyboardActive=!0,ss.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in wz&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function dCe(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const Cy=typeof window<"u"&&window.document&&window.document.createElement;function Rq(){return Cy&&"ontouchstart"in window}function hCe(){return Rq()||Cy&&window.navigator.maxTouchPoints>1}function pCe(){return Cy&&"onpointerdown"in window}function mCe(){return Cy&&"exitPointerLock"in window.document}function gCe(){try{return"constructor"in GestureEvent}catch{return!1}}const Xo={isBrowser:Cy,gesture:gCe(),touch:Rq(),touchscreen:hCe(),pointer:pCe(),pointerLock:mCe()},vCe=250,yCe=180,xCe=.5,bCe=50,wCe=250,SCe=10,Sz={mouse:0,touch:0,pen:8},_Ce=Sr(Sr({},My),{},{device(n,e,{pointer:{touch:t=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&Xo.pointerLock,Xo.touch&&t?"touch":this.pointerLock?"mouse":Xo.pointer&&!i?"pointer":Xo.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?vCe:void 0,!(!Xo.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:r=3,axis:i=void 0}){const s=ss.toVector(n,t?r:i?1:0);return this.filterTaps=t,this.tapsThreshold=r,s},swipe({velocity:n=xCe,distance:e=bCe,duration:t=wCe}={}){return{velocity:this.transform(ss.toVector(n)),distance:this.transform(ss.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return yCe;case!1:return 0;default:return n}},axisThreshold(n){return n?Sr(Sr({},Sz),n):Sz},keyboardDisplacement(n=SCe){return n}});Sr(Sr({},Pq),{},{device(n,e,{shared:t,pointer:{touch:r=!1}={}}){if(t.target&&!Xo.touch&&Xo.gesture)return"gesture";if(Xo.touch&&r)return"touch";if(Xo.touchscreen){if(Xo.pointer)return"pointer";if(Xo.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:r={}}){const i=o=>{const a=xz(ZS(t,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=xz(ZS(r,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof t!="function"&&typeof r!="function"?[i(),s()]:o=>[i(o),s(o)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",ss.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});Sr(Sr({},My),{},{mouseOnly:(n=!0)=>n});Sr(Sr({},My),{},{mouseOnly:(n=!0)=>n});const Oq=new Map,L3=new Map;function ECe(n){Oq.set(n.key,n.engine),L3.set(n.key,n.resolver)}const MCe={key:"drag",engine:fCe,resolver:_Ce};function CCe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function ACe(n,e){if(n==null)return{};var t=CCe(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}const TCe={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=Xo.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},DCe=["target","eventOptions","window","enabled","transform"];function Dw(n={},e){const t={};for(const[r,i]of Object.entries(e))switch(typeof i){case"function":t[r]=i.call(t,n[r],r,n);break;case"object":t[r]=Dw(n[r],i);break;case"boolean":i&&(t[r]=n[r]);break}return t}function NCe(n,e,t={}){const r=n,{target:i,eventOptions:s,window:o,enabled:a,transform:l}=r,u=ACe(r,DCe);if(t.shared=Dw({target:i,eventOptions:s,window:o,enabled:a,transform:l},TCe),e){const c=L3.get(e);t[e]=Dw(Sr({shared:t.shared},u),c)}else for(const c in u){const f=L3.get(c);f&&(t[c]=Dw(Sr({shared:t.shared},u[c]),f))}return t}class kq{constructor(e,t){$s(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,r,i,s){const o=this._listeners,a=J2e(t,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},u=Sr(Sr({},l),s);e.addEventListener(a,i,u);const c=()=>{e.removeEventListener(a,i,u),o.delete(c)};return o.add(c),c}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class PCe{constructor(){$s(this,"_timeouts",new Map)}add(e,t,r=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(t,r,...i))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class RCe{constructor(e){$s(this,"gestures",new Set),$s(this,"_targetEventStore",new kq(this)),$s(this,"gestureEventStores",{}),$s(this,"gestureTimeoutStores",{}),$s(this,"handlers",{}),$s(this,"config",{}),$s(this,"pointerIds",new Set),$s(this,"touchIds",new Set),$s(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),OCe(this,e)}setEventIds(e){if(CE(e))return this.touchIds=new Set(tCe(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=NCe(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,r={};let i;if(!(t.target&&(i=t.target(),!i))){if(t.enabled){for(const o of this.gestures){const a=this.config[o],l=_z(r,a.eventOptions,!!i);if(a.enabled){const u=Oq.get(o);new u(this,e,o).bind(l)}}const s=_z(r,t.eventOptions,!!i);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](Sr(Sr({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const s in r)r[s]=iCe(...r[s]);if(!i)return r;for(const s in r){const{device:o,capture:a,passive:l}=Z2e(s);this._targetEventStore.add(i,o,"",r[s],{capture:a,passive:l})}}}}function Mh(n,e){n.gestures.add(e),n.gestureEventStores[e]=new kq(n,e),n.gestureTimeoutStores[e]=new PCe}function OCe(n,e){e.drag&&Mh(n,"drag"),e.wheel&&Mh(n,"wheel"),e.scroll&&Mh(n,"scroll"),e.move&&Mh(n,"move"),e.pinch&&Mh(n,"pinch"),e.hover&&Mh(n,"hover")}const _z=(n,e,t)=>(r,i,s,o={},a=!1)=>{var l,u;const c=(l=o.capture)!==null&&l!==void 0?l:e.capture,f=(u=o.passive)!==null&&u!==void 0?u:e.passive;let d=a?r:Y2e(r,i,c);t&&f&&(d+="Passive"),n[d]=n[d]||[],n[d].push(s)};function kCe(n,e={},t,r){const i=De.useMemo(()=>new RCe(n),[]);if(i.applyHandlers(n,r),i.applyConfig(e,t),De.useEffect(i.effect.bind(i)),De.useEffect(()=>i.clean.bind(i),[]),e.target===void 0)return i.bind.bind(i)}function ICe(n,e){return ECe(MCe),kCe({drag:n},e||{},"drag")}function au(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Iq(n,e=[]){let t=[];function r(s,o){const a=k.createContext(o),l=t.length;t=[...t,o];function u(f){const{scope:d,children:h,...m}=f,v=(d==null?void 0:d[n][l])||a,y=k.useMemo(()=>m,Object.values(m));return k.createElement(v.Provider,{value:y},h)}function c(f,d){const h=(d==null?void 0:d[n][l])||a,m=k.useContext(h);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,c]}const i=()=>{const s=t.map(o=>k.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return k.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return i.scopeName=n,[r,LCe(i,...e)]}function LCe(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:u})=>{const f=l(s)[`__scope${u}`];return{...a,...f}},{});return k.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function Um(n){const e=k.useRef(n);return k.useEffect(()=>{e.current=n}),k.useMemo(()=>(...t)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...t)},[])}function FCe(n,e=globalThis==null?void 0:globalThis.document){const t=Um(n);k.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[t,e])}const F3="dismissableLayer.update",BCe="dismissableLayer.pointerDownOutside",zCe="dismissableLayer.focusOutside";let Ez;const UCe=k.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$Ce=k.forwardRef((n,e)=>{var t;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...u}=n,c=k.useContext(UCe),[f,d]=k.useState(null),h=(t=f==null?void 0:f.ownerDocument)!==null&&t!==void 0?t:globalThis==null?void 0:globalThis.document,[,m]=k.useState({}),v=Bm(e,A=>d(A)),y=Array.from(c.layers),[p]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),S=y.indexOf(p),b=f?y.indexOf(f):-1,g=c.layersWithOutsidePointerEventsDisabled.size>0,w=b>=S,x=VCe(A=>{const N=A.target,C=[...c.branches].some(T=>T.contains(N));!w||C||(s==null||s(A),a==null||a(A),A.defaultPrevented||l==null||l())},h),M=HCe(A=>{const N=A.target;[...c.branches].some(T=>T.contains(N))||(o==null||o(A),a==null||a(A),A.defaultPrevented||l==null||l())},h);return FCe(A=>{b===c.layers.size-1&&(i==null||i(A),!A.defaultPrevented&&l&&(A.preventDefault(),l()))},h),k.useEffect(()=>{if(f)return r&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(Ez=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(f)),c.layers.add(f),Mz(),()=>{r&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=Ez)}},[f,h,r,c]),k.useEffect(()=>()=>{f&&(c.layers.delete(f),c.layersWithOutsidePointerEventsDisabled.delete(f),Mz())},[f,c]),k.useEffect(()=>{const A=()=>m({});return document.addEventListener(F3,A),()=>document.removeEventListener(F3,A)},[]),k.createElement(Zd.div,at({},u,{ref:v,style:{pointerEvents:g?w?"auto":"none":void 0,...n.style},onFocusCapture:au(n.onFocusCapture,M.onFocusCapture),onBlurCapture:au(n.onBlurCapture,M.onBlurCapture),onPointerDownCapture:au(n.onPointerDownCapture,x.onPointerDownCapture)}))});function VCe(n,e=globalThis==null?void 0:globalThis.document){const t=Um(n),r=k.useRef(!1),i=k.useRef(()=>{});return k.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let u=function(){Lq(BCe,t,l,{discrete:!0})};const l={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=u,e.addEventListener("click",i.current,{once:!0})):u()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function HCe(n,e=globalThis==null?void 0:globalThis.document){const t=Um(n),r=k.useRef(!1);return k.useEffect(()=>{const i=s=>{s.target&&!r.current&&Lq(zCe,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Mz(){const n=new CustomEvent(F3);document.dispatchEvent(n)}function Lq(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?l2e(i,s):i.dispatchEvent(s)}const dm=globalThis!=null&&globalThis.document?k.useLayoutEffect:()=>{},WCe=Qw.useId||(()=>{});let jCe=0;function GCe(n){const[e,t]=k.useState(WCe());return dm(()=>{t(r=>r??String(jCe++))},[n]),e?`radix-${e}`:""}const qCe=["top","right","bottom","left"],yl=Math.min,mo=Math.max,JS=Math.round,Px=Math.floor,Zc=n=>({x:n,y:n}),XCe={left:"right",right:"left",bottom:"top",top:"bottom"},YCe={start:"end",end:"start"};function B3(n,e,t){return mo(n,yl(e,t))}function Du(n,e){return typeof n=="function"?n(e):n}function Nu(n){return n.split("-")[0]}function $m(n){return n.split("-")[1]}function DR(n){return n==="x"?"y":"x"}function NR(n){return n==="y"?"height":"width"}function Vm(n){return["top","bottom"].includes(Nu(n))?"y":"x"}function PR(n){return DR(Vm(n))}function KCe(n,e,t){t===void 0&&(t=!1);const r=$m(n),i=PR(n),s=NR(i);let o=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=QS(o)),[o,QS(o)]}function ZCe(n){const e=QS(n);return[z3(n),e,z3(e)]}function z3(n){return n.replace(/start|end/g,e=>YCe[e])}function JCe(n,e,t){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function QCe(n,e,t,r){const i=$m(n);let s=JCe(Nu(n),t==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(z3)))),s}function QS(n){return n.replace(/left|right|bottom|top/g,e=>XCe[e])}function eAe(n){return{top:0,right:0,bottom:0,left:0,...n}}function Fq(n){return typeof n!="number"?eAe(n):{top:n,right:n,bottom:n,left:n}}function e_(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function Cz(n,e,t){let{reference:r,floating:i}=n;const s=Vm(e),o=PR(e),a=NR(o),l=Nu(e),u=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(l){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch($m(e)){case"start":h[o]-=d*(t&&u?-1:1);break;case"end":h[o]+=d*(t&&u?-1:1);break}return h}const tAe=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:n,floating:e,strategy:i}),{x:c,y:f}=Cz(u,r,l),d=r,h={},m=0;for(let v=0;v<a.length;v++){const{name:y,fn:p}=a[v],{x:S,y:b,data:g,reset:w}=await p({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:u,platform:o,elements:{reference:n,floating:e}});c=S??c,f=b??f,h={...h,[y]:{...h[y],...g}},w&&m<=50&&(m++,typeof w=="object"&&(w.placement&&(d=w.placement),w.rects&&(u=w.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:i}):w.rects),{x:c,y:f}=Cz(u,d,l)),v=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function b0(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=n,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=Du(e,n),m=Fq(h),y=a[d?f==="floating"?"reference":"floating":f],p=e_(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(y)))==null||t?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),S=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),g=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},w=e_(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:S,offsetParent:b,strategy:l}):S);return{top:(p.top-w.top+m.top)/g.y,bottom:(w.bottom-p.bottom+m.bottom)/g.y,left:(p.left-w.left+m.left)/g.x,right:(w.right-p.right+m.right)/g.x}}const nAe=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:u,padding:c=0}=Du(n,e)||{};if(u==null)return{};const f=Fq(c),d={x:t,y:r},h=PR(i),m=NR(h),v=await o.getDimensions(u),y=h==="y",p=y?"top":"left",S=y?"bottom":"right",b=y?"clientHeight":"clientWidth",g=s.reference[m]+s.reference[h]-d[h]-s.floating[m],w=d[h]-s.reference[h],x=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let M=x?x[b]:0;(!M||!await(o.isElement==null?void 0:o.isElement(x)))&&(M=a.floating[b]||s.floating[m]);const A=g/2-w/2,N=M/2-v[m]/2-1,C=yl(f[p],N),T=yl(f[S],N),R=C,$=M-v[m]-T,B=M/2-v[m]/2+A,z=B3(R,B,$),D=!l.arrow&&$m(i)!=null&&B!==z&&s.reference[m]/2-(B<R?C:T)-v[m]/2<0,I=D?B<R?B-R:B-$:0;return{[h]:d[h]+I,data:{[h]:z,centerOffset:B-z-I,...D&&{alignmentOffset:I}},reset:D}}}),rAe=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:v=!0,...y}=Du(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const p=Nu(i),S=Nu(a)===a,b=await(l.isRTL==null?void 0:l.isRTL(u.floating)),g=d||(S||!v?[QS(a)]:ZCe(a));!d&&m!=="none"&&g.push(...QCe(a,v,m,b));const w=[a,...g],x=await b0(e,y),M=[];let A=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&M.push(x[p]),f){const R=KCe(i,o,b);M.push(x[R[0]],x[R[1]])}if(A=[...A,{placement:i,overflows:M}],!M.every(R=>R<=0)){var N,C;const R=(((N=s.flip)==null?void 0:N.index)||0)+1,$=w[R];if($)return{data:{index:R,overflows:A},reset:{placement:$}};let B=(C=A.filter(z=>z.overflows[0]<=0).sort((z,D)=>z.overflows[1]-D.overflows[1])[0])==null?void 0:C.placement;if(!B)switch(h){case"bestFit":{var T;const z=(T=A.map(D=>[D.placement,D.overflows.filter(I=>I>0).reduce((I,U)=>I+U,0)]).sort((D,I)=>D[1]-I[1])[0])==null?void 0:T[0];z&&(B=z);break}case"initialPlacement":B=a;break}if(i!==B)return{reset:{placement:B}}}return{}}}};function Az(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function Tz(n){return qCe.some(e=>n[e]>=0)}const iAe=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=Du(n,e);switch(r){case"referenceHidden":{const s=await b0(e,{...i,elementContext:"reference"}),o=Az(s,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Tz(o)}}}case"escaped":{const s=await b0(e,{...i,altBoundary:!0}),o=Az(s,t.floating);return{data:{escapedOffsets:o,escaped:Tz(o)}}}default:return{}}}}};async function sAe(n,e){const{placement:t,platform:r,elements:i}=n,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Nu(t),a=$m(t),l=Vm(t)==="y",u=["left","top"].includes(o)?-1:1,c=s&&l?-1:1,f=Du(e,n);let{mainAxis:d,crossAxis:h,alignmentAxis:m}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof m=="number"&&(h=a==="end"?m*-1:m),l?{x:h*c,y:d*u}:{x:d*u,y:h*c}}const oAe=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await sAe(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},aAe=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:p,y:S}=y;return{x:p,y:S}}},...l}=Du(n,e),u={x:t,y:r},c=await b0(e,l),f=Vm(Nu(i)),d=DR(f);let h=u[d],m=u[f];if(s){const y=d==="y"?"top":"left",p=d==="y"?"bottom":"right",S=h+c[y],b=h-c[p];h=B3(S,h,b)}if(o){const y=f==="y"?"top":"left",p=f==="y"?"bottom":"right",S=m+c[y],b=m-c[p];m=B3(S,m,b)}const v=a.fn({...e,[d]:h,[f]:m});return{...v,data:{x:v.x-t,y:v.y-r}}}}},lAe=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=Du(n,e),c={x:t,y:r},f=Vm(i),d=DR(f);let h=c[d],m=c[f];const v=Du(a,e),y=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const b=d==="y"?"height":"width",g=s.reference[d]-s.floating[b]+y.mainAxis,w=s.reference[d]+s.reference[b]-y.mainAxis;h<g?h=g:h>w&&(h=w)}if(u){var p,S;const b=d==="y"?"width":"height",g=["top","left"].includes(Nu(i)),w=s.reference[f]-s.floating[b]+(g&&((p=o.offset)==null?void 0:p[f])||0)+(g?0:y.crossAxis),x=s.reference[f]+s.reference[b]+(g?0:((S=o.offset)==null?void 0:S[f])||0)-(g?y.crossAxis:0);m<w?m=w:m>x&&(m=x)}return{[d]:h,[f]:m}}}},uAe=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){const{placement:t,rects:r,platform:i,elements:s}=e,{apply:o=()=>{},...a}=Du(n,e),l=await b0(e,a),u=Nu(t),c=$m(t),f=Vm(t)==="y",{width:d,height:h}=r.floating;let m,v;u==="top"||u==="bottom"?(m=u,v=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(v=u,m=c==="end"?"top":"bottom");const y=h-l.top-l.bottom,p=d-l.left-l.right,S=yl(h-l[m],y),b=yl(d-l[v],p),g=!e.middlewareData.shift;let w=S,x=b;if(f?x=c||g?yl(b,p):p:w=c||g?yl(S,y):y,g&&!c){const A=mo(l.left,0),N=mo(l.right,0),C=mo(l.top,0),T=mo(l.bottom,0);f?x=d-2*(A!==0||N!==0?A+N:mo(l.left,l.right)):w=h-2*(C!==0||T!==0?C+T:mo(l.top,l.bottom))}await o({...e,availableWidth:x,availableHeight:w});const M=await i.getDimensions(s.floating);return d!==M.width||h!==M.height?{reset:{rects:!0}}:{}}}};function Hm(n){return Bq(n)?(n.nodeName||"").toLowerCase():"#document"}function Eo(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Uu(n){var e;return(e=(Bq(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function Bq(n){return n instanceof Node||n instanceof Eo(n).Node}function kl(n){return n instanceof Element||n instanceof Eo(n).Element}function Il(n){return n instanceof HTMLElement||n instanceof Eo(n).HTMLElement}function Dz(n){return typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Eo(n).ShadowRoot}function Ay(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=Ia(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(i)}function cAe(n){return["table","td","th"].includes(Hm(n))}function RR(n){const e=OR(),t=Ia(n);return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function fAe(n){let e=Jc(n);for(;Il(e)&&!hm(e);){if(RR(e))return e;e=Jc(e)}return null}function OR(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function hm(n){return["html","body","#document"].includes(Hm(n))}function Ia(n){return Eo(n).getComputedStyle(n)}function AE(n){return kl(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function Jc(n){if(Hm(n)==="html")return n;const e=n.assignedSlot||n.parentNode||Dz(n)&&n.host||Uu(n);return Dz(e)?e.host:e}function zq(n){const e=Jc(n);return hm(e)?n.ownerDocument?n.ownerDocument.body:n.body:Il(e)&&Ay(e)?e:zq(e)}function w0(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=zq(n),s=i===((r=n.ownerDocument)==null?void 0:r.body),o=Eo(i);return s?e.concat(o,o.visualViewport||[],Ay(i)?i:[],o.frameElement&&t?w0(o.frameElement):[]):e.concat(i,w0(i,[],t))}function Uq(n){const e=Ia(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Il(n),s=i?n.offsetWidth:t,o=i?n.offsetHeight:r,a=JS(t)!==s||JS(r)!==o;return a&&(t=s,r=o),{width:t,height:r,$:a}}function kR(n){return kl(n)?n:n.contextElement}function Hp(n){const e=kR(n);if(!Il(e))return Zc(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:s}=Uq(e);let o=(s?JS(t.width):t.width)/r,a=(s?JS(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const dAe=Zc(0);function $q(n){const e=Eo(n);return!OR()||!e.visualViewport?dAe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function hAe(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Eo(n)?!1:e}function Rd(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=kR(n);let o=Zc(1);e&&(r?kl(r)&&(o=Hp(r)):o=Hp(n));const a=hAe(s,t,r)?$q(s):Zc(0);let l=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=Eo(s),h=r&&kl(r)?Eo(r):r;let m=d,v=m.frameElement;for(;v&&r&&h!==m;){const y=Hp(v),p=v.getBoundingClientRect(),S=Ia(v),b=p.left+(v.clientLeft+parseFloat(S.paddingLeft))*y.x,g=p.top+(v.clientTop+parseFloat(S.paddingTop))*y.y;l*=y.x,u*=y.y,c*=y.x,f*=y.y,l+=b,u+=g,m=Eo(v),v=m.frameElement}}return e_({width:c,height:f,x:l,y:u})}const pAe=[":popover-open",":modal"];function IR(n){return pAe.some(e=>{try{return n.matches(e)}catch{return!1}})}function mAe(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const s=i==="fixed",o=Uu(r),a=e?IR(e.floating):!1;if(r===o||a&&s)return t;let l={scrollLeft:0,scrollTop:0},u=Zc(1);const c=Zc(0),f=Il(r);if((f||!f&&!s)&&((Hm(r)!=="body"||Ay(o))&&(l=AE(r)),Il(r))){const d=Rd(r);u=Hp(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:t.width*u.x,height:t.height*u.y,x:t.x*u.x-l.scrollLeft*u.x+c.x,y:t.y*u.y-l.scrollTop*u.y+c.y}}function gAe(n){return Array.from(n.getClientRects())}function Vq(n){return Rd(Uu(n)).left+AE(n).scrollLeft}function vAe(n){const e=Uu(n),t=AE(n),r=n.ownerDocument.body,i=mo(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=mo(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+Vq(n);const a=-t.scrollTop;return Ia(r).direction==="rtl"&&(o+=mo(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function yAe(n,e){const t=Eo(n),r=Uu(n),i=t.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const u=OR();(!u||u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function xAe(n,e){const t=Rd(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,s=Il(n)?Hp(n):Zc(1),o=n.clientWidth*s.x,a=n.clientHeight*s.y,l=i*s.x,u=r*s.y;return{width:o,height:a,x:l,y:u}}function Nz(n,e,t){let r;if(e==="viewport")r=yAe(n,t);else if(e==="document")r=vAe(Uu(n));else if(kl(e))r=xAe(e,t);else{const i=$q(n);r={...e,x:e.x-i.x,y:e.y-i.y}}return e_(r)}function Hq(n,e){const t=Jc(n);return t===e||!kl(t)||hm(t)?!1:Ia(t).position==="fixed"||Hq(t,e)}function bAe(n,e){const t=e.get(n);if(t)return t;let r=w0(n,[],!1).filter(a=>kl(a)&&Hm(a)!=="body"),i=null;const s=Ia(n).position==="fixed";let o=s?Jc(n):n;for(;kl(o)&&!hm(o);){const a=Ia(o),l=RR(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Ay(o)&&!l&&Hq(n,o))?r=r.filter(c=>c!==o):i=a,o=Jc(o)}return e.set(n,r),r}function wAe(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const o=[...t==="clippingAncestors"?IR(e)?[]:bAe(e,this._c):[].concat(t),r],a=o[0],l=o.reduce((u,c)=>{const f=Nz(e,c,i);return u.top=mo(f.top,u.top),u.right=yl(f.right,u.right),u.bottom=yl(f.bottom,u.bottom),u.left=mo(f.left,u.left),u},Nz(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function SAe(n){const{width:e,height:t}=Uq(n);return{width:e,height:t}}function _Ae(n,e,t){const r=Il(e),i=Uu(e),s=t==="fixed",o=Rd(n,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Zc(0);if(r||!r&&!s)if((Hm(e)!=="body"||Ay(i))&&(a=AE(e)),r){const f=Rd(e,!0,s,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else i&&(l.x=Vq(i));const u=o.left+a.scrollLeft-l.x,c=o.top+a.scrollTop-l.y;return{x:u,y:c,width:o.width,height:o.height}}function EC(n){return Ia(n).position==="static"}function Pz(n,e){return!Il(n)||Ia(n).position==="fixed"?null:e?e(n):n.offsetParent}function Wq(n,e){const t=Eo(n);if(IR(n))return t;if(!Il(n)){let i=Jc(n);for(;i&&!hm(i);){if(kl(i)&&!EC(i))return i;i=Jc(i)}return t}let r=Pz(n,e);for(;r&&cAe(r)&&EC(r);)r=Pz(r,e);return r&&hm(r)&&EC(r)&&!RR(r)?t:r||fAe(n)||t}const EAe=async function(n){const e=this.getOffsetParent||Wq,t=this.getDimensions,r=await t(n.floating);return{reference:_Ae(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function MAe(n){return Ia(n).direction==="rtl"}const CAe={convertOffsetParentRelativeRectToViewportRelativeRect:mAe,getDocumentElement:Uu,getClippingRect:wAe,getOffsetParent:Wq,getElementRects:EAe,getClientRects:gAe,getDimensions:SAe,getScale:Hp,isElement:kl,isRTL:MAe};function AAe(n,e){let t=null,r;const i=Uu(n);function s(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:u,top:c,width:f,height:d}=n.getBoundingClientRect();if(a||e(),!f||!d)return;const h=Px(c),m=Px(i.clientWidth-(u+f)),v=Px(i.clientHeight-(c+d)),y=Px(u),S={rootMargin:-h+"px "+-m+"px "+-v+"px "+-y+"px",threshold:mo(0,yl(1,l))||1};let b=!0;function g(w){const x=w[0].intersectionRatio;if(x!==l){if(!b)return o();x?o(!1,x):r=setTimeout(()=>{o(!1,1e-7)},1e3)}b=!1}try{t=new IntersectionObserver(g,{...S,root:i.ownerDocument})}catch{t=new IntersectionObserver(g,S)}t.observe(n)}return o(!0),s}function jq(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=kR(n),c=i||s?[...u?w0(u):[],...w0(e)]:[];c.forEach(p=>{i&&p.addEventListener("scroll",t,{passive:!0}),s&&p.addEventListener("resize",t)});const f=u&&a?AAe(u,t):null;let d=-1,h=null;o&&(h=new ResizeObserver(p=>{let[S]=p;S&&S.target===u&&h&&(h.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(e)})),t()}),u&&!l&&h.observe(u),h.observe(e));let m,v=l?Rd(n):null;l&&y();function y(){const p=Rd(n);v&&(p.x!==v.x||p.y!==v.y||p.width!==v.width||p.height!==v.height)&&t(),v=p,m=requestAnimationFrame(y)}return t(),()=>{var p;c.forEach(S=>{i&&S.removeEventListener("scroll",t),s&&S.removeEventListener("resize",t)}),f==null||f(),(p=h)==null||p.disconnect(),h=null,l&&cancelAnimationFrame(m)}}const TAe=oAe,DAe=aAe,NAe=rAe,PAe=uAe,RAe=iAe,Rz=nAe,OAe=lAe,kAe=(n,e,t)=>{const r=new Map,i={platform:CAe,...t},s={...i.platform,_c:r};return tAe(n,e,{...i,platform:s})};var Nw=typeof document<"u"?k.useLayoutEffect:k.useEffect;function t_(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!t_(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const s=i[r];if(!(s==="_owner"&&n.$$typeof)&&!t_(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function Gq(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function Oz(n,e){const t=Gq(n);return Math.round(e*t)/t}function kz(n){const e=k.useRef(n);return Nw(()=>{e.current=n}),e}function IAe(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=n,[c,f]=k.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[d,h]=k.useState(r);t_(d,r)||h(r);const[m,v]=k.useState(null),[y,p]=k.useState(null),S=k.useCallback(I=>{I!==x.current&&(x.current=I,v(I))},[]),b=k.useCallback(I=>{I!==M.current&&(M.current=I,p(I))},[]),g=s||m,w=o||y,x=k.useRef(null),M=k.useRef(null),A=k.useRef(c),N=l!=null,C=kz(l),T=kz(i),R=k.useCallback(()=>{if(!x.current||!M.current)return;const I={placement:e,strategy:t,middleware:d};T.current&&(I.platform=T.current),kAe(x.current,M.current,I).then(U=>{const L={...U,isPositioned:!0};$.current&&!t_(A.current,L)&&(A.current=L,Nm.flushSync(()=>{f(L)}))})},[d,e,t,T]);Nw(()=>{u===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,f(I=>({...I,isPositioned:!1})))},[u]);const $=k.useRef(!1);Nw(()=>($.current=!0,()=>{$.current=!1}),[]),Nw(()=>{if(g&&(x.current=g),w&&(M.current=w),g&&w){if(C.current)return C.current(g,w,R);R()}},[g,w,R,C,N]);const B=k.useMemo(()=>({reference:x,floating:M,setReference:S,setFloating:b}),[S,b]),z=k.useMemo(()=>({reference:g,floating:w}),[g,w]),D=k.useMemo(()=>{const I={position:t,left:0,top:0};if(!z.floating)return I;const U=Oz(z.floating,c.x),L=Oz(z.floating,c.y);return a?{...I,transform:"translate("+U+"px, "+L+"px)",...Gq(z.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:U,top:L}},[t,a,z.floating,c.x,c.y]);return k.useMemo(()=>({...c,update:R,refs:B,elements:z,floatingStyles:D}),[c,R,B,z,D])}const LAe=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?Rz({element:r.current,padding:i}).fn(t):{}:r?Rz({element:r,padding:i}).fn(t):{}}}},FAe=(n,e)=>({...TAe(n),options:[n,e]}),BAe=(n,e)=>({...DAe(n),options:[n,e]}),zAe=(n,e)=>({...OAe(n),options:[n,e]}),UAe=(n,e)=>({...NAe(n),options:[n,e]}),$Ae=(n,e)=>({...PAe(n),options:[n,e]}),VAe=(n,e)=>({...RAe(n),options:[n,e]}),HAe=(n,e)=>({...LAe(n),options:[n,e]}),WAe=k.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...s}=n;return k.createElement(Zd.svg,at({},s,{ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),n.asChild?t:k.createElement("polygon",{points:"0,0 30,0 15,10"}))}),jAe=WAe;function GAe(n){const[e,t]=k.useState(void 0);return dm(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}const qq="Popper",[Xq,Yq]=Iq(qq),[qAe,Kq]=Xq(qq),XAe=n=>{const{__scopePopper:e,children:t}=n,[r,i]=k.useState(null);return k.createElement(qAe,{scope:e,anchor:r,onAnchorChange:i},t)},YAe="PopperAnchor",KAe=k.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,s=Kq(YAe,t),o=k.useRef(null),a=Bm(e,o);return k.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:k.createElement(Zd.div,at({},i,{ref:a}))}),Zq="PopperContent",[ZAe,JAe]=Xq(Zq),QAe=k.forwardRef((n,e)=>{var t,r,i,s,o,a,l,u;const{__scopePopper:c,side:f="bottom",sideOffset:d=0,align:h="center",alignOffset:m=0,arrowPadding:v=0,avoidCollisions:y=!0,collisionBoundary:p=[],collisionPadding:S=0,sticky:b="partial",hideWhenDetached:g=!1,updatePositionStrategy:w="optimized",onPlaced:x,...M}=n,A=Kq(Zq,c),[N,C]=k.useState(null),T=Bm(e,te=>C(te)),[R,$]=k.useState(null),B=GAe(R),z=(t=B==null?void 0:B.width)!==null&&t!==void 0?t:0,D=(r=B==null?void 0:B.height)!==null&&r!==void 0?r:0,I=f+(h!=="center"?"-"+h:""),U=typeof S=="number"?S:{top:0,right:0,bottom:0,left:0,...S},L=Array.isArray(p)?p:[p],q=L.length>0,Z={padding:U,boundary:L.filter(rTe),altBoundary:q},{refs:J,floatingStyles:Y,placement:ee,isPositioned:ae,middlewareData:ce}=IAe({strategy:"fixed",placement:I,whileElementsMounted:(...te)=>jq(...te,{animationFrame:w==="always"}),elements:{reference:A.anchor},middleware:[FAe({mainAxis:d+D,alignmentAxis:m}),y&&BAe({mainAxis:!0,crossAxis:!1,limiter:b==="partial"?zAe():void 0,...Z}),y&&UAe({...Z}),$Ae({...Z,apply:({elements:te,rects:ie,availableWidth:Me,availableHeight:oe})=>{const{width:G,height:j}=ie.reference,de=te.floating.style;de.setProperty("--radix-popper-available-width",`${Me}px`),de.setProperty("--radix-popper-available-height",`${oe}px`),de.setProperty("--radix-popper-anchor-width",`${G}px`),de.setProperty("--radix-popper-anchor-height",`${j}px`)}}),R&&HAe({element:R,padding:v}),iTe({arrowWidth:z,arrowHeight:D}),g&&VAe({strategy:"referenceHidden",...Z})]}),[pe,we]=Jq(ee),me=Um(x);dm(()=>{ae&&(me==null||me())},[ae,me]);const Ae=(i=ce.arrow)===null||i===void 0?void 0:i.x,Ee=(s=ce.arrow)===null||s===void 0?void 0:s.y,re=((o=ce.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[Pe,Re]=k.useState();return dm(()=>{N&&Re(window.getComputedStyle(N).zIndex)},[N]),k.createElement("div",{ref:J.setFloating,"data-radix-popper-content-wrapper":"",style:{...Y,transform:ae?Y.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Pe,"--radix-popper-transform-origin":[(a=ce.transformOrigin)===null||a===void 0?void 0:a.x,(l=ce.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:n.dir},k.createElement(ZAe,{scope:c,placedSide:pe,onArrowChange:$,arrowX:Ae,arrowY:Ee,shouldHideArrow:re},k.createElement(Zd.div,at({"data-side":pe,"data-align":we},M,{ref:T,style:{...M.style,animation:ae?void 0:"none",opacity:(u=ce.hide)!==null&&u!==void 0&&u.referenceHidden?0:void 0}}))))}),eTe="PopperArrow",tTe={top:"bottom",right:"left",bottom:"top",left:"right"},nTe=k.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,s=JAe(eTe,r),o=tTe[s.placedSide];return k.createElement("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0}},k.createElement(jAe,at({},i,{ref:t,style:{...i.style,display:"block"}})))});function rTe(n){return n!==null}const iTe=n=>({name:"transformOrigin",options:n,fn(e){var t,r,i,s,o;const{placement:a,rects:l,middlewareData:u}=e,f=((t=u.arrow)===null||t===void 0?void 0:t.centerOffset)!==0,d=f?0:n.arrowWidth,h=f?0:n.arrowHeight,[m,v]=Jq(a),y={start:"0%",center:"50%",end:"100%"}[v],p=((r=(i=u.arrow)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0)+d/2,S=((s=(o=u.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+h/2;let b="",g="";return m==="bottom"?(b=f?y:`${p}px`,g=`${-h}px`):m==="top"?(b=f?y:`${p}px`,g=`${l.floating.height+h}px`):m==="right"?(b=`${-h}px`,g=f?y:`${S}px`):m==="left"&&(b=`${l.floating.width+h}px`,g=f?y:`${S}px`),{data:{x:b,y:g}}}});function Jq(n){const[e,t="center"]=n.split("-");return[e,t]}const sTe=XAe,oTe=KAe,aTe=QAe,lTe=nTe;function uTe(n,e){return k.useReducer((t,r)=>{const i=e[t][r];return i??t},n)}const Qq=n=>{const{present:e,children:t}=n,r=cTe(e),i=typeof t=="function"?t({present:r.isPresent}):k.Children.only(t),s=Bm(r.ref,i.ref);return typeof t=="function"||r.isPresent?k.cloneElement(i,{ref:s}):null};Qq.displayName="Presence";function cTe(n){const[e,t]=k.useState(),r=k.useRef({}),i=k.useRef(n),s=k.useRef("none"),o=n?"mounted":"unmounted",[a,l]=uTe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return k.useEffect(()=>{const u=Rx(r.current);s.current=a==="mounted"?u:"none"},[a]),dm(()=>{const u=r.current,c=i.current;if(c!==n){const d=s.current,h=Rx(u);n?l("MOUNT"):h==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(c&&d!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,l]),dm(()=>{if(e){const u=f=>{const h=Rx(r.current).includes(f.animationName);f.target===e&&h&&Nm.flushSync(()=>l("ANIMATION_END"))},c=f=>{f.target===e&&(s.current=Rx(r.current))};return e.addEventListener("animationstart",c),e.addEventListener("animationcancel",u),e.addEventListener("animationend",u),()=>{e.removeEventListener("animationstart",c),e.removeEventListener("animationcancel",u),e.removeEventListener("animationend",u)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:k.useCallback(u=>{u&&(r.current=getComputedStyle(u)),t(u)},[])}}function Rx(n){return(n==null?void 0:n.animationName)||"none"}function fTe({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,i]=dTe({defaultProp:e,onChange:t}),s=n!==void 0,o=s?n:r,a=Um(t),l=k.useCallback(u=>{if(s){const f=typeof u=="function"?u(n):u;f!==n&&a(f)}else i(u)},[s,n,i,a]);return[o,l]}function dTe({defaultProp:n,onChange:e}){const t=k.useState(n),[r]=t,i=k.useRef(r),s=Um(e);return k.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),t}const hTe=k.forwardRef((n,e)=>k.createElement(Zd.span,at({},n,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}))),pTe=hTe,[TE,mYe]=Iq("Tooltip",[Yq]),DE=Yq(),mTe="TooltipProvider",U3="tooltip.open",[gYe,LR]=TE(mTe),FR="Tooltip",[gTe,NE]=TE(FR),vTe=n=>{const{__scopeTooltip:e,children:t,open:r,defaultOpen:i=!1,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=n,l=LR(FR,n.__scopeTooltip),u=DE(e),[c,f]=k.useState(null),d=GCe(),h=k.useRef(0),m=o??l.disableHoverableContent,v=a??l.delayDuration,y=k.useRef(!1),[p=!1,S]=fTe({prop:r,defaultProp:i,onChange:M=>{M?(l.onOpen(),document.dispatchEvent(new CustomEvent(U3))):l.onClose(),s==null||s(M)}}),b=k.useMemo(()=>p?y.current?"delayed-open":"instant-open":"closed",[p]),g=k.useCallback(()=>{window.clearTimeout(h.current),y.current=!1,S(!0)},[S]),w=k.useCallback(()=>{window.clearTimeout(h.current),S(!1)},[S]),x=k.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{y.current=!0,S(!0)},v)},[v,S]);return k.useEffect(()=>()=>window.clearTimeout(h.current),[]),k.createElement(sTe,u,k.createElement(gTe,{scope:e,contentId:d,open:p,stateAttribute:b,trigger:c,onTriggerChange:f,onTriggerEnter:k.useCallback(()=>{l.isOpenDelayed?x():g()},[l.isOpenDelayed,x,g]),onTriggerLeave:k.useCallback(()=>{m?w():window.clearTimeout(h.current)},[w,m]),onOpen:g,onClose:w,disableHoverableContent:m},t))},Iz="TooltipTrigger",yTe=k.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=NE(Iz,t),s=LR(Iz,t),o=DE(t),a=k.useRef(null),l=Bm(e,a,i.onTriggerChange),u=k.useRef(!1),c=k.useRef(!1),f=k.useCallback(()=>u.current=!1,[]);return k.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),k.createElement(oTe,at({asChild:!0},o),k.createElement(Zd.button,at({"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute},r,{ref:l,onPointerMove:au(n.onPointerMove,d=>{d.pointerType!=="touch"&&!c.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),c.current=!0)}),onPointerLeave:au(n.onPointerLeave,()=>{i.onTriggerLeave(),c.current=!1}),onPointerDown:au(n.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:au(n.onFocus,()=>{u.current||i.onOpen()}),onBlur:au(n.onBlur,i.onClose),onClick:au(n.onClick,i.onClose)})))}),xTe="TooltipPortal",[vYe,bTe]=TE(xTe,{forceMount:void 0}),S0="TooltipContent",wTe=k.forwardRef((n,e)=>{const t=bTe(S0,n.__scopeTooltip),{forceMount:r=t.forceMount,side:i="top",...s}=n,o=NE(S0,n.__scopeTooltip);return k.createElement(Qq,{present:r||o.open},o.disableHoverableContent?k.createElement(eX,at({side:i},s,{ref:e})):k.createElement(STe,at({side:i},s,{ref:e})))}),STe=k.forwardRef((n,e)=>{const t=NE(S0,n.__scopeTooltip),r=LR(S0,n.__scopeTooltip),i=k.useRef(null),s=Bm(e,i),[o,a]=k.useState(null),{trigger:l,onClose:u}=t,c=i.current,{onPointerInTransitChange:f}=r,d=k.useCallback(()=>{a(null),f(!1)},[f]),h=k.useCallback((m,v)=>{const y=m.currentTarget,p={x:m.clientX,y:m.clientY},S=ATe(p,y.getBoundingClientRect()),b=TTe(p,S),g=DTe(v.getBoundingClientRect()),w=PTe([...b,...g]);a(w),f(!0)},[f]);return k.useEffect(()=>()=>d(),[d]),k.useEffect(()=>{if(l&&c){const m=y=>h(y,c),v=y=>h(y,l);return l.addEventListener("pointerleave",m),c.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",m),c.removeEventListener("pointerleave",v)}}},[l,c,h,d]),k.useEffect(()=>{if(o){const m=v=>{const y=v.target,p={x:v.clientX,y:v.clientY},S=(l==null?void 0:l.contains(y))||(c==null?void 0:c.contains(y)),b=!NTe(p,o);S?d():b&&(d(),u())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[l,c,o,u,d]),k.createElement(eX,at({},n,{ref:s}))}),[_Te,ETe]=TE(FR,{isInside:!1}),eX=k.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=n,l=NE(S0,t),u=DE(t),{onClose:c}=l;return k.useEffect(()=>(document.addEventListener(U3,c),()=>document.removeEventListener(U3,c)),[c]),k.useEffect(()=>{if(l.trigger){const f=d=>{const h=d.target;h!=null&&h.contains(l.trigger)&&c()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,c]),k.createElement($Ce,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:c},k.createElement(aTe,at({"data-state":l.stateAttribute},u,a,{ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),k.createElement(Sq,null,r),k.createElement(_Te,{scope:t,isInside:!0},k.createElement(pTe,{id:l.contentId,role:"tooltip"},i||r))))}),MTe="TooltipArrow",CTe=k.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=DE(t);return ETe(MTe,t).isInside?null:k.createElement(lTe,at({},i,r,{ref:e}))});function ATe(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,r,i,s)){case s:return"left";case i:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function TTe(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function DTe(n){const{top:e,right:t,bottom:r,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:r},{x:i,y:r}]}function NTe(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,u=e[o].x,c=e[o].y;l>r!=c>r&&t<(u-a)*(r-l)/(c-l)+a&&(i=!i)}return i}function PTe(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),RTe(e)}function RTe(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const i=n[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const i=n[r];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}const OTe=vTe,kTe=yTe,ITe=wTe,LTe=CTe;function FTe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Gn(n,e){if(n==null)return{};var t=FTe(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}let xr;(function(n){n[n.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",n[n.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",n[n.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",n[n.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",n[n.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",n[n.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",n[n.THEME_ERROR=6]="THEME_ERROR",n[n.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",n[n.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",n[n.EMPTY_KEY=9]="EMPTY_KEY"})(xr||(xr={}));const BTe={[xr.UNSUPPORTED_INPUT]:(n,e)=>[`An input with type \`${n}\` input was found at path \`${e}\` but it's not supported yet.`],[xr.NO_COMPONENT_FOR_TYPE]:(n,e)=>[`Type \`${n}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[xr.UNKNOWN_INPUT]:(n,e)=>[`input at path \`${n}\` is not recognized.`,e],[xr.DUPLICATE_KEYS]:(n,e,t)=>[`Key \`${n}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[xr.ALREADY_REGISTERED_TYPE]:n=>[`Type ${n} has already been registered. You can't register a component with the same type.`],[xr.CLIPBOARD_ERROR]:n=>["Error copying the value",n],[xr.THEME_ERROR]:(n,e)=>[`Error accessing the theme \`${n}.${e}\` value.`],[xr.PATH_DOESNT_EXIST]:n=>[`Error getting the value at path \`${n}\`. There is probably an error in your \`render\` function.`],[xr.PATH_DOESNT_EXIST]:n=>[`Error accessing the value at path \`${n}\``],[xr.INPUT_TYPE_OVERRIDE]:(n,e,t)=>[`Input at path \`${n}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[xr.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function tX(n,e,...t){const[r,...i]=BTe[e](...t);console[n]("LEVA: "+r,...i)}const lu=tX.bind(null,"warn"),zTe=tX.bind(null,"log"),UTe=["value"],$Te=["schema"],VTe=["value"],nX=[],Od={};function Lz(n){let{value:e}=n,t=Gn(n,UTe);for(let r of nX){const i=r(e,t);if(i)return i}}function $u(n,e){let{schema:t}=e,r=Gn(e,$Te);if(n in Od){lu(xr.ALREADY_REGISTERED_TYPE,n);return}nX.push((i,s)=>t(i,s)&&n),Od[n]=r}function MC(n,e,t,r){const{normalize:i}=Od[n];if(i)return i(e,t,r);if(typeof e!="object"||!("value"in e))return{value:e};const{value:s}=e,o=Gn(e,VTe);return{value:s,settings:o}}function HTe(n,e,t,r,i,s){const{sanitize:o}=Od[n];return o?o(e,t,r,i,s):e}function Fz(n,e,t){const{format:r}=Od[n];return r?r(e,t):e}function WTe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Bz(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function qt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Bz(Object(t),!0).forEach(function(r){WTe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Bz(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const Qc=(n,e,t)=>n>t?t:n<e?e:n,jTe=n=>{if(n===""||typeof n=="number")return n;try{const e=lc(n);if(!isNaN(e))return e}catch{}return parseFloat(n)},GTe=Math.log(10);function zz(n){let e=Math.abs(+String(n).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/GTe)+1,r=Math.floor(Math.log10(Math.abs(n))),i=Math.pow(10,r-t);return Math.max(i,.001)}const n_=(n,e,t)=>t===e?0:(Qc(n,e,t)-e)/(t-e),r_=(n,e,t)=>n*(t-e)+e,qTe=()=>"_"+Math.random().toString(36).substr(2,9),Uz=/\(([0-9+\-*/^ .]+)\)/,$z=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,Vz=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,Hz=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,Wz=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,jz=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function lc(n){if(isNaN(Number(n)))if(Uz.test(n)){const e=n.replace(Uz,(t,r)=>String(lc(r)));return lc(e)}else if($z.test(n)){const e=n.replace($z,(t,r,i)=>String(Math.pow(Number(r),Number(i))));return lc(e)}else if(Vz.test(n)){const e=n.replace(Vz,(t,r,i)=>String(Number(r)*Number(i)));return lc(e)}else if(Hz.test(n)){const e=n.replace(Hz,(t,r,i)=>{if(i!=0)return String(Number(r)/Number(i));throw new Error("Division by zero")});return lc(e)}else if(Wz.test(n)){const e=n.replace(Wz,(t,r,i)=>String(Number(r)+Number(i)));return lc(e)}else if(jz.test(n)){const e=n.replace(jz,(t,r,i)=>String(Number(r)-Number(i)));return lc(e)}else return Number(n);return Number(n)}function XTe(n,e){return e.reduce((t,r)=>(n&&n.hasOwnProperty(r)&&(t[r]=n[r]),t),{})}function YTe(n,e){const t=qt({},n);return e.forEach(r=>r in n&&delete t[r]),t}function KTe(n,e){return n.reduce((t,r,i)=>Object.assign(t,{[e[i]]:r}),{})}function rX(n){return Object.prototype.toString.call(n)==="[object Object]"}const ZTe=n=>rX(n)&&Object.keys(n).length===0;let na;(function(n){n.BUTTON="BUTTON",n.BUTTON_GROUP="BUTTON_GROUP",n.MONITOR="MONITOR",n.FOLDER="FOLDER"})(na||(na={}));let La;(function(n){n.SELECT="SELECT",n.IMAGE="IMAGE",n.NUMBER="NUMBER",n.COLOR="COLOR",n.STRING="STRING",n.BOOLEAN="BOOLEAN",n.INTERVAL="INTERVAL",n.VECTOR3D="VECTOR3D",n.VECTOR2D="VECTOR2D"})(La||(La={}));const JTe=["type","__customInput"],QTe=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],e3e=["type"];function iX(n,e,t={},r){var i,s;if(typeof n!="object"||Array.isArray(n))return{type:r,input:n,options:qt({key:e,label:e,optional:!1,disabled:!1,order:0},t)};if("__customInput"in n){const{type:w,__customInput:x}=n,M=Gn(n,JTe);return iX(x,e,M,w)}const{render:o,label:a,optional:l,order:u=0,disabled:c,hint:f,onChange:d,onEditStart:h,onEditEnd:m,transient:v}=n,y=Gn(n,QTe),p=qt({render:o,key:e,label:a??e,hint:f,transient:v??!!d,onEditStart:h,onEditEnd:m,disabled:c,optional:l,order:u},t);let{type:S}=y,b=Gn(y,e3e);if(S=r??S,S in na)return{type:S,input:b,options:p};let g;return r&&rX(b)&&"value"in b?g=b.value:g=ZTe(b)?void 0:b,{type:S,input:g,options:qt(qt({},p),{},{onChange:d,optional:(i=p.optional)!==null&&i!==void 0?i:!1,disabled:(s=p.disabled)!==null&&s!==void 0?s:!1})}}function t3e(n,e,t,r){const i=iX(n,e),{type:s,input:o,options:a}=i;if(s)return s in na?i:{type:s,input:MC(s,o,t,r),options:a};let l=Lz(o);return l?{type:l,input:MC(l,o,t,r),options:a}:(l=Lz({value:o}),l?{type:l,input:MC(l,{value:o},t,r),options:a}:!1)}function Gz(n,e,t,r,i){const{value:s,type:o,settings:a}=n;n.value=sX({type:o,value:s,settings:a},e,t,r),n.fromPanel=i}const n3e=function(e,t,r){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=r};function sX({type:n,value:e,settings:t},r,i,s){const o=n!=="SELECT"&&typeof r=="function"?r(e):r;let a;try{a=HTe(n,o,t,e,i,s)}catch(l){throw new n3e(`The value \`${r}\` did not result in a correct value.`,e,l)}return y0(a,e)?e:a}const oX=(n,e,t=!1)=>{let r=0;return function(){const i=arguments,s=t&&!r,o=()=>n.apply(this,i);window.clearTimeout(r),r=window.setTimeout(o,e),s&&o()}},aX=n=>n.shiftKey?5:n.altKey?1/5:1;function r3e(n,e){const t=console.error;console.error=()=>{},EW.render(n,e),console.error=t}const i3e=["value"],s3e=["min","max"],o3e=n=>{if(typeof n=="number")return!0;if(typeof n=="string"){const e=parseFloat(n);return isNaN(e)?!1:n.substring((""+e).length).trim().length<4}return!1},lX=(n,{min:e=-1/0,max:t=1/0,suffix:r})=>{const i=parseFloat(n);if(n===""||isNaN(i))throw Error("Invalid number");const s=Qc(i,e,t);return r?s+r:s},a3e=(n,{pad:e=0,suffix:t})=>{const r=parseFloat(n).toFixed(e);return t?r+t:r},uX=n=>{let{value:e}=n,t=Gn(n,i3e);const{min:r=-1/0,max:i=1/0}=t,s=Gn(t,s3e);let o=parseFloat(e);const a=typeof e=="string"?e.substring((""+o).length):void 0;o=Qc(o,r,i);let l=t.step;l||(Number.isFinite(r)?Number.isFinite(i)?l=+(Math.abs(i-r)/100).toPrecision(1):l=+(Math.abs(o-r)/100).toPrecision(1):Number.isFinite(i)&&(l=+(Math.abs(i-o)/100).toPrecision(1)));const u=l?zz(l)*10:zz(o);l=l||u/10;const c=Math.round(Qc(Math.log10(1/u),0,2));return{value:a?o+a:o,settings:qt({initialValue:o,step:l,pad:c,min:r,max:i,suffix:a},s)}},cX=(n,{step:e,initialValue:t})=>{const r=Math.round((n-t)/e);return t+r*e};var fX=Object.freeze({__proto__:null,schema:o3e,sanitize:lX,format:a3e,normalize:uX,sanitizeStep:cX});function Cr(){return Cr=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Cr.apply(this,arguments)}const dX=k.createContext({});function ds(){return k.useContext(dX)}const BR=k.createContext(null),hX=k.createContext(null),pX=k.createContext(null);function Wm(){return k.useContext(hX)}function l3e(){return k.useContext(pX)}const mX=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function Ox(n,e){const[t,r]=n.split(" "),i={};return t!=="none"&&(i.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),r&&(i.backgroundColor=r),i}const kg={$inputStyle:()=>n=>Ox(n,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>n=>Ox(n,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>n=>Ox(n,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>n=>Ox(n,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:Gt,css:yYe,createTheme:u3e,globalCss:c3e,keyframes:xYe}=V2e({prefix:"leva",theme:mX(),utils:qt(qt({},kg),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:n=>({"&:focus":kg.$focusStyle()(n)}),$focusWithin:n=>({"&:focus-within":kg.$focusStyle()(n)}),$hover:n=>({"&:hover":kg.$hoverStyle()(n)}),$active:n=>({"&:active":kg.$activeStyle()(n)})})}),f3e=c3e({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function d3e(n){const e=mX();if(!n)return{theme:e,className:""};Object.keys(n).forEach(r=>{Object.assign(e[r],n[r])});const t=u3e(e);return{theme:e,className:t.className}}function yu(n,e){const{theme:t}=k.useContext(BR);if(!(n in t)||!(e in t[n]))return lu(xr.THEME_ERROR,n,e),"";let r=e;for(;;){let i=t[n][r];if(typeof i=="string"&&i.charAt(0)==="$")r=i.substr(1);else return i}}const gX=Gt("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),vX=Gt("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${gX}`]:{paddingLeft:0}}),h3e=Gt(vX,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),p3e=Gt("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),m3e=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],g3e=["onUpdate"];function zR(n){let{innerLabel:e,value:t,onUpdate:r,onChange:i,onKeyDown:s,type:o,id:a,inputType:l="text",rows:u=0}=n,c=Gn(n,m3e);const{id:f,emitOnEditStart:d,emitOnEditEnd:h,disabled:m}=ds(),v=a||f,y=k.useRef(null),p=u>0,S=p?"textarea":"input",b=k.useCallback(x=>M=>{const A=M.currentTarget.value;x(A)},[]);De.useEffect(()=>{const x=y.current,M=b(A=>{r(A),h()});return x==null||x.addEventListener("blur",M),()=>x==null?void 0:x.removeEventListener("blur",M)},[b,r,h]);const g=k.useCallback(x=>{x.key==="Enter"&&b(r)(x)},[b,r]),w=Object.assign({as:S},p?{rows:u}:{},c);return De.createElement(p3e,{textArea:p},e&&typeof e=="string"?De.createElement(vX,null,e):e,De.createElement(gX,Cr({levaType:o,ref:y,id:v,type:l,autoComplete:"off",spellCheck:"false",value:t,onChange:b(i),onFocus:()=>d(),onKeyPress:g,onKeyDown:s,disabled:m},w)))}function v3e(n){let{onUpdate:e}=n,t=Gn(n,g3e);const r=k.useCallback(s=>e(jTe(s)),[e]),i=k.useCallback(s=>{const o=s.key==="ArrowUp"?1:s.key==="ArrowDown"?-1:0;if(o){s.preventDefault();const a=s.altKey?.1:s.shiftKey?10:1;e(l=>parseFloat(l)+o*a)}},[e]);return De.createElement(zR,Cr({},t,{onUpdate:r,onKeyDown:i,type:"number"}))}const i_=Gt("div",{}),$3=Gt("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),y3e=Gt("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${$3}::after`]:{opacity:.6},[`${i_}:hover > & + ${$3}::after`]:{opacity:.6},[`${i_}:hover > & > svg`]:{opacity:1}}),yX=Gt("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${i_}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),xX=Gt("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${yX} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),bX=Gt(xX,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),x3e=Gt("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),b3e=Gt("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),V3=Gt("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),w3e=Gt("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${V3}`]:{pointerEvents:"auto"}}}}}),wX=Gt("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),S3e=Gt("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),_3e=Gt(LTe,{fill:"$toolTipBackground"});function UR({children:n}){const{className:e}=k.useContext(BR);return De.createElement(c2e,{className:e},n)}const E3e=["align"];function M3e(){const{id:n,disable:e,disabled:t}=ds();return De.createElement(De.Fragment,null,De.createElement(b3e,{id:n+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),De.createElement("label",{htmlFor:n+"__disable"}))}function C3e(n){const{id:e,optional:t,hint:r}=ds(),i=n.htmlFor||(e?{htmlFor:e}:null),s=!r&&typeof n.children=="string"?{title:n.children}:null;return De.createElement(De.Fragment,null,t&&De.createElement(M3e,null),r!==void 0?De.createElement(OTe,null,De.createElement(kTe,{asChild:!0},De.createElement(V3,Cr({},i,n))),De.createElement(ITe,{side:"top",sideOffset:2},De.createElement(S3e,null,r,De.createElement(_3e,null)))):De.createElement(V3,Cr({},i,s,n)))}function Va(n){let{align:e}=n,t=Gn(n,E3e);const{value:r,label:i,key:s,disabled:o}=ds(),{hideCopyButton:a}=l3e(),l=!a&&s!==void 0,[u,c]=k.useState(!1),f=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[s]:r??""})),c(!0)}catch{lu(xr.CLIPBOARD_ERROR,{[s]:r})}};return De.createElement(x3e,{align:e,onPointerLeave:()=>c(!1)},De.createElement(C3e,t),l&&!o&&De.createElement("div",{title:`Click to copy ${typeof i=="string"?i:s} value`},u?De.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},De.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),De.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):De.createElement("svg",{onClick:f,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},De.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),De.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const A3e=["toggled"],T3e=Gt("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function $R(n){let{toggled:e}=n,t=Gn(n,A3e);return De.createElement(T3e,Cr({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},t),De.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const D3e=["input"];function ha(n){let{input:e}=n,t=Gn(n,D3e);return e?De.createElement(bX,t):De.createElement(xX,t)}function SX({value:n,type:e,settings:t,setValue:r}){const[i,s]=k.useState(Fz(e,n,t)),o=k.useRef(n),a=k.useRef(t);a.current=t;const l=k.useCallback(c=>s(Fz(e,c,a.current)),[e]),u=k.useCallback(c=>{try{r(c)}catch(f){const{type:d,previousValue:h}=f;if(d!=="LEVA_ERROR")throw f;l(h)}},[l,r]);return k.useEffect(()=>{y0(n,o.current)||l(n),o.current=n},[n,l]),{displayValue:i,onChange:s,onUpdate:u}}function Ty(n,e){const{emitOnEditStart:t,emitOnEditEnd:r}=ds();return ICe(i=>{i.first&&(document.body.classList.add("leva__panel__dragged"),t==null||t());const s=n(i);return i.last&&(document.body.classList.remove("leva__panel__dragged"),r==null||r()),s},e)}function N3e(n){const e=k.useRef(null),t=k.useRef(null),r=k.useRef(!1);return k.useEffect(()=>{const i=oX(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,n(e.current,t.current)},250);return window.addEventListener("resize",i),r.current||(i(),r.current=!0),()=>window.removeEventListener("resize",i)},[n]),k.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function _X(){const n=k.useRef(null),e=k.useRef({x:0,y:0}),t=k.useCallback(r=>{Object.assign(e.current,r),n.current&&(n.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[n,t]}const P3e=["__refCount"],CC=(n,e)=>{if(!n[e])return null;const t=n[e];return Gn(t,P3e)};function R3e(n){const e=Wm(),[t,r]=k.useState(CC(e.getData(),n)),i=k.useCallback(u=>e.setValueAtPath(n,u,!0),[n,e]),s=k.useCallback(u=>e.setSettingsAtPath(n,u),[n,e]),o=k.useCallback(u=>e.disableInputAtPath(n,u),[n,e]),a=k.useCallback(()=>e.emitOnEditStart(n),[n,e]),l=k.useCallback(()=>e.emitOnEditEnd(n),[n,e]);return k.useEffect(()=>{r(CC(e.getData(),n));const u=e.useStore.subscribe(c=>CC(c.data,n),r,{equalityFn:EE});return()=>u()},[e,n]),[t,{set:i,setSettings:s,disable:o,storeId:e.storeId,emitOnEditStart:a,emitOnEditEnd:l}]}const O3e=Gt("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),EX=Gt("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),H3=Gt("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),MX=Gt("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),CX=Gt("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function k3e({value:n,min:e,max:t,onDrag:r,step:i,initialValue:s}){const o=k.useRef(null),a=k.useRef(null),l=k.useRef(0),u=yu("sizes","scrubberWidth"),c=Ty(({event:d,first:h,xy:[m],movement:[v],memo:y})=>{if(h){const{width:S,left:b}=o.current.getBoundingClientRect();l.current=S-parseFloat(u),y=(d==null?void 0:d.target)===a.current?n:r_((m-b)/S,e,t)}const p=y+r_(v/l.current,0,t-e);return r(cX(p,{step:i,initialValue:s})),y}),f=n_(n,e,t);return De.createElement(MX,Cr({ref:o},c()),De.createElement(EX,null,De.createElement(CX,{style:{left:0,right:`${(1-f)*100}%`}})),De.createElement(H3,{ref:a,style:{left:`calc(${f} * (100% - ${u}))`}}))}const I3e=De.memo(({label:n,onUpdate:e,step:t,innerLabelTrim:r})=>{const[i,s]=k.useState(!1),o=Ty(({active:a,delta:[l],event:u,memo:c=0})=>(s(a),c+=l/2,Math.abs(c)>=1&&(e(f=>parseFloat(f)+Math.floor(c)*t*aX(u)),c=0),c));return De.createElement(h3e,Cr({dragging:i,title:n.length>1?n:""},o()),n.slice(0,r))});function AX({label:n,id:e,displayValue:t,onUpdate:r,onChange:i,settings:s,innerLabelTrim:o=1}){const a=o>0&&De.createElement(I3e,{label:n,step:s.step,onUpdate:r,innerLabelTrim:o});return De.createElement(v3e,{id:e,value:String(t),onUpdate:r,onChange:i,innerLabel:a})}function L3e(){const n=ds(),{label:e,value:t,onUpdate:r,settings:i,id:s}=n,{min:o,max:a}=i,l=a!==1/0&&o!==-1/0;return De.createElement(ha,{input:!0},De.createElement(Va,null,e),De.createElement(O3e,{hasRange:l},l&&De.createElement(k3e,Cr({value:parseFloat(t),onDrag:r},i)),De.createElement(AX,Cr({},n,{id:s,label:"value",innerLabelTrim:l?0:1}))))}const{sanitizeStep:F3e}=fX,B3e=Gn(fX,["sanitizeStep"]);var z3e=qt({component:L3e},B3e);const U3e=(n,e)=>qs().schema({options:qs().passesAnyOf(qs().object(),qs().array())}).test(e),$3e=(n,{values:e})=>{if(e.indexOf(n)<0)throw Error("Selected value doesn't match Select options");return n},V3e=(n,{values:e})=>e.indexOf(n),H3e=n=>{let{value:e,options:t}=n,r,i;return Array.isArray(t)?(i=t,r=t.map(s=>String(s))):(i=Object.values(t),r=Object.keys(t)),"value"in n?i.includes(e)||(r.unshift(String(e)),i.unshift(e)):e=i[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:r,values:i}}};var W3e=Object.freeze({__proto__:null,schema:U3e,sanitize:$3e,format:V3e,normalize:H3e});const j3e=Gt("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),W3=Gt("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),G3e=Gt("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${W3}:focus + &`]:{$focusStyle:""},[`${W3}:hover + &`]:{$hoverStyle:""}});function q3e({displayValue:n,value:e,onUpdate:t,id:r,settings:i,disabled:s}){const{keys:o,values:a}=i,l=k.useRef();return e===a[n]&&(l.current=o[n]),De.createElement(j3e,null,De.createElement(W3,{id:r,value:n,onChange:u=>t(a[Number(u.currentTarget.value)]),disabled:s},o.map((u,c)=>De.createElement("option",{key:u,value:c},u))),De.createElement(G3e,null,l.current),De.createElement($R,{toggled:!0}))}function X3e(){const{label:n,value:e,displayValue:t,onUpdate:r,id:i,disabled:s,settings:o}=ds();return De.createElement(ha,{input:!0},De.createElement(Va,null,n),De.createElement(q3e,{id:i,value:e,displayValue:t,onUpdate:r,settings:o,disabled:s}))}var Y3e=qt({component:X3e},W3e);const K3e=n=>qs().string().test(n),Z3e=n=>{if(typeof n!="string")throw Error("Invalid string");return n},J3e=({value:n,editable:e=!0,rows:t=!1})=>({value:n,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}});var Q3e=Object.freeze({__proto__:null,schema:K3e,sanitize:Z3e,normalize:J3e});const eDe=["displayValue","onUpdate","onChange","editable"],tDe=Gt("div",{whiteSpace:"pre-wrap"});function nDe(n){let{displayValue:e,onUpdate:t,onChange:r,editable:i=!0}=n,s=Gn(n,eDe);return i?De.createElement(zR,Cr({value:e,onUpdate:t,onChange:r},s)):De.createElement(tDe,null,e)}function rDe(){const{label:n,settings:e,displayValue:t,onUpdate:r,onChange:i}=ds();return De.createElement(ha,{input:!0},De.createElement(Va,null,n),De.createElement(nDe,Cr({displayValue:t,onUpdate:r,onChange:i},e)))}var iDe=qt({component:rDe},Q3e);const sDe=n=>qs().boolean().test(n),oDe=n=>{if(typeof n!="boolean")throw Error("Invalid boolean");return n};var aDe=Object.freeze({__proto__:null,schema:sDe,sanitize:oDe});const lDe=Gt("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function uDe({value:n,onUpdate:e,id:t,disabled:r}){return De.createElement(lDe,null,De.createElement("input",{id:t,type:"checkbox",checked:n,onChange:i=>e(i.currentTarget.checked),disabled:r}),De.createElement("label",{htmlFor:t},De.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},De.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function cDe(){const{label:n,value:e,onUpdate:t,disabled:r,id:i}=ds();return De.createElement(ha,{input:!0},De.createElement(Va,null,n),De.createElement(uDe,{value:e,onUpdate:t,id:i,disabled:r}))}var fDe=qt({component:cDe},aDe);const dDe=["locked"];function hDe({value:n,id:e,valueKey:t,settings:r,onUpdate:i,innerLabelTrim:s}){const o=k.useRef(n[t]);o.current=n[t];const a=k.useCallback(u=>i({[t]:sX({type:"NUMBER",value:o.current,settings:r},u)}),[i,r,t]),l=SX({type:"NUMBER",value:n[t],settings:r,setValue:a});return De.createElement(AX,{id:e,label:t,value:n[t],displayValue:l.displayValue,onUpdate:l.onUpdate,onChange:l.onChange,settings:r,innerLabelTrim:s})}const pDe=Gt("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function mDe(n){let{locked:e}=n,t=Gn(n,dDe);return De.createElement("svg",Cr({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e?De.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):De.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function VR({value:n,onUpdate:e,settings:t,innerLabelTrim:r}){const{id:i,setSettings:s}=ds(),{lock:o,locked:a}=t;return De.createElement(pDe,{withLock:o},o&&De.createElement(mDe,{locked:a,onClick:()=>s({locked:!a})}),Object.keys(n).map((l,u)=>De.createElement(hDe,{id:u===0?i:`${i}.${l}`,key:l,valueKey:l,value:n,settings:t[l],onUpdate:e,innerLabelTrim:r})))}const TX=(n,e)=>{const t={};let r=0,i=1/0;Object.entries(n).forEach(([s,o])=>{t[s]=uX(qt({value:o},e[s])).settings,r=Math.max(r,t[s].step),i=Math.min(i,t[s].pad)});for(let s in t){const{step:o,min:a,max:l}=e[s]||{};!isFinite(o)&&(!isFinite(a)||!isFinite(l))&&(t[s].step=r,t[s].pad=i)}return t},gDe=["lock"],vDe=["value"];function yDe(n){const e=qs().array().length(n).every.number(),t=r=>{if(!r||typeof r!="object")return!1;const i=Object.values(r);return i.length===n&&i.every(s=>isFinite(s))};return r=>e.test(r)||t(r)}function xDe(n){return Array.isArray(n)?"array":"object"}function Ov(n,e,t){return xDe(n)===e?n:e==="array"?Object.values(n):KTe(n,t)}const bDe=(n,e,t)=>{const r=Ov(n,"object",e.keys);for(let o in r)r[o]=lX(r[o],e[o]);const i=Object.keys(r);let s={};if(i.length===e.keys.length)s=r;else{const o=Ov(t,"object",e.keys);if(i.length===1&&e.locked){const a=i[0],l=r[a],u=o[a],c=u!==0?l/u:1;for(let f in o)f===a?s[a]=l:s[f]=o[f]*c}else s=qt(qt({},o),r)}return Ov(s,e.format,e.keys)},wDe=(n,e)=>Ov(n,"object",e.keys),SDe=n=>!!n&&("step"in n||"min"in n||"max"in n);function _De(n,e,t=[]){const{lock:r=!1}=e,i=Gn(e,gDe),s=Array.isArray(n)?"array":"object",o=s==="object"?Object.keys(n):t,a=Ov(n,"object",o),l=SDe(i)?o.reduce((c,f)=>Object.assign(c,{[f]:i}),{}):i,u=TX(a,l);return{value:s==="array"?n:a,settings:qt(qt({},u),{},{format:s,keys:o,lock:r,locked:!1})}}function DX(n){return{schema:yDe(n.length),normalize:e=>{let{value:t}=e,r=Gn(e,vDe);return _De(t,r,n)},format:(e,t)=>wDe(e,t),sanitize:(e,t,r)=>bDe(e,t,r)}}var EDe={grad:.9,turn:360,rad:360/(2*Math.PI)},Jl=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},yi=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},Qo=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},NX=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},qz=function(n){return{r:Qo(n.r,0,255),g:Qo(n.g,0,255),b:Qo(n.b,0,255),a:Qo(n.a)}},AC=function(n){return{r:yi(n.r),g:yi(n.g),b:yi(n.b),a:yi(n.a,3)}},MDe=/^#([0-9a-f]{3,8})$/i,kx=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},PX=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=Math.max(e,t,r),o=s-Math.min(e,t,r),a=o?s===e?(t-r)/o:s===t?2+(r-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},RX=function(n){var e=n.h,t=n.s,r=n.v,i=n.a;e=e/360*6,t/=100,r/=100;var s=Math.floor(e),o=r*(1-t),a=r*(1-(e-s)*t),l=r*(1-(1-e+s)*t),u=s%6;return{r:255*[r,a,o,o,l,r][u],g:255*[l,r,r,a,o,o][u],b:255*[o,o,l,r,r,a][u],a:i}},Xz=function(n){return{h:NX(n.h),s:Qo(n.s,0,100),l:Qo(n.l,0,100),a:Qo(n.a)}},Yz=function(n){return{h:yi(n.h),s:yi(n.s),l:yi(n.l),a:yi(n.a,3)}},Kz=function(n){return RX((t=(e=n).s,{h:e.h,s:(t*=((r=e.l)<50?r:100-r)/100)>0?2*t/(r+t)*100:0,v:r+t,a:e.a}));var e,t,r},kv=function(n){return{h:(e=PX(n)).h,s:(i=(200-(t=e.s))*(r=e.v)/100)>0&&i<200?t*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,t,r,i},CDe=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ADe=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,TDe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,DDe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,j3={string:[[function(n){var e=MDe.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?yi(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?yi(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=TDe.exec(n)||DDe.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:qz({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=CDe.exec(n)||ADe.exec(n);if(!e)return null;var t,r,i=Xz({h:(t=e[1],r=e[2],r===void 0&&(r="deg"),Number(t)*(EDe[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Kz(i)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=i===void 0?1:i;return Jl(e)&&Jl(t)&&Jl(r)?qz({r:Number(e),g:Number(t),b:Number(r),a:Number(s)}):null},"rgb"],[function(n){var e=n.h,t=n.s,r=n.l,i=n.a,s=i===void 0?1:i;if(!Jl(e)||!Jl(t)||!Jl(r))return null;var o=Xz({h:Number(e),s:Number(t),l:Number(r),a:Number(s)});return Kz(o)},"hsl"],[function(n){var e=n.h,t=n.s,r=n.v,i=n.a,s=i===void 0?1:i;if(!Jl(e)||!Jl(t)||!Jl(r))return null;var o=function(a){return{h:NX(a.h),s:Qo(a.s,0,100),v:Qo(a.v,0,100),a:Qo(a.a)}}({h:Number(e),s:Number(t),v:Number(r),a:Number(s)});return RX(o)},"hsv"]]},Zz=function(n,e){for(var t=0;t<e.length;t++){var r=e[t][0](n);if(r)return[r,e[t][1]]}return[null,void 0]},OX=function(n){return typeof n=="string"?Zz(n.trim(),j3.string):typeof n=="object"&&n!==null?Zz(n,j3.object):[null,void 0]},NDe=function(n){return OX(n)[1]},TC=function(n,e){var t=kv(n);return{h:t.h,s:Qo(t.s+100*e,0,100),l:t.l,a:t.a}},DC=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},Jz=function(n,e){var t=kv(n);return{h:t.h,s:t.s,l:Qo(t.l+100*e,0,100),a:t.a}},G3=function(){function n(e){this.parsed=OX(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return yi(DC(this.rgba),2)},n.prototype.isDark=function(){return DC(this.rgba)<.5},n.prototype.isLight=function(){return DC(this.rgba)>=.5},n.prototype.toHex=function(){return e=AC(this.rgba),t=e.r,r=e.g,i=e.b,o=(s=e.a)<1?kx(yi(255*s)):"","#"+kx(t)+kx(r)+kx(i)+o;var e,t,r,i,s,o},n.prototype.toRgb=function(){return AC(this.rgba)},n.prototype.toRgbString=function(){return e=AC(this.rgba),t=e.r,r=e.g,i=e.b,(s=e.a)<1?"rgba("+t+", "+r+", "+i+", "+s+")":"rgb("+t+", "+r+", "+i+")";var e,t,r,i,s},n.prototype.toHsl=function(){return Yz(kv(this.rgba))},n.prototype.toHslString=function(){return e=Yz(kv(this.rgba)),t=e.h,r=e.s,i=e.l,(s=e.a)<1?"hsla("+t+", "+r+"%, "+i+"%, "+s+")":"hsl("+t+", "+r+"%, "+i+"%)";var e,t,r,i,s},n.prototype.toHsv=function(){return e=PX(this.rgba),{h:yi(e.h),s:yi(e.s),v:yi(e.v),a:yi(e.a,3)};var e},n.prototype.invert=function(){return bs({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),bs(TC(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),bs(TC(this.rgba,-e))},n.prototype.grayscale=function(){return bs(TC(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),bs(Jz(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),bs(Jz(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?bs({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):yi(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=kv(this.rgba);return typeof e=="number"?bs({h:e,s:t.s,l:t.l,a:t.a}):yi(t.h)},n.prototype.isEqual=function(e){return this.toHex()===bs(e).toHex()},n}(),bs=function(n){return n instanceof G3?n:new G3(n)},Qz=[],PDe=function(n){n.forEach(function(e){Qz.indexOf(e)<0&&(e(G3,j3),Qz.push(e))})};function RDe(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in t)r[t[i]]=i;var s={};n.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,u=r[this.toHex()];if(u)return u;if(o!=null&&o.closest){var c=this.toRgb(),f=1/0,d="black";if(!s.length)for(var h in t)s[h]=new n(t[h]).toRgb();for(var m in t){var v=(a=c,l=s[m],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));v<f&&(f=v,d=m)}return d}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":t[a];return l?new n(l).toRgb():null},"name"])}function jm(){return(jm=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}function HR(n,e){if(n==null)return{};var t,r,i={},s=Object.keys(n);for(r=0;r<s.length;r++)e.indexOf(t=s[r])>=0||(i[t]=n[t]);return i}function q3(n){var e=k.useRef(n),t=k.useRef(function(r){e.current&&e.current(r)});return e.current=n,t.current}var pm=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n<e?e:n},Iv=function(n){return"touches"in n},X3=function(n){return n&&n.ownerDocument.defaultView||self},eU=function(n,e,t){var r=n.getBoundingClientRect(),i=Iv(e)?function(s,o){for(var a=0;a<s.length;a++)if(s[a].identifier===o)return s[a];return s[0]}(e.touches,t):e;return{left:pm((i.pageX-(r.left+X3(n).pageXOffset))/r.width),top:pm((i.pageY-(r.top+X3(n).pageYOffset))/r.height)}},tU=function(n){!Iv(n)&&n.preventDefault()},WR=De.memo(function(n){var e=n.onMove,t=n.onKey,r=HR(n,["onMove","onKey"]),i=k.useRef(null),s=q3(e),o=q3(t),a=k.useRef(null),l=k.useRef(!1),u=k.useMemo(function(){var h=function(y){tU(y),(Iv(y)?y.touches.length>0:y.buttons>0)&&i.current?s(eU(i.current,y,a.current)):v(!1)},m=function(){return v(!1)};function v(y){var p=l.current,S=X3(i.current),b=y?S.addEventListener:S.removeEventListener;b(p?"touchmove":"mousemove",h),b(p?"touchend":"mouseup",m)}return[function(y){var p=y.nativeEvent,S=i.current;if(S&&(tU(p),!function(g,w){return w&&!Iv(g)}(p,l.current)&&S)){if(Iv(p)){l.current=!0;var b=p.changedTouches||[];b.length&&(a.current=b[0].identifier)}S.focus(),s(eU(S,p,a.current)),v(!0)}},function(y){var p=y.which||y.keyCode;p<37||p>40||(y.preventDefault(),o({left:p===39?.05:p===37?-.05:0,top:p===40?.05:p===38?-.05:0}))},v]},[o,s]),c=u[0],f=u[1],d=u[2];return k.useEffect(function(){return d},[d]),De.createElement("div",jm({},r,{onTouchStart:c,onMouseDown:c,className:"react-colorful__interactive",ref:i,onKeyDown:f,tabIndex:0,role:"slider"}))}),Dy=function(n){return n.filter(Boolean).join(" ")},jR=function(n){var e=n.color,t=n.left,r=n.top,i=r===void 0?.5:r,s=Dy(["react-colorful__pointer",n.className]);return De.createElement("div",{className:s,style:{top:100*i+"%",left:100*t+"%"}},De.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},Ms=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t},kX=function(n){var e=n.s,t=n.v,r=n.a,i=(200-e)*t/100;return{h:Ms(n.h),s:Ms(i>0&&i<200?e*t/100/(i<=100?i:200-i)*100:0),l:Ms(i/2),a:Ms(r,2)}},Y3=function(n){var e=kX(n);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},NC=function(n){var e=kX(n);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},IX=function(n){var e=n.h,t=n.s,r=n.v,i=n.a;e=e/360*6,t/=100,r/=100;var s=Math.floor(e),o=r*(1-t),a=r*(1-(e-s)*t),l=r*(1-(1-e+s)*t),u=s%6;return{r:Ms(255*[r,a,o,o,l,r][u]),g:Ms(255*[l,r,r,a,o,o][u]),b:Ms(255*[o,o,l,r,r,a][u]),a:Ms(i,2)}},LX=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=Math.max(e,t,r),o=s-Math.min(e,t,r),a=o?s===e?(t-r)/o:s===t?2+(r-e)/o:4+(e-t)/o:0;return{h:Ms(60*(a<0?a+6:a)),s:Ms(s?o/s*100:0),v:Ms(s/255*100),a:i}},FX=De.memo(function(n){var e=n.hue,t=n.onChange,r=Dy(["react-colorful__hue",n.className]);return De.createElement("div",{className:r},De.createElement(WR,{onMove:function(i){t({h:360*i.left})},onKey:function(i){t({h:pm(e+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":Ms(e),"aria-valuemax":"360","aria-valuemin":"0"},De.createElement(jR,{className:"react-colorful__hue-pointer",left:e/360,color:Y3({h:e,s:100,v:100,a:1})})))}),BX=De.memo(function(n){var e=n.hsva,t=n.onChange,r={backgroundColor:Y3({h:e.h,s:100,v:100,a:1})};return De.createElement("div",{className:"react-colorful__saturation",style:r},De.createElement(WR,{onMove:function(i){t({s:100*i.left,v:100-100*i.top})},onKey:function(i){t({s:pm(e.s+100*i.left,0,100),v:pm(e.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+Ms(e.s)+"%, Brightness "+Ms(e.v)+"%"},De.createElement(jR,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:Y3(e)})))}),GR=function(n,e){if(n===e)return!0;for(var t in n)if(n[t]!==e[t])return!1;return!0};function zX(n,e,t){var r=q3(t),i=k.useState(function(){return n.toHsva(e)}),s=i[0],o=i[1],a=k.useRef({color:e,hsva:s});k.useEffect(function(){if(!n.equal(e,a.current.color)){var u=n.toHsva(e);a.current={hsva:u,color:e},o(u)}},[e,n]),k.useEffect(function(){var u;GR(s,a.current.hsva)||n.equal(u=n.fromHsva(s),a.current.color)||(a.current={hsva:s,color:u},r(u))},[s,n,r]);var l=k.useCallback(function(u){o(function(c){return Object.assign({},c,u)})},[]);return[s,l]}var ODe=typeof window<"u"?k.useLayoutEffect:k.useEffect,kDe=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},nU=new Map,UX=function(n){ODe(function(){var e=n.current?n.current.ownerDocument:document;if(e!==void 0&&!nU.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,nU.set(e,t);var r=kDe();r&&t.setAttribute("nonce",r),e.head.appendChild(t)}},[])},IDe=function(n){var e=n.className,t=n.colorModel,r=n.color,i=r===void 0?t.defaultColor:r,s=n.onChange,o=HR(n,["className","colorModel","color","onChange"]),a=k.useRef(null);UX(a);var l=zX(t,i,s),u=l[0],c=l[1],f=Dy(["react-colorful",e]);return De.createElement("div",jm({},o,{ref:a,className:f}),De.createElement(BX,{hsva:u,onChange:c}),De.createElement(FX,{hue:u.h,onChange:c,className:"react-colorful__last-control"}))},LDe=function(n){var e=n.className,t=n.hsva,r=n.onChange,i={backgroundImage:"linear-gradient(90deg, "+NC(Object.assign({},t,{a:0}))+", "+NC(Object.assign({},t,{a:1}))+")"},s=Dy(["react-colorful__alpha",e]),o=Ms(100*t.a);return De.createElement("div",{className:s},De.createElement("div",{className:"react-colorful__alpha-gradient",style:i}),De.createElement(WR,{onMove:function(a){r({a:a.left})},onKey:function(a){r({a:pm(t.a+a.left)})},"aria-label":"Alpha","aria-valuetext":o+"%","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"},De.createElement(jR,{className:"react-colorful__alpha-pointer",left:t.a,color:NC(t)})))},FDe=function(n){var e=n.className,t=n.colorModel,r=n.color,i=r===void 0?t.defaultColor:r,s=n.onChange,o=HR(n,["className","colorModel","color","onChange"]),a=k.useRef(null);UX(a);var l=zX(t,i,s),u=l[0],c=l[1],f=Dy(["react-colorful",e]);return De.createElement("div",jm({},o,{ref:a,className:f}),De.createElement(BX,{hsva:u,onChange:c}),De.createElement(FX,{hue:u.h,onChange:c}),De.createElement(LDe,{hsva:u,onChange:c,className:"react-colorful__last-control"}))},BDe={defaultColor:{r:0,g:0,b:0,a:1},toHsva:LX,fromHsva:IX,equal:GR},zDe=function(n){return De.createElement(FDe,jm({},n,{colorModel:BDe}))},UDe={defaultColor:{r:0,g:0,b:0},toHsva:function(n){return LX({r:n.r,g:n.g,b:n.b,a:1})},fromHsva:function(n){return{r:(e=IX(n)).r,g:e.g,b:e.b};var e},equal:GR},$De=function(n){return De.createElement(IDe,jm({},n,{colorModel:UDe}))},$X={exports:{}},VDe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",HDe=VDe,WDe=HDe;function VX(){}function HX(){}HX.resetWarningCache=VX;var jDe=function(){function n(r,i,s,o,a,l){if(l!==WDe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:HX,resetWarningCache:VX};return t.PropTypes=t,t};$X.exports=jDe();var GDe=$X.exports;const tr=fa(GDe);function Gm(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})}function qm(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function qDe(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s}function XDe(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(qDe(arguments[e]));return n}var YDe=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function Ny(n,e){var t=KDe(n);if(typeof t.path!="string"){var r=n.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof r=="string"&&r.length>0?r:n.name,writable:!1,configurable:!1,enumerable:!0})}return t}function KDe(n){var e=n.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!n.type){var r=e.split(".").pop().toLowerCase(),i=YDe.get(r);i&&Object.defineProperty(n,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return n}var ZDe=[".DS_Store","Thumbs.db"];function JDe(n){return Gm(this,void 0,void 0,function(){return qm(this,function(e){return s_(n)&&QDe(n)?[2,rNe(n.dataTransfer,n.type)]:eNe(n)?[2,tNe(n)]:Array.isArray(n)&&n.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,nNe(n)]:[2,[]]})})}function QDe(n){return s_(n.dataTransfer)}function eNe(n){return s_(n)&&s_(n.target)}function s_(n){return typeof n=="object"&&n!==null}function tNe(n){return K3(n.target.files).map(function(e){return Ny(e)})}function nNe(n){return Gm(this,void 0,void 0,function(){var e;return qm(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.map(function(r){return r.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(r){return Ny(r)})]}})})}function rNe(n,e){return Gm(this,void 0,void 0,function(){var t,r;return qm(this,function(i){switch(i.label){case 0:return n===null?[2,[]]:n.items?(t=K3(n.items).filter(function(s){return s.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(iNe))]):[3,2];case 1:return r=i.sent(),[2,rU(WX(r))];case 2:return[2,rU(K3(n.files).map(function(s){return Ny(s)}))]}})})}function rU(n){return n.filter(function(e){return ZDe.indexOf(e.name)===-1})}function K3(n){if(n===null)return[];for(var e=[],t=0;t<n.length;t++){var r=n[t];e.push(r)}return e}function iNe(n){if(typeof n.webkitGetAsEntry!="function")return iU(n);var e=n.webkitGetAsEntry();return e&&e.isDirectory?jX(e):iU(n)}function WX(n){return n.reduce(function(e,t){return XDe(e,Array.isArray(t)?WX(t):[t])},[])}function iU(n){var e=n.getAsFile();if(!e)return Promise.reject(n+" is not a File");var t=Ny(e);return Promise.resolve(t)}function sNe(n){return Gm(this,void 0,void 0,function(){return qm(this,function(e){return[2,n.isDirectory?jX(n):oNe(n)]})})}function jX(n){var e=n.createReader();return new Promise(function(t,r){var i=[];function s(){var o=this;e.readEntries(function(a){return Gm(o,void 0,void 0,function(){var l,u,c;return qm(this,function(f){switch(f.label){case 0:if(a.length)return[3,5];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return l=f.sent(),t(l),[3,4];case 3:return u=f.sent(),r(u),[3,4];case 4:return[3,6];case 5:c=Promise.all(a.map(sNe)),i.push(c),s(),f.label=6;case 6:return[2]}})})},function(a){r(a)})}s()})}function oNe(n){return Gm(this,void 0,void 0,function(){return qm(this,function(e){return[2,new Promise(function(t,r){n.file(function(i){var s=Ny(i,n.fullPath);t(s)},function(i){r(i)})})]})})}var aNe=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(","),r=n.name||"",i=(n.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return t.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?r.toLowerCase().endsWith(a):a.endsWith("/*")?s===a.replace(/\/.*$/,""):i===a})}return!0};function sU(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function oU(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?sU(Object(t),!0).forEach(function(r){GX(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):sU(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function GX(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function aU(n,e){return fNe(n)||cNe(n,e)||uNe(n,e)||lNe()}function lNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uNe(n,e){if(n){if(typeof n=="string")return lU(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return lU(n,e)}}function lU(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function cNe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,o,a;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw a}}return r}}function fNe(n){if(Array.isArray(n))return n}var dNe="file-invalid-type",hNe="file-too-large",pNe="file-too-small",mNe="too-many-files",gNe=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:dNe,message:"File type must be ".concat(t)}},uU=function(e){return{code:hNe,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},cU=function(e){return{code:pNe,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},vNe={code:mNe,message:"Too many files"};function qX(n,e){var t=n.type==="application/x-moz-file"||aNe(n,e);return[t,t?null:gNe(e)]}function XX(n,e,t){if(Ig(n.size))if(Ig(e)&&Ig(t)){if(n.size>t)return[!1,uU(t)];if(n.size<e)return[!1,cU(e)]}else{if(Ig(e)&&n.size<e)return[!1,cU(e)];if(Ig(t)&&n.size>t)return[!1,uU(t)]}return[!0,null]}function Ig(n){return n!=null}function yNe(n){var e=n.files,t=n.accept,r=n.minSize,i=n.maxSize,s=n.multiple,o=n.maxFiles;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(a){var l=qX(a,t),u=aU(l,1),c=u[0],f=XX(a,r,i),d=aU(f,1),h=d[0];return c&&h})}function o_(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function Ix(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function fU(n){n.preventDefault()}function xNe(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function bNe(n){return n.indexOf("Edge/")!==-1}function wNe(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return xNe(n)||bNe(n)}function rl(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return e.some(function(a){return!o_(r)&&a&&a.apply(void 0,[r].concat(s)),o_(r)})}}function SNe(){return"showOpenFilePicker"in window}function _Ne(n){return n=typeof n=="string"?n.split(","):n,[{description:"everything",accept:Array.isArray(n)?n.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return oU(oU({},e),{},GX({},t,[]))},{}):{}}]}function ENe(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function MNe(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}var CNe=["children"],ANe=["open"],TNe=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],DNe=["refKey","onChange","onClick"];function NNe(n){return ONe(n)||RNe(n)||YX(n)||PNe()}function PNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RNe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function ONe(n){if(Array.isArray(n))return Z3(n)}function PC(n,e){return LNe(n)||INe(n,e)||YX(n,e)||kNe()}function kNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YX(n,e){if(n){if(typeof n=="string")return Z3(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Z3(n,e)}}function Z3(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function INe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,o,a;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw a}}return r}}function LNe(n){if(Array.isArray(n))return n}function dU(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function yr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?dU(Object(t),!0).forEach(function(r){J3(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):dU(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function J3(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function a_(n,e){if(n==null)return{};var t=FNe(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function FNe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}var qR=k.forwardRef(function(n,e){var t=n.children,r=a_(n,CNe),i=ZX(r),s=i.open,o=a_(i,ANe);return k.useImperativeHandle(e,function(){return{open:s}},[s]),De.createElement(k.Fragment,null,t(yr(yr({},o),{},{open:s})))});qR.displayName="Dropzone";var KX={disabled:!1,getFilesFromEvent:JDe,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};qR.defaultProps=KX;qR.propTypes={children:tr.func,accept:tr.oneOfType([tr.string,tr.arrayOf(tr.string)]),multiple:tr.bool,preventDropOnDocument:tr.bool,noClick:tr.bool,noKeyboard:tr.bool,noDrag:tr.bool,noDragEventsBubbling:tr.bool,minSize:tr.number,maxSize:tr.number,maxFiles:tr.number,disabled:tr.bool,getFilesFromEvent:tr.func,onFileDialogCancel:tr.func,onFileDialogOpen:tr.func,useFsAccessApi:tr.bool,onDragEnter:tr.func,onDragLeave:tr.func,onDragOver:tr.func,onDrop:tr.func,onDropAccepted:tr.func,onDropRejected:tr.func,validator:tr.func};var Q3={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function ZX(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=yr(yr({},KX),n),t=e.accept,r=e.disabled,i=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,a=e.multiple,l=e.maxFiles,u=e.onDragEnter,c=e.onDragLeave,f=e.onDragOver,d=e.onDrop,h=e.onDropAccepted,m=e.onDropRejected,v=e.onFileDialogCancel,y=e.onFileDialogOpen,p=e.useFsAccessApi,S=e.preventDropOnDocument,b=e.noClick,g=e.noKeyboard,w=e.noDrag,x=e.noDragEventsBubbling,M=e.validator,A=k.useMemo(function(){return typeof y=="function"?y:hU},[y]),N=k.useMemo(function(){return typeof v=="function"?v:hU},[v]),C=k.useRef(null),T=k.useRef(null),R=k.useReducer(BNe,Q3),$=PC(R,2),B=$[0],z=$[1],D=B.isFocused,I=B.isFileDialogActive,U=B.draggedFiles,L=k.useRef(typeof window<"u"&&window.isSecureContext&&p&&SNe()),q=function(){!L.current&&I&&setTimeout(function(){if(T.current){var Q=T.current.files;Q.length||(z({type:"closeDialog"}),N())}},300)};k.useEffect(function(){return window.addEventListener("focus",q,!1),function(){window.removeEventListener("focus",q,!1)}},[T,I,N,L]);var Z=k.useRef([]),J=function(Q){C.current&&C.current.contains(Q.target)||(Q.preventDefault(),Z.current=[])};k.useEffect(function(){return S&&(document.addEventListener("dragover",fU,!1),document.addEventListener("drop",J,!1)),function(){S&&(document.removeEventListener("dragover",fU),document.removeEventListener("drop",J))}},[C,S]);var Y=k.useCallback(function(X){X.preventDefault(),X.persist(),ie(X),Z.current=[].concat(NNe(Z.current),[X.target]),Ix(X)&&Promise.resolve(i(X)).then(function(Q){o_(X)&&!x||(z({draggedFiles:Q,isDragActive:!0,type:"setDraggedFiles"}),u&&u(X))})},[i,u,x]),ee=k.useCallback(function(X){X.preventDefault(),X.persist(),ie(X);var Q=Ix(X);if(Q&&X.dataTransfer)try{X.dataTransfer.dropEffect="copy"}catch{}return Q&&f&&f(X),!1},[f,x]),ae=k.useCallback(function(X){X.preventDefault(),X.persist(),ie(X);var Q=Z.current.filter(function(_e){return C.current&&C.current.contains(_e)}),be=Q.indexOf(X.target);be!==-1&&Q.splice(be,1),Z.current=Q,!(Q.length>0)&&(z({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),Ix(X)&&c&&c(X))},[C,c,x]),ce=k.useCallback(function(X,Q){var be=[],_e=[];X.forEach(function(Ne){var Fe=qX(Ne,t),He=PC(Fe,2),Ie=He[0],Je=He[1],qe=XX(Ne,o,s),lt=PC(qe,2),ot=lt[0],ye=lt[1],We=M?M(Ne):null;if(Ie&&ot&&!We)be.push(Ne);else{var W=[Je,ye];We&&(W=W.concat(We)),_e.push({file:Ne,errors:W.filter(function(ve){return ve})})}}),(!a&&be.length>1||a&&l>=1&&be.length>l)&&(be.forEach(function(Ne){_e.push({file:Ne,errors:[vNe]})}),be.splice(0)),z({acceptedFiles:be,fileRejections:_e,type:"setFiles"}),d&&d(be,_e,Q),_e.length>0&&m&&m(_e,Q),be.length>0&&h&&h(be,Q)},[z,a,t,o,s,l,d,h,m,M]),pe=k.useCallback(function(X){X.preventDefault(),X.persist(),ie(X),Z.current=[],Ix(X)&&Promise.resolve(i(X)).then(function(Q){o_(X)&&!x||ce(Q,X)}),z({type:"reset"})},[i,ce,x]),we=k.useCallback(function(){if(L.current){z({type:"openDialog"}),A();var X={multiple:a,types:_Ne(t)};window.showOpenFilePicker(X).then(function(Q){return i(Q)}).then(function(Q){ce(Q,null),z({type:"closeDialog"})}).catch(function(Q){ENe(Q)?(N(Q),z({type:"closeDialog"})):MNe(Q)&&(L.current=!1,T.current&&(T.current.value=null,T.current.click()))});return}T.current&&(z({type:"openDialog"}),A(),T.current.value=null,T.current.click())},[z,A,N,p,ce,t,a]),me=k.useCallback(function(X){!C.current||!C.current.isEqualNode(X.target)||(X.key===" "||X.key==="Enter"||X.keyCode===32||X.keyCode===13)&&(X.preventDefault(),we())},[C,we]),Ae=k.useCallback(function(){z({type:"focus"})},[]),Ee=k.useCallback(function(){z({type:"blur"})},[]),re=k.useCallback(function(){b||(wNe()?setTimeout(we,0):we())},[b,we]),Pe=function(Q){return r?null:Q},Re=function(Q){return g?null:Pe(Q)},te=function(Q){return w?null:Pe(Q)},ie=function(Q){x&&Q.stopPropagation()},Me=k.useMemo(function(){return function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Q=X.refKey,be=Q===void 0?"ref":Q,_e=X.role,Ne=X.onKeyDown,Fe=X.onFocus,He=X.onBlur,Ie=X.onClick,Je=X.onDragEnter,qe=X.onDragOver,lt=X.onDragLeave,ot=X.onDrop,ye=a_(X,TNe);return yr(yr(J3({onKeyDown:Re(rl(Ne,me)),onFocus:Re(rl(Fe,Ae)),onBlur:Re(rl(He,Ee)),onClick:Pe(rl(Ie,re)),onDragEnter:te(rl(Je,Y)),onDragOver:te(rl(qe,ee)),onDragLeave:te(rl(lt,ae)),onDrop:te(rl(ot,pe)),role:typeof _e=="string"&&_e!==""?_e:"button"},be,C),!r&&!g?{tabIndex:0}:{}),ye)}},[C,me,Ae,Ee,re,Y,ee,ae,pe,g,w,r]),oe=k.useCallback(function(X){X.stopPropagation()},[]),G=k.useMemo(function(){return function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Q=X.refKey,be=Q===void 0?"ref":Q,_e=X.onChange,Ne=X.onClick,Fe=a_(X,DNe),He=J3({accept:t,multiple:a,type:"file",style:{display:"none"},onChange:Pe(rl(_e,pe)),onClick:Pe(rl(Ne,oe)),tabIndex:-1},be,T);return yr(yr({},He),Fe)}},[T,t,a,pe,r]),j=U.length,de=j>0&&yNe({files:U,accept:t,minSize:o,maxSize:s,multiple:a,maxFiles:l}),Te=j>0&&!de;return yr(yr({},B),{},{isDragAccept:de,isDragReject:Te,isFocused:D&&!r,getRootProps:Me,getInputProps:G,rootRef:C,inputRef:T,open:Pe(we)})}function BNe(n,e){switch(e.type){case"focus":return yr(yr({},n),{},{isFocused:!0});case"blur":return yr(yr({},n),{},{isFocused:!1});case"openDialog":return yr(yr({},Q3),{},{isFileDialogActive:!0});case"closeDialog":return yr(yr({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,r=e.draggedFiles;return yr(yr({},n),{},{draggedFiles:r,isDragActive:t});case"setFiles":return yr(yr({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return yr({},Q3);default:return n}}function hU(){}function zNe(n){let e;const t=new Set,r=(u,c)=>{const f=typeof u=="function"?u(e):u;if(f!==e){const d=e;e=c?f:Object.assign({},e,f),t.forEach(h=>h(e,d))}},i=()=>e,s=(u,c=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let d=c(e);function h(){const m=c(e);if(!f(d,m)){const v=d;u(d=m,v)}}return t.add(h),()=>t.delete(h)},l={setState:r,getState:i,subscribe:(u,c,f)=>c||f?s(u,c,f):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(r,i,l),l}const UNe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),pU=UNe?k.useEffect:k.useLayoutEffect;function XR(n){const e=typeof n=="function"?zNe(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=k.useReducer(y=>y+1,0),o=e.getState(),a=k.useRef(o),l=k.useRef(r),u=k.useRef(i),c=k.useRef(!1),f=k.useRef();f.current===void 0&&(f.current=r(o));let d,h=!1;(a.current!==o||l.current!==r||u.current!==i||c.current)&&(d=r(o),h=!i(f.current,d)),pU(()=>{h&&(f.current=d),a.current=o,l.current=r,u.current=i,c.current=!1});const m=k.useRef(o);pU(()=>{const y=()=>{try{const S=e.getState(),b=l.current(S);u.current(f.current,b)||(a.current=S,f.current=b,s())}catch{c.current=!0,s()}},p=e.subscribe(y);return e.getState()!==m.current&&y(),p},[]);const v=h?d:f.current;return k.useDebugValue(v),v};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}const $Ne=n=>(e,t,r)=>{const i=r.subscribe;return r.subscribe=(o,a,l)=>{let u=o;if(a){const c=(l==null?void 0:l.equalityFn)||Object.is;let f=o(r.getState());u=d=>{const h=o(d);if(!c(f,h)){const m=f;a(f=h,m)}},l!=null&&l.fireImmediately&&a(f,f)}return i(u)},n(e,t,r)};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var VNe=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var HNe=VNe;function mU(n){return HNe(n)===!0&&Object.prototype.toString.call(n)==="[object Object]"}var JX=function(e){var t,r;return!(mU(e)===!1||(t=e.constructor,typeof t!="function")||(r=t.prototype,mU(r)===!1)||r.hasOwnProperty("isPrototypeOf")===!1)};/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var WNe=JX,YR=function(e){return WNe(e)||typeof e=="function"||Array.isArray(e)};/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var jNe=function(e,t,r){for(var i in e)if(t.call(r,e[i],i,e)===!1)break},GNe=YR,qNe=jNe;function QX(n,e){for(var t=arguments.length,r=0;++r<t;){var i=arguments[r];eD(i)&&qNe(i,XNe,n)}return n}function XNe(n,e){if(YNe(e)){var t=this[e];eD(n)&&eD(t)?QX(t,n):this[e]=n}}function eD(n){return GNe(n)&&!Array.isArray(n)}function YNe(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"}var KNe=QX;/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var ZNe=function(n,e,t,r,i){if(!JNe(n)||!e)return n;if(e=Lx(e),t&&(e+="."+Lx(t)),r&&(e+="."+Lx(r)),i&&(e+="."+Lx(i)),e in n)return n[e];for(var s=e.split("."),o=s.length,a=-1;n&&++a<o;){for(var l=s[a];l[l.length-1]==="\\";)l=l.slice(0,-1)+"."+s[++a];n=n[l]}return n};function JNe(n){return n!==null&&(typeof n=="object"||typeof n=="function")}function Lx(n){return n?Array.isArray(n)?n.join("."):n:""}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var QNe=function(n,e){if(n===null||typeof n>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return n;for(var t=Object.prototype.propertyIsEnumerable,r=Object(n),i=arguments.length,s=0;++s<i;)for(var o=Object(arguments[s]),a=Object.getOwnPropertySymbols(o),l=0;l<a.length;l++){var u=a[l];t.call(o,u)&&(r[u]=o[u])}return r},ePe=YR,tPe=QNe,nPe=Object.assign||function(n){if(n===null||typeof n>"u")throw new TypeError("Cannot convert undefined or null to object");gU(n)||(n={});for(var e=1;e<arguments.length;e++){var t=arguments[e];iPe(t)&&(t=sPe(t)),gU(t)&&(rPe(n,t),tPe(n,t))}return n};function rPe(n,e){for(var t in e)oPe(e,t)&&(n[t]=e[t])}function iPe(n){return n&&typeof n=="string"}function sPe(n){var e={};for(var t in n)e[t]=n[t];return e}function gU(n){return n&&typeof n=="object"||ePe(n)}function oPe(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var aPe=nPe,lPe=function(n,e,t){if(typeof n!="string")throw new TypeError("expected a string");typeof e=="function"&&(t=e,e=null),typeof e=="string"&&(e={sep:e});var r=aPe({sep:"."},e),i=r.quotes||['"',"'","`"],s;r.brackets===!0?s={"<":">","(":")","[":"]","{":"}"}:r.brackets&&(s=r.brackets);var o=[],a=[],l=[""],u=r.sep,c=n.length,f=-1,d;function h(){if(s&&a.length)return s[a[a.length-1]]}for(;++f<c;){var m=n[f],v=n[f+1],y={val:m,idx:f,arr:l,str:n};if(o.push(y),m==="\\"){y.val=cPe(r,n,f)===!0?m+v:v,y.escaped=!0,typeof t=="function"&&t(y),l[l.length-1]+=y.val,f++;continue}if(s&&s[m]){a.push(m);var p=h(),S=f+1;if(n.indexOf(p,S+1)!==-1)for(;a.length&&S<c;){var b=n[++S];if(b==="\\"){b++;continue}if(i.indexOf(b)!==-1){S=tD(n,b,S+1);continue}if(p=h(),a.length&&n.indexOf(p,S+1)===-1)break;if(s[b]){a.push(b);continue}p===b&&a.pop()}if(d=S,d===-1){l[l.length-1]+=m;continue}m=n.slice(f,d+1),y.val=m,y.idx=f=d}if(i.indexOf(m)!==-1){if(d=tD(n,m,f+1),d===-1){l[l.length-1]+=m;continue}uPe(m,r)===!0?m=n.slice(f,d+1):m=n.slice(f+1,d),y.val=m,y.idx=f=d}if(typeof t=="function"&&(t(y,o),m=y.val,f=y.idx),y.val===u&&y.split!==!1){l.push("");continue}l[l.length-1]+=y.val}return l};function tD(n,e,t,r){var i=n.indexOf(e,t);return n.charAt(i-1)==="\\"?tD(n,e,i+1):i}function uPe(n,e){return e.keepDoubleQuotes===!0&&n==='"'||e.keepSingleQuotes===!0&&n==="'"?!0:e.keepQuotes}function cPe(n,e,t){return typeof n.keepEscaping=="function"?n.keepEscaping(e,t):n.keepEscaping===!0||e[t+1]==="\\"}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var fPe=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")},vU=fPe,dPe=function(e){vU(e)||(e={});for(var t=arguments.length,r=1;r<t;r++){var i=arguments[r];vU(i)&&hPe(e,i)}return e};function hPe(n,e){for(var t in e)pPe(e,t)&&(n[t]=e[t])}function pPe(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var mPe=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")};/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var gPe=lPe,vPe=dPe,yU=JX,xU=mPe,yPe=function(n,e,t){if(!xU(n)||(Array.isArray(e)&&(e=[].concat.apply([],e).join(".")),typeof e!="string"))return n;for(var r=gPe(e,{sep:".",brackets:!0}).filter(xPe),i=r.length,s=-1,o=n;++s<i;){var a=r[s];if(s!==i-1){xU(o[a])||(o[a]={}),o=o[a];continue}yU(o[a])&&yU(t)?o[a]=vPe({},o[a],t):o[a]=t}return n};function xPe(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"}var RC=YR,bU=KNe,bPe=ZNe,wU=yPe,wPe=function(e,t,r){if(!RC(e))throw new TypeError("expected an object");if(typeof t!="string"||r==null)return bU.apply(null,arguments);if(typeof r=="string")return wU(e,t,r),e;var i=bPe(e,t);return RC(r)&&RC(i)&&(r=bU({},i,r)),wU(e,t,r),e};const SPe=fa(wPe),KR=(...n)=>n.filter(Boolean).join(".");function _Pe(n){const e=n.split(".");return[e.pop(),e.join(".")||void 0]}function EPe(n,e){return Object.entries(XTe(n,e)).reduce((t,[,{value:r,disabled:i,key:s}])=>(t[s]=i?void 0:r,t),{})}function MPe(n,e){const t=k.useRef();return y0(n,t.current)||(t.current=n),t.current}function eY(n,e){return k.useMemo(n,MPe(e))}function CPe(n){const e=k.useRef(null),t=k.useRef(null),r=k.useRef(!0);return k.useLayoutEffect(()=>{n||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),k.useEffect(()=>{if(r.current){r.current=!1;return}let i;const s=e.current,o=()=>{n&&(s.style.removeProperty("height"),s.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};s.addEventListener("transitionend",o,{once:!0});const{height:a}=t.current.getBoundingClientRect();return s.style.height=a+"px",n||(s.style.overflow="hidden",i=window.setTimeout(()=>s.style.height="0px",50)),()=>{s.removeEventListener("transitionend",o),clearTimeout(i)}},[n]),{wrapperRef:e,contentRef:t}}const APe=n=>{const[e,t]=k.useState(n.getVisiblePaths());return k.useEffect(()=>{t(n.getVisiblePaths());const r=n.useStore.subscribe(n.getVisiblePaths,t,{equalityFn:EE});return()=>r()},[n]),e};function TPe(n,e,t){return n.useStore(i=>{const s=qt(qt({},t),i.data);return EPe(s,e)},EE)}function tY(n=3){const e=k.useRef(null),t=k.useRef(null),[r,i]=k.useState(!1),s=k.useCallback(()=>i(!0),[]),o=k.useCallback(()=>i(!1),[]);return k.useLayoutEffect(()=>{if(r){const{bottom:a,top:l,left:u}=e.current.getBoundingClientRect(),{height:c}=t.current.getBoundingClientRect(),f=a+c>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=u+"px",f==="down"?t.current.style.top=a+n+"px":t.current.style.bottom=window.innerHeight-l+n+"px"}},[n,r]),{popinRef:e,wrapperRef:t,shown:r,show:s,hide:o}}PDe([RDe]);const DPe={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};qs.extend({color:()=>n=>bs(n).isValid()});const NPe=n=>qs().color().test(n);function nY(n,{format:e,hasAlpha:t,isString:r}){const i=DPe[e]+(r&&e!=="hex"?"String":""),s=n[i]();return typeof s=="object"&&!t?YTe(s,["a"]):s}const rY=(n,e)=>{const t=bs(n);if(!t.isValid())throw Error("Invalid color");return nY(t,e)},PPe=(n,e)=>nY(bs(n),qt(qt({},e),{},{isString:!0,format:"hex"})),RPe=({value:n})=>{const e=NDe(n),t=e==="name"?"hex":e,r=typeof n=="object"?"a"in n:e==="hex"&&n.length===8||/^(rgba)|(hsla)|(hsva)/.test(n),i={format:t,hasAlpha:r,isString:typeof n=="string"};return{value:rY(n,i),settings:i}};var OPe=Object.freeze({__proto__:null,schema:NPe,sanitize:rY,format:PPe,normalize:RPe});const kPe=Gt("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),IPe=Gt("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),LPe=Gt("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function SU(n,e){return e!=="rgb"?bs(n).toRgb():n}function FPe({value:n,displayValue:e,settings:t,onUpdate:r}){const{emitOnEditStart:i,emitOnEditEnd:s}=ds(),{format:o,hasAlpha:a}=t,{popinRef:l,wrapperRef:u,shown:c,show:f,hide:d}=tY(),h=k.useRef(0),[m,v]=k.useState(()=>SU(n,o)),y=a?zDe:$De,p=()=>{v(SU(n,o)),f(),i()},S=()=>{d(),s(),window.clearTimeout(h.current)},b=()=>{h.current=window.setTimeout(S,500)};return k.useEffect(()=>()=>window.clearTimeout(h.current),[]),De.createElement(De.Fragment,null,De.createElement(kPe,{ref:l,active:c,onClick:()=>p(),style:{color:e}}),c&&De.createElement(UR,null,De.createElement(wX,{onPointerUp:S}),De.createElement(LPe,{ref:u,onMouseEnter:()=>window.clearTimeout(h.current),onMouseLeave:g=>g.buttons===0&&b()},De.createElement(y,{color:m,onChange:r}))))}function BPe(){const{value:n,displayValue:e,label:t,onChange:r,onUpdate:i,settings:s}=ds();return De.createElement(ha,{input:!0},De.createElement(Va,null,t),De.createElement(IPe,null,De.createElement(FPe,{value:n,displayValue:e,onChange:r,onUpdate:i,settings:s}),De.createElement(zR,{value:e,onChange:r,onUpdate:i})))}var zPe=qt({component:BPe},OPe);function UPe(){const{label:n,displayValue:e,onUpdate:t,settings:r}=ds();return De.createElement(ha,{input:!0},De.createElement(Va,null,n),De.createElement(VR,{value:e,settings:r,onUpdate:t}))}var $Pe=qt({component:UPe},DX(["x","y","z"]));const VPe=Gt("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),HPe=Gt("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function WPe({value:n,settings:e,onUpdate:t}){const r=k.useRef(),i=k.useRef(0),s=k.useRef(0),o=k.useRef(1),[a,l]=k.useState(!1),[u,c]=k.useState(!1),[f,d]=_X(),h=k.useRef(null),m=k.useRef(null);k.useLayoutEffect(()=>{if(a){const{top:R,left:$,width:B,height:z}=h.current.getBoundingClientRect();m.current.style.left=$+B/2+"px",m.current.style.top=R+z/2+"px"}},[a]);const{keys:[v,y],joystick:p}=e,S=p==="invertY"?1:-1,{[v]:{step:b},[y]:{step:g}}=e,w=yu("sizes","joystickWidth"),x=yu("sizes","joystickHeight"),M=parseFloat(w)*.8/2,A=parseFloat(x)*.8/2,N=k.useCallback(()=>{r.current||(c(!0),i.current&&d({x:i.current*M}),s.current&&d({y:s.current*-A}),r.current=window.setInterval(()=>{t(R=>{const $=b*i.current*o.current,B=S*g*s.current*o.current;return Array.isArray(R)?{[v]:R[0]+$,[y]:R[1]+B}:{[v]:R[v]+$,[y]:R[y]+B}})},16))},[M,A,t,d,b,g,v,y,S]),C=k.useCallback(()=>{window.clearTimeout(r.current),r.current=void 0,c(!1)},[]);k.useEffect(()=>{function R($){o.current=aX($)}return window.addEventListener("keydown",R),window.addEventListener("keyup",R),()=>{window.clearTimeout(r.current),window.removeEventListener("keydown",R),window.removeEventListener("keyup",R)}},[]);const T=Ty(({first:R,active:$,delta:[B,z],movement:[D,I]})=>{R&&l(!0);const U=Qc(D,-M,M),L=Qc(I,-A,A);i.current=Math.abs(D)>Math.abs(U)?Math.sign(D-U):0,s.current=Math.abs(I)>Math.abs(L)?Math.sign(L-I):0;let q=n[v],Z=n[y];$?(i.current||(q+=B*b*o.current,d({x:U})),s.current||(Z-=S*z*g*o.current,d({y:L})),i.current||s.current?N():C(),t({[v]:q,[y]:Z})):(l(!1),i.current=0,s.current=0,d({x:0,y:0}),C())});return De.createElement(VPe,Cr({ref:h},T()),a&&De.createElement(UR,null,De.createElement(HPe,{ref:m,isOutOfBounds:u},De.createElement("div",null),De.createElement("span",{ref:f}))))}const jPe=Gt("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function GPe(){const{label:n,displayValue:e,onUpdate:t,settings:r}=ds();return De.createElement(ha,{input:!0},De.createElement(Va,null,n),De.createElement(jPe,{withJoystick:!!r.joystick},r.joystick&&De.createElement(WPe,{value:e,settings:r,onUpdate:t}),De.createElement(VR,{value:e,settings:r,onUpdate:t})))}const qPe=["joystick"],iY=DX(["x","y"]),XPe=n=>{let{joystick:e=!0}=n,t=Gn(n,qPe);const{value:r,settings:i}=iY.normalize(t);return{value:r,settings:qt(qt({},i),{},{joystick:e})}};var YPe=qt(qt({component:GPe},iY),{},{normalize:XPe});const KPe=n=>{if(n!==void 0){if(n instanceof File)try{return URL.createObjectURL(n)}catch{return}if(typeof n=="string"&&n.indexOf("blob:")===0)return n;throw Error("Invalid image format [undefined | blob |File].")}},ZPe=(n,e)=>typeof e=="object"&&"image"in e,JPe=({image:n})=>({value:n});var QPe=Object.freeze({__proto__:null,sanitize:KPe,schema:ZPe,normalize:JPe});const eRe=Gt("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),tRe=Gt("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),nRe=Gt("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),rRe=Gt("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),iRe=Gt("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),sRe=Gt("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function oRe(){const{label:n,value:e,onUpdate:t,disabled:r}=ds(),{popinRef:i,wrapperRef:s,shown:o,show:a,hide:l}=tY(),u=k.useCallback(m=>{m.length&&t(m[0])},[t]),c=k.useCallback(m=>{m.stopPropagation(),t(void 0)},[t]),{getRootProps:f,getInputProps:d,isDragAccept:h}=ZX({maxFiles:1,accept:"image/*",onDrop:u,disabled:r});return De.createElement(ha,{input:!0},De.createElement(Va,null,n),De.createElement(eRe,null,De.createElement(nRe,{ref:i,hasImage:!!e,onPointerDown:()=>!!e&&a(),onPointerUp:l,style:{backgroundImage:e?`url(${e})`:"none"}}),o&&!!e&&De.createElement(UR,null,De.createElement(wX,{onPointerUp:l,style:{cursor:"pointer"}}),De.createElement(rRe,{ref:s,style:{backgroundImage:`url(${e})`}})),De.createElement(tRe,f({isDragAccept:h}),De.createElement("input",d()),De.createElement(iRe,null,h?"drop image":"click or drop")),De.createElement(sRe,{onClick:c,disabled:!e})))}var aRe=qt({component:oRe},QPe);const _U=qs().number(),lRe=(n,e)=>qs().array().length(2).every.number().test(n)&&qs().schema({min:_U,max:_U}).test(e),l_=n=>({min:n[0],max:n[1]}),sY=(n,{bounds:[e,t]},r)=>{const i=Array.isArray(n)?l_(n):n,s={min:r[0],max:r[1]},{min:o,max:a}=qt(qt({},s),i);return[Qc(Number(o),e,Math.max(e,a)),Qc(Number(a),Math.min(t,o),t)]},uRe=({value:n,min:e,max:t})=>{const r={min:e,max:t},i=TX(l_(n),{min:r,max:r}),s=[e,t],o=qt(qt({},i),{},{bounds:s});return{value:sY(l_(n),o,n),settings:o}};var cRe=Object.freeze({__proto__:null,schema:lRe,format:l_,sanitize:sY,normalize:uRe});const fRe=["value","bounds","onDrag"],dRe=["bounds"],hRe=Gt("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function pRe(n){let{value:e,bounds:[t,r],onDrag:i}=n,s=Gn(n,fRe);const o=k.useRef(null),a=k.useRef(null),l=k.useRef(null),u=k.useRef(0),c=yu("sizes","scrubberWidth"),f=Ty(({event:m,first:v,xy:[y],movement:[p],memo:S={}})=>{if(v){const{width:g,left:w}=o.current.getBoundingClientRect();u.current=g-parseFloat(c);const x=(m==null?void 0:m.target)===a.current||(m==null?void 0:m.target)===l.current;S.pos=r_((y-w)/g,t,r);const M=Math.abs(S.pos-e.min)-Math.abs(S.pos-e.max);S.key=M<0||M===0&&S.pos<=e.min?"min":"max",x&&(S.pos=e[S.key])}const b=S.pos+r_(p/u.current,0,r-t);return i({[S.key]:F3e(b,s[S.key])}),S}),d=`calc(${n_(e.min,t,r)} * (100% - ${c} - 8px) + 4px)`,h=`calc(${1-n_(e.max,t,r)} * (100% - ${c} - 8px) + 4px)`;return De.createElement(MX,Cr({ref:o},f()),De.createElement(EX,null,De.createElement(CX,{style:{left:d,right:h}})),De.createElement(H3,{position:"left",ref:a,style:{left:d}}),De.createElement(H3,{position:"right",ref:l,style:{right:h}}))}function mRe(){const{label:n,displayValue:e,onUpdate:t,settings:r}=ds(),i=Gn(r,dRe);return De.createElement(De.Fragment,null,De.createElement(ha,{input:!0},De.createElement(Va,null,n),De.createElement(hRe,null,De.createElement(pRe,Cr({value:e},r,{onDrag:t})),De.createElement(VR,{value:e,settings:i,onUpdate:t,innerLabelTrim:0}))))}var gRe=qt({component:mRe},cRe);const vRe=()=>{const n=new Map;return{on:(e,t)=>{let r=n.get(e);r===void 0&&(r=new Set,n.set(e,r)),r.add(t)},off:(e,t)=>{const r=n.get(e);r!==void 0&&(r.delete(t),r.size===0&&n.delete(e))},emit:(e,...t)=>{const r=n.get(e);if(r!==void 0)for(const i of r)i(...t)}}},yRe=["type","value"],xRe=["onChange","transient","onEditStart","onEditEnd"],oY=function(){const e=XR($Ne(()=>({data:{}}))),t=vRe();this.storeId=qTe(),this.useStore=e;const r={},i=new Set;this.getVisiblePaths=()=>{const o=this.getData(),a=Object.keys(o),l=[];Object.entries(r).forEach(([c,f])=>{f.render&&a.some(d=>d.indexOf(c)===0)&&!f.render(this.get)&&l.push(c+".")});const u=[];return i.forEach(c=>{c in o&&o[c].__refCount>0&&l.every(f=>c.indexOf(f)===-1)&&(!o[c].render||o[c].render(this.get))&&u.push(c)}),u},this.setOrderedPaths=o=>{o.forEach(a=>i.add(a))},this.orderPaths=o=>(this.setOrderedPaths(o),o),this.disposePaths=o=>{e.setState(a=>{const l=a.data;return o.forEach(u=>{if(u in l){const c=l[u];c.__refCount--,c.__refCount===0&&c.type in na&&delete l[u]}}),{data:l}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=o=>r[o]||{},this.getData=()=>e.getState().data,this.addData=(o,a)=>{e.setState(l=>{const u=l.data;return Object.entries(o).forEach(([c,f])=>{let d=u[c];if(d){const{type:h,value:m}=f,v=Gn(f,yRe);h!==d.type?lu(xr.INPUT_TYPE_OVERRIDE,h):((d.__refCount===0||a)&&Object.assign(d,v),d.__refCount++)}else u[c]=qt(qt({},f),{},{__refCount:1})}),{data:u}})},this.setValueAtPath=(o,a,l)=>{e.setState(u=>{const c=u.data;return Gz(c[o],a,o,this,l),{data:c}})},this.setSettingsAtPath=(o,a)=>{e.setState(l=>{const u=l.data;return u[o].settings=qt(qt({},u[o].settings),a),{data:u}})},this.disableInputAtPath=(o,a)=>{e.setState(l=>{const u=l.data;return u[o].disabled=a,{data:u}})},this.set=(o,a)=>{e.setState(l=>{const u=l.data;return Object.entries(o).forEach(([c,f])=>{try{Gz(u[c],f,void 0,void 0,a)}catch{}}),{data:u}})},this.getInput=o=>{try{return this.getData()[o]}catch{lu(xr.PATH_DOESNT_EXIST,o)}},this.get=o=>{var a;return(a=this.getInput(o))===null||a===void 0?void 0:a.value},this.emitOnEditStart=o=>{t.emit(`onEditStart:${o}`,this.get(o),o,qt(qt({},this.getInput(o)),{},{get:this.get}))},this.emitOnEditEnd=o=>{t.emit(`onEditEnd:${o}`,this.get(o),o,qt(qt({},this.getInput(o)),{},{get:this.get}))},this.subscribeToEditStart=(o,a)=>{const l=`onEditStart:${o}`;return t.on(l,a),()=>t.off(l,a)},this.subscribeToEditEnd=(o,a)=>{const l=`onEditEnd:${o}`;return t.on(l,a),()=>t.off(l,a)};const s=(o,a,l)=>{const u={};return Object.entries(o).forEach(([c,f])=>{if(c==="")return lu(xr.EMPTY_KEY);let d=KR(a,c);if(f.type===na.FOLDER){const h=s(f.schema,d,l);Object.assign(u,h),d in r||(r[d]=f.settings)}else if(c in l)lu(xr.DUPLICATE_KEYS,c,d,l[c].path);else{const h=t3e(f,c,d,u);if(h){const{type:m,options:v,input:y}=h,{onChange:p,transient:S,onEditStart:b,onEditEnd:g}=v,w=Gn(v,xRe);u[d]=qt(qt(qt({type:m},w),y),{},{fromPanel:!0}),l[c]={path:d,onChange:p,transient:S,onEditStart:b,onEditEnd:g}}else lu(xr.UNKNOWN_INPUT,d,f)}}),u};this.getDataFromSchema=o=>{const a={};return[s(o,"",a),a]}},aY=new oY;function Fx(){return k.useMemo(()=>new oY,[])}const bRe={collapsed:!1};function wRe(n,e){return{type:na.FOLDER,schema:n,settings:qt(qt({},bRe),e)}}const SRe={disabled:!1};function Oa(n,e){return{type:na.BUTTON,onClick:n,settings:qt(qt({},SRe),e)}}const EU=n=>"__levaInput"in n,_Re=(n,e)=>{const t={},r=e?e.toLowerCase():null;return n.forEach(i=>{const[s,o]=_Pe(i);(!r||s.toLowerCase().indexOf(r)>-1)&&SPe(t,o,{[s]:{__levaInput:!0,path:i}})}),t},ERe=["type","label","path","valueKey","value","settings","setValue","disabled"];function MRe(n){let{type:e,label:t,path:r,valueKey:i,value:s,settings:o,setValue:a,disabled:l}=n,u=Gn(n,ERe);const{displayValue:c,onChange:f,onUpdate:d}=SX({type:e,value:s,settings:o,setValue:a}),h=Od[e].component;return h?De.createElement(dX.Provider,{value:qt({key:i,path:r,id:""+r,label:t,displayValue:c,value:s,onChange:f,onUpdate:d,settings:o,setValue:a,disabled:l},u)},De.createElement(w3e,{disabled:l},De.createElement(h,null))):(lu(xr.NO_COMPONENT_FOR_TYPE,e,r),null)}const CRe=Gt("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function ARe({onClick:n,settings:e,label:t}){const r=Wm();return De.createElement(ha,null,De.createElement(CRe,{disabled:e.disabled,onClick:()=>n(r.get)},t))}const TRe=Gt("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),DRe=Gt("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),NRe=({label:n,opts:e})=>{let t=typeof n=="string"&&n.trim()===""?null:n,r=e;return typeof e.opts=="object"&&(r.label!==void 0&&(t=e.label),r=e.opts),{label:t,opts:r}};function PRe(n){const{label:e,opts:t}=NRe(n),r=Wm();return De.createElement(ha,{input:!!e},e&&De.createElement(Va,null,e),De.createElement(TRe,null,Object.entries(t).map(([i,s])=>De.createElement(DRe,{key:i,onClick:()=>s(r.get)},i))))}const RRe=Gt("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),lY=100;function ORe(n,e){n.push(e),n.length>lY&&n.shift()}const kRe=k.forwardRef(function({initialValue:n},e){const t=yu("colors","highlight3"),r=yu("colors","elevation2"),i=yu("colors","highlight1"),[s,o]=k.useMemo(()=>[bs(i).alpha(.4).toRgbString(),bs(i).alpha(.1).toRgbString()],[i]),a=k.useRef([n]),l=k.useRef(n),u=k.useRef(n),c=k.useRef(),f=k.useCallback((m,v)=>{if(!m)return;const{width:y,height:p}=m,S=new Path2D,b=y/lY,g=p*.05;for(let M=0;M<a.current.length;M++){const A=n_(a.current[M],l.current,u.current),N=b*M,C=p-A*(p-g*2)-g;S.lineTo(N,C)}v.clearRect(0,0,y,p);const w=new Path2D(S);w.lineTo(b*(a.current.length+1),p),w.lineTo(0,p),w.lineTo(0,0);const x=v.createLinearGradient(0,0,0,p);x.addColorStop(0,s),x.addColorStop(1,o),v.fillStyle=x,v.fill(w),v.strokeStyle=r,v.lineJoin="round",v.lineWidth=14,v.stroke(S),v.strokeStyle=t,v.lineWidth=2,v.stroke(S)},[t,r,s,o]),[d,h]=N3e(f);return k.useImperativeHandle(e,()=>({frame:m=>{(l.current===void 0||m<l.current)&&(l.current=m),(u.current===void 0||m>u.current)&&(u.current=m),ORe(a.current,m),c.current=requestAnimationFrame(()=>f(d.current,h.current))}}),[d,h,f]),k.useEffect(()=>()=>cancelAnimationFrame(c.current),[]),De.createElement(RRe,{ref:d})}),MU=n=>Number.isFinite(n)?n.toPrecision(2):n.toString(),IRe=k.forwardRef(function({initialValue:n},e){const[t,r]=k.useState(MU(n));return k.useImperativeHandle(e,()=>({frame:i=>r(MU(i))}),[]),De.createElement("div",null,t)});function CU(n){return typeof n=="function"?n():n.current}function LRe({label:n,objectOrFn:e,settings:t}){const r=k.useRef(),i=k.useRef(CU(e));return k.useEffect(()=>{const s=window.setInterval(()=>{var o;document.hidden||(o=r.current)===null||o===void 0||o.frame(CU(e))},t.interval);return()=>window.clearInterval(s)},[e,t.interval]),De.createElement(ha,{input:!0},De.createElement(Va,{align:"top"},n),t.graph?De.createElement(kRe,{ref:r,initialValue:i.current}):De.createElement(IRe,{ref:r,initialValue:i.current}))}const FRe=["type","label","key"],BRe={[na.BUTTON]:ARe,[na.BUTTON_GROUP]:PRe,[na.MONITOR]:LRe},zRe=De.memo(({path:n})=>{const[e,{set:t,setSettings:r,disable:i,storeId:s,emitOnEditStart:o,emitOnEditEnd:a}]=R3e(n);if(!e)return null;const{type:l,label:u,key:c}=e,f=Gn(e,FRe);if(l in na){const d=BRe[l];return De.createElement(d,Cr({label:u,path:n},f))}return l in Od?De.createElement(MRe,Cr({key:s+n,type:l,label:u,storeId:s,path:n,valueKey:c,setValue:t,setSettings:r,disable:i,emitOnEditStart:o,emitOnEditEnd:a},f)):(zTe(xr.UNSUPPORTED_INPUT,l,n),null)});function URe({toggle:n,toggled:e,name:t}){return De.createElement(y3e,{onClick:()=>n()},De.createElement($R,{toggled:e}),De.createElement("div",null,t))}const $Re=({name:n,path:e,tree:t})=>{const r=Wm(),i=KR(e,n),{collapsed:s,color:o}=r.getFolderSettings(i),[a,l]=k.useState(!s),u=k.useRef(null),c=yu("colors","folderWidgetColor"),f=yu("colors","folderTextColor");return k.useLayoutEffect(()=>{u.current.style.setProperty("--leva-colors-folderWidgetColor",o||c),u.current.style.setProperty("--leva-colors-folderTextColor",o||f)},[o,c,f]),De.createElement(i_,{ref:u},De.createElement(URe,{name:n,toggled:a,toggle:()=>l(d=>!d)}),De.createElement(uY,{parent:i,tree:t,toggled:a}))},uY=De.memo(({isRoot:n=!1,fill:e=!1,flat:t=!1,parent:r,tree:i,toggled:s})=>{const{wrapperRef:o,contentRef:a}=CPe(s),l=Wm(),u=([f,d])=>{var h;return(EU(d)?(h=l.getInput(d.path))===null||h===void 0?void 0:h.order:l.getFolderSettings(KR(r,f)).order)||0},c=Object.entries(i).sort((f,d)=>u(f)-u(d));return De.createElement($3,{ref:o,isRoot:n,fill:e,flat:t},De.createElement(yX,{ref:a,isRoot:n,toggled:s},c.map(([f,d])=>EU(d)?De.createElement(zRe,{key:d.path,valueKey:d.valueKey,path:d.path}):De.createElement($Re,{key:f,name:f,path:r,tree:d}))))}),VRe=Gt("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${bX}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),cY=40,u_=Gt("i",{$flexCenter:"",width:cY,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),HRe=Gt("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),WRe=Gt("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${u_}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),jRe=Gt("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),GRe=Gt("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:cY}}}}),qRe=De.forwardRef(({setFilter:n,toggle:e},t)=>{const[r,i]=k.useState(""),s=k.useMemo(()=>oX(n,250),[n]),o=()=>{n(""),i("")},a=l=>{const u=l.currentTarget.value;e(!0),i(u)};return k.useEffect(()=>{s(r)},[r,s]),De.createElement(De.Fragment,null,De.createElement(jRe,{ref:t,value:r,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:l=>l.stopPropagation(),onChange:a}),De.createElement(u_,{onClick:()=>o(),style:{visibility:r?"visible":"hidden"}},De.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},De.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function XRe({setFilter:n,onDrag:e,onDragStart:t,onDragEnd:r,toggle:i,toggled:s,title:o,drag:a,filterEnabled:l,from:u}){const[c,f]=k.useState(!1),d=k.useRef(null);k.useEffect(()=>{var m,v;c?(m=d.current)===null||m===void 0||m.focus():(v=d.current)===null||v===void 0||v.blur()},[c]);const h=Ty(({offset:[m,v],first:y,last:p})=>{e({x:m,y:v}),y&&t({x:m,y:v}),p&&r({x:m,y:v})},{filterTaps:!0,from:({offset:[m,v]})=>[(u==null?void 0:u.x)||m,(u==null?void 0:u.y)||v]});return k.useEffect(()=>{const m=v=>{v.key==="L"&&v.shiftKey&&v.metaKey&&f(y=>!y)};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[]),De.createElement(De.Fragment,null,De.createElement(HRe,{mode:a?"drag":void 0},De.createElement(u_,{active:!s,onClick:()=>i()},De.createElement($R,{toggled:s,width:12,height:8})),De.createElement(GRe,Cr({},a?h():{},{drag:a,filterEnabled:l}),o===void 0&&a?De.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},De.createElement("circle",{cx:"2",cy:"2",r:"2"}),De.createElement("circle",{cx:"14",cy:"2",r:"2"}),De.createElement("circle",{cx:"26",cy:"2",r:"2"}),De.createElement("circle",{cx:"2",cy:"12",r:"2"}),De.createElement("circle",{cx:"14",cy:"12",r:"2"}),De.createElement("circle",{cx:"26",cy:"12",r:"2"})):o),l&&De.createElement(u_,{active:c,onClick:()=>f(m=>!m)},De.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},De.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),De.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),De.createElement(WRe,{toggled:c},De.createElement(qRe,{ref:d,setFilter:n,toggle:i})))}const YRe=["store","hidden","theme","collapsed"];function fY(n){let{store:e,hidden:t=!1,theme:r,collapsed:i=!1}=n,s=Gn(n,YRe);const o=eY(()=>d3e(r),[r]),[a,l]=k.useState(!i),u=typeof i=="object"?!i.collapsed:a,c=k.useMemo(()=>typeof i=="object"?f=>{typeof f=="function"?i.onChange(!f(!i.collapsed)):i.onChange(!f)}:l,[i]);return!e||t?null:De.createElement(BR.Provider,{value:o},De.createElement(KRe,Cr({store:e},s,{toggled:u,setToggle:c,rootClass:o.className})))}const KRe=De.memo(({store:n,rootClass:e,fill:t=!1,flat:r=!1,neverHide:i=!1,oneLineLabels:s=!1,titleBar:o={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:a=!1,toggled:l,setToggle:u})=>{var c,f;const d=APe(n),[h,m]=k.useState(""),v=k.useMemo(()=>_Re(d,h),[d,h]),[y,p]=_X(),S=i||d.length>0,b=typeof o=="object"&&o.title||void 0,g=typeof o=="object"&&(c=o.drag)!==null&&c!==void 0?c:!0,w=typeof o=="object"&&(f=o.filter)!==null&&f!==void 0?f:!0,x=typeof o=="object"&&o.position||void 0,M=typeof o=="object"&&o.onDrag||void 0,A=typeof o=="object"&&o.onDragStart||void 0,N=typeof o=="object"&&o.onDragEnd||void 0;return De.useEffect(()=>{p({x:x==null?void 0:x.x,y:x==null?void 0:x.y})},[x,p]),f3e(),De.createElement(pX.Provider,{value:{hideCopyButton:a}},De.createElement(VRe,{ref:y,className:e,fill:t,flat:r,oneLineLabels:s,hideTitleBar:!o,style:{display:S?"block":"none"}},o&&De.createElement(XRe,{onDrag:C=>{p(C),M==null||M(C)},onDragStart:C=>A==null?void 0:A(C),onDragEnd:C=>N==null?void 0:N(C),setFilter:m,toggle:C=>u(T=>C??!T),toggled:l,title:b,drag:g,filterEnabled:w,from:x}),S&&De.createElement(hX.Provider,{value:n},De.createElement(uY,{isRoot:!0,fill:t,flat:r,tree:v,toggled:l}))))}),ZRe=["isRoot"];let c_=!1,sd=null;function JRe(n){let{isRoot:e=!1}=n,t=Gn(n,ZRe);return k.useEffect(()=>(c_=!0,!e&&sd&&(sd.remove(),sd=null),()=>{e||(c_=!1)}),[e]),De.createElement(fY,Cr({store:aY},t))}function QRe(n){k.useEffect(()=>{n&&!c_&&(sd||(sd=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(sd),r3e(De.createElement(JRe,{isRoot:!0}),sd))),c_=!0)},[n])}const eOe=["store"];function Bx(n){let{store:e}=n,t=Gn(n,eOe);const r=Wm(),i=e===void 0?r:e;return De.createElement(fY,Cr({store:i},t))}function tOe(n,e,t,r,i){let s,o,a,l,u;return typeof n=="string"?(o=n,s=e,Array.isArray(t)?u=t:t&&("store"in t?(l=t,u=r):(a=t,Array.isArray(r)?u=r:(l=r,u=i)))):(s=n,Array.isArray(e)?u=e:(l=e,u=t)),{schema:s,folderName:o,folderSettings:a,hookSettings:l,deps:u||[]}}function zx(n,e,t,r,i){const{folderName:s,schema:o,folderSettings:a,hookSettings:l,deps:u}=tOe(n,e,t,r,i),c=typeof o=="function",f=k.useRef(!1),d=k.useRef(!0),h=eY(()=>{f.current=!0;const T=typeof o=="function"?o():o;return s?{[s]:wRe(T,a)}:T},u),m=!(l!=null&&l.store);QRe(m);const[v]=k.useState(()=>(l==null?void 0:l.store)||aY),[y,p]=k.useMemo(()=>v.getDataFromSchema(h),[v,h]),[S,b,g,w,x]=k.useMemo(()=>{const T=[],R=[],$={},B={},z={};return Object.values(p).forEach(({path:D,onChange:I,onEditStart:U,onEditEnd:L,transient:q})=>{T.push(D),I?($[D]=I,q||R.push(D)):R.push(D),U&&(B[D]=U),L&&(z[D]=L)}),[T,R,$,B,z]},[p]),M=k.useMemo(()=>v.orderPaths(S),[S,v]),A=TPe(v,b,y),N=k.useCallback(T=>{const R=Object.entries(T).reduce(($,[B,z])=>Object.assign($,{[p[B].path]:z}),{});v.set(R,!1)},[v,p]),C=k.useCallback(T=>v.get(p[T].path),[v,p]);return k.useEffect(()=>{const T=!d.current&&f.current;return v.addData(y,T),d.current=!1,f.current=!1,()=>v.disposePaths(M)},[v,M,y]),k.useEffect(()=>{const T=[];return Object.entries(g).forEach(([R,$])=>{$(v.get(R),R,qt({initial:!0,get:v.get},v.getInput(R)));const B=v.useStore.subscribe(z=>{const D=z.data[R];return[D.disabled?void 0:D.value,D]},([z,D])=>$(z,R,qt({initial:!1,get:v.get},D)),{equalityFn:EE});T.push(B)}),()=>T.forEach(R=>R())},[v,g]),k.useEffect(()=>{const T=[];return Object.entries(w).forEach(([R,$])=>T.push(v.subscribeToEditStart(R,$))),Object.entries(x).forEach(([R,$])=>T.push(v.subscribeToEditEnd(R,$))),()=>T.forEach(R=>R())},[w,x,v]),c?[A,N,C]:A}$u(La.SELECT,Y3e);$u(La.IMAGE,aRe);$u(La.NUMBER,z3e);$u(La.COLOR,zPe);$u(La.STRING,iDe);$u(La.BOOLEAN,fDe);$u(La.INTERVAL,gRe);$u(La.VECTOR3D,$Pe);$u(La.VECTOR2D,YPe);class nOe extends Bn{constructor(e){super(e),this.atomType="Cut Layout",this.type="cutLayout",this.name="Cut Layout",this.description="Extracts all parts tagged for cutting and lays them out on a sheet to cut.",this.progress=0,this.cancelationHandle=void 0,this.addIO("input","geometry",this,"geometry",null),this.addIO("input","Material Thickness",this,"number",O.topLevelMolecule.unitsKey=="MM"?19:.75),this.addIO("input","Sheet Width",this,"number",O.topLevelMolecule.unitsKey=="MM"?2438:96),this.addIO("input","Sheet Height",this,"number",O.topLevelMolecule.unitsKey=="MM"?1219:48),this.addIO("input","Part Padding",this,"number",O.topLevelMolecule.unitsKey=="MM"?6:.25),this.addIO("input","Sheet Padding",this,"number",O.topLevelMolecule.unitsKey=="MM"?76:3),this.addIO("output","geometry",this,"geometry",""),this.setValues(e)}draw(){super.draw();const e=O.widthToPixels(this.x),t=O.heightToPixels(this.y),r=O.widthToPixels(this.radius);O.c.beginPath(),O.c.fillStyle="#949294",O.c.moveTo(e-r/2,t+r/2),O.c.lineTo(e+r/2,t+r/2),O.c.lineTo(e+r/2,t),O.c.lineTo(e-r/2,t),O.c.lineTo(e-r/2,t+r/2),O.c.setLineDash([3,3]),O.c.stroke(),O.c.closePath(),O.c.beginPath(),O.c.lineTo(e+r/4,t-r/1.7),O.c.lineTo(e-r/4,t-r/2),O.c.lineTo(e-r/4,t),O.c.lineTo(e+r/2,t),O.c.lineTo(e+r/4,t-r/1.7),O.c.lineWidth=1,O.c.lineJoin="round",O.c.stroke(),O.c.setLineDash([]),O.c.closePath(),this.progress<1&&(O.c.beginPath(),O.c.fillStyle=this.centerColor,O.c.moveTo(O.widthToPixels(this.x),O.heightToPixels(this.y)),O.c.arc(O.widthToPixels(this.x),O.heightToPixels(this.y),O.widthToPixels(this.radius)/1.5,0,this.progress*Math.PI*2,!1),O.c.closePath(),O.c.fill())}updateValue(){}updateValueButton(){if(super.updateValue(),this.inputs.every(l=>l.ready)){this.cancelationHandle&&this.cancelationHandle(),this.processing=!0;var e=this.findIOValue("geometry"),t=this.findIOValue("Material Thickness"),r=this.findIOValue("Sheet Width"),i=this.findIOValue("Sheet Height"),s=this.findIOValue("Sheet Padding"),o=this.findIOValue("Part Padding"),a="cutLayout";if(!e){this.setAlert('"geometry" input is missing');return}O.topLevelMolecule.unitsKey,O.cad.layout(this.uniqueID,e,a,GW((l,u)=>{this.progress=l,this.cancelationHandle=u}),{thickness:t,width:r,height:i,sheetPadding:s,partPadding:o}).then(l=>{this.basicThreadValueProcessing(),l!=null&&this.setAlert(l),this.progress=1,this.cancelationHandle=void 0,this.processing=!1}).catch(this.alertingErrorHandler())}}createLevaInputs(){let e=super.createLevaInputs();return e["Compute Layout"]=Oa(()=>{this.updateValueButton()}),e}}class rOe extends Bn{constructor(e){super(e),this.addIO("output","geometry",this,"geometry",""),this.name="Shrink Wrap",this.atomType="Shrink Wrap",this.ioValues=[],this.description="Joins two or more drawings into a single sketch by filling in the space between them. Also called 'hull'",this.setValues(e),typeof this.ioValues<"u"&&this.ioValues.forEach(t=>{this.addIO("input",t.name,this,"geometry","")}),this.setValues([])}draw(){super.draw(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.arc(O.widthToPixels(this.x+this.radius/4),O.heightToPixels(this.y),O.widthToPixels(this.radius/2.5),0,Math.PI*2,!1),O.c.fill(),O.c.closePath(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.arc(O.widthToPixels(this.x-this.radius/4),O.heightToPixels(this.y),O.widthToPixels(this.radius/2.5),0,Math.PI*2,!1),O.c.fill(),O.c.closePath(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.rect(O.widthToPixels(this.x-this.radius/4),O.heightToPixels(this.y-this.radius),O.widthToPixels(this.radius/2),O.widthToPixels(this.radius/2)),O.c.fill(),O.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(t=>t.ready)){this.processing=!0;var e=[];this.inputs.forEach(t=>{t.connectors.length>0&&e.push(t.getValue())}),O.cad.shrinkWrapSketches(this.uniqueID,e).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler()),v0(this)}}serialize(e){var t=super.serialize(e),r=[];return this.inputs.forEach(i=>{if(i.type=="input"){var s={name:i.name,ioValue:i.getValue()};r.push(s)}}),r.forEach(i=>{t.ioValues.push(i)}),t}}class iOe extends Bn{constructor(e){super(e),this.addIO("input","x length",this,"number",10),this.addIO("input","y length",this,"number",10),this.addIO("output","geometry",this,"geometry",""),this.name="Rectangle",this.atomType="Rectangle",this.description="Creates a new rectangle.",this.setValues(e)}beginPropagation(){this.inputs.forEach(e=>{e.beginPropagation()})}draw(){super.draw(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.rect(O.widthToPixels(this.x-this.radius/2),O.heightToPixels(this.y-this.radius*2),O.widthToPixels(this.radius),O.widthToPixels(this.radius)),O.c.stroke(),O.c.closePath()}updateValue(){super.updateValue();var e=this.findIOValue("x length"),t=this.findIOValue("y length");O.cad.rectangle(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}class sOe extends Bn{constructor(e){super(e),this.addIO("output","geometry",this,"geometry",""),this.name="Loft",this.atomType="Loft",this.ioValues=[],this.description="Joins two or more shapes into a single solid by filling in the space between them. Also called 'hull'",this.closedSelection=0,this.addedIO=!1,this.setValues(e),typeof this.ioValues<"u"&&this.ioValues.forEach(t=>{this.addIO("input",t.name,this,"geometry","")}),this.setValues([])}draw(){super.draw(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.arc(O.widthToPixels(this.x+this.radius/4),O.heightToPixels(this.y),O.widthToPixels(this.radius/2.5),0,Math.PI*2,!1),O.c.fill(),O.c.closePath(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.arc(O.widthToPixels(this.x-this.radius/4),O.heightToPixels(this.y),O.widthToPixels(this.radius/2.5),0,Math.PI*2,!1),O.c.fill(),O.c.closePath(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.rect(O.widthToPixels(this.x-this.radius/4),O.heightToPixels(this.y-this.radius),O.widthToPixels(this.radius/2),O.widthToPixels(this.radius/2)),O.c.fill(),O.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(t=>t.ready)){this.processing=!0;var e=[];this.inputs.forEach(t=>{t.connectors.length>0&&e.push(t.getValue())}),O.cad.loftShapes(this.uniqueID,e).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler()),v0(this)}}serialize(e){var t=super.serialize(e),r=[];return this.inputs.forEach(i=>{if(i.type=="input"){var s={name:i.name,ioValue:i.getValue()};r.push(s)}}),r.forEach(i=>{t.ioValues.push(i)}),t.closedSelection=this.closedSelection,t}}class oOe extends Bn{constructor(e){super(e),this.addIO("input","geometry",this,"geometry","",!1,!0),this.addIO("input","xDist",this,"number",0),this.addIO("input","yDist",this,"number",0),this.addIO("input","zDist",this,"number",0),this.addIO("output","geometry",this,"geometry",""),this.name="Move",this.atomType="Move",this.description="Moves a shape laterally in X, Y, Z.",this.setValues(e)}draw(){super.draw(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.arc(O.widthToPixels(this.x+this.radius/5),O.heightToPixels(this.y),O.widthToPixels(this.radius/2.5),0,Math.PI*2,!1),O.c.stroke(),O.c.closePath(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.arc(O.widthToPixels(this.x-this.radius/5),O.heightToPixels(this.y),O.widthToPixels(this.radius/2.5),0,Math.PI*2,!1),O.c.fill(),O.c.stroke(),O.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(s=>s.ready)){this.processing=!0;var e=this.findIOValue("geometry"),t=this.findIOValue("xDist"),r=this.findIOValue("yDist"),i=this.findIOValue("zDist");O.cad.move(this.uniqueID,e,t,r,i).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}}let aOe=class extends Bn{constructor(e){super(e),this.addIO("input","geometry",this,"geometry","",!1,!0),this.addIO("output","geometry",this,"geometry",""),this.name="Tag",this.atomType="Tag",this.height,this.description="Tags geometry so that it can be extracted later.",this.tags=[""],this.cutTag=!1,this.setValues(e)}draw(){super.draw("rect");let e=O.widthToPixels(this.radius);this.height=e,O.c.beginPath(),O.c.fillStyle="#484848",O.c.font=`${e*1.3}px Work Sans Bold`,O.c.fillText("@",O.widthToPixels(this.x-this.radius/1.5),O.heightToPixels(this.y)+this.height/1.5),O.c.fill(),O.c.closePath()}checkHasTag(){return this.cutTag}addTagsToAvailableTags(){let e=Array.from(new Set(O.topLevelMolecule.projectAvailableTags.concat(this.tags)));O.topLevelMolecule.projectAvailableTags=e}createLevaInputs(){let e={};return e[this.uniqueID+"cut_string"]={value:this.cutTag,label:"Cut List Tag",onChange:t=>{this.cutTag!==t&&(t===!0?(this.cutTag=!0,this.tags.push("cutLayout"),this.name=this.tags.toString(),this.updateValue()):(this.cutTag=!1,this.tags=this.tags.filter(r=>r!=="cutLayout"),this.name=this.tags.toString(),this.updateValue()))}},e[this.uniqueID+"custom_string"]={value:this.tags.filter(t=>t!=="cutLayout")[0],label:"Add Tag",disabled:!1,onChange:t=>{this.tags=this.cutTag?["cutLayout"]:[],this.tags.push(t),this.name=this.tags.toString(),this.updateValue()}},e}updateValue(){if(super.updateValue(),this.inputs.every(r=>r.ready)){this.processing=!0;var e=this.findIOValue("geometry"),t=this.tags;this.addTagsToAvailableTags(),O.cad.tag(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}sendToRender(){console.log("tag has nothing to render")}serialize(e={x:0,y:0}){var t=super.serialize(e);return t.tags=this.tags,t.cutTag=this.cutTag,t}};class lOe extends Bn{constructor(e){super(e),this.addIO("input","number of sides",this,"number",6),this.addIO("input","diameter",this,"number",10),this.addIO("output","geometry",this,"geometry",""),this.name="RegularPolygon",this.atomType="RegularPolygon",this.description="Creates a new regular polygon. Corners are on the diameter.",this.setValues(e)}draw(){super.draw();let e=O.widthToPixels(this.x),t=O.heightToPixels(this.y),r=O.widthToPixels(this.radius);O.c.beginPath(),O.c.fillStyle="#949294",O.c.moveTo(e-r/3,t+r/1.7),O.c.lineTo(e+r/3,t+r/1.7),O.c.lineTo(e+r/1.5,t),O.c.lineTo(e+r/2.5,t-r/1.7),O.c.lineTo(e-r/2.5,t-r/1.7),O.c.lineTo(e-r/1.5,t),O.c.lineTo(e-r/3,t+r/1.7),O.c.stroke(),O.c.closePath()}beginPropagation(e=!1){this.inputs.forEach(t=>{t.beginPropagation()})}updateValue(){super.updateValue();var e=this.findIOValue("number of sides"),t=this.findIOValue("diameter");O.cad.regularPolygon(this.uniqueID,t/2,e).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}class uOe extends Bn{constructor(e){super(e),this.name="Extrude",this.atomType="Extrude",this.description="Extrudes a 2D shape. Input can be negitive. ",this.addIO("input","geometry",this,"geometry","",!1,!0),this.addIO("input","height",this,"number",10),this.addIO("output","geometry",this,"geometry",""),this.setValues(e)}draw(){super.draw(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.rect(O.widthToPixels(this.x-this.radius/2),O.heightToPixels(this.y+this.radius),O.widthToPixels(this.radius),O.widthToPixels(this.radius/3)),O.c.fill(),O.c.stroke(),O.c.closePath(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.rect(O.widthToPixels(this.x-this.radius/2),O.heightToPixels(this.y-this.radius*2),O.widthToPixels(this.radius),O.widthToPixels(this.radius)),O.c.stroke(),O.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(r=>r.ready)){var e=this.findIOValue("geometry"),t=this.findIOValue("height");O.cad.extrude(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}}class cOe extends Bn{constructor(e){super(e),this.addIO("input","geometry1",this,"geometry",""),this.addIO("input","geometry2",this,"geometry",""),this.addIO("output","geometry",this,"geometry",""),this.name="Intersection",this.atomType="Intersection",this.description="The space shared by two shapes.",this.setValues(e)}draw(){super.draw();const e=O.widthToPixels(this.x),t=O.heightToPixels(this.y),r=O.widthToPixels(this.radius);O.c.beginPath(),O.c.fillStyle="#949294",O.c.moveTo(e-r/2,t+r/2),O.c.lineTo(e+r/2,t+r/2),O.c.lineTo(e+r/2,t),O.c.lineTo(e+r/4,t),O.c.lineTo(e+r/4,t-r/2),O.c.lineTo(e-r/4,t-r/2),O.c.lineTo(e-r/4,t),O.c.lineTo(e-r/2,t),O.c.lineTo(e-r/2,t+r/2),O.c.fill(),O.c.lineWidth=1,O.c.lineJoin="round",O.c.stroke(),O.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(e=>e.ready)){this.processing=!0;const e=this.findIOValue("geometry1"),t=this.findIOValue("geometry2");O.cad.intersect(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}}class fOe extends Bn{constructor(e){super(e),this.addIO("input","geometry2",this,"geometry",""),this.addIO("input","geometry1",this,"geometry",""),this.addIO("output","geometry",this,"geometry",""),this.name="Difference",this.atomType="Difference",this.description="Subtracts shape two from shape one.",this.setValues(e)}draw(){super.draw(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.arc(O.widthToPixels(this.x),O.heightToPixels(this.y),O.widthToPixels(this.radius/3),0,Math.PI*2,!1),O.c.fill(),O.c.stroke(),O.c.closePath(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.rect(O.widthToPixels(this.x-this.radius/2),O.heightToPixels(this.y-this.radius*2),O.widthToPixels(this.radius),O.widthToPixels(this.radius)),O.c.stroke(),O.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(e=>e.ready)){this.processing=!0;const e=this.findIOValue("geometry1"),t=this.findIOValue("geometry2");O.cad.difference(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}}class dOe extends Bn{constructor(e){super(e),this.type="constant",this.name="Constant",this.atomType="Constant",this.description="Defines a mathematical constant.",this.height=16,this.evolve=!1,this.min=0,this.max=20,this.value=10,this.setValues(e),this.addIO("output","number",this,"number",10),this.decreaseToProcessCountByOne()}draw(){super.draw("rect");let e=O.widthToPixels(this.x),t=O.heightToPixels(this.y),r=O.widthToPixels(this.radius);this.height=r,O.c.beginPath(),O.c.fillStyle="#484848",O.c.font=`${r}px Work Sans Bold`;const i="",s=r/1.5,o=O.c.measureText(i).width,a=e-o/2,l=t+this.height/2-s/2;O.c.fillText(i,a,l),O.c.fill(),O.c.closePath()}createLevaInputs(){let e={};return e["constant number"]={value:this.name,label:"Constant Name",disabled:!1,onChange:t=>{this.name=t}},e[this.uniqueID+this.name]={value:this.value,label:this.name,disabled:!1,onChange:t=>{this.value!==t&&(this.output.setValue(t),this.updateValue())}},e}updateValue(){this.value=this.output.getValue(),this.output.ready=!0,this.processing=!1}sendToRender(){O.writeToDisplay(this.uniqueID)}}class hOe extends Bn{constructor(e){super(e),this.addIO("output","result",this,"number",0),this.name="Equation",this.atomType="Equation",this.value=0,this.description="Defines a mathematical equation. Edit the output field to add or remove inputs.",this.height,this.currentEquation="x + y",this.setValues(e),this.addAndRemoveInputs(),this.setValues(e)}draw(){super.draw("rect");let e=O.widthToPixels(this.x),t=O.heightToPixels(this.y),r=O.widthToPixels(this.radius);this.height=r,O.c.beginPath(),O.c.fillStyle="#484848",O.c.font=`${r/1.3}px Work Sans Bold`;const i="(+)",s=r/1.5,o=O.c.measureText(i).width,a=e-o/2,l=t+this.height/2-s/2;O.c.fillText(i,a,l),O.c.fill(),O.c.closePath()}addAndRemoveInputs(){var e=/[a-zA-Z]/g;const t=this.currentEquation.match(e),r=()=>{this.inputs.forEach(s=>{t.includes(s.name)||(this.removeIO("input",s.name,this),r())})};r();for(var i in t)this.inputs.some(s=>s.Name===t[i])||this.addIO("input",t[i],this,"number",1)}evaluateEquation(){var e=this.currentEquation;this.name=this.currentEquation;var t=/[a-zA-Z]/g;const r=this.currentEquation.match(t);for(var i in r)for(var s=0;s<this.inputs.length;s++)this.inputs[s].name==r[i]&&(e=e.replace(this.inputs[s].name,this.findIOValue(this.inputs[s].name)));return O.limitedEvaluate(e)}createLevaInputs(e){let t={};if(this.inputs)return this.inputs.map(r=>{const i=()=>r.connectors.length>0;t.equation={value:this.currentEquation,label:"Current Equation",disabled:!1,onChange:s=>{this.currentEquation!==s&&(this.setEquation(s),e(this.currentEquation))},order:-3},t.result={value:this.output.value,label:"Result",disabled:!0},r.valueType!=="geometry"&&(t[r.name]={value:r.value,disabled:i(),onChange:s=>{r.setValue(s)},order:-2}),t["Save Equation"]=Oa(s=>{this.setEquation(s("equation"))},{order:-1})}),t}updateValue(){try{this.addAndRemoveInputs(),this.inputs.every(e=>e.ready)&&(this.decreaseToProcessCountByOne(),this.value=this.evaluateEquation(),this.output.setValue(this.value),this.output.ready=!0)}catch(e){console.warn(e),this.setAlert(e)}}serialize(e={x:0,y:0}){var t=super.serialize(e);return t.currentEquation=this.currentEquation,t}setEquation(e){this.currentEquation=e.trim(),this.updateValue()}sendToRender(){console.log("equation")}}class pOe extends Bn{constructor(e){super(e),this.atomType="Extract Tag",this.type="extractTag",this.height,this.name="Extract Tag",this.description="Extracts geometry containing the specified tag.",this.addIO("input","geometry",this,"geometry",null,!1,!0),this.addIO("output","geometry",this,"geometry",null),this.tagIndex=0,this.tag,this.setValues(e)}draw(){super.draw("rect");let e=O.widthToPixels(this.x),t=O.heightToPixels(this.y),r=O.widthToPixels(this.radius);this.height=r,O.c.beginPath(),O.c.fillStyle="#484848",O.c.font=`${r}px Work Sans Bold`,O.c.fillText("@",e-r/1,t+this.height/2),O.c.fill(),O.c.closePath()}createLevaInputs(){let e={};const t=O.topLevelMolecule.projectAvailableTags;return e[this.uniqueID+"tag_ops"]={value:t[this.tagIndex],options:t,label:"Extract Tag",onChange:r=>{this.tagIndex=t.indexOf(r),this.tag!=t[this.tagIndex]&&(this.tag=t[this.tagIndex],this.updateValue())}},e}updateValue(){if(super.updateValue(),this.inputs.every(r=>r.ready)){this.processing=!0;var e=this.findIOValue("geometry"),t=this.tag;O.cad.extractTag(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}serialize(e={x:0,y:0}){var t=super.serialize(e);return t.tag=this.tag,t.tagIndex=this.tagIndex,t}}class dY{constructor(){this.BOMitemName="name",this.numberNeeded=1,this.costUSD=0,this.source="www.example.com",this.height}}class Py extends Bn{constructor(e){super(e),this.nodesOnTheScreen=[],this.inputs=[],this.name="Molecule",this.description="Molecules provide an organizational structure to contain atoms. Double click on a molecule to enter it. Use the up arrow in the upper right hand corner of the screen to go up one level.",this.atomType="Molecule",this.centerColor="#949294",this.topLevel=!1,this.processing=!1,this.totalAtomCount=1,this.toProcess=0,this.awaitingPropagationFlag=!1,this.units={MM:"MM",Inches:"Inches"},this.unitsKey,this.BOMlist,this.compiledBom={},this.partToExport=null,this.projectAvailableTags=[],this.setValues(e),this.color}copyInputsFromParent(){this.parent&&this.parent.nodesOnTheScreen.forEach(e=>{e.atomType=="Input"&&this.placeAtom({parentMolecule:this,y:e.y,parent:this,name:e.name,atomType:"Input",uniqueID:O.generateUniqueID()},null,O.availableTypes,!0)})}draw(){const e=1-this.toProcess/this.totalAtomCount;this.toProcess>1?this.processing=!0:this.processing=!1,super.draw(),O.c.beginPath(),O.c.fillStyle=this.centerColor,O.c.moveTo(O.widthToPixels(this.x),O.heightToPixels(this.y)),O.c.arc(O.widthToPixels(this.x),O.heightToPixels(this.y),O.widthToPixels(this.radius)/2,0,e*Math.PI*2,!1),O.c.closePath(),O.c.fill()}createLevaInputs(){let e={};return e["molecule name"+this.uniqueID]={value:this.topLevel?O.currentRepoName:this.name,label:"Molecule Name",disabled:!!this.topLevel,onChange:t=>{this.name=t}},this.topLevel==!0&&(e["molecule name"+this.uniqueID+"units"]={value:this.unitsKey,label:"Project Units",options:Object.keys(this.units),disabled:!1,onChange:t=>{this.unitsKey=this.units[t]}}),this.inputs&&this.inputs.map(t=>{const r=()=>t.connectors.length>0;t.valueType!=="geometry"&&(e[this.uniqueID+t.name]={value:t.value,label:t.name,disabled:r(),onChange:i=>{t.value!==i&&t.setValue(i)}})}),O.currentRepo.parentRepo!=null&&this.topLevel&&(e["Reload from Github"]=Oa(()=>{this.reloadFork()})),e}createLevaExport(){let e={};const t=["STL","SVG","STEP"],r=this.nodesOnTheScreen.filter(i=>i.atomType==="Export");return e[this.uniqueID+"part_ops"]={value:this.partToExport?this.partToExport.fileName:"Pick a part to export",options:r.map(i=>i.inputs.filter(s=>s.name==="Part Name")[0].value),label:"Part",onChange:i=>{this.partToExport=r.find(s=>s.inputs.filter(o=>o.name==="Part Name")[0].value===i),this.updateValue()}},e[this.uniqueID+"file_ops"]={value:this.partToExport?this.partToExport.fileType:"Pick a file type",options:t,label:"File Type",onChange:i=>{this.partToExport&&(this.partToExport.type=i)}},e["Export As"]=Oa(()=>{this.partToExport.exportFile()}),e}async reloadFork(){const e=new jc;let t=O.currentRepo.parentRepo.split("/"),r=t[0],i=t[1];e.request("GET /repos/{owner}/{repo}",{owner:r,repo:i}).then(s=>{e.rest.repos.getContent({owner:s.data.owner.login,repo:s.data.name,path:"project.abundance"}).then(o=>{O.topLevelMolecule.nodesOnTheScreen.forEach(l=>{l.deleteNode()});let a=JSON.parse(atob(o.data.content));a.filetypeVersion==1&&O.topLevelMolecule.deserialize(a),O.currentMolecule.selected=!0})})}async extractBomTags(){return await O.cad.extractBomList(this.output.value)}clickUp(e,t){super.clickUp(e,t),O.currentMolecule.nodesOnTheScreen.forEach(r=>{r.isMoving=!1})}selectBox(e,t,r,i){let s=Math.min(e,r),o=Math.max(e,r),a=Math.min(t,i),l=Math.max(t,i),u=O.widthToPixels(this.x),c=O.heightToPixels(this.y);u>=s&&u<=o&&c>=a&&c<=l&&(this.selected=!0)}doubleClick(e,t){e=O.pixelsToWidth(e),t=O.pixelsToHeight(t);var r=!1,i=O.distBetweenPoints(e,this.x,t,this.y);return i<this.radius*2&&(O.currentMolecule=this,this.selected=!1,r=!0),r}copy(){this.nodesOnTheScreen.forEach(e=>{e.selected&&O.atomsSelected.push(e.serialize({x:.05,y:.05}))})}undo(){if(O.recentMoleculeRepresentation.length>0){let e=JSON.parse(O.recentMoleculeRepresentation.pop());[...O.topLevelMolecule.nodesOnTheScreen].forEach((r,i)=>{r.deleteNode()}),e.fileTypeVersion==1&&O.topLevelMolecule.deserialize(e),O.currentMolecule.selected=!0}}deselect(){this.selected=!1}updateValue(e){this.nodesOnTheScreen.forEach(t=>{t.atomType=="Input"&&t.name==e&&t.updateValue()})}compileBom(){return this.extractBomTags().then(t=>{let r=[],i=[];if(t)return t.forEach(function(s){s.BOMitemName&&(r[s.BOMitemName]||(r[s.BOMitemName]=new dY,r[s.BOMitemName].numberNeeded=0,r[s.BOMitemName].BOMitemName=s.BOMitemName,r[s.BOMitemName].source=s.source,i.push(r[s.BOMitemName])),r[s.BOMitemName].numberNeeded+=s.numberNeeded,r[s.BOMitemName].costUSD+=s.costUSD)}),i=i.sort((s,o)=>s.source>o.source?1:o.source>s.source?-1:0),i})}formatBom(){const e=function(a){return a.toLowerCase().includes("amazon")?"[Amazon]("+a+"?tag=maslowcnc01-20)":a};var t=`###### Note: Do not edit this file directly, it is automatically generated from the CAD model 
# Bill Of Materials 
 |Part|Number Needed|Price|Source| 
 |----|----------|-----|-----|`,r=O.topLevelMolecule.compiledBom,i=t,s=0,o=0;return r.length>0&&r.forEach(a=>{s+=a.numberNeeded,o+=a.costUSD,i=i+`
|`+a.BOMitemName+"|"+a.numberNeeded+"|$"+a.costUSD.toFixed(2)+"|"+e(a.source)+"|"}),i=i+`
|Total: |`+s+"|$"+o.toFixed(2)+"| |",i=i+`

 3xCOG MSRP: $`+(3*o).toFixed(2),i}createLevaBom(){let e={};if(this.compiledBom&&this.compiledBom.length>0)return this.compiledBom.map(t=>{e[t.BOMitemName]={value:t.numberNeeded,label:t.BOMitemName+" x",disabled:!0}}),e["Download List of Materials"]=Oa(()=>{var t=O.currentRepoName+"-Bill-of-Materials.txt",r=this.formatBom(),i=new Blob([r],{type:"text/plain"});saveAs(i,t+".txt")}),e}recomputeMolecule(e){console.log("recompute molecule in molecule"+this.name);try{O.cad.molecule(this.uniqueID,e).then(()=>{this.basicThreadValueProcessing(),this.compileBom().then(t=>{this.compiledBom=t}),this.selected&&this.sendToRender()})}catch(t){this.setAlert(t)}}waitOnComingInformation(e){this.nodesOnTheScreen.forEach(t=>{t.name==e&&t.waitOnComingInformation()})}propagate(){try{this.updateValue()}catch(e){this.setAlert(e)}}beginPropagation(e=!1){this.nodesOnTheScreen.forEach(t=>{t.beginPropagation(e)}),this.inputs.forEach(t=>{t.beginPropagation()})}census(){return this.totalAtomCount=0,this.toProcess=0,this.nodesOnTheScreen.forEach(e=>{const t=e.census();this.totalAtomCount=this.totalAtomCount+t[0],this.toProcess=this.toProcess+t[1]}),[this.totalAtomCount,this.toProcess]}changeUnits(e){this.unitsIndex=e}goToParentMolecule(){O.currentMolecule.topLevel||(O.currentMolecule.nodesOnTheScreen.forEach(e=>{e.selected=!1}),O.currentMolecule.awaitingPropagationFlag==!0&&(O.currentMolecule.propagate(),O.currentMolecule.awaitingPropagationFlag=!1),O.currentMolecule=O.currentMolecule.parent)}async generateProjectThumbnail(){return O.cad.generateThumbnail(this.uniqueID)}async requestReadme(){var e=this.nodesOnTheScreen;e=e.filter(i=>i.atomType=="Molecule"||i.atomType=="Readme").sort(function(i,s){return O.distBetweenPoints(i.x,0,i.y,0)-O.distBetweenPoints(s.x,0,s.y,0)});const t=e.map(i=>i.requestReadme());let r=[];return await Promise.all(t).then(i=>{i.forEach(s=>{let o;s instanceof Array?s.forEach(a=>{o=a.readMeText,r.push({uniqueID:a.uniqueID,readMeText:o,svg:a.svg})}):(o=s.readMeText,s.svg&&(o=o.concat(` 

![readme](/readme`+s.uniqueID+`.svg)

`)),r.push({uniqueID:s.uniqueID,readMeText:o,svg:s.svg}))})}),r}serialize(e={x:0,y:0}){var t=[],r=[];this.nodesOnTheScreen.forEach(s=>{t.push(s.serialize()),s.output&&s.output.connectors.forEach(o=>{r.push(o.serialize())})});var i=super.serialize(e);return i.topLevel=this.topLevel,i.allAtoms=t,i.allConnectors=r,i.parentRepo=this.parentRepo,i.unitsKey=this.unitsKey,i.fileTypeVersion=1,i.compiledBom=this.compiledBom,i}deserialize(e,t={},r=!1){let i=[];return this.placeAtom({parentMolecule:this,x:.98,y:.5,parent:this,name:"Output",atomType:"Output",uniqueID:O.generateUniqueID()},!1),this.setValues(e),this.setValues(t),e.allAtoms&&e.allAtoms.forEach(s=>{const o=this.placeAtom(s,!1);i.push(o),this.setValues([])}),Promise.all(i).then(()=>{this.setValues([]),this.topLevel&&(O.totalAtomCount=O.numberOfAtomsToLoad,this.census(),this.beginPropagation(r)),e.allConnectors&&e.allConnectors.forEach(s=>{this.placeConnector(s)})})}async loadGithubMoleculeByName(e,t={},r={}){await new jc().request("GET /repos/{owner}/{repo}/contents/project.abundance",{owner:e.owner,repo:e.repoName}).then(s=>{let o=JSON.parse(atob(s.data.content)),a=this.remapIDs(o);a.atomType="GitHubMolecule";let l={},u=O.generateUniqueID();t.ioValues!=null?l={uniqueID:u,x:this.x,y:this.y,parentRepo:e,topLevel:!1,ioValues:t.ioValues}:l={uniqueID:u,parentRepo:e,x:O.pixelsToWidth(O.lastClick[0]),y:O.pixelsToHeight(O.lastClick[1]),topLevel:!1},O.currentMolecule.placeAtom(a,!0,l).then(()=>{r.forEach(c=>{c.ap1ID==t.uniqueID&&(c.ap1ID=u,this.parent.placeConnector(c)),c.ap2ID==t.uniqueID&&(c.ap2ID=u,this.parent.placeConnector(c))})})})}remapIDs(e){let t={};if(e.allAtoms)return e.allAtoms.forEach(r=>{let i=r.uniqueID,s=O.generateUniqueID();t[i]=s,r.uniqueID=s}),e.allConnectors.forEach(r=>{r.ap1ID&&t[r.ap1ID]&&(r.ap1ID=t[r.ap1ID]),r.ap2ID&&t[r.ap2ID]&&(r.ap2ID=t[r.ap2ID]),r.ap2ID&&t[r.ap2ID]&&(r.ap2ID=t[r.ap2ID])}),e}deleteNode(e=!0,t=!0,r=!1){[...this.nodesOnTheScreen].forEach(s=>{s.deleteNode(e,t,r)}),super.deleteNode(e,t,r)}async placeAtom(e,t,r){try{O.numberOfAtomsToLoad=O.numberOfAtomsToLoad+1;let o=null;for(var i in O.availableTypes)if(O.availableTypes[i].atomType==e.atomType){e.parent=this;var s=new O.availableTypes[i].creator(e);(s.atomType=="Molecule"||s.atomType=="GitHubMolecule")&&(o=s.deserialize(e,r,!0),t&&s.beginPropagation()),s.atomType=="Input"&&typeof e.name<"u"?(s.name=e.name,s.draw()):s.atomType=="Input"&&(s.name=O.incrementVariableName(s.name,this)),s.atomType=="Output"&&this.nodesOnTheScreen.forEach(a=>{a.atomType=="Output"&&a.deleteOutputAtom(!1)}),this.nodesOnTheScreen.push(s),t&&(s.atomType=="Molecule"&&(s.copyInputsFromParent(),o!=null?o.then(()=>{s.beginPropagation()}):s.beginPropagation()),s.updateValue())}return o}catch(o){return console.warn("Unable to place: "+e),console.warn(o),Promise.resolve()}}placeConnector(e){var t=!1,r=!1;this.nodesOnTheScreen.forEach(i=>{i.uniqueID==e.ap1ID&&(t=i.output),i.uniqueID==e.ap2ID&&i.inputs.forEach(s=>{s.name==e.ap2Name&&(r=s)})}),t&&r?new xq({atomType:"Connector",attachmentPoint1:t,attachmentPoint2:r}):console.warn("Unable to place connector")}sendToRender(){O.writeToDisplay(this.uniqueID)}}class mOe extends Bn{constructor(e){super(e),this.name="Genetic Algorithm",this.atomType="Genetic Algorithm",this.description="Defines a new genetic algorithm which will simulate evolution to maximize the fitness function using the input population size and number of generations. Only constants which are upstream of this atom with evolve checked will be changed.",this.constantsToEvolve=[],this.population=[],this.individualIndex=0,this.generation=0,this.topFitness=0,this.evolutionInProcess=!1,this.addIO("input","fitness function",this,"number",0),this.addIO("input","population size",this,"number",50),this.addIO("input","number of generations",this,"number",10),this.setValues(e),this.updateValue()}draw(){super.draw();const e=O.widthToPixels(this.x),t=O.heightToPixels(this.y),r=O.widthToPixels(this.radius);O.c.beginPath(),O.c.arc(O.widthToPixels(this.x-this.radius/5),O.heightToPixels(this.y),O.widthToPixels(this.radius/2),Math.PI*3.4,Math.PI*2.7,!1),O.c.stroke(),O.c.closePath(),O.c.beginPath(),O.c.arc(O.widthToPixels(this.x+this.radius/5),O.heightToPixels(this.y),O.widthToPixels(this.radius/2),Math.PI*3.6,Math.PI*2.3,!0),O.c.stroke(),O.c.closePath(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.moveTo(e-r/3,t),O.c.lineTo(e+r/3,t),O.c.stroke(),O.c.closePath(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.moveTo(e-r/3,t-r/5),O.c.lineTo(e+r/3,t-r/5),O.c.stroke(),O.c.closePath(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.moveTo(e-r/3,t+r/5),O.c.lineTo(e+r/3,t+r/5),O.c.stroke(),O.c.closePath()}updateValue(){this.decreaseToProcessCountByOne(),this.evolutionInProcess&&(this.updateSidebar(),this.processing=!0,this.population[this.individualIndex].fitness=this.findIOValue("fitness function"),this.individualIndex=this.individualIndex+1,this.individualIndex<this.findIOValue("population size")?this.beginEvaluatingIndividual():(this.generation=this.generation+1,this.generation<this.findIOValue("number of generations")?(this.breedAndCullPopulation(),this.individualIndex=0,this.beginEvaluatingIndividual()):(this.evolutionInProcess=!1,this.processing=!1,this.population=this.population.sort((e,t)=>parseFloat(t.fitness)-parseFloat(e.fitness)),this.individualIndex=0,this.generation=0,this.beginEvaluatingIndividual(),this.updateSidebar())))}updateSidebar(){if(this.evolutionInProcess){let o=document.querySelector(".sideBar");for(;o.firstChild;)o.removeChild(o.firstChild);var e=document.createElement("ul");o.appendChild(e),e.setAttribute("class","sidebar-list");var t=document.createElement("LI");e.appendChild(t);var r=document.createElement("div");t.appendChild(r);var i=document.createTextNode("Evolving...   Individual: "+this.individualIndex+",    Generation: "+this.generation+",    Best Fitness Value: "+this.topFitness);r.appendChild(i),r.setAttribute("class","sidebar-subitem label-item")}else{var s=super.updateSidebar();this.createButton(s,this,"Evolve",()=>{this.evolutionInProcess=!0,this.updateConstantsList(),this.initializePopulation(),this.beginEvaluatingIndividual()})}}beginEvaluatingIndividual(){const e=this.population[this.individualIndex];e.genome.forEach(t=>{t.constantAtom.output.waitOnComingInformation()}),e.genome.forEach(t=>{t.constantAtom.output.value=t.newValue}),e.genome.forEach(t=>{t.constantAtom.updateValue()})}getRandomValue(e,t){return Math.random()*(t-e)+e}initializePopulation(){this.population=[],this.individualIndex=0,this.generation=0,this.topFitness=0;for(var e=0;e<this.findIOValue("population size");){var t=[];this.constantsToEvolve.forEach(i=>{var s={newValue:this.getRandomValue(i.min,i.max),constantAtom:i};t.push(s)});var r={genome:t,fitness:null};this.population.push(r),e++}}breedTwo(e,t){const r=e.genome.length;for(var i={fitness:null,genome:[]},s=0;s<r;){var o={newValue:null,constantAtom:e.genome[s].constantAtom};const l=e.genome[s].constantAtom.max,u=e.genome[s].constantAtom.min,c=.1*(l-u)*(Math.random()-.5);var a=null;Math.random()>.5?a=e.genome[s].newValue+c:a=t.genome[s].newValue+c,o.newValue=Math.min(Math.max(a,u),l),i.genome.push(o),s++}return i}breedAndCullPopulation(){this.population=this.population.sort((s,o)=>parseFloat(o.fitness)-parseFloat(s.fitness)),this.topFitness=this.population[0].fitness;const e=Math.round(this.population.length/5),t=this.population.slice(0,e);for(var r=[],i=0;i<this.population.length-e;){const s=Math.round(Math.random()*(t.length-1)),o=Math.round(Math.random()*(t.length-1)),a=this.breedTwo(t[s],t[o]);r.push(a),i=i+1}this.population=t.concat(r)}updateConstantsList(){this.constantsToEvolve=[],this.inputs.forEach(e=>{e.connectors.forEach(t=>{t.walkBackForConstants(r=>{this.addToConstantsList(r)})})})}addToConstantsList(e){this.constantsToEvolve.push(e)}}let gOe=class extends Bn{constructor(e){super(e),this.name,this.description="Adds an input to the parent molecule. If the parent molecule is the top level of the project then the input will be available when the project is shared or imported into another project. Name is editable",this.value=10,this.atomType="Input",this.height,this.oldName=this.name,this.radius=this.radius*1.3,this.addIO("output","number or geometry",this,"number or geometry",10),typeof this.parent<"u"&&this.parent.addIO("input",this.name,this.parent,"number or geometry",10),this.setValues(e)}fittingString(e,t,r){var i=e.measureText(t).width,s="",o=e.measureText(s).width;if(i<=r||i<=o)return t;for(var a=t.length;i>=r-o&&a-- >0;)t=t.substring(0,a),i=e.measureText(t).width;return t+s}draw(){this.x=.04;let e=O.widthToPixels(this.x),t=O.heightToPixels(this.y),r=O.widthToPixels(this.radius);this.height=r,this.name!=this.oldName&&this.updateParentName(),this.processing?O.c.fillStyle="blue":this.selected?(O.c.fillStyle=this.selectedColor,O.c.strokeStyle=this.defaultColor,this.color=this.selectedColor,this.strokeColor=this.defaultColor):(O.c.fillStyle=this.defaultColor,O.c.strokeStyle=this.selectedColor,this.color=this.defaultColor,this.strokeColor=this.selectedColor),this.inputs.forEach(i=>{i.draw()}),this.output&&this.output.draw(),O.c.beginPath(),O.c.moveTo(0,t+this.height/2),O.c.lineTo(55,t+this.height/2),O.c.lineTo(e+r,t),O.c.lineTo(55,t-this.height/2),O.c.lineTo(0,t-this.height/2),O.c.lineWidth=1,O.c.fill(),O.c.closePath(),O.c.stroke(),O.c.font="11px Work Sans",O.c.textAlign="start",O.c.fillStyle="black",O.c.width=20,O.c.textOverflow="ellipsis",O.c.fillText(this.fittingString(O.c,this.name,50),5,t+3)}deleteNode(e=!0,t=!0,r=!1){typeof this.parent<"u"&&this.parent.removeIO("input",this.name,this.parent,r),super.deleteNode(e,t,r)}updateParentName(){this.parent.inputs.forEach(e=>{e.name==this.oldName&&(e.name=this.name)}),this.oldName=this.name}updateValue(){this.parent.inputs.forEach(e=>{e.name==this.name&&(this.decreaseToProcessCountByOne(),this.value=e.getValue(),this.output.waitOnComingInformation(),this.output.setValue(this.value))})}createLevaInputs(){let e={};return e[this.uniqueID]={value:this.name,label:"Input Name",disabled:!1,onChange:t=>{this.name!==t&&(this.name=t)}},e}getOutput(){return this.output.getValue()}};class vOe extends Bn{constructor(e){super(e),this.atomType="Readme",this.readmeText="Readme text here",this.type="readme",this.name="README",this.radius=1/100,this.description="A place to put project notes. These will appear in the GitHub readme and in the description of molecules up the chain. Markdown is supported. ",this.height=10,this.global=!0,this.addIO("input","geometry",this,"geometry",void 0),this.setValues(e)}draw(){super.draw("square");let e=O.widthToPixels(this.radius);this.height=e,O.c.beginPath(),O.c.fillStyle="#484848",O.c.font=`${e*2.5}px Work Sans Bold`,O.c.fillText("",O.widthToPixels(this.x-this.radius/1.5),O.heightToPixels(this.y)+this.height/1.5),O.c.fill(),O.c.closePath()}setValue(e){this.readmeText=e}createLevaInputs(){let e={};return e[this.name+this.uniqueID]={value:this.readmeText,label:this.name,rows:10,onChange:t=>{this.readmeText!==t&&this.setValue(t)}},e}async generateProjectThumbnail(){let e=this.findIOValue("geometry");return e!==void 0?O.cad.generateThumbnail(e):null}async requestReadme(){return this.global?this.generateProjectThumbnail().then(e=>e!==null?{readMeText:this.readmeText,svg:e,uniqueID:this.uniqueID}:{readMeText:this.readmeText,svg:null,uniqueID:this.uniqueID}).catch(e=>{console.log(e)}):[]}sendToRender(){console.log("nothing to render in readme")}deleteNode(){super.deleteNode()}serialize(e){var t=super.serialize(e);return t.readmeText=this.readmeText,t.global=this.global,t}}class yOe extends Bn{constructor(e){super(e),this.atomType="Add BOM Tag",this.type="addBOMTag",this.name="Add BOM Tag",this.description="Adds a Bill Of Materials tag which appears in molecules containing this atom and in the GitHub project bill of materials.",this.BOMitem=new dY,this.radius=1/65,this.height,this.addIO("input","geometry",this,"geometry",null,!1,!0),this.addIO("output","geometry",this,"geometry",null),this.setValues(e)}updateValue(){if(super.updateValue(),this.inputs.every(r=>r.ready)){var e=this.findIOValue("geometry"),t=this.BOMitem;O.cad.bom(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}draw(){super.draw("rect");let e=O.widthToPixels(this.x),t=O.heightToPixels(this.y),r=O.widthToPixels(this.radius);this.height=r/1.3,O.c.beginPath(),O.c.fillStyle="#484848",O.c.font=`${r/1.5}px Work Sans Bold`,O.c.fillText("$$$",e-r/2,t+this.height/3),O.c.fill(),O.c.closePath()}createLevaInputs(){let e={};for(const t in this.BOMitem)e[t]={value:this.BOMitem[t],label:t,disabled:!1,onChange:r=>{this.BOMitem[t]=r,this.updateValue()}};return e}serialize(e){var t=super.serialize(e);return t.BOMitem=Object.assign({},this.BOMitem),t}}class xOe extends Bn{constructor(e){super(e),this.addIO("input","geometry",this,"geometry","",!1,!0),this.addIO("input","x-axis degrees",this,"number",0),this.addIO("input","y-axis degrees",this,"number",0),this.addIO("input","z-axis degrees",this,"number",0),this.addIO("output","geometry",this,"geometry",""),this.name="Rotate",this.atomType="Rotate",this.description="Rotates the input geometry around the X, Y, or Z axis. Inputs are degrees.",this.setValues(e)}draw(){super.draw(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.ellipse(O.widthToPixels(this.x),O.heightToPixels(this.y),O.widthToPixels(this.radius/1.5),O.widthToPixels(this.radius/2.3),Math.PI/4,0,Math.PI*2),O.c.stroke(),O.c.closePath()}createLevaInputs(){let e={};if(this.inputs)return this.inputs.map(t=>{const r=()=>t.connectors.length>0;t.valueType!=="geometry"&&(e[this.uniqueID+t.name]={value:t.value,label:t.name,step:.5,disabled:r(),onChange:i=>{t.value!==i&&(console.log(t.name,i),t.setValue(i))}})}),e}updateValue(){if(super.updateValue(),this.inputs.every(s=>s.ready)){this.processing=!0;var e=this.findIOValue("geometry"),t=this.findIOValue("x-axis degrees"),r=this.findIOValue("y-axis degrees"),i=this.findIOValue("z-axis degrees");O.cad.rotate(e,t,r,i,this.uniqueID).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}}class bOe extends Py{constructor(e){super(e),this.name="Github Molecule",this.atomType="GitHubMolecule",this.topLevel=!1,this.centerColor="black",this.description="Project imported from GitHub",this.gitHubUniqueID,this.setValues(e)}doubleClick(e,t){var r=!1,i=O.distBetweenPoints(e,this.x,t,this.y);return i<this.radius&&(r=!0),r}createLevaInputs(){let e={};if(this.inputs)return this.inputs.map(t=>{const r=()=>t.connectors.length>0;t.valueType!=="geometry"&&(e[this.uniqueID+t.name]={value:t.value,label:t.name,disabled:r(),onChange:i=>{t.value!==i&&t.setValue(i)}})}),e["Reload From Github"]=Oa(()=>this.reloadMoleculeFromGithub()),e}reloadMoleculeFromGithub(){var e=this.serialize(),t=this.parent.serialize().allConnectors;this.deleteNode(!1,!1,!0);let i=this.parentRepo;this.loadGithubMoleculeByName(i,e,t)}}class wOe extends Bn{constructor(e){super(e),typeof this.parent<"u"&&this.parent.addIO("output","Geometry",this.parent,"geometry",this.parent.path),this.type="output",this.name="Output",this.value=null,this.atomType="Output",this.height=16,this.radius=1/75,this.path="",this.description="Connect geometry here to make it available in the next level up. ",this.setValues(e),this.addIO("input","number or geometry",this,"geometry",void 0)}updateValue(){if(super.updateValue(),this.inputs.every(t=>t.ready)){this.decreaseToProcessCountByOne();var e=this.findIOValue("number or geometry");O.cad.output(this.uniqueID,e).then(()=>{this.basicThreadValueProcessing(),this.parent.recomputeMolecule(this.uniqueID)}).catch(this.alertingErrorHandler()),this.parent.propagate()}}sendToRender(){try{O.writeToDisplay(this.uniqueID)}catch(e){this.setAlert(e)}}waitOnComingInformation(){this.parent.output.waitOnComingInformation()}deleteNode(){}deleteOutputAtom(e=!0){super.deleteNode(!1,e)}draw(){const e=O.widthToPixels(this.x),t=O.heightToPixels(this.y),r=O.widthToPixels(this.radius);this.height=r,this.processing?O.c.fillStyle="blue":this.selected?(O.c.fillStyle=this.selectedColor,O.c.strokeStyle=this.defaultColor,this.color=this.selectedColor,this.strokeColor=this.defaultColor):(O.c.fillStyle=this.defaultColor,O.c.strokeStyle=this.selectedColor,this.color=this.defaultColor,this.strokeColor=this.selectedColor),this.inputs.forEach(i=>{i.draw()}),O.c.beginPath(),O.c.font="10px Work Sans",O.c.textAlign="start",O.c.fillText(this.name,e-r,t-r*1.5),O.c.moveTo(e+r-r*2,t-this.height),O.c.lineTo(e+r-5,t),O.c.lineTo(e+r-r*2,t+this.height),O.c.lineTo(e+r-r*2,t-this.height),O.c.fillStyle=this.color,O.c.fill(),O.c.lineWidth=3,O.c.lineJoin="round",O.c.stroke(),O.c.closePath()}}class SOe extends Bn{constructor(e){super(e),this.name="Gcode",this.atomType="Gcode",this.height=16,this.description="Generates Maslow gcode from the input geometry.",this.gcodeString="",this.addIO("input","geometry",this,"geometry",null),this.addIO("input","tool size",this,"number",6.35),this.addIO("input","passes",this,"number",6),this.addIO("input","speed",this,"number",500),this.addIO("input","tabs",this,"string","true"),this.addIO("input","safe height",this,"number",6),this.addIO("output","gcode",this,"geometry",""),this.setValues(e)}draw(){super.draw(),O.c.beginPath(),O.c.fillStyle="#484848",O.c.font=`${O.widthToPixels(this.radius)}px Work Sans Bold`,O.c.fillText("G",O.widthToPixels(this.x-this.radius/3),O.heightToPixels(this.y)+this.height/3),O.c.fill(),O.c.closePath()}updateValue(){super.updateValue();try{var e=this.findIOValue("geometry"),t=this.findIOValue("tool size"),r=this.findIOValue("passes"),i=this.findIOValue("speed"),s=this.findIOValue("tabs"),o=this.findIOValue("safe height");const a={op:"gcode",readPath:e,toolSize:t,passes:r,speed:i,tabs:s,safeHeight:o,writePath:this.path};this.gcodeString=this.basicThreadValueProcessing(a)}catch(a){this.setAlert(a)}}updateSidebar(){const e=super.updateSidebar();this.createButton(e,this,"Download G-Code",()=>{this.downloadGCode()})}downloadGCode(){try{var e=this.findIOValue("geometry"),t=this.findIOValue("tool size"),r=this.findIOValue("passes"),i=this.findIOValue("speed"),s=this.findIOValue("tabs"),o=this.findIOValue("safe height");const a={op:"gcode",readPath:e,toolSize:t,passes:r,speed:i,tabs:s,safeHeight:o,writePath:this.path},{answer:l}=window.ask(a)}catch(a){this.setAlert(a)}}}class _Oe extends Bn{constructor(e){super(e),this.name="Code",this.atomType="Code",this.description="Defines a Replicad code block.",this.code=`//Inputs:[input1, height];

let shape = drawRectangle(5,7)

const newPlane = new Plane().pivot(0, 'Y');

 return { geometry: [shape.sketchOnPlane(newPlane).extrude(7)], tags: [],
      color: '#A3CE5B',
      plane: newPlane}


    /**
    To Use the Code Atom, enter your inputs to the input list a.e Inputs:[shape, height]
    If your input is connected to another atom with a replicad geometry you can access its geometry by looking up its ID in your library. a.e library[Input1].geometry[0] 
    Use any replicad available methods to modify your geometry. Learn more about all of the available methods at 
    https://replicad.xyz/docs/introapp/UserGuide.html 
    Return a replicad object that includes geometry, color, tags and plane. 


    Example Code Atom:

      Inputs:[shape, x];

      let finalShape = library[shape].geometry[0].clone.translate[x,0,0]

      return {geometry: finalShape, color: library[shape].color, plane: library[shape].plane, tags: library[shape].tags }

      - See more examples at _______ 


    */
`,this.addIO("output","geometry",this,"geometry",""),this.setValues(e),this.parseInputs(!1)}draw(){super.draw(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.font=`${O.widthToPixels(this.radius)}px Work Sans Bold`,O.c.fillText("</>",O.widthToPixels(this.x-this.radius/1.5),O.heightToPixels(this.y+this.radius*1.5))}beginPropagation(){this.inputs.length==0&&this.updateValue();var e=!1;this.inputs.forEach(t=>{t.connectors.length>0&&(e=!0)}),e||this.updateValue()}createLevaInputs(){let e={};if(this.inputs)return this.inputs.map(t=>{const r=()=>t.connectors.length>0;e[this.uniqueID+t.name]={value:t.value,label:t.name,disabled:r(),onChange:i=>{t.value!==i&&t.setValue(i)}}}),e["Edit Code"]=Oa(()=>this.editCode()),e["Save Code"]=Oa(()=>this.saveCode()),e["Close Editor"]=Oa(()=>this.closeCode()),e}updateCode(e){this.code=e,this.updateValue(),this.sendToRender()}updateValue(e){if(super.updateValue(),this.parseInputs(),this.inputs.every(i=>i.ready)){var t=[];this.inputs.forEach(i=>{i.connectors.length>0&&i.type=="input"&&t.push(i.getValue())});var r={};this.inputs.forEach(i=>{r[i.name]=i.value}),O.cad.code(this.uniqueID,this.code,r).then(i=>{i===!0?this.basicThreadValueProcessing():this.customThreadValueProcessing(i)}).catch(this.alertingErrorHandler())}}customThreadValueProcessing(e){this.decreaseToProcessCountByOne(),this.clearAlert(),this.output&&(this.value=e,this.output.setValue(e),this.output.ready=!0),this.processing=!1}parseInputs(e=!0){var t=/Inputs:\[\s*([^)]+?)\s*\]/.exec(this.code);if(t){t[1]&&(t=t[1].split(/\s*,\s*/));let s=[];for(var r in t){t[r]=t[r].split(/\s*=\s*/);let o=t[r][0];s.push(o);let a=t[r][1]?t[r][1]:10;this.inputs.some(l=>l.Name===o)||this.addIO("input",o,this,"geometry",a,e)}for(var i in this.inputs)s.includes(this.inputs[i].name)||this.removeIO("input",this.inputs[i].name,this)}}doubleClick(e,t){let r=O.widthToPixels(this.x),i=O.heightToPixels(this.y);var s=!1,o=O.distBetweenPoints(e,r,t,i);return o<this.radius&&(this.editCode(),s=!0),s}editCode(){document.getElementById("code-window").classList.remove("code-off")}saveCode(){document.getElementById("save-code-button").click()}closeCode(){document.getElementById("close-code-button").click()}serialize(e){var t=super.serialize(e);return t.codeVersion=1,t.code=this.code,t}}let EOe=class extends Bn{constructor(e){super(e),this.addIO("output","geometry",this,"geometry",""),this.name="Group",this.atomType="Group",this.ioValues=[],this.removeCutawayGeometry=!0,this.description="Groups shapes together into one. Shapes are allowed to overlap.",this.setValues(e),typeof this.ioValues<"u"&&this.ioValues.forEach(t=>{this.addIO("input",t.name,this,"geometry","")}),this.setValues([])}beginPropagation(){v0(this),super.beginPropagation()}draw(){super.draw();const e=O.widthToPixels(this.x),t=O.heightToPixels(this.y),r=O.widthToPixels(this.radius);O.c.beginPath(),O.c.fillStyle="#949294",O.c.moveTo(e-r/2,t+r/2),O.c.lineTo(e+r/2,t+r/2),O.c.lineTo(e+r/2,t),O.c.lineTo(e-r/2,t),O.c.lineTo(e-r/2,t+r/2),O.c.stroke(),O.c.closePath(),O.c.beginPath(),O.c.lineTo(e+r/4,t-r/2),O.c.lineTo(e-r/4,t-r/2),O.c.lineTo(e-r/4,t),O.c.lineTo(e+r/2,t),O.c.lineTo(e+r/4,t-r/2),O.c.lineWidth=1,O.c.lineJoin="round",O.c.stroke(),O.c.closePath()}updateValue(){if(this.inputs.every(t=>t.ready)){try{var e=[];this.inputs.forEach(r=>{r.connectors.length>0&&r.type=="input"&&e.push(r.getValue())});const t={op:"group",paths:e,writePath:this.path};this.basicThreadValueProcessing(t,"group"),this.clearAlert()}catch(t){this.setAlert(t)}v0(this)}}serialize(e){var t=super.serialize(e),r=[];return this.inputs.forEach(i=>{if(i.connectors.length>0){var s={name:i.name,ioValue:i.getValue()};r.push(s)}}),t.ioValues=r,t}};class MOe extends Bn{constructor(t){super(t);dL(this,"getAFile",async function(){const t=new jc,r=this.fileName;return await t.rest.repos.getContent({owner:O.currentUser,repo:O.currentRepoName,path:r})});this.name="Import",this.atomType="Import",this.description="Import Atom, let's you choose a type of file to import and use in your design.",this.file=null,this.fileName=null,this.type=null,this.sha=null,this.SVGwidth=10,this.addIO("output","geometry",this,"geometry",""),this.setValues(t)}draw(){super.draw(),O.c.beginPath(),O.c.fillStyle="#484848",O.c.font=`${O.widthToPixels(this.radius)}px Work Sans Bold`,O.c.fillText("G",O.widthToPixels(this.x-this.radius/3),O.heightToPixels(this.y)+this.height/3),O.c.fill(),O.c.closePath()}updateValue(){super.updateValue(),this.processing=!0;try{this.fileName!=null&&this.getAFile().then(t=>{this.sha=t.data.sha,this.file=this.newBlobFromBase64(t);let r=this.file,i=this.type,s=i=="STL"?O.cad.importingSTL:i=="SVG"?O.cad.importingSVG:i=="STEP"?O.cad.importingSTEP:null;if(s==null)throw"Invalid file type";s(this.uniqueID,r,this.SVGwidth).then(o=>{this.basicThreadValueProcessing(),this.sendToRender()})})}catch{this.alertingErrorHandler()}}newBlobFromBase64(t){let r=t.data.content,i=atob(r);if(this.type=="SVG")return i;let s=[];for(let o=0;o<i.length;o++)s.push(i.charCodeAt(o));return new Blob([new Uint8Array(s)],{type:"application/octet-stream"})}beginPropagation(){this.fileName!=null&&this.updateValue()}createLevaInputs(){let t={};if(this.fileName==null){const r=["STL","SVG","STEP"];let i=0;t[this.uniqueID+"file_ops"]={options:r,label:"File Type",onChange:s=>{i=r.indexOf(s)}},t["Load File"]=Oa(()=>this.loadFile(r[i]))}else this.type=="SVG"&&(t.Width={value:this.SVGwidth,label:"Width",onChange:r=>{this.SVGwidth=r,this.updateValue()}}),t["Loaded File"]={value:this.fileName,label:"Loaded File",disabled:!0};return t}loadFile(t){var r=document.getElementById("fileLoaderInput");r.accept="."+t.toLowerCase(),r.click(),this.type=t}deleteNode(){super.deleteNode();var t=document.getElementById("fileDeleteInput");t.value=this.fileName,t.click()}updateFile(t,r){this.fileName=t.name,this.sha=r,this.updateValue()}serialize(t={x:0,y:0}){var r=super.serialize(t);return r.fileName=this.fileName,r.name=this.name,r.type=this.type,r.SVGwidth=this.SVGwidth,r}}var hY={exports:{}};(function(n,e){(function(t,r){r()})(go,function(){function t(u,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function r(u,c,f){var d=new XMLHttpRequest;d.open("GET",u),d.responseType="blob",d.onload=function(){l(d.response,c,f)},d.onerror=function(){console.error("could not download file")},d.send()}function i(u){var c=new XMLHttpRequest;c.open("HEAD",u,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function s(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(c)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof go=="object"&&go.global===go?go:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(u,c,f){var d=o.URL||o.webkitURL,h=document.createElement("a");c=c||u.name||"download",h.download=c,h.rel="noopener",typeof u=="string"?(h.href=u,h.origin===location.origin?s(h):i(h.href)?r(u,c,f):s(h,h.target="_blank")):(h.href=d.createObjectURL(u),setTimeout(function(){d.revokeObjectURL(h.href)},4e4),setTimeout(function(){s(h)},0))}:"msSaveOrOpenBlob"in navigator?function(u,c,f){if(c=c||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(t(u,f),c);else if(i(u))r(u,c,f);else{var d=document.createElement("a");d.href=u,d.target="_blank",setTimeout(function(){s(d)})}}:function(u,c,f,d){if(d=d||open("","_blank"),d&&(d.document.title=d.document.body.innerText="downloading..."),typeof u=="string")return r(u,c,f);var h=u.type==="application/octet-stream",m=/constructor/i.test(o.HTMLElement)||o.safari,v=/CriOS\/[\d]+/.test(navigator.userAgent);if((v||h&&m||a)&&typeof FileReader<"u"){var y=new FileReader;y.onloadend=function(){var b=y.result;b=v?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),d?d.location.href=b:location=b,d=null},y.readAsDataURL(u)}else{var p=o.URL||o.webkitURL,S=p.createObjectURL(u);d?d.location=S:location.href=S,d=null,setTimeout(function(){p.revokeObjectURL(S)},4e4)}});o.saveAs=l.saveAs=l,n.exports=l})})(hY);var pY=hY.exports;class COe extends Bn{constructor(e){super(e),this.name="Export",this.atomType="Export",this.description="Export Atom, let's you choose a type of file to Export.",this.value=null,this.type=null,this.resolution=72,this.addIO("input","geometry",this,"geometry",""),this.addIO("input","Resolution (dpi)",this,"number",72),this.addIO("input","Part Name",this,"string","Part Name"),this.addIO("input","File Type",this,"string","SVG"),this.setValues(e),this.fileName=null,this.importIndex=0}draw(){super.draw(),O.c.beginPath(),O.c.fillStyle="#484848",O.c.font=`${O.widthToPixels(this.radius)}px Work Sans Bold`,O.c.fillText("G",O.widthToPixels(this.x-this.radius/3),O.heightToPixels(this.y)+this.height/3),O.c.fill(),O.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(e=>e.ready)){this.processing=!0;let e=this.findIOValue("geometry"),t=this.findIOValue("File Type");O.cad.visExport(this.uniqueID,e,t).then(r=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}createLevaInputs(){let e={};const t=["STL","SVG","STEP"];return this.inputs&&this.inputs.map(r=>{const i=()=>r.connectors.length>0;r.name=="File Type"&&(e[this.uniqueID+"file_ops"]={value:r.value,options:t,disabled:i(),label:"File Type",onChange:s=>{r.value!==s&&r.setValue(s)}}),r.name=="Resolution (dpi)"&&(e[this.uniqueID+r.name]={value:r.value,label:r.name,disabled:this.findIOValue("File Type")!="SVG",onChange:s=>{r.value!==s&&r.setValue(s)}}),r.name=="Part Name"&&(e[this.uniqueID+r.name]={value:r.value,label:r.name,disabled:i(),onChange:s=>{r.value!==s&&r.setValue(s)}})}),e["Download File"]=Oa(()=>this.exportFile()),e}exportFile(){let e=this.findIOValue("File Type"),t=this.findIOValue("Resolution (dpi)"),r=this.findIOValue("Part Name");console.log(this),O.cad.downExport(this.uniqueID,e,t,O.topLevelMolecule.unitsKey).then(i=>{pY.saveAs(i,r+"."+e.toLowerCase())}).catch(this.alertingErrorHandler())}serialize(e={x:0,y:0}){var t=super.serialize(e);return t.type=this.type,t.resolution=this.resolution,t.importIndex=this.importIndex,t.fileName=this.fileName,t}}const AOe={ROBOTO:"https://fonts.gstatic.com/s/roboto/v15/W5F8_SL0XFawnjxHGsZjJA.ttf",NOTOSANS:"http://fonts.gstatic.com/s/notosansdisplay/v20/RLplK4fy6r6tOBEJg0IAKzqdFZVZxokvfn_BDLxR.ttf",ANONYMOUSPRO:"http://fonts.gstatic.com/s/anonymouspro/v14/rP2Bp2a15UIB7Un-bOeISG3pLlw89CH98Ko.ttf",MONSERRAT:"http://fonts.gstatic.com/s/montserrat/v15/JTURjIg1_i6t8kCHKm45_dJE3gnD-w.ttf"};let TOe=class extends Bn{constructor(e){super(e),this.name="Text",this.atomType="Text",this.description="Creates a new text sketch.",this.fontFamily="ROBOTO",this.addIO("input","Font Size",this,"number",10),this.addIO("input","Text",this,"string","Lorem Ipsum"),this.addIO("output","geometry",this,"geometry",""),this.setValues(e)}beginPropagation(e=!1){this.inputs.forEach(t=>{t.beginPropagation()})}draw(){super.draw(),O.c.beginPath(),O.c.fillStyle="#484848",O.c.font=`${O.widthToPixels(this.radius)}px Work Sans Bold`,O.c.fillText("T",O.widthToPixels(this.x-this.radius/3),O.heightToPixels(this.y)+this.height/3),O.c.fill(),O.c.closePath()}createLevaInputs(){let e={};this.inputs&&this.inputs.map(r=>{const i=()=>r.connectors.length>0;r.valueType!=="geometry"&&(e[this.uniqueID+r.name]={value:r.value,label:r.name,step:.25,disabled:i(),onChange:s=>{r.value!==s&&r.setValue(s)}})});const t=AOe;return e["Font Family"]={options:Object.keys(t),label:"Font Family",onChange:r=>{this.fontFamily=r,this.updateValue()}},e}updateValue(){super.updateValue();var e=this.findIOValue("Font Size"),t=this.findIOValue("Text");let r=this.fontFamily;O.cad.text(this.uniqueID,t,e,r).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}serialize(e={x:0,y:0}){var t=super.serialize(e),r=[];return this.inputs.forEach(i=>{if(i.connectors.length>0){var s={name:i.name,ioValue:i.getValue()};r.push(s)}}),t.ioValues=r,t.fontFamily=this.fontFamily,t}};class DOe extends Bn{constructor(e){super(e),this.type="box",this.name="Box",this.value=null,this.atomType="Box",this.height=16,this.radius=1/75,this.endX,this.endY,this.startX,this.startY,this.setValues(e)}draw(){const e=O.widthToPixels(this.x),t=O.heightToPixels(this.y);O.c.beginPath(),O.c.fillStyle="#80808080",O.c.rect(e,t,this.endX-e,this.endY-t),O.c.fill(),O.c.closePath()}mouseMove(e,t){this.endX=e,this.endY=t}clickUp(e,t){const r=O.widthToPixels(this.x),i=O.heightToPixels(this.y);this.startX=r,this.startY=i,this.deleteNode(!1,!1),this.parent.nodesOnTheScreen.forEach(s=>{s.selectBox(this.startX,this.startY,e,t)})}}class NOe{constructor(){this.canvas=null,this.c=null,this.availableTypes={box:{creator:DOe,atomType:"Box"},intersection:{creator:cOe,atomType:"Intersection",atomCategory:"Interactions"},difference:{creator:fOe,atomType:"Difference",atomCategory:"Interactions"},union:{creator:t2e,atomType:"Join",atomCategory:"Interactions"},group:{creator:EOe,atomType:"Group",atomCategory:"None"},loft:{creator:sOe,atomType:"Loft",atomCategory:"Interactions"},shrinkWrap:{creator:rOe,atomType:"ShrinkWrap",atomCategory:"Interactions"},readme:{creator:vOe,atomType:"Readme",atomCategory:"Tags"},addBOMTag:{creator:yOe,atomType:"Add-BOM-Tag",atomCategory:"Tags"},color:{creator:r2e,atomType:"Color",atomCategory:"Actions"},tag:{creator:aOe,atomType:"Tag",atomCategory:"Tags"},extracttag:{creator:pOe,atomType:"ExtractTag",atomCategory:"Tags"},cutLayout:{creator:nOe,atomType:"CutLayout",atomCategory:"Tags"},regularPolygon:{creator:lOe,atomType:"RegularPolygon",atomCategory:"Shapes"},costant:{creator:dOe,atomType:"Constant",atomCategory:"Inputs"},circle:{creator:n2e,atomType:"Circle",atomCategory:"Shapes"},text:{creator:TOe,atomType:"Text",atomCategory:"Shapes"},rectangle:{creator:iOe,atomType:"Rectangle",atomCategory:"Shapes"},molecule:{creator:Py,atomType:"Molecule",atomCategory:"Shapes"},input:{creator:gOe,atomType:"Input",atomCategory:"Inputs"},equation:{creator:hOe,atomType:"Equation",atomCategory:"Inputs"},code:{creator:_Oe,atomType:"Code",atomCategory:"Inputs"},rotate:{creator:xOe,atomType:"Rotate",atomCategory:"Actions"},extrude:{creator:uOe,atomType:"Extrude",atomCategory:"Actions"},move:{creator:oOe,atomType:"Move",atomCategory:"Actions"},GeneticAlgorithm:{creator:mOe,atomType:"GeneticAlgorithm",atomCategory:"Actions"},gcode:{creator:SOe,atomType:"Gcode",atomCategory:"ImportExport"},import:{creator:MOe,atomType:"Import",atomCategory:"ImportExport"},export:{creator:COe,atomType:"Export",atomCategory:"ImportExport"},githubmolecule:{creator:bOe,atomType:"GitHubMolecule",atomCategory:"ImportExport"},output:{creator:wOe,atomType:"Output"}},this.currentMolecule,this.currentUser,this.currentRepoName,this.currentRepo,this.loadedRepo,this.topLevelMolecule,this.touchInterface=!1,this.cad=null,this.totalAtomCount=0,this.numberOfAtomsToLoad=0,this.fork=!1,this.ctrlDown=!1,this.atomsSelected=[],this.circleSegmentSize=2,this.displayProcessing=!1,this.cancelLastDisplayWorker=function(){},this.displayGrid=!0,this.displayAxis=!0,this.displayTriangles=!0,this.displayShortcuts=!1,this.displayEdges=!0,this.recentMoleculeRepresentation=[];const e=yq(XMe);this.limitedEvaluate=e.evaluate,this.lastClick,e.import({import:function(){throw new Error("Function import is disabled")},createUnit:function(){throw new Error("Function createUnit is disabled")},evaluate:function(){throw new Error("Function evaluate is disabled")},parse:function(){throw new Error("Function parse is disabled")},simplify:function(){throw new Error("Function simplify is disabled")},derivative:function(){throw new Error("Function derivative is disabled")}},{override:!0})}constrainToCanvasBorders(e,t){return[Math.max(0,Math.min(1,e)),Math.max(0,Math.min(1,t))]}constrainToCanvasBordersPixels(e,t){return[Math.max(0,Math.min(this.canvas.current.width,e)),Math.max(0,Math.min(this.canvas.current.height,t))]}widthToPixels(e){return this.canvas.current.width*e}pixelsToWidth(e){return 1/(this.canvas.current.width/e)}heightToPixels(e){return this.canvas.current.height*e}pixelsToHeight(e){return 1/(this.canvas.current.height/e)}toBinaryStr(e){const r=new TextEncoder().encode(e);return String.fromCharCode(...r)}writeToDisplay(e,t=!1){console.log("Write to display not set")}generateUniqueID(){const e=new Date().getTime(),t=Math.floor(Math.random()*1e3);return e+t}incrementVariableName(e,t){if(t.inputs.find(r=>r.name===e)){let r=e.match(/\d+(?=\D*$)/);const i=parseInt(r[0])+1,s=e.replace(new RegExp(r[0]+"(?=D*$)"),i);return this.incrementVariableName(s,t)}else return e}distBetweenPoints(e,t,r,i){var s=Math.pow(e-t,2),o=Math.pow(r-i,2),a=Math.sqrt(s+o);return a}}const O=new NOe,AU={CC0:`Creative Commons Legal Code

CC0 1.0 Universal

    CREATIVE COMMONS CORPORATION IS NOT A LAW FIRM AND DOES NOT PROVIDE
    LEGAL SERVICES. DISTRIBUTION OF THIS DOCUMENT DOES NOT CREATE AN
    ATTORNEY-CLIENT RELATIONSHIP. CREATIVE COMMONS PROVIDES THIS
    INFORMATION ON AN "AS-IS" BASIS. CREATIVE COMMONS MAKES NO WARRANTIES
    REGARDING THE USE OF THIS DOCUMENT OR THE INFORMATION OR WORKS
    PROVIDED HEREUNDER, AND DISCLAIMS LIABILITY FOR DAMAGES RESULTING FROM
    THE USE OF THIS DOCUMENT OR THE INFORMATION OR WORKS PROVIDED
    HEREUNDER.

Statement of Purpose

The laws of most jurisdictions throughout the world automatically confer
exclusive Copyright and Related Rights (defined below) upon the creator
and subsequent owner(s) (each and all, an "owner") of an original work of
authorship and/or a database (each, a "Work").

Certain owners wish to permanently relinquish those rights to a Work for
the purpose of contributing to a commons of creative, cultural and
scientific works ("Commons") that the public can reliably and without fear
of later claims of infringement build upon, modify, incorporate in other
works, reuse and redistribute as freely as possible in any form whatsoever
and for any purposes, including without limitation commercial purposes.
These owners may contribute to the Commons to promote the ideal of a free
culture and the further production of creative, cultural and scientific
works, or to gain reputation or greater distribution for their Work in
part through the use and efforts of others.

For these and/or other purposes and motivations, and without any
expectation of additional consideration or compensation, the person
associating CC0 with a Work (the "Affirmer"), to the extent that he or she
is an owner of Copyright and Related Rights in the Work, voluntarily
elects to apply CC0 to the Work and publicly distribute the Work under its
terms, with knowledge of his or her Copyright and Related Rights in the
Work and the meaning and intended legal effect of CC0 on those rights.

1. Copyright and Related Rights. A Work made available under CC0 may be
protected by copyright and related or neighboring rights ("Copyright and
Related Rights"). Copyright and Related Rights include, but are not
limited to, the following:

  i. the right to reproduce, adapt, distribute, perform, display,
     communicate, and translate a Work;
 ii. moral rights retained by the original author(s) and/or performer(s);
iii. publicity and privacy rights pertaining to a person's image or
     likeness depicted in a Work;
 iv. rights protecting against unfair competition in regards to a Work,
     subject to the limitations in paragraph 4(a), below;
  v. rights protecting the extraction, dissemination, use and reuse of data
     in a Work;
 vi. database rights (such as those arising under Directive 96/9/EC of the
     European Parliament and of the Council of 11 March 1996 on the legal
     protection of databases, and under any national implementation
     thereof, including any amended or successor version of such
     directive); and
vii. other similar, equivalent or corresponding rights throughout the
     world based on applicable law or treaty, and any national
     implementations thereof.

2. Waiver. To the greatest extent permitted by, but not in contravention
of, applicable law, Affirmer hereby overtly, fully, permanently,
irrevocably and unconditionally waives, abandons, and surrenders all of
Affirmer's Copyright and Related Rights and associated claims and causes
of action, whether now known or unknown (including existing as well as
future claims and causes of action), in the Work (i) in all territories
worldwide, (ii) for the maximum duration provided by applicable law or
treaty (including future time extensions), (iii) in any current or future
medium and for any number of copies, and (iv) for any purpose whatsoever,
including without limitation commercial, advertising or promotional
purposes (the "Waiver"). Affirmer makes the Waiver for the benefit of each
member of the public at large and to the detriment of Affirmer's heirs and
successors, fully intending that such Waiver shall not be subject to
revocation, rescission, cancellation, termination, or any other legal or
equitable action to disrupt the quiet enjoyment of the Work by the public
as contemplated by Affirmer's express Statement of Purpose.

3. Public License Fallback. Should any part of the Waiver for any reason
be judged legally invalid or ineffective under applicable law, then the
Waiver shall be preserved to the maximum extent permitted taking into
account Affirmer's express Statement of Purpose. In addition, to the
extent the Waiver is so judged Affirmer hereby grants to each affected
person a royalty-free, non transferable, non sublicensable, non exclusive,
irrevocable and unconditional license to exercise Affirmer's Copyright and
Related Rights in the Work (i) in all territories worldwide, (ii) for the
maximum duration provided by applicable law or treaty (including future
time extensions), (iii) in any current or future medium and for any number
of copies, and (iv) for any purpose whatsoever, including without
limitation commercial, advertising or promotional purposes (the
"License"). The License shall be deemed effective as of the date CC0 was
applied by Affirmer to the Work. Should any part of the License for any
reason be judged legally invalid or ineffective under applicable law, such
partial invalidity or ineffectiveness shall not invalidate the remainder
of the License, and in such case Affirmer hereby affirms that he or she
will not (i) exercise any of his or her remaining Copyright and Related
Rights in the Work or (ii) assert any associated claims and causes of
action with respect to the Work, in either case contrary to Affirmer's
express Statement of Purpose.

4. Limitations and Disclaimers.

 a. No trademark or patent rights held by Affirmer are waived, abandoned,
    surrendered, licensed or otherwise affected by this document.
 b. Affirmer offers the Work as-is and makes no representations or
    warranties of any kind concerning the Work, express, implied,
    statutory or otherwise, including without limitation warranties of
    title, merchantability, fitness for a particular purpose, non
    infringement, or the absence of latent or other defects, accuracy, or
    the present or absence of errors, whether or not discoverable, all to
    the greatest extent permissible under applicable law.
 c. Affirmer disclaims responsibility for clearing rights of other persons
    that may apply to the Work or any use thereof, including without
    limitation any person's Copyright and Related Rights in the Work.
    Further, Affirmer disclaims responsibility for obtaining any necessary
    consents, permissions or other rights required for any use of the
    Work.
 d. Affirmer understands and acknowledges that Creative Commons is not a
    party to this document and has no duty or obligation with respect to
    this CC0 or use of the Work.`,"CC-BY":`Attribution 4.0 International

=======================================================================

Creative Commons Corporation ("Creative Commons") is not a law firm and
does not provide legal services or legal advice. Distribution of
Creative Commons public licenses does not create a lawyer-client or
other relationship. Creative Commons makes its licenses and related
information available on an "as-is" basis. Creative Commons gives no
warranties regarding its licenses, any material licensed under their
terms and conditions, or any related information. Creative Commons
disclaims all liability for damages resulting from their use to the
fullest extent possible.

Using Creative Commons Public Licenses

Creative Commons public licenses provide a standard set of terms and
conditions that creators and other rights holders may use to share
original works of authorship and other material subject to copyright
and certain other rights specified in the public license below. The
following considerations are for informational purposes only, are not
exhaustive, and do not form part of our licenses.

     Considerations for licensors: Our public licenses are
     intended for use by those authorized to give the public
     permission to use material in ways otherwise restricted by
     copyright and certain other rights. Our licenses are
     irrevocable. Licensors should read and understand the terms
     and conditions of the license they choose before applying it.
     Licensors should also secure all rights necessary before
     applying our licenses so that the public can reuse the
     material as expected. Licensors should clearly mark any
     material not subject to the license. This includes other CC-
     licensed material, or material used under an exception or
     limitation to copyright. More considerations for licensors:
	wiki.creativecommons.org/Considerations_for_licensors

     Considerations for the public: By using one of our public
     licenses, a licensor grants the public permission to use the
     licensed material under specified terms and conditions. If
     the licensor's permission is not necessary for any reason--for
     example, because of any applicable exception or limitation to
     copyright--then that use is not regulated by the license. Our
     licenses grant only permissions under copyright and certain
     other rights that a licensor has authority to grant. Use of
     the licensed material may still be restricted for other
     reasons, including because others have copyright or other
     rights in the material. A licensor may make special requests,
     such as asking that all changes be marked or described.
     Although not required by our licenses, you are encouraged to
     respect those requests where reasonable. More_considerations
     for the public:
	wiki.creativecommons.org/Considerations_for_licensees

=======================================================================

Creative Commons Attribution 4.0 International Public License

By exercising the Licensed Rights (defined below), You accept and agree
to be bound by the terms and conditions of this Creative Commons
Attribution 4.0 International Public License ("Public License"). To the
extent this Public License may be interpreted as a contract, You are
granted the Licensed Rights in consideration of Your acceptance of
these terms and conditions, and the Licensor grants You such rights in
consideration of benefits the Licensor receives from making the
Licensed Material available under these terms and conditions.


Section 1 -- Definitions.

  a. Adapted Material means material subject to Copyright and Similar
     Rights that is derived from or based upon the Licensed Material
     and in which the Licensed Material is translated, altered,
     arranged, transformed, or otherwise modified in a manner requiring
     permission under the Copyright and Similar Rights held by the
     Licensor. For purposes of this Public License, where the Licensed
     Material is a musical work, performance, or sound recording,
     Adapted Material is always produced where the Licensed Material is
     synched in timed relation with a moving image.

  b. Adapter's License means the license You apply to Your Copyright
     and Similar Rights in Your contributions to Adapted Material in
     accordance with the terms and conditions of this Public License.

  c. Copyright and Similar Rights means copyright and/or similar rights
     closely related to copyright including, without limitation,
     performance, broadcast, sound recording, and Sui Generis Database
     Rights, without regard to how the rights are labeled or
     categorized. For purposes of this Public License, the rights
     specified in Section 2(b)(1)-(2) are not Copyright and Similar
     Rights.

  d. Effective Technological Measures means those measures that, in the
     absence of proper authority, may not be circumvented under laws
     fulfilling obligations under Article 11 of the WIPO Copyright
     Treaty adopted on December 20, 1996, and/or similar international
     agreements.

  e. Exceptions and Limitations means fair use, fair dealing, and/or
     any other exception or limitation to Copyright and Similar Rights
     that applies to Your use of the Licensed Material.

  f. Licensed Material means the artistic or literary work, database,
     or other material to which the Licensor applied this Public
     License.

  g. Licensed Rights means the rights granted to You subject to the
     terms and conditions of this Public License, which are limited to
     all Copyright and Similar Rights that apply to Your use of the
     Licensed Material and that the Licensor has authority to license.

  h. Licensor means the individual(s) or entity(ies) granting rights
     under this Public License.

  i. Share means to provide material to the public by any means or
     process that requires permission under the Licensed Rights, such
     as reproduction, public display, public performance, distribution,
     dissemination, communication, or importation, and to make material
     available to the public including in ways that members of the
     public may access the material from a place and at a time
     individually chosen by them.

  j. Sui Generis Database Rights means rights other than copyright
     resulting from Directive 96/9/EC of the European Parliament and of
     the Council of 11 March 1996 on the legal protection of databases,
     as amended and/or succeeded, as well as other essentially
     equivalent rights anywhere in the world.

  k. You means the individual or entity exercising the Licensed Rights
     under this Public License. Your has a corresponding meaning.


Section 2 -- Scope.

  a. License grant.

       1. Subject to the terms and conditions of this Public License,
          the Licensor hereby grants You a worldwide, royalty-free,
          non-sublicensable, non-exclusive, irrevocable license to
          exercise the Licensed Rights in the Licensed Material to:

            a. reproduce and Share the Licensed Material, in whole or
               in part; and

            b. produce, reproduce, and Share Adapted Material.

       2. Exceptions and Limitations. For the avoidance of doubt, where
          Exceptions and Limitations apply to Your use, this Public
          License does not apply, and You do not need to comply with
          its terms and conditions.

       3. Term. The term of this Public License is specified in Section
          6(a).

       4. Media and formats; technical modifications allowed. The
          Licensor authorizes You to exercise the Licensed Rights in
          all media and formats whether now known or hereafter created,
          and to make technical modifications necessary to do so. The
          Licensor waives and/or agrees not to assert any right or
          authority to forbid You from making technical modifications
          necessary to exercise the Licensed Rights, including
          technical modifications necessary to circumvent Effective
          Technological Measures. For purposes of this Public License,
          simply making modifications authorized by this Section 2(a)
          (4) never produces Adapted Material.

       5. Downstream recipients.

            a. Offer from the Licensor -- Licensed Material. Every
               recipient of the Licensed Material automatically
               receives an offer from the Licensor to exercise the
               Licensed Rights under the terms and conditions of this
               Public License.

            b. No downstream restrictions. You may not offer or impose
               any additional or different terms or conditions on, or
               apply any Effective Technological Measures to, the
               Licensed Material if doing so restricts exercise of the
               Licensed Rights by any recipient of the Licensed
               Material.

       6. No endorsement. Nothing in this Public License constitutes or
          may be construed as permission to assert or imply that You
          are, or that Your use of the Licensed Material is, connected
          with, or sponsored, endorsed, or granted official status by,
          the Licensor or others designated to receive attribution as
          provided in Section 3(a)(1)(A)(i).

  b. Other rights.

       1. Moral rights, such as the right of integrity, are not
          licensed under this Public License, nor are publicity,
          privacy, and/or other similar personality rights; however, to
          the extent possible, the Licensor waives and/or agrees not to
          assert any such rights held by the Licensor to the limited
          extent necessary to allow You to exercise the Licensed
          Rights, but not otherwise.

       2. Patent and trademark rights are not licensed under this
          Public License.

       3. To the extent possible, the Licensor waives any right to
          collect royalties from You for the exercise of the Licensed
          Rights, whether directly or through a collecting society
          under any voluntary or waivable statutory or compulsory
          licensing scheme. In all other cases the Licensor expressly
          reserves any right to collect such royalties.


Section 3 -- License Conditions.

Your exercise of the Licensed Rights is expressly made subject to the
following conditions.

  a. Attribution.

       1. If You Share the Licensed Material (including in modified
          form), You must:

            a. retain the following if it is supplied by the Licensor
               with the Licensed Material:

                 i. identification of the creator(s) of the Licensed
                    Material and any others designated to receive
                    attribution, in any reasonable manner requested by
                    the Licensor (including by pseudonym if
                    designated);

                ii. a copyright notice;

               iii. a notice that refers to this Public License;

                iv. a notice that refers to the disclaimer of
                    warranties;

                 v. a URI or hyperlink to the Licensed Material to the
                    extent reasonably practicable;

            b. indicate if You modified the Licensed Material and
               retain an indication of any previous modifications; and

            c. indicate the Licensed Material is licensed under this
               Public License, and include the text of, or the URI or
               hyperlink to, this Public License.

       2. You may satisfy the conditions in Section 3(a)(1) in any
          reasonable manner based on the medium, means, and context in
          which You Share the Licensed Material. For example, it may be
          reasonable to satisfy the conditions by providing a URI or
          hyperlink to a resource that includes the required
          information.

       3. If requested by the Licensor, You must remove any of the
          information required by Section 3(a)(1)(A) to the extent
          reasonably practicable.

       4. If You Share Adapted Material You produce, the Adapter's
          License You apply must not prevent recipients of the Adapted
          Material from complying with this Public License.


Section 4 -- Sui Generis Database Rights.

Where the Licensed Rights include Sui Generis Database Rights that
apply to Your use of the Licensed Material:

  a. for the avoidance of doubt, Section 2(a)(1) grants You the right
     to extract, reuse, reproduce, and Share all or a substantial
     portion of the contents of the database;

  b. if You include all or a substantial portion of the database
     contents in a database in which You have Sui Generis Database
     Rights, then the database in which You have Sui Generis Database
     Rights (but not its individual contents) is Adapted Material; and

  c. You must comply with the conditions in Section 3(a) if You Share
     all or a substantial portion of the contents of the database.

For the avoidance of doubt, this Section 4 supplements and does not
replace Your obligations under this Public License where the Licensed
Rights include other Copyright and Similar Rights.


Section 5 -- Disclaimer of Warranties and Limitation of Liability.

  a. UNLESS OTHERWISE SEPARATELY UNDERTAKEN BY THE LICENSOR, TO THE
     EXTENT POSSIBLE, THE LICENSOR OFFERS THE LICENSED MATERIAL AS-IS
     AND AS-AVAILABLE, AND MAKES NO REPRESENTATIONS OR WARRANTIES OF
     ANY KIND CONCERNING THE LICENSED MATERIAL, WHETHER EXPRESS,
     IMPLIED, STATUTORY, OR OTHER. THIS INCLUDES, WITHOUT LIMITATION,
     WARRANTIES OF TITLE, MERCHANTABILITY, FITNESS FOR A PARTICULAR
     PURPOSE, NON-INFRINGEMENT, ABSENCE OF LATENT OR OTHER DEFECTS,
     ACCURACY, OR THE PRESENCE OR ABSENCE OF ERRORS, WHETHER OR NOT
     KNOWN OR DISCOVERABLE. WHERE DISCLAIMERS OF WARRANTIES ARE NOT
     ALLOWED IN FULL OR IN PART, THIS DISCLAIMER MAY NOT APPLY TO YOU.

  b. TO THE EXTENT POSSIBLE, IN NO EVENT WILL THE LICENSOR BE LIABLE
     TO YOU ON ANY LEGAL THEORY (INCLUDING, WITHOUT LIMITATION,
     NEGLIGENCE) OR OTHERWISE FOR ANY DIRECT, SPECIAL, INDIRECT,
     INCIDENTAL, CONSEQUENTIAL, PUNITIVE, EXEMPLARY, OR OTHER LOSSES,
     COSTS, EXPENSES, OR DAMAGES ARISING OUT OF THIS PUBLIC LICENSE OR
     USE OF THE LICENSED MATERIAL, EVEN IF THE LICENSOR HAS BEEN
     ADVISED OF THE POSSIBILITY OF SUCH LOSSES, COSTS, EXPENSES, OR
     DAMAGES. WHERE A LIMITATION OF LIABILITY IS NOT ALLOWED IN FULL OR
     IN PART, THIS LIMITATION MAY NOT APPLY TO YOU.

  c. The disclaimer of warranties and limitation of liability provided
     above shall be interpreted in a manner that, to the extent
     possible, most closely approximates an absolute disclaimer and
     waiver of all liability.


Section 6 -- Term and Termination.

  a. This Public License applies for the term of the Copyright and
     Similar Rights licensed here. However, if You fail to comply with
     this Public License, then Your rights under this Public License
     terminate automatically.

  b. Where Your right to use the Licensed Material has terminated under
     Section 6(a), it reinstates:

       1. automatically as of the date the violation is cured, provided
          it is cured within 30 days of Your discovery of the
          violation; or

       2. upon express reinstatement by the Licensor.

     For the avoidance of doubt, this Section 6(b) does not affect any
     right the Licensor may have to seek remedies for Your violations
     of this Public License.

  c. For the avoidance of doubt, the Licensor may also offer the
     Licensed Material under separate terms or conditions or stop
     distributing the Licensed Material at any time; however, doing so
     will not terminate this Public License.

  d. Sections 1, 5, 6, 7, and 8 survive termination of this Public
     License.


Section 7 -- Other Terms and Conditions.

  a. The Licensor shall not be bound by any additional or different
     terms or conditions communicated by You unless expressly agreed.

  b. Any arrangements, understandings, or agreements regarding the
     Licensed Material not stated herein are separate from and
     independent of the terms and conditions of this Public License.


Section 8 -- Interpretation.

  a. For the avoidance of doubt, this Public License does not, and
     shall not be interpreted to, reduce, limit, restrict, or impose
     conditions on any use of the Licensed Material that could lawfully
     be made without permission under this Public License.

  b. To the extent possible, if any provision of this Public License is
     deemed unenforceable, it shall be automatically reformed to the
     minimum extent necessary to make it enforceable. If the provision
     cannot be reformed, it shall be severed from this Public License
     without affecting the enforceability of the remaining terms and
     conditions.

  c. No term or condition of this Public License will be waived and no
     failure to comply consented to unless expressly agreed to by the
     Licensor.

  d. Nothing in this Public License constitutes or may be interpreted
     as a limitation upon, or waiver of, any privileges and immunities
     that apply to the Licensor or You, including from the legal
     processes of any jurisdiction or authority.


=======================================================================

Creative Commons is not a party to its public
licenses. Notwithstanding, Creative Commons may elect to apply one of
its public licenses to material it publishes and in those instances
will be considered the Licensor. The text of the Creative Commons
public licenses is dedicated to the public domain under the CC0 Public
Domain Dedication. Except for the limited purpose of indicating that
material is shared under a Creative Commons public license or as
otherwise permitted by the Creative Commons policies published at
creativecommons.org/policies, Creative Commons does not authorize the
use of the trademark "Creative Commons" or any other trademark or logo
of Creative Commons without its prior written consent including,
without limitation, in connection with any unauthorized modifications
to any of its public licenses or any other arrangements,
understandings, or agreements concerning use of licensed material. For
the avoidance of doubt, this paragraph does not form part of the
public licenses.

Creative Commons may be contacted at creativecommons.org.`};function TU(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Vt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?TU(Object(t),!0).forEach(function(r){mr(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):TU(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function POe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function DU(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,QG(r.key),r)}}function ROe(n,e,t){return e&&DU(n.prototype,e),t&&DU(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function nD(n,e){return nD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},nD(n,e)}function OOe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&nD(n,e)}function f_(n){return f_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f_(n)}function mY(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mY=function(){return!!n})()}function kOe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function IOe(n,e){if(e&&(Pd(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kOe(n)}function LOe(n){var e=mY();return function(){var t,r=f_(n);if(e){var i=f_(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return IOe(this,t)}}function rD(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function FOe(n){if(Array.isArray(n))return rD(n)}function BOe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function gY(n,e){if(n){if(typeof n=="string")return rD(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?rD(n,e):void 0}}function zOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wp(n){return FOe(n)||BOe(n)||gY(n)||zOe()}function UOe(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function $Oe(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var VOe=function(){function n(t){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag($Oe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=UOe(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},n}(),Ji="-ms-",d_="-moz-",On="-webkit-",vY="comm",ZR="rule",JR="decl",HOe="@import",yY="@keyframes",WOe="@layer",jOe=Math.abs,PE=String.fromCharCode,GOe=Object.assign;function qOe(n,e){return Ni(n,0)^45?(((e<<2^Ni(n,0))<<2^Ni(n,1))<<2^Ni(n,2))<<2^Ni(n,3):0}function xY(n){return n.trim()}function XOe(n,e){return(n=e.exec(n))?n[0]:n}function kn(n,e,t){return n.replace(e,t)}function iD(n,e){return n.indexOf(e)}function Ni(n,e){return n.charCodeAt(e)|0}function _0(n,e,t){return n.slice(e,t)}function fl(n){return n.length}function QR(n){return n.length}function Ux(n,e){return e.push(n),n}function YOe(n,e){return n.map(e).join("")}var RE=1,mm=1,bY=0,eo=0,qr=0,Xm="";function OE(n,e,t,r,i,s,o){return{value:n,root:e,parent:t,type:r,props:i,children:s,line:RE,column:mm,length:o,return:""}}function Lg(n,e){return GOe(OE("",null,null,"",null,null,0),n,{length:-n.length},e)}function KOe(){return qr}function ZOe(){return qr=eo>0?Ni(Xm,--eo):0,mm--,qr===10&&(mm=1,RE--),qr}function Mo(){return qr=eo<bY?Ni(Xm,eo++):0,mm++,qr===10&&(mm=1,RE++),qr}function Cl(){return Ni(Xm,eo)}function Pw(){return eo}function Ry(n,e){return _0(Xm,n,e)}function E0(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function wY(n){return RE=mm=1,bY=fl(Xm=n),eo=0,[]}function SY(n){return Xm="",n}function Rw(n){return xY(Ry(eo-1,sD(n===91?n+2:n===40?n+1:n)))}function JOe(n){for(;(qr=Cl())&&qr<33;)Mo();return E0(n)>2||E0(qr)>3?"":" "}function QOe(n,e){for(;--e&&Mo()&&!(qr<48||qr>102||qr>57&&qr<65||qr>70&&qr<97););return Ry(n,Pw()+(e<6&&Cl()==32&&Mo()==32))}function sD(n){for(;Mo();)switch(qr){case n:return eo;case 34:case 39:n!==34&&n!==39&&sD(qr);break;case 40:n===41&&sD(n);break;case 92:Mo();break}return eo}function eke(n,e){for(;Mo()&&n+qr!==57;)if(n+qr===84&&Cl()===47)break;return"/*"+Ry(e,eo-1)+"*"+PE(n===47?n:Mo())}function tke(n){for(;!E0(Cl());)Mo();return Ry(n,eo)}function nke(n){return SY(Ow("",null,null,null,[""],n=wY(n),0,[0],n))}function Ow(n,e,t,r,i,s,o,a,l){for(var u=0,c=0,f=o,d=0,h=0,m=0,v=1,y=1,p=1,S=0,b="",g=i,w=s,x=r,M=b;y;)switch(m=S,S=Mo()){case 40:if(m!=108&&Ni(M,f-1)==58){iD(M+=kn(Rw(S),"&","&\f"),"&\f")!=-1&&(p=-1);break}case 34:case 39:case 91:M+=Rw(S);break;case 9:case 10:case 13:case 32:M+=JOe(m);break;case 92:M+=QOe(Pw()-1,7);continue;case 47:switch(Cl()){case 42:case 47:Ux(rke(eke(Mo(),Pw()),e,t),l);break;default:M+="/"}break;case 123*v:a[u++]=fl(M)*p;case 125*v:case 59:case 0:switch(S){case 0:case 125:y=0;case 59+c:p==-1&&(M=kn(M,/\f/g,"")),h>0&&fl(M)-f&&Ux(h>32?PU(M+";",r,t,f-1):PU(kn(M," ","")+";",r,t,f-2),l);break;case 59:M+=";";default:if(Ux(x=NU(M,e,t,u,c,i,a,b,g=[],w=[],f),s),S===123)if(c===0)Ow(M,e,x,x,g,s,f,a,w);else switch(d===99&&Ni(M,3)===110?100:d){case 100:case 108:case 109:case 115:Ow(n,x,x,r&&Ux(NU(n,x,x,0,0,i,a,b,i,g=[],f),w),i,w,f,a,r?g:w);break;default:Ow(M,x,x,x,[""],w,0,a,w)}}u=c=h=0,v=p=1,b=M="",f=o;break;case 58:f=1+fl(M),h=m;default:if(v<1){if(S==123)--v;else if(S==125&&v++==0&&ZOe()==125)continue}switch(M+=PE(S),S*v){case 38:p=c>0?1:(M+="\f",-1);break;case 44:a[u++]=(fl(M)-1)*p,p=1;break;case 64:Cl()===45&&(M+=Rw(Mo())),d=Cl(),c=f=fl(b=M+=tke(Pw())),S++;break;case 45:m===45&&fl(M)==2&&(v=0)}}return s}function NU(n,e,t,r,i,s,o,a,l,u,c){for(var f=i-1,d=i===0?s:[""],h=QR(d),m=0,v=0,y=0;m<r;++m)for(var p=0,S=_0(n,f+1,f=jOe(v=o[m])),b=n;p<h;++p)(b=xY(v>0?d[p]+" "+S:kn(S,/&\f/g,d[p])))&&(l[y++]=b);return OE(n,e,t,i===0?ZR:a,l,u,c)}function rke(n,e,t){return OE(n,e,t,vY,PE(KOe()),_0(n,2,-2),0)}function PU(n,e,t,r){return OE(n,e,t,JR,_0(n,0,r),_0(n,r+1,-1),r)}function jp(n,e){for(var t="",r=QR(n),i=0;i<r;i++)t+=e(n[i],i,n,e)||"";return t}function ike(n,e,t,r){switch(n.type){case WOe:if(n.children.length)break;case HOe:case JR:return n.return=n.return||n.value;case vY:return"";case yY:return n.return=n.value+"{"+jp(n.children,r)+"}";case ZR:n.value=n.props.join(",")}return fl(t=jp(n.children,r))?n.return=n.value+"{"+t+"}":""}function ske(n){var e=QR(n);return function(t,r,i,s){for(var o="",a=0;a<e;a++)o+=n[a](t,r,i,s)||"";return o}}function oke(n){return function(e){e.root||(e=e.return)&&n(e)}}function ake(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var lke=function(e,t,r){for(var i=0,s=0;i=s,s=Cl(),i===38&&s===12&&(t[r]=1),!E0(s);)Mo();return Ry(e,eo)},uke=function(e,t){var r=-1,i=44;do switch(E0(i)){case 0:i===38&&Cl()===12&&(t[r]=1),e[r]+=lke(eo-1,t,r);break;case 2:e[r]+=Rw(i);break;case 4:if(i===44){e[++r]=Cl()===58?"&\f":"",t[r]=e[r].length;break}default:e[r]+=PE(i)}while(i=Mo());return e},cke=function(e,t){return SY(uke(wY(e),t))},RU=new WeakMap,fke=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!RU.get(r))&&!i){RU.set(e,!0);for(var s=[],o=cke(t,s),a=r.props,l=0,u=0;l<o.length;l++)for(var c=0;c<a.length;c++,u++)e.props[u]=s[l]?o[l].replace(/&\f/g,a[c]):a[c]+" "+o[l]}}},dke=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function _Y(n,e){switch(qOe(n,e)){case 5103:return On+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return On+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return On+n+d_+n+Ji+n+n;case 6828:case 4268:return On+n+Ji+n+n;case 6165:return On+n+Ji+"flex-"+n+n;case 5187:return On+n+kn(n,/(\w+).+(:[^]+)/,On+"box-$1$2"+Ji+"flex-$1$2")+n;case 5443:return On+n+Ji+"flex-item-"+kn(n,/flex-|-self/,"")+n;case 4675:return On+n+Ji+"flex-line-pack"+kn(n,/align-content|flex-|-self/,"")+n;case 5548:return On+n+Ji+kn(n,"shrink","negative")+n;case 5292:return On+n+Ji+kn(n,"basis","preferred-size")+n;case 6060:return On+"box-"+kn(n,"-grow","")+On+n+Ji+kn(n,"grow","positive")+n;case 4554:return On+kn(n,/([^-])(transform)/g,"$1"+On+"$2")+n;case 6187:return kn(kn(kn(n,/(zoom-|grab)/,On+"$1"),/(image-set)/,On+"$1"),n,"")+n;case 5495:case 3959:return kn(n,/(image-set\([^]*)/,On+"$1$`$1");case 4968:return kn(kn(n,/(.+:)(flex-)?(.*)/,On+"box-pack:$3"+Ji+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+On+n+n;case 4095:case 3583:case 4068:case 2532:return kn(n,/(.+)-inline(.+)/,On+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(fl(n)-1-e>6)switch(Ni(n,e+1)){case 109:if(Ni(n,e+4)!==45)break;case 102:return kn(n,/(.+:)(.+)-([^]+)/,"$1"+On+"$2-$3$1"+d_+(Ni(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~iD(n,"stretch")?_Y(kn(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(Ni(n,e+1)!==115)break;case 6444:switch(Ni(n,fl(n)-3-(~iD(n,"!important")&&10))){case 107:return kn(n,":",":"+On)+n;case 101:return kn(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+On+(Ni(n,14)===45?"inline-":"")+"box$3$1"+On+"$2$3$1"+Ji+"$2box$3")+n}break;case 5936:switch(Ni(n,e+11)){case 114:return On+n+Ji+kn(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return On+n+Ji+kn(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return On+n+Ji+kn(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return On+n+Ji+n+n}return n}var hke=function(e,t,r,i){if(e.length>-1&&!e.return)switch(e.type){case JR:e.return=_Y(e.value,e.length);break;case yY:return jp([Lg(e,{value:kn(e.value,"@","@"+On)})],i);case ZR:if(e.length)return YOe(e.props,function(s){switch(XOe(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return jp([Lg(e,{props:[kn(s,/:(read-\w+)/,":"+d_+"$1")]})],i);case"::placeholder":return jp([Lg(e,{props:[kn(s,/:(plac\w+)/,":"+On+"input-$1")]}),Lg(e,{props:[kn(s,/:(plac\w+)/,":"+d_+"$1")]}),Lg(e,{props:[kn(s,/:(plac\w+)/,Ji+"input-$1")]})],i)}return""})}},pke=[hke],mke=function(e){var t=e.key;if(t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(v){var y=v.getAttribute("data-emotion");y.indexOf(" ")!==-1&&(document.head.appendChild(v),v.setAttribute("data-s",""))})}var i=e.stylisPlugins||pke,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(v){for(var y=v.getAttribute("data-emotion").split(" "),p=1;p<y.length;p++)s[y[p]]=!0;a.push(v)});var l,u=[fke,dke];{var c,f=[ike,oke(function(v){c.insert(v)})],d=ske(u.concat(i,f)),h=function(y){return jp(nke(y),d)};l=function(y,p,S,b){c=S,h(y?y+"{"+p.styles+"}":p.styles),b&&(m.inserted[p.name]=!0)}}var m={key:t,sheet:new VOe({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return m.sheet.hydrate(a),m},EY={exports:{}},qn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wi=typeof Symbol=="function"&&Symbol.for,eO=wi?Symbol.for("react.element"):60103,tO=wi?Symbol.for("react.portal"):60106,kE=wi?Symbol.for("react.fragment"):60107,IE=wi?Symbol.for("react.strict_mode"):60108,LE=wi?Symbol.for("react.profiler"):60114,FE=wi?Symbol.for("react.provider"):60109,BE=wi?Symbol.for("react.context"):60110,nO=wi?Symbol.for("react.async_mode"):60111,zE=wi?Symbol.for("react.concurrent_mode"):60111,UE=wi?Symbol.for("react.forward_ref"):60112,$E=wi?Symbol.for("react.suspense"):60113,gke=wi?Symbol.for("react.suspense_list"):60120,VE=wi?Symbol.for("react.memo"):60115,HE=wi?Symbol.for("react.lazy"):60116,vke=wi?Symbol.for("react.block"):60121,yke=wi?Symbol.for("react.fundamental"):60117,xke=wi?Symbol.for("react.responder"):60118,bke=wi?Symbol.for("react.scope"):60119;function Oo(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case eO:switch(n=n.type,n){case nO:case zE:case kE:case LE:case IE:case $E:return n;default:switch(n=n&&n.$$typeof,n){case BE:case UE:case HE:case VE:case FE:return n;default:return e}}case tO:return e}}}function MY(n){return Oo(n)===zE}qn.AsyncMode=nO;qn.ConcurrentMode=zE;qn.ContextConsumer=BE;qn.ContextProvider=FE;qn.Element=eO;qn.ForwardRef=UE;qn.Fragment=kE;qn.Lazy=HE;qn.Memo=VE;qn.Portal=tO;qn.Profiler=LE;qn.StrictMode=IE;qn.Suspense=$E;qn.isAsyncMode=function(n){return MY(n)||Oo(n)===nO};qn.isConcurrentMode=MY;qn.isContextConsumer=function(n){return Oo(n)===BE};qn.isContextProvider=function(n){return Oo(n)===FE};qn.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===eO};qn.isForwardRef=function(n){return Oo(n)===UE};qn.isFragment=function(n){return Oo(n)===kE};qn.isLazy=function(n){return Oo(n)===HE};qn.isMemo=function(n){return Oo(n)===VE};qn.isPortal=function(n){return Oo(n)===tO};qn.isProfiler=function(n){return Oo(n)===LE};qn.isStrictMode=function(n){return Oo(n)===IE};qn.isSuspense=function(n){return Oo(n)===$E};qn.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===kE||n===zE||n===LE||n===IE||n===$E||n===gke||typeof n=="object"&&n!==null&&(n.$$typeof===HE||n.$$typeof===VE||n.$$typeof===FE||n.$$typeof===BE||n.$$typeof===UE||n.$$typeof===yke||n.$$typeof===xke||n.$$typeof===bke||n.$$typeof===vke)};qn.typeOf=Oo;EY.exports=qn;var wke=EY.exports,CY=wke,Ske={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},_ke={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},AY={};AY[CY.ForwardRef]=Ske;AY[CY.Memo]=_ke;var Eke=!0;function Mke(n,e,t){var r="";return t.split(" ").forEach(function(i){n[i]!==void 0?e.push(n[i]+";"):r+=i+" "}),r}var TY=function(e,t,r){var i=e.key+"-"+t.name;(r===!1||Eke===!1)&&e.registered[i]===void 0&&(e.registered[i]=t.styles)},Cke=function(e,t,r){TY(e,t,r);var i=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var s=t;do e.insert(t===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function Ake(n){for(var e=0,t,r=0,i=n.length;i>=4;++r,i-=4)t=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(n.charCodeAt(r+2)&255)<<16;case 2:e^=(n.charCodeAt(r+1)&255)<<8;case 1:e^=n.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Tke={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Dke=/[A-Z]|^ms/g,Nke=/_EMO_([^_]+?)_([^]*?)_EMO_/g,DY=function(e){return e.charCodeAt(1)===45},OU=function(e){return e!=null&&typeof e!="boolean"},OC=ake(function(n){return DY(n)?n:n.replace(Dke,"-$&").toLowerCase()}),kU=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(Nke,function(r,i,s){return dl={name:i,styles:s,next:dl},i})}return Tke[e]!==1&&!DY(e)&&typeof t=="number"&&t!==0?t+"px":t};function M0(n,e,t){if(t==null)return"";if(t.__emotion_styles!==void 0)return t;switch(typeof t){case"boolean":return"";case"object":{if(t.anim===1)return dl={name:t.name,styles:t.styles,next:dl},t.name;if(t.styles!==void 0){var r=t.next;if(r!==void 0)for(;r!==void 0;)dl={name:r.name,styles:r.styles,next:dl},r=r.next;var i=t.styles+";";return i}return Pke(n,e,t)}case"function":{if(n!==void 0){var s=dl,o=t(n);return dl=s,M0(n,e,o)}break}}return t}function Pke(n,e,t){var r="";if(Array.isArray(t))for(var i=0;i<t.length;i++)r+=M0(n,e,t[i])+";";else for(var s in t){var o=t[s];if(typeof o!="object")OU(o)&&(r+=OC(s)+":"+kU(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&e==null)for(var a=0;a<o.length;a++)OU(o[a])&&(r+=OC(s)+":"+kU(s,o[a])+";");else{var l=M0(n,e,o);switch(s){case"animation":case"animationName":{r+=OC(s)+":"+l+";";break}default:r+=s+"{"+l+"}"}}}return r}var IU=/label:\s*([^\s;\n{]+)\s*(;|$)/g,dl,NY=function(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,s="";dl=void 0;var o=e[0];o==null||o.raw===void 0?(i=!1,s+=M0(r,t,o)):s+=o[0];for(var a=1;a<e.length;a++)s+=M0(r,t,e[a]),i&&(s+=o[a]);IU.lastIndex=0;for(var l="",u;(u=IU.exec(s))!==null;)l+="-"+u[1];var c=Ake(s)+l;return{name:c,styles:s,next:dl}},Rke=function(e){return e()},Oke=Qw.useInsertionEffect?Qw.useInsertionEffect:!1,kke=Oke||Rke,rO={}.hasOwnProperty,PY=k.createContext(typeof HTMLElement<"u"?mke({key:"css"}):null);PY.Provider;var Ike=function(e){return k.forwardRef(function(t,r){var i=k.useContext(PY);return e(t,i,r)})},Lke=k.createContext({}),oD="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Fke=function(e,t){var r={};for(var i in t)rO.call(t,i)&&(r[i]=t[i]);return r[oD]=e,r},Bke=function(e){var t=e.cache,r=e.serialized,i=e.isStringTag;return TY(t,r,i),kke(function(){return Cke(t,r,i)}),null},zke=Ike(function(n,e,t){var r=n.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var i=n[oD],s=[r],o="";typeof n.className=="string"?o=Mke(e.registered,s,n.className):n.className!=null&&(o=n.className+" ");var a=NY(s,void 0,k.useContext(Lke));o+=e.key+"-"+a.name;var l={};for(var u in n)rO.call(n,u)&&u!=="css"&&u!==oD&&(l[u]=n[u]);return l.ref=t,l.className=o,k.createElement(k.Fragment,null,k.createElement(Bke,{cache:e,serialized:a,isStringTag:typeof i=="string"}),k.createElement(i,l))}),Uke=zke,Wt=function(e,t){var r=arguments;if(t==null||!rO.call(t,"css"))return k.createElement.apply(void 0,r);var i=r.length,s=new Array(i);s[0]=Uke,s[1]=Fke(e,t);for(var o=2;o<i;o++)s[o]=r[o];return k.createElement.apply(null,s)};function iO(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return NY(e)}var $ke=function(){var e=iO.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function Vke(n){if(Array.isArray(n))return n}function Hke(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function Wke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xu(n,e){return Vke(n)||Hke(n,e)||gY(n,e)||Wke()}function RY(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Bl(n,e){if(n==null)return{};var t,r,i=RY(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function jke(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}var aD=k.useLayoutEffect,Gke=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],h_=function(){};function qke(n,e){return e?e[0]==="-"?n+e:n+"__"+e:n}function Xke(n,e){for(var t=arguments.length,r=new Array(t>2?t-2:0),i=2;i<t;i++)r[i-2]=arguments[i];var s=[].concat(r);if(e&&n)for(var o in e)e.hasOwnProperty(o)&&e[o]&&s.push("".concat(qke(n,o)));return s.filter(function(a){return a}).map(function(a){return String(a).trim()}).join(" ")}var p_=function(e){return rIe(e)?e.filter(Boolean):Pd(e)==="object"&&e!==null?[e]:[]},OY=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var t=Bl(e,Gke);return Vt({},t)},Or=function(e,t,r){var i=e.cx,s=e.getStyles,o=e.getClassNames,a=e.className;return{css:s(t,e),className:i(r??{},o(t,e),a)}};function WE(n){return[document.documentElement,document.body,window].indexOf(n)>-1}function Yke(n){return WE(n)?window.innerHeight:n.clientHeight}function kY(n){return WE(n)?window.pageYOffset:n.scrollTop}function m_(n,e){if(WE(n)){window.scrollTo(0,e);return}n.scrollTop=e}function Kke(n){var e=getComputedStyle(n),t=e.position==="absolute",r=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var i=n;i=i.parentElement;)if(e=getComputedStyle(i),!(t&&e.position==="static")&&r.test(e.overflow+e.overflowY+e.overflowX))return i;return document.documentElement}function Zke(n,e,t,r){return t*((n=n/r-1)*n*n+1)+e}function $x(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:h_,i=kY(n),s=e-i,o=10,a=0;function l(){a+=o;var u=Zke(a,i,s,t);m_(n,u),a<t?window.requestAnimationFrame(l):r(n)}l()}function LU(n,e){var t=n.getBoundingClientRect(),r=e.getBoundingClientRect(),i=e.offsetHeight/3;r.bottom+i>t.bottom?m_(n,Math.min(e.offsetTop+e.clientHeight-n.offsetHeight+i,n.scrollHeight)):r.top-i<t.top&&m_(n,Math.max(e.offsetTop-i,0))}function Jke(n){var e=n.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function FU(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function Qke(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var IY=!1,eIe={get passive(){return IY=!0}},Vx=typeof window<"u"?window:{};Vx.addEventListener&&Vx.removeEventListener&&(Vx.addEventListener("p",h_,eIe),Vx.removeEventListener("p",h_,!1));var tIe=IY;function nIe(n){return n!=null}function rIe(n){return Array.isArray(n)}function pv(n,e,t){return n?e:t}var iIe=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var s=Object.entries(e).filter(function(o){var a=xu(o,1),l=a[0];return!r.includes(l)});return s.reduce(function(o,a){var l=xu(a,2),u=l[0],c=l[1];return o[u]=c,o},{})},sIe=["children","innerProps"],oIe=["children","innerProps"];function aIe(n){var e=n.maxHeight,t=n.menuEl,r=n.minHeight,i=n.placement,s=n.shouldScroll,o=n.isFixedPosition,a=n.controlHeight,l=Kke(t),u={placement:"bottom",maxHeight:e};if(!t||!t.offsetParent)return u;var c=l.getBoundingClientRect(),f=c.height,d=t.getBoundingClientRect(),h=d.bottom,m=d.height,v=d.top,y=t.offsetParent.getBoundingClientRect(),p=y.top,S=o?window.innerHeight:Yke(l),b=kY(l),g=parseInt(getComputedStyle(t).marginBottom,10),w=parseInt(getComputedStyle(t).marginTop,10),x=p-w,M=S-v,A=x+b,N=f-b-v,C=h-S+b+g,T=b+v-w,R=160;switch(i){case"auto":case"bottom":if(M>=m)return{placement:"bottom",maxHeight:e};if(N>=m&&!o)return s&&$x(l,C,R),{placement:"bottom",maxHeight:e};if(!o&&N>=r||o&&M>=r){s&&$x(l,C,R);var $=o?M-g:N-g;return{placement:"bottom",maxHeight:$}}if(i==="auto"||o){var B=e,z=o?x:A;return z>=r&&(B=Math.min(z-g-a,e)),{placement:"top",maxHeight:B}}if(i==="bottom")return s&&m_(l,C),{placement:"bottom",maxHeight:e};break;case"top":if(x>=m)return{placement:"top",maxHeight:e};if(A>=m&&!o)return s&&$x(l,T,R),{placement:"top",maxHeight:e};if(!o&&A>=r||o&&x>=r){var D=e;return(!o&&A>=r||o&&x>=r)&&(D=o?x-w:A-w),s&&$x(l,T,R),{placement:"top",maxHeight:D}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return u}function lIe(n){var e={bottom:"top",top:"bottom"};return n?e[n]:"bottom"}var LY=function(e){return e==="auto"?"bottom":e},uIe=function(e,t){var r,i=e.placement,s=e.theme,o=s.borderRadius,a=s.spacing,l=s.colors;return Vt((r={label:"menu"},mr(r,lIe(i),"100%"),mr(r,"position","absolute"),mr(r,"width","100%"),mr(r,"zIndex",1),r),t?{}:{backgroundColor:l.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:a.menuGutter,marginTop:a.menuGutter})},FY=k.createContext(null),cIe=function(e){var t=e.children,r=e.minMenuHeight,i=e.maxMenuHeight,s=e.menuPlacement,o=e.menuPosition,a=e.menuShouldScrollIntoView,l=e.theme,u=k.useContext(FY)||{},c=u.setPortalPlacement,f=k.useRef(null),d=k.useState(i),h=xu(d,2),m=h[0],v=h[1],y=k.useState(null),p=xu(y,2),S=p[0],b=p[1],g=l.spacing.controlHeight;return aD(function(){var w=f.current;if(w){var x=o==="fixed",M=a&&!x,A=aIe({maxHeight:i,menuEl:w,minHeight:r,placement:s,shouldScroll:M,isFixedPosition:x,controlHeight:g});v(A.maxHeight),b(A.placement),c==null||c(A.placement)}},[i,s,o,a,r,c,g]),t({ref:f,placerProps:Vt(Vt({},e),{},{placement:S||LY(s),maxHeight:m})})},fIe=function(e){var t=e.children,r=e.innerRef,i=e.innerProps;return Wt("div",at({},Or(e,"menu",{menu:!0}),{ref:r},i),t)},dIe=fIe,hIe=function(e,t){var r=e.maxHeight,i=e.theme.spacing.baseUnit;return Vt({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:i,paddingTop:i})},pIe=function(e){var t=e.children,r=e.innerProps,i=e.innerRef,s=e.isMulti;return Wt("div",at({},Or(e,"menuList",{"menu-list":!0,"menu-list--is-multi":s}),{ref:i},r),t)},BY=function(e,t){var r=e.theme,i=r.spacing.baseUnit,s=r.colors;return Vt({textAlign:"center"},t?{}:{color:s.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},mIe=BY,gIe=BY,vIe=function(e){var t=e.children,r=t===void 0?"No options":t,i=e.innerProps,s=Bl(e,sIe);return Wt("div",at({},Or(Vt(Vt({},s),{},{children:r,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),r)},yIe=function(e){var t=e.children,r=t===void 0?"Loading...":t,i=e.innerProps,s=Bl(e,oIe);return Wt("div",at({},Or(Vt(Vt({},s),{},{children:r,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),r)},xIe=function(e){var t=e.rect,r=e.offset,i=e.position;return{left:t.left,position:i,top:r,width:t.width,zIndex:1}},bIe=function(e){var t=e.appendTo,r=e.children,i=e.controlElement,s=e.innerProps,o=e.menuPlacement,a=e.menuPosition,l=k.useRef(null),u=k.useRef(null),c=k.useState(LY(o)),f=xu(c,2),d=f[0],h=f[1],m=k.useMemo(function(){return{setPortalPlacement:h}},[]),v=k.useState(null),y=xu(v,2),p=y[0],S=y[1],b=k.useCallback(function(){if(i){var M=Jke(i),A=a==="fixed"?0:window.pageYOffset,N=M[d]+A;(N!==(p==null?void 0:p.offset)||M.left!==(p==null?void 0:p.rect.left)||M.width!==(p==null?void 0:p.rect.width))&&S({offset:N,rect:M})}},[i,a,d,p==null?void 0:p.offset,p==null?void 0:p.rect.left,p==null?void 0:p.rect.width]);aD(function(){b()},[b]);var g=k.useCallback(function(){typeof u.current=="function"&&(u.current(),u.current=null),i&&l.current&&(u.current=jq(i,l.current,b,{elementResize:"ResizeObserver"in window}))},[i,b]);aD(function(){g()},[g]);var w=k.useCallback(function(M){l.current=M,g()},[g]);if(!t&&a!=="fixed"||!p)return null;var x=Wt("div",at({ref:w},Or(Vt(Vt({},e),{},{offset:p.offset,position:a,rect:p.rect}),"menuPortal",{"menu-portal":!0}),s),r);return Wt(FY.Provider,{value:m},t?Nm.createPortal(x,t):x)},wIe=function(e){var t=e.isDisabled,r=e.isRtl;return{label:"container",direction:r?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},SIe=function(e){var t=e.children,r=e.innerProps,i=e.isDisabled,s=e.isRtl;return Wt("div",at({},Or(e,"container",{"--is-disabled":i,"--is-rtl":s}),r),t)},_Ie=function(e,t){var r=e.theme.spacing,i=e.isMulti,s=e.hasValue,o=e.selectProps.controlShouldRenderValue;return Vt({alignItems:"center",display:i&&s&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(r.baseUnit*2,"px")})},EIe=function(e){var t=e.children,r=e.innerProps,i=e.isMulti,s=e.hasValue;return Wt("div",at({},Or(e,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":s}),r),t)},MIe=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},CIe=function(e){var t=e.children,r=e.innerProps;return Wt("div",at({},Or(e,"indicatorsContainer",{indicators:!0}),r),t)},BU,AIe=["size"],TIe=["innerProps","isRtl","size"],DIe={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},zY=function(e){var t=e.size,r=Bl(e,AIe);return Wt("svg",at({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:DIe},r))},sO=function(e){return Wt(zY,at({size:20},e),Wt("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},UY=function(e){return Wt(zY,at({size:20},e),Wt("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},$Y=function(e,t){var r=e.isFocused,i=e.theme,s=i.spacing.baseUnit,o=i.colors;return Vt({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?o.neutral60:o.neutral20,padding:s*2,":hover":{color:r?o.neutral80:o.neutral40}})},NIe=$Y,PIe=function(e){var t=e.children,r=e.innerProps;return Wt("div",at({},Or(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||Wt(UY,null))},RIe=$Y,OIe=function(e){var t=e.children,r=e.innerProps;return Wt("div",at({},Or(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||Wt(sO,null))},kIe=function(e,t){var r=e.isDisabled,i=e.theme,s=i.spacing.baseUnit,o=i.colors;return Vt({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?o.neutral10:o.neutral20,marginBottom:s*2,marginTop:s*2})},IIe=function(e){var t=e.innerProps;return Wt("span",at({},t,Or(e,"indicatorSeparator",{"indicator-separator":!0})))},LIe=$ke(BU||(BU=jke([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),FIe=function(e,t){var r=e.isFocused,i=e.size,s=e.theme,o=s.colors,a=s.spacing.baseUnit;return Vt({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?o.neutral60:o.neutral20,padding:a*2})},kC=function(e){var t=e.delay,r=e.offset;return Wt("span",{css:iO({animation:"".concat(LIe," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},BIe=function(e){var t=e.innerProps,r=e.isRtl,i=e.size,s=i===void 0?4:i,o=Bl(e,TIe);return Wt("div",at({},Or(Vt(Vt({},o),{},{innerProps:t,isRtl:r,size:s}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),Wt(kC,{delay:0,offset:r}),Wt(kC,{delay:160,offset:!0}),Wt(kC,{delay:320,offset:!r}))},zIe=function(e,t){var r=e.isDisabled,i=e.isFocused,s=e.theme,o=s.colors,a=s.borderRadius,l=s.spacing;return Vt({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:l.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?o.neutral5:o.neutral0,borderColor:r?o.neutral10:i?o.primary:o.neutral20,borderRadius:a,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:i?o.primary:o.neutral30}})},UIe=function(e){var t=e.children,r=e.isDisabled,i=e.isFocused,s=e.innerRef,o=e.innerProps,a=e.menuIsOpen;return Wt("div",at({ref:s},Or(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":i,"control--menu-is-open":a}),o,{"aria-disabled":r||void 0}),t)},$Ie=UIe,VIe=["data"],HIe=function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:r.baseUnit*2,paddingTop:r.baseUnit*2}},WIe=function(e){var t=e.children,r=e.cx,i=e.getStyles,s=e.getClassNames,o=e.Heading,a=e.headingProps,l=e.innerProps,u=e.label,c=e.theme,f=e.selectProps;return Wt("div",at({},Or(e,"group",{group:!0}),l),Wt(o,at({},a,{selectProps:f,theme:c,getStyles:i,getClassNames:s,cx:r}),u),Wt("div",null,t))},jIe=function(e,t){var r=e.theme,i=r.colors,s=r.spacing;return Vt({label:"group",cursor:"default",display:"block"},t?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:s.baseUnit*3,paddingRight:s.baseUnit*3,textTransform:"uppercase"})},GIe=function(e){var t=OY(e);t.data;var r=Bl(t,VIe);return Wt("div",at({},Or(e,"groupHeading",{"group-heading":!0}),r))},qIe=WIe,XIe=["innerRef","isDisabled","isHidden","inputClassName"],YIe=function(e,t){var r=e.isDisabled,i=e.value,s=e.theme,o=s.spacing,a=s.colors;return Vt(Vt({visibility:r?"hidden":"visible",transform:i?"translateZ(0)":""},KIe),t?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:a.neutral80})},VY={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},KIe={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Vt({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},VY)},ZIe=function(e){return Vt({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},VY)},JIe=function(e){var t=e.cx,r=e.value,i=OY(e),s=i.innerRef,o=i.isDisabled,a=i.isHidden,l=i.inputClassName,u=Bl(i,XIe);return Wt("div",at({},Or(e,"input",{"input-container":!0}),{"data-value":r||""}),Wt("input",at({className:t({input:!0},l),ref:s,style:ZIe(a),disabled:o},u)))},QIe=JIe,eLe=function(e,t){var r=e.theme,i=r.spacing,s=r.borderRadius,o=r.colors;return Vt({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:o.neutral10,borderRadius:s/2,margin:i.baseUnit/2})},tLe=function(e,t){var r=e.theme,i=r.borderRadius,s=r.colors,o=e.cropWithEllipsis;return Vt({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:i/2,color:s.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},nLe=function(e,t){var r=e.theme,i=r.spacing,s=r.borderRadius,o=r.colors,a=e.isFocused;return Vt({alignItems:"center",display:"flex"},t?{}:{borderRadius:s/2,backgroundColor:a?o.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},HY=function(e){var t=e.children,r=e.innerProps;return Wt("div",r,t)},rLe=HY,iLe=HY;function sLe(n){var e=n.children,t=n.innerProps;return Wt("div",at({role:"button"},t),e||Wt(sO,{size:14}))}var oLe=function(e){var t=e.children,r=e.components,i=e.data,s=e.innerProps,o=e.isDisabled,a=e.removeProps,l=e.selectProps,u=r.Container,c=r.Label,f=r.Remove;return Wt(u,{data:i,innerProps:Vt(Vt({},Or(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),s),selectProps:l},Wt(c,{data:i,innerProps:Vt({},Or(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},t),Wt(f,{data:i,innerProps:Vt(Vt({},Or(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},a),selectProps:l}))},aLe=oLe,lLe=function(e,t){var r=e.isDisabled,i=e.isFocused,s=e.isSelected,o=e.theme,a=o.spacing,l=o.colors;return Vt({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:s?l.primary:i?l.primary25:"transparent",color:r?l.neutral20:s?l.neutral0:"inherit",padding:"".concat(a.baseUnit*2,"px ").concat(a.baseUnit*3,"px"),":active":{backgroundColor:r?void 0:s?l.primary:l.primary50}})},uLe=function(e){var t=e.children,r=e.isDisabled,i=e.isFocused,s=e.isSelected,o=e.innerRef,a=e.innerProps;return Wt("div",at({},Or(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":i,"option--is-selected":s}),{ref:o,"aria-disabled":r},a),t)},cLe=uLe,fLe=function(e,t){var r=e.theme,i=r.spacing,s=r.colors;return Vt({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:s.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},dLe=function(e){var t=e.children,r=e.innerProps;return Wt("div",at({},Or(e,"placeholder",{placeholder:!0}),r),t)},hLe=dLe,pLe=function(e,t){var r=e.isDisabled,i=e.theme,s=i.spacing,o=i.colors;return Vt({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?o.neutral40:o.neutral80,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},mLe=function(e){var t=e.children,r=e.isDisabled,i=e.innerProps;return Wt("div",at({},Or(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),i),t)},gLe=mLe,vLe={ClearIndicator:OIe,Control:$Ie,DropdownIndicator:PIe,DownChevron:UY,CrossIcon:sO,Group:qIe,GroupHeading:GIe,IndicatorsContainer:CIe,IndicatorSeparator:IIe,Input:QIe,LoadingIndicator:BIe,Menu:dIe,MenuList:pIe,MenuPortal:bIe,LoadingMessage:yIe,NoOptionsMessage:vIe,MultiValue:aLe,MultiValueContainer:rLe,MultiValueLabel:iLe,MultiValueRemove:sLe,Option:cLe,Placeholder:hLe,SelectContainer:SIe,SingleValue:gLe,ValueContainer:EIe},yLe=function(e){return Vt(Vt({},vLe),e.components)},zU=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function xLe(n,e){return!!(n===e||zU(n)&&zU(e))}function bLe(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!xLe(n[t],e[t]))return!1;return!0}function wLe(n,e){e===void 0&&(e=bLe);var t=null;function r(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(t&&t.lastThis===this&&e(i,t.lastArgs))return t.lastResult;var o=n.apply(this,i);return t={lastResult:o,lastArgs:i,lastThis:this},o}return r.clear=function(){t=null},r}var SLe={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},_Le=function(e){return Wt("span",at({css:SLe},e))},UU=_Le,ELe={guidance:function(e){var t=e.isSearchable,r=e.isMulti,i=e.tabSelectsValue,s=e.context,o=e.isInitialFocus;switch(s){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,i=r===void 0?"":r,s=e.labels,o=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(s.length>1?"s":""," ").concat(s.join(","),", selected.");case"select-option":return o?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,i=e.options,s=e.label,o=s===void 0?"":s,a=e.selectValue,l=e.isDisabled,u=e.isSelected,c=e.isAppleDevice,f=function(v,y){return v&&v.length?"".concat(v.indexOf(y)+1," of ").concat(v.length):""};if(t==="value"&&a)return"value ".concat(o," focused, ").concat(f(a,r),".");if(t==="menu"&&c){var d=l?" disabled":"",h="".concat(u?" selected":"").concat(d);return"".concat(o).concat(h,", ").concat(f(i,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},MLe=function(e){var t=e.ariaSelection,r=e.focusedOption,i=e.focusedValue,s=e.focusableOptions,o=e.isFocused,a=e.selectValue,l=e.selectProps,u=e.id,c=e.isAppleDevice,f=l.ariaLiveMessages,d=l.getOptionLabel,h=l.inputValue,m=l.isMulti,v=l.isOptionDisabled,y=l.isSearchable,p=l.menuIsOpen,S=l.options,b=l.screenReaderStatus,g=l.tabSelectsValue,w=l.isLoading,x=l["aria-label"],M=l["aria-live"],A=k.useMemo(function(){return Vt(Vt({},ELe),f||{})},[f]),N=k.useMemo(function(){var z="";if(t&&A.onChange){var D=t.option,I=t.options,U=t.removedValue,L=t.removedValues,q=t.value,Z=function(we){return Array.isArray(we)?null:we},J=U||D||Z(q),Y=J?d(J):"",ee=I||L||void 0,ae=ee?ee.map(d):[],ce=Vt({isDisabled:J&&v(J,a),label:Y,labels:ae},t);z=A.onChange(ce)}return z},[t,A,v,a,d]),C=k.useMemo(function(){var z="",D=r||i,I=!!(r&&a&&a.includes(r));if(D&&A.onFocus){var U={focused:D,label:d(D),isDisabled:v(D,a),isSelected:I,options:s,context:D===r?"menu":"value",selectValue:a,isAppleDevice:c};z=A.onFocus(U)}return z},[r,i,d,v,A,s,a,c]),T=k.useMemo(function(){var z="";if(p&&S.length&&!w&&A.onFilter){var D=b({count:s.length});z=A.onFilter({inputValue:h,resultsMessage:D})}return z},[s,h,p,A,S,b,w]),R=(t==null?void 0:t.action)==="initial-input-focus",$=k.useMemo(function(){var z="";if(A.guidance){var D=i?"value":p?"menu":"input";z=A.guidance({"aria-label":x,context:D,isDisabled:r&&v(r,a),isMulti:m,isSearchable:y,tabSelectsValue:g,isInitialFocus:R})}return z},[x,r,i,m,v,y,p,A,a,g,R]),B=Wt(k.Fragment,null,Wt("span",{id:"aria-selection"},N),Wt("span",{id:"aria-focused"},C),Wt("span",{id:"aria-results"},T),Wt("span",{id:"aria-guidance"},$));return Wt(k.Fragment,null,Wt(UU,{id:u},R&&B),Wt(UU,{"aria-live":M,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!R&&B))},CLe=MLe,lD=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],ALe=new RegExp("["+lD.map(function(n){return n.letters}).join("")+"]","g"),WY={};for(var IC=0;IC<lD.length;IC++)for(var LC=lD[IC],FC=0;FC<LC.letters.length;FC++)WY[LC.letters[FC]]=LC.base;var jY=function(e){return e.replace(ALe,function(t){return WY[t]})},TLe=wLe(jY),$U=function(e){return e.replace(/^\s+|\s+$/g,"")},DLe=function(e){return"".concat(e.label," ").concat(e.value)},NLe=function(e){return function(t,r){if(t.data.__isNew__)return!0;var i=Vt({ignoreCase:!0,ignoreAccents:!0,stringify:DLe,trim:!0,matchFrom:"any"},e),s=i.ignoreCase,o=i.ignoreAccents,a=i.stringify,l=i.trim,u=i.matchFrom,c=l?$U(r):r,f=l?$U(a(t)):a(t);return s&&(c=c.toLowerCase(),f=f.toLowerCase()),o&&(c=TLe(c),f=jY(f)),u==="start"?f.substr(0,c.length)===c:f.indexOf(c)>-1}},PLe=["innerRef"];function RLe(n){var e=n.innerRef,t=Bl(n,PLe),r=iIe(t,"onExited","in","enter","exit","appear");return Wt("input",at({ref:e},r,{css:iO({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var OLe=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function kLe(n){var e=n.isEnabled,t=n.onBottomArrive,r=n.onBottomLeave,i=n.onTopArrive,s=n.onTopLeave,o=k.useRef(!1),a=k.useRef(!1),l=k.useRef(0),u=k.useRef(null),c=k.useCallback(function(y,p){if(u.current!==null){var S=u.current,b=S.scrollTop,g=S.scrollHeight,w=S.clientHeight,x=u.current,M=p>0,A=g-w-b,N=!1;A>p&&o.current&&(r&&r(y),o.current=!1),M&&a.current&&(s&&s(y),a.current=!1),M&&p>A?(t&&!o.current&&t(y),x.scrollTop=g,N=!0,o.current=!0):!M&&-p>b&&(i&&!a.current&&i(y),x.scrollTop=0,N=!0,a.current=!0),N&&OLe(y)}},[t,r,i,s]),f=k.useCallback(function(y){c(y,y.deltaY)},[c]),d=k.useCallback(function(y){l.current=y.changedTouches[0].clientY},[]),h=k.useCallback(function(y){var p=l.current-y.changedTouches[0].clientY;c(y,p)},[c]),m=k.useCallback(function(y){if(y){var p=tIe?{passive:!1}:!1;y.addEventListener("wheel",f,p),y.addEventListener("touchstart",d,p),y.addEventListener("touchmove",h,p)}},[h,d,f]),v=k.useCallback(function(y){y&&(y.removeEventListener("wheel",f,!1),y.removeEventListener("touchstart",d,!1),y.removeEventListener("touchmove",h,!1))},[h,d,f]);return k.useEffect(function(){if(e){var y=u.current;return m(y),function(){v(y)}}},[e,m,v]),function(y){u.current=y}}var VU=["boxSizing","height","overflow","paddingRight","position"],HU={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function WU(n){n.preventDefault()}function jU(n){n.stopPropagation()}function GU(){var n=this.scrollTop,e=this.scrollHeight,t=n+this.offsetHeight;n===0?this.scrollTop=1:t===e&&(this.scrollTop=n-1)}function qU(){return"ontouchstart"in window||navigator.maxTouchPoints}var XU=!!(typeof window<"u"&&window.document&&window.document.createElement),Fg=0,Ch={capture:!1,passive:!1};function ILe(n){var e=n.isEnabled,t=n.accountForScrollbars,r=t===void 0?!0:t,i=k.useRef({}),s=k.useRef(null),o=k.useCallback(function(l){if(XU){var u=document.body,c=u&&u.style;if(r&&VU.forEach(function(m){var v=c&&c[m];i.current[m]=v}),r&&Fg<1){var f=parseInt(i.current.paddingRight,10)||0,d=document.body?document.body.clientWidth:0,h=window.innerWidth-d+f||0;Object.keys(HU).forEach(function(m){var v=HU[m];c&&(c[m]=v)}),c&&(c.paddingRight="".concat(h,"px"))}u&&qU()&&(u.addEventListener("touchmove",WU,Ch),l&&(l.addEventListener("touchstart",GU,Ch),l.addEventListener("touchmove",jU,Ch))),Fg+=1}},[r]),a=k.useCallback(function(l){if(XU){var u=document.body,c=u&&u.style;Fg=Math.max(Fg-1,0),r&&Fg<1&&VU.forEach(function(f){var d=i.current[f];c&&(c[f]=d)}),u&&qU()&&(u.removeEventListener("touchmove",WU,Ch),l&&(l.removeEventListener("touchstart",GU,Ch),l.removeEventListener("touchmove",jU,Ch)))}},[r]);return k.useEffect(function(){if(e){var l=s.current;return o(l),function(){a(l)}}},[e,o,a]),function(l){s.current=l}}var LLe=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},FLe={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function BLe(n){var e=n.children,t=n.lockEnabled,r=n.captureEnabled,i=r===void 0?!0:r,s=n.onBottomArrive,o=n.onBottomLeave,a=n.onTopArrive,l=n.onTopLeave,u=kLe({isEnabled:i,onBottomArrive:s,onBottomLeave:o,onTopArrive:a,onTopLeave:l}),c=ILe({isEnabled:t}),f=function(h){u(h),c(h)};return Wt(k.Fragment,null,t&&Wt("div",{onClick:LLe,css:FLe}),e(f))}var zLe={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},ULe=function(e){var t=e.name,r=e.onFocus;return Wt("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:zLe,value:"",onChange:function(){}})},$Le=ULe;function oO(n){var e;return typeof window<"u"&&window.navigator!=null?n.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function VLe(){return oO(/^iPhone/i)}function GY(){return oO(/^Mac/i)}function HLe(){return oO(/^iPad/i)||GY()&&navigator.maxTouchPoints>1}function WLe(){return VLe()||HLe()}function jLe(){return GY()||WLe()}var GLe=function(e){return e.label},qY=function(e){return e.label},XY=function(e){return e.value},qLe=function(e){return!!e.isDisabled},XLe={clearIndicator:RIe,container:wIe,control:zIe,dropdownIndicator:NIe,group:HIe,groupHeading:jIe,indicatorsContainer:MIe,indicatorSeparator:kIe,input:YIe,loadingIndicator:FIe,loadingMessage:gIe,menu:uIe,menuList:hIe,menuPortal:xIe,multiValue:eLe,multiValueLabel:tLe,multiValueRemove:nLe,noOptionsMessage:mIe,option:lLe,placeholder:fLe,singleValue:pLe,valueContainer:_Ie},YLe={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},KLe=4,YY=4,ZLe=38,JLe=YY*2,QLe={baseUnit:YY,controlHeight:ZLe,menuGutter:JLe},BC={borderRadius:KLe,colors:YLe,spacing:QLe},eFe={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:FU(),captureMenuScroll:!FU(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:NLe(),formatGroupLabel:GLe,getOptionLabel:qY,getOptionValue:XY,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:qLe,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!Qke(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function YU(n,e,t,r){var i=JY(n,e,t),s=QY(n,e,t),o=ZY(n,e),a=g_(n,e);return{type:"option",data:e,isDisabled:i,isSelected:s,label:o,value:a,index:r}}function kw(n,e){return n.options.map(function(t,r){if("options"in t){var i=t.options.map(function(o,a){return YU(n,o,e,a)}).filter(function(o){return ZU(n,o)});return i.length>0?{type:"group",data:t,options:i,index:r}:void 0}var s=YU(n,t,e,r);return ZU(n,s)?s:void 0}).filter(nIe)}function KY(n){return n.reduce(function(e,t){return t.type==="group"?e.push.apply(e,Wp(t.options.map(function(r){return r.data}))):e.push(t.data),e},[])}function KU(n,e){return n.reduce(function(t,r){return r.type==="group"?t.push.apply(t,Wp(r.options.map(function(i){return{data:i.data,id:"".concat(e,"-").concat(r.index,"-").concat(i.index)}}))):t.push({data:r.data,id:"".concat(e,"-").concat(r.index)}),t},[])}function tFe(n,e){return KY(kw(n,e))}function ZU(n,e){var t=n.inputValue,r=t===void 0?"":t,i=e.data,s=e.isSelected,o=e.label,a=e.value;return(!tK(n)||!s)&&eK(n,{label:o,value:a,data:i},r)}function nFe(n,e){var t=n.focusedValue,r=n.selectValue,i=r.indexOf(t);if(i>-1){var s=e.indexOf(t);if(s>-1)return t;if(i<e.length)return e[i]}return null}function rFe(n,e){var t=n.focusedOption;return t&&e.indexOf(t)>-1?t:e[0]}var zC=function(e,t){var r,i=(r=e.find(function(s){return s.data===t}))===null||r===void 0?void 0:r.id;return i||null},ZY=function(e,t){return e.getOptionLabel(t)},g_=function(e,t){return e.getOptionValue(t)};function JY(n,e,t){return typeof n.isOptionDisabled=="function"?n.isOptionDisabled(e,t):!1}function QY(n,e,t){if(t.indexOf(e)>-1)return!0;if(typeof n.isOptionSelected=="function")return n.isOptionSelected(e,t);var r=g_(n,e);return t.some(function(i){return g_(n,i)===r})}function eK(n,e,t){return n.filterOption?n.filterOption(e,t):!0}var tK=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},iFe=1,nK=function(n){OOe(t,n);var e=LOe(t);function t(r){var i;if(POe(this,t),i=e.call(this,r),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.isAppleDevice=jLe(),i.controlRef=null,i.getControlRef=function(l){i.controlRef=l},i.focusedOptionRef=null,i.getFocusedOptionRef=function(l){i.focusedOptionRef=l},i.menuListRef=null,i.getMenuListRef=function(l){i.menuListRef=l},i.inputRef=null,i.getInputRef=function(l){i.inputRef=l},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(l,u){var c=i.props,f=c.onChange,d=c.name;u.name=d,i.ariaOnChange(l,u),f(l,u)},i.setValue=function(l,u,c){var f=i.props,d=f.closeMenuOnSelect,h=f.isMulti,m=f.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:m}),d&&(i.setState({inputIsHiddenAfterUpdate:!h}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(l,{action:u,option:c})},i.selectOption=function(l){var u=i.props,c=u.blurInputOnSelect,f=u.isMulti,d=u.name,h=i.state.selectValue,m=f&&i.isOptionSelected(l,h),v=i.isOptionDisabled(l,h);if(m){var y=i.getOptionValue(l);i.setValue(h.filter(function(p){return i.getOptionValue(p)!==y}),"deselect-option",l)}else if(!v)f?i.setValue([].concat(Wp(h),[l]),"select-option",l):i.setValue(l,"select-option");else{i.ariaOnChange(l,{action:"select-option",option:l,name:d});return}c&&i.blurInput()},i.removeValue=function(l){var u=i.props.isMulti,c=i.state.selectValue,f=i.getOptionValue(l),d=c.filter(function(m){return i.getOptionValue(m)!==f}),h=pv(u,d,d[0]||null);i.onChange(h,{action:"remove-value",removedValue:l}),i.focusInput()},i.clearValue=function(){var l=i.state.selectValue;i.onChange(pv(i.props.isMulti,[],null),{action:"clear",removedValues:l})},i.popValue=function(){var l=i.props.isMulti,u=i.state.selectValue,c=u[u.length-1],f=u.slice(0,u.length-1),d=pv(l,f,f[0]||null);i.onChange(d,{action:"pop-value",removedValue:c})},i.getFocusedOptionId=function(l){return zC(i.state.focusableOptionsWithIds,l)},i.getFocusableOptionsWithIds=function(){return KU(kw(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return Xke.apply(void 0,[i.props.classNamePrefix].concat(u))},i.getOptionLabel=function(l){return ZY(i.props,l)},i.getOptionValue=function(l){return g_(i.props,l)},i.getStyles=function(l,u){var c=i.props.unstyled,f=XLe[l](u,c);f.boxSizing="border-box";var d=i.props.styles[l];return d?d(f,u):f},i.getClassNames=function(l,u){var c,f;return(c=(f=i.props.classNames)[l])===null||c===void 0?void 0:c.call(f,u)},i.getElementId=function(l){return"".concat(i.state.instancePrefix,"-").concat(l)},i.getComponents=function(){return yLe(i.props)},i.buildCategorizedOptions=function(){return kw(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return KY(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(l,u){i.setState({ariaSelection:Vt({value:l},u)})},i.onMenuMouseDown=function(l){l.button===0&&(l.stopPropagation(),l.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(l){i.blockOptionHover=!1},i.onControlMouseDown=function(l){if(!l.defaultPrevented){var u=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&i.onMenuClose():u&&i.openMenu("first"):(u&&(i.openAfterFocus=!0),i.focusInput()),l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&l.preventDefault()}},i.onDropdownIndicatorMouseDown=function(l){if(!(l&&l.type==="mousedown"&&l.button!==0)&&!i.props.isDisabled){var u=i.props,c=u.isMulti,f=u.menuIsOpen;i.focusInput(),f?(i.setState({inputIsHiddenAfterUpdate:!c}),i.onMenuClose()):i.openMenu("first"),l.preventDefault()}},i.onClearIndicatorMouseDown=function(l){l&&l.type==="mousedown"&&l.button!==0||(i.clearValue(),l.preventDefault(),i.openAfterFocus=!1,l.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(l){typeof i.props.closeMenuOnScroll=="boolean"?l.target instanceof HTMLElement&&WE(l.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(l)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(l){var u=l.touches,c=u&&u.item(0);c&&(i.initialTouchX=c.clientX,i.initialTouchY=c.clientY,i.userIsDragging=!1)},i.onTouchMove=function(l){var u=l.touches,c=u&&u.item(0);if(c){var f=Math.abs(c.clientX-i.initialTouchX),d=Math.abs(c.clientY-i.initialTouchY),h=5;i.userIsDragging=f>h||d>h}},i.onTouchEnd=function(l){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(l.target)&&i.menuListRef&&!i.menuListRef.contains(l.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(l){i.userIsDragging||i.onControlMouseDown(l)},i.onClearIndicatorTouchEnd=function(l){i.userIsDragging||i.onClearIndicatorMouseDown(l)},i.onDropdownIndicatorTouchEnd=function(l){i.userIsDragging||i.onDropdownIndicatorMouseDown(l)},i.handleInputChange=function(l){var u=i.props.inputValue,c=l.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(c,{action:"input-change",prevInputValue:u}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(l){i.props.onFocus&&i.props.onFocus(l),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(l){var u=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(l),i.onInputChange("",{action:"input-blur",prevInputValue:u}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(l){if(!(i.blockOptionHover||i.state.focusedOption===l)){var u=i.getFocusableOptions(),c=u.indexOf(l);i.setState({focusedOption:l,focusedOptionId:c>-1?i.getFocusedOptionId(l):null})}},i.shouldHideSelectedOptions=function(){return tK(i.props)},i.onValueInputFocus=function(l){l.preventDefault(),l.stopPropagation(),i.focus()},i.onKeyDown=function(l){var u=i.props,c=u.isMulti,f=u.backspaceRemovesValue,d=u.escapeClearsValue,h=u.inputValue,m=u.isClearable,v=u.isDisabled,y=u.menuIsOpen,p=u.onKeyDown,S=u.tabSelectsValue,b=u.openMenuOnFocus,g=i.state,w=g.focusedOption,x=g.focusedValue,M=g.selectValue;if(!v&&!(typeof p=="function"&&(p(l),l.defaultPrevented))){switch(i.blockOptionHover=!0,l.key){case"ArrowLeft":if(!c||h)return;i.focusValue("previous");break;case"ArrowRight":if(!c||h)return;i.focusValue("next");break;case"Delete":case"Backspace":if(h)return;if(x)i.removeValue(x);else{if(!f)return;c?i.popValue():m&&i.clearValue()}break;case"Tab":if(i.isComposing||l.shiftKey||!y||!S||!w||b&&i.isOptionSelected(w,M))return;i.selectOption(w);break;case"Enter":if(l.keyCode===229)break;if(y){if(!w||i.isComposing)return;i.selectOption(w);break}return;case"Escape":y?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:h}),i.onMenuClose()):m&&d&&i.clearValue();break;case" ":if(h)return;if(!y){i.openMenu("first");break}if(!w)return;i.selectOption(w);break;case"ArrowUp":y?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":y?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!y)return;i.focusOption("pageup");break;case"PageDown":if(!y)return;i.focusOption("pagedown");break;case"Home":if(!y)return;i.focusOption("first");break;case"End":if(!y)return;i.focusOption("last");break;default:return}l.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++iFe),i.state.selectValue=p_(r.value),r.menuIsOpen&&i.state.selectValue.length){var s=i.getFocusableOptionsWithIds(),o=i.buildFocusableOptions(),a=o.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=s,i.state.focusedOption=o[a],i.state.focusedOptionId=zC(s,o[a])}return i}return ROe(t,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&LU(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(i){var s=this.props,o=s.isDisabled,a=s.menuIsOpen,l=this.state.isFocused;(l&&!o&&i.isDisabled||l&&a&&!i.menuIsOpen)&&this.focusInput(),l&&o&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!l&&!o&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(LU(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,s){this.props.onInputChange(i,s)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var s=this,o=this.state,a=o.selectValue,l=o.isFocused,u=this.buildFocusableOptions(),c=i==="first"?0:u.length-1;if(!this.props.isMulti){var f=u.indexOf(a[0]);f>-1&&(c=f)}this.scrollToFocusedOptionOnUpdate=!(l&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:u[c],focusedOptionId:this.getFocusedOptionId(u[c])},function(){return s.onMenuOpen()})}},{key:"focusValue",value:function(i){var s=this.state,o=s.selectValue,a=s.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var l=o.indexOf(a);a||(l=-1);var u=o.length-1,c=-1;if(o.length){switch(i){case"previous":l===0?c=0:l===-1?c=u:c=l-1;break;case"next":l>-1&&l<u&&(c=l+1);break}this.setState({inputIsHidden:c!==-1,focusedValue:o[c]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",s=this.props.pageSize,o=this.state.focusedOption,a=this.getFocusableOptions();if(a.length){var l=0,u=a.indexOf(o);o||(u=-1),i==="up"?l=u>0?u-1:a.length-1:i==="down"?l=(u+1)%a.length:i==="pageup"?(l=u-s,l<0&&(l=0)):i==="pagedown"?(l=u+s,l>a.length-1&&(l=a.length-1)):i==="last"&&(l=a.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:a[l],focusedValue:null,focusedOptionId:this.getFocusedOptionId(a[l])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(BC):Vt(Vt({},BC),this.props.theme):BC}},{key:"getCommonProps",value:function(){var i=this.clearValue,s=this.cx,o=this.getStyles,a=this.getClassNames,l=this.getValue,u=this.selectOption,c=this.setValue,f=this.props,d=f.isMulti,h=f.isRtl,m=f.options,v=this.hasValue();return{clearValue:i,cx:s,getStyles:o,getClassNames:a,getValue:l,hasValue:v,isMulti:d,isRtl:h,options:m,selectOption:u,selectProps:f,setValue:c,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,s=i.isClearable,o=i.isMulti;return s===void 0?o:s}},{key:"isOptionDisabled",value:function(i,s){return JY(this.props,i,s)}},{key:"isOptionSelected",value:function(i,s){return QY(this.props,i,s)}},{key:"filterOption",value:function(i,s){return eK(this.props,i,s)}},{key:"formatOptionLabel",value:function(i,s){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,a=this.state.selectValue;return this.props.formatOptionLabel(i,{context:s,inputValue:o,selectValue:a})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,s=i.isDisabled,o=i.isSearchable,a=i.inputId,l=i.inputValue,u=i.tabIndex,c=i.form,f=i.menuIsOpen,d=i.required,h=this.getComponents(),m=h.Input,v=this.state,y=v.inputIsHidden,p=v.ariaSelection,S=this.commonProps,b=a||this.getElementId("input"),g=Vt(Vt(Vt({"aria-autocomplete":"list","aria-expanded":f,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":d,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},f&&{"aria-controls":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?(p==null?void 0:p.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?k.createElement(m,at({},S,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:b,innerRef:this.getInputRef,isDisabled:s,isHidden:y,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:u,form:c,type:"text",value:l},g)):k.createElement(RLe,at({id:b,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:h_,onFocus:this.onInputFocus,disabled:s,tabIndex:u,inputMode:"none",form:c,value:""},g))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,s=this.getComponents(),o=s.MultiValue,a=s.MultiValueContainer,l=s.MultiValueLabel,u=s.MultiValueRemove,c=s.SingleValue,f=s.Placeholder,d=this.commonProps,h=this.props,m=h.controlShouldRenderValue,v=h.isDisabled,y=h.isMulti,p=h.inputValue,S=h.placeholder,b=this.state,g=b.selectValue,w=b.focusedValue,x=b.isFocused;if(!this.hasValue()||!m)return p?null:k.createElement(f,at({},d,{key:"placeholder",isDisabled:v,isFocused:x,innerProps:{id:this.getElementId("placeholder")}}),S);if(y)return g.map(function(A,N){var C=A===w,T="".concat(i.getOptionLabel(A),"-").concat(i.getOptionValue(A));return k.createElement(o,at({},d,{components:{Container:a,Label:l,Remove:u},isFocused:C,isDisabled:v,key:T,index:N,removeProps:{onClick:function(){return i.removeValue(A)},onTouchEnd:function(){return i.removeValue(A)},onMouseDown:function($){$.preventDefault()}},data:A}),i.formatOptionLabel(A,"value"))});if(p)return null;var M=g[0];return k.createElement(c,at({},d,{data:M,isDisabled:v}),this.formatOptionLabel(M,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),s=i.ClearIndicator,o=this.commonProps,a=this.props,l=a.isDisabled,u=a.isLoading,c=this.state.isFocused;if(!this.isClearable()||!s||l||!this.hasValue()||u)return null;var f={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return k.createElement(s,at({},o,{innerProps:f,isFocused:c}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),s=i.LoadingIndicator,o=this.commonProps,a=this.props,l=a.isDisabled,u=a.isLoading,c=this.state.isFocused;if(!s||!u)return null;var f={"aria-hidden":"true"};return k.createElement(s,at({},o,{innerProps:f,isDisabled:l,isFocused:c}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),s=i.DropdownIndicator,o=i.IndicatorSeparator;if(!s||!o)return null;var a=this.commonProps,l=this.props.isDisabled,u=this.state.isFocused;return k.createElement(o,at({},a,{isDisabled:l,isFocused:u}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),s=i.DropdownIndicator;if(!s)return null;var o=this.commonProps,a=this.props.isDisabled,l=this.state.isFocused,u={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return k.createElement(s,at({},o,{innerProps:u,isDisabled:a,isFocused:l}))}},{key:"renderMenu",value:function(){var i=this,s=this.getComponents(),o=s.Group,a=s.GroupHeading,l=s.Menu,u=s.MenuList,c=s.MenuPortal,f=s.LoadingMessage,d=s.NoOptionsMessage,h=s.Option,m=this.commonProps,v=this.state.focusedOption,y=this.props,p=y.captureMenuScroll,S=y.inputValue,b=y.isLoading,g=y.loadingMessage,w=y.minMenuHeight,x=y.maxMenuHeight,M=y.menuIsOpen,A=y.menuPlacement,N=y.menuPosition,C=y.menuPortalTarget,T=y.menuShouldBlockScroll,R=y.menuShouldScrollIntoView,$=y.noOptionsMessage,B=y.onMenuScrollToTop,z=y.onMenuScrollToBottom;if(!M)return null;var D=function(Y,ee){var ae=Y.type,ce=Y.data,pe=Y.isDisabled,we=Y.isSelected,me=Y.label,Ae=Y.value,Ee=v===ce,re=pe?void 0:function(){return i.onOptionHover(ce)},Pe=pe?void 0:function(){return i.selectOption(ce)},Re="".concat(i.getElementId("option"),"-").concat(ee),te={id:Re,onClick:Pe,onMouseMove:re,onMouseOver:re,tabIndex:-1,role:"option","aria-selected":i.isAppleDevice?void 0:we};return k.createElement(h,at({},m,{innerProps:te,data:ce,isDisabled:pe,isSelected:we,key:Re,label:me,type:ae,value:Ae,isFocused:Ee,innerRef:Ee?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(Y.data,"menu"))},I;if(this.hasOptions())I=this.getCategorizedOptions().map(function(J){if(J.type==="group"){var Y=J.data,ee=J.options,ae=J.index,ce="".concat(i.getElementId("group"),"-").concat(ae),pe="".concat(ce,"-heading");return k.createElement(o,at({},m,{key:ce,data:Y,options:ee,Heading:a,headingProps:{id:pe,data:J.data},label:i.formatGroupLabel(J.data)}),J.options.map(function(we){return D(we,"".concat(ae,"-").concat(we.index))}))}else if(J.type==="option")return D(J,"".concat(J.index))});else if(b){var U=g({inputValue:S});if(U===null)return null;I=k.createElement(f,m,U)}else{var L=$({inputValue:S});if(L===null)return null;I=k.createElement(d,m,L)}var q={minMenuHeight:w,maxMenuHeight:x,menuPlacement:A,menuPosition:N,menuShouldScrollIntoView:R},Z=k.createElement(cIe,at({},m,q),function(J){var Y=J.ref,ee=J.placerProps,ae=ee.placement,ce=ee.maxHeight;return k.createElement(l,at({},m,q,{innerRef:Y,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:b,placement:ae}),k.createElement(BLe,{captureEnabled:p,onTopArrive:B,onBottomArrive:z,lockEnabled:T},function(pe){return k.createElement(u,at({},m,{innerRef:function(me){i.getMenuListRef(me),pe(me)},innerProps:{role:"listbox","aria-multiselectable":m.isMulti,id:i.getElementId("listbox")},isLoading:b,maxHeight:ce,focusedOption:v}),I)}))});return C||N==="fixed"?k.createElement(c,at({},m,{appendTo:C,controlElement:this.controlRef,menuPlacement:A,menuPosition:N}),Z):Z}},{key:"renderFormField",value:function(){var i=this,s=this.props,o=s.delimiter,a=s.isDisabled,l=s.isMulti,u=s.name,c=s.required,f=this.state.selectValue;if(c&&!this.hasValue()&&!a)return k.createElement($Le,{name:u,onFocus:this.onValueInputFocus});if(!(!u||a))if(l)if(o){var d=f.map(function(v){return i.getOptionValue(v)}).join(o);return k.createElement("input",{name:u,type:"hidden",value:d})}else{var h=f.length>0?f.map(function(v,y){return k.createElement("input",{key:"i-".concat(y),name:u,type:"hidden",value:i.getOptionValue(v)})}):k.createElement("input",{name:u,type:"hidden",value:""});return k.createElement("div",null,h)}else{var m=f[0]?this.getOptionValue(f[0]):"";return k.createElement("input",{name:u,type:"hidden",value:m})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,s=this.state,o=s.ariaSelection,a=s.focusedOption,l=s.focusedValue,u=s.isFocused,c=s.selectValue,f=this.getFocusableOptions();return k.createElement(CLe,at({},i,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:a,focusedValue:l,isFocused:u,selectValue:c,focusableOptions:f,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),s=i.Control,o=i.IndicatorsContainer,a=i.SelectContainer,l=i.ValueContainer,u=this.props,c=u.className,f=u.id,d=u.isDisabled,h=u.menuIsOpen,m=this.state.isFocused,v=this.commonProps=this.getCommonProps();return k.createElement(a,at({},v,{className:c,innerProps:{id:f,onKeyDown:this.onKeyDown},isDisabled:d,isFocused:m}),this.renderLiveRegion(),k.createElement(s,at({},v,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:d,isFocused:m,menuIsOpen:h}),k.createElement(l,at({},v,{isDisabled:d}),this.renderPlaceholderOrValue(),this.renderInput()),k.createElement(o,at({},v,{isDisabled:d}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,s){var o=s.prevProps,a=s.clearFocusValueOnUpdate,l=s.inputIsHiddenAfterUpdate,u=s.ariaSelection,c=s.isFocused,f=s.prevWasFocused,d=s.instancePrefix,h=i.options,m=i.value,v=i.menuIsOpen,y=i.inputValue,p=i.isMulti,S=p_(m),b={};if(o&&(m!==o.value||h!==o.options||v!==o.menuIsOpen||y!==o.inputValue)){var g=v?tFe(i,S):[],w=v?KU(kw(i,S),"".concat(d,"-option")):[],x=a?nFe(s,S):null,M=rFe(s,g),A=zC(w,M);b={selectValue:S,focusedOption:M,focusedOptionId:A,focusableOptionsWithIds:w,focusedValue:x,clearFocusValueOnUpdate:!1}}var N=l!=null&&i!==o?{inputIsHidden:l,inputIsHiddenAfterUpdate:void 0}:{},C=u,T=c&&f;return c&&!T&&(C={value:pv(p,S,S[0]||null),options:S,action:"initial-input-focus"},T=!f),(u==null?void 0:u.action)==="initial-input-focus"&&(C=null),Vt(Vt(Vt({},b),N),{},{prevProps:i,ariaSelection:C,prevWasFocused:T})}}]),t}(k.Component);nK.defaultProps=eFe;var sFe=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function oFe(n){var e=n.defaultInputValue,t=e===void 0?"":e,r=n.defaultMenuIsOpen,i=r===void 0?!1:r,s=n.defaultValue,o=s===void 0?null:s,a=n.inputValue,l=n.menuIsOpen,u=n.onChange,c=n.onInputChange,f=n.onMenuClose,d=n.onMenuOpen,h=n.value,m=Bl(n,sFe),v=k.useState(a!==void 0?a:t),y=xu(v,2),p=y[0],S=y[1],b=k.useState(l!==void 0?l:i),g=xu(b,2),w=g[0],x=g[1],M=k.useState(h!==void 0?h:o),A=xu(M,2),N=A[0],C=A[1],T=k.useCallback(function(U,L){typeof u=="function"&&u(U,L),C(U)},[u]),R=k.useCallback(function(U,L){var q;typeof c=="function"&&(q=c(U,L)),S(q!==void 0?q:U)},[c]),$=k.useCallback(function(){typeof d=="function"&&d(),x(!0)},[d]),B=k.useCallback(function(){typeof f=="function"&&f(),x(!1)},[f]),z=a!==void 0?a:p,D=l!==void 0?l:w,I=h!==void 0?h:N;return Vt(Vt({},m),{},{inputValue:z,menuIsOpen:D,onChange:T,onInputChange:R,onMenuClose:B,onMenuOpen:$,value:I})}var aFe=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],JU=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=String(e).toLowerCase(),s=String(r.getOptionValue(t)).toLowerCase(),o=String(r.getOptionLabel(t)).toLowerCase();return s===i||o===i},UC={formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,t,r,i){return!(!e||t.some(function(s){return JU(e,s,i)})||r.some(function(s){return JU(e,s,i)}))},getNewOptionData:function(e,t){return{label:t,value:e,__isNew__:!0}}};function lFe(n){var e=n.allowCreateWhileLoading,t=e===void 0?!1:e,r=n.createOptionPosition,i=r===void 0?"last":r,s=n.formatCreateLabel,o=s===void 0?UC.formatCreateLabel:s,a=n.isValidNewOption,l=a===void 0?UC.isValidNewOption:a,u=n.getNewOptionData,c=u===void 0?UC.getNewOptionData:u,f=n.onCreateOption,d=n.options,h=d===void 0?[]:d,m=n.onChange,v=Bl(n,aFe),y=v.getOptionValue,p=y===void 0?XY:y,S=v.getOptionLabel,b=S===void 0?qY:S,g=v.inputValue,w=v.isLoading,x=v.isMulti,M=v.value,A=v.name,N=k.useMemo(function(){return l(g,p_(M),h,{getOptionValue:p,getOptionLabel:b})?c(g,o(g)):void 0},[o,c,b,p,g,l,h,M]),C=k.useMemo(function(){return(t||!w)&&N?i==="first"?[N].concat(Wp(h)):[].concat(Wp(h),[N]):h},[t,i,w,N,h]),T=k.useCallback(function(R,$){if($.action!=="select-option")return m(R,$);var B=Array.isArray(R)?R:[R];if(B[B.length-1]===N){if(f)f(g);else{var z=c(g,g),D={action:"create-option",name:A,option:z};m(pv(x,[].concat(Wp(p_(M)),[z]),z),D)}return}m(R,$)},[c,g,x,A,N,f,m,M]);return Vt(Vt({},v),{},{options:C,onChange:T})}var uFe=k.forwardRef(function(n,e){var t=oFe(n),r=lFe(t);return k.createElement(nK,at({ref:e},r))}),rK=uFe;const aO=[{value:"abundance-tool",label:"Abundance tool"},{value:"examples",label:"Example"},{value:"furniture",label:"Furniture"},{value:"hardware",label:"Hardware"},{value:"project",label:"Project"}],iK=({setExportPopUp:n,authorizedUserOcto:e,exporting:t})=>{var r=null,i=null,s=`###### Note: Do not edit this file directly, it is automatically generated from the CAD model 
# Bill Of Materials 
 |Part|Number Needed|Price|Source| 
 |----|----------|-----|-----|`,o="###### Note: Do not edit this file directly, it is automatically generated from the CAD model";const a=[];Object.keys(AU).forEach(g=>{a.push(g)});const l=Gd(),u=k.useRef(),c=k.useRef(),f=k.useRef(),d=k.useRef(),h=k.useRef(),[m,v]=k.useState(!1),[y,p]=k.useState(0),S=async([g,w,x,M,A],N,C)=>{N!==void 0&&C?(O.topLevelMolecule=N,N.topLevel=!0):O.topLevelMolecule=new Py({x:0,y:0,topLevel:!0,name:g,atomType:"Molecule",uniqueID:O.generateUniqueID(),unitsKey:A}),O.currentMolecule=O.topLevelMolecule,await e.request("POST /user/repos",{name:g,description:x,headers:{"X-GitHub-Api-Version":"2022-11-28"}}).catch(T=>{window.alert("Error creating project. That name might be taken already. Please try again with a different name."),v(!1)}).then(T=>{p(10),i=T.data.name,r=O.currentUser;var R=O.topLevelMolecule.serialize();R.filetypeVersion=1;const $=window.btoa(JSON.stringify(R,null,4));let B=w.join(" "),z=(T.data.name+" "+T.data.owner.login+" "+x+" "+B).toLowerCase(),D={owner:T.data.owner.login,description:x,ranking:T.data.stargazers_count,searchField:z,repoName:T.data.name,forks:T.data.forks_count,topMoleculeID:O.topLevelMolecule.uniqueID,topics:w,html_url:T.data.html_url,parentRepo:null,readme:"https://raw.githubusercontent.com/"+T.data.full_name+"/master/README.md?sanitize=true",contentURL:"https://raw.githubusercontent.com/"+T.data.full_name+"/master/project.abundance?sanitize=true",githubMoleculesUsed:[],svgURL:"https://raw.githubusercontent.com/"+T.data.full_name+"/master/project.svg?sanitize=true",dateCreated:T.data.created_at};fetch("https://hg5gsgv9te.execute-api.us-east-2.amazonaws.com/abundance-stage//post-new-project",{method:"POST",body:JSON.stringify(D),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(U=>{O.currentRepo=D}),e.rest.repos.createOrUpdateFileContents({owner:r,repo:i,path:"project.abundance",message:"Initialize repo",content:$}).then(U=>{p(20);var L=window.btoa(s);e.rest.repos.createOrUpdateFileContents({owner:r,repo:i,path:"BillOfMaterials.md",message:"initialize BOM",content:L}).then(()=>{p(30),L=window.btoa(o),e.rest.repos.createOrUpdateFileContents({owner:r,repo:i,path:"README.md",message:"initialize README",content:L}).then(()=>{p(40),e.rest.repos.createOrUpdateFileContents({owner:r,repo:i,path:"project.svg",message:"SVG Picture",content:""}).then(()=>{p(50),e.rest.repos.createOrUpdateFileContents({owner:r,repo:i,path:".gitattributes",message:"Create gitattributes",content:window.btoa("data binary")}).then(()=>{p(60),e.rest.repos.createOrUpdateFileContents({owner:r,repo:i,path:"data.json",message:"Data file",content:""}).then(()=>{p(80),e.rest.repos.createOrUpdateFileContents({owner:r,repo:i,path:"LICENSE.txt",message:"Establish license",content:window.btoa(O.toBinaryStr(AU[M]))}).then(()=>{p(90),e.rest.repos.replaceAllTopics({owner:r,repo:i,names:w}).then(()=>{n(!1),l(`/${O.currentRepo.owner}/${O.currentRepo.repoName}`)})})})})})})})})})},b=async g=>{g.preventDefault(),v(!0);const w=u.current.value,x=c.current.getValue(),M=f.current.value,A=[],N=d.current.value,C=h.current.value;if(x.forEach(R=>{A.push(R.value)}),O.currentMolecule)var T=O.currentMolecule;S([w,A,M,N,C],T,t)};return se.jsx(se.Fragment,{children:se.jsx("div",{className:"login-page export-div",children:se.jsxs("div",{className:"form animate fadeInUp one",children:[se.jsx("button",{style:{width:"3%",display:"block"},onClick:()=>{n(!1)},className:"closeButton",children:se.jsx("img",{})}),se.jsxs("form",{className:"new-project-form",onSubmit:g=>{b(g)},children:[se.jsx("h2",{children:t?"Export this molecule to Github":"Create a New Project"}),se.jsx("label",{htmlFor:"project-name",children:"Project Name"}),se.jsx("input",{id:"project-name",name:"Project Name",placeholder:"Project Name",ref:u,required:!0}),se.jsx("label",{htmlFor:"license-options",children:"License"}),se.jsx("select",{id:"license-options",ref:d,children:a.map(g=>se.jsx("option",{value:g,children:g},g))}),se.jsx("label",{htmlFor:"measure-units",children:"Units"}),se.jsxs("select",{id:"measure-units",ref:h,children:[se.jsx("option",{value:"Inches",children:"Inches"},"inchesop"),se.jsx("option",{value:"MM",children:"MM"},"millop")]}),se.jsx("label",{htmlFor:"project-description",children:"Project Description"}),se.jsx("input",{placeholder:"Project Description",ref:f}),se.jsx("label",{htmlFor:"project-topics",children:"Project Tags"}),se.jsx(rK,{defaultValue:[],isMulti:!0,name:"Project Topics",options:aO,className:"basic-multi-select",classNamePrefix:"select",ref:c}),se.jsx("button",{className:"submit-button",disabled:m,type:"submit",children:m?y+"%":"Submit/Export to Github"})]})]})})})},cFe=({tryLogin:n})=>se.jsx("div",{className:"login-page",children:se.jsxs("div",{className:"form animate fadeInUp one",children:[se.jsxs("div",{id:"gitSide",className:"logindiv",children:[se.jsx("img",{className:"logo",src:"/imgs/abundance_logo.png",alt:"logo"}),se.jsx("div",{id:"welcome",children:se.jsx("img",{src:"/imgs/abundance_lettering.png",alt:"logo",style:{width:"300px"}})}),se.jsxs("p",{style:{padding:"0 20px"},children:["Abundance projects are stored through GitHub. You control your files."," "]}),se.jsxs("form",{className:"login-form",children:[se.jsx("button",{type:"button",id:"loginButton",className:"submit-btn",onClick:n,style:{height:"40px"},children:"Login With GitHub"}),se.jsxs("p",{className:"message",children:["Don't have an account?"," ",se.jsx("a",{href:"https://github.com/join",children:"Create a free account"})]})]})]}),se.jsxs("div",{id:"nonGitSide",className:"logindiv curiousBrowse",children:[se.jsx("p",{style:{justifyContent:"flex-start",display:"inline"},children:"Check out what others have designed in Abundance"}),se.jsx("button",{type:"button",onClick:()=>{},className:"submit-btn",id:"browseNonGit",style:{padding:"0 30px"},children:"Browse all projects"})]})]})}),fFe=({setYearShow:n,nodes:e,authorizedUserOcto:t})=>{const[r,i]=k.useState("thumb"),[s,o]=k.useState("byDateCreated");return se.jsxs(se.Fragment,{children:[se.jsxs("div",{style:{flexDirection:"row",height:"30px",widht:"50%",margin:"25px 0 10px 20px",display:"flex"},children:[se.jsx("button",{className:"list_thumb_button",onClick:()=>i("list"),children:se.jsx("img",{src:"/imgs/list.svg",alt:"list_search",style:{width:"20px",marginRight:"5px",opacity:"0.8"}})},"list-filter-button"),se.jsx("button",{className:"list_thumb_button",onClick:()=>i("thumb"),children:se.jsx("img",{src:"/imgs/thumbnail.svg",alt:"thumb_search",style:{width:"20px",marginRight:"5px",opacity:"0.8"}})},"thumb-filter-button"),se.jsxs("label",{htmlFor:"order-by",children:[se.jsx("img",{src:"/imgs/sort.svg",alt:"Sort by",style:{width:"15px"}}),se.jsxs("select",{className:"order_dropdown",id:"order-by",defaultValue:s,onChange:a=>o(a.target.value),children:[se.jsx("option",{value:"byName",children:"Name"},"name_order"),se.jsx("option",{value:"byForks",children:"Forks"},"forks_order"),se.jsx("option",{value:"byStars",children:"Stars"},"stars_order"),se.jsx("option",{value:"byOwnerName",children:"Creator"},"owner_order"),se.jsx("option",{value:"byDateCreated",children:"Date Created"},"date_order")]})]})]}),e.length>0?se.jsx(dFe,{nodes:e,browseType:r,orderType:s,authorizedUserOcto:t}):se.jsx("p",{children:"No projects match your search"})]})},dFe=({nodes:n,browseType:e,orderType:t})=>{const r=({node:a})=>se.jsxs("div",{className:"project",style:a.owner!=O.currentUser?{backgroundColor:"rgb(233 221 242 / 58%)"}:null,id:a.repoName,onClick:()=>{O.currentRepo=a},children:[a.topics&&a.topics.includes("abundance-tool")?se.jsxs("h2",{style:{float:"right",position:"relative",top:"-10px",padding:"0"},children:[" "," "," "]}):null,se.jsx("p",{style:{fontSize:"1em",textOverflow:"ellipsis",display:"block",overflow:"hidden",width:"80%"},children:a.repoName}),se.jsx("img",{className:"project_image",src:a.svgURL,onError:({currentTarget:l})=>{l.onerror=null,l.src="/imgs/defaultThumbnail.svg"},alt:a.repoName}),se.jsxs("div",{style:{display:"inline"},children:[se.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",style:{transform:"scale(.7)"},width:"16",height:"16",children:se.jsx("path",{d:"M8 .2l4.9 15.2L0 6h16L3.1 15.4z"})}),se.jsx("p",{style:{fontSize:".7em",display:"inline"},children:a.ranking})]})]},a.topMoleculeID+a.owner),i=a=>{let l=new Date(a.node.dateCreated).toDateString();return l=="Invalid Date"&&(l="Date Created"),se.jsxs("div",{className:"project_list",id:a.node.id,onClick:()=>{O.currentRepo=a.node},children:[se.jsx("p",{style:{fontSize:"1em",textOverflow:"ellipsis",display:"block",overflow:"hidden",width:"80%"},children:a.node.repoName}),se.jsx("p",{style:{fontSize:"1em",textOverflow:"ellipsis",display:"block",overflow:"hidden",width:"50%"},children:a.node.owner}),se.jsxs("h2",{style:{width:"20%",display:"block"},children:[" ",a.node.topics&&a.node.topics.includes("abundance-tool")?" ":null]}),se.jsx("p",{style:{fontSize:"1em",textOverflow:"ellipsis",display:"block",overflow:"hidden",width:"70%"},children:a.node.forks}),se.jsx("p",{style:{fontSize:"1em",textOverflow:"ellipsis",display:"block",overflow:"hidden",width:"80%"},children:l}),se.jsxs("div",{style:{width:"10%",display:"flex",flexDirection:"row"},children:[se.jsx("p",{style:{fontSize:"1em"},children:a.node.ranking}),se.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",style:{transform:"scale(1)"},width:"16",height:"16",children:se.jsx("path",{d:"M8 .2l4.9 15.2L0 6h16L3.1 15.4z"})})]})]},a.node.id)};var s={byName:function(a,l){return a.repoName<l.repoName?-1:a.repoName>l.repoName?1:0},byForks:function(a,l){return l.forks-a.forks},byStars:function(a,l){return l.ranking-a.ranking},byOwnerName:function(a,l){return a.owner<l.owner?-1:a.owner>l.owner?1:0},byDateCreated:function(a,l){return new Date(a.dateCreated)>new Date(l.dateCreated)?-1:new Date(a.dateCreated)<new Date(l.dateCreated)?1:0}};const o={forks:"Forks",ranking:"#",dateCreated:"Date Created",owner:"Creator",repoName:"Name"};return se.jsx(se.Fragment,{children:se.jsxs("div",{className:"project-item-div",children:[e=="list"?se.jsx(i,{node:o}):null,n.sort(s[t]).map(a=>se.jsx(f0,{to:a.owner==O.currentUser?`/${a.owner}/${a.repoName}`:`/run/${a.owner}/${a.repoName}`,children:e=="list"?se.jsx(i,{node:a}):se.jsx(r,{node:a})},a.owner+a.repoName))]})})},hFe=({projectToShow:n,setExportPopUp:e,setProjectsToShow:t,user:r,authorizedUserOcto:i,pageDict:s})=>{const o={loading:"Loading projects...",error:"Error",noProjects:"No projects found"},[a,l]=k.useState([]),[u,c]=k.useState(""),[f,d]=k.useState(0),[h,m]=k.useState(""),[v,y]=k.useState("2024"),[p,S]=k.useState(o.loading);k.useEffect(()=>{new jc;var x;const M=async function(N){console.log("forking dummy project")},A=async()=>{l([]),s[f]=u;let N=u?"&lastKey="+u.repoName+"~"+u.owner:"&lastKey",C;if(h!=""?C="&query="+h+"&yearShow="+v:C="&query&yearShow="+v,n=="all")x="attribute=searchField"+C+"&user"+N;else if(n=="owned")x="attribute=searchField"+C+"&user="+r+N;else{if(n=="featured")return(await fetch("https://hg5gsgv9te.execute-api.us-east-2.amazonaws.com/abundance-stage/queryFeaturedProjects")).json();if(n=="liked"){const $="https://hg5gsgv9te.execute-api.us-east-2.amazonaws.com/abundance-stage/USER-TABLE?user="+r;let z=await(await fetch($)).json();x="",z[0].likedProjects.forEach(U=>{x+="likedProjects="+U+"&"});const D="https://hg5gsgv9te.execute-api.us-east-2.amazonaws.com/abundance-stage/queryLikedProjects?"+x;return(await fetch(D)).json()}else if(n=="recents"){x="attribute=searchField"+C+"&user="+r+N;const $="https://hg5gsgv9te.execute-api.us-east-2.amazonaws.com/abundance-stage/queryRecentProjects?"+x;return(await fetch($)).json()}}const T="https://hg5gsgv9te.execute-api.us-east-2.amazonaws.com/abundance-stage/scan-search-abundance?"+x;return console.log(T),(await fetch(T)).json()};A().then(N=>{l([]),S(o.loading),N.repos.length==0&&n=="owned"?(S(o.noProjects),M().then(()=>{A().then(C=>{l(C.repos)})})):N.repos.length==0?S(o.noProjects):(l(N.repos),c(N.lastKey))}).catch(N=>{alert("Error loading projects from database. Please try again later. "+N)})},[h,f,n,v]);let b=[];if(a.length>0){var g=[];a.forEach(x=>{g.push(x)}),b=[...g]}const w=x=>{x.code=="Enter"&&(m(x.target.value),d(0))};return se.jsx(se.Fragment,{children:se.jsxs("div",{className:"login-content-div",children:[se.jsxs("div",{className:"left-login-div",children:[se.jsx("div",{className:"login-nav-item",onClick:()=>{e(!0)},children:se.jsx("p",{children:"New project"})}),se.jsx("div",{className:"login-nav-item"+(n=="owned"?" login-nav-item-clicked":""),onClick:x=>{t("owned")},children:se.jsx("p",{children:"My Projects"})}),se.jsx("div",{className:"login-nav-item"+(n=="recents"?" login-nav-item-clicked":""),onClick:()=>{t("recents")},children:se.jsx("p",{children:" Recent Projects"})}),se.jsx("div",{className:"login-nav-item"+(n=="liked"?" login-nav-item-clicked":""),onClick:()=>{t("liked")},children:se.jsx("p",{children:" Liked Projects"})}),se.jsx("div",{className:"login-nav-item"+(n=="featured"?" login-nav-item-clicked":""),onClick:()=>{t("featured")},children:se.jsx("p",{children:" Browse Featured Projects"})}),se.jsx("div",{className:"login-nav-item"+(n=="all"?" login-nav-item-clicked":""),onClick:()=>{t("all")},children:se.jsx("p",{children:" Browse All Other Projects"})})]}),se.jsxs("div",{className:"right-login-div",children:[se.jsxs("span",{style:{fontFamily:"Roboto"},children:["Welcome to Abundance ",O.currentUser]}),se.jsx("div",{className:"home-section",children:n=="owned"?"My Projects":n=="liked"?"My Liked Projects":n=="all"?"Browsing Projects":n=="featured"?"Featured Projects":n=="recents"?"Recent Projects":null}),se.jsx("hr",{width:"100%",color:"#D3D3D3"}),se.jsxs("div",{className:"search-bar-div",children:[a.length>1?se.jsxs("div",{style:{display:"flex",flexDirection:"row",margin:"0px 10px 0px 10px"},children:[se.jsx("button",{onClick:()=>{f>0&&d(f-1)},className:"page_back_button",children:""}),se.jsx("button",{className:"page_forward_button",onClick:()=>{u!=""&&d(f+1)},children:""})]}):null,se.jsx("input",{type:"text",placeholder:h,onKeyDown:x=>{w(x)},className:"menu_search searchButton",id:"project_search"},"project-search-bar"),se.jsxs("button",{className:"list_thumb_button",children:[se.jsx("img",{src:"/imgs/search_icon.svg",alt:"search",style:{width:"20px",color:"white",marginRight:"5px",opacity:"0.5"}}),n=="all"?se.jsxs("label",{htmlFor:"year-by",children:[se.jsx("img",{src:"/imgs/sort.svg",alt:"year-show",style:{width:"15px"}}),se.jsxs("select",{className:"order_dropdown",id:"year-by",defaultValue:2024,onChange:x=>y(x.target.value),children:[se.jsx("option",{value:"2024",children:"2024"},"2024_projects"),se.jsx("option",{value:"2023",children:"2023"},"2023_projects"),se.jsx("option",{value:"2022",children:"2022"},"2022_projects")]})]}):null]})]}),a.length>0?se.jsx(fFe,{setYearShow:y,nodes:b,authorizedUserOcto:i,user:r}):p]})]})})};function pFe({tryLogin:n,authorizedUserOcto:e,exportPopUp:t,setExportPopUp:r}){const i={0:null},[s,o]=k.useState("recents");let a;return t&&e?a=se.jsx(iK,{setExportPopUp:r,authorizedUserOcto:e,exporting:!1}):e?a=se.jsx(hFe,{projectToShow:s,setExportPopUp:r,setProjectsToShow:o,user:O.currentUser,authorizedUserOcto:e,pageDict:i}):a=se.jsx(cFe,{tryLogin:n}),se.jsxs("div",{className:"login-popup",id:"projects-popup",style:{padding:"0",border:"10px solid #3e3d3d"},children:[se.jsxs("div",{children:[" ",O.currentRepo?se.jsx(f0,{to:`/${O.currentRepo.owner}/${O.currentRepo.repoName}`,children:se.jsx("button",{className:"closeButton",onClick:()=>{r(!1)},children:se.jsx("img",{})})}):null]}),se.jsx("div",{className:"top-banner",style:{margin:"35px 0 0 30px"},children:se.jsxs("div",{id:"welcome-logo",style:{display:"flex",margin:"10px 10px",alignItems:"center"},children:[se.jsx("img",{src:"/imgs/abundance_logo.png",alt:"logo",style:{width:"40px",height:"40px",borderRadius:"50%"}}),se.jsx("img",{src:"/imgs/abundance_lettering.png",alt:"logo",style:{height:"20px",padding:"10px"}})]})}),a]})}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Ym="161",Wf={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},jf={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},sK=0,uD=1,oK=2,mFe=3,aK=0,jE=1,Lv=2,Sa=3,Pu=0,as=1,ns=2,bu=0,vd=1,cD=2,fD=3,dD=4,lK=5,yc=100,uK=101,cK=102,hD=103,pD=104,fK=200,dK=201,hK=202,pK=203,v_=204,y_=205,mK=206,gK=207,vK=208,yK=209,xK=210,bK=211,wK=212,SK=213,_K=214,EK=0,MK=1,CK=2,C0=3,AK=4,TK=5,DK=6,NK=7,Oy=0,PK=1,RK=2,Al=0,OK=1,kK=2,IK=3,lO=4,LK=5,FK=6,mD="attached",BK="detached",GE=300,Ru=301,ef=302,A0=303,T0=304,Km=306,D0=1e3,rs=1001,N0=1002,Ur=1003,x_=1004,gFe=1004,Yf=1005,vFe=1005,lr=1006,Fv=1007,yFe=1007,xl=1008,xFe=1008,Tl=1009,zK=1010,UK=1011,qE=1012,uO=1013,pu=1014,vo=1015,kd=1016,cO=1017,fO=1018,zc=1020,$K=1021,Ss=1023,VK=1024,HK=1025,Uc=1026,Id=1027,WK=1028,dO=1029,jK=1030,hO=1031,pO=1033,Iw=33776,Lw=33777,Fw=33778,Bw=33779,gD=35840,vD=35841,yD=35842,xD=35843,mO=36196,bD=37492,wD=37496,SD=37808,_D=37809,ED=37810,MD=37811,CD=37812,AD=37813,TD=37814,DD=37815,ND=37816,PD=37817,RD=37818,OD=37819,kD=37820,ID=37821,zw=36492,LD=36494,FD=36495,GK=36283,BD=36284,zD=36285,UD=36286,qK=2200,XK=2201,YK=2202,P0=2300,R0=2301,Uw=2302,od=2400,ad=2401,O0=2402,XE=2500,gO=2501,bFe=0,wFe=1,SFe=2,vO=3e3,$c=3001,KK=3200,ZK=3201,gf=0,JK=1,yo="",ri="srgb",Ll="srgb-linear",YE="display-p3",ky="display-p3-linear",k0="linear",nr="srgb",I0="rec709",L0="p3",_Fe=0,Gf=7680,EFe=7681,MFe=7682,CFe=7683,AFe=34055,TFe=34056,DFe=5386,NFe=512,PFe=513,RFe=514,OFe=515,kFe=516,IFe=517,LFe=518,$D=519,QK=512,eZ=513,tZ=514,yO=515,nZ=516,rZ=517,iZ=518,sZ=519,F0=35044,FFe=35048,BFe=35040,zFe=35045,UFe=35049,$Fe=35041,VFe=35046,HFe=35050,WFe=35042,jFe="100",VD="300 es",b_=1035,bl=2e3,B0=2001;class zl{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const Yi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let QU=1234567;const yd=Math.PI/180,gm=180/Math.PI;function Co(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Yi[n&255]+Yi[n>>8&255]+Yi[n>>16&255]+Yi[n>>24&255]+"-"+Yi[e&255]+Yi[e>>8&255]+"-"+Yi[e>>16&15|64]+Yi[e>>24&255]+"-"+Yi[t&63|128]+Yi[t>>8&255]+"-"+Yi[t>>16&255]+Yi[t>>24&255]+Yi[r&255]+Yi[r>>8&255]+Yi[r>>16&255]+Yi[r>>24&255]).toLowerCase()}function Rr(n,e,t){return Math.max(e,Math.min(t,n))}function xO(n,e){return(n%e+e)%e}function GFe(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function qFe(n,e,t){return n!==e?(t-n)/(e-n):0}function Bv(n,e,t){return(1-t)*n+t*e}function XFe(n,e,t,r){return Bv(n,e,1-Math.exp(-t*r))}function YFe(n,e=1){return e-Math.abs(xO(n,e*2)-e)}function KFe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function ZFe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function JFe(n,e){return n+Math.floor(Math.random()*(e-n+1))}function QFe(n,e){return n+Math.random()*(e-n)}function e4e(n){return n*(.5-Math.random())}function t4e(n){n!==void 0&&(QU=n);let e=QU+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function n4e(n){return n*yd}function r4e(n){return n*gm}function HD(n){return(n&n-1)===0&&n!==0}function i4e(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function w_(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function s4e(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),u=s((e+r)/2),c=o((e+r)/2),f=s((e-r)/2),d=o((e-r)/2),h=s((r-e)/2),m=o((r-e)/2);switch(i){case"XYX":n.set(a*c,l*f,l*d,a*u);break;case"YZY":n.set(l*d,a*c,l*f,a*u);break;case"ZXZ":n.set(l*f,l*d,a*c,a*u);break;case"XZX":n.set(a*c,l*m,l*h,a*u);break;case"YXY":n.set(l*h,a*c,l*m,a*u);break;case"ZYZ":n.set(l*m,l*h,a*c,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function _s(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function ln(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const KE={DEG2RAD:yd,RAD2DEG:gm,generateUUID:Co,clamp:Rr,euclideanModulo:xO,mapLinear:GFe,inverseLerp:qFe,lerp:Bv,damp:XFe,pingpong:YFe,smoothstep:KFe,smootherstep:ZFe,randInt:JFe,randFloat:QFe,randFloatSpread:e4e,seededRandom:t4e,degToRad:n4e,radToDeg:r4e,isPowerOfTwo:HD,ceilPowerOfTwo:i4e,floorPowerOfTwo:w_,setQuaternionFromProperEuler:s4e,normalize:ln,denormalize:_s};class et{constructor(e=0,t=0){et.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Rr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class pn{constructor(e,t,r,i,s,o,a,l,u){pn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,u)}set(e,t,r,i,s,o,a,l,u){const c=this.elements;return c[0]=e,c[1]=i,c[2]=a,c[3]=t,c[4]=s,c[5]=l,c[6]=r,c[7]=o,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],u=r[1],c=r[4],f=r[7],d=r[2],h=r[5],m=r[8],v=i[0],y=i[3],p=i[6],S=i[1],b=i[4],g=i[7],w=i[2],x=i[5],M=i[8];return s[0]=o*v+a*S+l*w,s[3]=o*y+a*b+l*x,s[6]=o*p+a*g+l*M,s[1]=u*v+c*S+f*w,s[4]=u*y+c*b+f*x,s[7]=u*p+c*g+f*M,s[2]=d*v+h*S+m*w,s[5]=d*y+h*b+m*x,s[8]=d*p+h*g+m*M,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8];return t*o*c-t*a*u-r*s*c+r*a*l+i*s*u-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],f=c*o-a*u,d=a*l-c*s,h=u*s-o*l,m=t*f+r*d+i*h;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/m;return e[0]=f*v,e[1]=(i*u-c*r)*v,e[2]=(a*r-i*o)*v,e[3]=d*v,e[4]=(c*t-i*l)*v,e[5]=(i*s-a*t)*v,e[6]=h*v,e[7]=(r*l-u*t)*v,e[8]=(o*t-r*s)*v,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(r*l,r*u,-r*(l*o+u*a)+o+e,-i*u,i*l,-i*(-u*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply($C.makeScale(e,t)),this}rotate(e){return this.premultiply($C.makeRotation(-e)),this}translate(e,t){return this.premultiply($C.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const $C=new pn;function oZ(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const o4e={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Mp(n,e){return new o4e[n](e)}function z0(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function aZ(){const n=z0("canvas");return n.style.display="block",n}const e6={};function xd(n){n in e6||(e6[n]=!0,console.warn(n))}const t6=new pn().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),n6=new pn().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Hx={[Ll]:{transfer:k0,primaries:I0,toReference:n=>n,fromReference:n=>n},[ri]:{transfer:nr,primaries:I0,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[ky]:{transfer:k0,primaries:L0,toReference:n=>n.applyMatrix3(n6),fromReference:n=>n.applyMatrix3(t6)},[YE]:{transfer:nr,primaries:L0,toReference:n=>n.convertSRGBToLinear().applyMatrix3(n6),fromReference:n=>n.applyMatrix3(t6).convertLinearToSRGB()}},a4e=new Set([Ll,ky]),$n={enabled:!0,_workingColorSpace:Ll,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!a4e.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=Hx[e].toReference,i=Hx[t].fromReference;return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return Hx[n].primaries},getTransfer:function(n){return n===yo?k0:Hx[n].transfer}};function Gp(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function VC(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Ah;class bO{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Ah===void 0&&(Ah=z0("canvas")),Ah.width=e.width,Ah.height=e.height;const r=Ah.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Ah}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=z0("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Gp(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Gp(t[r]/255)*255):t[r]=Gp(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let l4e=0;class ld{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:l4e++}),this.uuid=Co(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(HC(i[o].image)):s.push(HC(i[o]))}else s=HC(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function HC(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?bO.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let u4e=0;class Er extends zl{constructor(e=Er.DEFAULT_IMAGE,t=Er.DEFAULT_MAPPING,r=rs,i=rs,s=lr,o=xl,a=Ss,l=Tl,u=Er.DEFAULT_ANISOTROPY,c=yo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:u4e++}),this.uuid=Co(),this.name="",this.source=new ld(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new et(0,0),this.repeat=new et(1,1),this.center=new et(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new pn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof c=="string"?this.colorSpace=c:(xd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=c===$c?ri:yo),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==GE)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case D0:e.x=e.x-Math.floor(e.x);break;case rs:e.x=e.x<0?0:1;break;case N0:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case D0:e.y=e.y-Math.floor(e.y);break;case rs:e.y=e.y<0?0:1;break;case N0:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return xd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===ri?$c:vO}set encoding(e){xd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===$c?ri:yo}}Er.DEFAULT_IMAGE=null;Er.DEFAULT_MAPPING=GE;Er.DEFAULT_ANISOTROPY=1;class En{constructor(e=0,t=0,r=0,i=1){En.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,u=l[0],c=l[4],f=l[8],d=l[1],h=l[5],m=l[9],v=l[2],y=l[6],p=l[10];if(Math.abs(c-d)<.01&&Math.abs(f-v)<.01&&Math.abs(m-y)<.01){if(Math.abs(c+d)<.1&&Math.abs(f+v)<.1&&Math.abs(m+y)<.1&&Math.abs(u+h+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const b=(u+1)/2,g=(h+1)/2,w=(p+1)/2,x=(c+d)/4,M=(f+v)/4,A=(m+y)/4;return b>g&&b>w?b<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(b),i=x/r,s=M/r):g>w?g<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(g),r=x/i,s=A/i):w<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(w),r=M/s,i=A/s),this.set(r,i,s,t),this}let S=Math.sqrt((y-m)*(y-m)+(f-v)*(f-v)+(d-c)*(d-c));return Math.abs(S)<.001&&(S=1),this.x=(y-m)/S,this.y=(f-v)/S,this.z=(d-c)/S,this.w=Math.acos((u+h+p-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class lZ extends zl{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new En(0,0,e,t),this.scissorTest=!1,this.viewport=new En(0,0,e,t);const i={width:e,height:t,depth:1};r.encoding!==void 0&&(xd("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===$c?ri:yo),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:lr,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},r),this.texture=new Er(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps,this.texture.internalFormat=r.internalFormat,this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new ld(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class la extends lZ{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class ZE extends Er{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Ur,this.minFilter=Ur,this.wrapR=rs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class c4e extends la{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new ZE(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class wO extends Er{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Ur,this.minFilter=Ur,this.wrapR=rs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class f4e extends la{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new wO(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class d4e extends la{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class Kr{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],u=r[i+1],c=r[i+2],f=r[i+3];const d=s[o+0],h=s[o+1],m=s[o+2],v=s[o+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=c,e[t+3]=f;return}if(a===1){e[t+0]=d,e[t+1]=h,e[t+2]=m,e[t+3]=v;return}if(f!==v||l!==d||u!==h||c!==m){let y=1-a;const p=l*d+u*h+c*m+f*v,S=p>=0?1:-1,b=1-p*p;if(b>Number.EPSILON){const w=Math.sqrt(b),x=Math.atan2(w,p*S);y=Math.sin(y*x)/w,a=Math.sin(a*x)/w}const g=a*S;if(l=l*y+d*g,u=u*y+h*g,c=c*y+m*g,f=f*y+v*g,y===1-a){const w=1/Math.sqrt(l*l+u*u+c*c+f*f);l*=w,u*=w,c*=w,f*=w}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=f}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],u=r[i+2],c=r[i+3],f=s[o],d=s[o+1],h=s[o+2],m=s[o+3];return e[t]=a*m+c*f+l*h-u*d,e[t+1]=l*m+c*d+u*f-a*h,e[t+2]=u*m+c*h+a*d-l*f,e[t+3]=c*m-a*f-l*d-u*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(r/2),c=a(i/2),f=a(s/2),d=l(r/2),h=l(i/2),m=l(s/2);switch(o){case"XYZ":this._x=d*c*f+u*h*m,this._y=u*h*f-d*c*m,this._z=u*c*m+d*h*f,this._w=u*c*f-d*h*m;break;case"YXZ":this._x=d*c*f+u*h*m,this._y=u*h*f-d*c*m,this._z=u*c*m-d*h*f,this._w=u*c*f+d*h*m;break;case"ZXY":this._x=d*c*f-u*h*m,this._y=u*h*f+d*c*m,this._z=u*c*m+d*h*f,this._w=u*c*f-d*h*m;break;case"ZYX":this._x=d*c*f-u*h*m,this._y=u*h*f+d*c*m,this._z=u*c*m-d*h*f,this._w=u*c*f+d*h*m;break;case"YZX":this._x=d*c*f+u*h*m,this._y=u*h*f+d*c*m,this._z=u*c*m-d*h*f,this._w=u*c*f-d*h*m;break;case"XZY":this._x=d*c*f-u*h*m,this._y=u*h*f-d*c*m,this._z=u*c*m+d*h*f,this._w=u*c*f+d*h*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],u=t[2],c=t[6],f=t[10],d=r+a+f;if(d>0){const h=.5/Math.sqrt(d+1);this._w=.25/h,this._x=(c-l)*h,this._y=(s-u)*h,this._z=(o-i)*h}else if(r>a&&r>f){const h=2*Math.sqrt(1+r-a-f);this._w=(c-l)/h,this._x=.25*h,this._y=(i+o)/h,this._z=(s+u)/h}else if(a>f){const h=2*Math.sqrt(1+a-r-f);this._w=(s-u)/h,this._x=(i+o)/h,this._y=.25*h,this._z=(l+c)/h}else{const h=2*Math.sqrt(1+f-r-a);this._w=(o-i)/h,this._x=(s+u)/h,this._y=(l+c)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Rr(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,u=t._z,c=t._w;return this._x=r*c+o*a+i*u-s*l,this._y=i*c+o*l+s*a-r*u,this._z=s*c+o*u+r*l-i*a,this._w=o*c-r*a-i*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const h=1-t;return this._w=h*o+t*this._w,this._x=h*r+t*this._x,this._y=h*i+t*this._y,this._z=h*s+t*this._z,this.normalize(),this}const u=Math.sqrt(l),c=Math.atan2(u,a),f=Math.sin((1-t)*c)/u,d=Math.sin(t*c)/u;return this._w=o*f+this._w*d,this._x=r*f+this._x*d,this._y=i*f+this._y*d,this._z=s*f+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(s),r*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class le{constructor(e=0,t=0,r=0){le.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(r6.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(r6.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=2*(o*i-a*r),c=2*(a*t-s*i),f=2*(s*r-o*t);return this.x=t+l*u+o*f-a*c,this.y=r+l*c+a*u-s*f,this.z=i+l*f+s*c-o*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return WC.copy(this).projectOnVector(e),this.sub(WC)}reflect(e){return this.sub(WC.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Rr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const WC=new le,r6=new Kr;class Zr{constructor(e=new le(1/0,1/0,1/0),t=new le(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(ya.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(ya.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=ya.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,ya):ya.fromBufferAttribute(s,o),ya.applyMatrix4(e.matrixWorld),this.expandByPoint(ya);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Wx.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),Wx.copy(r.boundingBox)),Wx.applyMatrix4(e.matrixWorld),this.union(Wx)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ya),ya.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Bg),jx.subVectors(this.max,Bg),Th.subVectors(e.a,Bg),Dh.subVectors(e.b,Bg),Nh.subVectors(e.c,Bg),ec.subVectors(Dh,Th),tc.subVectors(Nh,Dh),Nf.subVectors(Th,Nh);let t=[0,-ec.z,ec.y,0,-tc.z,tc.y,0,-Nf.z,Nf.y,ec.z,0,-ec.x,tc.z,0,-tc.x,Nf.z,0,-Nf.x,-ec.y,ec.x,0,-tc.y,tc.x,0,-Nf.y,Nf.x,0];return!jC(t,Th,Dh,Nh,jx)||(t=[1,0,0,0,1,0,0,0,1],!jC(t,Th,Dh,Nh,jx))?!1:(Gx.crossVectors(ec,tc),t=[Gx.x,Gx.y,Gx.z],jC(t,Th,Dh,Nh,jx))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ya).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ya).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ql[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ql[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ql[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ql[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ql[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ql[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ql[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ql[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ql),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ql=[new le,new le,new le,new le,new le,new le,new le,new le],ya=new le,Wx=new Zr,Th=new le,Dh=new le,Nh=new le,ec=new le,tc=new le,Nf=new le,Bg=new le,jx=new le,Gx=new le,Pf=new le;function jC(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){Pf.fromArray(n,s);const a=i.x*Math.abs(Pf.x)+i.y*Math.abs(Pf.y)+i.z*Math.abs(Pf.z),l=e.dot(Pf),u=t.dot(Pf),c=r.dot(Pf);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>a)return!1}return!0}const h4e=new Zr,zg=new le,GC=new le;class bi{constructor(e=new le,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):h4e.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;zg.subVectors(e,this.center);const t=zg.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(zg,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(GC.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(zg.copy(e.center).add(GC)),this.expandByPoint(zg.copy(e.center).sub(GC))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const eu=new le,qC=new le,qx=new le,nc=new le,XC=new le,Xx=new le,YC=new le;class Vu{constructor(e=new le,t=new le(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,eu)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=eu.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(eu.copy(this.origin).addScaledVector(this.direction,t),eu.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){qC.copy(e).add(t).multiplyScalar(.5),qx.copy(t).sub(e).normalize(),nc.copy(this.origin).sub(qC);const s=e.distanceTo(t)*.5,o=-this.direction.dot(qx),a=nc.dot(this.direction),l=-nc.dot(qx),u=nc.lengthSq(),c=Math.abs(1-o*o);let f,d,h,m;if(c>0)if(f=o*l-a,d=o*a-l,m=s*c,f>=0)if(d>=-m)if(d<=m){const v=1/c;f*=v,d*=v,h=f*(f+o*d+2*a)+d*(o*f+d+2*l)+u}else d=s,f=Math.max(0,-(o*d+a)),h=-f*f+d*(d+2*l)+u;else d=-s,f=Math.max(0,-(o*d+a)),h=-f*f+d*(d+2*l)+u;else d<=-m?(f=Math.max(0,-(-o*s+a)),d=f>0?-s:Math.min(Math.max(-s,-l),s),h=-f*f+d*(d+2*l)+u):d<=m?(f=0,d=Math.min(Math.max(-s,-l),s),h=d*(d+2*l)+u):(f=Math.max(0,-(o*s+a)),d=f>0?s:Math.min(Math.max(-s,-l),s),h=-f*f+d*(d+2*l)+u);else d=o>0?-s:s,f=Math.max(0,-(o*d+a)),h=-f*f+d*(d+2*l)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,f),i&&i.copy(qC).addScaledVector(qx,d),h}intersectSphere(e,t){eu.subVectors(e.center,this.origin);const r=eu.dot(this.direction),i=eu.dot(eu)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const u=1/this.direction.x,c=1/this.direction.y,f=1/this.direction.z,d=this.origin;return u>=0?(r=(e.min.x-d.x)*u,i=(e.max.x-d.x)*u):(r=(e.max.x-d.x)*u,i=(e.min.x-d.x)*u),c>=0?(s=(e.min.y-d.y)*c,o=(e.max.y-d.y)*c):(s=(e.max.y-d.y)*c,o=(e.min.y-d.y)*c),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),f>=0?(a=(e.min.z-d.z)*f,l=(e.max.z-d.z)*f):(a=(e.max.z-d.z)*f,l=(e.min.z-d.z)*f),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,eu)!==null}intersectTriangle(e,t,r,i,s){XC.subVectors(t,e),Xx.subVectors(r,e),YC.crossVectors(XC,Xx);let o=this.direction.dot(YC),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;nc.subVectors(this.origin,e);const l=a*this.direction.dot(Xx.crossVectors(nc,Xx));if(l<0)return null;const u=a*this.direction.dot(XC.cross(nc));if(u<0||l+u>o)return null;const c=-a*nc.dot(YC);return c<0?null:this.at(c/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class wt{constructor(e,t,r,i,s,o,a,l,u,c,f,d,h,m,v,y){wt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,u,c,f,d,h,m,v,y)}set(e,t,r,i,s,o,a,l,u,c,f,d,h,m,v,y){const p=this.elements;return p[0]=e,p[4]=t,p[8]=r,p[12]=i,p[1]=s,p[5]=o,p[9]=a,p[13]=l,p[2]=u,p[6]=c,p[10]=f,p[14]=d,p[3]=h,p[7]=m,p[11]=v,p[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new wt().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Ph.setFromMatrixColumn(e,0).length(),s=1/Ph.setFromMatrixColumn(e,1).length(),o=1/Ph.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),u=Math.sin(i),c=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const d=o*c,h=o*f,m=a*c,v=a*f;t[0]=l*c,t[4]=-l*f,t[8]=u,t[1]=h+m*u,t[5]=d-v*u,t[9]=-a*l,t[2]=v-d*u,t[6]=m+h*u,t[10]=o*l}else if(e.order==="YXZ"){const d=l*c,h=l*f,m=u*c,v=u*f;t[0]=d+v*a,t[4]=m*a-h,t[8]=o*u,t[1]=o*f,t[5]=o*c,t[9]=-a,t[2]=h*a-m,t[6]=v+d*a,t[10]=o*l}else if(e.order==="ZXY"){const d=l*c,h=l*f,m=u*c,v=u*f;t[0]=d-v*a,t[4]=-o*f,t[8]=m+h*a,t[1]=h+m*a,t[5]=o*c,t[9]=v-d*a,t[2]=-o*u,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const d=o*c,h=o*f,m=a*c,v=a*f;t[0]=l*c,t[4]=m*u-h,t[8]=d*u+v,t[1]=l*f,t[5]=v*u+d,t[9]=h*u-m,t[2]=-u,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const d=o*l,h=o*u,m=a*l,v=a*u;t[0]=l*c,t[4]=v-d*f,t[8]=m*f+h,t[1]=f,t[5]=o*c,t[9]=-a*c,t[2]=-u*c,t[6]=h*f+m,t[10]=d-v*f}else if(e.order==="XZY"){const d=o*l,h=o*u,m=a*l,v=a*u;t[0]=l*c,t[4]=-f,t[8]=u*c,t[1]=d*f+v,t[5]=o*c,t[9]=h*f-m,t[2]=m*f-h,t[6]=a*c,t[10]=v*f+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(p4e,e,m4e)}lookAt(e,t,r){const i=this.elements;return ao.subVectors(e,t),ao.lengthSq()===0&&(ao.z=1),ao.normalize(),rc.crossVectors(r,ao),rc.lengthSq()===0&&(Math.abs(r.z)===1?ao.x+=1e-4:ao.z+=1e-4,ao.normalize(),rc.crossVectors(r,ao)),rc.normalize(),Yx.crossVectors(ao,rc),i[0]=rc.x,i[4]=Yx.x,i[8]=ao.x,i[1]=rc.y,i[5]=Yx.y,i[9]=ao.y,i[2]=rc.z,i[6]=Yx.z,i[10]=ao.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],u=r[12],c=r[1],f=r[5],d=r[9],h=r[13],m=r[2],v=r[6],y=r[10],p=r[14],S=r[3],b=r[7],g=r[11],w=r[15],x=i[0],M=i[4],A=i[8],N=i[12],C=i[1],T=i[5],R=i[9],$=i[13],B=i[2],z=i[6],D=i[10],I=i[14],U=i[3],L=i[7],q=i[11],Z=i[15];return s[0]=o*x+a*C+l*B+u*U,s[4]=o*M+a*T+l*z+u*L,s[8]=o*A+a*R+l*D+u*q,s[12]=o*N+a*$+l*I+u*Z,s[1]=c*x+f*C+d*B+h*U,s[5]=c*M+f*T+d*z+h*L,s[9]=c*A+f*R+d*D+h*q,s[13]=c*N+f*$+d*I+h*Z,s[2]=m*x+v*C+y*B+p*U,s[6]=m*M+v*T+y*z+p*L,s[10]=m*A+v*R+y*D+p*q,s[14]=m*N+v*$+y*I+p*Z,s[3]=S*x+b*C+g*B+w*U,s[7]=S*M+b*T+g*z+w*L,s[11]=S*A+b*R+g*D+w*q,s[15]=S*N+b*$+g*I+w*Z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],c=e[2],f=e[6],d=e[10],h=e[14],m=e[3],v=e[7],y=e[11],p=e[15];return m*(+s*l*f-i*u*f-s*a*d+r*u*d+i*a*h-r*l*h)+v*(+t*l*h-t*u*d+s*o*d-i*o*h+i*u*c-s*l*c)+y*(+t*u*f-t*a*h-s*o*f+r*o*h+s*a*c-r*u*c)+p*(-i*a*c-t*l*f+t*a*d+i*o*f-r*o*d+r*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],f=e[9],d=e[10],h=e[11],m=e[12],v=e[13],y=e[14],p=e[15],S=f*y*u-v*d*u+v*l*h-a*y*h-f*l*p+a*d*p,b=m*d*u-c*y*u-m*l*h+o*y*h+c*l*p-o*d*p,g=c*v*u-m*f*u+m*a*h-o*v*h-c*a*p+o*f*p,w=m*f*l-c*v*l-m*a*d+o*v*d+c*a*y-o*f*y,x=t*S+r*b+i*g+s*w;if(x===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const M=1/x;return e[0]=S*M,e[1]=(v*d*s-f*y*s-v*i*h+r*y*h+f*i*p-r*d*p)*M,e[2]=(a*y*s-v*l*s+v*i*u-r*y*u-a*i*p+r*l*p)*M,e[3]=(f*l*s-a*d*s-f*i*u+r*d*u+a*i*h-r*l*h)*M,e[4]=b*M,e[5]=(c*y*s-m*d*s+m*i*h-t*y*h-c*i*p+t*d*p)*M,e[6]=(m*l*s-o*y*s-m*i*u+t*y*u+o*i*p-t*l*p)*M,e[7]=(o*d*s-c*l*s+c*i*u-t*d*u-o*i*h+t*l*h)*M,e[8]=g*M,e[9]=(m*f*s-c*v*s-m*r*h+t*v*h+c*r*p-t*f*p)*M,e[10]=(o*v*s-m*a*s+m*r*u-t*v*u-o*r*p+t*a*p)*M,e[11]=(c*a*s-o*f*s-c*r*u+t*f*u+o*r*h-t*a*h)*M,e[12]=w*M,e[13]=(c*v*i-m*f*i+m*r*d-t*v*d-c*r*y+t*f*y)*M,e[14]=(m*a*i-o*v*i-m*r*l+t*v*l+o*r*y-t*a*y)*M,e[15]=(o*f*i-c*a*i+c*r*l-t*f*l-o*r*d+t*a*d)*M,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,u=s*o,c=s*a;return this.set(u*o+r,u*a-i*l,u*l+i*a,0,u*a+i*l,c*a+r,c*l-i*o,0,u*l-i*a,c*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,u=s+s,c=o+o,f=a+a,d=s*u,h=s*c,m=s*f,v=o*c,y=o*f,p=a*f,S=l*u,b=l*c,g=l*f,w=r.x,x=r.y,M=r.z;return i[0]=(1-(v+p))*w,i[1]=(h+g)*w,i[2]=(m-b)*w,i[3]=0,i[4]=(h-g)*x,i[5]=(1-(d+p))*x,i[6]=(y+S)*x,i[7]=0,i[8]=(m+b)*M,i[9]=(y-S)*M,i[10]=(1-(d+v))*M,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=Ph.set(i[0],i[1],i[2]).length();const o=Ph.set(i[4],i[5],i[6]).length(),a=Ph.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],xa.copy(this);const u=1/s,c=1/o,f=1/a;return xa.elements[0]*=u,xa.elements[1]*=u,xa.elements[2]*=u,xa.elements[4]*=c,xa.elements[5]*=c,xa.elements[6]*=c,xa.elements[8]*=f,xa.elements[9]*=f,xa.elements[10]*=f,t.setFromRotationMatrix(xa),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o,a=bl){const l=this.elements,u=2*s/(t-e),c=2*s/(r-i),f=(t+e)/(t-e),d=(r+i)/(r-i);let h,m;if(a===bl)h=-(o+s)/(o-s),m=-2*o*s/(o-s);else if(a===B0)h=-o/(o-s),m=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=c,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=h,l[14]=m,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,s,o,a=bl){const l=this.elements,u=1/(t-e),c=1/(r-i),f=1/(o-s),d=(t+e)*u,h=(r+i)*c;let m,v;if(a===bl)m=(o+s)*f,v=-2*f;else if(a===B0)m=s*f,v=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-d,l[1]=0,l[5]=2*c,l[9]=0,l[13]=-h,l[2]=0,l[6]=0,l[10]=v,l[14]=-m,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const Ph=new le,xa=new wt,p4e=new le(0,0,0),m4e=new le(1,1,1),rc=new le,Yx=new le,ao=new le,i6=new wt,s6=new Kr;class Iy{constructor(e=0,t=0,r=0,i=Iy.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],u=i[5],c=i[9],f=i[2],d=i[6],h=i[10];switch(t){case"XYZ":this._y=Math.asin(Rr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Rr(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,h),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(Rr(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-f,h),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Rr(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(Rr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,h));break;case"XZY":this._z=Math.asin(-Rr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return i6.makeRotationFromQuaternion(e),this.setFromRotationMatrix(i6,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return s6.setFromEuler(this),this.setFromQuaternion(s6,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Iy.DEFAULT_ORDER="XYZ";class bd{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let g4e=0;const o6=new le,Rh=new Kr,tu=new wt,Kx=new le,Ug=new le,v4e=new le,y4e=new Kr,a6=new le(1,0,0),l6=new le(0,1,0),u6=new le(0,0,1),x4e={type:"added"},b4e={type:"removed"};class Mn extends zl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:g4e++}),this.uuid=Co(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Mn.DEFAULT_UP.clone();const e=new le,t=new Iy,r=new Kr,i=new le(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new wt},normalMatrix:{value:new pn}}),this.matrix=new wt,this.matrixWorld=new wt,this.matrixAutoUpdate=Mn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Mn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new bd,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Rh.setFromAxisAngle(e,t),this.quaternion.multiply(Rh),this}rotateOnWorldAxis(e,t){return Rh.setFromAxisAngle(e,t),this.quaternion.premultiply(Rh),this}rotateX(e){return this.rotateOnAxis(a6,e)}rotateY(e){return this.rotateOnAxis(l6,e)}rotateZ(e){return this.rotateOnAxis(u6,e)}translateOnAxis(e,t){return o6.copy(e).applyQuaternion(this.quaternion),this.position.add(o6.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(a6,e)}translateY(e){return this.translateOnAxis(l6,e)}translateZ(e){return this.translateOnAxis(u6,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(tu.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?Kx.copy(e):Kx.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Ug.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?tu.lookAt(Ug,Kx,this.up):tu.lookAt(Kx,Ug,this.up),this.quaternion.setFromRotationMatrix(tu),i&&(tu.extractRotation(i.matrixWorld),Rh.setFromRotationMatrix(tu),this.quaternion.premultiply(Rh.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(x4e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(b4e)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),tu.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),tu.multiply(e.parent.matrixWorld)),e.applyMatrix4(tu),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ug,e,v4e),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ug,y4e,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const s=t[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const f=l[u];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),c=o(e.images),f=o(e.shapes),d=o(e.skeletons),h=o(e.animations),m=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),c.length>0&&(r.images=c),f.length>0&&(r.shapes=f),d.length>0&&(r.skeletons=d),h.length>0&&(r.animations=h),m.length>0&&(r.nodes=m)}return r.object=i,r;function o(a){const l=[];for(const u in a){const c=a[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Mn.DEFAULT_UP=new le(0,1,0);Mn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Mn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ba=new le,nu=new le,KC=new le,ru=new le,Oh=new le,kh=new le,c6=new le,ZC=new le,JC=new le,QC=new le;class xo{constructor(e=new le,t=new le,r=new le){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),ba.subVectors(e,t),i.cross(ba);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){ba.subVectors(i,t),nu.subVectors(r,t),KC.subVectors(e,t);const o=ba.dot(ba),a=ba.dot(nu),l=ba.dot(KC),u=nu.dot(nu),c=nu.dot(KC),f=o*u-a*a;if(f===0)return s.set(0,0,0),null;const d=1/f,h=(u*l-a*c)*d,m=(o*c-a*l)*d;return s.set(1-h-m,m,h)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,ru)===null?!1:ru.x>=0&&ru.y>=0&&ru.x+ru.y<=1}static getInterpolation(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,ru)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,ru.x),l.addScaledVector(o,ru.y),l.addScaledVector(a,ru.z),l)}static isFrontFacing(e,t,r,i){return ba.subVectors(r,t),nu.subVectors(e,t),ba.cross(nu).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ba.subVectors(this.c,this.b),nu.subVectors(this.a,this.b),ba.cross(nu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return xo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return xo.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,i,s){return xo.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return xo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return xo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;Oh.subVectors(i,r),kh.subVectors(s,r),ZC.subVectors(e,r);const l=Oh.dot(ZC),u=kh.dot(ZC);if(l<=0&&u<=0)return t.copy(r);JC.subVectors(e,i);const c=Oh.dot(JC),f=kh.dot(JC);if(c>=0&&f<=c)return t.copy(i);const d=l*f-c*u;if(d<=0&&l>=0&&c<=0)return o=l/(l-c),t.copy(r).addScaledVector(Oh,o);QC.subVectors(e,s);const h=Oh.dot(QC),m=kh.dot(QC);if(m>=0&&h<=m)return t.copy(s);const v=h*u-l*m;if(v<=0&&u>=0&&m<=0)return a=u/(u-m),t.copy(r).addScaledVector(kh,a);const y=c*m-h*f;if(y<=0&&f-c>=0&&h-m>=0)return c6.subVectors(s,i),a=(f-c)/(f-c+(h-m)),t.copy(i).addScaledVector(c6,a);const p=1/(y+v+d);return o=v*p,a=d*p,t.copy(r).addScaledVector(Oh,o).addScaledVector(kh,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const uZ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ic={h:0,s:0,l:0},Zx={h:0,s:0,l:0};function eA(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class mt{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ri){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,$n.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=$n.workingColorSpace){return this.r=e,this.g=t,this.b=r,$n.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=$n.workingColorSpace){if(e=xO(e,1),t=Rr(t,0,1),r=Rr(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=eA(o,s,e+1/3),this.g=eA(o,s,e),this.b=eA(o,s,e-1/3)}return $n.toWorkingColorSpace(this,i),this}setStyle(e,t=ri){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=ri){const r=uZ[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Gp(e.r),this.g=Gp(e.g),this.b=Gp(e.b),this}copyLinearToSRGB(e){return this.r=VC(e.r),this.g=VC(e.g),this.b=VC(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ri){return $n.fromWorkingColorSpace(Ki.copy(this),e),Math.round(Rr(Ki.r*255,0,255))*65536+Math.round(Rr(Ki.g*255,0,255))*256+Math.round(Rr(Ki.b*255,0,255))}getHexString(e=ri){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=$n.workingColorSpace){$n.fromWorkingColorSpace(Ki.copy(this),t);const r=Ki.r,i=Ki.g,s=Ki.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,u;const c=(a+o)/2;if(a===o)l=0,u=0;else{const f=o-a;switch(u=c<=.5?f/(o+a):f/(2-o-a),o){case r:l=(i-s)/f+(i<s?6:0);break;case i:l=(s-r)/f+2;break;case s:l=(r-i)/f+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,t=$n.workingColorSpace){return $n.fromWorkingColorSpace(Ki.copy(this),t),e.r=Ki.r,e.g=Ki.g,e.b=Ki.b,e}getStyle(e=ri){$n.fromWorkingColorSpace(Ki.copy(this),e);const t=Ki.r,r=Ki.g,i=Ki.b;return e!==ri?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(ic),this.setHSL(ic.h+e,ic.s+t,ic.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(ic),e.getHSL(Zx);const r=Bv(ic.h,Zx.h,t),i=Bv(ic.s,Zx.s,t),s=Bv(ic.l,Zx.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ki=new mt;mt.NAMES=uZ;let w4e=0;class $i extends zl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:w4e++}),this.uuid=Co(),this.name="",this.type="Material",this.blending=vd,this.side=Pu,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=v_,this.blendDst=y_,this.blendEquation=yc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new mt(0,0,0),this.blendAlpha=0,this.depthFunc=C0,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=$D,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Gf,this.stencilZFail=Gf,this.stencilZPass=Gf,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==vd&&(r.blending=this.blending),this.side!==Pu&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==v_&&(r.blendSrc=this.blendSrc),this.blendDst!==y_&&(r.blendDst=this.blendDst),this.blendEquation!==yc&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==C0&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==$D&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Gf&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Gf&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Gf&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class vf extends $i{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new mt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Oy,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const uu=S4e();function S4e(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(r[l]=1024>>-u-14,r[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(r[l]=u+15<<10,r[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,c=0;for(;!(u&8388608);)u<<=1,c-=8388608;u&=-8388609,c+=947912704,s[l]=u|c}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function Us(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Rr(n,-65504,65504),uu.floatView[0]=n;const e=uu.uint32View[0],t=e>>23&511;return uu.baseTable[t]+((e&8388607)>>uu.shiftTable[t])}function mv(n){const e=n>>10;return uu.uint32View[0]=uu.mantissaTable[uu.offsetTable[e]+(n&1023)]+uu.exponentTable[e],uu.floatView[0]}const _4e={toHalfFloat:Us,fromHalfFloat:mv},Gr=new le,Jx=new et;class Fn{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=F0,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=vo,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return xd("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)Jx.fromBufferAttribute(this,t),Jx.applyMatrix3(e),this.setXY(t,Jx.x,Jx.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Gr.fromBufferAttribute(this,t),Gr.applyMatrix3(e),this.setXYZ(t,Gr.x,Gr.y,Gr.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Gr.fromBufferAttribute(this,t),Gr.applyMatrix4(e),this.setXYZ(t,Gr.x,Gr.y,Gr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Gr.fromBufferAttribute(this,t),Gr.applyNormalMatrix(e),this.setXYZ(t,Gr.x,Gr.y,Gr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Gr.fromBufferAttribute(this,t),Gr.transformDirection(e),this.setXYZ(t,Gr.x,Gr.y,Gr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=_s(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=ln(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=_s(t,this.array)),t}setX(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=_s(t,this.array)),t}setY(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=_s(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=_s(t,this.array)),t}setW(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array),i=ln(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array),i=ln(i,this.array),s=ln(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==F0&&(e.usage=this.usage),e}}class E4e extends Fn{constructor(e,t,r){super(new Int8Array(e),t,r)}}class M4e extends Fn{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class C4e extends Fn{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class A4e extends Fn{constructor(e,t,r){super(new Int16Array(e),t,r)}}class SO extends Fn{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class T4e extends Fn{constructor(e,t,r){super(new Int32Array(e),t,r)}}class _O extends Fn{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class D4e extends Fn{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=mv(this.array[e*this.itemSize]);return this.normalized&&(t=_s(t,this.array)),t}setX(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize]=Us(t),this}getY(e){let t=mv(this.array[e*this.itemSize+1]);return this.normalized&&(t=_s(t,this.array)),t}setY(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+1]=Us(t),this}getZ(e){let t=mv(this.array[e*this.itemSize+2]);return this.normalized&&(t=_s(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+2]=Us(t),this}getW(e){let t=mv(this.array[e*this.itemSize+3]);return this.normalized&&(t=_s(t,this.array)),t}setW(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+3]=Us(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array)),this.array[e+0]=Us(t),this.array[e+1]=Us(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array),i=ln(i,this.array)),this.array[e+0]=Us(t),this.array[e+1]=Us(r),this.array[e+2]=Us(i),this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array),i=ln(i,this.array),s=ln(s,this.array)),this.array[e+0]=Us(t),this.array[e+1]=Us(r),this.array[e+2]=Us(i),this.array[e+3]=Us(s),this}}class Ct extends Fn{constructor(e,t,r){super(new Float32Array(e),t,r)}}class N4e extends Fn{constructor(e,t,r){super(new Float64Array(e),t,r)}}let P4e=0;const jo=new wt,tA=new Mn,Ih=new le,lo=new Zr,$g=new Zr,gi=new le;class rn extends zl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:P4e++}),this.uuid=Co(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(oZ(e)?_O:SO)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new pn().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return jo.makeRotationFromQuaternion(e),this.applyMatrix4(jo),this}rotateX(e){return jo.makeRotationX(e),this.applyMatrix4(jo),this}rotateY(e){return jo.makeRotationY(e),this.applyMatrix4(jo),this}rotateZ(e){return jo.makeRotationZ(e),this.applyMatrix4(jo),this}translate(e,t,r){return jo.makeTranslation(e,t,r),this.applyMatrix4(jo),this}scale(e,t,r){return jo.makeScale(e,t,r),this.applyMatrix4(jo),this}lookAt(e){return tA.lookAt(e),tA.updateMatrix(),this.applyMatrix4(tA.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ih).negate(),this.translate(Ih.x,Ih.y,Ih.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ct(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Zr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new le(-1/0,-1/0,-1/0),new le(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];lo.setFromBufferAttribute(s),this.morphTargetsRelative?(gi.addVectors(this.boundingBox.min,lo.min),this.boundingBox.expandByPoint(gi),gi.addVectors(this.boundingBox.max,lo.max),this.boundingBox.expandByPoint(gi)):(this.boundingBox.expandByPoint(lo.min),this.boundingBox.expandByPoint(lo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new bi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new le,1/0);return}if(e){const r=this.boundingSphere.center;if(lo.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];$g.setFromBufferAttribute(a),this.morphTargetsRelative?(gi.addVectors(lo.min,$g.min),lo.expandByPoint(gi),gi.addVectors(lo.max,$g.max),lo.expandByPoint(gi)):(lo.expandByPoint($g.min),lo.expandByPoint($g.max))}lo.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)gi.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(gi));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let u=0,c=a.count;u<c;u++)gi.fromBufferAttribute(a,u),l&&(Ih.fromBufferAttribute(e,u),gi.add(Ih)),i=Math.max(i,r.distanceToSquared(gi))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Fn(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,u=[],c=[];for(let C=0;C<a;C++)u[C]=new le,c[C]=new le;const f=new le,d=new le,h=new le,m=new et,v=new et,y=new et,p=new le,S=new le;function b(C,T,R){f.fromArray(i,C*3),d.fromArray(i,T*3),h.fromArray(i,R*3),m.fromArray(o,C*2),v.fromArray(o,T*2),y.fromArray(o,R*2),d.sub(f),h.sub(f),v.sub(m),y.sub(m);const $=1/(v.x*y.y-y.x*v.y);isFinite($)&&(p.copy(d).multiplyScalar(y.y).addScaledVector(h,-v.y).multiplyScalar($),S.copy(h).multiplyScalar(v.x).addScaledVector(d,-y.x).multiplyScalar($),u[C].add(p),u[T].add(p),u[R].add(p),c[C].add(S),c[T].add(S),c[R].add(S))}let g=this.groups;g.length===0&&(g=[{start:0,count:r.length}]);for(let C=0,T=g.length;C<T;++C){const R=g[C],$=R.start,B=R.count;for(let z=$,D=$+B;z<D;z+=3)b(r[z+0],r[z+1],r[z+2])}const w=new le,x=new le,M=new le,A=new le;function N(C){M.fromArray(s,C*3),A.copy(M);const T=u[C];w.copy(T),w.sub(M.multiplyScalar(M.dot(T))).normalize(),x.crossVectors(A,T);const $=x.dot(c[C])<0?-1:1;l[C*4]=w.x,l[C*4+1]=w.y,l[C*4+2]=w.z,l[C*4+3]=$}for(let C=0,T=g.length;C<T;++C){const R=g[C],$=R.start,B=R.count;for(let z=$,D=$+B;z<D;z+=3)N(r[z+0]),N(r[z+1]),N(r[z+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Fn(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let d=0,h=r.count;d<h;d++)r.setXYZ(d,0,0,0);const i=new le,s=new le,o=new le,a=new le,l=new le,u=new le,c=new le,f=new le;if(e)for(let d=0,h=e.count;d<h;d+=3){const m=e.getX(d+0),v=e.getX(d+1),y=e.getX(d+2);i.fromBufferAttribute(t,m),s.fromBufferAttribute(t,v),o.fromBufferAttribute(t,y),c.subVectors(o,s),f.subVectors(i,s),c.cross(f),a.fromBufferAttribute(r,m),l.fromBufferAttribute(r,v),u.fromBufferAttribute(r,y),a.add(c),l.add(c),u.add(c),r.setXYZ(m,a.x,a.y,a.z),r.setXYZ(v,l.x,l.y,l.z),r.setXYZ(y,u.x,u.y,u.z)}else for(let d=0,h=t.count;d<h;d+=3)i.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),c.subVectors(o,s),f.subVectors(i,s),c.cross(f),r.setXYZ(d+0,c.x,c.y,c.z),r.setXYZ(d+1,c.x,c.y,c.z),r.setXYZ(d+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)gi.fromBufferAttribute(e,t),gi.normalize(),e.setXYZ(t,gi.x,gi.y,gi.z)}toNonIndexed(){function e(a,l){const u=a.array,c=a.itemSize,f=a.normalized,d=new u.constructor(l.length*c);let h=0,m=0;for(let v=0,y=l.length;v<y;v++){a.isInterleavedBufferAttribute?h=l[v]*a.data.stride+a.offset:h=l[v]*c;for(let p=0;p<c;p++)d[m++]=u[h++]}return new Fn(d,c,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new rn,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],u=e(l,r);t.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let c=0,f=u.length;c<f;c++){const d=u[c],h=e(d,r);l.push(h)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let f=0,d=u.length;f<d;f++){const h=u[f];c.push(h.toJSON(e.data))}c.length>0&&(i[l]=c,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const u in i){const c=i[u];this.setAttribute(u,c.clone(t))}const s=e.morphAttributes;for(const u in s){const c=[],f=s[u];for(let d=0,h=f.length;d<h;d++)c.push(f[d].clone(t));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,c=o.length;u<c;u++){const f=o[u];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const f6=new wt,Rf=new Vu,Qx=new bi,d6=new le,Lh=new le,Fh=new le,Bh=new le,nA=new le,eb=new le,tb=new et,nb=new et,rb=new et,h6=new le,p6=new le,m6=new le,ib=new le,sb=new le;class Vr extends Mn{constructor(e=new rn,t=new vf){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){eb.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const c=a[l],f=s[l];c!==0&&(nA.fromBufferAttribute(f,e),o?eb.addScaledVector(nA,c):eb.addScaledVector(nA.sub(t),c))}t.add(eb)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),Qx.copy(r.boundingSphere),Qx.applyMatrix4(s),Rf.copy(e.ray).recast(e.near),!(Qx.containsPoint(Rf.origin)===!1&&(Rf.intersectSphere(Qx,d6)===null||Rf.origin.distanceToSquared(d6)>(e.far-e.near)**2))&&(f6.copy(s).invert(),Rf.copy(e.ray).applyMatrix4(f6),!(r.boundingBox!==null&&Rf.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,Rf)))}_computeIntersections(e,t,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,u=s.attributes.uv,c=s.attributes.uv1,f=s.attributes.normal,d=s.groups,h=s.drawRange;if(a!==null)if(Array.isArray(o))for(let m=0,v=d.length;m<v;m++){const y=d[m],p=o[y.materialIndex],S=Math.max(y.start,h.start),b=Math.min(a.count,Math.min(y.start+y.count,h.start+h.count));for(let g=S,w=b;g<w;g+=3){const x=a.getX(g),M=a.getX(g+1),A=a.getX(g+2);i=ob(this,p,e,r,u,c,f,x,M,A),i&&(i.faceIndex=Math.floor(g/3),i.face.materialIndex=y.materialIndex,t.push(i))}}else{const m=Math.max(0,h.start),v=Math.min(a.count,h.start+h.count);for(let y=m,p=v;y<p;y+=3){const S=a.getX(y),b=a.getX(y+1),g=a.getX(y+2);i=ob(this,o,e,r,u,c,f,S,b,g),i&&(i.faceIndex=Math.floor(y/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let m=0,v=d.length;m<v;m++){const y=d[m],p=o[y.materialIndex],S=Math.max(y.start,h.start),b=Math.min(l.count,Math.min(y.start+y.count,h.start+h.count));for(let g=S,w=b;g<w;g+=3){const x=g,M=g+1,A=g+2;i=ob(this,p,e,r,u,c,f,x,M,A),i&&(i.faceIndex=Math.floor(g/3),i.face.materialIndex=y.materialIndex,t.push(i))}}else{const m=Math.max(0,h.start),v=Math.min(l.count,h.start+h.count);for(let y=m,p=v;y<p;y+=3){const S=y,b=y+1,g=y+2;i=ob(this,o,e,r,u,c,f,S,b,g),i&&(i.faceIndex=Math.floor(y/3),t.push(i))}}}}function R4e(n,e,t,r,i,s,o,a){let l;if(e.side===as?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===Pu,a),l===null)return null;sb.copy(a),sb.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(sb);return u<t.near||u>t.far?null:{distance:u,point:sb.clone(),object:n}}function ob(n,e,t,r,i,s,o,a,l,u){n.getVertexPosition(a,Lh),n.getVertexPosition(l,Fh),n.getVertexPosition(u,Bh);const c=R4e(n,e,t,r,Lh,Fh,Bh,ib);if(c){i&&(tb.fromBufferAttribute(i,a),nb.fromBufferAttribute(i,l),rb.fromBufferAttribute(i,u),c.uv=xo.getInterpolation(ib,Lh,Fh,Bh,tb,nb,rb,new et)),s&&(tb.fromBufferAttribute(s,a),nb.fromBufferAttribute(s,l),rb.fromBufferAttribute(s,u),c.uv1=xo.getInterpolation(ib,Lh,Fh,Bh,tb,nb,rb,new et),c.uv2=c.uv1),o&&(h6.fromBufferAttribute(o,a),p6.fromBufferAttribute(o,l),m6.fromBufferAttribute(o,u),c.normal=xo.getInterpolation(ib,Lh,Fh,Bh,h6,p6,m6,new le),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));const f={a,b:l,c:u,normal:new le,materialIndex:0};xo.getNormal(Lh,Fh,Bh,f.normal),c.face=f}return c}class Jd extends rn{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],c=[],f=[];let d=0,h=0;m("z","y","x",-1,-1,r,t,e,o,s,0),m("z","y","x",1,-1,r,t,-e,o,s,1),m("x","z","y",1,1,e,r,t,i,o,2),m("x","z","y",1,-1,e,r,-t,i,o,3),m("x","y","z",1,-1,e,t,r,i,s,4),m("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new Ct(u,3)),this.setAttribute("normal",new Ct(c,3)),this.setAttribute("uv",new Ct(f,2));function m(v,y,p,S,b,g,w,x,M,A,N){const C=g/M,T=w/A,R=g/2,$=w/2,B=x/2,z=M+1,D=A+1;let I=0,U=0;const L=new le;for(let q=0;q<D;q++){const Z=q*T-$;for(let J=0;J<z;J++){const Y=J*C-R;L[v]=Y*S,L[y]=Z*b,L[p]=B,u.push(L.x,L.y,L.z),L[v]=0,L[y]=0,L[p]=x>0?1:-1,c.push(L.x,L.y,L.z),f.push(J/M),f.push(1-q/A),I+=1}}for(let q=0;q<A;q++)for(let Z=0;Z<M;Z++){const J=d+Z+z*q,Y=d+Z+z*(q+1),ee=d+(Z+1)+z*(q+1),ae=d+(Z+1)+z*q;l.push(J,Y,ae),l.push(Y,ee,ae),U+=6}a.addGroup(h,U,N),h+=U,d+=I}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Jd(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function vm(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function ys(n){const e={};for(let t=0;t<n.length;t++){const r=vm(n[t]);for(const i in r)e[i]=r[i]}return e}function O4e(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function cZ(n){return n.getRenderTarget()===null?n.outputColorSpace:$n.workingColorSpace}const U0={clone:vm,merge:ys};var k4e=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,I4e=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Do extends $i{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=k4e,this.fragmentShader=I4e,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=vm(e.uniforms),this.uniformsGroups=O4e(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class Ly extends Mn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new wt,this.projectionMatrix=new wt,this.projectionMatrixInverse=new wt,this.coordinateSystem=bl}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const sc=new le,g6=new et,v6=new et;class pr extends Ly{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=gm*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(yd*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return gm*2*Math.atan(Math.tan(yd*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){sc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(sc.x,sc.y).multiplyScalar(-e/sc.z),sc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(sc.x,sc.y).multiplyScalar(-e/sc.z)}getViewSize(e,t){return this.getViewBounds(e,g6,v6),t.subVectors(v6,g6)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(yd*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/u,i*=o.width/l,r*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const zh=-90,Uh=1;class fZ extends Mn{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new pr(zh,Uh,e,t);i.layers=this.layers,this.add(i);const s=new pr(zh,Uh,e,t);s.layers=this.layers,this.add(s);const o=new pr(zh,Uh,e,t);o.layers=this.layers,this.add(o);const a=new pr(zh,Uh,e,t);a.layers=this.layers,this.add(a);const l=new pr(zh,Uh,e,t);l.layers=this.layers,this.add(l);const u=new pr(zh,Uh,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,o,a,l]=t;for(const u of t)this.remove(u);if(e===bl)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===B0)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,u,c]=this.children,f=e.getRenderTarget(),d=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),m=e.xr.enabled;e.xr.enabled=!1;const v=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,s),e.setRenderTarget(r,1,i),e.render(t,o),e.setRenderTarget(r,2,i),e.render(t,a),e.setRenderTarget(r,3,i),e.render(t,l),e.setRenderTarget(r,4,i),e.render(t,u),r.texture.generateMipmaps=v,e.setRenderTarget(r,5,i),e.render(t,c),e.setRenderTarget(f,d,h),e.xr.enabled=m,r.texture.needsPMREMUpdate=!0}}class Fy extends Er{constructor(e,t,r,i,s,o,a,l,u,c){e=e!==void 0?e:[],t=t!==void 0?t:Ru,super(e,t,r,i,s,o,a,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class dZ extends la{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];t.encoding!==void 0&&(xd("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===$c?ri:yo),this.texture=new Fy(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:lr}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Jd(5,5,5),s=new Do({name:"CubemapFromEquirect",uniforms:vm(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:as,blending:bu});s.uniforms.tEquirect.value=t;const o=new Vr(i,s),a=t.minFilter;return t.minFilter===xl&&(t.minFilter=lr),new fZ(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}const rA=new le,L4e=new le,F4e=new pn;class Yo{constructor(e=new le(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=rA.subVectors(r,t).cross(L4e.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(rA),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||F4e.getNormalMatrix(e),i=this.coplanarPoint(rA).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Of=new bi,ab=new le;class By{constructor(e=new Yo,t=new Yo,r=new Yo,i=new Yo,s=new Yo,o=new Yo){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=bl){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],u=i[4],c=i[5],f=i[6],d=i[7],h=i[8],m=i[9],v=i[10],y=i[11],p=i[12],S=i[13],b=i[14],g=i[15];if(r[0].setComponents(l-s,d-u,y-h,g-p).normalize(),r[1].setComponents(l+s,d+u,y+h,g+p).normalize(),r[2].setComponents(l+o,d+c,y+m,g+S).normalize(),r[3].setComponents(l-o,d-c,y-m,g-S).normalize(),r[4].setComponents(l-a,d-f,y-v,g-b).normalize(),t===bl)r[5].setComponents(l+a,d+f,y+v,g+b).normalize();else if(t===B0)r[5].setComponents(a,f,v,b).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Of.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Of.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Of)}intersectsSprite(e){return Of.center.set(0,0,0),Of.radius=.7071067811865476,Of.applyMatrix4(e.matrixWorld),this.intersectsSphere(Of)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(ab.x=i.normal.x>0?e.max.x:e.min.x,ab.y=i.normal.y>0?e.max.y:e.min.y,ab.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(ab)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function hZ(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function B4e(n,e){const t=e.isWebGL2,r=new WeakMap;function i(u,c){const f=u.array,d=u.usage,h=f.byteLength,m=n.createBuffer();n.bindBuffer(c,m),n.bufferData(c,f,d),u.onUploadCallback();let v;if(f instanceof Float32Array)v=n.FLOAT;else if(f instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(t)v=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else v=n.UNSIGNED_SHORT;else if(f instanceof Int16Array)v=n.SHORT;else if(f instanceof Uint32Array)v=n.UNSIGNED_INT;else if(f instanceof Int32Array)v=n.INT;else if(f instanceof Int8Array)v=n.BYTE;else if(f instanceof Uint8Array)v=n.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)v=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:m,type:v,bytesPerElement:f.BYTES_PER_ELEMENT,version:u.version,size:h}}function s(u,c,f){const d=c.array,h=c._updateRange,m=c.updateRanges;if(n.bindBuffer(f,u),h.count===-1&&m.length===0&&n.bufferSubData(f,0,d),m.length!==0){for(let v=0,y=m.length;v<y;v++){const p=m[v];t?n.bufferSubData(f,p.start*d.BYTES_PER_ELEMENT,d,p.start,p.count):n.bufferSubData(f,p.start*d.BYTES_PER_ELEMENT,d.subarray(p.start,p.start+p.count))}c.clearUpdateRanges()}h.count!==-1&&(t?n.bufferSubData(f,h.offset*d.BYTES_PER_ELEMENT,d,h.offset,h.count):n.bufferSubData(f,h.offset*d.BYTES_PER_ELEMENT,d.subarray(h.offset,h.offset+h.count)),h.count=-1),c.onUploadCallback()}function o(u){return u.isInterleavedBufferAttribute&&(u=u.data),r.get(u)}function a(u){u.isInterleavedBufferAttribute&&(u=u.data);const c=r.get(u);c&&(n.deleteBuffer(c.buffer),r.delete(u))}function l(u,c){if(u.isGLBufferAttribute){const d=r.get(u);(!d||d.version<u.version)&&r.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const f=r.get(u);if(f===void 0)r.set(u,i(u,c));else if(f.version<u.version){if(f.size!==u.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");s(f.buffer,u,c),f.version=u.version}}return{get:o,remove:a,update:l}}class Zm extends rn{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),u=a+1,c=l+1,f=e/a,d=t/l,h=[],m=[],v=[],y=[];for(let p=0;p<c;p++){const S=p*d-o;for(let b=0;b<u;b++){const g=b*f-s;m.push(g,-S,0),v.push(0,0,1),y.push(b/a),y.push(1-p/l)}}for(let p=0;p<l;p++)for(let S=0;S<a;S++){const b=S+u*p,g=S+u*(p+1),w=S+1+u*(p+1),x=S+1+u*p;h.push(b,g,x),h.push(g,w,x)}this.setIndex(h),this.setAttribute("position",new Ct(m,3)),this.setAttribute("normal",new Ct(v,3)),this.setAttribute("uv",new Ct(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zm(e.width,e.height,e.widthSegments,e.heightSegments)}}var z4e=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,U4e=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,$4e=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,V4e=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,H4e=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,W4e=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,j4e=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,G4e=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,q4e=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,X4e=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,Y4e=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,K4e=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Z4e=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,J4e=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Q4e=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,e8e=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,t8e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,n8e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,r8e=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,i8e=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,s8e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,o8e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,a8e=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,l8e=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,u8e=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,c8e=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,f8e=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,d8e=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,h8e=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,p8e=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,m8e="gl_FragColor = linearToOutputTexel( gl_FragColor );",g8e=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,v8e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,y8e=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,x8e=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,b8e=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,w8e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,S8e=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,_8e=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,E8e=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,M8e=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,C8e=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,A8e=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,T8e=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,D8e=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,N8e=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,P8e=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,R8e=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,O8e=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,k8e=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,I8e=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,L8e=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,F8e=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,B8e=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,z8e=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,U8e=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,$8e=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,V8e=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,H8e=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,W8e=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,j8e=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,G8e=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,q8e=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,X8e=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Y8e=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,K8e=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Z8e=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,J8e=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Q8e=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,eBe=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,tBe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,nBe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,rBe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,iBe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,sBe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,oBe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,aBe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,lBe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,uBe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,cBe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,fBe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,dBe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,hBe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,pBe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,mBe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,gBe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,vBe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,yBe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,xBe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,bBe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,wBe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,SBe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,_Be=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,EBe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,MBe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,CBe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,ABe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,TBe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,DBe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,NBe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,PBe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,RBe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,OBe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,kBe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,IBe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,LBe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,FBe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const BBe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,zBe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,UBe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,$Be=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,VBe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,HBe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,WBe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,jBe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,GBe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,qBe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,XBe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,YBe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,KBe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ZBe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,JBe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,QBe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,e5e=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,t5e=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,n5e=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,r5e=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,i5e=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,s5e=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,o5e=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,a5e=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,l5e=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,u5e=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,c5e=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,f5e=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,d5e=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,h5e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,p5e=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,m5e=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,g5e=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,v5e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,fn={alphahash_fragment:z4e,alphahash_pars_fragment:U4e,alphamap_fragment:$4e,alphamap_pars_fragment:V4e,alphatest_fragment:H4e,alphatest_pars_fragment:W4e,aomap_fragment:j4e,aomap_pars_fragment:G4e,batching_pars_vertex:q4e,batching_vertex:X4e,begin_vertex:Y4e,beginnormal_vertex:K4e,bsdfs:Z4e,iridescence_fragment:J4e,bumpmap_pars_fragment:Q4e,clipping_planes_fragment:e8e,clipping_planes_pars_fragment:t8e,clipping_planes_pars_vertex:n8e,clipping_planes_vertex:r8e,color_fragment:i8e,color_pars_fragment:s8e,color_pars_vertex:o8e,color_vertex:a8e,common:l8e,cube_uv_reflection_fragment:u8e,defaultnormal_vertex:c8e,displacementmap_pars_vertex:f8e,displacementmap_vertex:d8e,emissivemap_fragment:h8e,emissivemap_pars_fragment:p8e,colorspace_fragment:m8e,colorspace_pars_fragment:g8e,envmap_fragment:v8e,envmap_common_pars_fragment:y8e,envmap_pars_fragment:x8e,envmap_pars_vertex:b8e,envmap_physical_pars_fragment:R8e,envmap_vertex:w8e,fog_vertex:S8e,fog_pars_vertex:_8e,fog_fragment:E8e,fog_pars_fragment:M8e,gradientmap_pars_fragment:C8e,lightmap_fragment:A8e,lightmap_pars_fragment:T8e,lights_lambert_fragment:D8e,lights_lambert_pars_fragment:N8e,lights_pars_begin:P8e,lights_toon_fragment:O8e,lights_toon_pars_fragment:k8e,lights_phong_fragment:I8e,lights_phong_pars_fragment:L8e,lights_physical_fragment:F8e,lights_physical_pars_fragment:B8e,lights_fragment_begin:z8e,lights_fragment_maps:U8e,lights_fragment_end:$8e,logdepthbuf_fragment:V8e,logdepthbuf_pars_fragment:H8e,logdepthbuf_pars_vertex:W8e,logdepthbuf_vertex:j8e,map_fragment:G8e,map_pars_fragment:q8e,map_particle_fragment:X8e,map_particle_pars_fragment:Y8e,metalnessmap_fragment:K8e,metalnessmap_pars_fragment:Z8e,morphcolor_vertex:J8e,morphnormal_vertex:Q8e,morphtarget_pars_vertex:eBe,morphtarget_vertex:tBe,normal_fragment_begin:nBe,normal_fragment_maps:rBe,normal_pars_fragment:iBe,normal_pars_vertex:sBe,normal_vertex:oBe,normalmap_pars_fragment:aBe,clearcoat_normal_fragment_begin:lBe,clearcoat_normal_fragment_maps:uBe,clearcoat_pars_fragment:cBe,iridescence_pars_fragment:fBe,opaque_fragment:dBe,packing:hBe,premultiplied_alpha_fragment:pBe,project_vertex:mBe,dithering_fragment:gBe,dithering_pars_fragment:vBe,roughnessmap_fragment:yBe,roughnessmap_pars_fragment:xBe,shadowmap_pars_fragment:bBe,shadowmap_pars_vertex:wBe,shadowmap_vertex:SBe,shadowmask_pars_fragment:_Be,skinbase_vertex:EBe,skinning_pars_vertex:MBe,skinning_vertex:CBe,skinnormal_vertex:ABe,specularmap_fragment:TBe,specularmap_pars_fragment:DBe,tonemapping_fragment:NBe,tonemapping_pars_fragment:PBe,transmission_fragment:RBe,transmission_pars_fragment:OBe,uv_pars_fragment:kBe,uv_pars_vertex:IBe,uv_vertex:LBe,worldpos_vertex:FBe,background_vert:BBe,background_frag:zBe,backgroundCube_vert:UBe,backgroundCube_frag:$Be,cube_vert:VBe,cube_frag:HBe,depth_vert:WBe,depth_frag:jBe,distanceRGBA_vert:GBe,distanceRGBA_frag:qBe,equirect_vert:XBe,equirect_frag:YBe,linedashed_vert:KBe,linedashed_frag:ZBe,meshbasic_vert:JBe,meshbasic_frag:QBe,meshlambert_vert:e5e,meshlambert_frag:t5e,meshmatcap_vert:n5e,meshmatcap_frag:r5e,meshnormal_vert:i5e,meshnormal_frag:s5e,meshphong_vert:o5e,meshphong_frag:a5e,meshphysical_vert:l5e,meshphysical_frag:u5e,meshtoon_vert:c5e,meshtoon_frag:f5e,points_vert:d5e,points_frag:h5e,shadow_vert:p5e,shadow_frag:m5e,sprite_vert:g5e,sprite_frag:v5e},dt={common:{diffuse:{value:new mt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new pn},alphaMap:{value:null},alphaMapTransform:{value:new pn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new pn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new pn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new pn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new pn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new pn},normalScale:{value:new et(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new pn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new pn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new pn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new pn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new mt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new mt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new pn},alphaTest:{value:0},uvTransform:{value:new pn}},sprite:{diffuse:{value:new mt(16777215)},opacity:{value:1},center:{value:new et(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new pn},alphaMap:{value:null},alphaMapTransform:{value:new pn},alphaTest:{value:0}}},Ca={basic:{uniforms:ys([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.fog]),vertexShader:fn.meshbasic_vert,fragmentShader:fn.meshbasic_frag},lambert:{uniforms:ys([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,dt.lights,{emissive:{value:new mt(0)}}]),vertexShader:fn.meshlambert_vert,fragmentShader:fn.meshlambert_frag},phong:{uniforms:ys([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,dt.lights,{emissive:{value:new mt(0)},specular:{value:new mt(1118481)},shininess:{value:30}}]),vertexShader:fn.meshphong_vert,fragmentShader:fn.meshphong_frag},standard:{uniforms:ys([dt.common,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.roughnessmap,dt.metalnessmap,dt.fog,dt.lights,{emissive:{value:new mt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:fn.meshphysical_vert,fragmentShader:fn.meshphysical_frag},toon:{uniforms:ys([dt.common,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.gradientmap,dt.fog,dt.lights,{emissive:{value:new mt(0)}}]),vertexShader:fn.meshtoon_vert,fragmentShader:fn.meshtoon_frag},matcap:{uniforms:ys([dt.common,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,{matcap:{value:null}}]),vertexShader:fn.meshmatcap_vert,fragmentShader:fn.meshmatcap_frag},points:{uniforms:ys([dt.points,dt.fog]),vertexShader:fn.points_vert,fragmentShader:fn.points_frag},dashed:{uniforms:ys([dt.common,dt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:fn.linedashed_vert,fragmentShader:fn.linedashed_frag},depth:{uniforms:ys([dt.common,dt.displacementmap]),vertexShader:fn.depth_vert,fragmentShader:fn.depth_frag},normal:{uniforms:ys([dt.common,dt.bumpmap,dt.normalmap,dt.displacementmap,{opacity:{value:1}}]),vertexShader:fn.meshnormal_vert,fragmentShader:fn.meshnormal_frag},sprite:{uniforms:ys([dt.sprite,dt.fog]),vertexShader:fn.sprite_vert,fragmentShader:fn.sprite_frag},background:{uniforms:{uvTransform:{value:new pn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:fn.background_vert,fragmentShader:fn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:fn.backgroundCube_vert,fragmentShader:fn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:fn.cube_vert,fragmentShader:fn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:fn.equirect_vert,fragmentShader:fn.equirect_frag},distanceRGBA:{uniforms:ys([dt.common,dt.displacementmap,{referencePosition:{value:new le},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:fn.distanceRGBA_vert,fragmentShader:fn.distanceRGBA_frag},shadow:{uniforms:ys([dt.lights,dt.fog,{color:{value:new mt(0)},opacity:{value:1}}]),vertexShader:fn.shadow_vert,fragmentShader:fn.shadow_frag}};Ca.physical={uniforms:ys([Ca.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new pn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new pn},clearcoatNormalScale:{value:new et(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new pn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new pn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new pn},sheen:{value:0},sheenColor:{value:new mt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new pn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new pn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new pn},transmissionSamplerSize:{value:new et},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new pn},attenuationDistance:{value:0},attenuationColor:{value:new mt(0)},specularColor:{value:new mt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new pn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new pn},anisotropyVector:{value:new et},anisotropyMap:{value:null},anisotropyMapTransform:{value:new pn}}]),vertexShader:fn.meshphysical_vert,fragmentShader:fn.meshphysical_frag};const lb={r:0,b:0,g:0};function y5e(n,e,t,r,i,s,o){const a=new mt(0);let l=s===!0?0:1,u,c,f=null,d=0,h=null;function m(y,p){let S=!1,b=p.isScene===!0?p.background:null;b&&b.isTexture&&(b=(p.backgroundBlurriness>0?t:e).get(b)),b===null?v(a,l):b&&b.isColor&&(v(b,1),S=!0);const g=n.xr.getEnvironmentBlendMode();g==="additive"?r.buffers.color.setClear(0,0,0,1,o):g==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(n.autoClear||S)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),b&&(b.isCubeTexture||b.mapping===Km)?(c===void 0&&(c=new Vr(new Jd(1,1,1),new Do({name:"BackgroundCubeMaterial",uniforms:vm(Ca.backgroundCube.uniforms),vertexShader:Ca.backgroundCube.vertexShader,fragmentShader:Ca.backgroundCube.fragmentShader,side:as,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(w,x,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=b,c.material.uniforms.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=p.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=p.backgroundIntensity,c.material.toneMapped=$n.getTransfer(b.colorSpace)!==nr,(f!==b||d!==b.version||h!==n.toneMapping)&&(c.material.needsUpdate=!0,f=b,d=b.version,h=n.toneMapping),c.layers.enableAll(),y.unshift(c,c.geometry,c.material,0,0,null)):b&&b.isTexture&&(u===void 0&&(u=new Vr(new Zm(2,2),new Do({name:"BackgroundMaterial",uniforms:vm(Ca.background.uniforms),vertexShader:Ca.background.vertexShader,fragmentShader:Ca.background.fragmentShader,side:Pu,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=b,u.material.uniforms.backgroundIntensity.value=p.backgroundIntensity,u.material.toneMapped=$n.getTransfer(b.colorSpace)!==nr,b.matrixAutoUpdate===!0&&b.updateMatrix(),u.material.uniforms.uvTransform.value.copy(b.matrix),(f!==b||d!==b.version||h!==n.toneMapping)&&(u.material.needsUpdate=!0,f=b,d=b.version,h=n.toneMapping),u.layers.enableAll(),y.unshift(u,u.geometry,u.material,0,0,null))}function v(y,p){y.getRGB(lb,cZ(n)),r.buffers.color.setClear(lb.r,lb.g,lb.b,p,o)}return{getClearColor:function(){return a},setClearColor:function(y,p=1){a.set(y),l=p,v(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(y){l=y,v(a,l)},render:m}}function x5e(n,e,t,r){const i=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=y(null);let u=l,c=!1;function f(B,z,D,I,U){let L=!1;if(o){const q=v(I,D,z);u!==q&&(u=q,h(u.object)),L=p(B,I,D,U),L&&S(B,I,D,U)}else{const q=z.wireframe===!0;(u.geometry!==I.id||u.program!==D.id||u.wireframe!==q)&&(u.geometry=I.id,u.program=D.id,u.wireframe=q,L=!0)}U!==null&&t.update(U,n.ELEMENT_ARRAY_BUFFER),(L||c)&&(c=!1,A(B,z,D,I),U!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(U).buffer))}function d(){return r.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function h(B){return r.isWebGL2?n.bindVertexArray(B):s.bindVertexArrayOES(B)}function m(B){return r.isWebGL2?n.deleteVertexArray(B):s.deleteVertexArrayOES(B)}function v(B,z,D){const I=D.wireframe===!0;let U=a[B.id];U===void 0&&(U={},a[B.id]=U);let L=U[z.id];L===void 0&&(L={},U[z.id]=L);let q=L[I];return q===void 0&&(q=y(d()),L[I]=q),q}function y(B){const z=[],D=[],I=[];for(let U=0;U<i;U++)z[U]=0,D[U]=0,I[U]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:z,enabledAttributes:D,attributeDivisors:I,object:B,attributes:{},index:null}}function p(B,z,D,I){const U=u.attributes,L=z.attributes;let q=0;const Z=D.getAttributes();for(const J in Z)if(Z[J].location>=0){const ee=U[J];let ae=L[J];if(ae===void 0&&(J==="instanceMatrix"&&B.instanceMatrix&&(ae=B.instanceMatrix),J==="instanceColor"&&B.instanceColor&&(ae=B.instanceColor)),ee===void 0||ee.attribute!==ae||ae&&ee.data!==ae.data)return!0;q++}return u.attributesNum!==q||u.index!==I}function S(B,z,D,I){const U={},L=z.attributes;let q=0;const Z=D.getAttributes();for(const J in Z)if(Z[J].location>=0){let ee=L[J];ee===void 0&&(J==="instanceMatrix"&&B.instanceMatrix&&(ee=B.instanceMatrix),J==="instanceColor"&&B.instanceColor&&(ee=B.instanceColor));const ae={};ae.attribute=ee,ee&&ee.data&&(ae.data=ee.data),U[J]=ae,q++}u.attributes=U,u.attributesNum=q,u.index=I}function b(){const B=u.newAttributes;for(let z=0,D=B.length;z<D;z++)B[z]=0}function g(B){w(B,0)}function w(B,z){const D=u.newAttributes,I=u.enabledAttributes,U=u.attributeDivisors;D[B]=1,I[B]===0&&(n.enableVertexAttribArray(B),I[B]=1),U[B]!==z&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](B,z),U[B]=z)}function x(){const B=u.newAttributes,z=u.enabledAttributes;for(let D=0,I=z.length;D<I;D++)z[D]!==B[D]&&(n.disableVertexAttribArray(D),z[D]=0)}function M(B,z,D,I,U,L,q){q===!0?n.vertexAttribIPointer(B,z,D,U,L):n.vertexAttribPointer(B,z,D,I,U,L)}function A(B,z,D,I){if(r.isWebGL2===!1&&(B.isInstancedMesh||I.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;b();const U=I.attributes,L=D.getAttributes(),q=z.defaultAttributeValues;for(const Z in L){const J=L[Z];if(J.location>=0){let Y=U[Z];if(Y===void 0&&(Z==="instanceMatrix"&&B.instanceMatrix&&(Y=B.instanceMatrix),Z==="instanceColor"&&B.instanceColor&&(Y=B.instanceColor)),Y!==void 0){const ee=Y.normalized,ae=Y.itemSize,ce=t.get(Y);if(ce===void 0)continue;const pe=ce.buffer,we=ce.type,me=ce.bytesPerElement,Ae=r.isWebGL2===!0&&(we===n.INT||we===n.UNSIGNED_INT||Y.gpuType===uO);if(Y.isInterleavedBufferAttribute){const Ee=Y.data,re=Ee.stride,Pe=Y.offset;if(Ee.isInstancedInterleavedBuffer){for(let Re=0;Re<J.locationSize;Re++)w(J.location+Re,Ee.meshPerAttribute);B.isInstancedMesh!==!0&&I._maxInstanceCount===void 0&&(I._maxInstanceCount=Ee.meshPerAttribute*Ee.count)}else for(let Re=0;Re<J.locationSize;Re++)g(J.location+Re);n.bindBuffer(n.ARRAY_BUFFER,pe);for(let Re=0;Re<J.locationSize;Re++)M(J.location+Re,ae/J.locationSize,we,ee,re*me,(Pe+ae/J.locationSize*Re)*me,Ae)}else{if(Y.isInstancedBufferAttribute){for(let Ee=0;Ee<J.locationSize;Ee++)w(J.location+Ee,Y.meshPerAttribute);B.isInstancedMesh!==!0&&I._maxInstanceCount===void 0&&(I._maxInstanceCount=Y.meshPerAttribute*Y.count)}else for(let Ee=0;Ee<J.locationSize;Ee++)g(J.location+Ee);n.bindBuffer(n.ARRAY_BUFFER,pe);for(let Ee=0;Ee<J.locationSize;Ee++)M(J.location+Ee,ae/J.locationSize,we,ee,ae*me,ae/J.locationSize*Ee*me,Ae)}}else if(q!==void 0){const ee=q[Z];if(ee!==void 0)switch(ee.length){case 2:n.vertexAttrib2fv(J.location,ee);break;case 3:n.vertexAttrib3fv(J.location,ee);break;case 4:n.vertexAttrib4fv(J.location,ee);break;default:n.vertexAttrib1fv(J.location,ee)}}}}x()}function N(){R();for(const B in a){const z=a[B];for(const D in z){const I=z[D];for(const U in I)m(I[U].object),delete I[U];delete z[D]}delete a[B]}}function C(B){if(a[B.id]===void 0)return;const z=a[B.id];for(const D in z){const I=z[D];for(const U in I)m(I[U].object),delete I[U];delete z[D]}delete a[B.id]}function T(B){for(const z in a){const D=a[z];if(D[B.id]===void 0)continue;const I=D[B.id];for(const U in I)m(I[U].object),delete I[U];delete D[B.id]}}function R(){$(),c=!0,u!==l&&(u=l,h(u.object))}function $(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:f,reset:R,resetDefaultState:$,dispose:N,releaseStatesOfGeometry:C,releaseStatesOfProgram:T,initAttributes:b,enableAttribute:g,disableUnusedAttributes:x}}function b5e(n,e,t,r){const i=r.isWebGL2;let s;function o(c){s=c}function a(c,f){n.drawArrays(s,c,f),t.update(f,s,1)}function l(c,f,d){if(d===0)return;let h,m;if(i)h=n,m="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[m](s,c,f,d),t.update(f,s,d)}function u(c,f,d){if(d===0)return;const h=e.get("WEBGL_multi_draw");if(h===null)for(let m=0;m<d;m++)this.render(c[m],f[m]);else{h.multiDrawArraysWEBGL(s,c,0,f,0,d);let m=0;for(let v=0;v<d;v++)m+=f[v];t.update(m,s,1)}}this.setMode=o,this.render=a,this.renderInstances=l,this.renderMultiDraw=u}function w5e(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const M=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(M.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(M){if(M==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";M="mediump"}return M==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const u=o||e.has("WEBGL_draw_buffers"),c=t.logarithmicDepthBuffer===!0,f=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),d=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=n.getParameter(n.MAX_TEXTURE_SIZE),m=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),v=n.getParameter(n.MAX_VERTEX_ATTRIBS),y=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),p=n.getParameter(n.MAX_VARYING_VECTORS),S=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),b=d>0,g=o||e.has("OES_texture_float"),w=b&&g,x=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:c,maxTextures:f,maxVertexTextures:d,maxTextureSize:h,maxCubemapSize:m,maxAttributes:v,maxVertexUniforms:y,maxVaryings:p,maxFragmentUniforms:S,vertexTextures:b,floatFragmentTextures:g,floatVertexTextures:w,maxSamples:x}}function S5e(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new Yo,a=new pn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,d){const h=f.length!==0||d||r!==0||i;return i=d,r=f.length,h},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,d){t=c(f,d,0)},this.setState=function(f,d,h){const m=f.clippingPlanes,v=f.clipIntersection,y=f.clipShadows,p=n.get(f);if(!i||m===null||m.length===0||s&&!y)s?c(null):u();else{const S=s?0:r,b=S*4;let g=p.clippingState||null;l.value=g,g=c(m,d,b,h);for(let w=0;w!==b;++w)g[w]=t[w];p.clippingState=g,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=S}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(f,d,h,m){const v=f!==null?f.length:0;let y=null;if(v!==0){if(y=l.value,m!==!0||y===null){const p=h+v*4,S=d.matrixWorldInverse;a.getNormalMatrix(S),(y===null||y.length<p)&&(y=new Float32Array(p));for(let b=0,g=h;b!==v;++b,g+=4)o.copy(f[b]).applyMatrix4(S,a),o.normal.toArray(y,g),y[g+3]=o.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,y}}function _5e(n){let e=new WeakMap;function t(o,a){return a===A0?o.mapping=Ru:a===T0&&(o.mapping=ef),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===A0||a===T0)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new dZ(l.height);return u.fromEquirectangularTexture(n,o),e.set(o,u),o.addEventListener("dispose",i),t(u.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}let Ta=class extends Ly{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=c*this.view.offsetY,l=a-c*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}};const Cp=4,y6=[.125,.215,.35,.446,.526,.582],Kf=20,iA=new Ta,x6=new mt;let sA=null,oA=0,aA=0;const qf=(1+Math.sqrt(5))/2,$h=1/qf,b6=[new le(1,1,1),new le(-1,1,1),new le(1,1,-1),new le(-1,1,-1),new le(0,qf,$h),new le(0,qf,-$h),new le($h,0,qf),new le(-$h,0,qf),new le(qf,$h,0),new le(-qf,$h,0)];class WD{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){sA=this._renderer.getRenderTarget(),oA=this._renderer.getActiveCubeFace(),aA=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_6(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=S6(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(sA,oA,aA),e.scissorTest=!1,ub(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Ru||e.mapping===ef?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),sA=this._renderer.getRenderTarget(),oA=this._renderer.getActiveCubeFace(),aA=this._renderer.getActiveMipmapLevel();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:lr,minFilter:lr,generateMipmaps:!1,type:kd,format:Ss,colorSpace:Ll,depthBuffer:!1},i=w6(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=w6(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=E5e(s)),this._blurMaterial=M5e(s,e,t)}return i}_compileMaterial(e){const t=new Vr(this._lodPlanes[0],e);this._renderer.compile(t,iA)}_sceneToCubeUV(e,t,r,i){const a=new pr(90,1,t,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,f=c.autoClear,d=c.toneMapping;c.getClearColor(x6),c.toneMapping=Al,c.autoClear=!1;const h=new vf({name:"PMREM.Background",side:as,depthWrite:!1,depthTest:!1}),m=new Vr(new Jd,h);let v=!1;const y=e.background;y?y.isColor&&(h.color.copy(y),e.background=null,v=!0):(h.color.copy(x6),v=!0);for(let p=0;p<6;p++){const S=p%3;S===0?(a.up.set(0,l[p],0),a.lookAt(u[p],0,0)):S===1?(a.up.set(0,0,l[p]),a.lookAt(0,u[p],0)):(a.up.set(0,l[p],0),a.lookAt(0,0,u[p]));const b=this._cubeSize;ub(i,S*b,p>2?b:0,b,b),c.setRenderTarget(i),v&&c.render(m,a),c.render(e,a)}m.geometry.dispose(),m.material.dispose(),c.toneMapping=d,c.autoClear=f,e.background=y}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===Ru||e.mapping===ef;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=_6()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=S6());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Vr(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;ub(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,iA)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=b6[(i-1)%b6.length];this._blur(e,i-1,i,s,o)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,f=new Vr(this._lodPlanes[i],u),d=u.uniforms,h=this._sizeLods[r]-1,m=isFinite(s)?Math.PI/(2*h):2*Math.PI/(2*Kf-1),v=s/m,y=isFinite(s)?1+Math.floor(c*v):Kf;y>Kf&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${Kf}`);const p=[];let S=0;for(let M=0;M<Kf;++M){const A=M/v,N=Math.exp(-A*A/2);p.push(N),M===0?S+=N:M<y&&(S+=2*N)}for(let M=0;M<p.length;M++)p[M]=p[M]/S;d.envMap.value=e.texture,d.samples.value=y,d.weights.value=p,d.latitudinal.value=o==="latitudinal",a&&(d.poleAxis.value=a);const{_lodMax:b}=this;d.dTheta.value=m,d.mipInt.value=b-r;const g=this._sizeLods[i],w=3*g*(i>b-Cp?i-b+Cp:0),x=4*(this._cubeSize-g);ub(t,w,x,3*g,2*g),l.setRenderTarget(t),l.render(f,iA)}}function E5e(n){const e=[],t=[],r=[];let i=n;const s=n-Cp+1+y6.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-Cp?l=y6[o-n+Cp-1]:o===0&&(l=0),r.push(l);const u=1/(a-2),c=-u,f=1+u,d=[c,c,f,c,f,f,c,c,f,f,c,f],h=6,m=6,v=3,y=2,p=1,S=new Float32Array(v*m*h),b=new Float32Array(y*m*h),g=new Float32Array(p*m*h);for(let x=0;x<h;x++){const M=x%3*2/3-1,A=x>2?0:-1,N=[M,A,0,M+2/3,A,0,M+2/3,A+1,0,M,A,0,M+2/3,A+1,0,M,A+1,0];S.set(N,v*m*x),b.set(d,y*m*x);const C=[x,x,x,x,x,x];g.set(C,p*m*x)}const w=new rn;w.setAttribute("position",new Fn(S,v)),w.setAttribute("uv",new Fn(b,y)),w.setAttribute("faceIndex",new Fn(g,p)),e.push(w),i>Cp&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function w6(n,e,t){const r=new la(n,e,t);return r.texture.mapping=Km,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function ub(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function M5e(n,e,t){const r=new Float32Array(Kf),i=new le(0,1,0);return new Do({name:"SphericalGaussianBlur",defines:{n:Kf,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:EO(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:bu,depthTest:!1,depthWrite:!1})}function S6(){return new Do({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:EO(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:bu,depthTest:!1,depthWrite:!1})}function _6(){return new Do({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:EO(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:bu,depthTest:!1,depthWrite:!1})}function EO(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function C5e(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,u=l===A0||l===T0,c=l===Ru||l===ef;if(u||c)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let f=e.get(a);return t===null&&(t=new WD(n)),f=u?t.fromEquirectangular(a,f):t.fromCubemap(a,f),e.set(a,f),f.texture}else{if(e.has(a))return e.get(a).texture;{const f=a.image;if(u&&f&&f.height>0||c&&f&&i(f)){t===null&&(t=new WD(n));const d=u?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,d),a.addEventListener("dispose",s),d.texture}else return null}}}return a}function i(a){let l=0;const u=6;for(let c=0;c<u;c++)a[c]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function A5e(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function T5e(n,e,t,r){const i={},s=new WeakMap;function o(f){const d=f.target;d.index!==null&&e.remove(d.index);for(const m in d.attributes)e.remove(d.attributes[m]);for(const m in d.morphAttributes){const v=d.morphAttributes[m];for(let y=0,p=v.length;y<p;y++)e.remove(v[y])}d.removeEventListener("dispose",o),delete i[d.id];const h=s.get(d);h&&(e.remove(h),s.delete(d)),r.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function a(f,d){return i[d.id]===!0||(d.addEventListener("dispose",o),i[d.id]=!0,t.memory.geometries++),d}function l(f){const d=f.attributes;for(const m in d)e.update(d[m],n.ARRAY_BUFFER);const h=f.morphAttributes;for(const m in h){const v=h[m];for(let y=0,p=v.length;y<p;y++)e.update(v[y],n.ARRAY_BUFFER)}}function u(f){const d=[],h=f.index,m=f.attributes.position;let v=0;if(h!==null){const S=h.array;v=h.version;for(let b=0,g=S.length;b<g;b+=3){const w=S[b+0],x=S[b+1],M=S[b+2];d.push(w,x,x,M,M,w)}}else if(m!==void 0){const S=m.array;v=m.version;for(let b=0,g=S.length/3-1;b<g;b+=3){const w=b+0,x=b+1,M=b+2;d.push(w,x,x,M,M,w)}}else return;const y=new(oZ(d)?_O:SO)(d,1);y.version=v;const p=s.get(f);p&&e.remove(p),s.set(f,y)}function c(f){const d=s.get(f);if(d){const h=f.index;h!==null&&d.version<h.version&&u(f)}else u(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:c}}function D5e(n,e,t,r){const i=r.isWebGL2;let s;function o(h){s=h}let a,l;function u(h){a=h.type,l=h.bytesPerElement}function c(h,m){n.drawElements(s,m,a,h*l),t.update(m,s,1)}function f(h,m,v){if(v===0)return;let y,p;if(i)y=n,p="drawElementsInstanced";else if(y=e.get("ANGLE_instanced_arrays"),p="drawElementsInstancedANGLE",y===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[p](s,m,a,h*l,v),t.update(m,s,v)}function d(h,m,v){if(v===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let p=0;p<v;p++)this.render(h[p]/l,m[p]);else{y.multiDrawElementsWEBGL(s,m,0,a,h,0,v);let p=0;for(let S=0;S<v;S++)p+=m[S];t.update(p,s,1)}}this.setMode=o,this.setIndex=u,this.render=c,this.renderInstances=f,this.renderMultiDraw=d}function N5e(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function P5e(n,e){return n[0]-e[0]}function R5e(n,e){return Math.abs(e[1])-Math.abs(n[1])}function O5e(n,e,t){const r={},i=new Float32Array(8),s=new WeakMap,o=new En,a=[];for(let u=0;u<8;u++)a[u]=[u,0];function l(u,c,f){const d=u.morphTargetInfluences;if(e.isWebGL2===!0){const h=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,m=h!==void 0?h.length:0;let v=s.get(c);if(v===void 0||v.count!==m){let B=function(){R.dispose(),s.delete(c),c.removeEventListener("dispose",B)};v!==void 0&&v.texture.dispose();const S=c.morphAttributes.position!==void 0,b=c.morphAttributes.normal!==void 0,g=c.morphAttributes.color!==void 0,w=c.morphAttributes.position||[],x=c.morphAttributes.normal||[],M=c.morphAttributes.color||[];let A=0;S===!0&&(A=1),b===!0&&(A=2),g===!0&&(A=3);let N=c.attributes.position.count*A,C=1;N>e.maxTextureSize&&(C=Math.ceil(N/e.maxTextureSize),N=e.maxTextureSize);const T=new Float32Array(N*C*4*m),R=new ZE(T,N,C,m);R.type=vo,R.needsUpdate=!0;const $=A*4;for(let z=0;z<m;z++){const D=w[z],I=x[z],U=M[z],L=N*C*4*z;for(let q=0;q<D.count;q++){const Z=q*$;S===!0&&(o.fromBufferAttribute(D,q),T[L+Z+0]=o.x,T[L+Z+1]=o.y,T[L+Z+2]=o.z,T[L+Z+3]=0),b===!0&&(o.fromBufferAttribute(I,q),T[L+Z+4]=o.x,T[L+Z+5]=o.y,T[L+Z+6]=o.z,T[L+Z+7]=0),g===!0&&(o.fromBufferAttribute(U,q),T[L+Z+8]=o.x,T[L+Z+9]=o.y,T[L+Z+10]=o.z,T[L+Z+11]=U.itemSize===4?o.w:1)}}v={count:m,texture:R,size:new et(N,C)},s.set(c,v),c.addEventListener("dispose",B)}let y=0;for(let S=0;S<d.length;S++)y+=d[S];const p=c.morphTargetsRelative?1:1-y;f.getUniforms().setValue(n,"morphTargetBaseInfluence",p),f.getUniforms().setValue(n,"morphTargetInfluences",d),f.getUniforms().setValue(n,"morphTargetsTexture",v.texture,t),f.getUniforms().setValue(n,"morphTargetsTextureSize",v.size)}else{const h=d===void 0?0:d.length;let m=r[c.id];if(m===void 0||m.length!==h){m=[];for(let b=0;b<h;b++)m[b]=[b,0];r[c.id]=m}for(let b=0;b<h;b++){const g=m[b];g[0]=b,g[1]=d[b]}m.sort(R5e);for(let b=0;b<8;b++)b<h&&m[b][1]?(a[b][0]=m[b][0],a[b][1]=m[b][1]):(a[b][0]=Number.MAX_SAFE_INTEGER,a[b][1]=0);a.sort(P5e);const v=c.morphAttributes.position,y=c.morphAttributes.normal;let p=0;for(let b=0;b<8;b++){const g=a[b],w=g[0],x=g[1];w!==Number.MAX_SAFE_INTEGER&&x?(v&&c.getAttribute("morphTarget"+b)!==v[w]&&c.setAttribute("morphTarget"+b,v[w]),y&&c.getAttribute("morphNormal"+b)!==y[w]&&c.setAttribute("morphNormal"+b,y[w]),i[b]=x,p+=x):(v&&c.hasAttribute("morphTarget"+b)===!0&&c.deleteAttribute("morphTarget"+b),y&&c.hasAttribute("morphNormal"+b)===!0&&c.deleteAttribute("morphNormal"+b),i[b]=0)}const S=c.morphTargetsRelative?1:1-p;f.getUniforms().setValue(n,"morphTargetBaseInfluence",S),f.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function k5e(n,e,t,r){let i=new WeakMap;function s(l){const u=r.render.frame,c=l.geometry,f=e.get(l,c);if(i.get(f)!==u&&(e.update(f),i.set(f,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,u))),l.isSkinnedMesh){const d=l.skeleton;i.get(d)!==u&&(d.update(),i.set(d,u))}return f}function o(){i=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:o}}class JE extends Er{constructor(e,t,r,i,s,o,a,l,u,c){if(c=c!==void 0?c:Uc,c!==Uc&&c!==Id)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&c===Uc&&(r=pu),r===void 0&&c===Id&&(r=zc),super(null,i,s,o,a,l,c,r,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Ur,this.minFilter=l!==void 0?l:Ur,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const pZ=new Er,mZ=new JE(1,1);mZ.compareFunction=yO;const gZ=new ZE,vZ=new wO,yZ=new Fy,E6=[],M6=[],C6=new Float32Array(16),A6=new Float32Array(9),T6=new Float32Array(4);function Jm(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=E6[i];if(s===void 0&&(s=new Float32Array(i),E6[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function li(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function ui(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function QE(n,e){let t=M6[e];t===void 0&&(t=new Int32Array(e),M6[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function I5e(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function L5e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(li(t,e))return;n.uniform2fv(this.addr,e),ui(t,e)}}function F5e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(li(t,e))return;n.uniform3fv(this.addr,e),ui(t,e)}}function B5e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(li(t,e))return;n.uniform4fv(this.addr,e),ui(t,e)}}function z5e(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(li(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ui(t,e)}else{if(li(t,r))return;T6.set(r),n.uniformMatrix2fv(this.addr,!1,T6),ui(t,r)}}function U5e(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(li(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ui(t,e)}else{if(li(t,r))return;A6.set(r),n.uniformMatrix3fv(this.addr,!1,A6),ui(t,r)}}function $5e(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(li(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ui(t,e)}else{if(li(t,r))return;C6.set(r),n.uniformMatrix4fv(this.addr,!1,C6),ui(t,r)}}function V5e(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function H5e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(li(t,e))return;n.uniform2iv(this.addr,e),ui(t,e)}}function W5e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(li(t,e))return;n.uniform3iv(this.addr,e),ui(t,e)}}function j5e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(li(t,e))return;n.uniform4iv(this.addr,e),ui(t,e)}}function G5e(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function q5e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(li(t,e))return;n.uniform2uiv(this.addr,e),ui(t,e)}}function X5e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(li(t,e))return;n.uniform3uiv(this.addr,e),ui(t,e)}}function Y5e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(li(t,e))return;n.uniform4uiv(this.addr,e),ui(t,e)}}function K5e(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);const s=this.type===n.SAMPLER_2D_SHADOW?mZ:pZ;t.setTexture2D(e||s,i)}function Z5e(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||vZ,i)}function J5e(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||yZ,i)}function Q5e(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||gZ,i)}function eze(n){switch(n){case 5126:return I5e;case 35664:return L5e;case 35665:return F5e;case 35666:return B5e;case 35674:return z5e;case 35675:return U5e;case 35676:return $5e;case 5124:case 35670:return V5e;case 35667:case 35671:return H5e;case 35668:case 35672:return W5e;case 35669:case 35673:return j5e;case 5125:return G5e;case 36294:return q5e;case 36295:return X5e;case 36296:return Y5e;case 35678:case 36198:case 36298:case 36306:case 35682:return K5e;case 35679:case 36299:case 36307:return Z5e;case 35680:case 36300:case 36308:case 36293:return J5e;case 36289:case 36303:case 36311:case 36292:return Q5e}}function tze(n,e){n.uniform1fv(this.addr,e)}function nze(n,e){const t=Jm(e,this.size,2);n.uniform2fv(this.addr,t)}function rze(n,e){const t=Jm(e,this.size,3);n.uniform3fv(this.addr,t)}function ize(n,e){const t=Jm(e,this.size,4);n.uniform4fv(this.addr,t)}function sze(n,e){const t=Jm(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function oze(n,e){const t=Jm(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function aze(n,e){const t=Jm(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function lze(n,e){n.uniform1iv(this.addr,e)}function uze(n,e){n.uniform2iv(this.addr,e)}function cze(n,e){n.uniform3iv(this.addr,e)}function fze(n,e){n.uniform4iv(this.addr,e)}function dze(n,e){n.uniform1uiv(this.addr,e)}function hze(n,e){n.uniform2uiv(this.addr,e)}function pze(n,e){n.uniform3uiv(this.addr,e)}function mze(n,e){n.uniform4uiv(this.addr,e)}function gze(n,e,t){const r=this.cache,i=e.length,s=QE(t,i);li(r,s)||(n.uniform1iv(this.addr,s),ui(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||pZ,s[o])}function vze(n,e,t){const r=this.cache,i=e.length,s=QE(t,i);li(r,s)||(n.uniform1iv(this.addr,s),ui(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||vZ,s[o])}function yze(n,e,t){const r=this.cache,i=e.length,s=QE(t,i);li(r,s)||(n.uniform1iv(this.addr,s),ui(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||yZ,s[o])}function xze(n,e,t){const r=this.cache,i=e.length,s=QE(t,i);li(r,s)||(n.uniform1iv(this.addr,s),ui(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||gZ,s[o])}function bze(n){switch(n){case 5126:return tze;case 35664:return nze;case 35665:return rze;case 35666:return ize;case 35674:return sze;case 35675:return oze;case 35676:return aze;case 5124:case 35670:return lze;case 35667:case 35671:return uze;case 35668:case 35672:return cze;case 35669:case 35673:return fze;case 5125:return dze;case 36294:return hze;case 36295:return pze;case 36296:return mze;case 35678:case 36198:case 36298:case 36306:case 35682:return gze;case 35679:case 36299:case 36307:return vze;case 35680:case 36300:case 36308:case 36293:return yze;case 36289:case 36303:case 36311:case 36292:return xze}}class wze{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=eze(t.type)}}class Sze{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=bze(t.type)}}class _ze{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const lA=/(\w+)(\])?(\[|\.)?/g;function D6(n,e){n.seq.push(e),n.map[e.id]=e}function Eze(n,e,t){const r=n.name,i=r.length;for(lA.lastIndex=0;;){const s=lA.exec(r),o=lA.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===i){D6(t,u===void 0?new wze(a,n,e):new Sze(a,n,e));break}else{let f=t.map[a];f===void 0&&(f=new _ze(a),D6(t,f)),t=f}}}class $w{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);Eze(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function N6(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const Mze=37297;let Cze=0;function Aze(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}function Tze(n){const e=$n.getPrimaries($n.workingColorSpace),t=$n.getPrimaries(n);let r;switch(e===t?r="":e===L0&&t===I0?r="LinearDisplayP3ToLinearSRGB":e===I0&&t===L0&&(r="LinearSRGBToLinearDisplayP3"),n){case Ll:case ky:return[r,"LinearTransferOETF"];case ri:case YE:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[r,"LinearTransferOETF"]}}function P6(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+Aze(n.getShaderSource(e),o)}else return i}function Dze(n,e){const t=Tze(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function Nze(n,e){let t;switch(e){case OK:t="Linear";break;case kK:t="Reinhard";break;case IK:t="OptimizedCineon";break;case lO:t="ACESFilmic";break;case FK:t="AgX";break;case LK:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Pze(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.alphaToCoverage||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ap).join(`
`)}function Rze(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Ap).join(`
`)}function Oze(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function kze(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Ap(n){return n!==""}function R6(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function O6(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Ize=/^[ \t]*#include +<([\w\d./]+)>/gm;function jD(n){return n.replace(Ize,Fze)}const Lze=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function Fze(n,e){let t=fn[e];if(t===void 0){const r=Lze.get(e);if(r!==void 0)t=fn[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return jD(t)}const Bze=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function k6(n){return n.replace(Bze,zze)}function zze(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function I6(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	`;return n.isWebGL2&&(e+=`precision ${n.precision} sampler3D;
		precision ${n.precision} sampler2DArray;
		precision ${n.precision} sampler2DShadow;
		precision ${n.precision} samplerCubeShadow;
		precision ${n.precision} sampler2DArrayShadow;
		precision ${n.precision} isampler2D;
		precision ${n.precision} isampler3D;
		precision ${n.precision} isamplerCube;
		precision ${n.precision} isampler2DArray;
		precision ${n.precision} usampler2D;
		precision ${n.precision} usampler3D;
		precision ${n.precision} usamplerCube;
		precision ${n.precision} usampler2DArray;
		`),n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Uze(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===jE?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Lv?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Sa&&(e="SHADOWMAP_TYPE_VSM"),e}function $ze(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Ru:case ef:e="ENVMAP_TYPE_CUBE";break;case Km:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Vze(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case ef:e="ENVMAP_MODE_REFRACTION";break}return e}function Hze(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Oy:e="ENVMAP_BLENDING_MULTIPLY";break;case PK:e="ENVMAP_BLENDING_MIX";break;case RK:e="ENVMAP_BLENDING_ADD";break}return e}function Wze(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function jze(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=Uze(t),u=$ze(t),c=Vze(t),f=Hze(t),d=Wze(t),h=t.isWebGL2?"":Pze(t),m=Rze(t),v=Oze(s),y=i.createProgram();let p,S,b=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(p=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(Ap).join(`
`),p.length>0&&(p+=`
`),S=[h,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(Ap).join(`
`),S.length>0&&(S+=`
`)):(p=[I6(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ap).join(`
`),S=[h,I6(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+c:"",t.envMap?"#define "+f:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Al?"#define TONE_MAPPING":"",t.toneMapping!==Al?fn.tonemapping_pars_fragment:"",t.toneMapping!==Al?Nze("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",fn.colorspace_pars_fragment,Dze("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Ap).join(`
`)),o=jD(o),o=R6(o,t),o=O6(o,t),a=jD(a),a=R6(a,t),a=O6(a,t),o=k6(o),a=k6(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(b=`#version 300 es
`,p=[m,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+p,S=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===VD?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===VD?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+S);const g=b+p+o,w=b+S+a,x=N6(i,i.VERTEX_SHADER,g),M=N6(i,i.FRAGMENT_SHADER,w);i.attachShader(y,x),i.attachShader(y,M),t.index0AttributeName!==void 0?i.bindAttribLocation(y,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y);function A(R){if(n.debug.checkShaderErrors){const $=i.getProgramInfoLog(y).trim(),B=i.getShaderInfoLog(x).trim(),z=i.getShaderInfoLog(M).trim();let D=!0,I=!0;if(i.getProgramParameter(y,i.LINK_STATUS)===!1)if(D=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,y,x,M);else{const U=P6(i,x,"vertex"),L=P6(i,M,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(y,i.VALIDATE_STATUS)+`

Material Name: `+R.name+`
Material Type: `+R.type+`

Program Info Log: `+$+`
`+U+`
`+L)}else $!==""?console.warn("THREE.WebGLProgram: Program Info Log:",$):(B===""||z==="")&&(I=!1);I&&(R.diagnostics={runnable:D,programLog:$,vertexShader:{log:B,prefix:p},fragmentShader:{log:z,prefix:S}})}i.deleteShader(x),i.deleteShader(M),N=new $w(i,y),C=kze(i,y)}let N;this.getUniforms=function(){return N===void 0&&A(this),N};let C;this.getAttributes=function(){return C===void 0&&A(this),C};let T=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return T===!1&&(T=i.getProgramParameter(y,Mze)),T},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Cze++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=x,this.fragmentShader=M,this}let Gze=0;class qze{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new Xze(e),t.set(e,r)),r}}class Xze{constructor(e){this.id=Gze++,this.code=e,this.usedTimes=0}}function Yze(n,e,t,r,i,s,o){const a=new bd,l=new qze,u=new Set,c=[],f=i.isWebGL2,d=i.logarithmicDepthBuffer,h=i.vertexTextures;let m=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(C){return u.add(C),C===0?"uv":`uv${C}`}function p(C,T,R,$,B){const z=$.fog,D=B.geometry,I=C.isMeshStandardMaterial?$.environment:null,U=(C.isMeshStandardMaterial?t:e).get(C.envMap||I),L=U&&U.mapping===Km?U.image.height:null,q=v[C.type];C.precision!==null&&(m=i.getMaxPrecision(C.precision),m!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",m,"instead."));const Z=D.morphAttributes.position||D.morphAttributes.normal||D.morphAttributes.color,J=Z!==void 0?Z.length:0;let Y=0;D.morphAttributes.position!==void 0&&(Y=1),D.morphAttributes.normal!==void 0&&(Y=2),D.morphAttributes.color!==void 0&&(Y=3);let ee,ae,ce,pe;if(q){const Ce=Ca[q];ee=Ce.vertexShader,ae=Ce.fragmentShader}else ee=C.vertexShader,ae=C.fragmentShader,l.update(C),ce=l.getVertexShaderID(C),pe=l.getFragmentShaderID(C);const we=n.getRenderTarget(),me=B.isInstancedMesh===!0,Ae=B.isBatchedMesh===!0,Ee=!!C.map,re=!!C.matcap,Pe=!!U,Re=!!C.aoMap,te=!!C.lightMap,ie=!!C.bumpMap,Me=!!C.normalMap,oe=!!C.displacementMap,G=!!C.emissiveMap,j=!!C.metalnessMap,de=!!C.roughnessMap,Te=C.anisotropy>0,X=C.clearcoat>0,Q=C.iridescence>0,be=C.sheen>0,_e=C.transmission>0,Ne=Te&&!!C.anisotropyMap,Fe=X&&!!C.clearcoatMap,He=X&&!!C.clearcoatNormalMap,Ie=X&&!!C.clearcoatRoughnessMap,Je=Q&&!!C.iridescenceMap,qe=Q&&!!C.iridescenceThicknessMap,lt=be&&!!C.sheenColorMap,ot=be&&!!C.sheenRoughnessMap,ye=!!C.specularMap,We=!!C.specularColorMap,W=!!C.specularIntensityMap,ve=_e&&!!C.transmissionMap,ke=_e&&!!C.thicknessMap,Ye=!!C.gradientMap,he=!!C.alphaMap,Ze=C.alphaTest>0,H=!!C.alphaHash,ne=!!C.extensions;let fe=Al;C.toneMapped&&(we===null||we.isXRRenderTarget===!0)&&(fe=n.toneMapping);const xe={isWebGL2:f,shaderID:q,shaderType:C.type,shaderName:C.name,vertexShader:ee,fragmentShader:ae,defines:C.defines,customVertexShaderID:ce,customFragmentShaderID:pe,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:m,batching:Ae,instancing:me,instancingColor:me&&B.instanceColor!==null,supportsVertexTextures:h,outputColorSpace:we===null?n.outputColorSpace:we.isXRRenderTarget===!0?we.texture.colorSpace:Ll,alphaToCoverage:!!C.alphaToCoverage,map:Ee,matcap:re,envMap:Pe,envMapMode:Pe&&U.mapping,envMapCubeUVHeight:L,aoMap:Re,lightMap:te,bumpMap:ie,normalMap:Me,displacementMap:h&&oe,emissiveMap:G,normalMapObjectSpace:Me&&C.normalMapType===JK,normalMapTangentSpace:Me&&C.normalMapType===gf,metalnessMap:j,roughnessMap:de,anisotropy:Te,anisotropyMap:Ne,clearcoat:X,clearcoatMap:Fe,clearcoatNormalMap:He,clearcoatRoughnessMap:Ie,iridescence:Q,iridescenceMap:Je,iridescenceThicknessMap:qe,sheen:be,sheenColorMap:lt,sheenRoughnessMap:ot,specularMap:ye,specularColorMap:We,specularIntensityMap:W,transmission:_e,transmissionMap:ve,thicknessMap:ke,gradientMap:Ye,opaque:C.transparent===!1&&C.blending===vd&&C.alphaToCoverage===!1,alphaMap:he,alphaTest:Ze,alphaHash:H,combine:C.combine,mapUv:Ee&&y(C.map.channel),aoMapUv:Re&&y(C.aoMap.channel),lightMapUv:te&&y(C.lightMap.channel),bumpMapUv:ie&&y(C.bumpMap.channel),normalMapUv:Me&&y(C.normalMap.channel),displacementMapUv:oe&&y(C.displacementMap.channel),emissiveMapUv:G&&y(C.emissiveMap.channel),metalnessMapUv:j&&y(C.metalnessMap.channel),roughnessMapUv:de&&y(C.roughnessMap.channel),anisotropyMapUv:Ne&&y(C.anisotropyMap.channel),clearcoatMapUv:Fe&&y(C.clearcoatMap.channel),clearcoatNormalMapUv:He&&y(C.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ie&&y(C.clearcoatRoughnessMap.channel),iridescenceMapUv:Je&&y(C.iridescenceMap.channel),iridescenceThicknessMapUv:qe&&y(C.iridescenceThicknessMap.channel),sheenColorMapUv:lt&&y(C.sheenColorMap.channel),sheenRoughnessMapUv:ot&&y(C.sheenRoughnessMap.channel),specularMapUv:ye&&y(C.specularMap.channel),specularColorMapUv:We&&y(C.specularColorMap.channel),specularIntensityMapUv:W&&y(C.specularIntensityMap.channel),transmissionMapUv:ve&&y(C.transmissionMap.channel),thicknessMapUv:ke&&y(C.thicknessMap.channel),alphaMapUv:he&&y(C.alphaMap.channel),vertexTangents:!!D.attributes.tangent&&(Me||Te),vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!D.attributes.color&&D.attributes.color.itemSize===4,pointsUvs:B.isPoints===!0&&!!D.attributes.uv&&(Ee||he),fog:!!z,useFog:C.fog===!0,fogExp2:!!z&&z.isFogExp2,flatShading:C.flatShading===!0,sizeAttenuation:C.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:B.isSkinnedMesh===!0,morphTargets:D.morphAttributes.position!==void 0,morphNormals:D.morphAttributes.normal!==void 0,morphColors:D.morphAttributes.color!==void 0,morphTargetsCount:J,morphTextureStride:Y,numDirLights:T.directional.length,numPointLights:T.point.length,numSpotLights:T.spot.length,numSpotLightMaps:T.spotLightMap.length,numRectAreaLights:T.rectArea.length,numHemiLights:T.hemi.length,numDirLightShadows:T.directionalShadowMap.length,numPointLightShadows:T.pointShadowMap.length,numSpotLightShadows:T.spotShadowMap.length,numSpotLightShadowsWithMaps:T.numSpotLightShadowsWithMaps,numLightProbes:T.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:C.dithering,shadowMapEnabled:n.shadowMap.enabled&&R.length>0,shadowMapType:n.shadowMap.type,toneMapping:fe,useLegacyLights:n._useLegacyLights,decodeVideoTexture:Ee&&C.map.isVideoTexture===!0&&$n.getTransfer(C.map.colorSpace)===nr,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===ns,flipSided:C.side===as,useDepthPacking:C.depthPacking>=0,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionDerivatives:ne&&C.extensions.derivatives===!0,extensionFragDepth:ne&&C.extensions.fragDepth===!0,extensionDrawBuffers:ne&&C.extensions.drawBuffers===!0,extensionShaderTextureLOD:ne&&C.extensions.shaderTextureLOD===!0,extensionClipCullDistance:ne&&C.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:ne&&C.extensions.multiDraw===!0&&r.has("WEBGL_multi_draw"),rendererExtensionFragDepth:f||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:f||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:f||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:C.customProgramCacheKey()};return xe.vertexUv1s=u.has(1),xe.vertexUv2s=u.has(2),xe.vertexUv3s=u.has(3),u.clear(),xe}function S(C){const T=[];if(C.shaderID?T.push(C.shaderID):(T.push(C.customVertexShaderID),T.push(C.customFragmentShaderID)),C.defines!==void 0)for(const R in C.defines)T.push(R),T.push(C.defines[R]);return C.isRawShaderMaterial===!1&&(b(T,C),g(T,C),T.push(n.outputColorSpace)),T.push(C.customProgramCacheKey),T.join()}function b(C,T){C.push(T.precision),C.push(T.outputColorSpace),C.push(T.envMapMode),C.push(T.envMapCubeUVHeight),C.push(T.mapUv),C.push(T.alphaMapUv),C.push(T.lightMapUv),C.push(T.aoMapUv),C.push(T.bumpMapUv),C.push(T.normalMapUv),C.push(T.displacementMapUv),C.push(T.emissiveMapUv),C.push(T.metalnessMapUv),C.push(T.roughnessMapUv),C.push(T.anisotropyMapUv),C.push(T.clearcoatMapUv),C.push(T.clearcoatNormalMapUv),C.push(T.clearcoatRoughnessMapUv),C.push(T.iridescenceMapUv),C.push(T.iridescenceThicknessMapUv),C.push(T.sheenColorMapUv),C.push(T.sheenRoughnessMapUv),C.push(T.specularMapUv),C.push(T.specularColorMapUv),C.push(T.specularIntensityMapUv),C.push(T.transmissionMapUv),C.push(T.thicknessMapUv),C.push(T.combine),C.push(T.fogExp2),C.push(T.sizeAttenuation),C.push(T.morphTargetsCount),C.push(T.morphAttributeCount),C.push(T.numDirLights),C.push(T.numPointLights),C.push(T.numSpotLights),C.push(T.numSpotLightMaps),C.push(T.numHemiLights),C.push(T.numRectAreaLights),C.push(T.numDirLightShadows),C.push(T.numPointLightShadows),C.push(T.numSpotLightShadows),C.push(T.numSpotLightShadowsWithMaps),C.push(T.numLightProbes),C.push(T.shadowMapType),C.push(T.toneMapping),C.push(T.numClippingPlanes),C.push(T.numClipIntersection),C.push(T.depthPacking)}function g(C,T){a.disableAll(),T.isWebGL2&&a.enable(0),T.supportsVertexTextures&&a.enable(1),T.instancing&&a.enable(2),T.instancingColor&&a.enable(3),T.matcap&&a.enable(4),T.envMap&&a.enable(5),T.normalMapObjectSpace&&a.enable(6),T.normalMapTangentSpace&&a.enable(7),T.clearcoat&&a.enable(8),T.iridescence&&a.enable(9),T.alphaTest&&a.enable(10),T.vertexColors&&a.enable(11),T.vertexAlphas&&a.enable(12),T.vertexUv1s&&a.enable(13),T.vertexUv2s&&a.enable(14),T.vertexUv3s&&a.enable(15),T.vertexTangents&&a.enable(16),T.anisotropy&&a.enable(17),T.alphaHash&&a.enable(18),T.batching&&a.enable(19),C.push(a.mask),a.disableAll(),T.fog&&a.enable(0),T.useFog&&a.enable(1),T.flatShading&&a.enable(2),T.logarithmicDepthBuffer&&a.enable(3),T.skinning&&a.enable(4),T.morphTargets&&a.enable(5),T.morphNormals&&a.enable(6),T.morphColors&&a.enable(7),T.premultipliedAlpha&&a.enable(8),T.shadowMapEnabled&&a.enable(9),T.useLegacyLights&&a.enable(10),T.doubleSided&&a.enable(11),T.flipSided&&a.enable(12),T.useDepthPacking&&a.enable(13),T.dithering&&a.enable(14),T.transmission&&a.enable(15),T.sheen&&a.enable(16),T.opaque&&a.enable(17),T.pointsUvs&&a.enable(18),T.decodeVideoTexture&&a.enable(19),T.alphaToCoverage&&a.enable(20),C.push(a.mask)}function w(C){const T=v[C.type];let R;if(T){const $=Ca[T];R=U0.clone($.uniforms)}else R=C.uniforms;return R}function x(C,T){let R;for(let $=0,B=c.length;$<B;$++){const z=c[$];if(z.cacheKey===T){R=z,++R.usedTimes;break}}return R===void 0&&(R=new jze(n,T,C,s),c.push(R)),R}function M(C){if(--C.usedTimes===0){const T=c.indexOf(C);c[T]=c[c.length-1],c.pop(),C.destroy()}}function A(C){l.remove(C)}function N(){l.dispose()}return{getParameters:p,getProgramCacheKey:S,getUniforms:w,acquireProgram:x,releaseProgram:M,releaseShaderCache:A,programs:c,dispose:N}}function Kze(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function r(s,o,a){n.get(s)[o]=a}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function Zze(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function L6(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function F6(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(f,d,h,m,v,y){let p=n[e];return p===void 0?(p={id:f.id,object:f,geometry:d,material:h,groupOrder:m,renderOrder:f.renderOrder,z:v,group:y},n[e]=p):(p.id=f.id,p.object=f,p.geometry=d,p.material=h,p.groupOrder=m,p.renderOrder=f.renderOrder,p.z=v,p.group=y),e++,p}function a(f,d,h,m,v,y){const p=o(f,d,h,m,v,y);h.transmission>0?r.push(p):h.transparent===!0?i.push(p):t.push(p)}function l(f,d,h,m,v,y){const p=o(f,d,h,m,v,y);h.transmission>0?r.unshift(p):h.transparent===!0?i.unshift(p):t.unshift(p)}function u(f,d){t.length>1&&t.sort(f||Zze),r.length>1&&r.sort(d||L6),i.length>1&&i.sort(d||L6)}function c(){for(let f=e,d=n.length;f<d;f++){const h=n[f];if(h.id===null)break;h.id=null,h.object=null,h.geometry=null,h.material=null,h.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:c,sort:u}}function Jze(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new F6,n.set(r,[o])):i>=s.length?(o=new F6,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function Qze(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new le,color:new mt};break;case"SpotLight":t={position:new le,direction:new le,color:new mt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new le,color:new mt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new le,skyColor:new mt,groundColor:new mt};break;case"RectAreaLight":t={color:new mt,position:new le,halfWidth:new le,halfHeight:new le};break}return n[e.id]=t,t}}}function eUe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new et};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new et};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new et,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let tUe=0;function nUe(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function rUe(n,e){const t=new Qze,r=eUe(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new le);const s=new le,o=new wt,a=new wt;function l(c,f){let d=0,h=0,m=0;for(let R=0;R<9;R++)i.probe[R].set(0,0,0);let v=0,y=0,p=0,S=0,b=0,g=0,w=0,x=0,M=0,A=0,N=0;c.sort(nUe);const C=f===!0?Math.PI:1;for(let R=0,$=c.length;R<$;R++){const B=c[R],z=B.color,D=B.intensity,I=B.distance,U=B.shadow&&B.shadow.map?B.shadow.map.texture:null;if(B.isAmbientLight)d+=z.r*D*C,h+=z.g*D*C,m+=z.b*D*C;else if(B.isLightProbe){for(let L=0;L<9;L++)i.probe[L].addScaledVector(B.sh.coefficients[L],D);N++}else if(B.isDirectionalLight){const L=t.get(B);if(L.color.copy(B.color).multiplyScalar(B.intensity*C),B.castShadow){const q=B.shadow,Z=r.get(B);Z.shadowBias=q.bias,Z.shadowNormalBias=q.normalBias,Z.shadowRadius=q.radius,Z.shadowMapSize=q.mapSize,i.directionalShadow[v]=Z,i.directionalShadowMap[v]=U,i.directionalShadowMatrix[v]=B.shadow.matrix,g++}i.directional[v]=L,v++}else if(B.isSpotLight){const L=t.get(B);L.position.setFromMatrixPosition(B.matrixWorld),L.color.copy(z).multiplyScalar(D*C),L.distance=I,L.coneCos=Math.cos(B.angle),L.penumbraCos=Math.cos(B.angle*(1-B.penumbra)),L.decay=B.decay,i.spot[p]=L;const q=B.shadow;if(B.map&&(i.spotLightMap[M]=B.map,M++,q.updateMatrices(B),B.castShadow&&A++),i.spotLightMatrix[p]=q.matrix,B.castShadow){const Z=r.get(B);Z.shadowBias=q.bias,Z.shadowNormalBias=q.normalBias,Z.shadowRadius=q.radius,Z.shadowMapSize=q.mapSize,i.spotShadow[p]=Z,i.spotShadowMap[p]=U,x++}p++}else if(B.isRectAreaLight){const L=t.get(B);L.color.copy(z).multiplyScalar(D),L.halfWidth.set(B.width*.5,0,0),L.halfHeight.set(0,B.height*.5,0),i.rectArea[S]=L,S++}else if(B.isPointLight){const L=t.get(B);if(L.color.copy(B.color).multiplyScalar(B.intensity*C),L.distance=B.distance,L.decay=B.decay,B.castShadow){const q=B.shadow,Z=r.get(B);Z.shadowBias=q.bias,Z.shadowNormalBias=q.normalBias,Z.shadowRadius=q.radius,Z.shadowMapSize=q.mapSize,Z.shadowCameraNear=q.camera.near,Z.shadowCameraFar=q.camera.far,i.pointShadow[y]=Z,i.pointShadowMap[y]=U,i.pointShadowMatrix[y]=B.shadow.matrix,w++}i.point[y]=L,y++}else if(B.isHemisphereLight){const L=t.get(B);L.skyColor.copy(B.color).multiplyScalar(D*C),L.groundColor.copy(B.groundColor).multiplyScalar(D*C),i.hemi[b]=L,b++}}S>0&&(e.isWebGL2?n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=dt.LTC_FLOAT_1,i.rectAreaLTC2=dt.LTC_FLOAT_2):(i.rectAreaLTC1=dt.LTC_HALF_1,i.rectAreaLTC2=dt.LTC_HALF_2):n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=dt.LTC_FLOAT_1,i.rectAreaLTC2=dt.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=dt.LTC_HALF_1,i.rectAreaLTC2=dt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=d,i.ambient[1]=h,i.ambient[2]=m;const T=i.hash;(T.directionalLength!==v||T.pointLength!==y||T.spotLength!==p||T.rectAreaLength!==S||T.hemiLength!==b||T.numDirectionalShadows!==g||T.numPointShadows!==w||T.numSpotShadows!==x||T.numSpotMaps!==M||T.numLightProbes!==N)&&(i.directional.length=v,i.spot.length=p,i.rectArea.length=S,i.point.length=y,i.hemi.length=b,i.directionalShadow.length=g,i.directionalShadowMap.length=g,i.pointShadow.length=w,i.pointShadowMap.length=w,i.spotShadow.length=x,i.spotShadowMap.length=x,i.directionalShadowMatrix.length=g,i.pointShadowMatrix.length=w,i.spotLightMatrix.length=x+M-A,i.spotLightMap.length=M,i.numSpotLightShadowsWithMaps=A,i.numLightProbes=N,T.directionalLength=v,T.pointLength=y,T.spotLength=p,T.rectAreaLength=S,T.hemiLength=b,T.numDirectionalShadows=g,T.numPointShadows=w,T.numSpotShadows=x,T.numSpotMaps=M,T.numLightProbes=N,i.version=tUe++)}function u(c,f){let d=0,h=0,m=0,v=0,y=0;const p=f.matrixWorldInverse;for(let S=0,b=c.length;S<b;S++){const g=c[S];if(g.isDirectionalLight){const w=i.directional[d];w.direction.setFromMatrixPosition(g.matrixWorld),s.setFromMatrixPosition(g.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(p),d++}else if(g.isSpotLight){const w=i.spot[m];w.position.setFromMatrixPosition(g.matrixWorld),w.position.applyMatrix4(p),w.direction.setFromMatrixPosition(g.matrixWorld),s.setFromMatrixPosition(g.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(p),m++}else if(g.isRectAreaLight){const w=i.rectArea[v];w.position.setFromMatrixPosition(g.matrixWorld),w.position.applyMatrix4(p),a.identity(),o.copy(g.matrixWorld),o.premultiply(p),a.extractRotation(o),w.halfWidth.set(g.width*.5,0,0),w.halfHeight.set(0,g.height*.5,0),w.halfWidth.applyMatrix4(a),w.halfHeight.applyMatrix4(a),v++}else if(g.isPointLight){const w=i.point[h];w.position.setFromMatrixPosition(g.matrixWorld),w.position.applyMatrix4(p),h++}else if(g.isHemisphereLight){const w=i.hemi[y];w.direction.setFromMatrixPosition(g.matrixWorld),w.direction.transformDirection(p),y++}}}return{setup:l,setupView:u,state:i}}function B6(n,e){const t=new rUe(n,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(f){r.push(f)}function a(f){i.push(f)}function l(f){t.setup(r,f)}function u(f){t.setupView(r,f)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:l,setupLightsView:u,pushLight:o,pushShadow:a}}function iUe(n,e){let t=new WeakMap;function r(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new B6(n,e),t.set(s,[l])):o>=a.length?(l=new B6(n,e),a.push(l)):l=a[o],l}function i(){t=new WeakMap}return{get:r,dispose:i}}class MO extends $i{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=KK,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class CO extends $i{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const sUe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,oUe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function aUe(n,e,t){let r=new By;const i=new et,s=new et,o=new En,a=new MO({depthPacking:ZK}),l=new CO,u={},c=t.maxTextureSize,f={[Pu]:as,[as]:Pu,[ns]:ns},d=new Do({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new et},radius:{value:4}},vertexShader:sUe,fragmentShader:oUe}),h=d.clone();h.defines.HORIZONTAL_PASS=1;const m=new rn;m.setAttribute("position",new Fn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new Vr(m,d),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=jE;let p=this.type;this.render=function(x,M,A){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||x.length===0)return;const N=n.getRenderTarget(),C=n.getActiveCubeFace(),T=n.getActiveMipmapLevel(),R=n.state;R.setBlending(bu),R.buffers.color.setClear(1,1,1,1),R.buffers.depth.setTest(!0),R.setScissorTest(!1);const $=p!==Sa&&this.type===Sa,B=p===Sa&&this.type!==Sa;for(let z=0,D=x.length;z<D;z++){const I=x[z],U=I.shadow;if(U===void 0){console.warn("THREE.WebGLShadowMap:",I,"has no shadow.");continue}if(U.autoUpdate===!1&&U.needsUpdate===!1)continue;i.copy(U.mapSize);const L=U.getFrameExtents();if(i.multiply(L),s.copy(U.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(s.x=Math.floor(c/L.x),i.x=s.x*L.x,U.mapSize.x=s.x),i.y>c&&(s.y=Math.floor(c/L.y),i.y=s.y*L.y,U.mapSize.y=s.y)),U.map===null||$===!0||B===!0){const Z=this.type!==Sa?{minFilter:Ur,magFilter:Ur}:{};U.map!==null&&U.map.dispose(),U.map=new la(i.x,i.y,Z),U.map.texture.name=I.name+".shadowMap",U.camera.updateProjectionMatrix()}n.setRenderTarget(U.map),n.clear();const q=U.getViewportCount();for(let Z=0;Z<q;Z++){const J=U.getViewport(Z);o.set(s.x*J.x,s.y*J.y,s.x*J.z,s.y*J.w),R.viewport(o),U.updateMatrices(I,Z),r=U.getFrustum(),g(M,A,U.camera,I,this.type)}U.isPointLightShadow!==!0&&this.type===Sa&&S(U,A),U.needsUpdate=!1}p=this.type,y.needsUpdate=!1,n.setRenderTarget(N,C,T)};function S(x,M){const A=e.update(v);d.defines.VSM_SAMPLES!==x.blurSamples&&(d.defines.VSM_SAMPLES=x.blurSamples,h.defines.VSM_SAMPLES=x.blurSamples,d.needsUpdate=!0,h.needsUpdate=!0),x.mapPass===null&&(x.mapPass=new la(i.x,i.y)),d.uniforms.shadow_pass.value=x.map.texture,d.uniforms.resolution.value=x.mapSize,d.uniforms.radius.value=x.radius,n.setRenderTarget(x.mapPass),n.clear(),n.renderBufferDirect(M,null,A,d,v,null),h.uniforms.shadow_pass.value=x.mapPass.texture,h.uniforms.resolution.value=x.mapSize,h.uniforms.radius.value=x.radius,n.setRenderTarget(x.map),n.clear(),n.renderBufferDirect(M,null,A,h,v,null)}function b(x,M,A,N){let C=null;const T=A.isPointLight===!0?x.customDistanceMaterial:x.customDepthMaterial;if(T!==void 0)C=T;else if(C=A.isPointLight===!0?l:a,n.localClippingEnabled&&M.clipShadows===!0&&Array.isArray(M.clippingPlanes)&&M.clippingPlanes.length!==0||M.displacementMap&&M.displacementScale!==0||M.alphaMap&&M.alphaTest>0||M.map&&M.alphaTest>0){const R=C.uuid,$=M.uuid;let B=u[R];B===void 0&&(B={},u[R]=B);let z=B[$];z===void 0&&(z=C.clone(),B[$]=z,M.addEventListener("dispose",w)),C=z}if(C.visible=M.visible,C.wireframe=M.wireframe,N===Sa?C.side=M.shadowSide!==null?M.shadowSide:M.side:C.side=M.shadowSide!==null?M.shadowSide:f[M.side],C.alphaMap=M.alphaMap,C.alphaTest=M.alphaTest,C.map=M.map,C.clipShadows=M.clipShadows,C.clippingPlanes=M.clippingPlanes,C.clipIntersection=M.clipIntersection,C.displacementMap=M.displacementMap,C.displacementScale=M.displacementScale,C.displacementBias=M.displacementBias,C.wireframeLinewidth=M.wireframeLinewidth,C.linewidth=M.linewidth,A.isPointLight===!0&&C.isMeshDistanceMaterial===!0){const R=n.properties.get(C);R.light=A}return C}function g(x,M,A,N,C){if(x.visible===!1)return;if(x.layers.test(M.layers)&&(x.isMesh||x.isLine||x.isPoints)&&(x.castShadow||x.receiveShadow&&C===Sa)&&(!x.frustumCulled||r.intersectsObject(x))){x.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,x.matrixWorld);const $=e.update(x),B=x.material;if(Array.isArray(B)){const z=$.groups;for(let D=0,I=z.length;D<I;D++){const U=z[D],L=B[U.materialIndex];if(L&&L.visible){const q=b(x,L,N,C);x.onBeforeShadow(n,x,M,A,$,q,U),n.renderBufferDirect(A,null,$,q,x,U),x.onAfterShadow(n,x,M,A,$,q,U)}}}else if(B.visible){const z=b(x,B,N,C);x.onBeforeShadow(n,x,M,A,$,z,null),n.renderBufferDirect(A,null,$,z,x,null),x.onAfterShadow(n,x,M,A,$,z,null)}}const R=x.children;for(let $=0,B=R.length;$<B;$++)g(R[$],M,A,N,C)}function w(x){x.target.removeEventListener("dispose",w);for(const A in u){const N=u[A],C=x.target.uuid;C in N&&(N[C].dispose(),delete N[C])}}}function lUe(n,e,t){const r=t.isWebGL2;function i(){let he=!1;const Ze=new En;let H=null;const ne=new En(0,0,0,0);return{setMask:function(fe){H!==fe&&!he&&(n.colorMask(fe,fe,fe,fe),H=fe)},setLocked:function(fe){he=fe},setClear:function(fe,xe,Ce,Oe,$e){$e===!0&&(fe*=Oe,xe*=Oe,Ce*=Oe),Ze.set(fe,xe,Ce,Oe),ne.equals(Ze)===!1&&(n.clearColor(fe,xe,Ce,Oe),ne.copy(Ze))},reset:function(){he=!1,H=null,ne.set(-1,0,0,0)}}}function s(){let he=!1,Ze=null,H=null,ne=null;return{setTest:function(fe){fe?me(n.DEPTH_TEST):Ae(n.DEPTH_TEST)},setMask:function(fe){Ze!==fe&&!he&&(n.depthMask(fe),Ze=fe)},setFunc:function(fe){if(H!==fe){switch(fe){case EK:n.depthFunc(n.NEVER);break;case MK:n.depthFunc(n.ALWAYS);break;case CK:n.depthFunc(n.LESS);break;case C0:n.depthFunc(n.LEQUAL);break;case AK:n.depthFunc(n.EQUAL);break;case TK:n.depthFunc(n.GEQUAL);break;case DK:n.depthFunc(n.GREATER);break;case NK:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}H=fe}},setLocked:function(fe){he=fe},setClear:function(fe){ne!==fe&&(n.clearDepth(fe),ne=fe)},reset:function(){he=!1,Ze=null,H=null,ne=null}}}function o(){let he=!1,Ze=null,H=null,ne=null,fe=null,xe=null,Ce=null,Oe=null,$e=null;return{setTest:function(Xe){he||(Xe?me(n.STENCIL_TEST):Ae(n.STENCIL_TEST))},setMask:function(Xe){Ze!==Xe&&!he&&(n.stencilMask(Xe),Ze=Xe)},setFunc:function(Xe,tt,ht){(H!==Xe||ne!==tt||fe!==ht)&&(n.stencilFunc(Xe,tt,ht),H=Xe,ne=tt,fe=ht)},setOp:function(Xe,tt,ht){(xe!==Xe||Ce!==tt||Oe!==ht)&&(n.stencilOp(Xe,tt,ht),xe=Xe,Ce=tt,Oe=ht)},setLocked:function(Xe){he=Xe},setClear:function(Xe){$e!==Xe&&(n.clearStencil(Xe),$e=Xe)},reset:function(){he=!1,Ze=null,H=null,ne=null,fe=null,xe=null,Ce=null,Oe=null,$e=null}}}const a=new i,l=new s,u=new o,c=new WeakMap,f=new WeakMap;let d={},h={},m=new WeakMap,v=[],y=null,p=!1,S=null,b=null,g=null,w=null,x=null,M=null,A=null,N=new mt(0,0,0),C=0,T=!1,R=null,$=null,B=null,z=null,D=null;const I=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let U=!1,L=0;const q=n.getParameter(n.VERSION);q.indexOf("WebGL")!==-1?(L=parseFloat(/^WebGL (\d)/.exec(q)[1]),U=L>=1):q.indexOf("OpenGL ES")!==-1&&(L=parseFloat(/^OpenGL ES (\d)/.exec(q)[1]),U=L>=2);let Z=null,J={};const Y=n.getParameter(n.SCISSOR_BOX),ee=n.getParameter(n.VIEWPORT),ae=new En().fromArray(Y),ce=new En().fromArray(ee);function pe(he,Ze,H,ne){const fe=new Uint8Array(4),xe=n.createTexture();n.bindTexture(he,xe),n.texParameteri(he,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(he,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Ce=0;Ce<H;Ce++)r&&(he===n.TEXTURE_3D||he===n.TEXTURE_2D_ARRAY)?n.texImage3D(Ze,0,n.RGBA,1,1,ne,0,n.RGBA,n.UNSIGNED_BYTE,fe):n.texImage2D(Ze+Ce,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,fe);return xe}const we={};we[n.TEXTURE_2D]=pe(n.TEXTURE_2D,n.TEXTURE_2D,1),we[n.TEXTURE_CUBE_MAP]=pe(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(we[n.TEXTURE_2D_ARRAY]=pe(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),we[n.TEXTURE_3D]=pe(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),u.setClear(0),me(n.DEPTH_TEST),l.setFunc(C0),oe(!1),G(uD),me(n.CULL_FACE),ie(bu);function me(he){d[he]!==!0&&(n.enable(he),d[he]=!0)}function Ae(he){d[he]!==!1&&(n.disable(he),d[he]=!1)}function Ee(he,Ze){return h[he]!==Ze?(n.bindFramebuffer(he,Ze),h[he]=Ze,r&&(he===n.DRAW_FRAMEBUFFER&&(h[n.FRAMEBUFFER]=Ze),he===n.FRAMEBUFFER&&(h[n.DRAW_FRAMEBUFFER]=Ze)),!0):!1}function re(he,Ze){let H=v,ne=!1;if(he)if(H=m.get(Ze),H===void 0&&(H=[],m.set(Ze,H)),he.isWebGLMultipleRenderTargets){const fe=he.texture;if(H.length!==fe.length||H[0]!==n.COLOR_ATTACHMENT0){for(let xe=0,Ce=fe.length;xe<Ce;xe++)H[xe]=n.COLOR_ATTACHMENT0+xe;H.length=fe.length,ne=!0}}else H[0]!==n.COLOR_ATTACHMENT0&&(H[0]=n.COLOR_ATTACHMENT0,ne=!0);else H[0]!==n.BACK&&(H[0]=n.BACK,ne=!0);ne&&(t.isWebGL2?n.drawBuffers(H):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(H))}function Pe(he){return y!==he?(n.useProgram(he),y=he,!0):!1}const Re={[yc]:n.FUNC_ADD,[uK]:n.FUNC_SUBTRACT,[cK]:n.FUNC_REVERSE_SUBTRACT};if(r)Re[hD]=n.MIN,Re[pD]=n.MAX;else{const he=e.get("EXT_blend_minmax");he!==null&&(Re[hD]=he.MIN_EXT,Re[pD]=he.MAX_EXT)}const te={[fK]:n.ZERO,[dK]:n.ONE,[hK]:n.SRC_COLOR,[v_]:n.SRC_ALPHA,[xK]:n.SRC_ALPHA_SATURATE,[vK]:n.DST_COLOR,[mK]:n.DST_ALPHA,[pK]:n.ONE_MINUS_SRC_COLOR,[y_]:n.ONE_MINUS_SRC_ALPHA,[yK]:n.ONE_MINUS_DST_COLOR,[gK]:n.ONE_MINUS_DST_ALPHA,[bK]:n.CONSTANT_COLOR,[wK]:n.ONE_MINUS_CONSTANT_COLOR,[SK]:n.CONSTANT_ALPHA,[_K]:n.ONE_MINUS_CONSTANT_ALPHA};function ie(he,Ze,H,ne,fe,xe,Ce,Oe,$e,Xe){if(he===bu){p===!0&&(Ae(n.BLEND),p=!1);return}if(p===!1&&(me(n.BLEND),p=!0),he!==lK){if(he!==S||Xe!==T){if((b!==yc||x!==yc)&&(n.blendEquation(n.FUNC_ADD),b=yc,x=yc),Xe)switch(he){case vd:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case cD:n.blendFunc(n.ONE,n.ONE);break;case fD:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case dD:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",he);break}else switch(he){case vd:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case cD:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case fD:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case dD:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",he);break}g=null,w=null,M=null,A=null,N.set(0,0,0),C=0,S=he,T=Xe}return}fe=fe||Ze,xe=xe||H,Ce=Ce||ne,(Ze!==b||fe!==x)&&(n.blendEquationSeparate(Re[Ze],Re[fe]),b=Ze,x=fe),(H!==g||ne!==w||xe!==M||Ce!==A)&&(n.blendFuncSeparate(te[H],te[ne],te[xe],te[Ce]),g=H,w=ne,M=xe,A=Ce),(Oe.equals(N)===!1||$e!==C)&&(n.blendColor(Oe.r,Oe.g,Oe.b,$e),N.copy(Oe),C=$e),S=he,T=!1}function Me(he,Ze){he.side===ns?Ae(n.CULL_FACE):me(n.CULL_FACE);let H=he.side===as;Ze&&(H=!H),oe(H),he.blending===vd&&he.transparent===!1?ie(bu):ie(he.blending,he.blendEquation,he.blendSrc,he.blendDst,he.blendEquationAlpha,he.blendSrcAlpha,he.blendDstAlpha,he.blendColor,he.blendAlpha,he.premultipliedAlpha),l.setFunc(he.depthFunc),l.setTest(he.depthTest),l.setMask(he.depthWrite),a.setMask(he.colorWrite);const ne=he.stencilWrite;u.setTest(ne),ne&&(u.setMask(he.stencilWriteMask),u.setFunc(he.stencilFunc,he.stencilRef,he.stencilFuncMask),u.setOp(he.stencilFail,he.stencilZFail,he.stencilZPass)),de(he.polygonOffset,he.polygonOffsetFactor,he.polygonOffsetUnits),he.alphaToCoverage===!0?me(n.SAMPLE_ALPHA_TO_COVERAGE):Ae(n.SAMPLE_ALPHA_TO_COVERAGE)}function oe(he){R!==he&&(he?n.frontFace(n.CW):n.frontFace(n.CCW),R=he)}function G(he){he!==sK?(me(n.CULL_FACE),he!==$&&(he===uD?n.cullFace(n.BACK):he===oK?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Ae(n.CULL_FACE),$=he}function j(he){he!==B&&(U&&n.lineWidth(he),B=he)}function de(he,Ze,H){he?(me(n.POLYGON_OFFSET_FILL),(z!==Ze||D!==H)&&(n.polygonOffset(Ze,H),z=Ze,D=H)):Ae(n.POLYGON_OFFSET_FILL)}function Te(he){he?me(n.SCISSOR_TEST):Ae(n.SCISSOR_TEST)}function X(he){he===void 0&&(he=n.TEXTURE0+I-1),Z!==he&&(n.activeTexture(he),Z=he)}function Q(he,Ze,H){H===void 0&&(Z===null?H=n.TEXTURE0+I-1:H=Z);let ne=J[H];ne===void 0&&(ne={type:void 0,texture:void 0},J[H]=ne),(ne.type!==he||ne.texture!==Ze)&&(Z!==H&&(n.activeTexture(H),Z=H),n.bindTexture(he,Ze||we[he]),ne.type=he,ne.texture=Ze)}function be(){const he=J[Z];he!==void 0&&he.type!==void 0&&(n.bindTexture(he.type,null),he.type=void 0,he.texture=void 0)}function _e(){try{n.compressedTexImage2D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Ne(){try{n.compressedTexImage3D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Fe(){try{n.texSubImage2D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function He(){try{n.texSubImage3D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Ie(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Je(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function qe(){try{n.texStorage2D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function lt(){try{n.texStorage3D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function ot(){try{n.texImage2D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function ye(){try{n.texImage3D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function We(he){ae.equals(he)===!1&&(n.scissor(he.x,he.y,he.z,he.w),ae.copy(he))}function W(he){ce.equals(he)===!1&&(n.viewport(he.x,he.y,he.z,he.w),ce.copy(he))}function ve(he,Ze){let H=f.get(Ze);H===void 0&&(H=new WeakMap,f.set(Ze,H));let ne=H.get(he);ne===void 0&&(ne=n.getUniformBlockIndex(Ze,he.name),H.set(he,ne))}function ke(he,Ze){const ne=f.get(Ze).get(he);c.get(Ze)!==ne&&(n.uniformBlockBinding(Ze,ne,he.__bindingPointIndex),c.set(Ze,ne))}function Ye(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),r===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),d={},Z=null,J={},h={},m=new WeakMap,v=[],y=null,p=!1,S=null,b=null,g=null,w=null,x=null,M=null,A=null,N=new mt(0,0,0),C=0,T=!1,R=null,$=null,B=null,z=null,D=null,ae.set(0,0,n.canvas.width,n.canvas.height),ce.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),u.reset()}return{buffers:{color:a,depth:l,stencil:u},enable:me,disable:Ae,bindFramebuffer:Ee,drawBuffers:re,useProgram:Pe,setBlending:ie,setMaterial:Me,setFlipSided:oe,setCullFace:G,setLineWidth:j,setPolygonOffset:de,setScissorTest:Te,activeTexture:X,bindTexture:Q,unbindTexture:be,compressedTexImage2D:_e,compressedTexImage3D:Ne,texImage2D:ot,texImage3D:ye,updateUBOMapping:ve,uniformBlockBinding:ke,texStorage2D:qe,texStorage3D:lt,texSubImage2D:Fe,texSubImage3D:He,compressedTexSubImage2D:Ie,compressedTexSubImage3D:Je,scissor:We,viewport:W,reset:Ye}}function uUe(n,e,t,r,i,s,o){const a=i.isWebGL2,l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new WeakMap;let f;const d=new WeakMap;let h=!1;try{h=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function m(G,j){return h?new OffscreenCanvas(G,j):z0("canvas")}function v(G,j,de,Te){let X=1;if((G.width>Te||G.height>Te)&&(X=Te/Math.max(G.width,G.height)),X<1||j===!0)if(typeof HTMLImageElement<"u"&&G instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&G instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&G instanceof ImageBitmap){const Q=j?w_:Math.floor,be=Q(X*G.width),_e=Q(X*G.height);f===void 0&&(f=m(be,_e));const Ne=de?m(be,_e):f;return Ne.width=be,Ne.height=_e,Ne.getContext("2d").drawImage(G,0,0,be,_e),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+G.width+"x"+G.height+") to ("+be+"x"+_e+")."),Ne}else return"data"in G&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+G.width+"x"+G.height+")."),G;return G}function y(G){return HD(G.width)&&HD(G.height)}function p(G){return a?!1:G.wrapS!==rs||G.wrapT!==rs||G.minFilter!==Ur&&G.minFilter!==lr}function S(G,j){return G.generateMipmaps&&j&&G.minFilter!==Ur&&G.minFilter!==lr}function b(G){n.generateMipmap(G)}function g(G,j,de,Te,X=!1){if(a===!1)return j;if(G!==null){if(n[G]!==void 0)return n[G];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+G+"'")}let Q=j;if(j===n.RED&&(de===n.FLOAT&&(Q=n.R32F),de===n.HALF_FLOAT&&(Q=n.R16F),de===n.UNSIGNED_BYTE&&(Q=n.R8)),j===n.RED_INTEGER&&(de===n.UNSIGNED_BYTE&&(Q=n.R8UI),de===n.UNSIGNED_SHORT&&(Q=n.R16UI),de===n.UNSIGNED_INT&&(Q=n.R32UI),de===n.BYTE&&(Q=n.R8I),de===n.SHORT&&(Q=n.R16I),de===n.INT&&(Q=n.R32I)),j===n.RG&&(de===n.FLOAT&&(Q=n.RG32F),de===n.HALF_FLOAT&&(Q=n.RG16F),de===n.UNSIGNED_BYTE&&(Q=n.RG8)),j===n.RGBA){const be=X?k0:$n.getTransfer(Te);de===n.FLOAT&&(Q=n.RGBA32F),de===n.HALF_FLOAT&&(Q=n.RGBA16F),de===n.UNSIGNED_BYTE&&(Q=be===nr?n.SRGB8_ALPHA8:n.RGBA8),de===n.UNSIGNED_SHORT_4_4_4_4&&(Q=n.RGBA4),de===n.UNSIGNED_SHORT_5_5_5_1&&(Q=n.RGB5_A1)}return(Q===n.R16F||Q===n.R32F||Q===n.RG16F||Q===n.RG32F||Q===n.RGBA16F||Q===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Q}function w(G,j,de){return S(G,de)===!0||G.isFramebufferTexture&&G.minFilter!==Ur&&G.minFilter!==lr?Math.log2(Math.max(j.width,j.height))+1:G.mipmaps!==void 0&&G.mipmaps.length>0?G.mipmaps.length:G.isCompressedTexture&&Array.isArray(G.image)?j.mipmaps.length:1}function x(G){return G===Ur||G===x_||G===Yf?n.NEAREST:n.LINEAR}function M(G){const j=G.target;j.removeEventListener("dispose",M),N(j),j.isVideoTexture&&c.delete(j)}function A(G){const j=G.target;j.removeEventListener("dispose",A),T(j)}function N(G){const j=r.get(G);if(j.__webglInit===void 0)return;const de=G.source,Te=d.get(de);if(Te){const X=Te[j.__cacheKey];X.usedTimes--,X.usedTimes===0&&C(G),Object.keys(Te).length===0&&d.delete(de)}r.remove(G)}function C(G){const j=r.get(G);n.deleteTexture(j.__webglTexture);const de=G.source,Te=d.get(de);delete Te[j.__cacheKey],o.memory.textures--}function T(G){const j=G.texture,de=r.get(G),Te=r.get(j);if(Te.__webglTexture!==void 0&&(n.deleteTexture(Te.__webglTexture),o.memory.textures--),G.depthTexture&&G.depthTexture.dispose(),G.isWebGLCubeRenderTarget)for(let X=0;X<6;X++){if(Array.isArray(de.__webglFramebuffer[X]))for(let Q=0;Q<de.__webglFramebuffer[X].length;Q++)n.deleteFramebuffer(de.__webglFramebuffer[X][Q]);else n.deleteFramebuffer(de.__webglFramebuffer[X]);de.__webglDepthbuffer&&n.deleteRenderbuffer(de.__webglDepthbuffer[X])}else{if(Array.isArray(de.__webglFramebuffer))for(let X=0;X<de.__webglFramebuffer.length;X++)n.deleteFramebuffer(de.__webglFramebuffer[X]);else n.deleteFramebuffer(de.__webglFramebuffer);if(de.__webglDepthbuffer&&n.deleteRenderbuffer(de.__webglDepthbuffer),de.__webglMultisampledFramebuffer&&n.deleteFramebuffer(de.__webglMultisampledFramebuffer),de.__webglColorRenderbuffer)for(let X=0;X<de.__webglColorRenderbuffer.length;X++)de.__webglColorRenderbuffer[X]&&n.deleteRenderbuffer(de.__webglColorRenderbuffer[X]);de.__webglDepthRenderbuffer&&n.deleteRenderbuffer(de.__webglDepthRenderbuffer)}if(G.isWebGLMultipleRenderTargets)for(let X=0,Q=j.length;X<Q;X++){const be=r.get(j[X]);be.__webglTexture&&(n.deleteTexture(be.__webglTexture),o.memory.textures--),r.remove(j[X])}r.remove(j),r.remove(G)}let R=0;function $(){R=0}function B(){const G=R;return G>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+G+" texture units while this GPU supports only "+i.maxTextures),R+=1,G}function z(G){const j=[];return j.push(G.wrapS),j.push(G.wrapT),j.push(G.wrapR||0),j.push(G.magFilter),j.push(G.minFilter),j.push(G.anisotropy),j.push(G.internalFormat),j.push(G.format),j.push(G.type),j.push(G.generateMipmaps),j.push(G.premultiplyAlpha),j.push(G.flipY),j.push(G.unpackAlignment),j.push(G.colorSpace),j.join()}function D(G,j){const de=r.get(G);if(G.isVideoTexture&&Me(G),G.isRenderTargetTexture===!1&&G.version>0&&de.__version!==G.version){const Te=G.image;if(Te===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Te.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ae(de,G,j);return}}t.bindTexture(n.TEXTURE_2D,de.__webglTexture,n.TEXTURE0+j)}function I(G,j){const de=r.get(G);if(G.version>0&&de.__version!==G.version){ae(de,G,j);return}t.bindTexture(n.TEXTURE_2D_ARRAY,de.__webglTexture,n.TEXTURE0+j)}function U(G,j){const de=r.get(G);if(G.version>0&&de.__version!==G.version){ae(de,G,j);return}t.bindTexture(n.TEXTURE_3D,de.__webglTexture,n.TEXTURE0+j)}function L(G,j){const de=r.get(G);if(G.version>0&&de.__version!==G.version){ce(de,G,j);return}t.bindTexture(n.TEXTURE_CUBE_MAP,de.__webglTexture,n.TEXTURE0+j)}const q={[D0]:n.REPEAT,[rs]:n.CLAMP_TO_EDGE,[N0]:n.MIRRORED_REPEAT},Z={[Ur]:n.NEAREST,[x_]:n.NEAREST_MIPMAP_NEAREST,[Yf]:n.NEAREST_MIPMAP_LINEAR,[lr]:n.LINEAR,[Fv]:n.LINEAR_MIPMAP_NEAREST,[xl]:n.LINEAR_MIPMAP_LINEAR},J={[QK]:n.NEVER,[sZ]:n.ALWAYS,[eZ]:n.LESS,[yO]:n.LEQUAL,[tZ]:n.EQUAL,[iZ]:n.GEQUAL,[nZ]:n.GREATER,[rZ]:n.NOTEQUAL};function Y(G,j,de){if(j.type===vo&&e.has("OES_texture_float_linear")===!1&&(j.magFilter===lr||j.magFilter===Fv||j.magFilter===Yf||j.magFilter===xl||j.minFilter===lr||j.minFilter===Fv||j.minFilter===Yf||j.minFilter===xl)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),de?(n.texParameteri(G,n.TEXTURE_WRAP_S,q[j.wrapS]),n.texParameteri(G,n.TEXTURE_WRAP_T,q[j.wrapT]),(G===n.TEXTURE_3D||G===n.TEXTURE_2D_ARRAY)&&n.texParameteri(G,n.TEXTURE_WRAP_R,q[j.wrapR]),n.texParameteri(G,n.TEXTURE_MAG_FILTER,Z[j.magFilter]),n.texParameteri(G,n.TEXTURE_MIN_FILTER,Z[j.minFilter])):(n.texParameteri(G,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(G,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(G===n.TEXTURE_3D||G===n.TEXTURE_2D_ARRAY)&&n.texParameteri(G,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(j.wrapS!==rs||j.wrapT!==rs)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(G,n.TEXTURE_MAG_FILTER,x(j.magFilter)),n.texParameteri(G,n.TEXTURE_MIN_FILTER,x(j.minFilter)),j.minFilter!==Ur&&j.minFilter!==lr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),j.compareFunction&&(n.texParameteri(G,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(G,n.TEXTURE_COMPARE_FUNC,J[j.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Te=e.get("EXT_texture_filter_anisotropic");if(j.magFilter===Ur||j.minFilter!==Yf&&j.minFilter!==xl||j.type===vo&&e.has("OES_texture_float_linear")===!1||a===!1&&j.type===kd&&e.has("OES_texture_half_float_linear")===!1)return;(j.anisotropy>1||r.get(j).__currentAnisotropy)&&(n.texParameterf(G,Te.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(j.anisotropy,i.getMaxAnisotropy())),r.get(j).__currentAnisotropy=j.anisotropy)}}function ee(G,j){let de=!1;G.__webglInit===void 0&&(G.__webglInit=!0,j.addEventListener("dispose",M));const Te=j.source;let X=d.get(Te);X===void 0&&(X={},d.set(Te,X));const Q=z(j);if(Q!==G.__cacheKey){X[Q]===void 0&&(X[Q]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,de=!0),X[Q].usedTimes++;const be=X[G.__cacheKey];be!==void 0&&(X[G.__cacheKey].usedTimes--,be.usedTimes===0&&C(j)),G.__cacheKey=Q,G.__webglTexture=X[Q].texture}return de}function ae(G,j,de){let Te=n.TEXTURE_2D;(j.isDataArrayTexture||j.isCompressedArrayTexture)&&(Te=n.TEXTURE_2D_ARRAY),j.isData3DTexture&&(Te=n.TEXTURE_3D);const X=ee(G,j),Q=j.source;t.bindTexture(Te,G.__webglTexture,n.TEXTURE0+de);const be=r.get(Q);if(Q.version!==be.__version||X===!0){t.activeTexture(n.TEXTURE0+de);const _e=$n.getPrimaries($n.workingColorSpace),Ne=j.colorSpace===yo?null:$n.getPrimaries(j.colorSpace),Fe=j.colorSpace===yo||_e===Ne?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,j.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,j.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,j.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Fe);const He=p(j)&&y(j.image)===!1;let Ie=v(j.image,He,!1,i.maxTextureSize);Ie=oe(j,Ie);const Je=y(Ie)||a,qe=s.convert(j.format,j.colorSpace);let lt=s.convert(j.type),ot=g(j.internalFormat,qe,lt,j.colorSpace,j.isVideoTexture);Y(Te,j,Je);let ye;const We=j.mipmaps,W=a&&j.isVideoTexture!==!0&&ot!==mO,ve=be.__version===void 0||X===!0,ke=Q.dataReady,Ye=w(j,Ie,Je);if(j.isDepthTexture)ot=n.DEPTH_COMPONENT,a?j.type===vo?ot=n.DEPTH_COMPONENT32F:j.type===pu?ot=n.DEPTH_COMPONENT24:j.type===zc?ot=n.DEPTH24_STENCIL8:ot=n.DEPTH_COMPONENT16:j.type===vo&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),j.format===Uc&&ot===n.DEPTH_COMPONENT&&j.type!==qE&&j.type!==pu&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),j.type=pu,lt=s.convert(j.type)),j.format===Id&&ot===n.DEPTH_COMPONENT&&(ot=n.DEPTH_STENCIL,j.type!==zc&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),j.type=zc,lt=s.convert(j.type))),ve&&(W?t.texStorage2D(n.TEXTURE_2D,1,ot,Ie.width,Ie.height):t.texImage2D(n.TEXTURE_2D,0,ot,Ie.width,Ie.height,0,qe,lt,null));else if(j.isDataTexture)if(We.length>0&&Je){W&&ve&&t.texStorage2D(n.TEXTURE_2D,Ye,ot,We[0].width,We[0].height);for(let he=0,Ze=We.length;he<Ze;he++)ye=We[he],W?ke&&t.texSubImage2D(n.TEXTURE_2D,he,0,0,ye.width,ye.height,qe,lt,ye.data):t.texImage2D(n.TEXTURE_2D,he,ot,ye.width,ye.height,0,qe,lt,ye.data);j.generateMipmaps=!1}else W?(ve&&t.texStorage2D(n.TEXTURE_2D,Ye,ot,Ie.width,Ie.height),ke&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ie.width,Ie.height,qe,lt,Ie.data)):t.texImage2D(n.TEXTURE_2D,0,ot,Ie.width,Ie.height,0,qe,lt,Ie.data);else if(j.isCompressedTexture)if(j.isCompressedArrayTexture){W&&ve&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ye,ot,We[0].width,We[0].height,Ie.depth);for(let he=0,Ze=We.length;he<Ze;he++)ye=We[he],j.format!==Ss?qe!==null?W?ke&&t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,he,0,0,0,ye.width,ye.height,Ie.depth,qe,ye.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,he,ot,ye.width,ye.height,Ie.depth,0,ye.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):W?ke&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,he,0,0,0,ye.width,ye.height,Ie.depth,qe,lt,ye.data):t.texImage3D(n.TEXTURE_2D_ARRAY,he,ot,ye.width,ye.height,Ie.depth,0,qe,lt,ye.data)}else{W&&ve&&t.texStorage2D(n.TEXTURE_2D,Ye,ot,We[0].width,We[0].height);for(let he=0,Ze=We.length;he<Ze;he++)ye=We[he],j.format!==Ss?qe!==null?W?ke&&t.compressedTexSubImage2D(n.TEXTURE_2D,he,0,0,ye.width,ye.height,qe,ye.data):t.compressedTexImage2D(n.TEXTURE_2D,he,ot,ye.width,ye.height,0,ye.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):W?ke&&t.texSubImage2D(n.TEXTURE_2D,he,0,0,ye.width,ye.height,qe,lt,ye.data):t.texImage2D(n.TEXTURE_2D,he,ot,ye.width,ye.height,0,qe,lt,ye.data)}else if(j.isDataArrayTexture)W?(ve&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ye,ot,Ie.width,Ie.height,Ie.depth),ke&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ie.width,Ie.height,Ie.depth,qe,lt,Ie.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,ot,Ie.width,Ie.height,Ie.depth,0,qe,lt,Ie.data);else if(j.isData3DTexture)W?(ve&&t.texStorage3D(n.TEXTURE_3D,Ye,ot,Ie.width,Ie.height,Ie.depth),ke&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ie.width,Ie.height,Ie.depth,qe,lt,Ie.data)):t.texImage3D(n.TEXTURE_3D,0,ot,Ie.width,Ie.height,Ie.depth,0,qe,lt,Ie.data);else if(j.isFramebufferTexture){if(ve)if(W)t.texStorage2D(n.TEXTURE_2D,Ye,ot,Ie.width,Ie.height);else{let he=Ie.width,Ze=Ie.height;for(let H=0;H<Ye;H++)t.texImage2D(n.TEXTURE_2D,H,ot,he,Ze,0,qe,lt,null),he>>=1,Ze>>=1}}else if(We.length>0&&Je){W&&ve&&t.texStorage2D(n.TEXTURE_2D,Ye,ot,We[0].width,We[0].height);for(let he=0,Ze=We.length;he<Ze;he++)ye=We[he],W?ke&&t.texSubImage2D(n.TEXTURE_2D,he,0,0,qe,lt,ye):t.texImage2D(n.TEXTURE_2D,he,ot,qe,lt,ye);j.generateMipmaps=!1}else W?(ve&&t.texStorage2D(n.TEXTURE_2D,Ye,ot,Ie.width,Ie.height),ke&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,qe,lt,Ie)):t.texImage2D(n.TEXTURE_2D,0,ot,qe,lt,Ie);S(j,Je)&&b(Te),be.__version=Q.version,j.onUpdate&&j.onUpdate(j)}G.__version=j.version}function ce(G,j,de){if(j.image.length!==6)return;const Te=ee(G,j),X=j.source;t.bindTexture(n.TEXTURE_CUBE_MAP,G.__webglTexture,n.TEXTURE0+de);const Q=r.get(X);if(X.version!==Q.__version||Te===!0){t.activeTexture(n.TEXTURE0+de);const be=$n.getPrimaries($n.workingColorSpace),_e=j.colorSpace===yo?null:$n.getPrimaries(j.colorSpace),Ne=j.colorSpace===yo||be===_e?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,j.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,j.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,j.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ne);const Fe=j.isCompressedTexture||j.image[0].isCompressedTexture,He=j.image[0]&&j.image[0].isDataTexture,Ie=[];for(let he=0;he<6;he++)!Fe&&!He?Ie[he]=v(j.image[he],!1,!0,i.maxCubemapSize):Ie[he]=He?j.image[he].image:j.image[he],Ie[he]=oe(j,Ie[he]);const Je=Ie[0],qe=y(Je)||a,lt=s.convert(j.format,j.colorSpace),ot=s.convert(j.type),ye=g(j.internalFormat,lt,ot,j.colorSpace),We=a&&j.isVideoTexture!==!0,W=Q.__version===void 0||Te===!0,ve=X.dataReady;let ke=w(j,Je,qe);Y(n.TEXTURE_CUBE_MAP,j,qe);let Ye;if(Fe){We&&W&&t.texStorage2D(n.TEXTURE_CUBE_MAP,ke,ye,Je.width,Je.height);for(let he=0;he<6;he++){Ye=Ie[he].mipmaps;for(let Ze=0;Ze<Ye.length;Ze++){const H=Ye[Ze];j.format!==Ss?lt!==null?We?ve&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Ze,0,0,H.width,H.height,lt,H.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Ze,ye,H.width,H.height,0,H.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):We?ve&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Ze,0,0,H.width,H.height,lt,ot,H.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Ze,ye,H.width,H.height,0,lt,ot,H.data)}}}else{Ye=j.mipmaps,We&&W&&(Ye.length>0&&ke++,t.texStorage2D(n.TEXTURE_CUBE_MAP,ke,ye,Ie[0].width,Ie[0].height));for(let he=0;he<6;he++)if(He){We?ve&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,0,0,0,Ie[he].width,Ie[he].height,lt,ot,Ie[he].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,0,ye,Ie[he].width,Ie[he].height,0,lt,ot,Ie[he].data);for(let Ze=0;Ze<Ye.length;Ze++){const ne=Ye[Ze].image[he].image;We?ve&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Ze+1,0,0,ne.width,ne.height,lt,ot,ne.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Ze+1,ye,ne.width,ne.height,0,lt,ot,ne.data)}}else{We?ve&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,0,0,0,lt,ot,Ie[he]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,0,ye,lt,ot,Ie[he]);for(let Ze=0;Ze<Ye.length;Ze++){const H=Ye[Ze];We?ve&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Ze+1,0,0,lt,ot,H.image[he]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Ze+1,ye,lt,ot,H.image[he])}}}S(j,qe)&&b(n.TEXTURE_CUBE_MAP),Q.__version=X.version,j.onUpdate&&j.onUpdate(j)}G.__version=j.version}function pe(G,j,de,Te,X,Q){const be=s.convert(de.format,de.colorSpace),_e=s.convert(de.type),Ne=g(de.internalFormat,be,_e,de.colorSpace);if(!r.get(j).__hasExternalTextures){const He=Math.max(1,j.width>>Q),Ie=Math.max(1,j.height>>Q);X===n.TEXTURE_3D||X===n.TEXTURE_2D_ARRAY?t.texImage3D(X,Q,Ne,He,Ie,j.depth,0,be,_e,null):t.texImage2D(X,Q,Ne,He,Ie,0,be,_e,null)}t.bindFramebuffer(n.FRAMEBUFFER,G),ie(j)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Te,X,r.get(de).__webglTexture,0,te(j)):(X===n.TEXTURE_2D||X>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&X<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Te,X,r.get(de).__webglTexture,Q),t.bindFramebuffer(n.FRAMEBUFFER,null)}function we(G,j,de){if(n.bindRenderbuffer(n.RENDERBUFFER,G),j.depthBuffer&&!j.stencilBuffer){let Te=a===!0?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if(de||ie(j)){const X=j.depthTexture;X&&X.isDepthTexture&&(X.type===vo?Te=n.DEPTH_COMPONENT32F:X.type===pu&&(Te=n.DEPTH_COMPONENT24));const Q=te(j);ie(j)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Q,Te,j.width,j.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,Q,Te,j.width,j.height)}else n.renderbufferStorage(n.RENDERBUFFER,Te,j.width,j.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,G)}else if(j.depthBuffer&&j.stencilBuffer){const Te=te(j);de&&ie(j)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Te,n.DEPTH24_STENCIL8,j.width,j.height):ie(j)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Te,n.DEPTH24_STENCIL8,j.width,j.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,j.width,j.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,G)}else{const Te=j.isWebGLMultipleRenderTargets===!0?j.texture:[j.texture];for(let X=0;X<Te.length;X++){const Q=Te[X],be=s.convert(Q.format,Q.colorSpace),_e=s.convert(Q.type),Ne=g(Q.internalFormat,be,_e,Q.colorSpace),Fe=te(j);de&&ie(j)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Fe,Ne,j.width,j.height):ie(j)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Fe,Ne,j.width,j.height):n.renderbufferStorage(n.RENDERBUFFER,Ne,j.width,j.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function me(G,j){if(j&&j.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,G),!(j.depthTexture&&j.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(j.depthTexture).__webglTexture||j.depthTexture.image.width!==j.width||j.depthTexture.image.height!==j.height)&&(j.depthTexture.image.width=j.width,j.depthTexture.image.height=j.height,j.depthTexture.needsUpdate=!0),D(j.depthTexture,0);const Te=r.get(j.depthTexture).__webglTexture,X=te(j);if(j.depthTexture.format===Uc)ie(j)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Te,0,X):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Te,0);else if(j.depthTexture.format===Id)ie(j)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Te,0,X):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Te,0);else throw new Error("Unknown depthTexture format")}function Ae(G){const j=r.get(G),de=G.isWebGLCubeRenderTarget===!0;if(G.depthTexture&&!j.__autoAllocateDepthBuffer){if(de)throw new Error("target.depthTexture not supported in Cube render targets");me(j.__webglFramebuffer,G)}else if(de){j.__webglDepthbuffer=[];for(let Te=0;Te<6;Te++)t.bindFramebuffer(n.FRAMEBUFFER,j.__webglFramebuffer[Te]),j.__webglDepthbuffer[Te]=n.createRenderbuffer(),we(j.__webglDepthbuffer[Te],G,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,j.__webglFramebuffer),j.__webglDepthbuffer=n.createRenderbuffer(),we(j.__webglDepthbuffer,G,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ee(G,j,de){const Te=r.get(G);j!==void 0&&pe(Te.__webglFramebuffer,G,G.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),de!==void 0&&Ae(G)}function re(G){const j=G.texture,de=r.get(G),Te=r.get(j);G.addEventListener("dispose",A),G.isWebGLMultipleRenderTargets!==!0&&(Te.__webglTexture===void 0&&(Te.__webglTexture=n.createTexture()),Te.__version=j.version,o.memory.textures++);const X=G.isWebGLCubeRenderTarget===!0,Q=G.isWebGLMultipleRenderTargets===!0,be=y(G)||a;if(X){de.__webglFramebuffer=[];for(let _e=0;_e<6;_e++)if(a&&j.mipmaps&&j.mipmaps.length>0){de.__webglFramebuffer[_e]=[];for(let Ne=0;Ne<j.mipmaps.length;Ne++)de.__webglFramebuffer[_e][Ne]=n.createFramebuffer()}else de.__webglFramebuffer[_e]=n.createFramebuffer()}else{if(a&&j.mipmaps&&j.mipmaps.length>0){de.__webglFramebuffer=[];for(let _e=0;_e<j.mipmaps.length;_e++)de.__webglFramebuffer[_e]=n.createFramebuffer()}else de.__webglFramebuffer=n.createFramebuffer();if(Q)if(i.drawBuffers){const _e=G.texture;for(let Ne=0,Fe=_e.length;Ne<Fe;Ne++){const He=r.get(_e[Ne]);He.__webglTexture===void 0&&(He.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&G.samples>0&&ie(G)===!1){const _e=Q?j:[j];de.__webglMultisampledFramebuffer=n.createFramebuffer(),de.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,de.__webglMultisampledFramebuffer);for(let Ne=0;Ne<_e.length;Ne++){const Fe=_e[Ne];de.__webglColorRenderbuffer[Ne]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,de.__webglColorRenderbuffer[Ne]);const He=s.convert(Fe.format,Fe.colorSpace),Ie=s.convert(Fe.type),Je=g(Fe.internalFormat,He,Ie,Fe.colorSpace,G.isXRRenderTarget===!0),qe=te(G);n.renderbufferStorageMultisample(n.RENDERBUFFER,qe,Je,G.width,G.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ne,n.RENDERBUFFER,de.__webglColorRenderbuffer[Ne])}n.bindRenderbuffer(n.RENDERBUFFER,null),G.depthBuffer&&(de.__webglDepthRenderbuffer=n.createRenderbuffer(),we(de.__webglDepthRenderbuffer,G,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(X){t.bindTexture(n.TEXTURE_CUBE_MAP,Te.__webglTexture),Y(n.TEXTURE_CUBE_MAP,j,be);for(let _e=0;_e<6;_e++)if(a&&j.mipmaps&&j.mipmaps.length>0)for(let Ne=0;Ne<j.mipmaps.length;Ne++)pe(de.__webglFramebuffer[_e][Ne],G,j,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+_e,Ne);else pe(de.__webglFramebuffer[_e],G,j,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+_e,0);S(j,be)&&b(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Q){const _e=G.texture;for(let Ne=0,Fe=_e.length;Ne<Fe;Ne++){const He=_e[Ne],Ie=r.get(He);t.bindTexture(n.TEXTURE_2D,Ie.__webglTexture),Y(n.TEXTURE_2D,He,be),pe(de.__webglFramebuffer,G,He,n.COLOR_ATTACHMENT0+Ne,n.TEXTURE_2D,0),S(He,be)&&b(n.TEXTURE_2D)}t.unbindTexture()}else{let _e=n.TEXTURE_2D;if((G.isWebGL3DRenderTarget||G.isWebGLArrayRenderTarget)&&(a?_e=G.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(_e,Te.__webglTexture),Y(_e,j,be),a&&j.mipmaps&&j.mipmaps.length>0)for(let Ne=0;Ne<j.mipmaps.length;Ne++)pe(de.__webglFramebuffer[Ne],G,j,n.COLOR_ATTACHMENT0,_e,Ne);else pe(de.__webglFramebuffer,G,j,n.COLOR_ATTACHMENT0,_e,0);S(j,be)&&b(_e),t.unbindTexture()}G.depthBuffer&&Ae(G)}function Pe(G){const j=y(G)||a,de=G.isWebGLMultipleRenderTargets===!0?G.texture:[G.texture];for(let Te=0,X=de.length;Te<X;Te++){const Q=de[Te];if(S(Q,j)){const be=G.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,_e=r.get(Q).__webglTexture;t.bindTexture(be,_e),b(be),t.unbindTexture()}}}function Re(G){if(a&&G.samples>0&&ie(G)===!1){const j=G.isWebGLMultipleRenderTargets?G.texture:[G.texture],de=G.width,Te=G.height;let X=n.COLOR_BUFFER_BIT;const Q=[],be=G.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,_e=r.get(G),Ne=G.isWebGLMultipleRenderTargets===!0;if(Ne)for(let Fe=0;Fe<j.length;Fe++)t.bindFramebuffer(n.FRAMEBUFFER,_e.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Fe,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,_e.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Fe,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,_e.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,_e.__webglFramebuffer);for(let Fe=0;Fe<j.length;Fe++){Q.push(n.COLOR_ATTACHMENT0+Fe),G.depthBuffer&&Q.push(be);const He=_e.__ignoreDepthValues!==void 0?_e.__ignoreDepthValues:!1;if(He===!1&&(G.depthBuffer&&(X|=n.DEPTH_BUFFER_BIT),G.stencilBuffer&&(X|=n.STENCIL_BUFFER_BIT)),Ne&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,_e.__webglColorRenderbuffer[Fe]),He===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[be]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[be])),Ne){const Ie=r.get(j[Fe]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Ie,0)}n.blitFramebuffer(0,0,de,Te,0,0,de,Te,X,n.NEAREST),u&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Q)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ne)for(let Fe=0;Fe<j.length;Fe++){t.bindFramebuffer(n.FRAMEBUFFER,_e.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Fe,n.RENDERBUFFER,_e.__webglColorRenderbuffer[Fe]);const He=r.get(j[Fe]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,_e.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Fe,n.TEXTURE_2D,He,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,_e.__webglMultisampledFramebuffer)}}function te(G){return Math.min(i.maxSamples,G.samples)}function ie(G){const j=r.get(G);return a&&G.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&j.__useRenderToTexture!==!1}function Me(G){const j=o.render.frame;c.get(G)!==j&&(c.set(G,j),G.update())}function oe(G,j){const de=G.colorSpace,Te=G.format,X=G.type;return G.isCompressedTexture===!0||G.isVideoTexture===!0||G.format===b_||de!==Ll&&de!==yo&&($n.getTransfer(de)===nr?a===!1?e.has("EXT_sRGB")===!0&&Te===Ss?(G.format=b_,G.minFilter=lr,G.generateMipmaps=!1):j=bO.sRGBToLinear(j):(Te!==Ss||X!==Tl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",de)),j}this.allocateTextureUnit=B,this.resetTextureUnits=$,this.setTexture2D=D,this.setTexture2DArray=I,this.setTexture3D=U,this.setTextureCube=L,this.rebindTextures=Ee,this.setupRenderTarget=re,this.updateRenderTargetMipmap=Pe,this.updateMultisampleRenderTarget=Re,this.setupDepthRenderbuffer=Ae,this.setupFrameBufferTexture=pe,this.useMultisampledRTT=ie}function xZ(n,e,t){const r=t.isWebGL2;function i(s,o=yo){let a;const l=$n.getTransfer(o);if(s===Tl)return n.UNSIGNED_BYTE;if(s===cO)return n.UNSIGNED_SHORT_4_4_4_4;if(s===fO)return n.UNSIGNED_SHORT_5_5_5_1;if(s===zK)return n.BYTE;if(s===UK)return n.SHORT;if(s===qE)return n.UNSIGNED_SHORT;if(s===uO)return n.INT;if(s===pu)return n.UNSIGNED_INT;if(s===vo)return n.FLOAT;if(s===kd)return r?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===$K)return n.ALPHA;if(s===Ss)return n.RGBA;if(s===VK)return n.LUMINANCE;if(s===HK)return n.LUMINANCE_ALPHA;if(s===Uc)return n.DEPTH_COMPONENT;if(s===Id)return n.DEPTH_STENCIL;if(s===b_)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===WK)return n.RED;if(s===dO)return n.RED_INTEGER;if(s===jK)return n.RG;if(s===hO)return n.RG_INTEGER;if(s===pO)return n.RGBA_INTEGER;if(s===Iw||s===Lw||s===Fw||s===Bw)if(l===nr)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===Iw)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Lw)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Fw)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Bw)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===Iw)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Lw)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Fw)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Bw)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===gD||s===vD||s===yD||s===xD)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===gD)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===vD)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===yD)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===xD)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===mO)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===bD||s===wD)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===bD)return l===nr?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===wD)return l===nr?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===SD||s===_D||s===ED||s===MD||s===CD||s===AD||s===TD||s===DD||s===ND||s===PD||s===RD||s===OD||s===kD||s===ID)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===SD)return l===nr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===_D)return l===nr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===ED)return l===nr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===MD)return l===nr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===CD)return l===nr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===AD)return l===nr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===TD)return l===nr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===DD)return l===nr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===ND)return l===nr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===PD)return l===nr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===RD)return l===nr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===OD)return l===nr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===kD)return l===nr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===ID)return l===nr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===zw||s===LD||s===FD)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===zw)return l===nr?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===LD)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===FD)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===GK||s===BD||s===zD||s===UD)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===zw)return a.COMPRESSED_RED_RGTC1_EXT;if(s===BD)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===zD)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===UD)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===zc?r?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:i}}class bZ extends pr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Tp extends Mn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const cUe={type:"move"};class uA{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Tp,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Tp,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new le,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new le),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Tp,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new le,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new le),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const v of e.hand.values()){const y=t.getJointPose(v,r),p=this._getHandJoint(u,v);y!==null&&(p.matrix.fromArray(y.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.matrixWorldNeedsUpdate=!0,p.jointRadius=y.radius),p.visible=y!==null}const c=u.joints["index-finger-tip"],f=u.joints["thumb-tip"],d=c.position.distanceTo(f.position),h=.02,m=.005;u.inputState.pinching&&d>h+m?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&d<=h-m&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(cUe)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new Tp;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}const fUe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,dUe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class hUe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,r){if(this.texture===null){const i=new Er,s=e.properties.get(i);s.__webglTexture=t.texture,(t.depthNear!=r.depthNear||t.depthFar!=r.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}render(e,t){if(this.texture!==null){if(this.mesh===null){const r=t.cameras[0].viewport,i=new Do({extensions:{fragDepth:!0},vertexShader:fUe,fragmentShader:dUe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:r.z},depthHeight:{value:r.w}}});this.mesh=new Vr(new Zm(20,20),i)}e.render(this.mesh,t)}}reset(){this.texture=null,this.mesh=null}}class pUe extends zl{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,u=null,c=null,f=null,d=null,h=null,m=null;const v=new hUe,y=t.getContextAttributes();let p=null,S=null;const b=[],g=[],w=new et;let x=null;const M=new pr;M.layers.enable(1),M.viewport=new En;const A=new pr;A.layers.enable(2),A.viewport=new En;const N=[M,A],C=new bZ;C.layers.enable(1),C.layers.enable(2);let T=null,R=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ee){let ae=b[ee];return ae===void 0&&(ae=new uA,b[ee]=ae),ae.getTargetRaySpace()},this.getControllerGrip=function(ee){let ae=b[ee];return ae===void 0&&(ae=new uA,b[ee]=ae),ae.getGripSpace()},this.getHand=function(ee){let ae=b[ee];return ae===void 0&&(ae=new uA,b[ee]=ae),ae.getHandSpace()};function $(ee){const ae=g.indexOf(ee.inputSource);if(ae===-1)return;const ce=b[ae];ce!==void 0&&(ce.update(ee.inputSource,ee.frame,u||o),ce.dispatchEvent({type:ee.type,data:ee.inputSource}))}function B(){i.removeEventListener("select",$),i.removeEventListener("selectstart",$),i.removeEventListener("selectend",$),i.removeEventListener("squeeze",$),i.removeEventListener("squeezestart",$),i.removeEventListener("squeezeend",$),i.removeEventListener("end",B),i.removeEventListener("inputsourceschange",z);for(let ee=0;ee<b.length;ee++){const ae=g[ee];ae!==null&&(g[ee]=null,b[ee].disconnect(ae))}T=null,R=null,v.reset(),e.setRenderTarget(p),h=null,d=null,f=null,i=null,S=null,Y.stop(),r.isPresenting=!1,e.setPixelRatio(x),e.setSize(w.width,w.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ee){s=ee,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ee){a=ee,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(ee){u=ee},this.getBaseLayer=function(){return d!==null?d:h},this.getBinding=function(){return f},this.getFrame=function(){return m},this.getSession=function(){return i},this.setSession=async function(ee){if(i=ee,i!==null){if(p=e.getRenderTarget(),i.addEventListener("select",$),i.addEventListener("selectstart",$),i.addEventListener("selectend",$),i.addEventListener("squeeze",$),i.addEventListener("squeezestart",$),i.addEventListener("squeezeend",$),i.addEventListener("end",B),i.addEventListener("inputsourceschange",z),y.xrCompatible!==!0&&await t.makeXRCompatible(),x=e.getPixelRatio(),e.getSize(w),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const ae={antialias:i.renderState.layers===void 0?y.antialias:!0,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:s};h=new XRWebGLLayer(i,t,ae),i.updateRenderState({baseLayer:h}),e.setPixelRatio(1),e.setSize(h.framebufferWidth,h.framebufferHeight,!1),S=new la(h.framebufferWidth,h.framebufferHeight,{format:Ss,type:Tl,colorSpace:e.outputColorSpace,stencilBuffer:y.stencil})}else{let ae=null,ce=null,pe=null;y.depth&&(pe=y.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ae=y.stencil?Id:Uc,ce=y.stencil?zc:pu);const we={colorFormat:t.RGBA8,depthFormat:pe,scaleFactor:s};f=new XRWebGLBinding(i,t),d=f.createProjectionLayer(we),i.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),S=new la(d.textureWidth,d.textureHeight,{format:Ss,type:Tl,depthTexture:new JE(d.textureWidth,d.textureHeight,ce,void 0,void 0,void 0,void 0,void 0,void 0,ae),stencilBuffer:y.stencil,colorSpace:e.outputColorSpace,samples:y.antialias?4:0});const me=e.properties.get(S);me.__ignoreDepthValues=d.ignoreDepthValues}S.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await i.requestReferenceSpace(a),Y.setContext(i),Y.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function z(ee){for(let ae=0;ae<ee.removed.length;ae++){const ce=ee.removed[ae],pe=g.indexOf(ce);pe>=0&&(g[pe]=null,b[pe].disconnect(ce))}for(let ae=0;ae<ee.added.length;ae++){const ce=ee.added[ae];let pe=g.indexOf(ce);if(pe===-1){for(let me=0;me<b.length;me++)if(me>=g.length){g.push(ce),pe=me;break}else if(g[me]===null){g[me]=ce,pe=me;break}if(pe===-1)break}const we=b[pe];we&&we.connect(ce)}}const D=new le,I=new le;function U(ee,ae,ce){D.setFromMatrixPosition(ae.matrixWorld),I.setFromMatrixPosition(ce.matrixWorld);const pe=D.distanceTo(I),we=ae.projectionMatrix.elements,me=ce.projectionMatrix.elements,Ae=we[14]/(we[10]-1),Ee=we[14]/(we[10]+1),re=(we[9]+1)/we[5],Pe=(we[9]-1)/we[5],Re=(we[8]-1)/we[0],te=(me[8]+1)/me[0],ie=Ae*Re,Me=Ae*te,oe=pe/(-Re+te),G=oe*-Re;ae.matrixWorld.decompose(ee.position,ee.quaternion,ee.scale),ee.translateX(G),ee.translateZ(oe),ee.matrixWorld.compose(ee.position,ee.quaternion,ee.scale),ee.matrixWorldInverse.copy(ee.matrixWorld).invert();const j=Ae+oe,de=Ee+oe,Te=ie-G,X=Me+(pe-G),Q=re*Ee/de*j,be=Pe*Ee/de*j;ee.projectionMatrix.makePerspective(Te,X,Q,be,j,de),ee.projectionMatrixInverse.copy(ee.projectionMatrix).invert()}function L(ee,ae){ae===null?ee.matrixWorld.copy(ee.matrix):ee.matrixWorld.multiplyMatrices(ae.matrixWorld,ee.matrix),ee.matrixWorldInverse.copy(ee.matrixWorld).invert()}this.updateCamera=function(ee){if(i===null)return;v.texture!==null&&(ee.near=v.depthNear,ee.far=v.depthFar),C.near=A.near=M.near=ee.near,C.far=A.far=M.far=ee.far,(T!==C.near||R!==C.far)&&(i.updateRenderState({depthNear:C.near,depthFar:C.far}),T=C.near,R=C.far,M.near=T,M.far=R,A.near=T,A.far=R,M.updateProjectionMatrix(),A.updateProjectionMatrix(),ee.updateProjectionMatrix());const ae=ee.parent,ce=C.cameras;L(C,ae);for(let pe=0;pe<ce.length;pe++)L(ce[pe],ae);ce.length===2?U(C,M,A):C.projectionMatrix.copy(M.projectionMatrix),q(ee,C,ae)};function q(ee,ae,ce){ce===null?ee.matrix.copy(ae.matrixWorld):(ee.matrix.copy(ce.matrixWorld),ee.matrix.invert(),ee.matrix.multiply(ae.matrixWorld)),ee.matrix.decompose(ee.position,ee.quaternion,ee.scale),ee.updateMatrixWorld(!0),ee.projectionMatrix.copy(ae.projectionMatrix),ee.projectionMatrixInverse.copy(ae.projectionMatrixInverse),ee.isPerspectiveCamera&&(ee.fov=gm*2*Math.atan(1/ee.projectionMatrix.elements[5]),ee.zoom=1)}this.getCamera=function(){return C},this.getFoveation=function(){if(!(d===null&&h===null))return l},this.setFoveation=function(ee){l=ee,d!==null&&(d.fixedFoveation=ee),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=ee)},this.hasDepthSensing=function(){return v.texture!==null};let Z=null;function J(ee,ae){if(c=ae.getViewerPose(u||o),m=ae,c!==null){const ce=c.views;h!==null&&(e.setRenderTargetFramebuffer(S,h.framebuffer),e.setRenderTarget(S));let pe=!1;ce.length!==C.cameras.length&&(C.cameras.length=0,pe=!0);for(let me=0;me<ce.length;me++){const Ae=ce[me];let Ee=null;if(h!==null)Ee=h.getViewport(Ae);else{const Pe=f.getViewSubImage(d,Ae);Ee=Pe.viewport,me===0&&(e.setRenderTargetTextures(S,Pe.colorTexture,d.ignoreDepthValues?void 0:Pe.depthStencilTexture),e.setRenderTarget(S))}let re=N[me];re===void 0&&(re=new pr,re.layers.enable(me),re.viewport=new En,N[me]=re),re.matrix.fromArray(Ae.transform.matrix),re.matrix.decompose(re.position,re.quaternion,re.scale),re.projectionMatrix.fromArray(Ae.projectionMatrix),re.projectionMatrixInverse.copy(re.projectionMatrix).invert(),re.viewport.set(Ee.x,Ee.y,Ee.width,Ee.height),me===0&&(C.matrix.copy(re.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),pe===!0&&C.cameras.push(re)}const we=i.enabledFeatures;if(we&&we.includes("depth-sensing")){const me=f.getDepthInformation(ce[0]);me&&me.isValid&&me.texture&&v.init(e,me,i.renderState)}}for(let ce=0;ce<b.length;ce++){const pe=g[ce],we=b[ce];pe!==null&&we!==void 0&&we.update(pe,ae,u||o)}v.render(e,C),Z&&Z(ee,ae),ae.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:ae}),m=null}const Y=new hZ;Y.setAnimationLoop(J),this.setAnimationLoop=function(ee){Z=ee},this.dispose=function(){}}}function mUe(n,e){function t(y,p){y.matrixAutoUpdate===!0&&y.updateMatrix(),p.value.copy(y.matrix)}function r(y,p){p.color.getRGB(y.fogColor.value,cZ(n)),p.isFog?(y.fogNear.value=p.near,y.fogFar.value=p.far):p.isFogExp2&&(y.fogDensity.value=p.density)}function i(y,p,S,b,g){p.isMeshBasicMaterial||p.isMeshLambertMaterial?s(y,p):p.isMeshToonMaterial?(s(y,p),f(y,p)):p.isMeshPhongMaterial?(s(y,p),c(y,p)):p.isMeshStandardMaterial?(s(y,p),d(y,p),p.isMeshPhysicalMaterial&&h(y,p,g)):p.isMeshMatcapMaterial?(s(y,p),m(y,p)):p.isMeshDepthMaterial?s(y,p):p.isMeshDistanceMaterial?(s(y,p),v(y,p)):p.isMeshNormalMaterial?s(y,p):p.isLineBasicMaterial?(o(y,p),p.isLineDashedMaterial&&a(y,p)):p.isPointsMaterial?l(y,p,S,b):p.isSpriteMaterial?u(y,p):p.isShadowMaterial?(y.color.value.copy(p.color),y.opacity.value=p.opacity):p.isShaderMaterial&&(p.uniformsNeedUpdate=!1)}function s(y,p){y.opacity.value=p.opacity,p.color&&y.diffuse.value.copy(p.color),p.emissive&&y.emissive.value.copy(p.emissive).multiplyScalar(p.emissiveIntensity),p.map&&(y.map.value=p.map,t(p.map,y.mapTransform)),p.alphaMap&&(y.alphaMap.value=p.alphaMap,t(p.alphaMap,y.alphaMapTransform)),p.bumpMap&&(y.bumpMap.value=p.bumpMap,t(p.bumpMap,y.bumpMapTransform),y.bumpScale.value=p.bumpScale,p.side===as&&(y.bumpScale.value*=-1)),p.normalMap&&(y.normalMap.value=p.normalMap,t(p.normalMap,y.normalMapTransform),y.normalScale.value.copy(p.normalScale),p.side===as&&y.normalScale.value.negate()),p.displacementMap&&(y.displacementMap.value=p.displacementMap,t(p.displacementMap,y.displacementMapTransform),y.displacementScale.value=p.displacementScale,y.displacementBias.value=p.displacementBias),p.emissiveMap&&(y.emissiveMap.value=p.emissiveMap,t(p.emissiveMap,y.emissiveMapTransform)),p.specularMap&&(y.specularMap.value=p.specularMap,t(p.specularMap,y.specularMapTransform)),p.alphaTest>0&&(y.alphaTest.value=p.alphaTest);const S=e.get(p).envMap;if(S&&(y.envMap.value=S,y.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=p.reflectivity,y.ior.value=p.ior,y.refractionRatio.value=p.refractionRatio),p.lightMap){y.lightMap.value=p.lightMap;const b=n._useLegacyLights===!0?Math.PI:1;y.lightMapIntensity.value=p.lightMapIntensity*b,t(p.lightMap,y.lightMapTransform)}p.aoMap&&(y.aoMap.value=p.aoMap,y.aoMapIntensity.value=p.aoMapIntensity,t(p.aoMap,y.aoMapTransform))}function o(y,p){y.diffuse.value.copy(p.color),y.opacity.value=p.opacity,p.map&&(y.map.value=p.map,t(p.map,y.mapTransform))}function a(y,p){y.dashSize.value=p.dashSize,y.totalSize.value=p.dashSize+p.gapSize,y.scale.value=p.scale}function l(y,p,S,b){y.diffuse.value.copy(p.color),y.opacity.value=p.opacity,y.size.value=p.size*S,y.scale.value=b*.5,p.map&&(y.map.value=p.map,t(p.map,y.uvTransform)),p.alphaMap&&(y.alphaMap.value=p.alphaMap,t(p.alphaMap,y.alphaMapTransform)),p.alphaTest>0&&(y.alphaTest.value=p.alphaTest)}function u(y,p){y.diffuse.value.copy(p.color),y.opacity.value=p.opacity,y.rotation.value=p.rotation,p.map&&(y.map.value=p.map,t(p.map,y.mapTransform)),p.alphaMap&&(y.alphaMap.value=p.alphaMap,t(p.alphaMap,y.alphaMapTransform)),p.alphaTest>0&&(y.alphaTest.value=p.alphaTest)}function c(y,p){y.specular.value.copy(p.specular),y.shininess.value=Math.max(p.shininess,1e-4)}function f(y,p){p.gradientMap&&(y.gradientMap.value=p.gradientMap)}function d(y,p){y.metalness.value=p.metalness,p.metalnessMap&&(y.metalnessMap.value=p.metalnessMap,t(p.metalnessMap,y.metalnessMapTransform)),y.roughness.value=p.roughness,p.roughnessMap&&(y.roughnessMap.value=p.roughnessMap,t(p.roughnessMap,y.roughnessMapTransform)),e.get(p).envMap&&(y.envMapIntensity.value=p.envMapIntensity)}function h(y,p,S){y.ior.value=p.ior,p.sheen>0&&(y.sheenColor.value.copy(p.sheenColor).multiplyScalar(p.sheen),y.sheenRoughness.value=p.sheenRoughness,p.sheenColorMap&&(y.sheenColorMap.value=p.sheenColorMap,t(p.sheenColorMap,y.sheenColorMapTransform)),p.sheenRoughnessMap&&(y.sheenRoughnessMap.value=p.sheenRoughnessMap,t(p.sheenRoughnessMap,y.sheenRoughnessMapTransform))),p.clearcoat>0&&(y.clearcoat.value=p.clearcoat,y.clearcoatRoughness.value=p.clearcoatRoughness,p.clearcoatMap&&(y.clearcoatMap.value=p.clearcoatMap,t(p.clearcoatMap,y.clearcoatMapTransform)),p.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=p.clearcoatRoughnessMap,t(p.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),p.clearcoatNormalMap&&(y.clearcoatNormalMap.value=p.clearcoatNormalMap,t(p.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(p.clearcoatNormalScale),p.side===as&&y.clearcoatNormalScale.value.negate())),p.iridescence>0&&(y.iridescence.value=p.iridescence,y.iridescenceIOR.value=p.iridescenceIOR,y.iridescenceThicknessMinimum.value=p.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=p.iridescenceThicknessRange[1],p.iridescenceMap&&(y.iridescenceMap.value=p.iridescenceMap,t(p.iridescenceMap,y.iridescenceMapTransform)),p.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=p.iridescenceThicknessMap,t(p.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),p.transmission>0&&(y.transmission.value=p.transmission,y.transmissionSamplerMap.value=S.texture,y.transmissionSamplerSize.value.set(S.width,S.height),p.transmissionMap&&(y.transmissionMap.value=p.transmissionMap,t(p.transmissionMap,y.transmissionMapTransform)),y.thickness.value=p.thickness,p.thicknessMap&&(y.thicknessMap.value=p.thicknessMap,t(p.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=p.attenuationDistance,y.attenuationColor.value.copy(p.attenuationColor)),p.anisotropy>0&&(y.anisotropyVector.value.set(p.anisotropy*Math.cos(p.anisotropyRotation),p.anisotropy*Math.sin(p.anisotropyRotation)),p.anisotropyMap&&(y.anisotropyMap.value=p.anisotropyMap,t(p.anisotropyMap,y.anisotropyMapTransform))),y.specularIntensity.value=p.specularIntensity,y.specularColor.value.copy(p.specularColor),p.specularColorMap&&(y.specularColorMap.value=p.specularColorMap,t(p.specularColorMap,y.specularColorMapTransform)),p.specularIntensityMap&&(y.specularIntensityMap.value=p.specularIntensityMap,t(p.specularIntensityMap,y.specularIntensityMapTransform))}function m(y,p){p.matcap&&(y.matcap.value=p.matcap)}function v(y,p){const S=e.get(p).light;y.referencePosition.value.setFromMatrixPosition(S.matrixWorld),y.nearDistance.value=S.shadow.camera.near,y.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function gUe(n,e,t,r){let i={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(S,b){const g=b.program;r.uniformBlockBinding(S,g)}function u(S,b){let g=i[S.id];g===void 0&&(m(S),g=c(S),i[S.id]=g,S.addEventListener("dispose",y));const w=b.program;r.updateUBOMapping(S,w);const x=e.render.frame;s[S.id]!==x&&(d(S),s[S.id]=x)}function c(S){const b=f();S.__bindingPointIndex=b;const g=n.createBuffer(),w=S.__size,x=S.usage;return n.bindBuffer(n.UNIFORM_BUFFER,g),n.bufferData(n.UNIFORM_BUFFER,w,x),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,b,g),g}function f(){for(let S=0;S<a;S++)if(o.indexOf(S)===-1)return o.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(S){const b=i[S.id],g=S.uniforms,w=S.__cache;n.bindBuffer(n.UNIFORM_BUFFER,b);for(let x=0,M=g.length;x<M;x++){const A=Array.isArray(g[x])?g[x]:[g[x]];for(let N=0,C=A.length;N<C;N++){const T=A[N];if(h(T,x,N,w)===!0){const R=T.__offset,$=Array.isArray(T.value)?T.value:[T.value];let B=0;for(let z=0;z<$.length;z++){const D=$[z],I=v(D);typeof D=="number"||typeof D=="boolean"?(T.__data[0]=D,n.bufferSubData(n.UNIFORM_BUFFER,R+B,T.__data)):D.isMatrix3?(T.__data[0]=D.elements[0],T.__data[1]=D.elements[1],T.__data[2]=D.elements[2],T.__data[3]=0,T.__data[4]=D.elements[3],T.__data[5]=D.elements[4],T.__data[6]=D.elements[5],T.__data[7]=0,T.__data[8]=D.elements[6],T.__data[9]=D.elements[7],T.__data[10]=D.elements[8],T.__data[11]=0):(D.toArray(T.__data,B),B+=I.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,R,T.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function h(S,b,g,w){const x=S.value,M=b+"_"+g;if(w[M]===void 0)return typeof x=="number"||typeof x=="boolean"?w[M]=x:w[M]=x.clone(),!0;{const A=w[M];if(typeof x=="number"||typeof x=="boolean"){if(A!==x)return w[M]=x,!0}else if(A.equals(x)===!1)return A.copy(x),!0}return!1}function m(S){const b=S.uniforms;let g=0;const w=16;for(let M=0,A=b.length;M<A;M++){const N=Array.isArray(b[M])?b[M]:[b[M]];for(let C=0,T=N.length;C<T;C++){const R=N[C],$=Array.isArray(R.value)?R.value:[R.value];for(let B=0,z=$.length;B<z;B++){const D=$[B],I=v(D),U=g%w;U!==0&&w-U<I.boundary&&(g+=w-U),R.__data=new Float32Array(I.storage/Float32Array.BYTES_PER_ELEMENT),R.__offset=g,g+=I.storage}}}const x=g%w;return x>0&&(g+=w-x),S.__size=g,S.__cache={},this}function v(S){const b={boundary:0,storage:0};return typeof S=="number"||typeof S=="boolean"?(b.boundary=4,b.storage=4):S.isVector2?(b.boundary=8,b.storage=8):S.isVector3||S.isColor?(b.boundary=16,b.storage=12):S.isVector4?(b.boundary=16,b.storage=16):S.isMatrix3?(b.boundary=48,b.storage=48):S.isMatrix4?(b.boundary=64,b.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),b}function y(S){const b=S.target;b.removeEventListener("dispose",y);const g=o.indexOf(b.__bindingPointIndex);o.splice(g,1),n.deleteBuffer(i[b.id]),delete i[b.id],delete s[b.id]}function p(){for(const S in i)n.deleteBuffer(i[S]);o=[],i={},s={}}return{bind:l,update:u,dispose:p}}class AO{constructor(e={}){const{canvas:t=aZ(),context:r=null,depth:i=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:f=!1}=e;this.isWebGLRenderer=!0;let d;r!==null?d=r.getContextAttributes().alpha:d=o;const h=new Uint32Array(4),m=new Int32Array(4);let v=null,y=null;const p=[],S=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=ri,this._useLegacyLights=!1,this.toneMapping=Al,this.toneMappingExposure=1;const b=this;let g=!1,w=0,x=0,M=null,A=-1,N=null;const C=new En,T=new En;let R=null;const $=new mt(0);let B=0,z=t.width,D=t.height,I=1,U=null,L=null;const q=new En(0,0,z,D),Z=new En(0,0,z,D);let J=!1;const Y=new By;let ee=!1,ae=!1,ce=null;const pe=new wt,we=new et,me=new le,Ae={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ee(){return M===null?I:1}let re=r;function Pe(ge,Le){for(let Ue=0;Ue<ge.length;Ue++){const Ve=ge[Ue],je=t.getContext(Ve,Le);if(je!==null)return je}return null}try{const ge={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Ym}`),t.addEventListener("webglcontextlost",Ye,!1),t.addEventListener("webglcontextrestored",he,!1),t.addEventListener("webglcontextcreationerror",Ze,!1),re===null){const Le=["webgl2","webgl","experimental-webgl"];if(b.isWebGL1Renderer===!0&&Le.shift(),re=Pe(Le,ge),re===null)throw Pe(Le)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&re instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),re.getShaderPrecisionFormat===void 0&&(re.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ge){throw console.error("THREE.WebGLRenderer: "+ge.message),ge}let Re,te,ie,Me,oe,G,j,de,Te,X,Q,be,_e,Ne,Fe,He,Ie,Je,qe,lt,ot,ye,We,W;function ve(){Re=new A5e(re),te=new w5e(re,Re,e),Re.init(te),ye=new xZ(re,Re,te),ie=new lUe(re,Re,te),Me=new N5e(re),oe=new Kze,G=new uUe(re,Re,ie,oe,te,ye,Me),j=new _5e(b),de=new C5e(b),Te=new B4e(re,te),We=new x5e(re,Re,Te,te),X=new T5e(re,Te,Me,We),Q=new k5e(re,X,Te,Me),qe=new O5e(re,te,G),He=new S5e(oe),be=new Yze(b,j,de,Re,te,We,He),_e=new mUe(b,oe),Ne=new Jze,Fe=new iUe(Re,te),Je=new y5e(b,j,de,ie,Q,d,l),Ie=new aUe(b,Q,te),W=new gUe(re,Me,te,ie),lt=new b5e(re,Re,Me,te),ot=new D5e(re,Re,Me,te),Me.programs=be.programs,b.capabilities=te,b.extensions=Re,b.properties=oe,b.renderLists=Ne,b.shadowMap=Ie,b.state=ie,b.info=Me}ve();const ke=new pUe(b,re);this.xr=ke,this.getContext=function(){return re},this.getContextAttributes=function(){return re.getContextAttributes()},this.forceContextLoss=function(){const ge=Re.get("WEBGL_lose_context");ge&&ge.loseContext()},this.forceContextRestore=function(){const ge=Re.get("WEBGL_lose_context");ge&&ge.restoreContext()},this.getPixelRatio=function(){return I},this.setPixelRatio=function(ge){ge!==void 0&&(I=ge,this.setSize(z,D,!1))},this.getSize=function(ge){return ge.set(z,D)},this.setSize=function(ge,Le,Ue=!0){if(ke.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}z=ge,D=Le,t.width=Math.floor(ge*I),t.height=Math.floor(Le*I),Ue===!0&&(t.style.width=ge+"px",t.style.height=Le+"px"),this.setViewport(0,0,ge,Le)},this.getDrawingBufferSize=function(ge){return ge.set(z*I,D*I).floor()},this.setDrawingBufferSize=function(ge,Le,Ue){z=ge,D=Le,I=Ue,t.width=Math.floor(ge*Ue),t.height=Math.floor(Le*Ue),this.setViewport(0,0,ge,Le)},this.getCurrentViewport=function(ge){return ge.copy(C)},this.getViewport=function(ge){return ge.copy(q)},this.setViewport=function(ge,Le,Ue,Ve){ge.isVector4?q.set(ge.x,ge.y,ge.z,ge.w):q.set(ge,Le,Ue,Ve),ie.viewport(C.copy(q).multiplyScalar(I).floor())},this.getScissor=function(ge){return ge.copy(Z)},this.setScissor=function(ge,Le,Ue,Ve){ge.isVector4?Z.set(ge.x,ge.y,ge.z,ge.w):Z.set(ge,Le,Ue,Ve),ie.scissor(T.copy(Z).multiplyScalar(I).floor())},this.getScissorTest=function(){return J},this.setScissorTest=function(ge){ie.setScissorTest(J=ge)},this.setOpaqueSort=function(ge){U=ge},this.setTransparentSort=function(ge){L=ge},this.getClearColor=function(ge){return ge.copy(Je.getClearColor())},this.setClearColor=function(){Je.setClearColor.apply(Je,arguments)},this.getClearAlpha=function(){return Je.getClearAlpha()},this.setClearAlpha=function(){Je.setClearAlpha.apply(Je,arguments)},this.clear=function(ge=!0,Le=!0,Ue=!0){let Ve=0;if(ge){let je=!1;if(M!==null){const yt=M.texture.format;je=yt===pO||yt===hO||yt===dO}if(je){const yt=M.texture.type,St=yt===Tl||yt===pu||yt===qE||yt===zc||yt===cO||yt===fO,It=Je.getClearColor(),ft=Je.getClearAlpha(),_t=It.r,zt=It.g,Ot=It.b;St?(h[0]=_t,h[1]=zt,h[2]=Ot,h[3]=ft,re.clearBufferuiv(re.COLOR,0,h)):(m[0]=_t,m[1]=zt,m[2]=Ot,m[3]=ft,re.clearBufferiv(re.COLOR,0,m))}else Ve|=re.COLOR_BUFFER_BIT}Le&&(Ve|=re.DEPTH_BUFFER_BIT),Ue&&(Ve|=re.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),re.clear(Ve)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ye,!1),t.removeEventListener("webglcontextrestored",he,!1),t.removeEventListener("webglcontextcreationerror",Ze,!1),Ne.dispose(),Fe.dispose(),oe.dispose(),j.dispose(),de.dispose(),Q.dispose(),We.dispose(),W.dispose(),be.dispose(),ke.dispose(),ke.removeEventListener("sessionstart",$e),ke.removeEventListener("sessionend",Xe),ce&&(ce.dispose(),ce=null),tt.stop()};function Ye(ge){ge.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function he(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const ge=Me.autoReset,Le=Ie.enabled,Ue=Ie.autoUpdate,Ve=Ie.needsUpdate,je=Ie.type;ve(),Me.autoReset=ge,Ie.enabled=Le,Ie.autoUpdate=Ue,Ie.needsUpdate=Ve,Ie.type=je}function Ze(ge){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ge.statusMessage)}function H(ge){const Le=ge.target;Le.removeEventListener("dispose",H),ne(Le)}function ne(ge){fe(ge),oe.remove(ge)}function fe(ge){const Le=oe.get(ge).programs;Le!==void 0&&(Le.forEach(function(Ue){be.releaseProgram(Ue)}),ge.isShaderMaterial&&be.releaseShaderCache(ge))}this.renderBufferDirect=function(ge,Le,Ue,Ve,je,yt){Le===null&&(Le=Ae);const St=je.isMesh&&je.matrixWorld.determinant()<0,It=Ga(ge,Le,Ue,Ve,je);ie.setMaterial(Ve,St);let ft=Ue.index,_t=1;if(Ve.wireframe===!0){if(ft=X.getWireframeAttribute(Ue),ft===void 0)return;_t=2}const zt=Ue.drawRange,Ot=Ue.attributes.position;let zn=zt.start*_t,Jr=(zt.start+zt.count)*_t;yt!==null&&(zn=Math.max(zn,yt.start*_t),Jr=Math.min(Jr,(yt.start+yt.count)*_t)),ft!==null?(zn=Math.max(zn,0),Jr=Math.min(Jr,ft.count)):Ot!=null&&(zn=Math.max(zn,0),Jr=Math.min(Jr,Ot.count));const sr=Jr-zn;if(sr<0||sr===1/0)return;We.setup(je,Ve,It,Ue,ft);let fi,Kt=lt;if(ft!==null&&(fi=Te.get(ft),Kt=ot,Kt.setIndex(fi)),je.isMesh)Ve.wireframe===!0?(ie.setLineWidth(Ve.wireframeLinewidth*Ee()),Kt.setMode(re.LINES)):Kt.setMode(re.TRIANGLES);else if(je.isLine){let At=Ve.linewidth;At===void 0&&(At=1),ie.setLineWidth(At*Ee()),je.isLineSegments?Kt.setMode(re.LINES):je.isLineLoop?Kt.setMode(re.LINE_LOOP):Kt.setMode(re.LINE_STRIP)}else je.isPoints?Kt.setMode(re.POINTS):je.isSprite&&Kt.setMode(re.TRIANGLES);if(je.isBatchedMesh)Kt.renderMultiDraw(je._multiDrawStarts,je._multiDrawCounts,je._multiDrawCount);else if(je.isInstancedMesh)Kt.renderInstances(zn,sr,je.count);else if(Ue.isInstancedBufferGeometry){const At=Ue._maxInstanceCount!==void 0?Ue._maxInstanceCount:1/0,ko=Math.min(Ue.instanceCount,At);Kt.renderInstances(zn,sr,ko)}else Kt.render(zn,sr)};function xe(ge,Le,Ue){ge.transparent===!0&&ge.side===ns&&ge.forceSinglePass===!1?(ge.side=as,ge.needsUpdate=!0,kr(ge,Le,Ue),ge.side=Pu,ge.needsUpdate=!0,kr(ge,Le,Ue),ge.side=ns):kr(ge,Le,Ue)}this.compile=function(ge,Le,Ue=null){Ue===null&&(Ue=ge),y=Fe.get(Ue),y.init(),S.push(y),Ue.traverseVisible(function(je){je.isLight&&je.layers.test(Le.layers)&&(y.pushLight(je),je.castShadow&&y.pushShadow(je))}),ge!==Ue&&ge.traverseVisible(function(je){je.isLight&&je.layers.test(Le.layers)&&(y.pushLight(je),je.castShadow&&y.pushShadow(je))}),y.setupLights(b._useLegacyLights);const Ve=new Set;return ge.traverse(function(je){const yt=je.material;if(yt)if(Array.isArray(yt))for(let St=0;St<yt.length;St++){const It=yt[St];xe(It,Ue,je),Ve.add(It)}else xe(yt,Ue,je),Ve.add(yt)}),S.pop(),y=null,Ve},this.compileAsync=function(ge,Le,Ue=null){const Ve=this.compile(ge,Le,Ue);return new Promise(je=>{function yt(){if(Ve.forEach(function(St){oe.get(St).currentProgram.isReady()&&Ve.delete(St)}),Ve.size===0){je(ge);return}setTimeout(yt,10)}Re.get("KHR_parallel_shader_compile")!==null?yt():setTimeout(yt,10)})};let Ce=null;function Oe(ge){Ce&&Ce(ge)}function $e(){tt.stop()}function Xe(){tt.start()}const tt=new hZ;tt.setAnimationLoop(Oe),typeof self<"u"&&tt.setContext(self),this.setAnimationLoop=function(ge){Ce=ge,ke.setAnimationLoop(ge),ge===null?tt.stop():tt.start()},ke.addEventListener("sessionstart",$e),ke.addEventListener("sessionend",Xe),this.render=function(ge,Le){if(Le!==void 0&&Le.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(g===!0)return;ge.matrixWorldAutoUpdate===!0&&ge.updateMatrixWorld(),Le.parent===null&&Le.matrixWorldAutoUpdate===!0&&Le.updateMatrixWorld(),ke.enabled===!0&&ke.isPresenting===!0&&(ke.cameraAutoUpdate===!0&&ke.updateCamera(Le),Le=ke.getCamera()),ge.isScene===!0&&ge.onBeforeRender(b,ge,Le,M),y=Fe.get(ge,S.length),y.init(),S.push(y),pe.multiplyMatrices(Le.projectionMatrix,Le.matrixWorldInverse),Y.setFromProjectionMatrix(pe),ae=this.localClippingEnabled,ee=He.init(this.clippingPlanes,ae),v=Ne.get(ge,p.length),v.init(),p.push(v),ht(ge,Le,0,b.sortObjects),v.finish(),b.sortObjects===!0&&v.sort(U,L),this.info.render.frame++,ee===!0&&He.beginShadows();const Ue=y.state.shadowsArray;if(Ie.render(Ue,ge,Le),ee===!0&&He.endShadows(),this.info.autoReset===!0&&this.info.reset(),(ke.enabled===!1||ke.isPresenting===!1||ke.hasDepthSensing()===!1)&&Je.render(v,ge),y.setupLights(b._useLegacyLights),Le.isArrayCamera){const Ve=Le.cameras;for(let je=0,yt=Ve.length;je<yt;je++){const St=Ve[je];Pt(v,ge,St,St.viewport)}}else Pt(v,ge,Le);M!==null&&(G.updateMultisampleRenderTarget(M),G.updateRenderTargetMipmap(M)),ge.isScene===!0&&ge.onAfterRender(b,ge,Le),We.resetDefaultState(),A=-1,N=null,S.pop(),S.length>0?y=S[S.length-1]:y=null,p.pop(),p.length>0?v=p[p.length-1]:v=null};function ht(ge,Le,Ue,Ve){if(ge.visible===!1)return;if(ge.layers.test(Le.layers)){if(ge.isGroup)Ue=ge.renderOrder;else if(ge.isLOD)ge.autoUpdate===!0&&ge.update(Le);else if(ge.isLight)y.pushLight(ge),ge.castShadow&&y.pushShadow(ge);else if(ge.isSprite){if(!ge.frustumCulled||Y.intersectsSprite(ge)){Ve&&me.setFromMatrixPosition(ge.matrixWorld).applyMatrix4(pe);const St=Q.update(ge),It=ge.material;It.visible&&v.push(ge,St,It,Ue,me.z,null)}}else if((ge.isMesh||ge.isLine||ge.isPoints)&&(!ge.frustumCulled||Y.intersectsObject(ge))){const St=Q.update(ge),It=ge.material;if(Ve&&(ge.boundingSphere!==void 0?(ge.boundingSphere===null&&ge.computeBoundingSphere(),me.copy(ge.boundingSphere.center)):(St.boundingSphere===null&&St.computeBoundingSphere(),me.copy(St.boundingSphere.center)),me.applyMatrix4(ge.matrixWorld).applyMatrix4(pe)),Array.isArray(It)){const ft=St.groups;for(let _t=0,zt=ft.length;_t<zt;_t++){const Ot=ft[_t],zn=It[Ot.materialIndex];zn&&zn.visible&&v.push(ge,St,zn,Ue,me.z,Ot)}}else It.visible&&v.push(ge,St,It,Ue,me.z,null)}}const yt=ge.children;for(let St=0,It=yt.length;St<It;St++)ht(yt[St],Le,Ue,Ve)}function Pt(ge,Le,Ue,Ve){const je=ge.opaque,yt=ge.transmissive,St=ge.transparent;y.setupLightsView(Ue),ee===!0&&He.setGlobalState(b.clippingPlanes,Ue),yt.length>0&&rt(je,yt,Le,Ue),Ve&&ie.viewport(C.copy(Ve)),je.length>0&&Et(je,Le,Ue),yt.length>0&&Et(yt,Le,Ue),St.length>0&&Et(St,Le,Ue),ie.buffers.depth.setTest(!0),ie.buffers.depth.setMask(!0),ie.buffers.color.setMask(!0),ie.setPolygonOffset(!1)}function rt(ge,Le,Ue,Ve){if((Ue.isScene===!0?Ue.overrideMaterial:null)!==null)return;const yt=te.isWebGL2;ce===null&&(ce=new la(1,1,{generateMipmaps:!0,type:Re.has("EXT_color_buffer_half_float")?kd:Tl,minFilter:xl,samples:yt?4:0})),b.getDrawingBufferSize(we),yt?ce.setSize(we.x,we.y):ce.setSize(w_(we.x),w_(we.y));const St=b.getRenderTarget();b.setRenderTarget(ce),b.getClearColor($),B=b.getClearAlpha(),B<1&&b.setClearColor(16777215,.5),b.clear();const It=b.toneMapping;b.toneMapping=Al,Et(ge,Ue,Ve),G.updateMultisampleRenderTarget(ce),G.updateRenderTargetMipmap(ce);let ft=!1;for(let _t=0,zt=Le.length;_t<zt;_t++){const Ot=Le[_t],zn=Ot.object,Jr=Ot.geometry,sr=Ot.material,fi=Ot.group;if(sr.side===ns&&zn.layers.test(Ve.layers)){const Kt=sr.side;sr.side=as,sr.needsUpdate=!0,Ht(zn,Ue,Ve,Jr,sr,fi),sr.side=Kt,sr.needsUpdate=!0,ft=!0}}ft===!0&&(G.updateMultisampleRenderTarget(ce),G.updateRenderTargetMipmap(ce)),b.setRenderTarget(St),b.setClearColor($,B),b.toneMapping=It}function Et(ge,Le,Ue){const Ve=Le.isScene===!0?Le.overrideMaterial:null;for(let je=0,yt=ge.length;je<yt;je++){const St=ge[je],It=St.object,ft=St.geometry,_t=Ve===null?St.material:Ve,zt=St.group;It.layers.test(Ue.layers)&&Ht(It,Le,Ue,ft,_t,zt)}}function Ht(ge,Le,Ue,Ve,je,yt){ge.onBeforeRender(b,Le,Ue,Ve,je,yt),ge.modelViewMatrix.multiplyMatrices(Ue.matrixWorldInverse,ge.matrixWorld),ge.normalMatrix.getNormalMatrix(ge.modelViewMatrix),je.onBeforeRender(b,Le,Ue,Ve,ge,yt),je.transparent===!0&&je.side===ns&&je.forceSinglePass===!1?(je.side=as,je.needsUpdate=!0,b.renderBufferDirect(Ue,Le,Ve,je,ge,yt),je.side=Pu,je.needsUpdate=!0,b.renderBufferDirect(Ue,Le,Ve,je,ge,yt),je.side=ns):b.renderBufferDirect(Ue,Le,Ve,je,ge,yt),ge.onAfterRender(b,Le,Ue,Ve,je,yt)}function kr(ge,Le,Ue){Le.isScene!==!0&&(Le=Ae);const Ve=oe.get(ge),je=y.state.lights,yt=y.state.shadowsArray,St=je.state.version,It=be.getParameters(ge,je.state,yt,Le,Ue),ft=be.getProgramCacheKey(It);let _t=Ve.programs;Ve.environment=ge.isMeshStandardMaterial?Le.environment:null,Ve.fog=Le.fog,Ve.envMap=(ge.isMeshStandardMaterial?de:j).get(ge.envMap||Ve.environment),_t===void 0&&(ge.addEventListener("dispose",H),_t=new Map,Ve.programs=_t);let zt=_t.get(ft);if(zt!==void 0){if(Ve.currentProgram===zt&&Ve.lightsStateVersion===St)return er(ge,It),zt}else It.uniforms=be.getUniforms(ge),ge.onBuild(Ue,It,b),ge.onBeforeCompile(It,b),zt=be.acquireProgram(It,ft),_t.set(ft,zt),Ve.uniforms=It.uniforms;const Ot=Ve.uniforms;return(!ge.isShaderMaterial&&!ge.isRawShaderMaterial||ge.clipping===!0)&&(Ot.clippingPlanes=He.uniform),er(ge,It),Ve.needsLights=Si(ge),Ve.lightsStateVersion=St,Ve.needsLights&&(Ot.ambientLightColor.value=je.state.ambient,Ot.lightProbe.value=je.state.probe,Ot.directionalLights.value=je.state.directional,Ot.directionalLightShadows.value=je.state.directionalShadow,Ot.spotLights.value=je.state.spot,Ot.spotLightShadows.value=je.state.spotShadow,Ot.rectAreaLights.value=je.state.rectArea,Ot.ltc_1.value=je.state.rectAreaLTC1,Ot.ltc_2.value=je.state.rectAreaLTC2,Ot.pointLights.value=je.state.point,Ot.pointLightShadows.value=je.state.pointShadow,Ot.hemisphereLights.value=je.state.hemi,Ot.directionalShadowMap.value=je.state.directionalShadowMap,Ot.directionalShadowMatrix.value=je.state.directionalShadowMatrix,Ot.spotShadowMap.value=je.state.spotShadowMap,Ot.spotLightMatrix.value=je.state.spotLightMatrix,Ot.spotLightMap.value=je.state.spotLightMap,Ot.pointShadowMap.value=je.state.pointShadowMap,Ot.pointShadowMatrix.value=je.state.pointShadowMatrix),Ve.currentProgram=zt,Ve.uniformsList=null,zt}function Ar(ge){if(ge.uniformsList===null){const Le=ge.currentProgram.getUniforms();ge.uniformsList=$w.seqWithValue(Le.seq,ge.uniforms)}return ge.uniformsList}function er(ge,Le){const Ue=oe.get(ge);Ue.outputColorSpace=Le.outputColorSpace,Ue.batching=Le.batching,Ue.instancing=Le.instancing,Ue.instancingColor=Le.instancingColor,Ue.skinning=Le.skinning,Ue.morphTargets=Le.morphTargets,Ue.morphNormals=Le.morphNormals,Ue.morphColors=Le.morphColors,Ue.morphTargetsCount=Le.morphTargetsCount,Ue.numClippingPlanes=Le.numClippingPlanes,Ue.numIntersection=Le.numClipIntersection,Ue.vertexAlphas=Le.vertexAlphas,Ue.vertexTangents=Le.vertexTangents,Ue.toneMapping=Le.toneMapping}function Ga(ge,Le,Ue,Ve,je){Le.isScene!==!0&&(Le=Ae),G.resetTextureUnits();const yt=Le.fog,St=Ve.isMeshStandardMaterial?Le.environment:null,It=M===null?b.outputColorSpace:M.isXRRenderTarget===!0?M.texture.colorSpace:Ll,ft=(Ve.isMeshStandardMaterial?de:j).get(Ve.envMap||St),_t=Ve.vertexColors===!0&&!!Ue.attributes.color&&Ue.attributes.color.itemSize===4,zt=!!Ue.attributes.tangent&&(!!Ve.normalMap||Ve.anisotropy>0),Ot=!!Ue.morphAttributes.position,zn=!!Ue.morphAttributes.normal,Jr=!!Ue.morphAttributes.color;let sr=Al;Ve.toneMapped&&(M===null||M.isXRRenderTarget===!0)&&(sr=b.toneMapping);const fi=Ue.morphAttributes.position||Ue.morphAttributes.normal||Ue.morphAttributes.color,Kt=fi!==void 0?fi.length:0,At=oe.get(Ve),ko=y.state.lights;if(ee===!0&&(ae===!0||ge!==N)){const _i=ge===N&&Ve.id===A;He.setState(Ve,ge,_i)}let mn=!1;Ve.version===At.__version?(At.needsLights&&At.lightsStateVersion!==ko.state.version||At.outputColorSpace!==It||je.isBatchedMesh&&At.batching===!1||!je.isBatchedMesh&&At.batching===!0||je.isInstancedMesh&&At.instancing===!1||!je.isInstancedMesh&&At.instancing===!0||je.isSkinnedMesh&&At.skinning===!1||!je.isSkinnedMesh&&At.skinning===!0||je.isInstancedMesh&&At.instancingColor===!0&&je.instanceColor===null||je.isInstancedMesh&&At.instancingColor===!1&&je.instanceColor!==null||At.envMap!==ft||Ve.fog===!0&&At.fog!==yt||At.numClippingPlanes!==void 0&&(At.numClippingPlanes!==He.numPlanes||At.numIntersection!==He.numIntersection)||At.vertexAlphas!==_t||At.vertexTangents!==zt||At.morphTargets!==Ot||At.morphNormals!==zn||At.morphColors!==Jr||At.toneMapping!==sr||te.isWebGL2===!0&&At.morphTargetsCount!==Kt)&&(mn=!0):(mn=!0,At.__version=Ve.version);let Tr=At.currentProgram;mn===!0&&(Tr=kr(Ve,Le,je));let qa=!1,Io=!1,di=!1;const Ir=Tr.getUniforms(),Xa=At.uniforms;if(ie.useProgram(Tr.program)&&(qa=!0,Io=!0,di=!0),Ve.id!==A&&(A=Ve.id,Io=!0),qa||N!==ge){Ir.setValue(re,"projectionMatrix",ge.projectionMatrix),Ir.setValue(re,"viewMatrix",ge.matrixWorldInverse);const _i=Ir.map.cameraPosition;_i!==void 0&&_i.setValue(re,me.setFromMatrixPosition(ge.matrixWorld)),te.logarithmicDepthBuffer&&Ir.setValue(re,"logDepthBufFC",2/(Math.log(ge.far+1)/Math.LN2)),(Ve.isMeshPhongMaterial||Ve.isMeshToonMaterial||Ve.isMeshLambertMaterial||Ve.isMeshBasicMaterial||Ve.isMeshStandardMaterial||Ve.isShaderMaterial)&&Ir.setValue(re,"isOrthographic",ge.isOrthographicCamera===!0),N!==ge&&(N=ge,Io=!0,di=!0)}if(je.isSkinnedMesh){Ir.setOptional(re,je,"bindMatrix"),Ir.setOptional(re,je,"bindMatrixInverse");const _i=je.skeleton;_i&&(te.floatVertexTextures?(_i.boneTexture===null&&_i.computeBoneTexture(),Ir.setValue(re,"boneTexture",_i.boneTexture,G)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}je.isBatchedMesh&&(Ir.setOptional(re,je,"batchingTexture"),Ir.setValue(re,"batchingTexture",je._matricesTexture,G));const ih=Ue.morphAttributes;if((ih.position!==void 0||ih.normal!==void 0||ih.color!==void 0&&te.isWebGL2===!0)&&qe.update(je,Ue,Tr),(Io||At.receiveShadow!==je.receiveShadow)&&(At.receiveShadow=je.receiveShadow,Ir.setValue(re,"receiveShadow",je.receiveShadow)),Ve.isMeshGouraudMaterial&&Ve.envMap!==null&&(Xa.envMap.value=ft,Xa.flipEnvMap.value=ft.isCubeTexture&&ft.isRenderTargetTexture===!1?-1:1),Io&&(Ir.setValue(re,"toneMappingExposure",b.toneMappingExposure),At.needsLights&&Wu(Xa,di),yt&&Ve.fog===!0&&_e.refreshFogUniforms(Xa,yt),_e.refreshMaterialUniforms(Xa,Ve,I,D,ce),$w.upload(re,Ar(At),Xa,G)),Ve.isShaderMaterial&&Ve.uniformsNeedUpdate===!0&&($w.upload(re,Ar(At),Xa,G),Ve.uniformsNeedUpdate=!1),Ve.isSpriteMaterial&&Ir.setValue(re,"center",je.center),Ir.setValue(re,"modelViewMatrix",je.modelViewMatrix),Ir.setValue(re,"normalMatrix",je.normalMatrix),Ir.setValue(re,"modelMatrix",je.matrixWorld),Ve.isShaderMaterial||Ve.isRawShaderMaterial){const _i=Ve.uniformsGroups;for(let sh=0,no=_i.length;sh<no;sh++)if(te.isWebGL2){const e1=_i[sh];W.update(e1,Tr),W.bind(e1,Tr)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Tr}function Wu(ge,Le){ge.ambientLightColor.needsUpdate=Le,ge.lightProbe.needsUpdate=Le,ge.directionalLights.needsUpdate=Le,ge.directionalLightShadows.needsUpdate=Le,ge.pointLights.needsUpdate=Le,ge.pointLightShadows.needsUpdate=Le,ge.spotLights.needsUpdate=Le,ge.spotLightShadows.needsUpdate=Le,ge.rectAreaLights.needsUpdate=Le,ge.hemisphereLights.needsUpdate=Le}function Si(ge){return ge.isMeshLambertMaterial||ge.isMeshToonMaterial||ge.isMeshPhongMaterial||ge.isMeshStandardMaterial||ge.isShadowMaterial||ge.isShaderMaterial&&ge.lights===!0}this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(ge,Le,Ue){oe.get(ge.texture).__webglTexture=Le,oe.get(ge.depthTexture).__webglTexture=Ue;const Ve=oe.get(ge);Ve.__hasExternalTextures=!0,Ve.__hasExternalTextures&&(Ve.__autoAllocateDepthBuffer=Ue===void 0,Ve.__autoAllocateDepthBuffer||Re.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ve.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(ge,Le){const Ue=oe.get(ge);Ue.__webglFramebuffer=Le,Ue.__useDefaultFramebuffer=Le===void 0},this.setRenderTarget=function(ge,Le=0,Ue=0){M=ge,w=Le,x=Ue;let Ve=!0,je=null,yt=!1,St=!1;if(ge){const ft=oe.get(ge);ft.__useDefaultFramebuffer!==void 0?(ie.bindFramebuffer(re.FRAMEBUFFER,null),Ve=!1):ft.__webglFramebuffer===void 0?G.setupRenderTarget(ge):ft.__hasExternalTextures&&G.rebindTextures(ge,oe.get(ge.texture).__webglTexture,oe.get(ge.depthTexture).__webglTexture);const _t=ge.texture;(_t.isData3DTexture||_t.isDataArrayTexture||_t.isCompressedArrayTexture)&&(St=!0);const zt=oe.get(ge).__webglFramebuffer;ge.isWebGLCubeRenderTarget?(Array.isArray(zt[Le])?je=zt[Le][Ue]:je=zt[Le],yt=!0):te.isWebGL2&&ge.samples>0&&G.useMultisampledRTT(ge)===!1?je=oe.get(ge).__webglMultisampledFramebuffer:Array.isArray(zt)?je=zt[Ue]:je=zt,C.copy(ge.viewport),T.copy(ge.scissor),R=ge.scissorTest}else C.copy(q).multiplyScalar(I).floor(),T.copy(Z).multiplyScalar(I).floor(),R=J;if(ie.bindFramebuffer(re.FRAMEBUFFER,je)&&te.drawBuffers&&Ve&&ie.drawBuffers(ge,je),ie.viewport(C),ie.scissor(T),ie.setScissorTest(R),yt){const ft=oe.get(ge.texture);re.framebufferTexture2D(re.FRAMEBUFFER,re.COLOR_ATTACHMENT0,re.TEXTURE_CUBE_MAP_POSITIVE_X+Le,ft.__webglTexture,Ue)}else if(St){const ft=oe.get(ge.texture),_t=Le||0;re.framebufferTextureLayer(re.FRAMEBUFFER,re.COLOR_ATTACHMENT0,ft.__webglTexture,Ue||0,_t)}A=-1},this.readRenderTargetPixels=function(ge,Le,Ue,Ve,je,yt,St){if(!(ge&&ge.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let It=oe.get(ge).__webglFramebuffer;if(ge.isWebGLCubeRenderTarget&&St!==void 0&&(It=It[St]),It){ie.bindFramebuffer(re.FRAMEBUFFER,It);try{const ft=ge.texture,_t=ft.format,zt=ft.type;if(_t!==Ss&&ye.convert(_t)!==re.getParameter(re.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Ot=zt===kd&&(Re.has("EXT_color_buffer_half_float")||te.isWebGL2&&Re.has("EXT_color_buffer_float"));if(zt!==Tl&&ye.convert(zt)!==re.getParameter(re.IMPLEMENTATION_COLOR_READ_TYPE)&&!(zt===vo&&(te.isWebGL2||Re.has("OES_texture_float")||Re.has("WEBGL_color_buffer_float")))&&!Ot){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Le>=0&&Le<=ge.width-Ve&&Ue>=0&&Ue<=ge.height-je&&re.readPixels(Le,Ue,Ve,je,ye.convert(_t),ye.convert(zt),yt)}finally{const ft=M!==null?oe.get(M).__webglFramebuffer:null;ie.bindFramebuffer(re.FRAMEBUFFER,ft)}}},this.copyFramebufferToTexture=function(ge,Le,Ue=0){const Ve=Math.pow(2,-Ue),je=Math.floor(Le.image.width*Ve),yt=Math.floor(Le.image.height*Ve);G.setTexture2D(Le,0),re.copyTexSubImage2D(re.TEXTURE_2D,Ue,0,0,ge.x,ge.y,je,yt),ie.unbindTexture()},this.copyTextureToTexture=function(ge,Le,Ue,Ve=0){const je=Le.image.width,yt=Le.image.height,St=ye.convert(Ue.format),It=ye.convert(Ue.type);G.setTexture2D(Ue,0),re.pixelStorei(re.UNPACK_FLIP_Y_WEBGL,Ue.flipY),re.pixelStorei(re.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ue.premultiplyAlpha),re.pixelStorei(re.UNPACK_ALIGNMENT,Ue.unpackAlignment),Le.isDataTexture?re.texSubImage2D(re.TEXTURE_2D,Ve,ge.x,ge.y,je,yt,St,It,Le.image.data):Le.isCompressedTexture?re.compressedTexSubImage2D(re.TEXTURE_2D,Ve,ge.x,ge.y,Le.mipmaps[0].width,Le.mipmaps[0].height,St,Le.mipmaps[0].data):re.texSubImage2D(re.TEXTURE_2D,Ve,ge.x,ge.y,St,It,Le.image),Ve===0&&Ue.generateMipmaps&&re.generateMipmap(re.TEXTURE_2D),ie.unbindTexture()},this.copyTextureToTexture3D=function(ge,Le,Ue,Ve,je=0){if(b.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const yt=ge.max.x-ge.min.x+1,St=ge.max.y-ge.min.y+1,It=ge.max.z-ge.min.z+1,ft=ye.convert(Ve.format),_t=ye.convert(Ve.type);let zt;if(Ve.isData3DTexture)G.setTexture3D(Ve,0),zt=re.TEXTURE_3D;else if(Ve.isDataArrayTexture||Ve.isCompressedArrayTexture)G.setTexture2DArray(Ve,0),zt=re.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}re.pixelStorei(re.UNPACK_FLIP_Y_WEBGL,Ve.flipY),re.pixelStorei(re.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ve.premultiplyAlpha),re.pixelStorei(re.UNPACK_ALIGNMENT,Ve.unpackAlignment);const Ot=re.getParameter(re.UNPACK_ROW_LENGTH),zn=re.getParameter(re.UNPACK_IMAGE_HEIGHT),Jr=re.getParameter(re.UNPACK_SKIP_PIXELS),sr=re.getParameter(re.UNPACK_SKIP_ROWS),fi=re.getParameter(re.UNPACK_SKIP_IMAGES),Kt=Ue.isCompressedTexture?Ue.mipmaps[je]:Ue.image;re.pixelStorei(re.UNPACK_ROW_LENGTH,Kt.width),re.pixelStorei(re.UNPACK_IMAGE_HEIGHT,Kt.height),re.pixelStorei(re.UNPACK_SKIP_PIXELS,ge.min.x),re.pixelStorei(re.UNPACK_SKIP_ROWS,ge.min.y),re.pixelStorei(re.UNPACK_SKIP_IMAGES,ge.min.z),Ue.isDataTexture||Ue.isData3DTexture?re.texSubImage3D(zt,je,Le.x,Le.y,Le.z,yt,St,It,ft,_t,Kt.data):Ue.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),re.compressedTexSubImage3D(zt,je,Le.x,Le.y,Le.z,yt,St,It,ft,Kt.data)):re.texSubImage3D(zt,je,Le.x,Le.y,Le.z,yt,St,It,ft,_t,Kt),re.pixelStorei(re.UNPACK_ROW_LENGTH,Ot),re.pixelStorei(re.UNPACK_IMAGE_HEIGHT,zn),re.pixelStorei(re.UNPACK_SKIP_PIXELS,Jr),re.pixelStorei(re.UNPACK_SKIP_ROWS,sr),re.pixelStorei(re.UNPACK_SKIP_IMAGES,fi),je===0&&Ve.generateMipmaps&&re.generateMipmap(zt),ie.unbindTexture()},this.initTexture=function(ge){ge.isCubeTexture?G.setTextureCube(ge,0):ge.isData3DTexture?G.setTexture3D(ge,0):ge.isDataArrayTexture||ge.isCompressedArrayTexture?G.setTexture2DArray(ge,0):G.setTexture2D(ge,0),ie.unbindTexture()},this.resetState=function(){w=0,x=0,M=null,ie.reset(),We.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return bl}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===YE?"display-p3":"srgb",t.unpackColorSpace=$n.workingColorSpace===ky?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===ri?$c:vO}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===$c?ri:Ll}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class wZ extends AO{}wZ.prototype.isWebGL1Renderer=!0;class eM{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new mt(e),this.density=t}clone(){return new eM(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class tM{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new mt(e),this.near=t,this.far=r}clone(){return new tM(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class $0 extends Mn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class nM{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=F0,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Co()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return xd("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Co()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Co()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const vs=new le;class wo{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)vs.fromBufferAttribute(this,t),vs.applyMatrix4(e),this.setXYZ(t,vs.x,vs.y,vs.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)vs.fromBufferAttribute(this,t),vs.applyNormalMatrix(e),this.setXYZ(t,vs.x,vs.y,vs.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)vs.fromBufferAttribute(this,t),vs.transformDirection(e),this.setXYZ(t,vs.x,vs.y,vs.z);return this}getComponent(e,t){let r=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(r=_s(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=ln(r,this.array)),this.data.array[e*this.data.stride+this.offset+t]=r,this}setX(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=_s(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=_s(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=_s(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=_s(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array),i=ln(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array),i=ln(i,this.array),s=ln(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Fn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new wo(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class TO extends $i{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new mt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Vh;const Vg=new le,Hh=new le,Wh=new le,jh=new et,Hg=new et,SZ=new wt,cb=new le,Wg=new le,fb=new le,z6=new et,cA=new et,U6=new et;class _Z extends Mn{constructor(e=new TO){if(super(),this.isSprite=!0,this.type="Sprite",Vh===void 0){Vh=new rn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new nM(t,5);Vh.setIndex([0,1,2,0,2,3]),Vh.setAttribute("position",new wo(r,3,0,!1)),Vh.setAttribute("uv",new wo(r,2,3,!1))}this.geometry=Vh,this.material=e,this.center=new et(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Hh.setFromMatrixScale(this.matrixWorld),SZ.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Wh.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Hh.multiplyScalar(-Wh.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;db(cb.set(-.5,-.5,0),Wh,o,Hh,i,s),db(Wg.set(.5,-.5,0),Wh,o,Hh,i,s),db(fb.set(.5,.5,0),Wh,o,Hh,i,s),z6.set(0,0),cA.set(1,0),U6.set(1,1);let a=e.ray.intersectTriangle(cb,Wg,fb,!1,Vg);if(a===null&&(db(Wg.set(-.5,.5,0),Wh,o,Hh,i,s),cA.set(0,1),a=e.ray.intersectTriangle(cb,fb,Wg,!1,Vg),a===null))return;const l=e.ray.origin.distanceTo(Vg);l<e.near||l>e.far||t.push({distance:l,point:Vg.clone(),uv:xo.getInterpolation(Vg,cb,Wg,fb,z6,cA,U6,new et),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function db(n,e,t,r,i,s){jh.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(Hg.x=s*jh.x-i*jh.y,Hg.y=i*jh.x+s*jh.y):Hg.copy(jh),n.copy(e),n.x+=Hg.x,n.y+=Hg.y,n.applyMatrix4(SZ)}const hb=new le,$6=new le;class EZ extends Mn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),e<s)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){hb.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(hb);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){hb.setFromMatrixPosition(e.matrixWorld),$6.setFromMatrixPosition(this.matrixWorld);const r=hb.distanceTo($6)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),r>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const V6=new le,H6=new En,W6=new En,vUe=new le,j6=new wt,pb=new le,fA=new bi,G6=new wt,dA=new Vu;class MZ extends Vr{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=mD,this.bindMatrix=new wt,this.bindMatrixInverse=new wt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Zr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,pb),this.boundingBox.expandByPoint(pb)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new bi),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,pb),this.boundingSphere.expandByPoint(pb)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),fA.copy(this.boundingSphere),fA.applyMatrix4(i),e.ray.intersectsSphere(fA)!==!1&&(G6.copy(i).invert(),dA.copy(e.ray).applyMatrix4(G6),!(this.boundingBox!==null&&dA.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,dA)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new En,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===mD?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===BK?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;H6.fromBufferAttribute(i.attributes.skinIndex,e),W6.fromBufferAttribute(i.attributes.skinWeight,e),V6.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=W6.getComponent(s);if(o!==0){const a=H6.getComponent(s);j6.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(vUe.copy(V6).applyMatrix4(j6),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class DO extends Mn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class wd extends Er{constructor(e=null,t=1,r=1,i,s,o,a,l,u=Ur,c=Ur,f,d){super(null,o,a,l,u,c,i,s,f,d),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const q6=new wt,yUe=new wt;class rM{constructor(e=[],t=[]){this.uuid=Co(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new wt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new wt;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:yUe;q6.multiplyMatrices(a,t[s]),q6.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new rM(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new wd(t,e,e,Ss,vo);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new DO),this.bones.push(o),this.boneInverses.push(new wt().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class ym extends Fn{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Gh=new wt,X6=new wt,mb=[],Y6=new Zr,xUe=new wt,jg=new Vr,Gg=new bi;class CZ extends Vr{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new ym(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,xUe)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Zr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Gh),Y6.copy(e.boundingBox).applyMatrix4(Gh),this.boundingBox.union(Y6)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new bi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Gh),Gg.copy(e.boundingSphere).applyMatrix4(Gh),this.boundingSphere.union(Gg)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(jg.geometry=this.geometry,jg.material=this.material,jg.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Gg.copy(this.boundingSphere),Gg.applyMatrix4(r),e.ray.intersectsSphere(Gg)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,Gh),X6.multiplyMatrices(r,Gh),jg.matrixWorld=X6,jg.raycast(e,mb);for(let o=0,a=mb.length;o<a;o++){const l=mb[o];l.instanceId=s,l.object=this,t.push(l)}mb.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new ym(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function bUe(n,e){return n.z-e.z}function wUe(n,e){return e.z-n.z}class SUe{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const r=this.pool,i=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1});const s=r[this.index];i.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=t}reset(){this.list.length=0,this.index=0}}const qh="batchId",oc=new wt,K6=new wt,_Ue=new wt,Z6=new wt,hA=new By,gb=new Zr,kf=new bi,qg=new le,pA=new SUe,Zi=new Vr,vb=[];function EUe(n,e,t=0){const r=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const i=n.count;for(let s=0;s<i;s++)for(let o=0;o<r;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*r);e.needsUpdate=!0}class AZ extends Vr{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,r=t*2,i){super(new rn,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=r,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),r=new wd(t,e,e,Ss,vo);this._matricesTexture=r}_initializeGeometry(e){const t=this.geometry,r=this._maxVertexCount,i=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:u,itemSize:c,normalized:f}=l,d=new u.constructor(r*c),h=new l.constructor(d,c,f);h.setUsage(l.usage),t.setAttribute(a,h)}if(e.getIndex()!==null){const a=r>65536?new Uint32Array(s):new Uint16Array(s);t.setIndex(new Fn(a,1))}const o=i>65536?new Uint32Array(r):new Uint16Array(r);t.setAttribute(qh,new Fn(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(qh))throw new Error(`BatchedMesh: Geometry cannot use attribute "${qh}"`);const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in t.attributes){if(r===qh)continue;if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),s=t.getAttribute(r);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Zr);const e=this._geometryCount,t=this.boundingBox,r=this._active;t.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,oc),this.getBoundingBoxAt(i,gb).applyMatrix4(oc),t.union(gb))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new bi);const e=this._geometryCount,t=this.boundingSphere,r=this._active;t.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,oc),this.getBoundingSphereAt(i,kf).applyMatrix4(oc),t.union(kf))}addGeometry(e,t=-1,r=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),t===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=t,s===null?i.vertexStart=0:i.vertexStart=s.vertexStart+s.vertexCount;const u=e.getIndex(),c=u!==null;if(c&&(r===-1?i.indexCount=u.count:i.indexCount=r,s===null?i.indexStart=0:i.indexStart=s.indexStart+s.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const f=this._visibility,d=this._active,h=this._matricesTexture,m=this._matricesTexture.image.data;f.push(!0),d.push(!0);const v=this._geometryCount;this._geometryCount++,_Ue.toArray(m,v*16),h.needsUpdate=!0,o.push(i),a.push({start:c?i.indexStart:i.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new Zr,sphereInitialized:!1,sphere:new bi});const y=this.geometry.getAttribute(qh);for(let p=0;p<i.vertexCount;p++)y.setX(i.vertexStart+p,v);return y.needsUpdate=!0,this.setGeometryAt(v,e),v}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const r=this.geometry,i=r.getIndex()!==null,s=r.getIndex(),o=t.getIndex(),a=this._reservedRanges[e];if(i&&o.count>a.indexCount||t.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,u=a.vertexCount;for(const h in r.attributes){if(h===qh)continue;const m=t.getAttribute(h),v=r.getAttribute(h);EUe(m,v,l);const y=m.itemSize;for(let p=m.count,S=u;p<S;p++){const b=l+p;for(let g=0;g<y;g++)v.setComponent(b,g,0)}v.needsUpdate=!0}if(i){const h=a.indexStart;for(let m=0;m<o.count;m++)s.setX(h+m,l+o.getX(m));for(let m=o.count,v=a.indexCount;m<v;m++)s.setX(h+m,l);s.needsUpdate=!0}const c=this._bounds[e];t.boundingBox!==null?(c.box.copy(t.boundingBox),c.boxInitialized=!0):c.boxInitialized=!1,t.boundingSphere!==null?(c.sphere.copy(t.boundingSphere),c.sphereInitialized=!0):c.sphereInitialized=!1;const f=this._drawRanges[e],d=t.getAttribute("position");return f.count=i?o.count:d.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||t[e]===!1?this:(t[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,t){if(this._active[e]===!1)return null;const i=this._bounds[e],s=i.box,o=this.geometry;if(i.boxInitialized===!1){s.makeEmpty();const a=o.index,l=o.attributes.position,u=this._drawRanges[e];for(let c=u.start,f=u.start+u.count;c<f;c++){let d=c;a&&(d=a.getX(d)),s.expandByPoint(qg.fromBufferAttribute(l,d))}i.boxInitialized=!0}return t.copy(s),t}getBoundingSphereAt(e,t){if(this._active[e]===!1)return null;const i=this._bounds[e],s=i.sphere,o=this.geometry;if(i.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,gb),gb.getCenter(s.center);const a=o.index,l=o.attributes.position,u=this._drawRanges[e];let c=0;for(let f=u.start,d=u.start+u.count;f<d;f++){let h=f;a&&(h=a.getX(h)),qg.fromBufferAttribute(l,h),c=Math.max(c,s.center.distanceToSquared(qg))}s.radius=Math.sqrt(c),i.sphereInitialized=!0}return t.copy(s),t}setMatrixAt(e,t){const r=this._active,i=this._matricesTexture,s=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||r[e]===!1?this:(t.toArray(s,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,t){const r=this._active,i=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||r[e]===!1?null:t.fromArray(i,e*16)}setVisibleAt(e,t){const r=this._visibility,i=this._active,s=this._geometryCount;return e>=s||i[e]===!1||r[e]===t?this:(r[e]=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._visibility,r=this._active,i=this._geometryCount;return e>=i||r[e]===!1?!1:t[e]}raycast(e,t){const r=this._visibility,i=this._active,s=this._drawRanges,o=this._geometryCount,a=this.matrixWorld,l=this.geometry;Zi.material=this.material,Zi.geometry.index=l.index,Zi.geometry.attributes=l.attributes,Zi.geometry.boundingBox===null&&(Zi.geometry.boundingBox=new Zr),Zi.geometry.boundingSphere===null&&(Zi.geometry.boundingSphere=new bi);for(let u=0;u<o;u++){if(!r[u]||!i[u])continue;const c=s[u];Zi.geometry.setDrawRange(c.start,c.count),this.getMatrixAt(u,Zi.matrixWorld).premultiply(a),this.getBoundingBoxAt(u,Zi.geometry.boundingBox),this.getBoundingSphereAt(u,Zi.geometry.boundingSphere),Zi.raycast(e,vb);for(let f=0,d=vb.length;f<d;f++){const h=vb[f];h.object=this,h.batchId=u,t.push(h)}vb.length=0}Zi.material=null,Zi.geometry.index=null,Zi.geometry.attributes={},Zi.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,t,r,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._active,u=this._visibility,c=this._multiDrawStarts,f=this._multiDrawCounts,d=this._drawRanges,h=this.perObjectFrustumCulled;h&&(Z6.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),hA.setFromProjectionMatrix(Z6,e.coordinateSystem));let m=0;if(this.sortObjects){K6.copy(this.matrixWorld).invert(),qg.setFromMatrixPosition(r.matrixWorld).applyMatrix4(K6);for(let p=0,S=u.length;p<S;p++)if(u[p]&&l[p]){this.getMatrixAt(p,oc),this.getBoundingSphereAt(p,kf).applyMatrix4(oc);let b=!1;if(h&&(b=!hA.intersectsSphere(kf)),!b){const g=qg.distanceTo(kf.center);pA.push(d[p],g)}}const v=pA.list,y=this.customSort;y===null?v.sort(s.transparent?wUe:bUe):y.call(this,v,r);for(let p=0,S=v.length;p<S;p++){const b=v[p];c[m]=b.start*a,f[m]=b.count,m++}pA.reset()}else for(let v=0,y=u.length;v<y;v++)if(u[v]&&l[v]){let p=!1;if(h&&(this.getMatrixAt(v,oc),this.getBoundingSphereAt(v,kf).applyMatrix4(oc),p=!hA.intersectsSphere(kf)),!p){const S=d[v];c[m]=S.start*a,f[m]=S.count,m++}}this._multiDrawCount=m,this._visibilityChanged=!1}onBeforeShadow(e,t,r,i,s,o){this.onBeforeRender(e,null,i,s,o)}}class Ls extends $i{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new mt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const J6=new le,Q6=new le,e9=new wt,mA=new Vu,yb=new bi;let tf=class extends Mn{constructor(e=new rn,t=new Ls){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)J6.fromBufferAttribute(t,i-1),Q6.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=J6.distanceTo(Q6);e.setAttribute("lineDistance",new Ct(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),yb.copy(r.boundingSphere),yb.applyMatrix4(i),yb.radius+=s,e.ray.intersectsSphere(yb)===!1)return;e9.copy(i).invert(),mA.copy(e.ray).applyMatrix4(e9);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=new le,c=new le,f=new le,d=new le,h=this.isLineSegments?2:1,m=r.index,y=r.attributes.position;if(m!==null){const p=Math.max(0,o.start),S=Math.min(m.count,o.start+o.count);for(let b=p,g=S-1;b<g;b+=h){const w=m.getX(b),x=m.getX(b+1);if(u.fromBufferAttribute(y,w),c.fromBufferAttribute(y,x),mA.distanceSqToSegment(u,c,d,f)>l)continue;d.applyMatrix4(this.matrixWorld);const A=e.ray.origin.distanceTo(d);A<e.near||A>e.far||t.push({distance:A,point:f.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else{const p=Math.max(0,o.start),S=Math.min(y.count,o.start+o.count);for(let b=p,g=S-1;b<g;b+=h){if(u.fromBufferAttribute(y,b),c.fromBufferAttribute(y,b+1),mA.distanceSqToSegment(u,c,d,f)>l)continue;d.applyMatrix4(this.matrixWorld);const x=e.ray.origin.distanceTo(d);x<e.near||x>e.far||t.push({distance:x,point:f.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};const t9=new le,n9=new le;class Ul extends tf{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)t9.fromBufferAttribute(t,i),n9.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+t9.distanceTo(n9);e.setAttribute("lineDistance",new Ct(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class TZ extends tf{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class NO extends $i{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new mt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const r9=new wt,GD=new Vu,xb=new bi,bb=new le;class DZ extends Mn{constructor(e=new rn,t=new NO){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),xb.copy(r.boundingSphere),xb.applyMatrix4(i),xb.radius+=s,e.ray.intersectsSphere(xb)===!1)return;r9.copy(i).invert(),GD.copy(e.ray).applyMatrix4(r9);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=r.index,f=r.attributes.position;if(u!==null){const d=Math.max(0,o.start),h=Math.min(u.count,o.start+o.count);for(let m=d,v=h;m<v;m++){const y=u.getX(m);bb.fromBufferAttribute(f,y),i9(bb,y,l,i,e,t,this)}}else{const d=Math.max(0,o.start),h=Math.min(f.count,o.start+o.count);for(let m=d,v=h;m<v;m++)bb.fromBufferAttribute(f,m),i9(bb,m,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function i9(n,e,t,r,i,s,o){const a=GD.distanceSqToPoint(n);if(a<t){const l=new le;GD.closestPointToPoint(n,l),l.applyMatrix4(r);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class MUe extends Er{constructor(e,t,r,i,s,o,a,l,u){super(e,t,r,i,s,o,a,l,u),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:lr,this.magFilter=s!==void 0?s:lr,this.generateMipmaps=!1;const c=this;function f(){c.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class CUe extends Er{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Ur,this.minFilter=Ur,this.generateMipmaps=!1,this.needsUpdate=!0}}class iM extends Er{constructor(e,t,r,i,s,o,a,l,u,c,f,d){super(null,o,a,l,u,c,i,s,f,d),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class AUe extends iM{constructor(e,t,r,i,s,o){super(e,t,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=rs}}class TUe extends iM{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,Ru),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class NZ extends Er{constructor(e,t,r,i,s,o,a,l,u){super(e,t,r,i,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Ha{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,u;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),u=r[i]-o,u<0)a=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const c=r[i],d=r[i+1]-c,h=(o-c)/d;return(i+h)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new et:new le);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new le,i=[],s=[],o=[],a=new le,l=new wt;for(let h=0;h<=e;h++){const m=h/e;i[h]=this.getTangentAt(m,new le)}s[0]=new le,o[0]=new le;let u=Number.MAX_VALUE;const c=Math.abs(i[0].x),f=Math.abs(i[0].y),d=Math.abs(i[0].z);c<=u&&(u=c,r.set(1,0,0)),f<=u&&(u=f,r.set(0,1,0)),d<=u&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let h=1;h<=e;h++){if(s[h]=s[h-1].clone(),o[h]=o[h-1].clone(),a.crossVectors(i[h-1],i[h]),a.length()>Number.EPSILON){a.normalize();const m=Math.acos(Rr(i[h-1].dot(i[h]),-1,1));s[h].applyMatrix4(l.makeRotationAxis(a,m))}o[h].crossVectors(i[h],s[h])}if(t===!0){let h=Math.acos(Rr(s[0].dot(s[e]),-1,1));h/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(h=-h);for(let m=1;m<=e;m++)s[m].applyMatrix4(l.makeRotationAxis(i[m],h*m)),o[m].crossVectors(i[m],s[m])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class sM extends Ha{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const r=t||new et,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const c=Math.cos(this.aRotation),f=Math.sin(this.aRotation),d=l-this.aX,h=u-this.aY;l=d*c-h*f+this.aX,u=d*f+h*c+this.aY}return r.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class PZ extends sM{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function PO(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){i(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,c,f){let d=(o-s)/u-(a-s)/(u+c)+(a-o)/c,h=(a-o)/c-(l-o)/(c+f)+(l-a)/f;d*=c,h*=c,i(o,a,d,h)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const wb=new le,gA=new PO,vA=new PO,yA=new PO;class RZ extends Ha{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new le){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,c;this.closed||a>0?u=i[(a-1)%s]:(wb.subVectors(i[0],i[1]).add(i[0]),u=wb);const f=i[a%s],d=i[(a+1)%s];if(this.closed||a+2<s?c=i[(a+2)%s]:(wb.subVectors(i[s-1],i[s-2]).add(i[s-1]),c=wb),this.curveType==="centripetal"||this.curveType==="chordal"){const h=this.curveType==="chordal"?.5:.25;let m=Math.pow(u.distanceToSquared(f),h),v=Math.pow(f.distanceToSquared(d),h),y=Math.pow(d.distanceToSquared(c),h);v<1e-4&&(v=1),m<1e-4&&(m=v),y<1e-4&&(y=v),gA.initNonuniformCatmullRom(u.x,f.x,d.x,c.x,m,v,y),vA.initNonuniformCatmullRom(u.y,f.y,d.y,c.y,m,v,y),yA.initNonuniformCatmullRom(u.z,f.z,d.z,c.z,m,v,y)}else this.curveType==="catmullrom"&&(gA.initCatmullRom(u.x,f.x,d.x,c.x,this.tension),vA.initCatmullRom(u.y,f.y,d.y,c.y,this.tension),yA.initCatmullRom(u.z,f.z,d.z,c.z,this.tension));return r.set(gA.calc(l),vA.calc(l),yA.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new le().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function s9(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+s+o)*l+(-3*t+3*r-2*s-o)*a+s*n+t}function DUe(n,e){const t=1-n;return t*t*e}function NUe(n,e){return 2*(1-n)*n*e}function PUe(n,e){return n*n*e}function zv(n,e,t,r){return DUe(n,e)+NUe(n,t)+PUe(n,r)}function RUe(n,e){const t=1-n;return t*t*t*e}function OUe(n,e){const t=1-n;return 3*t*t*n*e}function kUe(n,e){return 3*(1-n)*n*n*e}function IUe(n,e){return n*n*n*e}function Uv(n,e,t,r,i){return RUe(n,e)+OUe(n,t)+kUe(n,r)+IUe(n,i)}class RO extends Ha{constructor(e=new et,t=new et,r=new et,i=new et){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new et){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Uv(e,i.x,s.x,o.x,a.x),Uv(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class OZ extends Ha{constructor(e=new le,t=new le,r=new le,i=new le){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new le){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Uv(e,i.x,s.x,o.x,a.x),Uv(e,i.y,s.y,o.y,a.y),Uv(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class OO extends Ha{constructor(e=new et,t=new et){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new et){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new et){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class kZ extends Ha{constructor(e=new le,t=new le){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new le){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new le){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class kO extends Ha{constructor(e=new et,t=new et,r=new et){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new et){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(zv(e,i.x,s.x,o.x),zv(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class IO extends Ha{constructor(e=new le,t=new le,r=new le){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new le){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(zv(e,i.x,s.x,o.x),zv(e,i.y,s.y,o.y),zv(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class LO extends Ha{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new et){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],u=i[o],c=i[o>i.length-2?i.length-1:o+1],f=i[o>i.length-3?i.length-1:o+2];return r.set(s9(a,l.x,u.x,c.x,f.x),s9(a,l.y,u.y,c.y,f.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new et().fromArray(i))}return this}}var S_=Object.freeze({__proto__:null,ArcCurve:PZ,CatmullRomCurve3:RZ,CubicBezierCurve:RO,CubicBezierCurve3:OZ,EllipseCurve:sM,LineCurve:OO,LineCurve3:kZ,QuadraticBezierCurve:kO,QuadraticBezierCurve3:IO,SplineCurve:LO});class IZ extends Ha{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new S_[r](t,e))}return this}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const c=l[u];r&&r.equals(c)||(t.push(c),r=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new S_[i.type]().fromJSON(i))}return this}}class V0 extends IZ{constructor(e){super(),this.type="Path",this.currentPoint=new et,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new OO(this.currentPoint.clone(),new et(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new kO(this.currentPoint.clone(),new et(e,t),new et(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new RO(this.currentPoint.clone(),new et(e,t),new et(r,i),new et(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new LO(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,l){const u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,t+c,r,i,s,o,a,l),this}absellipse(e,t,r,i,s,o,a,l){const u=new sM(e,t,r,i,s,o,a,l);if(this.curves.length>0){const f=u.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(u);const c=u.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class zy extends rn{constructor(e=[new et(0,-.5),new et(.5,0),new et(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=Rr(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],c=1/t,f=new le,d=new et,h=new le,m=new le,v=new le;let y=0,p=0;for(let S=0;S<=e.length-1;S++)switch(S){case 0:y=e[S+1].x-e[S].x,p=e[S+1].y-e[S].y,h.x=p*1,h.y=-y,h.z=p*0,v.copy(h),h.normalize(),l.push(h.x,h.y,h.z);break;case e.length-1:l.push(v.x,v.y,v.z);break;default:y=e[S+1].x-e[S].x,p=e[S+1].y-e[S].y,h.x=p*1,h.y=-y,h.z=p*0,m.copy(h),h.x+=v.x,h.y+=v.y,h.z+=v.z,h.normalize(),l.push(h.x,h.y,h.z),v.copy(m)}for(let S=0;S<=t;S++){const b=r+S*c*i,g=Math.sin(b),w=Math.cos(b);for(let x=0;x<=e.length-1;x++){f.x=e[x].x*g,f.y=e[x].y,f.z=e[x].x*w,o.push(f.x,f.y,f.z),d.x=S/t,d.y=x/(e.length-1),a.push(d.x,d.y);const M=l[3*x+0]*g,A=l[3*x+1],N=l[3*x+0]*w;u.push(M,A,N)}}for(let S=0;S<t;S++)for(let b=0;b<e.length-1;b++){const g=b+S*e.length,w=g,x=g+e.length,M=g+e.length+1,A=g+1;s.push(w,x,A),s.push(M,A,x)}this.setIndex(s),this.setAttribute("position",new Ct(o,3)),this.setAttribute("uv",new Ct(a,2)),this.setAttribute("normal",new Ct(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zy(e.points,e.segments,e.phiStart,e.phiLength)}}class oM extends zy{constructor(e=1,t=1,r=4,i=8){const s=new V0;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new oM(e.radius,e.length,e.capSegments,e.radialSegments)}}class aM extends rn{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],l=[],u=new le,c=new et;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,d=3;f<=t;f++,d+=3){const h=r+f/t*i;u.x=e*Math.cos(h),u.y=e*Math.sin(h),o.push(u.x,u.y,u.z),a.push(0,0,1),c.x=(o[d]/e+1)/2,c.y=(o[d+1]/e+1)/2,l.push(c.x,c.y)}for(let f=1;f<=t;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new Ct(o,3)),this.setAttribute("normal",new Ct(a,3)),this.setAttribute("uv",new Ct(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new aM(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Qm extends rn{constructor(e=1,t=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;i=Math.floor(i),s=Math.floor(s);const c=[],f=[],d=[],h=[];let m=0;const v=[],y=r/2;let p=0;S(),o===!1&&(e>0&&b(!0),t>0&&b(!1)),this.setIndex(c),this.setAttribute("position",new Ct(f,3)),this.setAttribute("normal",new Ct(d,3)),this.setAttribute("uv",new Ct(h,2));function S(){const g=new le,w=new le;let x=0;const M=(t-e)/r;for(let A=0;A<=s;A++){const N=[],C=A/s,T=C*(t-e)+e;for(let R=0;R<=i;R++){const $=R/i,B=$*l+a,z=Math.sin(B),D=Math.cos(B);w.x=T*z,w.y=-C*r+y,w.z=T*D,f.push(w.x,w.y,w.z),g.set(z,M,D).normalize(),d.push(g.x,g.y,g.z),h.push($,1-C),N.push(m++)}v.push(N)}for(let A=0;A<i;A++)for(let N=0;N<s;N++){const C=v[N][A],T=v[N+1][A],R=v[N+1][A+1],$=v[N][A+1];c.push(C,T,$),c.push(T,R,$),x+=6}u.addGroup(p,x,0),p+=x}function b(g){const w=m,x=new et,M=new le;let A=0;const N=g===!0?e:t,C=g===!0?1:-1;for(let R=1;R<=i;R++)f.push(0,y*C,0),d.push(0,C,0),h.push(.5,.5),m++;const T=m;for(let R=0;R<=i;R++){const B=R/i*l+a,z=Math.cos(B),D=Math.sin(B);M.x=N*D,M.y=y*C,M.z=N*z,f.push(M.x,M.y,M.z),d.push(0,C,0),x.x=z*.5+.5,x.y=D*.5*C+.5,h.push(x.x,x.y),m++}for(let R=0;R<i;R++){const $=w+R,B=T+R;g===!0?c.push(B,B+1,$):c.push(B+1,B,$),A+=3}u.addGroup(p,A,g===!0?1:2),p+=A}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qm(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class lM extends Qm{constructor(e=1,t=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new lM(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class yf extends rn{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];a(i),u(r),c(),this.setAttribute("position",new Ct(s,3)),this.setAttribute("normal",new Ct(s.slice(),3)),this.setAttribute("uv",new Ct(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(S){const b=new le,g=new le,w=new le;for(let x=0;x<t.length;x+=3)h(t[x+0],b),h(t[x+1],g),h(t[x+2],w),l(b,g,w,S)}function l(S,b,g,w){const x=w+1,M=[];for(let A=0;A<=x;A++){M[A]=[];const N=S.clone().lerp(g,A/x),C=b.clone().lerp(g,A/x),T=x-A;for(let R=0;R<=T;R++)R===0&&A===x?M[A][R]=N:M[A][R]=N.clone().lerp(C,R/T)}for(let A=0;A<x;A++)for(let N=0;N<2*(x-A)-1;N++){const C=Math.floor(N/2);N%2===0?(d(M[A][C+1]),d(M[A+1][C]),d(M[A][C])):(d(M[A][C+1]),d(M[A+1][C+1]),d(M[A+1][C]))}}function u(S){const b=new le;for(let g=0;g<s.length;g+=3)b.x=s[g+0],b.y=s[g+1],b.z=s[g+2],b.normalize().multiplyScalar(S),s[g+0]=b.x,s[g+1]=b.y,s[g+2]=b.z}function c(){const S=new le;for(let b=0;b<s.length;b+=3){S.x=s[b+0],S.y=s[b+1],S.z=s[b+2];const g=y(S)/2/Math.PI+.5,w=p(S)/Math.PI+.5;o.push(g,1-w)}m(),f()}function f(){for(let S=0;S<o.length;S+=6){const b=o[S+0],g=o[S+2],w=o[S+4],x=Math.max(b,g,w),M=Math.min(b,g,w);x>.9&&M<.1&&(b<.2&&(o[S+0]+=1),g<.2&&(o[S+2]+=1),w<.2&&(o[S+4]+=1))}}function d(S){s.push(S.x,S.y,S.z)}function h(S,b){const g=S*3;b.x=e[g+0],b.y=e[g+1],b.z=e[g+2]}function m(){const S=new le,b=new le,g=new le,w=new le,x=new et,M=new et,A=new et;for(let N=0,C=0;N<s.length;N+=9,C+=6){S.set(s[N+0],s[N+1],s[N+2]),b.set(s[N+3],s[N+4],s[N+5]),g.set(s[N+6],s[N+7],s[N+8]),x.set(o[C+0],o[C+1]),M.set(o[C+2],o[C+3]),A.set(o[C+4],o[C+5]),w.copy(S).add(b).add(g).divideScalar(3);const T=y(w);v(x,C+0,S,T),v(M,C+2,b,T),v(A,C+4,g,T)}}function v(S,b,g,w){w<0&&S.x===1&&(o[b]=S.x-1),g.x===0&&g.z===0&&(o[b]=w/2/Math.PI+.5)}function y(S){return Math.atan2(S.z,-S.x)}function p(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yf(e.vertices,e.indices,e.radius,e.details)}}class uM extends yf{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new uM(e.radius,e.detail)}}const Sb=new le,_b=new le,xA=new le,Eb=new xo;class FO extends rn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(yd*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],c=["a","b","c"],f=new Array(3),d={},h=[];for(let m=0;m<l;m+=3){o?(u[0]=o.getX(m),u[1]=o.getX(m+1),u[2]=o.getX(m+2)):(u[0]=m,u[1]=m+1,u[2]=m+2);const{a:v,b:y,c:p}=Eb;if(v.fromBufferAttribute(a,u[0]),y.fromBufferAttribute(a,u[1]),p.fromBufferAttribute(a,u[2]),Eb.getNormal(xA),f[0]=`${Math.round(v.x*i)},${Math.round(v.y*i)},${Math.round(v.z*i)}`,f[1]=`${Math.round(y.x*i)},${Math.round(y.y*i)},${Math.round(y.z*i)}`,f[2]=`${Math.round(p.x*i)},${Math.round(p.y*i)},${Math.round(p.z*i)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let S=0;S<3;S++){const b=(S+1)%3,g=f[S],w=f[b],x=Eb[c[S]],M=Eb[c[b]],A=`${g}_${w}`,N=`${w}_${g}`;N in d&&d[N]?(xA.dot(d[N].normal)<=s&&(h.push(x.x,x.y,x.z),h.push(M.x,M.y,M.z)),d[N]=null):A in d||(d[A]={index0:u[S],index1:u[b],normal:xA.clone()})}}for(const m in d)if(d[m]){const{index0:v,index1:y}=d[m];Sb.fromBufferAttribute(a,v),_b.fromBufferAttribute(a,y),h.push(Sb.x,Sb.y,Sb.z),h.push(_b.x,_b.y,_b.z)}this.setAttribute("position",new Ct(h,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Sd extends V0{constructor(e){super(e),this.uuid=Co(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new V0().fromJSON(i))}return this}}const LUe={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=LZ(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u,c,f,d,h;if(r&&(s=$Ue(n,e,s,t)),n.length>80*t){a=u=n[0],l=c=n[1];for(let m=t;m<i;m+=t)f=n[m],d=n[m+1],f<a&&(a=f),d<l&&(l=d),f>u&&(u=f),d>c&&(c=d);h=Math.max(u-a,c-l),h=h!==0?32767/h:0}return H0(s,o,t,a,l,h,0),o}};function LZ(n,e,t,r,i){let s,o;if(i===JUe(n,e,t,r)>0)for(s=e;s<t;s+=r)o=o9(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=o9(s,n[s],n[s+1],o);return o&&cM(o,o.next)&&(j0(o),o=o.next),o}function Ld(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(cM(t,t.next)||wr(t.prev,t,t.next)===0)){if(j0(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function H0(n,e,t,r,i,s,o){if(!n)return;!o&&s&&GUe(n,r,i,s);let a=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,s?BUe(n,r,i,s):FUe(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(u.i/t|0),j0(n),n=u.next,a=u.next;continue}if(n=u,n===a){o?o===1?(n=zUe(Ld(n),e,t),H0(n,e,t,r,i,s,2)):o===2&&UUe(n,e,t,r,i,s):H0(Ld(n),e,t,r,i,s,1);break}}}function FUe(n){const e=n.prev,t=n,r=n.next;if(wr(e,t,r)>=0)return!1;const i=e.x,s=t.x,o=r.x,a=e.y,l=t.y,u=r.y,c=i<s?i<o?i:o:s<o?s:o,f=a<l?a<u?a:u:l<u?l:u,d=i>s?i>o?i:o:s>o?s:o,h=a>l?a>u?a:u:l>u?l:u;let m=r.next;for(;m!==e;){if(m.x>=c&&m.x<=d&&m.y>=f&&m.y<=h&&Dp(i,a,s,l,o,u,m.x,m.y)&&wr(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function BUe(n,e,t,r){const i=n.prev,s=n,o=n.next;if(wr(i,s,o)>=0)return!1;const a=i.x,l=s.x,u=o.x,c=i.y,f=s.y,d=o.y,h=a<l?a<u?a:u:l<u?l:u,m=c<f?c<d?c:d:f<d?f:d,v=a>l?a>u?a:u:l>u?l:u,y=c>f?c>d?c:d:f>d?f:d,p=qD(h,m,e,t,r),S=qD(v,y,e,t,r);let b=n.prevZ,g=n.nextZ;for(;b&&b.z>=p&&g&&g.z<=S;){if(b.x>=h&&b.x<=v&&b.y>=m&&b.y<=y&&b!==i&&b!==o&&Dp(a,c,l,f,u,d,b.x,b.y)&&wr(b.prev,b,b.next)>=0||(b=b.prevZ,g.x>=h&&g.x<=v&&g.y>=m&&g.y<=y&&g!==i&&g!==o&&Dp(a,c,l,f,u,d,g.x,g.y)&&wr(g.prev,g,g.next)>=0))return!1;g=g.nextZ}for(;b&&b.z>=p;){if(b.x>=h&&b.x<=v&&b.y>=m&&b.y<=y&&b!==i&&b!==o&&Dp(a,c,l,f,u,d,b.x,b.y)&&wr(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;g&&g.z<=S;){if(g.x>=h&&g.x<=v&&g.y>=m&&g.y<=y&&g!==i&&g!==o&&Dp(a,c,l,f,u,d,g.x,g.y)&&wr(g.prev,g,g.next)>=0)return!1;g=g.nextZ}return!0}function zUe(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!cM(i,s)&&FZ(i,r,r.next,s)&&W0(i,s)&&W0(s,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(s.i/t|0),j0(r),j0(r.next),r=n=s),r=r.next}while(r!==n);return Ld(r)}function UUe(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&YUe(o,a)){let l=BZ(o,a);o=Ld(o,o.next),l=Ld(l,l.next),H0(o,e,t,r,i,s,0),H0(l,e,t,r,i,s,0);return}a=a.next}o=o.next}while(o!==n)}function $Ue(n,e,t,r){const i=[];let s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,u=LZ(n,a,l,r,!1),u===u.next&&(u.steiner=!0),i.push(XUe(u));for(i.sort(VUe),s=0;s<i.length;s++)t=HUe(i[s],t);return t}function VUe(n,e){return n.x-e.x}function HUe(n,e){const t=WUe(n,e);if(!t)return e;const r=BZ(t,n);return Ld(r,r.next),Ld(t,t.next)}function WUe(n,e){let t=e,r=-1/0,i;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const d=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=s&&d>r&&(r=d,i=t.x<t.next.x?t:t.next,d===s))return i}t=t.next}while(t!==e);if(!i)return null;const a=i,l=i.x,u=i.y;let c=1/0,f;t=i;do s>=t.x&&t.x>=l&&s!==t.x&&Dp(o<u?s:r,o,l,u,o<u?r:s,o,t.x,t.y)&&(f=Math.abs(o-t.y)/(s-t.x),W0(t,n)&&(f<c||f===c&&(t.x>i.x||t.x===i.x&&jUe(i,t)))&&(i=t,c=f)),t=t.next;while(t!==a);return i}function jUe(n,e){return wr(n.prev,n,e.prev)<0&&wr(e.next,n,n.next)<0}function GUe(n,e,t,r){let i=n;do i.z===0&&(i.z=qD(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,qUe(i)}function qUe(n){let e,t,r,i,s,o,a,l,u=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<u&&(a++,r=r.nextZ,!!r);e++);for(l=u;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,u*=2}while(o>1);return n}function qD(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function XUe(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Dp(n,e,t,r,i,s,o,a){return(i-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(r-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(r-a)}function YUe(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!KUe(n,e)&&(W0(n,e)&&W0(e,n)&&ZUe(n,e)&&(wr(n.prev,n,e.prev)||wr(n,e.prev,e))||cM(n,e)&&wr(n.prev,n,n.next)>0&&wr(e.prev,e,e.next)>0)}function wr(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function cM(n,e){return n.x===e.x&&n.y===e.y}function FZ(n,e,t,r){const i=Cb(wr(n,e,t)),s=Cb(wr(n,e,r)),o=Cb(wr(t,r,n)),a=Cb(wr(t,r,e));return!!(i!==s&&o!==a||i===0&&Mb(n,t,e)||s===0&&Mb(n,r,e)||o===0&&Mb(t,n,r)||a===0&&Mb(t,e,r))}function Mb(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Cb(n){return n>0?1:n<0?-1:0}function KUe(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&FZ(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function W0(n,e){return wr(n.prev,n,n.next)<0?wr(n,e,n.next)>=0&&wr(n,n.prev,e)>=0:wr(n,e,n.prev)<0||wr(n,n.next,e)<0}function ZUe(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function BZ(n,e){const t=new XD(n.i,n.x,n.y),r=new XD(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function o9(n,e,t,r){const i=new XD(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function j0(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function XD(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function JUe(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class Dl{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return Dl.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];a9(e),l9(r,e);let o=e.length;t.forEach(a9);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,l9(r,t[l]);const a=LUe.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function a9(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function l9(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class fM extends rn{constructor(e=new Sd([new et(.5,.5),new et(-.5,.5),new et(-.5,-.5),new et(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new Ct(i,3)),this.setAttribute("uv",new Ct(s,2)),this.computeVertexNormals();function o(a){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,c=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let d=t.bevelEnabled!==void 0?t.bevelEnabled:!0,h=t.bevelThickness!==void 0?t.bevelThickness:.2,m=t.bevelSize!==void 0?t.bevelSize:h-.1,v=t.bevelOffset!==void 0?t.bevelOffset:0,y=t.bevelSegments!==void 0?t.bevelSegments:3;const p=t.extrudePath,S=t.UVGenerator!==void 0?t.UVGenerator:QUe;let b,g=!1,w,x,M,A;p&&(b=p.getSpacedPoints(c),g=!0,d=!1,w=p.computeFrenetFrames(c,!1),x=new le,M=new le,A=new le),d||(y=0,h=0,m=0,v=0);const N=a.extractPoints(u);let C=N.shape;const T=N.holes;if(!Dl.isClockWise(C)){C=C.reverse();for(let re=0,Pe=T.length;re<Pe;re++){const Re=T[re];Dl.isClockWise(Re)&&(T[re]=Re.reverse())}}const $=Dl.triangulateShape(C,T),B=C;for(let re=0,Pe=T.length;re<Pe;re++){const Re=T[re];C=C.concat(Re)}function z(re,Pe,Re){return Pe||console.error("THREE.ExtrudeGeometry: vec does not exist"),re.clone().addScaledVector(Pe,Re)}const D=C.length,I=$.length;function U(re,Pe,Re){let te,ie,Me;const oe=re.x-Pe.x,G=re.y-Pe.y,j=Re.x-re.x,de=Re.y-re.y,Te=oe*oe+G*G,X=oe*de-G*j;if(Math.abs(X)>Number.EPSILON){const Q=Math.sqrt(Te),be=Math.sqrt(j*j+de*de),_e=Pe.x-G/Q,Ne=Pe.y+oe/Q,Fe=Re.x-de/be,He=Re.y+j/be,Ie=((Fe-_e)*de-(He-Ne)*j)/(oe*de-G*j);te=_e+oe*Ie-re.x,ie=Ne+G*Ie-re.y;const Je=te*te+ie*ie;if(Je<=2)return new et(te,ie);Me=Math.sqrt(Je/2)}else{let Q=!1;oe>Number.EPSILON?j>Number.EPSILON&&(Q=!0):oe<-Number.EPSILON?j<-Number.EPSILON&&(Q=!0):Math.sign(G)===Math.sign(de)&&(Q=!0),Q?(te=-G,ie=oe,Me=Math.sqrt(Te)):(te=oe,ie=G,Me=Math.sqrt(Te/2))}return new et(te/Me,ie/Me)}const L=[];for(let re=0,Pe=B.length,Re=Pe-1,te=re+1;re<Pe;re++,Re++,te++)Re===Pe&&(Re=0),te===Pe&&(te=0),L[re]=U(B[re],B[Re],B[te]);const q=[];let Z,J=L.concat();for(let re=0,Pe=T.length;re<Pe;re++){const Re=T[re];Z=[];for(let te=0,ie=Re.length,Me=ie-1,oe=te+1;te<ie;te++,Me++,oe++)Me===ie&&(Me=0),oe===ie&&(oe=0),Z[te]=U(Re[te],Re[Me],Re[oe]);q.push(Z),J=J.concat(Z)}for(let re=0;re<y;re++){const Pe=re/y,Re=h*Math.cos(Pe*Math.PI/2),te=m*Math.sin(Pe*Math.PI/2)+v;for(let ie=0,Me=B.length;ie<Me;ie++){const oe=z(B[ie],L[ie],te);pe(oe.x,oe.y,-Re)}for(let ie=0,Me=T.length;ie<Me;ie++){const oe=T[ie];Z=q[ie];for(let G=0,j=oe.length;G<j;G++){const de=z(oe[G],Z[G],te);pe(de.x,de.y,-Re)}}}const Y=m+v;for(let re=0;re<D;re++){const Pe=d?z(C[re],J[re],Y):C[re];g?(M.copy(w.normals[0]).multiplyScalar(Pe.x),x.copy(w.binormals[0]).multiplyScalar(Pe.y),A.copy(b[0]).add(M).add(x),pe(A.x,A.y,A.z)):pe(Pe.x,Pe.y,0)}for(let re=1;re<=c;re++)for(let Pe=0;Pe<D;Pe++){const Re=d?z(C[Pe],J[Pe],Y):C[Pe];g?(M.copy(w.normals[re]).multiplyScalar(Re.x),x.copy(w.binormals[re]).multiplyScalar(Re.y),A.copy(b[re]).add(M).add(x),pe(A.x,A.y,A.z)):pe(Re.x,Re.y,f/c*re)}for(let re=y-1;re>=0;re--){const Pe=re/y,Re=h*Math.cos(Pe*Math.PI/2),te=m*Math.sin(Pe*Math.PI/2)+v;for(let ie=0,Me=B.length;ie<Me;ie++){const oe=z(B[ie],L[ie],te);pe(oe.x,oe.y,f+Re)}for(let ie=0,Me=T.length;ie<Me;ie++){const oe=T[ie];Z=q[ie];for(let G=0,j=oe.length;G<j;G++){const de=z(oe[G],Z[G],te);g?pe(de.x,de.y+b[c-1].y,b[c-1].x+Re):pe(de.x,de.y,f+Re)}}}ee(),ae();function ee(){const re=i.length/3;if(d){let Pe=0,Re=D*Pe;for(let te=0;te<I;te++){const ie=$[te];we(ie[2]+Re,ie[1]+Re,ie[0]+Re)}Pe=c+y*2,Re=D*Pe;for(let te=0;te<I;te++){const ie=$[te];we(ie[0]+Re,ie[1]+Re,ie[2]+Re)}}else{for(let Pe=0;Pe<I;Pe++){const Re=$[Pe];we(Re[2],Re[1],Re[0])}for(let Pe=0;Pe<I;Pe++){const Re=$[Pe];we(Re[0]+D*c,Re[1]+D*c,Re[2]+D*c)}}r.addGroup(re,i.length/3-re,0)}function ae(){const re=i.length/3;let Pe=0;ce(B,Pe),Pe+=B.length;for(let Re=0,te=T.length;Re<te;Re++){const ie=T[Re];ce(ie,Pe),Pe+=ie.length}r.addGroup(re,i.length/3-re,1)}function ce(re,Pe){let Re=re.length;for(;--Re>=0;){const te=Re;let ie=Re-1;ie<0&&(ie=re.length-1);for(let Me=0,oe=c+y*2;Me<oe;Me++){const G=D*Me,j=D*(Me+1),de=Pe+te+G,Te=Pe+ie+G,X=Pe+ie+j,Q=Pe+te+j;me(de,Te,X,Q)}}}function pe(re,Pe,Re){l.push(re),l.push(Pe),l.push(Re)}function we(re,Pe,Re){Ae(re),Ae(Pe),Ae(Re);const te=i.length/3,ie=S.generateTopUV(r,i,te-3,te-2,te-1);Ee(ie[0]),Ee(ie[1]),Ee(ie[2])}function me(re,Pe,Re,te){Ae(re),Ae(Pe),Ae(te),Ae(Pe),Ae(Re),Ae(te);const ie=i.length/3,Me=S.generateSideWallUV(r,i,ie-6,ie-3,ie-2,ie-1);Ee(Me[0]),Ee(Me[1]),Ee(Me[3]),Ee(Me[1]),Ee(Me[2]),Ee(Me[3])}function Ae(re){i.push(l[re*3+0]),i.push(l[re*3+1]),i.push(l[re*3+2])}function Ee(re){s.push(re.x),s.push(re.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return e6e(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new S_[i.type]().fromJSON(i)),new fM(r,e.options)}}const QUe={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],a=e[r*3],l=e[r*3+1],u=e[i*3],c=e[i*3+1];return[new et(s,o),new et(a,l),new et(u,c)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],u=e[r*3],c=e[r*3+1],f=e[r*3+2],d=e[i*3],h=e[i*3+1],m=e[i*3+2],v=e[s*3],y=e[s*3+1],p=e[s*3+2];return Math.abs(a-c)<Math.abs(o-u)?[new et(o,1-l),new et(u,1-f),new et(d,1-m),new et(v,1-p)]:[new et(a,1-l),new et(c,1-f),new et(h,1-m),new et(y,1-p)]}};function e6e(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class dM extends yf{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new dM(e.radius,e.detail)}}class Uy extends yf{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Uy(e.radius,e.detail)}}class hM extends rn{constructor(e=.5,t=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],u=[],c=[];let f=e;const d=(t-e)/i,h=new le,m=new et;for(let v=0;v<=i;v++){for(let y=0;y<=r;y++){const p=s+y/r*o;h.x=f*Math.cos(p),h.y=f*Math.sin(p),l.push(h.x,h.y,h.z),u.push(0,0,1),m.x=(h.x/t+1)/2,m.y=(h.y/t+1)/2,c.push(m.x,m.y)}f+=d}for(let v=0;v<i;v++){const y=v*(r+1);for(let p=0;p<r;p++){const S=p+y,b=S,g=S+r+1,w=S+r+2,x=S+1;a.push(b,g,x),a.push(g,w,x)}}this.setIndex(a),this.setAttribute("position",new Ct(l,3)),this.setAttribute("normal",new Ct(u,3)),this.setAttribute("uv",new Ct(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hM(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class pM extends rn{constructor(e=new Sd([new et(0,.5),new et(-.5,-.5),new et(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let c=0;c<e.length;c++)u(e[c]),this.addGroup(a,l,c),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new Ct(i,3)),this.setAttribute("normal",new Ct(s,3)),this.setAttribute("uv",new Ct(o,2));function u(c){const f=i.length/3,d=c.extractPoints(t);let h=d.shape;const m=d.holes;Dl.isClockWise(h)===!1&&(h=h.reverse());for(let y=0,p=m.length;y<p;y++){const S=m[y];Dl.isClockWise(S)===!0&&(m[y]=S.reverse())}const v=Dl.triangulateShape(h,m);for(let y=0,p=m.length;y<p;y++){const S=m[y];h=h.concat(S)}for(let y=0,p=h.length;y<p;y++){const S=h[y];i.push(S.x,S.y,0),s.push(0,0,1),o.push(S.x,S.y)}for(let y=0,p=v.length;y<p;y++){const S=v[y],b=S[0]+f,g=S[1]+f,w=S[2]+f;r.push(b,g,w),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return t6e(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new pM(r,e.curveSegments)}}function t6e(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class $y extends rn{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let u=0;const c=[],f=new le,d=new le,h=[],m=[],v=[],y=[];for(let p=0;p<=r;p++){const S=[],b=p/r;let g=0;p===0&&o===0?g=.5/t:p===r&&l===Math.PI&&(g=-.5/t);for(let w=0;w<=t;w++){const x=w/t;f.x=-e*Math.cos(i+x*s)*Math.sin(o+b*a),f.y=e*Math.cos(o+b*a),f.z=e*Math.sin(i+x*s)*Math.sin(o+b*a),m.push(f.x,f.y,f.z),d.copy(f).normalize(),v.push(d.x,d.y,d.z),y.push(x+g,1-b),S.push(u++)}c.push(S)}for(let p=0;p<r;p++)for(let S=0;S<t;S++){const b=c[p][S+1],g=c[p][S],w=c[p+1][S],x=c[p+1][S+1];(p!==0||o>0)&&h.push(b,g,x),(p!==r-1||l<Math.PI)&&h.push(g,w,x)}this.setIndex(h),this.setAttribute("position",new Ct(m,3)),this.setAttribute("normal",new Ct(v,3)),this.setAttribute("uv",new Ct(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $y(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class mM extends yf{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new mM(e.radius,e.detail)}}class gM extends rn{constructor(e=1,t=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],u=[],c=new le,f=new le,d=new le;for(let h=0;h<=r;h++)for(let m=0;m<=i;m++){const v=m/i*s,y=h/r*Math.PI*2;f.x=(e+t*Math.cos(y))*Math.cos(v),f.y=(e+t*Math.cos(y))*Math.sin(v),f.z=t*Math.sin(y),a.push(f.x,f.y,f.z),c.x=e*Math.cos(v),c.y=e*Math.sin(v),d.subVectors(f,c).normalize(),l.push(d.x,d.y,d.z),u.push(m/i),u.push(h/r)}for(let h=1;h<=r;h++)for(let m=1;m<=i;m++){const v=(i+1)*h+m-1,y=(i+1)*(h-1)+m-1,p=(i+1)*(h-1)+m,S=(i+1)*h+m;o.push(v,y,S),o.push(y,p,S)}this.setIndex(o),this.setAttribute("position",new Ct(a,3)),this.setAttribute("normal",new Ct(l,3)),this.setAttribute("uv",new Ct(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gM(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class vM extends rn{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],u=[],c=[],f=new le,d=new le,h=new le,m=new le,v=new le,y=new le,p=new le;for(let b=0;b<=r;++b){const g=b/r*s*Math.PI*2;S(g,s,o,e,h),S(g+.01,s,o,e,m),y.subVectors(m,h),p.addVectors(m,h),v.crossVectors(y,p),p.crossVectors(v,y),v.normalize(),p.normalize();for(let w=0;w<=i;++w){const x=w/i*Math.PI*2,M=-t*Math.cos(x),A=t*Math.sin(x);f.x=h.x+(M*p.x+A*v.x),f.y=h.y+(M*p.y+A*v.y),f.z=h.z+(M*p.z+A*v.z),l.push(f.x,f.y,f.z),d.subVectors(f,h).normalize(),u.push(d.x,d.y,d.z),c.push(b/r),c.push(w/i)}}for(let b=1;b<=r;b++)for(let g=1;g<=i;g++){const w=(i+1)*(b-1)+(g-1),x=(i+1)*b+(g-1),M=(i+1)*b+g,A=(i+1)*(b-1)+g;a.push(w,x,A),a.push(x,M,A)}this.setIndex(a),this.setAttribute("position",new Ct(l,3)),this.setAttribute("normal",new Ct(u,3)),this.setAttribute("uv",new Ct(c,2));function S(b,g,w,x,M){const A=Math.cos(b),N=Math.sin(b),C=w/g*b,T=Math.cos(C);M.x=x*(2+T)*.5*A,M.y=x*(2+T)*N*.5,M.z=x*Math.sin(C)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vM(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class yM extends rn{constructor(e=new IO(new le(-1,-1,0),new le(-1,1,0),new le(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new le,l=new le,u=new et;let c=new le;const f=[],d=[],h=[],m=[];v(),this.setIndex(m),this.setAttribute("position",new Ct(f,3)),this.setAttribute("normal",new Ct(d,3)),this.setAttribute("uv",new Ct(h,2));function v(){for(let b=0;b<t;b++)y(b);y(s===!1?t:0),S(),p()}function y(b){c=e.getPointAt(b/t,c);const g=o.normals[b],w=o.binormals[b];for(let x=0;x<=i;x++){const M=x/i*Math.PI*2,A=Math.sin(M),N=-Math.cos(M);l.x=N*g.x+A*w.x,l.y=N*g.y+A*w.y,l.z=N*g.z+A*w.z,l.normalize(),d.push(l.x,l.y,l.z),a.x=c.x+r*l.x,a.y=c.y+r*l.y,a.z=c.z+r*l.z,f.push(a.x,a.y,a.z)}}function p(){for(let b=1;b<=t;b++)for(let g=1;g<=i;g++){const w=(i+1)*(b-1)+(g-1),x=(i+1)*b+(g-1),M=(i+1)*b+g,A=(i+1)*(b-1)+g;m.push(w,x,A),m.push(x,M,A)}}function S(){for(let b=0;b<=t;b++)for(let g=0;g<=i;g++)u.x=b/t,u.y=g/i,h.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new yM(new S_[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class BO extends rn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new le,s=new le;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,c=l.length;u<c;++u){const f=l[u],d=f.start,h=f.count;for(let m=d,v=d+h;m<v;m+=3)for(let y=0;y<3;y++){const p=a.getX(m+y),S=a.getX(m+(y+1)%3);i.fromBufferAttribute(o,p),s.fromBufferAttribute(o,S),u9(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const c=3*a+u,f=3*a+(u+1)%3;i.fromBufferAttribute(o,c),s.fromBufferAttribute(o,f),u9(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ct(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function u9(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var c9=Object.freeze({__proto__:null,BoxGeometry:Jd,CapsuleGeometry:oM,CircleGeometry:aM,ConeGeometry:lM,CylinderGeometry:Qm,DodecahedronGeometry:uM,EdgesGeometry:FO,ExtrudeGeometry:fM,IcosahedronGeometry:dM,LatheGeometry:zy,OctahedronGeometry:Uy,PlaneGeometry:Zm,PolyhedronGeometry:yf,RingGeometry:hM,ShapeGeometry:pM,SphereGeometry:$y,TetrahedronGeometry:mM,TorusGeometry:gM,TorusKnotGeometry:vM,TubeGeometry:yM,WireframeGeometry:BO});class zZ extends $i{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new mt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class UZ extends Do{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class zO extends $i{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new mt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new mt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gf,this.normalScale=new et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class $Z extends zO{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new et(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Rr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new mt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new mt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new mt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class VZ extends $i{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new mt(16777215),this.specular=new mt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new mt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gf,this.normalScale=new et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Oy,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class HZ extends $i{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new mt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new mt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gf,this.normalScale=new et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class WZ extends $i{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gf,this.normalScale=new et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class jZ extends $i{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new mt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new mt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gf,this.normalScale=new et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Oy,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class GZ extends $i{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new mt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gf,this.normalScale=new et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class qZ extends Ls{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function ud(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function XZ(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function YZ(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function YD(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i}function UO(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}function n6e(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],c=u.getValueSize(),f=[],d=[];for(let h=0;h<u.times.length;++h){const m=u.times[h]*i;if(!(m<t||m>=r)){f.push(u.times[h]);for(let v=0;v<c;++v)d.push(u.values[h*c+v])}}f.length!==0&&(u.times=ud(f,u.times.constructor),u.values=ud(d,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function r6e(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(p){return p.name===a.name&&p.ValueTypeName===l});if(u===void 0)continue;let c=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=f/3);let d=0;const h=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=h/3);const m=a.times.length-1;let v;if(s<=a.times[0]){const p=c,S=f-c;v=a.values.slice(p,S)}else if(s>=a.times[m]){const p=m*f+c,S=p+f-c;v=a.values.slice(p,S)}else{const p=a.createInterpolant(),S=c,b=f-c;p.evaluate(s),v=p.resultBuffer.slice(S,b)}l==="quaternion"&&new Kr().fromArray(v).normalize().conjugate().toArray(v);const y=u.times.length;for(let p=0;p<y;++p){const S=p*h+d;if(l==="quaternion")Kr.multiplyQuaternionsFlat(u.values,S,v,0,u.values,S);else{const b=h-d*2;for(let g=0;g<b;++g)u.values[S+g]-=v[g]}}}return n.blendMode=gO,n}const i6e={convertArray:ud,isTypedArray:XZ,getKeyframeOrder:YZ,sortedArray:YD,flattenJSON:UO,subclip:n6e,makeClipAdditive:r6e};class Vy{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class KZ extends Vy{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:od,endingEnd:od}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case ad:s=e,a=2*t-r;break;case O0:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case ad:o=e,l=2*r-t;break;case O0:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const u=(r-t)*.5,c=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-r),this._offsetPrev=s*c,this._offsetNext=o*c}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=this._offsetPrev,f=this._offsetNext,d=this._weightPrev,h=this._weightNext,m=(r-t)/(i-t),v=m*m,y=v*m,p=-d*y+2*d*v-d*m,S=(1+d)*y+(-1.5-2*d)*v+(-.5+d)*m+1,b=(-1-h)*y+(1.5+h)*v+.5*m,g=h*y-h*v;for(let w=0;w!==a;++w)s[w]=p*o[c+w]+S*o[u+w]+b*o[l+w]+g*o[f+w];return s}}class $O extends Vy{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=(r-t)/(i-t),f=1-c;for(let d=0;d!==a;++d)s[d]=o[u+d]*f+o[l+d]*c;return s}}class ZZ extends Vy{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Wa{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=ud(t,this.TimeBufferType),this.values=ud(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:ud(e.times,Array),values:ud(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new ZZ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new $O(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new KZ(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case P0:t=this.InterpolantFactoryMethodDiscrete;break;case R0:t=this.InterpolantFactoryMethodLinear;break;case Uw:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return P0;case this.InterpolantFactoryMethodLinear:return R0;case this.InterpolantFactoryMethodSmooth:return Uw}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=r.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&XZ(i))for(let a=0,l=i.length;a!==l;++a){const u=i[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===Uw,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],c=e[a+1];if(u!==c&&(a!==1||u!==e[0]))if(i)l=!0;else{const f=a*r,d=f-r,h=f+r;for(let m=0;m!==r;++m){const v=t[f+m];if(v!==t[d+m]||v!==t[h+m]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*r,d=o*r;for(let h=0;h!==r;++h)t[d+h]=t[f+h]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,u=0;u!==r;++u)t[l+u]=t[a+u];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Wa.prototype.TimeBufferType=Float32Array;Wa.prototype.ValueBufferType=Float32Array;Wa.prototype.DefaultInterpolation=R0;class Qd extends Wa{}Qd.prototype.ValueTypeName="bool";Qd.prototype.ValueBufferType=Array;Qd.prototype.DefaultInterpolation=P0;Qd.prototype.InterpolantFactoryMethodLinear=void 0;Qd.prototype.InterpolantFactoryMethodSmooth=void 0;class VO extends Wa{}VO.prototype.ValueTypeName="color";class G0 extends Wa{}G0.prototype.ValueTypeName="number";class JZ extends Vy{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let u=e*a;for(let c=u+a;u!==c;u+=4)Kr.slerpFlat(s,0,o,u-a,o,u,l);return s}}class eg extends Wa{InterpolantFactoryMethodLinear(e){return new JZ(this.times,this.values,this.getValueSize(),e)}}eg.prototype.ValueTypeName="quaternion";eg.prototype.DefaultInterpolation=R0;eg.prototype.InterpolantFactoryMethodSmooth=void 0;class eh extends Wa{}eh.prototype.ValueTypeName="string";eh.prototype.ValueBufferType=Array;eh.prototype.DefaultInterpolation=P0;eh.prototype.InterpolantFactoryMethodLinear=void 0;eh.prototype.InterpolantFactoryMethodSmooth=void 0;class q0 extends Wa{}q0.prototype.ValueTypeName="vector";class X0{constructor(e,t=-1,r,i=XE){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Co(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(o6e(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(Wa.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const c=YZ(l);l=YD(l,1,c),u=YD(u,1,c),!i&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new G0(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],c=u.name.match(s);if(c&&c.length>1){const f=c[1];let d=i[f];d||(i[f]=d=[]),d.push(u)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(f,d,h,m,v){if(h.length!==0){const y=[],p=[];UO(h,y,p,m),y.length!==0&&v.push(new f(d,y,p))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let f=0;f<u.length;f++){const d=u[f].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const h={};let m;for(m=0;m<d.length;m++)if(d[m].morphTargets)for(let v=0;v<d[m].morphTargets.length;v++)h[d[m].morphTargets[v]]=-1;for(const v in h){const y=[],p=[];for(let S=0;S!==d[m].morphTargets.length;++S){const b=d[m];y.push(b.time),p.push(b.morphTarget===v?1:0)}i.push(new G0(".morphTargetInfluence["+v+"]",y,p))}l=h.length*o}else{const h=".bones["+t[f].name+"]";r(q0,h+".position",d,"pos",i),r(eg,h+".quaternion",d,"rot",i),r(q0,h+".scale",d,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function s6e(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return G0;case"vector":case"vector2":case"vector3":case"vector4":return q0;case"color":return VO;case"quaternion":return eg;case"bool":case"boolean":return Qd;case"string":return eh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function o6e(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=s6e(n.type);if(n.times===void 0){const t=[],r=[];UO(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const mu={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class HO{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(c){a++,s===!1&&i.onStart!==void 0&&i.onStart(c,o,a),s=!0},this.itemEnd=function(c){o++,i.onProgress!==void 0&&i.onProgress(c,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,f){return u.push(c,f),this},this.removeHandler=function(c){const f=u.indexOf(c);return f!==-1&&u.splice(f,2),this},this.getHandler=function(c){for(let f=0,d=u.length;f<d;f+=2){const h=u[f],m=u[f+1];if(h.global&&(h.lastIndex=0),h.test(c))return m}return null}}}const QZ=new HO;class to{constructor(e){this.manager=e!==void 0?e:QZ,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}to.DEFAULT_MATERIAL_NAME="__DEFAULT";const iu={};class a6e extends Error{constructor(e,t){super(e),this.response=t}}class Ou extends to{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=mu.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(iu[e]!==void 0){iu[e].push({onLoad:t,onProgress:r,onError:i});return}iu[e]=[],iu[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const c=iu[e],f=u.body.getReader(),d=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),h=d?parseInt(d):0,m=h!==0;let v=0;const y=new ReadableStream({start(p){S();function S(){f.read().then(({done:b,value:g})=>{if(b)p.close();else{v+=g.byteLength;const w=new ProgressEvent("progress",{lengthComputable:m,loaded:v,total:h});for(let x=0,M=c.length;x<M;x++){const A=c[x];A.onProgress&&A.onProgress(w)}p.enqueue(g),S()}})}}});return new Response(y)}else throw new a6e(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(c=>new DOMParser().parseFromString(c,a));case"json":return u.json();default:if(a===void 0)return u.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),d=f&&f[1]?f[1].toLowerCase():void 0,h=new TextDecoder(d);return u.arrayBuffer().then(m=>h.decode(m))}}}).then(u=>{mu.add(e,u);const c=iu[e];delete iu[e];for(let f=0,d=c.length;f<d;f++){const h=c[f];h.onLoad&&h.onLoad(u)}}).catch(u=>{const c=iu[e];if(c===void 0)throw this.manager.itemError(e),u;delete iu[e];for(let f=0,d=c.length;f<d;f++){const h=c[f];h.onError&&h.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class l6e extends to{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Ou(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=X0.parse(e[r]);t.push(i)}return t}}class u6e extends to{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],a=new iM,l=new Ou(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function c(f){l.load(e[f],function(d){const h=s.parse(d,!0);o[f]={width:h.width,height:h.height,format:h.format,mipmaps:h.mipmaps},u+=1,u===6&&(h.mipmapCount===1&&(a.minFilter=lr),a.image=o,a.format=h.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let f=0,d=e.length;f<d;++f)c(f);else l.load(e,function(f){const d=s.parse(f,!0);if(d.isCubemap){const h=d.mipmaps.length/d.mipmapCount;for(let m=0;m<h;m++){o[m]={mipmaps:[]};for(let v=0;v<d.mipmapCount;v++)o[m].mipmaps.push(d.mipmaps[m*d.mipmapCount+v]),o[m].format=d.format,o[m].width=d.width,o[m].height=d.height}a.image=o}else a.image.width=d.width,a.image.height=d.height,a.mipmaps=d.mipmaps;d.mipmapCount===1&&(a.minFilter=lr),a.format=d.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}class Y0 extends to{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=mu.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=z0("img");function l(){c(),mu.add(e,this),t&&t(this),s.manager.itemEnd(e)}function u(f){c(),i&&i(f),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class c6e extends to{constructor(e){super(e)}load(e,t,r,i){const s=new Fy;s.colorSpace=ri;const o=new Y0(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(c){s.images[u]=c,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let u=0;u<e.length;++u)l(u);return s}}class f6e extends to{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new wd,a=new Ou(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let u;try{u=s.parse(l)}catch(c){if(i!==void 0)i(c);else{console.error(c);return}}u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:rs,o.wrapT=u.wrapT!==void 0?u.wrapT:rs,o.magFilter=u.magFilter!==void 0?u.magFilter:lr,o.minFilter=u.minFilter!==void 0?u.minFilter:lr,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0?o.colorSpace=u.colorSpace:u.encoding!==void 0&&(o.encoding=u.encoding),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=xl),u.mipmapCount===1&&(o.minFilter=lr),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,t&&t(o,u)},r,i),o}}class d6e extends to{constructor(e){super(e)}load(e,t,r,i){const s=new Er,o=new Y0(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class xf extends Mn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new mt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class eJ extends xf{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Mn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new mt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const bA=new wt,f9=new le,d9=new le;class WO{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new et(512,512),this.map=null,this.mapPass=null,this.matrix=new wt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new By,this._frameExtents=new et(1,1),this._viewportCount=1,this._viewports=[new En(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;f9.setFromMatrixPosition(e.matrixWorld),t.position.copy(f9),d9.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(d9),t.updateMatrixWorld(),bA.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(bA),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(bA)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class h6e extends WO{constructor(){super(new pr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=gm*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class tJ extends xf{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Mn.DEFAULT_UP),this.updateMatrix(),this.target=new Mn,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new h6e}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const h9=new wt,Xg=new le,wA=new le;class p6e extends WO{constructor(){super(new pr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new et(4,2),this._viewportCount=6,this._viewports=[new En(2,1,1,1),new En(0,1,1,1),new En(3,1,1,1),new En(1,1,1,1),new En(3,0,1,1),new En(1,0,1,1)],this._cubeDirections=[new le(1,0,0),new le(-1,0,0),new le(0,0,1),new le(0,0,-1),new le(0,1,0),new le(0,-1,0)],this._cubeUps=[new le(0,1,0),new le(0,1,0),new le(0,1,0),new le(0,1,0),new le(0,0,1),new le(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),Xg.setFromMatrixPosition(e.matrixWorld),r.position.copy(Xg),wA.copy(r.position),wA.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(wA),r.updateMatrixWorld(),i.makeTranslation(-Xg.x,-Xg.y,-Xg.z),h9.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(h9)}}class nJ extends xf{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new p6e}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class m6e extends WO{constructor(){super(new Ta(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class rJ extends xf{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Mn.DEFAULT_UP),this.updateMatrix(),this.target=new Mn,this.shadow=new m6e}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class iJ extends xf{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class sJ extends xf{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class oJ{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new le)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class aJ extends xf{constructor(e=new oJ,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class xM extends to{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,o=new Ou(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=xM.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new mt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new mt().setHex(o.value);break;case"v2":i.uniforms[s].value=new et().fromArray(o.value);break;case"v3":i.uniforms[s].value=new le().fromArray(o.value);break;case"v4":i.uniforms[s].value=new En().fromArray(o.value);break;case"m3":i.uniforms[s].value=new pn().fromArray(o.value);break;case"m4":i.uniforms[s].value=new wt().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new et().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new et().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:zZ,SpriteMaterial:TO,RawShaderMaterial:UZ,ShaderMaterial:Do,PointsMaterial:NO,MeshPhysicalMaterial:$Z,MeshStandardMaterial:zO,MeshPhongMaterial:VZ,MeshToonMaterial:HZ,MeshNormalMaterial:WZ,MeshLambertMaterial:jZ,MeshDepthMaterial:MO,MeshDistanceMaterial:CO,MeshBasicMaterial:vf,MeshMatcapMaterial:GZ,LineDashedMaterial:qZ,LineBasicMaterial:Ls,Material:$i};return new t[e]}}class KD{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class jO extends rn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class lJ extends to{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Ou(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(h,m){if(t[m]!==void 0)return t[m];const y=h.interleavedBuffers[m],p=s(h,y.buffer),S=Mp(y.type,p),b=new nM(S,y.stride);return b.uuid=y.uuid,t[m]=b,b}function s(h,m){if(r[m]!==void 0)return r[m];const y=h.arrayBuffers[m],p=new Uint32Array(y).buffer;return r[m]=p,p}const o=e.isInstancedBufferGeometry?new jO:new rn,a=e.data.index;if(a!==void 0){const h=Mp(a.type,a.array);o.setIndex(new Fn(h,1))}const l=e.data.attributes;for(const h in l){const m=l[h];let v;if(m.isInterleavedBufferAttribute){const y=i(e.data,m.data);v=new wo(y,m.itemSize,m.offset,m.normalized)}else{const y=Mp(m.type,m.array),p=m.isInstancedBufferAttribute?ym:Fn;v=new p(y,m.itemSize,m.normalized)}m.name!==void 0&&(v.name=m.name),m.usage!==void 0&&v.setUsage(m.usage),o.setAttribute(h,v)}const u=e.data.morphAttributes;if(u)for(const h in u){const m=u[h],v=[];for(let y=0,p=m.length;y<p;y++){const S=m[y];let b;if(S.isInterleavedBufferAttribute){const g=i(e.data,S.data);b=new wo(g,S.itemSize,S.offset,S.normalized)}else{const g=Mp(S.type,S.array);b=new Fn(g,S.itemSize,S.normalized)}S.name!==void 0&&(b.name=S.name),v.push(b)}o.morphAttributes[h]=v}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let h=0,m=f.length;h!==m;++h){const v=f[h];o.addGroup(v.start,v.count,v.materialIndex)}const d=e.data.boundingSphere;if(d!==void 0){const h=new le;d.center!==void 0&&h.fromArray(d.center),o.boundingSphere=new bi(h,d.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class g6e extends to{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?KD.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Ou(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(f){i!==void 0&&i(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const c=u.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?KD.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new Ou(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,r),c=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,c),t!==void 0){let f=!1;for(const d in o)if(o[d].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new Sd().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new rM().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new lJ;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in c9?a=c9[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new xM;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=X0.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return o(c)}else return l.data?{data:Mp(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new HO(t);s=new Y0(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,c=e.length;u<c;u++){const f=e[u],d=f.url;if(Array.isArray(d)){const h=[];for(let m=0,v=d.length;m<v;m++){const y=d[m],p=a(y);p!==null&&(p instanceof HTMLImageElement?h.push(p):h.push(new wd(p.data,p.width,p.height)))}i[f.uuid]=new ld(h)}else{const h=a(f.url);i[f.uuid]=new ld(h)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:Mp(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new Y0(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const c=[];for(let f=0,d=u.length;f<d;f++){const h=u[f],m=await s(h);m!==null&&(m instanceof HTMLImageElement?c.push(m):c.push(new wd(m.data,m.width,m.height)))}r[l.uuid]=new ld(c)}else{const c=await s(l.url);r[l.uuid]=new ld(c)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],u=l.data;let c;Array.isArray(u)?(c=new Fy,u.length===6&&(c.needsUpdate=!0)):(u&&u.data?c=new wd:c=new Er,u&&(c.needsUpdate=!0)),c.source=l,c.uuid=a.uuid,a.name!==void 0&&(c.name=a.name),a.mapping!==void 0&&(c.mapping=r(a.mapping,v6e)),a.channel!==void 0&&(c.channel=a.channel),a.offset!==void 0&&c.offset.fromArray(a.offset),a.repeat!==void 0&&c.repeat.fromArray(a.repeat),a.center!==void 0&&c.center.fromArray(a.center),a.rotation!==void 0&&(c.rotation=a.rotation),a.wrap!==void 0&&(c.wrapS=r(a.wrap[0],p9),c.wrapT=r(a.wrap[1],p9)),a.format!==void 0&&(c.format=a.format),a.internalFormat!==void 0&&(c.internalFormat=a.internalFormat),a.type!==void 0&&(c.type=a.type),a.colorSpace!==void 0&&(c.colorSpace=a.colorSpace),a.encoding!==void 0&&(c.encoding=a.encoding),a.minFilter!==void 0&&(c.minFilter=r(a.minFilter,m9)),a.magFilter!==void 0&&(c.magFilter=r(a.magFilter,m9)),a.anisotropy!==void 0&&(c.anisotropy=a.anisotropy),a.flipY!==void 0&&(c.flipY=a.flipY),a.generateMipmaps!==void 0&&(c.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(c.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(c.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(c.compareFunction=a.compareFunction),a.userData!==void 0&&(c.userData=a.userData),i[a.uuid]=c}return i}parseObject(e,t,r,i,s){let o;function a(d){return t[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",d),t[d]}function l(d){if(d!==void 0){if(Array.isArray(d)){const h=[];for(let m=0,v=d.length;m<v;m++){const y=d[m];r[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),h.push(r[y])}return h}return r[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),r[d]}}function u(d){return i[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",d),i[d]}let c,f;switch(e.type){case"Scene":o=new $0,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new mt(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new tM(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new eM(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new pr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Ta(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new iJ(e.color,e.intensity);break;case"DirectionalLight":o=new rJ(e.color,e.intensity);break;case"PointLight":o=new nJ(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new sJ(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new tJ(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new eJ(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new aJ().fromJSON(e);break;case"SkinnedMesh":c=a(e.geometry),f=l(e.material),o=new MZ(c,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":c=a(e.geometry),f=l(e.material),o=new Vr(c,f);break;case"InstancedMesh":c=a(e.geometry),f=l(e.material);const d=e.count,h=e.instanceMatrix,m=e.instanceColor;o=new CZ(c,f,d),o.instanceMatrix=new ym(new Float32Array(h.array),16),m!==void 0&&(o.instanceColor=new ym(new Float32Array(m.array),m.itemSize));break;case"BatchedMesh":c=a(e.geometry),f=l(e.material),o=new AZ(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,f),o.geometry=c,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(v=>{const y=new Zr;y.min.fromArray(v.boxMin),y.max.fromArray(v.boxMax);const p=new bi;return p.radius=v.sphereRadius,p.center.fromArray(v.sphereCenter),{boxInitialized:v.boxInitialized,box:y,sphereInitialized:v.sphereInitialized,sphere:p}}),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=u(e.matricesTexture.uuid);break;case"LOD":o=new EZ;break;case"Line":o=new tf(a(e.geometry),l(e.material));break;case"LineLoop":o=new TZ(a(e.geometry),l(e.material));break;case"LineSegments":o=new Ul(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new DZ(a(e.geometry),l(e.material));break;case"Sprite":o=new _Z(l(e.material));break;case"Group":o=new Tp;break;case"Bone":o=new DO;break;default:o=new Mn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const d=e.children;for(let h=0;h<d.length;h++)o.add(this.parseObject(d[h],t,r,i,s))}if(e.animations!==void 0){const d=e.animations;for(let h=0;h<d.length;h++){const m=d[h];o.animations.push(s[m])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const d=e.levels;for(let h=0;h<d.length;h++){const m=d[h],v=o.getObjectByProperty("uuid",m.object);v!==void 0&&o.addLevel(v,m.distance,m.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const v6e={UVMapping:GE,CubeReflectionMapping:Ru,CubeRefractionMapping:ef,EquirectangularReflectionMapping:A0,EquirectangularRefractionMapping:T0,CubeUVReflectionMapping:Km},p9={RepeatWrapping:D0,ClampToEdgeWrapping:rs,MirroredRepeatWrapping:N0},m9={NearestFilter:Ur,NearestMipmapNearestFilter:x_,NearestMipmapLinearFilter:Yf,LinearFilter:lr,LinearMipmapNearestFilter:Fv,LinearMipmapLinearFilter:xl};class y6e extends to{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=mu.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(u=>{t&&t(u),s.manager.itemEnd(e)}).catch(u=>{i&&i(u)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(u){return mu.add(e,u),t&&t(u),s.manager.itemEnd(e),u}).catch(function(u){i&&i(u),mu.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});mu.add(e,l),s.manager.itemStart(e)}}let Ab;class GO{static getContext(){return Ab===void 0&&(Ab=new(window.AudioContext||window.webkitAudioContext)),Ab}static setContext(e){Ab=e}}class x6e extends to{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Ou(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const u=l.slice(0);GO.getContext().decodeAudioData(u,function(f){t(f)}).catch(a)}catch(u){a(u)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}const g9=new wt,v9=new wt,If=new wt;class b6e{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new pr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new pr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,If.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(yd*t.fov*.5)/t.zoom;let a,l;v9.elements[12]=-i,g9.elements[12]=i,a=-o*t.aspect+s,l=o*t.aspect+s,If.elements[0]=2*t.near/(l-a),If.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(If),a=-o*t.aspect-s,l=o*t.aspect-s,If.elements[0]=2*t.near/(l-a),If.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(If)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(v9),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(g9)}}class qO{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=y9(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=y9();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function y9(){return(typeof performance>"u"?Date:performance).now()}const Lf=new le,x9=new Kr,w6e=new le,Ff=new le;class S6e extends Mn{constructor(){super(),this.type="AudioListener",this.context=GO.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new qO}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Lf,x9,w6e),Ff.set(0,0,-1).applyQuaternion(x9),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Lf.x,i),t.positionY.linearRampToValueAtTime(Lf.y,i),t.positionZ.linearRampToValueAtTime(Lf.z,i),t.forwardX.linearRampToValueAtTime(Ff.x,i),t.forwardY.linearRampToValueAtTime(Ff.y,i),t.forwardZ.linearRampToValueAtTime(Ff.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(Lf.x,Lf.y,Lf.z),t.setOrientation(Ff.x,Ff.y,Ff.z,r.x,r.y,r.z)}}class uJ extends Mn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Bf=new le,b9=new Kr,_6e=new le,zf=new le;class E6e extends uJ{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Bf,b9,_6e),zf.set(0,0,1).applyQuaternion(b9);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Bf.x,r),t.positionY.linearRampToValueAtTime(Bf.y,r),t.positionZ.linearRampToValueAtTime(Bf.z,r),t.orientationX.linearRampToValueAtTime(zf.x,r),t.orientationY.linearRampToValueAtTime(zf.y,r),t.orientationZ.linearRampToValueAtTime(zf.z,r)}else t.setPosition(Bf.x,Bf.y,Bf.z),t.setOrientation(zf.x,zf.y,zf.z)}}class M6e{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class cJ{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){Kr.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;Kr.multiplyQuaternionsFlat(e,o,e,t,e,r),Kr.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const XO="\\[\\]\\.:\\/",C6e=new RegExp("["+XO+"]","g"),YO="[^"+XO+"]",A6e="[^"+XO.replace("\\.","")+"]",T6e=/((?:WC+[\/:])*)/.source.replace("WC",YO),D6e=/(WCOD+)?/.source.replace("WCOD",A6e),N6e=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",YO),P6e=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",YO),R6e=new RegExp("^"+T6e+D6e+N6e+P6e+"$"),O6e=["material","materials","bones","map"];class k6e{constructor(e,t,r){const i=r||Cn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class Cn{constructor(e,t,r){this.path=t,this.parsedPath=r||Cn.parseTrackName(t),this.node=Cn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new Cn.Composite(e,t,r):new Cn(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(C6e,"")}static parseTrackName(e){const t=R6e.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);O6e.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=Cn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let u=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===u){u=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[i];if(o===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Cn.Composite=k6e;Cn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Cn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Cn.prototype.GetterByBindingType=[Cn.prototype._getValue_direct,Cn.prototype._getValue_array,Cn.prototype._getValue_arrayElement,Cn.prototype._getValue_toArray];Cn.prototype.SetterByBindingTypeAndVersioning=[[Cn.prototype._setValue_direct,Cn.prototype._setValue_direct_setNeedsUpdate,Cn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Cn.prototype._setValue_array,Cn.prototype._setValue_array_setNeedsUpdate,Cn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Cn.prototype._setValue_arrayElement,Cn.prototype._setValue_arrayElement_setNeedsUpdate,Cn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Cn.prototype._setValue_fromArray,Cn.prototype._setValue_fromArray_setNeedsUpdate,Cn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class I6e{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Co(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let c=0,f=arguments.length;c!==f;++c){const d=arguments[c],h=d.uuid;let m=t[h];if(m===void 0){m=l++,t[h]=m,e.push(d);for(let v=0,y=o;v!==y;++v)s[v].push(new Cn(d,r[v],i[v]))}else if(m<u){a=e[m];const v=--u,y=e[v];t[y.uuid]=m,e[m]=y,t[h]=v,e[v]=d;for(let p=0,S=o;p!==S;++p){const b=s[p],g=b[v];let w=b[m];b[m]=g,w===void 0&&(w=new Cn(d,r[p],i[p])),b[v]=w}}else e[m]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,c=t[u];if(c!==void 0&&c>=s){const f=s++,d=e[f];t[d.uuid]=c,e[c]=d,t[u]=f,e[f]=l;for(let h=0,m=i;h!==m;++h){const v=r[h],y=v[f],p=v[c];v[c]=y,v[f]=p}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],c=u.uuid,f=t[c];if(f!==void 0)if(delete t[c],f<s){const d=--s,h=e[d],m=--o,v=e[m];t[h.uuid]=f,e[f]=h,t[v.uuid]=d,e[d]=v,e.pop();for(let y=0,p=i;y!==p;++y){const S=r[y],b=S[d],g=S[m];S[f]=b,S[d]=g,S.pop()}}else{const d=--o,h=e[d];d>0&&(t[h.uuid]=f),e[f]=h,e.pop();for(let m=0,v=i;m!==v;++m){const y=r[m];y[f]=y[d],y.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,c=this.nCachedObjects_,f=new Array(u);i=s.length,r[e]=i,o.push(e),a.push(t),s.push(f);for(let d=c,h=l.length;d!==h;++d){const m=l[d];f[d]=new Cn(m,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];t[u]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class fJ{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:od,endingEnd:od};for(let u=0;u!==o;++u){const c=s[u].createInterpolant(null);a[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=XK,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+r,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case gO:for(let c=0,f=l.length;c!==f;++c)l[c].evaluate(o),u[c].accumulateAdditive(a);break;case XE:default:for(let c=0,f=l.length;c!==f;++c)l[c].evaluate(o),u[c].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===YK;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===qK){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=ad,i.endingEnd=ad):(e?i.endingStart=this.zeroSlopeAtStart?ad:od:i.endingStart=O0,t?i.endingEnd=this.zeroSlopeAtEnd?ad:od:i.endingEnd=O0)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}const L6e=new Float32Array(1);class F6e extends zl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,u=this._bindingsByRootAndName;let c=u[l];c===void 0&&(c={},u[l]=c);for(let f=0;f!==s;++f){const d=i[f],h=d.name;let m=c[h];if(m!==void 0)++m.referenceCount,o[f]=m;else{if(m=o[f],m!==void 0){m._cacheIndex===null&&(++m.referenceCount,this._addInactiveBinding(m,l,h));continue}const v=t&&t._propertyBindings[f].binding.parsedPath;m=new cJ(Cn.create(r,h,v),d.ValueTypeName,d.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,l,h),o[f]=m}a[f].resultBuffer=m.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,l[c]=u,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,d=(e._localRoot||this._root).uuid;delete f[d],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new $O(new Float32Array(2),new Float32Array(2),1,L6e),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?X0.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(r===void 0&&(o!==null?r=o.blendMode:r=XE),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===r)return f;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const c=new fJ(this,o,t,r);return this._bindAction(c,u),this._addInactiveAction(c,a,s),c}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?X0.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==r;++u)t[u]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const c=u._cacheIndex,f=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,f._cacheIndex=c,t[c]=f,t.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class KO{constructor(e){this.value=e}clone(){return new KO(this.value.clone===void 0?this.value:this.value.clone())}}let B6e=0;class z6e extends zl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:B6e++}),this.name="",this.usage=F0,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++){const s=Array.isArray(t[r])?t[r]:[t[r]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class __ extends nM{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class U6e{constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class ZO{constructor(e,t,r=0,i=1/0){this.ray=new Vu(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new bd,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return ZD(e,this,r,t),r.sort(w9),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)ZD(e[i],this,r,t);return r.sort(w9),r}}function w9(n,e){return n.distance-e.distance}function ZD(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let s=0,o=i.length;s<o;s++)ZD(i[s],e,t,!0)}}class JD{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Rr(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class $6e{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const S9=new et;class V6e{constructor(e=new et(1/0,1/0),t=new et(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=S9.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,S9).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const _9=new le,Tb=new le;class dJ{constructor(e=new le,t=new le){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){_9.subVectors(e,this.start),Tb.subVectors(this.end,this.start);const r=Tb.dot(Tb);let s=Tb.dot(_9)/r;return t&&(s=Rr(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const E9=new le;class H6e extends Mn{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new rn,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,c=a/l*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(c),Math.sin(c),1)}r.setAttribute("position",new Ct(i,3));const s=new Ls({fog:!1,toneMapped:!1});this.cone=new Ul(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),E9.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(E9),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const ac=new le,Db=new wt,SA=new wt;class W6e extends Ul{constructor(e){const t=hJ(e),r=new rn,i=[],s=[],o=new mt(0,0,1),a=new mt(0,1,0);for(let u=0;u<t.length;u++){const c=t[u];c.parent&&c.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new Ct(i,3)),r.setAttribute("color",new Ct(s,3));const l=new Ls({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");SA.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Db.multiplyMatrices(SA,a.matrixWorld),ac.setFromMatrixPosition(Db),i.setXYZ(o,ac.x,ac.y,ac.z),Db.multiplyMatrices(SA,a.parent.matrixWorld),ac.setFromMatrixPosition(Db),i.setXYZ(o+1,ac.x,ac.y,ac.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function hJ(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,hJ(n.children[t]));return e}class j6e extends Vr{constructor(e,t,r){const i=new $y(t,4,2),s=new vf({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const G6e=new le,M9=new mt,C9=new mt;class q6e extends Mn{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new Uy(t);i.rotateY(Math.PI*.5),this.material=new vf({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new Fn(o,3)),this.add(new Vr(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");M9.copy(this.light.color),C9.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?M9:C9;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(G6e.setFromMatrixPosition(this.light.matrixWorld).negate())}}class X6e extends Ul{constructor(e=10,t=10,r=4473924,i=8947848){r=new mt(r),i=new mt(i);const s=t/2,o=e/t,a=e/2,l=[],u=[];for(let d=0,h=0,m=-a;d<=t;d++,m+=o){l.push(-a,0,m,a,0,m),l.push(m,0,-a,m,0,a);const v=d===s?r:i;v.toArray(u,h),h+=3,v.toArray(u,h),h+=3,v.toArray(u,h),h+=3,v.toArray(u,h),h+=3}const c=new rn;c.setAttribute("position",new Ct(l,3)),c.setAttribute("color",new Ct(u,3));const f=new Ls({vertexColors:!0,toneMapped:!1});super(c,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Y6e extends Ul{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new mt(s),o=new mt(o);const a=[],l=[];if(t>1)for(let f=0;f<t;f++){const d=f/t*(Math.PI*2),h=Math.sin(d)*e,m=Math.cos(d)*e;a.push(0,0,0),a.push(h,0,m);const v=f&1?s:o;l.push(v.r,v.g,v.b),l.push(v.r,v.g,v.b)}for(let f=0;f<r;f++){const d=f&1?s:o,h=e-e/r*f;for(let m=0;m<i;m++){let v=m/i*(Math.PI*2),y=Math.sin(v)*h,p=Math.cos(v)*h;a.push(y,0,p),l.push(d.r,d.g,d.b),v=(m+1)/i*(Math.PI*2),y=Math.sin(v)*h,p=Math.cos(v)*h,a.push(y,0,p),l.push(d.r,d.g,d.b)}}const u=new rn;u.setAttribute("position",new Ct(a,3)),u.setAttribute("color",new Ct(l,3));const c=new Ls({vertexColors:!0,toneMapped:!1});super(u,c),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const A9=new le,Nb=new le,T9=new le;class K6e extends Mn{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new rn;i.setAttribute("position",new Ct([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Ls({fog:!1,toneMapped:!1});this.lightPlane=new tf(i,s),this.add(this.lightPlane),i=new rn,i.setAttribute("position",new Ct([0,0,0,0,0,1],3)),this.targetLine=new tf(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),A9.setFromMatrixPosition(this.light.matrixWorld),Nb.setFromMatrixPosition(this.light.target.matrixWorld),T9.subVectors(Nb,A9),this.lightPlane.lookAt(Nb),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Nb),this.targetLine.scale.z=T9.length()}}const Pb=new le,Nr=new Ly;class Z6e extends Ul{constructor(e){const t=new rn,r=new Ls({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(m,v){l(m),l(v)}function l(m){i.push(0,0,0),s.push(0,0,0),o[m]===void 0&&(o[m]=[]),o[m].push(i.length/3-1)}t.setAttribute("position",new Ct(i,3)),t.setAttribute("color",new Ct(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new mt(16755200),c=new mt(16711680),f=new mt(43775),d=new mt(16777215),h=new mt(3355443);this.setColors(u,c,f,d,h)}setColors(e,t,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;Nr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Fr("c",t,e,Nr,0,0,-1),Fr("t",t,e,Nr,0,0,1),Fr("n1",t,e,Nr,-r,-i,-1),Fr("n2",t,e,Nr,r,-i,-1),Fr("n3",t,e,Nr,-r,i,-1),Fr("n4",t,e,Nr,r,i,-1),Fr("f1",t,e,Nr,-r,-i,1),Fr("f2",t,e,Nr,r,-i,1),Fr("f3",t,e,Nr,-r,i,1),Fr("f4",t,e,Nr,r,i,1),Fr("u1",t,e,Nr,r*.7,i*1.1,-1),Fr("u2",t,e,Nr,-r*.7,i*1.1,-1),Fr("u3",t,e,Nr,0,i*2,-1),Fr("cf1",t,e,Nr,-r,0,1),Fr("cf2",t,e,Nr,r,0,1),Fr("cf3",t,e,Nr,0,-i,1),Fr("cf4",t,e,Nr,0,i,1),Fr("cn1",t,e,Nr,-r,0,-1),Fr("cn2",t,e,Nr,r,0,-1),Fr("cn3",t,e,Nr,0,-i,-1),Fr("cn4",t,e,Nr,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Fr(n,e,t,r,i,s,o){Pb.set(i,s,o).unproject(r);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let u=0,c=a.length;u<c;u++)l.setXYZ(a[u],Pb.x,Pb.y,Pb.z)}}const Rb=new Zr;class J6e extends Ul{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new rn;s.setIndex(new Fn(r,1)),s.setAttribute("position",new Fn(i,3)),super(s,new Ls({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Rb.setFromObject(this.object),Rb.isEmpty())return;const t=Rb.min,r=Rb.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=t.x,s[4]=r.y,s[5]=r.z,s[6]=t.x,s[7]=t.y,s[8]=r.z,s[9]=r.x,s[10]=t.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=t.z,s[15]=t.x,s[16]=r.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=r.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Q6e extends Ul{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new rn;s.setIndex(new Fn(r,1)),s.setAttribute("position",new Ct(i,3)),super(s,new Ls({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class e9e extends tf{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new rn;o.setAttribute("position",new Ct(s,3)),o.computeBoundingSphere(),super(o,new Ls({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new rn;l.setAttribute("position",new Ct(a,3)),l.computeBoundingSphere(),this.add(new Vr(l,new vf({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const D9=new le;let Ob,_A;class t9e extends Mn{constructor(e=new le(0,0,1),t=new le(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",Ob===void 0&&(Ob=new rn,Ob.setAttribute("position",new Ct([0,0,0,0,1,0],3)),_A=new Qm(0,.5,1,5,1),_A.translate(0,-.5,0)),this.position.copy(t),this.line=new tf(Ob,new Ls({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Vr(_A,new vf({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{D9.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(D9,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class n9e extends Ul{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new rn;i.setAttribute("position",new Ct(t,3)),i.setAttribute("color",new Ct(r,3));const s=new Ls({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new mt,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class r9e{constructor(){this.type="ShapePath",this.color=new mt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new V0,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(p){const S=[];for(let b=0,g=p.length;b<g;b++){const w=p[b],x=new Sd;x.curves=w.curves,S.push(x)}return S}function r(p,S){const b=S.length;let g=!1;for(let w=b-1,x=0;x<b;w=x++){let M=S[w],A=S[x],N=A.x-M.x,C=A.y-M.y;if(Math.abs(C)>Number.EPSILON){if(C<0&&(M=S[x],N=-N,A=S[w],C=-C),p.y<M.y||p.y>A.y)continue;if(p.y===M.y){if(p.x===M.x)return!0}else{const T=C*(p.x-M.x)-N*(p.y-M.y);if(T===0)return!0;if(T<0)continue;g=!g}}else{if(p.y!==M.y)continue;if(A.x<=p.x&&p.x<=M.x||M.x<=p.x&&p.x<=A.x)return!0}}return g}const i=Dl.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new Sd,l.curves=a.curves,u.push(l),u;let c=!i(s[0].getPoints());c=e?!c:c;const f=[],d=[];let h=[],m=0,v;d[m]=void 0,h[m]=[];for(let p=0,S=s.length;p<S;p++)a=s[p],v=a.getPoints(),o=i(v),o=e?!o:o,o?(!c&&d[m]&&m++,d[m]={s:new Sd,p:v},d[m].s.curves=a.curves,c&&m++,h[m]=[]):h[m].push({h:a,p:v[0]});if(!d[0])return t(s);if(d.length>1){let p=!1,S=0;for(let b=0,g=d.length;b<g;b++)f[b]=[];for(let b=0,g=d.length;b<g;b++){const w=h[b];for(let x=0;x<w.length;x++){const M=w[x];let A=!0;for(let N=0;N<d.length;N++)r(M.p,d[N].p)&&(b!==N&&S++,A?(A=!1,f[N].push(M)):p=!0);A&&f[b].push(M)}}S>0&&p===!1&&(h=f)}let y;for(let p=0,S=d.length;p<S;p++){l=d[p].s,u.push(l),y=h[p];for(let b=0,g=y.length;b<g;b++)l.holes.push(y[b].h)}return u}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ym}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ym);const i9e=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:lO,AddEquation:yc,AddOperation:RK,AdditiveAnimationBlendMode:gO,AdditiveBlending:cD,AgXToneMapping:FK,AlphaFormat:$K,AlwaysCompare:sZ,AlwaysDepth:MK,AlwaysStencilFunc:$D,AmbientLight:iJ,AnimationAction:fJ,AnimationClip:X0,AnimationLoader:l6e,AnimationMixer:F6e,AnimationObjectGroup:I6e,AnimationUtils:i6e,ArcCurve:PZ,ArrayCamera:bZ,ArrowHelper:t9e,AttachedBindMode:mD,Audio:uJ,AudioAnalyser:M6e,AudioContext:GO,AudioListener:S6e,AudioLoader:x6e,AxesHelper:n9e,BackSide:as,BasicDepthPacking:KK,BasicShadowMap:aK,BatchedMesh:AZ,Bone:DO,BooleanKeyframeTrack:Qd,Box2:V6e,Box3:Zr,Box3Helper:Q6e,BoxGeometry:Jd,BoxHelper:J6e,BufferAttribute:Fn,BufferGeometry:rn,BufferGeometryLoader:lJ,ByteType:zK,Cache:mu,Camera:Ly,CameraHelper:Z6e,CanvasTexture:NZ,CapsuleGeometry:oM,CatmullRomCurve3:RZ,CineonToneMapping:IK,CircleGeometry:aM,ClampToEdgeWrapping:rs,Clock:qO,Color:mt,ColorKeyframeTrack:VO,ColorManagement:$n,CompressedArrayTexture:AUe,CompressedCubeTexture:TUe,CompressedTexture:iM,CompressedTextureLoader:u6e,ConeGeometry:lM,ConstantAlphaFactor:SK,ConstantColorFactor:bK,CubeCamera:fZ,CubeReflectionMapping:Ru,CubeRefractionMapping:ef,CubeTexture:Fy,CubeTextureLoader:c6e,CubeUVReflectionMapping:Km,CubicBezierCurve:RO,CubicBezierCurve3:OZ,CubicInterpolant:KZ,CullFaceBack:uD,CullFaceFront:oK,CullFaceFrontBack:mFe,CullFaceNone:sK,Curve:Ha,CurvePath:IZ,CustomBlending:lK,CustomToneMapping:LK,CylinderGeometry:Qm,Cylindrical:$6e,Data3DTexture:wO,DataArrayTexture:ZE,DataTexture:wd,DataTextureLoader:f6e,DataUtils:_4e,DecrementStencilOp:CFe,DecrementWrapStencilOp:TFe,DefaultLoadingManager:QZ,DepthFormat:Uc,DepthStencilFormat:Id,DepthTexture:JE,DetachedBindMode:BK,DirectionalLight:rJ,DirectionalLightHelper:K6e,DiscreteInterpolant:ZZ,DisplayP3ColorSpace:YE,DodecahedronGeometry:uM,DoubleSide:ns,DstAlphaFactor:mK,DstColorFactor:vK,DynamicCopyUsage:HFe,DynamicDrawUsage:FFe,DynamicReadUsage:UFe,EdgesGeometry:FO,EllipseCurve:sM,EqualCompare:tZ,EqualDepth:AK,EqualStencilFunc:RFe,EquirectangularReflectionMapping:A0,EquirectangularRefractionMapping:T0,Euler:Iy,EventDispatcher:zl,ExtrudeGeometry:fM,FileLoader:Ou,Float16BufferAttribute:D4e,Float32BufferAttribute:Ct,Float64BufferAttribute:N4e,FloatType:vo,Fog:tM,FogExp2:eM,FramebufferTexture:CUe,FrontSide:Pu,Frustum:By,GLBufferAttribute:U6e,GLSL1:jFe,GLSL3:VD,GreaterCompare:nZ,GreaterDepth:DK,GreaterEqualCompare:iZ,GreaterEqualDepth:TK,GreaterEqualStencilFunc:LFe,GreaterStencilFunc:kFe,GridHelper:X6e,Group:Tp,HalfFloatType:kd,HemisphereLight:eJ,HemisphereLightHelper:q6e,IcosahedronGeometry:dM,ImageBitmapLoader:y6e,ImageLoader:Y0,ImageUtils:bO,IncrementStencilOp:MFe,IncrementWrapStencilOp:AFe,InstancedBufferAttribute:ym,InstancedBufferGeometry:jO,InstancedInterleavedBuffer:__,InstancedMesh:CZ,Int16BufferAttribute:A4e,Int32BufferAttribute:T4e,Int8BufferAttribute:E4e,IntType:uO,InterleavedBuffer:nM,InterleavedBufferAttribute:wo,Interpolant:Vy,InterpolateDiscrete:P0,InterpolateLinear:R0,InterpolateSmooth:Uw,InvertStencilOp:DFe,KeepStencilOp:Gf,KeyframeTrack:Wa,LOD:EZ,LatheGeometry:zy,Layers:bd,LessCompare:eZ,LessDepth:CK,LessEqualCompare:yO,LessEqualDepth:C0,LessEqualStencilFunc:OFe,LessStencilFunc:PFe,Light:xf,LightProbe:aJ,Line:tf,Line3:dJ,LineBasicMaterial:Ls,LineCurve:OO,LineCurve3:kZ,LineDashedMaterial:qZ,LineLoop:TZ,LineSegments:Ul,LinearDisplayP3ColorSpace:ky,LinearEncoding:vO,LinearFilter:lr,LinearInterpolant:$O,LinearMipMapLinearFilter:xFe,LinearMipMapNearestFilter:yFe,LinearMipmapLinearFilter:xl,LinearMipmapNearestFilter:Fv,LinearSRGBColorSpace:Ll,LinearToneMapping:OK,LinearTransfer:k0,Loader:to,LoaderUtils:KD,LoadingManager:HO,LoopOnce:qK,LoopPingPong:YK,LoopRepeat:XK,LuminanceAlphaFormat:HK,LuminanceFormat:VK,MOUSE:Wf,Material:$i,MaterialLoader:xM,MathUtils:KE,Matrix3:pn,Matrix4:wt,MaxEquation:pD,Mesh:Vr,MeshBasicMaterial:vf,MeshDepthMaterial:MO,MeshDistanceMaterial:CO,MeshLambertMaterial:jZ,MeshMatcapMaterial:GZ,MeshNormalMaterial:WZ,MeshPhongMaterial:VZ,MeshPhysicalMaterial:$Z,MeshStandardMaterial:zO,MeshToonMaterial:HZ,MinEquation:hD,MirroredRepeatWrapping:N0,MixOperation:PK,MultiplyBlending:dD,MultiplyOperation:Oy,NearestFilter:Ur,NearestMipMapLinearFilter:vFe,NearestMipMapNearestFilter:gFe,NearestMipmapLinearFilter:Yf,NearestMipmapNearestFilter:x_,NeverCompare:QK,NeverDepth:EK,NeverStencilFunc:NFe,NoBlending:bu,NoColorSpace:yo,NoToneMapping:Al,NormalAnimationBlendMode:XE,NormalBlending:vd,NotEqualCompare:rZ,NotEqualDepth:NK,NotEqualStencilFunc:IFe,NumberKeyframeTrack:G0,Object3D:Mn,ObjectLoader:g6e,ObjectSpaceNormalMap:JK,OctahedronGeometry:Uy,OneFactor:dK,OneMinusConstantAlphaFactor:_K,OneMinusConstantColorFactor:wK,OneMinusDstAlphaFactor:gK,OneMinusDstColorFactor:yK,OneMinusSrcAlphaFactor:y_,OneMinusSrcColorFactor:pK,OrthographicCamera:Ta,P3Primaries:L0,PCFShadowMap:jE,PCFSoftShadowMap:Lv,PMREMGenerator:WD,Path:V0,PerspectiveCamera:pr,Plane:Yo,PlaneGeometry:Zm,PlaneHelper:e9e,PointLight:nJ,PointLightHelper:j6e,Points:DZ,PointsMaterial:NO,PolarGridHelper:Y6e,PolyhedronGeometry:yf,PositionalAudio:E6e,PropertyBinding:Cn,PropertyMixer:cJ,QuadraticBezierCurve:kO,QuadraticBezierCurve3:IO,Quaternion:Kr,QuaternionKeyframeTrack:eg,QuaternionLinearInterpolant:JZ,RED_GREEN_RGTC2_Format:zD,RED_RGTC1_Format:GK,REVISION:Ym,RGBADepthPacking:ZK,RGBAFormat:Ss,RGBAIntegerFormat:pO,RGBA_ASTC_10x10_Format:OD,RGBA_ASTC_10x5_Format:ND,RGBA_ASTC_10x6_Format:PD,RGBA_ASTC_10x8_Format:RD,RGBA_ASTC_12x10_Format:kD,RGBA_ASTC_12x12_Format:ID,RGBA_ASTC_4x4_Format:SD,RGBA_ASTC_5x4_Format:_D,RGBA_ASTC_5x5_Format:ED,RGBA_ASTC_6x5_Format:MD,RGBA_ASTC_6x6_Format:CD,RGBA_ASTC_8x5_Format:AD,RGBA_ASTC_8x6_Format:TD,RGBA_ASTC_8x8_Format:DD,RGBA_BPTC_Format:zw,RGBA_ETC2_EAC_Format:wD,RGBA_PVRTC_2BPPV1_Format:xD,RGBA_PVRTC_4BPPV1_Format:yD,RGBA_S3TC_DXT1_Format:Lw,RGBA_S3TC_DXT3_Format:Fw,RGBA_S3TC_DXT5_Format:Bw,RGB_BPTC_SIGNED_Format:LD,RGB_BPTC_UNSIGNED_Format:FD,RGB_ETC1_Format:mO,RGB_ETC2_Format:bD,RGB_PVRTC_2BPPV1_Format:vD,RGB_PVRTC_4BPPV1_Format:gD,RGB_S3TC_DXT1_Format:Iw,RGFormat:jK,RGIntegerFormat:hO,RawShaderMaterial:UZ,Ray:Vu,Raycaster:ZO,Rec709Primaries:I0,RectAreaLight:sJ,RedFormat:WK,RedIntegerFormat:dO,ReinhardToneMapping:kK,RenderTarget:lZ,RepeatWrapping:D0,ReplaceStencilOp:EFe,ReverseSubtractEquation:cK,RingGeometry:hM,SIGNED_RED_GREEN_RGTC2_Format:UD,SIGNED_RED_RGTC1_Format:BD,SRGBColorSpace:ri,SRGBTransfer:nr,Scene:$0,ShaderChunk:fn,ShaderLib:Ca,ShaderMaterial:Do,ShadowMaterial:zZ,Shape:Sd,ShapeGeometry:pM,ShapePath:r9e,ShapeUtils:Dl,ShortType:UK,Skeleton:rM,SkeletonHelper:W6e,SkinnedMesh:MZ,Source:ld,Sphere:bi,SphereGeometry:$y,Spherical:JD,SphericalHarmonics3:oJ,SplineCurve:LO,SpotLight:tJ,SpotLightHelper:H6e,Sprite:_Z,SpriteMaterial:TO,SrcAlphaFactor:v_,SrcAlphaSaturateFactor:xK,SrcColorFactor:hK,StaticCopyUsage:VFe,StaticDrawUsage:F0,StaticReadUsage:zFe,StereoCamera:b6e,StreamCopyUsage:WFe,StreamDrawUsage:BFe,StreamReadUsage:$Fe,StringKeyframeTrack:eh,SubtractEquation:uK,SubtractiveBlending:fD,TOUCH:jf,TangentSpaceNormalMap:gf,TetrahedronGeometry:mM,Texture:Er,TextureLoader:d6e,TorusGeometry:gM,TorusKnotGeometry:vM,Triangle:xo,TriangleFanDrawMode:SFe,TriangleStripDrawMode:wFe,TrianglesDrawMode:bFe,TubeGeometry:yM,UVMapping:GE,Uint16BufferAttribute:SO,Uint32BufferAttribute:_O,Uint8BufferAttribute:M4e,Uint8ClampedBufferAttribute:C4e,Uniform:KO,UniformsGroup:z6e,UniformsLib:dt,UniformsUtils:U0,UnsignedByteType:Tl,UnsignedInt248Type:zc,UnsignedIntType:pu,UnsignedShort4444Type:cO,UnsignedShort5551Type:fO,UnsignedShortType:qE,VSMShadowMap:Sa,Vector2:et,Vector3:le,Vector4:En,VectorKeyframeTrack:q0,VideoTexture:MUe,WebGL1Renderer:wZ,WebGL3DRenderTarget:f4e,WebGLArrayRenderTarget:c4e,WebGLCoordinateSystem:bl,WebGLCubeRenderTarget:dZ,WebGLMultipleRenderTargets:d4e,WebGLRenderTarget:la,WebGLRenderer:AO,WebGLUtils:xZ,WebGPUCoordinateSystem:B0,WireframeGeometry:BO,WrapAroundEnding:O0,ZeroCurvatureEnding:od,ZeroFactor:fK,ZeroSlopeEnding:ad,ZeroStencilOp:_Fe,_SRGBAFormat:b_,createCanvasElement:aZ,sRGBEncoding:$c},Symbol.toStringTag,{value:"Module"}));var pJ={exports:{}},th={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */th.ConcurrentRoot=1;th.ContinuousEventPriority=4;th.DefaultEventPriority=16;th.DiscreteEventPriority=1;th.IdleEventPriority=536870912;th.LegacyRoot=0;pJ.exports=th;var Np=pJ.exports,mJ={exports:{}},gJ={exports:{}},vJ={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(U,L){var q=U.length;U.push(L);e:for(;0<q;){var Z=q-1>>>1,J=U[Z];if(0<i(J,L))U[Z]=L,U[q]=J,q=Z;else break e}}function t(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var L=U[0],q=U.pop();if(q!==L){U[0]=q;e:for(var Z=0,J=U.length,Y=J>>>1;Z<Y;){var ee=2*(Z+1)-1,ae=U[ee],ce=ee+1,pe=U[ce];if(0>i(ae,q))ce<J&&0>i(pe,ae)?(U[Z]=pe,U[ce]=q,Z=ce):(U[Z]=ae,U[ee]=q,Z=ee);else if(ce<J&&0>i(pe,q))U[Z]=pe,U[ce]=q,Z=ce;else break e}}return L}function i(U,L){var q=U.sortIndex-L.sortIndex;return q!==0?q:U.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,f=null,d=3,h=!1,m=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(U){for(var L=t(u);L!==null;){if(L.callback===null)r(u);else if(L.startTime<=U)r(u),L.sortIndex=L.expirationTime,e(l,L);else break;L=t(u)}}function g(U){if(v=!1,b(U),!m)if(t(l)!==null)m=!0,D(w);else{var L=t(u);L!==null&&I(g,L.startTime-U)}}function w(U,L){m=!1,v&&(v=!1,p(A),A=-1),h=!0;var q=d;try{for(b(L),f=t(l);f!==null&&(!(f.expirationTime>L)||U&&!T());){var Z=f.callback;if(typeof Z=="function"){f.callback=null,d=f.priorityLevel;var J=Z(f.expirationTime<=L);L=n.unstable_now(),typeof J=="function"?f.callback=J:f===t(l)&&r(l),b(L)}else r(l);f=t(l)}if(f!==null)var Y=!0;else{var ee=t(u);ee!==null&&I(g,ee.startTime-L),Y=!1}return Y}finally{f=null,d=q,h=!1}}var x=!1,M=null,A=-1,N=5,C=-1;function T(){return!(n.unstable_now()-C<N)}function R(){if(M!==null){var U=n.unstable_now();C=U;var L=!0;try{L=M(!0,U)}finally{L?$():(x=!1,M=null)}}else x=!1}var $;if(typeof S=="function")$=function(){S(R)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,z=B.port2;B.port1.onmessage=R,$=function(){z.postMessage(null)}}else $=function(){y(R,0)};function D(U){M=U,x||(x=!0,$())}function I(U,L){A=y(function(){U(n.unstable_now())},L)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_continueExecution=function(){m||h||(m=!0,D(w))},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(U){switch(d){case 1:case 2:case 3:var L=3;break;default:L=d}var q=d;d=L;try{return U()}finally{d=q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(U,L){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var q=d;d=U;try{return L()}finally{d=q}},n.unstable_scheduleCallback=function(U,L,q){var Z=n.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?Z+q:Z):q=Z,U){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=q+J,U={id:c++,callback:L,priorityLevel:U,startTime:q,expirationTime:J,sortIndex:-1},q>Z?(U.sortIndex=q,e(u,U),t(l)===null&&U===t(u)&&(v?(p(A),A=-1):v=!0,I(g,q-Z))):(U.sortIndex=J,e(l,U),m||h||(m=!0,D(w))),U},n.unstable_shouldYield=T,n.unstable_wrapCallback=function(U){var L=d;return function(){var q=d;d=L;try{return U.apply(this,arguments)}finally{d=q}}}})(vJ);gJ.exports=vJ;var QD=gJ.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s9e=function(e){var t={},r=k,i=QD,s=Object.assign;function o(_){for(var E="https://reactjs.org/docs/error-decoder.html?invariant="+_,P=1;P<arguments.length;P++)E+="&args[]="+encodeURIComponent(arguments[P]);return"Minified React error #"+_+"; visit "+E+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),m=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen"),w=Symbol.iterator;function x(_){return _===null||typeof _!="object"?null:(_=w&&_[w]||_["@@iterator"],typeof _=="function"?_:null)}function M(_){if(_==null)return null;if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _;switch(_){case c:return"Fragment";case u:return"Portal";case d:return"Profiler";case f:return"StrictMode";case y:return"Suspense";case p:return"SuspenseList"}if(typeof _=="object")switch(_.$$typeof){case m:return(_.displayName||"Context")+".Consumer";case h:return(_._context.displayName||"Context")+".Provider";case v:var E=_.render;return _=_.displayName,_||(_=E.displayName||E.name||"",_=_!==""?"ForwardRef("+_+")":"ForwardRef"),_;case S:return E=_.displayName||null,E!==null?E:M(_.type)||"Memo";case b:E=_._payload,_=_._init;try{return M(_(E))}catch{}}return null}function A(_){var E=_.type;switch(_.tag){case 24:return"Cache";case 9:return(E.displayName||"Context")+".Consumer";case 10:return(E._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return _=E.render,_=_.displayName||_.name||"",E.displayName||(_!==""?"ForwardRef("+_+")":"ForwardRef");case 7:return"Fragment";case 5:return E;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M(E);case 8:return E===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof E=="function")return E.displayName||E.name||null;if(typeof E=="string")return E}return null}function N(_){var E=_,P=_;if(_.alternate)for(;E.return;)E=E.return;else{_=E;do E=_,E.flags&4098&&(P=E.return),_=E.return;while(_)}return E.tag===3?P:null}function C(_){if(N(_)!==_)throw Error(o(188))}function T(_){var E=_.alternate;if(!E){if(E=N(_),E===null)throw Error(o(188));return E!==_?null:_}for(var P=_,F=E;;){var V=P.return;if(V===null)break;var K=V.alternate;if(K===null){if(F=V.return,F!==null){P=F;continue}break}if(V.child===K.child){for(K=V.child;K;){if(K===P)return C(V),_;if(K===F)return C(V),E;K=K.sibling}throw Error(o(188))}if(P.return!==F.return)P=V,F=K;else{for(var Se=!1,Be=V.child;Be;){if(Be===P){Se=!0,P=V,F=K;break}if(Be===F){Se=!0,F=V,P=K;break}Be=Be.sibling}if(!Se){for(Be=K.child;Be;){if(Be===P){Se=!0,P=K,F=V;break}if(Be===F){Se=!0,F=K,P=V;break}Be=Be.sibling}if(!Se)throw Error(o(189))}}if(P.alternate!==F)throw Error(o(190))}if(P.tag!==3)throw Error(o(188));return P.stateNode.current===P?_:E}function R(_){return _=T(_),_!==null?$(_):null}function $(_){if(_.tag===5||_.tag===6)return _;for(_=_.child;_!==null;){var E=$(_);if(E!==null)return E;_=_.sibling}return null}function B(_){if(_.tag===5||_.tag===6)return _;for(_=_.child;_!==null;){if(_.tag!==4){var E=B(_);if(E!==null)return E}_=_.sibling}return null}var z=Array.isArray,D=e.getPublicInstance,I=e.getRootHostContext,U=e.getChildHostContext,L=e.prepareForCommit,q=e.resetAfterCommit,Z=e.createInstance,J=e.appendInitialChild,Y=e.finalizeInitialChildren,ee=e.prepareUpdate,ae=e.shouldSetTextContent,ce=e.createTextInstance,pe=e.scheduleTimeout,we=e.cancelTimeout,me=e.noTimeout,Ae=e.isPrimaryRenderer,Ee=e.supportsMutation,re=e.supportsPersistence,Pe=e.supportsHydration,Re=e.getInstanceFromNode,te=e.preparePortalMount,ie=e.getCurrentEventPriority,Me=e.detachDeletedInstance,oe=e.supportsMicrotasks,G=e.scheduleMicrotask,j=e.supportsTestSelectors,de=e.findFiberRoot,Te=e.getBoundingRect,X=e.getTextContent,Q=e.isHiddenSubtree,be=e.matchAccessibilityRole,_e=e.setFocusIfFocusable,Ne=e.setupIntersectionObserver,Fe=e.appendChild,He=e.appendChildToContainer,Ie=e.commitTextUpdate,Je=e.commitMount,qe=e.commitUpdate,lt=e.insertBefore,ot=e.insertInContainerBefore,ye=e.removeChild,We=e.removeChildFromContainer,W=e.resetTextContent,ve=e.hideInstance,ke=e.hideTextInstance,Ye=e.unhideInstance,he=e.unhideTextInstance,Ze=e.clearContainer,H=e.cloneInstance,ne=e.createContainerChildSet,fe=e.appendChildToContainerChildSet,xe=e.finalizeContainerChildren,Ce=e.replaceContainerChildren,Oe=e.cloneHiddenInstance,$e=e.cloneHiddenTextInstance,Xe=e.canHydrateInstance,tt=e.canHydrateTextInstance,ht=e.canHydrateSuspenseInstance,Pt=e.isSuspenseInstancePending,rt=e.isSuspenseInstanceFallback,Et=e.registerSuspenseInstanceRetry,Ht=e.getNextHydratableSibling,kr=e.getFirstHydratableChild,Ar=e.getFirstHydratableChildWithinContainer,er=e.getFirstHydratableChildWithinSuspenseInstance,Ga=e.hydrateInstance,Wu=e.hydrateTextInstance,Si=e.hydrateSuspenseInstance,ge=e.getNextHydratableInstanceAfterSuspenseInstance,Le=e.commitHydratedContainer,Ue=e.commitHydratedSuspenseInstance,Ve=e.clearSuspenseBoundary,je=e.clearSuspenseBoundaryFromContainer,yt=e.shouldDeleteUnhydratedTailInstances,St=e.didNotMatchHydratedContainerTextInstance,It=e.didNotMatchHydratedTextInstance,ft;function _t(_){if(ft===void 0)try{throw Error()}catch(P){var E=P.stack.trim().match(/\n( *(at )?)/);ft=E&&E[1]||""}return`
`+ft+_}var zt=!1;function Ot(_,E){if(!_||zt)return"";zt=!0;var P=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(E)if(E=function(){throw Error()},Object.defineProperty(E.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(E,[])}catch(ct){var F=ct}Reflect.construct(_,[],E)}else{try{E.call()}catch(ct){F=ct}_.call(E.prototype)}else{try{throw Error()}catch(ct){F=ct}_()}}catch(ct){if(ct&&F&&typeof ct.stack=="string"){for(var V=ct.stack.split(`
`),K=F.stack.split(`
`),Se=V.length-1,Be=K.length-1;1<=Se&&0<=Be&&V[Se]!==K[Be];)Be--;for(;1<=Se&&0<=Be;Se--,Be--)if(V[Se]!==K[Be]){if(Se!==1||Be!==1)do if(Se--,Be--,0>Be||V[Se]!==K[Be]){var Qe=`
`+V[Se].replace(" at new "," at ");return _.displayName&&Qe.includes("<anonymous>")&&(Qe=Qe.replace("<anonymous>",_.displayName)),Qe}while(1<=Se&&0<=Be);break}}}finally{zt=!1,Error.prepareStackTrace=P}return(_=_?_.displayName||_.name:"")?_t(_):""}var zn=Object.prototype.hasOwnProperty,Jr=[],sr=-1;function fi(_){return{current:_}}function Kt(_){0>sr||(_.current=Jr[sr],Jr[sr]=null,sr--)}function At(_,E){sr++,Jr[sr]=_.current,_.current=E}var ko={},mn=fi(ko),Tr=fi(!1),qa=ko;function Io(_,E){var P=_.type.contextTypes;if(!P)return ko;var F=_.stateNode;if(F&&F.__reactInternalMemoizedUnmaskedChildContext===E)return F.__reactInternalMemoizedMaskedChildContext;var V={},K;for(K in P)V[K]=E[K];return F&&(_=_.stateNode,_.__reactInternalMemoizedUnmaskedChildContext=E,_.__reactInternalMemoizedMaskedChildContext=V),V}function di(_){return _=_.childContextTypes,_!=null}function Ir(){Kt(Tr),Kt(mn)}function Xa(_,E,P){if(mn.current!==ko)throw Error(o(168));At(mn,E),At(Tr,P)}function ih(_,E,P){var F=_.stateNode;if(E=E.childContextTypes,typeof F.getChildContext!="function")return P;F=F.getChildContext();for(var V in F)if(!(V in E))throw Error(o(108,A(_)||"Unknown",V));return s({},P,F)}function _i(_){return _=(_=_.stateNode)&&_.__reactInternalMemoizedMergedChildContext||ko,qa=mn.current,At(mn,_),At(Tr,Tr.current),!0}function sh(_,E,P){var F=_.stateNode;if(!F)throw Error(o(169));P?(_=ih(_,E,qa),F.__reactInternalMemoizedMergedChildContext=_,Kt(Tr),Kt(mn),At(mn,_)):Kt(Tr),At(Tr,P)}var no=Math.clz32?Math.clz32:nne,e1=Math.log,tne=Math.LN2;function nne(_){return _>>>=0,_===0?32:31-(e1(_)/tne|0)|0}var t1=64,n1=4194304;function ig(_){switch(_&-_){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return _&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return _}}function r1(_,E){var P=_.pendingLanes;if(P===0)return 0;var F=0,V=_.suspendedLanes,K=_.pingedLanes,Se=P&268435455;if(Se!==0){var Be=Se&~V;Be!==0?F=ig(Be):(K&=Se,K!==0&&(F=ig(K)))}else Se=P&~V,Se!==0?F=ig(Se):K!==0&&(F=ig(K));if(F===0)return 0;if(E!==0&&E!==F&&!(E&V)&&(V=F&-F,K=E&-E,V>=K||V===16&&(K&4194240)!==0))return E;if(F&4&&(F|=P&16),E=_.entangledLanes,E!==0)for(_=_.entanglements,E&=F;0<E;)P=31-no(E),V=1<<P,F|=_[P],E&=~V;return F}function rne(_,E){switch(_){case 1:case 2:case 4:return E+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return E+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ine(_,E){for(var P=_.suspendedLanes,F=_.pingedLanes,V=_.expirationTimes,K=_.pendingLanes;0<K;){var Se=31-no(K),Be=1<<Se,Qe=V[Se];Qe===-1?(!(Be&P)||Be&F)&&(V[Se]=rne(Be,E)):Qe<=E&&(_.expiredLanes|=Be),K&=~Be}}function kM(_){return _=_.pendingLanes&-1073741825,_!==0?_:_&1073741824?1073741824:0}function IM(_){for(var E=[],P=0;31>P;P++)E.push(_);return E}function sg(_,E,P){_.pendingLanes|=E,E!==536870912&&(_.suspendedLanes=0,_.pingedLanes=0),_=_.eventTimes,E=31-no(E),_[E]=P}function sne(_,E){var P=_.pendingLanes&~E;_.pendingLanes=E,_.suspendedLanes=0,_.pingedLanes=0,_.expiredLanes&=E,_.mutableReadLanes&=E,_.entangledLanes&=E,E=_.entanglements;var F=_.eventTimes;for(_=_.expirationTimes;0<P;){var V=31-no(P),K=1<<V;E[V]=0,F[V]=-1,_[V]=-1,P&=~K}}function LM(_,E){var P=_.entangledLanes|=E;for(_=_.entanglements;P;){var F=31-no(P),V=1<<F;V&E|_[F]&E&&(_[F]|=E),P&=~V}}var Dn=0;function Ik(_){return _&=-_,1<_?4<_?_&268435455?16:536870912:4:1}var FM=i.unstable_scheduleCallback,Lk=i.unstable_cancelCallback,one=i.unstable_shouldYield,ane=i.unstable_requestPaint,hi=i.unstable_now,BM=i.unstable_ImmediatePriority,lne=i.unstable_UserBlockingPriority,zM=i.unstable_NormalPriority,une=i.unstable_IdlePriority,i1=null,Ya=null;function cne(_){if(Ya&&typeof Ya.onCommitFiberRoot=="function")try{Ya.onCommitFiberRoot(i1,_,void 0,(_.current.flags&128)===128)}catch{}}function fne(_,E){return _===E&&(_!==0||1/_===1/E)||_!==_&&E!==E}var Ka=typeof Object.is=="function"?Object.is:fne,Wl=null,s1=!1,UM=!1;function Fk(_){Wl===null?Wl=[_]:Wl.push(_)}function dne(_){s1=!0,Fk(_)}function Za(){if(!UM&&Wl!==null){UM=!0;var _=0,E=Dn;try{var P=Wl;for(Dn=1;_<P.length;_++){var F=P[_];do F=F(!0);while(F!==null)}Wl=null,s1=!1}catch(V){throw Wl!==null&&(Wl=Wl.slice(_+1)),FM(BM,Za),V}finally{Dn=E,UM=!1}}return null}var hne=a.ReactCurrentBatchConfig;function o1(_,E){if(Ka(_,E))return!0;if(typeof _!="object"||_===null||typeof E!="object"||E===null)return!1;var P=Object.keys(_),F=Object.keys(E);if(P.length!==F.length)return!1;for(F=0;F<P.length;F++){var V=P[F];if(!zn.call(E,V)||!Ka(_[V],E[V]))return!1}return!0}function pne(_){switch(_.tag){case 5:return _t(_.type);case 16:return _t("Lazy");case 13:return _t("Suspense");case 19:return _t("SuspenseList");case 0:case 2:case 15:return _=Ot(_.type,!1),_;case 11:return _=Ot(_.type.render,!1),_;case 1:return _=Ot(_.type,!0),_;default:return""}}function ma(_,E){if(_&&_.defaultProps){E=s({},E),_=_.defaultProps;for(var P in _)E[P]===void 0&&(E[P]=_[P]);return E}return E}var a1=fi(null),l1=null,oh=null,$M=null;function VM(){$M=oh=l1=null}function Bk(_,E,P){Ae?(At(a1,E._currentValue),E._currentValue=P):(At(a1,E._currentValue2),E._currentValue2=P)}function HM(_){var E=a1.current;Kt(a1),Ae?_._currentValue=E:_._currentValue2=E}function WM(_,E,P){for(;_!==null;){var F=_.alternate;if((_.childLanes&E)!==E?(_.childLanes|=E,F!==null&&(F.childLanes|=E)):F!==null&&(F.childLanes&E)!==E&&(F.childLanes|=E),_===P)break;_=_.return}}function ah(_,E){l1=_,$M=oh=null,_=_.dependencies,_!==null&&_.firstContext!==null&&(_.lanes&E&&(so=!0),_.firstContext=null)}function Lo(_){var E=Ae?_._currentValue:_._currentValue2;if($M!==_)if(_={context:_,memoizedValue:E,next:null},oh===null){if(l1===null)throw Error(o(308));oh=_,l1.dependencies={lanes:0,firstContext:_}}else oh=oh.next=_;return E}var Ja=null,ju=!1;function jM(_){_.updateQueue={baseState:_.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zk(_,E){_=_.updateQueue,E.updateQueue===_&&(E.updateQueue={baseState:_.baseState,firstBaseUpdate:_.firstBaseUpdate,lastBaseUpdate:_.lastBaseUpdate,shared:_.shared,effects:_.effects})}function jl(_,E){return{eventTime:_,lane:E,tag:0,payload:null,callback:null,next:null}}function Gu(_,E){var P=_.updateQueue;P!==null&&(P=P.shared,Wr!==null&&_.mode&1&&!(gn&2)?(_=P.interleaved,_===null?(E.next=E,Ja===null?Ja=[P]:Ja.push(P)):(E.next=_.next,_.next=E),P.interleaved=E):(_=P.pending,_===null?E.next=E:(E.next=_.next,_.next=E),P.pending=E))}function u1(_,E,P){if(E=E.updateQueue,E!==null&&(E=E.shared,(P&4194240)!==0)){var F=E.lanes;F&=_.pendingLanes,P|=F,E.lanes=P,LM(_,P)}}function Uk(_,E){var P=_.updateQueue,F=_.alternate;if(F!==null&&(F=F.updateQueue,P===F)){var V=null,K=null;if(P=P.firstBaseUpdate,P!==null){do{var Se={eventTime:P.eventTime,lane:P.lane,tag:P.tag,payload:P.payload,callback:P.callback,next:null};K===null?V=K=Se:K=K.next=Se,P=P.next}while(P!==null);K===null?V=K=E:K=K.next=E}else V=K=E;P={baseState:F.baseState,firstBaseUpdate:V,lastBaseUpdate:K,shared:F.shared,effects:F.effects},_.updateQueue=P;return}_=P.lastBaseUpdate,_===null?P.firstBaseUpdate=E:_.next=E,P.lastBaseUpdate=E}function c1(_,E,P,F){var V=_.updateQueue;ju=!1;var K=V.firstBaseUpdate,Se=V.lastBaseUpdate,Be=V.shared.pending;if(Be!==null){V.shared.pending=null;var Qe=Be,ct=Qe.next;Qe.next=null,Se===null?K=ct:Se.next=ct,Se=Qe;var Tt=_.alternate;Tt!==null&&(Tt=Tt.updateQueue,Be=Tt.lastBaseUpdate,Be!==Se&&(Be===null?Tt.firstBaseUpdate=ct:Be.next=ct,Tt.lastBaseUpdate=Qe))}if(K!==null){var sn=V.baseState;Se=0,Tt=ct=Qe=null,Be=K;do{var jt=Be.lane,Kn=Be.eventTime;if((F&jt)===jt){Tt!==null&&(Tt=Tt.next={eventTime:Kn,lane:0,tag:Be.tag,payload:Be.payload,callback:Be.callback,next:null});e:{var Ft=_,Gi=Be;switch(jt=E,Kn=P,Gi.tag){case 1:if(Ft=Gi.payload,typeof Ft=="function"){sn=Ft.call(Kn,sn,jt);break e}sn=Ft;break e;case 3:Ft.flags=Ft.flags&-65537|128;case 0:if(Ft=Gi.payload,jt=typeof Ft=="function"?Ft.call(Kn,sn,jt):Ft,jt==null)break e;sn=s({},sn,jt);break e;case 2:ju=!0}}Be.callback!==null&&Be.lane!==0&&(_.flags|=64,jt=V.effects,jt===null?V.effects=[Be]:jt.push(Be))}else Kn={eventTime:Kn,lane:jt,tag:Be.tag,payload:Be.payload,callback:Be.callback,next:null},Tt===null?(ct=Tt=Kn,Qe=sn):Tt=Tt.next=Kn,Se|=jt;if(Be=Be.next,Be===null){if(Be=V.shared.pending,Be===null)break;jt=Be,Be=jt.next,jt.next=null,V.lastBaseUpdate=jt,V.shared.pending=null}}while(!0);if(Tt===null&&(Qe=sn),V.baseState=Qe,V.firstBaseUpdate=ct,V.lastBaseUpdate=Tt,E=V.shared.interleaved,E!==null){V=E;do Se|=V.lane,V=V.next;while(V!==E)}else K===null&&(V.shared.lanes=0);gh|=Se,_.lanes=Se,_.memoizedState=sn}}function $k(_,E,P){if(_=E.effects,E.effects=null,_!==null)for(E=0;E<_.length;E++){var F=_[E],V=F.callback;if(V!==null){if(F.callback=null,F=P,typeof V!="function")throw Error(o(191,V));V.call(F)}}}var Vk=new r.Component().refs;function GM(_,E,P,F){E=_.memoizedState,P=P(F,E),P=P==null?E:s({},E,P),_.memoizedState=P,_.lanes===0&&(_.updateQueue.baseState=P)}var f1={isMounted:function(_){return(_=_._reactInternals)?N(_)===_:!1},enqueueSetState:function(_,E,P){_=_._reactInternals;var F=ms(),V=Yu(_),K=jl(F,V);K.payload=E,P!=null&&(K.callback=P),Gu(_,K),E=$o(_,V,F),E!==null&&u1(E,_,V)},enqueueReplaceState:function(_,E,P){_=_._reactInternals;var F=ms(),V=Yu(_),K=jl(F,V);K.tag=1,K.payload=E,P!=null&&(K.callback=P),Gu(_,K),E=$o(_,V,F),E!==null&&u1(E,_,V)},enqueueForceUpdate:function(_,E){_=_._reactInternals;var P=ms(),F=Yu(_),V=jl(P,F);V.tag=2,E!=null&&(V.callback=E),Gu(_,V),E=$o(_,F,P),E!==null&&u1(E,_,F)}};function Hk(_,E,P,F,V,K,Se){return _=_.stateNode,typeof _.shouldComponentUpdate=="function"?_.shouldComponentUpdate(F,K,Se):E.prototype&&E.prototype.isPureReactComponent?!o1(P,F)||!o1(V,K):!0}function Wk(_,E,P){var F=!1,V=ko,K=E.contextType;return typeof K=="object"&&K!==null?K=Lo(K):(V=di(E)?qa:mn.current,F=E.contextTypes,K=(F=F!=null)?Io(_,V):ko),E=new E(P,K),_.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=f1,_.stateNode=E,E._reactInternals=_,F&&(_=_.stateNode,_.__reactInternalMemoizedUnmaskedChildContext=V,_.__reactInternalMemoizedMaskedChildContext=K),E}function jk(_,E,P,F){_=E.state,typeof E.componentWillReceiveProps=="function"&&E.componentWillReceiveProps(P,F),typeof E.UNSAFE_componentWillReceiveProps=="function"&&E.UNSAFE_componentWillReceiveProps(P,F),E.state!==_&&f1.enqueueReplaceState(E,E.state,null)}function qM(_,E,P,F){var V=_.stateNode;V.props=P,V.state=_.memoizedState,V.refs=Vk,jM(_);var K=E.contextType;typeof K=="object"&&K!==null?V.context=Lo(K):(K=di(E)?qa:mn.current,V.context=Io(_,K)),V.state=_.memoizedState,K=E.getDerivedStateFromProps,typeof K=="function"&&(GM(_,E,K,P),V.state=_.memoizedState),typeof E.getDerivedStateFromProps=="function"||typeof V.getSnapshotBeforeUpdate=="function"||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(E=V.state,typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount(),E!==V.state&&f1.enqueueReplaceState(V,V.state,null),c1(_,P,V,F),V.state=_.memoizedState),typeof V.componentDidMount=="function"&&(_.flags|=4194308)}var lh=[],uh=0,d1=null,h1=0,Fo=[],Bo=0,wf=null,Gl=1,ql="";function Sf(_,E){lh[uh++]=h1,lh[uh++]=d1,d1=_,h1=E}function Gk(_,E,P){Fo[Bo++]=Gl,Fo[Bo++]=ql,Fo[Bo++]=wf,wf=_;var F=Gl;_=ql;var V=32-no(F)-1;F&=~(1<<V),P+=1;var K=32-no(E)+V;if(30<K){var Se=V-V%5;K=(F&(1<<Se)-1).toString(32),F>>=Se,V-=Se,Gl=1<<32-no(E)+V|P<<V|F,ql=K+_}else Gl=1<<K|P<<V|F,ql=_}function XM(_){_.return!==null&&(Sf(_,1),Gk(_,1,0))}function YM(_){for(;_===d1;)d1=lh[--uh],lh[uh]=null,h1=lh[--uh],lh[uh]=null;for(;_===wf;)wf=Fo[--Bo],Fo[Bo]=null,ql=Fo[--Bo],Fo[Bo]=null,Gl=Fo[--Bo],Fo[Bo]=null}var ro=null,io=null,fr=!1,og=!1,ga=null;function qk(_,E){var P=Vo(5,null,null,0);P.elementType="DELETED",P.stateNode=E,P.return=_,E=_.deletions,E===null?(_.deletions=[P],_.flags|=16):E.push(P)}function Xk(_,E){switch(_.tag){case 5:return E=Xe(E,_.type,_.pendingProps),E!==null?(_.stateNode=E,ro=_,io=kr(E),!0):!1;case 6:return E=tt(E,_.pendingProps),E!==null?(_.stateNode=E,ro=_,io=null,!0):!1;case 13:if(E=ht(E),E!==null){var P=wf!==null?{id:Gl,overflow:ql}:null;return _.memoizedState={dehydrated:E,treeContext:P,retryLane:1073741824},P=Vo(18,null,null,0),P.stateNode=E,P.return=_,_.child=P,ro=_,io=null,!0}return!1;default:return!1}}function KM(_){return(_.mode&1)!==0&&(_.flags&128)===0}function ZM(_){if(fr){var E=io;if(E){var P=E;if(!Xk(_,E)){if(KM(_))throw Error(o(418));E=Ht(P);var F=ro;E&&Xk(_,E)?qk(F,P):(_.flags=_.flags&-4097|2,fr=!1,ro=_)}}else{if(KM(_))throw Error(o(418));_.flags=_.flags&-4097|2,fr=!1,ro=_}}}function Yk(_){for(_=_.return;_!==null&&_.tag!==5&&_.tag!==3&&_.tag!==13;)_=_.return;ro=_}function ag(_){if(!Pe||_!==ro)return!1;if(!fr)return Yk(_),fr=!0,!1;if(_.tag!==3&&(_.tag!==5||yt(_.type)&&!ae(_.type,_.memoizedProps))){var E=io;if(E){if(KM(_)){for(_=io;_;)_=Ht(_);throw Error(o(418))}for(;E;)qk(_,E),E=Ht(E)}}if(Yk(_),_.tag===13){if(!Pe)throw Error(o(316));if(_=_.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(o(317));io=ge(_)}else io=ro?Ht(_.stateNode):null;return!0}function ch(){Pe&&(io=ro=null,og=fr=!1)}function JM(_){ga===null?ga=[_]:ga.push(_)}function lg(_,E,P){if(_=P.ref,_!==null&&typeof _!="function"&&typeof _!="object"){if(P._owner){if(P=P._owner,P){if(P.tag!==1)throw Error(o(309));var F=P.stateNode}if(!F)throw Error(o(147,_));var V=F,K=""+_;return E!==null&&E.ref!==null&&typeof E.ref=="function"&&E.ref._stringRef===K?E.ref:(E=function(Se){var Be=V.refs;Be===Vk&&(Be=V.refs={}),Se===null?delete Be[K]:Be[K]=Se},E._stringRef=K,E)}if(typeof _!="string")throw Error(o(284));if(!P._owner)throw Error(o(290,_))}return _}function p1(_,E){throw _=Object.prototype.toString.call(E),Error(o(31,_==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":_))}function Kk(_){var E=_._init;return E(_._payload)}function Zk(_){function E(Ge,ze){if(_){var Ke=Ge.deletions;Ke===null?(Ge.deletions=[ze],Ge.flags|=16):Ke.push(ze)}}function P(Ge,ze){if(!_)return null;for(;ze!==null;)E(Ge,ze),ze=ze.sibling;return null}function F(Ge,ze){for(Ge=new Map;ze!==null;)ze.key!==null?Ge.set(ze.key,ze):Ge.set(ze.index,ze),ze=ze.sibling;return Ge}function V(Ge,ze){return Ge=Zu(Ge,ze),Ge.index=0,Ge.sibling=null,Ge}function K(Ge,ze,Ke){return Ge.index=Ke,_?(Ke=Ge.alternate,Ke!==null?(Ke=Ke.index,Ke<ze?(Ge.flags|=2,ze):Ke):(Ge.flags|=2,ze)):(Ge.flags|=1048576,ze)}function Se(Ge){return _&&Ge.alternate===null&&(Ge.flags|=2),Ge}function Be(Ge,ze,Ke,xt){return ze===null||ze.tag!==6?(ze=I2(Ke,Ge.mode,xt),ze.return=Ge,ze):(ze=V(ze,Ke),ze.return=Ge,ze)}function Qe(Ge,ze,Ke,xt){var Lt=Ke.type;return Lt===c?Tt(Ge,ze,Ke.props.children,xt,Ke.key):ze!==null&&(ze.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===b&&Kk(Lt)===ze.type)?(xt=V(ze,Ke.props),xt.ref=lg(Ge,ze,Ke),xt.return=Ge,xt):(xt=j1(Ke.type,Ke.key,Ke.props,null,Ge.mode,xt),xt.ref=lg(Ge,ze,Ke),xt.return=Ge,xt)}function ct(Ge,ze,Ke,xt){return ze===null||ze.tag!==4||ze.stateNode.containerInfo!==Ke.containerInfo||ze.stateNode.implementation!==Ke.implementation?(ze=L2(Ke,Ge.mode,xt),ze.return=Ge,ze):(ze=V(ze,Ke.children||[]),ze.return=Ge,ze)}function Tt(Ge,ze,Ke,xt,Lt){return ze===null||ze.tag!==7?(ze=Df(Ke,Ge.mode,xt,Lt),ze.return=Ge,ze):(ze=V(ze,Ke),ze.return=Ge,ze)}function sn(Ge,ze,Ke){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return ze=I2(""+ze,Ge.mode,Ke),ze.return=Ge,ze;if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case l:return Ke=j1(ze.type,ze.key,ze.props,null,Ge.mode,Ke),Ke.ref=lg(Ge,null,ze),Ke.return=Ge,Ke;case u:return ze=L2(ze,Ge.mode,Ke),ze.return=Ge,ze;case b:var xt=ze._init;return sn(Ge,xt(ze._payload),Ke)}if(z(ze)||x(ze))return ze=Df(ze,Ge.mode,Ke,null),ze.return=Ge,ze;p1(Ge,ze)}return null}function jt(Ge,ze,Ke,xt){var Lt=ze!==null?ze.key:null;if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return Lt!==null?null:Be(Ge,ze,""+Ke,xt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case l:return Ke.key===Lt?Qe(Ge,ze,Ke,xt):null;case u:return Ke.key===Lt?ct(Ge,ze,Ke,xt):null;case b:return Lt=Ke._init,jt(Ge,ze,Lt(Ke._payload),xt)}if(z(Ke)||x(Ke))return Lt!==null?null:Tt(Ge,ze,Ke,xt,null);p1(Ge,Ke)}return null}function Kn(Ge,ze,Ke,xt,Lt){if(typeof xt=="string"&&xt!==""||typeof xt=="number")return Ge=Ge.get(Ke)||null,Be(ze,Ge,""+xt,Lt);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case l:return Ge=Ge.get(xt.key===null?Ke:xt.key)||null,Qe(ze,Ge,xt,Lt);case u:return Ge=Ge.get(xt.key===null?Ke:xt.key)||null,ct(ze,Ge,xt,Lt);case b:var hn=xt._init;return Kn(Ge,ze,Ke,hn(xt._payload),Lt)}if(z(xt)||x(xt))return Ge=Ge.get(Ke)||null,Tt(ze,Ge,xt,Lt,null);p1(ze,xt)}return null}function Ft(Ge,ze,Ke,xt){for(var Lt=null,hn=null,on=ze,Nn=ze=0,mi=null;on!==null&&Nn<Ke.length;Nn++){on.index>Nn?(mi=on,on=null):mi=on.sibling;var Pn=jt(Ge,on,Ke[Nn],xt);if(Pn===null){on===null&&(on=mi);break}_&&on&&Pn.alternate===null&&E(Ge,on),ze=K(Pn,ze,Nn),hn===null?Lt=Pn:hn.sibling=Pn,hn=Pn,on=mi}if(Nn===Ke.length)return P(Ge,on),fr&&Sf(Ge,Nn),Lt;if(on===null){for(;Nn<Ke.length;Nn++)on=sn(Ge,Ke[Nn],xt),on!==null&&(ze=K(on,ze,Nn),hn===null?Lt=on:hn.sibling=on,hn=on);return fr&&Sf(Ge,Nn),Lt}for(on=F(Ge,on);Nn<Ke.length;Nn++)mi=Kn(on,Ge,Nn,Ke[Nn],xt),mi!==null&&(_&&mi.alternate!==null&&on.delete(mi.key===null?Nn:mi.key),ze=K(mi,ze,Nn),hn===null?Lt=mi:hn.sibling=mi,hn=mi);return _&&on.forEach(function(Ju){return E(Ge,Ju)}),fr&&Sf(Ge,Nn),Lt}function Gi(Ge,ze,Ke,xt){var Lt=x(Ke);if(typeof Lt!="function")throw Error(o(150));if(Ke=Lt.call(Ke),Ke==null)throw Error(o(151));for(var hn=Lt=null,on=ze,Nn=ze=0,mi=null,Pn=Ke.next();on!==null&&!Pn.done;Nn++,Pn=Ke.next()){on.index>Nn?(mi=on,on=null):mi=on.sibling;var Ju=jt(Ge,on,Pn.value,xt);if(Ju===null){on===null&&(on=mi);break}_&&on&&Ju.alternate===null&&E(Ge,on),ze=K(Ju,ze,Nn),hn===null?Lt=Ju:hn.sibling=Ju,hn=Ju,on=mi}if(Pn.done)return P(Ge,on),fr&&Sf(Ge,Nn),Lt;if(on===null){for(;!Pn.done;Nn++,Pn=Ke.next())Pn=sn(Ge,Pn.value,xt),Pn!==null&&(ze=K(Pn,ze,Nn),hn===null?Lt=Pn:hn.sibling=Pn,hn=Pn);return fr&&Sf(Ge,Nn),Lt}for(on=F(Ge,on);!Pn.done;Nn++,Pn=Ke.next())Pn=Kn(on,Ge,Nn,Pn.value,xt),Pn!==null&&(_&&Pn.alternate!==null&&on.delete(Pn.key===null?Nn:Pn.key),ze=K(Pn,ze,Nn),hn===null?Lt=Pn:hn.sibling=Pn,hn=Pn);return _&&on.forEach(function(Wne){return E(Ge,Wne)}),fr&&Sf(Ge,Nn),Lt}function Ho(Ge,ze,Ke,xt){if(typeof Ke=="object"&&Ke!==null&&Ke.type===c&&Ke.key===null&&(Ke=Ke.props.children),typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case l:e:{for(var Lt=Ke.key,hn=ze;hn!==null;){if(hn.key===Lt){if(Lt=Ke.type,Lt===c){if(hn.tag===7){P(Ge,hn.sibling),ze=V(hn,Ke.props.children),ze.return=Ge,Ge=ze;break e}}else if(hn.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===b&&Kk(Lt)===hn.type){P(Ge,hn.sibling),ze=V(hn,Ke.props),ze.ref=lg(Ge,hn,Ke),ze.return=Ge,Ge=ze;break e}P(Ge,hn);break}else E(Ge,hn);hn=hn.sibling}Ke.type===c?(ze=Df(Ke.props.children,Ge.mode,xt,Ke.key),ze.return=Ge,Ge=ze):(xt=j1(Ke.type,Ke.key,Ke.props,null,Ge.mode,xt),xt.ref=lg(Ge,ze,Ke),xt.return=Ge,Ge=xt)}return Se(Ge);case u:e:{for(hn=Ke.key;ze!==null;){if(ze.key===hn)if(ze.tag===4&&ze.stateNode.containerInfo===Ke.containerInfo&&ze.stateNode.implementation===Ke.implementation){P(Ge,ze.sibling),ze=V(ze,Ke.children||[]),ze.return=Ge,Ge=ze;break e}else{P(Ge,ze);break}else E(Ge,ze);ze=ze.sibling}ze=L2(Ke,Ge.mode,xt),ze.return=Ge,Ge=ze}return Se(Ge);case b:return hn=Ke._init,Ho(Ge,ze,hn(Ke._payload),xt)}if(z(Ke))return Ft(Ge,ze,Ke,xt);if(x(Ke))return Gi(Ge,ze,Ke,xt);p1(Ge,Ke)}return typeof Ke=="string"&&Ke!==""||typeof Ke=="number"?(Ke=""+Ke,ze!==null&&ze.tag===6?(P(Ge,ze.sibling),ze=V(ze,Ke),ze.return=Ge,Ge=ze):(P(Ge,ze),ze=I2(Ke,Ge.mode,xt),ze.return=Ge,Ge=ze),Se(Ge)):P(Ge,ze)}return Ho}var fh=Zk(!0),Jk=Zk(!1),ug={},zo=fi(ug),cg=fi(ug),dh=fi(ug);function Qa(_){if(_===ug)throw Error(o(174));return _}function QM(_,E){At(dh,E),At(cg,_),At(zo,ug),_=I(E),Kt(zo),At(zo,_)}function hh(){Kt(zo),Kt(cg),Kt(dh)}function Qk(_){var E=Qa(dh.current),P=Qa(zo.current);E=U(P,_.type,E),P!==E&&(At(cg,_),At(zo,E))}function e2(_){cg.current===_&&(Kt(zo),Kt(cg))}var vr=fi(0);function m1(_){for(var E=_;E!==null;){if(E.tag===13){var P=E.memoizedState;if(P!==null&&(P=P.dehydrated,P===null||Pt(P)||rt(P)))return E}else if(E.tag===19&&E.memoizedProps.revealOrder!==void 0){if(E.flags&128)return E}else if(E.child!==null){E.child.return=E,E=E.child;continue}if(E===_)break;for(;E.sibling===null;){if(E.return===null||E.return===_)return null;E=E.return}E.sibling.return=E.return,E=E.sibling}return null}var t2=[];function n2(){for(var _=0;_<t2.length;_++){var E=t2[_];Ae?E._workInProgressVersionPrimary=null:E._workInProgressVersionSecondary=null}t2.length=0}var g1=a.ReactCurrentDispatcher,Uo=a.ReactCurrentBatchConfig,ph=0,Dr=null,Hi=null,pi=null,v1=!1,fg=!1,dg=0,mne=0;function Wi(){throw Error(o(321))}function r2(_,E){if(E===null)return!1;for(var P=0;P<E.length&&P<_.length;P++)if(!Ka(_[P],E[P]))return!1;return!0}function i2(_,E,P,F,V,K){if(ph=K,Dr=E,E.memoizedState=null,E.updateQueue=null,E.lanes=0,g1.current=_===null||_.memoizedState===null?xne:bne,_=P(F,V),fg){K=0;do{if(fg=!1,dg=0,25<=K)throw Error(o(301));K+=1,pi=Hi=null,E.updateQueue=null,g1.current=wne,_=P(F,V)}while(fg)}if(g1.current=S1,E=Hi!==null&&Hi.next!==null,ph=0,pi=Hi=Dr=null,v1=!1,E)throw Error(o(300));return _}function s2(){var _=dg!==0;return dg=0,_}function Xl(){var _={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pi===null?Dr.memoizedState=pi=_:pi=pi.next=_,pi}function el(){if(Hi===null){var _=Dr.alternate;_=_!==null?_.memoizedState:null}else _=Hi.next;var E=pi===null?Dr.memoizedState:pi.next;if(E!==null)pi=E,Hi=_;else{if(_===null)throw Error(o(310));Hi=_,_={memoizedState:Hi.memoizedState,baseState:Hi.baseState,baseQueue:Hi.baseQueue,queue:Hi.queue,next:null},pi===null?Dr.memoizedState=pi=_:pi=pi.next=_}return pi}function _f(_,E){return typeof E=="function"?E(_):E}function y1(_){var E=el(),P=E.queue;if(P===null)throw Error(o(311));P.lastRenderedReducer=_;var F=Hi,V=F.baseQueue,K=P.pending;if(K!==null){if(V!==null){var Se=V.next;V.next=K.next,K.next=Se}F.baseQueue=V=K,P.pending=null}if(V!==null){K=V.next,F=F.baseState;var Be=Se=null,Qe=null,ct=K;do{var Tt=ct.lane;if((ph&Tt)===Tt)Qe!==null&&(Qe=Qe.next={lane:0,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null}),F=ct.hasEagerState?ct.eagerState:_(F,ct.action);else{var sn={lane:Tt,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null};Qe===null?(Be=Qe=sn,Se=F):Qe=Qe.next=sn,Dr.lanes|=Tt,gh|=Tt}ct=ct.next}while(ct!==null&&ct!==K);Qe===null?Se=F:Qe.next=Be,Ka(F,E.memoizedState)||(so=!0),E.memoizedState=F,E.baseState=Se,E.baseQueue=Qe,P.lastRenderedState=F}if(_=P.interleaved,_!==null){V=_;do K=V.lane,Dr.lanes|=K,gh|=K,V=V.next;while(V!==_)}else V===null&&(P.lanes=0);return[E.memoizedState,P.dispatch]}function x1(_){var E=el(),P=E.queue;if(P===null)throw Error(o(311));P.lastRenderedReducer=_;var F=P.dispatch,V=P.pending,K=E.memoizedState;if(V!==null){P.pending=null;var Se=V=V.next;do K=_(K,Se.action),Se=Se.next;while(Se!==V);Ka(K,E.memoizedState)||(so=!0),E.memoizedState=K,E.baseQueue===null&&(E.baseState=K),P.lastRenderedState=K}return[K,F]}function eI(){}function tI(_,E){var P=Dr,F=el(),V=E(),K=!Ka(F.memoizedState,V);if(K&&(F.memoizedState=V,so=!0),F=F.queue,pg(iI.bind(null,P,F,_),[_]),F.getSnapshot!==E||K||pi!==null&&pi.memoizedState.tag&1){if(P.flags|=2048,hg(9,rI.bind(null,P,F,V,E),void 0,null),Wr===null)throw Error(o(349));ph&30||nI(P,E,V)}return V}function nI(_,E,P){_.flags|=16384,_={getSnapshot:E,value:P},E=Dr.updateQueue,E===null?(E={lastEffect:null,stores:null},Dr.updateQueue=E,E.stores=[_]):(P=E.stores,P===null?E.stores=[_]:P.push(_))}function rI(_,E,P,F){E.value=P,E.getSnapshot=F,sI(E)&&$o(_,1,-1)}function iI(_,E,P){return P(function(){sI(E)&&$o(_,1,-1)})}function sI(_){var E=_.getSnapshot;_=_.value;try{var P=E();return!Ka(_,P)}catch{return!0}}function o2(_){var E=Xl();return typeof _=="function"&&(_=_()),E.memoizedState=E.baseState=_,_={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_f,lastRenderedState:_},E.queue=_,_=_.dispatch=yne.bind(null,Dr,_),[E.memoizedState,_]}function hg(_,E,P,F){return _={tag:_,create:E,destroy:P,deps:F,next:null},E=Dr.updateQueue,E===null?(E={lastEffect:null,stores:null},Dr.updateQueue=E,E.lastEffect=_.next=_):(P=E.lastEffect,P===null?E.lastEffect=_.next=_:(F=P.next,P.next=_,_.next=F,E.lastEffect=_)),_}function oI(){return el().memoizedState}function b1(_,E,P,F){var V=Xl();Dr.flags|=_,V.memoizedState=hg(1|E,P,void 0,F===void 0?null:F)}function w1(_,E,P,F){var V=el();F=F===void 0?null:F;var K=void 0;if(Hi!==null){var Se=Hi.memoizedState;if(K=Se.destroy,F!==null&&r2(F,Se.deps)){V.memoizedState=hg(E,P,K,F);return}}Dr.flags|=_,V.memoizedState=hg(1|E,P,K,F)}function a2(_,E){return b1(8390656,8,_,E)}function pg(_,E){return w1(2048,8,_,E)}function aI(_,E){return w1(4,2,_,E)}function lI(_,E){return w1(4,4,_,E)}function uI(_,E){if(typeof E=="function")return _=_(),E(_),function(){E(null)};if(E!=null)return _=_(),E.current=_,function(){E.current=null}}function cI(_,E,P){return P=P!=null?P.concat([_]):null,w1(4,4,uI.bind(null,E,_),P)}function l2(){}function fI(_,E){var P=el();E=E===void 0?null:E;var F=P.memoizedState;return F!==null&&E!==null&&r2(E,F[1])?F[0]:(P.memoizedState=[_,E],_)}function dI(_,E){var P=el();E=E===void 0?null:E;var F=P.memoizedState;return F!==null&&E!==null&&r2(E,F[1])?F[0]:(_=_(),P.memoizedState=[_,E],_)}function gne(_,E){var P=Dn;Dn=P!==0&&4>P?P:4,_(!0);var F=Uo.transition;Uo.transition={};try{_(!1),E()}finally{Dn=P,Uo.transition=F}}function hI(){return el().memoizedState}function vne(_,E,P){var F=Yu(_);P={lane:F,action:P,hasEagerState:!1,eagerState:null,next:null},pI(_)?mI(E,P):(gI(_,E,P),P=ms(),_=$o(_,F,P),_!==null&&vI(_,E,F))}function yne(_,E,P){var F=Yu(_),V={lane:F,action:P,hasEagerState:!1,eagerState:null,next:null};if(pI(_))mI(E,V);else{gI(_,E,V);var K=_.alternate;if(_.lanes===0&&(K===null||K.lanes===0)&&(K=E.lastRenderedReducer,K!==null))try{var Se=E.lastRenderedState,Be=K(Se,P);if(V.hasEagerState=!0,V.eagerState=Be,Ka(Be,Se))return}catch{}finally{}P=ms(),_=$o(_,F,P),_!==null&&vI(_,E,F)}}function pI(_){var E=_.alternate;return _===Dr||E!==null&&E===Dr}function mI(_,E){fg=v1=!0;var P=_.pending;P===null?E.next=E:(E.next=P.next,P.next=E),_.pending=E}function gI(_,E,P){Wr!==null&&_.mode&1&&!(gn&2)?(_=E.interleaved,_===null?(P.next=P,Ja===null?Ja=[E]:Ja.push(E)):(P.next=_.next,_.next=P),E.interleaved=P):(_=E.pending,_===null?P.next=P:(P.next=_.next,_.next=P),E.pending=P)}function vI(_,E,P){if(P&4194240){var F=E.lanes;F&=_.pendingLanes,P|=F,E.lanes=P,LM(_,P)}}var S1={readContext:Lo,useCallback:Wi,useContext:Wi,useEffect:Wi,useImperativeHandle:Wi,useInsertionEffect:Wi,useLayoutEffect:Wi,useMemo:Wi,useReducer:Wi,useRef:Wi,useState:Wi,useDebugValue:Wi,useDeferredValue:Wi,useTransition:Wi,useMutableSource:Wi,useSyncExternalStore:Wi,useId:Wi,unstable_isNewReconciler:!1},xne={readContext:Lo,useCallback:function(_,E){return Xl().memoizedState=[_,E===void 0?null:E],_},useContext:Lo,useEffect:a2,useImperativeHandle:function(_,E,P){return P=P!=null?P.concat([_]):null,b1(4194308,4,uI.bind(null,E,_),P)},useLayoutEffect:function(_,E){return b1(4194308,4,_,E)},useInsertionEffect:function(_,E){return b1(4,2,_,E)},useMemo:function(_,E){var P=Xl();return E=E===void 0?null:E,_=_(),P.memoizedState=[_,E],_},useReducer:function(_,E,P){var F=Xl();return E=P!==void 0?P(E):E,F.memoizedState=F.baseState=E,_={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_,lastRenderedState:E},F.queue=_,_=_.dispatch=vne.bind(null,Dr,_),[F.memoizedState,_]},useRef:function(_){var E=Xl();return _={current:_},E.memoizedState=_},useState:o2,useDebugValue:l2,useDeferredValue:function(_){var E=o2(_),P=E[0],F=E[1];return a2(function(){var V=Uo.transition;Uo.transition={};try{F(_)}finally{Uo.transition=V}},[_]),P},useTransition:function(){var _=o2(!1),E=_[0];return _=gne.bind(null,_[1]),Xl().memoizedState=_,[E,_]},useMutableSource:function(){},useSyncExternalStore:function(_,E,P){var F=Dr,V=Xl();if(fr){if(P===void 0)throw Error(o(407));P=P()}else{if(P=E(),Wr===null)throw Error(o(349));ph&30||nI(F,E,P)}V.memoizedState=P;var K={value:P,getSnapshot:E};return V.queue=K,a2(iI.bind(null,F,K,_),[_]),F.flags|=2048,hg(9,rI.bind(null,F,K,P,E),void 0,null),P},useId:function(){var _=Xl(),E=Wr.identifierPrefix;if(fr){var P=ql,F=Gl;P=(F&~(1<<32-no(F)-1)).toString(32)+P,E=":"+E+"R"+P,P=dg++,0<P&&(E+="H"+P.toString(32)),E+=":"}else P=mne++,E=":"+E+"r"+P.toString(32)+":";return _.memoizedState=E},unstable_isNewReconciler:!1},bne={readContext:Lo,useCallback:fI,useContext:Lo,useEffect:pg,useImperativeHandle:cI,useInsertionEffect:aI,useLayoutEffect:lI,useMemo:dI,useReducer:y1,useRef:oI,useState:function(){return y1(_f)},useDebugValue:l2,useDeferredValue:function(_){var E=y1(_f),P=E[0],F=E[1];return pg(function(){var V=Uo.transition;Uo.transition={};try{F(_)}finally{Uo.transition=V}},[_]),P},useTransition:function(){var _=y1(_f)[0],E=el().memoizedState;return[_,E]},useMutableSource:eI,useSyncExternalStore:tI,useId:hI,unstable_isNewReconciler:!1},wne={readContext:Lo,useCallback:fI,useContext:Lo,useEffect:pg,useImperativeHandle:cI,useInsertionEffect:aI,useLayoutEffect:lI,useMemo:dI,useReducer:x1,useRef:oI,useState:function(){return x1(_f)},useDebugValue:l2,useDeferredValue:function(_){var E=x1(_f),P=E[0],F=E[1];return pg(function(){var V=Uo.transition;Uo.transition={};try{F(_)}finally{Uo.transition=V}},[_]),P},useTransition:function(){var _=x1(_f)[0],E=el().memoizedState;return[_,E]},useMutableSource:eI,useSyncExternalStore:tI,useId:hI,unstable_isNewReconciler:!1};function u2(_,E){try{var P="",F=E;do P+=pne(F),F=F.return;while(F);var V=P}catch(K){V=`
Error generating stack: `+K.message+`
`+K.stack}return{value:_,source:E,stack:V}}function c2(_,E){try{console.error(E.value)}catch(P){setTimeout(function(){throw P})}}var Sne=typeof WeakMap=="function"?WeakMap:Map;function yI(_,E,P){P=jl(-1,P),P.tag=3,P.payload={element:null};var F=E.value;return P.callback=function(){B1||(B1=!0,T2=F),c2(_,E)},P}function xI(_,E,P){P=jl(-1,P),P.tag=3;var F=_.type.getDerivedStateFromError;if(typeof F=="function"){var V=E.value;P.payload=function(){return F(V)},P.callback=function(){c2(_,E)}}var K=_.stateNode;return K!==null&&typeof K.componentDidCatch=="function"&&(P.callback=function(){c2(_,E),typeof F!="function"&&(qu===null?qu=new Set([this]):qu.add(this));var Se=E.stack;this.componentDidCatch(E.value,{componentStack:Se!==null?Se:""})}),P}function bI(_,E,P){var F=_.pingCache;if(F===null){F=_.pingCache=new Sne;var V=new Set;F.set(E,V)}else V=F.get(E),V===void 0&&(V=new Set,F.set(E,V));V.has(P)||(V.add(P),_=Lne.bind(null,_,E,P),E.then(_,_))}function wI(_){do{var E;if((E=_.tag===13)&&(E=_.memoizedState,E=E!==null?E.dehydrated!==null:!0),E)return _;_=_.return}while(_!==null);return null}function SI(_,E,P,F,V){return _.mode&1?(_.flags|=65536,_.lanes=V,_):(_===E?_.flags|=65536:(_.flags|=128,P.flags|=131072,P.flags&=-52805,P.tag===1&&(P.alternate===null?P.tag=17:(E=jl(-1,1),E.tag=2,Gu(P,E))),P.lanes|=1),_)}function tl(_){_.flags|=4}function _I(_,E){if(_!==null&&_.child===E.child)return!0;if(E.flags&16)return!1;for(_=E.child;_!==null;){if(_.flags&12854||_.subtreeFlags&12854)return!1;_=_.sibling}return!0}var mg,gg,_1,E1;if(Ee)mg=function(_,E){for(var P=E.child;P!==null;){if(P.tag===5||P.tag===6)J(_,P.stateNode);else if(P.tag!==4&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===E)break;for(;P.sibling===null;){if(P.return===null||P.return===E)return;P=P.return}P.sibling.return=P.return,P=P.sibling}},gg=function(){},_1=function(_,E,P,F,V){if(_=_.memoizedProps,_!==F){var K=E.stateNode,Se=Qa(zo.current);P=ee(K,P,_,F,V,Se),(E.updateQueue=P)&&tl(E)}},E1=function(_,E,P,F){P!==F&&tl(E)};else if(re){mg=function(_,E,P,F){for(var V=E.child;V!==null;){if(V.tag===5){var K=V.stateNode;P&&F&&(K=Oe(K,V.type,V.memoizedProps,V)),J(_,K)}else if(V.tag===6)K=V.stateNode,P&&F&&(K=$e(K,V.memoizedProps,V)),J(_,K);else if(V.tag!==4){if(V.tag===22&&V.memoizedState!==null)K=V.child,K!==null&&(K.return=V),mg(_,V,!0,!0);else if(V.child!==null){V.child.return=V,V=V.child;continue}}if(V===E)break;for(;V.sibling===null;){if(V.return===null||V.return===E)return;V=V.return}V.sibling.return=V.return,V=V.sibling}};var EI=function(_,E,P,F){for(var V=E.child;V!==null;){if(V.tag===5){var K=V.stateNode;P&&F&&(K=Oe(K,V.type,V.memoizedProps,V)),fe(_,K)}else if(V.tag===6)K=V.stateNode,P&&F&&(K=$e(K,V.memoizedProps,V)),fe(_,K);else if(V.tag!==4){if(V.tag===22&&V.memoizedState!==null)K=V.child,K!==null&&(K.return=V),EI(_,V,!0,!0);else if(V.child!==null){V.child.return=V,V=V.child;continue}}if(V===E)break;for(;V.sibling===null;){if(V.return===null||V.return===E)return;V=V.return}V.sibling.return=V.return,V=V.sibling}};gg=function(_,E){var P=E.stateNode;if(!_I(_,E)){_=P.containerInfo;var F=ne(_);EI(F,E,!1,!1),P.pendingChildren=F,tl(E),xe(_,F)}},_1=function(_,E,P,F,V){var K=_.stateNode,Se=_.memoizedProps;if((_=_I(_,E))&&Se===F)E.stateNode=K;else{var Be=E.stateNode,Qe=Qa(zo.current),ct=null;Se!==F&&(ct=ee(Be,P,Se,F,V,Qe)),_&&ct===null?E.stateNode=K:(K=H(K,ct,P,Se,F,E,_,Be),Y(K,P,F,V,Qe)&&tl(E),E.stateNode=K,_?tl(E):mg(K,E,!1,!1))}},E1=function(_,E,P,F){P!==F?(_=Qa(dh.current),P=Qa(zo.current),E.stateNode=ce(F,_,P,E),tl(E)):E.stateNode=_.stateNode}}else gg=function(){},_1=function(){},E1=function(){};function vg(_,E){if(!fr)switch(_.tailMode){case"hidden":E=_.tail;for(var P=null;E!==null;)E.alternate!==null&&(P=E),E=E.sibling;P===null?_.tail=null:P.sibling=null;break;case"collapsed":P=_.tail;for(var F=null;P!==null;)P.alternate!==null&&(F=P),P=P.sibling;F===null?E||_.tail===null?_.tail=null:_.tail.sibling=null:F.sibling=null}}function ji(_){var E=_.alternate!==null&&_.alternate.child===_.child,P=0,F=0;if(E)for(var V=_.child;V!==null;)P|=V.lanes|V.childLanes,F|=V.subtreeFlags&14680064,F|=V.flags&14680064,V.return=_,V=V.sibling;else for(V=_.child;V!==null;)P|=V.lanes|V.childLanes,F|=V.subtreeFlags,F|=V.flags,V.return=_,V=V.sibling;return _.subtreeFlags|=F,_.childLanes=P,E}function _ne(_,E,P){var F=E.pendingProps;switch(YM(E),E.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ji(E),null;case 1:return di(E.type)&&Ir(),ji(E),null;case 3:return F=E.stateNode,hh(),Kt(Tr),Kt(mn),n2(),F.pendingContext&&(F.context=F.pendingContext,F.pendingContext=null),(_===null||_.child===null)&&(ag(E)?tl(E):_===null||_.memoizedState.isDehydrated&&!(E.flags&256)||(E.flags|=1024,ga!==null&&(P2(ga),ga=null))),gg(_,E),ji(E),null;case 5:e2(E),P=Qa(dh.current);var V=E.type;if(_!==null&&E.stateNode!=null)_1(_,E,V,F,P),_.ref!==E.ref&&(E.flags|=512,E.flags|=2097152);else{if(!F){if(E.stateNode===null)throw Error(o(166));return ji(E),null}if(_=Qa(zo.current),ag(E)){if(!Pe)throw Error(o(175));_=Ga(E.stateNode,E.type,E.memoizedProps,P,_,E,!og),E.updateQueue=_,_!==null&&tl(E)}else{var K=Z(V,F,P,_,E);mg(K,E,!1,!1),E.stateNode=K,Y(K,V,F,P,_)&&tl(E)}E.ref!==null&&(E.flags|=512,E.flags|=2097152)}return ji(E),null;case 6:if(_&&E.stateNode!=null)E1(_,E,_.memoizedProps,F);else{if(typeof F!="string"&&E.stateNode===null)throw Error(o(166));if(_=Qa(dh.current),P=Qa(zo.current),ag(E)){if(!Pe)throw Error(o(176));if(_=E.stateNode,F=E.memoizedProps,(P=Wu(_,F,E,!og))&&(V=ro,V!==null))switch(K=(V.mode&1)!==0,V.tag){case 3:St(V.stateNode.containerInfo,_,F,K);break;case 5:It(V.type,V.memoizedProps,V.stateNode,_,F,K)}P&&tl(E)}else E.stateNode=ce(F,_,P,E)}return ji(E),null;case 13:if(Kt(vr),F=E.memoizedState,fr&&io!==null&&E.mode&1&&!(E.flags&128)){for(_=io;_;)_=Ht(_);return ch(),E.flags|=98560,E}if(F!==null&&F.dehydrated!==null){if(F=ag(E),_===null){if(!F)throw Error(o(318));if(!Pe)throw Error(o(344));if(_=E.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(o(317));Si(_,E)}else ch(),!(E.flags&128)&&(E.memoizedState=null),E.flags|=4;return ji(E),null}return ga!==null&&(P2(ga),ga=null),E.flags&128?(E.lanes=P,E):(F=F!==null,P=!1,_===null?ag(E):P=_.memoizedState!==null,F&&!P&&(E.child.flags|=8192,E.mode&1&&(_===null||vr.current&1?Qr===0&&(Qr=3):O2())),E.updateQueue!==null&&(E.flags|=4),ji(E),null);case 4:return hh(),gg(_,E),_===null&&te(E.stateNode.containerInfo),ji(E),null;case 10:return HM(E.type._context),ji(E),null;case 17:return di(E.type)&&Ir(),ji(E),null;case 19:if(Kt(vr),V=E.memoizedState,V===null)return ji(E),null;if(F=(E.flags&128)!==0,K=V.rendering,K===null)if(F)vg(V,!1);else{if(Qr!==0||_!==null&&_.flags&128)for(_=E.child;_!==null;){if(K=m1(_),K!==null){for(E.flags|=128,vg(V,!1),_=K.updateQueue,_!==null&&(E.updateQueue=_,E.flags|=4),E.subtreeFlags=0,_=P,F=E.child;F!==null;)P=F,V=_,P.flags&=14680066,K=P.alternate,K===null?(P.childLanes=0,P.lanes=V,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=K.childLanes,P.lanes=K.lanes,P.child=K.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=K.memoizedProps,P.memoizedState=K.memoizedState,P.updateQueue=K.updateQueue,P.type=K.type,V=K.dependencies,P.dependencies=V===null?null:{lanes:V.lanes,firstContext:V.firstContext}),F=F.sibling;return At(vr,vr.current&1|2),E.child}_=_.sibling}V.tail!==null&&hi()>A2&&(E.flags|=128,F=!0,vg(V,!1),E.lanes=4194304)}else{if(!F)if(_=m1(K),_!==null){if(E.flags|=128,F=!0,_=_.updateQueue,_!==null&&(E.updateQueue=_,E.flags|=4),vg(V,!0),V.tail===null&&V.tailMode==="hidden"&&!K.alternate&&!fr)return ji(E),null}else 2*hi()-V.renderingStartTime>A2&&P!==1073741824&&(E.flags|=128,F=!0,vg(V,!1),E.lanes=4194304);V.isBackwards?(K.sibling=E.child,E.child=K):(_=V.last,_!==null?_.sibling=K:E.child=K,V.last=K)}return V.tail!==null?(E=V.tail,V.rendering=E,V.tail=E.sibling,V.renderingStartTime=hi(),E.sibling=null,_=vr.current,At(vr,F?_&1|2:_&1),E):(ji(E),null);case 22:case 23:return R2(),F=E.memoizedState!==null,_!==null&&_.memoizedState!==null!==F&&(E.flags|=8192),F&&E.mode&1?oo&1073741824&&(ji(E),Ee&&E.subtreeFlags&6&&(E.flags|=8192)):ji(E),null;case 24:return null;case 25:return null}throw Error(o(156,E.tag))}var Ene=a.ReactCurrentOwner,so=!1;function ps(_,E,P,F){E.child=_===null?Jk(E,null,P,F):fh(E,_.child,P,F)}function MI(_,E,P,F,V){P=P.render;var K=E.ref;return ah(E,V),F=i2(_,E,P,F,K,V),P=s2(),_!==null&&!so?(E.updateQueue=_.updateQueue,E.flags&=-2053,_.lanes&=~V,Yl(_,E,V)):(fr&&P&&XM(E),E.flags|=1,ps(_,E,F,V),E.child)}function CI(_,E,P,F,V){if(_===null){var K=P.type;return typeof K=="function"&&!k2(K)&&K.defaultProps===void 0&&P.compare===null&&P.defaultProps===void 0?(E.tag=15,E.type=K,AI(_,E,K,F,V)):(_=j1(P.type,null,F,E,E.mode,V),_.ref=E.ref,_.return=E,E.child=_)}if(K=_.child,!(_.lanes&V)){var Se=K.memoizedProps;if(P=P.compare,P=P!==null?P:o1,P(Se,F)&&_.ref===E.ref)return Yl(_,E,V)}return E.flags|=1,_=Zu(K,F),_.ref=E.ref,_.return=E,E.child=_}function AI(_,E,P,F,V){if(_!==null&&o1(_.memoizedProps,F)&&_.ref===E.ref)if(so=!1,(_.lanes&V)!==0)_.flags&131072&&(so=!0);else return E.lanes=_.lanes,Yl(_,E,V);return f2(_,E,P,F,V)}function TI(_,E,P){var F=E.pendingProps,V=F.children,K=_!==null?_.memoizedState:null;if(F.mode==="hidden")if(!(E.mode&1))E.memoizedState={baseLanes:0,cachePool:null},At(mh,oo),oo|=P;else if(P&1073741824)E.memoizedState={baseLanes:0,cachePool:null},F=K!==null?K.baseLanes:P,At(mh,oo),oo|=F;else return _=K!==null?K.baseLanes|P:P,E.lanes=E.childLanes=1073741824,E.memoizedState={baseLanes:_,cachePool:null},E.updateQueue=null,At(mh,oo),oo|=_,null;else K!==null?(F=K.baseLanes|P,E.memoizedState=null):F=P,At(mh,oo),oo|=F;return ps(_,E,V,P),E.child}function DI(_,E){var P=E.ref;(_===null&&P!==null||_!==null&&_.ref!==P)&&(E.flags|=512,E.flags|=2097152)}function f2(_,E,P,F,V){var K=di(P)?qa:mn.current;return K=Io(E,K),ah(E,V),P=i2(_,E,P,F,K,V),F=s2(),_!==null&&!so?(E.updateQueue=_.updateQueue,E.flags&=-2053,_.lanes&=~V,Yl(_,E,V)):(fr&&F&&XM(E),E.flags|=1,ps(_,E,P,V),E.child)}function NI(_,E,P,F,V){if(di(P)){var K=!0;_i(E)}else K=!1;if(ah(E,V),E.stateNode===null)_!==null&&(_.alternate=null,E.alternate=null,E.flags|=2),Wk(E,P,F),qM(E,P,F,V),F=!0;else if(_===null){var Se=E.stateNode,Be=E.memoizedProps;Se.props=Be;var Qe=Se.context,ct=P.contextType;typeof ct=="object"&&ct!==null?ct=Lo(ct):(ct=di(P)?qa:mn.current,ct=Io(E,ct));var Tt=P.getDerivedStateFromProps,sn=typeof Tt=="function"||typeof Se.getSnapshotBeforeUpdate=="function";sn||typeof Se.UNSAFE_componentWillReceiveProps!="function"&&typeof Se.componentWillReceiveProps!="function"||(Be!==F||Qe!==ct)&&jk(E,Se,F,ct),ju=!1;var jt=E.memoizedState;Se.state=jt,c1(E,F,Se,V),Qe=E.memoizedState,Be!==F||jt!==Qe||Tr.current||ju?(typeof Tt=="function"&&(GM(E,P,Tt,F),Qe=E.memoizedState),(Be=ju||Hk(E,P,Be,F,jt,Qe,ct))?(sn||typeof Se.UNSAFE_componentWillMount!="function"&&typeof Se.componentWillMount!="function"||(typeof Se.componentWillMount=="function"&&Se.componentWillMount(),typeof Se.UNSAFE_componentWillMount=="function"&&Se.UNSAFE_componentWillMount()),typeof Se.componentDidMount=="function"&&(E.flags|=4194308)):(typeof Se.componentDidMount=="function"&&(E.flags|=4194308),E.memoizedProps=F,E.memoizedState=Qe),Se.props=F,Se.state=Qe,Se.context=ct,F=Be):(typeof Se.componentDidMount=="function"&&(E.flags|=4194308),F=!1)}else{Se=E.stateNode,zk(_,E),Be=E.memoizedProps,ct=E.type===E.elementType?Be:ma(E.type,Be),Se.props=ct,sn=E.pendingProps,jt=Se.context,Qe=P.contextType,typeof Qe=="object"&&Qe!==null?Qe=Lo(Qe):(Qe=di(P)?qa:mn.current,Qe=Io(E,Qe));var Kn=P.getDerivedStateFromProps;(Tt=typeof Kn=="function"||typeof Se.getSnapshotBeforeUpdate=="function")||typeof Se.UNSAFE_componentWillReceiveProps!="function"&&typeof Se.componentWillReceiveProps!="function"||(Be!==sn||jt!==Qe)&&jk(E,Se,F,Qe),ju=!1,jt=E.memoizedState,Se.state=jt,c1(E,F,Se,V);var Ft=E.memoizedState;Be!==sn||jt!==Ft||Tr.current||ju?(typeof Kn=="function"&&(GM(E,P,Kn,F),Ft=E.memoizedState),(ct=ju||Hk(E,P,ct,F,jt,Ft,Qe)||!1)?(Tt||typeof Se.UNSAFE_componentWillUpdate!="function"&&typeof Se.componentWillUpdate!="function"||(typeof Se.componentWillUpdate=="function"&&Se.componentWillUpdate(F,Ft,Qe),typeof Se.UNSAFE_componentWillUpdate=="function"&&Se.UNSAFE_componentWillUpdate(F,Ft,Qe)),typeof Se.componentDidUpdate=="function"&&(E.flags|=4),typeof Se.getSnapshotBeforeUpdate=="function"&&(E.flags|=1024)):(typeof Se.componentDidUpdate!="function"||Be===_.memoizedProps&&jt===_.memoizedState||(E.flags|=4),typeof Se.getSnapshotBeforeUpdate!="function"||Be===_.memoizedProps&&jt===_.memoizedState||(E.flags|=1024),E.memoizedProps=F,E.memoizedState=Ft),Se.props=F,Se.state=Ft,Se.context=Qe,F=ct):(typeof Se.componentDidUpdate!="function"||Be===_.memoizedProps&&jt===_.memoizedState||(E.flags|=4),typeof Se.getSnapshotBeforeUpdate!="function"||Be===_.memoizedProps&&jt===_.memoizedState||(E.flags|=1024),F=!1)}return d2(_,E,P,F,K,V)}function d2(_,E,P,F,V,K){DI(_,E);var Se=(E.flags&128)!==0;if(!F&&!Se)return V&&sh(E,P,!1),Yl(_,E,K);F=E.stateNode,Ene.current=E;var Be=Se&&typeof P.getDerivedStateFromError!="function"?null:F.render();return E.flags|=1,_!==null&&Se?(E.child=fh(E,_.child,null,K),E.child=fh(E,null,Be,K)):ps(_,E,Be,K),E.memoizedState=F.state,V&&sh(E,P,!0),E.child}function PI(_){var E=_.stateNode;E.pendingContext?Xa(_,E.pendingContext,E.pendingContext!==E.context):E.context&&Xa(_,E.context,!1),QM(_,E.containerInfo)}function RI(_,E,P,F,V){return ch(),JM(V),E.flags|=256,ps(_,E,P,F),E.child}var M1={dehydrated:null,treeContext:null,retryLane:0};function C1(_){return{baseLanes:_,cachePool:null}}function OI(_,E,P){var F=E.pendingProps,V=vr.current,K=!1,Se=(E.flags&128)!==0,Be;if((Be=Se)||(Be=_!==null&&_.memoizedState===null?!1:(V&2)!==0),Be?(K=!0,E.flags&=-129):(_===null||_.memoizedState!==null)&&(V|=1),At(vr,V&1),_===null)return ZM(E),_=E.memoizedState,_!==null&&(_=_.dehydrated,_!==null)?(E.mode&1?rt(_)?E.lanes=8:E.lanes=1073741824:E.lanes=1,null):(V=F.children,_=F.fallback,K?(F=E.mode,K=E.child,V={mode:"hidden",children:V},!(F&1)&&K!==null?(K.childLanes=0,K.pendingProps=V):K=G1(V,F,0,null),_=Df(_,F,P,null),K.return=E,_.return=E,K.sibling=_,E.child=K,E.child.memoizedState=C1(P),E.memoizedState=M1,_):h2(E,V));if(V=_.memoizedState,V!==null){if(Be=V.dehydrated,Be!==null){if(Se)return E.flags&256?(E.flags&=-257,A1(_,E,P,Error(o(422)))):E.memoizedState!==null?(E.child=_.child,E.flags|=128,null):(K=F.fallback,V=E.mode,F=G1({mode:"visible",children:F.children},V,0,null),K=Df(K,V,P,null),K.flags|=2,F.return=E,K.return=E,F.sibling=K,E.child=F,E.mode&1&&fh(E,_.child,null,P),E.child.memoizedState=C1(P),E.memoizedState=M1,K);if(!(E.mode&1))E=A1(_,E,P,null);else if(rt(Be))E=A1(_,E,P,Error(o(419)));else if(F=(P&_.childLanes)!==0,so||F){if(F=Wr,F!==null){switch(P&-P){case 4:K=2;break;case 16:K=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:K=32;break;case 536870912:K=268435456;break;default:K=0}F=K&(F.suspendedLanes|P)?0:K,F!==0&&F!==V.retryLane&&(V.retryLane=F,$o(_,F,-1))}O2(),E=A1(_,E,P,Error(o(421)))}else Pt(Be)?(E.flags|=128,E.child=_.child,E=Fne.bind(null,_),Et(Be,E),E=null):(P=V.treeContext,Pe&&(io=er(Be),ro=E,fr=!0,ga=null,og=!1,P!==null&&(Fo[Bo++]=Gl,Fo[Bo++]=ql,Fo[Bo++]=wf,Gl=P.id,ql=P.overflow,wf=E)),E=h2(E,E.pendingProps.children),E.flags|=4096);return E}return K?(F=II(_,E,F.children,F.fallback,P),K=E.child,V=_.child.memoizedState,K.memoizedState=V===null?C1(P):{baseLanes:V.baseLanes|P,cachePool:null},K.childLanes=_.childLanes&~P,E.memoizedState=M1,F):(P=kI(_,E,F.children,P),E.memoizedState=null,P)}return K?(F=II(_,E,F.children,F.fallback,P),K=E.child,V=_.child.memoizedState,K.memoizedState=V===null?C1(P):{baseLanes:V.baseLanes|P,cachePool:null},K.childLanes=_.childLanes&~P,E.memoizedState=M1,F):(P=kI(_,E,F.children,P),E.memoizedState=null,P)}function h2(_,E){return E=G1({mode:"visible",children:E},_.mode,0,null),E.return=_,_.child=E}function kI(_,E,P,F){var V=_.child;return _=V.sibling,P=Zu(V,{mode:"visible",children:P}),!(E.mode&1)&&(P.lanes=F),P.return=E,P.sibling=null,_!==null&&(F=E.deletions,F===null?(E.deletions=[_],E.flags|=16):F.push(_)),E.child=P}function II(_,E,P,F,V){var K=E.mode;_=_.child;var Se=_.sibling,Be={mode:"hidden",children:P};return!(K&1)&&E.child!==_?(P=E.child,P.childLanes=0,P.pendingProps=Be,E.deletions=null):(P=Zu(_,Be),P.subtreeFlags=_.subtreeFlags&14680064),Se!==null?F=Zu(Se,F):(F=Df(F,K,V,null),F.flags|=2),F.return=E,P.return=E,P.sibling=F,E.child=P,F}function A1(_,E,P,F){return F!==null&&JM(F),fh(E,_.child,null,P),_=h2(E,E.pendingProps.children),_.flags|=2,E.memoizedState=null,_}function LI(_,E,P){_.lanes|=E;var F=_.alternate;F!==null&&(F.lanes|=E),WM(_.return,E,P)}function p2(_,E,P,F,V){var K=_.memoizedState;K===null?_.memoizedState={isBackwards:E,rendering:null,renderingStartTime:0,last:F,tail:P,tailMode:V}:(K.isBackwards=E,K.rendering=null,K.renderingStartTime=0,K.last=F,K.tail=P,K.tailMode=V)}function FI(_,E,P){var F=E.pendingProps,V=F.revealOrder,K=F.tail;if(ps(_,E,F.children,P),F=vr.current,F&2)F=F&1|2,E.flags|=128;else{if(_!==null&&_.flags&128)e:for(_=E.child;_!==null;){if(_.tag===13)_.memoizedState!==null&&LI(_,P,E);else if(_.tag===19)LI(_,P,E);else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===E)break e;for(;_.sibling===null;){if(_.return===null||_.return===E)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}F&=1}if(At(vr,F),!(E.mode&1))E.memoizedState=null;else switch(V){case"forwards":for(P=E.child,V=null;P!==null;)_=P.alternate,_!==null&&m1(_)===null&&(V=P),P=P.sibling;P=V,P===null?(V=E.child,E.child=null):(V=P.sibling,P.sibling=null),p2(E,!1,V,P,K);break;case"backwards":for(P=null,V=E.child,E.child=null;V!==null;){if(_=V.alternate,_!==null&&m1(_)===null){E.child=V;break}_=V.sibling,V.sibling=P,P=V,V=_}p2(E,!0,P,null,K);break;case"together":p2(E,!1,null,null,void 0);break;default:E.memoizedState=null}return E.child}function Yl(_,E,P){if(_!==null&&(E.dependencies=_.dependencies),gh|=E.lanes,!(P&E.childLanes))return null;if(_!==null&&E.child!==_.child)throw Error(o(153));if(E.child!==null){for(_=E.child,P=Zu(_,_.pendingProps),E.child=P,P.return=E;_.sibling!==null;)_=_.sibling,P=P.sibling=Zu(_,_.pendingProps),P.return=E;P.sibling=null}return E.child}function Mne(_,E,P){switch(E.tag){case 3:PI(E),ch();break;case 5:Qk(E);break;case 1:di(E.type)&&_i(E);break;case 4:QM(E,E.stateNode.containerInfo);break;case 10:Bk(E,E.type._context,E.memoizedProps.value);break;case 13:var F=E.memoizedState;if(F!==null)return F.dehydrated!==null?(At(vr,vr.current&1),E.flags|=128,null):P&E.child.childLanes?OI(_,E,P):(At(vr,vr.current&1),_=Yl(_,E,P),_!==null?_.sibling:null);At(vr,vr.current&1);break;case 19:if(F=(P&E.childLanes)!==0,_.flags&128){if(F)return FI(_,E,P);E.flags|=128}var V=E.memoizedState;if(V!==null&&(V.rendering=null,V.tail=null,V.lastEffect=null),At(vr,vr.current),F)break;return null;case 22:case 23:return E.lanes=0,TI(_,E,P)}return Yl(_,E,P)}function Cne(_,E){switch(YM(E),E.tag){case 1:return di(E.type)&&Ir(),_=E.flags,_&65536?(E.flags=_&-65537|128,E):null;case 3:return hh(),Kt(Tr),Kt(mn),n2(),_=E.flags,_&65536&&!(_&128)?(E.flags=_&-65537|128,E):null;case 5:return e2(E),null;case 13:if(Kt(vr),_=E.memoizedState,_!==null&&_.dehydrated!==null){if(E.alternate===null)throw Error(o(340));ch()}return _=E.flags,_&65536?(E.flags=_&-65537|128,E):null;case 19:return Kt(vr),null;case 4:return hh(),null;case 10:return HM(E.type._context),null;case 22:case 23:return R2(),null;case 24:return null;default:return null}}var T1=!1,Ef=!1,Ane=typeof WeakSet=="function"?WeakSet:Set,vt=null;function D1(_,E){var P=_.ref;if(P!==null)if(typeof P=="function")try{P(null)}catch(F){zs(_,E,F)}else P.current=null}function m2(_,E,P){try{P()}catch(F){zs(_,E,F)}}var BI=!1;function Tne(_,E){for(L(_.containerInfo),vt=E;vt!==null;)if(_=vt,E=_.child,(_.subtreeFlags&1028)!==0&&E!==null)E.return=_,vt=E;else for(;vt!==null;){_=vt;try{var P=_.alternate;if(_.flags&1024)switch(_.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var F=P.memoizedProps,V=P.memoizedState,K=_.stateNode,Se=K.getSnapshotBeforeUpdate(_.elementType===_.type?F:ma(_.type,F),V);K.__reactInternalSnapshotBeforeUpdate=Se}break;case 3:Ee&&Ze(_.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Be){zs(_,_.return,Be)}if(E=_.sibling,E!==null){E.return=_.return,vt=E;break}vt=_.return}return P=BI,BI=!1,P}function Mf(_,E,P){var F=E.updateQueue;if(F=F!==null?F.lastEffect:null,F!==null){var V=F=F.next;do{if((V.tag&_)===_){var K=V.destroy;V.destroy=void 0,K!==void 0&&m2(E,P,K)}V=V.next}while(V!==F)}}function yg(_,E){if(E=E.updateQueue,E=E!==null?E.lastEffect:null,E!==null){var P=E=E.next;do{if((P.tag&_)===_){var F=P.create;P.destroy=F()}P=P.next}while(P!==E)}}function g2(_){var E=_.ref;if(E!==null){var P=_.stateNode;switch(_.tag){case 5:_=D(P);break;default:_=P}typeof E=="function"?E(_):E.current=_}}function zI(_,E,P){if(Ya&&typeof Ya.onCommitFiberUnmount=="function")try{Ya.onCommitFiberUnmount(i1,E)}catch{}switch(E.tag){case 0:case 11:case 14:case 15:if(_=E.updateQueue,_!==null&&(_=_.lastEffect,_!==null)){var F=_=_.next;do{var V=F,K=V.destroy;V=V.tag,K!==void 0&&(V&2||V&4)&&m2(E,P,K),F=F.next}while(F!==_)}break;case 1:if(D1(E,P),_=E.stateNode,typeof _.componentWillUnmount=="function")try{_.props=E.memoizedProps,_.state=E.memoizedState,_.componentWillUnmount()}catch(Se){zs(E,P,Se)}break;case 5:D1(E,P);break;case 4:Ee?jI(_,E,P):re&&re&&(E=E.stateNode.containerInfo,P=ne(E),Ce(E,P))}}function UI(_,E,P){for(var F=E;;)if(zI(_,F,P),F.child===null||Ee&&F.tag===4){if(F===E)break;for(;F.sibling===null;){if(F.return===null||F.return===E)return;F=F.return}F.sibling.return=F.return,F=F.sibling}else F.child.return=F,F=F.child}function $I(_){var E=_.alternate;E!==null&&(_.alternate=null,$I(E)),_.child=null,_.deletions=null,_.sibling=null,_.tag===5&&(E=_.stateNode,E!==null&&Me(E)),_.stateNode=null,_.return=null,_.dependencies=null,_.memoizedProps=null,_.memoizedState=null,_.pendingProps=null,_.stateNode=null,_.updateQueue=null}function VI(_){return _.tag===5||_.tag===3||_.tag===4}function HI(_){e:for(;;){for(;_.sibling===null;){if(_.return===null||VI(_.return))return null;_=_.return}for(_.sibling.return=_.return,_=_.sibling;_.tag!==5&&_.tag!==6&&_.tag!==18;){if(_.flags&2||_.child===null||_.tag===4)continue e;_.child.return=_,_=_.child}if(!(_.flags&2))return _.stateNode}}function WI(_){if(Ee){e:{for(var E=_.return;E!==null;){if(VI(E))break e;E=E.return}throw Error(o(160))}var P=E;switch(P.tag){case 5:E=P.stateNode,P.flags&32&&(W(E),P.flags&=-33),P=HI(_),y2(_,P,E);break;case 3:case 4:E=P.stateNode.containerInfo,P=HI(_),v2(_,P,E);break;default:throw Error(o(161))}}}function v2(_,E,P){var F=_.tag;if(F===5||F===6)_=_.stateNode,E?ot(P,_,E):He(P,_);else if(F!==4&&(_=_.child,_!==null))for(v2(_,E,P),_=_.sibling;_!==null;)v2(_,E,P),_=_.sibling}function y2(_,E,P){var F=_.tag;if(F===5||F===6)_=_.stateNode,E?lt(P,_,E):Fe(P,_);else if(F!==4&&(_=_.child,_!==null))for(y2(_,E,P),_=_.sibling;_!==null;)y2(_,E,P),_=_.sibling}function jI(_,E,P){for(var F=E,V=!1,K,Se;;){if(!V){V=F.return;e:for(;;){if(V===null)throw Error(o(160));switch(K=V.stateNode,V.tag){case 5:Se=!1;break e;case 3:K=K.containerInfo,Se=!0;break e;case 4:K=K.containerInfo,Se=!0;break e}V=V.return}V=!0}if(F.tag===5||F.tag===6)UI(_,F,P),Se?We(K,F.stateNode):ye(K,F.stateNode);else if(F.tag===18)Se?je(K,F.stateNode):Ve(K,F.stateNode);else if(F.tag===4){if(F.child!==null){K=F.stateNode.containerInfo,Se=!0,F.child.return=F,F=F.child;continue}}else if(zI(_,F,P),F.child!==null){F.child.return=F,F=F.child;continue}if(F===E)break;for(;F.sibling===null;){if(F.return===null||F.return===E)return;F=F.return,F.tag===4&&(V=!1)}F.sibling.return=F.return,F=F.sibling}}function x2(_,E){if(Ee){switch(E.tag){case 0:case 11:case 14:case 15:Mf(3,E,E.return),yg(3,E),Mf(5,E,E.return);return;case 1:return;case 5:var P=E.stateNode;if(P!=null){var F=E.memoizedProps;_=_!==null?_.memoizedProps:F;var V=E.type,K=E.updateQueue;E.updateQueue=null,K!==null&&qe(P,K,V,_,F,E)}return;case 6:if(E.stateNode===null)throw Error(o(162));P=E.memoizedProps,Ie(E.stateNode,_!==null?_.memoizedProps:P,P);return;case 3:Pe&&_!==null&&_.memoizedState.isDehydrated&&Le(E.stateNode.containerInfo);return;case 12:return;case 13:N1(E);return;case 19:N1(E);return;case 17:return}throw Error(o(163))}switch(E.tag){case 0:case 11:case 14:case 15:Mf(3,E,E.return),yg(3,E),Mf(5,E,E.return);return;case 12:return;case 13:N1(E);return;case 19:N1(E);return;case 3:Pe&&_!==null&&_.memoizedState.isDehydrated&&Le(E.stateNode.containerInfo);break;case 22:case 23:return}e:if(re){switch(E.tag){case 1:case 5:case 6:break e;case 3:case 4:E=E.stateNode,Ce(E.containerInfo,E.pendingChildren);break e}throw Error(o(163))}}function N1(_){var E=_.updateQueue;if(E!==null){_.updateQueue=null;var P=_.stateNode;P===null&&(P=_.stateNode=new Ane),E.forEach(function(F){var V=Bne.bind(null,_,F);P.has(F)||(P.add(F),F.then(V,V))})}}function Dne(_,E){for(vt=E;vt!==null;){E=vt;var P=E.deletions;if(P!==null)for(var F=0;F<P.length;F++){var V=P[F];try{var K=_;Ee?jI(K,V,E):UI(K,V,E);var Se=V.alternate;Se!==null&&(Se.return=null),V.return=null}catch(Lt){zs(V,E,Lt)}}if(P=E.child,E.subtreeFlags&12854&&P!==null)P.return=E,vt=P;else for(;vt!==null;){E=vt;try{var Be=E.flags;if(Be&32&&Ee&&W(E.stateNode),Be&512){var Qe=E.alternate;if(Qe!==null){var ct=Qe.ref;ct!==null&&(typeof ct=="function"?ct(null):ct.current=null)}}if(Be&8192)switch(E.tag){case 13:if(E.memoizedState!==null){var Tt=E.alternate;(Tt===null||Tt.memoizedState===null)&&(C2=hi())}break;case 22:var sn=E.memoizedState!==null,jt=E.alternate,Kn=jt!==null&&jt.memoizedState!==null;if(P=E,Ee){e:if(F=P,V=sn,K=null,Ee)for(var Ft=F;;){if(Ft.tag===5){if(K===null){K=Ft;var Gi=Ft.stateNode;V?ve(Gi):Ye(Ft.stateNode,Ft.memoizedProps)}}else if(Ft.tag===6){if(K===null){var Ho=Ft.stateNode;V?ke(Ho):he(Ho,Ft.memoizedProps)}}else if((Ft.tag!==22&&Ft.tag!==23||Ft.memoizedState===null||Ft===F)&&Ft.child!==null){Ft.child.return=Ft,Ft=Ft.child;continue}if(Ft===F)break;for(;Ft.sibling===null;){if(Ft.return===null||Ft.return===F)break e;K===Ft&&(K=null),Ft=Ft.return}K===Ft&&(K=null),Ft.sibling.return=Ft.return,Ft=Ft.sibling}}if(sn&&!Kn&&P.mode&1){vt=P;for(var Ge=P.child;Ge!==null;){for(P=vt=Ge;vt!==null;){F=vt;var ze=F.child;switch(F.tag){case 0:case 11:case 14:case 15:Mf(4,F,F.return);break;case 1:D1(F,F.return);var Ke=F.stateNode;if(typeof Ke.componentWillUnmount=="function"){var xt=F.return;try{Ke.props=F.memoizedProps,Ke.state=F.memoizedState,Ke.componentWillUnmount()}catch(Lt){zs(F,xt,Lt)}}break;case 5:D1(F,F.return);break;case 22:if(F.memoizedState!==null){XI(P);continue}}ze!==null?(ze.return=F,vt=ze):XI(P)}Ge=Ge.sibling}}}switch(Be&4102){case 2:WI(E),E.flags&=-3;break;case 6:WI(E),E.flags&=-3,x2(E.alternate,E);break;case 4096:E.flags&=-4097;break;case 4100:E.flags&=-4097,x2(E.alternate,E);break;case 4:x2(E.alternate,E)}}catch(Lt){zs(E,E.return,Lt)}if(P=E.sibling,P!==null){P.return=E.return,vt=P;break}vt=E.return}}}function Nne(_,E,P){vt=_,GI(_)}function GI(_,E,P){for(var F=(_.mode&1)!==0;vt!==null;){var V=vt,K=V.child;if(V.tag===22&&F){var Se=V.memoizedState!==null||T1;if(!Se){var Be=V.alternate,Qe=Be!==null&&Be.memoizedState!==null||Ef;Be=T1;var ct=Ef;if(T1=Se,(Ef=Qe)&&!ct)for(vt=V;vt!==null;)Se=vt,Qe=Se.child,Se.tag===22&&Se.memoizedState!==null?YI(V):Qe!==null?(Qe.return=Se,vt=Qe):YI(V);for(;K!==null;)vt=K,GI(K),K=K.sibling;vt=V,T1=Be,Ef=ct}qI(_)}else V.subtreeFlags&8772&&K!==null?(K.return=V,vt=K):qI(_)}}function qI(_){for(;vt!==null;){var E=vt;if(E.flags&8772){var P=E.alternate;try{if(E.flags&8772)switch(E.tag){case 0:case 11:case 15:Ef||yg(5,E);break;case 1:var F=E.stateNode;if(E.flags&4&&!Ef)if(P===null)F.componentDidMount();else{var V=E.elementType===E.type?P.memoizedProps:ma(E.type,P.memoizedProps);F.componentDidUpdate(V,P.memoizedState,F.__reactInternalSnapshotBeforeUpdate)}var K=E.updateQueue;K!==null&&$k(E,K,F);break;case 3:var Se=E.updateQueue;if(Se!==null){if(P=null,E.child!==null)switch(E.child.tag){case 5:P=D(E.child.stateNode);break;case 1:P=E.child.stateNode}$k(E,Se,P)}break;case 5:var Be=E.stateNode;P===null&&E.flags&4&&Je(Be,E.type,E.memoizedProps,E);break;case 6:break;case 4:break;case 12:break;case 13:if(Pe&&E.memoizedState===null){var Qe=E.alternate;if(Qe!==null){var ct=Qe.memoizedState;if(ct!==null){var Tt=ct.dehydrated;Tt!==null&&Ue(Tt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Ef||E.flags&512&&g2(E)}catch(sn){zs(E,E.return,sn)}}if(E===_){vt=null;break}if(P=E.sibling,P!==null){P.return=E.return,vt=P;break}vt=E.return}}function XI(_){for(;vt!==null;){var E=vt;if(E===_){vt=null;break}var P=E.sibling;if(P!==null){P.return=E.return,vt=P;break}vt=E.return}}function YI(_){for(;vt!==null;){var E=vt;try{switch(E.tag){case 0:case 11:case 15:var P=E.return;try{yg(4,E)}catch(Qe){zs(E,P,Qe)}break;case 1:var F=E.stateNode;if(typeof F.componentDidMount=="function"){var V=E.return;try{F.componentDidMount()}catch(Qe){zs(E,V,Qe)}}var K=E.return;try{g2(E)}catch(Qe){zs(E,K,Qe)}break;case 5:var Se=E.return;try{g2(E)}catch(Qe){zs(E,Se,Qe)}}}catch(Qe){zs(E,E.return,Qe)}if(E===_){vt=null;break}var Be=E.sibling;if(Be!==null){Be.return=E.return,vt=Be;break}vt=E.return}}var P1=0,R1=1,O1=2,k1=3,I1=4;if(typeof Symbol=="function"&&Symbol.for){var xg=Symbol.for;P1=xg("selector.component"),R1=xg("selector.has_pseudo_class"),O1=xg("selector.role"),k1=xg("selector.test_id"),I1=xg("selector.text")}function b2(_){var E=Re(_);if(E!=null){if(typeof E.memoizedProps["data-testname"]!="string")throw Error(o(364));return E}if(_=de(_),_===null)throw Error(o(362));return _.stateNode.current}function w2(_,E){switch(E.$$typeof){case P1:if(_.type===E.value)return!0;break;case R1:e:{E=E.value,_=[_,0];for(var P=0;P<_.length;){var F=_[P++],V=_[P++],K=E[V];if(F.tag!==5||!Q(F)){for(;K!=null&&w2(F,K);)V++,K=E[V];if(V===E.length){E=!0;break e}else for(F=F.child;F!==null;)_.push(F,V),F=F.sibling}}E=!1}return E;case O1:if(_.tag===5&&be(_.stateNode,E.value))return!0;break;case I1:if((_.tag===5||_.tag===6)&&(_=X(_),_!==null&&0<=_.indexOf(E.value)))return!0;break;case k1:if(_.tag===5&&(_=_.memoizedProps["data-testname"],typeof _=="string"&&_.toLowerCase()===E.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function S2(_){switch(_.$$typeof){case P1:return"<"+(M(_.value)||"Unknown")+">";case R1:return":has("+(S2(_)||"")+")";case O1:return'[role="'+_.value+'"]';case I1:return'"'+_.value+'"';case k1:return'[data-testname="'+_.value+'"]';default:throw Error(o(365))}}function KI(_,E){var P=[];_=[_,0];for(var F=0;F<_.length;){var V=_[F++],K=_[F++],Se=E[K];if(V.tag!==5||!Q(V)){for(;Se!=null&&w2(V,Se);)K++,Se=E[K];if(K===E.length)P.push(V);else for(V=V.child;V!==null;)_.push(V,K),V=V.sibling}}return P}function _2(_,E){if(!j)throw Error(o(363));_=b2(_),_=KI(_,E),E=[],_=Array.from(_);for(var P=0;P<_.length;){var F=_[P++];if(F.tag===5)Q(F)||E.push(F.stateNode);else for(F=F.child;F!==null;)_.push(F),F=F.sibling}return E}var Pne=Math.ceil,L1=a.ReactCurrentDispatcher,E2=a.ReactCurrentOwner,Lr=a.ReactCurrentBatchConfig,gn=0,Wr=null,jr=null,Ei=0,oo=0,mh=fi(0),Qr=0,bg=null,gh=0,F1=0,M2=0,wg=null,Fs=null,C2=0,A2=1/0;function vh(){A2=hi()+500}var B1=!1,T2=null,qu=null,z1=!1,Xu=null,U1=0,Sg=0,D2=null,$1=-1,V1=0;function ms(){return gn&6?hi():$1!==-1?$1:$1=hi()}function Yu(_){return _.mode&1?gn&2&&Ei!==0?Ei&-Ei:hne.transition!==null?(V1===0&&(_=t1,t1<<=1,!(t1&4194240)&&(t1=64),V1=_),V1):(_=Dn,_!==0?_:ie()):1}function $o(_,E,P){if(50<Sg)throw Sg=0,D2=null,Error(o(185));var F=H1(_,E);return F===null?null:(sg(F,E,P),(!(gn&2)||F!==Wr)&&(F===Wr&&(!(gn&2)&&(F1|=E),Qr===4&&Ku(F,Ei)),Bs(F,P),E===1&&gn===0&&!(_.mode&1)&&(vh(),s1&&Za())),F)}function H1(_,E){_.lanes|=E;var P=_.alternate;for(P!==null&&(P.lanes|=E),P=_,_=_.return;_!==null;)_.childLanes|=E,P=_.alternate,P!==null&&(P.childLanes|=E),P=_,_=_.return;return P.tag===3?P.stateNode:null}function Bs(_,E){var P=_.callbackNode;ine(_,E);var F=r1(_,_===Wr?Ei:0);if(F===0)P!==null&&Lk(P),_.callbackNode=null,_.callbackPriority=0;else if(E=F&-F,_.callbackPriority!==E){if(P!=null&&Lk(P),E===1)_.tag===0?dne(JI.bind(null,_)):Fk(JI.bind(null,_)),oe?G(function(){gn===0&&Za()}):FM(BM,Za),P=null;else{switch(Ik(F)){case 1:P=BM;break;case 4:P=lne;break;case 16:P=zM;break;case 536870912:P=une;break;default:P=zM}P=aL(P,ZI.bind(null,_))}_.callbackPriority=E,_.callbackNode=P}}function ZI(_,E){if($1=-1,V1=0,gn&6)throw Error(o(327));var P=_.callbackNode;if(Tf()&&_.callbackNode!==P)return null;var F=r1(_,_===Wr?Ei:0);if(F===0)return null;if(F&30||F&_.expiredLanes||E)E=W1(_,F);else{E=F;var V=gn;gn|=2;var K=tL();(Wr!==_||Ei!==E)&&(vh(),Cf(_,E));do try{kne();break}catch(Be){eL(_,Be)}while(!0);VM(),L1.current=K,gn=V,jr!==null?E=0:(Wr=null,Ei=0,E=Qr)}if(E!==0){if(E===2&&(V=kM(_),V!==0&&(F=V,E=N2(_,V))),E===1)throw P=bg,Cf(_,0),Ku(_,F),Bs(_,hi()),P;if(E===6)Ku(_,F);else{if(V=_.current.alternate,!(F&30)&&!Rne(V)&&(E=W1(_,F),E===2&&(K=kM(_),K!==0&&(F=K,E=N2(_,K))),E===1))throw P=bg,Cf(_,0),Ku(_,F),Bs(_,hi()),P;switch(_.finishedWork=V,_.finishedLanes=F,E){case 0:case 1:throw Error(o(345));case 2:Af(_,Fs);break;case 3:if(Ku(_,F),(F&130023424)===F&&(E=C2+500-hi(),10<E)){if(r1(_,0)!==0)break;if(V=_.suspendedLanes,(V&F)!==F){ms(),_.pingedLanes|=_.suspendedLanes&V;break}_.timeoutHandle=pe(Af.bind(null,_,Fs),E);break}Af(_,Fs);break;case 4:if(Ku(_,F),(F&4194240)===F)break;for(E=_.eventTimes,V=-1;0<F;){var Se=31-no(F);K=1<<Se,Se=E[Se],Se>V&&(V=Se),F&=~K}if(F=V,F=hi()-F,F=(120>F?120:480>F?480:1080>F?1080:1920>F?1920:3e3>F?3e3:4320>F?4320:1960*Pne(F/1960))-F,10<F){_.timeoutHandle=pe(Af.bind(null,_,Fs),F);break}Af(_,Fs);break;case 5:Af(_,Fs);break;default:throw Error(o(329))}}}return Bs(_,hi()),_.callbackNode===P?ZI.bind(null,_):null}function N2(_,E){var P=wg;return _.current.memoizedState.isDehydrated&&(Cf(_,E).flags|=256),_=W1(_,E),_!==2&&(E=Fs,Fs=P,E!==null&&P2(E)),_}function P2(_){Fs===null?Fs=_:Fs.push.apply(Fs,_)}function Rne(_){for(var E=_;;){if(E.flags&16384){var P=E.updateQueue;if(P!==null&&(P=P.stores,P!==null))for(var F=0;F<P.length;F++){var V=P[F],K=V.getSnapshot;V=V.value;try{if(!Ka(K(),V))return!1}catch{return!1}}}if(P=E.child,E.subtreeFlags&16384&&P!==null)P.return=E,E=P;else{if(E===_)break;for(;E.sibling===null;){if(E.return===null||E.return===_)return!0;E=E.return}E.sibling.return=E.return,E=E.sibling}}return!0}function Ku(_,E){for(E&=~M2,E&=~F1,_.suspendedLanes|=E,_.pingedLanes&=~E,_=_.expirationTimes;0<E;){var P=31-no(E),F=1<<P;_[P]=-1,E&=~F}}function JI(_){if(gn&6)throw Error(o(327));Tf();var E=r1(_,0);if(!(E&1))return Bs(_,hi()),null;var P=W1(_,E);if(_.tag!==0&&P===2){var F=kM(_);F!==0&&(E=F,P=N2(_,F))}if(P===1)throw P=bg,Cf(_,0),Ku(_,E),Bs(_,hi()),P;if(P===6)throw Error(o(345));return _.finishedWork=_.current.alternate,_.finishedLanes=E,Af(_,Fs),Bs(_,hi()),null}function QI(_){Xu!==null&&Xu.tag===0&&!(gn&6)&&Tf();var E=gn;gn|=1;var P=Lr.transition,F=Dn;try{if(Lr.transition=null,Dn=1,_)return _()}finally{Dn=F,Lr.transition=P,gn=E,!(gn&6)&&Za()}}function R2(){oo=mh.current,Kt(mh)}function Cf(_,E){_.finishedWork=null,_.finishedLanes=0;var P=_.timeoutHandle;if(P!==me&&(_.timeoutHandle=me,we(P)),jr!==null)for(P=jr.return;P!==null;){var F=P;switch(YM(F),F.tag){case 1:F=F.type.childContextTypes,F!=null&&Ir();break;case 3:hh(),Kt(Tr),Kt(mn),n2();break;case 5:e2(F);break;case 4:hh();break;case 13:Kt(vr);break;case 19:Kt(vr);break;case 10:HM(F.type._context);break;case 22:case 23:R2()}P=P.return}if(Wr=_,jr=_=Zu(_.current,null),Ei=oo=E,Qr=0,bg=null,M2=F1=gh=0,Fs=wg=null,Ja!==null){for(E=0;E<Ja.length;E++)if(P=Ja[E],F=P.interleaved,F!==null){P.interleaved=null;var V=F.next,K=P.pending;if(K!==null){var Se=K.next;K.next=V,F.next=Se}P.pending=F}Ja=null}return _}function eL(_,E){do{var P=jr;try{if(VM(),g1.current=S1,v1){for(var F=Dr.memoizedState;F!==null;){var V=F.queue;V!==null&&(V.pending=null),F=F.next}v1=!1}if(ph=0,pi=Hi=Dr=null,fg=!1,dg=0,E2.current=null,P===null||P.return===null){Qr=1,bg=E,jr=null;break}e:{var K=_,Se=P.return,Be=P,Qe=E;if(E=Ei,Be.flags|=32768,Qe!==null&&typeof Qe=="object"&&typeof Qe.then=="function"){var ct=Qe,Tt=Be,sn=Tt.tag;if(!(Tt.mode&1)&&(sn===0||sn===11||sn===15)){var jt=Tt.alternate;jt?(Tt.updateQueue=jt.updateQueue,Tt.memoizedState=jt.memoizedState,Tt.lanes=jt.lanes):(Tt.updateQueue=null,Tt.memoizedState=null)}var Kn=wI(Se);if(Kn!==null){Kn.flags&=-257,SI(Kn,Se,Be,K,E),Kn.mode&1&&bI(K,ct,E),E=Kn,Qe=ct;var Ft=E.updateQueue;if(Ft===null){var Gi=new Set;Gi.add(Qe),E.updateQueue=Gi}else Ft.add(Qe);break e}else{if(!(E&1)){bI(K,ct,E),O2();break e}Qe=Error(o(426))}}else if(fr&&Be.mode&1){var Ho=wI(Se);if(Ho!==null){!(Ho.flags&65536)&&(Ho.flags|=256),SI(Ho,Se,Be,K,E),JM(Qe);break e}}K=Qe,Qr!==4&&(Qr=2),wg===null?wg=[K]:wg.push(K),Qe=u2(Qe,Be),Be=Se;do{switch(Be.tag){case 3:Be.flags|=65536,E&=-E,Be.lanes|=E;var Ge=yI(Be,Qe,E);Uk(Be,Ge);break e;case 1:K=Qe;var ze=Be.type,Ke=Be.stateNode;if(!(Be.flags&128)&&(typeof ze.getDerivedStateFromError=="function"||Ke!==null&&typeof Ke.componentDidCatch=="function"&&(qu===null||!qu.has(Ke)))){Be.flags|=65536,E&=-E,Be.lanes|=E;var xt=xI(Be,K,E);Uk(Be,xt);break e}}Be=Be.return}while(Be!==null)}rL(P)}catch(Lt){E=Lt,jr===P&&P!==null&&(jr=P=P.return);continue}break}while(!0)}function tL(){var _=L1.current;return L1.current=S1,_===null?S1:_}function O2(){(Qr===0||Qr===3||Qr===2)&&(Qr=4),Wr===null||!(gh&268435455)&&!(F1&268435455)||Ku(Wr,Ei)}function W1(_,E){var P=gn;gn|=2;var F=tL();Wr===_&&Ei===E||Cf(_,E);do try{One();break}catch(V){eL(_,V)}while(!0);if(VM(),gn=P,L1.current=F,jr!==null)throw Error(o(261));return Wr=null,Ei=0,Qr}function One(){for(;jr!==null;)nL(jr)}function kne(){for(;jr!==null&&!one();)nL(jr)}function nL(_){var E=oL(_.alternate,_,oo);_.memoizedProps=_.pendingProps,E===null?rL(_):jr=E,E2.current=null}function rL(_){var E=_;do{var P=E.alternate;if(_=E.return,E.flags&32768){if(P=Cne(P,E),P!==null){P.flags&=32767,jr=P;return}if(_!==null)_.flags|=32768,_.subtreeFlags=0,_.deletions=null;else{Qr=6,jr=null;return}}else if(P=_ne(P,E,oo),P!==null){jr=P;return}if(E=E.sibling,E!==null){jr=E;return}jr=E=_}while(E!==null);Qr===0&&(Qr=5)}function Af(_,E){var P=Dn,F=Lr.transition;try{Lr.transition=null,Dn=1,Ine(_,E,P)}finally{Lr.transition=F,Dn=P}return null}function Ine(_,E,P){do Tf();while(Xu!==null);if(gn&6)throw Error(o(327));var F=_.finishedWork,V=_.finishedLanes;if(F===null)return null;if(_.finishedWork=null,_.finishedLanes=0,F===_.current)throw Error(o(177));_.callbackNode=null,_.callbackPriority=0;var K=F.lanes|F.childLanes;if(sne(_,K),_===Wr&&(jr=Wr=null,Ei=0),!(F.subtreeFlags&2064)&&!(F.flags&2064)||z1||(z1=!0,aL(zM,function(){return Tf(),null})),K=(F.flags&15990)!==0,F.subtreeFlags&15990||K){K=Lr.transition,Lr.transition=null;var Se=Dn;Dn=1;var Be=gn;gn|=4,E2.current=null,Tne(_,F),Dne(_,F),q(_.containerInfo),_.current=F,Nne(F),ane(),gn=Be,Dn=Se,Lr.transition=K}else _.current=F;if(z1&&(z1=!1,Xu=_,U1=V),K=_.pendingLanes,K===0&&(qu=null),cne(F.stateNode),Bs(_,hi()),E!==null)for(P=_.onRecoverableError,F=0;F<E.length;F++)P(E[F]);if(B1)throw B1=!1,_=T2,T2=null,_;return U1&1&&_.tag!==0&&Tf(),K=_.pendingLanes,K&1?_===D2?Sg++:(Sg=0,D2=_):Sg=0,Za(),null}function Tf(){if(Xu!==null){var _=Ik(U1),E=Lr.transition,P=Dn;try{if(Lr.transition=null,Dn=16>_?16:_,Xu===null)var F=!1;else{if(_=Xu,Xu=null,U1=0,gn&6)throw Error(o(331));var V=gn;for(gn|=4,vt=_.current;vt!==null;){var K=vt,Se=K.child;if(vt.flags&16){var Be=K.deletions;if(Be!==null){for(var Qe=0;Qe<Be.length;Qe++){var ct=Be[Qe];for(vt=ct;vt!==null;){var Tt=vt;switch(Tt.tag){case 0:case 11:case 15:Mf(8,Tt,K)}var sn=Tt.child;if(sn!==null)sn.return=Tt,vt=sn;else for(;vt!==null;){Tt=vt;var jt=Tt.sibling,Kn=Tt.return;if($I(Tt),Tt===ct){vt=null;break}if(jt!==null){jt.return=Kn,vt=jt;break}vt=Kn}}}var Ft=K.alternate;if(Ft!==null){var Gi=Ft.child;if(Gi!==null){Ft.child=null;do{var Ho=Gi.sibling;Gi.sibling=null,Gi=Ho}while(Gi!==null)}}vt=K}}if(K.subtreeFlags&2064&&Se!==null)Se.return=K,vt=Se;else e:for(;vt!==null;){if(K=vt,K.flags&2048)switch(K.tag){case 0:case 11:case 15:Mf(9,K,K.return)}var Ge=K.sibling;if(Ge!==null){Ge.return=K.return,vt=Ge;break e}vt=K.return}}var ze=_.current;for(vt=ze;vt!==null;){Se=vt;var Ke=Se.child;if(Se.subtreeFlags&2064&&Ke!==null)Ke.return=Se,vt=Ke;else e:for(Se=ze;vt!==null;){if(Be=vt,Be.flags&2048)try{switch(Be.tag){case 0:case 11:case 15:yg(9,Be)}}catch(Lt){zs(Be,Be.return,Lt)}if(Be===Se){vt=null;break e}var xt=Be.sibling;if(xt!==null){xt.return=Be.return,vt=xt;break e}vt=Be.return}}if(gn=V,Za(),Ya&&typeof Ya.onPostCommitFiberRoot=="function")try{Ya.onPostCommitFiberRoot(i1,_)}catch{}F=!0}return F}finally{Dn=P,Lr.transition=E}}return!1}function iL(_,E,P){E=u2(P,E),E=yI(_,E,1),Gu(_,E),E=ms(),_=H1(_,1),_!==null&&(sg(_,1,E),Bs(_,E))}function zs(_,E,P){if(_.tag===3)iL(_,_,P);else for(;E!==null;){if(E.tag===3){iL(E,_,P);break}else if(E.tag===1){var F=E.stateNode;if(typeof E.type.getDerivedStateFromError=="function"||typeof F.componentDidCatch=="function"&&(qu===null||!qu.has(F))){_=u2(P,_),_=xI(E,_,1),Gu(E,_),_=ms(),E=H1(E,1),E!==null&&(sg(E,1,_),Bs(E,_));break}}E=E.return}}function Lne(_,E,P){var F=_.pingCache;F!==null&&F.delete(E),E=ms(),_.pingedLanes|=_.suspendedLanes&P,Wr===_&&(Ei&P)===P&&(Qr===4||Qr===3&&(Ei&130023424)===Ei&&500>hi()-C2?Cf(_,0):M2|=P),Bs(_,E)}function sL(_,E){E===0&&(_.mode&1?(E=n1,n1<<=1,!(n1&130023424)&&(n1=4194304)):E=1);var P=ms();_=H1(_,E),_!==null&&(sg(_,E,P),Bs(_,P))}function Fne(_){var E=_.memoizedState,P=0;E!==null&&(P=E.retryLane),sL(_,P)}function Bne(_,E){var P=0;switch(_.tag){case 13:var F=_.stateNode,V=_.memoizedState;V!==null&&(P=V.retryLane);break;case 19:F=_.stateNode;break;default:throw Error(o(314))}F!==null&&F.delete(E),sL(_,P)}var oL;oL=function(_,E,P){if(_!==null)if(_.memoizedProps!==E.pendingProps||Tr.current)so=!0;else{if(!(_.lanes&P)&&!(E.flags&128))return so=!1,Mne(_,E,P);so=!!(_.flags&131072)}else so=!1,fr&&E.flags&1048576&&Gk(E,h1,E.index);switch(E.lanes=0,E.tag){case 2:var F=E.type;_!==null&&(_.alternate=null,E.alternate=null,E.flags|=2),_=E.pendingProps;var V=Io(E,mn.current);ah(E,P),V=i2(null,E,F,_,V,P);var K=s2();return E.flags|=1,typeof V=="object"&&V!==null&&typeof V.render=="function"&&V.$$typeof===void 0?(E.tag=1,E.memoizedState=null,E.updateQueue=null,di(F)?(K=!0,_i(E)):K=!1,E.memoizedState=V.state!==null&&V.state!==void 0?V.state:null,jM(E),V.updater=f1,E.stateNode=V,V._reactInternals=E,qM(E,F,_,P),E=d2(null,E,F,!0,K,P)):(E.tag=0,fr&&K&&XM(E),ps(null,E,V,P),E=E.child),E;case 16:F=E.elementType;e:{switch(_!==null&&(_.alternate=null,E.alternate=null,E.flags|=2),_=E.pendingProps,V=F._init,F=V(F._payload),E.type=F,V=E.tag=Une(F),_=ma(F,_),V){case 0:E=f2(null,E,F,_,P);break e;case 1:E=NI(null,E,F,_,P);break e;case 11:E=MI(null,E,F,_,P);break e;case 14:E=CI(null,E,F,ma(F.type,_),P);break e}throw Error(o(306,F,""))}return E;case 0:return F=E.type,V=E.pendingProps,V=E.elementType===F?V:ma(F,V),f2(_,E,F,V,P);case 1:return F=E.type,V=E.pendingProps,V=E.elementType===F?V:ma(F,V),NI(_,E,F,V,P);case 3:e:{if(PI(E),_===null)throw Error(o(387));F=E.pendingProps,K=E.memoizedState,V=K.element,zk(_,E),c1(E,F,null,P);var Se=E.memoizedState;if(F=Se.element,Pe&&K.isDehydrated)if(K={element:F,isDehydrated:!1,cache:Se.cache,transitions:Se.transitions},E.updateQueue.baseState=K,E.memoizedState=K,E.flags&256){V=Error(o(423)),E=RI(_,E,F,P,V);break e}else if(F!==V){V=Error(o(424)),E=RI(_,E,F,P,V);break e}else for(Pe&&(io=Ar(E.stateNode.containerInfo),ro=E,fr=!0,ga=null,og=!1),P=Jk(E,null,F,P),E.child=P;P;)P.flags=P.flags&-3|4096,P=P.sibling;else{if(ch(),F===V){E=Yl(_,E,P);break e}ps(_,E,F,P)}E=E.child}return E;case 5:return Qk(E),_===null&&ZM(E),F=E.type,V=E.pendingProps,K=_!==null?_.memoizedProps:null,Se=V.children,ae(F,V)?Se=null:K!==null&&ae(F,K)&&(E.flags|=32),DI(_,E),ps(_,E,Se,P),E.child;case 6:return _===null&&ZM(E),null;case 13:return OI(_,E,P);case 4:return QM(E,E.stateNode.containerInfo),F=E.pendingProps,_===null?E.child=fh(E,null,F,P):ps(_,E,F,P),E.child;case 11:return F=E.type,V=E.pendingProps,V=E.elementType===F?V:ma(F,V),MI(_,E,F,V,P);case 7:return ps(_,E,E.pendingProps,P),E.child;case 8:return ps(_,E,E.pendingProps.children,P),E.child;case 12:return ps(_,E,E.pendingProps.children,P),E.child;case 10:e:{if(F=E.type._context,V=E.pendingProps,K=E.memoizedProps,Se=V.value,Bk(E,F,Se),K!==null)if(Ka(K.value,Se)){if(K.children===V.children&&!Tr.current){E=Yl(_,E,P);break e}}else for(K=E.child,K!==null&&(K.return=E);K!==null;){var Be=K.dependencies;if(Be!==null){Se=K.child;for(var Qe=Be.firstContext;Qe!==null;){if(Qe.context===F){if(K.tag===1){Qe=jl(-1,P&-P),Qe.tag=2;var ct=K.updateQueue;if(ct!==null){ct=ct.shared;var Tt=ct.pending;Tt===null?Qe.next=Qe:(Qe.next=Tt.next,Tt.next=Qe),ct.pending=Qe}}K.lanes|=P,Qe=K.alternate,Qe!==null&&(Qe.lanes|=P),WM(K.return,P,E),Be.lanes|=P;break}Qe=Qe.next}}else if(K.tag===10)Se=K.type===E.type?null:K.child;else if(K.tag===18){if(Se=K.return,Se===null)throw Error(o(341));Se.lanes|=P,Be=Se.alternate,Be!==null&&(Be.lanes|=P),WM(Se,P,E),Se=K.sibling}else Se=K.child;if(Se!==null)Se.return=K;else for(Se=K;Se!==null;){if(Se===E){Se=null;break}if(K=Se.sibling,K!==null){K.return=Se.return,Se=K;break}Se=Se.return}K=Se}ps(_,E,V.children,P),E=E.child}return E;case 9:return V=E.type,F=E.pendingProps.children,ah(E,P),V=Lo(V),F=F(V),E.flags|=1,ps(_,E,F,P),E.child;case 14:return F=E.type,V=ma(F,E.pendingProps),V=ma(F.type,V),CI(_,E,F,V,P);case 15:return AI(_,E,E.type,E.pendingProps,P);case 17:return F=E.type,V=E.pendingProps,V=E.elementType===F?V:ma(F,V),_!==null&&(_.alternate=null,E.alternate=null,E.flags|=2),E.tag=1,di(F)?(_=!0,_i(E)):_=!1,ah(E,P),Wk(E,F,V),qM(E,F,V,P),d2(null,E,F,!0,_,P);case 19:return FI(_,E,P);case 22:return TI(_,E,P)}throw Error(o(156,E.tag))};function aL(_,E){return FM(_,E)}function zne(_,E,P,F){this.tag=_,this.key=P,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=E,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=F,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vo(_,E,P,F){return new zne(_,E,P,F)}function k2(_){return _=_.prototype,!(!_||!_.isReactComponent)}function Une(_){if(typeof _=="function")return k2(_)?1:0;if(_!=null){if(_=_.$$typeof,_===v)return 11;if(_===S)return 14}return 2}function Zu(_,E){var P=_.alternate;return P===null?(P=Vo(_.tag,E,_.key,_.mode),P.elementType=_.elementType,P.type=_.type,P.stateNode=_.stateNode,P.alternate=_,_.alternate=P):(P.pendingProps=E,P.type=_.type,P.flags=0,P.subtreeFlags=0,P.deletions=null),P.flags=_.flags&14680064,P.childLanes=_.childLanes,P.lanes=_.lanes,P.child=_.child,P.memoizedProps=_.memoizedProps,P.memoizedState=_.memoizedState,P.updateQueue=_.updateQueue,E=_.dependencies,P.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext},P.sibling=_.sibling,P.index=_.index,P.ref=_.ref,P}function j1(_,E,P,F,V,K){var Se=2;if(F=_,typeof _=="function")k2(_)&&(Se=1);else if(typeof _=="string")Se=5;else e:switch(_){case c:return Df(P.children,V,K,E);case f:Se=8,V|=8;break;case d:return _=Vo(12,P,E,V|2),_.elementType=d,_.lanes=K,_;case y:return _=Vo(13,P,E,V),_.elementType=y,_.lanes=K,_;case p:return _=Vo(19,P,E,V),_.elementType=p,_.lanes=K,_;case g:return G1(P,V,K,E);default:if(typeof _=="object"&&_!==null)switch(_.$$typeof){case h:Se=10;break e;case m:Se=9;break e;case v:Se=11;break e;case S:Se=14;break e;case b:Se=16,F=null;break e}throw Error(o(130,_==null?_:typeof _,""))}return E=Vo(Se,P,E,V),E.elementType=_,E.type=F,E.lanes=K,E}function Df(_,E,P,F){return _=Vo(7,_,F,E),_.lanes=P,_}function G1(_,E,P,F){return _=Vo(22,_,F,E),_.elementType=g,_.lanes=P,_.stateNode={},_}function I2(_,E,P){return _=Vo(6,_,null,E),_.lanes=P,_}function L2(_,E,P){return E=Vo(4,_.children!==null?_.children:[],_.key,E),E.lanes=P,E.stateNode={containerInfo:_.containerInfo,pendingChildren:null,implementation:_.implementation},E}function $ne(_,E,P,F,V){this.tag=E,this.containerInfo=_,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=me,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=IM(0),this.expirationTimes=IM(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=IM(0),this.identifierPrefix=F,this.onRecoverableError=V,Pe&&(this.mutableSourceEagerHydrationData=null)}function lL(_,E,P,F,V,K,Se,Be,Qe){return _=new $ne(_,E,P,Be,Qe),E===1?(E=1,K===!0&&(E|=8)):E=0,K=Vo(3,null,null,E),_.current=K,K.stateNode=_,K.memoizedState={element:F,isDehydrated:P,cache:null,transitions:null},jM(K),_}function uL(_){if(!_)return ko;_=_._reactInternals;e:{if(N(_)!==_||_.tag!==1)throw Error(o(170));var E=_;do{switch(E.tag){case 3:E=E.stateNode.context;break e;case 1:if(di(E.type)){E=E.stateNode.__reactInternalMemoizedMergedChildContext;break e}}E=E.return}while(E!==null);throw Error(o(171))}if(_.tag===1){var P=_.type;if(di(P))return ih(_,P,E)}return E}function cL(_){var E=_._reactInternals;if(E===void 0)throw typeof _.render=="function"?Error(o(188)):(_=Object.keys(_).join(","),Error(o(268,_)));return _=R(E),_===null?null:_.stateNode}function fL(_,E){if(_=_.memoizedState,_!==null&&_.dehydrated!==null){var P=_.retryLane;_.retryLane=P!==0&&P<E?P:E}}function F2(_,E){fL(_,E),(_=_.alternate)&&fL(_,E)}function Vne(_){return _=R(_),_===null?null:_.stateNode}function Hne(){return null}return t.attemptContinuousHydration=function(_){if(_.tag===13){var E=ms();$o(_,134217728,E),F2(_,134217728)}},t.attemptHydrationAtCurrentPriority=function(_){if(_.tag===13){var E=ms(),P=Yu(_);$o(_,P,E),F2(_,P)}},t.attemptSynchronousHydration=function(_){switch(_.tag){case 3:var E=_.stateNode;if(E.current.memoizedState.isDehydrated){var P=ig(E.pendingLanes);P!==0&&(LM(E,P|1),Bs(E,hi()),!(gn&6)&&(vh(),Za()))}break;case 13:var F=ms();QI(function(){return $o(_,1,F)}),F2(_,1)}},t.batchedUpdates=function(_,E){var P=gn;gn|=1;try{return _(E)}finally{gn=P,gn===0&&(vh(),s1&&Za())}},t.createComponentSelector=function(_){return{$$typeof:P1,value:_}},t.createContainer=function(_,E,P,F,V,K,Se){return lL(_,E,!1,null,P,F,V,K,Se)},t.createHasPseudoClassSelector=function(_){return{$$typeof:R1,value:_}},t.createHydrationContainer=function(_,E,P,F,V,K,Se,Be,Qe){return _=lL(P,F,!0,_,V,K,Se,Be,Qe),_.context=uL(null),P=_.current,F=ms(),V=Yu(P),K=jl(F,V),K.callback=E??null,Gu(P,K),_.current.lanes=V,sg(_,V,F),Bs(_,F),_},t.createPortal=function(_,E,P){var F=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:F==null?null:""+F,children:_,containerInfo:E,implementation:P}},t.createRoleSelector=function(_){return{$$typeof:O1,value:_}},t.createTestNameSelector=function(_){return{$$typeof:k1,value:_}},t.createTextSelector=function(_){return{$$typeof:I1,value:_}},t.deferredUpdates=function(_){var E=Dn,P=Lr.transition;try{return Lr.transition=null,Dn=16,_()}finally{Dn=E,Lr.transition=P}},t.discreteUpdates=function(_,E,P,F,V){var K=Dn,Se=Lr.transition;try{return Lr.transition=null,Dn=1,_(E,P,F,V)}finally{Dn=K,Lr.transition=Se,gn===0&&vh()}},t.findAllNodes=_2,t.findBoundingRects=function(_,E){if(!j)throw Error(o(363));E=_2(_,E),_=[];for(var P=0;P<E.length;P++)_.push(Te(E[P]));for(E=_.length-1;0<E;E--){P=_[E];for(var F=P.x,V=F+P.width,K=P.y,Se=K+P.height,Be=E-1;0<=Be;Be--)if(E!==Be){var Qe=_[Be],ct=Qe.x,Tt=ct+Qe.width,sn=Qe.y,jt=sn+Qe.height;if(F>=ct&&K>=sn&&V<=Tt&&Se<=jt){_.splice(E,1);break}else if(F!==ct||P.width!==Qe.width||jt<K||sn>Se){if(!(K!==sn||P.height!==Qe.height||Tt<F||ct>V)){ct>F&&(Qe.width+=ct-F,Qe.x=F),Tt<V&&(Qe.width=V-ct),_.splice(E,1);break}}else{sn>K&&(Qe.height+=sn-K,Qe.y=K),jt<Se&&(Qe.height=Se-sn),_.splice(E,1);break}}}return _},t.findHostInstance=cL,t.findHostInstanceWithNoPortals=function(_){return _=T(_),_=_!==null?B(_):null,_===null?null:_.stateNode},t.findHostInstanceWithWarning=function(_){return cL(_)},t.flushControlled=function(_){var E=gn;gn|=1;var P=Lr.transition,F=Dn;try{Lr.transition=null,Dn=1,_()}finally{Dn=F,Lr.transition=P,gn=E,gn===0&&(vh(),Za())}},t.flushPassiveEffects=Tf,t.flushSync=QI,t.focusWithin=function(_,E){if(!j)throw Error(o(363));for(_=b2(_),E=KI(_,E),E=Array.from(E),_=0;_<E.length;){var P=E[_++];if(!Q(P)){if(P.tag===5&&_e(P.stateNode))return!0;for(P=P.child;P!==null;)E.push(P),P=P.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Dn},t.getFindAllNodesFailureDescription=function(_,E){if(!j)throw Error(o(363));var P=0,F=[];_=[b2(_),0];for(var V=0;V<_.length;){var K=_[V++],Se=_[V++],Be=E[Se];if((K.tag!==5||!Q(K))&&(w2(K,Be)&&(F.push(S2(Be)),Se++,Se>P&&(P=Se)),Se<E.length))for(K=K.child;K!==null;)_.push(K,Se),K=K.sibling}if(P<E.length){for(_=[];P<E.length;P++)_.push(S2(E[P]));return`findAllNodes was able to match part of the selector:
  `+(F.join(" > ")+`

No matching component was found for:
  `)+_.join(" > ")}return null},t.getPublicRootInstance=function(_){if(_=_.current,!_.child)return null;switch(_.child.tag){case 5:return D(_.child.stateNode);default:return _.child.stateNode}},t.injectIntoDevTools=function(_){if(_={bundleType:_.bundleType,version:_.version,rendererPackageName:_.rendererPackageName,rendererConfig:_.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:Vne,findFiberByHostInstance:_.findFiberByHostInstance||Hne,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")_=!1;else{var E=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(E.isDisabled||!E.supportsFiber)_=!0;else{try{i1=E.inject(_),Ya=E}catch{}_=!!E.checkDCE}}return _},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(_,E,P,F){if(!j)throw Error(o(363));_=_2(_,E);var V=Ne(_,P,F).disconnect;return{disconnect:function(){V()}}},t.registerMutableSourceForHydration=function(_,E){var P=E._getVersion;P=P(E._source),_.mutableSourceEagerHydrationData==null?_.mutableSourceEagerHydrationData=[E,P]:_.mutableSourceEagerHydrationData.push(E,P)},t.runWithPriority=function(_,E){var P=Dn;try{return Dn=_,E()}finally{Dn=P}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(_,E,P,F){var V=E.current,K=ms(),Se=Yu(V);return P=uL(P),E.context===null?E.context=P:E.pendingContext=P,E=jl(K,Se),E.payload={element:_},F=F===void 0?null:F,F!==null&&(E.callback=F),Gu(V,E),_=$o(V,Se,K),_!==null&&u1(_,V,Se),Se},t};mJ.exports=s9e;var o9e=mJ.exports;const a9e=fa(o9e),JO={},QO=n=>void Object.assign(JO,n);function l9e(n,e){function t(c,{args:f=[],attach:d,...h},m){let v=`${c[0].toUpperCase()}${c.slice(1)}`,y;if(c==="primitive"){if(h.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const p=h.object;y=op(p,{type:c,root:m,attach:d,primitive:!0})}else{const p=JO[v];if(!p)throw new Error(`R3F: ${v} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");y=op(new p(...f),{type:c,root:m,attach:d,memoizedProps:{args:f}})}return y.__r3f.attach===void 0&&(y instanceof rn?y.__r3f.attach="geometry":y instanceof $i&&(y.__r3f.attach="material")),v!=="inject"&&CA(y,h),y}function r(c,f){let d=!1;if(f){var h,m;(h=f.__r3f)!=null&&h.attach?MA(c,f,f.__r3f.attach):f.isObject3D&&c.isObject3D&&(c.add(f),d=!0),d||(m=c.__r3f)==null||m.objects.push(f),f.__r3f||op(f,{}),f.__r3f.parent=c,tN(f),ap(f)}}function i(c,f,d){let h=!1;if(f){var m,v;if((m=f.__r3f)!=null&&m.attach)MA(c,f,f.__r3f.attach);else if(f.isObject3D&&c.isObject3D){f.parent=c,f.dispatchEvent({type:"added"});const y=c.children.filter(S=>S!==f),p=y.indexOf(d);c.children=[...y.slice(0,p),f,...y.slice(p)],h=!0}h||(v=c.__r3f)==null||v.objects.push(f),f.__r3f||op(f,{}),f.__r3f.parent=c,tN(f),ap(f)}}function s(c,f,d=!1){c&&[...c].forEach(h=>o(f,h,d))}function o(c,f,d){if(f){var h,m,v;if(f.__r3f&&(f.__r3f.parent=null),(h=c.__r3f)!=null&&h.objects&&(c.__r3f.objects=c.__r3f.objects.filter(g=>g!==f)),(m=f.__r3f)!=null&&m.attach)k9(c,f,f.__r3f.attach);else if(f.isObject3D&&c.isObject3D){var y;c.remove(f),(y=f.__r3f)!=null&&y.root&&m9e(Vw(f),f)}const S=(v=f.__r3f)==null?void 0:v.primitive,b=!S&&(d===void 0?f.dispose!==null:d);if(!S){var p;s((p=f.__r3f)==null?void 0:p.objects,f,b),s(f.children,f,b)}if(delete f.__r3f,b&&f.dispose&&f.type!=="Scene"){const g=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?QD.unstable_scheduleCallback(QD.unstable_IdlePriority,g):g()}ap(c)}}function a(c,f,d,h){var m;const v=(m=c.__r3f)==null?void 0:m.parent;if(!v)return;const y=t(f,d,c.__r3f.root);if(c.children){for(const p of c.children)p.__r3f&&r(y,p);c.children=c.children.filter(p=>!p.__r3f)}c.__r3f.objects.forEach(p=>r(y,p)),c.__r3f.objects=[],c.__r3f.autoRemovedBeforeAppend||o(v,c),y.parent&&(y.__r3f.autoRemovedBeforeAppend=!0),r(v,y),y.raycast&&y.__r3f.eventCount&&Vw(y).getState().internal.interaction.push(y),[h,h.alternate].forEach(p=>{p!==null&&(p.stateNode=y,p.ref&&(typeof p.ref=="function"?p.ref(y):p.ref.current=y))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:a9e({createInstance:t,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(c,f)=>{if(!f)return;const d=c.getState().scene;d.__r3f&&(d.__r3f.root=c,r(d,f))},removeChildFromContainer:(c,f)=>{f&&o(c.getState().scene,f)},insertInContainerBefore:(c,f,d)=>{if(!f||!d)return;const h=c.getState().scene;h.__r3f&&i(h,f,d)},getRootHostContext:()=>null,getChildHostContext:c=>c,finalizeInitialChildren(c){var f;return!!((f=c==null?void 0:c.__r3f)!=null?f:{}).handlers},prepareUpdate(c,f,d,h){var m;if(((m=c==null?void 0:c.__r3f)!=null?m:{}).primitive&&h.object&&h.object!==c)return[!0];{const{args:y=[],children:p,...S}=h,{args:b=[],children:g,...w}=d;if(!Array.isArray(y))throw new Error("R3F: the args prop must be an array!");if(y.some((M,A)=>M!==b[A]))return[!0];const x=EJ(c,S,w,!0);return x.changes.length?[!1,x]:null}},commitUpdate(c,[f,d],h,m,v,y){f?a(c,h,v,y):CA(c,d)},commitMount(c,f,d,h){var m;const v=(m=c.__r3f)!=null?m:{};c.raycast&&v.handlers&&v.eventCount&&Vw(c).getState().internal.interaction.push(c)},getPublicInstance:c=>c,prepareForCommit:()=>null,preparePortalMount:c=>op(c.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(c){var f;const{attach:d,parent:h}=(f=c.__r3f)!=null?f:{};d&&h&&k9(h,c,d),c.isObject3D&&(c.visible=!1),ap(c)},unhideInstance(c,f){var d;const{attach:h,parent:m}=(d=c.__r3f)!=null?d:{};h&&m&&MA(m,c,h),(c.isObject3D&&f.visible==null||f.visible)&&(c.visible=!0),ap(c)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Np.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&dr.fun(performance.now)?performance.now:dr.fun(Date.now)?Date.now:()=>0,scheduleTimeout:dr.fun(setTimeout)?setTimeout:void 0,cancelTimeout:dr.fun(clearTimeout)?clearTimeout:void 0}),applyProps:CA}}var N9,P9;const EA=n=>"colorSpace"in n||"outputColorSpace"in n,yJ=()=>{var n;return(n=JO.ColorManagement)!=null?n:null},xJ=n=>n&&n.isOrthographicCamera,u9e=n=>n&&n.hasOwnProperty("current"),Hy=typeof window<"u"&&((N9=window.document)!=null&&N9.createElement||((P9=window.navigator)==null?void 0:P9.product)==="ReactNative")?k.useLayoutEffect:k.useEffect;function bJ(n){const e=k.useRef(n);return Hy(()=>void(e.current=n),[n]),e}function c9e({set:n}){return Hy(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class wJ extends k.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}wJ.getDerivedStateFromError=()=>({error:!0});const SJ="__default",R9=new Map,f9e=n=>n&&!!n.memoized&&!!n.changes;function _J(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Yg=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function Vw(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const dr={obj:n=>n===Object(n)&&!dr.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(dr.str(n)||dr.num(n))return n===e;const s=dr.obj(n);if(s&&r==="reference")return n===e;const o=dr.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&r==="shallow"){for(a in i?e:n)if(!dr.equ(n[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:n)if(n[a]!==e[a])return!1;if(dr.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function d9e(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function op(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function eN(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((s,o)=>s[o],n),{target:t,key:i}}else return{target:t,key:e}}const O9=/-\d+$/;function MA(n,e,t){if(dr.str(t)){if(O9.test(t)){const s=t.replace(O9,""),{target:o,key:a}=eN(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=eN(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function k9(n,e,t){var r,i;if(dr.str(t)){const{target:s,key:o}=eN(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function EJ(n,{children:e,key:t,ref:r,...i},{children:s,key:o,ref:a,...l}={},u=!1){var c;const f=(c=n==null?void 0:n.__r3f)!=null?c:{},d=Object.entries(i),h=[];if(u){const v=Object.keys(l);for(let y=0;y<v.length;y++)i.hasOwnProperty(v[y])||d.unshift([v[y],SJ+"remove"])}d.forEach(([v,y])=>{var p;if((p=n.__r3f)!=null&&p.primitive&&v==="object"||dr.equ(y,l[v]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(v))return h.push([v,y,!0,[]]);let S=[];v.includes("-")&&(S=v.split("-")),h.push([v,y,!1,S]);for(const b in i){const g=i[b];b.startsWith(`${v}-`)&&h.push([b,g,!1,b.split("-")])}});const m={...i};return f.memoizedProps&&f.memoizedProps.args&&(m.args=f.memoizedProps.args),f.memoizedProps&&f.memoizedProps.attach&&(m.attach=f.memoizedProps.attach),{memoized:m,changes:h}}const h9e=typeof process<"u"&&!1;function CA(n,e){var t,r,i;const s=(t=n.__r3f)!=null?t:{},o=s.root,a=(r=o==null||o.getState==null?void 0:o.getState())!=null?r:{},{memoized:l,changes:u}=f9e(e)?e:EJ(n,e),c=s.eventCount;n.__r3f&&(n.__r3f.memoizedProps=l);for(let d=0;d<u.length;d++){let[h,m,v,y]=u[d];if(EA(n)){const g="srgb",w="srgb-linear";h==="encoding"?(h="colorSpace",m=m===3001?g:w):h==="outputEncoding"&&(h="outputColorSpace",m=m===3001?g:w)}let p=n,S=p[h];if(y.length&&(S=y.reduce((b,g)=>b[g],n),!(S&&S.set))){const[b,...g]=y.reverse();p=g.reverse().reduce((w,x)=>w[x],n),h=b}if(m===SJ+"remove")if(p.constructor){let b=R9.get(p.constructor);b||(b=new p.constructor,R9.set(p.constructor,b)),m=b[h]}else m=0;if(v)m?s.handlers[h]=m:delete s.handlers[h],s.eventCount=Object.keys(s.handlers).length;else if(S&&S.set&&(S.copy||S instanceof bd)){if(Array.isArray(m))S.fromArray?S.fromArray(m):S.set(...m);else if(S.copy&&m&&m.constructor&&(h9e?S.constructor.name===m.constructor.name:S.constructor===m.constructor))S.copy(m);else if(m!==void 0){const b=S instanceof mt;!b&&S.setScalar?S.setScalar(m):S instanceof bd&&m instanceof bd?S.mask=m.mask:S.set(m),!yJ()&&!a.linear&&b&&S.convertSRGBToLinear()}}else if(p[h]=m,p[h]instanceof Er&&p[h].format===Ss&&p[h].type===Tl){const b=p[h];EA(b)&&EA(a.gl)?b.colorSpace=a.gl.outputColorSpace:b.encoding=a.gl.outputEncoding}ap(n)}if(s.parent&&n.raycast&&c!==s.eventCount){const d=Vw(n).getState().internal,h=d.interaction.indexOf(n);h>-1&&d.interaction.splice(h,1),s.eventCount&&d.interaction.push(n)}return!(u.length===1&&u[0][0]==="onUpdate")&&u.length&&(i=n.__r3f)!=null&&i.parent&&tN(n),n}function ap(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function tN(n){n.onUpdate==null||n.onUpdate(n)}function MJ(n,e){n.manual||(xJ(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function kb(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function p9e(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Np.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Np.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Np.ContinuousEventPriority;default:return Np.DefaultEventPriority}}function CJ(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function m9e(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{CJ(t.capturedMap,e,r,i)})}function g9e(n){function e(l){const{internal:u}=n.getState(),c=l.offsetX-u.initialClick[0],f=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(c*c+f*f))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(c=>{var f;return(f=u.__r3f)==null?void 0:f.handlers["onPointer"+c]}))}function r(l,u){const c=n.getState(),f=new Set,d=[],h=u?u(c.internal.interaction):c.internal.interaction;for(let p=0;p<h.length;p++){const S=Yg(h[p]);S&&(S.raycaster.camera=void 0)}c.previousRoot||c.events.compute==null||c.events.compute(l,c);function m(p){const S=Yg(p);if(!S||!S.events.enabled||S.raycaster.camera===null)return[];if(S.raycaster.camera===void 0){var b;S.events.compute==null||S.events.compute(l,S,(b=S.previousRoot)==null?void 0:b.getState()),S.raycaster.camera===void 0&&(S.raycaster.camera=null)}return S.raycaster.camera?S.raycaster.intersectObject(p,!0):[]}let v=h.flatMap(m).sort((p,S)=>{const b=Yg(p.object),g=Yg(S.object);return!b||!g?p.distance-S.distance:g.events.priority-b.events.priority||p.distance-S.distance}).filter(p=>{const S=kb(p);return f.has(S)?!1:(f.add(S),!0)});c.events.filter&&(v=c.events.filter(v,c));for(const p of v){let S=p.object;for(;S;){var y;(y=S.__r3f)!=null&&y.eventCount&&d.push({...p,eventObject:S}),S=S.parent}}if("pointerId"in l&&c.internal.capturedMap.has(l.pointerId))for(let p of c.internal.capturedMap.get(l.pointerId).values())f.has(kb(p.intersection))||d.push(p.intersection);return d}function i(l,u,c,f){const d=n.getState();if(l.length){const h={stopped:!1};for(const m of l){const v=Yg(m.object)||d,{raycaster:y,pointer:p,camera:S,internal:b}=v,g=new le(p.x,p.y,0).unproject(S),w=C=>{var T,R;return(T=(R=b.capturedMap.get(C))==null?void 0:R.has(m.eventObject))!=null?T:!1},x=C=>{const T={intersection:m,target:u.target};b.capturedMap.has(C)?b.capturedMap.get(C).set(m.eventObject,T):b.capturedMap.set(C,new Map([[m.eventObject,T]])),u.target.setPointerCapture(C)},M=C=>{const T=b.capturedMap.get(C);T&&CJ(b.capturedMap,m.eventObject,T,C)};let A={};for(let C in u){let T=u[C];typeof T!="function"&&(A[C]=T)}let N={...m,...A,pointer:p,intersections:l,stopped:h.stopped,delta:c,unprojectedPoint:g,ray:y.ray,camera:S,stopPropagation(){const C="pointerId"in u&&b.capturedMap.get(u.pointerId);if((!C||C.has(m.eventObject))&&(N.stopped=h.stopped=!0,b.hovered.size&&Array.from(b.hovered.values()).find(T=>T.eventObject===m.eventObject))){const T=l.slice(0,l.indexOf(m));s([...T,m])}},target:{hasPointerCapture:w,setPointerCapture:x,releasePointerCapture:M},currentTarget:{hasPointerCapture:w,setPointerCapture:x,releasePointerCapture:M},nativeEvent:u};if(f(N),h.stopped===!0)break}}return l}function s(l){const{internal:u}=n.getState();for(const c of u.hovered.values())if(!l.length||!l.find(f=>f.object===c.object&&f.index===c.index&&f.instanceId===c.instanceId)){const d=c.eventObject.__r3f,h=d==null?void 0:d.handlers;if(u.hovered.delete(kb(c)),d!=null&&d.eventCount){const m={...c,intersections:l};h.onPointerOut==null||h.onPointerOut(m),h.onPointerLeave==null||h.onPointerLeave(m)}}}function o(l,u){for(let c=0;c<u.length;c++){const f=u[c].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:c}=n.getState();"pointerId"in u&&c.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{c.capturedMap.has(u.pointerId)&&(c.capturedMap.delete(u.pointerId),s([]))})}}return function(c){const{onPointerMissed:f,internal:d}=n.getState();d.lastEvent.current=c;const h=l==="onPointerMove",m=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",y=r(c,h?t:void 0),p=m?e(c):0;l==="onPointerDown"&&(d.initialClick=[c.offsetX,c.offsetY],d.initialHits=y.map(b=>b.eventObject)),m&&!y.length&&p<=2&&(o(c,d.interaction),f&&f(c)),h&&s(y);function S(b){const g=b.eventObject,w=g.__r3f,x=w==null?void 0:w.handlers;if(w!=null&&w.eventCount)if(h){if(x.onPointerOver||x.onPointerEnter||x.onPointerOut||x.onPointerLeave){const M=kb(b),A=d.hovered.get(M);A?A.stopped&&b.stopPropagation():(d.hovered.set(M,b),x.onPointerOver==null||x.onPointerOver(b),x.onPointerEnter==null||x.onPointerEnter(b))}x.onPointerMove==null||x.onPointerMove(b)}else{const M=x[l];M?(!m||d.initialHits.includes(g))&&(o(c,d.interaction.filter(A=>!d.initialHits.includes(A))),M(b)):m&&d.initialHits.includes(g)&&o(c,d.interaction.filter(A=>!d.initialHits.includes(A)))}}i(y,c,p,S)}}return{handlePointer:a}}const v9e=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],AJ=n=>!!(n!=null&&n.render),ek=k.createContext(null),y9e=(n,e)=>{const t=XR((a,l)=>{const u=new le,c=new le,f=new le;function d(p=l().camera,S=c,b=l().size){const{width:g,height:w,top:x,left:M}=b,A=g/w;S instanceof le?f.copy(S):f.set(...S);const N=p.getWorldPosition(u).distanceTo(f);if(xJ(p))return{width:g/p.zoom,height:w/p.zoom,top:x,left:M,factor:1,distance:N,aspect:A};{const C=p.fov*Math.PI/180,T=2*Math.tan(C/2)*N,R=T*(g/w);return{width:R,height:T,top:x,left:M,factor:g/R,distance:N,aspect:A}}}let h;const m=p=>a(S=>({performance:{...S.performance,current:p}})),v=new et;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(p=1)=>n(l(),p),advance:(p,S)=>e(p,S,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new qO,pointer:v,mouse:v,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const p=l();h&&clearTimeout(h),p.performance.current!==p.performance.min&&m(p.performance.min),h=setTimeout(()=>m(l().performance.max),p.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:d},setEvents:p=>a(S=>({...S,events:{...S.events,...p}})),setSize:(p,S,b,g,w)=>{const x=l().camera,M={width:p,height:S,top:g||0,left:w||0,updateStyle:b};a(A=>({size:M,viewport:{...A.viewport,...d(x,c,M)}}))},setDpr:p=>a(S=>{const b=_J(p);return{viewport:{...S.viewport,dpr:b,initialDpr:S.viewport.initialDpr||b}}}),setFrameloop:(p="always")=>{const S=l().clock;S.stop(),S.elapsedTime=0,p!=="never"&&(S.start(),S.elapsedTime=0),a(()=>({frameloop:p}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:k.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(p,S,b)=>{const g=l().internal;return g.priority=g.priority+(S>0?1:0),g.subscribers.push({ref:p,priority:S,store:b}),g.subscribers=g.subscribers.sort((w,x)=>w.priority-x.priority),()=>{const w=l().internal;w!=null&&w.subscribers&&(w.priority=w.priority-(S>0?1:0),w.subscribers=w.subscribers.filter(x=>x.ref!==p))}}}}}),r=t.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:c,set:f}=t.getState();if(l.width!==i.width||l.height!==i.height||u.dpr!==s){var d;i=l,s=u.dpr,MJ(a,l),c.setPixelRatio(u.dpr);const h=(d=l.updateStyle)!=null?d:typeof HTMLCanvasElement<"u"&&c.domElement instanceof HTMLCanvasElement;c.setSize(l.width,l.height,h)}a!==o&&(o=a,f(h=>({viewport:{...h.viewport,...h.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let Ib,x9e=new Set,b9e=new Set,w9e=new Set;function AA(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Kg(n,e){switch(n){case"before":return AA(x9e,e);case"after":return AA(b9e,e);case"tail":return AA(w9e,e)}}let TA,DA;function NA(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),TA=e.internal.subscribers,Ib=0;Ib<TA.length;Ib++)DA=TA[Ib],DA.ref.current(DA.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function S9e(n){let e=!1,t,r,i;function s(l){r=requestAnimationFrame(s),e=!0,t=0,Kg("before",l);for(const c of n.values()){var u;i=c.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((u=i.gl.xr)!=null&&u.isPresenting)&&(t+=NA(l,i))}if(Kg("after",l),t===0)return Kg("tail",l),e=!1,cancelAnimationFrame(r)}function o(l,u=1){var c;if(!l)return n.forEach(f=>o(f.store.getState()),u);(c=l.gl.xr)!=null&&c.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+u),e||(e=!0,requestAnimationFrame(s)))}function a(l,u=!0,c,f){if(u&&Kg("before",l),c)NA(l,c,f);else for(const d of n.values())NA(l,d.store.getState());u&&Kg("after",l)}return{loop:s,invalidate:o,advance:a}}function tk(){const n=k.useContext(ek);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Ln(n=t=>t,e){return tk()(n,e)}function nh(n,e=0){const t=tk(),r=t.getState().internal.subscribe,i=bJ(n);return Hy(()=>r(i,e,t),[e,r,t]),null}const xm=new Map,{invalidate:I9,advance:L9}=S9e(xm),{reconciler:K0,applyProps:Xh}=l9e(xm,p9e),Yh={objects:"shallow",strict:!1},_9e=(n,e)=>{const t=typeof n=="function"?n(e):n;return AJ(t)?t:new AO({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function E9e(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:s,left:o,updateStyle:a=t}=e;return{width:r,height:i,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:r,height:i,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:r,height:i,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function M9e(n){const e=xm.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||y9e(I9,L9),o=t||K0.createContainer(s,Np.ConcurrentRoot,null,!1,null,"",i,null);e||xm.set(n,{fiber:o,store:s});let a,l=!1,u;return{configure(c={}){let{gl:f,size:d,scene:h,events:m,onCreated:v,shadows:y=!1,linear:p=!1,flat:S=!1,legacy:b=!1,orthographic:g=!1,frameloop:w="always",dpr:x=[1,2],performance:M,raycaster:A,camera:N,onPointerMissed:C}=c,T=s.getState(),R=T.gl;T.gl||T.set({gl:R=_9e(f,n)});let $=T.raycaster;$||T.set({raycaster:$=new ZO});const{params:B,...z}=A||{};if(dr.equ(z,$,Yh)||Xh($,{...z}),dr.equ(B,$.params,Yh)||Xh($,{params:{...$.params,...B}}),!T.camera||T.camera===u&&!dr.equ(u,N,Yh)){u=N;const J=N instanceof Ly,Y=J?N:g?new Ta(0,0,0,0,.1,1e3):new pr(75,0,.1,1e3);J||(Y.position.z=5,N&&Xh(Y,N),!T.camera&&!(N!=null&&N.rotation)&&Y.lookAt(0,0,0)),T.set({camera:Y}),$.camera=Y}if(!T.scene){let J;h instanceof $0?J=h:(J=new $0,h&&Xh(J,h)),T.set({scene:op(J)})}if(!T.xr){var D;const J=(ae,ce)=>{const pe=s.getState();pe.frameloop!=="never"&&L9(ae,!0,pe,ce)},Y=()=>{const ae=s.getState();ae.gl.xr.enabled=ae.gl.xr.isPresenting,ae.gl.xr.setAnimationLoop(ae.gl.xr.isPresenting?J:null),ae.gl.xr.isPresenting||I9(ae)},ee={connect(){const ae=s.getState().gl;ae.xr.addEventListener("sessionstart",Y),ae.xr.addEventListener("sessionend",Y)},disconnect(){const ae=s.getState().gl;ae.xr.removeEventListener("sessionstart",Y),ae.xr.removeEventListener("sessionend",Y)}};typeof((D=R.xr)==null?void 0:D.addEventListener)=="function"&&ee.connect(),T.set({xr:ee})}if(R.shadowMap){const J=R.shadowMap.enabled,Y=R.shadowMap.type;if(R.shadowMap.enabled=!!y,dr.boo(y))R.shadowMap.type=Lv;else if(dr.str(y)){var I;const ee={basic:aK,percentage:jE,soft:Lv,variance:Sa};R.shadowMap.type=(I=ee[y])!=null?I:Lv}else dr.obj(y)&&Object.assign(R.shadowMap,y);(J!==R.shadowMap.enabled||Y!==R.shadowMap.type)&&(R.shadowMap.needsUpdate=!0)}const U=yJ();U&&("enabled"in U?U.enabled=!b:"legacyMode"in U&&(U.legacyMode=b)),Xh(R,{outputEncoding:p?3e3:3001,toneMapping:S?Al:lO}),T.legacy!==b&&T.set(()=>({legacy:b})),T.linear!==p&&T.set(()=>({linear:p})),T.flat!==S&&T.set(()=>({flat:S})),f&&!dr.fun(f)&&!AJ(f)&&!dr.equ(f,R,Yh)&&Xh(R,f),m&&!T.events.handlers&&T.set({events:m(s)});const Z=E9e(n,d);return dr.equ(Z,T.size,Yh)||T.setSize(Z.width,Z.height,Z.updateStyle,Z.top,Z.left),x&&T.viewport.dpr!==_J(x)&&T.setDpr(x),T.frameloop!==w&&T.setFrameloop(w),T.onPointerMissed||T.set({onPointerMissed:C}),M&&!dr.equ(M,T.performance,Yh)&&T.set(J=>({performance:{...J.performance,...M}})),a=v,l=!0,this},render(c){return l||this.configure(),K0.updateContainer(k.createElement(C9e,{store:s,children:c,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){TJ(n)}}}function C9e({store:n,children:e,onCreated:t,rootElement:r}){return Hy(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),k.createElement(ek.Provider,{value:n},e)}function TJ(n,e){const t=xm.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),K0.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),d9e(i),xm.delete(n)}catch{}},500)})}}function A9e(n,e,t){return k.createElement(T9e,{key:e.uuid,children:n,container:e,state:t})}function T9e({state:n={},children:e,container:t}){const{events:r,size:i,...s}=n,o=tk(),[a]=k.useState(()=>new ZO),[l]=k.useState(()=>new et),u=k.useCallback((f,d)=>{const h={...f};Object.keys(f).forEach(v=>{(v9e.includes(v)||f[v]!==d[v]&&d[v])&&delete h[v]});let m;if(d&&i){const v=d.camera;m=f.viewport.getCurrentViewport(v,new le,i),v!==f.camera&&MJ(v,i)}return{...h,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...d==null?void 0:d.events,...r},size:{...f.size,...i},viewport:{...f.viewport,...m},...s}},[n]),[c]=k.useState(()=>{const f=o.getState();return XR((h,m)=>({...f,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...r},size:{...f.size,...i},...s,set:h,get:m,setEvents:v=>h(y=>({...y,events:{...y.events,...v}}))}))});return k.useEffect(()=>{const f=o.subscribe(d=>c.setState(h=>u(d,h)));return()=>{f(),c.destroy()}},[]),k.useEffect(()=>{c.setState(f=>u(o.getState(),f))},[u]),k.createElement(k.Fragment,null,K0.createPortal(k.createElement(ek.Provider,{value:c},e),c,null))}K0.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:k.version});function nN(n,e,t){var r,i,s,o,a;e==null&&(e=100);function l(){var c=Date.now()-o;c<e&&c>=0?r=setTimeout(l,e-c):(r=null,t||(a=n.apply(s,i),s=i=null))}var u=function(){s=this,i=arguments,o=Date.now();var c=t&&!r;return r||(r=setTimeout(l,e)),c&&(a=n.apply(s,i),s=i=null),a};return u.clear=function(){r&&(clearTimeout(r),r=null)},u.flush=function(){r&&(a=n.apply(s,i),s=i=null,clearTimeout(r),r=null)},u}nN.debounce=nN;var D9e=nN;const F9=fa(D9e);function N9e(n){let{debounce:e,scroll:t,polyfill:r,offsetSize:i}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=k.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=k.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),u=e?typeof e=="number"?e:e.scroll:null,c=e?typeof e=="number"?e:e.resize:null,f=k.useRef(!1);k.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[d,h,m]=k.useMemo(()=>{const S=()=>{if(!l.current.element)return;const{left:b,top:g,width:w,height:x,bottom:M,right:A,x:N,y:C}=l.current.element.getBoundingClientRect(),T={left:b,top:g,width:w,height:x,bottom:M,right:A,x:N,y:C};l.current.element instanceof HTMLElement&&i&&(T.height=l.current.element.offsetHeight,T.width=l.current.element.offsetWidth),Object.freeze(T),f.current&&!k9e(l.current.lastBounds,T)&&a(l.current.lastBounds=T)};return[S,c?F9(S,c):S,u?F9(S,u):S]},[a,i,u,c]);function v(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(S=>S.removeEventListener("scroll",m,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function y(){l.current.element&&(l.current.resizeObserver=new s(m),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(S=>S.addEventListener("scroll",m,{capture:!0,passive:!0})))}const p=S=>{!S||S===l.current.element||(v(),l.current.element=S,l.current.scrollContainers=DJ(S),y())};return R9e(m,!!t),P9e(h),k.useEffect(()=>{v(),y()},[t,m,h]),k.useEffect(()=>v,[]),[p,o,d]}function P9e(n){k.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function R9e(n,e){k.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function DJ(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...DJ(n.parentElement)]}const O9e=["x","y","top","bottom","left","right","width","height"],k9e=(n,e)=>O9e.every(t=>n[t]===e[t]);var I9e=Object.defineProperty,L9e=Object.defineProperties,F9e=Object.getOwnPropertyDescriptors,B9=Object.getOwnPropertySymbols,B9e=Object.prototype.hasOwnProperty,z9e=Object.prototype.propertyIsEnumerable,z9=(n,e,t)=>e in n?I9e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,U9=(n,e)=>{for(var t in e||(e={}))B9e.call(e,t)&&z9(n,t,e[t]);if(B9)for(var t of B9(e))z9e.call(e,t)&&z9(n,t,e[t]);return n},U9e=(n,e)=>L9e(n,F9e(e)),$9,V9;typeof window<"u"&&(($9=window.document)!=null&&$9.createElement||((V9=window.navigator)==null?void 0:V9.product)==="ReactNative")?k.useLayoutEffect:k.useEffect;function NJ(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=n.child;for(;r;){const i=NJ(r,e,t);if(i)return i;r=r.sibling}}function PJ(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const H9=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=H9;return}return H9.apply(this,arguments)};const nk=PJ(k.createContext(null));class RJ extends k.Component{render(){return k.createElement(nk.Provider,{value:this._reactInternals},this.props.children)}}function $9e(){const n=k.useContext(nk);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=k.useId();return k.useMemo(()=>{for(const r of[n,n==null?void 0:n.alternate]){if(!r)continue;const i=NJ(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[n,e])}function V9e(){const n=$9e(),[e]=k.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==nk&&!e.has(i)&&e.set(i,k.useContext(PJ(i)))}t=t.return}return e}function H9e(){const n=V9e();return k.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>k.createElement(e,null,k.createElement(t.Provider,U9e(U9({},r),{value:n.get(t)}))),e=>k.createElement(RJ,U9({},e))),[n])}const PA={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function W9e(n){const{handlePointer:e}=g9e(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(PA).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:s}=n.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,u]=PA[o];t.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=PA[s];r.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const j9e=k.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:s,events:o=W9e,eventSource:a,eventPrefix:l,shadows:u,linear:c,flat:f,legacy:d,orthographic:h,frameloop:m,dpr:v,performance:y,raycaster:p,camera:S,scene:b,onPointerMissed:g,onCreated:w,...x},M){k.useMemo(()=>QO(i9e),[]);const A=H9e(),[N,C]=N9e({scroll:!0,debounce:{scroll:50,resize:0},...r}),T=k.useRef(null),R=k.useRef(null);k.useImperativeHandle(M,()=>T.current);const $=bJ(g),[B,z]=k.useState(!1),[D,I]=k.useState(!1);if(B)throw B;if(D)throw D;const U=k.useRef(null);Hy(()=>{const q=T.current;C.width>0&&C.height>0&&q&&(U.current||(U.current=M9e(q)),U.current.configure({gl:s,events:o,shadows:u,linear:c,flat:f,legacy:d,orthographic:h,frameloop:m,dpr:v,performance:y,raycaster:p,camera:S,scene:b,size:C,onPointerMissed:(...Z)=>$.current==null?void 0:$.current(...Z),onCreated:Z=>{Z.events.connect==null||Z.events.connect(a?u9e(a)?a.current:a:R.current),l&&Z.setEvents({compute:(J,Y)=>{const ee=J[l+"X"],ae=J[l+"Y"];Y.pointer.set(ee/Y.size.width*2-1,-(ae/Y.size.height)*2+1),Y.raycaster.setFromCamera(Y.pointer,Y.camera)}}),w==null||w(Z)}}),U.current.render(k.createElement(A,null,k.createElement(wJ,{set:I},k.createElement(k.Suspense,{fallback:k.createElement(c9e,{set:z})},e)))))}),k.useEffect(()=>{const q=T.current;if(q)return()=>TJ(q)},[]);const L=a?"none":"auto";return k.createElement("div",at({ref:R,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:L,...i}},x),k.createElement("div",{ref:N,style:{width:"100%",height:"100%"}},k.createElement("canvas",{ref:T,style:{display:"block"}},t)))}),G9e=k.forwardRef(function(e,t){return k.createElement(RJ,null,k.createElement(j9e,at({},e,{ref:t})))}),Wy=new le,rk=new le,q9e=new le,W9=new et;function X9e(n,e,t){const r=Wy.setFromMatrixPosition(n.matrixWorld);r.project(e);const i=t.width/2,s=t.height/2;return[r.x*i+i,-(r.y*s)+s]}function Y9e(n,e){const t=Wy.setFromMatrixPosition(n.matrixWorld),r=rk.setFromMatrixPosition(e.matrixWorld),i=t.sub(r),s=e.getWorldDirection(q9e);return i.angleTo(s)>Math.PI/2}function K9e(n,e,t,r){const i=Wy.setFromMatrixPosition(n.matrixWorld),s=i.clone();s.project(e),W9.set(s.x,s.y),t.setFromCamera(W9,e);const o=t.intersectObjects(r,!0);if(o.length){const a=o[0].distance;return i.distanceTo(t.ray.origin)<a}return!0}function Z9e(n,e){if(e instanceof Ta)return e.zoom;if(e instanceof pr){const t=Wy.setFromMatrixPosition(n.matrixWorld),r=rk.setFromMatrixPosition(e.matrixWorld),i=e.fov*Math.PI/180,s=t.distanceTo(r);return 1/(2*Math.tan(i/2)*s)}else return 1}function J9e(n,e,t){if(e instanceof pr||e instanceof Ta){const r=Wy.setFromMatrixPosition(n.matrixWorld),i=rk.setFromMatrixPosition(e.matrixWorld),s=r.distanceTo(i),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const rN=n=>Math.abs(n)<1e-10?0:n;function OJ(n,e,t=""){let r="matrix3d(";for(let i=0;i!==16;i++)r+=rN(e[i]*n.elements[i])+(i!==15?",":")");return t+r}const Q9e=(n=>e=>OJ(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),e7e=(n=>(e,t)=>OJ(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function t7e(n){return n&&typeof n=="object"&&"current"in n}const bM=k.forwardRef(({children:n,eps:e=.001,style:t,className:r,prepend:i,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:u=!1,transform:c=!1,occlude:f,onOcclude:d,castShadow:h,receiveShadow:m,material:v,geometry:y,zIndexRange:p=[16777271,0],calculatePosition:S=X9e,as:b="div",wrapperClass:g,pointerEvents:w="auto",...x},M)=>{const{gl:A,camera:N,scene:C,size:T,raycaster:R,events:$,viewport:B}=Ln(),[z]=k.useState(()=>document.createElement(b)),D=k.useRef(),I=k.useRef(null),U=k.useRef(0),L=k.useRef([0,0]),q=k.useRef(null),Z=k.useRef(null),J=(a==null?void 0:a.current)||$.connected||A.domElement.parentNode,Y=k.useRef(null),ee=k.useRef(!1),ae=k.useMemo(()=>f&&f!=="blending"||Array.isArray(f)&&f.length&&t7e(f[0]),[f]);k.useLayoutEffect(()=>{const Ae=A.domElement;f&&f==="blending"?(Ae.style.zIndex=`${Math.floor(p[0]/2)}`,Ae.style.position="absolute",Ae.style.pointerEvents="none"):(Ae.style.zIndex=null,Ae.style.position=null,Ae.style.pointerEvents=null)},[f]),k.useLayoutEffect(()=>{if(I.current){const Ae=D.current=MW(z);if(C.updateMatrixWorld(),c)z.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Ee=S(I.current,N,T);z.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Ee[0]}px,${Ee[1]}px,0);transform-origin:0 0;`}return J&&(i?J.prepend(z):J.appendChild(z)),()=>{J&&J.removeChild(z),Ae.unmount()}}},[J,c]),k.useLayoutEffect(()=>{g&&(z.className=g)},[g]);const ce=k.useMemo(()=>c?{position:"absolute",top:0,left:0,width:T.width,height:T.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-T.height/2,left:-T.width/2,width:T.width,height:T.height},...t},[t,s,o,T,c]),pe=k.useMemo(()=>({position:"absolute",pointerEvents:w}),[w]);k.useLayoutEffect(()=>{if(ee.current=!1,c){var Ae;(Ae=D.current)==null||Ae.render(k.createElement("div",{ref:q,style:ce},k.createElement("div",{ref:Z,style:pe},k.createElement("div",{ref:M,className:r,style:t,children:n}))))}else{var Ee;(Ee=D.current)==null||Ee.render(k.createElement("div",{ref:M,style:ce,className:r,children:n}))}});const we=k.useRef(!0);nh(Ae=>{if(I.current){N.updateMatrixWorld(),I.current.updateWorldMatrix(!0,!1);const Ee=c?L.current:S(I.current,N,T);if(c||Math.abs(U.current-N.zoom)>e||Math.abs(L.current[0]-Ee[0])>e||Math.abs(L.current[1]-Ee[1])>e){const re=Y9e(I.current,N);let Pe=!1;ae&&(Array.isArray(f)?Pe=f.map(Me=>Me.current):f!=="blending"&&(Pe=[C]));const Re=we.current;if(Pe){const Me=K9e(I.current,N,R,Pe);we.current=Me&&!re}else we.current=!re;Re!==we.current&&(d?d(!we.current):z.style.display=we.current?"block":"none");const te=Math.floor(p[0]/2),ie=f?ae?[p[0],te]:[te-1,0]:p;if(z.style.zIndex=`${J9e(I.current,N,ie)}`,c){const[Me,oe]=[T.width/2,T.height/2],G=N.projectionMatrix.elements[5]*oe,{isOrthographicCamera:j,top:de,left:Te,bottom:X,right:Q}=N,be=Q9e(N.matrixWorldInverse),_e=j?`scale(${G})translate(${rN(-(Q+Te)/2)}px,${rN((de+X)/2)}px)`:`translateZ(${G}px)`;let Ne=I.current.matrixWorld;u&&(Ne=N.matrixWorldInverse.clone().transpose().copyPosition(Ne).scale(I.current.scale),Ne.elements[3]=Ne.elements[7]=Ne.elements[11]=0,Ne.elements[15]=1),z.style.width=T.width+"px",z.style.height=T.height+"px",z.style.perspective=j?"":`${G}px`,q.current&&Z.current&&(q.current.style.transform=`${_e}${be}translate(${Me}px,${oe}px)`,Z.current.style.transform=e7e(Ne,1/((l||10)/400)))}else{const Me=l===void 0?1:Z9e(I.current,N)*l;z.style.transform=`translate3d(${Ee[0]}px,${Ee[1]}px,0) scale(${Me})`}L.current=Ee,U.current=N.zoom}}if(!ae&&Y.current&&!ee.current)if(c){if(q.current){const Ee=q.current.children[0];if(Ee!=null&&Ee.clientWidth&&Ee!=null&&Ee.clientHeight){const{isOrthographicCamera:re}=N;if(re||y)x.scale&&(Array.isArray(x.scale)?x.scale instanceof le?Y.current.scale.copy(x.scale.clone().divideScalar(1)):Y.current.scale.set(1/x.scale[0],1/x.scale[1],1/x.scale[2]):Y.current.scale.setScalar(1/x.scale));else{const Pe=(l||10)/400,Re=Ee.clientWidth*Pe,te=Ee.clientHeight*Pe;Y.current.scale.set(Re,te,1)}ee.current=!0}}}else{const Ee=z.children[0];if(Ee!=null&&Ee.clientWidth&&Ee!=null&&Ee.clientHeight){const re=1/B.factor,Pe=Ee.clientWidth*re,Re=Ee.clientHeight*re;Y.current.scale.set(Pe,Re,1),ee.current=!0}Y.current.lookAt(Ae.camera.position)}});const me=k.useMemo(()=>({vertexShader:c?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[c]);return k.createElement("group",at({},x,{ref:I}),f&&!ae&&k.createElement("mesh",{castShadow:h,receiveShadow:m,ref:Y},y||k.createElement("planeGeometry",null),v||k.createElement("shaderMaterial",{side:ns,vertexShader:me.vertexShader,fragmentShader:me.fragmentShader})))});var n7e=Object.defineProperty,r7e=(n,e,t)=>e in n?n7e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Zt=(n,e,t)=>(r7e(n,typeof e!="symbol"?e+"":e,t),t);const Lb=new Vu,j9=new Yo,i7e=Math.cos(70*(Math.PI/180)),G9=(n,e)=>(n%e+e)%e;let s7e=class extends zl{constructor(e,t){super(),Zt(this,"object"),Zt(this,"domElement"),Zt(this,"enabled",!0),Zt(this,"target",new le),Zt(this,"minDistance",0),Zt(this,"maxDistance",1/0),Zt(this,"minZoom",0),Zt(this,"maxZoom",1/0),Zt(this,"minPolarAngle",0),Zt(this,"maxPolarAngle",Math.PI),Zt(this,"minAzimuthAngle",-1/0),Zt(this,"maxAzimuthAngle",1/0),Zt(this,"enableDamping",!1),Zt(this,"dampingFactor",.05),Zt(this,"enableZoom",!0),Zt(this,"zoomSpeed",1),Zt(this,"enableRotate",!0),Zt(this,"rotateSpeed",1),Zt(this,"enablePan",!0),Zt(this,"panSpeed",1),Zt(this,"screenSpacePanning",!0),Zt(this,"keyPanSpeed",7),Zt(this,"zoomToCursor",!1),Zt(this,"autoRotate",!1),Zt(this,"autoRotateSpeed",2),Zt(this,"reverseOrbit",!1),Zt(this,"reverseHorizontalOrbit",!1),Zt(this,"reverseVerticalOrbit",!1),Zt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Zt(this,"mouseButtons",{LEFT:Wf.ROTATE,MIDDLE:Wf.DOLLY,RIGHT:Wf.PAN}),Zt(this,"touches",{ONE:jf.ROTATE,TWO:jf.DOLLY_PAN}),Zt(this,"target0"),Zt(this,"position0"),Zt(this,"zoom0"),Zt(this,"_domElementKeyEvents",null),Zt(this,"getPolarAngle"),Zt(this,"getAzimuthalAngle"),Zt(this,"setPolarAngle"),Zt(this,"setAzimuthalAngle"),Zt(this,"getDistance"),Zt(this,"listenToKeyEvents"),Zt(this,"stopListenToKeyEvents"),Zt(this,"saveState"),Zt(this,"reset"),Zt(this,"update"),Zt(this,"connect"),Zt(this,"dispose"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.setPolarAngle=ye=>{let We=G9(ye,2*Math.PI),W=c.phi;W<0&&(W+=2*Math.PI),We<0&&(We+=2*Math.PI);let ve=Math.abs(We-W);2*Math.PI-ve<ve&&(We<W?We+=2*Math.PI:W+=2*Math.PI),f.phi=We-W,r.update()},this.setAzimuthalAngle=ye=>{let We=G9(ye,2*Math.PI),W=c.theta;W<0&&(W+=2*Math.PI),We<0&&(We+=2*Math.PI);let ve=Math.abs(We-W);2*Math.PI-ve<ve&&(We<W?We+=2*Math.PI:W+=2*Math.PI),f.theta=We-W,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=ye=>{ye.addEventListener("keydown",Ne),this._domElementKeyEvents=ye},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Ne),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const ye=new le,We=new le(0,1,0),W=new Kr().setFromUnitVectors(e.up,We),ve=W.clone().invert(),ke=new le,Ye=new Kr,he=2*Math.PI;return function(){const H=r.object.position;W.setFromUnitVectors(e.up,We),ve.copy(W).invert(),ye.copy(H).sub(r.target),ye.applyQuaternion(W),c.setFromVector3(ye),r.autoRotate&&l===a.NONE&&B(R()),r.enableDamping?(c.theta+=f.theta*r.dampingFactor,c.phi+=f.phi*r.dampingFactor):(c.theta+=f.theta,c.phi+=f.phi);let ne=r.minAzimuthAngle,fe=r.maxAzimuthAngle;isFinite(ne)&&isFinite(fe)&&(ne<-Math.PI?ne+=he:ne>Math.PI&&(ne-=he),fe<-Math.PI?fe+=he:fe>Math.PI&&(fe-=he),ne<=fe?c.theta=Math.max(ne,Math.min(fe,c.theta)):c.theta=c.theta>(ne+fe)/2?Math.max(ne,c.theta):Math.min(fe,c.theta)),c.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,c.phi)),c.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(h,r.dampingFactor):r.target.add(h),r.zoomToCursor&&N||r.object.isOrthographicCamera?c.radius=J(c.radius):c.radius=J(c.radius*d),ye.setFromSpherical(c),ye.applyQuaternion(ve),H.copy(r.target).add(ye),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(f.theta*=1-r.dampingFactor,f.phi*=1-r.dampingFactor,h.multiplyScalar(1-r.dampingFactor)):(f.set(0,0,0),h.set(0,0,0));let xe=!1;if(r.zoomToCursor&&N){let Ce=null;if(r.object instanceof pr&&r.object.isPerspectiveCamera){const Oe=ye.length();Ce=J(Oe*d);const $e=Oe-Ce;r.object.position.addScaledVector(M,$e),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const Oe=new le(A.x,A.y,0);Oe.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/d)),r.object.updateProjectionMatrix(),xe=!0;const $e=new le(A.x,A.y,0);$e.unproject(r.object),r.object.position.sub($e).add(Oe),r.object.updateMatrixWorld(),Ce=ye.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;Ce!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(Ce).add(r.object.position):(Lb.origin.copy(r.object.position),Lb.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(Lb.direction))<i7e?e.lookAt(r.target):(j9.setFromNormalAndCoplanarPoint(r.object.up,r.target),Lb.intersectPlane(j9,r.target))))}else r.object instanceof Ta&&r.object.isOrthographicCamera&&(xe=d!==1,xe&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/d)),r.object.updateProjectionMatrix()));return d=1,N=!1,xe||ke.distanceToSquared(r.object.position)>u||8*(1-Ye.dot(r.object.quaternion))>u?(r.dispatchEvent(i),ke.copy(r.object.position),Ye.copy(r.object.quaternion),xe=!1,!0):!1}})(),this.connect=ye=>{ye===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),r.domElement=ye,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",Ie),r.domElement.addEventListener("pointerdown",de),r.domElement.addEventListener("pointercancel",X),r.domElement.addEventListener("wheel",_e)},this.dispose=()=>{var ye,We,W,ve,ke,Ye;r.domElement&&(r.domElement.style.touchAction="auto"),(ye=r.domElement)==null||ye.removeEventListener("contextmenu",Ie),(We=r.domElement)==null||We.removeEventListener("pointerdown",de),(W=r.domElement)==null||W.removeEventListener("pointercancel",X),(ve=r.domElement)==null||ve.removeEventListener("wheel",_e),(ke=r.domElement)==null||ke.ownerDocument.removeEventListener("pointermove",Te),(Ye=r.domElement)==null||Ye.ownerDocument.removeEventListener("pointerup",X),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",Ne)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const u=1e-6,c=new JD,f=new JD;let d=1;const h=new le,m=new et,v=new et,y=new et,p=new et,S=new et,b=new et,g=new et,w=new et,x=new et,M=new le,A=new et;let N=!1;const C=[],T={};function R(){return 2*Math.PI/60/60*r.autoRotateSpeed}function $(){return Math.pow(.95,r.zoomSpeed)}function B(ye){r.reverseOrbit||r.reverseHorizontalOrbit?f.theta+=ye:f.theta-=ye}function z(ye){r.reverseOrbit||r.reverseVerticalOrbit?f.phi+=ye:f.phi-=ye}const D=(()=>{const ye=new le;return function(W,ve){ye.setFromMatrixColumn(ve,0),ye.multiplyScalar(-W),h.add(ye)}})(),I=(()=>{const ye=new le;return function(W,ve){r.screenSpacePanning===!0?ye.setFromMatrixColumn(ve,1):(ye.setFromMatrixColumn(ve,0),ye.crossVectors(r.object.up,ye)),ye.multiplyScalar(W),h.add(ye)}})(),U=(()=>{const ye=new le;return function(W,ve){const ke=r.domElement;if(ke&&r.object instanceof pr&&r.object.isPerspectiveCamera){const Ye=r.object.position;ye.copy(Ye).sub(r.target);let he=ye.length();he*=Math.tan(r.object.fov/2*Math.PI/180),D(2*W*he/ke.clientHeight,r.object.matrix),I(2*ve*he/ke.clientHeight,r.object.matrix)}else ke&&r.object instanceof Ta&&r.object.isOrthographicCamera?(D(W*(r.object.right-r.object.left)/r.object.zoom/ke.clientWidth,r.object.matrix),I(ve*(r.object.top-r.object.bottom)/r.object.zoom/ke.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function L(ye){r.object instanceof pr&&r.object.isPerspectiveCamera||r.object instanceof Ta&&r.object.isOrthographicCamera?d/=ye:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function q(ye){r.object instanceof pr&&r.object.isPerspectiveCamera||r.object instanceof Ta&&r.object.isOrthographicCamera?d*=ye:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function Z(ye){if(!r.zoomToCursor||!r.domElement)return;N=!0;const We=r.domElement.getBoundingClientRect(),W=ye.clientX-We.left,ve=ye.clientY-We.top,ke=We.width,Ye=We.height;A.x=W/ke*2-1,A.y=-(ve/Ye)*2+1,M.set(A.x,A.y,1).unproject(r.object).sub(r.object.position).normalize()}function J(ye){return Math.max(r.minDistance,Math.min(r.maxDistance,ye))}function Y(ye){m.set(ye.clientX,ye.clientY)}function ee(ye){Z(ye),g.set(ye.clientX,ye.clientY)}function ae(ye){p.set(ye.clientX,ye.clientY)}function ce(ye){v.set(ye.clientX,ye.clientY),y.subVectors(v,m).multiplyScalar(r.rotateSpeed);const We=r.domElement;We&&(B(2*Math.PI*y.x/We.clientHeight),z(2*Math.PI*y.y/We.clientHeight)),m.copy(v),r.update()}function pe(ye){w.set(ye.clientX,ye.clientY),x.subVectors(w,g),x.y>0?L($()):x.y<0&&q($()),g.copy(w),r.update()}function we(ye){S.set(ye.clientX,ye.clientY),b.subVectors(S,p).multiplyScalar(r.panSpeed),U(b.x,b.y),p.copy(S),r.update()}function me(ye){Z(ye),ye.deltaY<0?q($()):ye.deltaY>0&&L($()),r.update()}function Ae(ye){let We=!1;switch(ye.code){case r.keys.UP:U(0,r.keyPanSpeed),We=!0;break;case r.keys.BOTTOM:U(0,-r.keyPanSpeed),We=!0;break;case r.keys.LEFT:U(r.keyPanSpeed,0),We=!0;break;case r.keys.RIGHT:U(-r.keyPanSpeed,0),We=!0;break}We&&(ye.preventDefault(),r.update())}function Ee(){if(C.length==1)m.set(C[0].pageX,C[0].pageY);else{const ye=.5*(C[0].pageX+C[1].pageX),We=.5*(C[0].pageY+C[1].pageY);m.set(ye,We)}}function re(){if(C.length==1)p.set(C[0].pageX,C[0].pageY);else{const ye=.5*(C[0].pageX+C[1].pageX),We=.5*(C[0].pageY+C[1].pageY);p.set(ye,We)}}function Pe(){const ye=C[0].pageX-C[1].pageX,We=C[0].pageY-C[1].pageY,W=Math.sqrt(ye*ye+We*We);g.set(0,W)}function Re(){r.enableZoom&&Pe(),r.enablePan&&re()}function te(){r.enableZoom&&Pe(),r.enableRotate&&Ee()}function ie(ye){if(C.length==1)v.set(ye.pageX,ye.pageY);else{const W=ot(ye),ve=.5*(ye.pageX+W.x),ke=.5*(ye.pageY+W.y);v.set(ve,ke)}y.subVectors(v,m).multiplyScalar(r.rotateSpeed);const We=r.domElement;We&&(B(2*Math.PI*y.x/We.clientHeight),z(2*Math.PI*y.y/We.clientHeight)),m.copy(v)}function Me(ye){if(C.length==1)S.set(ye.pageX,ye.pageY);else{const We=ot(ye),W=.5*(ye.pageX+We.x),ve=.5*(ye.pageY+We.y);S.set(W,ve)}b.subVectors(S,p).multiplyScalar(r.panSpeed),U(b.x,b.y),p.copy(S)}function oe(ye){const We=ot(ye),W=ye.pageX-We.x,ve=ye.pageY-We.y,ke=Math.sqrt(W*W+ve*ve);w.set(0,ke),x.set(0,Math.pow(w.y/g.y,r.zoomSpeed)),L(x.y),g.copy(w)}function G(ye){r.enableZoom&&oe(ye),r.enablePan&&Me(ye)}function j(ye){r.enableZoom&&oe(ye),r.enableRotate&&ie(ye)}function de(ye){var We,W;r.enabled!==!1&&(C.length===0&&((We=r.domElement)==null||We.ownerDocument.addEventListener("pointermove",Te),(W=r.domElement)==null||W.ownerDocument.addEventListener("pointerup",X)),Je(ye),ye.pointerType==="touch"?Fe(ye):Q(ye))}function Te(ye){r.enabled!==!1&&(ye.pointerType==="touch"?He(ye):be(ye))}function X(ye){var We,W,ve;qe(ye),C.length===0&&((We=r.domElement)==null||We.releasePointerCapture(ye.pointerId),(W=r.domElement)==null||W.ownerDocument.removeEventListener("pointermove",Te),(ve=r.domElement)==null||ve.ownerDocument.removeEventListener("pointerup",X)),r.dispatchEvent(o),l=a.NONE}function Q(ye){let We;switch(ye.button){case 0:We=r.mouseButtons.LEFT;break;case 1:We=r.mouseButtons.MIDDLE;break;case 2:We=r.mouseButtons.RIGHT;break;default:We=-1}switch(We){case Wf.DOLLY:if(r.enableZoom===!1)return;ee(ye),l=a.DOLLY;break;case Wf.ROTATE:if(ye.ctrlKey||ye.metaKey||ye.shiftKey){if(r.enablePan===!1)return;ae(ye),l=a.PAN}else{if(r.enableRotate===!1)return;Y(ye),l=a.ROTATE}break;case Wf.PAN:if(ye.ctrlKey||ye.metaKey||ye.shiftKey){if(r.enableRotate===!1)return;Y(ye),l=a.ROTATE}else{if(r.enablePan===!1)return;ae(ye),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function be(ye){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;ce(ye);break;case a.DOLLY:if(r.enableZoom===!1)return;pe(ye);break;case a.PAN:if(r.enablePan===!1)return;we(ye);break}}function _e(ye){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(ye.preventDefault(),r.dispatchEvent(s),me(ye),r.dispatchEvent(o))}function Ne(ye){r.enabled===!1||r.enablePan===!1||Ae(ye)}function Fe(ye){switch(lt(ye),C.length){case 1:switch(r.touches.ONE){case jf.ROTATE:if(r.enableRotate===!1)return;Ee(),l=a.TOUCH_ROTATE;break;case jf.PAN:if(r.enablePan===!1)return;re(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case jf.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Re(),l=a.TOUCH_DOLLY_PAN;break;case jf.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;te(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function He(ye){switch(lt(ye),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;ie(ye),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;Me(ye),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;G(ye),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;j(ye),r.update();break;default:l=a.NONE}}function Ie(ye){r.enabled!==!1&&ye.preventDefault()}function Je(ye){C.push(ye)}function qe(ye){delete T[ye.pointerId];for(let We=0;We<C.length;We++)if(C[We].pointerId==ye.pointerId){C.splice(We,1);return}}function lt(ye){let We=T[ye.pointerId];We===void 0&&(We=new et,T[ye.pointerId]=We),We.set(ye.pageX,ye.pageY)}function ot(ye){const We=ye.pointerId===C[0].pointerId?C[1]:C[0];return T[We.pointerId]}t!==void 0&&this.connect(t),this.update()}};const q9=new Zr,Fb=new le;class ik extends jO{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],r=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(r),this.setAttribute("position",new Ct(e,3)),this.setAttribute("uv",new Ct(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,r=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),r.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const r=new __(t,6,1);return this.setAttribute("instanceStart",new wo(r,3,0)),this.setAttribute("instanceEnd",new wo(r,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e,t=3){let r;e instanceof Float32Array?r=e:Array.isArray(e)&&(r=new Float32Array(e));const i=new __(r,t*2,1);return this.setAttribute("instanceColorStart",new wo(i,t,0)),this.setAttribute("instanceColorEnd",new wo(i,t,t)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new BO(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Zr);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),q9.setFromBufferAttribute(t),this.boundingBox.union(q9))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new bi),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const r=this.boundingSphere.center;this.boundingBox.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)Fb.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(Fb)),Fb.fromBufferAttribute(t,s),i=Math.max(i,r.distanceToSquared(Fb));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class kJ extends ik{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,r=new Float32Array(2*t);for(let i=0;i<t;i+=3)r[2*i]=e[i],r[2*i+1]=e[i+1],r[2*i+2]=e[i+2],r[2*i+3]=e[i+3],r[2*i+4]=e[i+4],r[2*i+5]=e[i+5];return super.setPositions(r),this}setColors(e,t=3){const r=e.length-t,i=new Float32Array(2*r);if(t===3)for(let s=0;s<r;s+=t)i[2*s]=e[s],i[2*s+1]=e[s+1],i[2*s+2]=e[s+2],i[2*s+3]=e[s+3],i[2*s+4]=e[s+4],i[2*s+5]=e[s+5];else for(let s=0;s<r;s+=t)i[2*s]=e[s],i[2*s+1]=e[s+1],i[2*s+2]=e[s+2],i[2*s+3]=e[s+3],i[2*s+4]=e[s+4],i[2*s+5]=e[s+5],i[2*s+6]=e[s+6],i[2*s+7]=e[s+7];return super.setColors(i,t),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class sk extends Do{constructor(e){super({type:"LineMaterial",uniforms:U0.clone(U0.merge([dt.common,dt.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new et(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:`
				#include <common>
				#include <fog_pars_vertex>
				#include <logdepthbuf_pars_vertex>
				#include <clipping_planes_pars_vertex>

				uniform float linewidth;
				uniform vec2 resolution;

				attribute vec3 instanceStart;
				attribute vec3 instanceEnd;

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
						attribute vec4 instanceColorStart;
						attribute vec4 instanceColorEnd;
					#else
						varying vec3 vLineColor;
						attribute vec3 instanceColorStart;
						attribute vec3 instanceColorEnd;
					#endif
				#endif

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#ifdef USE_DASH

					uniform float dashScale;
					attribute float instanceDistanceStart;
					attribute float instanceDistanceEnd;
					varying float vLineDistance;

				#endif

				void trimSegment( const in vec4 start, inout vec4 end ) {

					// trim end segment so it terminates between the camera plane and the near plane

					// conservative estimate of the near plane
					float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
					float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
					float nearEstimate = - 0.5 * b / a;

					float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

					end.xyz = mix( start.xyz, end.xyz, alpha );

				}

				void main() {

					#ifdef USE_COLOR

						vLineColor = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

					#endif

					#ifdef USE_DASH

						vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
						vUv = uv;

					#endif

					float aspect = resolution.x / resolution.y;

					// camera space
					vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
					vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

					#ifdef WORLD_UNITS

						worldStart = start.xyz;
						worldEnd = end.xyz;

					#else

						vUv = uv;

					#endif

					// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
					// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
					// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
					// perhaps there is a more elegant solution -- WestLangley

					bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

					if ( perspective ) {

						if ( start.z < 0.0 && end.z >= 0.0 ) {

							trimSegment( start, end );

						} else if ( end.z < 0.0 && start.z >= 0.0 ) {

							trimSegment( end, start );

						}

					}

					// clip space
					vec4 clipStart = projectionMatrix * start;
					vec4 clipEnd = projectionMatrix * end;

					// ndc space
					vec3 ndcStart = clipStart.xyz / clipStart.w;
					vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

					// direction
					vec2 dir = ndcEnd.xy - ndcStart.xy;

					// account for clip-space aspect ratio
					dir.x *= aspect;
					dir = normalize( dir );

					#ifdef WORLD_UNITS

						// get the offset direction as perpendicular to the view vector
						vec3 worldDir = normalize( end.xyz - start.xyz );
						vec3 offset;
						if ( position.y < 0.5 ) {

							offset = normalize( cross( start.xyz, worldDir ) );

						} else {

							offset = normalize( cross( end.xyz, worldDir ) );

						}

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

						// don't extend the line if we're rendering dashes because we
						// won't be rendering the endcaps
						#ifndef USE_DASH

							// extend the line bounds to encompass  endcaps
							start.xyz += - worldDir * linewidth * 0.5;
							end.xyz += worldDir * linewidth * 0.5;

							// shift the position of the quad so it hugs the forward edge of the line
							offset.xy -= dir * forwardOffset;
							offset.z += 0.5;

						#endif

						// endcaps
						if ( position.y > 1.0 || position.y < 0.0 ) {

							offset.xy += dir * 2.0 * forwardOffset;

						}

						// adjust for linewidth
						offset *= linewidth * 0.5;

						// set the world position
						worldPos = ( position.y < 0.5 ) ? start : end;
						worldPos.xyz += offset;

						// project the worldpos
						vec4 clip = projectionMatrix * worldPos;

						// shift the depth of the projected points so the line
						// segments overlap neatly
						vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
						clip.z = clipPose.z * clip.w;

					#else

						vec2 offset = vec2( dir.y, - dir.x );
						// undo aspect ratio adjustment
						dir.x /= aspect;
						offset.x /= aspect;

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						// endcaps
						if ( position.y < 0.0 ) {

							offset += - dir;

						} else if ( position.y > 1.0 ) {

							offset += dir;

						}

						// adjust for linewidth
						offset *= linewidth;

						// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
						offset /= resolution.y;

						// select end
						vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

						// back to clip space
						offset *= clip.w;

						clip.xy += offset;

					#endif

					gl_Position = clip;

					vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

					#include <logdepthbuf_vertex>
					#include <clipping_planes_vertex>
					#include <fog_vertex>

				}
			`,fragmentShader:`
				uniform vec3 diffuse;
				uniform float opacity;
				uniform float linewidth;

				#ifdef USE_DASH

					uniform float dashOffset;
					uniform float dashSize;
					uniform float gapSize;

				#endif

				varying float vLineDistance;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#include <common>
				#include <fog_pars_fragment>
				#include <logdepthbuf_pars_fragment>
				#include <clipping_planes_pars_fragment>

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
					#else
						varying vec3 vLineColor;
					#endif
				#endif

				vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

					float mua;
					float mub;

					vec3 p13 = p1 - p3;
					vec3 p43 = p4 - p3;

					vec3 p21 = p2 - p1;

					float d1343 = dot( p13, p43 );
					float d4321 = dot( p43, p21 );
					float d1321 = dot( p13, p21 );
					float d4343 = dot( p43, p43 );
					float d2121 = dot( p21, p21 );

					float denom = d2121 * d4343 - d4321 * d4321;

					float numer = d1343 * d4321 - d1321 * d4343;

					mua = numer / denom;
					mua = clamp( mua, 0.0, 1.0 );
					mub = ( d1343 + d4321 * ( mua ) ) / d4343;
					mub = clamp( mub, 0.0, 1.0 );

					return vec2( mua, mub );

				}

				void main() {

					#include <clipping_planes_fragment>

					#ifdef USE_DASH

						if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

						if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

					#endif

					float alpha = opacity;

					#ifdef WORLD_UNITS

						// Find the closest points on the view ray and the line segment
						vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
						vec3 lineDir = worldEnd - worldStart;
						vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

						vec3 p1 = worldStart + lineDir * params.x;
						vec3 p2 = rayEnd * params.y;
						vec3 delta = p1 - p2;
						float len = length( delta );
						float norm = len / linewidth;

						#ifndef USE_DASH

							#ifdef USE_ALPHA_TO_COVERAGE

								float dnorm = fwidth( norm );
								alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

							#else

								if ( norm > 0.5 ) {

									discard;

								}

							#endif

						#endif

					#else

						#ifdef USE_ALPHA_TO_COVERAGE

							// artifacts appear on some hardware if a derivative is taken within a conditional
							float a = vUv.x;
							float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
							float len2 = a * a + b * b;
							float dlen = fwidth( len2 );

							if ( abs( vUv.y ) > 1.0 ) {

								alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

							}

						#else

							if ( abs( vUv.y ) > 1.0 ) {

								float a = vUv.x;
								float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
								float len2 = a * a + b * b;

								if ( len2 > 1.0 ) discard;

							}

						#endif

					#endif

					vec4 diffuseColor = vec4( diffuse, alpha );
					#ifdef USE_COLOR
						#ifdef USE_LINE_COLOR_ALPHA
							diffuseColor *= vLineColor;
						#else
							diffuseColor.rgb *= vLineColor;
						#endif
					#endif

					#include <logdepthbuf_fragment>

					gl_FragColor = diffuseColor;

					#include <tonemapping_fragment>
					#include <${parseInt(Ym.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
					#include <fog_fragment>
					#include <premultiplied_alpha_fragment>

				}
			`,clipping:!0}),this.isLineMaterial=!0,this.onBeforeCompile=function(){this.transparent?this.defines.USE_LINE_COLOR_ALPHA="1":delete this.defines.USE_LINE_COLOR_ALPHA},Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(t){this.uniforms.diffuse.value=t}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(t){t===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(t){this.uniforms.linewidth.value=t}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(t){!!t!="USE_DASH"in this.defines&&(this.needsUpdate=!0),t===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(t){this.uniforms.dashSize.value=t}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(t){!!t!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),t===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const X9=new le,Y9=new le,Ci=new En,Ai=new En,il=new En,RA=new le,OA=new wt,Qi=new dJ,K9=new le,Bb=new Zr,zb=new bi,sl=new En;let ml,iN,IJ,_d;function Z9(n,e,t){return sl.set(0,0,-e,1).applyMatrix4(n.projectionMatrix),sl.multiplyScalar(1/sl.w),sl.x=_d/t.width,sl.y=_d/t.height,sl.applyMatrix4(n.projectionMatrixInverse),sl.multiplyScalar(1/sl.w),Math.abs(Math.max(sl.x,sl.y))}function o7e(n,e){for(let t=0,r=iN.count;t<r;t++){Qi.start.fromBufferAttribute(iN,t),Qi.end.fromBufferAttribute(IJ,t);const i=new le,s=new le;ml.distanceSqToSegment(Qi.start,Qi.end,s,i),s.distanceTo(i)<_d*.5&&e.push({point:s,pointOnLine:i,distance:ml.origin.distanceTo(s),object:n,face:null,faceIndex:t,uv:null,uv2:null})}}function a7e(n,e,t){const r=e.projectionMatrix,s=n.material.resolution,o=n.matrixWorld,a=n.geometry,l=a.attributes.instanceStart,u=a.attributes.instanceEnd,c=-e.near;ml.at(1,il),il.w=1,il.applyMatrix4(e.matrixWorldInverse),il.applyMatrix4(r),il.multiplyScalar(1/il.w),il.x*=s.x/2,il.y*=s.y/2,il.z=0,RA.copy(il),OA.multiplyMatrices(e.matrixWorldInverse,o);for(let f=0,d=l.count;f<d;f++){if(Ci.fromBufferAttribute(l,f),Ai.fromBufferAttribute(u,f),Ci.w=1,Ai.w=1,Ci.applyMatrix4(OA),Ai.applyMatrix4(OA),Ci.z>c&&Ai.z>c)continue;if(Ci.z>c){const S=Ci.z-Ai.z,b=(Ci.z-c)/S;Ci.lerp(Ai,b)}else if(Ai.z>c){const S=Ai.z-Ci.z,b=(Ai.z-c)/S;Ai.lerp(Ci,b)}Ci.applyMatrix4(r),Ai.applyMatrix4(r),Ci.multiplyScalar(1/Ci.w),Ai.multiplyScalar(1/Ai.w),Ci.x*=s.x/2,Ci.y*=s.y/2,Ai.x*=s.x/2,Ai.y*=s.y/2,Qi.start.copy(Ci),Qi.start.z=0,Qi.end.copy(Ai),Qi.end.z=0;const m=Qi.closestPointToPointParameter(RA,!0);Qi.at(m,K9);const v=KE.lerp(Ci.z,Ai.z,m),y=v>=-1&&v<=1,p=RA.distanceTo(K9)<_d*.5;if(y&&p){Qi.start.fromBufferAttribute(l,f),Qi.end.fromBufferAttribute(u,f),Qi.start.applyMatrix4(o),Qi.end.applyMatrix4(o);const S=new le,b=new le;ml.distanceSqToSegment(Qi.start,Qi.end,b,S),t.push({point:b,pointOnLine:S,distance:ml.origin.distanceTo(b),object:n,face:null,faceIndex:f,uv:null,uv2:null})}}}class LJ extends Vr{constructor(e=new ik,t=new sk({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,r=e.attributes.instanceEnd,i=new Float32Array(2*t.count);for(let o=0,a=0,l=t.count;o<l;o++,a+=2)X9.fromBufferAttribute(t,o),Y9.fromBufferAttribute(r,o),i[a]=a===0?0:i[a-1],i[a+1]=i[a]+X9.distanceTo(Y9);const s=new __(i,2,1);return e.setAttribute("instanceDistanceStart",new wo(s,1,0)),e.setAttribute("instanceDistanceEnd",new wo(s,1,1)),this}raycast(e,t){const r=this.material.worldUnits,i=e.camera;i===null&&!r&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const s=e.params.Line2!==void 0&&e.params.Line2.threshold||0;ml=e.ray;const o=this.matrixWorld,a=this.geometry,l=this.material;_d=l.linewidth+s,iN=a.attributes.instanceStart,IJ=a.attributes.instanceEnd,a.boundingSphere===null&&a.computeBoundingSphere(),zb.copy(a.boundingSphere).applyMatrix4(o);let u;if(r)u=_d*.5;else{const f=Math.max(i.near,zb.distanceToPoint(ml.origin));u=Z9(i,f,l.resolution)}if(zb.radius+=u,ml.intersectsSphere(zb)===!1)return;a.boundingBox===null&&a.computeBoundingBox(),Bb.copy(a.boundingBox).applyMatrix4(o);let c;if(r)c=_d*.5;else{const f=Math.max(i.near,Bb.distanceToPoint(ml.origin));c=Z9(i,f,l.resolution)}Bb.expandByScalar(c),ml.intersectsBox(Bb)!==!1&&(r?o7e(this,t):a7e(this,i,t))}}class l7e extends LJ{constructor(e=new kJ,t=new sk({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}const u7e=new le,c7e=new le,f7e=new le,d7e=(n,e,t)=>{const r=t.width/2,i=t.height/2;e.updateMatrixWorld(!1);const s=n.project(e);return s.x=s.x*r+r,s.y=-(s.y*i)+i,s},h7e=(n,e,t,r=1)=>{const i=u7e.set(n.x/t.width*2-1,-(n.y/t.height)*2+1,r);return i.unproject(e),i},FJ=(n,e,t,r)=>{const i=d7e(f7e.copy(n),t,r);let s=0;for(let o=0;o<2;++o){const a=c7e.copy(i).setComponent(o,i.getComponent(o)+e),l=h7e(a,t,r,a.z);s=Math.max(s,n.distanceTo(l))}return s},E_=k.forwardRef(function({points:e,color:t=16777215,vertexColors:r,linewidth:i,lineWidth:s,segments:o,dashed:a,...l},u){var c,f;const d=Ln(p=>p.size),h=k.useMemo(()=>o?new LJ:new l7e,[o]),[m]=k.useState(()=>new sk),v=(r==null||(c=r[0])==null?void 0:c.length)===4?4:3,y=k.useMemo(()=>{const p=o?new ik:new kJ,S=e.map(b=>{const g=Array.isArray(b);return b instanceof le||b instanceof En?[b.x,b.y,b.z]:b instanceof et?[b.x,b.y,0]:g&&b.length===3?[b[0],b[1],b[2]]:g&&b.length===2?[b[0],b[1],0]:b});if(p.setPositions(S.flat()),r){t=16777215;const b=r.map(g=>g instanceof mt?g.toArray():g);p.setColors(b.flat(),v)}return p},[e,o,r,v]);return k.useLayoutEffect(()=>{h.computeLineDistances()},[e,h]),k.useLayoutEffect(()=>{a?m.defines.USE_DASH="":delete m.defines.USE_DASH,m.needsUpdate=!0},[a,m]),k.useEffect(()=>()=>y.dispose(),[y]),k.createElement("primitive",at({object:h,ref:u},l),k.createElement("primitive",{object:y,attach:"geometry"}),k.createElement("primitive",at({object:m,attach:"material",color:t,vertexColors:!!r,resolution:[d.width,d.height],linewidth:(f=i??s)!==null&&f!==void 0?f:1,dashed:a,transparent:v===4},l)))});function BJ(n,e,t,r){const i=class extends Do{constructor(o={}){const a=Object.entries(n);super({uniforms:a.reduce((l,[u,c])=>{const f=U0.clone({[u]:{value:c}});return{...l,...f}},{}),vertexShader:e,fragmentShader:t}),this.key="",a.forEach(([l])=>Object.defineProperty(this,l,{get:()=>this.uniforms[l].value,set:u=>this.uniforms[l].value=u})),Object.assign(this,o)}};return i.key=KE.generateUUID(),i}const p7e=()=>parseInt(Ym.replace(/\D+/g,"")),m7e=p7e();function g7e(n,e,t){const r=Ln(d=>d.size),i=Ln(d=>d.viewport),s=typeof n=="number"?n:r.width*i.dpr,o=r.height*i.dpr,a=(typeof n=="number"?t:n)||{},{samples:l=0,depth:u,...c}=a,f=k.useMemo(()=>{const d=new la(s,o,{minFilter:lr,magFilter:lr,type:kd,...c});return u&&(d.depthTexture=new JE(s,o,vo)),d.samples=l,d},[]);return k.useLayoutEffect(()=>{f.setSize(s,o),l&&(f.samples=l)},[l,f,s,o]),k.useEffect(()=>()=>f.dispose(),[]),f}const v7e=n=>typeof n=="function",zJ=k.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,children:r,makeDefault:i,...s},o)=>{const a=Ln(({set:y})=>y),l=Ln(({camera:y})=>y),u=Ln(({size:y})=>y),c=k.useRef(null);k.useImperativeHandle(o,()=>c.current,[]);const f=k.useRef(null),d=g7e(e);k.useLayoutEffect(()=>{s.manual||c.current.updateProjectionMatrix()},[u,s]),k.useLayoutEffect(()=>{c.current.updateProjectionMatrix()}),k.useLayoutEffect(()=>{if(i){const y=l;return a(()=>({camera:c.current})),()=>a(()=>({camera:y}))}},[c,i,a]);let h=0,m=null;const v=v7e(r);return nh(y=>{v&&(t===1/0||h<t)&&(f.current.visible=!1,y.gl.setRenderTarget(d),m=y.scene.background,n&&(y.scene.background=n),y.gl.render(y.scene,c.current),y.scene.background=m,y.gl.setRenderTarget(null),f.current.visible=!0,h++)}),k.createElement(k.Fragment,null,k.createElement("orthographicCamera",at({left:u.width/-2,right:u.width/2,top:u.height/2,bottom:u.height/-2,ref:c},s),!v&&r),k.createElement("group",{ref:f},v&&r(d.texture)))}),y7e=k.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:r,enableDamping:i=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...u},c)=>{const f=Ln(x=>x.invalidate),d=Ln(x=>x.camera),h=Ln(x=>x.gl),m=Ln(x=>x.events),v=Ln(x=>x.setEvents),y=Ln(x=>x.set),p=Ln(x=>x.get),S=Ln(x=>x.performance),b=e||d,g=r||m.connected||h.domElement,w=k.useMemo(()=>new s7e(b),[b]);return nh(()=>{w.enabled&&w.update()},-1),k.useEffect(()=>(s&&w.connect(s===!0?g:s),w.connect(g),()=>void w.dispose()),[s,g,t,w,f]),k.useEffect(()=>{const x=N=>{f(),t&&S.regress(),o&&o(N)},M=N=>{a&&a(N)},A=N=>{l&&l(N)};return w.addEventListener("change",x),w.addEventListener("start",M),w.addEventListener("end",A),()=>{w.removeEventListener("start",M),w.removeEventListener("end",A),w.removeEventListener("change",x)}},[o,a,l,w,f,v]),k.useEffect(()=>{if(n){const x=p().controls;return y({controls:w}),()=>y({controls:x})}},[n,w]),k.createElement("primitive",at({ref:c,object:w,enableDamping:i},u))});function x7e({defaultScene:n,defaultCamera:e,renderPriority:t=1}){const{gl:r,scene:i,camera:s}=Ln();let o;return nh(()=>{o=r.autoClear,t===1&&(r.autoClear=!0,r.render(n,e)),r.autoClear=!1,r.clearDepth(),r.render(i,s),r.autoClear=o},t),k.createElement("group",{onPointerOver:()=>null})}function b7e({children:n,renderPriority:e=1}){const{scene:t,camera:r}=Ln(),[i]=k.useState(()=>new $0);return k.createElement(k.Fragment,null,A9e(k.createElement(k.Fragment,null,n,k.createElement(x7e,{defaultScene:t,defaultCamera:r,renderPriority:e})),i,{events:{priority:e+1}}))}const UJ=k.createContext({}),w7e=()=>k.useContext(UJ),S7e=2*Math.PI,kA=new Mn,J9=new wt,[Kh,IA]=[new Kr,new Kr],Q9=new le,e7=new le,_7e=n=>"minPolarAngle"in n,E7e=({alignment:n="bottom-right",margin:e=[80,80],renderPriority:t=1,onUpdate:r,onTarget:i,children:s})=>{const o=Ln(x=>x.size),a=Ln(x=>x.camera),l=Ln(x=>x.controls),u=Ln(x=>x.invalidate),c=k.useRef(null),f=k.useRef(null),d=k.useRef(!1),h=k.useRef(0),m=k.useRef(new le(0,0,0)),v=k.useRef(new le(0,0,0));k.useEffect(()=>{v.current.copy(a.up)},[a]);const y=k.useCallback(x=>{d.current=!0,(l||i)&&(m.current=(l==null?void 0:l.target)||(i==null?void 0:i())),h.current=a.position.distanceTo(Q9),Kh.copy(a.quaternion),e7.copy(x).multiplyScalar(h.current).add(Q9),kA.lookAt(e7),kA.up.copy(a.up),IA.copy(kA.quaternion),u()},[l,a,i,u]);nh((x,M)=>{if(f.current&&c.current){var A;if(d.current)if(Kh.angleTo(IA)<.01)d.current=!1,_7e(l)&&a.up.copy(v.current);else{const N=M*S7e;Kh.rotateTowards(IA,N),a.position.set(0,0,1).applyQuaternion(Kh).multiplyScalar(h.current).add(m.current),a.up.set(0,1,0).applyQuaternion(Kh).normalize(),a.quaternion.copy(Kh),r?r():l&&l.update(),u()}J9.copy(a.matrix).invert(),(A=c.current)==null||A.quaternion.setFromRotationMatrix(J9)}});const p=k.useMemo(()=>({tweenCamera:y}),[y]),[S,b]=e,g=n.endsWith("-center")?0:n.endsWith("-left")?-o.width/2+S:o.width/2-S,w=n.startsWith("center-")?0:n.startsWith("top-")?o.height/2-b:-o.height/2+b;return k.createElement(b7e,{renderPriority:t},k.createElement(UJ.Provider,{value:p},k.createElement(zJ,{makeDefault:!0,ref:f,position:[0,0,200]}),k.createElement("group",{ref:c,position:[g,w,0]},s)))};function LA({scale:n=[.8,.05,.05],color:e,rotation:t}){return k.createElement("group",{rotation:t},k.createElement("mesh",{position:[.4,0,0]},k.createElement("boxGeometry",{args:n}),k.createElement("meshBasicMaterial",{color:e,toneMapped:!1})))}function Zh({onClick:n,font:e,disabled:t,arcStyle:r,label:i,labelColor:s,axisHeadScale:o=1,...a}){const l=Ln(v=>v.gl),u=k.useMemo(()=>{const v=document.createElement("canvas");v.width=64,v.height=64;const y=v.getContext("2d");return y.beginPath(),y.arc(32,32,16,0,2*Math.PI),y.closePath(),y.fillStyle=r,y.fill(),i&&(y.font=e,y.textAlign="center",y.fillStyle=s,y.fillText(i,32,41)),new NZ(v)},[r,i,s,e]),[c,f]=k.useState(!1),d=(i?1:.75)*(c?1.2:1)*o,h=v=>{v.stopPropagation(),f(!0)},m=v=>{v.stopPropagation(),f(!1)};return k.createElement("sprite",at({scale:d,onPointerOver:t?void 0:h,onPointerOut:t?void 0:n||m},a),k.createElement("spriteMaterial",{map:u,"map-anisotropy":l.capabilities.getMaxAnisotropy()||1,alphaTest:.3,opacity:i?1:.75,toneMapped:!1}))}const M7e=({hideNegativeAxes:n,hideAxisHeads:e,disabled:t,font:r="18px Inter var, Arial, sans-serif",axisColors:i=["#ff2060","#20df80","#2080ff"],axisHeadScale:s=1,axisScale:o,labels:a=["X","Y","Z"],labelColor:l="#000",onClick:u,...c})=>{const[f,d,h]=i,{tweenCamera:m}=w7e(),v={font:r,disabled:t,labelColor:l,onClick:u,axisHeadScale:s,onPointerDown:t?void 0:y=>{m(y.object.position),y.stopPropagation()}};return k.createElement("group",at({scale:40},c),k.createElement(LA,{color:f,rotation:[0,0,0],scale:o}),k.createElement(LA,{color:d,rotation:[0,0,Math.PI/2],scale:o}),k.createElement(LA,{color:h,rotation:[0,-Math.PI/2,0],scale:o}),!e&&k.createElement(k.Fragment,null,k.createElement(Zh,at({arcStyle:f,position:[1,0,0],label:a[0]},v)),k.createElement(Zh,at({arcStyle:d,position:[0,1,0],label:a[1]},v)),k.createElement(Zh,at({arcStyle:h,position:[0,0,1],label:a[2]},v)),!n&&k.createElement(k.Fragment,null,k.createElement(Zh,at({arcStyle:f,position:[-1,0,0]},v)),k.createElement(Zh,at({arcStyle:d,position:[0,-1,0]},v)),k.createElement(Zh,at({arcStyle:h,position:[0,0,-1]},v)))))},C7e=BJ({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,fadeFrom:1,cellThickness:.5,sectionThickness:1,cellColor:new mt,sectionColor:new mt,infiniteGrid:!1,followCamera:!1,worldCamProjPosition:new le,worldPlanePosition:new le},`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform vec3 worldPlanePosition;
    uniform float fadeDistance;
    uniform bool infiniteGrid;
    uniform bool followCamera;

    void main() {
      localPosition = position.xzy;
      if (infiniteGrid) localPosition *= 1.0 + fadeDistance;
      
      worldPosition = modelMatrix * vec4(localPosition, 1.0);
      if (followCamera) {
        worldPosition.xyz += (worldCamProjPosition - worldPlanePosition);
        localPosition = (inverse(modelMatrix) * worldPosition).xyz;
      }

      gl_Position = projectionMatrix * viewMatrix * worldPosition;
    }
  `,`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform float cellSize;
    uniform float sectionSize;
    uniform vec3 cellColor;
    uniform vec3 sectionColor;
    uniform float fadeDistance;
    uniform float fadeStrength;
    uniform float fadeFrom;
    uniform float cellThickness;
    uniform float sectionThickness;

    float getGrid(float size, float thickness) {
      vec2 r = localPosition.xz / size;
      vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
      float line = min(grid.x, grid.y) + 1.0 - thickness;
      return 1.0 - min(line, 1.0);
    }

    void main() {
      float g1 = getGrid(cellSize, cellThickness);
      float g2 = getGrid(sectionSize, sectionThickness);

      vec3 from = worldCamProjPosition*vec3(fadeFrom);
      float dist = distance(from, worldPosition.xyz);
      float d = 1.0 - min(dist / fadeDistance, 1.0);
      vec3 color = mix(cellColor, sectionColor, min(1.0, sectionThickness * g2));

      gl_FragColor = vec4(color, (g1 + g2) * pow(d, fadeStrength));
      gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
      if (gl_FragColor.a <= 0.0) discard;

      #include <tonemapping_fragment>
      #include <${m7e>=154?"colorspace_fragment":"encodings_fragment"}>
    }
  `),A7e=k.forwardRef(({args:n,cellColor:e="#000000",sectionColor:t="#2080ff",cellSize:r=.5,sectionSize:i=1,followCamera:s=!1,infiniteGrid:o=!1,fadeDistance:a=100,fadeStrength:l=1,fadeFrom:u=1,cellThickness:c=.5,sectionThickness:f=1,side:d=as,...h},m)=>{QO({GridMaterial:C7e});const v=k.useRef(null);k.useImperativeHandle(m,()=>v.current,[]);const y=new Yo,p=new le(0,1,0),S=new le(0,0,0);nh(w=>{y.setFromNormalAndCoplanarPoint(p,S).applyMatrix4(v.current.matrixWorld);const x=v.current.material,M=x.uniforms.worldCamProjPosition,A=x.uniforms.worldPlanePosition;y.projectPoint(w.camera.position,M.value),A.value.set(0,0,0).applyMatrix4(v.current.matrixWorld)});const b={cellSize:r,sectionSize:i,cellColor:e,sectionColor:t,cellThickness:c,sectionThickness:f},g={fadeDistance:a,fadeStrength:l,fadeFrom:u,infiniteGrid:o,followCamera:s};return k.createElement("mesh",at({ref:v,frustumCulled:!1},h),k.createElement("gridMaterial",at({transparent:!0,"extensions-derivatives":!0,side:d},b,g)),k.createElement("planeGeometry",{args:n}))}),Vc={uniforms:{strokeOpacity:1,fillOpacity:.25,fillMix:0,thickness:.05,colorBackfaces:!1,dashInvert:!0,dash:!1,dashRepeats:4,dashLength:.5,squeeze:!1,squeezeMin:.2,squeezeMax:1,stroke:new mt("#ff0000"),backfaceStroke:new mt("#0000ff"),fill:new mt("#00ff00")},vertex:`
	  attribute vec3 barycentric;
	
		varying vec3 v_edges_Barycentric;
		varying vec3 v_edges_Position;

		void initWireframe() {
			v_edges_Barycentric = barycentric;
			v_edges_Position = position.xyz;
		}
	  `,fragment:`
		#ifndef PI
	  	#define PI 3.1415926535897932384626433832795
		#endif
  
	  varying vec3 v_edges_Barycentric;
	  varying vec3 v_edges_Position;
  
	  uniform float strokeOpacity;
	  uniform float fillOpacity;
	  uniform float fillMix;
	  uniform float thickness;
	  uniform bool colorBackfaces;
  
	  // Dash
	  uniform bool dashInvert;
	  uniform bool dash;
	  uniform bool dashOnly;
	  uniform float dashRepeats;
	  uniform float dashLength;
  
	  // Squeeze
	  uniform bool squeeze;
	  uniform float squeezeMin;
	  uniform float squeezeMax;
  
	  // Colors
	  uniform vec3 stroke;
	  uniform vec3 backfaceStroke;
	  uniform vec3 fill;
  
	  // This is like
	  float wireframe_aastep(float threshold, float dist) {
		  float afwidth = fwidth(dist) * 0.5;
		  return smoothstep(threshold - afwidth, threshold + afwidth, dist);
	  }
  
	  float wireframe_map(float value, float min1, float max1, float min2, float max2) {
		  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
	  }
  
	  float getWireframe() {
			vec3 barycentric = v_edges_Barycentric;
		
			// Distance from center of each triangle to its edges.
			float d = min(min(barycentric.x, barycentric.y), barycentric.z);

			// for dashed rendering, we can use this to get the 0 .. 1 value of the line length
			float positionAlong = max(barycentric.x, barycentric.y);
			if (barycentric.y < barycentric.x && barycentric.y < barycentric.z) {
				positionAlong = 1.0 - positionAlong;
			}

			// the thickness of the stroke
			float computedThickness = wireframe_map(thickness, 0.0, 1.0, 0.0, 0.34);

			// if we want to shrink the thickness toward the center of the line segment
			if (squeeze) {
				computedThickness *= mix(squeezeMin, squeezeMax, (1.0 - sin(positionAlong * PI)));
			}

			// Create dash pattern
			if (dash) {
				// here we offset the stroke position depending on whether it
				// should overlap or not
				float offset = 1.0 / dashRepeats * dashLength / 2.0;
				if (!dashInvert) {
					offset += 1.0 / dashRepeats / 2.0;
				}

				// if we should animate the dash or not
				// if (dashAnimate) {
				// 	offset += time * 0.22;
				// }

				// create the repeating dash pattern
				float pattern = fract((positionAlong + offset) * dashRepeats);
				computedThickness *= 1.0 - wireframe_aastep(dashLength, pattern);
			}

			// compute the anti-aliased stroke edge  
			float edge = 1.0 - wireframe_aastep(computedThickness, d);

			return edge;
	  }
	  `},T7e=BJ(Vc.uniforms,Vc.vertex+`
  	void main() {
		initWireframe();
		gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
	}
  `,Vc.fragment+`
  void main () {
		// Compute color

		float edge = getWireframe();
		vec4 colorStroke = vec4(stroke, edge);

		#ifdef FLIP_SIDED
			colorStroke.rgb = backfaceStroke;
		#endif
    
		vec4 colorFill = vec4(fill, fillOpacity);
		vec4 outColor = mix(colorFill, colorStroke, edge * strokeOpacity);

		gl_FragColor = outColor;
	}
  `);function D7e(n,e){n.onBeforeCompile=t=>{t.uniforms={...t.uniforms,...e},t.vertexShader=t.vertexShader.replace("void main() {",`
		  ${Vc.vertex}
		  void main() {
			initWireframe();
		`),t.fragmentShader=t.fragmentShader.replace("void main() {",`
		  ${Vc.fragment}
		  void main() {
		`),t.fragmentShader=t.fragmentShader.replace("#include <color_fragment>",`
		  #include <color_fragment>
			  float edge = getWireframe();
		  vec4 colorStroke = vec4(stroke, edge);
		  #ifdef FLIP_SIDED
			colorStroke.rgb = backfaceStroke;
		  #endif
		  vec4 colorFill = vec4(mix(diffuseColor.rgb, fill, fillMix), mix(diffuseColor.a, fillOpacity, fillMix));
		  vec4 outColor = mix(colorFill, colorStroke, edge * strokeOpacity);

		  diffuseColor.rgb = outColor.rgb;
		  diffuseColor.a *= outColor.a;
		`)},n.side=ns,n.transparent=!0}function N7e(n,e){k.useEffect(()=>{var t;return void(n.fillOpacity.value=(t=e.fillOpacity)!==null&&t!==void 0?t:n.fillOpacity.value)},[e.fillOpacity]),k.useEffect(()=>{var t;return void(n.fillMix.value=(t=e.fillMix)!==null&&t!==void 0?t:n.fillMix.value)},[e.fillMix]),k.useEffect(()=>{var t;return void(n.strokeOpacity.value=(t=e.strokeOpacity)!==null&&t!==void 0?t:n.strokeOpacity.value)},[e.strokeOpacity]),k.useEffect(()=>{var t;return void(n.thickness.value=(t=e.thickness)!==null&&t!==void 0?t:n.thickness.value)},[e.thickness]),k.useEffect(()=>void(n.colorBackfaces.value=!!e.colorBackfaces),[e.colorBackfaces]),k.useEffect(()=>void(n.dash.value=!!e.dash),[e.dash]),k.useEffect(()=>void(n.dashInvert.value=!!e.dashInvert),[e.dashInvert]),k.useEffect(()=>{var t;return void(n.dashRepeats.value=(t=e.dashRepeats)!==null&&t!==void 0?t:n.dashRepeats.value)},[e.dashRepeats]),k.useEffect(()=>{var t;return void(n.dashLength.value=(t=e.dashLength)!==null&&t!==void 0?t:n.dashLength.value)},[e.dashLength]),k.useEffect(()=>void(n.squeeze.value=!!e.squeeze),[e.squeeze]),k.useEffect(()=>{var t;return void(n.squeezeMin.value=(t=e.squeezeMin)!==null&&t!==void 0?t:n.squeezeMin.value)},[e.squeezeMin]),k.useEffect(()=>{var t;return void(n.squeezeMax.value=(t=e.squeezeMax)!==null&&t!==void 0?t:n.squeezeMax.value)},[e.squeezeMax]),k.useEffect(()=>void(n.stroke.value=e.stroke?new mt(e.stroke):n.stroke.value),[e.stroke]),k.useEffect(()=>void(n.fill.value=e.fill?new mt(e.fill):n.fill.value),[e.fill]),k.useEffect(()=>void(n.backfaceStroke.value=e.backfaceStroke?new mt(e.backfaceStroke):n.backfaceStroke.value),[e.backfaceStroke])}function P7e(n){return!!(n!=null&&n.geometry)}function R7e(n){return!!(n!=null&&n.isBufferGeometry)}function O7e(n){return!!(n!=null&&n.current)}function t7(n){return(n==null?void 0:n.current)!==void 0}function n7(n){return n.type==="WireframeGeometry"}function k7e(){const n={};for(const e in Vc.uniforms)n[e]={value:Vc.uniforms[e]};return n}function I7e(n,e){const r=n.getAttribute("position").count,i=[];for(let s=0;s<r;s++){const o=s%2===0,a=e?1:0;o?i.push(0,0,1,0,1,0,1,0,a):i.push(0,1,0,0,0,1,1,0,a)}return new Fn(Float32Array.from(i),3)}function $J(n){const e=O7e(n)?n.current:n;if(R7e(e))return e;{if(n7(e))throw new Error("Wireframe: WireframeGeometry is not supported.");const t=e.parent;if(P7e(t)){if(n7(t.geometry))throw new Error("Wireframe: WireframeGeometry is not supported.");return t.geometry}}}function VJ(n,e){if(n.index){console.warn("Wireframe: Requires non-indexed geometry, converting to non-indexed geometry.");const r=n.toNonIndexed();n.copy(r),n.setIndex(null)}const t=I7e(n,e);n.setAttribute("barycentric",t)}function L7e({geometry:n,simplify:e=!1,...t}){QO({MeshWireframeMaterial:T7e});const[r,i]=k.useState(null);k.useLayoutEffect(()=>{const o=$J(n);if(!o)throw new Error("Wireframe: geometry prop must be a BufferGeometry or a ref to a BufferGeometry.");VJ(o,e),t7(n)&&i(o)},[e,n]);const s=t7(n)?r:n;return k.createElement(k.Fragment,null,s&&k.createElement("mesh",{geometry:s},k.createElement("meshWireframeMaterial",at({attach:"material",transparent:!0,side:ns,polygonOffset:!0,polygonOffsetFactor:-4},t,{extensions:{derivatives:!0,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1}}))))}function F7e({simplify:n=!1,...e}){const t=k.useRef(null),r=k.useMemo(()=>k7e(),[Vc.uniforms]);return N7e(r,e),k.useLayoutEffect(()=>{const i=$J(t);if(!i)throw new Error("Wireframe: Must be a child of a Mesh, Line or Points object or specify a geometry prop.");const s=i.clone();return VJ(i,n),()=>{i.copy(s),s.dispose()}},[n]),k.useLayoutEffect(()=>{const i=t.current.parent,s=i.material.clone();return D7e(i.material,r),()=>{i.material.dispose(),i.material=s}},[]),k.createElement("object3D",{ref:t})}function sN({geometry:n,...e}){return n?k.createElement(L7e,at({geometry:n},e)):k.createElement(F7e,e)}const jy=k.createContext(null),Ub=new le,r7=new le,B7e=(n,e,t,r)=>{const i=e.dot(e),s=e.dot(n)-e.dot(t),o=e.dot(r);return o===0?-s/i:(Ub.copy(r).multiplyScalar(i/o).sub(e),r7.copy(r).multiplyScalar(s/o).add(t).sub(n),-Ub.dot(r7)/Ub.dot(Ub))},z7e=new le(0,1,0),i7=new wt,FA=({direction:n,axis:e})=>{const{translation:t,translationLimits:r,annotations:i,annotationsClass:s,depthTest:o,scale:a,lineWidth:l,fixed:u,axisColors:c,hoveredColor:f,opacity:d,onDragStart:h,onDrag:m,onDragEnd:v,userData:y}=k.useContext(jy),p=Ln(I=>I.controls),S=k.useRef(null),b=k.useRef(null),g=k.useRef(null),w=k.useRef(0),[x,M]=k.useState(!1),A=k.useCallback(I=>{i&&(S.current.innerText=`${t.current[e].toFixed(2)}`,S.current.style.display="block"),I.stopPropagation();const U=new wt().extractRotation(b.current.matrixWorld),L=I.point.clone(),q=new le().setFromMatrixPosition(b.current.matrixWorld),Z=n.clone().applyMatrix4(U).normalize();g.current={clickPoint:L,dir:Z},w.current=t.current[e],h({component:"Arrow",axis:e,origin:q,directions:[Z]}),p&&(p.enabled=!1),I.target.setPointerCapture(I.pointerId)},[i,n,p,h,t,e]),N=k.useCallback(I=>{if(I.stopPropagation(),x||M(!0),g.current){const{clickPoint:U,dir:L}=g.current,[q,Z]=(r==null?void 0:r[e])||[void 0,void 0];let J=B7e(U,L,I.ray.origin,I.ray.direction);q!==void 0&&(J=Math.max(J,q-w.current)),Z!==void 0&&(J=Math.min(J,Z-w.current)),t.current[e]=w.current+J,i&&(S.current.innerText=`${t.current[e].toFixed(2)}`),i7.makeTranslation(L.x*J,L.y*J,L.z*J),m(i7)}},[i,m,x,t,r,e]),C=k.useCallback(I=>{i&&(S.current.style.display="none"),I.stopPropagation(),g.current=null,v(),p&&(p.enabled=!0),I.target.releasePointerCapture(I.pointerId)},[i,p,v]),T=k.useCallback(I=>{I.stopPropagation(),M(!1)},[]),{cylinderLength:R,coneWidth:$,coneLength:B,matrixL:z}=k.useMemo(()=>{const I=u?l/a*1.6:a/20,U=u?.2:a/5,L=u?1-U:a-U,q=new Kr().setFromUnitVectors(z7e,n.clone().normalize()),Z=new wt().makeRotationFromQuaternion(q);return{cylinderLength:L,coneWidth:I,coneLength:U,matrixL:Z}},[n,a,l,u]),D=x?f:c[e];return k.createElement("group",{ref:b},k.createElement("group",{matrix:z,matrixAutoUpdate:!1,onPointerDown:A,onPointerMove:N,onPointerUp:C,onPointerOut:T},i&&k.createElement(bM,{position:[0,-B,0]},k.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:s,ref:S})),k.createElement("mesh",{visible:!1,position:[0,(R+B)/2,0],userData:y},k.createElement("cylinderGeometry",{args:[$*1.4,$*1.4,R+B,8,1]})),k.createElement(E_,{transparent:!0,raycast:()=>null,depthTest:o,points:[0,0,0,0,R,0],lineWidth:l,side:ns,color:D,opacity:d,polygonOffset:!0,renderOrder:1,polygonOffsetFactor:-10,fog:!1}),k.createElement("mesh",{raycast:()=>null,position:[0,R+B/2,0],renderOrder:500},k.createElement("coneGeometry",{args:[$,B,24,1]}),k.createElement("meshBasicMaterial",{transparent:!0,depthTest:o,color:D,opacity:d,polygonOffset:!0,polygonOffsetFactor:-10,fog:!1}))))},BA=new le,zA=new le,UA=n=>n*180/Math.PI,U7e=n=>n*Math.PI/180,$7e=(n,e,t,r,i)=>{BA.copy(n).sub(t),zA.copy(e).sub(t);const s=r.dot(r),o=i.dot(i),a=BA.dot(r)/s,l=BA.dot(i)/o,u=zA.dot(r)/s,c=zA.dot(i)/o,f=Math.atan2(l,a);return Math.atan2(c,u)-f},V7e=(n,e)=>{let t=Math.floor(n/e);return t=t<0?t+1:t,n-t*e},s7=n=>{let e=V7e(n,2*Math.PI);return Math.abs(e)<1e-6?0:(e<0&&(e+=2*Math.PI),e)},$b=new wt,o7=new le,Vb=new Vu,$A=new le,VA=({dir1:n,dir2:e,axis:t})=>{const{rotationLimits:r,annotations:i,annotationsClass:s,depthTest:o,scale:a,lineWidth:l,fixed:u,axisColors:c,hoveredColor:f,opacity:d,onDragStart:h,onDrag:m,onDragEnd:v,userData:y}=k.useContext(jy),p=Ln(D=>D.controls),S=k.useRef(null),b=k.useRef(null),g=k.useRef(0),w=k.useRef(0),x=k.useRef(null),[M,A]=k.useState(!1),N=k.useCallback(D=>{i&&(S.current.innerText=`${UA(w.current).toFixed(0)}`,S.current.style.display="block"),D.stopPropagation();const I=D.point.clone(),U=new le().setFromMatrixPosition(b.current.matrixWorld),L=new le().setFromMatrixColumn(b.current.matrixWorld,0).normalize(),q=new le().setFromMatrixColumn(b.current.matrixWorld,1).normalize(),Z=new le().setFromMatrixColumn(b.current.matrixWorld,2).normalize(),J=new Yo().setFromNormalAndCoplanarPoint(Z,U);x.current={clickPoint:I,origin:U,e1:L,e2:q,normal:Z,plane:J},h({component:"Rotator",axis:t,origin:U,directions:[L,q,Z]}),p&&(p.enabled=!1),D.target.setPointerCapture(D.pointerId)},[i,p,h,t]),C=k.useCallback(D=>{if(D.stopPropagation(),M||A(!0),x.current){const{clickPoint:I,origin:U,e1:L,e2:q,normal:Z,plane:J}=x.current,[Y,ee]=(r==null?void 0:r[t])||[void 0,void 0];Vb.copy(D.ray),Vb.intersectPlane(J,$A),Vb.direction.negate(),Vb.intersectPlane(J,$A);let ae=$7e(I,$A,U,L,q),ce=UA(ae);D.shiftKey&&(ce=Math.round(ce/10)*10,ae=U7e(ce)),Y!==void 0&&ee!==void 0&&ee-Y<2*Math.PI?(ae=s7(ae),ae=ae>Math.PI?ae-2*Math.PI:ae,ae=KE.clamp(ae,Y-g.current,ee-g.current),w.current=g.current+ae):(w.current=s7(g.current+ae),w.current=w.current>Math.PI?w.current-2*Math.PI:w.current),i&&(ce=UA(w.current),S.current.innerText=`${ce.toFixed(0)}`),$b.makeRotationAxis(Z,ae),o7.copy(U).applyMatrix4($b).sub(U).negate(),$b.setPosition(o7),m($b)}},[i,m,M,r,t]),T=k.useCallback(D=>{i&&(S.current.style.display="none"),D.stopPropagation(),g.current=w.current,x.current=null,v(),p&&(p.enabled=!0),D.target.releasePointerCapture(D.pointerId)},[i,p,v]),R=k.useCallback(D=>{D.stopPropagation(),A(!1)},[]),$=k.useMemo(()=>{const D=n.clone().normalize(),I=e.clone().normalize();return new wt().makeBasis(D,I,D.clone().cross(I))},[n,e]),B=u?.65:a*.65,z=k.useMemo(()=>{const I=[];for(let U=0;U<=32;U++){const L=U*(Math.PI/2)/32;I.push(new le(Math.cos(L)*B,Math.sin(L)*B,0))}return I},[B]);return k.createElement("group",{ref:b,onPointerDown:N,onPointerMove:C,onPointerUp:T,onPointerOut:R,matrix:$,matrixAutoUpdate:!1},i&&k.createElement(bM,{position:[B,B,0]},k.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:s,ref:S})),k.createElement(E_,{points:z,lineWidth:l*4,visible:!1,userData:y}),k.createElement(E_,{transparent:!0,raycast:()=>null,depthTest:o,points:z,lineWidth:l,side:ns,color:M?f:c[t],opacity:d,polygonOffset:!0,polygonOffsetFactor:-10,fog:!1}))},H7e=(n,e,t)=>{const r=Math.abs(n.x)>=Math.abs(n.y)&&Math.abs(n.x)>=Math.abs(n.z)?0:Math.abs(n.y)>=Math.abs(n.x)&&Math.abs(n.y)>=Math.abs(n.z)?1:2,i=[0,1,2].sort((m,v)=>Math.abs(e.getComponent(v))-Math.abs(e.getComponent(m))),s=r===i[0]?i[1]:i[0],o=n.getComponent(r),a=n.getComponent(s),l=e.getComponent(r),u=e.getComponent(s),c=t.getComponent(r),d=(t.getComponent(s)-c*(a/o))/(u-l*(a/o));return[(c-d*l)/o,d]},Hb=new Vu,Wb=new le,a7=new wt,HA=({dir1:n,dir2:e,axis:t})=>{const{translation:r,translationLimits:i,annotations:s,annotationsClass:o,depthTest:a,scale:l,lineWidth:u,fixed:c,axisColors:f,hoveredColor:d,opacity:h,onDragStart:m,onDrag:v,onDragEnd:y,userData:p}=k.useContext(jy),S=Ln(L=>L.controls),b=k.useRef(null),g=k.useRef(null),w=k.useRef(null),x=k.useRef(0),M=k.useRef(0),[A,N]=k.useState(!1),C=k.useCallback(L=>{s&&(b.current.innerText=`${r.current[(t+1)%3].toFixed(2)}, ${r.current[(t+2)%3].toFixed(2)}`,b.current.style.display="block"),L.stopPropagation();const q=L.point.clone(),Z=new le().setFromMatrixPosition(g.current.matrixWorld),J=new le().setFromMatrixColumn(g.current.matrixWorld,0).normalize(),Y=new le().setFromMatrixColumn(g.current.matrixWorld,1).normalize(),ee=new le().setFromMatrixColumn(g.current.matrixWorld,2).normalize(),ae=new Yo().setFromNormalAndCoplanarPoint(ee,Z);w.current={clickPoint:q,e1:J,e2:Y,plane:ae},x.current=r.current[(t+1)%3],M.current=r.current[(t+2)%3],m({component:"Slider",axis:t,origin:Z,directions:[J,Y,ee]}),S&&(S.enabled=!1),L.target.setPointerCapture(L.pointerId)},[s,S,m,t]),T=k.useCallback(L=>{if(L.stopPropagation(),A||N(!0),w.current){const{clickPoint:q,e1:Z,e2:J,plane:Y}=w.current,[ee,ae]=(i==null?void 0:i[(t+1)%3])||[void 0,void 0],[ce,pe]=(i==null?void 0:i[(t+2)%3])||[void 0,void 0];Hb.copy(L.ray),Hb.intersectPlane(Y,Wb),Hb.direction.negate(),Hb.intersectPlane(Y,Wb),Wb.sub(q);let[we,me]=H7e(Z,J,Wb);ee!==void 0&&(we=Math.max(we,ee-x.current)),ae!==void 0&&(we=Math.min(we,ae-x.current)),ce!==void 0&&(me=Math.max(me,ce-M.current)),pe!==void 0&&(me=Math.min(me,pe-M.current)),r.current[(t+1)%3]=x.current+we,r.current[(t+2)%3]=M.current+me,s&&(b.current.innerText=`${r.current[(t+1)%3].toFixed(2)}, ${r.current[(t+2)%3].toFixed(2)}`),a7.makeTranslation(we*Z.x+me*J.x,we*Z.y+me*J.y,we*Z.z+me*J.z),v(a7)}},[s,v,A,r,i,t]),R=k.useCallback(L=>{s&&(b.current.style.display="none"),L.stopPropagation(),w.current=null,y(),S&&(S.enabled=!0),L.target.releasePointerCapture(L.pointerId)},[s,S,y]),$=k.useCallback(L=>{L.stopPropagation(),N(!1)},[]),B=k.useMemo(()=>{const L=n.clone().normalize(),q=e.clone().normalize();return new wt().makeBasis(L,q,L.clone().cross(q))},[n,e]),z=c?1/7:l/7,D=c?.225:l*.225,I=A?d:f[t],U=k.useMemo(()=>[new le(0,0,0),new le(0,D,0),new le(D,D,0),new le(D,0,0),new le(0,0,0)],[D]);return k.createElement("group",{ref:g,matrix:B,matrixAutoUpdate:!1},s&&k.createElement(bM,{position:[0,0,0]},k.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:o,ref:b})),k.createElement("group",{position:[z*1.7,z*1.7,0]},k.createElement("mesh",{visible:!0,onPointerDown:C,onPointerMove:T,onPointerUp:R,onPointerOut:$,scale:D,userData:p},k.createElement("planeGeometry",null),k.createElement("meshBasicMaterial",{transparent:!0,depthTest:a,color:I,polygonOffset:!0,polygonOffsetFactor:-10,side:ns,fog:!1})),k.createElement(E_,{position:[-D/2,-D/2,0],transparent:!0,depthTest:a,points:U,lineWidth:u,color:I,opacity:h,polygonOffset:!0,polygonOffsetFactor:-10,userData:p,fog:!1})))},gv=new le,l7=new le,W7e=(n,e,t,r)=>{const i=e.dot(e),s=e.dot(n)-e.dot(t),o=e.dot(r);return o===0?-s/i:(gv.copy(r).multiplyScalar(i/o).sub(e),l7.copy(r).multiplyScalar(s/o).add(t).sub(n),-gv.dot(l7)/gv.dot(gv))},j7e=new le(0,1,0),Zg=new le,u7=new wt,WA=({direction:n,axis:e})=>{const{scaleLimits:t,annotations:r,annotationsClass:i,depthTest:s,scale:o,lineWidth:a,fixed:l,axisColors:u,hoveredColor:c,opacity:f,onDragStart:d,onDrag:h,onDragEnd:m,userData:v}=k.useContext(jy),y=Ln(U=>U.size),p=Ln(U=>U.controls),S=k.useRef(null),b=k.useRef(null),g=k.useRef(null),w=k.useRef(1),x=k.useRef(1),M=k.useRef(null),[A,N]=k.useState(!1),C=l?1.2:1.2*o,T=k.useCallback(U=>{r&&(S.current.innerText=`${x.current.toFixed(2)}`,S.current.style.display="block"),U.stopPropagation();const L=new wt().extractRotation(b.current.matrixWorld),q=U.point.clone(),Z=new le().setFromMatrixPosition(b.current.matrixWorld),J=n.clone().applyMatrix4(L).normalize(),Y=b.current.matrixWorld.clone(),ee=Y.clone().invert(),ae=l?1/FJ(b.current.getWorldPosition(gv),o,U.camera,y):1;M.current={clickPoint:q,dir:J,mPLG:Y,mPLGInv:ee,offsetMultiplier:ae},d({component:"Sphere",axis:e,origin:Z,directions:[J]}),p&&(p.enabled=!1),U.target.setPointerCapture(U.pointerId)},[r,p,n,d,e,l,o,y]),R=k.useCallback(U=>{if(U.stopPropagation(),A||N(!0),M.current){const{clickPoint:L,dir:q,mPLG:Z,mPLGInv:J,offsetMultiplier:Y}=M.current,[ee,ae]=(t==null?void 0:t[e])||[1e-5,void 0],pe=W7e(L,q,U.ray.origin,U.ray.direction)*Y,we=l?pe:pe/o;let me=Math.pow(2,we*.2);U.shiftKey&&(me=Math.round(me*10)/10),me=Math.max(me,ee/w.current),ae!==void 0&&(me=Math.min(me,ae/w.current)),x.current=w.current*me,g.current.position.set(0,C+pe,0),r&&(S.current.innerText=`${x.current.toFixed(2)}`),Zg.set(1,1,1),Zg.setComponent(e,me),u7.makeScale(Zg.x,Zg.y,Zg.z).premultiply(Z).multiply(J),h(u7)}},[r,C,h,A,t,e]),$=k.useCallback(U=>{r&&(S.current.style.display="none"),U.stopPropagation(),w.current=x.current,M.current=null,g.current.position.set(0,C,0),m(),p&&(p.enabled=!0),U.target.releasePointerCapture(U.pointerId)},[r,p,m,C]),B=k.useCallback(U=>{U.stopPropagation(),N(!1)},[]),{radius:z,matrixL:D}=k.useMemo(()=>{const U=l?a/o*1.8:o/22.5,L=new Kr().setFromUnitVectors(j7e,n.clone().normalize()),q=new wt().makeRotationFromQuaternion(L);return{radius:U,matrixL:q}},[n,o,a,l]),I=A?c:u[e];return k.createElement("group",{ref:b},k.createElement("group",{matrix:D,matrixAutoUpdate:!1,onPointerDown:T,onPointerMove:R,onPointerUp:$,onPointerOut:B},r&&k.createElement(bM,{position:[0,C/2,0]},k.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:i,ref:S})),k.createElement("mesh",{ref:g,position:[0,C,0],renderOrder:500,userData:v},k.createElement("sphereGeometry",{args:[z,12,12]}),k.createElement("meshBasicMaterial",{transparent:!0,depthTest:s,color:I,opacity:f,polygonOffset:!0,polygonOffsetFactor:-10}))))},c7=new wt,f7=new wt,d7=new wt,jb=new wt,jA=new wt,Jh=new wt,h7=new wt,p7=new wt,m7=new wt,Qh=new Zr,GA=new Zr,g7=new le,v7=new le,y7=new le,x7=new le,Jg=new le,ep=new le(1,0,0),tp=new le(0,1,0),np=new le(0,0,1),G7e=k.forwardRef(({matrix:n,onDragStart:e,onDrag:t,onDragEnd:r,autoTransform:i=!0,anchor:s,disableAxes:o=!1,disableSliders:a=!1,disableRotations:l=!1,disableScaling:u=!1,activeAxes:c=[!0,!0,!0],offset:f=[0,0,0],rotation:d=[0,0,0],scale:h=1,lineWidth:m=4,fixed:v=!1,translationLimits:y,rotationLimits:p,scaleLimits:S,depthTest:b=!0,axisColors:g=["#ff2060","#20df80","#2080ff"],hoveredColor:w="#ffff40",annotations:x=!1,annotationsClass:M,opacity:A=1,visible:N=!0,userData:C,children:T,...R},$)=>{const B=Ln(ee=>ee.invalidate),z=k.useRef(null),D=k.useRef(null),I=k.useRef(null),U=k.useRef(null),L=k.useRef([0,0,0]),q=k.useRef(new le(1,1,1)),Z=k.useRef(new le(1,1,1));k.useLayoutEffect(()=>{s&&(U.current.updateWorldMatrix(!0,!0),jb.copy(U.current.matrixWorld).invert(),Qh.makeEmpty(),U.current.traverse(ee=>{ee.geometry&&(ee.geometry.boundingBox||ee.geometry.computeBoundingBox(),Jh.copy(ee.matrixWorld).premultiply(jb),GA.copy(ee.geometry.boundingBox),GA.applyMatrix4(Jh),Qh.union(GA))}),g7.copy(Qh.max).add(Qh.min).multiplyScalar(.5),v7.copy(Qh.max).sub(Qh.min).multiplyScalar(.5),y7.copy(v7).multiply(new le(...s)).add(g7),x7.set(...f).add(y7),I.current.position.copy(x7),B())});const J=k.useMemo(()=>({onDragStart:ee=>{c7.copy(D.current.matrix),f7.copy(D.current.matrixWorld),e&&e(ee),B()},onDrag:ee=>{d7.copy(z.current.matrixWorld),jb.copy(d7).invert(),jA.copy(f7).premultiply(ee),Jh.copy(jA).premultiply(jb),h7.copy(c7).invert(),p7.copy(Jh).multiply(h7),i&&D.current.matrix.copy(Jh),t&&t(Jh,p7,jA,ee),B()},onDragEnd:()=>{r&&r(),B()},translation:L,translationLimits:y,rotationLimits:p,axisColors:g,hoveredColor:w,opacity:A,scale:h,lineWidth:m,fixed:v,depthTest:b,userData:C,annotations:x,annotationsClass:M}),[e,t,r,L,y,p,S,b,h,m,v,...g,w,A,C,i,x,M]),Y=new le;return nh(ee=>{if(v){const ae=FJ(I.current.getWorldPosition(Y),h,ee.camera,ee.size);q.current.setScalar(ae)}n&&n instanceof wt&&(D.current.matrix=n),D.current.updateWorldMatrix(!0,!0),m7.makeRotationFromEuler(I.current.rotation).setPosition(I.current.position).premultiply(D.current.matrixWorld),Z.current.setFromMatrixScale(m7),Jg.copy(q.current).divide(Z.current),(Math.abs(I.current.scale.x-Jg.x)>1e-4||Math.abs(I.current.scale.y-Jg.y)>1e-4||Math.abs(I.current.scale.z-Jg.z)>1e-4)&&(I.current.scale.copy(Jg),ee.invalidate())}),k.useImperativeHandle($,()=>D.current,[]),k.createElement(jy.Provider,{value:J},k.createElement("group",{ref:z},k.createElement("group",at({ref:D,matrix:n,matrixAutoUpdate:!1},R),k.createElement("group",{visible:N,ref:I,position:f,rotation:d},!o&&c[0]&&k.createElement(FA,{axis:0,direction:ep}),!o&&c[1]&&k.createElement(FA,{axis:1,direction:tp}),!o&&c[2]&&k.createElement(FA,{axis:2,direction:np}),!a&&c[0]&&c[1]&&k.createElement(HA,{axis:2,dir1:ep,dir2:tp}),!a&&c[0]&&c[2]&&k.createElement(HA,{axis:1,dir1:np,dir2:ep}),!a&&c[2]&&c[1]&&k.createElement(HA,{axis:0,dir1:tp,dir2:np}),!l&&c[0]&&c[1]&&k.createElement(VA,{axis:2,dir1:ep,dir2:tp}),!l&&c[0]&&c[2]&&k.createElement(VA,{axis:1,dir1:np,dir2:ep}),!l&&c[2]&&c[1]&&k.createElement(VA,{axis:0,dir1:tp,dir2:np}),!u&&c[0]&&k.createElement(WA,{axis:0,direction:ep}),!u&&c[1]&&k.createElement(WA,{axis:1,direction:tp}),!u&&c[2]&&k.createElement(WA,{axis:2,direction:np})),k.createElement("group",{ref:U},T))))}),q7e=De.memo(De.forwardRef(function({axesParam:e,enableDamping:t},r){return se.jsxs(se.Fragment,{children:[se.jsx(y7e,{ref:r,panSpeed:1.5,zoomSpeed:.5,enableDamping:t}),e&&se.jsx(E7e,{alignment:"bottom-right",margin:[70,100],onTarget:()=>{var i;return(i=r==null?void 0:r.current)==null?void 0:i.target},onUpdate:()=>{var i;(i=r.current)==null||i.update()},children:se.jsx(M7e,{font:"18px Inter var, HKGrotesk, sans-serif"})})]})}));Mn.DEFAULT_UP.set(0,0,1);function HJ({children:n,...e}){const t=Math.min(window.devicePixelRatio,2);let r=e.cameraZoom,i=e.outdatedMesh?"#ababab":"#f5f5f5";function s(){let f=a(r);return se.jsx(G7e,{scale:f})}function o(){return se.jsx(zJ,{makeDefault:!0,near:.1,pov:1e3,far:9e3,zoom:r,position:[3e3,3e3,5e3]})}function a(f){return 21/f}const l=O.topLevelMolecule?O.topLevelMolecule.unitsKey:"MM";let u,c;return l=="MM"?(u=10,c=100):l=="Inches"&&(u=1,c=10),se.jsx(k.Suspense,{fallback:null,children:se.jsxs(G9e,{id:"threeCanvas",style:{backgroundColor:i},dpr:t,frameloop:"always",shadows:!0,children:[se.jsx(o,{}),e.axesParam?se.jsx(s,{}):null,e.gridParam?se.jsx(A7e,{position:[0,0,0],cellSize:u,args:[1e4,1e4],cellColor:"#b6aebf",fadeFrom:0,sectionColor:"#BFA301",fadeDistance:5e3,rotation:[Math.PI/2,0,0],sectionSize:c}):null,se.jsx(q7e,{axesParam:e.axesParam,enableDamping:!1}),e.outdatedMesh?se.jsx("ambientLight",{intensity:.4}):se.jsx("ambientLight",{intensity:.9}),n]})})}function WJ(n,e,t){if(n.clearGroups(),delete n.userData.faceGroups,n.setIndex(e.triangles),n.setAttribute("position",new Ct(e.vertices,3)),e.faceGroups){let r=new Set;n.userData.faceGroups=e.faceGroups,e.faceGroups.forEach(({start:i,count:s,faceId:o})=>{n.addGroup(i,s,r.has(o)?1:0)})}else n.addGroup(0,e.triangles.length,0);e.normals&&e.normals.length?n.setAttribute("normal",new Ct(e.normals,3)):n.computeVertexNormals(),n.computeBoundingBox()}function jJ(n,e,t){if(n.clearGroups(),delete n.userData.edgeGroups,n.setAttribute("position",new Ct(e.lines,3)),!!e)if(e.edgeGroups){let r=new Set;n.userData.edgeGroups=e.edgeGroups,e.edgeGroups.forEach(({start:i,count:s,edgeId:o})=>{n.addGroup(i,s,r.has(o)?1:0)})}else n.addGroup(0,e.lines.length/3,0)}function GJ(n,e){n.clearGroups(),delete n.userData.edgeGroups,n.copy(new FO(e,2))}const qJ=De.memo(function({mesh:e,isSolid:t,setOutdatedMesh:r}){const{invalidate:i}=Ln(),[s,o]=k.useState([]);return k.useLayoutEffect(()=>{let a=[];e.map(l=>{const u=new rn,c=new rn;l.faces&&WJ(u,l.faces),l.edges?jJ(c,l.edges):l.faces&&GJ(c,u);const f=u,d=c,h=l.color;h=="#D9544D"?a.push({body:f,lines:d,color:h,solid:!1}):a.push({body:f,lines:d,color:h,solid:t})}),o(a),i()},[e,i]),k.useEffect(()=>()=>{r(!1),i()},[i]),se.jsx(se.Fragment,{children:s.map((a,l)=>se.jsxs("group",{children:[t?se.jsx(sN,{geometry:a.body,stroke:a.color,squeeze:!0,dash:!1,simplify:!0,fill:a.color,fillOpacity:.2,strokeOpacity:.5}):se.jsx("mesh",{geometry:a.body,children:a.color!="#D9544D"?se.jsx("meshMatcapMaterial",{color:a.color,polygonOffset:!0,polygonOffsetFactor:2,polygonOffsetUnits:1},"material"+a.color):se.jsx(sN,{geometry:a.body,stroke:a.color,squeeze:!0,dash:!1,simplify:!0,fill:a.color,fillOpacity:.2,strokeOpacity:.5})},"mesh"+a.color),se.jsx("lineSegments",{geometry:a.lines},"lines"+a.color),se.jsx("lineSegments",{geometry:a.lines,children:se.jsx("lineBasicMaterial",{color:"#3c5a6e",opacity:"1",linewidth:8})},"linesmesh"+a.color)]},"group"+a.color+l))})}),XJ=De.memo(function({mesh:e}){const{invalidate:t}=Ln(),[r,i]=k.useState([]);return k.useLayoutEffect(()=>{let s=[];e.map(o=>{const a=new rn,l=new rn;o.faces&&WJ(a,o.faces),o.edges?jJ(l,o.edges):o.faces&&GJ(l,a);const u=a,c=l,f=o.color;s.push({body:u,lines:c,color:f})}),i(s),t()},[e,t]),k.useEffect(()=>()=>{t()},[t]),se.jsx(se.Fragment,{children:r.map((s,o)=>se.jsx("group",{children:se.jsx(sN,{geometry:s.body,stroke:"#bebbbf",squeeze:!0,dash:!1,simplify:!0,fill:"#bebbbf",fillOpacity:.1,strokeOpacity:.2})},"groupwire"+s.color+o))})});function YJ({run:n,isItOwned:e}){const[t,r]=k.useState(n),i=()=>{r(!t)};if(O.currentRepo)return t?se.jsx(se.Fragment,{children:se.jsx(f0,{to:e?`/${O.currentRepo.owner}/${O.currentRepo.repoName}`:"/",onClick:i,children:se.jsx("label",{title:"Create/Run Mode",className:"switch_run",children:se.jsxs("button",{style:{width:"100px",backgroundColor:"#3F4243",borderRadius:"12px",display:"flex"},children:[se.jsx("svg",{width:"12",height:"8",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",className:"leva-c-cHvNmv",style:{transform:"rotate(90deg)",alignSelf:"center",fill:"#c4a3d5"},children:se.jsx("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"})}),se.jsx("p",{style:{fontSize:"12px",padding:"0 5px 0 5px",color:"#c4a3d5",fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace"},children:e?"Create Mode":"Browse Projects"})]})})},O.currentRepo.id)}):se.jsx(se.Fragment,{children:se.jsx(f0,{to:O.currentRepo?`/run/${O.currentRepo.owner}/${O.currentRepo.repoName}`:"/run",onClick:i,style:{position:"absolute"},children:se.jsx("label",{title:"Create/Run Mode",className:"switch",children:se.jsxs("button",{style:{width:"100px",backgroundColor:"#3F4243",borderRadius:"12px",display:"flex"},children:[se.jsx("p",{style:{fontSize:"12px",padding:"0 5px 0 5px",color:"#c4a3d5",fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace"},children:"Run Mode"}),se.jsx("svg",{width:"12",height:"8",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",className:"leva-c-cHvNmv",style:{transform:"rotate(-90deg)",alignSelf:"center",fill:"#c4a3d5"},children:se.jsx("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"})})]})})},O.currentRepo?O.currentRepo.id:null)})}const KJ=function({activeAtom:e,run:t,setGrid:r,setAxes:i,setWire:s,setSolid:o,compiledBom:a}){let l={},u={};const c=Fx(),f=Fx(),d=Fx(),h=Fx(),[m,v]=k.useState(!0),[y,p]=k.useState("");k.useEffect(()=>{const x=setTimeout(()=>{v(!1)},0);return()=>clearTimeout(x)},[]),e!==null&&(l=e.createLevaInputs(p),t&&(u=e.createLevaExport())),e.atomType=="Molecule"&&(a=e.createLevaBom());const S=k.useMemo(()=>({...a}),[a]),b=k.useMemo(()=>({...u}),[u]),g=k.useMemo(()=>({...l}),[l]);zx(()=>b,{store:h},[e]),zx(()=>S,{store:d},[e]),zx(()=>g,{store:c},[e,y]),zx("Grid",{grid:{value:!0,label:"Grid",onChange:x=>{r(x)}},axes:{value:!0,label:"Axes",onChange:x=>{i(x)}},wire:{value:!0,label:"Output Wire",onChange:x=>{s(x)}},wireframe:{value:!1,label:"Wireframe",onChange:x=>{o(x)}}},{store:f}),k.useEffect(()=>()=>{c.dispose()},[e]);const w={colors:{elevation1:"#3F4243",elevation2:"var(--bg-color)",elevation3:"#C4A3D5",highlight1:"#C4A3D5",highlight2:"#ededed",highlight3:"#ededed",accent1:"#C4A3D5",accent2:"#88748F",accent3:"#88748F",vivid1:"red"}};return se.jsxs(se.Fragment,{children:[" ",se.jsx("div",{className:t?"paramEditorDivRun":"paramEditorDiv",children:se.jsx(Bx,{store:c,neverHide:!0,collapsed:{collapsed:m,onChange:x=>{v(x)}},hideCopyButton:!0,fill:!0,titleBar:{title:e.name||O.currentRepo.repoName,drag:!1},theme:w})}),se.jsx("div",{className:t?"gridEditorDivRun":"gridEditorDiv",children:se.jsx(Bx,{store:f,fill:!0,hidden:!1,collapsed:!0,hideCopyButton:!0,titleBar:{title:"Render Settings",drag:!1},theme:w})}),e.atomType=="Molecule"?se.jsx("div",{className:t?"bomEditorDivRun":"bomEditorDiv",children:se.jsx(Bx,{store:d,fill:!0,hidden:!1,collapsed:!0,hideCopyButton:!0,titleBar:{title:"Bill of Materials",drag:!1},theme:w})}):null,t?se.jsx("div",{className:"exportEditorDivRun",children:se.jsx(Bx,{store:h,fill:!0,hidden:!1,collapsed:!0,hideCopyButton:!0,titleBar:{title:"Export Parts",drag:!1},theme:w})}):null]})};function ZJ({shareDialog:n,setShareDialog:e,dialogContent:t,activeAtom:r}){const i=s=>{O.cad.visExport(r.uniqueID,r.uniqueID,s).then(o=>{O.cad.downExport(r.uniqueID,s).then(a=>{pY.saveAs(a,O.currentMolecule.name+"."+s.toLowerCase())}).catch("Error downloading export file")}).catch("Error creating export geometry")};return se.jsx(se.Fragment,{children:se.jsxs("dialog",{open:n,style:{display:"flex"},className:"share-dialog",children:[t=="share"?se.jsxs("div",{style:{display:"flex",margin:"10px"},children:[se.jsx("p",{children:"Use this link to share this project:"}),se.jsxs("a",{style:{margin:"16px"},href:"/run/"+O.currentRepo.owner+"/"+O.currentRepo.repoName,target:"_blank",children:["/run/",O.currentRepo.owner,"/",O.currentRepo.repoName]})]}):t=="export"?se.jsxs("div",{style:{display:"flex",margin:"10px"},children:[se.jsx("p",{children:"Export as:"}),se.jsxs("button",{autoFocus:!0,onClick:()=>i("STL"),children:[" ","STL"]}),se.jsxs("button",{autoFocus:!0,onClick:()=>i("STEP"),children:[" ","STEP"]}),se.jsxs("button",{autoFocus:!0,onClick:()=>i("SVG"),children:[" ","SVG"]})]}):null,se.jsx("a",{className:"closeButton",onClick:()=>e(!1)})]})})}let X7e=se.jsx("svg",{fill:"#c4a3d5",height:"30px",width:"30px",version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 227.216 227.216",xmlSpace:"preserve",children:se.jsx("path",{d:`M175.897,141.476c-13.249,0-25.11,6.044-32.98,15.518l-51.194-29.066c1.592-4.48,2.467-9.297,2.467-14.317
c0-5.019-0.875-9.836-2.467-14.316l51.19-29.073c7.869,9.477,19.732,15.523,32.982,15.523c23.634,0,42.862-19.235,42.862-42.879
C218.759,19.229,199.531,0,175.897,0C152.26,0,133.03,19.229,133.03,42.865c0,5.02,0.874,9.838,2.467,14.319L84.304,86.258
c-7.869-9.472-19.729-15.514-32.975-15.514c-23.64,0-42.873,19.229-42.873,42.866c0,23.636,19.233,42.865,42.873,42.865
c13.246,0,25.105-6.042,32.974-15.513l51.194,29.067c-1.593,4.481-2.468,9.3-2.468,14.321c0,23.636,19.23,42.865,42.867,42.865
c23.634,0,42.862-19.23,42.862-42.865C218.759,160.71,199.531,141.476,175.897,141.476z M175.897,15
c15.363,0,27.862,12.5,27.862,27.865c0,15.373-12.499,27.879-27.862,27.879c-15.366,0-27.867-12.506-27.867-27.879
C148.03,27.5,160.531,15,175.897,15z M51.33,141.476c-15.369,0-27.873-12.501-27.873-27.865c0-15.366,12.504-27.866,27.873-27.866
c15.363,0,27.861,12.5,27.861,27.866C79.191,128.975,66.692,141.476,51.33,141.476z M175.897,212.216
c-15.366,0-27.867-12.501-27.867-27.865c0-15.37,12.501-27.875,27.867-27.875c15.363,0,27.862,12.505,27.862,27.875
C203.759,199.715,191.26,212.216,175.897,212.216z`})}),Y7e=se.jsx("svg",{width:"35px",height:"35px",viewBox:"0 0 23 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:se.jsx("path",{d:"M11.245 4.174C11.4765 3.50808 11.5922 3.17513 11.7634 3.08285C11.9115 3.00298 12.0898 3.00298 12.238 3.08285C12.4091 3.17513 12.5248 3.50808 12.7563 4.174L14.2866 8.57639C14.3525 8.76592 14.3854 8.86068 14.4448 8.93125C14.4972 8.99359 14.5641 9.04218 14.6396 9.07278C14.725 9.10743 14.8253 9.10947 15.0259 9.11356L19.6857 9.20852C20.3906 9.22288 20.743 9.23007 20.8837 9.36432C21.0054 9.48051 21.0605 9.65014 21.0303 9.81569C20.9955 10.007 20.7146 10.2199 20.1528 10.6459L16.4387 13.4616C16.2788 13.5829 16.1989 13.6435 16.1501 13.7217C16.107 13.7909 16.0815 13.8695 16.0757 13.9507C16.0692 14.0427 16.0982 14.1387 16.1563 14.3308L17.506 18.7919C17.7101 19.4667 17.8122 19.8041 17.728 19.9793C17.6551 20.131 17.5108 20.2358 17.344 20.2583C17.1513 20.2842 16.862 20.0829 16.2833 19.6802L12.4576 17.0181C12.2929 16.9035 12.2106 16.8462 12.1211 16.8239C12.042 16.8043 11.9593 16.8043 11.8803 16.8239C11.7908 16.8462 11.7084 16.9035 11.5437 17.0181L7.71805 19.6802C7.13937 20.0829 6.85003 20.2842 6.65733 20.2583C6.49056 20.2358 6.34626 20.131 6.27337 19.9793C6.18915 19.8041 6.29123 19.4667 6.49538 18.7919L7.84503 14.3308C7.90313 14.1387 7.93218 14.0427 7.92564 13.9507C7.91986 13.8695 7.89432 13.7909 7.85123 13.7217C7.80246 13.6435 7.72251 13.5829 7.56262 13.4616L3.84858 10.6459C3.28678 10.2199 3.00588 10.007 2.97101 9.81569C2.94082 9.65014 2.99594 9.48051 3.11767 9.36432C3.25831 9.23007 3.61074 9.22289 4.31559 9.20852L8.9754 9.11356C9.176 9.10947 9.27631 9.10743 9.36177 9.07278C9.43726 9.04218 9.50414 8.99359 9.55657 8.93125C9.61593 8.86068 9.64887 8.76592 9.71475 8.57639L11.245 4.174Z",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),K7e=se.jsx("svg",{width:"45px",height:"45px",viewBox:"0 0 20 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:se.jsx("path",{d:"M7 5C7 3.89543 7.89543 3 9 3C10.1046 3 11 3.89543 11 5C11 5.74028 10.5978 6.38663 10 6.73244V14.0396H11.7915C12.8961 14.0396 13.7915 13.1441 13.7915 12.0396V10.7838C13.1823 10.4411 12.7708 9.78837 12.7708 9.03955C12.7708 7.93498 13.6662 7.03955 14.7708 7.03955C15.8753 7.03955 16.7708 7.93498 16.7708 9.03955C16.7708 9.77123 16.3778 10.4111 15.7915 10.7598V12.0396C15.7915 14.2487 14.0006 16.0396 11.7915 16.0396H10V17.2676C10.5978 17.6134 11 18.2597 11 19C11 20.1046 10.1046 21 9 21C7.89543 21 7 20.1046 7 19C7 18.2597 7.4022 17.6134 8 17.2676V6.73244C7.4022 6.38663 7 5.74028 7 5Z",fill:"#c4a3d5"})}),Z7e=se.jsxs("svg",{width:"30px",height:"30px",viewBox:"0 0 23 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[se.jsx("path",{d:"M10.5 11L17 11",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"}),se.jsx("path",{d:"M7 11H7.5",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"}),se.jsx("path",{d:"M7 7.5H7.5",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"}),se.jsx("path",{d:"M7 14.5H7.5",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"}),se.jsx("path",{d:"M17 14.5H16M10.5 14.5H13.5",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"}),se.jsx("path",{d:"M17 7.5H14M10.5 7.5H11.5",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"}),se.jsx("path",{d:"M21 7V6.37006C21 5.17705 21 4.58055 20.842 4.09946C20.5425 3.18719 19.8468 2.47096 18.9606 2.16261C18.4933 2 17.9139 2 16.755 2H7.24502C6.08614 2 5.50671 2 5.03939 2.16261C4.15322 2.47096 3.45748 3.18719 3.15795 4.09946C3 4.58055 3 5.17705 3 6.37006V15M21 11V20.3742C21 21.2324 20.015 21.6878 19.3919 21.1176C19.0258 20.7826 18.4742 20.7826 18.1081 21.1176L17.625 21.5597C16.9834 22.1468 16.0166 22.1468 15.375 21.5597C14.7334 20.9726 13.7666 20.9726 13.125 21.5597C12.4834 22.1468 11.5166 22.1468 10.875 21.5597C10.2334 20.9726 9.26659 20.9726 8.625 21.5597C7.98341 22.1468 7.01659 22.1468 6.375 21.5597L5.8919 21.1176C5.52583 20.7826 4.97417 20.7826 4.6081 21.1176C3.985 21.6878 3 21.2324 3 20.3742V19",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"})]}),J7e=se.jsx("svg",{width:"30px",height:"30px",fill:"none",viewBox:"0 0 23 23",xmlns:"http://www.w3.org/2000/svg",children:se.jsx("path",{fill:"#c4a3d5",d:"M8.71,7.71,11,5.41V15a1,1,0,0,0,2,0V5.41l2.29,2.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42l-4-4a1,1,0,0,0-.33-.21,1,1,0,0,0-.76,0,1,1,0,0,0-.33.21l-4,4A1,1,0,1,0,8.71,7.71ZM21,14a1,1,0,0,0-1,1v4a1,1,0,0,1-1,1H5a1,1,0,0,1-1-1V15a1,1,0,0,0-2,0v4a3,3,0,0,0,3,3H19a3,3,0,0,0,3-3V15A1,1,0,0,0,21,14Z"})});function Q7e({authorizedUserOcto:n,tryLogin:e,activeAtom:t}){let[r,i]=k.useState(!1),s=!1,[o,a]=k.useState("");var l=Gd();k.useEffect(()=>{if(n){var m=O.currentRepo.owner,v=O.currentRepo.repoName;(async()=>{const p="https://hg5gsgv9te.execute-api.us-east-2.amazonaws.com/abundance-stage/USER-TABLE?user="+O.currentUser;return await(await fetch(p)).json()})().then(p=>{p[0].likedProjects.some(b=>b==m+"/"+v)?(s=!0,document.getElementById("Star-button").style.backgroundColor="gray"):(console.log("not starred"),document.getElementById("Star-button").style.backgroundColor="white",s=!1)}),O.currentRepo.owner===O.currentUser&&(document.getElementById("Fork-button").style.display="none")}});const u=function(){var m=O.currentRepo.owner,v=O.currentRepo.repoName;s=!0,document.getElementById("Star-button").disabled=!0,document.getElementById("Star-button").style.backgroundColor="gray",fetch("https://hg5gsgv9te.execute-api.us-east-2.amazonaws.com/abundance-stage/update-item",{method:"POST",body:JSON.stringify({owner:m,repoName:v,attributeUpdates:{ranking:1}}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(p=>{fetch("https://hg5gsgv9te.execute-api.us-east-2.amazonaws.com/abundance-stage/USER-TABLE",{method:"POST",body:JSON.stringify({user:O.currentUser,attributeUpdates:{likedProjects:[`${m}/${v}`]},updateType:"SET"}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(b=>{console.log(b),console.log("added to liked projects"),document.getElementById("Star-button").disabled=!1})})},c=function(){var m=O.currentRepo.owner,v=O.currentRepo.repoName;s=!1,document.getElementById("Star-button").disabled=!0,document.getElementById("Star-button").style.backgroundColor="white",fetch("https://hg5gsgv9te.execute-api.us-east-2.amazonaws.com/abundance-stage/USER-TABLE",{method:"POST",body:JSON.stringify({user:O.currentUser,attributeUpdates:{likedProjects:[`${m}/${v}`]},updateType:"REMOVE"}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(p=>{console.log(p.json()),console.log("unliked"),document.getElementById("Star-button").disabled=!1})},f=async function(m){var v=O.currentRepo.owner,y=O.currentRepo.repoName;m.request("GET /repos/{owner}/{repo}",{owner:v,repo:y}).then(p=>{m.rest.repos.createFork({owner:v,repo:y}).then(()=>{const S="https://hg5gsgv9te.execute-api.us-east-2.amazonaws.com/abundance-stage//post-new-project";let b=(p.data.name+" "+O.currentUser).toLowerCase(),g={owner:O.currentUser,ranking:p.data.stargazers_count,description:p.data.description,searchField:b,repoName:p.data.name,forks:0,topMoleculeID:O.topLevelMolecule.uniqueID,topics:[],readme:"https://raw.githubusercontent.com/"+O.currentUser+"/"+p.data.name+"/master/README.md?sanitize=true",contentURL:"https://raw.githubusercontent.com/"+O.currentUser+"/"+p.data.name+"/master/project.abundance?sanitize=true",githubMoleculesUsed:[],parentRepo:v+"/"+y,svgURL:"https://raw.githubusercontent.com/"+O.currentUser+"/"+p.data.name+"/master/project.svg?sanitize=true",dateCreated:p.data.created_at,html_url:p.data.html_url};fetch(S,{method:"POST",body:JSON.stringify(g),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(w=>{console.log(w.json()),O.currentRepo=g,l(`/${O.currentRepo.owner}/${O.currentRepo.repoName}`)})})})},d=function(){e().then(m=>{u()})},h=function(){e().then(m=>{f(m)})};return se.jsxs(se.Fragment,{children:[r?se.jsx(ZJ,{shareDialog:r,setShareDialog:i,dialogContent:o,activeAtom:t}):null,se.jsxs("div",{className:"run-navigation",children:[se.jsx("button",{onClick:()=>{a("share"),i(!0)},className:" run-navigation-button",id:"Share-button",children:X7e}),se.jsx("button",{className:" run-navigation-button",id:"Fork-button",onClick:()=>{n?f(n):h()},children:K7e}),se.jsx("button",{className:" run-navigation-button",id:"Star-button",onClick:()=>{n&&!s?u():n&&s?c():d()},children:Y7e}),se.jsx("button",{onClick:()=>{a("export"),i(!0)},className:" run-navigation-button",id:"Export-button",children:J7e}),se.jsx("button",{className:" run-navigation-button",id:"Bill-button",onClick:()=>{console.log("open compiled bill of materials ")},children:Z7e})]})]})}function e$e(){const[n,e]=k.useState({width:void 0,height:void 0});return k.useEffect(()=>{function t(){e({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",t),t(),()=>window.removeEventListener("resize",t)},[]),n}function t$e({setActiveAtom:n,activeAtom:e,authorizedUserOcto:t,tryLogin:r,loadProject:i,mesh:s,wireMesh:o,outdatedMesh:a,setOutdatedMesh:l}){const u=k.useRef(500),[c,f]=k.useState(!0),[d,h]=k.useState(!0),[m,v]=k.useState(!1),[y,p]=k.useState(!0),[S,b]=k.useState(!0),g=e$e();Gd();const{owner:w,repoName:x}=kW(),[M,A]=k.useState(1);return k.useEffect(()=>{A(s[0]?s[0].cameraZoom:1)},[s]),k.useEffect(()=>{O.canvas=u,O.c=u.current.getContext("2d");var N=new jc;N.request("GET /repos/{owner}/{repo}",{owner:w,repo:x}).then(C=>{O.currentRepo=C.data,O.currentRepo.repoName=O.currentRepo.name,O.currentRepo.owner=O.currentRepo.owner.login,(!O.loadedRepo||O.currentRepo.repoName!==O.loadedRepo.repoName)&&(O.topLevelMolecule=new Py({x:0,y:0,topLevel:!0,atomType:"Molecule"}),O.currentMolecule=O.topLevelMolecule,i(O.currentRepo))}),O.currentRepo&&O.currentRepo.owner==O.currentUser&&v(!0)},[]),se.jsxs(se.Fragment,{children:[se.jsx("canvas",{style:{display:"none"},ref:u,id:"flow-canvas",tabIndex:0}),se.jsx(YJ,{run:!0,isItOwned:m}),e?se.jsx(KJ,{run:!0,activeAtom:e,setActiveAtom:n,setGrid:f,setAxes:h,setWire:p,setSolid:b}):null,se.jsx(Q7e,{authorizedUserOcto:t,tryLogin:r,activeAtom:e}),O.currentRepo?se.jsxs("div",{className:"info_run_div",children:[se.jsx("p",{children:"Project Name: "+O.currentRepo.repoName}),se.jsx("p",{children:"Repo Owner: "+O.currentRepo.owner})]}):null,se.jsx("div",{className:"runContainer",children:se.jsx("div",{className:"jscad-container",style:{width:g.width,height:g.height},children:se.jsx("section",{id:"threeDView",style:{height:g.height},children:o?se.jsxs(HJ,{cameraZoom:M,gridParam:c,axesParam:d,outdatedMesh:a,children:[y?se.jsx(XJ,{mesh:o}):null,se.jsx(qJ,{mesh:s,isSolid:S,setOutdatedMesh:l})]}):se.jsx("div",{style:{display:"flex",alignItems:"center",fontSize:"1em"},children:"Loading..."})})})})]})}const n$e=({setSettingsPopUp:n,setShortCuts:e})=>{let t=[];O.currentRepo.topics.length>0&&O.currentRepo.topics.forEach(c=>{t.push({value:c,label:c})});const r=k.useRef(t),i=k.useRef(O.currentRepo.description),s=k.useRef(O.topLevelMolecule.unitsKey),o=k.useRef(O.displayShortcuts),a=O.currentRepo.dateCreated,l=new Date(a),u=async c=>{c.preventDefault(),n(!1);const f=r.current.getValue(),d=[];f.forEach(h=>{d.push(h.value)}),O.topLevelMolecule.unitsKey=s.current.value,O.currentRepo.description=i.current.value,O.currentRepo.topics=d,O.displayShortcuts=o.current.checked,e(o.current.checked)};return se.jsx("div",{className:"settingsDiv",children:se.jsxs("div",{className:"form animate fadeInUp one",children:[se.jsx("button",{style:{width:"3%",display:"block"},onClick:()=>{n(!1)},className:"closeButton",children:" "}),se.jsx("h2",{style:{margin:"0 0 15px 0"},children:"Project Preferences"}),se.jsxs("div",{id:"project-info",children:[se.jsxs("div",{id:"project-info-name",children:[se.jsx("label",{children:"Project Name"}),se.jsx("p",{title:"To change the Project Name go to your Github repository",children:O.currentRepo.repoName})]}),se.jsxs("div",{id:"project-info-date",children:[se.jsx("label",{children:"Date Created"}),se.jsx("p",{children:l.toDateString()})]})]}),se.jsxs("form",{className:"settings-form project-info",onSubmit:c=>{u(c)},children:[se.jsx("label",{htmlFor:"project-description",children:"Project Description"}),se.jsx("input",{defaultValue:O.currentRepo.description,ref:i}),se.jsx("label",{htmlFor:"project-topics",children:"Project Tags"}),se.jsx(rK,{defaultValue:t,isMulti:!0,name:"Project Topics",options:aO,className:"basic-multi-select",classNamePrefix:"select",ref:r}),se.jsx("label",{htmlFor:"measure-units",children:"Units"}),se.jsxs("select",{id:"measure-units",defaultValue:O.topLevelMolecule.unitsKey,ref:s,children:[se.jsx("option",{value:"Inches",children:"Inches"},"inchesop"),se.jsx("option",{value:"MM",children:"MM"},"millop")]}),se.jsxs("div",{children:[se.jsx("label",{htmlFor:"shortcut-button",children:"Show/Hide Shortcuts"}),se.jsx("input",{type:"checkbox",className:"checkbox shortcut-button",name:"shortcut-button",id:"shortcut-button",defaultChecked:O.displayShortcuts,ref:o})]}),se.jsx("label",{htmlFor:"theme-toggle",children:"Display Theme (placeholder)"}),se.jsx("input",{type:"checkbox",className:"checkbox ",name:"theme-toggle",id:"theme-toggle-light"}),se.jsx("button",{className:"submit-button",type:"submit",children:"Save Changes"})]})]})})};function r$e({authorizedUserOcto:n,savePopUp:e,setSavePopUp:t,saveProject:r,setExportPopUp:i,saveState:s,setSaveState:o,currentMoleculeTop:a,activeAtom:l,setActiveAtom:u,setShortCuts:c}){let[f,d]=k.useState(!1),[h,m]=k.useState(""),[v,y]=k.useState(!1);const p=Gd(),S=[{id:"Open",buttonFunc:()=>{p("/")}},{id:"GitHub",buttonFunc:()=>{window.open(O.currentRepo.html_url)}},{id:"Read Me",buttonFunc:()=>{var x=O.currentRepo.html_url+"/blob/master/README.md";window.open(x)}},{id:"Bill of Materials",buttonFunc:()=>{var x=O.currentRepo.html_url+"/blob/master/BillOfMaterials.md";window.open(x)}},{id:"Share",buttonFunc:()=>{m("share"),d(!0)}},{id:"Save Project",buttonFunc:()=>{t(!0),r(o)}},{id:"Settings",buttonFunc:()=>{y(!0)}},{id:"Pull Request",buttonFunc:()=>{window.open("https://github.com/"+O.currentRepo.full_name+"/compare/"+O.currentRepo.default_branch+"..."+O.currentRepo.owner.login+":"+O.currentRepo.default_branch)}},{id:"ExportGit",buttonFunc:()=>{i(!0)}},{id:"Delete Project",buttonFunc:()=>{var x=O.currentRepo.html_url+"/settings";window.open(x)}}],b=()=>se.jsx(se.Fragment,{children:se.jsx("button",{className:"nav-bar go-up-button menu-nav-button",onClick:()=>{O.currentMolecule.goToParentMolecule(),u(O.currentMolecule)},children:se.jsx("img",{className:"nav-img thumnail-logo",src:"/imgs/Go Up.svg",title:""},"")})}),g=({saveState:x,savePopUp:M,setSavePopUp:A})=>{if(x===100){var N=2e3;setTimeout(function(){A(!1)},N)}return se.jsx(se.Fragment,{children:se.jsx("div",{className:"save-bar",children:se.jsx("div",{className:"progress",children:se.jsx("div",{className:"progress-done","data-done":"70",style:{width:x+"%",opacity:"1"},children:x!==100?x+"%":"Project Saved!"})})})})},w=({currentMoleculeTop:x})=>{const[M,A]=k.useState(!1),N=k.useRef();return k.useEffect(()=>{const C=T=>{M&&N.current&&!N.current.contains(T.target)&&A(!1)};return document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[M]),se.jsx(se.Fragment,{children:se.jsxs("nav",{ref:N,className:"navbar",children:[se.jsx("button",{className:"toggle menu-nav-button",onClick:()=>A(C=>!C),children:M?se.jsx("img",{className:`thumnail-logo nav-img ${x?"":" rotati-right"}`,src:"/imgs/three-menu.svg"}):se.jsx("img",{className:`thumnail-logo nav-img  ${x?"rotati":" rotati-plus "}`,src:"/imgs/three-menu.svg"})}),se.jsx("ul",{className:`menu-nav${M?" show-menu":""}`,children:S.map((C,T)=>se.jsx("button",{className:"menu-nav-button",children:se.jsx("img",{className:" thumnail-logo",alt:C,src:"/imgs/"+C.id+".svg",title:C.id+"-button",onClick:C.buttonFunc},C.id)},C.id))})]})})};return se.jsxs(se.Fragment,{children:[e?se.jsx(g,{saveState:s,savePopUp:e,setSavePopUp:t}):null,v?se.jsx(n$e,{setSettingsPopUp:y,setShortCuts:c}):null,f?se.jsx(ZJ,{shareDialog:f,setShareDialog:d,dialogContent:h,activeAtom:l}):null,a?se.jsx(b,{}):null,se.jsx(w,{currentMoleculeTop:a})]})}const i$e=k.memo(r$e);function s$e(n){return this.startDeg+this.rotateUnit*n}function o$e(n){return-(this.rotateDeg(n)+this.unskewDeg)}function a$e(n){var e=-(n.totalAngle-180)/2,t={top:e,left:e-90,right:e+90,bottom:e+180};return n.start!==void 0?n.start:t[n.position]}const l$e=3;function u$e(n,e){var t=n*n*2;return Math.sqrt(t)*e+l$e}function c$e(n){var e=n*2,t=-e/2;return e+="px",t+="px",{width:e,height:e,marginLeft:t,marginTop:t}}function f$e(n){var e=n.diameter,t=-n.diameter/2;return e+="px",t+="px",{width:e,height:e,marginLeft:t,marginTop:t}}const d$e=10;function h$e(n){var e=n.diameter,t=-n.diameter/2;return e+="px",t+="px",{width:e,height:e,marginRight:t,marginBottom:t}}function p$e(n){var e=n.diameter/2+"px";return{width:e,height:e}}const m$e=.41;function g$e(n){return n*m$e-d$e+"px"}function oN(n){this._config=n;var e=this.config=n,t=e.menus.length,r=e.totalAngle===360?t:t-1;this.radius=n.diameter/2,this.coverRadius=u$e(this.radius,n.percent),this.clickZoneRadius=this.radius-this.coverRadius,this.listSize=p$e(n),this.clickZoneSize=h$e(n),this.menuSize=f$e(n),this.coverSize=c$e(this.coverRadius),this.startDeg=a$e(n),this.centralDeg=(e.totalAngle-e.spaceDeg*r)/t,this.rotateUnit=this.centralDeg+e.spaceDeg,this.skewDeg=90-this.centralDeg,this.unskewDeg=-(90-this.centralDeg/2),this.textTop=g$e(this.clickZoneRadius)}oN.prototype={constructor:oN,rotateDeg:s$e,horizontalDeg:o$e};function v$e(n){this._config.menus.forEach(function(e,t){this._createList(n,e,t)},this)}function y$e(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function x$e(n){this.style.removeProperty(n)}function b$e(n,e,t){this.style.setProperty(n,e,t)}function w$e(n,e,t){var r=e.apply(this,arguments);r==null?this.style.removeProperty(n):this.style.setProperty(n,r,t)}function Vn(n,e,t,r){var i;return arguments.length>1?(t==null?x$e:typeof t=="function"?w$e:b$e).call(n,e,t,""):y$e(i=n).getComputedStyle(i,null).getPropertyValue(e)}function S$e(n,e,t){var r=document.createElement("li");Vn(r,"width",this._calc.listSize.width),Vn(r,"height",this._calc.listSize.height),Vn(r,"transform","rotate("+this._calc.rotateDeg(t)+"deg) skew("+this._calc.skewDeg+"deg)"),n.appendChild(r),this._createAnchor(r,e,t)}function JJ(n){return n.trim().split(/^|\s+/)}function ok(n){return n.classList||new QJ(n)}function QJ(n){this._node=n,this._names=JJ(n.getAttribute("class")||"")}QJ.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function eQ(n,e){for(var t=ok(n),r=-1,i=e.length;++r<i;)t.add(e[r])}function tQ(n,e){for(var t=ok(n),r=-1,i=e.length;++r<i;)t.remove(e[r])}function _$e(n){eQ(this,n)}function E$e(n){tQ(this,n)}function M$e(n,e){(e.apply(this,arguments)?eQ:tQ)(this,n)}function ku(n,e,t){var r=JJ(e+"");if(arguments.length<2){for(var i=ok(this),s=-1,o=r.length;++s<o;)if(!i.contains(r[s]))return!1;return!0}(typeof t=="function"?M$e:t?_$e:E$e).call(n,r,t)}var C$e={_current:0,getNew:function(){return this._current++,this._current}};function Zf(n,e,t,r){var i=n,s="sheetStyles",o=document.head||document.getElementsByTagName("head")[0],a=document.getElementById(s)||document.createElement("style");a.id=s;var l="s-S"+C$e.getNew();return i.className+=" "+l,a.innerHTML+=" ."+l+(r?":"+r:"")+"{"+e+":"+t+"}",o.appendChild(a),this}function uc(n,e,t,r){n.addEventListener(e,function(i){t.call(this,i,r)})}function A$e(){var n=this._container;ku(n,"circular-menu",!0),Vn(n,"width",this._calc.menuSize.width),Vn(n,"height",this._calc.menuSize.height),Vn(n,"margin-top",this._calc.menuSize.marginTop),Vn(n,"margin-left",this._calc.menuSize.marginLeft);var e=this;uc(n,"click",function(r){r.toElement===n&&e._cMenu.hide()}),setTimeout(function(){Vn(n,"display","block")},100),Zf(n,"width",this._calc.coverSize.width,"after"),Zf(n,"height",this._calc.coverSize.height,"after"),Zf(n,"margin-left",this._calc.coverSize.marginLeft,"after"),Zf(n,"margin-top",this._calc.coverSize.marginTop,"after"),Zf(n,"border","3px solid "+this._config.pageBackground,"after");var t=n.appendChild(document.createElement("ul"));this._createLists(t)}function T$e(n){return n instanceof Array&&n.length!==0}function b7(n){return n instanceof Function?n():!!n}function D$e(n,e){e&&(e instanceof Object?(n.href=e.url,n.target=e.blank?"_blank":""):n.href=e)}var w7=null;function N$e(n,e,t){var r=this,i=null,s=document.createElement("a");D$e(s,e.href),s.setDisabled=function(){ku(s,"disabled",b7(e.disabled))},this._anchors.push(s),Vn(s,"width",this._calc.clickZoneSize.width),Vn(s,"height",this._calc.clickZoneSize.height),Vn(s,"right",this._calc.clickZoneSize.marginRight),Vn(s,"bottom",this._calc.clickZoneSize.marginBottom),Vn(s,"transform","skew("+-this._calc.skewDeg+"deg) rotate("+this._calc.unskewDeg+"deg) scale(1)"),ku(s,"disabled",b7(e.disabled));var o=this._config.percent*100+"%";Zf(s,"background","radial-gradient(transparent "+o+", "+this._config.background+" "+o+")"),Zf(s,"background","radial-gradient(transparent "+o+", "+this._config.backgroundHover+" "+o+")","hover");function a(u,c){c.click&&c.click.call(this,u,c),r._config.hideAfterClick&&(r._cMenu.hide(),r._cMenu._pMenu&&r._cMenu._pMenu.hide(),l&&l.hide())}if(uc(s,"mouseenter",function(){var u=document.createElement("div");u.textContent=e.icon,u.classList.add("tooltip"),u.id=e.icon+"text";const c=u.textContent.length*3;document.querySelector("body").appendChild(u),Vn(u,"top",r._container.offsetTop+r._calc.radius-10+"px"),Vn(u,"left",r._container.offsetLeft+r._calc.radius-c+"px")}),uc(s,"click",a,e),uc(s,"mouseleave",function(){document.getElementById(e.icon+"text").remove()}),n.appendChild(s),this._createHorizontal(s,e,t),T$e(e.menus)){var l=this._createSubMenu(r,e.menus,t);let u=!1;uc(s,"mouseenter",function(){u=!0,w7=setTimeout(function(){u&&l.styles({top:r._container.offsetTop+r._calc.radius+"px",left:r._container.offsetLeft+r._calc.radius+"px"}).show()},100)}),uc(s,"mouseleave",function(c){l._container.contains(c.toElement)||(u=!1,i=setTimeout(function(){l.hide()},100))}),uc(l._container,"mouseenter",function(){clearTimeout(w7),clearTimeout(i);var c=document.createElement("div");c.textContent=e.icon,c.classList.add("tooltip"),c.id=e.icon+"text2";const f=c.textContent.length*3;document.querySelector("body").appendChild(c),Vn(c,"top","50px"),Vn(c,"left",r._container.offsetLeft+r._calc.radius-f+100+"px"),Vn(c,"color","#D7D5D560")}),uc(l._container,"mouseleave",function(c){u=!1,document.getElementById(e.icon+"text2").remove(),(!s.contains(c.toElement)||c.toElement.children[0]===s)&&l.hide()})}}const P$e=.65,R$e=.2,S7=13;function aN(n){return n===void 0?!1:typeof n=="string"?n!=="":n.length&&n[0]!==""}function O$e(n){return typeof n=="string"?n:n[0]}function k$e(n){return typeof n=="string"?null:n[1]}function I$e(n,e,t){if(aN(e.icon)){var r=document.createElement("span"),i=O$e(e.icon),s=k$e(e.icon);ku(r,i+" cm-icon",!0),Vn(r,"color",s);var o=this._calc.clickZoneRadius*P$e-S7+"px",a=this._calc.clickZoneRadius*R$e-S7+"px";Vn(r,"width",o),Vn(r,"height",o),Vn(r,"font-size",o),Vn(r,"margin-top",a),n.appendChild(r)}}const L$e="3px",F$e="-3px";function B$e(n,e,t){var r=document.createElement("span");r.textContent=e.title,ku(r,"text",!0),Vn(r,"margin-top",aN(e.icon)?L$e:this._calc.textTop),Vn(r,"top",aN(e.icon)?F$e:0),n.appendChild(r)}function z$e(n,e,t){var r=document.createElement("div");ku(r,"horizontal",!0),this._config.horizontal&&Vn(r,"transform","rotate("+this._calc.horizontalDeg(t)+"deg)"),n.appendChild(r),this._createIcon(r,e,t),this._createText(r,e,t)}function nQ(){var n={},e=!1,t=0,r=arguments.length;Object.prototype.toString.call(arguments[0])==="[object Boolean]"&&(e=arguments[0],t++);for(var i=function(o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e&&Object.prototype.toString.call(o[a])==="[object Object]"?n[a]=extend(!0,n[a],o[a]):n[a]=o[a])};t<r;t++){var s=arguments[t];i(s)}return n}const U$e=5/3,$$e=.45,V$e=.618;function H$e(n,e,t){var r=document.createElement("div");ku(r,"circular-sub-menu",!0),this._container.parentNode.insertBefore(r,this._container);var i=this._calc.centralDeg*V$e*e.length,s=this._calc.rotateDeg(t)-i/2+this._calc.centralDeg/2,o=nQ(this._config,{totalAngle:i,percent:$$e,diameter:this._config.diameter*U$e,start:s,animation:"into",menus:e});return new Z0(r,n._cMenu).config(o)}function lN(n,e){this._cMenu=n,this._container=n._container,this._config=e,this._calc=new oN(e),this._anchors=[]}lN.prototype={constructor:lN,createMenu:A$e,_createLists:v$e,_createList:S$e,_createAnchor:N$e,_createText:B$e,_createHorizontal:z$e,_createIcon:I$e,_createSubMenu:H$e};const W$e={totalAngle:360,spaceDeg:0,background:"#323232",backgroundHover:"#515151",pageBackground:"transparent",percent:.32,diameter:300,position:"top",horizontal:!0,animation:"into",hideAfterClick:!0};function j$e(n){return n=nQ(W$e,n),this._creator=new lN(this,n),this._creator.createMenu(),this}function G$e(n){!(n instanceof Array)||n.length!==2||(Vn(this._container,"left",n[0]+"px"),Vn(this._container,"top",n[1]+"px"))}function q$e(){this._creator._anchors.forEach(function(n){n.setDisabled()})}function X$e(n){return q$e.call(this),G$e.call(this,n),ku(this._container,"opened-nav",!0),this}function Y$e(){return ku(this._container,"opened-nav",!1),this}function K$e(n){if(!n instanceof Object)return this;for(var e in n)n.hasOwnProperty(e)&&Vn(this._container,e,n[e]);return this}function Z0(n,e){this._container=n,e&&(this._pMenu=e)}Z0.prototype={constructor:Z0,config:j$e,show:X$e,hide:Y$e,styles:K$e};function Z$e(n){return typeof n=="string"?new Z0(document.querySelector(n)):new Z0(n)}var qA=null,Jf;const J$e=(n,e)=>{qA=n;const t=i=>{var s=[];for(var o in O.availableTypes){var a=O.availableTypes[o];if(a.atomCategory===i){var l=new Object;l.title=`${a.atomType}`,l.icon=`${a.atomType}`,l.name=a.atomType,l.click=function(c,f){if(f.icon==="GitHubMolecule"){const d=parseInt(Jf._container.style.left,10),h=parseInt(Jf._container.style.top,10);O.lastClick=[d,h],e(!0)}else e(!1),c.target.id=f.name,r(c)},s.push(l)}}return s};Jf=Z$e(qA.current).config({hideAfterClick:!0,percent:.15,menus:[{title:"Actions",icon:"Actions",menus:t("Actions")},{title:"Inputs",icon:"Inputs",menus:t("Inputs")},{title:"Tags",icon:"Tags",menus:t("Tags")},{title:"Import/Export",icon:"Import-Export",menus:t("ImportExport")},{title:"Shapes",icon:"Shapes",menus:t("Shapes")},{title:"Interactions",icon:"Interaction",menus:t("Interactions")}]}),document.getElementById("flow-canvas").addEventListener("contextmenu",i=>{i.preventDefault()}),qA.current.addEventListener("contextmenu",i=>{i.preventDefault()});function r(i){let s=i.target.id;const o=parseInt(Jf._container.style.left,10),a=parseInt(Jf._container.style.top,10);O.currentMolecule.placeAtom({x:O.pixelsToWidth(o),y:O.pixelsToHeight(a),parent:O.currentMolecule,atomType:s,uniqueID:O.generateUniqueID()},!0)}};function Q$e({searchingGitHub:n,setSearchingGitHub:e}){let t="";var[r,i]=k.useState([]),[s,o]=k.useState(!1);const a=k.useRef(null);function l(b,g){O.currentMolecule.loadGithubMoleculeByName(g),e(!1),i([])}const u=function(){(async()=>{let g;t!=""?g="&query="+t:g="&query";const x="https://hg5gsgv9te.execute-api.us-east-2.amazonaws.com/abundance-stage/scan-search-abundance?"+("attribute=searchField"+g+"&user&lastKey");return(await fetch(x)).json()})().then(g=>{let w=[];g.repos.forEach(x=>{w.push(x)}),i(w),o(!1)})},c=function(b){b.key==="Enter"&&(o(!0),u())},f=function(b){t=b.target.value},[d,h]=k.useState(!1),[m,v]=k.useState({}),y=(b,g)=>{v(b),h(!0)},p=()=>{v({}),h(!1)},S=function(){return r.map((b,g)=>se.jsx("li",{onClick:w=>l(w,b),onMouseEnter:()=>y(b),onMouseLeave:()=>p(),children:b.repoName},b.id))};return se.jsx(se.Fragment,{children:n?se.jsxs("div",{className:"search-container",children:[se.jsxs("div",{id:"git_search",style:{top:O.lastClick?O.lastClick[1]+"px":"25%",left:O.lastClick?O.lastClick[0]+"px":"50%"},children:[se.jsx("input",{type:"text",id:"menuInput",onKeyDown:c,onChange:f,placeholder:"Search for atom..",className:"menu_search_canvas"}),se.jsx("label",{htmlFor:"id_select",children:" Topic "}),se.jsxs("select",{ref:a,id:"searchType",className:"menu_search_canvas",children:[" ",se.jsx("option",{value:""},"empty-topic"),aO.map(b=>se.jsx("option",{value:b.value,children:b.label},b.label))]}),se.jsx(S,{})]}),d?se.jsxs("div",{className:"GitProjectInfoPanel",style:{top:O.lastClick[1]-50+"px",left:O.lastClick[0]-350+"px"},children:[se.jsxs("div",{className:"GitInfoLeft",children:[se.jsx("img",{src:"/imgs/defaultThumbnail.svg"}),se.jsxs("div",{style:{display:"flex"},children:[se.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",style:{transform:"scale(.7)"},width:"16",height:"16",children:se.jsx("path",{d:"M8 .2l4.9 15.2L0 6h16L3.1 15.4z"})}),se.jsx("p",{children:m.stargazers_count})]})]}),se.jsxs("div",{className:"GitInfo",children:[se.jsxs("span",{children:["Project Name: ",m.name]}),se.jsxs("span",{children:["Owner: ",m.owner.login]}),se.jsxs("span",{children:["Description: ",m.description||null]}),se.jsx("span",{children:"PLACEHOLDER FOR README"}),se.jsx("span",{children:"Tags: PLACEHOLDER FOR tags or categories"})]})]}):null]}):null})}function rQ(){const n=document.getElementById("flow-canvas");n.width=window.innerWidth,n.height=window.innerHeight*.45}window.addEventListener("resize",()=>{rQ()},!1);const eVe=k.memo(function({loadProject:e,setActiveAtom:t,shortCuts:r}){const[i,s]=k.useState(!1),o=k.useRef(null),a=k.useRef(null),l=Gd();k.useEffect(()=>{O.canvas=o,O.c=o.current.getContext("2d"),(!O.loadedRepo||O.currentRepo.repoName!==O.loadedRepo.repoName)&&(O.writeToDisplay(O.currentRepo.topMoleculeID,!0),O.topLevelMolecule=new Py({x:0,y:0,topLevel:!0,atomType:"Molecule"}),O.currentMolecule=O.topLevelMolecule,e(O.currentRepo).catch(p=>{l("/")})),O.currentMolecule.nodesOnTheScreen.forEach(p=>{p.update()})},[]);const u=()=>{O.c.clearRect(0,0,O.canvas.current.width,O.canvas.current.height),O.currentMolecule.nodesOnTheScreen.forEach(p=>{p.update()})},c=p=>{O.currentMolecule.nodesOnTheScreen.forEach(S=>{S.mouseMove(p.clientX,p.clientY)})},f=p=>{if(p.key=="Backspace"||p.key=="Delete"){const S=JSON.stringify(O.topLevelMolecule.serialize(),null,4);O.recentMoleculeRepresentation.push(S),O.recentMoleculeRepresentation.length>5&&O.recentMoleculeRepresentation.shift(),O.atomsSelected=[],O.currentMolecule.copy(),O.atomsSelected.forEach(b=>{O.currentMolecule.nodesOnTheScreen.forEach(g=>{g.uniqueID==b.uniqueID&&g.deleteNode()})})}(p.key=="Control"||p.key=="Meta")&&(O.ctrlDown=!0),O.ctrlDown&&r.hasOwnProperty([p.key])&&(p.preventDefault(),p.key=="z"&&O.currentMolecule.undo(),p.key=="c"&&(O.atomsSelected=[],O.currentMolecule.copy()),p.key=="v"&&O.atomsSelected.forEach(S=>{let b=O.generateUniqueID();S.uniqueID=b,(S.atomType=="Molecule"||S.atomType=="GitHubMolecule")&&(S=O.currentMolecule.remapIDs(S)),O.currentMolecule.placeAtom(S,!0)}),p.key=="g"?s(!0):O.currentMolecule.placeAtom({parentMolecule:O.currentMolecule,x:.5,y:.5,parent:O.currentMolecule,atomType:`${r[p.key]}`,uniqueID:O.generateUniqueID()},!0)),O.currentMolecule.nodesOnTheScreen.forEach(S=>{S.keyPress(p.key)})},d=p=>{(p.key=="Control"||p.key=="Meta")&&(O.ctrlDown=!1)},h=p=>{var S;if("which"in p?S=p.which==3:"button"in p&&(S=p.button==2),S){var b=!1;Jf.show([p.clientX,p.clientY],b);return}else{Jf.hide(),s(!1);var g=!1;O.currentMolecule.nodesOnTheScreen.forEach(w=>{let x;x=w.clickDown(p.clientX,p.clientY,g),x!==void 0&&(t(x),O.currentMolecule.selected=!1,g=!0)}),g||(console.log("click not HandledByMolecule trying to add box?"),O.currentMolecule.placeAtom({parentMolecule:O.currentMolecule,x:O.pixelsToWidth(p.clientX),y:O.pixelsToHeight(p.clientY),parent:O.currentMolecule,name:"Box",atomType:"Box"},null,O.availableTypes)),g||(t(O.currentMolecule),O.currentMolecule.selected=!0,O.currentMolecule.sendToRender())}},m=p=>{O.currentMolecule.nodesOnTheScreen.forEach(S=>{S.doubleClick(p.clientX,p.clientY)}),t(O.currentMolecule)},v=p=>{O.currentMolecule.nodesOnTheScreen.forEach(S=>{S.clickUp(p.clientX,p.clientY)}),O.currentMolecule.clickUp(p.clientX,p.clientY)};k.useEffect(()=>{o.current.getContext("2d");let S;const b=()=>{u(),S=window.requestAnimationFrame(b)};return b(),()=>{window.cancelAnimationFrame(S)}},[u]),k.useEffect(()=>{rQ()},[]),k.useEffect(()=>{J$e(a,s)},[]);let y=[];if(O.currentMolecule){y.unshift(O.currentMolecule.name);let p=O.currentMolecule.parent;for(;p;){let b=p.name;y.unshift(b),p=p.parent?p.parent:null}}return se.jsxs(se.Fragment,{children:[se.jsx("canvas",{ref:o,id:"flow-canvas",tabIndex:0,onMouseMove:c,onMouseDown:h,onMouseUp:v,onDoubleClick:m,onKeyUp:d,onKeyDown:f}),se.jsx("div",{style:{position:"absolute",display:"inline",zIndex:"5",top:"20px",left:"55px",color:"rgb(255 255 255 / 34%)"},children:y.map((p,S)=>se.jsxs("a",{className:"repo-name-path",onClick:()=>{for(;O.currentMolecule&&O.currentMolecule.name!==p;)O.currentMolecule.goToParentMolecule(p),t(O.currentMolecule)},children:[" ",p," /"]},"repo-name-path"+S))}),se.jsxs("div",{children:[se.jsx("div",{id:"circle-menu1",className:"cn-menu1",ref:a}),se.jsx(Q$e,{searchingGitHub:i,setSearchingGitHub:s})]})]})});function tVe(){const[n,e]=k.useState({width:0,height:0});return k.useEffect(()=>{function t(){e({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",t),t(),()=>window.removeEventListener("resize",t)},[]),n}const nVe=k.memo(function({gridParam:e,axesParam:t,wireParam:r,solidParam:i,mesh:s,wireMesh:o,outdatedMesh:a,setOutdatedMesh:l}){const u=tVe(),[c,f]=k.useState(1);return k.useEffect(()=>{f(s[0]?s[0].cameraZoom:1)},[s]),se.jsxs(se.Fragment,{children:[se.jsxs("div",{className:"jscad-container",style:{width:u.width*1,height:u.height*.6},children:[se.jsx("section",{id:"threeDView",style:{width:u.width*1,height:u.height*.6},children:o?se.jsxs(HJ,{cameraZoom:c,gridParam:e,axesParam:t,outdatedMesh:a,children:[r?se.jsx(XJ,{mesh:o}):null,se.jsx(qJ,{mesh:s,isSolid:i,setOutdatedMesh:l})]}):se.jsx("div",{style:{display:"flex",alignItems:"center",fontSize:"2em"},children:"Loading..."})}),se.jsxs("div",{className:"container arrow-up",children:[se.jsx("input",{type:"checkbox",className:"custom"}),se.jsx("div",{className:"dots"})]}),se.jsx("div",{id:"viewer_bar"})]}),se.jsx("div",{id:"bottom_bar"})]})});class Rn{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){[e,t]=bm(this,e,t);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(t,this.length,i,1),gl.from(i,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=bm(this,e,t);let r=[];return this.decompose(e,t,r,0),gl.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new $v(this),s=new $v(e);for(let o=t,a=t;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(a+=i.value.length,i.done||a>=r)return!0}}iter(e=1){return new $v(this,e)}iterRange(e,t=this.length){return new iQ(this,e,t)}iterLines(e,t){let r;if(e==null)r=this.iter();else{t==null&&(t=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new sQ(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Rn.empty:e.length<=32?new zr(e):gl.from(zr.split(e,[]))}}class zr extends Rn{constructor(e,t=rVe(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,i){for(let s=0;;s++){let o=this.text[s],a=i+o.length;if((t?r:a)>=e)return new iVe(i,a,r,o);i=a+1,r++}}decompose(e,t,r,i){let s=e<=0&&t>=this.length?this:new zr(_7(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(i&1){let o=r.pop(),a=Hw(s.text,o.text.slice(),0,s.length);if(a.length<=32)r.push(new zr(a,o.length+s.length));else{let l=a.length>>1;r.push(new zr(a.slice(0,l)),new zr(a.slice(l)))}}else r.push(s)}replace(e,t,r){if(!(r instanceof zr))return super.replace(e,t,r);[e,t]=bm(this,e,t);let i=Hw(this.text,Hw(r.text,_7(this.text,0,e)),t),s=this.length+r.length-(t-e);return i.length<=32?new zr(i,s):gl.from(zr.split(i,[]),s)}sliceString(e,t=this.length,r=`
`){[e,t]=bm(this,e,t);let i="";for(let s=0,o=0;s<=t&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(i+=r),e<l&&t>s&&(i+=a.slice(Math.max(0,e-s),t-s)),s=l+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(t.push(new zr(r,i)),r=[],i=-1);return i>-1&&t.push(new zr(r,i)),t}}class gl extends Rn{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,t,r,i){for(let s=0;;s++){let o=this.children[s],a=i+o.length,l=r+o.lines-1;if((t?l:a)>=e)return o.lineInner(e,t,r,i);i=a+1,r=l+1}}decompose(e,t,r,i){for(let s=0,o=0;o<=t&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&t>=o){let u=i&((o<=e?1:0)|(l>=t?2:0));o>=e&&l<=t&&!u?r.push(a):a.decompose(e-o,t-o,r,u)}o=l+1}}replace(e,t,r){if([e,t]=bm(this,e,t),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(e>=s&&t<=a){let l=o.replace(e-s,t-s,r),u=this.lines-o.lines+l.lines;if(l.lines<u>>4&&l.lines>u>>6){let c=this.children.slice();return c[i]=l,new gl(c,this.length-(t-e)+r.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,t,r)}sliceString(e,t=this.length,r=`
`){[e,t]=bm(this,e,t);let i="";for(let s=0,o=0;s<this.children.length&&o<=t;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(i+=r),e<l&&t>o&&(i+=a.sliceString(e-o,t-o,r)),o=l+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof gl))return 0;let r=0,[i,s,o,a]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,s+=t){if(i==o||s==a)return r;let l=this.children[i],u=e.children[s];if(l!=u)return r+l.scanIdentical(u,t);r+=l.length+1}}static from(e,t=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let h of e)r+=h.lines;if(r<32){let h=[];for(let m of e)m.flatten(h);return new zr(h,t)}let i=Math.max(32,r>>5),s=i<<1,o=i>>1,a=[],l=0,u=-1,c=[];function f(h){let m;if(h.lines>s&&h instanceof gl)for(let v of h.children)f(v);else h.lines>o&&(l>o||!l)?(d(),a.push(h)):h instanceof zr&&l&&(m=c[c.length-1])instanceof zr&&h.lines+m.lines<=32?(l+=h.lines,u+=h.length+1,c[c.length-1]=new zr(m.text.concat(h.text),m.length+1+h.length)):(l+h.lines>i&&d(),l+=h.lines,u+=h.length+1,c.push(h))}function d(){l!=0&&(a.push(c.length==1?c[0]:gl.from(c,u)),u=-1,l=c.length=0)}for(let h of e)f(h);return d(),a.length==1?a[0]:new gl(a,t)}}Rn.empty=new zr([""],0);function rVe(n){let e=-1;for(let t of n)e+=t.length+1;return e}function Hw(n,e,t=0,r=1e9){for(let i=0,s=0,o=!0;s<n.length&&i<=r;s++){let a=n[s],l=i+a.length;l>=t&&(l>r&&(a=a.slice(0,r-i)),i<t&&(a=a.slice(t-i)),o?(e[e.length-1]+=a,o=!1):e.push(a)),i=l+1}return e}function _7(n,e,t){return Hw(n,[""],e,t)}class $v{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof zr?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],o=s>>1,a=i instanceof zr?i.text.length:i.children.length;if(o==(t>0?a:0)){if(r==0)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[r]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof zr){let l=i.text[o+(t<0?-1:0)];if(this.offsets[r]+=t,l.length>Math.max(0,e))return this.value=e==0?l:t>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[o+(t<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(t>0?1:(l instanceof zr?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class iQ{constructor(e,t,r){this.value="",this.done=!1,this.cursor=new $v(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=r?i:t<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class sQ{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:i}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Rn.prototype[Symbol.iterator]=function(){return this.iter()},$v.prototype[Symbol.iterator]=iQ.prototype[Symbol.iterator]=sQ.prototype[Symbol.iterator]=function(){return this});class iVe{constructor(e,t,r,i){this.from=e,this.to=t,this.number=r,this.text=i}get length(){return this.to-this.from}}function bm(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}let qp="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=1;n<qp.length;n++)qp[n]+=qp[n-1];function sVe(n){for(let e=1;e<qp.length;e+=2)if(qp[e]>n)return qp[e-1]<=n;return!1}function E7(n){return n>=127462&&n<=127487}const M7=8205;function Fi(n,e,t=!0,r=!0){return(t?oQ:oVe)(n,e,r)}function oQ(n,e,t){if(e==n.length)return e;e&&aQ(n.charCodeAt(e))&&lQ(n.charCodeAt(e-1))&&e--;let r=Ri(n,e);for(e+=Zo(r);e<n.length;){let i=Ri(n,e);if(r==M7||i==M7||t&&sVe(i))e+=Zo(i),r=i;else if(E7(i)){let s=0,o=e-2;for(;o>=0&&E7(Ri(n,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function oVe(n,e,t){for(;e>0;){let r=oQ(n,e-2,t);if(r<e)return r;e--}return 0}function aQ(n){return n>=56320&&n<57344}function lQ(n){return n>=55296&&n<56320}function Ri(n,e){let t=n.charCodeAt(e);if(!lQ(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return aQ(r)?(t-55296<<10)+(r-56320)+65536:t}function ak(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function Zo(n){return n<65536?1:2}const uN=/\r\n?|\n/;var Es=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(Es||(Es={}));class Nl{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,i=0;t<this.sections.length;){let s=this.sections[t++],o=this.sections[t++];o<0?(e(r,i,s),i+=s):i+=o,r+=s}}iterChangedRanges(e,t=!1){cN(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];i<0?e.push(r,i):e.push(i,r)}return new Nl(e)}composeDesc(e){return this.empty?e:e.empty?this:uQ(this,e)}mapDesc(e,t=!1){return e.empty?this:fN(this,e,t)}mapPos(e,t=-1,r=Es.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],u=i+a;if(l<0){if(u>e)return s+(e-i);s+=a}else{if(r!=Es.Simple&&u>=e&&(r==Es.TrackDel&&i<e&&u>e||r==Es.TrackBefore&&i<e||r==Es.TrackAfter&&u>e))return null;if(u>e||u==e&&t<0&&!a)return e==i||t<0?s:s+l;s+=l}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,t=e){for(let r=0,i=0;r<this.sections.length&&i<=t;){let s=this.sections[r++],o=this.sections[r++],a=i+s;if(o>=0&&i<=t&&a>=e)return i<e&&a>t?"cover":!0;i=a}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Nl(e)}static create(e){return new Nl(e)}}class ii extends Nl{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return cN(this,(t,r,i,s,o)=>e=e.replace(i,i+(r-t),o),!1),e}mapDesc(e,t=!1){return fN(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let i=0,s=0;i<t.length;i+=2){let o=t[i],a=t[i+1];if(a>=0){t[i]=a,t[i+1]=o;let l=i>>1;for(;r.length<l;)r.push(Rn.empty);r.push(o?e.slice(s,s+o):Rn.empty)}s+=o}return new ii(t,r)}compose(e){return this.empty?e:e.empty?this:uQ(this,e,!0)}map(e,t=!1){return e.empty?this:fN(this,e,t,!0)}iterChanges(e,t=!1){cN(this,e,t)}get desc(){return Nl.create(this.sections)}filter(e){let t=[],r=[],i=[],s=new J0(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,l-a);es(i,c,-1);let f=s.ins==-1?-1:s.off==0?s.ins:0;es(t,c,f),f>0&&Cc(r,t,s.text),s.forward(c),a+=c}let u=e[o++];for(;a<u;){if(s.done)break e;let c=Math.min(s.len,u-a);es(t,c,-1),es(i,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),a+=c}}return{changes:new ii(t,r),filtered:Nl.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],i=this.sections[t+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let i=[],s=[],o=0,a=null;function l(c=!1){if(!c&&!i.length)return;o<t&&es(i,t-o,-1);let f=new ii(i,s);a=a?a.compose(f.map(a)):f,i=[],s=[],o=0}function u(c){if(Array.isArray(c))for(let f of c)u(f);else if(c instanceof ii){if(c.length!=t)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${t})`);l(),a=a?a.compose(c.map(a)):c}else{let{from:f,to:d=f,insert:h}=c;if(f>d||f<0||d>t)throw new RangeError(`Invalid change range ${f} to ${d} (in doc of length ${t})`);let m=h?typeof h=="string"?Rn.of(h.split(r||uN)):h:Rn.empty,v=m.length;if(f==d&&v==0)return;f<o&&l(),f>o&&es(i,f-o,-1),es(i,d-f,v),Cc(s,i,m),o=d}}return u(e),l(!a),a}static empty(e){return new ii(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;r.length<i;)r.push(Rn.empty);r[i]=Rn.of(s.slice(1)),t.push(s[0],r[i].length)}}}return new ii(t,r)}static createSet(e,t){return new ii(e,t)}}function es(n,e,t,r=!1){if(e==0&&t<=0)return;let i=n.length-2;i>=0&&t<=0&&t==n[i+1]?n[i]+=e:e==0&&n[i]==0?n[i+1]+=t:r?(n[i]+=e,n[i+1]+=t):n.push(e,t)}function Cc(n,e,t){if(t.length==0)return;let r=e.length-2>>1;if(r<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<r;)n.push(Rn.empty);n.push(t)}}function cN(n,e,t){let r=n.inserted;for(let i=0,s=0,o=0;o<n.sections.length;){let a=n.sections[o++],l=n.sections[o++];if(l<0)i+=a,s+=a;else{let u=i,c=s,f=Rn.empty;for(;u+=a,c+=l,l&&r&&(f=f.append(r[o-2>>1])),!(t||o==n.sections.length||n.sections[o+1]<0);)a=n.sections[o++],l=n.sections[o++];e(i,u,s,c,f),i=u,s=c}}}function fN(n,e,t,r=!1){let i=[],s=r?[]:null,o=new J0(n),a=new J0(e);for(let l=-1;;)if(o.ins==-1&&a.ins==-1){let u=Math.min(o.len,a.len);es(i,u,-1),o.forward(u),a.forward(u)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!t))){let u=a.len;for(es(i,a.ins,-1);u;){let c=Math.min(o.len,u);o.ins>=0&&l<o.i&&o.len<=c&&(es(i,0,o.ins),s&&Cc(s,i,o.text),l=o.i),o.forward(c),u-=c}a.next()}else if(o.ins>=0){let u=0,c=o.len;for(;c;)if(a.ins==-1){let f=Math.min(c,a.len);u+=f,c-=f,a.forward(f)}else if(a.ins==0&&a.len<c)c-=a.len,a.next();else break;es(i,u,l<o.i?o.ins:0),s&&l<o.i&&Cc(s,i,o.text),l=o.i,o.forward(o.len-c)}else{if(o.done&&a.done)return s?ii.createSet(i,s):Nl.create(i);throw new Error("Mismatched change set lengths")}}function uQ(n,e,t=!1){let r=[],i=t?[]:null,s=new J0(n),o=new J0(e);for(let a=!1;;){if(s.done&&o.done)return i?ii.createSet(r,i):Nl.create(r);if(s.ins==0)es(r,s.len,0,a),s.next();else if(o.len==0&&!o.done)es(r,0,o.ins,a),i&&Cc(i,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),u=r.length;if(s.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;es(r,l,c,a),i&&c&&Cc(i,r,o.text)}else o.ins==-1?(es(r,s.off?0:s.len,l,a),i&&Cc(i,r,s.textBit(l))):(es(r,s.off?0:s.len,o.off?0:o.ins,a),i&&!o.off&&Cc(i,r,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||r.length>u),s.forward2(l),o.forward(l)}}}}class J0{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Rn.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?Rn.empty:t[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class cd{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,t):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new cd(r,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return it.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return it.range(this.anchor,r)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return it.range(e.anchor,e.head)}static create(e,t,r){return new cd(e,t,r)}}class it{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:it.create(this.ranges.map(r=>r.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new it([this.main],0)}addRange(e,t=!0){return it.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,it.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new it(e.ranges.map(t=>cd.fromJSON(t)),e.main)}static single(e,t=e){return new it([it.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return it.normalized(e.slice(),t);r=s.to}return new it(e,t)}static cursor(e,t=0,r,i){return cd.create(e,e,(t==0?0:t<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,t,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return t<e?cd.create(t,e,48|s):cd.create(e,t,(t>e?8:0)|s)}static normalized(e,t=0){let r=e[t];e.sort((i,s)=>i.from-s.from),t=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],o=e[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);i<=t&&t--,e.splice(--i,2,s.anchor>s.head?it.range(l,a):it.range(a,l))}}return new it(e,t)}}function cQ(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let lk=0;class Rt{constructor(e,t,r,i,s){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=i,this.id=lk++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Rt(e.combine||(t=>t),e.compareInput||((t,r)=>t===r),e.compare||(e.combine?(t,r)=>t===r:uk),!!e.static,e.enables)}of(e){return new Ww([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Ww(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Ww(e,this,2,t)}from(e,t){return t||(t=r=>r),this.compute([e],r=>t(r.field(e)))}}function uk(n,e){return n==e||n.length==e.length&&n.every((t,r)=>t===e[r])}class Ww{constructor(e,t,r,i){this.dependencies=e,this.facet=t,this.type=r,this.value=i,this.id=lk++}dynamicSlot(e){var t;let r=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,u=!1,c=[];for(let f of this.dependencies)f=="doc"?l=!0:f=="selection"?u=!0:((t=e[f.id])!==null&&t!==void 0?t:1)&1||c.push(e[f.id]);return{create(f){return f.values[o]=r(f),1},update(f,d){if(l&&d.docChanged||u&&(d.docChanged||d.selection)||dN(f,c)){let h=r(f);if(a?!C7(h,f.values[o],i):!i(h,f.values[o]))return f.values[o]=h,1}return 0},reconfigure:(f,d)=>{let h,m=d.config.address[s];if(m!=null){let v=C_(d,m);if(this.dependencies.every(y=>y instanceof Rt?d.facet(y)===f.facet(y):y instanceof Vi?d.field(y,!1)==f.field(y,!1):!0)||(a?C7(h=r(f),v,i):i(h=r(f),v)))return f.values[o]=v,0}else h=r(f);return f.values[o]=h,1}}}}function C7(n,e,t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!1;return!0}function dN(n,e){let t=!1;for(let r of e)Vv(n,r)&1&&(t=!0);return t}function aVe(n,e,t){let r=t.map(l=>n[l.id]),i=t.map(l=>l.type),s=r.filter(l=>!(l&1)),o=n[e.id]>>1;function a(l){let u=[];for(let c=0;c<r.length;c++){let f=C_(l,r[c]);if(i[c]==2)for(let d of f)u.push(d);else u.push(f)}return e.combine(u)}return{create(l){for(let u of r)Vv(l,u);return l.values[o]=a(l),1},update(l,u){if(!dN(l,s))return 0;let c=a(l);return e.compare(c,l.values[o])?0:(l.values[o]=c,1)},reconfigure(l,u){let c=dN(l,r),f=u.config.facets[e.id],d=u.facet(e);if(f&&!c&&uk(t,f))return l.values[o]=d,0;let h=a(l);return e.compare(h,d)?(l.values[o]=d,0):(l.values[o]=h,1)}}}const A7=Rt.define({static:!0});class Vi{constructor(e,t,r,i,s){this.id=e,this.createF=t,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let t=new Vi(lk++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(A7).find(r=>r.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:r=>(r.values[t]=this.create(r),1),update:(r,i)=>{let s=r.values[t],o=this.updateF(s,i);return this.compareF(s,o)?0:(r.values[t]=o,1)},reconfigure:(r,i)=>i.config.address[this.id]!=null?(r.values[t]=i.field(this),0):(r.values[t]=this.create(r),1)}}init(e){return[this,A7.of({field:this,create:e})]}get extension(){return this}}const Qf={lowest:4,low:3,default:2,high:1,highest:0};function Qg(n){return e=>new fQ(e,n)}const rh={highest:Qg(Qf.highest),high:Qg(Qf.high),default:Qg(Qf.default),low:Qg(Qf.low),lowest:Qg(Qf.lowest)};class fQ{constructor(e,t){this.inner=e,this.prec=t}}class wM{of(e){return new hN(this,e)}reconfigure(e){return wM.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class hN{constructor(e,t){this.compartment=e,this.inner=t}}class M_{constructor(e,t,r,i,s,o){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,r){let i=[],s=Object.create(null),o=new Map;for(let d of lVe(e,t,o))d instanceof Vi?i.push(d):(s[d.facet.id]||(s[d.facet.id]=[])).push(d);let a=Object.create(null),l=[],u=[];for(let d of i)a[d.id]=u.length<<1,u.push(h=>d.slot(h));let c=r==null?void 0:r.config.facets;for(let d in s){let h=s[d],m=h[0].facet,v=c&&c[d]||[];if(h.every(y=>y.type==0))if(a[m.id]=l.length<<1|1,uk(v,h))l.push(r.facet(m));else{let y=m.combine(h.map(p=>p.value));l.push(r&&m.compare(y,r.facet(m))?r.facet(m):y)}else{for(let y of h)y.type==0?(a[y.id]=l.length<<1|1,l.push(y.value)):(a[y.id]=u.length<<1,u.push(p=>y.dynamicSlot(p)));a[m.id]=u.length<<1,u.push(y=>aVe(y,m,h))}}let f=u.map(d=>d(a));return new M_(e,o,f,a,l,s)}}function lVe(n,e,t){let r=[[],[],[],[],[]],i=new Map;function s(o,a){let l=i.get(o);if(l!=null){if(l<=a)return;let u=r[l].indexOf(o);u>-1&&r[l].splice(u,1),o instanceof hN&&t.delete(o.compartment)}if(i.set(o,a),Array.isArray(o))for(let u of o)s(u,a);else if(o instanceof hN){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;t.set(o.compartment,u),s(u,a)}else if(o instanceof fQ)s(o.inner,o.prec);else if(o instanceof Vi)r[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof Ww)r[a].push(o),o.facet.extensions&&s(o.facet.extensions,Qf.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,a)}}return s(n,Qf.default),r.reduce((o,a)=>o.concat(a))}function Vv(n,e){if(e&1)return 2;let t=e>>1,r=n.status[t];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;n.status[t]=4;let i=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|i}function C_(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const dQ=Rt.define(),pN=Rt.define({combine:n=>n.some(e=>e),static:!0}),hQ=Rt.define({combine:n=>n.length?n[0]:void 0,static:!0}),pQ=Rt.define(),mQ=Rt.define(),gQ=Rt.define(),vQ=Rt.define({combine:n=>n.length?n[0]:!1});class $l{constructor(e,t){this.type=e,this.value=t}static define(){return new uVe}}class uVe{of(e){return new $l(this,e)}}class cVe{constructor(e){this.map=e}of(e){return new dn(this,e)}}class dn{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new dn(this.type,t)}is(e){return this.type==e}static define(e={}){return new cVe(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(t);s&&r.push(s)}return r}}dn.reconfigure=dn.define();dn.appendConfig=dn.define();class ai{constructor(e,t,r,i,s,o){this.startState=e,this.changes=t,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&cQ(r,t.newLength),s.some(a=>a.type==ai.time)||(this.annotations=s.concat(ai.time.of(Date.now())))}static create(e,t,r,i,s,o){return new ai(e,t,r,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(ai.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}ai.time=$l.define();ai.userEvent=$l.define();ai.addToHistory=$l.define();ai.remote=$l.define();function fVe(n,e){let t=[];for(let r=0,i=0;;){let s,o;if(r<n.length&&(i==e.length||e[i]>=n[r]))s=n[r++],o=n[r++];else if(i<e.length)s=e[i++],o=e[i++];else return t;!t.length||t[t.length-1]<s?t.push(s,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function yQ(n,e,t){var r;let i,s,o;return t?(i=e.changes,s=ii.empty(e.changes.length),o=n.changes.compose(e.changes)):(i=e.changes.map(n.changes),s=n.changes.mapDesc(e.changes,!0),o=n.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):(r=n.selection)===null||r===void 0?void 0:r.map(i),effects:dn.mapEffects(n.effects,i).concat(dn.mapEffects(e.effects,s)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function mN(n,e,t){let r=e.selection,i=Xp(e.annotations);return e.userEvent&&(i=i.concat(ai.userEvent.of(e.userEvent))),{changes:e.changes instanceof ii?e.changes:ii.of(e.changes||[],t,n.facet(hQ)),selection:r&&(r instanceof it?r:it.single(r.anchor,r.head)),effects:Xp(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function xQ(n,e,t){let r=mN(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let o=!!e[s].sequential;r=yQ(r,mN(n,e[s],o?r.changes.newLength:n.doc.length),o)}let i=ai.create(n,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return hVe(t?dVe(i):i)}function dVe(n){let e=n.startState,t=!0;for(let i of e.facet(pQ)){let s=i(n);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:fVe(t,s))}if(t!==!0){let i,s;if(t===!1)s=n.changes.invertedDesc,i=ii.empty(e.doc.length);else{let o=n.changes.filter(t);i=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}n=ai.create(e,i,n.selection&&n.selection.map(s),dn.mapEffects(n.effects,s),n.annotations,n.scrollIntoView)}let r=e.facet(mQ);for(let i=r.length-1;i>=0;i--){let s=r[i](n);s instanceof ai?n=s:Array.isArray(s)&&s.length==1&&s[0]instanceof ai?n=s[0]:n=xQ(e,Xp(s),!1)}return n}function hVe(n){let e=n.startState,t=e.facet(gQ),r=n;for(let i=t.length-1;i>=0;i--){let s=t[i](n);s&&Object.keys(s).length&&(r=yQ(r,mN(e,s,n.changes.newLength),!0))}return r==n?n:ai.create(e,n.changes,n.selection,r.effects,r.annotations,r.scrollIntoView)}const pVe=[];function Xp(n){return n==null?pVe:Array.isArray(n)?n:[n]}var gr=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(gr||(gr={}));const mVe=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let gN;try{gN=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function gVe(n){if(gN)return gN.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||mVe.test(t)))return!0}return!1}function vVe(n){return e=>{if(!/\S/.test(e))return gr.Space;if(gVe(e))return gr.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return gr.Word;return gr.Other}}class bn{constructor(e,t,r,i,s,o){this.config=e,this.doc=t,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)Vv(this,a<<1);this.computeSlot=null}field(e,t=!0){let r=this.config.address[e.id];if(r==null){if(t)throw new RangeError("Field is not present in this state");return}return Vv(this,r),C_(this,r)}update(...e){return xQ(this,e,!0)}applyTransaction(e){let t=this.config,{base:r,compartments:i}=t;for(let a of e.effects)a.is(wM.reconfigure)?(t&&(i=new Map,t.compartments.forEach((l,u)=>i.set(u,l)),t=null),i.set(a.value.compartment,a.value.extension)):a.is(dn.reconfigure)?(t=null,r=a.value):a.is(dn.appendConfig)&&(t=null,r=Xp(r).concat(a.value));let s;t?s=e.startState.values.slice():(t=M_.resolve(r,i,this),s=new bn(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(l,u)=>u.reconfigure(l,this),null).values);let o=e.startState.facet(pN)?e.newSelection:e.newSelection.asSingle();new bn(t,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:it.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,r=e(t.ranges[0]),i=this.changes(r.changes),s=[r.range],o=Xp(r.effects);for(let a=1;a<t.ranges.length;a++){let l=e(t.ranges[a]),u=this.changes(l.changes),c=u.map(i);for(let d=0;d<a;d++)s[d]=s[d].map(c);let f=i.mapDesc(u,!0);s.push(l.range.map(f)),i=i.compose(c),o=dn.mapEffects(o,c).concat(dn.mapEffects(Xp(l.effects),f))}return{changes:i,selection:it.create(s,t.mainIndex),effects:o}}changes(e=[]){return e instanceof ii?e:ii.of(e,this.doc.length,this.facet(bn.lineSeparator))}toText(e){return Rn.of(e.split(this.facet(bn.lineSeparator)||uN))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Vv(this,t),C_(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Vi&&this.config.address[i.id]!=null&&(t[r]=i.spec.toJSON(this.field(e[r]),this))}return t}static fromJSON(e,t={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let o=r[s],a=e[s];i.push(o.init(l=>o.spec.fromJSON(a,l)))}}return bn.create({doc:e.doc,selection:it.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(e={}){let t=M_.resolve(e.extensions||[],new Map),r=e.doc instanceof Rn?e.doc:Rn.of((e.doc||"").split(t.staticFacet(bn.lineSeparator)||uN)),i=e.selection?e.selection instanceof it?e.selection:it.single(e.selection.anchor,e.selection.head):it.single(0);return cQ(i,r.length),t.staticFacet(pN)||(i=i.asSingle()),new bn(t,r,i,t.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(bn.tabSize)}get lineBreak(){return this.facet(bn.lineSeparator)||`
`}get readOnly(){return this.facet(vQ)}phrase(e,...t){for(let r of this.facet(bn.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>t.length?r:t[s-1]})),e}languageDataAt(e,t,r=-1){let i=[];for(let s of this.facet(dQ))for(let o of s(this,t,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return vVe(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,a=e-r;for(;o>0;){let l=Fi(t,o,!1);if(s(t.slice(l,o))!=gr.Word)break;o=l}for(;a<i;){let l=Fi(t,a);if(s(t.slice(a,l))!=gr.Word)break;a=l}return o==a?null:it.range(o+r,a+r)}}bn.allowMultipleSelections=pN;bn.tabSize=Rt.define({combine:n=>n.length?n[0]:4});bn.lineSeparator=hQ;bn.readOnly=vQ;bn.phrases=Rt.define({compare(n,e){let t=Object.keys(n),r=Object.keys(e);return t.length==r.length&&t.every(i=>n[i]==e[i])}});bn.languageData=dQ;bn.changeFilter=pQ;bn.transactionFilter=mQ;bn.transactionExtender=gQ;wM.reconfigure=dn.define();function Vl(n,e,t={}){let r={};for(let i of n)for(let s of Object.keys(i)){let o=i[s],a=r[s];if(a===void 0)r[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(t,s))r[s]=t[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class Fd{eq(e){return this==e}range(e,t=e){return vN.create(e,t,this)}}Fd.prototype.startSide=Fd.prototype.endSide=0;Fd.prototype.point=!1;Fd.prototype.mapMode=Es.TrackDel;let vN=class bQ{constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(e,t,r){return new bQ(e,t,r)}};function yN(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class ck{constructor(e,t,r,i){this.from=e,this.to=t,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,i=0){let s=r?this.to:this.from;for(let o=i,a=s.length;;){if(o==a)return o;let l=o+a>>1,u=s[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-t;if(l==o)return u>=0?o:a;u>=0?a=l:o=l+1}}between(e,t,r,i){for(let s=this.findIndex(t,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let r=[],i=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let u=this.value[l],c=this.from[l]+e,f=this.to[l]+e,d,h;if(c==f){let m=t.mapPos(c,u.startSide,u.mapMode);if(m==null||(d=h=m,u.startSide!=u.endSide&&(h=t.mapPos(c,u.endSide),h<d)))continue}else if(d=t.mapPos(c,u.startSide),h=t.mapPos(f,u.endSide),d>h||d==h&&u.startSide>0&&u.endSide<=0)continue;(h-d||u.endSide-u.startSide)<0||(o<0&&(o=d),u.point&&(a=Math.max(a,h-d)),r.push(u),i.push(d-o),s.push(h-o))}return{mapped:r.length?new ck(i,s,r,a):null,pos:o}}}class An{constructor(e,t,r,i){this.chunkPos=e,this.chunk=t,this.nextLayer=r,this.maxPoint=i}static create(e,t,r,i){return new An(e,t,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(r&&(t=t.slice().sort(yN)),this.isEmpty)return t.length?An.of(t):this;let a=new wQ(this,null,-1).goto(0),l=0,u=[],c=new nf;for(;a.value||l<t.length;)if(l<t.length&&(a.from-t[l].from||a.startSide-t[l].value.startSide)>=0){let f=t[l++];c.addInner(f.from,f.to,f.value)||u.push(f)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(a.chunkIndex)<t[l].from)&&(!o||i>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&c.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||i>a.to||s<a.from||o(a.from,a.to,a.value))&&(c.addInner(a.from,a.to,a.value)||u.push(vN.create(a.from,a.to,a.value))),a.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?An.empty:this.nextLayer.update({add:u,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],r=[],i=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],u=e.touchesRange(a,a+l.length);if(u===!1)i=Math.max(i,l.maxPoint),t.push(l),r.push(e.mapPos(a));else if(u===!0){let{mapped:c,pos:f}=l.map(a,e);c&&(i=Math.max(i,c.maxPoint),t.push(c),r.push(f))}}let s=this.nextLayer.map(e);return t.length==0?s:new An(r,t,s||An.empty,i)}between(e,t,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(t>=s&&e<=s+o.length&&o.between(s,e-s,t-s,r)===!1)return}this.nextLayer.between(e,t,r)}}iter(e=0){return Q0.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Q0.from(e).goto(t)}static compare(e,t,r,i,s=-1){let o=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=s),a=t.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=s),l=T7(o,a,r),u=new ev(o,l,s),c=new ev(a,l,s);r.iterGaps((f,d,h)=>D7(u,f,c,d,h,i)),r.empty&&r.length==0&&D7(u,0,c,0,0,i)}static eq(e,t,r=0,i){i==null&&(i=999999999);let s=e.filter(c=>!c.isEmpty&&t.indexOf(c)<0),o=t.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=T7(s,o),l=new ev(s,a,0).goto(r),u=new ev(o,a,0).goto(r);for(;;){if(l.to!=u.to||!xN(l.active,u.active)||l.point&&(!u.point||!l.point.eq(u.point)))return!1;if(l.to>i)return!0;l.next(),u.next()}}static spans(e,t,r,i,s=-1){let o=new ev(e,null,s).goto(t),a=t,l=o.openStart;for(;;){let u=Math.min(o.to,r);if(o.point){let c=o.activeForPoint(o.to),f=o.pointFrom<t?c.length+1:o.point.startSide<0?c.length:Math.min(c.length,l);i.point(a,u,o.point,c,f,o.pointRank),l=Math.min(o.openEnd(u),c.length)}else u>a&&(i.span(a,u,o.active,l),l=o.openEnd(u));if(o.to>r)return l+(o.point&&o.to>r?1:0);a=o.to,o.next()}}static of(e,t=!1){let r=new nf;for(let i of e instanceof vN?[e]:t?yVe(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return An.empty;let t=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=An.empty;i=i.nextLayer)t=new An(i.chunkPos,i.chunk,t,Math.max(i.maxPoint,t.maxPoint));return t}}An.empty=new An([],[],null,-1);function yVe(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let r=n[t];if(yN(e,r)>0)return n.slice().sort(yN);e=r}return n}An.empty.nextLayer=An.empty;class nf{finishChunk(e){this.chunks.push(new ck(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new nf)).add(e,t,r)}addInner(e,t,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(An.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=An.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function T7(n,e,t){let r=new Map;for(let s of n)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=r.get(s.chunk[o]);a!=null&&(t?t.mapPos(a):a)==s.chunkPos[o]&&!(t!=null&&t.touchesRange(a,a+s.chunk[o].length))&&i.add(s.chunk[o])}return i}class wQ{constructor(e,t,r,i=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],r=e+t.from[this.rangeIndex];if(this.from=r,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Q0{constructor(e){this.heap=e}static from(e,t=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new wQ(o,t,r,s));return i.length==1?i[0]:new Q0(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let r=this.heap.length>>1;r>=0;r--)XA(this.heap,r);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let r=this.heap.length>>1;r>=0;r--)XA(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),XA(this.heap,0)}}}function XA(n,e){for(let t=n[e];;){let r=(e<<1)+1;if(r>=n.length)break;let i=n[r];if(r+1<n.length&&i.compare(n[r+1])>=0&&(i=n[r+1],r++),t.compare(i)<0)break;n[r]=t,n[e]=i,e=r}}class ev{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Q0.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Gb(this.active,e),Gb(this.activeTo,e),Gb(this.activeRank,e),this.minActive=N7(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:i,rank:s}=this.cursor;for(;t<this.activeRank.length&&(s-this.activeRank[t]||i-this.activeTo[t])>0;)t++;qb(this.active,t,r),qb(this.activeTo,t,i),qb(this.activeRank,t,s),e&&qb(e,t,this.cursor.from),this.minActive=N7(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&Gb(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}}function D7(n,e,t,r,i,s){n.goto(e),t.goto(r);let o=r+i,a=r,l=r-e;for(;;){let u=n.to+l-t.to||n.endSide-t.endSide,c=u<0?n.to+l:t.to,f=Math.min(c,o);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&xN(n.activeForPoint(n.to),t.activeForPoint(t.to))||s.comparePoint(a,f,n.point,t.point):f>a&&!xN(n.active,t.active)&&s.compareRange(a,f,n.active,t.active),c>o)break;a=c,u<=0&&n.next(),u>=0&&t.next()}}function xN(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function Gb(n,e){for(let t=e,r=n.length-1;t<r;t++)n[t]=n[t+1];n.pop()}function qb(n,e,t){for(let r=n.length-1;r>=e;r--)n[r+1]=n[r];n[e]=t}function N7(n,e){let t=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||n[i].endSide-n[t].endSide)<0&&(t=i,r=e[i]);return t}function tg(n,e,t=n.length){let r=0;for(let i=0;i<t;)n.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=Fi(n,i));return r}function bN(n,e,t,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==n.length)break;s+=n.charCodeAt(i)==9?t-s%t:1,i=Fi(n,i)}return r===!0?-1:n.length}const wN="",P7=typeof Symbol>"u"?"__"+wN:Symbol.for(wN),SN=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),R7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class rf{constructor(e,t){this.rules=[];let{finish:r}=t||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,u){let c=[],f=/^@(\w+)\b/.exec(o[0]),d=f&&f[1]=="keyframes";if(f&&a==null)return l.push(o[0]+";");for(let h in a){let m=a[h];if(/&/.test(h))s(h.split(/,\s*/).map(v=>o.map(y=>v.replace(/&/,y))).reduce((v,y)=>v.concat(y)),m,l);else if(m&&typeof m=="object"){if(!f)throw new RangeError("The value of a property ("+h+") should be a primitive value.");s(i(h),m,c,d)}else m!=null&&c.push(h.replace(/_.*/,"").replace(/[A-Z]/g,v=>"-"+v.toLowerCase())+": "+m+";")}(c.length||d)&&l.push((r&&!f&&!u?o.map(r):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)s(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=R7[P7]||1;return R7[P7]=e+1,wN+e.toString(36)}static mount(e,t,r){let i=e[SN],s=r&&r.nonce;i?s&&i.setNonce(s):i=new xVe(e,s),i.mount(Array.isArray(t)?t:[t],e)}}let O7=new Map;class xVe{constructor(e,t){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=O7.get(r);if(s)return e[SN]=s;this.sheet=new i.CSSStyleSheet,O7.set(r,this)}else this.styleTag=r.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[SN]=this}mount(e,t){let r=this.sheet,i=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),r)for(let u=0;u<a.rules.length;u++)r.insertRule(a.rules[u],i++)}else{for(;s<l;)i+=this.modules[s++].rules.length;i+=a.rules.length,s++}}if(r)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=t.head||t;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var sf={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ey={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},bVe=typeof navigator<"u"&&/Mac/.test(navigator.platform),wVe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Oi=0;Oi<10;Oi++)sf[48+Oi]=sf[96+Oi]=String(Oi);for(var Oi=1;Oi<=24;Oi++)sf[Oi+111]="F"+Oi;for(var Oi=65;Oi<=90;Oi++)sf[Oi]=String.fromCharCode(Oi+32),ey[Oi]=String.fromCharCode(Oi);for(var YA in sf)ey.hasOwnProperty(YA)||(ey[YA]=sf[YA]);function SVe(n){var e=bVe&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||wVe&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?ey:sf)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function ty(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function _N(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function _Ve(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function jw(n,e){if(!e.anchorNode)return!1;try{return _N(n,e.anchorNode)}catch{return!1}}function wm(n){return n.nodeType==3?zd(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function Hv(n,e,t,r){return t?k7(n,e,t,r,-1)||k7(n,e,t,r,1):!1}function Bd(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function A_(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function k7(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:Iu(n))){if(n.nodeName=="DIV")return!1;let s=n.parentNode;if(!s||s.nodeType!=1)return!1;e=Bd(n)+(i<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=i<0?Iu(n):0}else return!1}}function Iu(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function SM(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function EVe(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function SQ(n,e){let t=e.width/n.offsetWidth,r=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-n.offsetHeight)<1)&&(r=1),{scaleX:t,scaleY:r}}function MVe(n,e,t,r,i,s,o,a){let l=n.ownerDocument,u=l.defaultView||window;for(let c=n,f=!1;c&&!f;)if(c.nodeType==1){let d,h=c==l.body,m=1,v=1;if(h)d=EVe(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(f=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let S=c.getBoundingClientRect();({scaleX:m,scaleY:v}=SQ(c,S)),d={left:S.left,right:S.left+c.clientWidth*m,top:S.top,bottom:S.top+c.clientHeight*v}}let y=0,p=0;if(i=="nearest")e.top<d.top?(p=-(d.top-e.top+o),t>0&&e.bottom>d.bottom+p&&(p=e.bottom-d.bottom+p+o)):e.bottom>d.bottom&&(p=e.bottom-d.bottom+o,t<0&&e.top-p<d.top&&(p=-(d.top+p-e.top+o)));else{let S=e.bottom-e.top,b=d.bottom-d.top;p=(i=="center"&&S<=b?e.top+S/2-b/2:i=="start"||i=="center"&&t<0?e.top-o:e.bottom-b+o)-d.top}if(r=="nearest"?e.left<d.left?(y=-(d.left-e.left+s),t>0&&e.right>d.right+y&&(y=e.right-d.right+y+s)):e.right>d.right&&(y=e.right-d.right+s,t<0&&e.left<d.left+y&&(y=-(d.left+y-e.left+s))):y=(r=="center"?e.left+(e.right-e.left)/2-(d.right-d.left)/2:r=="start"==a?e.left-s:e.right-(d.right-d.left)+s)-d.left,y||p)if(h)u.scrollBy(y,p);else{let S=0,b=0;if(p){let g=c.scrollTop;c.scrollTop+=p/v,b=(c.scrollTop-g)*v}if(y){let g=c.scrollLeft;c.scrollLeft+=y/m,S=(c.scrollLeft-g)*m}e={left:e.left-S,top:e.top-b,right:e.right-S,bottom:e.bottom-b},S&&Math.abs(S-y)<1&&(r="nearest"),b&&Math.abs(b-p)<1&&(i="nearest")}if(h)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function CVe(n){let e=n.ownerDocument;for(let t=n.parentNode;t&&t!=e.body;)if(t.nodeType==1){if(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)return t;t=t.assignedSlot||t.parentNode}else if(t.nodeType==11)t=t.host;else break;return null}class AVe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:r}=e;this.set(t,Math.min(e.anchorOffset,t?Iu(t):0),r,Math.min(e.focusOffset,r?Iu(r):0))}set(e,t,r,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=i}}let rp=null;function _Q(n){if(n.setActive)return n.setActive();if(rp)return n.focus(rp);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(rp==null?{get preventScroll(){return rp={preventScroll:!0},!0}}:void 0),!rp){rp=!1;for(let t=0;t<e.length;){let r=e[t++],i=e[t++],s=e[t++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let I7;function zd(n,e,t=e){let r=I7||(I7=document.createRange());return r.setEnd(n,t),r.setStart(n,e),r}function Yp(n,e,t,r){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,n.dispatchEvent(s);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,n.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function TVe(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function EQ(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function DVe(n,e){let t=e.focusNode,r=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=r)return!1;for(r=Math.min(r,Iu(t));;)if(r){if(t.nodeType!=1)return!1;let i=t.childNodes[r-1];i.contentEditable=="false"?r--:(t=i,r=Iu(t))}else{if(t==n)return!0;r=Bd(t),t=t.parentNode}}function MQ(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function CQ(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r>0)return{node:t,offset:r};if(t.nodeType==1&&r>0){if(t.contentEditable=="false")return null;t=t.childNodes[r-1],r=Iu(t)}else if(t.parentNode&&!A_(t))r=Bd(t),t=t.parentNode;else return null}}function AQ(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r<t.nodeValue.length)return{node:t,offset:r};if(t.nodeType==1&&r<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[r],r=0}else if(t.parentNode&&!A_(t))r=Bd(t)+1,t=t.parentNode;else return null}}class is{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new is(e.parentNode,Bd(e),t)}static after(e,t){return new is(e.parentNode,Bd(e)+1,t)}}const fk=[];class Jn{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let r of this.children){if(r==e)return t;t+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let r=this.dom,i=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=i?i.nextSibling:r.firstChild)){let a=Jn.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,t),o.flags&=-8}if(s=i?i.nextSibling:r.firstChild,t&&!t.written&&t.node==r&&s!=o.dom&&(t.written=!0),o.dom.parentNode==r)for(;s&&s!=o.dom;)s=L7(s);else r.insertBefore(o.dom,s);i=o.dom}for(s=i?i.nextSibling:r.firstChild,s&&t&&t.node==r&&(t.written=!0);s;)s=L7(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,t),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let r;if(e==this.dom)r=this.dom.childNodes[t];else{let i=Iu(e)==0?0:t==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!Jn.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let o=this.children[i];if(o.dom==r)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,t,r=0){let i=-1,s=-1,o=-1,a=-1;for(let l=0,u=r,c=r;l<this.children.length;l++){let f=this.children[l],d=u+f.length;if(u<e&&d>t)return f.domBoundsAround(e,t,u);if(d>=e&&i==-1&&(i=l,s=u),u>t&&f.dom.parentNode==this.dom){o=l,a=c;break}c=d,u=d+f.breakAfter}return{from:s,to:a<0?r+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,r=fk){this.markDirty();for(let i=e;i<t;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}this.children.splice(e,t-e,...r);for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new TQ(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,r,i,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Jn.prototype.breakAfter=0;function L7(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class TQ{constructor(e,t,r){this.children=e,this.pos=t,this.i=r,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function DQ(n,e,t,r,i,s,o,a,l){let{children:u}=n,c=u.length?u[e]:null,f=s.length?s[s.length-1]:null,d=f?f.breakAfter:o;if(!(e==r&&c&&!o&&!d&&s.length<2&&c.merge(t,i,s.length?f:null,t==0,a,l))){if(r<u.length){let h=u[r];h&&(i<h.length||h.breakAfter&&(f!=null&&f.breakAfter))?(e==r&&(h=h.split(i),i=0),!d&&f&&h.merge(0,i,f,!0,0,l)?s[s.length-1]=h:((i||h.children.length&&!h.children[0].length)&&h.merge(0,i,null,!1,0,l),s.push(h))):h!=null&&h.breakAfter&&(f?f.breakAfter=1:o=1),r++}for(c&&(c.breakAfter=o,t>0&&(!o&&s.length&&c.merge(t,c.length,s[0],!1,a,0)?c.breakAfter=s.shift().breakAfter:(t<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(t,c.length,null,!1,a,0),e++));e<r&&s.length;)if(u[r-1].become(s[s.length-1]))r--,s.pop(),l=s.length?0:a;else if(u[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&r<u.length&&!u[e-1].breakAfter&&u[r].merge(0,0,u[e-1],!1,a,l)&&e--,(e<r||s.length)&&n.replaceChildren(e,r,s)}}function NQ(n,e,t,r,i,s){let o=n.childCursor(),{i:a,off:l}=o.findPos(t,1),{i:u,off:c}=o.findPos(e,-1),f=e-t;for(let d of r)f+=d.length;n.length+=f,DQ(n,u,c,a,l,r,0,i,s)}let Ws=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},EN=typeof document<"u"?document:{documentElement:{style:{}}};const MN=/Edge\/(\d+)/.exec(Ws.userAgent),PQ=/MSIE \d/.test(Ws.userAgent),CN=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ws.userAgent),_M=!!(PQ||CN||MN),F7=!_M&&/gecko\/(\d+)/i.test(Ws.userAgent),KA=!_M&&/Chrome\/(\d+)/.exec(Ws.userAgent),B7="webkitFontSmoothing"in EN.documentElement.style,RQ=!_M&&/Apple Computer/.test(Ws.vendor),z7=RQ&&(/Mobile\/\w+/.test(Ws.userAgent)||Ws.maxTouchPoints>2);var Nt={mac:z7||/Mac/.test(Ws.platform),windows:/Win/.test(Ws.platform),linux:/Linux|X11/.test(Ws.platform),ie:_M,ie_version:PQ?EN.documentMode||6:CN?+CN[1]:MN?+MN[1]:0,gecko:F7,gecko_version:F7?+(/Firefox\/(\d+)/.exec(Ws.userAgent)||[0,0])[1]:0,chrome:!!KA,chrome_version:KA?+KA[1]:0,ios:z7,android:/Android\b/.test(Ws.userAgent),webkit:B7,safari:RQ,webkit_version:B7?+(/\bAppleWebKit\/(\d+)/.exec(Ws.userAgent)||[0,0])[1]:0,tabSize:EN.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const NVe=256;class Fa extends Jn{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,r){return this.flags&8||r&&(!(r instanceof Fa)||this.length-(t-e)+r.length>NVe||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Fa(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new is(this.dom,e)}domBoundsAround(e,t,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return PVe(this.dom,e,t)}}class Lu extends Jn{constructor(e,t=[],r=0){super(),this.mark=e,this.children=t,this.length=r;for(let i of t)i.setParent(this)}setAttrs(e){if(EQ(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,r,i,s,o){return r&&(!(r instanceof Lu&&r.mark.eq(this.mark))||e&&s<=0||t<this.length&&o<=0)?!1:(NQ(this,e,t,r?r.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let t=[],r=0,i=-1,s=0;for(let a of this.children){let l=r+a.length;l>e&&t.push(r<e?a.split(e-r):a),i<0&&r>=e&&(i=s),r=l,s++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new Lu(this.mark,t,o)}domAtPos(e){return OQ(this,e)}coordsAt(e,t){return IQ(this,e,t)}}function PVe(n,e,t){let r=n.nodeValue.length;e>r&&(e=r);let i=e,s=e,o=0;e==0&&t<0||e==r&&t>=0?Nt.chrome||Nt.gecko||(e?(i--,o=1):s<r&&(s++,o=-1)):t<0?i--:s<r&&s++;let a=zd(n,i,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:t>=0)?0:a.length-1];return Nt.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,u=>u.width)||l),o?SM(l,o<0):l||null}class Ac extends Jn{static create(e,t,r){return new Ac(e,t,r)}constructor(e,t,r){super(),this.widget=e,this.length=t,this.side=r,this.prevWidget=null}split(e){let t=Ac.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,r,i,s,o){return r&&(!(r instanceof Ac)||!this.widget.compare(r.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}become(e){return e instanceof Ac&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Rn.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,r=t&&t.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):Rn.empty}domAtPos(e){return(this.length?e==0:this.side>0)?is.before(this.dom):is.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?i.length-1:0;s=i[a],!(e>0?a==0:a==i.length-1||s.top<s.bottom);a+=o?-1:1);return SM(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Sm extends Jn{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Sm&&e.side==this.side}split(){return new Sm(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?is.before(this.dom):is.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Rn.empty}get isHidden(){return!0}}Fa.prototype.children=Ac.prototype.children=Sm.prototype.children=fk;function OQ(n,e){let t=n.dom,{children:r}=n,i=0;for(let s=0;i<r.length;i++){let o=r[i],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==t)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=i;s>0;s--){let o=r[s-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let s=i;s<r.length;s++){let o=r[s];if(o.dom.parentNode==t)return o.domAtPos(0)}return new is(t,0)}function kQ(n,e,t){let r,{children:i}=n;t>0&&e instanceof Lu&&i.length&&(r=i[i.length-1])instanceof Lu&&r.mark.eq(e.mark)?kQ(r,e.children[0],t-1):(i.push(e),e.setParent(n)),n.length+=e.length}function IQ(n,e,t){let r=null,i=-1,s=null,o=-1;function a(u,c){for(let f=0,d=0;f<u.children.length&&d<=c;f++){let h=u.children[f],m=d+h.length;m>=c&&(h.children.length?a(h,c-d):(!s||s.isHidden&&t>0)&&(m>c||d==m&&h.getSide()>0)?(s=h,o=c-d):(d<c||d==m&&h.getSide()<0&&!h.isHidden)&&(r=h,i=c-d)),d=m}}a(n,e);let l=(t<0?r:s)||r||s;return l?l.coordsAt(Math.max(0,l==r?i:o),t):RVe(n)}function RVe(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=wm(e);return t[t.length-1]||null}function AN(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const U7=Object.create(null);function dk(n,e,t){if(n==e)return!0;n||(n=U7),e||(e=U7);let r=Object.keys(n),i=Object.keys(e);if(r.length-(t&&r.indexOf(t)>-1?1:0)!=i.length-(t&&i.indexOf(t)>-1?1:0))return!1;for(let s of r)if(s!=t&&(i.indexOf(s)==-1||n[s]!==e[s]))return!1;return!0}function TN(n,e,t){let r=!1;if(e)for(let i in e)t&&i in t||(r=!0,i=="style"?n.style.cssText="":n.removeAttribute(i));if(t)for(let i in t)e&&e[i]==t[i]||(r=!0,i=="style"?n.style.cssText=t[i]:n.setAttribute(i,t[i]));return r}function OVe(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let r=n.attributes[t];e[r.name]=r.value}return e}class ei extends Jn{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,r,i,s,o){if(r){if(!(r instanceof ei))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),NQ(this,e,t,r?r.children.slice():[],s,o),!0}split(e){let t=new ei;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:r,off:i}=this.childPos(e);i&&(t.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)t.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){dk(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){kQ(this,e,t)}addLineDeco(e){let t=e.spec.attributes,r=e.spec.class;t&&(this.attrs=AN(t,this.attrs||{})),r&&(this.attrs=AN({class:r},this.attrs||{}))}domAtPos(e){return OQ(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var r;this.dom?this.flags&4&&(EQ(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(TN(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let i=this.dom.lastChild;for(;i&&Jn.get(i)instanceof Lu;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=Jn.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!Nt.ios||!this.children.some(s=>s instanceof Fa))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let r of this.children){if(!(r instanceof Fa)||/[^ -~]/.test(r.text))return null;let i=wm(r.dom);if(i.length!=1)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let r=IQ(this,e,t);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let o=(s-i.textHeight)/2;return{top:r.top+o,bottom:r.bottom-o,left:r.left,right:r.left}}}return r}become(e){return!1}covers(){return!0}static find(e,t){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],o=i+s.length;if(o>=t){if(s instanceof ei)return s;if(o>t)break}i=o+s.breakAfter}return null}}class wu extends Jn{constructor(e,t,r){super(),this.widget=e,this.length=t,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,t,r,i,s,o){return r&&(!(r instanceof wu)||!this.widget.compare(r.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?is.before(this.dom):is.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let r=new wu(this.widget,t,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return fk}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Rn.empty}domBoundsAround(){return null}become(e){return e instanceof wu&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){return this.widget.coordsAt(this.dom,e,t)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:r}=this.deco;return t==r?!1:e<0?t<0:r>0}}class Hu{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Ts=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(Ts||(Ts={}));class Ut extends Fd{constructor(e,t,r,i){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Gy(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return t+=r&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new of(e,t,t,r,e.widget||null,!1)}static replace(e){let t=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:o}=LQ(e,t);r=(s?t?-3e8:-1:5e8)-1,i=(o?t?2e8:1:-6e8)+1}return new of(e,r,i,t,e.widget||null,!0)}static line(e){return new qy(e)}static set(e,t=!1){return An.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Ut.none=An.empty;class Gy extends Ut{constructor(e){let{start:t,end:r}=LQ(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,r;return this==e||e instanceof Gy&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&dk(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Gy.prototype.point=!1;class qy extends Ut{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof qy&&this.spec.class==e.spec.class&&dk(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}qy.prototype.mapMode=Es.TrackBefore;qy.prototype.point=!0;class of extends Ut{constructor(e,t,r,i,s,o){super(t,r,s,e),this.block=i,this.isReplace=o,this.mapMode=i?t<=0?Es.TrackBefore:Es.TrackAfter:Es.TrackDel}get type(){return this.startSide!=this.endSide?Ts.WidgetRange:this.startSide<=0?Ts.WidgetBefore:Ts.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof of&&kVe(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}of.prototype.point=!0;function LQ(n,e=!1){let{inclusiveStart:t,inclusiveEnd:r}=n;return t==null&&(t=n.inclusive),r==null&&(r=n.inclusive),{start:t??e,end:r??e}}function kVe(n,e){return n==e||!!(n&&e&&n.compare(e))}function DN(n,e,t,r=0){let i=t.length-1;i>=0&&t[i]+r>=n?t[i]=Math.max(t[i],e):t.push(n,e)}class Wv{constructor(e,t,r,i){this.doc=e,this.pos=t,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof wu&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new ei),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Xb(new Sm(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof wu)&&this.getLine()}buildText(e,t,r){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-r)),this.getLine().append(Xb(new Fa(this.text.slice(this.textOff,this.textOff+i)),t),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,t,r,i){this.buildText(t-e,r,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,r,i,s,o){if(this.disallowBlockEffectsFor[o]&&r instanceof of){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=t-e;if(r instanceof of)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new wu(r.widget||_m.block,a,r));else{let l=Ac.create(r.widget||_m.inline,a,a?0:r.startSide),u=this.atCursorPos&&!l.isEditable&&s<=i.length&&(e<t||r.startSide>0),c=!l.isEditable&&(e<t||s>i.length||r.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!u&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(f.append(Xb(new Sm(1),i),s),s=i.length+Math.max(0,s-i.length)),f.append(Xb(l,i),s),this.atCursorPos=c,this.pendingBuffer=c?e<t||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,r,i,s){let o=new Wv(e,t,r,s);return o.openEnd=An.spans(i,t,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Xb(n,e){for(let t of e)n=new Lu(t,[n],n.length);return n}class _m extends Hu{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}_m.inline=new _m("span");_m.block=new _m("div");var cr=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(cr||(cr={}));const Ud=cr.LTR,hk=cr.RTL;function FQ(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const IVe=FQ("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),LVe=FQ("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),NN=Object.create(null),ol=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);NN[e]=t,NN[t]=-e}function BQ(n){return n<=247?IVe[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?LVe[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const FVe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Tc{get dir(){return this.level%2?hk:Ud}constructor(e,t,r){this.from=e,this.to=t,this.level=r}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,r,i){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=t&&a.to>=t){if(a.level==r)return o;(s<0||(i!=0?i<0?a.from<t:a.to>t:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function zQ(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let r=n[t],i=e[t];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!zQ(r.inner,i.inner))return!1}return!0}const Zn=[];function BVe(n,e,t,r,i){for(let s=0;s<=r.length;s++){let o=s?r[s-1].to:e,a=s<r.length?r[s].from:t,l=s?256:i;for(let u=o,c=l,f=l;u<a;u++){let d=BQ(n.charCodeAt(u));d==512?d=c:d==8&&f==4&&(d=16),Zn[u]=d==4?2:d,d&7&&(f=d),c=d}for(let u=o,c=l,f=l;u<a;u++){let d=Zn[u];if(d==128)u<a-1&&c==Zn[u+1]&&c&24?d=Zn[u]=c:Zn[u]=256;else if(d==64){let h=u+1;for(;h<a&&Zn[h]==64;)h++;let m=u&&c==8||h<t&&Zn[h]==8?f==1?1:8:256;for(let v=u;v<h;v++)Zn[v]=m;u=h-1}else d==8&&f==1&&(Zn[u]=1);c=d,d&7&&(f=d)}}}function zVe(n,e,t,r,i){let s=i==1?2:1;for(let o=0,a=0,l=0;o<=r.length;o++){let u=o?r[o-1].to:e,c=o<r.length?r[o].from:t;for(let f=u,d,h,m;f<c;f++)if(h=NN[d=n.charCodeAt(f)])if(h<0){for(let v=a-3;v>=0;v-=3)if(ol[v+1]==-h){let y=ol[v+2],p=y&2?i:y&4?y&1?s:i:0;p&&(Zn[f]=Zn[ol[v]]=p),a=v;break}}else{if(ol.length==189)break;ol[a++]=f,ol[a++]=d,ol[a++]=l}else if((m=Zn[f])==2||m==1){let v=m==i;l=v?0:1;for(let y=a-3;y>=0;y-=3){let p=ol[y+2];if(p&2)break;if(v)ol[y+2]|=2;else{if(p&4)break;ol[y+2]|=4}}}}}function UVe(n,e,t,r){for(let i=0,s=r;i<=t.length;i++){let o=i?t[i-1].to:n,a=i<t.length?t[i].from:e;for(let l=o;l<a;){let u=Zn[l];if(u==256){let c=l+1;for(;;)if(c==a){if(i==t.length)break;c=t[i++].to,a=i<t.length?t[i].from:e}else if(Zn[c]==256)c++;else break;let f=s==1,d=(c<e?Zn[c]:r)==1,h=f==d?f?1:2:r;for(let m=c,v=i,y=v?t[v-1].to:n;m>l;)m==y&&(m=t[--v].from,y=v?t[v-1].to:n),Zn[--m]=h;l=c}else s=u,l++}}}function PN(n,e,t,r,i,s,o){let a=r%2?2:1;if(r%2==i%2)for(let l=e,u=0;l<t;){let c=!0,f=!1;if(u==s.length||l<s[u].from){let v=Zn[l];v!=a&&(c=!1,f=v==16)}let d=!c&&a==1?[]:null,h=c?r:r+1,m=l;e:for(;;)if(u<s.length&&m==s[u].from){if(f)break e;let v=s[u];if(!c)for(let y=v.to,p=u+1;;){if(y==t)break e;if(p<s.length&&s[p].from==y)y=s[p++].to;else{if(Zn[y]==a)break e;break}}if(u++,d)d.push(v);else{v.from>l&&o.push(new Tc(l,v.from,h));let y=v.direction==Ud!=!(h%2);RN(n,y?r+1:r,i,v.inner,v.from,v.to,o),l=v.to}m=v.to}else{if(m==t||(c?Zn[m]!=a:Zn[m]==a))break;m++}d?PN(n,l,m,r+1,i,d,o):l<m&&o.push(new Tc(l,m,h)),l=m}else for(let l=t,u=s.length;l>e;){let c=!0,f=!1;if(!u||l>s[u-1].to){let v=Zn[l-1];v!=a&&(c=!1,f=v==16)}let d=!c&&a==1?[]:null,h=c?r:r+1,m=l;e:for(;;)if(u&&m==s[u-1].to){if(f)break e;let v=s[--u];if(!c)for(let y=v.from,p=u;;){if(y==e)break e;if(p&&s[p-1].to==y)y=s[--p].from;else{if(Zn[y-1]==a)break e;break}}if(d)d.push(v);else{v.to<l&&o.push(new Tc(v.to,l,h));let y=v.direction==Ud!=!(h%2);RN(n,y?r+1:r,i,v.inner,v.from,v.to,o),l=v.from}m=v.from}else{if(m==e||(c?Zn[m-1]!=a:Zn[m-1]==a))break;m--}d?PN(n,m,l,r+1,i,d,o):m<l&&o.push(new Tc(m,l,h)),l=m}}function RN(n,e,t,r,i,s,o){let a=e%2?2:1;BVe(n,i,s,r,a),zVe(n,i,s,r,a),UVe(i,s,r,a),PN(n,i,s,e,t,r,o)}function $Ve(n,e,t){if(!n)return[new Tc(0,0,e==hk?1:0)];if(e==Ud&&!t.length&&!FVe.test(n))return UQ(n.length);if(t.length)for(;n.length>Zn.length;)Zn[Zn.length]=256;let r=[],i=e==Ud?0:1;return RN(n,i,i,t,0,n.length,r),r}function UQ(n){return[new Tc(0,n,0)]}let $Q="";function VVe(n,e,t,r,i){var s;let o=r.head-n.from,a=Tc.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),l=e[a],u=l.side(i,t);if(o==u){let d=a+=i?1:-1;if(d<0||d>=e.length)return null;l=e[a=d],o=l.side(!i,t),u=l.side(i,t)}let c=Fi(n.text,o,l.forward(i,t));(c<l.from||c>l.to)&&(c=u),$Q=n.text.slice(Math.min(o,c),Math.max(o,c));let f=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return f&&c==u&&f.level+(i?0:1)<l.level?it.cursor(f.side(!i,t)+n.from,f.forward(i,t)?1:-1,f.level):it.cursor(c+n.from,l.forward(i,t)?-1:1,l.level)}function HVe(n,e,t){for(let r=e;r<t;r++){let i=BQ(n.charCodeAt(r));if(i==1)return Ud;if(i==2||i==4)return hk}return Ud}const VQ=Rt.define(),HQ=Rt.define(),WQ=Rt.define(),jQ=Rt.define(),ON=Rt.define(),GQ=Rt.define(),qQ=Rt.define(),XQ=Rt.define({combine:n=>n.some(e=>e)}),YQ=Rt.define({combine:n=>n.some(e=>e)}),KQ=Rt.define();class Kp{constructor(e,t="nearest",r="nearest",i=5,s=5,o=!1){this.range=e,this.y=t,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new Kp(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Kp(it.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Yb=dn.define({map:(n,e)=>n.map(e)}),ZQ=dn.define();function Xs(n,e,t){let r=n.facet(jQ);r.length?r[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const EM=Rt.define({combine:n=>n.length?n[0]:!0});let WVe=0;const vv=Rt.define();class Hr{constructor(e,t,r,i,s){this.id=e,this.create=t,this.domEventHandlers=r,this.domEventObservers=i,this.extension=s(this)}static define(e,t){const{eventHandlers:r,eventObservers:i,provide:s,decorations:o}=t||{};return new Hr(WVe++,e,r,i,a=>{let l=[vv.of(a)];return o&&l.push(ny.of(u=>{let c=u.plugin(a);return c?o(c):Ut.none})),s&&l.push(s(a)),l})}static fromClass(e,t){return Hr.define(r=>new e(r),t)}}class ZA{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(r){if(Xs(t.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Xs(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(r){Xs(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const JQ=Rt.define(),pk=Rt.define(),ny=Rt.define(),QQ=Rt.define(),mk=Rt.define(),eee=Rt.define();function $7(n,e){let t=n.state.facet(eee);if(!t.length)return t;let r=t.map(s=>s instanceof Function?s(n):s),i=[];return An.spans(r,e.from,e.to,{point(){},span(s,o,a,l){let u=s-e.from,c=o-e.from,f=i;for(let d=a.length-1;d>=0;d--,l--){let h=a[d].spec.bidiIsolate,m;if(h==null&&(h=HVe(e.text,u,c)),l>0&&f.length&&(m=f[f.length-1]).to==u&&m.direction==h)m.to=c,f=m.inner;else{let v={from:u,to:c,direction:h,inner:[]};f.push(v),f=v.inner}}}}),i}const tee=Rt.define();function nee(n){let e=0,t=0,r=0,i=0;for(let s of n.state.facet(tee)){let o=s(n);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:t,top:r,bottom:i}}const yv=Rt.define();class ra{constructor(e,t,r,i){this.fromA=e,this.toA=t,this.fromB=r,this.toB=i}join(e){return new ra(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(t.length==0)return e;let r=[];for(let i=0,s=0,o=0,a=0;;i++){let l=i==e.length?null:e[i],u=o-a,c=l?l.fromB:1e9;for(;s<t.length&&t[s]<c;){let f=t[s],d=t[s+1],h=Math.max(a,f),m=Math.min(c,d);if(h<=m&&new ra(h+u,m+u,h,m).addToSet(r),d>c)break;s+=2}if(!l)return r;new ra(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),o=l.toA,a=l.toB}}}class T_{constructor(e,t,r){this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=ii.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,o,a,l)=>i.push(new ra(s,o,a,l))),this.changedRanges=i}static create(e,t,r){return new T_(e,t,r)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class V7 extends Jn{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Ut.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new ei],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ra(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?i=this.domChanged.newSel.head:!ZVe(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?GVe(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:c}=this.hasComposition;r=new ra(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(Nt.ie||Nt.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=YVe(o,a,e.changes);return r=ra.extendWithRanges(r,l),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Nt.chrome||Nt.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof wu&&o.widget instanceof H7&&s.push(o.dom);i.updateGaps(s)}updateChildren(e,t,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(t);for(let o=i.length-1;;o--){let a=o>=0?i[o]:null;if(!a)break;let{fromA:l,toA:u,fromB:c,toB:f}=a,d,h,m,v;if(r&&r.range.fromB<f&&r.range.toB>c){let g=Wv.build(this.view.state.doc,c,r.range.fromB,this.decorations,this.dynamicDecorationMap),w=Wv.build(this.view.state.doc,r.range.toB,f,this.decorations,this.dynamicDecorationMap);h=g.breakAtStart,m=g.openStart,v=w.openEnd;let x=this.compositionView(r);w.breakAtStart?x.breakAfter=1:w.content.length&&x.merge(x.length,x.length,w.content[0],!1,w.openStart,0)&&(x.breakAfter=w.content[0].breakAfter,w.content.shift()),g.content.length&&x.merge(0,0,g.content[g.content.length-1],!0,0,g.openEnd)&&g.content.pop(),d=g.content.concat(x).concat(w.content)}else({content:d,breakAtStart:h,openStart:m,openEnd:v}=Wv.build(this.view.state.doc,c,f,this.decorations,this.dynamicDecorationMap));let{i:y,off:p}=s.findPos(u,1),{i:S,off:b}=s.findPos(l,-1);DQ(this,S,b,y,p,d,h,m,v)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let r of t.effects)r.is(ZQ)&&(this.editContextFormatting=r.value)}compositionView(e){let t=new Fa(e.text.nodeValue);t.flags|=8;for(let{deco:i}of e.marks)t=new Lu(i,[t],t.length);let r=new ei;return r.append(t,0),r}fixCompositionDOM(e){let t=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=Jn.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];t(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],t(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&jw(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||t||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),u=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(Nt.gecko&&a.empty&&!this.hasComposition&&jVe(l)){let f=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(f,l.node.childNodes[l.offset]||null)),l=u=new is(f,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||(!Hv(l.node,l.offset,c.anchorNode,c.anchorOffset)||!Hv(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,a))&&(this.view.observer.ignore(()=>{Nt.android&&Nt.chrome&&this.dom.contains(c.focusNode)&&KVe(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=ty(this.view.root);if(f)if(a.empty){if(Nt.gecko){let d=qVe(l.node,l.offset);if(d&&d!=3){let h=(d==1?CQ:AQ)(l.node,l.offset);h&&(l=new is(h.node,h.offset))}}f.collapse(l.node,l.offset),a.bidiLevel!=null&&f.caretBidiLevel!==void 0&&(f.caretBidiLevel=a.bidiLevel)}else if(f.extend){f.collapse(l.node,l.offset);try{f.extend(u.node,u.offset)}catch{}}else{let d=document.createRange();a.anchor>a.head&&([l,u]=[u,l]),d.setEnd(u.node,u.offset),d.setStart(l.node,l.offset),f.removeAllRanges(),f.addRange(d)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(l,u)),this.impreciseAnchor=l.precise?null:new is(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new is(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Hv(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,r=ty(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!t.empty||!t.assoc||!r.modify)return;let o=ei.find(this,t.head);if(!o)return;let a=o.posAtStart;if(t.head==a||t.head==a+o.length)return;let l=this.coordsAt(t.head,-1),u=this.coordsAt(t.head,1);if(!l||!u||l.bottom>u.top)return;let c=this.domAtPos(t.head+t.assoc);r.collapse(c.node,c.offset),r.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=t.from&&r.collapse(i,s)}moveToLine(e){let t=this.dom,r;if(e.node!=t)return e;for(let i=e.offset;!r&&i<t.childNodes.length;i++){let s=Jn.get(t.childNodes[i]);s instanceof ei&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=Jn.get(t.childNodes[i]);s instanceof ei&&(r=s.domAtPos(s.length))}return r?new is(r.node,r.offset,!0):e}nearest(e){for(let t=e;t;){let r=Jn.get(t);if(r&&r.rootView==this)return r;t=t.parentNode}return null}posFromDOM(e,t){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,t)+r.posAtStart}domAtPos(e){let{i:t,off:r}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let i=this.children[t];if(r<i.length||i instanceof ei)break;t++,r=0}return this.children[t].domAtPos(r)}coordsAt(e,t){let r=null,i=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,u=l-a.length;if(l<e)break;if(u<=e&&(u<e||a.covers(-1))&&(l>e||a.covers(1))&&(!r||a instanceof ei&&!(r instanceof ei&&t>=0)))r=a,i=u;else if(r&&u==e&&l==e&&a instanceof wu&&Math.abs(t)<2){if(a.deco.startSide<0)break;o&&(r=null)}s=u}return r?r.coordsAt(e-i,t):null}coordsForChar(e){let{i:t,off:r}=this.childPos(e,1),i=this.children[t];if(!(i instanceof ei))return null;for(;i.children.length;){let{i:a,off:l}=i.childPos(r,1);for(;;a++){if(a==i.children.length)return null;if((i=i.children[a]).length)break}r=l}if(!(i instanceof Fa))return null;let s=Fi(i.text,r);if(s==r)return null;let o=zd(i.dom,r,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let t=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==cr.LTR;for(let u=0,c=0;c<this.children.length;c++){let f=this.children[c],d=u+f.length;if(d>i)break;if(u>=r){let h=f.dom.getBoundingClientRect();if(t.push(h.height),o){let m=f.dom.lastChild,v=m?wm(m):[];if(v.length){let y=v[v.length-1],p=l?y.right-h.left:h.right-y.left;p>a&&(a=p,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=d)}}}u=d+f.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?cr.RTL:cr.LTR}measureTextSize(){for(let s of this.children)if(s instanceof ei){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),t,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=wm(e.firstChild)[0];t=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:t,e.remove()}),{lineHeight:t,charWidth:r,textHeight:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new TQ(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,i=0;;i++){let s=i==t.viewports.length?null:t.viewports[i],o=s?s.from-1:this.length;if(o>r){let a=(t.lineBlockAt(o).bottom-t.lineBlockAt(r).top)/this.view.scaleY;e.push(Ut.replace({widget:new H7(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return Ut.set(e)}updateDeco(){let e=1,t=this.view.state.facet(ny).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet(QQ).map((s,o)=>{let a=typeof s=="function";return a&&(r=!0),a?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,t.push(An.join(i))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(KQ))try{if(u(this.view,e.range,e))return!0}catch(c){Xs(this.view.state,c,"scroll handler")}let{range:t}=e,r=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),i;if(!r)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=nee(this.view),o={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;MVe(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==cr.LTR)}}function jVe(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}class H7 extends Hu{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function ree(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let r=CQ(t.focusNode,t.focusOffset),i=AQ(t.focusNode,t.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let a=Jn.get(i.node);if(!a||a instanceof Fa&&a.text!=i.node.nodeValue)s=i;else if(n.docView.lastCompositionAfterCursor){let l=Jn.get(r.node);!l||l instanceof Fa&&l.text!=r.node.nodeValue||(s=i)}}if(n.docView.lastCompositionAfterCursor=s!=r,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function GVe(n,e,t){let r=ree(n,t);if(!r)return null;let{node:i,from:s,to:o}=r,a=i.nodeValue;if(/[\n\r]/.test(a)||n.state.doc.sliceString(r.from,r.to)!=a)return null;let l=e.invertedDesc,u=new ra(l.mapPos(s),l.mapPos(o),s,o),c=[];for(let f=i.parentNode;;f=f.parentNode){let d=Jn.get(f);if(d instanceof Lu)c.push({node:f,deco:d.mark});else{if(d instanceof ei||f.nodeName=="DIV"&&f.parentNode==n.contentDOM)return{range:u,text:i,marks:c,line:f};if(f!=n.contentDOM)c.push({node:f,deco:new Gy({inclusive:!0,attributes:OVe(f),tagName:f.tagName.toLowerCase()})});else return null}}}function qVe(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let XVe=class{constructor(){this.changes=[]}compareRange(e,t){DN(e,t,this.changes)}comparePoint(e,t){DN(e,t,this.changes)}};function YVe(n,e,t){let r=new XVe;return An.compare(n,e,t,r),r.changes}function KVe(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function ZVe(n,e){let t=!1;return e&&n.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(t=!0)}),t}function JVe(n,e,t=1){let r=n.charCategorizer(e),i=n.doc.lineAt(e),s=e-i.from;if(i.length==0)return it.cursor(e);s==0?t=1:s==i.length&&(t=-1);let o=s,a=s;t<0?o=Fi(i.text,s,!1):a=Fi(i.text,s);let l=r(i.text.slice(o,a));for(;o>0;){let u=Fi(i.text,o,!1);if(r(i.text.slice(u,o))!=l)break;o=u}for(;a<i.length;){let u=Fi(i.text,a);if(r(i.text.slice(a,u))!=l)break;a=u}return it.range(o+i.from,a+i.from)}function QVe(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function eHe(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function JA(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function W7(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function j7(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function kN(n,e,t){let r,i,s,o,a=!1,l,u,c,f;for(let m=n.firstChild;m;m=m.nextSibling){let v=wm(m);for(let y=0;y<v.length;y++){let p=v[y];i&&JA(i,p)&&(p=W7(j7(p,i.bottom),i.top));let S=QVe(e,p),b=eHe(t,p);if(S==0&&b==0)return m.nodeType==3?G7(m,e,t):kN(m,e,t);if(!r||o>b||o==b&&s>S){r=m,i=p,s=S,o=b;let g=b?t<p.top?-1:1:S?e<p.left?-1:1:0;a=!g||(g>0?y<v.length-1:y>0)}S==0?t>p.bottom&&(!c||c.bottom<p.bottom)?(l=m,c=p):t<p.top&&(!f||f.top>p.top)&&(u=m,f=p):c&&JA(c,p)?c=j7(c,p.bottom):f&&JA(f,p)&&(f=W7(f,p.top))}}if(c&&c.bottom>=t?(r=l,i=c):f&&f.top<=t&&(r=u,i=f),!r)return{node:n,offset:0};let d=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return G7(r,d,t);if(a&&r.contentEditable!="false")return kN(r,d,t);let h=Array.prototype.indexOf.call(n.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:n,offset:h}}function G7(n,e,t){let r=n.nodeValue.length,i=-1,s=1e9,o=0;for(let a=0;a<r;a++){let l=zd(n,a,a+1).getClientRects();for(let u=0;u<l.length;u++){let c=l[u];if(c.top==c.bottom)continue;o||(o=e-c.left);let f=(c.top>t?c.top-t:t-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&f<s){let d=e>=(c.left+c.right)/2,h=d;if((Nt.chrome||Nt.gecko)&&zd(n,a).getBoundingClientRect().left==c.right&&(h=!d),f<=0)return{node:n,offset:a+(h?1:0)};i=a+(h?1:0),s=f}}}return{node:n,offset:i>-1?i:o>0?n.nodeValue.length:0}}function iee(n,e,t,r=-1){var i,s;let o=n.contentDOM.getBoundingClientRect(),a=o.top+n.viewState.paddingTop,l,{docHeight:u}=n.viewState,{x:c,y:f}=e,d=f-a;if(d<0)return 0;if(d>u)return n.state.doc.length;for(let g=n.viewState.heightOracle.textHeight/2,w=!1;l=n.elementAtHeight(d),l.type!=Ts.Text;)for(;d=r>0?l.bottom+g:l.top-g,!(d>=0&&d<=u);){if(w)return t?null:0;w=!0,r=-r}f=a+d;let h=l.from;if(h<n.viewport.from)return n.viewport.from==0?0:t?null:q7(n,o,l,c,f);if(h>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:q7(n,o,l,c,f);let m=n.dom.ownerDocument,v=n.root.elementFromPoint?n.root:m,y=v.elementFromPoint(c,f);y&&!n.contentDOM.contains(y)&&(y=null),y||(c=Math.max(o.left+1,Math.min(o.right-1,c)),y=v.elementFromPoint(c,f),y&&!n.contentDOM.contains(y)&&(y=null));let p,S=-1;if(y&&((i=n.docView.nearest(y))===null||i===void 0?void 0:i.isEditable)!=!1){if(m.caretPositionFromPoint){let g=m.caretPositionFromPoint(c,f);g&&({offsetNode:p,offset:S}=g)}else if(m.caretRangeFromPoint){let g=m.caretRangeFromPoint(c,f);g&&({startContainer:p,startOffset:S}=g,(!n.contentDOM.contains(p)||Nt.safari&&tHe(p,S,c)||Nt.chrome&&nHe(p,S,c))&&(p=void 0))}}if(!p||!n.docView.dom.contains(p)){let g=ei.find(n.docView,h);if(!g)return d>l.top+l.height/2?l.to:l.from;({node:p,offset:S}=kN(g.dom,c,f))}let b=n.docView.nearest(p);if(!b)return null;if(b.isWidget&&((s=b.dom)===null||s===void 0?void 0:s.nodeType)==1){let g=b.dom.getBoundingClientRect();return e.y<g.top||e.y<=g.bottom&&e.x<=(g.left+g.right)/2?b.posAtStart:b.posAtEnd}else return b.localPosFromDOM(p,S)+b.posAtStart}function q7(n,e,t,r,i){let s=Math.round((r-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let a=n.viewState.heightOracle.textHeight,l=Math.floor((i-t.top-(n.defaultLineHeight-a)*.5)/a);s+=l*n.viewState.heightOracle.lineLength}let o=n.state.sliceDoc(t.from,t.to);return t.from+bN(o,s,n.state.tabSize)}function tHe(n,e,t){let r;if(n.nodeType!=3||e!=(r=n.nodeValue.length))return!1;for(let i=n.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return zd(n,r-1,r).getBoundingClientRect().left>t}function nHe(n,e,t){if(e!=0)return!1;for(let i=n;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=n.nodeType==1?n.getBoundingClientRect():zd(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-r.left>5}function IN(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type)){for(let r of t.type)if(r.to>e||r.to==e&&(r.to==t.to||r.type==Ts.Text))return r}return t}function rHe(n,e,t,r){let i=IN(n,e.head),s=!r||i.type!=Ts.Text||!(n.lineWrapping||i.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let o=n.dom.getBoundingClientRect(),a=n.textDirectionAt(i.from),l=n.posAtCoords({x:t==(a==cr.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return it.cursor(l,t?-1:1)}return it.cursor(t?i.to:i.from,t?-1:1)}function X7(n,e,t,r){let i=n.state.doc.lineAt(e.head),s=n.bidiSpans(i),o=n.textDirectionAt(i.from);for(let a=e,l=null;;){let u=VVe(i,s,o,a,t),c=$Q;if(!u){if(i.number==(t?n.state.doc.lines:1))return a;c=`
`,i=n.state.doc.line(i.number+(t?1:-1)),s=n.bidiSpans(i),u=n.visualLineSide(i,!t)}if(l){if(!l(c))return a}else{if(!r)return u;l=r(c)}a=u}}function iHe(n,e,t){let r=n.state.charCategorizer(e),i=r(t);return s=>{let o=r(s);return i==gr.Space&&(i=o),i==o}}function sHe(n,e,t,r){let i=e.head,s=t?1:-1;if(i==(t?n.state.doc.length:0))return it.cursor(i,e.assoc);let o=e.goalColumn,a,l=n.contentDOM.getBoundingClientRect(),u=n.coordsAtPos(i,e.assoc||-1),c=n.documentTop;if(u)o==null&&(o=u.left-l.left),a=s<0?u.top:u.bottom;else{let h=n.viewState.lineBlockAt(i);o==null&&(o=Math.min(l.right-l.left,n.defaultCharacterWidth*(i-h.from))),a=(s<0?h.top:h.bottom)+c}let f=l.left+o,d=r??n.viewState.heightOracle.textHeight>>1;for(let h=0;;h+=10){let m=a+(d+h)*s,v=iee(n,{x:f,y:m},!1,s);if(m<l.top||m>l.bottom||(s<0?v<i:v>i)){let y=n.docView.coordsForChar(v),p=!y||m<y.top?-1:1;return it.cursor(v,p,void 0,o)}}}function Gw(n,e,t){for(;;){let r=0;for(let i of n)i.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=r||t||(e-s<o-e?-1:1);e=l<0?s:o,r=l}});if(!r)return e}}function QA(n,e,t){let r=Gw(n.state.facet(mk).map(i=>i(n)),t.from,e.head>t.from?-1:1);return r==t.from?t:it.cursor(r,r<t.from?1:-1)}class oHe{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Nt.safari&&e.contentDOM.addEventListener("input",()=>null),Nt.gecko&&SHe(e.contentDOM.ownerDocument)}handleEvent(e){!pHe(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,t){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,t);for(let i of r.handlers){if(t.defaultPrevented)break;if(i(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=aHe(e),r=this.handlers,i=this.view.contentDOM;for(let s in t)if(s!="scroll"){let o=!t[s].handlers.length,a=r[s];a&&o!=!a.handlers.length&&(i.removeEventListener(s,this.handleEvent),a=null),a||i.addEventListener(s,this.handleEvent,{passive:o})}for(let s in r)s!="scroll"&&!t[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&oee.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Nt.android&&Nt.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return Nt.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=see.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||lHe.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Yp(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Nt.safari&&!Nt.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Y7(n,e){return(t,r)=>{try{return e.call(n,r,t)}catch(i){Xs(t.state,i)}}}function aHe(n){let e=Object.create(null);function t(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of n){let i=r.spec;if(i&&i.domEventHandlers)for(let s in i.domEventHandlers){let o=i.domEventHandlers[s];o&&t(s).handlers.push(Y7(r.value,o))}if(i&&i.domEventObservers)for(let s in i.domEventObservers){let o=i.domEventObservers[s];o&&t(s).observers.push(Y7(r.value,o))}}for(let r in Ba)t(r).handlers.push(Ba[r]);for(let r in ua)t(r).observers.push(ua[r]);return e}const see=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],lHe="dthko",oee=[16,17,18,20,91,92,224,225],Kb=6;function Zb(n){return Math.max(0,n)*.7+8}function uHe(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class cHe{constructor(e,t,r,i){this.view=e,this.startEvent=t,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParent=CVe(e.contentDOM),this.atoms=e.state.facet(mk).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(bn.allowMultipleSelections)&&fHe(e,t),this.dragging=hHe(e,t)&&cee(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){var t;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&uHe(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let r=0,i=0,s=((t=this.scrollParent)===null||t===void 0?void 0:t.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},o=nee(this.view);e.clientX-o.left<=s.left+Kb?r=-Zb(s.left-e.clientX):e.clientX+o.right>=s.right-Kb&&(r=Zb(e.clientX-s.right)),e.clientY-o.top<=s.top+Kb?i=-Zb(s.top-e.clientY):e.clientY+o.bottom>=s.bottom-Kb&&(i=Zb(e.clientY-s.bottom)),this.setScrollSpeed(r,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let o=Gw(this.atoms,i.from,0);o!=i.from&&(s=it.cursor(o,-1))}else{let o=Gw(this.atoms,i.from,-1),a=Gw(this.atoms,i.to,1);(o!=i.from||a!=i.to)&&(s=it.range(i.from==i.anchor?o:a,i.from==i.head?o:a))}s&&(t||(t=e.ranges.slice()),t[r]=s)}return t?it.create(t,e.mainIndex):e}select(e){let{view:t}=this,r=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function fHe(n,e){let t=n.state.facet(VQ);return t.length?t[0](e):Nt.mac?e.metaKey:e.ctrlKey}function dHe(n,e){let t=n.state.facet(HQ);return t.length?t[0](e):Nt.mac?!e.altKey:!e.ctrlKey}function hHe(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let r=ty(n.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function pHe(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,r;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(r=Jn.get(t))&&r.ignoreEvent(e))return!1;return!0}const Ba=Object.create(null),ua=Object.create(null),aee=Nt.ie&&Nt.ie_version<15||Nt.ios&&Nt.webkit_version<604;function mHe(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),lee(n,t.value)},50)}function lee(n,e){let{state:t}=n,r,i=1,s=t.toText(e),o=s.lines==t.selection.ranges.length;if(LN!=null&&t.selection.ranges.every(l=>l.empty)&&LN==s.toString()){let l=-1;r=t.changeByRange(u=>{let c=t.doc.lineAt(u.from);if(c.from==l)return{range:u};l=c.from;let f=t.toText((o?s.line(i++).text:e)+t.lineBreak);return{changes:{from:c.from,insert:f},range:it.cursor(u.from+f.length)}})}else o?r=t.changeByRange(l=>{let u=s.line(i++);return{changes:{from:l.from,to:l.to,insert:u.text},range:it.cursor(l.from+u.length)}}):r=t.replaceSelection(s);n.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}ua.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};Ba.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);ua.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};ua.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Ba.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let r of n.state.facet(WQ))if(t=r(n,e),t)break;if(!t&&e.button==0&&(t=yHe(n,e)),t){let r=!n.hasFocus;n.inputState.startMouseSelection(new cHe(n,e,t,r)),r&&n.observer.ignore(()=>{_Q(n.contentDOM);let s=n.root.activeElement;s&&!s.contains(n.contentDOM)&&s.blur()});let i=n.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}return!1};function K7(n,e,t,r){if(r==1)return it.cursor(e,t);if(r==2)return JVe(n.state,e,t);{let i=ei.find(n.docView,e),s=n.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:s.from,a=i?i.posAtEnd:s.to;return a<n.state.doc.length&&a==s.to&&a++,it.range(o,a)}}let uee=(n,e)=>n>=e.top&&n<=e.bottom,Z7=(n,e,t)=>uee(e,t)&&n>=t.left&&n<=t.right;function gHe(n,e,t,r){let i=ei.find(n.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let o=i.coordsAt(s,-1);if(o&&Z7(t,r,o))return-1;let a=i.coordsAt(s,1);return a&&Z7(t,r,a)?1:o&&uee(r,o)?-1:1}function J7(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:gHe(n,t,e.clientX,e.clientY)}}const vHe=Nt.ie&&Nt.ie_version<=11;let Q7=null,e$=0,t$=0;function cee(n){if(!vHe)return n.detail;let e=Q7,t=t$;return Q7=n,t$=Date.now(),e$=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(e$+1)%3:1}function yHe(n,e){let t=J7(n,e),r=cee(e),i=n.state.selection;return{update(s){s.docChanged&&(t.pos=s.changes.mapPos(t.pos),i=i.map(s.changes))},get(s,o,a){let l=J7(n,s),u,c=K7(n,l.pos,l.bias,r);if(t.pos!=l.pos&&!o){let f=K7(n,t.pos,t.bias,r),d=Math.min(f.from,c.from),h=Math.max(f.to,c.to);c=d<c.from?it.range(d,h):it.range(h,d)}return o?i.replaceRange(i.main.extend(c.from,c.to)):a&&r==1&&i.ranges.length>1&&(u=xHe(i,l.pos))?u:a?i.addRange(c):it.create([c])}}}function xHe(n,e){for(let t=0;t<n.ranges.length;t++){let{from:r,to:i}=n.ranges[t];if(r<=e&&i>=e)return it.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}Ba.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let i=n.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,o=s+i.length;(s>=t.to||o<=t.from)&&(t=it.range(s,o))}}let{inputState:r}=n;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",n.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove"),!1};Ba.dragend=n=>(n.inputState.draggedContent=null,!1);function n$(n,e,t,r){if(!t)return;let i=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=n.inputState,o=r&&s&&dHe(n,e)?{from:s.from,to:s.to}:null,a={from:i,insert:t},l=n.state.changes(o?[o,a]:a);n.focus(),n.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),n.inputState.draggedContent=null}Ba.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let r=Array(t.length),i=0,s=()=>{++i==t.length&&n$(n,e,r.filter(o=>o!=null).join(n.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[o]=a.result),s()},a.readAsText(t[o])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return n$(n,e,r,!0),!0}return!1};Ba.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=aee?null:e.clipboardData;return t?(lee(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(mHe(n),!1)};function bHe(n,e){let t=n.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),n.focus()},50)}function wHe(n){let e=[],t=[],r=!1;for(let i of n.selection.ranges)i.empty||(e.push(n.sliceDoc(i.from,i.to)),t.push(i));if(!e.length){let i=-1;for(let{from:s}of n.selection.ranges){let o=n.doc.lineAt(s);o.number>i&&(e.push(o.text),t.push({from:o.from,to:Math.min(n.doc.length,o.to+1)})),i=o.number}r=!0}return{text:e.join(n.lineBreak),ranges:t,linewise:r}}let LN=null;Ba.copy=Ba.cut=(n,e)=>{let{text:t,ranges:r,linewise:i}=wHe(n.state);if(!t&&!i)return!1;LN=i?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=aee?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",t),!0):(bHe(n,t),!1)};const fee=$l.define();function dee(n,e){let t=[];for(let r of n.facet(qQ)){let i=r(n,e);i&&t.push(i)}return t?n.update({effects:t,annotations:fee.of(!0)}):null}function hee(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=dee(n.state,e);t?n.dispatch(t):n.update([])}},10)}ua.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),hee(n)};ua.blur=n=>{n.observer.clearSelectionRange(),hee(n)};ua.compositionstart=ua.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};ua.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,Nt.chrome&&Nt.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};ua.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Ba.beforeinput=(n,e)=>{var t;let r;if(Nt.chrome&&Nt.android&&(r=see.find(i=>i.inputType==e.inputType))&&(n.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let i=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>i+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return Nt.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),Nt.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>ua.compositionend(n,e),20),!1};const r$=new Set;function SHe(n){r$.has(n)||(r$.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const i$=["pre-wrap","normal","pre-line","break-spaces"];class _He{constructor(e){this.lineWrapping=e,this.doc=Rn.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return i$.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(t=!0,this.heightSamples[Math.floor(i*10)]=!0)}return t}refresh(e,t,r,i,s,o){let a=i$.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=t,this.charWidth=r,this.textHeight=i,this.lineLength=s,l){this.heightSamples={};for(let u=0;u<o.length;u++){let c=o[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class EHe{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class vl{constructor(e,t,r,i,s){this.from=e,this.length=t,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?Ts.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof of?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new vl(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var ar=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(ar||(ar={}));const qw=.001;class Ds{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>qw&&(e.heightChanged=!0),this.height=t)}replace(e,t,r){return Ds.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,i){let s=this,o=r.doc;for(let a=i.length-1;a>=0;a--){let{fromA:l,toA:u,fromB:c,toB:f}=i[a],d=s.lineAt(l,ar.ByPosNoHeight,r.setDoc(t),0,0),h=d.to>=u?d:s.lineAt(u,ar.ByPosNoHeight,r,0,0);for(f+=h.to-u,u=h.to;a>0&&d.from<=i[a-1].toA;)l=i[a-1].fromA,c=i[a-1].fromB,a--,l<d.from&&(d=s.lineAt(l,ar.ByPosNoHeight,r,0,0));c+=d.from-l,l=d.from;let m=gk.build(r.setDoc(o),e,c,f);s=s.replace(l,u,m)}return s.updateHeight(r,0)}static empty(){return new ho(0,0)}static of(e){if(e.length==1)return e[0];let t=0,r=e.length,i=0,s=0;for(;;)if(t==r)if(i>s*2){let a=e[t-1];a.break?e.splice(--t,1,a.left,null,a.right):e.splice(--t,1,a.left,a.right),r+=1+a.break,i-=a.size}else if(s>i*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,s-=a.size}else break;else if(i<s){let a=e[t++];a&&(i+=a.size)}else{let a=e[--r];a&&(s+=a.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,r++),new MHe(Ds.of(e.slice(0,t)),o,Ds.of(e.slice(r)))}}Ds.prototype.size=1;class pee extends Ds{constructor(e,t,r){super(e,t),this.deco=r}blockAt(e,t,r,i){return new vl(i,this.length,r,this.height,this.deco||0)}lineAt(e,t,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,t,r,i,s,o){e<=s+this.length&&t>=s&&o(this.blockAt(0,r,i,s))}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(e,i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class ho extends pee{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,r,i){return new vl(i,this.length,r,this.height,this.breaks)}replace(e,t,r){let i=r[0];return r.length==1&&(i instanceof ho||i instanceof Di&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Di?i=new ho(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Ds.of(r)}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more?this.setHeight(e,i.heights[i.index++]):(r||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Di extends Ds{constructor(e){super(e,0)}heightMetrics(e,t){let r=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,s=i-r+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:r,lastLine:i,perLine:o,perChar:a}}blockAt(e,t,r,i){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(t,i);if(t.lineWrapping){let u=i+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),c=t.doc.lineAt(u),f=a+c.length*l,d=Math.max(r,e-f/2);return new vl(c.from,c.length,d,f,0)}else{let u=Math.max(0,Math.min(o-s,Math.floor((e-r)/a))),{from:c,length:f}=t.doc.line(s+u);return new vl(c,f,r+a*u,a,0)}}lineAt(e,t,r,i,s){if(t==ar.ByHeight)return this.blockAt(e,r,i,s);if(t==ar.ByPosNoHeight){let{from:h,to:m}=r.doc.lineAt(e);return new vl(h,m-h,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(r,s),u=r.doc.lineAt(e),c=a+u.length*l,f=u.number-o,d=i+a*f+l*(u.from-s-f);return new vl(u.from,u.length,Math.max(i,Math.min(d,i+this.height-c)),c,0)}forEachLine(e,t,r,i,s,o){e=Math.max(e,s),t=Math.min(t,s+this.length);let{firstLine:a,perLine:l,perChar:u}=this.heightMetrics(r,s);for(let c=e,f=i;c<=t;){let d=r.doc.lineAt(c);if(c==e){let m=d.number-a;f+=l*m+u*(e-s-m)}let h=l+u*d.length;o(new vl(d.from,d.length,f,h,0)),f+=h,c=d.to+1}}replace(e,t,r){let i=this.length-t;if(i>0){let s=r[r.length-1];s instanceof Di?r[r.length-1]=new Di(s.length+i):r.push(null,new Di(i-1))}if(e>0){let s=r[0];s instanceof Di?r[0]=new Di(e+s.length):r.unshift(new Di(e-1),null)}return Ds.of(r)}decomposeLeft(e,t){t.push(new Di(e-1),null)}decomposeRight(e,t){t.push(null,new Di(this.length-e-1))}updateHeight(e,t=0,r=!1,i){let s=t+this.length;if(i&&i.from<=t+this.length&&i.more){let o=[],a=Math.max(t,i.from),l=-1;for(i.from>t&&o.push(new Di(i.from-t-1).updateHeight(e,t));a<=s&&i.more;){let c=e.doc.lineAt(a).length;o.length&&o.push(null);let f=i.heights[i.index++];l==-1?l=f:Math.abs(f-l)>=qw&&(l=-2);let d=new ho(c,f);d.outdated=!1,o.push(d),a+=c+1}a<=s&&o.push(null,new Di(s-a).updateHeight(e,a));let u=Ds.of(o);return(l<0||Math.abs(u.height-this.height)>=qw||Math.abs(l-this.heightMetrics(e,t).perLine)>=qw)&&(e.heightChanged=!0),u}else(r||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class MHe extends Ds{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,t,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,t,r,i):this.right.blockAt(e,t,s,i+this.left.length+this.break)}lineAt(e,t,r,i,s){let o=i+this.left.height,a=s+this.left.length+this.break,l=t==ar.ByHeight?e<o:e<a,u=l?this.left.lineAt(e,t,r,i,s):this.right.lineAt(e,t,r,o,a);if(this.break||(l?u.to<a:u.from>a))return u;let c=t==ar.ByPosNoHeight?ar.ByPosNoHeight:ar.ByPos;return l?u.join(this.right.lineAt(a,c,r,o,a)):this.left.lineAt(a,c,r,i,s).join(u)}forEachLine(e,t,r,i,s,o){let a=i+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,r,i,s,o),t>=l&&this.right.forEachLine(e,t,r,a,l,o);else{let u=this.lineAt(l,ar.ByPos,r,i,s);e<u.from&&this.left.forEachLine(e,u.from-1,r,i,s,o),u.to>=e&&u.from<=t&&o(u),t>u.to&&this.right.forEachLine(u.to+1,t,r,a,l,o)}}replace(e,t,r){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of r)s.push(a);if(e>0&&s$(s,o-1),t<this.length){let a=s.length;this.decomposeRight(t,s),s$(s,a)}return Ds.of(s)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(r++,e>=r&&t.push(null)),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Ds.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,i){let{left:s,right:o}=this,a=t+s.length+this.break,l=null;return i&&i.from<=t+s.length&&i.more?l=s=s.updateHeight(e,t,r,i):s.updateHeight(e,t,r),i&&i.from<=a+o.length&&i.more?l=o=o.updateHeight(e,a,r,i):o.updateHeight(e,a,r),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function s$(n,e){let t,r;n[e]==null&&(t=n[e-1])instanceof Di&&(r=n[e+1])instanceof Di&&n.splice(e-1,3,new Di(t.length+1+r.length))}const CHe=5;class gk{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let r=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof ho?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new ho(r-this.pos,-1)),this.writtenTo=r,t>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=t-e;r.block?this.addBlock(new pee(o,i,r)):(o||s||i>=CHe)&&this.addLineDeco(i,s,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new ho(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let r=new Di(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof ho)return e;let t=new ho(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=t,this.writtenTo=this.pos=this.pos+r}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof ho)&&!this.isCovered?this.nodes.push(new ho(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof ho&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,t,r,i){let s=new gk(r,e);return An.spans(t,r,i,s,0),s.finish(r)}}function AHe(n,e,t){let r=new THe;return An.compare(n,e,t,r,0),r.changes}class THe{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,i){(e<t||r&&r.heightRelevant||i&&i.heightRelevant)&&DN(e,t,this.changes,5)}}function DHe(n,e){let t=n.getBoundingClientRect(),r=n.ownerDocument,i=r.defaultView||window,s=Math.max(0,t.left),o=Math.min(i.innerWidth,t.right),a=Math.max(0,t.top),l=Math.min(i.innerHeight,t.bottom);for(let u=n.parentNode;u&&u!=r.body;)if(u.nodeType==1){let c=u,f=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&f.overflow!="visible"){let d=c.getBoundingClientRect();s=Math.max(s,d.left),o=Math.min(o,d.right),a=Math.max(a,d.top),l=u==n.parentNode?d.bottom:Math.min(l,d.bottom)}u=f.position=="absolute"||f.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-t.left,right:Math.max(s,o)-t.left,top:a-(t.top+e),bottom:Math.max(a,l)-(t.top+e)}}function NHe(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class eT{constructor(e,t,r){this.from=e,this.to=t,this.size=r}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,t){return Ut.replace({widget:new PHe(this.size*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class PHe extends Hu{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class o${constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=a$,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=cr.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(pk).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new _He(t),this.stateDeco=e.facet(ny).filter(r=>typeof r!="function"),this.heightMap=Ds.empty().applyChanges(this.stateDeco,Rn.empty,this.heightOracle.setDoc(e.doc),[new ra(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ut.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let i=r?t.head:t.anchor;if(!e.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);e.push(new Jb(s,o))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?a$:new vk(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(xv(e,this.scaler))})}update(e,t=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(ny).filter(c=>typeof c!="function");let i=e.changedRanges,s=ra.extendWithRanges(i,AHe(r,this.stateDeco,e?e.changes:ii.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=o&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let u=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(YQ)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,r=window.getComputedStyle(t),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?cr.RTL:cr.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=t.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let u=0,c=0;if(a.width&&a.height){let{scaleX:g,scaleY:w}=SQ(t,a);(g>.005&&Math.abs(this.scaleX-g)>.005||w>.005&&Math.abs(this.scaleY-w)>.005)&&(this.scaleX=g,this.scaleY=w,u|=8,o=l=!0)}let f=(parseInt(r.paddingTop)||0)*this.scaleY,d=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=f||this.paddingBottom!=d)&&(this.paddingTop=f,this.paddingBottom=d,u|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=8);let h=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=h&&(this.scrollAnchorHeight=-1,this.scrollTop=h),this.scrolledToBottom=MQ(e.scrollDOM);let m=(this.printing?NHe:DHe)(t,this.paddingTop),v=m.top-this.pixelViewport.top,y=m.bottom-this.pixelViewport.bottom;this.pixelViewport=m;let p=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(p!=this.inView&&(this.inView=p,p&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let S=a.width;if((this.contentDOMWidth!=S||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,u|=8),l){let g=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(g)&&(o=!0),o||i.lineWrapping&&Math.abs(S-this.contentDOMWidth)>i.charWidth){let{lineHeight:w,charWidth:x,textHeight:M}=e.docView.measureTextSize();o=w>0&&i.refresh(s,w,x,M,S/x,g),o&&(e.docView.minWidth=0,u|=8)}v>0&&y>0?c=Math.max(v,y):v<0&&y<0&&(c=Math.min(v,y)),i.heightChanged=!1;for(let w of this.viewports){let x=w.from==this.viewport.from?g:e.docView.measureVisibleLineHeights(w);this.heightMap=(o?Ds.empty().applyChanges(this.stateDeco,Rn.empty,this.heightOracle,[new ra(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new EHe(w.from,x))}i.heightChanged&&(u|=2)}let b=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return b&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),u|=this.updateForViewport()),(u&2||b)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new Jb(i.lineAt(o-r*1e3,ar.ByHeight,s,0,0).from,i.lineAt(a+(1-r)*1e3,ar.ByHeight,s,0,0).to);if(t){let{head:u}=t.range;if(u<l.from||u>l.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=i.lineAt(u,ar.ByPos,s,0,0),d;t.y=="center"?d=(f.top+f.bottom)/2-c/2:t.y=="start"||t.y=="nearest"&&u<l.from?d=f.top:d=f.bottom-c,l=new Jb(i.lineAt(d-1e3/2,ar.ByHeight,s,0,0).from,i.lineAt(d+c+1e3/2,ar.ByHeight,s,0,0).to)}}return l}mapViewport(e,t){let r=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new Jb(this.heightMap.lineAt(r,ar.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,ar.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,ar.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(t,ar.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||i<=o-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||s>=a+Math.max(10,Math.min(r,250)))&&i>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let i of e)t.touchesRange(i.from,i.to)||r.push(new eT(t.mapPos(i.from),t.mapPos(i.to),i.size));return r}ensureLineGaps(e,t){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=cr.LTR&&!r)return[];let a=[],l=(c,f,d,h)=>{if(f-c<s)return;let m=this.state.selection.main,v=[m.from];m.empty||v.push(m.to);for(let p of v)if(p>c&&p<f){l(c,p-10,d,h),l(p+10,f,d,h);return}let y=OHe(e,p=>p.from>=d.from&&p.to<=d.to&&Math.abs(p.from-c)<s&&Math.abs(p.to-f)<s&&!v.some(S=>p.from<S&&p.to>S));if(!y){if(f<d.to&&t&&r&&t.visibleRanges.some(p=>p.from<=f&&p.to>=f)){let p=t.moveToLineBoundary(it.cursor(f),!1,!0).head;p>c&&(f=p)}y=new eT(c,f,this.gapSize(d,c,f,h))}a.push(y)},u=c=>{if(c.length<o||c.type!=Ts.Text)return;let f=RHe(c.from,c.to,this.stateDeco);if(f.total<o)return;let d=this.scrollTarget?this.scrollTarget.range.head:null,h,m;if(r){let v=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,y,p;if(d!=null){let S=ew(f,d),b=((this.visibleBottom-this.visibleTop)/2+v)/c.height;y=S-b,p=S+b}else y=(this.visibleTop-c.top-v)/c.height,p=(this.visibleBottom-c.top+v)/c.height;h=Qb(f,y),m=Qb(f,p)}else{let v=f.total*this.heightOracle.charWidth,y=i*this.heightOracle.charWidth,p,S;if(d!=null){let b=ew(f,d),g=((this.pixelViewport.right-this.pixelViewport.left)/2+y)/v;p=b-g,S=b+g}else p=(this.pixelViewport.left-y)/v,S=(this.pixelViewport.right+y)/v;h=Qb(f,p),m=Qb(f,S)}h>c.from&&l(c.from,h,c,f),m<c.to&&l(m,c.to,c,f)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(u):u(c);return a}gapSize(e,t,r,i){let s=ew(i,r)-ew(i,t);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){eT.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Ut.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];An.spans(e,this.viewport.from,this.viewport.to,{span(i,s){t.push({from:i,to:s})},point(){}},20);let r=t.length!=this.visibleRanges.length||this.visibleRanges.some((i,s)=>i.from!=t[s].from||i.to!=t[s].to);return this.visibleRanges=t,r?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||xv(this.heightMap.lineAt(e,ar.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||xv(this.heightMap.lineAt(this.scaler.fromDOM(e),ar.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return xv(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Jb{constructor(e,t){this.from=e,this.to=t}}function RHe(n,e,t){let r=[],i=n,s=0;return An.spans(t,n,e,{span(){},point(o,a){o>i&&(r.push({from:i,to:o}),s+=o-i),i=a}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function Qb({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let r=Math.floor(n*t);for(let i=0;;i++){let{from:s,to:o}=e[i],a=o-s;if(r<=a)return s+r;r-=a}}function ew(n,e){let t=0;for(let{from:r,to:i}of n.ranges){if(e<=i){t+=e-r;break}t+=i-r}return t/n.total}function OHe(n,e){for(let t of n)if(e(t))return t}const a$={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class vk{constructor(e,t,r){let i=0,s=0,o=0;this.viewports=r.map(({from:a,to:l})=>{let u=t.lineAt(a,ar.ByPos,e,0,0).top,c=t.lineAt(l,ar.ByPos,e,0,0).bottom;return i+=c-u,{from:a,to:l,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let t=0,r=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let t=0,r=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof vk?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,r)=>t.from==e.viewports[r].from&&t.to==e.viewports[r].to):!1}}function xv(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),r=e.toDOM(n.bottom);return new vl(n.from,n.length,t,r-t,Array.isArray(n._content)?n._content.map(i=>xv(i,e)):n._content)}const tw=Rt.define({combine:n=>n.join(" ")}),FN=Rt.define({combine:n=>n.indexOf(!0)>-1}),BN=rf.newName(),mee=rf.newName(),gee=rf.newName(),vee={"&light":"."+mee,"&dark":"."+gee};function zN(n,e,t){return new rf(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return n;if(!t||!t[i])throw new RangeError(`Unsupported selector: ${i}`);return t[i]}):n+" "+r}})}const kHe=zN("."+BN,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},vee),bv="";class IHe{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(bn.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=bv}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==t)break;let a=Jn.get(i),l=Jn.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:A_(i))||A_(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=o}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(a=i.exec(t))&&(s=a.index,o=a[0].length),this.append(t.slice(r,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);r=s+o}}readNode(e){if(e.cmIgnore)return;let t=Jn.get(e),r=t&&t.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(LHe(e,r.node,r.offset)?t:0))}}function LHe(n,e,t){for(;;){if(!e||t<Iu(e))return!1;if(e==n)return!0;t=Bd(e)+1,e=e.parentNode}}class l${constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class FHe{constructor(e,t,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,r,0))){let a=s||o?[]:UHe(e),l=new IHe(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=$He(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!_N(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),u=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!_N(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),c=e.viewport;if((Nt.ios||Nt.chrome)&&e.state.selection.main.empty&&l!=u&&(c.from>0||c.to<e.state.doc.length)){let f=Math.min(l,u),d=Math.max(l,u),h=c.from-f,m=c.to-d;(h==0||h==1||f==0)&&(m==0||m==-1||d==e.state.doc.length)&&(l=0,u=e.state.doc.length)}this.newSel=it.single(u,l)}}}function yee(n,e){let t,{newSel:r}=e,i=n.state.selection.main,s=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=i.from,u=null;(s===8||Nt.android&&e.text.length<a-o)&&(l=i.to,u="end");let c=zHe(n.state.doc.sliceString(o,a,bv),e.text,l-o,u);c&&(Nt.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==bv+bv&&c.toB--,t={from:o+c.from,to:o+c.toA,insert:Rn.of(e.text.slice(c.from,c.toB).split(bv))})}else r&&(!n.hasFocus&&n.state.facet(EM)||r.main.eq(i))&&(r=null);if(!t&&!r)return!1;if(!t&&e.typeOver&&!i.empty&&r&&r.main.empty?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,i.to)}:t&&t.from>=i.from&&t.to<=i.to&&(t.from!=i.from||t.to!=i.to)&&i.to-i.from-(t.to-t.from)<=4?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,i.to))}:(Nt.mac||Nt.android)&&t&&t.from==t.to&&t.from==i.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(r&&t.insert.length==2&&(r=it.single(r.main.anchor-1,r.main.head-1)),t={from:i.from,to:i.to,insert:Rn.of([" "])}):Nt.chrome&&t&&t.from==t.to&&t.from==i.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(r&&(r=it.single(r.main.anchor-1,r.main.head-1)),t={from:i.from,to:i.to,insert:Rn.of([" "])}),t)return xee(n,t,r,s);if(r&&!r.main.eq(i)){let o=!1,a="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(o=!0),a=n.inputState.lastSelectionOrigin),n.dispatch({selection:r,scrollIntoView:o,userEvent:a}),!0}else return!1}function xee(n,e,t,r=-1){if(Nt.ios&&n.inputState.flushIOSKey(e))return!0;let i=n.state.selection.main;if(Nt.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&n.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Yp(n.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&Yp(n.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&Yp(n.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let o,a=()=>o||(o=BHe(n,e,t));return n.state.facet(GQ).some(l=>l(n,e.from,e.to,s,a))||n.dispatch(a()),!0}function BHe(n,e,t){let r,i=n.state,s=i.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let a=s.from<e.from?i.sliceDoc(s.from,e.from):"",l=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(n.state.toText(a+e.insert.sliceString(0,void 0,n.state.lineBreak)+l))}else{let a=i.changes(e),l=t&&t.main.to<=a.newLength?t.main:void 0;if(i.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let u=n.state.sliceDoc(e.from,e.to),c,f=t&&ree(n,t.main.head);if(f){let m=e.insert.length-(e.to-e.from);c={from:f.from,to:f.to-m}}else c=n.state.doc.lineAt(s.head);let d=s.to-e.to,h=s.to-s.from;r=i.changeByRange(m=>{if(m.from==s.from&&m.to==s.to)return{changes:a,range:l||m.map(a)};let v=m.to-d,y=v-u.length;if(m.to-m.from!=h||n.state.sliceDoc(y,v)!=u||m.to>=c.from&&m.from<=c.to)return{range:m};let p=i.changes({from:y,to:v,insert:e.insert}),S=m.to-s.to;return{changes:p,range:l?it.range(Math.max(0,l.anchor+S),Math.max(0,l.head+S)):m.map(p)}})}else r={changes:a,selection:l&&i.selection.replaceRange(l)}}let o="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,o+=".compose",n.inputState.compositionFirstChange&&(o+=".start",n.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:o,scrollIntoView:!0})}function zHe(n,e,t,r){let i=Math.min(n.length,e.length),s=0;for(;s<i&&n.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&n.length==e.length)return null;let o=n.length,a=e.length;for(;o>0&&a>0&&n.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(r=="end"){let l=Math.max(0,s-Math.min(o,a));t-=o+l-s}if(o<s&&n.length<e.length){let l=t<=s&&t>=o?s-t:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=t<=s&&t>=a?s-t:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function UHe(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}=n.observer.selectionRange;return t&&(e.push(new l$(t,r)),(i!=t||s!=r)&&e.push(new l$(i,s))),e}function $He(n,e){if(n.length==0)return null;let t=n[0].pos,r=n.length==2?n[1].pos:t;return t>-1&&r>-1?it.single(t+e,r+e):null}const VHe={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},tT=Nt.ie&&Nt.ie_version<=11;class HHe{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new AVe,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let r of t)this.queue.push(r);(Nt.ie&&Nt.ie_version<=11||Nt.ios&&e.composing)&&t.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&(this.editContext=new jHe(e),e.contentDOM.editContext=this.editContext.editContext),tT&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){e.type=="change"&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,r)=>t!=e[r]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(EM)?r.root.activeElement!=this.dom:!jw(r.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(Nt.ie&&Nt.ie_version<=11||Nt.android&&Nt.chrome)&&!r.state.selection.main.empty&&i.focusNode&&Hv(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=ty(e.root);if(!t)return!1;let r=Nt.safari&&e.root.nodeType==11&&_Ve(this.dom.ownerDocument)==this.dom&&WHe(this.view,t)||t;if(!r||this.selectionRange.eq(r))return!1;let i=jw(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&DVe(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(r.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=t)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,VHe),tT&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),tT&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Yp(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,r=-1,i=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(i=!0),t==-1?{from:t,to:r}=o:(t=Math.min(o.from,t),r=Math.max(o.to,r)))}return{from:t,to:r,typeOver:i}}readChange(){let{from:e,to:t,typeOver:r}=this.processRecords(),i=this.selectionChanged&&jw(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new FHe(this.view,e,t,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let r=this.view.state,i=yee(this.view,t);return this.view.state==r&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let r=u$(t,e.previousSibling||e.target.previousSibling,-1),i=u$(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener("change",this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener("change",this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&this.editContext.update(e)}destroy(){var e,t,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function u$(n,e,t){for(;e;){let r=Jn.get(e);if(r&&r.parent==n)return r;let i=e.parentNode;e=i!=n.dom?i:t>0?e.nextSibling:e.previousSibling}return null}function c$(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=n.docView.domAtPos(n.state.selection.main.anchor);return Hv(o.node,o.offset,i,s)&&([t,r,i,s]=[i,s,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}}function WHe(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return c$(n,i)}let t=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",r,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",r,!0),t?c$(n,t):null}class jHe{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});t.addEventListener("textupdate",r=>{let{anchor:i}=e.state.selection.main,s={from:this.toEditorPos(r.updateRangeStart),to:this.toEditorPos(r.updateRangeEnd),insert:Rn.of(r.text.split(`
`))};s.from==this.from&&i<this.from?s.from=i:s.to==this.to&&i>this.to&&(s.to=i),!(s.from==s.to&&!s.insert.length)&&(this.pendingContextChange=s,xee(e,s,it.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd))),this.pendingContextChange&&this.revertPending(e.state))}),t.addEventListener("characterboundsupdate",r=>{let i=[],s=null;for(let o=this.toEditorPos(r.rangeStart),a=this.toEditorPos(r.rangeEnd);o<a;o++){let l=e.coordsForChar(o);s=l&&new DOMRect(l.left,l.right,l.right-l.left,l.bottom-l.top)||s||new DOMRect,i.push(s)}t.updateCharacterBounds(r.rangeStart,i)}),t.addEventListener("textformatupdate",r=>{let i=[];for(let s of r.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(o!="None"&&a!="None"){let l=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;i.push(Ut.mark({attributes:{style:l}}).range(this.toEditorPos(s.rangeStart),this.toEditorPos(s.rangeEnd)))}}e.dispatch({effects:ZQ.of(Ut.set(i))})}),t.addEventListener("compositionstart",()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)}),t.addEventListener("compositionend",()=>{e.inputState.composing=-1,e.inputState.compositionFirstChange=null}),this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=ty(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,o,a,l,u)=>{if(r)return;let c=u.length-(o-s);if(i&&o>=i.to)if(i.from==s&&i.to==o&&i.insert.eq(u)){i=this.pendingContextChange=null,t+=c;return}else i=null,this.revertPending(e.state);if(s+=t,o+=t,o<=this.from)this.from+=c,this.to+=c;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+u.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),u.toString()),this.to+=c}t+=c}),i&&!r&&this.revertPending(e.state),!r}update(e){!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.resetRange(e.state),this.editContext.updateText(0,this.editContext.text.length,e.state.doc.sliceString(this.from,this.to)),this.setSelection(e.state)):(e.docChanged||e.selectionSet)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.to+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),i=this.toContextPos(t.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e){return e+this.from}toContextPos(e){return e-this.from}}class bt{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:t}=e;this.dispatchTransactions=e.dispatchTransactions||t&&(r=>r.forEach(i=>t(i,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||TVe(e.parent)||document,this.viewState=new o$(e.state||bn.create(e)),e.scrollTo&&e.scrollTo.is(Yb)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(vv).map(r=>new ZA(r));for(let r of this.plugins)r.update(this);this.observer=new HHe(this),this.inputState=new oHe(this),this.inputState.ensureHandlers(this.plugins),this.docView=new V7(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure()}dispatch(...e){let t=e.length==1&&e[0]instanceof ai?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,r=!1,i,s=this.state;for(let d of e){if(d.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=d.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(d=>d.annotation(fee))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=dee(s,o),l||(a=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(bn.phrases)!=this.state.facet(bn.phrases))return this.setState(s);i=T_.create(this,s,e),i.flags|=a;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let d of e){if(f&&(f=f.map(d.changes)),d.scrollIntoView){let{main:h}=d.state.selection;f=new Kp(h.empty?h:it.cursor(h.head,h.head>h.anchor?-1:1))}for(let h of d.effects)h.is(Yb)&&(f=h.value.clip(this.state))}this.viewState.update(i,f),this.bidiCache=D_.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet(yv)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(d=>d.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(tw)!=i.state.facet(tw)&&(this.viewState.mustMeasureContent=!0),(t||r||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!i.empty)for(let d of this.state.facet(ON))try{d(i)}catch(h){Xs(this.state,h,"update listener")}(l||c)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),c&&!yee(this,c)&&u.force&&Yp(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new o$(e),this.plugins=e.facet(vv).map(r=>new ZA(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new V7(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(vv),r=e.state.facet(vv);if(t!=r){let i=[];for(let s of r){let o=t.indexOf(s);if(o<0)i.push(new ZA(s));else{let a=this.plugins[o];a.mustUpdate=e,i.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);t!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(r){Xs(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(MQ(r))s=-1,o=this.viewState.heightMap.height;else{let h=this.viewState.scrollAnchorAt(i);s=h.from,o=h.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];l&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(h=>{try{return h.read(this)}catch(m){return Xs(this.state,m),f$}}),f=T_.create(this,this.state,[]),d=!1;f.flags|=l,t?t.flags|=l:t=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),d=this.docView.update(f),d&&this.docViewUpdate());for(let h=0;h<u.length;h++)if(c[h]!=f$)try{let m=u[h];m.write&&m.write(c[h],this)}catch(m){Xs(this.state,m)}if(d&&this.docView.updateSelection(!0),!f.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let m=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(m>1||m<-1){i=i+m,r.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let a of this.state.facet(ON))a(t)}get themeClasses(){return BN+" "+(this.state.facet(FN)?gee:mee)+" "+this.state.facet(tw)}updateAttrs(){let e=d$(this,JQ,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(EM)?"true":"false",class:"cm-content",style:`${Nt.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),d$(this,pk,t);let r=this.observer.ignore(()=>{let i=TN(this.contentDOM,this.contentAttrs,t),s=TN(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=t,r}showAnnouncements(e){let t=!0;for(let r of e)for(let i of r.effects)if(i.is(bt.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(yv);let e=this.state.facet(bt.cspNonce);rf.mount(this.root,this.styleModules.concat(kHe).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(r=>r.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,r){return QA(this,e,X7(this,e,t,r))}moveByGroup(e,t){return QA(this,e,X7(this,e,t,r=>iHe(this,e.head,r)))}visualLineSide(e,t){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[t?r.length-1:0];return it.cursor(s.side(t,i)+e.from,s.forward(!t,i)?1:-1)}moveToLineBoundary(e,t,r=!0){return rHe(this,e,t,r)}moveVertically(e,t,r){return QA(this,e,sHe(this,e,t,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),iee(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let r=this.docView.coordsAt(e,t);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),o=s[Tc.find(s,e-i.from,-1,t)];return SM(r,o.dir==cr.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(XQ)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>GHe)return UQ(e.length);let t=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==t&&(s.fresh||zQ(s.isolates,r=$7(this,e))))return s.order;r||(r=$7(this,e));let i=$Ve(e.text,t,r);return this.bidiCache.push(new D_(e.from,e.to,t,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Nt.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{_Q(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Yb.of(new Kp(typeof e=="number"?it.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return Yb.of(new Kp(it.cursor(r.from),"start","start",r.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Hr.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Hr.define(()=>({}),{eventObservers:e})}static theme(e,t){let r=rf.newName(),i=[tw.of(r),yv.of(zN(`.${r}`,e))];return t&&t.dark&&i.push(FN.of(!0)),i}static baseTheme(e){return rh.lowest(yv.of(zN("."+BN,e,vee)))}static findFromDOM(e){var t;let r=e.querySelector(".cm-content"),i=r&&Jn.get(r)||Jn.get(e);return((t=i==null?void 0:i.rootView)===null||t===void 0?void 0:t.view)||null}}bt.styleModule=yv;bt.inputHandler=GQ;bt.scrollHandler=KQ;bt.focusChangeEffect=qQ;bt.perLineTextDirection=XQ;bt.exceptionSink=jQ;bt.updateListener=ON;bt.editable=EM;bt.mouseSelectionStyle=WQ;bt.dragMovesSelection=HQ;bt.clickAddsSelectionRange=VQ;bt.decorations=ny;bt.outerDecorations=QQ;bt.atomicRanges=mk;bt.bidiIsolatedRanges=eee;bt.scrollMargins=tee;bt.darkTheme=FN;bt.cspNonce=Rt.define({combine:n=>n.length?n[0]:""});bt.contentAttributes=pk;bt.editorAttributes=JQ;bt.lineWrapping=bt.contentAttributes.of({class:"cm-lineWrapping"});bt.announce=dn.define();const GHe=4096,f$={};class D_{constructor(e,t,r,i,s,o){this.from=e,this.to=t,this.dir=r,this.isolates=i,this.fresh=s,this.order=o}static update(e,t){if(t.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:cr.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==i&&!t.touchesRange(o.from,o.to)&&r.push(new D_(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return r}}function d$(n,e,t){for(let r=n.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],o=typeof s=="function"?s(n):s;o&&AN(o,t)}return t}const qHe=Nt.mac?"mac":Nt.windows?"win":Nt.linux?"linux":"key";function XHe(n,e){const t=n.split(/-(?!$)/);let r=t[t.length-1];r=="Space"&&(r=" ");let i,s,o,a;for(let l=0;l<t.length-1;++l){const u=t[l];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),a&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function nw(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const YHe=rh.default(bt.domEventHandlers({keydown(n,e){return wee(bee(e.state),n,e,"editor")}})),Xy=Rt.define({enables:YHe}),h$=new WeakMap;function bee(n){let e=n.facet(Xy),t=h$.get(e);return t||h$.set(e,t=JHe(e.reduce((r,i)=>r.concat(i),[]))),t}function KHe(n,e,t){return wee(bee(n.state),e,n,t)}let xc=null;const ZHe=4e3;function JHe(n,e=qHe){let t=Object.create(null),r=Object.create(null),i=(o,a)=>{let l=r[o];if(l==null)r[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,u,c)=>{var f,d;let h=t[o]||(t[o]=Object.create(null)),m=a.split(/ (?!$)/).map(p=>XHe(p,e));for(let p=1;p<m.length;p++){let S=m.slice(0,p).join(" ");i(S,!0),h[S]||(h[S]={preventDefault:!0,stopPropagation:!1,run:[b=>{let g=xc={view:b,prefix:S,scope:o};return setTimeout(()=>{xc==g&&(xc=null)},ZHe),!0}]})}let v=m.join(" ");i(v,!1);let y=h[v]||(h[v]={preventDefault:!1,stopPropagation:!1,run:((d=(f=h._any)===null||f===void 0?void 0:f.run)===null||d===void 0?void 0:d.slice())||[]});l&&y.run.push(l),u&&(y.preventDefault=!0),c&&(y.stopPropagation=!0)};for(let o of n){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of a){let c=t[u]||(t[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:f}=o;for(let d in c)c[d].run.push(h=>f(h,UN))}let l=o[e]||o.key;if(l)for(let u of a)s(u,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(u,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return t}let UN=null;function wee(n,e,t,r){UN=e;let i=SVe(e),s=Ri(i,0),o=Zo(s)==i.length&&i!=" ",a="",l=!1,u=!1,c=!1;xc&&xc.view==t&&xc.scope==r&&(a=xc.prefix+" ",oee.indexOf(e.keyCode)<0&&(u=!0,xc=null));let f=new Set,d=y=>{if(y){for(let p of y.run)if(!f.has(p)&&(f.add(p),p(t)))return y.stopPropagation&&(c=!0),!0;y.preventDefault&&(y.stopPropagation&&(c=!0),u=!0)}return!1},h=n[r],m,v;return h&&(d(h[a+nw(i,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Nt.windows&&e.ctrlKey&&e.altKey)&&(m=sf[e.keyCode])&&m!=i?(d(h[a+nw(m,e,!0)])||e.shiftKey&&(v=ey[e.keyCode])!=i&&v!=m&&d(h[a+nw(v,e,!1)]))&&(l=!0):o&&e.shiftKey&&d(h[a+nw(i,e,!0)])&&(l=!0),!l&&d(h._any)&&(l=!0)),u&&(l=!0),l&&c&&e.stopPropagation(),UN=null,l}class Yy{constructor(e,t,r,i,s){this.className=e,this.left=t,this.top=r,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let s=See(e);return[new Yy(t,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}else return QHe(e,t,r)}}function See(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==cr.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function p$(n,e,t,r){let i=n.coordsAtPos(e,t*2);if(!i)return r;let s=n.dom.getBoundingClientRect(),o=(i.top+i.bottom)/2,a=n.posAtCoords({x:s.left+1,y:o}),l=n.posAtCoords({x:s.right-1,y:o});return a==null||l==null?r:{from:Math.max(r.from,Math.min(a,l)),to:Math.min(r.to,Math.max(a,l))}}function QHe(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let r=Math.max(t.from,n.viewport.from),i=Math.min(t.to,n.viewport.to),s=n.textDirection==cr.LTR,o=n.contentDOM,a=o.getBoundingClientRect(),l=See(n),u=o.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),f=a.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),d=a.right-(c?parseInt(c.paddingRight):0),h=IN(n,r),m=IN(n,i),v=h.type==Ts.Text?h:null,y=m.type==Ts.Text?m:null;if(v&&(n.lineWrapping||h.widgetLineBreaks)&&(v=p$(n,r,1,v)),y&&(n.lineWrapping||m.widgetLineBreaks)&&(y=p$(n,i,-1,y)),v&&y&&v.from==y.from&&v.to==y.to)return S(b(t.from,t.to,v));{let w=v?b(t.from,null,v):g(h,!1),x=y?b(null,t.to,y):g(m,!0),M=[];return(v||h).to<(y||m).from-(v&&y?1:0)||h.widgetLineBreaks>1&&w.bottom+n.defaultLineHeight/2<x.top?M.push(p(f,w.bottom,d,x.top)):w.bottom<x.top&&n.elementAtHeight((w.bottom+x.top)/2).type==Ts.Text&&(w.bottom=x.top=(w.bottom+x.top)/2),S(w).concat(M).concat(S(x))}function p(w,x,M,A){return new Yy(e,w-l.left,x-l.top-.01,M-w,A-x+.01)}function S({top:w,bottom:x,horizontal:M}){let A=[];for(let N=0;N<M.length;N+=2)A.push(p(M[N],w,M[N+1],x));return A}function b(w,x,M){let A=1e9,N=-1e9,C=[];function T(B,z,D,I,U){let L=n.coordsAtPos(B,B==M.to?-2:2),q=n.coordsAtPos(D,D==M.from?2:-2);!L||!q||(A=Math.min(L.top,q.top,A),N=Math.max(L.bottom,q.bottom,N),U==cr.LTR?C.push(s&&z?f:L.left,s&&I?d:q.right):C.push(!s&&I?f:q.left,!s&&z?d:L.right))}let R=w??M.from,$=x??M.to;for(let B of n.visibleRanges)if(B.to>R&&B.from<$)for(let z=Math.max(B.from,R),D=Math.min(B.to,$);;){let I=n.state.doc.lineAt(z);for(let U of n.bidiSpans(I)){let L=U.from+I.from,q=U.to+I.from;if(L>=D)break;q>z&&T(Math.max(L,z),w==null&&L<=R,Math.min(q,D),x==null&&q>=$,U.dir)}if(z=I.to+1,z>=D)break}return C.length==0&&T(R,w==null,$,x==null,n.textDirection),{top:A,bottom:N,horizontal:C}}function g(w,x){let M=a.top+(x?w.top:w.bottom);return{top:M,bottom:M,horizontal:[]}}}function eWe(n,e){return n.constructor==e.constructor&&n.eq(e)}class tWe{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(Xw)!=e.state.facet(Xw)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,r=e.facet(Xw);for(;t<r.length&&r[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,r)=>!eWe(t,this.drawn[r]))){let t=this.dom.firstChild,r=0;for(let i of e)i.update&&t&&i.constructor&&this.drawn[r].constructor&&i.update(t,this.drawn[r])?(t=t.nextSibling,r++):this.dom.insertBefore(i.draw(),t);for(;t;){let i=t.nextSibling;t.remove(),t=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Xw=Rt.define();function _ee(n){return[Hr.define(e=>new tWe(e,n)),Xw.of(n)]}const Eee=!Nt.ios,ry=Rt.define({combine(n){return Vl(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function nWe(n={}){return[ry.of(n),rWe,iWe,sWe,YQ.of(!0)]}function Mee(n){return n.startState.facet(ry)!=n.state.facet(ry)}const rWe=_ee({above:!0,markers(n){let{state:e}=n,t=e.facet(ry),r=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty?!s||Eee:t.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=i.empty?i:it.cursor(i.head,i.head>i.anchor?-1:1);for(let l of Yy.forRange(n,o,a))r.push(l)}}return r},update(n,e){n.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=Mee(n);return t&&m$(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){m$(e.state,n)},class:"cm-cursorLayer"});function m$(n,e){e.style.animationDuration=n.facet(ry).cursorBlinkRate+"ms"}const iWe=_ee({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:Yy.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||Mee(n)},class:"cm-selectionLayer"}),$N={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};Eee&&($N[".cm-line"].caretColor=$N[".cm-content"].caretColor="transparent !important");const sWe=rh.highest(bt.theme($N)),Cee=dn.define({map(n,e){return n==null?null:e.mapPos(n)}}),wv=Vi.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,r)=>r.is(Cee)?r.value:t,n)}}),oWe=Hr.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(wv);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(wv)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,e=n.state.field(wv),t=e!=null&&n.coordsAtPos(e);if(!t)return null;let r=n.scrollDOM.getBoundingClientRect();return{left:t.left-r.left+n.scrollDOM.scrollLeft*n.scaleX,top:t.top-r.top+n.scrollDOM.scrollTop*n.scaleY,height:t.bottom-t.top}}drawCursor(n){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;n?(this.cursor.style.left=n.left/e+"px",this.cursor.style.top=n.top/t+"px",this.cursor.style.height=n.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(wv)!=n&&this.view.dispatch({effects:Cee.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function aWe(){return[wv,oWe]}function g$(n,e,t,r,i){e.lastIndex=0;for(let s=n.iterRange(t,r),o=t,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)i(o+a.index,a)}function lWe(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let r=[];for(let{from:i,to:s}of t)i=Math.max(n.state.doc.lineAt(i).from,i-e),s=Math.min(n.state.doc.lineAt(s).to,s+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=s:r.push({from:i,to:s});return r}class uWe{constructor(e){const{regexp:t,decoration:r,decorate:i,boundary:s,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,i)this.addMatch=(a,l,u,c)=>i(c,u,u+a[0].length,a,l);else if(typeof r=="function")this.addMatch=(a,l,u,c)=>{let f=r(a,l,u);f&&c(u,u+a[0].length,f)};else if(r)this.addMatch=(a,l,u,c)=>c(u,u+a[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let t=new nf,r=t.add.bind(t);for(let{from:i,to:s}of lWe(e,this.maxLength))g$(e.state.doc,this.regexp,i,s,(o,a)=>this.addMatch(a,e,o,r));return t.finish()}updateDeco(e,t){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>e.view.viewport.from&&a<e.view.viewport.to&&(r=Math.min(a,r),i=Math.max(l,i))}),e.viewportChanged||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),r,i):t}updateRange(e,t,r,i){for(let s of e.visibleRanges){let o=Math.max(s.from,r),a=Math.min(s.to,i);if(a>o){let l=e.state.doc.lineAt(o),u=l.to<a?e.state.doc.lineAt(a):l,c=Math.max(s.from,l.from),f=Math.min(s.to,u.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){c=o;break}for(;a<u.to;a++)if(this.boundary.test(u.text[a-u.from])){f=a;break}}let d=[],h,m=(v,y,p)=>d.push(p.range(v,y));if(l==u)for(this.regexp.lastIndex=c-l.from;(h=this.regexp.exec(l.text))&&h.index<f-l.from;)this.addMatch(h,e,h.index+l.from,m);else g$(e.state.doc,this.regexp,c,f,(v,y)=>this.addMatch(y,e,v,m));t=t.update({filterFrom:c,filterTo:f,filter:(v,y)=>v<c||y>f,add:d})}}return t}}const VN=/x/.unicode!=null?"gu":"g",cWe=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,VN),fWe={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let nT=null;function dWe(){var n;if(nT==null&&typeof document<"u"&&document.body){let e=document.body.style;nT=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return nT||!1}const Yw=Rt.define({combine(n){let e=Vl(n,{render:null,specialChars:cWe,addSpecialChars:null});return(e.replaceTabs=!dWe())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,VN)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,VN)),e}});function hWe(n={}){return[Yw.of(n),pWe()]}let v$=null;function pWe(){return v$||(v$=Hr.fromClass(class{constructor(n){this.view=n,this.decorations=Ut.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(Yw)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new uWe({regexp:n.specialChars,decoration:(e,t,r)=>{let{doc:i}=t.state,s=Ri(e[0],0);if(s==9){let o=i.lineAt(r),a=t.state.tabSize,l=tg(o.text,a,r-o.from);return Ut.replace({widget:new yWe((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=Ut.replace({widget:new vWe(n,s)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(Yw);n.startState.facet(Yw)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const mWe="";function gWe(n){return n>=32?mWe:n==10?"":String.fromCharCode(9216+n)}class vWe extends Hu{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=gWe(this.code),r=e.state.phrase("Control character")+" "+(fWe[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,t);if(i)return i;let s=document.createElement("span");return s.textContent=t,s.title=r,s.setAttribute("aria-label",r),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class yWe extends Hu{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function xWe(){return wWe}const bWe=Ut.line({class:"cm-activeLine"}),wWe=Hr.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let r of n.state.selection.ranges){let i=n.lineBlockAt(r.head);i.from>e&&(t.push(bWe.range(i.from)),e=i.from)}return Ut.set(t)}},{decorations:n=>n.decorations});class SWe extends Hu{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}coordsAt(e){let t=e.firstChild?wm(e.firstChild):[];if(!t.length)return null;let r=window.getComputedStyle(e.parentNode),i=SM(t[0],r.direction!="rtl"),s=parseInt(r.lineHeight);return i.bottom-i.top>s*1.5?{left:i.left,right:i.right,top:i.top,bottom:i.top+s}:i}ignoreEvent(){return!1}}function _We(n){return Hr.fromClass(class{constructor(e){this.view=e,this.placeholder=n?Ut.set([Ut.widget({widget:new SWe(n),side:1}).range(0)]):Ut.none}get decorations(){return this.view.state.doc.length?Ut.none:this.placeholder}},{decorations:e=>e.decorations})}const HN=2e3;function EWe(n,e,t){let r=Math.min(e.line,t.line),i=Math.max(e.line,t.line),s=[];if(e.off>HN||t.off>HN||e.col<0||t.col<0){let o=Math.min(e.off,t.off),a=Math.max(e.off,t.off);for(let l=r;l<=i;l++){let u=n.doc.line(l);u.length<=a&&s.push(it.range(u.from+o,u.to+a))}}else{let o=Math.min(e.col,t.col),a=Math.max(e.col,t.col);for(let l=r;l<=i;l++){let u=n.doc.line(l),c=bN(u.text,o,n.tabSize,!0);if(c<0)s.push(it.cursor(u.to));else{let f=bN(u.text,a,n.tabSize);s.push(it.range(u.from+c,u.from+f))}}}return s}function MWe(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function y$(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),r=n.state.doc.lineAt(t),i=t-r.from,s=i>HN?-1:i==r.length?MWe(n,e.clientX):tg(r.text,n.state.tabSize,t-r.from);return{line:r.number,col:s,off:i}}function CWe(n,e){let t=y$(n,e),r=n.state.selection;return t?{update(i){if(i.docChanged){let s=i.changes.mapPos(i.startState.doc.line(t.line).from),o=i.state.doc.lineAt(s);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},r=r.map(i.changes)}},get(i,s,o){let a=y$(n,i);if(!a)return r;let l=EWe(n.state,t,a);return l.length?o?it.create(l.concat(r.ranges)):it.create(l):r}}:null}function AWe(n){let e=t=>t.altKey&&t.button==0;return bt.mouseSelectionStyle.of((t,r)=>e(r)?CWe(t,r):null)}const TWe={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},DWe={style:"cursor: crosshair"};function NWe(n={}){let[e,t]=TWe[n.key||"Alt"],r=Hr.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||t(i))},keyup(i){(i.keyCode==e||!t(i))&&this.set(!1)},mousemove(i){this.set(t(i))}}});return[r,bt.contentAttributes.of(i=>{var s;return!((s=i.plugin(r))===null||s===void 0)&&s.isDown?DWe:null})]}const tv="-10000px";class Aee{constructor(e,t,r,i){this.facet=t,this.createTooltipView=r,this.removeTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=r(o,s))}update(e,t){var r;let i=e.state.facet(this.facet),s=i.filter(l=>l);if(i===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=t?[]:null;for(let l=0;l<s.length;l++){let u=s[l],c=-1;if(u){for(let f=0;f<this.tooltips.length;f++){let d=this.tooltips[f];d&&d.create==u.create&&(c=f)}if(c<0)o[l]=this.createTooltipView(u,l?o[l-1]:null),a&&(a[l]=!!u.above);else{let f=o[l]=this.tooltipViews[c];a&&(a[l]=t[c]),f.update&&f.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(r=l.destroy)===null||r===void 0||r.call(l));return t&&(a.forEach((l,u)=>t[u]=l),t.length=a.length),this.input=i,this.tooltips=s,this.tooltipViews=o,!0}}function PWe(n){let{win:e}=n;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const rT=Rt.define({combine:n=>{var e,t,r;return{position:Nt.ios?"absolute":((e=n.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(i=>i.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((r=n.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||PWe}}}),x$=new WeakMap,yk=Hr.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(rT);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Aee(n,xk,(t,r)=>this.createTooltip(t,r),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,r=n.state.facet(rT);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;t=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n,e){let t=n.create(this.view),r=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),n.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",t.dom.appendChild(i)}return t.dom.style.position=this.position,t.dom.style.top=tv,t.dom.style.left="0px",this.container.insertBefore(t.dom,r),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var n,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(n=r.destroy)===null||n===void 0||n.call(r);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=this.view.dom.getBoundingClientRect(),e=1,t=1,r=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:i}=this.manager.tooltipViews[0];if(Nt.gecko)r=i.offsetParent!=this.container.ownerDocument.body;else if(i.style.top==tv&&i.style.left=="0px"){let s=i.getBoundingClientRect();r=Math.abs(s.top+1e4)>1||Math.abs(s.left)>1}}if(r||this.position=="absolute")if(this.parent){let i=this.parent.getBoundingClientRect();i.width&&i.height&&(e=i.width/this.parent.offsetWidth,t=i.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:t}=this.view.viewState);return{editor:n,parent:this.parent?this.container.getBoundingClientRect():n,pos:this.manager.tooltips.map((i,s)=>{let o=this.manager.tooltipViews[s];return o.getCoords?o.getCoords(i.pos):this.view.coordsAtPos(i.pos)}),size:this.manager.tooltipViews.map(({dom:i})=>i.getBoundingClientRect()),space:this.view.state.facet(rT).tooltipSpace(this.view),scaleX:e,scaleY:t,makeAbsolute:r}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{editor:t,space:r,scaleX:i,scaleY:s}=n,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],u=this.manager.tooltipViews[a],{dom:c}=u,f=n.pos[a],d=n.size[a];if(!f||f.bottom<=Math.max(t.top,r.top)||f.top>=Math.min(t.bottom,r.bottom)||f.right<Math.max(t.left,r.left)-.1||f.left>Math.min(t.right,r.right)+.1){c.style.top=tv;continue}let h=l.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,m=h?7:0,v=d.right-d.left,y=(e=x$.get(u))!==null&&e!==void 0?e:d.bottom-d.top,p=u.offset||OWe,S=this.view.textDirection==cr.LTR,b=d.width>r.right-r.left?S?r.left:r.right-d.width:S?Math.min(f.left-(h?14:0)+p.x,r.right-v):Math.max(r.left,f.left-v+(h?14:0)-p.x),g=this.above[a];!l.strictSide&&(g?f.top-(d.bottom-d.top)-p.y<r.top:f.bottom+(d.bottom-d.top)+p.y>r.bottom)&&g==r.bottom-f.bottom>f.top-r.top&&(g=this.above[a]=!g);let w=(g?f.top-r.top:r.bottom-f.bottom)-m;if(w<y&&u.resize!==!1){if(w<this.view.defaultLineHeight){c.style.top=tv;continue}x$.set(u,y),c.style.height=(y=w)/s+"px"}else c.style.height&&(c.style.height="");let x=g?f.top-y-m-p.y:f.bottom+m+p.y,M=b+v;if(u.overlap!==!0)for(let A of o)A.left<M&&A.right>b&&A.top<x+y&&A.bottom>x&&(x=g?A.top-y-2-m:A.bottom+m+2);if(this.position=="absolute"?(c.style.top=(x-n.parent.top)/s+"px",c.style.left=(b-n.parent.left)/i+"px"):(c.style.top=x/s+"px",c.style.left=b/i+"px"),h){let A=f.left+(S?p.x:-p.x)-(b+14-7);h.style.left=A/i+"px"}u.overlap!==!0&&o.push({left:b,top:x,right:M,bottom:x+y}),c.classList.toggle("cm-tooltip-above",g),c.classList.toggle("cm-tooltip-below",!g),u.positioned&&u.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=tv}},{eventObservers:{scroll(){this.maybeMeasure()}}}),RWe=bt.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),OWe={x:0,y:0},xk=Rt.define({enables:[yk,RWe]}),N_=Rt.define({combine:n=>n.reduce((e,t)=>e.concat(t),[])});class MM{static create(e){return new MM(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Aee(e,N_,(t,r)=>this.createHostedView(t,r),t=>t.dom.remove())}createHostedView(e,t){let r=e.create(this.view);return r.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(r.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&r.mount&&r.mount(this.view),r}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let r of this.manager.tooltipViews){let i=r[e];if(i!==void 0){if(t===void 0)t=i;else if(t!==i)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const kWe=xk.compute([N_],n=>{let e=n.facet(N_);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var r;return(r=t.end)!==null&&r!==void 0?r:t.pos})),create:MM.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class IWe{constructor(e,t,r,i,s){this.view=e,this.source=t,this.field=r,this.setHover=i,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,r=e.docView.nearest(t.target);if(!r)return;let i,s=1;if(r instanceof Ac)i=r.posAtStart;else{if(i=e.posAtCoords(t),i==null)return;let a=e.coordsAtPos(i);if(!a||t.y<a.top||t.y>a.bottom||t.x<a.left-e.defaultCharacterWidth||t.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(i)).find(c=>c.from<=i&&c.to>=i),u=l&&l.dir==cr.RTL?-1:1;s=t.x<a.left?-u:u}let o=this.source(e,i,s);if(o!=null&&o.then){let a=this.pending={pos:i};o.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>Xs(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(yk),t=e?e.manager.tooltips.findIndex(r=>r.create==MM.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,r;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:s}=this;if(i.length&&s&&!LWe(s.dom,e)||this.pending){let{pos:o}=i[0]||this.pending,a=(r=(t=i[0])===null||t===void 0?void 0:t.end)!==null&&r!==void 0?r:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!FWe(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:r}=this;r&&r.dom.contains(e.relatedTarget)?this.watchTooltipLeave(r.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=r=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(r.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const rw=4;function LWe(n,e){let t=n.getBoundingClientRect();return e.clientX>=t.left-rw&&e.clientX<=t.right+rw&&e.clientY>=t.top-rw&&e.clientY<=t.bottom+rw}function FWe(n,e,t,r,i,s){let o=n.scrollDOM.getBoundingClientRect(),a=n.documentTop+n.documentPadding.top+n.contentHeight;if(o.left>r||o.right<r||o.top>i||Math.min(o.bottom,a)<i)return!1;let l=n.posAtCoords({x:r,y:i},!1);return l>=e&&l<=t}function BWe(n,e={}){let t=dn.define(),r=Vi.define({create(){return[]},update(i,s){if(i.length&&(e.hideOnChange&&(s.docChanged||s.selection)?i=[]:e.hideOn&&(i=i.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let a of i){let l=s.changes.mapPos(a.pos,-1,Es.TrackDel);if(l!=null){let u=Object.assign(Object.create(null),a);u.pos=l,u.end!=null&&(u.end=s.changes.mapPos(u.end)),o.push(u)}}i=o}for(let o of s.effects)o.is(t)&&(i=o.value),o.is(zWe)&&(i=[]);return i},provide:i=>N_.from(i)});return[r,Hr.define(i=>new IWe(i,n,r,t,e.hoverTime||300)),kWe]}function Tee(n,e){let t=n.plugin(yk);if(!t)return null;let r=t.manager.tooltips.indexOf(e);return r<0?null:t.manager.tooltipViews[r]}const zWe=dn.define(),b$=Rt.define({combine(n){let e,t;for(let r of n)e=e||r.topContainer,t=t||r.bottomContainer;return{topContainer:e,bottomContainer:t}}});function iy(n,e){let t=n.plugin(Dee),r=t?t.specs.indexOf(e):-1;return r>-1?t.panels[r]:null}const Dee=Hr.fromClass(class{constructor(n){this.input=n.state.facet(sy),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(b$);this.top=new iw(n,!0,e.topContainer),this.bottom=new iw(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(b$);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new iw(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new iw(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(sy);if(t!=this.input){let r=t.filter(l=>l),i=[],s=[],o=[],a=[];for(let l of r){let u=this.specs.indexOf(l),c;u<0?(c=l(n.view),a.push(c)):(c=this.panels[u],c.update&&c.update(n)),i.push(c),(c.top?s:o).push(c)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>bt.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class iw{constructor(e,t,r){this.view=e,this.top=t,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=w$(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=w$(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function w$(n){let e=n.nextSibling;return n.remove(),e}const sy=Rt.define({enables:Dee});class Fu extends Fd{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Fu.prototype.elementClass="";Fu.prototype.toDOM=void 0;Fu.prototype.mapMode=Es.TrackBefore;Fu.prototype.startSide=Fu.prototype.endSide=-1;Fu.prototype.point=!0;const Kw=Rt.define(),UWe={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>An.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},jv=Rt.define();function $We(n){return[Nee(),jv.of(Object.assign(Object.assign({},UWe),n))]}const S$=Rt.define({combine:n=>n.some(e=>e)});function Nee(n){return[VWe]}const VWe=Hr.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(jv).map(e=>new E$(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(S$),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,r=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(r<(t.to-t.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(S$)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=An.iter(this.view.state.facet(Kw),this.view.viewport.from),r=[],i=this.gutters.map(s=>new HWe(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==Ts.Text&&o){WN(t,r,a.from);for(let l of i)l.line(this.view,a,r);o=!1}else if(a.widget)for(let l of i)l.widget(this.view,a)}else if(s.type==Ts.Text){WN(t,r,s.from);for(let o of i)o.line(this.view,s,r)}else if(s.widget)for(let o of i)o.widget(this.view,s);for(let s of i)s.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(jv),t=n.state.facet(jv),r=n.docChanged||n.heightChanged||n.viewportChanged||!An.eq(n.startState.facet(Kw),n.state.facet(Kw),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let i of this.gutters)i.update(n)&&(r=!0);else{r=!0;let i=[];for(let s of t){let o=e.indexOf(s);o<0?i.push(new E$(this.view,s)):(this.gutters[o].update(n),i.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>bt.scrollMargins.of(e=>{let t=e.plugin(n);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==cr.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function _$(n){return Array.isArray(n)?n:[n]}function WN(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class HWe{constructor(e,t,r){this.gutter=e,this.height=r,this.i=0,this.cursor=An.iter(e.markers,t.from)}addElement(e,t,r){let{gutter:i}=this,s=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==i.elements.length){let a=new Pee(e,o,s,r);i.elements.push(a),i.dom.appendChild(a.dom)}else i.elements[this.i].update(e,o,s,r);this.height=t.bottom,this.i++}line(e,t,r){let i=[];WN(this.cursor,i,t.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,t,i);s&&i.unshift(s);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,i)}widget(e,t){let r=this.gutter.config.widgetMarker(e,t.widget,t);r&&this.addElement(e,t,[r])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class E${constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in t.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=i.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[r](e,a,i)&&i.preventDefault()});this.markers=_$(t.markers(e)),t.initialSpacer&&(this.spacer=new Pee(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=_$(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!An.eq(this.markers,t,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Pee{constructor(e,t,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,r,i)}update(e,t,r,i){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),WWe(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<t.length?t[s++]:null,u=!1;if(l){let c=l.elementClass;c&&(r+=" "+c);for(let f=o;f<this.markers.length;f++)if(this.markers[f].compare(l)){a=f,u=!0;break}}else a=this.markers.length;for(;o<a;){let c=this.markers[o++];if(c.toDOM){c.destroy(i);let f=i.nextSibling;i.remove(),i=f}}if(!l)break;l.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),u&&o++}this.dom.className=r,this.markers=t}destroy(){this.setMarkers(null,[])}}function WWe(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const jWe=Rt.define(),Pp=Rt.define({combine(n){return Vl(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let r=Object.assign({},e);for(let i in t){let s=r[i],o=t[i];r[i]=s?(a,l,u)=>s(a,l,u)||o(a,l,u):o}return r}})}});class iT extends Fu{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function sT(n,e){return n.state.facet(Pp).formatNumber(e,n.state)}const GWe=jv.compute([Pp],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(jWe)},lineMarker(e,t,r){return r.some(i=>i.toDOM)?null:new iT(sT(e,e.state.doc.lineAt(t.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(Pp)!=e.state.facet(Pp),initialSpacer(e){return new iT(sT(e,M$(e.state.doc.lines)))},updateSpacer(e,t){let r=sT(t.view,M$(t.view.state.doc.lines));return r==e.number?e:new iT(r)},domEventHandlers:n.facet(Pp).domEventHandlers}));function qWe(n={}){return[Pp.of(n),Nee(),GWe]}function M$(n){let e=9;for(;e<n;)e=e*10+9;return e}const XWe=new class extends Fu{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},YWe=Kw.compute(["selection"],n=>{let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.head).from;i>t&&(t=i,e.push(XWe.range(i)))}return An.of(e)});function KWe(){return YWe}const ZWe=1024;let JWe=0;class oT{constructor(e,t){this.from=e,this.to=t}}class Sn{constructor(e={}){this.id=JWe++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=ca.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}}Sn.closedBy=new Sn({deserialize:n=>n.split(" ")});Sn.openedBy=new Sn({deserialize:n=>n.split(" ")});Sn.group=new Sn({deserialize:n=>n.split(" ")});Sn.isolate=new Sn({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});Sn.contextHash=new Sn({perNode:!0});Sn.lookAhead=new Sn({perNode:!0});Sn.mounted=new Sn({perNode:!0});class P_{constructor(e,t,r){this.tree=e,this.overlay=t,this.parser=r}static get(e){return e&&e.props&&e.props[Sn.mounted.id]}}const QWe=Object.create(null);class ca{constructor(e,t,r,i=0){this.name=e,this.props=t,this.id=r,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):QWe,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new ca(e.name||"",t,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Sn.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let i of r.split(" "))t[i]=e[r];return r=>{for(let i=r.prop(Sn.group),s=-1;s<(i?i.length:0);s++){let o=t[s<0?r.name:i[s]];if(o)return o}}}}ca.none=new ca("",Object.create(null),0,8);const sw=new WeakMap,C$=new WeakMap;var ki;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(ki||(ki={}));class os{constructor(e,t,r,i,s){if(this.type=e,this.children=t,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=P_.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let i=r.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new GN(this.topNode,e)}cursorAt(e,t=0,r=0){let i=sw.get(this)||this.topNode,s=new GN(i);return s.moveTo(e,t),sw.set(this,s._tree),s}get topNode(){return new ia(this,0,0,null)}resolve(e,t=0){let r=oy(sw.get(this)||this.topNode,e,t,!1);return sw.set(this,r),r}resolveInner(e,t=0){let r=oy(C$.get(this)||this.topNode,e,t,!0);return C$.set(this,r),r}resolveStack(e,t=0){return nje(this,e,t)}iterate(e){let{enter:t,leave:r,from:i=0,to:s=this.length}=e,o=e.mode||0,a=(o&ki.IncludeAnonymous)>0;for(let l=this.cursor(o|ki.IncludeAnonymous);;){let u=!1;if(l.from<=s&&l.to>=i&&(!a&&l.type.isAnonymous||t(l)!==!1)){if(l.firstChild())continue;u=!0}for(;u&&r&&(a||!l.type.isAnonymous)&&r(l),!l.nextSibling();){if(!l.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Sk(ca.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,i)=>new os(this.type,t,r,i,this.propValues),e.makeTree||((t,r,i)=>new os(ca.none,t,r,i)))}static build(e){return rje(e)}}os.empty=new os(ca.none,[],[],0);class bk{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new bk(this.buffer,this.index)}}class af{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return ca.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],i=this.set.types[t],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,r,i,s){let{buffer:o}=this,a=-1;for(let l=e;l!=t&&!(Ree(s,i,o[l+1],o[l+2])&&(a=l,r>0));l=o[l+3]);return a}slice(e,t,r){let i=this.buffer,s=new Uint16Array(t-e),o=0;for(let a=e,l=0;a<t;){s[l++]=i[a++],s[l++]=i[a++]-r;let u=s[l++]=i[a++]-r;s[l++]=i[a++]-e,o=Math.max(o,u)}return new af(s,o,this.set)}}function Ree(n,e,t,r){switch(n){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function oy(n,e,t,r){for(var i;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let o=!r&&n instanceof ia&&n.index<0?null:n.parent;if(!o)return n;n=o}let s=r?0:ki.IgnoreOverlays;if(r)for(let o=n,a=o.parent;a;o=a,a=o.parent)o instanceof ia&&o.index<0&&((i=a.enter(e,t,s))===null||i===void 0?void 0:i.from)!=o.from&&(n=a);for(;;){let o=n.enter(e,t,s);if(!o)return n;n=o}}class Oee{cursor(e=0){return new GN(this,e)}getChild(e,t=null,r=null){let i=A$(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return A$(this,e,t,r)}resolve(e,t=0){return oy(this,e,t,!1)}resolveInner(e,t=0){return oy(this,e,t,!0)}matchContext(e){return jN(this,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),r=this;for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}get node(){return this}get next(){return this.parent}}class ia extends Oee{constructor(e,t,r,i){super(),this._tree=e,this.from=t,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,i,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,u=t>0?a.length:-1;e!=u;e+=t){let c=a[e],f=l[e]+o.from;if(Ree(i,r,f,f+c.length)){if(c instanceof af){if(s&ki.ExcludeBuffers)continue;let d=c.findChild(0,c.buffer.length,t,r-f,i);if(d>-1)return new Dc(new eje(o,c,e,f),null,d)}else if(s&ki.IncludeAnonymous||!c.type.isAnonymous||wk(c)){let d;if(!(s&ki.IgnoreMounts)&&(d=P_.get(c))&&!d.overlay)return new ia(d.tree,f,e,o);let h=new ia(c,f,e,o);return s&ki.IncludeAnonymous||!h.type.isAnonymous?h:h.nextChild(t<0?c.children.length-1:0,t,r,i)}}}if(s&ki.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let i;if(!(r&ki.IgnoreOverlays)&&(i=P_.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:o,to:a}of i.overlay)if((t>0?o<=s:o<s)&&(t<0?a>=s:a>s))return new ia(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function A$(n,e,t,r){let i=n.cursor(),s=[];if(!i.firstChild())return s;if(t!=null){for(let o=!1;!o;)if(o=i.type.is(t),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function jN(n,e,t=e.length-1){for(let r=n.parent;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}class eje{constructor(e,t,r,i){this.parent=e,this.buffer=t,this.index=r,this.start=i}}class Dc extends Oee{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){super(),this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,r);return s<0?null:new Dc(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&ki.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new Dc(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Dc(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Dc(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1];e.push(r.slice(i,s,o)),t.push(0)}return new os(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function kee(n){if(!n.length)return null;let e=0,t=n[0];for(let s=1;s<n.length;s++){let o=n[s];(o.from>t.from||o.to<t.to)&&(t=o,e=s)}let r=t instanceof ia&&t.index<0?null:t.parent,i=n.slice();return r?i[e]=r:i.splice(e,1),new tje(i,t)}class tje{constructor(e,t){this.heads=e,this.node=t}get next(){return kee(this.heads)}}function nje(n,e,t){let r=n.resolveInner(e,t),i=null;for(let s=r instanceof ia?r:r.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(i||(i=[r])).push(o.resolve(e,t)),s=o}else{let o=P_.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new ia(o.tree,o.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(oy(a,e,t,!1))}}return i?kee(i):r}class GN{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof ia)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof ia?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&ki.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&ki.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&ki.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:r}=i)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let s=t+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let a=r._tree.children[s];if(this.mode&ki.IncludeAnonymous||a instanceof af||!a.type.isAnonymous||wk(a))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;t=o,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)t=new Dc(this.buffer,t,this.stack[i]);return this.bufferNode=new Dc(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return jN(this.node,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return jN(this.node,e,i);let o=r[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function wk(n){return n.children.some(e=>e instanceof af||!e.type.isAnonymous||wk(e))}function rje(n){var e;let{buffer:t,nodeSet:r,maxBufferLength:i=ZWe,reused:s=[],minRepeatType:o=r.types.length}=n,a=Array.isArray(t)?new bk(t,t.length):t,l=r.types,u=0,c=0;function f(w,x,M,A,N,C){let{id:T,start:R,end:$,size:B}=a,z=c;for(;B<0;)if(a.next(),B==-1){let q=s[T];M.push(q),A.push(R-w);return}else if(B==-3){u=T;return}else if(B==-4){c=T;return}else throw new RangeError(`Unrecognized record size: ${B}`);let D=l[T],I,U,L=R-w;if($-R<=i&&(U=y(a.pos-x,N))){let q=new Uint16Array(U.size-U.skip),Z=a.pos-U.size,J=q.length;for(;a.pos>Z;)J=p(U.start,q,J);I=new af(q,$-U.start,r),L=U.start-w}else{let q=a.pos-B;a.next();let Z=[],J=[],Y=T>=o?T:-1,ee=0,ae=$;for(;a.pos>q;)Y>=0&&a.id==Y&&a.size>=0?(a.end<=ae-i&&(m(Z,J,R,ee,a.end,ae,Y,z),ee=Z.length,ae=a.end),a.next()):C>2500?d(R,q,Z,J):f(R,q,Z,J,Y,C+1);if(Y>=0&&ee>0&&ee<Z.length&&m(Z,J,R,ee,R,ae,Y,z),Z.reverse(),J.reverse(),Y>-1&&ee>0){let ce=h(D);I=Sk(D,Z,J,0,Z.length,0,$-R,ce,ce)}else I=v(D,Z,J,$-R,z-$)}M.push(I),A.push(L)}function d(w,x,M,A){let N=[],C=0,T=-1;for(;a.pos>x;){let{id:R,start:$,end:B,size:z}=a;if(z>4)a.next();else{if(T>-1&&$<T)break;T<0&&(T=B-i),N.push(R,$,B),C++,a.next()}}if(C){let R=new Uint16Array(C*4),$=N[N.length-2];for(let B=N.length-3,z=0;B>=0;B-=3)R[z++]=N[B],R[z++]=N[B+1]-$,R[z++]=N[B+2]-$,R[z++]=z;M.push(new af(R,N[2]-$,r)),A.push($-w)}}function h(w){return(x,M,A)=>{let N=0,C=x.length-1,T,R;if(C>=0&&(T=x[C])instanceof os){if(!C&&T.type==w&&T.length==A)return T;(R=T.prop(Sn.lookAhead))&&(N=M[C]+T.length+R)}return v(w,x,M,A,N)}}function m(w,x,M,A,N,C,T,R){let $=[],B=[];for(;w.length>A;)$.push(w.pop()),B.push(x.pop()+M-N);w.push(v(r.types[T],$,B,C-N,R-C)),x.push(N-M)}function v(w,x,M,A,N=0,C){if(u){let T=[Sn.contextHash,u];C=C?[T].concat(C):[T]}if(N>25){let T=[Sn.lookAhead,N];C=C?[T].concat(C):[T]}return new os(w,x,M,A,C)}function y(w,x){let M=a.fork(),A=0,N=0,C=0,T=M.end-i,R={size:0,start:0,skip:0};e:for(let $=M.pos-w;M.pos>$;){let B=M.size;if(M.id==x&&B>=0){R.size=A,R.start=N,R.skip=C,C+=4,A+=4,M.next();continue}let z=M.pos-B;if(B<0||z<$||M.start<T)break;let D=M.id>=o?4:0,I=M.start;for(M.next();M.pos>z;){if(M.size<0)if(M.size==-3)D+=4;else break e;else M.id>=o&&(D+=4);M.next()}N=I,A+=B,C+=D}return(x<0||A==w)&&(R.size=A,R.start=N,R.skip=C),R.size>4?R:void 0}function p(w,x,M){let{id:A,start:N,end:C,size:T}=a;if(a.next(),T>=0&&A<o){let R=M;if(T>4){let $=a.pos-(T-4);for(;a.pos>$;)M=p(w,x,M)}x[--M]=R,x[--M]=C-w,x[--M]=N-w,x[--M]=A}else T==-3?u=A:T==-4&&(c=A);return M}let S=[],b=[];for(;a.pos>0;)f(n.start||0,n.bufferStart||0,S,b,-1,0);let g=(e=n.length)!==null&&e!==void 0?e:S.length?b[0]+S[0].length:0;return new os(l[n.topID],S.reverse(),b.reverse(),g)}const T$=new WeakMap;function Zw(n,e){if(!n.isAnonymous||e instanceof af||e.type!=n)return 1;let t=T$.get(e);if(t==null){t=1;for(let r of e.children){if(r.type!=n||!(r instanceof os)){t=1;break}t+=Zw(n,r)}T$.set(e,t)}return t}function Sk(n,e,t,r,i,s,o,a,l){let u=0;for(let m=r;m<i;m++)u+=Zw(n,e[m]);let c=Math.ceil(u*1.5/8),f=[],d=[];function h(m,v,y,p,S){for(let b=y;b<p;){let g=b,w=v[b],x=Zw(n,m[b]);for(b++;b<p;b++){let M=Zw(n,m[b]);if(x+M>=c)break;x+=M}if(b==g+1){if(x>c){let M=m[g];h(M.children,M.positions,0,M.children.length,v[g]+S);continue}f.push(m[g])}else{let M=v[b-1]+m[b-1].length-w;f.push(Sk(n,m,v,g,b,w,M,null,l))}d.push(w+S-s)}}return h(e,t,r,i,0),(a||l)(f,d,o)}class Ed{constructor(e,t,r,i,s=!1,o=!1){this.from=e,this.to=t,this.tree=r,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],r=!1){let i=[new Ed(0,e.length,e,0,!1,r)];for(let s of t)s.to>e.length&&i.push(s);return i}static applyChanges(e,t,r=128){if(!t.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,u=0;;a++){let c=a<t.length?t[a]:null,f=c?c.fromA:1e9;if(f-l>=r)for(;o&&o.from<f;){let d=o;if(l>=d.from||f<=d.to||u){let h=Math.max(d.from,l)-u,m=Math.min(d.to,f)-u;d=h>=m?null:new Ed(h,m,d.tree,d.offset+u,a>0,!!c)}if(d&&i.push(d),o.to>f)break;o=s<e.length?e[s++]:null}if(!c)break;l=c.toA,u=c.toA-c.toB}return i}}class ije{startParse(e,t,r){return typeof e=="string"&&(e=new sje(e)),r=r?r.length?r.map(i=>new oT(i.from,i.to)):[new oT(0,0)]:[new oT(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let i=this.startParse(e,t,r);for(;;){let s=i.advance();if(s)return s}}}class sje{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Sn({perNode:!0});let oje=0;class hl{constructor(e,t,r){this.set=e,this.base=t,this.modified=r,this.id=oje++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new hl([],null,[]);if(t.set.push(t),e)for(let r of e.set)t.set.push(r);return t}static defineModifier(){let e=new R_;return t=>t.modified.indexOf(e)>-1?t:R_.get(t.base||t,t.modified.concat(e).sort((r,i)=>r.id-i.id))}}let aje=0;class R_{constructor(){this.instances=[],this.id=aje++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(a=>a.base==e&&lje(t,a.modified));if(r)return r;let i=[],s=new hl(i,e,t);for(let a of t)a.instances.push(s);let o=uje(t);for(let a of e.set)if(!a.modified.length)for(let l of o)i.push(R_.get(a,l));return s}}function lje(n,e){return n.length==e.length&&n.every((t,r)=>t==e[r])}function uje(n){let e=[[]];for(let t=0;t<n.length;t++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(n[t]));return e.sort((t,r)=>r.length-t.length)}function cje(n){let e=Object.create(null);for(let t in n){let r=n[t];Array.isArray(r)||(r=[r]);for(let i of t.split(" "))if(i){let s=[],o=2,a=i;for(let f=0;;){if(a=="..."&&f>0&&f+3==i.length){o=1;break}let d=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!d)throw new RangeError("Invalid path: "+i);if(s.push(d[0]=="*"?"":d[0][0]=='"'?JSON.parse(d[0]):d[0]),f+=d[0].length,f==i.length)break;let h=i[f++];if(f==i.length&&h=="!"){o=0;break}if(h!="/")throw new RangeError("Invalid path: "+i);a=i.slice(f)}let l=s.length-1,u=s[l];if(!u)throw new RangeError("Invalid path: "+i);let c=new O_(r,o,l>0?s.slice(0,l):null);e[u]=c.sort(e[u])}}return Iee.add(e)}const Iee=new Sn;class O_{constructor(e,t,r,i){this.tags=e,this.mode=t,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}O_.empty=new O_([],2,null);function Lee(n,e){let t=Object.create(null);for(let s of n)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let o=i;for(let a of s)for(let l of a.set){let u=t[l.id];if(u){o=o?o+" "+u:u;break}}return o},scope:r}}function fje(n,e){let t=null;for(let r of n){let i=r.style(e);i&&(t=t?t+" "+i:i)}return t}function dje(n,e,t,r=0,i=n.length){let s=new hje(r,Array.isArray(e)?e:[e],t);s.highlightRange(n.cursor(),r,i,"",s.highlighters),s.flush(i)}class hje{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,i,s){let{type:o,from:a,to:l}=e;if(a>=r||l<=t)return;o.isTop&&(s=this.highlighters.filter(h=>!h.scope||h.scope(o)));let u=i,c=pje(e)||O_.empty,f=fje(s,c.tags);if(f&&(u&&(u+=" "),u+=f,c.mode==1&&(i+=(i?" ":"")+f)),this.startSpan(Math.max(t,a),u),c.opaque)return;let d=e.tree&&e.tree.prop(Sn.mounted);if(d&&d.overlay){let h=e.node.enter(d.overlay[0].from+a,1),m=this.highlighters.filter(y=>!y.scope||y.scope(d.tree.type)),v=e.firstChild();for(let y=0,p=a;;y++){let S=y<d.overlay.length?d.overlay[y]:null,b=S?S.from+a:l,g=Math.max(t,p),w=Math.min(r,b);if(g<w&&v)for(;e.from<w&&(this.highlightRange(e,g,w,i,s),this.startSpan(Math.min(w,e.to),u),!(e.to>=b||!e.nextSibling())););if(!S||b>r)break;p=S.to+a,p>t&&(this.highlightRange(h.cursor(),Math.max(t,S.from+a),Math.min(r,p),"",m),this.startSpan(Math.min(r,p),u))}v&&e.parent()}else if(e.firstChild()){d&&(i="");do if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,i,s),this.startSpan(Math.min(r,e.to),u)}while(e.nextSibling());e.parent()}}}function pje(n){let e=n.type.prop(Iee);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const pt=hl.define,ow=pt(),pc=pt(),D$=pt(pc),N$=pt(pc),mc=pt(),aw=pt(mc),aT=pt(mc),ul=pt(),Uf=pt(ul),al=pt(),ll=pt(),qN=pt(),nv=pt(qN),lw=pt(),nt={comment:ow,lineComment:pt(ow),blockComment:pt(ow),docComment:pt(ow),name:pc,variableName:pt(pc),typeName:D$,tagName:pt(D$),propertyName:N$,attributeName:pt(N$),className:pt(pc),labelName:pt(pc),namespace:pt(pc),macroName:pt(pc),literal:mc,string:aw,docString:pt(aw),character:pt(aw),attributeValue:pt(aw),number:aT,integer:pt(aT),float:pt(aT),bool:pt(mc),regexp:pt(mc),escape:pt(mc),color:pt(mc),url:pt(mc),keyword:al,self:pt(al),null:pt(al),atom:pt(al),unit:pt(al),modifier:pt(al),operatorKeyword:pt(al),controlKeyword:pt(al),definitionKeyword:pt(al),moduleKeyword:pt(al),operator:ll,derefOperator:pt(ll),arithmeticOperator:pt(ll),logicOperator:pt(ll),bitwiseOperator:pt(ll),compareOperator:pt(ll),updateOperator:pt(ll),definitionOperator:pt(ll),typeOperator:pt(ll),controlOperator:pt(ll),punctuation:qN,separator:pt(qN),bracket:nv,angleBracket:pt(nv),squareBracket:pt(nv),paren:pt(nv),brace:pt(nv),content:ul,heading:Uf,heading1:pt(Uf),heading2:pt(Uf),heading3:pt(Uf),heading4:pt(Uf),heading5:pt(Uf),heading6:pt(Uf),contentSeparator:pt(ul),list:pt(ul),quote:pt(ul),emphasis:pt(ul),strong:pt(ul),link:pt(ul),monospace:pt(ul),strikethrough:pt(ul),inserted:pt(),deleted:pt(),changed:pt(),invalid:pt(),meta:lw,documentMeta:pt(lw),annotation:pt(lw),processingInstruction:pt(lw),definition:hl.defineModifier(),constant:hl.defineModifier(),function:hl.defineModifier(),standard:hl.defineModifier(),local:hl.defineModifier(),special:hl.defineModifier()};Lee([{tag:nt.link,class:"tok-link"},{tag:nt.heading,class:"tok-heading"},{tag:nt.emphasis,class:"tok-emphasis"},{tag:nt.strong,class:"tok-strong"},{tag:nt.keyword,class:"tok-keyword"},{tag:nt.atom,class:"tok-atom"},{tag:nt.bool,class:"tok-bool"},{tag:nt.url,class:"tok-url"},{tag:nt.labelName,class:"tok-labelName"},{tag:nt.inserted,class:"tok-inserted"},{tag:nt.deleted,class:"tok-deleted"},{tag:nt.literal,class:"tok-literal"},{tag:nt.string,class:"tok-string"},{tag:nt.number,class:"tok-number"},{tag:[nt.regexp,nt.escape,nt.special(nt.string)],class:"tok-string2"},{tag:nt.variableName,class:"tok-variableName"},{tag:nt.local(nt.variableName),class:"tok-variableName tok-local"},{tag:nt.definition(nt.variableName),class:"tok-variableName tok-definition"},{tag:nt.special(nt.variableName),class:"tok-variableName2"},{tag:nt.definition(nt.propertyName),class:"tok-propertyName tok-definition"},{tag:nt.typeName,class:"tok-typeName"},{tag:nt.namespace,class:"tok-namespace"},{tag:nt.className,class:"tok-className"},{tag:nt.macroName,class:"tok-macroName"},{tag:nt.propertyName,class:"tok-propertyName"},{tag:nt.operator,class:"tok-operator"},{tag:nt.comment,class:"tok-comment"},{tag:nt.meta,class:"tok-meta"},{tag:nt.invalid,class:"tok-invalid"},{tag:nt.punctuation,class:"tok-punctuation"}]);var lT;const Sv=new Sn,mje=new Sn;class wl{constructor(e,t,r=[],i=""){this.data=e,this.name=i,bn.prototype.hasOwnProperty("tree")||Object.defineProperty(bn.prototype,"tree",{get(){return cs(this)}}),this.parser=t,this.extension=[lf.of(this),bn.languageData.of((s,o,a)=>{let l=P$(s,o,a),u=l.type.prop(Sv);if(!u)return[];let c=s.facet(u),f=l.type.prop(mje);if(f){let d=l.resolve(o-l.from,a);for(let h of f)if(h.test(d,s)){let m=s.facet(h.facet);return h.type=="replace"?m:m.concat(c)}}return c})].concat(r)}isActiveAt(e,t,r=-1){return P$(e,t,r).type.prop(Sv)==this.data}findRegions(e){let t=e.facet(lf);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],i=(s,o)=>{if(s.prop(Sv)==this.data){r.push({from:o,to:o+s.length});return}let a=s.prop(Sn.mounted);if(a){if(a.tree.prop(Sv)==this.data){if(a.overlay)for(let l of a.overlay)r.push({from:l.from+o,to:l.to+o});else r.push({from:o,to:o+s.length});return}else if(a.overlay){let l=r.length;if(i(a.tree,a.overlay[0].from+o),r.length>l)return}}for(let l=0;l<s.children.length;l++){let u=s.children[l];u instanceof os&&i(u,s.positions[l]+o)}};return i(cs(e),0),r}get allowsNesting(){return!0}}wl.setState=dn.define();function P$(n,e,t){let r=n.facet(lf),i=cs(n).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,t,ki.ExcludeBuffers))s.type.isTop&&(i=s);return i}function cs(n){let e=n.field(wl.state,!1);return e?e.tree:os.empty}class gje{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}}let rv=null;class k_{constructor(e,t,r=[],i,s,o,a,l){this.parser=e,this.state=t,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new k_(e,t,[],os.empty,0,r,[],null)}startParse(){return this.parser.startParse(new gje(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=os.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Ed.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Ed.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=rv;rv=this;try{return e()}finally{rv=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=R$(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((u,c,f,d)=>l.push({fromA:u,toA:c,fromB:f,toB:d})),r=Ed.applyChanges(r,l),i=os.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),f=e.mapPos(u.to,-1);c<f&&a.push({from:c,to:f})}}}return new k_(this.parser,t,r,i,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=R$(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends ije{createParse(t,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let l=rv;if(l){for(let u of i)l.tempSkipped.push(u);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new os(ca.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return rv}}function R$(n,e,t){return Ed.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class Em{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new Em(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=k_.create(e.facet(lf).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new Em(r)}}wl.state=Vi.define({create:Em.init,update(n,e){for(let t of e.effects)if(t.is(wl.setState))return t.value;return e.startState.facet(lf)!=e.state.facet(lf)?Em.init(e.state):n.apply(e)}});let Fee=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Fee=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const uT=typeof navigator<"u"&&(!((lT=navigator.scheduling)===null||lT===void 0)&&lT.isInputPending)?()=>navigator.scheduling.isInputPending():null,vje=Hr.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(wl.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(wl.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=Fee(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(wl.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!uT?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<i&&r.doc.length>i+1e3,l=s.context.work(()=>uT&&uT()||Date.now()>o,i+(a?0:1e5));this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:wl.setState.of(new Em(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Xs(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),lf=Rt.define({combine(n){return n.length?n[0]:null},enables:n=>[wl.state,vje,bt.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]}),yje=Rt.define(),CM=Rt.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function I_(n){let e=n.facet(CM);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function ay(n,e){let t="",r=n.tabSize,i=n.facet(CM)[0];if(i=="	"){for(;e>=r;)t+="	",e-=r;i=" "}for(let s=0;s<e;s++)t+=i;return t}function _k(n,e){n instanceof bn&&(n=new AM(n));for(let r of n.state.facet(yje)){let i=r(n,e);if(i!==void 0)return i}let t=cs(n.state);return t.length>=e?bje(n,t,e):null}class AM{constructor(e,t={}){this.state=e,this.options=t,this.unit=I_(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,t);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,t=1){let{text:r,from:i}=this.lineAt(e,t),s=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,t=e.length){return tg(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:i}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const xje=new Sn;function bje(n,e,t){let r=e.resolveStack(t),i=r.node.enterUnfinishedNodesBefore(t);if(i!=r.node){let s=[];for(let o=i;o!=r.node;o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)r={node:s[o],next:r}}return Bee(r,n,t)}function Bee(n,e,t){for(let r=n;r;r=r.next){let i=Sje(r.node);if(i)return i(Ek.create(e,t,r))}return 0}function wje(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function Sje(n){let e=n.type.prop(xje);if(e)return e;let t=n.firstChild,r;if(t&&(r=t.type.prop(Sn.closedBy))){let i=n.lastChild,s=i&&r.indexOf(i.name)>-1;return o=>Cje(o,!0,1,void 0,s&&!wje(o)?i.from:void 0)}return n.parent==null?_je:null}function _je(){return 0}class Ek extends AM{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.context=r}get node(){return this.context.node}static create(e,t,r){return new Ek(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(t.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(Eje(r,e))break;t=this.state.doc.lineAt(r.from)}return this.lineIndent(t.from)}continue(){return Bee(this.context.next,this.base,this.pos)}}function Eje(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function Mje(n){let e=n.node,t=e.childAfter(e.from),r=e.lastChild;if(!t)return null;let i=n.options.simulateBreak,s=n.state.doc.lineAt(t.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let a=t.to;;){let l=e.childAfter(a);if(!l||l==r)return null;if(!l.type.isSkipped)return l.from<o?t:null;a=l.to}}function Cje(n,e,t,r,i){let s=n.textAfter,o=s.match(/^\s*/)[0].length,a=i==n.pos+o,l=Mje(n);return l?a?n.column(l.from):n.column(l.to):n.baseIndent+(a?0:n.unit*t)}const Aje=200;function Tje(){return bn.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:r}=n.newSelection.main,i=t.lineAt(r);if(r>i.from+Aje)return n;let s=t.sliceString(i.from,r);if(!e.some(u=>u.test(s)))return n;let{state:o}=n,a=-1,l=[];for(let{head:u}of o.selection.ranges){let c=o.doc.lineAt(u);if(c.from==a)continue;a=c.from;let f=_k(o,c.from);if(f==null)continue;let d=/^\s*/.exec(c.text)[0],h=ay(o,f);d!=h&&l.push({from:c.from,to:c.from+d.length,insert:h})}return l.length?[n,{changes:l,sequential:!0}]:n})}const Dje=Rt.define(),Nje=new Sn;function Pje(n,e,t){let r=cs(n);if(r.length<t)return null;let i=r.resolveStack(t,1),s=null;for(let o=i;o;o=o.next){let a=o.node;if(a.to<=t||a.from>t)continue;if(s&&a.from<e)break;let l=a.type.prop(Nje);if(l&&(a.to<r.length-50||r.length==n.doc.length||!Rje(a))){let u=l(a,n);u&&u.from<=t&&u.from>=e&&u.to>t&&(s=u)}}return s}function Rje(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function L_(n,e,t){for(let r of n.facet(Dje)){let i=r(n,e,t);if(i)return i}return Pje(n,e,t)}function zee(n,e){let t=e.mapPos(n.from,1),r=e.mapPos(n.to,-1);return t>=r?void 0:{from:t,to:r}}const TM=dn.define({map:zee}),Ky=dn.define({map:zee});function Uee(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(r=>r.from<=t&&r.to>=t)||e.push(n.lineBlockAt(t));return e}const $d=Vi.define({create(){return Ut.none},update(n,e){n=n.map(e.changes);for(let t of e.effects)if(t.is(TM)&&!Oje(n,t.value.from,t.value.to)){let{preparePlaceholder:r}=e.state.facet(Hee),i=r?Ut.replace({widget:new Uje(r(e.state,t.value))}):O$;n=n.update({add:[i.range(t.value.from,t.value.to)]})}else t.is(Ky)&&(n=n.update({filter:(r,i)=>t.value.from!=r||t.value.to!=i,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:r}=e.selection.main;n.between(r,r,(i,s)=>{i<r&&s>r&&(t=!0)}),t&&(n=n.update({filterFrom:r,filterTo:r,filter:(i,s)=>s<=r||i>=r}))}return n},provide:n=>bt.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(r,i)=>{t.push(r,i)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let r=n[t++],i=n[t++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(O$.range(r,i))}return Ut.set(e,!0)}});function F_(n,e,t){var r;let i=null;return(r=n.field($d,!1))===null||r===void 0||r.between(e,t,(s,o)=>{(!i||i.from>s)&&(i={from:s,to:o})}),i}function Oje(n,e,t){let r=!1;return n.between(e,e,(i,s)=>{i==e&&s==t&&(r=!0)}),r}function $ee(n,e){return n.field($d,!1)?e:e.concat(dn.appendConfig.of(Wee()))}const kje=n=>{for(let e of Uee(n)){let t=L_(n.state,e.from,e.to);if(t)return n.dispatch({effects:$ee(n.state,[TM.of(t),Vee(n,t)])}),!0}return!1},Ije=n=>{if(!n.state.field($d,!1))return!1;let e=[];for(let t of Uee(n)){let r=F_(n.state,t.from,t.to);r&&e.push(Ky.of(r),Vee(n,r,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function Vee(n,e,t=!0){let r=n.state.doc.lineAt(e.from).number,i=n.state.doc.lineAt(e.to).number;return bt.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${r} ${n.state.phrase("to")} ${i}.`)}const Lje=n=>{let{state:e}=n,t=[];for(let r=0;r<e.doc.length;){let i=n.lineBlockAt(r),s=L_(e,i.from,i.to);s&&t.push(TM.of(s)),r=(s?n.lineBlockAt(s.to):i).to+1}return t.length&&n.dispatch({effects:$ee(n.state,t)}),!!t.length},Fje=n=>{let e=n.state.field($d,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(r,i)=>{t.push(Ky.of({from:r,to:i}))}),n.dispatch({effects:t}),!0},Bje=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:kje},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Ije},{key:"Ctrl-Alt-[",run:Lje},{key:"Ctrl-Alt-]",run:Fje}],zje={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},Hee=Rt.define({combine(n){return Vl(n,zje)}});function Wee(n){return[$d,Hje]}function jee(n,e){let{state:t}=n,r=t.facet(Hee),i=o=>{let a=n.lineBlockAt(n.posAtDOM(o.target)),l=F_(n.state,a.from,a.to);l&&n.dispatch({effects:Ky.of(l)}),o.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(n,i,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",t.phrase("folded code")),s.title=t.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const O$=Ut.replace({widget:new class extends Hu{toDOM(n){return jee(n,null)}}});class Uje extends Hu{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return jee(e,this.value)}}const $je={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class cT extends Fu{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function Vje(n={}){let e=Object.assign(Object.assign({},$je),n),t=new cT(e,!0),r=new cT(e,!1),i=Hr.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(lf)!=o.state.facet(lf)||o.startState.field($d,!1)!=o.state.field($d,!1)||cs(o.startState)!=cs(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let a=new nf;for(let l of o.viewportLineBlocks){let u=F_(o.state,l.from,l.to)?r:L_(o.state,l.from,l.to)?t:null;u&&a.add(l.from,l.from,u)}return a.finish()}}),{domEventHandlers:s}=e;return[i,$We({class:"cm-foldGutter",markers(o){var a;return((a=o.plugin(i))===null||a===void 0?void 0:a.markers)||An.empty},initialSpacer(){return new cT(e,!1)},domEventHandlers:Object.assign(Object.assign({},s),{click:(o,a,l)=>{if(s.click&&s.click(o,a,l))return!0;let u=F_(o.state,a.from,a.to);if(u)return o.dispatch({effects:Ky.of(u)}),!0;let c=L_(o.state,a.from,a.to);return c?(o.dispatch({effects:TM.of(c)}),!0):!1}})}),Wee()]}const Hje=bt.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Zy{constructor(e,t){this.specs=e;let r;function i(a){let l=rf.newName();return(r||(r=Object.create(null)))["."+l]=a,l}const s=typeof t.all=="string"?t.all:t.all?i(t.all):void 0,o=t.scope;this.scope=o instanceof wl?a=>a.prop(Sv)==o.data:o?a=>a==o:void 0,this.style=Lee(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=r?new rf(r):null,this.themeType=t.themeType}static define(e,t){return new Zy(e,t||{})}}const XN=Rt.define(),Gee=Rt.define({combine(n){return n.length?[n[0]]:null}});function fT(n){let e=n.facet(XN);return e.length?e:n.facet(Gee)}function qee(n,e){let t=[jje],r;return n instanceof Zy&&(n.module&&t.push(bt.styleModule.of(n.module)),r=n.themeType),e!=null&&e.fallback?t.push(Gee.of(n)):r?t.push(XN.computeN([bt.darkTheme],i=>i.facet(bt.darkTheme)==(r=="dark")?[n]:[])):t.push(XN.of(n)),t}class Wje{constructor(e){this.markCache=Object.create(null),this.tree=cs(e.state),this.decorations=this.buildDeco(e,fT(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=cs(e.state),r=fT(e.state),i=r!=fT(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<s.to&&!i&&t.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,t){if(!t||!this.tree.length)return Ut.none;let r=new nf;for(let{from:i,to:s}of e.visibleRanges)dje(this.tree,t,(o,a,l)=>{r.add(o,a,this.markCache[l]||(this.markCache[l]=Ut.mark({class:l})))},i,s);return r.finish()}}const jje=rh.high(Hr.fromClass(Wje,{decorations:n=>n.decorations})),Gje=Zy.define([{tag:nt.meta,color:"#404740"},{tag:nt.link,textDecoration:"underline"},{tag:nt.heading,textDecoration:"underline",fontWeight:"bold"},{tag:nt.emphasis,fontStyle:"italic"},{tag:nt.strong,fontWeight:"bold"},{tag:nt.strikethrough,textDecoration:"line-through"},{tag:nt.keyword,color:"#708"},{tag:[nt.atom,nt.bool,nt.url,nt.contentSeparator,nt.labelName],color:"#219"},{tag:[nt.literal,nt.inserted],color:"#164"},{tag:[nt.string,nt.deleted],color:"#a11"},{tag:[nt.regexp,nt.escape,nt.special(nt.string)],color:"#e40"},{tag:nt.definition(nt.variableName),color:"#00f"},{tag:nt.local(nt.variableName),color:"#30a"},{tag:[nt.typeName,nt.namespace],color:"#085"},{tag:nt.className,color:"#167"},{tag:[nt.special(nt.variableName),nt.macroName],color:"#256"},{tag:nt.definition(nt.propertyName),color:"#00c"},{tag:nt.comment,color:"#940"},{tag:nt.invalid,color:"#f00"}]),qje=bt.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Xee=1e4,Yee="()[]{}",Kee=Rt.define({combine(n){return Vl(n,{afterCursor:!0,brackets:Yee,maxScanDistance:Xee,renderMatch:Kje})}}),Xje=Ut.mark({class:"cm-matchingBracket"}),Yje=Ut.mark({class:"cm-nonmatchingBracket"});function Kje(n){let e=[],t=n.matched?Xje:Yje;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const Zje=Vi.define({create(){return Ut.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],r=e.state.facet(Kee);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=Sl(e.state,i.head,-1,r)||i.head>0&&Sl(e.state,i.head-1,1,r)||r.afterCursor&&(Sl(e.state,i.head,1,r)||i.head<e.state.doc.length&&Sl(e.state,i.head+1,-1,r));s&&(t=t.concat(r.renderMatch(s,e.state)))}return Ut.set(t,!0)},provide:n=>bt.decorations.from(n)}),Jje=[Zje,qje];function Qje(n={}){return[Kee.of(n),Jje]}const eGe=new Sn;function YN(n,e,t){let r=n.prop(e<0?Sn.openedBy:Sn.closedBy);if(r)return r;if(n.name.length==1){let i=t.indexOf(n.name);if(i>-1&&i%2==(e<0?1:0))return[t[i+e]]}return null}function KN(n){let e=n.type.prop(eGe);return e?e(n.node):n}function Sl(n,e,t,r={}){let i=r.maxScanDistance||Xee,s=r.brackets||Yee,o=cs(n),a=o.resolveInner(e,t);for(let l=a;l;l=l.parent){let u=YN(l.type,t,s);if(u&&l.from<l.to){let c=KN(l);if(c&&(t>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return tGe(n,e,t,l,c,u,s)}}return nGe(n,e,t,o,a.type,i,s)}function tGe(n,e,t,r,i,s,o){let a=r.parent,l={from:i.from,to:i.to},u=0,c=a==null?void 0:a.cursor();if(c&&(t<0?c.childBefore(r.from):c.childAfter(r.to)))do if(t<0?c.to<=r.from:c.from>=r.to){if(u==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let f=KN(c);return{start:l,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(YN(c.type,t,o))u++;else if(YN(c.type,-t,o)){if(u==0){let f=KN(c);return{start:l,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}u--}}while(t<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function nGe(n,e,t,r,i,s,o){let a=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=t>0)return null;let u={from:t<0?e-1:e,to:t>0?e+1:e},c=n.doc.iterRange(e,t>0?n.doc.length:0),f=0;for(let d=0;!c.next().done&&d<=s;){let h=c.value;t<0&&(d+=h.length);let m=e+d*t;for(let v=t>0?0:h.length-1,y=t>0?h.length:-1;v!=y;v+=t){let p=o.indexOf(h[v]);if(!(p<0||r.resolveInner(m+v,1).type!=i))if(p%2==0==t>0)f++;else{if(f==1)return{start:u,end:{from:m+v,to:m+v+1},matched:p>>1==l>>1};f--}}t>0&&(d+=h.length)}return c.done?{start:u,matched:!1}:null}const rGe=Object.create(null),k$=[ca.none],I$=[],L$=Object.create(null),iGe=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])iGe[n]=sGe(rGe,e);function dT(n,e){I$.indexOf(n)>-1||(I$.push(n),console.warn(e))}function sGe(n,e){let t=[];for(let a of e.split(" ")){let l=[];for(let u of a.split(".")){let c=n[u]||nt[u];c?typeof c=="function"?l.length?l=l.map(c):dT(u,`Modifier ${u} used at start of tag`):l.length?dT(u,`Tag ${u} used as modifier`):l=Array.isArray(c)?c:[c]:dT(u,`Unknown highlighting tag ${u}`)}for(let u of l)t.push(u)}if(!t.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+t.map(a=>a.id),s=L$[i];if(s)return s.id;let o=L$[i]=ca.define({id:k$.length,name:r,props:[cje({[r]:t})]});return k$.push(o),o.id}cr.RTL,cr.LTR;const oGe=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),r=Ck(n.state,t.from);return r.line?aGe(n):r.block?uGe(n):!1};function Mk(n,e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let i=n(e,t);return i?(r(t.update(i)),!0):!1}}const aGe=Mk(dGe,0),lGe=Mk(Zee,0),uGe=Mk((n,e)=>Zee(n,e,fGe(e)),0);function Ck(n,e){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const iv=50;function cGe(n,{open:e,close:t},r,i){let s=n.sliceDoc(r-iv,r),o=n.sliceDoc(i,i+iv),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,u=s.length-a;if(s.slice(u-e.length,u)==e&&o.slice(l,l+t.length)==t)return{open:{pos:r-a,margin:a&&1},close:{pos:i+l,margin:l&&1}};let c,f;i-r<=2*iv?c=f=n.sliceDoc(r,i):(c=n.sliceDoc(r,r+iv),f=n.sliceDoc(i-iv,i));let d=/^\s*/.exec(c)[0].length,h=/\s*$/.exec(f)[0].length,m=f.length-h-t.length;return c.slice(d,d+e.length)==e&&f.slice(m,m+t.length)==t?{open:{pos:r+d+e.length,margin:/\s/.test(c.charAt(d+e.length))?1:0},close:{pos:i-h-t.length,margin:/\s/.test(f.charAt(m-1))?1:0}}:null}function fGe(n){let e=[];for(let t of n.selection.ranges){let r=n.doc.lineAt(t.from),i=t.to<=r.to?r:n.doc.lineAt(t.to),s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function Zee(n,e,t=e.selection.ranges){let r=t.map(s=>Ck(e,s.from).block);if(!r.every(s=>s))return null;let i=t.map((s,o)=>cGe(e,r[o],s.from,s.to));if(n!=2&&!i.every(s=>s))return{changes:e.changes(t.map((s,o)=>i[o]?[]:[{from:s.from,insert:r[o].open+" "},{from:s.to,insert:" "+r[o].close}]))};if(n!=1&&i.some(s=>s)){let s=[];for(let o=0,a;o<i.length;o++)if(a=i[o]){let l=r[o],{open:u,close:c}=a;s.push({from:u.pos-l.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+l.close.length})}return{changes:s}}return null}function dGe(n,e,t=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:o}of t){let a=r.length,l=1e9,u=Ck(e,s).line;if(u){for(let c=s;c<=o;){let f=e.doc.lineAt(c);if(f.from>i&&(s==o||o>f.from)){i=f.from;let d=/^\s*/.exec(f.text)[0].length,h=d==f.length,m=f.text.slice(d,d+u.length)==u?d:-1;d<f.text.length&&d<l&&(l=d),r.push({line:f,comment:m,token:u,indent:d,empty:h,single:!1})}c=f.to+1}if(l<1e9)for(let c=a;c<r.length;c++)r[c].indent<r[c].line.text.length&&(r[c].indent=l);r.length==a+1&&(r[a].single=!0)}}if(n!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:u,empty:c,single:f}of r)(f||!c)&&s.push({from:a.from+u,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(n!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of r)if(a>=0){let u=o.from+a,c=u+l.length;o.text[c-o.from]==" "&&c++,s.push({from:u,to:c})}return{changes:s}}return null}const ZN=$l.define(),hGe=$l.define(),pGe=Rt.define(),Jee=Rt.define({combine(n){return Vl(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(r,i)=>e(r,i)||t(r,i)})}}),Qee=Vi.define({create(){return _l.empty},update(n,e){let t=e.state.facet(Jee),r=e.annotation(ZN);if(r){let l=Ys.fromTransaction(e,r.selection),u=r.side,c=u==0?n.undone:n.done;return l?c=B_(c,c.length,t.minDepth,l):c=nte(c,e.startState.selection),new _l(u==0?r.rest:c,u==0?c:r.rest)}let i=e.annotation(hGe);if((i=="full"||i=="before")&&(n=n.isolate()),e.annotation(ai.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let s=Ys.fromTransaction(e),o=e.annotation(ai.time),a=e.annotation(ai.userEvent);return s?n=n.addChanges(s,o,a,t,e):e.selection&&(n=n.addSelection(e.startState.selection,o,a,t.newGroupDelay)),(i=="full"||i=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new _l(n.done.map(Ys.fromJSON),n.undone.map(Ys.fromJSON))}});function mGe(n={}){return[Qee,Jee.of(n),bt.domEventHandlers({beforeinput(e,t){let r=e.inputType=="historyUndo"?ete:e.inputType=="historyRedo"?JN:null;return r?(e.preventDefault(),r(t)):!1}})]}function DM(n,e){return function({state:t,dispatch:r}){if(!e&&t.readOnly)return!1;let i=t.field(Qee,!1);if(!i)return!1;let s=i.pop(n,t,e);return s?(r(s),!0):!1}}const ete=DM(0,!1),JN=DM(1,!1),gGe=DM(0,!0),vGe=DM(1,!0);class Ys{constructor(e,t,r,i,s){this.changes=e,this.effects=t,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new Ys(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Ys(e.changes&&ii.fromJSON(e.changes),[],e.mapped&&Nl.fromJSON(e.mapped),e.startSelection&&it.fromJSON(e.startSelection),e.selectionsAfter.map(it.fromJSON))}static fromTransaction(e,t){let r=ea;for(let i of e.startState.facet(pGe)){let s=i(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new Ys(e.changes.invert(e.startState.doc),r,void 0,t||e.startState.selection,ea)}static selection(e){return new Ys(void 0,ea,void 0,void 0,e)}}function B_(n,e,t,r){let i=e+1>t+20?e-t-1:0,s=n.slice(i,e);return s.push(r),s}function yGe(n,e){let t=[],r=!1;return n.iterChangedRanges((i,s)=>t.push(i,s)),e.iterChangedRanges((i,s,o,a)=>{for(let l=0;l<t.length;){let u=t[l++],c=t[l++];a>=u&&o<=c&&(r=!0)}}),r}function xGe(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,r)=>t.empty!=e.ranges[r].empty).length===0}function tte(n,e){return n.length?e.length?n.concat(e):n:e}const ea=[],bGe=200;function nte(n,e){if(n.length){let t=n[n.length-1],r=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-bGe));return r.length&&r[r.length-1].eq(e)?n:(r.push(e),B_(n,n.length-1,1e9,t.setSelAfter(r)))}else return[Ys.selection([e])]}function wGe(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function hT(n,e){if(!n.length)return n;let t=n.length,r=ea;for(;t;){let i=SGe(n[t-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let s=n.slice(0,t);return s[t-1]=i,s}else e=i.mapped,t--,r=i.selectionsAfter}return r.length?[Ys.selection(r)]:ea}function SGe(n,e,t){let r=tte(n.selectionsAfter.length?n.selectionsAfter.map(a=>a.map(e)):ea,t);if(!n.changes)return Ys.selection(r);let i=n.changes.map(e),s=e.mapDesc(n.changes,!0),o=n.mapped?n.mapped.composeDesc(s):s;return new Ys(i,dn.mapEffects(n.effects,e),o,n.startSelection.map(s),r)}const _Ge=/^(input\.type|delete)($|\.)/;class _l{constructor(e,t,r=0,i=void 0){this.done=e,this.undone=t,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new _l(this.done,this.undone):this}addChanges(e,t,r,i,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!r||_Ge.test(r))&&(!a.selectionsAfter.length&&t-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,yGe(a.changes,e.changes))||r=="input.type.compose")?o=B_(o,o.length-1,i.minDepth,new Ys(e.changes.compose(a.changes),tte(e.effects,a.effects),a.mapped,a.startSelection,ea)):o=B_(o,o.length,i.minDepth,e),new _l(o,ea,t,r)}addSelection(e,t,r,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:ea;return s.length>0&&t-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&xGe(s[s.length-1],e)?this:new _l(nte(this.done,e),this.undone,t,r)}addMapping(e){return new _l(hT(this.done,e),hT(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1],o=s.selectionsAfter[0]||t.selection;if(r&&s.selectionsAfter.length)return t.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:ZN.of({side:e,rest:wGe(i),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=i.length==1?ea:i.slice(0,i.length-1);return s.mapped&&(a=hT(a,s.mapped)),t.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:ZN.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}_l.empty=new _l(ea,ea);const EGe=[{key:"Mod-z",run:ete,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:JN,preventDefault:!0},{linux:"Ctrl-Shift-z",run:JN,preventDefault:!0},{key:"Mod-u",run:gGe,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:vGe,preventDefault:!0}];function ng(n,e){return it.create(n.ranges.map(e),n.mainIndex)}function Hl(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function ja({state:n,dispatch:e},t){let r=ng(n.selection,t);return r.eq(n.selection,!0)?!1:(e(Hl(n,r)),!0)}function NM(n,e){return it.cursor(e?n.to:n.from)}function rte(n,e){return ja(n,t=>t.empty?n.moveByChar(t,e):NM(t,e))}function hs(n){return n.textDirectionAt(n.state.selection.main.head)==cr.LTR}const ite=n=>rte(n,!hs(n)),ste=n=>rte(n,hs(n));function ote(n,e){return ja(n,t=>t.empty?n.moveByGroup(t,e):NM(t,e))}const MGe=n=>ote(n,!hs(n)),CGe=n=>ote(n,hs(n));function AGe(n,e,t){if(e.type.prop(t))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function PM(n,e,t){let r=cs(n).resolveInner(e.head),i=t?Sn.closedBy:Sn.openedBy;for(let l=e.head;;){let u=t?r.childAfter(l):r.childBefore(l);if(!u)break;AGe(n,u,i)?r=u:l=t?u.to:u.from}let s=r.type.prop(i),o,a;return s&&(o=t?Sl(n,r.from,1):Sl(n,r.to,-1))&&o.matched?a=t?o.end.to:o.end.from:a=t?r.to:r.from,it.cursor(a,t?-1:1)}const TGe=n=>ja(n,e=>PM(n.state,e,!hs(n))),DGe=n=>ja(n,e=>PM(n.state,e,hs(n)));function ate(n,e){return ja(n,t=>{if(!t.empty)return NM(t,e);let r=n.moveVertically(t,e);return r.head!=t.head?r:n.moveToLineBoundary(t,e)})}const lte=n=>ate(n,!1),ute=n=>ate(n,!0);function cte(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,r=0,i;if(e){for(let s of n.state.facet(bt.scrollMargins)){let o=s(n);o!=null&&o.top&&(t=Math.max(o==null?void 0:o.top,t)),o!=null&&o.bottom&&(r=Math.max(o==null?void 0:o.bottom,r))}i=n.scrollDOM.clientHeight-t-r}else i=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:r,selfScroll:e,height:Math.max(n.defaultLineHeight,i-5)}}function fte(n,e){let t=cte(n),{state:r}=n,i=ng(r.selection,o=>o.empty?n.moveVertically(o,e,t.height):NM(o,e));if(i.eq(r.selection))return!1;let s;if(t.selfScroll){let o=n.coordsAtPos(r.selection.main.head),a=n.scrollDOM.getBoundingClientRect(),l=a.top+t.marginTop,u=a.bottom-t.marginBottom;o&&o.top>l&&o.bottom<u&&(s=bt.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-l}))}return n.dispatch(Hl(r,i),{effects:s}),!0}const F$=n=>fte(n,!1),QN=n=>fte(n,!0);function bf(n,e,t){let r=n.lineBlockAt(e.head),i=n.moveToLineBoundary(e,t);if(i.head==e.head&&i.head!=(t?r.to:r.from)&&(i=n.moveToLineBoundary(e,t,!1)),!t&&i.head==r.from&&r.length){let s=/^\s*/.exec(n.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=it.cursor(r.from+s))}return i}const NGe=n=>ja(n,e=>bf(n,e,!0)),PGe=n=>ja(n,e=>bf(n,e,!1)),RGe=n=>ja(n,e=>bf(n,e,!hs(n))),OGe=n=>ja(n,e=>bf(n,e,hs(n))),kGe=n=>ja(n,e=>it.cursor(n.lineBlockAt(e.head).from,1)),IGe=n=>ja(n,e=>it.cursor(n.lineBlockAt(e.head).to,-1));function LGe(n,e,t){let r=!1,i=ng(n.selection,s=>{let o=Sl(n,s.head,-1)||Sl(n,s.head,1)||s.head>0&&Sl(n,s.head-1,1)||s.head<n.doc.length&&Sl(n,s.head+1,-1);if(!o||!o.end)return s;r=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return it.cursor(a)});return r?(e(Hl(n,i)),!0):!1}const FGe=({state:n,dispatch:e})=>LGe(n,e);function pa(n,e){let t=ng(n.state.selection,r=>{let i=e(r);return it.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(Hl(n.state,t)),!0)}function dte(n,e){return pa(n,t=>n.moveByChar(t,e))}const hte=n=>dte(n,!hs(n)),pte=n=>dte(n,hs(n));function mte(n,e){return pa(n,t=>n.moveByGroup(t,e))}const BGe=n=>mte(n,!hs(n)),zGe=n=>mte(n,hs(n)),UGe=n=>pa(n,e=>PM(n.state,e,!hs(n))),$Ge=n=>pa(n,e=>PM(n.state,e,hs(n)));function gte(n,e){return pa(n,t=>n.moveVertically(t,e))}const vte=n=>gte(n,!1),yte=n=>gte(n,!0);function xte(n,e){return pa(n,t=>n.moveVertically(t,e,cte(n).height))}const B$=n=>xte(n,!1),z$=n=>xte(n,!0),VGe=n=>pa(n,e=>bf(n,e,!0)),HGe=n=>pa(n,e=>bf(n,e,!1)),WGe=n=>pa(n,e=>bf(n,e,!hs(n))),jGe=n=>pa(n,e=>bf(n,e,hs(n))),GGe=n=>pa(n,e=>it.cursor(n.lineBlockAt(e.head).from)),qGe=n=>pa(n,e=>it.cursor(n.lineBlockAt(e.head).to)),U$=({state:n,dispatch:e})=>(e(Hl(n,{anchor:0})),!0),$$=({state:n,dispatch:e})=>(e(Hl(n,{anchor:n.doc.length})),!0),V$=({state:n,dispatch:e})=>(e(Hl(n,{anchor:n.selection.main.anchor,head:0})),!0),H$=({state:n,dispatch:e})=>(e(Hl(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),XGe=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),YGe=({state:n,dispatch:e})=>{let t=RM(n).map(({from:r,to:i})=>it.range(r,Math.min(i+1,n.doc.length)));return e(n.update({selection:it.create(t),userEvent:"select"})),!0},KGe=({state:n,dispatch:e})=>{let t=ng(n.selection,r=>{var i;let s=cs(n).resolveStack(r.from,1);for(let o=s;o;o=o.next){let{node:a}=o;if((a.from<r.from&&a.to>=r.to||a.to>r.to&&a.from<=r.from)&&(!((i=a.parent)===null||i===void 0)&&i.parent))return it.range(a.to,a.from)}return r});return e(Hl(n,t)),!0},ZGe=({state:n,dispatch:e})=>{let t=n.selection,r=null;return t.ranges.length>1?r=it.create([t.main]):t.main.empty||(r=it.create([it.cursor(t.main.head)])),r?(e(Hl(n,r)),!0):!1};function Jy(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:r}=n,i=r.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(t="delete.backward",l=uw(n,l,!1)):l>o&&(t="delete.forward",l=uw(n,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=uw(n,o,!1),a=uw(n,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:it.cursor(o,o<s.head?-1:1)}});return i.changes.empty?!1:(n.dispatch(r.update(i,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?bt.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function uw(n,e,t){if(n instanceof bt)for(let r of n.state.facet(bt.atomicRanges).map(i=>i(n)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=t?s:i)});return e}const bte=(n,e,t)=>Jy(n,r=>{let i=r.from,{state:s}=n,o=s.doc.lineAt(i),a,l;if(t&&!e&&i>o.from&&i<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,i-o.from))){if(a[a.length-1]=="	")return i-1;let u=tg(a,s.tabSize),c=u%I_(s)||I_(s);for(let f=0;f<c&&a[a.length-1-f]==" ";f++)i--;l=i}else l=Fi(o.text,i-o.from,e,e)+o.from,l==i&&o.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,i-o.from))&&(l=Fi(o.text,l-o.from,!1,!1)+o.from);return l}),eP=n=>bte(n,!1,!0),wte=n=>bte(n,!0,!1),Ste=(n,e)=>Jy(n,t=>{let r=t.head,{state:i}=n,s=i.doc.lineAt(r),o=i.charCategorizer(r);for(let a=null;;){if(r==(e?s.to:s.from)){r==t.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let l=Fi(s.text,r-s.from,e)+s.from,u=s.text.slice(Math.min(r,l)-s.from,Math.max(r,l)-s.from),c=o(u);if(a!=null&&c!=a)break;(u!=" "||r!=t.head)&&(a=c),r=l}return r}),_te=n=>Ste(n,!1),JGe=n=>Ste(n,!0),QGe=n=>Jy(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),eqe=n=>Jy(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),tqe=n=>Jy(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),nqe=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Rn.of(["",""])},range:it.cursor(r.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},rqe=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>{if(!r.empty||r.from==0||r.from==n.doc.length)return{range:r};let i=r.from,s=n.doc.lineAt(i),o=i==s.from?i-1:Fi(s.text,i-s.from,!1)+s.from,a=i==s.to?i+1:Fi(s.text,i-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:n.doc.slice(i,a).append(n.doc.slice(o,i))},range:it.cursor(a)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function RM(n){let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.from),s=n.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=n.doc.lineAt(r.to-1)),t>=i.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});t=s.number+1}return e}function Ete(n,e,t){if(n.readOnly)return!1;let r=[],i=[];for(let s of RM(n)){if(t?s.to==n.doc.length:s.from==0)continue;let o=n.doc.lineAt(t?s.to+1:s.from-1),a=o.length+1;if(t){r.push({from:s.to,to:o.to},{from:s.from,insert:o.text+n.lineBreak});for(let l of s.ranges)i.push(it.range(Math.min(n.doc.length,l.anchor+a),Math.min(n.doc.length,l.head+a)))}else{r.push({from:o.from,to:s.from},{from:s.to,insert:n.lineBreak+o.text});for(let l of s.ranges)i.push(it.range(l.anchor-a,l.head-a))}}return r.length?(e(n.update({changes:r,scrollIntoView:!0,selection:it.create(i,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const iqe=({state:n,dispatch:e})=>Ete(n,e,!1),sqe=({state:n,dispatch:e})=>Ete(n,e,!0);function Mte(n,e,t){if(n.readOnly)return!1;let r=[];for(let i of RM(n))t?r.push({from:i.from,insert:n.doc.slice(i.from,i.to)+n.lineBreak}):r.push({from:i.to,insert:n.lineBreak+n.doc.slice(i.from,i.to)});return e(n.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const oqe=({state:n,dispatch:e})=>Mte(n,e,!1),aqe=({state:n,dispatch:e})=>Mte(n,e,!0),lqe=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(RM(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=ng(e.selection,i=>{let s;if(n.lineWrapping){let o=n.lineBlockAt(i.head),a=n.coordsAtPos(i.head,i.assoc||1);a&&(s=o.bottom+n.documentTop-a.bottom+n.defaultLineHeight/2)}return n.moveVertically(i,!0,s)}).map(t);return n.dispatch({changes:t,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function uqe(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=cs(n).resolveInner(e),r=t.childBefore(e),i=t.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(Sn.closedBy))&&s.indexOf(i.name)>-1&&n.doc.lineAt(r.to).from==n.doc.lineAt(i.from).from&&!/\S/.test(n.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const cqe=Cte(!1),fqe=Cte(!0);function Cte(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:o}=i,a=e.doc.lineAt(s),l=!n&&s==o&&uqe(e,s);n&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let u=new AM(e,{simulateBreak:s,simulateDoubleBreak:!!l}),c=_k(u,s);for(c==null&&(c=tg(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let f=["",ay(e,c)];return l&&f.push(ay(e,u.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:Rn.of(f)},range:it.cursor(s+1+f[1].length)}});return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Ak(n,e){let t=-1;return n.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let a=n.doc.lineAt(o);a.number>t&&(r.empty||r.to>a.from)&&(e(a,i,r),t=a.number),o=a.to+1}let s=n.changes(i);return{changes:i,range:it.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const dqe=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),r=new AM(n,{overrideIndentation:s=>{let o=t[s];return o??-1}}),i=Ak(n,(s,o,a)=>{let l=_k(r,s.from);if(l==null)return;/\S/.test(s.text)||(l=0);let u=/^\s*/.exec(s.text)[0],c=ay(n,l);(u!=c||a.from<s.from+u.length)&&(t[s.from]=l,o.push({from:s.from,to:s.from+u.length,insert:c}))});return i.changes.empty||e(n.update(i,{userEvent:"indent"})),!0},Ate=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Ak(n,(t,r)=>{r.push({from:t.from,insert:n.facet(CM)})}),{userEvent:"input.indent"})),!0),Tte=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Ak(n,(t,r)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let s=tg(i,n.tabSize),o=0,a=ay(n,Math.max(0,s-I_(n)));for(;o<i.length&&o<a.length&&i.charCodeAt(o)==a.charCodeAt(o);)o++;r.push({from:t.from+o,to:t.from+i.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),hqe=n=>(n.setTabFocusMode(),!0),pqe=[{key:"Ctrl-b",run:ite,shift:hte,preventDefault:!0},{key:"Ctrl-f",run:ste,shift:pte},{key:"Ctrl-p",run:lte,shift:vte},{key:"Ctrl-n",run:ute,shift:yte},{key:"Ctrl-a",run:kGe,shift:GGe},{key:"Ctrl-e",run:IGe,shift:qGe},{key:"Ctrl-d",run:wte},{key:"Ctrl-h",run:eP},{key:"Ctrl-k",run:QGe},{key:"Ctrl-Alt-h",run:_te},{key:"Ctrl-o",run:nqe},{key:"Ctrl-t",run:rqe},{key:"Ctrl-v",run:QN}],mqe=[{key:"ArrowLeft",run:ite,shift:hte,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:MGe,shift:BGe,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:RGe,shift:WGe,preventDefault:!0},{key:"ArrowRight",run:ste,shift:pte,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:CGe,shift:zGe,preventDefault:!0},{mac:"Cmd-ArrowRight",run:OGe,shift:jGe,preventDefault:!0},{key:"ArrowUp",run:lte,shift:vte,preventDefault:!0},{mac:"Cmd-ArrowUp",run:U$,shift:V$},{mac:"Ctrl-ArrowUp",run:F$,shift:B$},{key:"ArrowDown",run:ute,shift:yte,preventDefault:!0},{mac:"Cmd-ArrowDown",run:$$,shift:H$},{mac:"Ctrl-ArrowDown",run:QN,shift:z$},{key:"PageUp",run:F$,shift:B$},{key:"PageDown",run:QN,shift:z$},{key:"Home",run:PGe,shift:HGe,preventDefault:!0},{key:"Mod-Home",run:U$,shift:V$},{key:"End",run:NGe,shift:VGe,preventDefault:!0},{key:"Mod-End",run:$$,shift:H$},{key:"Enter",run:cqe},{key:"Mod-a",run:XGe},{key:"Backspace",run:eP,shift:eP},{key:"Delete",run:wte},{key:"Mod-Backspace",mac:"Alt-Backspace",run:_te},{key:"Mod-Delete",mac:"Alt-Delete",run:JGe},{mac:"Mod-Backspace",run:eqe},{mac:"Mod-Delete",run:tqe}].concat(pqe.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),Dte=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:TGe,shift:UGe},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:DGe,shift:$Ge},{key:"Alt-ArrowUp",run:iqe},{key:"Shift-Alt-ArrowUp",run:oqe},{key:"Alt-ArrowDown",run:sqe},{key:"Shift-Alt-ArrowDown",run:aqe},{key:"Escape",run:ZGe},{key:"Mod-Enter",run:fqe},{key:"Alt-l",mac:"Ctrl-l",run:YGe},{key:"Mod-i",run:KGe,preventDefault:!0},{key:"Mod-[",run:Tte},{key:"Mod-]",run:Ate},{key:"Mod-Alt-\\",run:dqe},{key:"Shift-Mod-k",run:lqe},{key:"Shift-Mod-\\",run:FGe},{key:"Mod-/",run:oGe},{key:"Alt-A",run:lGe},{key:"Ctrl-m",mac:"Shift-Alt-m",run:hqe}].concat(mqe),gqe={key:"Tab",run:Ate,shift:Tte};function rr(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=t[r];typeof i=="string"?n.setAttribute(r,i):i!=null&&(n[r]=i)}e++}for(;e<arguments.length;e++)Nte(n,arguments[e]);return n}function Nte(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)Nte(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}const W$=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class Mm{constructor(e,t,r=0,i=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?a=>s(W$(a)):W$,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Ri(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=ak(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=Zo(e);let i=this.normalize(t);for(let s=0,o=r;;s++){let a=i.charCodeAt(s),l=this.match(a,o,this.bufferPos+this.bufferStart);if(s==i.length-1){if(l)return this.value=l,this;break}o==r&&s<t.length&&t.charCodeAt(s)==a&&o++}}}match(e,t,r){let i=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?i={from:this.matches[s+1],to:r}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:t,to:r}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(Mm.prototype[Symbol.iterator]=function(){return this});const Pte={from:-1,to:-1,match:/.*/.exec("")},Tk="gm"+(/x/.unicode==null?"":"u");class Rte{constructor(e,t,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=Pte,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new Ote(e,t,r,i,s);this.re=new RegExp(t,Tk+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=z_(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let r=this.curLineStart+t.index,i=r+t[0].length;if(this.matchPos=z_(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,t)))return this.value={from:r,to:i,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const pT=new WeakMap;class Zp{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,r){let i=pT.get(e);if(!i||i.from>=r||i.to<=t){let a=new Zp(t,e.sliceString(t,r));return pT.set(e,a),a}if(i.from==t&&i.to==r)return i;let{text:s,from:o}=i;return o>t&&(s=e.sliceString(t,o)+s,o=t),i.to<r&&(s+=e.sliceString(i.to,r)),pT.set(e,new Zp(o,s)),new Zp(t,s.slice(t-o,r-o))}}class Ote{constructor(e,t,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=Pte,this.matchPos=z_(e,i),this.re=new RegExp(t,Tk+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=Zp.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let r=this.flat.from+t.index,i=r+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,t)))return this.value={from:r,to:i,match:t},this.matchPos=z_(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Zp.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Rte.prototype[Symbol.iterator]=Ote.prototype[Symbol.iterator]=function(){return this});function vqe(n){try{return new RegExp(n,Tk),!0}catch{return!1}}function z_(n,e){if(e>=n.length)return e;let t=n.lineAt(e),r;for(;e<t.to&&(r=t.text.charCodeAt(e-t.from))>=56320&&r<57344;)e++;return e}function tP(n){let e=String(n.state.doc.lineAt(n.state.selection.main.head).number),t=rr("input",{class:"cm-textfield",name:"line",value:e}),r=rr("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),n.dispatch({effects:U_.of(!1)}),n.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},rr("label",n.state.phrase("Go to line"),": ",t)," ",rr("button",{class:"cm-button",type:"submit"},n.state.phrase("go")));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!s)return;let{state:o}=n,a=o.doc.lineAt(o.selection.main.head),[,l,u,c,f]=s,d=c?+c.slice(1):0,h=u?+u:a.number;if(u&&f){let y=h/100;l&&(y=y*(l=="-"?-1:1)+a.number/o.doc.lines),h=Math.round(o.doc.lines*y)}else u&&l&&(h=h*(l=="-"?-1:1)+a.number);let m=o.doc.line(Math.max(1,Math.min(o.doc.lines,h))),v=it.cursor(m.from+Math.max(0,Math.min(d,m.length)));n.dispatch({effects:[U_.of(!1),bt.scrollIntoView(v.from,{y:"center"})],selection:v}),n.focus()}return{dom:r}}const U_=dn.define(),j$=Vi.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(U_)&&(n=t.value);return n},provide:n=>sy.from(n,e=>e?tP:null)}),yqe=n=>{let e=iy(n,tP);if(!e){let t=[U_.of(!0)];n.state.field(j$,!1)==null&&t.push(dn.appendConfig.of([j$,xqe])),n.dispatch({effects:t}),e=iy(n,tP)}return e&&e.dom.querySelector("input").select(),!0},xqe=bt.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),bqe={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},wqe=Rt.define({combine(n){return Vl(n,bqe,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function Sqe(n){return[Aqe,Cqe]}const _qe=Ut.mark({class:"cm-selectionMatch"}),Eqe=Ut.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function G$(n,e,t,r){return(t==0||n(e.sliceDoc(t-1,t))!=gr.Word)&&(r==e.doc.length||n(e.sliceDoc(r,r+1))!=gr.Word)}function Mqe(n,e,t,r){return n(e.sliceDoc(t,t+1))==gr.Word&&n(e.sliceDoc(r-1,r))==gr.Word}const Cqe=Hr.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(wqe),{state:t}=n,r=t.selection;if(r.ranges.length>1)return Ut.none;let i=r.main,s,o=null;if(i.empty){if(!e.highlightWordAroundCursor)return Ut.none;let l=t.wordAt(i.head);if(!l)return Ut.none;o=t.charCategorizer(i.head),s=t.sliceDoc(l.from,l.to)}else{let l=i.to-i.from;if(l<e.minSelectionLength||l>200)return Ut.none;if(e.wholeWords){if(s=t.sliceDoc(i.from,i.to),o=t.charCategorizer(i.head),!(G$(o,t,i.from,i.to)&&Mqe(o,t,i.from,i.to)))return Ut.none}else if(s=t.sliceDoc(i.from,i.to),!s)return Ut.none}let a=[];for(let l of n.visibleRanges){let u=new Mm(t.doc,s,l.from,l.to);for(;!u.next().done;){let{from:c,to:f}=u.value;if((!o||G$(o,t,c,f))&&(i.empty&&c<=i.from&&f>=i.to?a.push(Eqe.range(c,f)):(c>=i.to||f<=i.from)&&a.push(_qe.range(c,f)),a.length>e.maxMatches))return Ut.none}}return Ut.set(a)}},{decorations:n=>n.decorations}),Aqe=bt.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),Tqe=({state:n,dispatch:e})=>{let{selection:t}=n,r=it.create(t.ranges.map(i=>n.wordAt(i.head)||it.cursor(i.head)),t.mainIndex);return r.eq(t)?!1:(e(n.update({selection:r})),!0)};function Dqe(n,e){let{main:t,ranges:r}=n.selection,i=n.wordAt(t.head),s=i&&i.from==t.from&&i.to==t.to;for(let o=!1,a=new Mm(n.doc,e,r[r.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new Mm(n.doc,e,0,Math.max(0,r[r.length-1].from-1)),o=!0}else{if(o&&r.some(l=>l.from==a.value.from))continue;if(s){let l=n.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const Nqe=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(s=>s.from===s.to))return Tqe({state:n,dispatch:e});let r=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(s=>n.sliceDoc(s.from,s.to)!=r))return!1;let i=Dqe(n,r);return i?(e(n.update({selection:n.selection.addRange(it.range(i.from,i.to),!1),effects:bt.scrollIntoView(i.to)})),!0):!1},rg=Rt.define({combine(n){return Vl(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Vqe(e),scrollToMatch:e=>bt.scrollIntoView(e)})}});class kte{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||vqe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new kqe(this):new Rqe(this)}getCursor(e,t=0,r){let i=e.doc?e:bn.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?up(this,i,t,r):lp(this,i,t,r)}}class Ite{constructor(e){this.spec=e}}function lp(n,e,t,r){return new Mm(e.doc,n.unquoted,t,r,n.caseSensitive?void 0:i=>i.toLowerCase(),n.wholeWord?Pqe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function Pqe(n,e){return(t,r,i,s)=>((s>t||s+i.length<r)&&(s=Math.max(0,t-2),i=n.sliceString(s,Math.min(n.length,r+2))),(e($_(i,t-s))!=gr.Word||e(V_(i,t-s))!=gr.Word)&&(e(V_(i,r-s))!=gr.Word||e($_(i,r-s))!=gr.Word))}class Rqe extends Ite{constructor(e){super(e)}nextMatch(e,t,r){let i=lp(this.spec,e,r,e.doc.length).nextOverlapping();return i.done&&(i=lp(this.spec,e,0,t).nextOverlapping()),i.done?null:i.value}prevMatchInRange(e,t,r){for(let i=r;;){let s=Math.max(t,i-1e4-this.spec.unquoted.length),o=lp(this.spec,e,s,i),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==t)return null;i-=1e4}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let r=lp(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let s=lp(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function up(n,e,t,r){return new Rte(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?Oqe(e.charCategorizer(e.selection.main.head)):void 0},t,r)}function $_(n,e){return n.slice(Fi(n,e,!1),e)}function V_(n,e){return n.slice(e,Fi(n,e))}function Oqe(n){return(e,t,r)=>!r[0].length||(n($_(r.input,r.index))!=gr.Word||n(V_(r.input,r.index))!=gr.Word)&&(n(V_(r.input,r.index+r[0].length))!=gr.Word||n($_(r.input,r.index+r[0].length))!=gr.Word)}class kqe extends Ite{nextMatch(e,t,r){let i=up(this.spec,e,r,e.doc.length).next();return i.done&&(i=up(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,r){for(let i=1;;i++){let s=Math.max(t,r-i*1e4),o=up(this.spec,e,s,r),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==t||a.from>s+10))return a;if(s==t)return null}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(t,r)=>r=="$"?"$":r=="&"?e.match[0]:r!="0"&&+r<e.match.length?e.match[r]:t)}matchAll(e,t){let r=up(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let s=up(this.spec,e,Math.max(0,t-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const ly=dn.define(),Dk=dn.define(),Hc=Vi.define({create(n){return new mT(nP(n).create(),null)},update(n,e){for(let t of e.effects)t.is(ly)?n=new mT(t.value.create(),n.panel):t.is(Dk)&&(n=new mT(n.query,t.value?Nk:null));return n},provide:n=>sy.from(n,e=>e.panel)});class mT{constructor(e,t){this.query=e,this.panel=t}}const Iqe=Ut.mark({class:"cm-searchMatch"}),Lqe=Ut.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Fqe=Hr.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(Hc))}update(n){let e=n.state.field(Hc);(e!=n.startState.field(Hc)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return Ut.none;let{view:t}=this,r=new nf;for(let i=0,s=t.visibleRanges,o=s.length;i<o;i++){let{from:a,to:l}=s[i];for(;i<o-1&&l>s[i+1].from-2*250;)l=s[++i].to;n.highlight(t.state,a,l,(u,c)=>{let f=t.state.selection.ranges.some(d=>d.from==u&&d.to==c);r.add(u,c,f?Lqe:Iqe)})}return r.finish()}},{decorations:n=>n.decorations});function Qy(n){return e=>{let t=e.state.field(Hc,!1);return t&&t.query.spec.valid?n(e,t):Bte(e)}}const H_=Qy((n,{query:e})=>{let{to:t}=n.state.selection.main,r=e.nextMatch(n.state,t,t);if(!r)return!1;let i=it.single(r.from,r.to),s=n.state.facet(rg);return n.dispatch({selection:i,effects:[Pk(n,r),s.scrollToMatch(i.main,n)],userEvent:"select.search"}),Fte(n),!0}),W_=Qy((n,{query:e})=>{let{state:t}=n,{from:r}=t.selection.main,i=e.prevMatch(t,r,r);if(!i)return!1;let s=it.single(i.from,i.to),o=n.state.facet(rg);return n.dispatch({selection:s,effects:[Pk(n,i),o.scrollToMatch(s.main,n)],userEvent:"select.search"}),Fte(n),!0}),Bqe=Qy((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:it.create(t.map(r=>it.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),zqe=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:r,to:i}=t.main,s=[],o=0;for(let a=new Mm(n.doc,n.sliceDoc(r,i));!a.next().done;){if(s.length>1e3)return!1;a.value.from==r&&(o=s.length),s.push(it.range(a.value.from,a.value.to))}return e(n.update({selection:it.create(s,o),userEvent:"select.search.matches"})),!0},q$=Qy((n,{query:e})=>{let{state:t}=n,{from:r,to:i}=t.selection.main;if(t.readOnly)return!1;let s=e.nextMatch(t,r,r);if(!s)return!1;let o=[],a,l,u=[];if(s.from==r&&s.to==i&&(l=t.toText(e.getReplacement(s)),o.push({from:s.from,to:s.to,insert:l}),s=e.nextMatch(t,s.from,s.to),u.push(bt.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(r).number)+"."))),s){let c=o.length==0||o[0].from>=s.to?0:s.to-s.from-l.length;a=it.single(s.from-c,s.to-c),u.push(Pk(n,s)),u.push(t.facet(rg).scrollToMatch(a.main,n))}return n.dispatch({changes:o,selection:a,effects:u,userEvent:"input.replace"}),!0}),Uqe=Qy((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(i=>{let{from:s,to:o}=i;return{from:s,to:o,insert:e.getReplacement(i)}});if(!t.length)return!1;let r=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:bt.announce.of(r),userEvent:"input.replace.all"}),!0});function Nk(n){return n.state.facet(rg).createPanel(n)}function nP(n,e){var t,r,i,s,o;let a=n.selection.main,l=a.empty||a.to>a.from+100?"":n.sliceDoc(a.from,a.to);if(e&&!l)return e;let u=n.facet(rg);return new kte({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:u.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:u.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:u.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:u.wholeWord})}function Lte(n){let e=iy(n,Nk);return e&&e.dom.querySelector("[main-field]")}function Fte(n){let e=Lte(n);e&&e==n.root.activeElement&&e.select()}const Bte=n=>{let e=n.state.field(Hc,!1);if(e&&e.panel){let t=Lte(n);if(t&&t!=n.root.activeElement){let r=nP(n.state,e.query.spec);r.valid&&n.dispatch({effects:ly.of(r)}),t.focus(),t.select()}}else n.dispatch({effects:[Dk.of(!0),e?ly.of(nP(n.state,e.query.spec)):dn.appendConfig.of(Wqe)]});return!0},zte=n=>{let e=n.state.field(Hc,!1);if(!e||!e.panel)return!1;let t=iy(n,Nk);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:Dk.of(!1)}),!0},$qe=[{key:"Mod-f",run:Bte,scope:"editor search-panel"},{key:"F3",run:H_,shift:W_,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:H_,shift:W_,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:zte,scope:"editor search-panel"},{key:"Mod-Shift-l",run:zqe},{key:"Mod-Alt-g",run:yqe},{key:"Mod-d",run:Nqe,preventDefault:!0}];class Vqe{constructor(e){this.view=e;let t=this.query=e.state.field(Hc).query.spec;this.commit=this.commit.bind(this),this.searchField=rr("input",{value:t.search,placeholder:uo(e,"Find"),"aria-label":uo(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=rr("input",{value:t.replace,placeholder:uo(e,"Replace"),"aria-label":uo(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=rr("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=rr("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=rr("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function r(i,s,o){return rr("button",{class:"cm-button",name:i,onclick:s,type:"button"},o)}this.dom=rr("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>H_(e),[uo(e,"next")]),r("prev",()=>W_(e),[uo(e,"previous")]),r("select",()=>Bqe(e),[uo(e,"all")]),rr("label",null,[this.caseField,uo(e,"match case")]),rr("label",null,[this.reField,uo(e,"regexp")]),rr("label",null,[this.wordField,uo(e,"by word")]),...e.state.readOnly?[]:[rr("br"),this.replaceField,r("replace",()=>q$(e),[uo(e,"replace")]),r("replaceAll",()=>Uqe(e),[uo(e,"replace all")])],rr("button",{name:"close",onclick:()=>zte(e),"aria-label":uo(e,"close"),type:"button"},[""])])}commit(){let e=new kte({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:ly.of(e)}))}keydown(e){KHe(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?W_:H_)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),q$(this.view))}update(e){for(let t of e.transactions)for(let r of t.effects)r.is(ly)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(rg).top}}function uo(n,e){return n.state.phrase(e)}const cw=30,fw=/[\s\.,:;?!]/;function Pk(n,{from:e,to:t}){let r=n.state.doc.lineAt(e),i=n.state.doc.lineAt(t).to,s=Math.max(r.from,e-cw),o=Math.min(i,t+cw),a=n.state.sliceDoc(s,o);if(s!=r.from){for(let l=0;l<cw;l++)if(!fw.test(a[l+1])&&fw.test(a[l])){a=a.slice(l);break}}if(o!=i){for(let l=a.length-1;l>a.length-cw;l--)if(!fw.test(a[l-1])&&fw.test(a[l])){a=a.slice(0,l);break}}return bt.announce.of(`${n.state.phrase("current match")}. ${a} ${n.state.phrase("on line")} ${r.number}.`)}const Hqe=bt.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Wqe=[Hc,rh.low(Fqe),Hqe];class Ute{constructor(e,t,r){this.state=e,this.pos=t,this.explicit=r,this.abortListeners=[]}tokenBefore(e){let t=cs(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),r=Math.max(t.from,this.pos-250),i=t.text.slice(r-t.from,this.pos-t.from),s=i.search($te(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}}function X$(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function jqe(n){let e=Object.create(null),t=Object.create(null);for(let{label:i}of n){e[i[0]]=!0;for(let s=1;s<i.length;s++)t[i[s]]=!0}let r=X$(e)+X$(t)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function Gqe(n){let e=n.map(i=>typeof i=="string"?{label:i}:i),[t,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:jqe(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:t}:null}}class Y${constructor(e,t,r,i){this.completion=e,this.source=t,this.match=r,this.score=i}}function Wc(n){return n.selection.main.from}function $te(n,e){var t;let{source:r}=n,i=e&&r[0]!="^",s=r[r.length-1]!="$";return!i&&!s?n:new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const Vte=$l.define();function qqe(n,e,t,r){let{main:i}=n.selection,s=t-i.from,o=r-i.from;return Object.assign(Object.assign({},n.changeByRange(a=>a!=i&&t!=r&&n.sliceDoc(a.from+s,a.from+o)!=n.sliceDoc(t,r)?{range:a}:{changes:{from:a.from+s,to:r==i.from?a.to:a.from+o,insert:e},range:it.cursor(a.from+s+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const K$=new WeakMap;function Xqe(n){if(!Array.isArray(n))return n;let e=K$.get(n);return e||K$.set(n,e=Gqe(n)),e}const j_=dn.define(),uy=dn.define();class Yqe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let r=Ri(e,t),i=Zo(r);this.chars.push(r);let s=e.slice(t,t+i),o=s.toUpperCase();this.folded.push(Ri(o==s?s.toLowerCase():o,0)),t+=i}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:r,any:i,precise:s,byWord:o}=this;if(t.length==1){let S=Ri(e,0),b=Zo(S),g=b==e.length?0:-100;if(S!=t[0])if(S==r[0])g+=-200;else return null;return this.ret(g,[0,b])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=t.length,u=0;if(a<0){for(let S=0,b=Math.min(e.length,200);S<b&&u<l;){let g=Ri(e,S);(g==t[u]||g==r[u])&&(i[u++]=S),S+=Zo(g)}if(u<l)return null}let c=0,f=0,d=!1,h=0,m=-1,v=-1,y=/[a-z]/.test(e),p=!0;for(let S=0,b=Math.min(e.length,200),g=0;S<b&&f<l;){let w=Ri(e,S);a<0&&(c<l&&w==t[c]&&(s[c++]=S),h<l&&(w==t[h]||w==r[h]?(h==0&&(m=S),v=S+1,h++):h=0));let x,M=w<255?w>=48&&w<=57||w>=97&&w<=122?2:w>=65&&w<=90?1:0:(x=ak(w))!=x.toLowerCase()?1:x!=x.toUpperCase()?2:0;(!S||M==1&&y||g==0&&M!=0)&&(t[f]==w||r[f]==w&&(d=!0)?o[f++]=S:o.length&&(p=!1)),g=M,S+=Zo(w)}return f==l&&o[0]==0&&p?this.result(-100+(d?-200:0),o,e):h==l&&m==0?this.ret(-200-e.length+(v==e.length?0:-100),[0,v]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):h==l?this.ret(-900-e.length,[m,v]):f==l?this.result(-100+(d?-200:0)+-700+(p?0:-1100),o,e):t.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,t,r){let i=[],s=0;for(let o of t){let a=o+(this.astral?Zo(Ri(r,o)):1);s&&i[s-1]==o?i[s-1]=a:(i[s++]=o,i[s++]=a)}return this.ret(e-r.length,i)}}class Kqe{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),r=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,t.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}}const Ii=Rt.define({combine(n){return Vl(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:Zqe,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>r=>Z$(e(r),t(r)),optionClass:(e,t)=>r=>Z$(e(r),t(r)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function Z$(n,e){return n?e?n+" "+e:n:e}function Zqe(n,e,t,r,i,s){let o=n.textDirection==cr.RTL,a=o,l=!1,u="top",c,f,d=e.left-i.left,h=i.right-e.right,m=r.right-r.left,v=r.bottom-r.top;if(a&&d<Math.min(m,h)?a=!1:!a&&h<Math.min(m,d)&&(a=!0),m<=(a?d:h))c=Math.max(i.top,Math.min(t.top,i.bottom-v))-e.top,f=Math.min(400,a?d:h);else{l=!0,f=Math.min(400,(o?e.right:i.right-e.left)-30);let S=i.bottom-e.bottom;S>=v||S>e.top?c=t.bottom-e.top:(u="bottom",c=e.bottom-t.top)}let y=(e.bottom-e.top)/s.offsetHeight,p=(e.right-e.left)/s.offsetWidth;return{style:`${u}: ${c/y}px; max-width: ${f/p}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function Jqe(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),t.type&&r.classList.add(...t.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(t,r,i,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=t.displayLabel||t.label,l=0;for(let u=0;u<s.length;){let c=s[u++],f=s[u++];c>l&&o.appendChild(document.createTextNode(a.slice(l,c)));let d=o.appendChild(document.createElement("span"));d.appendChild(document.createTextNode(a.slice(c,f))),d.className="cm-completionMatchedText",l=f}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(t){if(!t.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=t.detail,r},position:80}),e.sort((t,r)=>t.position-r.position).map(t=>t.render)}function gT(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let i=Math.floor(e/t);return{from:i*t,to:(i+1)*t}}let r=Math.floor((n-e)/t);return{from:n-(r+1)*t,to:n-r*t}}class Qqe{constructor(e,t,r){this.view=e,this.stateField=t,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(t),{options:s,selected:o}=i.open,a=e.state.facet(Ii);this.optionContent=Jqe(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=gT(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:u}=e.state.field(t).open;for(let c=l.target,f;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(f=/-(\d+)$/.exec(c.id))&&+f[1]<u.length){this.applyCompletion(e,u[+f[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(Ii).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:uy.of(null)})}),this.showOptions(s,i.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=i){let{options:s,selected:o,disabled:a}=r.open;(!i.open||i.open.options!=s)&&(this.range=gT(s.length,o,e.state.facet(Ii).maxRenderedOptions),this.showOptions(s,r.id)),this.updateSel(),a!=((t=i.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of t.split(" "))r&&this.dom.classList.add(r);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=gT(t.options.length,t.selected,this.view.state.facet(Ii).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:r}=t.options[t.selected],{info:i}=r;if(!i)return;let s=typeof i=="string"?document.createTextNode(i):i(r);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,r)}).catch(o=>Xs(this.view.state,o,"completion info")):this.addInfoPane(s,r)}}addInfoPane(e,t){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:s}=e;r.appendChild(i),this.infoDestroy=s||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),t=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return t&&tXe(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return i.top>Math.min(s.bottom,t.bottom)-10||i.bottom<Math.max(s.top,t.top)+10?null:this.view.state.facet(Ii).positionInfo(this.view,t,i,r,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,r){const i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let o=r.from;o<r.to;o++){let{completion:a,match:l}=e[o],{section:u}=a;if(u){let d=typeof u=="string"?u:u.name;if(d!=s&&(o>r.from||r.from==0))if(s=d,typeof u!="string"&&u.header)i.appendChild(u.header(u));else{let h=i.appendChild(document.createElement("completion-section"));h.textContent=d}}const c=i.appendChild(document.createElement("li"));c.id=t+"-"+o,c.setAttribute("role","option");let f=this.optionClass(a);f&&(c.className=f);for(let d of this.optionContent){let h=d(a,this.view.state,this.view,l);h&&c.appendChild(h)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function eXe(n,e){return t=>new Qqe(t,n,e)}function tXe(n,e){let t=n.getBoundingClientRect(),r=e.getBoundingClientRect(),i=t.height/n.offsetHeight;r.top<t.top?n.scrollTop-=(t.top-r.top)/i:r.bottom>t.bottom&&(n.scrollTop+=(r.bottom-t.bottom)/i)}function J$(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function nXe(n,e){let t=[],r=null,i=u=>{t.push(u);let{section:c}=u.completion;if(c){r||(r=[]);let f=typeof c=="string"?c:c.name;r.some(d=>d.name==f)||r.push(typeof c=="string"?{name:f}:c)}},s=e.facet(Ii);for(let u of n)if(u.hasResult()){let c=u.result.getMatch;if(u.result.filter===!1)for(let f of u.result.options)i(new Y$(f,u.source,c?c(f):[],1e9-t.length));else{let f=e.sliceDoc(u.from,u.to),d,h=s.filterStrict?new Kqe(f):new Yqe(f);for(let m of u.result.options)if(d=h.match(m.label)){let v=m.displayLabel?c?c(m,d.matched):[]:d.matched;i(new Y$(m,u.source,v,d.score+(m.boost||0)))}}}if(r){let u=Object.create(null),c=0,f=(d,h)=>{var m,v;return((m=d.rank)!==null&&m!==void 0?m:1e9)-((v=h.rank)!==null&&v!==void 0?v:1e9)||(d.name<h.name?-1:1)};for(let d of r.sort(f))c-=1e5,u[d.name]=c;for(let d of t){let{section:h}=d.completion;h&&(d.score+=u[typeof h=="string"?h:h.name])}}let o=[],a=null,l=s.compareCompletions;for(let u of t.sort((c,f)=>f.score-c.score||l(c.completion,f.completion))){let c=u.completion;!a||a.label!=c.label||a.detail!=c.detail||a.type!=null&&c.type!=null&&a.type!=c.type||a.apply!=c.apply||a.boost!=c.boost?o.push(u):J$(u.completion)>J$(a)&&(o[o.length-1]=u),a=u.completion}return o}class Rp{constructor(e,t,r,i,s,o){this.options=e,this.attrs=t,this.tooltip=r,this.timestamp=i,this.selected=s,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Rp(this.options,Q$(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,r,i,s){let o=nXe(e,t);if(!o.length)return i&&e.some(l=>l.state==1)?new Rp(i.options,i.attrs,i.tooltip,i.timestamp,i.selected,!0):null;let a=t.facet(Ii).selectOnOpen?0:-1;if(i&&i.selected!=a&&i.selected!=-1){let l=i.options[i.selected].completion;for(let u=0;u<o.length;u++)if(o[u].completion==l){a=u;break}}return new Rp(o,Q$(r,a),{pos:e.reduce((l,u)=>u.hasResult()?Math.min(l,u.from):l,1e8),create:aXe,above:s.aboveCursor},i?i.timestamp:Date.now(),a,!1)}map(e){return new Rp(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class G_{constructor(e,t,r){this.active=e,this.id=t,this.open=r}static start(){return new G_(sXe,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,r=t.facet(Ii),s=(r.override||t.languageDataAt("autocomplete",Wc(t)).map(Xqe)).map(a=>(this.active.find(u=>u.source==a)||new ws(a,this.active.some(u=>u.state!=0)?1:0)).update(e,r));s.length==this.active.length&&s.every((a,l)=>a==this.active[l])&&(s=this.active);let o=this.open;o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!rXe(s,this.active)?o=Rp.build(s,t,this.id,o,r):o&&o.disabled&&!s.some(a=>a.state==1)&&(o=null),!o&&s.every(a=>a.state!=1)&&s.some(a=>a.hasResult())&&(s=s.map(a=>a.hasResult()?new ws(a.source,0):a));for(let a of e.effects)a.is(Wte)&&(o=o&&o.setSelected(a.value,this.id));return s==this.active&&o==this.open?this:new G_(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:iXe}}function rXe(n,e){if(n==e)return!0;for(let t=0,r=0;;){for(;t<n.length&&!n[t].hasResult;)t++;for(;r<e.length&&!e[r].hasResult;)r++;let i=t==n.length,s=r==e.length;if(i||s)return i==s;if(n[t++].result!=e[r++].result)return!1}}const iXe={"aria-autocomplete":"list"};function Q$(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const sXe=[];function rP(n,e){if(n.isUserEvent("input.complete")){let t=n.annotation(Vte);if(t&&e.activateOnCompletion(t))return"input"}return n.isUserEvent("input.type")?"input":n.isUserEvent("delete.backward")?"delete":null}class ws{constructor(e,t,r=-1){this.source=e,this.state=t,this.explicitPos=r}hasResult(){return!1}update(e,t){let r=rP(e,t),i=this;r?i=i.handleUserEvent(e,r,t):e.docChanged?i=i.handleChange(e):e.selection&&i.state!=0&&(i=new ws(i.source,0));for(let s of e.effects)if(s.is(j_))i=new ws(i.source,1,s.value?Wc(e.state):-1);else if(s.is(uy))i=new ws(i.source,0);else if(s.is(Hte))for(let o of s.value)o.source==i.source&&(i=o);return i}handleUserEvent(e,t,r){return t=="delete"||!r.activateOnTyping?this.map(e.changes):new ws(this.source,1)}handleChange(e){return e.changes.touchesRange(Wc(e.startState))?new ws(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new ws(this.source,this.state,e.mapPos(this.explicitPos))}}class Jp extends ws{constructor(e,t,r,i,s){super(e,2,t),this.result=r,this.from=i,this.to=s}hasResult(){return!0}handleUserEvent(e,t,r){var i;let s=this.result;s.map&&!e.changes.empty&&(s=s.map(s,e.changes));let o=e.changes.mapPos(this.from),a=e.changes.mapPos(this.to,1),l=Wc(e.state);if((this.explicitPos<0?l<=o:l<this.from)||l>a||!s||t=="delete"&&Wc(e.startState)==this.from)return new ws(this.source,t=="input"&&r.activateOnTyping?1:0);let u=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return oXe(s.validFor,e.state,o,a)?new Jp(this.source,u,s,o,a):s.update&&(s=s.update(s,o,a,new Ute(e.state,l,u>=0)))?new Jp(this.source,u,s,s.from,(i=s.to)!==null&&i!==void 0?i:Wc(e.state)):new ws(this.source,1,u)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new ws(this.source,0):this.map(e.changes)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Jp(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new ws(this.source,0)}}function oXe(n,e,t,r){if(!n)return!1;let i=e.sliceDoc(t,r);return typeof n=="function"?n(i,t,r,e):$te(n,!0).test(i)}const Hte=dn.define({map(n,e){return n.map(t=>t.map(e))}}),Wte=dn.define(),js=Vi.define({create(){return G_.start()},update(n,e){return n.update(e)},provide:n=>[xk.from(n,e=>e.tooltip),bt.contentAttributes.from(n,e=>e.attrs)]});function Rk(n,e){const t=e.completion.apply||e.completion.label;let r=n.state.field(js).active.find(i=>i.source==e.source);return r instanceof Jp?(typeof t=="string"?n.dispatch(Object.assign(Object.assign({},qqe(n.state,t,r.from,r.to)),{annotations:Vte.of(e.completion)})):t(n,e.completion,r.from,r.to),!0):!1}const aXe=eXe(js,Rk);function dw(n,e="option"){return t=>{let r=t.state.field(js,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<t.state.facet(Ii).interactionDelay)return!1;let i=1,s;e=="page"&&(s=Tee(t,r.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,a=r.open.selected>-1?r.open.selected+i*(n?1:-1):n?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),t.dispatch({effects:Wte.of(a)}),!0}}const lXe=n=>{let e=n.state.field(js,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(Ii).interactionDelay?!1:Rk(n,e.open.options[e.open.selected])},uXe=n=>n.state.field(js,!1)?(n.dispatch({effects:j_.of(!0)}),!0):!1,cXe=n=>{let e=n.state.field(js,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:uy.of(null)}),!0)};class fXe{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const dXe=50,hXe=1e3,pXe=Hr.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field(js).active)e.state==1&&this.startQuery(e)}update(n){let e=n.state.field(js),t=n.state.facet(Ii);if(!n.selectionSet&&!n.docChanged&&n.startState.field(js)==e)return;let r=n.transactions.some(s=>(s.selection||s.docChanged)&&!rP(s,t));for(let s=0;s<this.running.length;s++){let o=this.running[s];if(r||o.updates.length+n.transactions.length>dXe&&Date.now()-o.time>hXe){for(let a of o.context.abortListeners)try{a()}catch(l){Xs(this.view.state,l)}o.context.abortListeners=null,this.running.splice(s--,1)}else o.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(s=>s.effects.some(o=>o.is(j_)))&&(this.pendingStart=!0);let i=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.state==1&&!this.running.some(o=>o.active.source==s.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let s of n.transactions)rP(s,t)=="input"?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field(js);for(let t of e.active)t.state==1&&!this.running.some(r=>r.active.source==t.source)&&this.startQuery(t)}startQuery(n){let{state:e}=this.view,t=Wc(e),r=new Ute(e,t,n.explicitPos==t),i=new fXe(n,r);this.running.push(i),Promise.resolve(n.source(r)).then(s=>{i.context.aborted||(i.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:uy.of(null)}),Xs(this.view.state,s)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Ii).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Ii);for(let r=0;r<this.running.length;r++){let i=this.running[r];if(i.done===void 0)continue;if(this.running.splice(r--,1),i.done){let o=new Jp(i.active.source,i.active.explicitPos,i.done,i.done.from,(n=i.done.to)!==null&&n!==void 0?n:Wc(i.updates.length?i.updates[0].startState:this.view.state));for(let a of i.updates)o=o.update(a,t);if(o.hasResult()){e.push(o);continue}}let s=this.view.state.field(js).active.find(o=>o.source==i.active.source);if(s&&s.state==1)if(i.done==null){let o=new ws(i.active.source,0);for(let a of i.updates)o=o.update(a,t);o.state!=1&&e.push(o)}else this.startQuery(s)}e.length&&this.view.dispatch({effects:Hte.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(js,!1);if(e&&e.tooltip&&this.view.state.facet(Ii).closeOnBlur){let t=e.open&&Tee(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:uy.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:j_.of(!1)}),20),this.composing=0}}}),mXe=typeof navigator=="object"&&/Win/.test(navigator.platform),gXe=rh.highest(bt.domEventHandlers({keydown(n,e){let t=e.state.field(js,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||n.key.length>1||n.ctrlKey&&!(mXe&&n.altKey)||n.metaKey)return!1;let r=t.open.options[t.open.selected],i=t.active.find(o=>o.source==r.source),s=r.completion.commitCharacters||i.result.commitCharacters;return s&&s.indexOf(n.key)>-1&&Rk(e,r),!1}})),vXe=bt.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),cy={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},fd=dn.define({map(n,e){let t=e.mapPos(n,-1,Es.TrackAfter);return t??void 0}}),Ok=new class extends Fd{};Ok.startSide=1;Ok.endSide=-1;const jte=Vi.define({create(){return An.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:r=>r>=t.from&&r<=t.to})}for(let t of e.effects)t.is(fd)&&(n=n.update({add:[Ok.range(t.value,t.value+1)]}));return n}});function yXe(){return[bXe,jte]}const vT="()[]{}<>";function Gte(n){for(let e=0;e<vT.length;e+=2)if(vT.charCodeAt(e)==n)return vT.charAt(e+1);return ak(n<128?n:n+1)}function qte(n,e){return n.languageDataAt("closeBrackets",e)[0]||cy}const xXe=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),bXe=bt.inputHandler.of((n,e,t,r)=>{if((xXe?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let i=n.state.selection.main;if(r.length>2||r.length==2&&Zo(Ri(r,0))==1||e!=i.from||t!=i.to)return!1;let s=_Xe(n.state,r);return s?(n.dispatch(s),!0):!1}),wXe=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let r=qte(n,n.selection.main.head).brackets||cy.brackets,i=null,s=n.changeByRange(o=>{if(o.empty){let a=EXe(n.doc,o.head);for(let l of r)if(l==a&&OM(n.doc,o.head)==Gte(Ri(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:it.cursor(o.head-l.length)}}return{range:i=o}});return i||e(n.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},SXe=[{key:"Backspace",run:wXe}];function _Xe(n,e){let t=qte(n,n.selection.main.head),r=t.brackets||cy.brackets;for(let i of r){let s=Gte(Ri(i,0));if(e==i)return s==i?AXe(n,i,r.indexOf(i+i+i)>-1,t):MXe(n,i,s,t.before||cy.before);if(e==s&&Xte(n,n.selection.main.from))return CXe(n,i,s)}return null}function Xte(n,e){let t=!1;return n.field(jte).between(0,n.doc.length,r=>{r==e&&(t=!0)}),t}function OM(n,e){let t=n.sliceString(e,e+2);return t.slice(0,Zo(Ri(t,0)))}function EXe(n,e){let t=n.sliceString(e-2,e);return Zo(Ri(t,0))==t.length?t:t.slice(1)}function MXe(n,e,t,r){let i=null,s=n.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:fd.of(o.to+e.length),range:it.range(o.anchor+e.length,o.head+e.length)};let a=OM(n.doc,o.head);return!a||/\s/.test(a)||r.indexOf(a)>-1?{changes:{insert:e+t,from:o.head},effects:fd.of(o.head+e.length),range:it.cursor(o.head+e.length)}:{range:i=o}});return i?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function CXe(n,e,t){let r=null,i=n.changeByRange(s=>s.empty&&OM(n.doc,s.head)==t?{changes:{from:s.head,to:s.head+t.length,insert:t},range:it.cursor(s.head+t.length)}:r={range:s});return r?null:n.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function AXe(n,e,t,r){let i=r.stringPrefixes||cy.stringPrefixes,s=null,o=n.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:fd.of(a.to+e.length),range:it.range(a.anchor+e.length,a.head+e.length)};let l=a.head,u=OM(n.doc,l),c;if(u==e){if(eV(n,l))return{changes:{insert:e+e,from:l},effects:fd.of(l+e.length),range:it.cursor(l+e.length)};if(Xte(n,l)){let d=t&&n.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+d.length,insert:d},range:it.cursor(l+d.length)}}}else{if(t&&n.sliceDoc(l-2*e.length,l)==e+e&&(c=tV(n,l-2*e.length,i))>-1&&eV(n,c))return{changes:{insert:e+e+e+e,from:l},effects:fd.of(l+e.length),range:it.cursor(l+e.length)};if(n.charCategorizer(l)(u)!=gr.Word&&tV(n,l,i)>-1&&!TXe(n,l,e,i))return{changes:{insert:e+e,from:l},effects:fd.of(l+e.length),range:it.cursor(l+e.length)}}return{range:s=a}});return s?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function eV(n,e){let t=cs(n).resolveInner(e+1);return t.parent&&t.from==e}function TXe(n,e,t,r){let i=cs(n).resolveInner(e,-1),s=r.reduce((o,a)=>Math.max(o,a.length),0);for(let o=0;o<5;o++){let a=n.sliceDoc(i.from,Math.min(i.to,i.from+t.length+s)),l=a.indexOf(t);if(!l||l>-1&&r.indexOf(a.slice(0,l))>-1){let c=i.firstChild;for(;c&&c.from==i.from&&c.to-c.from>t.length+l;){if(n.sliceDoc(c.to-t.length,c.to)==t)return!1;c=c.firstChild}return!0}let u=i.to==e&&i.parent;if(!u)break;i=u}return!1}function tV(n,e,t){let r=n.charCategorizer(e);if(r(n.sliceDoc(e-1,e))!=gr.Word)return e;for(let i of t){let s=e-i.length;if(n.sliceDoc(s,e)==i&&r(n.sliceDoc(s-1,s))!=gr.Word)return s}return-1}function DXe(n={}){return[gXe,js,Ii.of(n),pXe,NXe,vXe]}const Yte=[{key:"Ctrl-Space",run:uXe},{key:"Escape",run:cXe},{key:"ArrowDown",run:dw(!0)},{key:"ArrowUp",run:dw(!1)},{key:"PageDown",run:dw(!0,"page")},{key:"PageUp",run:dw(!1,"page")},{key:"Enter",run:lXe}],NXe=rh.highest(Xy.computeN([Ii],n=>n.facet(Ii).defaultKeymap?[Yte]:[]));class PXe{constructor(e,t,r){this.from=e,this.to=t,this.diagnostic=r}}class ed{constructor(e,t,r){this.diagnostics=e,this.panel=t,this.selected=r}static init(e,t,r){let i=e,s=r.facet(fy).markerFilter;s&&(i=s(i,r));let o=Ut.set(i.map(a=>a.from==a.to||a.from==a.to-1&&r.doc.lineAt(a.from).to==a.from?Ut.widget({widget:new UXe(a),diagnostic:a}).range(a.from):Ut.mark({attributes:{class:"cm-lintRange cm-lintRange-"+a.severity+(a.markClass?" "+a.markClass:"")},diagnostic:a,inclusive:!0}).range(a.from,a.to)),!0);return new ed(o,t,Cm(o))}}function Cm(n,e=null,t=0){let r=null;return n.between(t,1e9,(i,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return r=new PXe(i,s,o.diagnostic),!1}),r}function RXe(n,e){let t=e.pos,r=e.end||t,i=n.state.facet(fy).hideOn(n,t,r);if(i!=null)return i;let s=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(o=>o.is(Kte))||n.changes.touchesRange(s.from,Math.max(s.to,r)))}function OXe(n,e){return n.field(So,!1)?e:e.concat(dn.appendConfig.of(HXe))}const Kte=dn.define(),kk=dn.define(),Zte=dn.define(),So=Vi.define({create(){return new ed(Ut.none,null,null)},update(n,e){if(e.docChanged&&n.diagnostics.size){let t=n.diagnostics.map(e.changes),r=null,i=n.panel;if(n.selected){let s=e.changes.mapPos(n.selected.from,1);r=Cm(t,n.selected.diagnostic,s)||Cm(t,null,s)}!t.size&&i&&e.state.facet(fy).autoPanel&&(i=null),n=new ed(t,i,r)}for(let t of e.effects)if(t.is(Kte)){let r=e.state.facet(fy).autoPanel?t.value.length?dy.open:null:n.panel;n=ed.init(t.value,r,e.state)}else t.is(kk)?n=new ed(n.diagnostics,t.value?dy.open:null,n.selected):t.is(Zte)&&(n=new ed(n.diagnostics,n.panel,t.value));return n},provide:n=>[sy.from(n,e=>e.panel),bt.decorations.from(n,e=>e.diagnostics)]}),kXe=Ut.mark({class:"cm-lintRange cm-lintRange-active",inclusive:!0});function IXe(n,e,t){let{diagnostics:r}=n.state.field(So),i=[],s=2e8,o=0;r.between(e-(t<0?1:0),e+(t>0?1:0),(l,u,{spec:c})=>{e>=l&&e<=u&&(l==u||(e>l||t>0)&&(e<u||t<0))&&(i.push(c.diagnostic),s=Math.min(l,s),o=Math.max(u,o))});let a=n.state.facet(fy).tooltipFilter;return a&&(i=a(i,n.state)),i.length?{pos:s,end:o,above:n.state.doc.lineAt(s).to<o,create(){return{dom:LXe(n,i)}}}:null}function LXe(n,e){return rr("ul",{class:"cm-tooltip-lint"},e.map(t=>Qte(n,t,!1)))}const FXe=n=>{let e=n.state.field(So,!1);(!e||!e.panel)&&n.dispatch({effects:OXe(n.state,[kk.of(!0)])});let t=iy(n,dy.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},nV=n=>{let e=n.state.field(So,!1);return!e||!e.panel?!1:(n.dispatch({effects:kk.of(!1)}),!0)},BXe=n=>{let e=n.state.field(So,!1);if(!e)return!1;let t=n.state.selection.main,r=e.diagnostics.iter(t.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==t.from&&r.to==t.to)?!1:(n.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},zXe=[{key:"Mod-Shift-m",run:FXe,preventDefault:!0},{key:"F8",run:BXe}],fy=Rt.define({combine(n){return Object.assign({sources:n.map(e=>e.source).filter(e=>e!=null)},Vl(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?r=>e(r)||t(r):e:t}))}});function Jte(n){let e=[];if(n)e:for(let{name:t}of n){for(let r=0;r<t.length;r++){let i=t[r];if(/[a-zA-Z]/.test(i)&&!e.some(s=>s.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function Qte(n,e,t){var r;let i=t?Jte(e.actions):[];return rr("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},rr("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(n):e.message),(r=e.actions)===null||r===void 0?void 0:r.map((s,o)=>{let a=!1,l=d=>{if(d.preventDefault(),a)return;a=!0;let h=Cm(n.state.field(So).diagnostics,e);h&&s.apply(n,h.from,h.to)},{name:u}=s,c=i[o]?u.indexOf(i[o]):-1,f=c<0?u:[u.slice(0,c),rr("u",u.slice(c,c+1)),u.slice(c+1)];return rr("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${u}${c<0?"":` (access key "${i[o]})"`}.`},f)}),e.source&&rr("div",{class:"cm-diagnosticSource"},e.source))}class UXe extends Hu{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return rr("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class rV{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Qte(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class dy{constructor(e){this.view=e,this.items=[];let t=i=>{if(i.keyCode==27)nV(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=Jte(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==i.keyCode){let l=Cm(this.view.state.field(So).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;i.preventDefault()},r=i=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(i.target)&&this.moveSelection(s)};this.list=rr("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:r}),this.dom=rr("div",{class:"cm-panel-lint"},this.list,rr("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>nV(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(So).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(So),r=0,i=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,a,{spec:l})=>{let u=-1,c;for(let f=r;f<this.items.length;f++)if(this.items[f].diagnostic==l.diagnostic){u=f;break}u<0?(c=new rV(this.view,l.diagnostic),this.items.splice(r,0,c),i=!0):(c=this.items[u],u>r&&(this.items.splice(r,u-r),i=!0)),t&&c.diagnostic==t.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),s=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),r++});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new rV(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:a})=>{let l=a.height/this.list.offsetHeight;o.top<a.top?this.list.scrollTop-=(a.top-o.top)/l:o.bottom>a.bottom&&(this.list.scrollTop+=(o.bottom-a.bottom)/l)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function t(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)t();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(So),r=Cm(t.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:Zte.of(r)})}static open(e){return new dy(e)}}function $Xe(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function hw(n){return $Xe(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const VXe=bt.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:hw("#d11")},".cm-lintRange-warning":{backgroundImage:hw("orange")},".cm-lintRange-info":{backgroundImage:hw("#999")},".cm-lintRange-hint":{backgroundImage:hw("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),HXe=[So,bt.decorations.compute([So],n=>{let{selected:e,panel:t}=n.field(So);return!e||!t||e.from==e.to?Ut.none:Ut.set([kXe.range(e.from,e.to)])}),BWe(IXe,{hideOn:RXe}),VXe];var iV=function(e){e===void 0&&(e={});var{crosshairCursor:t=!1}=e,r=[];e.closeBracketsKeymap!==!1&&(r=r.concat(SXe)),e.defaultKeymap!==!1&&(r=r.concat(Dte)),e.searchKeymap!==!1&&(r=r.concat($qe)),e.historyKeymap!==!1&&(r=r.concat(EGe)),e.foldKeymap!==!1&&(r=r.concat(Bje)),e.completionKeymap!==!1&&(r=r.concat(Yte)),e.lintKeymap!==!1&&(r=r.concat(zXe));var i=[];return e.lineNumbers!==!1&&i.push(qWe()),e.highlightActiveLineGutter!==!1&&i.push(KWe()),e.highlightSpecialChars!==!1&&i.push(hWe()),e.history!==!1&&i.push(mGe()),e.foldGutter!==!1&&i.push(Vje()),e.drawSelection!==!1&&i.push(nWe()),e.dropCursor!==!1&&i.push(aWe()),e.allowMultipleSelections!==!1&&i.push(bn.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&i.push(Tje()),e.syntaxHighlighting!==!1&&i.push(qee(Gje,{fallback:!0})),e.bracketMatching!==!1&&i.push(Qje()),e.closeBrackets!==!1&&i.push(yXe()),e.autocompletion!==!1&&i.push(DXe()),e.rectangularSelection!==!1&&i.push(AWe()),t!==!1&&i.push(NWe()),e.highlightActiveLine!==!1&&i.push(xWe()),e.highlightSelectionMatches!==!1&&i.push(Sqe()),e.tabSize&&typeof e.tabSize=="number"&&i.push(CM.of(" ".repeat(e.tabSize))),i.concat([Xy.of(r.flat())]).filter(Boolean)};const WXe="#e5c07b",sV="#e06c75",jXe="#56b6c2",GXe="#ffffff",Jw="#abb2bf",iP="#7d8799",qXe="#61afef",XXe="#98c379",oV="#d19a66",YXe="#c678dd",KXe="#21252b",aV="#2c313a",lV="#282c34",yT="#353a42",ZXe="#3E4451",uV="#528bff",JXe=bt.theme({"&":{color:Jw,backgroundColor:lV},".cm-content":{caretColor:uV},".cm-cursor, .cm-dropCursor":{borderLeftColor:uV},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:ZXe},".cm-panels":{backgroundColor:KXe,color:Jw},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:lV,color:iP,border:"none"},".cm-activeLineGutter":{backgroundColor:aV},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:yT},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:yT,borderBottomColor:yT},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:aV,color:Jw}}},{dark:!0}),QXe=Zy.define([{tag:nt.keyword,color:YXe},{tag:[nt.name,nt.deleted,nt.character,nt.propertyName,nt.macroName],color:sV},{tag:[nt.function(nt.variableName),nt.labelName],color:qXe},{tag:[nt.color,nt.constant(nt.name),nt.standard(nt.name)],color:oV},{tag:[nt.definition(nt.name),nt.separator],color:Jw},{tag:[nt.typeName,nt.className,nt.number,nt.changed,nt.annotation,nt.modifier,nt.self,nt.namespace],color:WXe},{tag:[nt.operator,nt.operatorKeyword,nt.url,nt.escape,nt.regexp,nt.link,nt.special(nt.string)],color:jXe},{tag:[nt.meta,nt.comment],color:iP},{tag:nt.strong,fontWeight:"bold"},{tag:nt.emphasis,fontStyle:"italic"},{tag:nt.strikethrough,textDecoration:"line-through"},{tag:nt.link,color:iP,textDecoration:"underline"},{tag:nt.heading,fontWeight:"bold",color:sV},{tag:[nt.atom,nt.bool,nt.special(nt.variableName)],color:oV},{tag:[nt.processingInstruction,nt.string,nt.inserted],color:XXe},{tag:nt.invalid,color:GXe}]),eYe=[JXe,qee(QXe)];var tYe=bt.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),nYe=function(e){e===void 0&&(e={});var{indentWithTab:t=!0,editable:r=!0,readOnly:i=!1,theme:s="light",placeholder:o="",basicSetup:a=!0}=e,l=[];switch(t&&l.unshift(Xy.of([gqe])),a&&(typeof a=="boolean"?l.unshift(iV()):l.unshift(iV(a))),o&&l.unshift(_We(o)),s){case"light":l.push(tYe);break;case"dark":l.push(eYe);break;case"none":break;default:l.push(s);break}return r===!1&&l.push(bt.editable.of(!1)),i&&l.push(bn.readOnly.of(!0)),[...l]},rYe=n=>({line:n.state.doc.lineAt(n.state.selection.main.from),lineCount:n.state.doc.lines,lineBreak:n.state.lineBreak,length:n.state.doc.length,readOnly:n.state.readOnly,tabSize:n.state.tabSize,selection:n.state.selection,selectionAsSingle:n.state.selection.asSingle().main,ranges:n.state.selection.ranges,selectionCode:n.state.sliceDoc(n.state.selection.main.from,n.state.selection.main.to),selections:n.state.selection.ranges.map(e=>n.state.sliceDoc(e.from,e.to)),selectedText:n.state.selection.ranges.some(e=>!e.empty)}),cV=$l.define(),iYe=[];function sYe(n){var{value:e,selection:t,onChange:r,onStatistics:i,onCreateEditor:s,onUpdate:o,extensions:a=iYe,autoFocus:l,theme:u="light",height:c=null,minHeight:f=null,maxHeight:d=null,width:h=null,minWidth:m=null,maxWidth:v=null,placeholder:y="",editable:p=!0,readOnly:S=!1,indentWithTab:b=!0,basicSetup:g=!0,root:w,initialState:x}=n,[M,A]=k.useState(),[N,C]=k.useState(),[T,R]=k.useState(),$=bt.theme({"&":{height:c,minHeight:f,maxHeight:d,width:h,minWidth:m,maxWidth:v},"& .cm-scroller":{height:"100% !important"}}),B=bt.updateListener.of(I=>{if(I.docChanged&&typeof r=="function"&&!I.transactions.some(q=>q.annotation(cV))){var U=I.state.doc,L=U.toString();r(L,I)}i&&i(rYe(I))}),z=nYe({theme:u,editable:p,readOnly:S,placeholder:y,indentWithTab:b,basicSetup:g}),D=[B,$,...z];return o&&typeof o=="function"&&D.push(bt.updateListener.of(o)),D=D.concat(a),k.useEffect(()=>{if(M&&!T){var I={doc:e,selection:t,extensions:D},U=x?bn.fromJSON(x.json,I,x.fields):bn.create(I);if(R(U),!N){var L=new bt({state:U,parent:M,root:w});C(L),s&&s(L,U)}}return()=>{N&&(R(void 0),C(void 0))}},[M,T]),k.useEffect(()=>A(n.container),[n.container]),k.useEffect(()=>()=>{N&&(N.destroy(),C(void 0))},[N]),k.useEffect(()=>{l&&N&&N.focus()},[l,N]),k.useEffect(()=>{N&&N.dispatch({effects:dn.reconfigure.of(D)})},[u,a,c,f,d,h,m,v,y,p,S,b,g,r,o]),k.useEffect(()=>{if(e!==void 0){var I=N?N.state.doc.toString():"";N&&e!==I&&N.dispatch({changes:{from:0,to:I.length,insert:e||""},annotations:[cV.of(!0)]})}},[e,N]),{state:T,setState:R,view:N,setView:C,container:M,setContainer:A}}var oYe=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],ene=k.forwardRef((n,e)=>{var{className:t,value:r="",selection:i,extensions:s=[],onChange:o,onStatistics:a,onCreateEditor:l,onUpdate:u,autoFocus:c,theme:f="light",height:d,minHeight:h,maxHeight:m,width:v,minWidth:y,maxWidth:p,basicSetup:S,placeholder:b,indentWithTab:g,editable:w,readOnly:x,root:M,initialState:A}=n,N=RY(n,oYe),C=k.useRef(null),{state:T,view:R,container:$}=sYe({container:C.current,root:M,value:r,autoFocus:c,theme:f,height:d,minHeight:h,maxHeight:m,width:v,minWidth:y,maxWidth:p,basicSetup:S,placeholder:b,indentWithTab:g,editable:w,readOnly:x,selection:i,onChange:o,onStatistics:a,onCreateEditor:l,onUpdate:u,extensions:s,initialState:A});if(k.useImperativeHandle(e,()=>({editor:C.current,state:T,view:R}),[C,$,T,R]),typeof r!="string")throw new Error("value must be typeof string but got "+typeof r);var B=typeof f=="string"?"cm-theme-"+f:"cm-theme";return se.jsx("div",at({ref:C,className:""+B+(t?" "+t:"")},N))});ene.displayName="CodeMirror";function aYe(n){const[e,t]=k.useState(""),r=[Xy.of(Dte)];k.useEffect(()=>{n.activeAtom!=null&&t(n.activeAtom.code)},[n.activeAtom]);function i(){document.getElementById("code-window").classList.add("code-off")}return se.jsxs("div",{id:"code-window",className:" code-off login-page code-window-div",children:[se.jsx(ene,{width:"100%",extensions:r,value:e,onChange:s=>{t(s)},theme:"dark"}),se.jsx("button",{type:"button",onClick:()=>n.activeAtom.updateCode(e),style:{display:"none"},id:"save-code-button",children:"Save Code"}),se.jsx("button",{type:"button",style:{display:"none"},id:"close-code-button",onClick:()=>i(),children:"Close Editor"})]})}function lYe({activeAtom:n,setActiveAtom:e,authorizedUserOcto:t,tryLogin:r,loadProject:i,exportPopUp:s,setExportPopUp:o,shortCutsOn:a,setShortCuts:l,mesh:u,setMesh:c,size:f,cad:d,wireMesh:h,setWireMesh:m,outdatedMesh:v,setOutdatedMesh:y}){const p=Gd(),[S,b]=k.useState(!0),[g,w]=k.useState(!0),[x,M]=k.useState(!0),[A,N]=k.useState(!0),[C,T]=k.useState(0),[R,$]=k.useState(!1);k.useState(0);const[B,z]=k.useState(!1);var D={a:"Assembly",b:"Loft",c:"Copy",d:"Difference",e:"Extrude",g:"GitHub",i:"Input",j:"Translate",r:"Rotate",u:"Rectangle",l:"Circle",m:"Molecule",s:"Save",v:"Paste",x:"Equation",y:"Code",z:"Undo"};k.useEffect(()=>{n&&n.atomType=="Molecule"&&z(!n.topLevel)},[n]),k.useEffect(()=>(window.addEventListener("keydown",I),()=>{window.removeEventListener("keydown",I)})),k.useEffect(()=>{const Y=setInterval(()=>{$(!0),Z(T)},3e5);return()=>clearInterval(Y)},[]);const I=Y=>{Y.metaKey&&Y.key=="s"&&(Y.preventDefault(),$(!0),Z(T))},U=async function(Y,{owner:ee,repo:ae,base:ce,changes:pe},we){we(35),ce||Y.request("GET /repos/{owner}/{repo}",{owner:ee,repo:ae}).then(me=>{let Ae=me.data.html_url;we(40),ce=me.data.default_branch,Y.rest.repos.listCommits({owner:ee,repo:ae,sha:ce,per_page:1}).then(Ee=>{we(50);let re=Ee.data[0].sha;const Pe=Ee.data[0].commit.tree.sha;Y.rest.git.createTree({owner:ee,repo:ae,base_tree:Pe,tree:Object.keys(pe.files).map(Re=>pe.files[Re]!=null?{path:Re,mode:"100644",content:pe.files[Re]}:{path:Re,mode:"100644",sha:null})}).then(Re=>{we(60);const te=Re.data.sha;Y.rest.git.createCommit({owner:ee,repo:ae,message:pe.commit,tree:te,parents:[re]}).then(ie=>{we(70),re=ie.data.sha,Y.rest.git.updateRef({owner:ee,repo:ae,sha:re,ref:"heads/"+ce,force:!0}).then(Me=>{we(80);const oe="https://hg5gsgv9te.execute-api.us-east-2.amazonaws.com/abundance-stage/update-item";let G=O.currentRepo.topics.join(" "),j=(ae+" "+ee+" "+O.currentRepo.description+" "+G).toLowerCase();fetch(oe,{method:"POST",body:JSON.stringify({owner:ee,repoName:ae,attributeUpdates:{ranking:0,html_url:Ae,searchField:j,description:O.currentRepo.description,topics:O.currentRepo.topics}}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(de=>{console.log(de),console.warn("Project saved on git and aws updated"),we(100)})})})})})})},L=async function(Y){var ee=new FileReader;ee.onload=function(ae){let ce=ae.target.result.split(",")[1];t.rest.repos.createOrUpdateFileContents({owner:O.currentUser,repo:O.currentRepoName,path:Y.name,message:"Import File",content:ce}).then(pe=>{n.updateFile(Y,pe.data.content.sha),Z(T)})},ee.readAsDataURL(Y)},q=async function(Y,ee){console.log("deleting file"),t.rest.repos.deleteFile({owner:O.currentUser,repo:O.currentRepoName,path:Y,message:"Deleted node",sha:ee})},Z=async Y=>{Y(5);let ee;ee=await O.topLevelMolecule.generateProjectThumbnail().catch(te=>{console.error("Error generating final project thumbnail: ",te)}),Y(10);var ae=O.topLevelMolecule.serialize();ae.filetypeVersion=1;const ce=JSON.stringify(ae,null,4);let pe=O.topLevelMolecule.formatBom();var we="###### Note: Do not edit this file directly, it is automatically generated from the CAD model",me=we+`

# `+O.currentRepoName+`

![](/project.svg)

`;Y(20);let Ae=await O.topLevelMolecule.requestReadme(),Ee=" ";Ae.forEach(te=>{Ee=Ee.concat(te.readMeText)+`

`}),me=me+`

`+Ee+`

`;let re={"BillOfMaterials.md":pe,"README.md":me,"project.abundance":ce};const Pe=Ae;let Re;Pe&&Pe.forEach(te=>{te.svg!=null&&(re["readme"+te.uniqueID+".svg"]=te.svg,Re=te.svg)}),re["project.svg"]=ee||Re||"",Y(30),U(t,{owner:O.currentUser,repo:O.currentRepo.repoName,changes:{files:re,commit:"Autosave"}},Y)};if(t){if(O.currentRepo.owner.login==O.currentRepo.owner.login)return se.jsxs(se.Fragment,{children:[se.jsx("div",{id:"headerBar",children:se.jsx("img",{className:"thumnail-logo",src:"/imgs/abundance_logo.png",alt:"logo"})}),s?se.jsxs("div",{className:"login-popup",id:"exporting-popup-back",style:{padding:"0",border:"10px solid #3e3d3d"},children:[se.jsxs("div",{children:[" ",O.currentRepo?se.jsx(f0,{to:`/${O.currentRepo.owner}/${O.currentRepo.repoName}`,children:se.jsx("button",{className:"closeButton",children:se.jsx("img",{})})}):null]}),se.jsx(iK,{setExportPopUp:o,exporting:!0,authorizedUserOcto:t})]}):null,se.jsx(YJ,{run:!1}),a?se.jsxs("div",{id:"shortcutDiv",children:[se.jsx("li",{style:{fontSize:"14px"},children:"(Cmmd +)"}),Object.entries(D).map(([Y,ee])=>se.jsxs("li",{className:"shortcut",children:[Y," : ",ee]},Y))]}):null,se.jsx(i$e,{authorizedUserOcto:t,savePopUp:R,setSavePopUp:$,saveProject:Z,setExportPopUp:o,saveState:C,setSaveState:T,currentMoleculeTop:B,activeAtom:n,setActiveAtom:e,setShortCuts:l}),se.jsx(aYe,{activeAtom:n}),se.jsx("input",{type:"file",id:"fileLoaderInput",style:{display:"none"},onChange:Y=>{let ee=Y.target.files[0];L(ee)}}),se.jsx("input",{type:"button",id:"fileDeleteInput",style:{display:"none"},onClick:()=>{q(n.fileName,n.sha)}}),se.jsx(eVe,{activeAtom:n,loadProject:i,setActiveAtom:e,setSavePopUp:$,setSaveState:T,setTop:z,shortCuts:D,setMesh:c,cad:d,setWireMesh:m}),se.jsxs("div",{className:"parent flex-parent",id:"lowerHalf",children:[n?se.jsx(KJ,{activeAtom:n,setActiveAtom:e,setGrid:b,setAxes:w,setWire:M,setSolid:N}):null,se.jsx(nVe,{gridParam:S,axesParam:g,wireParam:x,solidParam:A,setSaveState:T,mesh:u,wireMesh:h,outdatedMesh:v,setOutdatedMesh:y})]})]});p(`/run/${O.currentRepo.owner}/${O.currentRepo.repoName}`)}else{console.warn("You are not logged in");const{owner:Y,repoName:ee}=kW();var J=new jc;J.request("GET /repos/{owner}/{repo}",{owner:Y,repo:ee}).then(ae=>{O.currentRepoName=ae.data.name,O.currentRepo=ae.data})}}function uYe(n){return new Worker("/abundace-mo-fork/assets/worker-BkhwM8GZ.js",{name:n==null?void 0:n.name})}var ip=null;const $f=HW(new uYe);function cYe(){const[n,e]=k.useState(5),[t,r]=k.useState({}),[i,s]=k.useState(null),[o,a]=k.useState(!1);k.useEffect(()=>{$f.createMesh(n).then(S=>r(S)),$f.createMesh(n).then(S=>s(S))},[n]);const[l,u]=k.useState(!1),[c,f]=k.useState(null),[d,h]=k.useState(!1),[m,v]=k.useState(O.displayShortcuts);k.useEffect(()=>{console.log("useEffect  in top levelrunning"),O.writeToDisplay=(S,b=!1)=>{console.log("write to display running "+S),a(!0),b?$f.resetView().then(g=>{r(g),s(g),a(!1)}).catch(g=>{console.error("reset view not working"+g)}):($f.generateDisplayMesh(S).then(g=>{r(g),a(!1)}).catch(g=>{console.error("Can't display Mesh "+g)}),$f.generateDisplayMesh(O.currentMolecule.output.value).then(g=>s(g)).catch(g=>{console.error("Can't comput Wireframe/No output "+g)}))},O.cad=$f},[c]);const y=function(){return new Promise((S,b)=>{window.location.href.includes("private")?cC.OAuth.initialize("6CQQE8MMCBFjdWEjevnTBMCQpsw"):cC.OAuth.initialize("BYP9iFpD7aTV9SDhnalvhZ4fwD8"),cC.OAuth.popup("github").then(g=>{ip=new jc({auth:g.access_token}),ip.request("GET /user",{}).then(w=>{O.currentUser=w.data.login,O.currentUser&&(u(!0),S(ip))})})})},p=function(S){console.log(S),O.recentMoleculeRepresentation=[],O.loadedRepo=S,O.currentRepoName=S.repoName,O.currentRepo=S,O.totalAtomCount=0,O.numberOfAtomsToLoad=0,O.startTime=new Date().getTime();var b=new jc;return b.request("GET /repos/{owner}/{repo}/contents/project.abundance",{owner:S.owner,repo:S.repoName}).then(g=>{console.log(g);let w=JSON.parse(atob(g.data.content));w.filetypeVersion==1?O.topLevelMolecule.deserialize(w):O.topLevelMolecule.deserialize(convertFromOldFormat(w)),f(O.currentMolecule),O.currentMolecule.selected=!0}).catch(g=>{throw alert("Can't load/find project "+g),new Error("Can't load/find project "+g)})};return se.jsx("main",{children:se.jsxs(ooe,{children:[se.jsx(uv,{exact:!0,path:"",element:se.jsx(pFe,{tryLogin:y,setIsLoggedIn:u,isloggedIn:l,authorizedUserOcto:ip,exportPopUp:d,setExportPopUp:h})}),se.jsx(uv,{exact:!0,path:"/callback",element:se.jsx("p",{children:"WHAT THE FUCK"})}),se.jsx(uv,{path:"/:owner/:repoName",element:se.jsx(lYe,{activeAtom:c,setActiveAtom:f,authorizedUserOcto:ip,tryLogin:y,loadProject:p,exportPopUp:d,setExportPopUp:h,shortCutsOn:m,setShortCuts:v,mesh:t,setMesh:r,size:n,cad:$f,wireMesh:i,setWireMesh:s,outdatedMesh:o,setOutdatedMesh:a})}),se.jsx(uv,{path:"/run/:owner/:repoName",element:se.jsx(t$e,{isloggedIn:l,setActiveAtom:f,activeAtom:O.currentMolecule,authorizedUserOcto:ip,tryLogin:y,loadProject:p,mesh:t,wireMesh:i,setWireMesh:s,outdatedMesh:o,setOutdatedMesh:a})})]})})}const fYe=xT.createRoot(document.getElementById("root"));fYe.render(se.jsx(De.StrictMode,{children:se.jsx(hoe,{children:se.jsx(cYe,{})})}));
