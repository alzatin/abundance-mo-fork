var Fae=Object.defineProperty;var Bae=(n,e,t)=>e in n?Fae(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var i8=(n,e,t)=>Bae(n,typeof e!="symbol"?e+"":e,t);import{Octokit as Of}from"https://esm.sh/octokit@2.0.19";function zae(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var ks=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ll(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Uae(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var Gj={exports:{}},LM={},qj={exports:{}},_n={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F1=Symbol.for("react.element"),Vae=Symbol.for("react.portal"),$ae=Symbol.for("react.fragment"),Hae=Symbol.for("react.strict_mode"),Wae=Symbol.for("react.profiler"),jae=Symbol.for("react.provider"),Gae=Symbol.for("react.context"),qae=Symbol.for("react.forward_ref"),Xae=Symbol.for("react.suspense"),Yae=Symbol.for("react.memo"),Kae=Symbol.for("react.lazy"),o8=Symbol.iterator;function Zae(n){return n===null||typeof n!="object"?null:(n=o8&&n[o8]||n["@@iterator"],typeof n=="function"?n:null)}var Xj={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Yj=Object.assign,Kj={};function Vg(n,e,t){this.props=n,this.context=e,this.refs=Kj,this.updater=t||Xj}Vg.prototype.isReactComponent={};Vg.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Vg.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function Zj(){}Zj.prototype=Vg.prototype;function OO(n,e,t){this.props=n,this.context=e,this.refs=Kj,this.updater=t||Xj}var kO=OO.prototype=new Zj;kO.constructor=OO;Yj(kO,Vg.prototype);kO.isPureReactComponent=!0;var s8=Array.isArray,Jj=Object.prototype.hasOwnProperty,IO={current:null},Qj={key:!0,ref:!0,__self:!0,__source:!0};function eG(n,e,t){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)Jj.call(e,r)&&!Qj.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:F1,type:n,key:o,ref:s,props:i,_owner:IO.current}}function Jae(n,e){return{$$typeof:F1,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function LO(n){return typeof n=="object"&&n!==null&&n.$$typeof===F1}function Qae(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var a8=/\/+/g;function kA(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Qae(""+n.key):e.toString(36)}function WS(n,e,t,r,i){var o=typeof n;(o==="undefined"||o==="boolean")&&(n=null);var s=!1;if(n===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(n.$$typeof){case F1:case Vae:s=!0}}if(s)return s=n,i=i(s),n=r===""?"."+kA(s,0):r,s8(i)?(t="",n!=null&&(t=n.replace(a8,"$&/")+"/"),WS(i,e,t,"",function(u){return u})):i!=null&&(LO(i)&&(i=Jae(i,t+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(a8,"$&/")+"/")+n)),e.push(i)),1;if(s=0,r=r===""?".":r+":",s8(n))for(var a=0;a<n.length;a++){o=n[a];var l=r+kA(o,a);s+=WS(o,e,t,l,i)}else if(l=Zae(n),typeof l=="function")for(n=l.call(n),a=0;!(o=n.next()).done;)o=o.value,l=r+kA(o,a++),s+=WS(o,e,t,l,i);else if(o==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Eb(n,e,t){if(n==null)return n;var r=[],i=0;return WS(n,r,"","",function(o){return e.call(t,o,i++)}),r}function ele(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Go={current:null},jS={transition:null},tle={ReactCurrentDispatcher:Go,ReactCurrentBatchConfig:jS,ReactCurrentOwner:IO};_n.Children={map:Eb,forEach:function(n,e,t){Eb(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Eb(n,function(){e++}),e},toArray:function(n){return Eb(n,function(e){return e})||[]},only:function(n){if(!LO(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};_n.Component=Vg;_n.Fragment=$ae;_n.Profiler=Wae;_n.PureComponent=OO;_n.StrictMode=Hae;_n.Suspense=Xae;_n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tle;_n.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=Yj({},n.props),i=n.key,o=n.ref,s=n._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=IO.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)Jj.call(e,l)&&!Qj.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:F1,type:n.type,key:i,ref:o,props:r,_owner:s}};_n.createContext=function(n){return n={$$typeof:Gae,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:jae,_context:n},n.Consumer=n};_n.createElement=eG;_n.createFactory=function(n){var e=eG.bind(null,n);return e.type=n,e};_n.createRef=function(){return{current:null}};_n.forwardRef=function(n){return{$$typeof:qae,render:n}};_n.isValidElement=LO;_n.lazy=function(n){return{$$typeof:Kae,_payload:{_status:-1,_result:n},_init:ele}};_n.memo=function(n,e){return{$$typeof:Yae,type:n,compare:e===void 0?null:e}};_n.startTransition=function(n){var e=jS.transition;jS.transition={};try{n()}finally{jS.transition=e}};_n.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};_n.useCallback=function(n,e){return Go.current.useCallback(n,e)};_n.useContext=function(n){return Go.current.useContext(n)};_n.useDebugValue=function(){};_n.useDeferredValue=function(n){return Go.current.useDeferredValue(n)};_n.useEffect=function(n,e){return Go.current.useEffect(n,e)};_n.useId=function(){return Go.current.useId()};_n.useImperativeHandle=function(n,e,t){return Go.current.useImperativeHandle(n,e,t)};_n.useInsertionEffect=function(n,e){return Go.current.useInsertionEffect(n,e)};_n.useLayoutEffect=function(n,e){return Go.current.useLayoutEffect(n,e)};_n.useMemo=function(n,e){return Go.current.useMemo(n,e)};_n.useReducer=function(n,e,t){return Go.current.useReducer(n,e,t)};_n.useRef=function(n){return Go.current.useRef(n)};_n.useState=function(n){return Go.current.useState(n)};_n.useSyncExternalStore=function(n,e,t){return Go.current.useSyncExternalStore(n,e,t)};_n.useTransition=function(){return Go.current.useTransition()};_n.version="18.2.0";qj.exports=_n;var z=qj.exports;const Te=ll(z),O_=zae({__proto__:null,default:Te},[z]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nle=z,rle=Symbol.for("react.element"),ile=Symbol.for("react.fragment"),ole=Object.prototype.hasOwnProperty,sle=nle.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ale={key:!0,ref:!0,__self:!0,__source:!0};function tG(n,e,t){var r,i={},o=null,s=null;t!==void 0&&(o=""+t),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)ole.call(e,r)&&!ale.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:rle,type:n,key:o,ref:s,props:i,_owner:sle.current}}LM.Fragment=ile;LM.jsx=tG;LM.jsxs=tG;Gj.exports=LM;var Q=Gj.exports,ED={},nG={exports:{}},Gs={},rG={exports:{}},iG={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(V,L){var X=V.length;V.push(L);e:for(;0<X;){var Z=X-1>>>1,te=V[Z];if(0<i(te,L))V[Z]=L,V[X]=te,X=Z;else break e}}function t(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var L=V[0],X=V.pop();if(X!==L){V[0]=X;e:for(var Z=0,te=V.length,Y=te>>>1;Z<Y;){var re=2*(Z+1)-1,fe=V[re],ue=re+1,ge=V[ue];if(0>i(fe,X))ue<te&&0>i(ge,fe)?(V[Z]=ge,V[ue]=X,Z=ue):(V[Z]=fe,V[re]=X,Z=re);else if(ue<te&&0>i(ge,X))V[Z]=ge,V[ue]=X,Z=ue;else break e}}return L}function i(V,L){var X=V.sortIndex-L.sortIndex;return X!==0?X:V.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();n.unstable_now=function(){return s.now()-a}}var l=[],u=[],c=1,f=null,d=3,h=!1,m=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(V){for(var L=t(u);L!==null;){if(L.callback===null)r(u);else if(L.startTime<=V)r(u),L.sortIndex=L.expirationTime,e(l,L);else break;L=t(u)}}function v(V){if(g=!1,b(V),!m)if(t(l)!==null)m=!0,N(S);else{var L=t(u);L!==null&&I(v,L.startTime-V)}}function S(V,L){m=!1,g&&(g=!1,p(A),A=-1),h=!0;var X=d;try{for(b(L),f=t(l);f!==null&&(!(f.expirationTime>L)||V&&!D());){var Z=f.callback;if(typeof Z=="function"){f.callback=null,d=f.priorityLevel;var te=Z(f.expirationTime<=L);L=n.unstable_now(),typeof te=="function"?f.callback=te:f===t(l)&&r(l),b(L)}else r(l);f=t(l)}if(f!==null)var Y=!0;else{var re=t(u);re!==null&&I(v,re.startTime-L),Y=!1}return Y}finally{f=null,d=X,h=!1}}var x=!1,M=null,A=-1,T=5,C=-1;function D(){return!(n.unstable_now()-C<T)}function R(){if(M!==null){var V=n.unstable_now();C=V;var L=!0;try{L=M(!0,V)}finally{L?B():(x=!1,M=null)}}else x=!1}var B;if(typeof w=="function")B=function(){w(R)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,U=F.port2;F.port1.onmessage=R,B=function(){U.postMessage(null)}}else B=function(){y(R,0)};function N(V){M=V,x||(x=!0,B())}function I(V,L){A=y(function(){V(n.unstable_now())},L)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_continueExecution=function(){m||h||(m=!0,N(S))},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(V){switch(d){case 1:case 2:case 3:var L=3;break;default:L=d}var X=d;d=L;try{return V()}finally{d=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(V,L){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var X=d;d=V;try{return L()}finally{d=X}},n.unstable_scheduleCallback=function(V,L,X){var Z=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Z+X:Z):X=Z,V){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=X+te,V={id:c++,callback:L,priorityLevel:V,startTime:X,expirationTime:te,sortIndex:-1},X>Z?(V.sortIndex=X,e(u,V),t(l)===null&&V===t(u)&&(g?(p(A),A=-1):g=!0,I(v,X-Z))):(V.sortIndex=te,e(l,V),m||h||(m=!0,N(S))),V},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(V){var L=d;return function(){var X=d;d=L;try{return V.apply(this,arguments)}finally{d=X}}}})(iG);rG.exports=iG;var lle=rG.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oG=z,Ws=lle;function ut(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sG=new Set,py={};function Xh(n,e){ag(n,e),ag(n+"Capture",e)}function ag(n,e){for(py[n]=e,n=0;n<e.length;n++)sG.add(e[n])}var tc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),MD=Object.prototype.hasOwnProperty,ule=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,l8={},u8={};function cle(n){return MD.call(u8,n)?!0:MD.call(l8,n)?!1:ule.test(n)?u8[n]=!0:(l8[n]=!0,!1)}function fle(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function dle(n,e,t,r){if(e===null||typeof e>"u"||fle(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qo(n,e,t,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Ki={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Ki[n]=new qo(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Ki[e]=new qo(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Ki[n]=new qo(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Ki[n]=new qo(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Ki[n]=new qo(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Ki[n]=new qo(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Ki[n]=new qo(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Ki[n]=new qo(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Ki[n]=new qo(n,5,!1,n.toLowerCase(),null,!1,!1)});var FO=/[\-:]([a-z])/g;function BO(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(FO,BO);Ki[e]=new qo(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(FO,BO);Ki[e]=new qo(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(FO,BO);Ki[e]=new qo(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Ki[n]=new qo(n,1,!1,n.toLowerCase(),null,!1,!1)});Ki.xlinkHref=new qo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Ki[n]=new qo(n,1,!1,n.toLowerCase(),null,!0,!0)});function zO(n,e,t,r){var i=Ki.hasOwnProperty(e)?Ki[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(dle(e,t,i,r)&&(t=null),r||i===null?cle(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var xc=oG.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mb=Symbol.for("react.element"),mm=Symbol.for("react.portal"),gm=Symbol.for("react.fragment"),UO=Symbol.for("react.strict_mode"),CD=Symbol.for("react.profiler"),aG=Symbol.for("react.provider"),lG=Symbol.for("react.context"),VO=Symbol.for("react.forward_ref"),AD=Symbol.for("react.suspense"),TD=Symbol.for("react.suspense_list"),$O=Symbol.for("react.memo"),Gc=Symbol.for("react.lazy"),uG=Symbol.for("react.offscreen"),c8=Symbol.iterator;function Uv(n){return n===null||typeof n!="object"?null:(n=c8&&n[c8]||n["@@iterator"],typeof n=="function"?n:null)}var kr=Object.assign,IA;function C0(n){if(IA===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);IA=e&&e[1]||""}return`
`+IA+n}var LA=!1;function FA(n,e){if(!n||LA)return"";LA=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){r=u}n.call(e.prototype)}else{try{throw Error()}catch(u){r=u}n()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=s&&0<=a);break}}}finally{LA=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?C0(n):""}function hle(n){switch(n.tag){case 5:return C0(n.type);case 16:return C0("Lazy");case 13:return C0("Suspense");case 19:return C0("SuspenseList");case 0:case 2:case 15:return n=FA(n.type,!1),n;case 11:return n=FA(n.type.render,!1),n;case 1:return n=FA(n.type,!0),n;default:return""}}function DD(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case gm:return"Fragment";case mm:return"Portal";case CD:return"Profiler";case UO:return"StrictMode";case AD:return"Suspense";case TD:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case lG:return(n.displayName||"Context")+".Consumer";case aG:return(n._context.displayName||"Context")+".Provider";case VO:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case $O:return e=n.displayName||null,e!==null?e:DD(n.type)||"Memo";case Gc:e=n._payload,n=n._init;try{return DD(n(e))}catch{}}return null}function ple(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return DD(e);case 8:return e===UO?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function kf(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function cG(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function mle(n){var e=cG(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,o=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Cb(n){n._valueTracker||(n._valueTracker=mle(n))}function fG(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=cG(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function k_(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function ND(n,e){var t=e.checked;return kr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function f8(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=kf(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function dG(n,e){e=e.checked,e!=null&&zO(n,"checked",e,!1)}function PD(n,e){dG(n,e);var t=kf(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?RD(n,e.type,t):e.hasOwnProperty("defaultValue")&&RD(n,e.type,kf(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function d8(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function RD(n,e,t){(e!=="number"||k_(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var A0=Array.isArray;function Um(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+kf(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function OD(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ut(91));return kr({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function h8(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(ut(92));if(A0(t)){if(1<t.length)throw Error(ut(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:kf(t)}}function hG(n,e){var t=kf(e.value),r=kf(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function p8(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function pG(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kD(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?pG(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Ab,mG=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Ab=Ab||document.createElement("div"),Ab.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ab.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function my(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var W0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gle=["Webkit","ms","Moz","O"];Object.keys(W0).forEach(function(n){gle.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),W0[e]=W0[n]})});function gG(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||W0.hasOwnProperty(n)&&W0[n]?(""+e).trim():e+"px"}function vG(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=gG(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var vle=kr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ID(n,e){if(e){if(vle[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ut(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ut(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ut(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ut(62))}}function LD(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var FD=null;function HO(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var BD=null,Vm=null,$m=null;function m8(n){if(n=U1(n)){if(typeof BD!="function")throw Error(ut(280));var e=n.stateNode;e&&(e=VM(e),BD(n.stateNode,n.type,e))}}function yG(n){Vm?$m?$m.push(n):$m=[n]:Vm=n}function xG(){if(Vm){var n=Vm,e=$m;if($m=Vm=null,m8(n),e)for(n=0;n<e.length;n++)m8(e[n])}}function bG(n,e){return n(e)}function wG(){}var BA=!1;function SG(n,e,t){if(BA)return n(e,t);BA=!0;try{return bG(n,e,t)}finally{BA=!1,(Vm!==null||$m!==null)&&(wG(),xG())}}function gy(n,e){var t=n.stateNode;if(t===null)return null;var r=VM(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(ut(231,e,typeof t));return t}var zD=!1;if(tc)try{var Vv={};Object.defineProperty(Vv,"passive",{get:function(){zD=!0}}),window.addEventListener("test",Vv,Vv),window.removeEventListener("test",Vv,Vv)}catch{zD=!1}function yle(n,e,t,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(c){this.onError(c)}}var j0=!1,I_=null,L_=!1,UD=null,xle={onError:function(n){j0=!0,I_=n}};function ble(n,e,t,r,i,o,s,a,l){j0=!1,I_=null,yle.apply(xle,arguments)}function wle(n,e,t,r,i,o,s,a,l){if(ble.apply(this,arguments),j0){if(j0){var u=I_;j0=!1,I_=null}else throw Error(ut(198));L_||(L_=!0,UD=u)}}function Yh(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function _G(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function g8(n){if(Yh(n)!==n)throw Error(ut(188))}function Sle(n){var e=n.alternate;if(!e){if(e=Yh(n),e===null)throw Error(ut(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===t)return g8(i),n;if(o===r)return g8(i),e;o=o.sibling}throw Error(ut(188))}if(t.return!==r.return)t=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===t){s=!0,t=i,r=o;break}if(a===r){s=!0,r=i,t=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===t){s=!0,t=o,r=i;break}if(a===r){s=!0,r=o,t=i;break}a=a.sibling}if(!s)throw Error(ut(189))}}if(t.alternate!==r)throw Error(ut(190))}if(t.tag!==3)throw Error(ut(188));return t.stateNode.current===t?n:e}function EG(n){return n=Sle(n),n!==null?MG(n):null}function MG(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=MG(n);if(e!==null)return e;n=n.sibling}return null}var CG=Ws.unstable_scheduleCallback,v8=Ws.unstable_cancelCallback,_le=Ws.unstable_shouldYield,Ele=Ws.unstable_requestPaint,Jr=Ws.unstable_now,Mle=Ws.unstable_getCurrentPriorityLevel,WO=Ws.unstable_ImmediatePriority,AG=Ws.unstable_UserBlockingPriority,F_=Ws.unstable_NormalPriority,Cle=Ws.unstable_LowPriority,TG=Ws.unstable_IdlePriority,FM=null,ql=null;function Ale(n){if(ql&&typeof ql.onCommitFiberRoot=="function")try{ql.onCommitFiberRoot(FM,n,void 0,(n.current.flags&128)===128)}catch{}}var Ja=Math.clz32?Math.clz32:Nle,Tle=Math.log,Dle=Math.LN2;function Nle(n){return n>>>=0,n===0?32:31-(Tle(n)/Dle|0)|0}var Tb=64,Db=4194304;function T0(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function B_(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,o=n.pingedLanes,s=t&268435455;if(s!==0){var a=s&~i;a!==0?r=T0(a):(o&=s,o!==0&&(r=T0(o)))}else s=t&~i,s!==0?r=T0(s):o!==0&&(r=T0(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Ja(e),i=1<<t,r|=n[t],e&=~i;return r}function Ple(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rle(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,o=n.pendingLanes;0<o;){var s=31-Ja(o),a=1<<s,l=i[s];l===-1?(!(a&t)||a&r)&&(i[s]=Ple(a,e)):l<=e&&(n.expiredLanes|=a),o&=~a}}function VD(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function DG(){var n=Tb;return Tb<<=1,!(Tb&4194240)&&(Tb=64),n}function zA(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function B1(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Ja(e),n[e]=t}function Ole(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Ja(t),o=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~o}}function jO(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Ja(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Jn=0;function NG(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var PG,GO,RG,OG,kG,$D=!1,Nb=[],gf=null,vf=null,yf=null,vy=new Map,yy=new Map,Jc=[],kle="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function y8(n,e){switch(n){case"focusin":case"focusout":gf=null;break;case"dragenter":case"dragleave":vf=null;break;case"mouseover":case"mouseout":yf=null;break;case"pointerover":case"pointerout":vy.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":yy.delete(e.pointerId)}}function $v(n,e,t,r,i,o){return n===null||n.nativeEvent!==o?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=U1(e),e!==null&&GO(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function Ile(n,e,t,r,i){switch(e){case"focusin":return gf=$v(gf,n,e,t,r,i),!0;case"dragenter":return vf=$v(vf,n,e,t,r,i),!0;case"mouseover":return yf=$v(yf,n,e,t,r,i),!0;case"pointerover":var o=i.pointerId;return vy.set(o,$v(vy.get(o)||null,n,e,t,r,i)),!0;case"gotpointercapture":return o=i.pointerId,yy.set(o,$v(yy.get(o)||null,n,e,t,r,i)),!0}return!1}function IG(n){var e=Qd(n.target);if(e!==null){var t=Yh(e);if(t!==null){if(e=t.tag,e===13){if(e=_G(t),e!==null){n.blockedOn=e,kG(n.priority,function(){RG(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function GS(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=HD(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);FD=r,t.target.dispatchEvent(r),FD=null}else return e=U1(t),e!==null&&GO(e),n.blockedOn=t,!1;e.shift()}return!0}function x8(n,e,t){GS(n)&&t.delete(e)}function Lle(){$D=!1,gf!==null&&GS(gf)&&(gf=null),vf!==null&&GS(vf)&&(vf=null),yf!==null&&GS(yf)&&(yf=null),vy.forEach(x8),yy.forEach(x8)}function Hv(n,e){n.blockedOn===e&&(n.blockedOn=null,$D||($D=!0,Ws.unstable_scheduleCallback(Ws.unstable_NormalPriority,Lle)))}function xy(n){function e(i){return Hv(i,n)}if(0<Nb.length){Hv(Nb[0],n);for(var t=1;t<Nb.length;t++){var r=Nb[t];r.blockedOn===n&&(r.blockedOn=null)}}for(gf!==null&&Hv(gf,n),vf!==null&&Hv(vf,n),yf!==null&&Hv(yf,n),vy.forEach(e),yy.forEach(e),t=0;t<Jc.length;t++)r=Jc[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Jc.length&&(t=Jc[0],t.blockedOn===null);)IG(t),t.blockedOn===null&&Jc.shift()}var Hm=xc.ReactCurrentBatchConfig,z_=!0;function Fle(n,e,t,r){var i=Jn,o=Hm.transition;Hm.transition=null;try{Jn=1,qO(n,e,t,r)}finally{Jn=i,Hm.transition=o}}function Ble(n,e,t,r){var i=Jn,o=Hm.transition;Hm.transition=null;try{Jn=4,qO(n,e,t,r)}finally{Jn=i,Hm.transition=o}}function qO(n,e,t,r){if(z_){var i=HD(n,e,t,r);if(i===null)YA(n,e,r,U_,t),y8(n,r);else if(Ile(i,n,e,t,r))r.stopPropagation();else if(y8(n,r),e&4&&-1<kle.indexOf(n)){for(;i!==null;){var o=U1(i);if(o!==null&&PG(o),o=HD(n,e,t,r),o===null&&YA(n,e,r,U_,t),o===i)break;i=o}i!==null&&r.stopPropagation()}else YA(n,e,r,null,t)}}var U_=null;function HD(n,e,t,r){if(U_=null,n=HO(r),n=Qd(n),n!==null)if(e=Yh(n),e===null)n=null;else if(t=e.tag,t===13){if(n=_G(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return U_=n,null}function LG(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Mle()){case WO:return 1;case AG:return 4;case F_:case Cle:return 16;case TG:return 536870912;default:return 16}default:return 16}}var of=null,XO=null,qS=null;function FG(){if(qS)return qS;var n,e=XO,t=e.length,r,i="value"in of?of.value:of.textContent,o=i.length;for(n=0;n<t&&e[n]===i[n];n++);var s=t-n;for(r=1;r<=s&&e[t-r]===i[o-r];r++);return qS=i.slice(n,1<r?1-r:void 0)}function XS(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Pb(){return!0}function b8(){return!1}function qs(n){function e(t,r,i,o,s){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Pb:b8,this.isPropagationStopped=b8,this}return kr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Pb)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Pb)},persist:function(){},isPersistent:Pb}),e}var $g={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},YO=qs($g),z1=kr({},$g,{view:0,detail:0}),zle=qs(z1),UA,VA,Wv,BM=kr({},z1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:KO,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Wv&&(Wv&&n.type==="mousemove"?(UA=n.screenX-Wv.screenX,VA=n.screenY-Wv.screenY):VA=UA=0,Wv=n),UA)},movementY:function(n){return"movementY"in n?n.movementY:VA}}),w8=qs(BM),Ule=kr({},BM,{dataTransfer:0}),Vle=qs(Ule),$le=kr({},z1,{relatedTarget:0}),$A=qs($le),Hle=kr({},$g,{animationName:0,elapsedTime:0,pseudoElement:0}),Wle=qs(Hle),jle=kr({},$g,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Gle=qs(jle),qle=kr({},$g,{data:0}),S8=qs(qle),Xle={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yle={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kle={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zle(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=Kle[n])?!!e[n]:!1}function KO(){return Zle}var Jle=kr({},z1,{key:function(n){if(n.key){var e=Xle[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=XS(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Yle[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:KO,charCode:function(n){return n.type==="keypress"?XS(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?XS(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Qle=qs(Jle),eue=kr({},BM,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_8=qs(eue),tue=kr({},z1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:KO}),nue=qs(tue),rue=kr({},$g,{propertyName:0,elapsedTime:0,pseudoElement:0}),iue=qs(rue),oue=kr({},BM,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),sue=qs(oue),aue=[9,13,27,32],ZO=tc&&"CompositionEvent"in window,G0=null;tc&&"documentMode"in document&&(G0=document.documentMode);var lue=tc&&"TextEvent"in window&&!G0,BG=tc&&(!ZO||G0&&8<G0&&11>=G0),E8=" ",M8=!1;function zG(n,e){switch(n){case"keyup":return aue.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function UG(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var vm=!1;function uue(n,e){switch(n){case"compositionend":return UG(e);case"keypress":return e.which!==32?null:(M8=!0,E8);case"textInput":return n=e.data,n===E8&&M8?null:n;default:return null}}function cue(n,e){if(vm)return n==="compositionend"||!ZO&&zG(n,e)?(n=FG(),qS=XO=of=null,vm=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return BG&&e.locale!=="ko"?null:e.data;default:return null}}var fue={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function C8(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!fue[n.type]:e==="textarea"}function VG(n,e,t,r){yG(r),e=V_(e,"onChange"),0<e.length&&(t=new YO("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var q0=null,by=null;function due(n){JG(n,0)}function zM(n){var e=bm(n);if(fG(e))return n}function hue(n,e){if(n==="change")return e}var $G=!1;if(tc){var HA;if(tc){var WA="oninput"in document;if(!WA){var A8=document.createElement("div");A8.setAttribute("oninput","return;"),WA=typeof A8.oninput=="function"}HA=WA}else HA=!1;$G=HA&&(!document.documentMode||9<document.documentMode)}function T8(){q0&&(q0.detachEvent("onpropertychange",HG),by=q0=null)}function HG(n){if(n.propertyName==="value"&&zM(by)){var e=[];VG(e,by,n,HO(n)),SG(due,e)}}function pue(n,e,t){n==="focusin"?(T8(),q0=e,by=t,q0.attachEvent("onpropertychange",HG)):n==="focusout"&&T8()}function mue(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return zM(by)}function gue(n,e){if(n==="click")return zM(e)}function vue(n,e){if(n==="input"||n==="change")return zM(e)}function yue(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var rl=typeof Object.is=="function"?Object.is:yue;function wy(n,e){if(rl(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!MD.call(e,i)||!rl(n[i],e[i]))return!1}return!0}function D8(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function N8(n,e){var t=D8(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=D8(t)}}function WG(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?WG(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function jG(){for(var n=window,e=k_();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=k_(n.document)}return e}function JO(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function xue(n){var e=jG(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&WG(t.ownerDocument.documentElement,t)){if(r!==null&&JO(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!n.extend&&o>r&&(i=r,r=o,o=i),i=N8(t,o);var s=N8(t,r);i&&s&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==s.node||n.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),o>r?(n.addRange(e),n.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var bue=tc&&"documentMode"in document&&11>=document.documentMode,ym=null,WD=null,X0=null,jD=!1;function P8(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;jD||ym==null||ym!==k_(r)||(r=ym,"selectionStart"in r&&JO(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),X0&&wy(X0,r)||(X0=r,r=V_(WD,"onSelect"),0<r.length&&(e=new YO("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=ym)))}function Rb(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var xm={animationend:Rb("Animation","AnimationEnd"),animationiteration:Rb("Animation","AnimationIteration"),animationstart:Rb("Animation","AnimationStart"),transitionend:Rb("Transition","TransitionEnd")},jA={},GG={};tc&&(GG=document.createElement("div").style,"AnimationEvent"in window||(delete xm.animationend.animation,delete xm.animationiteration.animation,delete xm.animationstart.animation),"TransitionEvent"in window||delete xm.transitionend.transition);function UM(n){if(jA[n])return jA[n];if(!xm[n])return n;var e=xm[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in GG)return jA[n]=e[t];return n}var qG=UM("animationend"),XG=UM("animationiteration"),YG=UM("animationstart"),KG=UM("transitionend"),ZG=new Map,R8="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qf(n,e){ZG.set(n,e),Xh(e,[n])}for(var GA=0;GA<R8.length;GA++){var qA=R8[GA],wue=qA.toLowerCase(),Sue=qA[0].toUpperCase()+qA.slice(1);Qf(wue,"on"+Sue)}Qf(qG,"onAnimationEnd");Qf(XG,"onAnimationIteration");Qf(YG,"onAnimationStart");Qf("dblclick","onDoubleClick");Qf("focusin","onFocus");Qf("focusout","onBlur");Qf(KG,"onTransitionEnd");ag("onMouseEnter",["mouseout","mouseover"]);ag("onMouseLeave",["mouseout","mouseover"]);ag("onPointerEnter",["pointerout","pointerover"]);ag("onPointerLeave",["pointerout","pointerover"]);Xh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xh("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var D0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_ue=new Set("cancel close invalid load scroll toggle".split(" ").concat(D0));function O8(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,wle(r,e,void 0,n),n.currentTarget=null}function JG(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;O8(i,a,u),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;O8(i,a,u),o=l}}}if(L_)throw n=UD,L_=!1,UD=null,n}function hr(n,e){var t=e[KD];t===void 0&&(t=e[KD]=new Set);var r=n+"__bubble";t.has(r)||(QG(e,n,2,!1),t.add(r))}function XA(n,e,t){var r=0;e&&(r|=4),QG(t,n,r,e)}var Ob="_reactListening"+Math.random().toString(36).slice(2);function Sy(n){if(!n[Ob]){n[Ob]=!0,sG.forEach(function(t){t!=="selectionchange"&&(_ue.has(t)||XA(t,!1,n),XA(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Ob]||(e[Ob]=!0,XA("selectionchange",!1,e))}}function QG(n,e,t,r){switch(LG(e)){case 1:var i=Fle;break;case 4:i=Ble;break;default:i=qO}t=i.bind(null,e,t,n),i=void 0,!zD||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function YA(n,e,t,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Qd(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}SG(function(){var u=o,c=HO(t),f=[];e:{var d=ZG.get(n);if(d!==void 0){var h=YO,m=n;switch(n){case"keypress":if(XS(t)===0)break e;case"keydown":case"keyup":h=Qle;break;case"focusin":m="focus",h=$A;break;case"focusout":m="blur",h=$A;break;case"beforeblur":case"afterblur":h=$A;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=w8;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Vle;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=nue;break;case qG:case XG:case YG:h=Wle;break;case KG:h=iue;break;case"scroll":h=zle;break;case"wheel":h=sue;break;case"copy":case"cut":case"paste":h=Gle;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=_8}var g=(e&4)!==0,y=!g&&n==="scroll",p=g?d!==null?d+"Capture":null:d;g=[];for(var w=u,b;w!==null;){b=w;var v=b.stateNode;if(b.tag===5&&v!==null&&(b=v,p!==null&&(v=gy(w,p),v!=null&&g.push(_y(w,v,b)))),y)break;w=w.return}0<g.length&&(d=new h(d,m,null,t,c),f.push({event:d,listeners:g}))}}if(!(e&7)){e:{if(d=n==="mouseover"||n==="pointerover",h=n==="mouseout"||n==="pointerout",d&&t!==FD&&(m=t.relatedTarget||t.fromElement)&&(Qd(m)||m[nc]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(m=t.relatedTarget||t.toElement,h=u,m=m?Qd(m):null,m!==null&&(y=Yh(m),m!==y||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=u),h!==m)){if(g=w8,v="onMouseLeave",p="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(g=_8,v="onPointerLeave",p="onPointerEnter",w="pointer"),y=h==null?d:bm(h),b=m==null?d:bm(m),d=new g(v,w+"leave",h,t,c),d.target=y,d.relatedTarget=b,v=null,Qd(c)===u&&(g=new g(p,w+"enter",m,t,c),g.target=b,g.relatedTarget=y,v=g),y=v,h&&m)t:{for(g=h,p=m,w=0,b=g;b;b=Ep(b))w++;for(b=0,v=p;v;v=Ep(v))b++;for(;0<w-b;)g=Ep(g),w--;for(;0<b-w;)p=Ep(p),b--;for(;w--;){if(g===p||p!==null&&g===p.alternate)break t;g=Ep(g),p=Ep(p)}g=null}else g=null;h!==null&&k8(f,d,h,g,!1),m!==null&&y!==null&&k8(f,y,m,g,!0)}}e:{if(d=u?bm(u):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var S=hue;else if(C8(d))if($G)S=vue;else{S=mue;var x=pue}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(S=gue);if(S&&(S=S(n,u))){VG(f,S,t,c);break e}x&&x(n,d,u),n==="focusout"&&(x=d._wrapperState)&&x.controlled&&d.type==="number"&&RD(d,"number",d.value)}switch(x=u?bm(u):window,n){case"focusin":(C8(x)||x.contentEditable==="true")&&(ym=x,WD=u,X0=null);break;case"focusout":X0=WD=ym=null;break;case"mousedown":jD=!0;break;case"contextmenu":case"mouseup":case"dragend":jD=!1,P8(f,t,c);break;case"selectionchange":if(bue)break;case"keydown":case"keyup":P8(f,t,c)}var M;if(ZO)e:{switch(n){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else vm?zG(n,t)&&(A="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(A="onCompositionStart");A&&(BG&&t.locale!=="ko"&&(vm||A!=="onCompositionStart"?A==="onCompositionEnd"&&vm&&(M=FG()):(of=c,XO="value"in of?of.value:of.textContent,vm=!0)),x=V_(u,A),0<x.length&&(A=new S8(A,n,null,t,c),f.push({event:A,listeners:x}),M?A.data=M:(M=UG(t),M!==null&&(A.data=M)))),(M=lue?uue(n,t):cue(n,t))&&(u=V_(u,"onBeforeInput"),0<u.length&&(c=new S8("onBeforeInput","beforeinput",null,t,c),f.push({event:c,listeners:u}),c.data=M))}JG(f,e)})}function _y(n,e,t){return{instance:n,listener:e,currentTarget:t}}function V_(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=gy(n,t),o!=null&&r.unshift(_y(n,o,i)),o=gy(n,e),o!=null&&r.push(_y(n,o,i))),n=n.return}return r}function Ep(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function k8(n,e,t,r,i){for(var o=e._reactName,s=[];t!==null&&t!==r;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=gy(t,o),l!=null&&s.unshift(_y(t,l,a))):i||(l=gy(t,o),l!=null&&s.push(_y(t,l,a)))),t=t.return}s.length!==0&&n.push({event:e,listeners:s})}var Eue=/\r\n?/g,Mue=/\u0000|\uFFFD/g;function I8(n){return(typeof n=="string"?n:""+n).replace(Eue,`
`).replace(Mue,"")}function kb(n,e,t){if(e=I8(e),I8(n)!==e&&t)throw Error(ut(425))}function $_(){}var GD=null,qD=null;function XD(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var YD=typeof setTimeout=="function"?setTimeout:void 0,Cue=typeof clearTimeout=="function"?clearTimeout:void 0,L8=typeof Promise=="function"?Promise:void 0,Aue=typeof queueMicrotask=="function"?queueMicrotask:typeof L8<"u"?function(n){return L8.resolve(null).then(n).catch(Tue)}:YD;function Tue(n){setTimeout(function(){throw n})}function KA(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),xy(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);xy(e)}function xf(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function F8(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Hg=Math.random().toString(36).slice(2),Fl="__reactFiber$"+Hg,Ey="__reactProps$"+Hg,nc="__reactContainer$"+Hg,KD="__reactEvents$"+Hg,Due="__reactListeners$"+Hg,Nue="__reactHandles$"+Hg;function Qd(n){var e=n[Fl];if(e)return e;for(var t=n.parentNode;t;){if(e=t[nc]||t[Fl]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=F8(n);n!==null;){if(t=n[Fl])return t;n=F8(n)}return e}n=t,t=n.parentNode}return null}function U1(n){return n=n[Fl]||n[nc],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function bm(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(ut(33))}function VM(n){return n[Ey]||null}var ZD=[],wm=-1;function ed(n){return{current:n}}function vr(n){0>wm||(n.current=ZD[wm],ZD[wm]=null,wm--)}function fr(n,e){wm++,ZD[wm]=n.current,n.current=e}var If={},bo=ed(If),ps=ed(!1),Ch=If;function lg(n,e){var t=n.type.contextTypes;if(!t)return If;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in t)i[o]=e[o];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function ms(n){return n=n.childContextTypes,n!=null}function H_(){vr(ps),vr(bo)}function B8(n,e,t){if(bo.current!==If)throw Error(ut(168));fr(bo,e),fr(ps,t)}function eq(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ut(108,ple(n)||"Unknown",i));return kr({},t,r)}function W_(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||If,Ch=bo.current,fr(bo,n),fr(ps,ps.current),!0}function z8(n,e,t){var r=n.stateNode;if(!r)throw Error(ut(169));t?(n=eq(n,e,Ch),r.__reactInternalMemoizedMergedChildContext=n,vr(ps),vr(bo),fr(bo,n)):vr(ps),fr(ps,t)}var Lu=null,$M=!1,ZA=!1;function tq(n){Lu===null?Lu=[n]:Lu.push(n)}function Pue(n){$M=!0,tq(n)}function td(){if(!ZA&&Lu!==null){ZA=!0;var n=0,e=Jn;try{var t=Lu;for(Jn=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Lu=null,$M=!1}catch(i){throw Lu!==null&&(Lu=Lu.slice(n+1)),CG(WO,td),i}finally{Jn=e,ZA=!1}}return null}var Sm=[],_m=0,j_=null,G_=0,ua=[],ca=0,Ah=null,Uu=1,Vu="";function Fd(n,e){Sm[_m++]=G_,Sm[_m++]=j_,j_=n,G_=e}function nq(n,e,t){ua[ca++]=Uu,ua[ca++]=Vu,ua[ca++]=Ah,Ah=n;var r=Uu;n=Vu;var i=32-Ja(r)-1;r&=~(1<<i),t+=1;var o=32-Ja(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Uu=1<<32-Ja(e)+i|t<<i|r,Vu=o+n}else Uu=1<<o|t<<i|r,Vu=n}function QO(n){n.return!==null&&(Fd(n,1),nq(n,1,0))}function ek(n){for(;n===j_;)j_=Sm[--_m],Sm[_m]=null,G_=Sm[--_m],Sm[_m]=null;for(;n===Ah;)Ah=ua[--ca],ua[ca]=null,Vu=ua[--ca],ua[ca]=null,Uu=ua[--ca],ua[ca]=null}var Us=null,Bs=null,Sr=!1,qa=null;function rq(n,e){var t=va(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function U8(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Us=n,Bs=xf(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Us=n,Bs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ah!==null?{id:Uu,overflow:Vu}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=va(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Us=n,Bs=null,!0):!1;default:return!1}}function JD(n){return(n.mode&1)!==0&&(n.flags&128)===0}function QD(n){if(Sr){var e=Bs;if(e){var t=e;if(!U8(n,e)){if(JD(n))throw Error(ut(418));e=xf(t.nextSibling);var r=Us;e&&U8(n,e)?rq(r,t):(n.flags=n.flags&-4097|2,Sr=!1,Us=n)}}else{if(JD(n))throw Error(ut(418));n.flags=n.flags&-4097|2,Sr=!1,Us=n}}}function V8(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Us=n}function Ib(n){if(n!==Us)return!1;if(!Sr)return V8(n),Sr=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!XD(n.type,n.memoizedProps)),e&&(e=Bs)){if(JD(n))throw iq(),Error(ut(418));for(;e;)rq(n,e),e=xf(e.nextSibling)}if(V8(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(ut(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Bs=xf(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Bs=null}}else Bs=Us?xf(n.stateNode.nextSibling):null;return!0}function iq(){for(var n=Bs;n;)n=xf(n.nextSibling)}function ug(){Bs=Us=null,Sr=!1}function tk(n){qa===null?qa=[n]:qa.push(n)}var Rue=xc.ReactCurrentBatchConfig;function Wa(n,e){if(n&&n.defaultProps){e=kr({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var q_=ed(null),X_=null,Em=null,nk=null;function rk(){nk=Em=X_=null}function ik(n){var e=q_.current;vr(q_),n._currentValue=e}function eN(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Wm(n,e){X_=n,nk=Em=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(us=!0),n.firstContext=null)}function Ca(n){var e=n._currentValue;if(nk!==n)if(n={context:n,memoizedValue:e,next:null},Em===null){if(X_===null)throw Error(ut(308));Em=n,X_.dependencies={lanes:0,firstContext:n}}else Em=Em.next=n;return e}var eh=null;function ok(n){eh===null?eh=[n]:eh.push(n)}function oq(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,ok(e)):(t.next=i.next,i.next=t),e.interleaved=t,rc(n,r)}function rc(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var qc=!1;function sk(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sq(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function qu(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function bf(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Rn&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,rc(n,t)}return i=r.interleaved,i===null?(e.next=e,ok(r)):(e.next=i.next,i.next=e),r.interleaved=e,rc(n,t)}function YS(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,jO(n,t)}}function $8(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,o=null;if(t=t.firstBaseUpdate,t!==null){do{var s={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};o===null?i=o=s:o=o.next=s,t=t.next}while(t!==null);o===null?i=o=e:o=o.next=e}else i=o=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Y_(n,e,t,r){var i=n.updateQueue;qc=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?o=u:s.next=u,s=l;var c=n.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==s&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(o!==null){var f=i.baseState;s=0,c=u=l=null,a=o;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=n,g=a;switch(d=e,h=t,g.tag){case 1:if(m=g.payload,typeof m=="function"){f=m.call(h,f,d);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,d=typeof m=="function"?m.call(h,f,d):m,d==null)break e;f=kr({},f,d);break e;case 2:qc=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=h,l=f):c=c.next=h,s|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Dh|=s,n.lanes=s,n.memoizedState=f}}function H8(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(ut(191,i));i.call(r)}}}var aq=new oG.Component().refs;function tN(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:kr({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var HM={isMounted:function(n){return(n=n._reactInternals)?Yh(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Bo(),i=Sf(n),o=qu(r,i);o.payload=e,t!=null&&(o.callback=t),e=bf(n,o,i),e!==null&&(Qa(e,n,i,r),YS(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Bo(),i=Sf(n),o=qu(r,i);o.tag=1,o.payload=e,t!=null&&(o.callback=t),e=bf(n,o,i),e!==null&&(Qa(e,n,i,r),YS(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Bo(),r=Sf(n),i=qu(t,r);i.tag=2,e!=null&&(i.callback=e),e=bf(n,i,r),e!==null&&(Qa(e,n,r,t),YS(e,n,r))}};function W8(n,e,t,r,i,o,s){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!wy(t,r)||!wy(i,o):!0}function lq(n,e,t){var r=!1,i=If,o=e.contextType;return typeof o=="object"&&o!==null?o=Ca(o):(i=ms(e)?Ch:bo.current,r=e.contextTypes,o=(r=r!=null)?lg(n,i):If),e=new e(t,o),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=HM,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=o),e}function j8(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&HM.enqueueReplaceState(e,e.state,null)}function nN(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=aq,sk(n);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Ca(o):(o=ms(e)?Ch:bo.current,i.context=lg(n,o)),i.state=n.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(tN(n,e,o,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&HM.enqueueReplaceState(i,i.state,null),Y_(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function jv(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(ut(309));var r=t.stateNode}if(!r)throw Error(ut(147,n));var i=r,o=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;a===aq&&(a=i.refs={}),s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof n!="string")throw Error(ut(284));if(!t._owner)throw Error(ut(290,n))}return n}function Lb(n,e){throw n=Object.prototype.toString.call(e),Error(ut(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function G8(n){var e=n._init;return e(n._payload)}function uq(n){function e(p,w){if(n){var b=p.deletions;b===null?(p.deletions=[w],p.flags|=16):b.push(w)}}function t(p,w){if(!n)return null;for(;w!==null;)e(p,w),w=w.sibling;return null}function r(p,w){for(p=new Map;w!==null;)w.key!==null?p.set(w.key,w):p.set(w.index,w),w=w.sibling;return p}function i(p,w){return p=_f(p,w),p.index=0,p.sibling=null,p}function o(p,w,b){return p.index=b,n?(b=p.alternate,b!==null?(b=b.index,b<w?(p.flags|=2,w):b):(p.flags|=2,w)):(p.flags|=1048576,w)}function s(p){return n&&p.alternate===null&&(p.flags|=2),p}function a(p,w,b,v){return w===null||w.tag!==6?(w=iT(b,p.mode,v),w.return=p,w):(w=i(w,b),w.return=p,w)}function l(p,w,b,v){var S=b.type;return S===gm?c(p,w,b.props.children,v,b.key):w!==null&&(w.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Gc&&G8(S)===w.type)?(v=i(w,b.props),v.ref=jv(p,w,b),v.return=p,v):(v=t_(b.type,b.key,b.props,null,p.mode,v),v.ref=jv(p,w,b),v.return=p,v)}function u(p,w,b,v){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=oT(b,p.mode,v),w.return=p,w):(w=i(w,b.children||[]),w.return=p,w)}function c(p,w,b,v,S){return w===null||w.tag!==7?(w=dh(b,p.mode,v,S),w.return=p,w):(w=i(w,b),w.return=p,w)}function f(p,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=iT(""+w,p.mode,b),w.return=p,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Mb:return b=t_(w.type,w.key,w.props,null,p.mode,b),b.ref=jv(p,null,w),b.return=p,b;case mm:return w=oT(w,p.mode,b),w.return=p,w;case Gc:var v=w._init;return f(p,v(w._payload),b)}if(A0(w)||Uv(w))return w=dh(w,p.mode,b,null),w.return=p,w;Lb(p,w)}return null}function d(p,w,b,v){var S=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return S!==null?null:a(p,w,""+b,v);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Mb:return b.key===S?l(p,w,b,v):null;case mm:return b.key===S?u(p,w,b,v):null;case Gc:return S=b._init,d(p,w,S(b._payload),v)}if(A0(b)||Uv(b))return S!==null?null:c(p,w,b,v,null);Lb(p,b)}return null}function h(p,w,b,v,S){if(typeof v=="string"&&v!==""||typeof v=="number")return p=p.get(b)||null,a(w,p,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Mb:return p=p.get(v.key===null?b:v.key)||null,l(w,p,v,S);case mm:return p=p.get(v.key===null?b:v.key)||null,u(w,p,v,S);case Gc:var x=v._init;return h(p,w,b,x(v._payload),S)}if(A0(v)||Uv(v))return p=p.get(b)||null,c(w,p,v,S,null);Lb(w,v)}return null}function m(p,w,b,v){for(var S=null,x=null,M=w,A=w=0,T=null;M!==null&&A<b.length;A++){M.index>A?(T=M,M=null):T=M.sibling;var C=d(p,M,b[A],v);if(C===null){M===null&&(M=T);break}n&&M&&C.alternate===null&&e(p,M),w=o(C,w,A),x===null?S=C:x.sibling=C,x=C,M=T}if(A===b.length)return t(p,M),Sr&&Fd(p,A),S;if(M===null){for(;A<b.length;A++)M=f(p,b[A],v),M!==null&&(w=o(M,w,A),x===null?S=M:x.sibling=M,x=M);return Sr&&Fd(p,A),S}for(M=r(p,M);A<b.length;A++)T=h(M,p,A,b[A],v),T!==null&&(n&&T.alternate!==null&&M.delete(T.key===null?A:T.key),w=o(T,w,A),x===null?S=T:x.sibling=T,x=T);return n&&M.forEach(function(D){return e(p,D)}),Sr&&Fd(p,A),S}function g(p,w,b,v){var S=Uv(b);if(typeof S!="function")throw Error(ut(150));if(b=S.call(b),b==null)throw Error(ut(151));for(var x=S=null,M=w,A=w=0,T=null,C=b.next();M!==null&&!C.done;A++,C=b.next()){M.index>A?(T=M,M=null):T=M.sibling;var D=d(p,M,C.value,v);if(D===null){M===null&&(M=T);break}n&&M&&D.alternate===null&&e(p,M),w=o(D,w,A),x===null?S=D:x.sibling=D,x=D,M=T}if(C.done)return t(p,M),Sr&&Fd(p,A),S;if(M===null){for(;!C.done;A++,C=b.next())C=f(p,C.value,v),C!==null&&(w=o(C,w,A),x===null?S=C:x.sibling=C,x=C);return Sr&&Fd(p,A),S}for(M=r(p,M);!C.done;A++,C=b.next())C=h(M,p,A,C.value,v),C!==null&&(n&&C.alternate!==null&&M.delete(C.key===null?A:C.key),w=o(C,w,A),x===null?S=C:x.sibling=C,x=C);return n&&M.forEach(function(R){return e(p,R)}),Sr&&Fd(p,A),S}function y(p,w,b,v){if(typeof b=="object"&&b!==null&&b.type===gm&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Mb:e:{for(var S=b.key,x=w;x!==null;){if(x.key===S){if(S=b.type,S===gm){if(x.tag===7){t(p,x.sibling),w=i(x,b.props.children),w.return=p,p=w;break e}}else if(x.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Gc&&G8(S)===x.type){t(p,x.sibling),w=i(x,b.props),w.ref=jv(p,x,b),w.return=p,p=w;break e}t(p,x);break}else e(p,x);x=x.sibling}b.type===gm?(w=dh(b.props.children,p.mode,v,b.key),w.return=p,p=w):(v=t_(b.type,b.key,b.props,null,p.mode,v),v.ref=jv(p,w,b),v.return=p,p=v)}return s(p);case mm:e:{for(x=b.key;w!==null;){if(w.key===x)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){t(p,w.sibling),w=i(w,b.children||[]),w.return=p,p=w;break e}else{t(p,w);break}else e(p,w);w=w.sibling}w=oT(b,p.mode,v),w.return=p,p=w}return s(p);case Gc:return x=b._init,y(p,w,x(b._payload),v)}if(A0(b))return m(p,w,b,v);if(Uv(b))return g(p,w,b,v);Lb(p,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(t(p,w.sibling),w=i(w,b),w.return=p,p=w):(t(p,w),w=iT(b,p.mode,v),w.return=p,p=w),s(p)):t(p,w)}return y}var cg=uq(!0),cq=uq(!1),V1={},Xl=ed(V1),My=ed(V1),Cy=ed(V1);function th(n){if(n===V1)throw Error(ut(174));return n}function ak(n,e){switch(fr(Cy,e),fr(My,n),fr(Xl,V1),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:kD(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=kD(e,n)}vr(Xl),fr(Xl,e)}function fg(){vr(Xl),vr(My),vr(Cy)}function fq(n){th(Cy.current);var e=th(Xl.current),t=kD(e,n.type);e!==t&&(fr(My,n),fr(Xl,t))}function lk(n){My.current===n&&(vr(Xl),vr(My))}var Tr=ed(0);function K_(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var JA=[];function uk(){for(var n=0;n<JA.length;n++)JA[n]._workInProgressVersionPrimary=null;JA.length=0}var KS=xc.ReactCurrentDispatcher,QA=xc.ReactCurrentBatchConfig,Th=0,Rr=null,hi=null,Di=null,Z_=!1,Y0=!1,Ay=0,Oue=0;function io(){throw Error(ut(321))}function ck(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!rl(n[t],e[t]))return!1;return!0}function fk(n,e,t,r,i,o){if(Th=o,Rr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,KS.current=n===null||n.memoizedState===null?Fue:Bue,n=t(r,i),Y0){o=0;do{if(Y0=!1,Ay=0,25<=o)throw Error(ut(301));o+=1,Di=hi=null,e.updateQueue=null,KS.current=zue,n=t(r,i)}while(Y0)}if(KS.current=J_,e=hi!==null&&hi.next!==null,Th=0,Di=hi=Rr=null,Z_=!1,e)throw Error(ut(300));return n}function dk(){var n=Ay!==0;return Ay=0,n}function Ol(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Di===null?Rr.memoizedState=Di=n:Di=Di.next=n,Di}function Aa(){if(hi===null){var n=Rr.alternate;n=n!==null?n.memoizedState:null}else n=hi.next;var e=Di===null?Rr.memoizedState:Di.next;if(e!==null)Di=e,hi=n;else{if(n===null)throw Error(ut(310));hi=n,n={memoizedState:hi.memoizedState,baseState:hi.baseState,baseQueue:hi.baseQueue,queue:hi.queue,next:null},Di===null?Rr.memoizedState=Di=n:Di=Di.next=n}return Di}function Ty(n,e){return typeof e=="function"?e(n):e}function eT(n){var e=Aa(),t=e.queue;if(t===null)throw Error(ut(311));t.lastRenderedReducer=n;var r=hi,i=r.baseQueue,o=t.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,t.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,u=o;do{var c=u.lane;if((Th&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:n(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,s=r):l=l.next=f,Rr.lanes|=c,Dh|=c}u=u.next}while(u!==null&&u!==o);l===null?s=r:l.next=a,rl(r,e.memoizedState)||(us=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do o=i.lane,Rr.lanes|=o,Dh|=o,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function tT(n){var e=Aa(),t=e.queue;if(t===null)throw Error(ut(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,o=e.memoizedState;if(i!==null){t.pending=null;var s=i=i.next;do o=n(o,s.action),s=s.next;while(s!==i);rl(o,e.memoizedState)||(us=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),t.lastRenderedState=o}return[o,r]}function dq(){}function hq(n,e){var t=Rr,r=Aa(),i=e(),o=!rl(r.memoizedState,i);if(o&&(r.memoizedState=i,us=!0),r=r.queue,hk(gq.bind(null,t,r,n),[n]),r.getSnapshot!==e||o||Di!==null&&Di.memoizedState.tag&1){if(t.flags|=2048,Dy(9,mq.bind(null,t,r,i,e),void 0,null),ki===null)throw Error(ut(349));Th&30||pq(t,e,i)}return i}function pq(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Rr.updateQueue,e===null?(e={lastEffect:null,stores:null},Rr.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function mq(n,e,t,r){e.value=t,e.getSnapshot=r,vq(e)&&yq(n)}function gq(n,e,t){return t(function(){vq(e)&&yq(n)})}function vq(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!rl(n,t)}catch{return!0}}function yq(n){var e=rc(n,1);e!==null&&Qa(e,n,1,-1)}function q8(n){var e=Ol();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ty,lastRenderedState:n},e.queue=n,n=n.dispatch=Lue.bind(null,Rr,n),[e.memoizedState,n]}function Dy(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Rr.updateQueue,e===null?(e={lastEffect:null,stores:null},Rr.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function xq(){return Aa().memoizedState}function ZS(n,e,t,r){var i=Ol();Rr.flags|=n,i.memoizedState=Dy(1|e,t,void 0,r===void 0?null:r)}function WM(n,e,t,r){var i=Aa();r=r===void 0?null:r;var o=void 0;if(hi!==null){var s=hi.memoizedState;if(o=s.destroy,r!==null&&ck(r,s.deps)){i.memoizedState=Dy(e,t,o,r);return}}Rr.flags|=n,i.memoizedState=Dy(1|e,t,o,r)}function X8(n,e){return ZS(8390656,8,n,e)}function hk(n,e){return WM(2048,8,n,e)}function bq(n,e){return WM(4,2,n,e)}function wq(n,e){return WM(4,4,n,e)}function Sq(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function _q(n,e,t){return t=t!=null?t.concat([n]):null,WM(4,4,Sq.bind(null,e,n),t)}function pk(){}function Eq(n,e){var t=Aa();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&ck(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function Mq(n,e){var t=Aa();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&ck(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function Cq(n,e,t){return Th&21?(rl(t,e)||(t=DG(),Rr.lanes|=t,Dh|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,us=!0),n.memoizedState=t)}function kue(n,e){var t=Jn;Jn=t!==0&&4>t?t:4,n(!0);var r=QA.transition;QA.transition={};try{n(!1),e()}finally{Jn=t,QA.transition=r}}function Aq(){return Aa().memoizedState}function Iue(n,e,t){var r=Sf(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},Tq(n))Dq(e,t);else if(t=oq(n,e,t,r),t!==null){var i=Bo();Qa(t,n,r,i),Nq(t,e,r)}}function Lue(n,e,t){var r=Sf(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(Tq(n))Dq(e,i);else{var o=n.alternate;if(n.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,t);if(i.hasEagerState=!0,i.eagerState=a,rl(a,s)){var l=e.interleaved;l===null?(i.next=i,ok(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=oq(n,e,i,r),t!==null&&(i=Bo(),Qa(t,n,r,i),Nq(t,e,r))}}function Tq(n){var e=n.alternate;return n===Rr||e!==null&&e===Rr}function Dq(n,e){Y0=Z_=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function Nq(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,jO(n,t)}}var J_={readContext:Ca,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useInsertionEffect:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useSyncExternalStore:io,useId:io,unstable_isNewReconciler:!1},Fue={readContext:Ca,useCallback:function(n,e){return Ol().memoizedState=[n,e===void 0?null:e],n},useContext:Ca,useEffect:X8,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,ZS(4194308,4,Sq.bind(null,e,n),t)},useLayoutEffect:function(n,e){return ZS(4194308,4,n,e)},useInsertionEffect:function(n,e){return ZS(4,2,n,e)},useMemo:function(n,e){var t=Ol();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Ol();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=Iue.bind(null,Rr,n),[r.memoizedState,n]},useRef:function(n){var e=Ol();return n={current:n},e.memoizedState=n},useState:q8,useDebugValue:pk,useDeferredValue:function(n){return Ol().memoizedState=n},useTransition:function(){var n=q8(!1),e=n[0];return n=kue.bind(null,n[1]),Ol().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Rr,i=Ol();if(Sr){if(t===void 0)throw Error(ut(407));t=t()}else{if(t=e(),ki===null)throw Error(ut(349));Th&30||pq(r,e,t)}i.memoizedState=t;var o={value:t,getSnapshot:e};return i.queue=o,X8(gq.bind(null,r,o,n),[n]),r.flags|=2048,Dy(9,mq.bind(null,r,o,t,e),void 0,null),t},useId:function(){var n=Ol(),e=ki.identifierPrefix;if(Sr){var t=Vu,r=Uu;t=(r&~(1<<32-Ja(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Ay++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=Oue++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},Bue={readContext:Ca,useCallback:Eq,useContext:Ca,useEffect:hk,useImperativeHandle:_q,useInsertionEffect:bq,useLayoutEffect:wq,useMemo:Mq,useReducer:eT,useRef:xq,useState:function(){return eT(Ty)},useDebugValue:pk,useDeferredValue:function(n){var e=Aa();return Cq(e,hi.memoizedState,n)},useTransition:function(){var n=eT(Ty)[0],e=Aa().memoizedState;return[n,e]},useMutableSource:dq,useSyncExternalStore:hq,useId:Aq,unstable_isNewReconciler:!1},zue={readContext:Ca,useCallback:Eq,useContext:Ca,useEffect:hk,useImperativeHandle:_q,useInsertionEffect:bq,useLayoutEffect:wq,useMemo:Mq,useReducer:tT,useRef:xq,useState:function(){return tT(Ty)},useDebugValue:pk,useDeferredValue:function(n){var e=Aa();return hi===null?e.memoizedState=n:Cq(e,hi.memoizedState,n)},useTransition:function(){var n=tT(Ty)[0],e=Aa().memoizedState;return[n,e]},useMutableSource:dq,useSyncExternalStore:hq,useId:Aq,unstable_isNewReconciler:!1};function dg(n,e){try{var t="",r=e;do t+=hle(r),r=r.return;while(r);var i=t}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:n,source:e,stack:i,digest:null}}function nT(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function rN(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Uue=typeof WeakMap=="function"?WeakMap:Map;function Pq(n,e,t){t=qu(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){eE||(eE=!0,hN=r),rN(n,e)},t}function Rq(n,e,t){t=qu(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){rN(n,e)}}var o=n.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){rN(n,e),typeof r!="function"&&(wf===null?wf=new Set([this]):wf.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),t}function Y8(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new Uue;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=ece.bind(null,n,e,t),e.then(n,n))}function K8(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function Z8(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=qu(-1,1),e.tag=2,bf(t,e,1))),t.lanes|=1),n)}var Vue=xc.ReactCurrentOwner,us=!1;function Ro(n,e,t,r){e.child=n===null?cq(e,null,t,r):cg(e,n.child,t,r)}function J8(n,e,t,r,i){t=t.render;var o=e.ref;return Wm(e,i),r=fk(n,e,t,r,o,i),t=dk(),n!==null&&!us?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,ic(n,e,i)):(Sr&&t&&QO(e),e.flags|=1,Ro(n,e,r,i),e.child)}function Q8(n,e,t,r,i){if(n===null){var o=t.type;return typeof o=="function"&&!Sk(o)&&o.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=o,Oq(n,e,o,r,i)):(n=t_(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(o=n.child,!(n.lanes&i)){var s=o.memoizedProps;if(t=t.compare,t=t!==null?t:wy,t(s,r)&&n.ref===e.ref)return ic(n,e,i)}return e.flags|=1,n=_f(o,r),n.ref=e.ref,n.return=e,e.child=n}function Oq(n,e,t,r,i){if(n!==null){var o=n.memoizedProps;if(wy(o,r)&&n.ref===e.ref)if(us=!1,e.pendingProps=r=o,(n.lanes&i)!==0)n.flags&131072&&(us=!0);else return e.lanes=n.lanes,ic(n,e,i)}return iN(n,e,t,r,i)}function kq(n,e,t){var r=e.pendingProps,i=r.children,o=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},fr(Cm,Ns),Ns|=t;else{if(!(t&1073741824))return n=o!==null?o.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,fr(Cm,Ns),Ns|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:t,fr(Cm,Ns),Ns|=r}else o!==null?(r=o.baseLanes|t,e.memoizedState=null):r=t,fr(Cm,Ns),Ns|=r;return Ro(n,e,i,t),e.child}function Iq(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function iN(n,e,t,r,i){var o=ms(t)?Ch:bo.current;return o=lg(e,o),Wm(e,i),t=fk(n,e,t,r,o,i),r=dk(),n!==null&&!us?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,ic(n,e,i)):(Sr&&r&&QO(e),e.flags|=1,Ro(n,e,t,i),e.child)}function eB(n,e,t,r,i){if(ms(t)){var o=!0;W_(e)}else o=!1;if(Wm(e,i),e.stateNode===null)JS(n,e),lq(e,t,r),nN(e,t,r,i),r=!0;else if(n===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,u=t.contextType;typeof u=="object"&&u!==null?u=Ca(u):(u=ms(t)?Ch:bo.current,u=lg(e,u));var c=t.getDerivedStateFromProps,f=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==u)&&j8(e,s,r,u),qc=!1;var d=e.memoizedState;s.state=d,Y_(e,r,s,i),l=e.memoizedState,a!==r||d!==l||ps.current||qc?(typeof c=="function"&&(tN(e,t,c,r),l=e.memoizedState),(a=qc||W8(e,t,a,r,d,l,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,sq(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:Wa(e.type,a),s.props=u,f=e.pendingProps,d=s.context,l=t.contextType,typeof l=="object"&&l!==null?l=Ca(l):(l=ms(t)?Ch:bo.current,l=lg(e,l));var h=t.getDerivedStateFromProps;(c=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==f||d!==l)&&j8(e,s,r,l),qc=!1,d=e.memoizedState,s.state=d,Y_(e,r,s,i);var m=e.memoizedState;a!==f||d!==m||ps.current||qc?(typeof h=="function"&&(tN(e,t,h,r),m=e.memoizedState),(u=qc||W8(e,t,u,r,d,m,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,m,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,m,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),s.props=r,s.state=m,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),r=!1)}return oN(n,e,t,r,o,i)}function oN(n,e,t,r,i,o){Iq(n,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&z8(e,t,!1),ic(n,e,o);r=e.stateNode,Vue.current=e;var a=s&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&s?(e.child=cg(e,n.child,null,o),e.child=cg(e,null,a,o)):Ro(n,e,a,o),e.memoizedState=r.state,i&&z8(e,t,!0),e.child}function Lq(n){var e=n.stateNode;e.pendingContext?B8(n,e.pendingContext,e.pendingContext!==e.context):e.context&&B8(n,e.context,!1),ak(n,e.containerInfo)}function tB(n,e,t,r,i){return ug(),tk(i),e.flags|=256,Ro(n,e,t,r),e.child}var sN={dehydrated:null,treeContext:null,retryLane:0};function aN(n){return{baseLanes:n,cachePool:null,transitions:null}}function Fq(n,e,t){var r=e.pendingProps,i=Tr.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),fr(Tr,i&1),n===null)return QD(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,n=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=qM(s,r,0,null),n=dh(n,r,t,null),o.return=e,n.return=e,o.sibling=n,e.child=o,e.child.memoizedState=aN(t),e.memoizedState=sN,n):mk(e,s));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return $ue(n,e,s,r,a,i,t);if(o){o=r.fallback,s=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=_f(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=_f(a,o):(o=dh(o,s,t,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=n.child.memoizedState,s=s===null?aN(t):{baseLanes:s.baseLanes|t,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=n.childLanes&~t,e.memoizedState=sN,r}return o=n.child,n=o.sibling,r=_f(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function mk(n,e){return e=qM({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Fb(n,e,t,r){return r!==null&&tk(r),cg(e,n.child,null,t),n=mk(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function $ue(n,e,t,r,i,o,s){if(t)return e.flags&256?(e.flags&=-257,r=nT(Error(ut(422))),Fb(n,e,s,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=qM({mode:"visible",children:r.children},i,0,null),o=dh(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&cg(e,n.child,null,s),e.child.memoizedState=aN(s),e.memoizedState=sN,o);if(!(e.mode&1))return Fb(n,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(ut(419)),r=nT(o,r,void 0),Fb(n,e,s,r)}if(a=(s&n.childLanes)!==0,us||a){if(r=ki,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,rc(n,i),Qa(r,n,i,-1))}return wk(),r=nT(Error(ut(421))),Fb(n,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=tce.bind(null,n),i._reactRetry=e,null):(n=o.treeContext,Bs=xf(i.nextSibling),Us=e,Sr=!0,qa=null,n!==null&&(ua[ca++]=Uu,ua[ca++]=Vu,ua[ca++]=Ah,Uu=n.id,Vu=n.overflow,Ah=e),e=mk(e,r.children),e.flags|=4096,e)}function nB(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),eN(n.return,e,t)}function rT(n,e,t,r,i){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=t,o.tailMode=i)}function Bq(n,e,t){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Ro(n,e,r.children,t),r=Tr.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&nB(n,t,e);else if(n.tag===19)nB(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(fr(Tr,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&K_(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),rT(e,!1,i,t,o);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&K_(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}rT(e,!0,t,null,o);break;case"together":rT(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function JS(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function ic(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Dh|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(ut(153));if(e.child!==null){for(n=e.child,t=_f(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=_f(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function Hue(n,e,t){switch(e.tag){case 3:Lq(e),ug();break;case 5:fq(e);break;case 1:ms(e.type)&&W_(e);break;case 4:ak(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;fr(q_,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(fr(Tr,Tr.current&1),e.flags|=128,null):t&e.child.childLanes?Fq(n,e,t):(fr(Tr,Tr.current&1),n=ic(n,e,t),n!==null?n.sibling:null);fr(Tr,Tr.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return Bq(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),fr(Tr,Tr.current),r)break;return null;case 22:case 23:return e.lanes=0,kq(n,e,t)}return ic(n,e,t)}var zq,lN,Uq,Vq;zq=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};lN=function(){};Uq=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,th(Xl.current);var o=null;switch(t){case"input":i=ND(n,i),r=ND(n,r),o=[];break;case"select":i=kr({},i,{value:void 0}),r=kr({},r,{value:void 0}),o=[];break;case"textarea":i=OD(n,i),r=OD(n,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=$_)}ID(t,r);var s;t=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(s in a)a.hasOwnProperty(s)&&(t||(t={}),t[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(py.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(t||(t={}),t[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(t||(t={}),t[s]=l[s])}else t||(o||(o=[]),o.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(py.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&hr("scroll",n),o||a===l||(o=[])):(o=o||[]).push(u,l))}t&&(o=o||[]).push("style",t);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};Vq=function(n,e,t,r){t!==r&&(e.flags|=4)};function Gv(n,e){if(!Sr)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function oo(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function Wue(n,e,t){var r=e.pendingProps;switch(ek(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oo(e),null;case 1:return ms(e.type)&&H_(),oo(e),null;case 3:return r=e.stateNode,fg(),vr(ps),vr(bo),uk(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Ib(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,qa!==null&&(gN(qa),qa=null))),lN(n,e),oo(e),null;case 5:lk(e);var i=th(Cy.current);if(t=e.type,n!==null&&e.stateNode!=null)Uq(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ut(166));return oo(e),null}if(n=th(Xl.current),Ib(e)){r=e.stateNode,t=e.type;var o=e.memoizedProps;switch(r[Fl]=e,r[Ey]=o,n=(e.mode&1)!==0,t){case"dialog":hr("cancel",r),hr("close",r);break;case"iframe":case"object":case"embed":hr("load",r);break;case"video":case"audio":for(i=0;i<D0.length;i++)hr(D0[i],r);break;case"source":hr("error",r);break;case"img":case"image":case"link":hr("error",r),hr("load",r);break;case"details":hr("toggle",r);break;case"input":f8(r,o),hr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},hr("invalid",r);break;case"textarea":h8(r,o),hr("invalid",r)}ID(t,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&kb(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&kb(r.textContent,a,n),i=["children",""+a]):py.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&hr("scroll",r)}switch(t){case"input":Cb(r),d8(r,o,!0);break;case"textarea":Cb(r),p8(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=$_)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=pG(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=s.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=s.createElement(t,{is:r.is}):(n=s.createElement(t),t==="select"&&(s=n,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):n=s.createElementNS(n,t),n[Fl]=e,n[Ey]=r,zq(n,e,!1,!1),e.stateNode=n;e:{switch(s=LD(t,r),t){case"dialog":hr("cancel",n),hr("close",n),i=r;break;case"iframe":case"object":case"embed":hr("load",n),i=r;break;case"video":case"audio":for(i=0;i<D0.length;i++)hr(D0[i],n);i=r;break;case"source":hr("error",n),i=r;break;case"img":case"image":case"link":hr("error",n),hr("load",n),i=r;break;case"details":hr("toggle",n),i=r;break;case"input":f8(n,r),i=ND(n,r),hr("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=kr({},r,{value:void 0}),hr("invalid",n);break;case"textarea":h8(n,r),i=OD(n,r),hr("invalid",n);break;default:i=r}ID(t,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?vG(n,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&mG(n,l)):o==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&my(n,l):typeof l=="number"&&my(n,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(py.hasOwnProperty(o)?l!=null&&o==="onScroll"&&hr("scroll",n):l!=null&&zO(n,o,l,s))}switch(t){case"input":Cb(n),d8(n,r,!1);break;case"textarea":Cb(n),p8(n);break;case"option":r.value!=null&&n.setAttribute("value",""+kf(r.value));break;case"select":n.multiple=!!r.multiple,o=r.value,o!=null?Um(n,!!r.multiple,o,!1):r.defaultValue!=null&&Um(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=$_)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return oo(e),null;case 6:if(n&&e.stateNode!=null)Vq(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ut(166));if(t=th(Cy.current),th(Xl.current),Ib(e)){if(r=e.stateNode,t=e.memoizedProps,r[Fl]=e,(o=r.nodeValue!==t)&&(n=Us,n!==null))switch(n.tag){case 3:kb(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&kb(r.nodeValue,t,(n.mode&1)!==0)}o&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Fl]=e,e.stateNode=r}return oo(e),null;case 13:if(vr(Tr),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Sr&&Bs!==null&&e.mode&1&&!(e.flags&128))iq(),ug(),e.flags|=98560,o=!1;else if(o=Ib(e),r!==null&&r.dehydrated!==null){if(n===null){if(!o)throw Error(ut(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ut(317));o[Fl]=e}else ug(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;oo(e),o=!1}else qa!==null&&(gN(qa),qa=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Tr.current&1?vi===0&&(vi=3):wk())),e.updateQueue!==null&&(e.flags|=4),oo(e),null);case 4:return fg(),lN(n,e),n===null&&Sy(e.stateNode.containerInfo),oo(e),null;case 10:return ik(e.type._context),oo(e),null;case 17:return ms(e.type)&&H_(),oo(e),null;case 19:if(vr(Tr),o=e.memoizedState,o===null)return oo(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)Gv(o,!1);else{if(vi!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(s=K_(n),s!==null){for(e.flags|=128,Gv(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)o=t,n=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=n,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,n=s.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return fr(Tr,Tr.current&1|2),e.child}n=n.sibling}o.tail!==null&&Jr()>hg&&(e.flags|=128,r=!0,Gv(o,!1),e.lanes=4194304)}else{if(!r)if(n=K_(s),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Gv(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Sr)return oo(e),null}else 2*Jr()-o.renderingStartTime>hg&&t!==1073741824&&(e.flags|=128,r=!0,Gv(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(t=o.last,t!==null?t.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Jr(),e.sibling=null,t=Tr.current,fr(Tr,r?t&1|2:t&1),e):(oo(e),null);case 22:case 23:return bk(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ns&1073741824&&(oo(e),e.subtreeFlags&6&&(e.flags|=8192)):oo(e),null;case 24:return null;case 25:return null}throw Error(ut(156,e.tag))}function jue(n,e){switch(ek(e),e.tag){case 1:return ms(e.type)&&H_(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return fg(),vr(ps),vr(bo),uk(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return lk(e),null;case 13:if(vr(Tr),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(ut(340));ug()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return vr(Tr),null;case 4:return fg(),null;case 10:return ik(e.type._context),null;case 22:case 23:return bk(),null;case 24:return null;default:return null}}var Bb=!1,ho=!1,Gue=typeof WeakSet=="function"?WeakSet:Set,At=null;function Mm(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Vr(n,e,r)}else t.current=null}function uN(n,e,t){try{t()}catch(r){Vr(n,e,r)}}var rB=!1;function que(n,e){if(GD=z_,n=jG(),JO(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{t.nodeType,o.nodeType}catch{t=null;break e}var s=0,a=-1,l=-1,u=0,c=0,f=n,d=null;t:for(;;){for(var h;f!==t||i!==0&&f.nodeType!==3||(a=s+i),f!==o||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===n)break t;if(d===t&&++u===i&&(a=s),d===o&&++c===r&&(l=s),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(qD={focusedElem:n,selectionRange:t},z_=!1,At=e;At!==null;)if(e=At,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,At=n;else for(;At!==null;){e=At;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,y=m.memoizedState,p=e.stateNode,w=p.getSnapshotBeforeUpdate(e.elementType===e.type?g:Wa(e.type,g),y);p.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ut(163))}}catch(v){Vr(e,e.return,v)}if(n=e.sibling,n!==null){n.return=e.return,At=n;break}At=e.return}return m=rB,rB=!1,m}function K0(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var o=i.destroy;i.destroy=void 0,o!==void 0&&uN(e,t,o)}i=i.next}while(i!==r)}}function jM(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function cN(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function $q(n){var e=n.alternate;e!==null&&(n.alternate=null,$q(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Fl],delete e[Ey],delete e[KD],delete e[Due],delete e[Nue])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Hq(n){return n.tag===5||n.tag===3||n.tag===4}function iB(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Hq(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function fN(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=$_));else if(r!==4&&(n=n.child,n!==null))for(fN(n,e,t),n=n.sibling;n!==null;)fN(n,e,t),n=n.sibling}function dN(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(dN(n,e,t),n=n.sibling;n!==null;)dN(n,e,t),n=n.sibling}var Ui=null,Ga=!1;function Rc(n,e,t){for(t=t.child;t!==null;)Wq(n,e,t),t=t.sibling}function Wq(n,e,t){if(ql&&typeof ql.onCommitFiberUnmount=="function")try{ql.onCommitFiberUnmount(FM,t)}catch{}switch(t.tag){case 5:ho||Mm(t,e);case 6:var r=Ui,i=Ga;Ui=null,Rc(n,e,t),Ui=r,Ga=i,Ui!==null&&(Ga?(n=Ui,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Ui.removeChild(t.stateNode));break;case 18:Ui!==null&&(Ga?(n=Ui,t=t.stateNode,n.nodeType===8?KA(n.parentNode,t):n.nodeType===1&&KA(n,t),xy(n)):KA(Ui,t.stateNode));break;case 4:r=Ui,i=Ga,Ui=t.stateNode.containerInfo,Ga=!0,Rc(n,e,t),Ui=r,Ga=i;break;case 0:case 11:case 14:case 15:if(!ho&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&uN(t,e,s),i=i.next}while(i!==r)}Rc(n,e,t);break;case 1:if(!ho&&(Mm(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Vr(t,e,a)}Rc(n,e,t);break;case 21:Rc(n,e,t);break;case 22:t.mode&1?(ho=(r=ho)||t.memoizedState!==null,Rc(n,e,t),ho=r):Rc(n,e,t);break;default:Rc(n,e,t)}}function oB(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new Gue),e.forEach(function(r){var i=nce.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Ua(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var o=n,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:Ui=a.stateNode,Ga=!1;break e;case 3:Ui=a.stateNode.containerInfo,Ga=!0;break e;case 4:Ui=a.stateNode.containerInfo,Ga=!0;break e}a=a.return}if(Ui===null)throw Error(ut(160));Wq(o,s,i),Ui=null,Ga=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Vr(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)jq(e,n),e=e.sibling}function jq(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ua(e,n),Al(n),r&4){try{K0(3,n,n.return),jM(3,n)}catch(g){Vr(n,n.return,g)}try{K0(5,n,n.return)}catch(g){Vr(n,n.return,g)}}break;case 1:Ua(e,n),Al(n),r&512&&t!==null&&Mm(t,t.return);break;case 5:if(Ua(e,n),Al(n),r&512&&t!==null&&Mm(t,t.return),n.flags&32){var i=n.stateNode;try{my(i,"")}catch(g){Vr(n,n.return,g)}}if(r&4&&(i=n.stateNode,i!=null)){var o=n.memoizedProps,s=t!==null?t.memoizedProps:o,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&dG(i,o),LD(a,s);var u=LD(a,o);for(s=0;s<l.length;s+=2){var c=l[s],f=l[s+1];c==="style"?vG(i,f):c==="dangerouslySetInnerHTML"?mG(i,f):c==="children"?my(i,f):zO(i,c,f,u)}switch(a){case"input":PD(i,o);break;case"textarea":hG(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?Um(i,!!o.multiple,h,!1):d!==!!o.multiple&&(o.defaultValue!=null?Um(i,!!o.multiple,o.defaultValue,!0):Um(i,!!o.multiple,o.multiple?[]:"",!1))}i[Ey]=o}catch(g){Vr(n,n.return,g)}}break;case 6:if(Ua(e,n),Al(n),r&4){if(n.stateNode===null)throw Error(ut(162));i=n.stateNode,o=n.memoizedProps;try{i.nodeValue=o}catch(g){Vr(n,n.return,g)}}break;case 3:if(Ua(e,n),Al(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{xy(e.containerInfo)}catch(g){Vr(n,n.return,g)}break;case 4:Ua(e,n),Al(n);break;case 13:Ua(e,n),Al(n),i=n.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(yk=Jr())),r&4&&oB(n);break;case 22:if(c=t!==null&&t.memoizedState!==null,n.mode&1?(ho=(u=ho)||c,Ua(e,n),ho=u):Ua(e,n),Al(n),r&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!c&&n.mode&1)for(At=n,c=n.child;c!==null;){for(f=At=c;At!==null;){switch(d=At,h=d.child,d.tag){case 0:case 11:case 14:case 15:K0(4,d,d.return);break;case 1:Mm(d,d.return);var m=d.stateNode;if(typeof m.componentWillUnmount=="function"){r=d,t=d.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){Vr(r,t,g)}}break;case 5:Mm(d,d.return);break;case 22:if(d.memoizedState!==null){aB(f);continue}}h!==null?(h.return=d,At=h):aB(f)}c=c.sibling}e:for(c=null,f=n;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=gG("display",s))}catch(g){Vr(n,n.return,g)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){Vr(n,n.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ua(e,n),Al(n),r&4&&oB(n);break;case 21:break;default:Ua(e,n),Al(n)}}function Al(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(Hq(t)){var r=t;break e}t=t.return}throw Error(ut(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(my(i,""),r.flags&=-33);var o=iB(n);dN(n,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=iB(n);fN(n,a,s);break;default:throw Error(ut(161))}}catch(l){Vr(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function Xue(n,e,t){At=n,Gq(n)}function Gq(n,e,t){for(var r=(n.mode&1)!==0;At!==null;){var i=At,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Bb;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ho;a=Bb;var u=ho;if(Bb=s,(ho=l)&&!u)for(At=i;At!==null;)s=At,l=s.child,s.tag===22&&s.memoizedState!==null?lB(i):l!==null?(l.return=s,At=l):lB(i);for(;o!==null;)At=o,Gq(o),o=o.sibling;At=i,Bb=a,ho=u}sB(n)}else i.subtreeFlags&8772&&o!==null?(o.return=i,At=o):sB(n)}}function sB(n){for(;At!==null;){var e=At;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ho||jM(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ho)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Wa(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&H8(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}H8(e,s,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&xy(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ut(163))}ho||e.flags&512&&cN(e)}catch(d){Vr(e,e.return,d)}}if(e===n){At=null;break}if(t=e.sibling,t!==null){t.return=e.return,At=t;break}At=e.return}}function aB(n){for(;At!==null;){var e=At;if(e===n){At=null;break}var t=e.sibling;if(t!==null){t.return=e.return,At=t;break}At=e.return}}function lB(n){for(;At!==null;){var e=At;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{jM(4,e)}catch(l){Vr(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Vr(e,i,l)}}var o=e.return;try{cN(e)}catch(l){Vr(e,o,l)}break;case 5:var s=e.return;try{cN(e)}catch(l){Vr(e,s,l)}}}catch(l){Vr(e,e.return,l)}if(e===n){At=null;break}var a=e.sibling;if(a!==null){a.return=e.return,At=a;break}At=e.return}}var Yue=Math.ceil,Q_=xc.ReactCurrentDispatcher,gk=xc.ReactCurrentOwner,Sa=xc.ReactCurrentBatchConfig,Rn=0,ki=null,li=null,Yi=0,Ns=0,Cm=ed(0),vi=0,Ny=null,Dh=0,GM=0,vk=0,Z0=null,is=null,yk=0,hg=1/0,ku=null,eE=!1,hN=null,wf=null,zb=!1,sf=null,tE=0,J0=0,pN=null,QS=-1,e_=0;function Bo(){return Rn&6?Jr():QS!==-1?QS:QS=Jr()}function Sf(n){return n.mode&1?Rn&2&&Yi!==0?Yi&-Yi:Rue.transition!==null?(e_===0&&(e_=DG()),e_):(n=Jn,n!==0||(n=window.event,n=n===void 0?16:LG(n.type)),n):1}function Qa(n,e,t,r){if(50<J0)throw J0=0,pN=null,Error(ut(185));B1(n,t,r),(!(Rn&2)||n!==ki)&&(n===ki&&(!(Rn&2)&&(GM|=t),vi===4&&Qc(n,Yi)),gs(n,r),t===1&&Rn===0&&!(e.mode&1)&&(hg=Jr()+500,$M&&td()))}function gs(n,e){var t=n.callbackNode;Rle(n,e);var r=B_(n,n===ki?Yi:0);if(r===0)t!==null&&v8(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&v8(t),e===1)n.tag===0?Pue(uB.bind(null,n)):tq(uB.bind(null,n)),Aue(function(){!(Rn&6)&&td()}),t=null;else{switch(NG(r)){case 1:t=WO;break;case 4:t=AG;break;case 16:t=F_;break;case 536870912:t=TG;break;default:t=F_}t=eX(t,qq.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function qq(n,e){if(QS=-1,e_=0,Rn&6)throw Error(ut(327));var t=n.callbackNode;if(jm()&&n.callbackNode!==t)return null;var r=B_(n,n===ki?Yi:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=nE(n,r);else{e=r;var i=Rn;Rn|=2;var o=Yq();(ki!==n||Yi!==e)&&(ku=null,hg=Jr()+500,fh(n,e));do try{Jue();break}catch(a){Xq(n,a)}while(!0);rk(),Q_.current=o,Rn=i,li!==null?e=0:(ki=null,Yi=0,e=vi)}if(e!==0){if(e===2&&(i=VD(n),i!==0&&(r=i,e=mN(n,i))),e===1)throw t=Ny,fh(n,0),Qc(n,r),gs(n,Jr()),t;if(e===6)Qc(n,r);else{if(i=n.current.alternate,!(r&30)&&!Kue(i)&&(e=nE(n,r),e===2&&(o=VD(n),o!==0&&(r=o,e=mN(n,o))),e===1))throw t=Ny,fh(n,0),Qc(n,r),gs(n,Jr()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(ut(345));case 2:Bd(n,is,ku);break;case 3:if(Qc(n,r),(r&130023424)===r&&(e=yk+500-Jr(),10<e)){if(B_(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Bo(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=YD(Bd.bind(null,n,is,ku),e);break}Bd(n,is,ku);break;case 4:if(Qc(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var s=31-Ja(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Jr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Yue(r/1960))-r,10<r){n.timeoutHandle=YD(Bd.bind(null,n,is,ku),r);break}Bd(n,is,ku);break;case 5:Bd(n,is,ku);break;default:throw Error(ut(329))}}}return gs(n,Jr()),n.callbackNode===t?qq.bind(null,n):null}function mN(n,e){var t=Z0;return n.current.memoizedState.isDehydrated&&(fh(n,e).flags|=256),n=nE(n,e),n!==2&&(e=is,is=t,e!==null&&gN(e)),n}function gN(n){is===null?is=n:is.push.apply(is,n)}function Kue(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],o=i.getSnapshot;i=i.value;try{if(!rl(o(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qc(n,e){for(e&=~vk,e&=~GM,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Ja(e),r=1<<t;n[t]=-1,e&=~r}}function uB(n){if(Rn&6)throw Error(ut(327));jm();var e=B_(n,0);if(!(e&1))return gs(n,Jr()),null;var t=nE(n,e);if(n.tag!==0&&t===2){var r=VD(n);r!==0&&(e=r,t=mN(n,r))}if(t===1)throw t=Ny,fh(n,0),Qc(n,e),gs(n,Jr()),t;if(t===6)throw Error(ut(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Bd(n,is,ku),gs(n,Jr()),null}function xk(n,e){var t=Rn;Rn|=1;try{return n(e)}finally{Rn=t,Rn===0&&(hg=Jr()+500,$M&&td())}}function Nh(n){sf!==null&&sf.tag===0&&!(Rn&6)&&jm();var e=Rn;Rn|=1;var t=Sa.transition,r=Jn;try{if(Sa.transition=null,Jn=1,n)return n()}finally{Jn=r,Sa.transition=t,Rn=e,!(Rn&6)&&td()}}function bk(){Ns=Cm.current,vr(Cm)}function fh(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,Cue(t)),li!==null)for(t=li.return;t!==null;){var r=t;switch(ek(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&H_();break;case 3:fg(),vr(ps),vr(bo),uk();break;case 5:lk(r);break;case 4:fg();break;case 13:vr(Tr);break;case 19:vr(Tr);break;case 10:ik(r.type._context);break;case 22:case 23:bk()}t=t.return}if(ki=n,li=n=_f(n.current,null),Yi=Ns=e,vi=0,Ny=null,vk=GM=Dh=0,is=Z0=null,eh!==null){for(e=0;e<eh.length;e++)if(t=eh[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,o=t.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}t.pending=r}eh=null}return n}function Xq(n,e){do{var t=li;try{if(rk(),KS.current=J_,Z_){for(var r=Rr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Z_=!1}if(Th=0,Di=hi=Rr=null,Y0=!1,Ay=0,gk.current=null,t===null||t.return===null){vi=1,Ny=e,li=null;break}e:{var o=n,s=t.return,a=t,l=e;if(e=Yi,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=K8(s);if(h!==null){h.flags&=-257,Z8(h,s,a,o,e),h.mode&1&&Y8(o,u,e),e=h,l=u;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){Y8(o,u,e),wk();break e}l=Error(ut(426))}}else if(Sr&&a.mode&1){var y=K8(s);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Z8(y,s,a,o,e),tk(dg(l,a));break e}}o=l=dg(l,a),vi!==4&&(vi=2),Z0===null?Z0=[o]:Z0.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var p=Pq(o,l,e);$8(o,p);break e;case 1:a=l;var w=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(wf===null||!wf.has(b)))){o.flags|=65536,e&=-e,o.lanes|=e;var v=Rq(o,a,e);$8(o,v);break e}}o=o.return}while(o!==null)}Zq(t)}catch(S){e=S,li===t&&t!==null&&(li=t=t.return);continue}break}while(!0)}function Yq(){var n=Q_.current;return Q_.current=J_,n===null?J_:n}function wk(){(vi===0||vi===3||vi===2)&&(vi=4),ki===null||!(Dh&268435455)&&!(GM&268435455)||Qc(ki,Yi)}function nE(n,e){var t=Rn;Rn|=2;var r=Yq();(ki!==n||Yi!==e)&&(ku=null,fh(n,e));do try{Zue();break}catch(i){Xq(n,i)}while(!0);if(rk(),Rn=t,Q_.current=r,li!==null)throw Error(ut(261));return ki=null,Yi=0,vi}function Zue(){for(;li!==null;)Kq(li)}function Jue(){for(;li!==null&&!_le();)Kq(li)}function Kq(n){var e=Qq(n.alternate,n,Ns);n.memoizedProps=n.pendingProps,e===null?Zq(n):li=e,gk.current=null}function Zq(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=jue(t,e),t!==null){t.flags&=32767,li=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{vi=6,li=null;return}}else if(t=Wue(t,e,Ns),t!==null){li=t;return}if(e=e.sibling,e!==null){li=e;return}li=e=n}while(e!==null);vi===0&&(vi=5)}function Bd(n,e,t){var r=Jn,i=Sa.transition;try{Sa.transition=null,Jn=1,Que(n,e,t,r)}finally{Sa.transition=i,Jn=r}return null}function Que(n,e,t,r){do jm();while(sf!==null);if(Rn&6)throw Error(ut(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(ut(177));n.callbackNode=null,n.callbackPriority=0;var o=t.lanes|t.childLanes;if(Ole(n,o),n===ki&&(li=ki=null,Yi=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||zb||(zb=!0,eX(F_,function(){return jm(),null})),o=(t.flags&15990)!==0,t.subtreeFlags&15990||o){o=Sa.transition,Sa.transition=null;var s=Jn;Jn=1;var a=Rn;Rn|=4,gk.current=null,que(n,t),jq(t,n),xue(qD),z_=!!GD,qD=GD=null,n.current=t,Xue(t),Ele(),Rn=a,Jn=s,Sa.transition=o}else n.current=t;if(zb&&(zb=!1,sf=n,tE=i),o=n.pendingLanes,o===0&&(wf=null),Ale(t.stateNode),gs(n,Jr()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(eE)throw eE=!1,n=hN,hN=null,n;return tE&1&&n.tag!==0&&jm(),o=n.pendingLanes,o&1?n===pN?J0++:(J0=0,pN=n):J0=0,td(),null}function jm(){if(sf!==null){var n=NG(tE),e=Sa.transition,t=Jn;try{if(Sa.transition=null,Jn=16>n?16:n,sf===null)var r=!1;else{if(n=sf,sf=null,tE=0,Rn&6)throw Error(ut(331));var i=Rn;for(Rn|=4,At=n.current;At!==null;){var o=At,s=o.child;if(At.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(At=u;At!==null;){var c=At;switch(c.tag){case 0:case 11:case 15:K0(8,c,o)}var f=c.child;if(f!==null)f.return=c,At=f;else for(;At!==null;){c=At;var d=c.sibling,h=c.return;if($q(c),c===u){At=null;break}if(d!==null){d.return=h,At=d;break}At=h}}}var m=o.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}At=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,At=s;else e:for(;At!==null;){if(o=At,o.flags&2048)switch(o.tag){case 0:case 11:case 15:K0(9,o,o.return)}var p=o.sibling;if(p!==null){p.return=o.return,At=p;break e}At=o.return}}var w=n.current;for(At=w;At!==null;){s=At;var b=s.child;if(s.subtreeFlags&2064&&b!==null)b.return=s,At=b;else e:for(s=w;At!==null;){if(a=At,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:jM(9,a)}}catch(S){Vr(a,a.return,S)}if(a===s){At=null;break e}var v=a.sibling;if(v!==null){v.return=a.return,At=v;break e}At=a.return}}if(Rn=i,td(),ql&&typeof ql.onPostCommitFiberRoot=="function")try{ql.onPostCommitFiberRoot(FM,n)}catch{}r=!0}return r}finally{Jn=t,Sa.transition=e}}return!1}function cB(n,e,t){e=dg(t,e),e=Pq(n,e,1),n=bf(n,e,1),e=Bo(),n!==null&&(B1(n,1,e),gs(n,e))}function Vr(n,e,t){if(n.tag===3)cB(n,n,t);else for(;e!==null;){if(e.tag===3){cB(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(wf===null||!wf.has(r))){n=dg(t,n),n=Rq(e,n,1),e=bf(e,n,1),n=Bo(),e!==null&&(B1(e,1,n),gs(e,n));break}}e=e.return}}function ece(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Bo(),n.pingedLanes|=n.suspendedLanes&t,ki===n&&(Yi&t)===t&&(vi===4||vi===3&&(Yi&130023424)===Yi&&500>Jr()-yk?fh(n,0):vk|=t),gs(n,e)}function Jq(n,e){e===0&&(n.mode&1?(e=Db,Db<<=1,!(Db&130023424)&&(Db=4194304)):e=1);var t=Bo();n=rc(n,e),n!==null&&(B1(n,e,t),gs(n,t))}function tce(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),Jq(n,t)}function nce(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(ut(314))}r!==null&&r.delete(e),Jq(n,t)}var Qq;Qq=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||ps.current)us=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return us=!1,Hue(n,e,t);us=!!(n.flags&131072)}else us=!1,Sr&&e.flags&1048576&&nq(e,G_,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;JS(n,e),n=e.pendingProps;var i=lg(e,bo.current);Wm(e,t),i=fk(null,e,r,n,i,t);var o=dk();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ms(r)?(o=!0,W_(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,sk(e),i.updater=HM,e.stateNode=i,i._reactInternals=e,nN(e,r,n,t),e=oN(null,e,r,!0,o,t)):(e.tag=0,Sr&&o&&QO(e),Ro(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(JS(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=ice(r),n=Wa(r,n),i){case 0:e=iN(null,e,r,n,t);break e;case 1:e=eB(null,e,r,n,t);break e;case 11:e=J8(null,e,r,n,t);break e;case 14:e=Q8(null,e,r,Wa(r.type,n),t);break e}throw Error(ut(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wa(r,i),iN(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wa(r,i),eB(n,e,r,i,t);case 3:e:{if(Lq(e),n===null)throw Error(ut(387));r=e.pendingProps,o=e.memoizedState,i=o.element,sq(n,e),Y_(e,r,null,t);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=dg(Error(ut(423)),e),e=tB(n,e,r,t,i);break e}else if(r!==i){i=dg(Error(ut(424)),e),e=tB(n,e,r,t,i);break e}else for(Bs=xf(e.stateNode.containerInfo.firstChild),Us=e,Sr=!0,qa=null,t=cq(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(ug(),r===i){e=ic(n,e,t);break e}Ro(n,e,r,t)}e=e.child}return e;case 5:return fq(e),n===null&&QD(e),r=e.type,i=e.pendingProps,o=n!==null?n.memoizedProps:null,s=i.children,XD(r,i)?s=null:o!==null&&XD(r,o)&&(e.flags|=32),Iq(n,e),Ro(n,e,s,t),e.child;case 6:return n===null&&QD(e),null;case 13:return Fq(n,e,t);case 4:return ak(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=cg(e,null,r,t):Ro(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wa(r,i),J8(n,e,r,i,t);case 7:return Ro(n,e,e.pendingProps,t),e.child;case 8:return Ro(n,e,e.pendingProps.children,t),e.child;case 12:return Ro(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,fr(q_,r._currentValue),r._currentValue=s,o!==null)if(rl(o.value,s)){if(o.children===i.children&&!ps.current){e=ic(n,e,t);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=qu(-1,t&-t),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}o.lanes|=t,l=o.alternate,l!==null&&(l.lanes|=t),eN(o.return,t,e),a.lanes|=t;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(ut(341));s.lanes|=t,a=s.alternate,a!==null&&(a.lanes|=t),eN(s,t,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Ro(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Wm(e,t),i=Ca(i),r=r(i),e.flags|=1,Ro(n,e,r,t),e.child;case 14:return r=e.type,i=Wa(r,e.pendingProps),i=Wa(r.type,i),Q8(n,e,r,i,t);case 15:return Oq(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wa(r,i),JS(n,e),e.tag=1,ms(r)?(n=!0,W_(e)):n=!1,Wm(e,t),lq(e,r,i),nN(e,r,i,t),oN(null,e,r,!0,n,t);case 19:return Bq(n,e,t);case 22:return kq(n,e,t)}throw Error(ut(156,e.tag))};function eX(n,e){return CG(n,e)}function rce(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function va(n,e,t,r){return new rce(n,e,t,r)}function Sk(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ice(n){if(typeof n=="function")return Sk(n)?1:0;if(n!=null){if(n=n.$$typeof,n===VO)return 11;if(n===$O)return 14}return 2}function _f(n,e){var t=n.alternate;return t===null?(t=va(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function t_(n,e,t,r,i,o){var s=2;if(r=n,typeof n=="function")Sk(n)&&(s=1);else if(typeof n=="string")s=5;else e:switch(n){case gm:return dh(t.children,i,o,e);case UO:s=8,i|=8;break;case CD:return n=va(12,t,e,i|2),n.elementType=CD,n.lanes=o,n;case AD:return n=va(13,t,e,i),n.elementType=AD,n.lanes=o,n;case TD:return n=va(19,t,e,i),n.elementType=TD,n.lanes=o,n;case uG:return qM(t,i,o,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case aG:s=10;break e;case lG:s=9;break e;case VO:s=11;break e;case $O:s=14;break e;case Gc:s=16,r=null;break e}throw Error(ut(130,n==null?n:typeof n,""))}return e=va(s,t,e,i),e.elementType=n,e.type=r,e.lanes=o,e}function dh(n,e,t,r){return n=va(7,n,r,e),n.lanes=t,n}function qM(n,e,t,r){return n=va(22,n,r,e),n.elementType=uG,n.lanes=t,n.stateNode={isHidden:!1},n}function iT(n,e,t){return n=va(6,n,null,e),n.lanes=t,n}function oT(n,e,t){return e=va(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function oce(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zA(0),this.expirationTimes=zA(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zA(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function _k(n,e,t,r,i,o,s,a,l){return n=new oce(n,e,t,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=va(3,null,null,e),n.current=o,o.stateNode=n,o.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},sk(o),n}function sce(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mm,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function tX(n){if(!n)return If;n=n._reactInternals;e:{if(Yh(n)!==n||n.tag!==1)throw Error(ut(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ms(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ut(171))}if(n.tag===1){var t=n.type;if(ms(t))return eq(n,t,e)}return e}function nX(n,e,t,r,i,o,s,a,l){return n=_k(t,r,!0,n,i,o,s,a,l),n.context=tX(null),t=n.current,r=Bo(),i=Sf(t),o=qu(r,i),o.callback=e??null,bf(t,o,i),n.current.lanes=i,B1(n,i,r),gs(n,r),n}function XM(n,e,t,r){var i=e.current,o=Bo(),s=Sf(i);return t=tX(t),e.context===null?e.context=t:e.pendingContext=t,e=qu(o,s),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=bf(i,e,s),n!==null&&(Qa(n,i,s,o),YS(n,i,s)),s}function rE(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function fB(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Ek(n,e){fB(n,e),(n=n.alternate)&&fB(n,e)}function ace(){return null}var rX=typeof reportError=="function"?reportError:function(n){console.error(n)};function Mk(n){this._internalRoot=n}YM.prototype.render=Mk.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(ut(409));XM(n,e,null,null)};YM.prototype.unmount=Mk.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Nh(function(){XM(null,n,null,null)}),e[nc]=null}};function YM(n){this._internalRoot=n}YM.prototype.unstable_scheduleHydration=function(n){if(n){var e=OG();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Jc.length&&e!==0&&e<Jc[t].priority;t++);Jc.splice(t,0,n),t===0&&IG(n)}};function Ck(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function KM(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function dB(){}function lce(n,e,t,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=rE(s);o.call(u)}}var s=nX(e,r,n,0,null,!1,!1,"",dB);return n._reactRootContainer=s,n[nc]=s.current,Sy(n.nodeType===8?n.parentNode:n),Nh(),s}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=rE(l);a.call(u)}}var l=_k(n,0,!1,null,null,!1,!1,"",dB);return n._reactRootContainer=l,n[nc]=l.current,Sy(n.nodeType===8?n.parentNode:n),Nh(function(){XM(e,l,t,r)}),l}function ZM(n,e,t,r,i){var o=t._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=rE(s);a.call(l)}}XM(e,s,n,i)}else s=lce(t,e,n,i,r);return rE(s)}PG=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=T0(e.pendingLanes);t!==0&&(jO(e,t|1),gs(e,Jr()),!(Rn&6)&&(hg=Jr()+500,td()))}break;case 13:Nh(function(){var r=rc(n,1);if(r!==null){var i=Bo();Qa(r,n,1,i)}}),Ek(n,1)}};GO=function(n){if(n.tag===13){var e=rc(n,134217728);if(e!==null){var t=Bo();Qa(e,n,134217728,t)}Ek(n,134217728)}};RG=function(n){if(n.tag===13){var e=Sf(n),t=rc(n,e);if(t!==null){var r=Bo();Qa(t,n,e,r)}Ek(n,e)}};OG=function(){return Jn};kG=function(n,e){var t=Jn;try{return Jn=n,e()}finally{Jn=t}};BD=function(n,e,t){switch(e){case"input":if(PD(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=VM(r);if(!i)throw Error(ut(90));fG(r),PD(r,i)}}}break;case"textarea":hG(n,t);break;case"select":e=t.value,e!=null&&Um(n,!!t.multiple,e,!1)}};bG=xk;wG=Nh;var uce={usingClientEntryPoint:!1,Events:[U1,bm,VM,yG,xG,xk]},qv={findFiberByHostInstance:Qd,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},cce={bundleType:qv.bundleType,version:qv.version,rendererPackageName:qv.rendererPackageName,rendererConfig:qv.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xc.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=EG(n),n===null?null:n.stateNode},findFiberByHostInstance:qv.findFiberByHostInstance||ace,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ub=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ub.isDisabled&&Ub.supportsFiber)try{FM=Ub.inject(cce),ql=Ub}catch{}}Gs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uce;Gs.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ck(e))throw Error(ut(200));return sce(n,e,null,t)};Gs.createRoot=function(n,e){if(!Ck(n))throw Error(ut(299));var t=!1,r="",i=rX;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=_k(n,1,!1,null,null,t,!1,r,i),n[nc]=e.current,Sy(n.nodeType===8?n.parentNode:n),new Mk(e)};Gs.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(ut(188)):(n=Object.keys(n).join(","),Error(ut(268,n)));return n=EG(e),n=n===null?null:n.stateNode,n};Gs.flushSync=function(n){return Nh(n)};Gs.hydrate=function(n,e,t){if(!KM(e))throw Error(ut(200));return ZM(null,n,e,!0,t)};Gs.hydrateRoot=function(n,e,t){if(!Ck(n))throw Error(ut(405));var r=t!=null&&t.hydratedSources||null,i=!1,o="",s=rX;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),e=nX(e,null,n,1,t??null,i,!1,o,s),n[nc]=e.current,Sy(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new YM(e)};Gs.render=function(n,e,t){if(!KM(e))throw Error(ut(200));return ZM(null,n,e,!1,t)};Gs.unmountComponentAtNode=function(n){if(!KM(n))throw Error(ut(40));return n._reactRootContainer?(Nh(function(){ZM(null,null,n,!1,function(){n._reactRootContainer=null,n[nc]=null})}),!0):!1};Gs.unstable_batchedUpdates=xk;Gs.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!KM(t))throw Error(ut(200));if(n==null||n._reactInternals===void 0)throw Error(ut(38));return ZM(n,e,t,!1,r)};Gs.version="18.2.0-next-9e3b772b8-20220608";function iX(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iX)}catch(n){console.error(n)}}iX(),nG.exports=Gs;var $1=nG.exports;const oX=ll($1);var hB=$1;ED.createRoot=hB.createRoot,ED.hydrateRoot=hB.hydrateRoot;function Vb(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var fce={exports:{}};(function(n,e){(function(t){n.exports=t()})(function(){return function t(r,i,o){function s(u,c){if(!i[u]){if(!r[u]){var f=typeof Vb=="function"&&Vb;if(!c&&f)return f(u,!0);if(a)return a(u,!0);var d=new Error("Cannot find module '"+u+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[u]={exports:{}};r[u][0].call(h.exports,function(m){var g=r[u][1][m];return s(g||m)},h,h.exports,t,r,i,o)}return i[u].exports}for(var a=typeof Vb=="function"&&Vb,l=0;l<o.length;l++)s(o[l]);return s}({1:[function(t,r,i){r.exports={oauthd_url:"https://oauth.io",oauthd_api:"https://oauth.io/api",version:"web-0.6.1",options:{}}},{}],2:[function(t,r,i){r.exports=function(o){var s,a;return s=o.getJquery(),a=function(l){return function(u,c,f){var d,h,m;return h=s.Deferred(),d=o.getOAuthdURL(),m={url:d+c,type:u},u==="post"||u==="put"?(m.dataType="json",m.contentType="application/json",m.data=JSON.stringify(f)):m.data=f,s.ajax(m).then(function(g){return h.resolve(g)},function(g){return h.reject(g&&g.responseJSON)}),h.promise()}}(),{get:function(l){return function(u,c){return a("get",u,c)}}(),post:function(l){return function(u,c){return a("post",u,c)}}(),put:function(l){return function(u,c){return a("put",u,c)}}(),del:function(l){return function(u,c){return a("delete",u,c)}}()}}},{}],3:[function(t,r,i){var o,s,a,l,u,c;l=t("../config"),s=t("../tools/url"),o=t("../tools/location_operations"),u=t("../tools/cookies"),c=t("../tools/lstorage"),a=t("../tools/cache"),r.exports=function(f,d,h,m){var g,y;return s=s(d),g=o(d),y=c.active()&&c||u,u.init(l,d),a.init(y,l),{initialize:function(p,w){var b;if(l.key=p,w)for(b in w)l.options[b]=w[b]},setOAuthdURL:function(p){l.oauthd_url=p,l.oauthd_base=s.getAbsUrl(l.oauthd_url).match(/^.{2,5}:\/\/[^\/]+/)[0]},getOAuthdURL:function(){return l.oauthd_url},getVersion:function(){return l.version},extend:function(p,w){return this[p]=w(this)},getConfig:function(){return l},getWindow:function(){return f},getDocument:function(){return d},getNavigator:function(){return m},getJquery:function(){return h},getUrl:function(){return s},getCache:function(){return a},getStorage:function(){return y},getLocationOperations:function(){return g}}}},{"../config":1,"../tools/cache":9,"../tools/cookies":10,"../tools/location_operations":12,"../tools/lstorage":13,"../tools/url":15}],4:[function(t,r,i){var o,s,a;o=t("../tools/cookies"),s=t("./request"),a=t("../tools/sha1"),r.exports=function(l){var u,c,f,d,h,m,g,y,p,w,b,v;return c=l.getUrl(),h=l.getConfig(),m=l.getDocument(),v=l.getWindow(),u=l.getJquery(),f=l.getCache(),b=t("./providers")(l),h.oauthd_base=c.getAbsUrl(h.oauthd_url).match(/^.{2,5}:\/\/[^\/]+/)[0],d=[],p=void 0,function(){var S,x;x=/[\\#&]oauthio=([^&]*)/.exec(m.location.hash),x&&(m.location.hash=m.location.hash.replace(/&?oauthio=[^&]*/,""),p=decodeURIComponent(x[1].replace(/\+/g," ")),S=o.read("oauthio_state"),S&&(d.push(S),o.erase("oauthio_state")))}(),g=l.getLocationOperations(),w={request:s(l,d,b)},y={initialize:function(S,x){return l.initialize(S,x)},setOAuthdURL:function(S){h.oauthd_url=S,h.oauthd_base=c.getAbsUrl(h.oauthd_url).match(/^.{2,5}:\/\/[^\/]+/)[0]},create:function(S,x,M){var A,T,C;if(!x)return f.tryCache(y,S,!0);typeof M!="object"&&b.fetchDescription(S),T=function(D){return w.request.mkHttp(S,x,M,D)},C={};for(A in x)C[A]=x[A];return C.toJson=function(){var D;return D={},C.access_token!=null&&(D.access_token=C.access_token),C.oauth_token!=null&&(D.oauth_token=C.oauth_token),C.oauth_token_secret!=null&&(D.oauth_token_secret=C.oauth_token_secret),C.expires_in!=null&&(D.expires_in=C.expires_in),C.token_type!=null&&(D.token_type=C.token_type),C.id_token!=null&&(D.id_token=C.id_token),C.provider!=null&&(D.provider=C.provider),C.email!=null&&(D.email=C.email),D},C.get=T("GET"),C.post=T("POST"),C.put=T("PUT"),C.patch=T("PATCH"),C.del=T("DELETE"),C.me=w.request.mkHttpMe(S,x,M,"GET"),C},popup:function(S,x,M){var A,T,C,D,R,B,F,U,N,I,V;return D=!1,C=function(L){if(!D){if(L.origin!==h.oauthd_base)return;try{U.close()}catch{}return x.data=L.data,w.request.sendCallback(x,A),D=!0}},U=void 0,T=void 0,N=void 0,A=u.Deferred(),x=x||{},h.key?(arguments.length===2&&typeof x=="function"&&(M=x,x={}),f.cacheEnabled(x.cache)&&(B=f.tryCache(y,S,x.cache))?(A!=null&&A.resolve(B),M?M(null,B):A.promise()):(x.state||(x.state=a.create_hash(),x.state_type="client"),d.push(x.state),F=h.oauthd_url+"/auth/"+S+"?k="+h.key,F+="&d="+encodeURIComponent(c.getAbsUrl("/")),x&&(F+="&opts="+encodeURIComponent(JSON.stringify(x))),x.wnd_settings?(V=x.wnd_settings,delete x.wnd_settings):V={width:Math.floor(.8*v.outerWidth),height:Math.floor(.5*v.outerHeight)},V.width<1e3&&(V.width=1e3),V.height<630&&(V.height=630),V.left=Math.floor(v.screenX+(v.outerWidth-V.width)/2),V.top=Math.floor(v.screenY+(v.outerHeight-V.height)/8),I="width="+V.width+",height="+V.height,I+=",toolbar=0,scrollbars=1,status=1,resizable=1,location=1,menuBar=0",I+=",left="+V.left+",top="+V.top,x={provider:S,cache:x.cache},x.callback=function(L,X){return v.removeEventListener?v.removeEventListener("message",C,!1):v.detachEvent?v.detachEvent("onmessage",C):m.detachEvent&&m.detachEvent("onmessage",C),x.callback=function(){},N&&(clearTimeout(N),N=void 0),M?M(L,X):void 0},v.attachEvent?v.attachEvent("onmessage",C):m.attachEvent?m.attachEvent("onmessage",C):v.addEventListener&&v.addEventListener("message",C,!1),typeof chrome<"u"&&chrome.runtime&&chrome.runtime.onMessageExternal&&chrome.runtime.onMessageExternal.addListener(function(L,X,Z){return L.origin=X.url.match(/^.{2,5}:\/\/[^\/]+/)[0],C(L)}),!T&&(navigator.userAgent.indexOf("MSIE")!==-1||navigator.appVersion.indexOf("Trident/")>0)&&(T=m.createElement("iframe"),T.src=h.oauthd_url+"/auth/iframe?d="+encodeURIComponent(c.getAbsUrl("/")),T.width=0,T.height=0,T.frameBorder=0,T.style.visibility="hidden",m.body.appendChild(T)),N=setTimeout(function(){A!=null&&A.reject(new Error("Authorization timed out")),x.callback&&typeof x.callback=="function"&&x.callback(new Error("Authorization timed out"));try{U.close()}catch{}},12e5),U=v.open(F,"Authorization",I),U?(U.focus(),R=v.setInterval(function(){return U!==null&&!U.closed||(v.clearInterval(R),D||(A!=null&&A.reject(new Error("The popup was closed")),!x.callback||typeof x.callback!="function"))?void 0:x.callback(new Error("The popup was closed"))},500)):(A!=null&&A.reject(new Error("Could not open a popup")),x.callback&&typeof x.callback=="function"&&x.callback(new Error("Could not open a popup"))),A!=null?A.promise():void 0)):(A!=null&&A.reject(new Error("OAuth object must be initialized")),M==null?A.promise():M(new Error("OAuth object must be initialized")))},redirect:function(S,x,M){var A;if(arguments.length===2&&(M=x,x={}),typeof M!="string")throw new Error("You must specify an url");return f.cacheEnabled(x.cache)&&f.tryCache(y,S,x.cache)?(M=c.getAbsUrl(M)+(M.indexOf("#")===-1?"#":"&")+"oauthio=cache:"+S,g.changeHref(M),void g.reload()):(x.state||(x.state=a.create_hash(),x.state_type="client"),o.create("oauthio_state",x.state),A=encodeURIComponent(c.getAbsUrl(M)),M=h.oauthd_url+"/auth/"+S+"?k="+h.key,M+="&redirect_uri="+A,x&&(M+="&opts="+encodeURIComponent(JSON.stringify(x))),void g.changeHref(M))},isRedirect:function(S){var x,M;if(p==null)return!1;if((p!=null?p.substr(0,6):void 0)==="cache:")return x=p!=null?p.substr(6):void 0,S?x.toLowerCase()===S.toLowerCase():x;try{M=JSON.parse(p)}catch{return!1}return S?M.provider.toLowerCase()===S.toLowerCase():M.provider},callback:function(S,x,M){var A,T,C;if(A=u.Deferred(),arguments.length===1&&typeof S=="function"&&(M=S,S=void 0,x={}),arguments.length===1&&typeof S=="string"&&(x={}),arguments.length===2&&typeof x=="function"&&(M=x,x={}),f.cacheEnabled(x!=null?x.cache:void 0)||(p!=null?p.substr(0,6):void 0)==="cache:"){if(S||(p!=null?p.substr(0,6):void 0)!=="cache:"||(S=p.substr(6)),C=f.tryCache(y,S,!0)){if(!M)return A!=null&&A.resolve(C),A!=null?A.promise():void 0;if(C)return M(null,C)}else if((p!=null?p.substr(0,6):void 0)==="cache:")return T=new Error("Could not fetch data from cache"),M?M(T):(A!=null&&A.reject(T),A!=null?A.promise():void 0)}return p?(w.request.sendCallback({data:p,provider:S,cache:x!=null?x.cache:void 0,expires:x!=null?x.expires:void 0,callback:M},A),A!=null?A.promise():void 0):void 0},clearCache:function(S){return f.clearCache(S)},http_me:function(S){w.request.http_me&&w.request.http_me(S)},http:function(S){w.request.http&&w.request.http(S)},getVersion:function(){return l.getVersion.apply(this)}}}},{"../tools/cookies":10,"../tools/sha1":14,"./providers":5,"./request":6}],5:[function(t,r,i){var o;o=t("../config"),r.exports=function(s){var a,l,u,c;return a=s.getJquery(),c={},u={},l={execProvidersCb:function(f,d,h){var m,g;if(u[f]){m=u[f],delete u[f];for(g in m)m[g](d,h)}},fetchDescription:function(f){c[f]||(c[f]=!0,a.ajax({url:o.oauthd_api+"/providers/"+f,data:{extend:!0},dataType:"json"}).done(function(d){c[f]=d.data,l.execProvidersCb(f,null,d.data)}).always(function(){typeof c[f]!="object"&&(delete c[f],l.execProvidersCb(f,new Error("Unable to fetch request description")))}))},getDescription:function(f,d,h){return d=d||{},typeof c[f]=="object"?h(null,c[f]):(c[f]||l.fetchDescription(f),d.wait?(u[f]=u[f]||[],void u[f].push(h)):h(null,{}))}}}},{"../config":1}],6:[function(t,r,i){var o,s=[].indexOf||function(a){for(var l=0,u=this.length;u>l;l++)if(l in this&&this[l]===a)return l;return-1};o=t("../tools/url")(),r.exports=function(a,l,u){var c,f,d,h,m;return c=a.getJquery(),d=a.getConfig(),f=a.getCache(),h=[],m=!1,{retrieveMethods:function(){var g;return g=c.Deferred(),m?g.resolve(h):c.ajax(d.oauthd_url+"/api/extended-endpoints").then(function(y){return h=y.data,m=!0,g.resolve()}).fail(function(y){return m=!0,g.reject(y)}),g.promise()},generateMethods:function(g,y,p){var w,b,v,S,x,M,A,T,C;if(h!=null){for(A=[],b=w=0,S=h.length;S>w;b=++w)T=h[b],x=T.name.split("."),M=g,A.push((function(){var D,R,B;for(B=[],v=D=0,R=x.length;R>D;v=++D)C=x[v],v<x.length-1?(M[C]==null&&(M[C]={}),B.push(M=M[C])):B.push(M[C]=this.mkHttpAll(p,y,T,arguments));return B}).apply(this,arguments));return A}},http:function(g){var y,p,w,b,v;w=function(){var S,x,M,A;if(A=v.oauthio.request||{},!A.cors){v.url=encodeURIComponent(v.url),v.url[0]!=="/"&&(v.url="/"+v.url),v.url=d.oauthd_url+"/request/"+v.oauthio.provider+v.url,v.headers=v.headers||{},v.headers.oauthio="k="+d.key,v.oauthio.tokens.oauth_token&&v.oauthio.tokens.oauth_token_secret&&(v.headers.oauthio+="&oauthv=1");for(x in v.oauthio.tokens)v.headers.oauthio+="&"+encodeURIComponent(x)+"="+encodeURIComponent(v.oauthio.tokens[x]);return delete v.oauthio,c.ajax(v)}if(v.oauthio.tokens){if(v.oauthio.tokens.access_token&&(v.oauthio.tokens.token=v.oauthio.tokens.access_token),v.url.match(/^[a-z]{2,16}:\/\//)||(v.url[0]!=="/"&&(v.url="/"+v.url),v.url=A.url+v.url),v.url=o.replaceParam(v.url,v.oauthio.tokens,A.parameters),A.query){M=[];for(S in A.query)M.push(encodeURIComponent(S)+"="+encodeURIComponent(o.replaceParam(A.query[S],v.oauthio.tokens,A.parameters)));s.call(v.url,"?")>=0?v.url+="&"+M:v.url+="?"+M}if(A.headers){v.headers=v.headers||{};for(S in A.headers)v.headers[S]=o.replaceParam(A.headers[S],v.oauthio.tokens,A.parameters)}return delete v.oauthio,c.ajax(v)}},v={},b=void 0;for(b in g)v[b]=g[b];return v.oauthio.request&&v.oauthio.request!==!0?w():(p={wait:!!v.oauthio.request},y=c.Deferred(),u.getDescription(v.oauthio.provider,p,function(S,x){return S?y.reject(S):(v.oauthio.tokens.oauth_token&&v.oauthio.tokens.oauth_token_secret?v.oauthio.request=x.oauth1&&x.oauth1.request:v.oauthio.request=x.oauth2&&x.oauth2.request,void y.resolve())}),y.then(w))},http_me:function(g){var y,p,w,b,v;w=function(){var S,x,M;S=c.Deferred(),v.oauthio.request,v.url=d.oauthd_url+"/auth/"+v.oauthio.provider+"/me",v.headers=v.headers||{},v.headers.oauthio="k="+d.key,v.oauthio.tokens.oauth_token&&v.oauthio.tokens.oauth_token_secret&&(v.headers.oauthio+="&oauthv=1");for(x in v.oauthio.tokens)v.headers.oauthio+="&"+encodeURIComponent(x)+"="+encodeURIComponent(v.oauthio.tokens[x]);return delete v.oauthio,M=c.ajax(v),c.when(M).done(function(A){S.resolve(A.data)}).fail(function(A){A.responseJSON?S.reject(A.responseJSON.data):S.reject(new Error("An error occured while trying to access the resource"))}),S.promise()},v={};for(b in g)v[b]=g[b];return v.oauthio.request&&v.oauthio.request!==!0?w():(p={wait:!!v.oauthio.request},y=c.Deferred(),u.getDescription(v.oauthio.provider,p,function(S,x){return S?y.reject(S):(v.oauthio.tokens.oauth_token&&v.oauthio.tokens.oauth_token_secret?v.oauthio.request=x.oauth1&&x.oauth1.request:v.oauthio.request=x.oauth2&&x.oauth2.request,void y.resolve())}),y.then(w))},http_all:function(g,y,p){return function(){var w,b,v;w=c.Deferred(),g.oauthio.request,g.headers=g.headers||{},g.headers.oauthio="k="+d.key,g.oauthio.tokens.oauth_token&&g.oauthio.tokens.oauth_token_secret&&(g.headers.oauthio+="&oauthv=1");for(b in g.oauthio.tokens)g.headers.oauthio+="&"+encodeURIComponent(b)+"="+encodeURIComponent(g.oauthio.tokens[b]);return delete g.oauthio,v=c.ajax(g),c.when(v).done(function(S){if(typeof S.data=="string")try{S.data=JSON.parse(S.data)}catch{S.data=S.data}finally{w.resolve(S.data)}}).fail(function(S){S.responseJSON?w.reject(S.responseJSON.data):w.reject(new Error("An error occured while trying to access the resource"))}),w.promise()}()},mkHttp:function(g,y,p,w){var b;return b=this,function(v,S){var x,M;if(M={},typeof v=="string"){if(typeof S=="object")for(x in S)M[x]=S[x];M.url=v}else if(typeof v=="object")for(x in v)M[x]=v[x];return M.type=M.type||w,M.oauthio={provider:g,tokens:y,request:p},b.http(M)}},mkHttpMe:function(g,y,p,w){var b;return b=this,function(v){var S;return S={},S.type=S.type||w,S.oauthio={provider:g,tokens:y,request:p},S.data=S.data||{},v&&(S.data.filter=v.join(",")),b.http_me(S)}},mkHttpAll:function(g,y,p){var w;return w=this,function(){var b,v,S,x;v={},v.type=p.method,v.url=d.oauthd_url+p.endpoint.replace(":provider",g),v.oauthio={provider:g,tokens:y},v.data={};for(b in arguments)x=arguments[b],S=p.params[b],S!=null&&(v.data[S.name]=x);return v.data=v.data||{},w.http_all(v,p,arguments)}},sendCallback:function(g,y){var p,w,b,v,S,x,M,A;p=this,w=void 0,b=void 0;try{w=JSON.parse(g.data)}catch{return y.reject(new Error("Error while parsing result")),g.callback(new Error("Error while parsing result"))}if(w&&w.provider){if(g.provider&&w.provider.toLowerCase()!==g.provider.toLowerCase())return b=new Error("Returned provider name does not match asked provider"),y.reject(b),g.callback&&typeof g.callback=="function"?g.callback(b):void 0;if(w.status==="error"||w.status==="fail")return b=new Error(w.message),b.body=w.data,y.reject(b),g.callback&&typeof g.callback=="function"?g.callback(b):void 0;if(w.status!=="success"||!w.data)return b=new Error,b.body=w.data,y.reject(b),g.callback&&typeof g.callback=="function"?g.callback(b):void 0;for(w.state=w.state.replace(/\s+/g,""),v=0;v<l.length;)l[v]=l[v].replace(/\s+/g,""),v++;if(!w.state||l.indexOf(w.state)===-1)return y.reject(new Error("State is not matching")),g.callback&&typeof g.callback=="function"?g.callback(new Error("State is not matching")):void 0;if(g.provider||(w.data.provider=w.provider),M=w.data,M.provider=w.provider.toLowerCase(),f.cacheEnabled(g.cache)&&M&&(g.expires&&!M.expires_in&&(M.expires_in=g.expires),f.storeCache(w.provider,M)),x=M.request,delete M.request,A=void 0,M.access_token?A={access_token:M.access_token}:M.oauth_token&&M.oauth_token_secret&&(A={oauth_token:M.oauth_token,oauth_token_secret:M.oauth_token_secret}),!x)return y.resolve(M),g.callback&&typeof g.callback=="function"?g.callback(null,M):void 0;if(x.required)for(v in x.required)A[x.required[v]]=M[x.required[v]];return S=function(T){return p.mkHttp(w.provider,A,x,T)},M.toJson=function(){var T;return T={},M.access_token!=null&&(T.access_token=M.access_token),M.oauth_token!=null&&(T.oauth_token=M.oauth_token),M.oauth_token_secret!=null&&(T.oauth_token_secret=M.oauth_token_secret),M.expires_in!=null&&(T.expires_in=M.expires_in),M.token_type!=null&&(T.token_type=M.token_type),M.id_token!=null&&(T.id_token=M.id_token),M.provider!=null&&(T.provider=M.provider),M.email!=null&&(T.email=M.email),T},M.get=S("GET"),M.post=S("POST"),M.put=S("PUT"),M.patch=S("PATCH"),M.del=S("DELETE"),M.me=p.mkHttpMe(w.provider,A,x,"GET"),this.retrieveMethods().then(function(T){return function(){return T.generateMethods(M,A,w.provider),y.resolve(M),g.callback&&typeof g.callback=="function"?g.callback(null,M):void 0}}(this)).fail(function(T){return function(C){return console.log("Could not retrieve methods",C),y.resolve(M),g.callback&&typeof g.callback=="function"?g.callback(null,M):void 0}}())}}}}},{"../tools/url":15}],7:[function(t,r,i){r.exports=function(o){var s,a,l,u,c;return s=o.getJquery(),l=o.getConfig(),c=o.getStorage(),u=null,a=function(){function f(d){this.token=d.token,this.data=d.user,this.providers=d.providers,u=this.getEditableData()}return f.prototype.getEditableData=function(){var d,h;d=[];for(h in this.data)["id","email"].indexOf(h)===-1&&d.push({key:h,value:this.data[h]});return d},f.prototype.save=function(){var d,h,m,g,y,p,w,b;for(h={},m=0,p=u.length;p>m;m++)d=u[m],this.data[d.key]!==d.value&&(h[d.key]=this.data[d.key]),this.data[d.key]===null&&delete this.data[d.key];for(y=function(v){var S,x,M;for(S=0,x=u.length;x>S;S++)if(M=u[S],M.key===v)return!0;return!1},b=this.getEditableData(),g=0,w=b.length;w>g;g++)d=b[g],y(d.key)||(h[d.key]=this.data[d.key]);return this.saveLocal(),o.API.put("/api/usermanagement/user?k="+l.key+"&token="+this.token,h)},f.prototype.select=function(d){return null},f.prototype.saveLocal=function(){var d;return d={token:this.token,user:this.data,providers:this.providers},c.erase("oio_auth"),c.create("oio_auth",JSON.stringify(d),21600)},f.prototype.hasProvider=function(d){return!!this.providers&&this.providers.indexOf(d)!==-1},f.prototype.getProviders=function(){var d;return d=s.Deferred(),o.API.get("/api/usermanagement/user/providers?k="+l.key+"&token="+this.token).done(function(h){return function(m){return h.providers=m.data,h.saveLocal(),d.resolve(h.providers)}}(this)).fail(function(h){return d.reject(h)}),d.promise()},f.prototype.addProvider=function(d){var h;return h=s.Deferred(),typeof d.toJson=="function"&&(d=d.toJson()),d.email=this.data.email,this.providers||(this.providers=[]),this.providers.push(d.provider),o.API.post("/api/usermanagement/user/providers?k="+l.key+"&token="+this.token,d).done(function(m){return function(g){return m.data=g.data,m.saveLocal(),h.resolve()}}(this)).fail(function(m){return function(g){return m.providers.splice(m.providers.indexOf(d.provider),1),h.reject(g)}}(this)),h.promise()},f.prototype.removeProvider=function(d){var h;return h=s.Deferred(),this.providers.splice(this.providers.indexOf(d),1),o.API.del("/api/usermanagement/user/providers/"+d+"?k="+l.key+"&token="+this.token).done(function(m){return function(g){return m.saveLocal(),h.resolve(g)}}(this)).fail(function(m){return function(g){return m.providers.push(d),h.reject(g)}}(this)),h.promise()},f.prototype.changePassword=function(d,h){return o.API.post("/api/usermanagement/user/password?k="+l.key+"&token="+this.token,{password:h})},f.prototype.isLoggued=function(){return o.User.isLogged()},f.prototype.isLogged=function(){return o.User.isLogged()},f.prototype.logout=function(){var d;return d=s.Deferred(),c.erase("oio_auth"),o.API.post("/api/usermanagement/user/logout?k="+l.key+"&token="+this.token).done(function(){return d.resolve()}).fail(function(h){return d.reject(h)}),d.promise()},f}(),{initialize:function(f,d){return o.initialize(f,d)},setOAuthdURL:function(f){return o.setOAuthdURL(f)},signup:function(f){var d;return d=s.Deferred(),typeof f.toJson=="function"&&(f=f.toJson()),o.API.post("/api/usermanagement/signup?k="+l.key,f).done(function(h){return c.create("oio_auth",JSON.stringify(h.data),h.data.expires_in||21600),d.resolve(new a(h.data))}).fail(function(h){return d.reject(h)}),d.promise()},signin:function(f,d){var h,m;return h=s.Deferred(),typeof f=="string"||d?o.API.post("/api/usermanagement/signin?k="+l.key,{email:f,password:d}).done(function(g){return c.create("oio_auth",JSON.stringify(g.data),g.data.expires_in||21600),h.resolve(new a(g.data))}).fail(function(g){return h.reject(g)}):(m=f,typeof m.toJson=="function"&&(m=m.toJson()),o.API.post("/api/usermanagement/signin?k="+l.key,m).done(function(g){return c.create("oio_auth",JSON.stringify(g.data),g.data.expires_in||21600),h.resolve(new a(g.data))}).fail(function(g){return h.reject(g)})),h.promise()},confirmResetPassword:function(f,d){return o.API.post("/api/usermanagement/user/password?k="+l.key,{password:f,token:d})},resetPassword:function(f,d){return o.API.post("/api/usermanagement/user/password/reset?k="+l.key,{email:f})},refreshIdentity:function(){var f;return f=s.Deferred(),o.API.get("/api/usermanagement/user?k="+l.key+"&token="+JSON.parse(c.read("oio_auth")).token).done(function(d){return f.resolve(new a(d.data))}).fail(function(d){return f.reject(d)}),f.promise()},getIdentity:function(){var f;return f=c.read("oio_auth"),f?new a(JSON.parse(f)):null},isLogged:function(){var f;return f=c.read("oio_auth"),!!f}}}},{}],8:[function(t,r,i){(function(){var o,s;return s=t("./tools/jquery-lite.js"),o=t("./lib/core")(window,document,s,navigator),o.extend("OAuth",t("./lib/oauth")),o.extend("API",t("./lib/api")),o.extend("User",t("./lib/user")),typeof angular<"u"&&angular!==null&&angular.module("oauthio",[]).factory("OAuth",[function(){return o.OAuth}]).factory("User",[function(){return o.User}]),i.OAuthio=o,window.User=i.User=i.OAuthio.User,window.OAuth=i.OAuth=i.OAuthio.OAuth,typeof r<"u"&&r!==null&&r.exports&&(r.exports=i),i})()},{"./lib/api":2,"./lib/core":3,"./lib/oauth":4,"./lib/user":7,"./tools/jquery-lite.js":11}],9:[function(t,r,i){r.exports={init:function(o,s){return this.config=s,this.storage=o},tryCache:function(o,s,a){var l,u;if(this.cacheEnabled(a)){if(a=this.storage.read("oauthio_provider_"+s),!a)return!1;a=decodeURIComponent(a)}if(typeof a=="string")try{a=JSON.parse(a)}catch{return!1}if(typeof a=="object"){u={};for(l in a)l!=="request"&&typeof a[l]!="function"&&(u[l]=a[l]);return o.create(s,u,a.request)}return!1},storeCache:function(o,s){var a;a=3600,s.expires_in?a=s.expires_in:(this.config.options.expires||this.config.options.expires===!1)&&(a=this.config.options.expires),this.storage.create("oauthio_provider_"+o,encodeURIComponent(JSON.stringify(s)),a)},cacheEnabled:function(o){return typeof o>"u"?this.config.options.cache:o},clearCache:function(o){o?this.storage.erase("oauthio_provider_"+o):this.storage.eraseFrom("oauthio_provider_")}}},{}],10:[function(t,r,i){r.exports={init:function(o,s){return this.config=o,this.document=s},create:function(o,s,a){var l;this.erase(o),l=new Date,a?l.setTime(l.getTime()+1e3*(a||1200)):l.setFullYear(l.getFullYear()+3),a="; expires="+l.toGMTString(),this.document.cookie=o+"="+s+a+"; path=/"},read:function(o){var s,a,l,u;for(u=o+"=",a=this.document.cookie.split(";"),l=0;l<a.length;){for(s=a[l];s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(u)===0)return s.substring(u.length,s.length);l++}return null},erase:function(o){var s;s=new Date,s.setTime(s.getTime()-864e5),this.document.cookie=o+"=; expires="+s.toGMTString()+"; path=/"},eraseFrom:function(o){var s,a,l,u,c;for(l=this.document.cookie.split(";"),u=0,c=l.length;c>u;u++)a=l[u],s=a.split("=")[0].trim(),s.substr(0,o.length)===o&&this.erase(s)}}},{}],11:[function(t,r,i){(function(o,s){typeof r=="object"&&typeof r.exports=="object"?r.exports=o.document?s(o,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return s(a)}:s(o)})(typeof window<"u"?window:this,function(o,s){function a(W){var ne=W.length,le=N.type(W);return le==="function"||N.isWindow(W)?!1:W.nodeType===1&&ne?!0:le==="array"||ne===0||typeof ne=="number"&&ne>0&&ne-1 in W}function l(W){var ne=ue[W]={};return N.each(W.match(fe)||[],function(le,ve){ne[ve]=!0}),ne}function u(){F.removeEventListener("DOMContentLoaded",u,!1),o.removeEventListener("load",u,!1),N.ready()}function c(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=N.expando+Math.random()}function f(W,ne,le){var ve;if(le===void 0&&W.nodeType===1)if(ve="data-"+ne.replace(Ae,"-$1").toLowerCase(),le=W.getAttribute(ve),typeof le=="string"){try{le=le==="true"?!0:le==="false"?!1:le==="null"?null:+le+""===le?+le:De.test(le)?N.parseJSON(le):le}catch{}data_user.set(W,ne,le)}else le=void 0;return le}function d(){return!0}function h(){return!1}function m(){try{return F.activeElement}catch{}}function g(W){return function(ne,le){typeof ne!="string"&&(le=ne,ne="*");var ve,_e=0,Oe=ne.toLowerCase().match(fe)||[];if(N.isFunction(le))for(;ve=Oe[_e++];)ve[0]==="+"?(ve=ve.slice(1)||"*",(W[ve]=W[ve]||[]).unshift(le)):(W[ve]=W[ve]||[]).push(le)}}function y(W,ne,le,ve){function _e(Xe){var rt;return Oe[Xe]=!0,N.each(W[Xe]||[],function(ht,Pt){var it=Pt(ne,le,ve);return typeof it!="string"||Ve||Oe[it]?Ve?!(rt=it):void 0:(ne.dataTypes.unshift(it),_e(it),!1)}),rt}var Oe={},Ve=W===He;return _e(ne.dataTypes[0])||!Oe["*"]&&_e("*")}function p(W,ne){var le,ve,_e=N.ajaxSettings.flatOptions||{};for(le in ne)ne[le]!==void 0&&((_e[le]?W:ve||(ve={}))[le]=ne[le]);return ve&&N.extend(!0,W,ve),W}function w(W,ne,le){for(var ve,_e,Oe,Ve,Xe=W.contents,rt=W.dataTypes;rt[0]==="*";)rt.shift(),ve===void 0&&(ve=W.mimeType||ne.getResponseHeader("Content-Type"));if(ve){for(_e in Xe)if(Xe[_e]&&Xe[_e].test(ve)){rt.unshift(_e);break}}if(rt[0]in le)Oe=rt[0];else{for(_e in le){if(!rt[0]||W.converters[_e+" "+rt[0]]){Oe=_e;break}Ve||(Ve=_e)}Oe=Oe||Ve}return Oe?(Oe!==rt[0]&&rt.unshift(Oe),le[Oe]):void 0}function b(W,ne,le,ve){var _e,Oe,Ve,Xe,rt,ht={},Pt=W.dataTypes.slice();if(Pt[1])for(Ve in W.converters)ht[Ve.toLowerCase()]=W.converters[Ve];for(Oe=Pt.shift();Oe;)if(W.responseFields[Oe]&&(le[W.responseFields[Oe]]=ne),!rt&&ve&&W.dataFilter&&(ne=W.dataFilter(ne,W.dataType)),rt=Oe,Oe=Pt.shift()){if(Oe==="*")Oe=rt;else if(rt!=="*"&&rt!==Oe){if(Ve=ht[rt+" "+Oe]||ht["* "+Oe],!Ve){for(_e in ht)if(Xe=_e.split(" "),Xe[1]===Oe&&(Ve=ht[rt+" "+Xe[0]]||ht["* "+Xe[0]])){Ve===!0?Ve=ht[_e]:ht[_e]!==!0&&(Oe=Xe[0],Pt.unshift(Xe[1]));break}}if(Ve!==!0)if(Ve&&W.throws)ne=Ve(ne);else try{ne=Ve(ne)}catch(it){return{state:"parsererror",error:Ve?it:"No conversion from "+rt+" to "+Oe}}}}return{state:"success",data:ne}}function v(W,ne,le,ve){var _e;if(N.isArray(ne))N.each(ne,function(Oe,Ve){le||qe.test(W)?ve(W,Ve):v(W+"["+(typeof Ve=="object"?Oe:"")+"]",Ve,le,ve)});else if(le||N.type(ne)!=="object")ve(W,ne);else for(_e in ne)v(W+"["+_e+"]",ne[_e],le,ve)}var S=[],x=S.slice,M=S.concat,A=S.push,T=S.indexOf,C={},D=C.toString,R=C.hasOwnProperty,B={},F=o.document,U="2.1.1 -attributes,-attributes/attr,-attributes/classes,-attributes/prop,-attributes/support,-attributes/val,-css/addGetHookIf,-css/curCSS,-css/defaultDisplay,-css/hiddenVisibleSelectors,-css/support,-css/swap,-css/var,-css/var/cssExpand,-css/var/getStyles,-css/var/isHidden,-css/var/rmargin,-css/var/rnumnonpx,-css,-effects,-effects/Tween,-effects/animatedSelector,-dimensions,-offset,-data/var/data_user,-deprecated,-event/alias,-event/support,-intro,-manipulation/_evalUrl,-manipulation/support,-manipulation/var,-manipulation/var/rcheckableType,-manipulation,-outro,-queue,-queue/delay,-selector-native,-selector-sizzle,-sizzle/dist,-sizzle/dist/sizzle,-sizzle/dist/min,-sizzle/test,-sizzle/test/jquery,-traversing,-traversing/findFilter,-traversing/var/rneedsContext,-traversing/var,-wrap,-exports,-exports/amd",N=function(W,ne){return new N.fn.init(W,ne)},I=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,V=/^-ms-/,L=/-([\da-z])/gi,X=function(W,ne){return ne.toUpperCase()};N.fn=N.prototype={jquery:U,constructor:N,selector:"",length:0,toArray:function(){return x.call(this)},get:function(W){return W!=null?0>W?this[W+this.length]:this[W]:x.call(this)},pushStack:function(W){var ne=N.merge(this.constructor(),W);return ne.prevObject=this,ne.context=this.context,ne},each:function(W,ne){return N.each(this,W,ne)},map:function(W){return this.pushStack(N.map(this,function(ne,le){return W.call(ne,le,ne)}))},slice:function(){return this.pushStack(x.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(W){var ne=this.length,le=+W+(0>W?ne:0);return this.pushStack(le>=0&&ne>le?[this[le]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:A,sort:S.sort,splice:S.splice},N.extend=N.fn.extend=function(){var W,ne,le,ve,_e,Oe,Ve=arguments[0]||{},Xe=1,rt=arguments.length,ht=!1;for(typeof Ve=="boolean"&&(ht=Ve,Ve=arguments[Xe]||{},Xe++),typeof Ve=="object"||N.isFunction(Ve)||(Ve={}),Xe===rt&&(Ve=this,Xe--);rt>Xe;Xe++)if((W=arguments[Xe])!=null)for(ne in W)le=Ve[ne],ve=W[ne],Ve!==ve&&(ht&&ve&&(N.isPlainObject(ve)||(_e=N.isArray(ve)))?(_e?(_e=!1,Oe=le&&N.isArray(le)?le:[]):Oe=le&&N.isPlainObject(le)?le:{},Ve[ne]=N.extend(ht,Oe,ve)):ve!==void 0&&(Ve[ne]=ve));return Ve},N.extend({expando:"jQuery"+(U+Math.random()).replace(/\D/g,""),isReady:!0,error:function(W){throw new Error(W)},noop:function(){},isFunction:function(W){return N.type(W)==="function"},isArray:Array.isArray,isWindow:function(W){return W!=null&&W===W.window},isNumeric:function(W){return!N.isArray(W)&&W-parseFloat(W)>=0},isPlainObject:function(W){return N.type(W)!=="object"||W.nodeType||N.isWindow(W)?!1:!W.constructor||R.call(W.constructor.prototype,"isPrototypeOf")},isEmptyObject:function(W){var ne;for(ne in W)return!1;return!0},type:function(W){return W==null?W+"":typeof W=="object"||typeof W=="function"?C[D.call(W)]||"object":typeof W},globalEval:function(W){var ne,le=eval;W=N.trim(W),W&&(W.indexOf("use strict")===1?(ne=F.createElement("script"),ne.text=W,F.head.appendChild(ne).parentNode.removeChild(ne)):le(W))},camelCase:function(W){return W.replace(V,"ms-").replace(L,X)},nodeName:function(W,ne){return W.nodeName&&W.nodeName.toLowerCase()===ne.toLowerCase()},each:function(W,ne,le){var ve,_e=0,Oe=W.length,Ve=a(W);if(le){if(Ve)for(;Oe>_e&&(ve=ne.apply(W[_e],le),ve!==!1);_e++);else for(_e in W)if(ve=ne.apply(W[_e],le),ve===!1)break}else if(Ve)for(;Oe>_e&&(ve=ne.call(W[_e],_e,W[_e]),ve!==!1);_e++);else for(_e in W)if(ve=ne.call(W[_e],_e,W[_e]),ve===!1)break;return W},trim:function(W){return W==null?"":(W+"").replace(I,"")},makeArray:function(W,ne){var le=ne||[];return W!=null&&(a(Object(W))?N.merge(le,typeof W=="string"?[W]:W):A.call(le,W)),le},inArray:function(W,ne,le){return ne==null?-1:T.call(ne,W,le)},merge:function(W,ne){for(var le=+ne.length,ve=0,_e=W.length;le>ve;ve++)W[_e++]=ne[ve];return W.length=_e,W},grep:function(W,ne,le){for(var ve,_e=[],Oe=0,Ve=W.length,Xe=!le;Ve>Oe;Oe++)ve=!ne(W[Oe],Oe),ve!==Xe&&_e.push(W[Oe]);return _e},map:function(W,ne,le){var ve,_e=0,Oe=W.length,Ve=a(W),Xe=[];if(Ve)for(;Oe>_e;_e++)ve=ne(W[_e],_e,le),ve!=null&&Xe.push(ve);else for(_e in W)ve=ne(W[_e],_e,le),ve!=null&&Xe.push(ve);return M.apply([],Xe)},guid:1,proxy:function(W,ne){var le,ve,_e;return typeof ne=="string"&&(le=W[ne],ne=W,W=le),N.isFunction(W)?(ve=x.call(arguments,2),_e=function(){return W.apply(ne||this,ve.concat(x.call(arguments)))},_e.guid=W.guid=W.guid||N.guid++,_e):void 0},now:Date.now,support:B}),N.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(W,ne){C["[object "+ne+"]"]=ne.toLowerCase()});var Z,te=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Y=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,re=N.fn.init=function(W,ne){var le,ve;if(!W)return this;if(typeof W=="string"){if(le=W[0]==="<"&&W[W.length-1]===">"&&W.length>=3?[null,W,null]:Y.exec(W),!le||!le[1]&&ne)return!ne||ne.jquery?(ne||Z).find(W):this.constructor(ne).find(W);if(le[1]){if(ne=ne instanceof N?ne[0]:ne,N.merge(this,N.parseHTML(le[1],ne&&ne.nodeType?ne.ownerDocument||ne:F,!0)),te.test(le[1])&&N.isPlainObject(ne))for(le in ne)N.isFunction(this[le])?this[le](ne[le]):this.attr(le,ne[le]);return this}return ve=F.getElementById(le[2]),ve&&ve.parentNode&&(this.length=1,this[0]=ve),this.context=F,this.selector=W,this}return W.nodeType?(this.context=this[0]=W,this.length=1,this):N.isFunction(W)?typeof Z.ready<"u"?Z.ready(W):W(N):(W.selector!==void 0&&(this.selector=W.selector,this.context=W.context),N.makeArray(W,this))};re.prototype=N.fn,Z=N(F);var fe=/\S+/g,ue={};N.Callbacks=function(W){W=typeof W=="string"?ue[W]||l(W):N.extend({},W);var ne,le,ve,_e,Oe,Ve,Xe=[],rt=!W.once&&[],ht=function(it){for(ne=W.memory&&it,le=!0,Ve=_e||0,_e=0,Oe=Xe.length,ve=!0;Xe&&Oe>Ve;Ve++)if(Xe[Ve].apply(it[0],it[1])===!1&&W.stopOnFalse){ne=!1;break}ve=!1,Xe&&(rt?rt.length&&ht(rt.shift()):ne?Xe=[]:Pt.disable())},Pt={add:function(){if(Xe){var it=Xe.length;(function Ct(Ht){N.each(Ht,function(jr,Lr){var ar=N.type(Lr);ar==="function"?W.unique&&Pt.has(Lr)||Xe.push(Lr):Lr&&Lr.length&&ar!=="string"&&Ct(Lr)})})(arguments),ve?Oe=Xe.length:ne&&(_e=it,ht(ne))}return this},remove:function(){return Xe&&N.each(arguments,function(it,Ct){for(var Ht;(Ht=N.inArray(Ct,Xe,Ht))>-1;)Xe.splice(Ht,1),ve&&(Oe>=Ht&&Oe--,Ve>=Ht&&Ve--)}),this},has:function(it){return it?N.inArray(it,Xe)>-1:!(!Xe||!Xe.length)},empty:function(){return Xe=[],Oe=0,this},disable:function(){return Xe=rt=ne=void 0,this},disabled:function(){return!Xe},lock:function(){return rt=void 0,ne||Pt.disable(),this},locked:function(){return!rt},fireWith:function(it,Ct){return!Xe||le&&!rt||(Ct=Ct||[],Ct=[it,Ct.slice?Ct.slice():Ct],ve?rt.push(Ct):ht(Ct)),this},fire:function(){return Pt.fireWith(this,arguments),this},fired:function(){return!!le}};return Pt},N.extend({Deferred:function(W){var ne=[["resolve","done",N.Callbacks("once memory"),"resolved"],["reject","fail",N.Callbacks("once memory"),"rejected"],["notify","progress",N.Callbacks("memory")]],le="pending",ve={state:function(){return le},always:function(){return _e.done(arguments).fail(arguments),this},then:function(){var Oe=arguments;return N.Deferred(function(Ve){N.each(ne,function(Xe,rt){var ht=N.isFunction(Oe[Xe])&&Oe[Xe];_e[rt[1]](function(){var Pt=ht&&ht.apply(this,arguments);Pt&&N.isFunction(Pt.promise)?Pt.promise().done(Ve.resolve).fail(Ve.reject).progress(Ve.notify):Ve[rt[0]+"With"](this===ve?Ve.promise():this,ht?[Pt]:arguments)})}),Oe=null}).promise()},promise:function(Oe){return Oe!=null?N.extend(Oe,ve):ve}},_e={};return ve.pipe=ve.then,N.each(ne,function(Oe,Ve){var Xe=Ve[2],rt=Ve[3];ve[Ve[1]]=Xe.add,rt&&Xe.add(function(){le=rt},ne[1^Oe][2].disable,ne[2][2].lock),_e[Ve[0]]=function(){return _e[Ve[0]+"With"](this===_e?ve:this,arguments),this},_e[Ve[0]+"With"]=Xe.fireWith}),ve.promise(_e),W&&W.call(_e,_e),_e},when:function(W){var ne,le,ve,_e=0,Oe=x.call(arguments),Ve=Oe.length,Xe=Ve!==1||W&&N.isFunction(W.promise)?Ve:0,rt=Xe===1?W:N.Deferred(),ht=function(Pt,it,Ct){return function(Ht){it[Pt]=this,Ct[Pt]=arguments.length>1?x.call(arguments):Ht,Ct===ne?rt.notifyWith(it,Ct):--Xe||rt.resolveWith(it,Ct)}};if(Ve>1)for(ne=new Array(Ve),le=new Array(Ve),ve=new Array(Ve);Ve>_e;_e++)Oe[_e]&&N.isFunction(Oe[_e].promise)?Oe[_e].promise().done(ht(_e,ve,Oe)).fail(rt.reject).progress(ht(_e,le,ne)):--Xe;return Xe||rt.resolveWith(ve,Oe),rt.promise()}});var ge;N.fn.ready=function(W){return N.ready.promise().done(W),this},N.extend({isReady:!1,readyWait:1,holdReady:function(W){W?N.readyWait++:N.ready(!0)},ready:function(W){(W===!0?--N.readyWait:N.isReady)||(N.isReady=!0,W!==!0&&--N.readyWait>0||(ge.resolveWith(F,[N]),N.fn.triggerHandler&&(N(F).triggerHandler("ready"),N(F).off("ready"))))}}),N.ready.promise=function(W){return ge||(ge=N.Deferred(),F.readyState==="complete"?setTimeout(N.ready):(F.addEventListener("DOMContentLoaded",u,!1),o.addEventListener("load",u,!1))),ge.promise(W)},N.ready.promise();var Se=N.access=function(W,ne,le,ve,_e,Oe,Ve){var Xe=0,rt=W.length,ht=le==null;if(N.type(le)==="object"){_e=!0;for(Xe in le)N.access(W,ne,Xe,le[Xe],!0,Oe,Ve)}else if(ve!==void 0&&(_e=!0,N.isFunction(ve)||(Ve=!0),ht&&(Ve?(ne.call(W,ve),ne=null):(ht=ne,ne=function(Pt,it,Ct){return ht.call(N(Pt),Ct)})),ne))for(;rt>Xe;Xe++)ne(W[Xe],le,Ve?ve:ve.call(W[Xe],Xe,ne(W[Xe],le)));return _e?W:ht?ne.call(W):rt?ne(W[0],le):Oe};N.acceptData=function(W){return W.nodeType===1||W.nodeType===9||!+W.nodeType},c.uid=1,c.accepts=N.acceptData,c.prototype={key:function(W){if(!c.accepts(W))return 0;var ne={},le=W[this.expando];if(!le){le=c.uid++;try{ne[this.expando]={value:le},Object.defineProperties(W,ne)}catch{ne[this.expando]=le,N.extend(W,ne)}}return this.cache[le]||(this.cache[le]={}),le},set:function(W,ne,le){var ve,_e=this.key(W),Oe=this.cache[_e];if(typeof ne=="string")Oe[ne]=le;else if(N.isEmptyObject(Oe))N.extend(this.cache[_e],ne);else for(ve in ne)Oe[ve]=ne[ve];return Oe},get:function(W,ne){var le=this.cache[this.key(W)];return ne===void 0?le:le[ne]},access:function(W,ne,le){var ve;return ne===void 0||ne&&typeof ne=="string"&&le===void 0?(ve=this.get(W,ne),ve!==void 0?ve:this.get(W,N.camelCase(ne))):(this.set(W,ne,le),le!==void 0?le:ne)},remove:function(W,ne){var le,ve,_e,Oe=this.key(W),Ve=this.cache[Oe];if(ne===void 0)this.cache[Oe]={};else for(N.isArray(ne)?ve=ne.concat(ne.map(N.camelCase)):(_e=N.camelCase(ne),ne in Ve?ve=[ne,_e]:(ve=_e,ve=ve in Ve?[ve]:ve.match(fe)||[])),le=ve.length;le--;)delete Ve[ve[le]]},hasData:function(W){return!N.isEmptyObject(this.cache[W[this.expando]]||{})},discard:function(W){W[this.expando]&&delete this.cache[W[this.expando]]}};var xe=new c,De=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ae=/([A-Z])/g;N.extend({hasData:function(W){return data_user.hasData(W)||xe.hasData(W)},data:function(W,ne,le){return data_user.access(W,ne,le)},removeData:function(W,ne){data_user.remove(W,ne)},_data:function(W,ne,le){return xe.access(W,ne,le)},_removeData:function(W,ne){xe.remove(W,ne)}}),N.fn.extend({data:function(W,ne){var le,ve,_e,Oe=this[0],Ve=Oe&&Oe.attributes;if(W===void 0){if(this.length&&(_e=data_user.get(Oe),Oe.nodeType===1&&!xe.get(Oe,"hasDataAttrs"))){for(le=Ve.length;le--;)Ve[le]&&(ve=Ve[le].name,ve.indexOf("data-")===0&&(ve=N.camelCase(ve.slice(5)),f(Oe,ve,_e[ve])));xe.set(Oe,"hasDataAttrs",!0)}return _e}return typeof W=="object"?this.each(function(){data_user.set(this,W)}):Se(this,function(Xe){var rt,ht=N.camelCase(W);if(Oe&&Xe===void 0){if(rt=data_user.get(Oe,W),rt!==void 0||(rt=data_user.get(Oe,ht),rt!==void 0)||(rt=f(Oe,ht,void 0),rt!==void 0))return rt}else this.each(function(){var Pt=data_user.get(this,ht);data_user.set(this,ht,Xe),W.indexOf("-")!==-1&&Pt!==void 0&&data_user.set(this,W,Xe)})},null,ne,arguments.length>1,null,!0)},removeData:function(W){return this.each(function(){data_user.remove(this,W)})}});var ie="undefined",Re=/^key/,Pe=/^(?:mouse|pointer|contextmenu)|click/,ee=/^(?:focusinfocus|focusoutblur)$/,oe=/^([^.]*)(?:\.(.+)|)$/;N.event={global:{},add:function(W,ne,le,ve,_e){var Oe,Ve,Xe,rt,ht,Pt,it,Ct,Ht,jr,Lr,ar=xe.get(W);if(ar)for(le.handler&&(Oe=le,le=Oe.handler,_e=Oe.selector),le.guid||(le.guid=N.guid++),(rt=ar.events)||(rt=ar.events={}),(Ve=ar.handle)||(Ve=ar.handle=function(vl){return typeof N!==ie&&N.event.triggered!==vl.type?N.event.dispatch.apply(W,arguments):void 0}),ne=(ne||"").match(fe)||[""],ht=ne.length;ht--;)Xe=oe.exec(ne[ht])||[],Ht=Lr=Xe[1],jr=(Xe[2]||"").split(".").sort(),Ht&&(it=N.event.special[Ht]||{},Ht=(_e?it.delegateType:it.bindType)||Ht,it=N.event.special[Ht]||{},Pt=N.extend({type:Ht,origType:Lr,data:ve,handler:le,guid:le.guid,selector:_e,needsContext:_e&&N.expr.match.needsContext.test(_e),namespace:jr.join(".")},Oe),(Ct=rt[Ht])||(Ct=rt[Ht]=[],Ct.delegateCount=0,it.setup&&it.setup.call(W,ve,jr,Ve)!==!1||W.addEventListener&&W.addEventListener(Ht,Ve,!1)),it.add&&(it.add.call(W,Pt),Pt.handler.guid||(Pt.handler.guid=le.guid)),_e?Ct.splice(Ct.delegateCount++,0,Pt):Ct.push(Pt),N.event.global[Ht]=!0)},remove:function(W,ne,le,ve,_e){var Oe,Ve,Xe,rt,ht,Pt,it,Ct,Ht,jr,Lr,ar=xe.hasData(W)&&xe.get(W);if(ar&&(rt=ar.events)){for(ne=(ne||"").match(fe)||[""],ht=ne.length;ht--;)if(Xe=oe.exec(ne[ht])||[],Ht=Lr=Xe[1],jr=(Xe[2]||"").split(".").sort(),Ht){for(it=N.event.special[Ht]||{},Ht=(ve?it.delegateType:it.bindType)||Ht,Ct=rt[Ht]||[],Xe=Xe[2]&&new RegExp("(^|\\.)"+jr.join("\\.(?:.*\\.|)")+"(\\.|$)"),Ve=Oe=Ct.length;Oe--;)Pt=Ct[Oe],!_e&&Lr!==Pt.origType||le&&le.guid!==Pt.guid||Xe&&!Xe.test(Pt.namespace)||ve&&ve!==Pt.selector&&(ve!=="**"||!Pt.selector)||(Ct.splice(Oe,1),Pt.selector&&Ct.delegateCount--,it.remove&&it.remove.call(W,Pt));Ve&&!Ct.length&&(it.teardown&&it.teardown.call(W,jr,ar.handle)!==!1||N.removeEvent(W,Ht,ar.handle),delete rt[Ht])}else for(Ht in rt)N.event.remove(W,Ht+ne[ht],le,ve,!0);N.isEmptyObject(rt)&&(delete ar.handle,xe.remove(W,"events"))}},trigger:function(W,ne,le,ve){var _e,Oe,Ve,Xe,rt,ht,Pt,it=[le||F],Ct=R.call(W,"type")?W.type:W,Ht=R.call(W,"namespace")?W.namespace.split("."):[];if(Oe=Ve=le=le||F,le.nodeType!==3&&le.nodeType!==8&&!ee.test(Ct+N.event.triggered)&&(Ct.indexOf(".")>=0&&(Ht=Ct.split("."),Ct=Ht.shift(),Ht.sort()),rt=Ct.indexOf(":")<0&&"on"+Ct,W=W[N.expando]?W:new N.Event(Ct,typeof W=="object"&&W),W.isTrigger=ve?2:3,W.namespace=Ht.join("."),W.namespace_re=W.namespace?new RegExp("(^|\\.)"+Ht.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,W.result=void 0,W.target||(W.target=le),ne=ne==null?[W]:N.makeArray(ne,[W]),Pt=N.event.special[Ct]||{},ve||!Pt.trigger||Pt.trigger.apply(le,ne)!==!1)){if(!ve&&!Pt.noBubble&&!N.isWindow(le)){for(Xe=Pt.delegateType||Ct,ee.test(Xe+Ct)||(Oe=Oe.parentNode);Oe;Oe=Oe.parentNode)it.push(Oe),Ve=Oe;Ve===(le.ownerDocument||F)&&it.push(Ve.defaultView||Ve.parentWindow||o)}for(_e=0;(Oe=it[_e++])&&!W.isPropagationStopped();)W.type=_e>1?Xe:Pt.bindType||Ct,ht=(xe.get(Oe,"events")||{})[W.type]&&xe.get(Oe,"handle"),ht&&ht.apply(Oe,ne),ht=rt&&Oe[rt],ht&&ht.apply&&N.acceptData(Oe)&&(W.result=ht.apply(Oe,ne),W.result===!1&&W.preventDefault());return W.type=Ct,ve||W.isDefaultPrevented()||Pt._default&&Pt._default.apply(it.pop(),ne)!==!1||!N.acceptData(le)||rt&&N.isFunction(le[Ct])&&!N.isWindow(le)&&(Ve=le[rt],Ve&&(le[rt]=null),N.event.triggered=Ct,le[Ct](),N.event.triggered=void 0,Ve&&(le[rt]=Ve)),W.result}},dispatch:function(W){W=N.event.fix(W);var ne,le,ve,_e,Oe,Ve=[],Xe=x.call(arguments),rt=(xe.get(this,"events")||{})[W.type]||[],ht=N.event.special[W.type]||{};if(Xe[0]=W,W.delegateTarget=this,!ht.preDispatch||ht.preDispatch.call(this,W)!==!1){for(Ve=N.event.handlers.call(this,W,rt),ne=0;(_e=Ve[ne++])&&!W.isPropagationStopped();)for(W.currentTarget=_e.elem,le=0;(Oe=_e.handlers[le++])&&!W.isImmediatePropagationStopped();)W.namespace_re&&!W.namespace_re.test(Oe.namespace)||(W.handleObj=Oe,W.data=Oe.data,ve=((N.event.special[Oe.origType]||{}).handle||Oe.handler).apply(_e.elem,Xe),ve!==void 0&&(W.result=ve)===!1&&(W.preventDefault(),W.stopPropagation()));return ht.postDispatch&&ht.postDispatch.call(this,W),W.result}},handlers:function(W,ne){var le,ve,_e,Oe,Ve=[],Xe=ne.delegateCount,rt=W.target;if(Xe&&rt.nodeType&&(!W.button||W.type!=="click")){for(;rt!==this;rt=rt.parentNode||this)if(rt.disabled!==!0||W.type!=="click"){for(ve=[],le=0;Xe>le;le++)Oe=ne[le],_e=Oe.selector+" ",ve[_e]===void 0&&(ve[_e]=Oe.needsContext?N(_e,this).index(rt)>=0:N.find(_e,this,null,[rt]).length),ve[_e]&&ve.push(Oe);ve.length&&Ve.push({elem:rt,handlers:ve})}}return Xe<ne.length&&Ve.push({elem:this,handlers:ne.slice(Xe)}),Ve},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(W,ne){return W.which==null&&(W.which=ne.charCode!=null?ne.charCode:ne.keyCode),W}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(W,ne){var le,ve,_e,Oe=ne.button;return W.pageX==null&&ne.clientX!=null&&(le=W.target.ownerDocument||F,ve=le.documentElement,_e=le.body,W.pageX=ne.clientX+(ve&&ve.scrollLeft||_e&&_e.scrollLeft||0)-(ve&&ve.clientLeft||_e&&_e.clientLeft||0),W.pageY=ne.clientY+(ve&&ve.scrollTop||_e&&_e.scrollTop||0)-(ve&&ve.clientTop||_e&&_e.clientTop||0)),W.which||Oe===void 0||(W.which=1&Oe?1:2&Oe?3:4&Oe?2:0),W}},fix:function(W){if(W[N.expando])return W;var ne,le,ve,_e=W.type,Oe=W,Ve=this.fixHooks[_e];for(Ve||(this.fixHooks[_e]=Ve=Pe.test(_e)?this.mouseHooks:Re.test(_e)?this.keyHooks:{}),ve=Ve.props?this.props.concat(Ve.props):this.props,W=new N.Event(Oe),ne=ve.length;ne--;)le=ve[ne],W[le]=Oe[le];return W.target||(W.target=F),W.target.nodeType===3&&(W.target=W.target.parentNode),Ve.filter?Ve.filter(W,Oe):W},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==m()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===m()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return this.type==="checkbox"&&this.click&&N.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(W){return N.nodeName(W.target,"a")}},beforeunload:{postDispatch:function(W){W.result!==void 0&&W.originalEvent&&(W.originalEvent.returnValue=W.result)}}},simulate:function(W,ne,le,ve){var _e=N.extend(new N.Event,le,{type:W,isSimulated:!0,originalEvent:{}});ve?N.event.trigger(_e,null,ne):N.event.dispatch.call(ne,_e),_e.isDefaultPrevented()&&le.preventDefault()}},N.removeEvent=function(W,ne,le){W.removeEventListener&&W.removeEventListener(ne,le,!1)},N.Event=function(W,ne){return this instanceof N.Event?(W&&W.type?(this.originalEvent=W,this.type=W.type,this.isDefaultPrevented=W.defaultPrevented||W.defaultPrevented===void 0&&W.returnValue===!1?d:h):this.type=W,ne&&N.extend(this,ne),this.timeStamp=W&&W.timeStamp||N.now(),void(this[N.expando]=!0)):new N.Event(W,ne)},N.Event.prototype={isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h,preventDefault:function(){var W=this.originalEvent;this.isDefaultPrevented=d,W&&W.preventDefault&&W.preventDefault()},stopPropagation:function(){var W=this.originalEvent;this.isPropagationStopped=d,W&&W.stopPropagation&&W.stopPropagation()},stopImmediatePropagation:function(){var W=this.originalEvent;this.isImmediatePropagationStopped=d,W&&W.stopImmediatePropagation&&W.stopImmediatePropagation(),this.stopPropagation()}},N.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(W,ne){N.event.special[W]={delegateType:ne,bindType:ne,handle:function(le){var ve,_e=this,Oe=le.relatedTarget,Ve=le.handleObj;return Oe&&(Oe===_e||N.contains(_e,Oe))||(le.type=Ve.origType,ve=Ve.handler.apply(this,arguments),le.type=ne),ve}}}),B.focusinBubbles||N.each({focus:"focusin",blur:"focusout"},function(W,ne){var le=function(ve){N.event.simulate(ne,ve.target,N.event.fix(ve),!0)};N.event.special[ne]={setup:function(){var ve=this.ownerDocument||this,_e=xe.access(ve,ne);_e||ve.addEventListener(W,le,!0),xe.access(ve,ne,(_e||0)+1)},teardown:function(){var ve=this.ownerDocument||this,_e=xe.access(ve,ne)-1;_e?xe.access(ve,ne,_e):(ve.removeEventListener(W,le,!0),xe.remove(ve,ne))}}}),N.fn.extend({on:function(W,ne,le,ve,_e){var Oe,Ve;if(typeof W=="object"){typeof ne!="string"&&(le=le||ne,ne=void 0);for(Ve in W)this.on(Ve,ne,le,W[Ve],_e);return this}if(le==null&&ve==null?(ve=ne,le=ne=void 0):ve==null&&(typeof ne=="string"?(ve=le,le=void 0):(ve=le,le=ne,ne=void 0)),ve===!1)ve=h;else if(!ve)return this;return _e===1&&(Oe=ve,ve=function(Xe){return N().off(Xe),Oe.apply(this,arguments)},ve.guid=Oe.guid||(Oe.guid=N.guid++)),this.each(function(){N.event.add(this,W,ve,le,ne)})},one:function(W,ne,le,ve){return this.on(W,ne,le,ve,1)},off:function(W,ne,le){var ve,_e;if(W&&W.preventDefault&&W.handleObj)return ve=W.handleObj,N(W.delegateTarget).off(ve.namespace?ve.origType+"."+ve.namespace:ve.origType,ve.selector,ve.handler),this;if(typeof W=="object"){for(_e in W)this.off(_e,ne,W[_e]);return this}return ne!==!1&&typeof ne!="function"||(le=ne,ne=void 0),le===!1&&(le=h),this.each(function(){N.event.remove(this,W,le,ne)})},trigger:function(W,ne){return this.each(function(){N.event.trigger(W,ne,this)})},triggerHandler:function(W,ne){var le=this[0];return le?N.event.trigger(W,ne,le,!0):void 0}});var Me=N.now(),se=/\?/;N.parseJSON=function(W){return JSON.parse(W+"")},N.parseXML=function(W){var ne,le;if(!W||typeof W!="string")return null;try{le=new DOMParser,ne=le.parseFromString(W,"text/xml")}catch{ne=void 0}return ne&&!ne.getElementsByTagName("parsererror").length||N.error("Invalid XML: "+W),ne};var G,j,he=/#.*$/,Ce=/([?&])_=[^&]*/,q=/^(.*?):[ \t]*([^\r\n]*)$/gm,J=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ye=/^(?:GET|HEAD)$/,we=/^\/\//,ke=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Fe={},He={},Ie="*/".concat("*");try{j=location.href}catch{j=F.createElement("a"),j.href="",j=j.href}G=ke.exec(j.toLowerCase())||[],N.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:j,type:"GET",isLocal:J.test(G[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ie,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":N.parseJSON,"text xml":N.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(W,ne){return ne?p(p(W,N.ajaxSettings),ne):p(N.ajaxSettings,W)},ajaxPrefilter:g(Fe),ajaxTransport:g(He),ajax:function(W,ne){function le(Ue,$e,We,xt){var _t,It,ft,Et,zt,Ot=$e;Fi!==2&&(Fi=2,Xe&&clearTimeout(Xe),ve=void 0,Oe=xt||"",Le.readyState=Ue>0?4:0,_t=Ue>=200&&300>Ue||Ue===304,We&&(Et=w(it,Le,We)),Et=b(it,Et,Le,_t),_t?(it.ifModified&&(zt=Le.getResponseHeader("Last-Modified"),zt&&(N.lastModified[_e]=zt),zt=Le.getResponseHeader("etag"),zt&&(N.etag[_e]=zt)),Ue===204||it.type==="HEAD"?Ot="nocontent":Ue===304?Ot="notmodified":(Ot=Et.state,It=Et.data,ft=Et.error,_t=!ft)):(ft=Ot,!Ue&&Ot||(Ot="error",0>Ue&&(Ue=0))),Le.status=Ue,Le.statusText=($e||Ot)+"",_t?jr.resolveWith(Ct,[It,Ot,Le]):jr.rejectWith(Ct,[Le,Ot,ft]),Le.statusCode(ar),ar=void 0,ht&&Ht.trigger(_t?"ajaxSuccess":"ajaxError",[Le,it,_t?It:ft]),Lr.fireWith(Ct,[Le,Ot]),ht&&(Ht.trigger("ajaxComplete",[Le,it]),--N.active||N.event.trigger("ajaxStop")))}typeof W=="object"&&(ne=W,W=void 0),ne=ne||{};var ve,_e,Oe,Ve,Xe,rt,ht,Pt,it=N.ajaxSetup({},ne),Ct=it.context||it,Ht=it.context&&(Ct.nodeType||Ct.jquery)?N(Ct):N.event,jr=N.Deferred(),Lr=N.Callbacks("once memory"),ar=it.statusCode||{},vl={},_c={},Fi=0,pe="canceled",Le={readyState:0,getResponseHeader:function(Ue){var $e;if(Fi===2){if(!Ve)for(Ve={};$e=q.exec(Oe);)Ve[$e[1].toLowerCase()]=$e[2];$e=Ve[Ue.toLowerCase()]}return $e??null},getAllResponseHeaders:function(){return Fi===2?Oe:null},setRequestHeader:function(Ue,$e){var We=Ue.toLowerCase();return Fi||(Ue=_c[We]=_c[We]||Ue,vl[Ue]=$e),this},overrideMimeType:function(Ue){return Fi||(it.mimeType=Ue),this},statusCode:function(Ue){var $e;if(Ue)if(2>Fi)for($e in Ue)ar[$e]=[ar[$e],Ue[$e]];else Le.always(Ue[Le.status]);return this},abort:function(Ue){var $e=Ue||pe;return ve&&ve.abort($e),le(0,$e),this}};if(jr.promise(Le).complete=Lr.add,Le.success=Le.done,Le.error=Le.fail,it.url=((W||it.url||j)+"").replace(he,"").replace(we,G[1]+"//"),it.type=ne.method||ne.type||it.method||it.type,it.dataTypes=N.trim(it.dataType||"*").toLowerCase().match(fe)||[""],it.crossDomain==null&&(rt=ke.exec(it.url.toLowerCase()),it.crossDomain=!(!rt||rt[1]===G[1]&&rt[2]===G[2]&&(rt[3]||(rt[1]==="http:"?"80":"443"))===(G[3]||(G[1]==="http:"?"80":"443")))),it.data&&it.processData&&typeof it.data!="string"&&(it.data=N.param(it.data,it.traditional)),y(Fe,it,ne,Le),Fi===2)return Le;ht=it.global,ht&&N.active++===0&&N.event.trigger("ajaxStart"),it.type=it.type.toUpperCase(),it.hasContent=!ye.test(it.type),_e=it.url,it.hasContent||(it.data&&(_e=it.url+=(se.test(_e)?"&":"?")+it.data,delete it.data),it.cache===!1&&(it.url=Ce.test(_e)?_e.replace(Ce,"$1_="+Me++):_e+(se.test(_e)?"&":"?")+"_="+Me++)),it.ifModified&&(N.lastModified[_e]&&Le.setRequestHeader("If-Modified-Since",N.lastModified[_e]),N.etag[_e]&&Le.setRequestHeader("If-None-Match",N.etag[_e])),(it.data&&it.hasContent&&it.contentType!==!1||ne.contentType)&&Le.setRequestHeader("Content-Type",it.contentType),Le.setRequestHeader("Accept",it.dataTypes[0]&&it.accepts[it.dataTypes[0]]?it.accepts[it.dataTypes[0]]+(it.dataTypes[0]!=="*"?", "+Ie+"; q=0.01":""):it.accepts["*"]);for(Pt in it.headers)Le.setRequestHeader(Pt,it.headers[Pt]);if(it.beforeSend&&(it.beforeSend.call(Ct,Le,it)===!1||Fi===2))return Le.abort();pe="abort";for(Pt in{success:1,error:1,complete:1})Le[Pt](it[Pt]);if(ve=y(He,it,ne,Le)){Le.readyState=1,ht&&Ht.trigger("ajaxSend",[Le,it]),it.async&&it.timeout>0&&(Xe=setTimeout(function(){Le.abort("timeout")},it.timeout));try{Fi=1,ve.send(vl,le)}catch(Ue){if(!(2>Fi))throw Ue;le(-1,Ue)}}else le(-1,"No Transport");return Le},getJSON:function(W,ne,le){return N.get(W,ne,le,"json")},getScript:function(W,ne){return N.get(W,void 0,ne,"script")}}),N.each(["get","post"],function(W,ne){N[ne]=function(le,ve,_e,Oe){return N.isFunction(ve)&&(Oe=Oe||_e,_e=ve,ve=void 0),N.ajax({url:le,type:ne,dataType:Oe,data:ve,success:_e})}}),N.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(W,ne){N.fn[ne]=function(le){return this.on(ne,le)}});var Ze=/%20/g,qe=/\[\]$/,lt=/\r?\n/g,at=/^(?:submit|button|image|reset|file)$/i,Je=/^(?:input|select|textarea|keygen)/i;N.param=function(W,ne){var le,ve=[],_e=function(Oe,Ve){Ve=N.isFunction(Ve)?Ve():Ve??"",ve[ve.length]=encodeURIComponent(Oe)+"="+encodeURIComponent(Ve)};if(ne===void 0&&(ne=N.ajaxSettings&&N.ajaxSettings.traditional),N.isArray(W)||W.jquery&&!N.isPlainObject(W))N.each(W,function(){_e(this.name,this.value)});else for(le in W)v(le,W[le],ne,_e);return ve.join("&").replace(Ze,"+")},N.fn.extend({serialize:function(){return N.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var W=N.prop(this,"elements");return W?N.makeArray(W):this}).filter(function(){var W=this.type;return this.name&&!N(this).is(":disabled")&&Je.test(this.nodeName)&&!at.test(W)&&(this.checked||!rcheckableType.test(W))}).map(function(W,ne){var le=N(this).val();return le==null?null:N.isArray(le)?N.map(le,function(ve){return{name:ne.name,value:ve.replace(lt,`\r
`)}}):{name:ne.name,value:le.replace(lt,`\r
`)}}).get()}}),N.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch{}};var Ee=0,$={},ce={0:200,1223:204},Ne=N.ajaxSettings.xhr();o.ActiveXObject&&N(o).on("unload",function(){for(var W in $)$[W]()}),B.cors=!!Ne&&"withCredentials"in Ne,B.ajax=Ne=!!Ne,N.ajaxTransport(function(W){var ne;return B.cors||Ne&&!W.crossDomain?{send:function(le,ve){var _e,Oe=W.xhr(),Ve=++Ee;if(Oe.open(W.type,W.url,W.async,W.username,W.password),W.xhrFields)for(_e in W.xhrFields)Oe[_e]=W.xhrFields[_e];W.mimeType&&Oe.overrideMimeType&&Oe.overrideMimeType(W.mimeType),W.crossDomain||le["X-Requested-With"]||(le["X-Requested-With"]="XMLHttpRequest");for(_e in le)Oe.setRequestHeader(_e,le[_e]);ne=function(Xe){return function(){ne&&(delete $[Ve],ne=Oe.onload=Oe.onerror=null,Xe==="abort"?Oe.abort():Xe==="error"?ve(Oe.status,Oe.statusText):ve(ce[Oe.status]||Oe.status,Oe.statusText,typeof Oe.responseText=="string"?{text:Oe.responseText}:void 0,Oe.getAllResponseHeaders()))}},Oe.onload=ne(),Oe.onerror=ne("error"),ne=$[Ve]=ne("abort");try{Oe.send(W.hasContent&&W.data||null)}catch(Xe){if(ne)throw Xe}},abort:function(){ne&&ne()}}:void 0}),N.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(W){return N.globalEval(W),W}}}),N.ajaxPrefilter("script",function(W){W.cache===void 0&&(W.cache=!1),W.crossDomain&&(W.type="GET")}),N.ajaxTransport("script",function(W){if(W.crossDomain){var ne,le;return{send:function(ve,_e){ne=N("<script>").prop({async:!0,charset:W.scriptCharset,src:W.url}).on("load error",le=function(Oe){ne.remove(),le=null,Oe&&_e(Oe.type==="error"?404:200,Oe.type)}),F.head.appendChild(ne[0])},abort:function(){le&&le()}}}});var Ge=[],de=/(=)\?(?=&|$)|\?\?/;N.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var W=Ge.pop()||N.expando+"_"+Me++;return this[W]=!0,W}}),N.ajaxPrefilter("json jsonp",function(W,ne,le){var ve,_e,Oe,Ve=W.jsonp!==!1&&(de.test(W.url)?"url":typeof W.data=="string"&&!(W.contentType||"").indexOf("application/x-www-form-urlencoded")&&de.test(W.data)&&"data");return Ve||W.dataTypes[0]==="jsonp"?(ve=W.jsonpCallback=N.isFunction(W.jsonpCallback)?W.jsonpCallback():W.jsonpCallback,Ve?W[Ve]=W[Ve].replace(de,"$1"+ve):W.jsonp!==!1&&(W.url+=(se.test(W.url)?"&":"?")+W.jsonp+"="+ve),W.converters["script json"]=function(){return Oe||N.error(ve+" was not called"),Oe[0]},W.dataTypes[0]="json",_e=o[ve],o[ve]=function(){Oe=arguments},le.always(function(){o[ve]=_e,W[ve]&&(W.jsonpCallback=ne.jsonpCallback,Ge.push(ve)),Oe&&N.isFunction(_e)&&_e(Oe[0]),Oe=_e=void 0}),"script"):void 0}),N.parseHTML=function(W,ne,le){if(!W||typeof W!="string")return null;typeof ne=="boolean"&&(le=ne,ne=!1),ne=ne||F;var ve=te.exec(W),_e=!le&&[];return ve?[ne.createElement(ve[1])]:(ve=N.buildFragment([W],ne,_e),_e&&_e.length&&N(_e).remove(),N.merge([],ve.childNodes))};var Ye=N.fn.load;return N.fn.load=function(W,ne,le){if(typeof W!="string"&&Ye)return Ye.apply(this,arguments);var ve,_e,Oe,Ve=this,Xe=W.indexOf(" ");return Xe>=0&&(ve=N.trim(W.slice(Xe)),W=W.slice(0,Xe)),N.isFunction(ne)?(le=ne,ne=void 0):ne&&typeof ne=="object"&&(_e="POST"),Ve.length>0&&N.ajax({url:W,type:_e,dataType:"html",data:ne}).done(function(rt){Oe=arguments,Ve.html(ve?N("<div>").append(N.parseHTML(rt)).find(ve):rt)}).complete(le&&function(rt,ht){Ve.each(le,Oe||[rt.responseText,ht,rt])}),this},N.noConflict=function(){},N})},{}],12:[function(t,r,i){r.exports=function(o){return{reload:function(){return o.location.reload()},getHash:function(){return o.location.hash},setHash:function(s){return o.location.hash=s},changeHref:function(s){return o.location.href=s}}}},{}],13:[function(t,r,i){var o;o=function(s){var a;return a=localStorage.getItem("oauthio_cache"),a=a?JSON.parse(a):{},s(a,function(){return localStorage.setItem("oauthio_cache",JSON.stringify(a))})},r.exports={init:function(s,a){return this.config=s,this.document=a},active:function(){return typeof localStorage<"u"&&localStorage!==null},create:function(s,a,l){var u;this.erase(s),u=new Date,localStorage.setItem(s,a),o(function(c,f){return c[s]=l?u.getTime()+1e3*(l||1200):!1,f()})},read:function(s){return o(function(a,l){return a[s]==null?null:a[s]===!1?localStorage.getItem(s):new Date().getTime()>a[s]?(localStorage.removeItem(s),delete a[s],l(),null):localStorage.getItem(s)})},erase:function(s){return o(function(a,l){return localStorage.removeItem(s),delete a[s],l()})},eraseFrom:function(s){o(function(a,l){var u,c,f,d;for(u=Object.keys(a),c=0,f=u.length;f>c;c++)d=u[c],d.substr(0,s.length)===s&&(localStorage.removeItem(d),delete a[d]);return l()})}}},{}],14:[function(t,r,i){var o,s;s=0,o="",r.exports={hex_sha1:function(a){return this.rstr2hex(this.rstr_sha1(this.str2rstr_utf8(a)))},b64_sha1:function(a){return this.rstr2b64(this.rstr_sha1(this.str2rstr_utf8(a)))},any_sha1:function(a,l){return this.rstr2any(this.rstr_sha1(this.str2rstr_utf8(a)),l)},hex_hmac_sha1:function(a,l){return this.rstr2hex(this.rstr_hmac_sha1(this.str2rstr_utf8(a),this.str2rstr_utf8(l)))},b64_hmac_sha1:function(a,l){return this.rstr2b64(this.rstr_hmac_sha1(this.str2rstr_utf8(a),this.str2rstr_utf8(l)))},any_hmac_sha1:function(a,l,u){return this.rstr2any(this.rstr_hmac_sha1(this.str2rstr_utf8(a),this.str2rstr_utf8(l)),u)},sha1_vm_test:function(){return thishex_sha1("abc").toLowerCase()==="a9993e364706816aba3e25717850c26c9cd0d89d"},rstr_sha1:function(a){return this.binb2rstr(this.binb_sha1(this.rstr2binb(a),8*a.length))},rstr_hmac_sha1:function(a,l){var u,c,f,d,h;for(u=this.rstr2binb(a),u.length>16&&(u=this.binb_sha1(u,8*a.length)),d=Array(16),h=Array(16),f=0;16>f;)d[f]=909522486^u[f],h[f]=1549556828^u[f],f++;return c=this.binb_sha1(d.concat(this.rstr2binb(l)),512+8*l.length),this.binb2rstr(this.binb_sha1(h.concat(c),672))},rstr2hex:function(a){var l,u,c,f;for(l=s?"0123456789ABCDEF":"0123456789abcdef",c="",f=void 0,u=0;u<a.length;)f=a.charCodeAt(u),c+=l.charAt(f>>>4&15)+l.charAt(15&f),u++;return c},rstr2b64:function(a){var l,u,c,f,d,h;for(d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f="",c=a.length,l=0;c>l;){for(h=a.charCodeAt(l)<<16|(c>l+1?a.charCodeAt(l+1)<<8:0)|(c>l+2?a.charCodeAt(l+2):0),u=0;4>u;)f+=8*l+6*u>8*a.length?o:d.charAt(h>>>6*(3-u)&63),u++;l+=3}return f},rstr2any:function(a,l){var u,c,f,d,h,m,g,y,p;for(c=l.length,y=Array(),d=void 0,m=void 0,p=void 0,g=void 0,u=Array(Math.ceil(a.length/2)),d=0;d<u.length;)u[d]=a.charCodeAt(2*d)<<8|a.charCodeAt(2*d+1),d++;for(;u.length>0;){for(g=Array(),p=0,d=0;d<u.length;)p=(p<<16)+u[d],m=Math.floor(p/c),p-=m*c,(g.length>0||m>0)&&(g[g.length]=m),d++;y[y.length]=p,u=g}for(h="",d=y.length-1;d>=0;)h+=l.charAt(y[d]),d--;for(f=Math.ceil(8*a.length/(Math.log(l.length)/Math.log(2))),d=h.length;f>d;)h=l[0]+h,d++;return h},str2rstr_utf8:function(a){var l,u,c,f;for(u="",l=-1,c=void 0,f=void 0;++l<a.length;)c=a.charCodeAt(l),f=l+1<a.length?a.charCodeAt(l+1):0,c>=55296&&56319>=c&&f>=56320&&57343>=f&&(c=65536+((1023&c)<<10)+(1023&f),l++),127>=c?u+=String.fromCharCode(c):2047>=c?u+=String.fromCharCode(192|c>>>6&31,128|63&c):65535>=c?u+=String.fromCharCode(224|c>>>12&15,128|c>>>6&63,128|63&c):2097151>=c&&(u+=String.fromCharCode(240|c>>>18&7,128|c>>>12&63,128|c>>>6&63,128|63&c));return u},str2rstr_utf16le:function(a){var l,u;for(u="",l=0;l<a.length;)u+=String.fromCharCode(255&a.charCodeAt(l),a.charCodeAt(l)>>>8&255),l++;return u},str2rstr_utf16be:function(a){var l,u;for(u="",l=0;l<a.length;)u+=String.fromCharCode(a.charCodeAt(l)>>>8&255,255&a.charCodeAt(l)),l++;return u},rstr2binb:function(a){var l,u;for(u=Array(a.length>>2),l=0;l<u.length;)u[l]=0,l++;for(l=0;l<8*a.length;)u[l>>5]|=(255&a.charCodeAt(l/8))<<24-l%32,l+=8;return u},binb2rstr:function(a){var l,u;for(u="",l=0;l<32*a.length;)u+=String.fromCharCode(a[l>>5]>>>24-l%32&255),l+=8;return u},binb_sha1:function(a,l){var u,c,f,d,h,m,g,y,p,w,b,v,S,x;for(a[l>>5]|=128<<24-l%32,a[(l+64>>9<<4)+15]=l,x=Array(80),u=1732584193,c=-271733879,f=-1732584194,d=271733878,h=-1009589776,m=0;m<a.length;){for(y=u,p=c,w=f,b=d,v=h,g=0;80>g;)16>g?x[g]=a[m+g]:x[g]=this.bit_rol(x[g-3]^x[g-8]^x[g-14]^x[g-16],1),S=this.safe_add(this.safe_add(this.bit_rol(u,5),this.sha1_ft(g,c,f,d)),this.safe_add(this.safe_add(h,x[g]),this.sha1_kt(g))),h=d,d=f,f=this.bit_rol(c,30),c=u,u=S,g++;u=this.safe_add(u,y),c=this.safe_add(c,p),f=this.safe_add(f,w),d=this.safe_add(d,b),h=this.safe_add(h,v),m+=16}return Array(u,c,f,d,h)},sha1_ft:function(a,l,u,c){return 20>a?l&u|~l&c:40>a?l^u^c:60>a?l&u|l&c|u&c:l^u^c},sha1_kt:function(a){return 20>a?1518500249:40>a?1859775393:60>a?-1894007588:-899497514},safe_add:function(a,l){var u,c;return u=(65535&a)+(65535&l),c=(a>>16)+(l>>16)+(u>>16),c<<16|65535&u},bit_rol:function(a,l){return a<<l|a>>>32-l},create_hash:function(){var a;return a=this.b64_sha1(new Date().getTime()+":"+Math.floor(9999999*Math.random())),a.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"")}}},{}],15:[function(t,r,i){r.exports=function(o){return{getAbsUrl:function(s){var a;return s.match(/^.{2,5}:\/\//)?s:s[0]==="/"?o.location.protocol+"//"+o.location.host+s:(a=o.location.protocol+"//"+o.location.host+o.location.pathname,a[a.length-1]!=="/"&&s[0]!=="#"?a+"/"+s:a+s)},replaceParam:function(s,a,l){return s=s.replace(/\{\{(.*?)\}\}/g,function(u,c){return a[c]||""}),l&&(s=s.replace(/\{(.*?)\}/g,function(u,c){return l[c]||""})),s}}}},{}]},{},[8])(8)})})(fce);/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Py(){return Py=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Py.apply(this,arguments)}var af;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(af||(af={}));const pB="popstate";function dce(n){n===void 0&&(n={});function e(r,i){let{pathname:o,search:s,hash:a}=r.location;return vN("",{pathname:o,search:s,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:iE(i)}return pce(e,t,null,n)}function ci(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function sX(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hce(){return Math.random().toString(36).substr(2,8)}function mB(n,e){return{usr:n.state,key:n.key,idx:e}}function vN(n,e,t,r){return t===void 0&&(t=null),Py({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Wg(e):e,{state:t,key:e&&e.key||r||hce()})}function iE(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Wg(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function pce(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a=af.Pop,l=null,u=c();u==null&&(u=0,s.replaceState(Py({},s.state,{idx:u}),""));function c(){return(s.state||{idx:null}).idx}function f(){a=af.Pop;let y=c(),p=y==null?null:y-u;u=y,l&&l({action:a,location:g.location,delta:p})}function d(y,p){a=af.Push;let w=vN(g.location,y,p);u=c()+1;let b=mB(w,u),v=g.createHref(w);try{s.pushState(b,"",v)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(v)}o&&l&&l({action:a,location:g.location,delta:1})}function h(y,p){a=af.Replace;let w=vN(g.location,y,p);u=c();let b=mB(w,u),v=g.createHref(w);s.replaceState(b,"",v),o&&l&&l({action:a,location:g.location,delta:0})}function m(y){let p=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof y=="string"?y:iE(y);return w=w.replace(/ $/,"%20"),ci(p,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,p)}let g={get action(){return a},get location(){return n(i,s)},listen(y){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(pB,f),l=y,()=>{i.removeEventListener(pB,f),l=null}},createHref(y){return e(i,y)},createURL:m,encodeLocation(y){let p=m(y);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:d,replace:h,go(y){return s.go(y)}};return g}var gB;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(gB||(gB={}));function mce(n,e,t){return t===void 0&&(t="/"),gce(n,e,t,!1)}function gce(n,e,t,r){let i=typeof e=="string"?Wg(e):e,o=Ak(i.pathname||"/",t);if(o==null)return null;let s=aX(n);vce(s);let a=null;for(let l=0;a==null&&l<s.length;++l){let u=Tce(o);a=Cce(s[l],u,r)}return a}function aX(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(o,s,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};l.relativePath.startsWith("/")&&(ci(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Ef([r,l.relativePath]),c=t.concat(l);o.children&&o.children.length>0&&(ci(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),aX(o.children,e,c,u)),!(o.path==null&&!o.index)&&e.push({path:u,score:Ece(u,o.index),routesMeta:c})};return n.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let l of lX(o.path))i(o,s,l)}),e}function lX(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=lX(r.join("/")),a=[];return a.push(...s.map(l=>l===""?o:[o,l].join("/"))),i&&a.push(...s),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function vce(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Mce(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const yce=/^:[\w-]+$/,xce=3,bce=2,wce=1,Sce=10,_ce=-2,vB=n=>n==="*";function Ece(n,e){let t=n.split("/"),r=t.length;return t.some(vB)&&(r+=_ce),e&&(r+=bce),t.filter(i=>!vB(i)).reduce((i,o)=>i+(yce.test(o)?xce:o===""?wce:Sce),r)}function Mce(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function Cce(n,e,t){let{routesMeta:r}=n,i={},o="/",s=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=o==="/"?e:e.slice(o.length)||"/",f=yB({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),d=l.route;if(!f&&u&&t&&!r[r.length-1].route.index&&(f=yB({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!f)return null;Object.assign(i,f.params),s.push({params:i,pathname:Ef([o,f.pathname]),pathnameBase:Rce(Ef([o,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(o=Ef([o,f.pathnameBase]))}return s}function yB(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=Ace(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let g=a[f]||"";s=o.slice(0,o.length-g.length).replace(/(.)\/+$/,"$1")}const m=a[f];return h&&!m?u[d]=void 0:u[d]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:s,pattern:n}}function Ace(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),sX(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Tce(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return sX(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Ak(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function Dce(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Wg(n):n;return{pathname:t?t.startsWith("/")?t:Nce(t,e):e,search:Oce(r),hash:kce(i)}}function Nce(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function sT(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Pce(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function uX(n,e){let t=Pce(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function cX(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Wg(n):(i=Py({},n),ci(!i.pathname||!i.pathname.includes("?"),sT("?","pathname","search",i)),ci(!i.pathname||!i.pathname.includes("#"),sT("#","pathname","hash",i)),ci(!i.search||!i.search.includes("#"),sT("#","search","hash",i)));let o=n===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=t;else{let f=e.length-1;if(!r&&s.startsWith("..")){let d=s.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?e[f]:"/"}let l=Dce(i,a),u=s&&s!=="/"&&s.endsWith("/"),c=(o||s===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Ef=n=>n.join("/").replace(/\/\/+/g,"/"),Rce=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Oce=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,kce=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Ice(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const fX=["post","put","patch","delete"];new Set(fX);const Lce=["get",...fX];new Set(Lce);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ry(){return Ry=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ry.apply(this,arguments)}const Tk=z.createContext(null),Fce=z.createContext(null),Kh=z.createContext(null),JM=z.createContext(null),nd=z.createContext({outlet:null,matches:[],isDataRoute:!1}),dX=z.createContext(null);function Bce(n,e){let{relative:t}=e===void 0?{}:e;H1()||ci(!1);let{basename:r,navigator:i}=z.useContext(Kh),{hash:o,pathname:s,search:a}=mX(n,{relative:t}),l=s;return r!=="/"&&(l=s==="/"?r:Ef([r,s])),i.createHref({pathname:l,search:a,hash:o})}function H1(){return z.useContext(JM)!=null}function QM(){return H1()||ci(!1),z.useContext(JM).location}function hX(n){z.useContext(Kh).static||z.useLayoutEffect(n)}function rd(){let{isDataRoute:n}=z.useContext(nd);return n?Zce():zce()}function zce(){H1()||ci(!1);let n=z.useContext(Tk),{basename:e,future:t,navigator:r}=z.useContext(Kh),{matches:i}=z.useContext(nd),{pathname:o}=QM(),s=JSON.stringify(uX(i,t.v7_relativeSplatPath)),a=z.useRef(!1);return hX(()=>{a.current=!0}),z.useCallback(function(u,c){if(c===void 0&&(c={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let f=cX(u,JSON.parse(s),o,c.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ef([e,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[e,r,s,o,n])}function pX(){let{matches:n}=z.useContext(nd),e=n[n.length-1];return e?e.params:{}}function mX(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=z.useContext(Kh),{matches:i}=z.useContext(nd),{pathname:o}=QM(),s=JSON.stringify(uX(i,r.v7_relativeSplatPath));return z.useMemo(()=>cX(n,JSON.parse(s),o,t==="path"),[n,s,o,t])}function Uce(n,e){return Vce(n,e)}function Vce(n,e,t,r){H1()||ci(!1);let{navigator:i}=z.useContext(Kh),{matches:o}=z.useContext(nd),s=o[o.length-1],a=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let u=QM(),c;if(e){var f;let y=typeof e=="string"?Wg(e):e;l==="/"||(f=y.pathname)!=null&&f.startsWith(l)||ci(!1),c=y}else c=u;let d=c.pathname||"/",h=d;if(l!=="/"){let y=l.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(y.length).join("/")}let m=mce(n,{pathname:h}),g=Gce(m&&m.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:Ef([l,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:Ef([l,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),o,t,r);return e&&g?z.createElement(JM.Provider,{value:{location:Ry({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:af.Pop}},g):g}function $ce(){let n=Kce(),e=Ice(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),t?z.createElement("pre",{style:i},t):null,null)}const Hce=z.createElement($ce,null);class Wce extends z.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?z.createElement(nd.Provider,{value:this.props.routeContext},z.createElement(dX.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function jce(n){let{routeContext:e,match:t,children:r}=n,i=z.useContext(Tk);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),z.createElement(nd.Provider,{value:e},r)}function Gce(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var o;if(!t)return null;if(t.errors)n=t.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,a=(i=t)==null?void 0:i.errors;if(a!=null){let c=s.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||ci(!1),s=s.slice(0,Math.min(s.length,c+1))}let l=!1,u=-1;if(t&&r&&r.v7_partialHydration)for(let c=0;c<s.length;c++){let f=s[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=c),f.route.id){let{loaderData:d,errors:h}=t,m=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||m){l=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((c,f,d)=>{let h,m=!1,g=null,y=null;t&&(h=a&&f.route.id?a[f.route.id]:void 0,g=f.route.errorElement||Hce,l&&(u<0&&d===0?(m=!0,y=null):u===d&&(m=!0,y=f.route.hydrateFallbackElement||null)));let p=e.concat(s.slice(0,d+1)),w=()=>{let b;return h?b=g:m?b=y:f.route.Component?b=z.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=c,z.createElement(jce,{match:f,routeContext:{outlet:c,matches:p,isDataRoute:t!=null},children:b})};return t&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?z.createElement(Wce,{location:t.location,revalidation:t.revalidation,component:g,error:h,children:w(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):w()},null)}var gX=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(gX||{}),oE=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(oE||{});function qce(n){let e=z.useContext(Tk);return e||ci(!1),e}function Xce(n){let e=z.useContext(Fce);return e||ci(!1),e}function Yce(n){let e=z.useContext(nd);return e||ci(!1),e}function vX(n){let e=Yce(),t=e.matches[e.matches.length-1];return t.route.id||ci(!1),t.route.id}function Kce(){var n;let e=z.useContext(dX),t=Xce(oE.UseRouteError),r=vX(oE.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function Zce(){let{router:n}=qce(gX.UseNavigateStable),e=vX(oE.UseNavigateStable),t=z.useRef(!1);return hX(()=>{t.current=!0}),z.useCallback(function(i,o){o===void 0&&(o={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,Ry({fromRouteId:e},o)))},[n,e])}const xB={};function Jce(n,e){xB[e]||(xB[e]=!0,console.warn(e))}const bB=(n,e,t)=>Jce(n," React Router Future Flag Warning: "+e+". "+("You can use the `"+n+"` future flag to opt-in early. ")+("For more information, see "+t+"."));function Qce(n,e){n!=null&&n.v7_startTransition||bB("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(n!=null&&n.v7_relativeSplatPath)&&!e&&bB("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function N0(n){ci(!1)}function efe(n){let{basename:e="/",children:t=null,location:r,navigationType:i=af.Pop,navigator:o,static:s=!1,future:a}=n;H1()&&ci(!1);let l=e.replace(/^\/*/,"/"),u=z.useMemo(()=>({basename:l,navigator:o,static:s,future:Ry({v7_relativeSplatPath:!1},a)}),[l,a,o,s]);typeof r=="string"&&(r=Wg(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:m="default"}=r,g=z.useMemo(()=>{let y=Ak(c,l);return y==null?null:{location:{pathname:y,search:f,hash:d,state:h,key:m},navigationType:i}},[l,c,f,d,h,m,i]);return g==null?null:z.createElement(Kh.Provider,{value:u},z.createElement(JM.Provider,{children:t,value:g}))}function tfe(n){let{children:e,location:t}=n;return Uce(yN(e),t)}new Promise(()=>{});function yN(n,e){e===void 0&&(e=[]);let t=[];return z.Children.forEach(n,(r,i)=>{if(!z.isValidElement(r))return;let o=[...e,i];if(r.type===z.Fragment){t.push.apply(t,yN(r.props.children,o));return}r.type!==N0&&ci(!1),!r.props.index||!r.props.children||ci(!1);let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=yN(r.props.children,o)),t.push(s)}),t}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xN(){return xN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},xN.apply(this,arguments)}function nfe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function rfe(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function ife(n,e){return n.button===0&&(!e||e==="_self")&&!rfe(n)}const ofe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],sfe="6";try{window.__reactRouterVersion=sfe}catch{}const afe="startTransition",wB=O_[afe];function lfe(n){let{basename:e,children:t,future:r,window:i}=n,o=z.useRef();o.current==null&&(o.current=dce({window:i,v5Compat:!0}));let s=o.current,[a,l]=z.useState({action:s.action,location:s.location}),{v7_startTransition:u}=r||{},c=z.useCallback(f=>{u&&wB?wB(()=>l(f)):l(f)},[l,u]);return z.useLayoutEffect(()=>s.listen(c),[s,c]),z.useEffect(()=>Qce(r),[r]),z.createElement(efe,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:s,future:r})}const ufe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",cfe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Oy=z.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:o,replace:s,state:a,target:l,to:u,preventScrollReset:c,viewTransition:f}=e,d=nfe(e,ofe),{basename:h}=z.useContext(Kh),m,g=!1;if(typeof u=="string"&&cfe.test(u)&&(m=u,ufe))try{let b=new URL(window.location.href),v=u.startsWith("//")?new URL(b.protocol+u):new URL(u),S=Ak(v.pathname,h);v.origin===b.origin&&S!=null?u=S+v.search+v.hash:g=!0}catch{}let y=Bce(u,{relative:i}),p=ffe(u,{replace:s,state:a,target:l,preventScrollReset:c,relative:i,viewTransition:f});function w(b){r&&r(b),b.defaultPrevented||p(b)}return z.createElement("a",xN({},d,{href:m||y,onClick:g||o?r:w,ref:t,target:l}))});var SB;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(SB||(SB={}));var _B;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(_B||(_B={}));function ffe(n,e){let{target:t,replace:r,state:i,preventScrollReset:o,relative:s,viewTransition:a}=e===void 0?{}:e,l=rd(),u=QM(),c=mX(n,{relative:s});return z.useCallback(f=>{if(ife(f,t)){f.preventDefault();let d=r!==void 0?r:iE(u)===iE(c);l(n,{replace:d,state:i,preventScrollReset:o,relative:s,viewTransition:a})}},[u,l,c,r,i,t,n,o,s,a])}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yX=Symbol("Comlink.proxy"),dfe=Symbol("Comlink.endpoint"),hfe=Symbol("Comlink.releaseProxy"),aT=Symbol("Comlink.finalizer"),n_=Symbol("Comlink.thrown"),xX=n=>typeof n=="object"&&n!==null||typeof n=="function",pfe={canHandle:n=>xX(n)&&n[yX],serialize(n){const{port1:e,port2:t}=new MessageChannel;return wX(n,e),[t,[t]]},deserialize(n){return n.start(),_X(n)}},mfe={canHandle:n=>xX(n)&&n_ in n,serialize({value:n}){let e;return n instanceof Error?e={isError:!0,value:{message:n.message,name:n.name,stack:n.stack}}:e={isError:!1,value:n},[e,[]]},deserialize(n){throw n.isError?Object.assign(new Error(n.value.message),n.value):n.value}},bX=new Map([["proxy",pfe],["throw",mfe]]);function gfe(n,e){for(const t of n)if(e===t||t==="*"||t instanceof RegExp&&t.test(e))return!0;return!1}function wX(n,e=globalThis,t=["*"]){e.addEventListener("message",function r(i){if(!i||!i.data)return;if(!gfe(t,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}const{id:o,type:s,path:a}=Object.assign({path:[]},i.data),l=(i.data.argumentList||[]).map(jd);let u;try{const c=a.slice(0,-1).reduce((d,h)=>d[h],n),f=a.reduce((d,h)=>d[h],n);switch(s){case"GET":u=f;break;case"SET":c[a.slice(-1)[0]]=jd(i.data.value),u=!0;break;case"APPLY":u=f.apply(c,l);break;case"CONSTRUCT":{const d=new f(...l);u=wN(d)}break;case"ENDPOINT":{const{port1:d,port2:h}=new MessageChannel;wX(n,h),u=wfe(d,[d])}break;case"RELEASE":u=void 0;break;default:return}}catch(c){u={value:c,[n_]:0}}Promise.resolve(u).catch(c=>({value:c,[n_]:0})).then(c=>{const[f,d]=lE(c);e.postMessage(Object.assign(Object.assign({},f),{id:o}),d),s==="RELEASE"&&(e.removeEventListener("message",r),SX(e),aT in n&&typeof n[aT]=="function"&&n[aT]())}).catch(c=>{const[f,d]=lE({value:new TypeError("Unserializable return value"),[n_]:0});e.postMessage(Object.assign(Object.assign({},f),{id:o}),d)})}),e.start&&e.start()}function vfe(n){return n.constructor.name==="MessagePort"}function SX(n){vfe(n)&&n.close()}function _X(n,e){const t=new Map;return n.addEventListener("message",function(i){const{data:o}=i;if(!o||!o.id)return;const s=t.get(o.id);if(s)try{s(o)}finally{t.delete(o.id)}}),bN(n,t,[],e)}function $b(n){if(n)throw new Error("Proxy has been released and is not useable")}function EX(n){return um(n,new Map,{type:"RELEASE"}).then(()=>{SX(n)})}const sE=new WeakMap,aE="FinalizationRegistry"in globalThis&&new FinalizationRegistry(n=>{const e=(sE.get(n)||0)-1;sE.set(n,e),e===0&&EX(n)});function yfe(n,e){const t=(sE.get(e)||0)+1;sE.set(e,t),aE&&aE.register(n,e,n)}function xfe(n){aE&&aE.unregister(n)}function bN(n,e,t=[],r=function(){}){let i=!1;const o=new Proxy(r,{get(s,a){if($b(i),a===hfe)return()=>{xfe(o),EX(n),e.clear(),i=!0};if(a==="then"){if(t.length===0)return{then:()=>o};const l=um(n,e,{type:"GET",path:t.map(u=>u.toString())}).then(jd);return l.then.bind(l)}return bN(n,e,[...t,a])},set(s,a,l){$b(i);const[u,c]=lE(l);return um(n,e,{type:"SET",path:[...t,a].map(f=>f.toString()),value:u},c).then(jd)},apply(s,a,l){$b(i);const u=t[t.length-1];if(u===dfe)return um(n,e,{type:"ENDPOINT"}).then(jd);if(u==="bind")return bN(n,e,t.slice(0,-1));const[c,f]=EB(l);return um(n,e,{type:"APPLY",path:t.map(d=>d.toString()),argumentList:c},f).then(jd)},construct(s,a){$b(i);const[l,u]=EB(a);return um(n,e,{type:"CONSTRUCT",path:t.map(c=>c.toString()),argumentList:l},u).then(jd)}});return yfe(o,n),o}function bfe(n){return Array.prototype.concat.apply([],n)}function EB(n){const e=n.map(lE);return[e.map(t=>t[0]),bfe(e.map(t=>t[1]))]}const MX=new WeakMap;function wfe(n,e){return MX.set(n,e),n}function wN(n){return Object.assign(n,{[yX]:!0})}function lE(n){for(const[e,t]of bX)if(t.canHandle(n)){const[r,i]=t.serialize(n);return[{type:"HANDLER",name:e,value:r},i]}return[{type:"RAW",value:n},MX.get(n)||[]]}function jd(n){switch(n.type){case"HANDLER":return bX.get(n.name).deserialize(n.value);case"RAW":return n.value}}function um(n,e,t,r){return new Promise(i=>{const o=Sfe();e.set(o,i),n.start&&n.start(),n.postMessage(Object.assign({id:o},t),r)})}function Sfe(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function pt(){return pt=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},pt.apply(null,arguments)}var CX={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function rn(n){return typeof n=="number"}function en(n){return!n||typeof n!="object"||typeof n.constructor!="function"?!1:n.isBigNumber===!0&&typeof n.constructor.prototype=="object"&&n.constructor.prototype.isBigNumber===!0||typeof n.constructor.isDecimal=="function"&&n.constructor.isDecimal(n)===!0}function el(n){return n&&typeof n=="object"&&Object.getPrototypeOf(n).isComplex===!0||!1}function Zh(n){return n&&typeof n=="object"&&Object.getPrototypeOf(n).isFraction===!0||!1}function os(n){return n&&n.constructor.prototype.isUnit===!0||!1}function Hi(n){return typeof n=="string"}var Tn=Array.isArray;function Vt(n){return n&&n.constructor.prototype.isMatrix===!0||!1}function js(n){return Array.isArray(n)||Vt(n)}function ky(n){return n&&n.isDenseMatrix&&n.constructor.prototype.isMatrix===!0||!1}function lf(n){return n&&n.isSparseMatrix&&n.constructor.prototype.isMatrix===!0||!1}function e2(n){return n&&n.constructor.prototype.isRange===!0||!1}function W1(n){return n&&n.constructor.prototype.isIndex===!0||!1}function AX(n){return typeof n=="boolean"}function TX(n){return n&&n.constructor.prototype.isResultSet===!0||!1}function Dk(n){return n&&n.constructor.prototype.isHelp===!0||!1}function DX(n){return typeof n=="function"}function NX(n){return n instanceof Date}function PX(n){return n instanceof RegExp}function j1(n){return!!(n&&typeof n=="object"&&n.constructor===Object&&!el(n)&&!Zh(n))}function RX(n){return n===null}function OX(n){return n===void 0}function Lf(n){return n&&n.isAccessorNode===!0&&n.constructor.prototype.isNode===!0||!1}function Rs(n){return n&&n.isArrayNode===!0&&n.constructor.prototype.isNode===!0||!1}function kX(n){return n&&n.isAssignmentNode===!0&&n.constructor.prototype.isNode===!0||!1}function IX(n){return n&&n.isBlockNode===!0&&n.constructor.prototype.isNode===!0||!1}function LX(n){return n&&n.isConditionalNode===!0&&n.constructor.prototype.isNode===!0||!1}function wn(n){return n&&n.isConstantNode===!0&&n.constructor.prototype.isNode===!0||!1}function SN(n){return wn(n)||Yr(n)&&n.args.length===1&&wn(n.args[0])&&"-+~".includes(n.op)}function jg(n){return n&&n.isFunctionAssignmentNode===!0&&n.constructor.prototype.isNode===!0||!1}function oc(n){return n&&n.isFunctionNode===!0&&n.constructor.prototype.isNode===!0||!1}function Jh(n){return n&&n.isIndexNode===!0&&n.constructor.prototype.isNode===!0||!1}function Vn(n){return n&&n.isNode===!0&&n.constructor.prototype.isNode===!0||!1}function G1(n){return n&&n.isObjectNode===!0&&n.constructor.prototype.isNode===!0||!1}function Yr(n){return n&&n.isOperatorNode===!0&&n.constructor.prototype.isNode===!0||!1}function tu(n){return n&&n.isParenthesisNode===!0&&n.constructor.prototype.isNode===!0||!1}function FX(n){return n&&n.isRangeNode===!0&&n.constructor.prototype.isNode===!0||!1}function BX(n){return n&&n.isRelationalNode===!0&&n.constructor.prototype.isNode===!0||!1}function yi(n){return n&&n.isSymbolNode===!0&&n.constructor.prototype.isNode===!0||!1}function Nk(n){return n&&n.constructor.prototype.isChain===!0||!1}function Zn(n){var e=typeof n;return e==="object"?n===null?"null":en(n)?"BigNumber":n.constructor&&n.constructor.name?n.constructor.name:"Object":e}function Kt(n){var e=typeof n;if(e==="number"||e==="string"||e==="boolean"||n===null||n===void 0)return n;if(typeof n.clone=="function")return n.clone();if(Array.isArray(n))return n.map(function(t){return Kt(t)});if(n instanceof Date)return new Date(n.valueOf());if(en(n))return n;if(j1(n))return P0(n,Kt);throw new TypeError("Cannot clone: unknown type of value (value: ".concat(n,")"))}function P0(n,e){var t={};for(var r in n)vt(n,r)&&(t[r]=e(n[r]));return t}function zX(n,e){for(var t in e)vt(e,t)&&(n[t]=e[t]);return n}function UX(n,e){if(Array.isArray(e))throw new TypeError("Arrays are not supported by deepExtend");for(var t in e)if(vt(e,t)&&!(t in Object.prototype)&&!(t in Function.prototype))if(e[t]&&e[t].constructor===Object)n[t]===void 0&&(n[t]={}),n[t]&&n[t].constructor===Object?UX(n[t],e[t]):n[t]=e[t];else{if(Array.isArray(e[t]))throw new TypeError("Arrays are not supported by deepExtend");n[t]=e[t]}return n}function Ph(n,e){var t,r,i;if(Array.isArray(n)){if(!Array.isArray(e)||n.length!==e.length)return!1;for(r=0,i=n.length;r<i;r++)if(!Ph(n[r],e[r]))return!1;return!0}else{if(typeof n=="function")return n===e;if(n instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(t in n)if(!(t in e)||!Ph(n[t],e[t]))return!1;for(t in e)if(!(t in n))return!1;return!0}else return n===e}}function _fe(n){var e={};return VX(n,e),e}function VX(n,e){for(var t in n)if(vt(n,t)){var r=n[t];typeof r=="object"&&r!==null?VX(r,e):e[t]=r}}function r_(n,e,t){var r=!0,i;Object.defineProperty(n,e,{get:function(){return r&&(i=t(),r=!1),i},set:function(s){i=s,r=!1},configurable:!0,enumerable:!0})}function vt(n,e){return n&&Object.hasOwnProperty.call(n,e)}function Efe(n){return n&&typeof n.factory=="function"}function Mfe(n,e){for(var t={},r=0;r<e.length;r++){var i=e[r],o=n[i];o!==void 0&&(t[i]=o)}return t}var MB=["Matrix","Array"],CB=["number","BigNumber","Fraction"];function Cfe(n,e){function t(r){if(r){var i=P0(n,Kt);AB(r,"matrix",MB),AB(r,"number",CB),UX(n,r);var o=P0(n,Kt),s=P0(r,Kt);return e("config",o,i,s),o}else return P0(n,Kt)}return t.MATRIX_OPTIONS=MB,t.NUMBER_OPTIONS=CB,Object.keys(CX).forEach(r=>{Object.defineProperty(t,r,{get:()=>n[r],enumerable:!0,configurable:!0})}),t}function AB(n,e,t){n[e]!==void 0&&!t.includes(n[e])&&console.warn('Warning: Unknown value "'+n[e]+'" for configuration option "'+e+'". Available options: '+t.map(r=>JSON.stringify(r)).join(", ")+".")}function TB(){return!0}function sa(){return!1}function Mp(){}const DB="Argument is not a typed-function.";function $X(){function n(q){return typeof q=="object"&&q!==null&&q.constructor===Object}const e=[{name:"number",test:function(q){return typeof q=="number"}},{name:"string",test:function(q){return typeof q=="string"}},{name:"boolean",test:function(q){return typeof q=="boolean"}},{name:"Function",test:function(q){return typeof q=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(q){return q instanceof Date}},{name:"RegExp",test:function(q){return q instanceof RegExp}},{name:"Object",test:n},{name:"null",test:function(q){return q===null}},{name:"undefined",test:function(q){return q===void 0}}],t={name:"any",test:TB,isAny:!0};let r,i,o=0,s={createCount:0};function a(q){const J=r.get(q);if(J)return J;let ye='Unknown type "'+q+'"';const we=q.toLowerCase();let ke;for(ke of i)if(ke.toLowerCase()===we){ye+='. Did you mean "'+ke+'" ?';break}throw new TypeError(ye)}function l(q){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const ye=J?a(J).index:i.length,we=[];for(let Fe=0;Fe<q.length;++Fe){if(!q[Fe]||typeof q[Fe].name!="string"||typeof q[Fe].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const He=q[Fe].name;if(r.has(He))throw new TypeError('Duplicate type name "'+He+'"');we.push(He),r.set(He,{name:He,test:q[Fe].test,isAny:q[Fe].isAny,index:ye+Fe,conversionsTo:[]})}const ke=i.slice(ye);i=i.slice(0,ye).concat(we).concat(ke);for(let Fe=ye+we.length;Fe<i.length;++Fe)r.get(i[Fe]).index=Fe}function u(){r=new Map,i=[],o=0,l([t],!1)}u(),l(e);function c(){let q;for(q of i)r.get(q).conversionsTo=[];o=0}function f(q){const J=i.filter(ye=>{const we=r.get(ye);return!we.isAny&&we.test(q)});return J.length?J:["any"]}function d(q){return q&&typeof q=="function"&&"_typedFunctionData"in q}function h(q,J,ye){if(!d(q))throw new TypeError(DB);const we=ye&&ye.exact,ke=Array.isArray(J)?J.join(","):J,Fe=v(ke),He=y(Fe);if(!we||He in q.signatures){const lt=q._typedFunctionData.signatureMap.get(He);if(lt)return lt}const Ie=Fe.length;let Ze;if(we){Ze=[];let lt;for(lt in q.signatures)Ze.push(q._typedFunctionData.signatureMap.get(lt))}else Ze=q._typedFunctionData.signatures;for(let lt=0;lt<Ie;++lt){const at=Fe[lt],Je=[];let Ee;for(Ee of Ze){const $=A(Ee.params,lt);if(!(!$||at.restParam&&!$.restParam)){if(!$.hasAny){const ce=b($);if(at.types.some(Ne=>!ce.has(Ne.name)))continue}Je.push(Ee)}}if(Ze=Je,Ze.length===0)break}let qe;for(qe of Ze)if(qe.params.length<=Ie)return qe;throw new TypeError("Signature not found (signature: "+(q.name||"unnamed")+"("+y(Fe,", ")+"))")}function m(q,J,ye){return h(q,J,ye).implementation}function g(q,J){const ye=a(J);if(ye.test(q))return q;const we=ye.conversionsTo;if(we.length===0)throw new Error("There are no conversions to "+J+" defined.");for(let ke=0;ke<we.length;ke++)if(a(we[ke].from).test(q))return we[ke].convert(q);throw new Error("Cannot convert "+q+" to "+J)}function y(q){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return q.map(ye=>ye.name).join(J)}function p(q){const J=q.indexOf("...")===0,we=(J?q.length>3?q.slice(3):"any":q).split("|").map(Ie=>a(Ie.trim()));let ke=!1,Fe=J?"...":"";return{types:we.map(function(Ie){return ke=Ie.isAny||ke,Fe+=Ie.name+"|",{name:Ie.name,typeIndex:Ie.index,test:Ie.test,isAny:Ie.isAny,conversion:null,conversionIndex:-1}}),name:Fe.slice(0,-1),hasAny:ke,hasConversion:!1,restParam:J}}function w(q){const J=q.types.map(He=>He.name),ye=I(J);let we=q.hasAny,ke=q.name;const Fe=ye.map(function(He){const Ie=a(He.from);return we=Ie.isAny||we,ke+="|"+He.from,{name:He.from,typeIndex:Ie.index,test:Ie.test,isAny:Ie.isAny,conversion:He,conversionIndex:He.index}});return{types:q.types.concat(Fe),name:ke,hasAny:we,hasConversion:Fe.length>0,restParam:q.restParam}}function b(q){return q.typeSet||(q.typeSet=new Set,q.types.forEach(J=>q.typeSet.add(J.name))),q.typeSet}function v(q){const J=[];if(typeof q!="string")throw new TypeError("Signatures must be strings");const ye=q.trim();if(ye==="")return J;const we=ye.split(",");for(let ke=0;ke<we.length;++ke){const Fe=p(we[ke].trim());if(Fe.restParam&&ke!==we.length-1)throw new SyntaxError('Unexpected rest parameter "'+we[ke]+'": only allowed for the last parameter');if(Fe.types.length===0)return null;J.push(Fe)}return J}function S(q){const J=xe(q);return J?J.restParam:!1}function x(q){if(!q||q.types.length===0)return TB;if(q.types.length===1)return a(q.types[0].name).test;if(q.types.length===2){const J=a(q.types[0].name).test,ye=a(q.types[1].name).test;return function(ke){return J(ke)||ye(ke)}}else{const J=q.types.map(function(ye){return a(ye.name).test});return function(we){for(let ke=0;ke<J.length;ke++)if(J[ke](we))return!0;return!1}}}function M(q){let J,ye,we;if(S(q)){J=Se(q).map(x);const ke=J.length,Fe=x(xe(q)),He=function(Ie){for(let Ze=ke;Ze<Ie.length;Ze++)if(!Fe(Ie[Ze]))return!1;return!0};return function(Ze){for(let qe=0;qe<J.length;qe++)if(!J[qe](Ze[qe]))return!1;return He(Ze)&&Ze.length>=ke+1}}else return q.length===0?function(Fe){return Fe.length===0}:q.length===1?(ye=x(q[0]),function(Fe){return ye(Fe[0])&&Fe.length===1}):q.length===2?(ye=x(q[0]),we=x(q[1]),function(Fe){return ye(Fe[0])&&we(Fe[1])&&Fe.length===2}):(J=q.map(x),function(Fe){for(let He=0;He<J.length;He++)if(!J[He](Fe[He]))return!1;return Fe.length===J.length})}function A(q,J){return J<q.length?q[J]:S(q)?xe(q):null}function T(q,J){const ye=A(q,J);return ye?b(ye):new Set}function C(q){return q.conversion===null||q.conversion===void 0}function D(q,J){const ye=new Set;return q.forEach(we=>{const ke=T(we.params,J);let Fe;for(Fe of ke)ye.add(Fe)}),ye.has("any")?["any"]:Array.from(ye)}function R(q,J,ye){let we,ke;const Fe=q||"unnamed";let He=ye,Ie;for(Ie=0;Ie<J.length;Ie++){const at=[];if(He.forEach(Je=>{const Ee=A(Je.params,Ie),$=x(Ee);(Ie<Je.params.length||S(Je.params))&&$(J[Ie])&&at.push(Je)}),at.length===0){if(ke=D(He,Ie),ke.length>0){const Je=f(J[Ie]);return we=new TypeError("Unexpected type of argument in function "+Fe+" (expected: "+ke.join(" or ")+", actual: "+Je.join(" | ")+", index: "+Ie+")"),we.data={category:"wrongType",fn:Fe,index:Ie,actual:Je,expected:ke},we}}else He=at}const Ze=He.map(function(at){return S(at.params)?1/0:at.params.length});if(J.length<Math.min.apply(null,Ze))return ke=D(He,Ie),we=new TypeError("Too few arguments in function "+Fe+" (expected: "+ke.join(" or ")+", index: "+J.length+")"),we.data={category:"tooFewArgs",fn:Fe,index:J.length,expected:ke},we;const qe=Math.max.apply(null,Ze);if(J.length>qe)return we=new TypeError("Too many arguments in function "+Fe+" (expected: "+qe+", actual: "+J.length+")"),we.data={category:"tooManyArgs",fn:Fe,index:J.length,expectedLength:qe},we;const lt=[];for(let at=0;at<J.length;++at)lt.push(f(J[at]).join("|"));return we=new TypeError('Arguments of type "'+lt.join(", ")+'" do not match any of the defined signatures of function '+Fe+"."),we.data={category:"mismatch",actual:lt},we}function B(q){let J=i.length+1;for(let ye=0;ye<q.types.length;ye++)C(q.types[ye])&&(J=Math.min(J,q.types[ye].typeIndex));return J}function F(q){let J=o+1;for(let ye=0;ye<q.types.length;ye++)C(q.types[ye])||(J=Math.min(J,q.types[ye].conversionIndex));return J}function U(q,J){if(q.hasAny){if(!J.hasAny)return 1}else if(J.hasAny)return-1;if(q.restParam){if(!J.restParam)return 1}else if(J.restParam)return-1;if(q.hasConversion){if(!J.hasConversion)return 1}else if(J.hasConversion)return-1;const ye=B(q)-B(J);if(ye<0)return-1;if(ye>0)return 1;const we=F(q)-F(J);return we<0?-1:we>0?1:0}function N(q,J){const ye=q.params,we=J.params,ke=xe(ye),Fe=xe(we),He=S(ye),Ie=S(we);if(He&&ke.hasAny){if(!Ie||!Fe.hasAny)return 1}else if(Ie&&Fe.hasAny)return-1;let Ze=0,qe=0,lt;for(lt of ye)lt.hasAny&&++Ze,lt.hasConversion&&++qe;let at=0,Je=0;for(lt of we)lt.hasAny&&++at,lt.hasConversion&&++Je;if(Ze!==at)return Ze-at;if(He&&ke.hasConversion){if(!Ie||!Fe.hasConversion)return 1}else if(Ie&&Fe.hasConversion)return-1;if(qe!==Je)return qe-Je;if(He){if(!Ie)return 1}else if(Ie)return-1;const Ee=(ye.length-we.length)*(He?-1:1);if(Ee!==0)return Ee;const $=[];let ce=0;for(let Ge=0;Ge<ye.length;++Ge){const de=U(ye[Ge],we[Ge]);$.push(de),ce+=de}if(ce!==0)return ce;let Ne;for(Ne of $)if(Ne!==0)return Ne;return 0}function I(q){if(q.length===0)return[];const J=q.map(a);q.length>1&&J.sort((ke,Fe)=>ke.index-Fe.index);let ye=J[0].conversionsTo;if(q.length===1)return ye;ye=ye.concat([]);const we=new Set(q);for(let ke=1;ke<J.length;++ke){let Fe;for(Fe of J[ke].conversionsTo)we.has(Fe.from)||(ye.push(Fe),we.add(Fe.from))}return ye}function V(q,J){let ye=J;if(q.some(ke=>ke.hasConversion)){const ke=S(q),Fe=q.map(L);ye=function(){const Ie=[],Ze=ke?arguments.length-1:arguments.length;for(let qe=0;qe<Ze;qe++)Ie[qe]=Fe[qe](arguments[qe]);return ke&&(Ie[Ze]=arguments[Ze].map(Fe[Ze])),J.apply(this,Ie)}}let we=ye;if(S(q)){const ke=q.length-1;we=function(){return ye.apply(this,De(arguments,0,ke).concat([De(arguments,ke)]))}}return we}function L(q){let J,ye,we,ke;const Fe=[],He=[];switch(q.types.forEach(function(Ie){Ie.conversion&&(Fe.push(a(Ie.conversion.from).test),He.push(Ie.conversion.convert))}),He.length){case 0:return function(Ze){return Ze};case 1:return J=Fe[0],we=He[0],function(Ze){return J(Ze)?we(Ze):Ze};case 2:return J=Fe[0],ye=Fe[1],we=He[0],ke=He[1],function(Ze){return J(Ze)?we(Ze):ye(Ze)?ke(Ze):Ze};default:return function(Ze){for(let qe=0;qe<He.length;qe++)if(Fe[qe](Ze))return He[qe](Ze);return Ze}}}function X(q){function J(ye,we,ke){if(we<ye.length){const Fe=ye[we];let He=[];if(Fe.restParam){const Ie=Fe.types.filter(C);Ie.length<Fe.types.length&&He.push({types:Ie,name:"..."+Ie.map(Ze=>Ze.name).join("|"),hasAny:Ie.some(Ze=>Ze.isAny),hasConversion:!1,restParam:!0}),He.push(Fe)}else He=Fe.types.map(function(Ie){return{types:[Ie],name:Ie.name,hasAny:Ie.isAny,hasConversion:Ie.conversion,restParam:!1}});return ie(He,function(Ie){return J(ye,we+1,ke.concat([Ie]))})}else return[ke]}return J(q,0,[])}function Z(q,J){const ye=Math.max(q.length,J.length);for(let Ie=0;Ie<ye;Ie++){const Ze=T(q,Ie),qe=T(J,Ie);let lt=!1,at;for(at of qe)if(Ze.has(at)){lt=!0;break}if(!lt)return!1}const we=q.length,ke=J.length,Fe=S(q),He=S(J);return Fe?He?we===ke:ke>=we:He?we>=ke:we===ke}function te(q){return q.map(J=>Me(J)?ee(J.referToSelf.callback):oe(J)?Pe(J.referTo.references,J.referTo.callback):J)}function Y(q,J,ye){const we=[];let ke;for(ke of q){let Fe=ye[ke];if(typeof Fe!="number")throw new TypeError('No definition for referenced signature "'+ke+'"');if(Fe=J[Fe],typeof Fe!="function")return!1;we.push(Fe)}return we}function re(q,J,ye){const we=te(q),ke=new Array(we.length).fill(!1);let Fe=!0;for(;Fe;){Fe=!1;let He=!0;for(let Ie=0;Ie<we.length;++Ie){if(ke[Ie])continue;const Ze=we[Ie];if(Me(Ze))we[Ie]=Ze.referToSelf.callback(ye),we[Ie].referToSelf=Ze.referToSelf,ke[Ie]=!0,He=!1;else if(oe(Ze)){const qe=Y(Ze.referTo.references,we,J);qe?(we[Ie]=Ze.referTo.callback.apply(this,qe),we[Ie].referTo=Ze.referTo,ke[Ie]=!0,He=!1):Fe=!0}}if(He&&Fe)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return we}function fe(q){const J=/\bthis(\(|\.signatures\b)/;Object.keys(q).forEach(ye=>{const we=q[ye];if(J.test(we.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function ue(q,J){if(s.createCount++,Object.keys(J).length===0)throw new SyntaxError("No signatures provided");s.warnAgainstDeprecatedThis&&fe(J);const ye=[],we=[],ke={},Fe=[];let He;for(He in J){if(!Object.prototype.hasOwnProperty.call(J,He))continue;const ft=v(He);if(!ft)continue;ye.forEach(function(Wn){if(Z(Wn,ft))throw new TypeError('Conflicting signatures "'+y(Wn)+'" and "'+y(ft)+'".')}),ye.push(ft);const Et=we.length;we.push(J[He]);const zt=ft.map(w);let Ot;for(Ot of X(zt)){const Wn=y(Ot);Fe.push({params:Ot,name:Wn,fn:Et}),Ot.every(fi=>!fi.hasConversion)&&(ke[Wn]=Et)}}Fe.sort(N);const Ie=re(we,ke,It);let Ze;for(Ze in ke)Object.prototype.hasOwnProperty.call(ke,Ze)&&(ke[Ze]=Ie[ke[Ze]]);const qe=[],lt=new Map;for(Ze of Fe)lt.has(Ze.name)||(Ze.fn=Ie[Ze.fn],qe.push(Ze),lt.set(Ze.name,Ze));const at=qe[0]&&qe[0].params.length<=2&&!S(qe[0].params),Je=qe[1]&&qe[1].params.length<=2&&!S(qe[1].params),Ee=qe[2]&&qe[2].params.length<=2&&!S(qe[2].params),$=qe[3]&&qe[3].params.length<=2&&!S(qe[3].params),ce=qe[4]&&qe[4].params.length<=2&&!S(qe[4].params),Ne=qe[5]&&qe[5].params.length<=2&&!S(qe[5].params),Ge=at&&Je&&Ee&&$&&ce&&Ne;for(let ft=0;ft<qe.length;++ft)qe[ft].test=M(qe[ft].params);const de=at?x(qe[0].params[0]):sa,Ye=Je?x(qe[1].params[0]):sa,W=Ee?x(qe[2].params[0]):sa,ne=$?x(qe[3].params[0]):sa,le=ce?x(qe[4].params[0]):sa,ve=Ne?x(qe[5].params[0]):sa,_e=at?x(qe[0].params[1]):sa,Oe=Je?x(qe[1].params[1]):sa,Ve=Ee?x(qe[2].params[1]):sa,Xe=$?x(qe[3].params[1]):sa,rt=ce?x(qe[4].params[1]):sa,ht=Ne?x(qe[5].params[1]):sa;for(let ft=0;ft<qe.length;++ft)qe[ft].implementation=V(qe[ft].params,qe[ft].fn);const Pt=at?qe[0].implementation:Mp,it=Je?qe[1].implementation:Mp,Ct=Ee?qe[2].implementation:Mp,Ht=$?qe[3].implementation:Mp,jr=ce?qe[4].implementation:Mp,Lr=Ne?qe[5].implementation:Mp,ar=at?qe[0].params.length:-1,vl=Je?qe[1].params.length:-1,_c=Ee?qe[2].params.length:-1,Fi=$?qe[3].params.length:-1,pe=ce?qe[4].params.length:-1,Le=Ne?qe[5].params.length:-1,Ue=Ge?6:0,$e=qe.length,We=qe.map(ft=>ft.test),xt=qe.map(ft=>ft.implementation),_t=function(){for(let Et=Ue;Et<$e;Et++)if(We[Et](arguments))return xt[Et].apply(this,arguments);return s.onMismatch(q,arguments,qe)};function It(ft,Et){return arguments.length===ar&&de(ft)&&_e(Et)?Pt.apply(this,arguments):arguments.length===vl&&Ye(ft)&&Oe(Et)?it.apply(this,arguments):arguments.length===_c&&W(ft)&&Ve(Et)?Ct.apply(this,arguments):arguments.length===Fi&&ne(ft)&&Xe(Et)?Ht.apply(this,arguments):arguments.length===pe&&le(ft)&&rt(Et)?jr.apply(this,arguments):arguments.length===Le&&ve(ft)&&ht(Et)?Lr.apply(this,arguments):_t.apply(this,arguments)}try{Object.defineProperty(It,"name",{value:q})}catch{}return It.signatures=ke,It._typedFunctionData={signatures:qe,signatureMap:lt},It}function ge(q,J,ye){throw R(q,J,ye)}function Se(q){return De(q,0,q.length-1)}function xe(q){return q[q.length-1]}function De(q,J,ye){return Array.prototype.slice.call(q,J,ye)}function Ae(q,J){for(let ye=0;ye<q.length;ye++)if(J(q[ye]))return q[ye]}function ie(q,J){return Array.prototype.concat.apply([],q.map(J))}function Re(){const q=Se(arguments).map(ye=>y(v(ye))),J=xe(arguments);if(typeof J!="function")throw new TypeError("Callback function expected as last argument");return Pe(q,J)}function Pe(q,J){return{referTo:{references:q,callback:J}}}function ee(q){if(typeof q!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:q}}}function oe(q){return q&&typeof q.referTo=="object"&&Array.isArray(q.referTo.references)&&typeof q.referTo.callback=="function"}function Me(q){return q&&typeof q.referToSelf=="object"&&typeof q.referToSelf.callback=="function"}function se(q,J){if(!q)return J;if(J&&J!==q){const ye=new Error("Function names do not match (expected: "+q+", actual: "+J+")");throw ye.data={actual:J,expected:q},ye}return q}function G(q){let J;for(const ye in q)Object.prototype.hasOwnProperty.call(q,ye)&&(d(q[ye])||typeof q[ye].signature=="string")&&(J=se(J,q[ye].name));return J}function j(q,J){let ye;for(ye in J)if(Object.prototype.hasOwnProperty.call(J,ye)){if(ye in q&&J[ye]!==q[ye]){const we=new Error('Signature "'+ye+'" is defined twice');throw we.data={signature:ye,sourceFunction:J[ye],destFunction:q[ye]},we}q[ye]=J[ye]}}const he=s;s=function(q){const J=typeof q=="string",ye=J?1:0;let we=J?q:"";const ke={};for(let Fe=ye;Fe<arguments.length;++Fe){const He=arguments[Fe];let Ie={},Ze;if(typeof He=="function"?(Ze=He.name,typeof He.signature=="string"?Ie[He.signature]=He:d(He)&&(Ie=He.signatures)):n(He)&&(Ie=He,J||(Ze=G(He))),Object.keys(Ie).length===0){const qe=new TypeError("Argument to 'typed' at index "+Fe+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw qe.data={index:Fe,argument:He},qe}J||(we=se(we,Ze)),j(ke,Ie)}return ue(we||"",ke)},s.create=$X,s.createCount=he.createCount,s.onMismatch=ge,s.throwMismatchError=ge,s.createError=R,s.clear=u,s.clearConversions=c,s.addTypes=l,s._findType=a,s.referTo=Re,s.referToSelf=ee,s.convert=g,s.findSignature=h,s.find=m,s.isTypedFunction=d,s.warnAgainstDeprecatedThis=!0,s.addType=function(q,J){let ye="any";J!==!1&&r.has("Object")&&(ye="Object"),s.addTypes([q],ye)};function Ce(q){if(!q||typeof q.from!="string"||typeof q.to!="string"||typeof q.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(q.to===q.from)throw new SyntaxError('Illegal to define conversion from "'+q.from+'" to itself.')}return s.addConversion=function(q){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};Ce(q);const ye=a(q.to),we=ye.conversionsTo.find(ke=>ke.from===q.from);if(we)if(J&&J.override)s.removeConversion({from:we.from,to:q.to,convert:we.convert});else throw new Error('There is already a conversion from "'+q.from+'" to "'+ye.name+'"');ye.conversionsTo.push({from:q.from,convert:q.convert,index:o++})},s.addConversions=function(q,J){q.forEach(ye=>s.addConversion(ye,J))},s.removeConversion=function(q){Ce(q);const J=a(q.to),ye=Ae(J.conversionsTo,ke=>ke.from===q.from);if(!ye)throw new Error("Attempt to remove nonexistent conversion from "+q.from+" to "+q.to);if(ye.convert!==q.convert)throw new Error("Conversion to remove does not match existing conversion");const we=J.conversionsTo.indexOf(ye);J.conversionsTo.splice(we,1)},s.resolve=function(q,J){if(!d(q))throw new TypeError(DB);const ye=q._typedFunctionData.signatures;for(let we=0;we<ye.length;++we)if(ye[we].test(J))return ye[we];return null},s}const nh=$X();function kt(n){return typeof n=="boolean"?!0:isFinite(n)?n===Math.round(n):!1}var uf=Math.sign||function(n){return n>0?1:n<0?-1:0},Afe=Math.log2||function(e){return Math.log(e)/Math.LN2},Tfe=Math.log10||function(e){return Math.log(e)/Math.LN10},Dfe=Math.log1p||function(n){return Math.log(n+1)},Nfe=Math.cbrt||function(e){if(e===0)return e;var t=e<0,r;return t&&(e=-e),isFinite(e)?(r=Math.exp(Math.log(e)/3),r=(e/(r*r)+2*r)/3):r=e,t?-r:r},Pfe=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function lT(n,e,t){var r={2:"0b",8:"0o",16:"0x"},i=r[e],o="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!kt(t))throw new Error("size must be an integer");if(n>2**(t-1)-1||n<-(2**(t-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!kt(n))throw new Error("Value must be an integer");n<0&&(n=n+2**t),o="i".concat(t)}var s="";return n<0&&(n=-n,s="-"),"".concat(s).concat(i).concat(n.toString(e)).concat(o)}function hh(n,e){if(typeof e=="function")return e(n);if(n===1/0)return"Infinity";if(n===-1/0)return"-Infinity";if(isNaN(n))return"NaN";var{notation:t,precision:r,wordSize:i}=HX(e);switch(t){case"fixed":return WX(n,r);case"exponential":return jX(n,r);case"engineering":return Rfe(n,r);case"bin":return lT(n,2,i);case"oct":return lT(n,8,i);case"hex":return lT(n,16,i);case"auto":return Ofe(n,r,e).replace(/((\.\d*?)(0+))($|e)/,function(){var o=arguments[2],s=arguments[4];return o!=="."?o+s:s});default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function HX(n){var e="auto",t,r;if(n!==void 0)if(rn(n))t=n;else if(en(n))t=n.toNumber();else if(j1(n))n.precision!==void 0&&(t=NB(n.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),n.wordSize!==void 0&&(r=NB(n.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),n.notation&&(e=n.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:e,precision:t,wordSize:r}}function q1(n){var e=String(n).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+n);var t=e[1],r=e[2],i=parseFloat(e[4]||"0"),o=r.indexOf(".");i+=o!==-1?o-1:r.length-1;var s=r.replace(".","").replace(/^0*/,function(a){return i-=a.length,""}).replace(/0*$/,"").split("").map(function(a){return parseInt(a)});return s.length===0&&(s.push(0),i++),{sign:t,coefficients:s,exponent:i}}function Rfe(n,e){if(isNaN(n)||!isFinite(n))return String(n);var t=q1(n),r=t2(t,e),i=r.exponent,o=r.coefficients,s=i%3===0?i:i<0?i-3-i%3:i-i%3;if(rn(e))for(;e>o.length||i-s+1>o.length;)o.push(0);else for(var a=Math.abs(i-s)-(o.length-1),l=0;l<a;l++)o.push(0);for(var u=Math.abs(i-s),c=1;u>0;)c++,u--;var f=o.slice(c).join(""),d=rn(e)&&f.length||f.match(/[1-9]/)?"."+f:"",h=o.slice(0,c).join("")+d+"e"+(i>=0?"+":"")+s.toString();return r.sign+h}function WX(n,e){if(isNaN(n)||!isFinite(n))return String(n);var t=q1(n),r=typeof e=="number"?t2(t,t.exponent+1+e):t,i=r.coefficients,o=r.exponent+1,s=o+(e||0);return i.length<s&&(i=i.concat(Gm(s-i.length))),o<0&&(i=Gm(-o+1).concat(i),o=1),o<i.length&&i.splice(o,0,o===0?"0.":"."),r.sign+i.join("")}function jX(n,e){if(isNaN(n)||!isFinite(n))return String(n);var t=q1(n),r=e?t2(t,e):t,i=r.coefficients,o=r.exponent;i.length<e&&(i=i.concat(Gm(e-i.length)));var s=i.shift();return r.sign+s+(i.length>0?"."+i.join(""):"")+"e"+(o>=0?"+":"")+o}function Ofe(n,e,t){if(isNaN(n)||!isFinite(n))return String(n);var r=PB(t==null?void 0:t.lowerExp,-3),i=PB(t==null?void 0:t.upperExp,5),o=q1(n),s=e?t2(o,e):o;if(s.exponent<r||s.exponent>=i)return jX(n,e);var a=s.coefficients,l=s.exponent;a.length<e&&(a=a.concat(Gm(e-a.length))),a=a.concat(Gm(l-a.length+1+(a.length<e?e-a.length:0))),a=Gm(-l).concat(a);var u=l>0?l:0;return u<a.length-1&&a.splice(u+1,0,"."),s.sign+a.join("")}function t2(n,e){for(var t={sign:n.sign,coefficients:n.coefficients,exponent:n.exponent},r=t.coefficients;e<=0;)r.unshift(0),t.exponent++,e++;if(r.length>e){var i=r.splice(e,r.length-e);if(i[0]>=5){var o=e-1;for(r[o]++;r[o]===10;)r.pop(),o===0&&(r.unshift(0),t.exponent++,o++),o--,r[o]++}}return t}function Gm(n){for(var e=[],t=0;t<n;t++)e.push(0);return e}function kfe(n){return n.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var Ife=Number.EPSILON||2220446049250313e-31;function Wo(n,e,t){if(t==null)return n===e;if(n===e)return!0;if(isNaN(n)||isNaN(e))return!1;if(isFinite(n)&&isFinite(e)){var r=Math.abs(n-e);return r<=Ife?!0:r<=Math.max(Math.abs(n),Math.abs(e))*t}return!1}var Lfe=Math.acosh||function(n){return Math.log(Math.sqrt(n*n-1)+n)},Ffe=Math.asinh||function(n){return Math.log(Math.sqrt(n*n+1)+n)},Bfe=Math.atanh||function(n){return Math.log((1+n)/(1-n))/2},zfe=Math.cosh||function(n){return(Math.exp(n)+Math.exp(-n))/2},Ufe=Math.sinh||function(n){return(Math.exp(n)-Math.exp(-n))/2},Vfe=Math.tanh||function(n){var e=Math.exp(2*n);return(e-1)/(e+1)};function $fe(n,e){var t=n>0?!0:n<0?!1:1/n===1/0,r=e>0?!0:e<0?!1:1/e===1/0;return t^r?-n:n}function NB(n,e){if(rn(n))return n;if(en(n))return n.toNumber();e()}function PB(n,e){return rn(n)?n:en(n)?n.toNumber():e}function ae(n,e,t,r){function i(o){var s=Mfe(o,e.map(GX));return Hfe(n,e,o),t(s)}return i.isFactory=!0,i.fn=n,i.dependencies=e.slice().sort(),r&&(i.meta=r),i}function Q0(n){return typeof n=="function"&&typeof n.fn=="string"&&Array.isArray(n.dependencies)}function Hfe(n,e,t){var r=e.filter(o=>!Wfe(o)).every(o=>t[o]!==void 0);if(!r){var i=e.filter(o=>t[o]===void 0);throw new Error('Cannot create function "'.concat(n,'", ')+"some dependencies are missing: ".concat(i.map(o=>'"'.concat(o,'"')).join(", "),"."))}}function Wfe(n){return n&&n[0]==="?"}function GX(n){return n&&n[0]==="?"?n.slice(1):n}function zo(n,e){if(XX(n)&&qX(n,e))return n[e];throw typeof n[e]=="function"&&Pk(n,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function pg(n,e,t){if(XX(n)&&qX(n,e))return n[e]=t,t;throw new Error('No access to property "'+e+'"')}function jfe(n,e){return e in n}function qX(n,e){return!n||typeof n!="object"?!1:vt(qfe,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Gfe(n,e){if(!Pk(n,e))throw new Error('No access to method "'+e+'"');return n[e]}function Pk(n,e){return n==null||typeof n[e]!="function"||vt(n,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(n)?!1:vt(Xfe,e)?!0:!(e in Object.prototype||e in Function.prototype)}function XX(n){return typeof n=="object"&&n&&n.constructor===Object}var qfe={length:!0,name:!0},Xfe={toString:!0,valueOf:!0,toLocaleString:!0};class n2{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).values()}get(e){return zo(this.wrappedObject,e)}set(e,t){return pg(this.wrappedObject,e,t),this}has(e){return jfe(this.wrappedObject,e)}entries(){return KX(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}class YX{constructor(e,t,r){this.a=e,this.b=t,this.bKeys=r,this[Symbol.iterator]=this.entries}get(e){return this.bKeys.has(e)?this.b.get(e):this.a.get(e)}set(e,t){return this.bKeys.has(e)?this.b.set(e,t):this.a.set(e,t),this}has(e){return this.b.has(e)||this.a.has(e)}keys(){return new Set([...this.a.keys(),...this.b.keys()])[Symbol.iterator]()}entries(){return KX(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){return this.bKeys.has(e)?this.b.delete(e):this.a.delete(e)}clear(){this.a.clear(),this.b.clear()}get size(){return[...this.keys()].length}}function KX(n,e){return{next:()=>{var t=n.next();return t.done?t:{value:e(t.value),done:!1}}}}function Iy(){return new Map}function qm(n){if(!n)return Iy();if(ZX(n))return n;if(j1(n))return new n2(n);throw new Error("createMap can create maps from objects or Maps")}function Yfe(n){if(n instanceof n2)return n.wrappedObject;var e={};for(var t of n.keys()){var r=n.get(t);pg(e,t,r)}return e}function ZX(n){return n?n instanceof Map||n instanceof n2||typeof n.set=="function"&&typeof n.get=="function"&&typeof n.keys=="function"&&typeof n.has=="function":!1}var JX=function(){return JX=nh.create,nh},Kfe=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],Zfe=ae("typed",Kfe,function(e){var{BigNumber:t,Complex:r,DenseMatrix:i,Fraction:o}=e,s=JX();return s.clear(),s.addTypes([{name:"number",test:rn},{name:"Complex",test:el},{name:"BigNumber",test:en},{name:"Fraction",test:Zh},{name:"Unit",test:os},{name:"identifier",test:a=>Hi&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(a)},{name:"string",test:Hi},{name:"Chain",test:Nk},{name:"Array",test:Tn},{name:"Matrix",test:Vt},{name:"DenseMatrix",test:ky},{name:"SparseMatrix",test:lf},{name:"Range",test:e2},{name:"Index",test:W1},{name:"boolean",test:AX},{name:"ResultSet",test:TX},{name:"Help",test:Dk},{name:"function",test:DX},{name:"Date",test:NX},{name:"RegExp",test:PX},{name:"null",test:RX},{name:"undefined",test:OX},{name:"AccessorNode",test:Lf},{name:"ArrayNode",test:Rs},{name:"AssignmentNode",test:kX},{name:"BlockNode",test:IX},{name:"ConditionalNode",test:LX},{name:"ConstantNode",test:wn},{name:"FunctionNode",test:oc},{name:"FunctionAssignmentNode",test:jg},{name:"IndexNode",test:Jh},{name:"Node",test:Vn},{name:"ObjectNode",test:G1},{name:"OperatorNode",test:Yr},{name:"ParenthesisNode",test:tu},{name:"RangeNode",test:FX},{name:"RelationalNode",test:BX},{name:"SymbolNode",test:yi},{name:"Map",test:ZX},{name:"Object",test:j1}]),s.addConversions([{from:"number",to:"BigNumber",convert:function(l){if(t||uT(l),kfe(l)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+l+"). Use function bignumber(x) to convert to BigNumber.");return new t(l)}},{from:"number",to:"Complex",convert:function(l){return r||Hb(l),new r(l,0)}},{from:"BigNumber",to:"Complex",convert:function(l){return r||Hb(l),new r(l.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(l){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(l){return r||Hb(l),new r(l.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(l){o||cT(l);var u=new o(l);if(u.valueOf()!==l)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+l+"). Use function fraction(x) to convert to Fraction.");return u}},{from:"string",to:"number",convert:function(l){var u=Number(l);if(isNaN(u))throw new Error('Cannot convert "'+l+'" to a number');return u}},{from:"string",to:"BigNumber",convert:function(l){t||uT(l);try{return new t(l)}catch{throw new Error('Cannot convert "'+l+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(l){o||cT(l);try{return new o(l)}catch{throw new Error('Cannot convert "'+l+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(l){r||Hb(l);try{return new r(l)}catch{throw new Error('Cannot convert "'+l+'" to Complex')}}},{from:"boolean",to:"number",convert:function(l){return+l}},{from:"boolean",to:"BigNumber",convert:function(l){return t||uT(l),new t(+l)}},{from:"boolean",to:"Fraction",convert:function(l){return o||cT(l),new o(+l)}},{from:"boolean",to:"string",convert:function(l){return String(l)}},{from:"Array",to:"Matrix",convert:function(l){return i||Jfe(),new i(l)}},{from:"Matrix",to:"Array",convert:function(l){return l.valueOf()}}]),s.onMismatch=(a,l,u)=>{var c=s.createError(a,l,u);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&js(l[0])&&u.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(a,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(a,")'."));throw f.data=c.data,f}throw c},s.onMismatch=(a,l,u)=>{var c=s.createError(a,l,u);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&js(l[0])&&u.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(a,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(a,")'."));throw f.data=c.data,f}throw c},s});function uT(n){throw new Error("Cannot convert value ".concat(n," into a BigNumber: no class 'BigNumber' provided"))}function Hb(n){throw new Error("Cannot convert value ".concat(n," into a Complex number: no class 'Complex' provided"))}function Jfe(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function cT(n){throw new Error("Cannot convert value ".concat(n," into a Fraction, no class 'Fraction' provided."))}var Qfe="ResultSet",ede=[],tde=ae(Qfe,ede,()=>{function n(e){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this.entries=e||[]}return n.prototype.type="ResultSet",n.prototype.isResultSet=!0,n.prototype.valueOf=function(){return this.entries},n.prototype.toString=function(){return"["+this.entries.join(", ")+"]"},n.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},n.fromJSON=function(e){return new n(e.entries)},n},{isClass:!0});/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Am=9e15,id=1e9,_N="0123456789abcdef",uE="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",cE="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",EN={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Am,maxE:Am,crypto:!1},QX,$u,tn=!0,r2="[DecimalError] ",Ff=r2+"Invalid argument: ",eY=r2+"Precision limit exceeded",tY=r2+"crypto unavailable",nY="[object Decimal]",wo=Math.floor,pi=Math.pow,nde=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,rde=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,ide=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,rY=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,tl=1e7,Yt=7,ode=9007199254740991,sde=uE.length-1,MN=cE.length-1,st={toStringTag:nY};st.absoluteValue=st.abs=function(){var n=new this.constructor(this);return n.s<0&&(n.s=1),Bt(n)};st.ceil=function(){return Bt(new this.constructor(this),this.e+1,2)};st.clampedTo=st.clamp=function(n,e){var t,r=this,i=r.constructor;if(n=new i(n),e=new i(e),!n.s||!e.s)return new i(NaN);if(n.gt(e))throw Error(Ff+e);return t=r.cmp(n),t<0?n:r.cmp(e)>0?e:new i(r)};st.comparedTo=st.cmp=function(n){var e,t,r,i,o=this,s=o.d,a=(n=new o.constructor(n)).d,l=o.s,u=n.s;if(!s||!a)return!l||!u?NaN:l!==u?l:s===a?0:!s^l<0?1:-1;if(!s[0]||!a[0])return s[0]?l:a[0]?-u:0;if(l!==u)return l;if(o.e!==n.e)return o.e>n.e^l<0?1:-1;for(r=s.length,i=a.length,e=0,t=r<i?r:i;e<t;++e)if(s[e]!==a[e])return s[e]>a[e]^l<0?1:-1;return r===i?0:r>i^l<0?1:-1};st.cosine=st.cos=function(){var n,e,t=this,r=t.constructor;return t.d?t.d[0]?(n=r.precision,e=r.rounding,r.precision=n+Math.max(t.e,t.sd())+Yt,r.rounding=1,t=ade(r,lY(r,t)),r.precision=n,r.rounding=e,Bt($u==2||$u==3?t.neg():t,n,e,!0)):new r(1):new r(NaN)};st.cubeRoot=st.cbrt=function(){var n,e,t,r,i,o,s,a,l,u,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(tn=!1,o=c.s*pi(c.s*c,1/3),!o||Math.abs(o)==1/0?(t=qi(c.d),n=c.e,(o=(n-t.length+1)%3)&&(t+=o==1||o==-2?"0":"00"),o=pi(t,1/3),n=wo((n+1)/3)-(n%3==(n<0?-1:2)),o==1/0?t="5e"+n:(t=o.toExponential(),t=t.slice(0,t.indexOf("e")+1)+n),r=new f(t),r.s=c.s):r=new f(o.toString()),s=(n=f.precision)+3;;)if(a=r,l=a.times(a).times(a),u=l.plus(c),r=sr(u.plus(c).times(a),u.plus(l),s+2,1),qi(a.d).slice(0,s)===(t=qi(r.d)).slice(0,s))if(t=t.slice(s-3,s+1),t=="9999"||!i&&t=="4999"){if(!i&&(Bt(a,n+1,0),a.times(a).times(a).eq(c))){r=a;break}s+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(Bt(r,n+1,1),e=!r.times(r).times(r).eq(c));break}return tn=!0,Bt(r,n,f.rounding,e)};st.decimalPlaces=st.dp=function(){var n,e=this.d,t=NaN;if(e){if(n=e.length-1,t=(n-wo(this.e/Yt))*Yt,n=e[n],n)for(;n%10==0;n/=10)t--;t<0&&(t=0)}return t};st.dividedBy=st.div=function(n){return sr(this,new this.constructor(n))};st.dividedToIntegerBy=st.divToInt=function(n){var e=this,t=e.constructor;return Bt(sr(e,new t(n),0,1,1),t.precision,t.rounding)};st.equals=st.eq=function(n){return this.cmp(n)===0};st.floor=function(){return Bt(new this.constructor(this),this.e+1,3)};st.greaterThan=st.gt=function(n){return this.cmp(n)>0};st.greaterThanOrEqualTo=st.gte=function(n){var e=this.cmp(n);return e==1||e===0};st.hyperbolicCosine=st.cosh=function(){var n,e,t,r,i,o=this,s=o.constructor,a=new s(1);if(!o.isFinite())return new s(o.s?1/0:NaN);if(o.isZero())return a;t=s.precision,r=s.rounding,s.precision=t+Math.max(o.e,o.sd())+4,s.rounding=1,i=o.d.length,i<32?(n=Math.ceil(i/3),e=(1/o2(4,n)).toString()):(n=16,e="2.3283064365386962890625e-10"),o=mg(s,1,o.times(e),new s(1),!0);for(var l,u=n,c=new s(8);u--;)l=o.times(o),o=a.minus(l.times(c.minus(l.times(c))));return Bt(o,s.precision=t,s.rounding=r,!0)};st.hyperbolicSine=st.sinh=function(){var n,e,t,r,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(e=o.precision,t=o.rounding,o.precision=e+Math.max(i.e,i.sd())+4,o.rounding=1,r=i.d.length,r<3)i=mg(o,2,i,i,!0);else{n=1.4*Math.sqrt(r),n=n>16?16:n|0,i=i.times(1/o2(5,n)),i=mg(o,2,i,i,!0);for(var s,a=new o(5),l=new o(16),u=new o(20);n--;)s=i.times(i),i=i.times(a.plus(s.times(l.times(s).plus(u))))}return o.precision=e,o.rounding=t,Bt(i,e,t,!0)};st.hyperbolicTangent=st.tanh=function(){var n,e,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+7,r.rounding=1,sr(t.sinh(),t.cosh(),r.precision=n,r.rounding=e)):new r(t.s)};st.inverseCosine=st.acos=function(){var n,e=this,t=e.constructor,r=e.abs().cmp(1),i=t.precision,o=t.rounding;return r!==-1?r===0?e.isNeg()?Ka(t,i,o):new t(0):new t(NaN):e.isZero()?Ka(t,i+4,o).times(.5):(t.precision=i+6,t.rounding=1,e=e.asin(),n=Ka(t,i+4,o).times(.5),t.precision=i,t.rounding=o,n.minus(e))};st.inverseHyperbolicCosine=st.acosh=function(){var n,e,t=this,r=t.constructor;return t.lte(1)?new r(t.eq(1)?0:NaN):t.isFinite()?(n=r.precision,e=r.rounding,r.precision=n+Math.max(Math.abs(t.e),t.sd())+4,r.rounding=1,tn=!1,t=t.times(t).minus(1).sqrt().plus(t),tn=!0,r.precision=n,r.rounding=e,t.ln()):new r(t)};st.inverseHyperbolicSine=st.asinh=function(){var n,e,t=this,r=t.constructor;return!t.isFinite()||t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+2*Math.max(Math.abs(t.e),t.sd())+6,r.rounding=1,tn=!1,t=t.times(t).plus(1).sqrt().plus(t),tn=!0,r.precision=n,r.rounding=e,t.ln())};st.inverseHyperbolicTangent=st.atanh=function(){var n,e,t,r,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(n=o.precision,e=o.rounding,r=i.sd(),Math.max(r,n)<2*-i.e-1?Bt(new o(i),n,e,!0):(o.precision=t=r-i.e,i=sr(i.plus(1),new o(1).minus(i),t+n,1),o.precision=n+4,o.rounding=1,i=i.ln(),o.precision=n,o.rounding=e,i.times(.5))):new o(NaN)};st.inverseSine=st.asin=function(){var n,e,t,r,i=this,o=i.constructor;return i.isZero()?new o(i):(e=i.abs().cmp(1),t=o.precision,r=o.rounding,e!==-1?e===0?(n=Ka(o,t+4,r).times(.5),n.s=i.s,n):new o(NaN):(o.precision=t+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=t,o.rounding=r,i.times(2)))};st.inverseTangent=st.atan=function(){var n,e,t,r,i,o,s,a,l,u=this,c=u.constructor,f=c.precision,d=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&f+4<=MN)return s=Ka(c,f+4,d).times(.25),s.s=u.s,s}else{if(!u.s)return new c(NaN);if(f+4<=MN)return s=Ka(c,f+4,d).times(.5),s.s=u.s,s}for(c.precision=a=f+10,c.rounding=1,t=Math.min(28,a/Yt+2|0),n=t;n;--n)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(tn=!1,e=Math.ceil(a/Yt),r=1,l=u.times(u),s=new c(u),i=u;n!==-1;)if(i=i.times(l),o=s.minus(i.div(r+=2)),i=i.times(l),s=o.plus(i.div(r+=2)),s.d[e]!==void 0)for(n=e;s.d[n]===o.d[n]&&n--;);return t&&(s=s.times(2<<t-1)),tn=!0,Bt(s,c.precision=f,c.rounding=d,!0)};st.isFinite=function(){return!!this.d};st.isInteger=st.isInt=function(){return!!this.d&&wo(this.e/Yt)>this.d.length-2};st.isNaN=function(){return!this.s};st.isNegative=st.isNeg=function(){return this.s<0};st.isPositive=st.isPos=function(){return this.s>0};st.isZero=function(){return!!this.d&&this.d[0]===0};st.lessThan=st.lt=function(n){return this.cmp(n)<0};st.lessThanOrEqualTo=st.lte=function(n){return this.cmp(n)<1};st.logarithm=st.log=function(n){var e,t,r,i,o,s,a,l,u=this,c=u.constructor,f=c.precision,d=c.rounding,h=5;if(n==null)n=new c(10),e=!0;else{if(n=new c(n),t=n.d,n.s<0||!t||!t[0]||n.eq(1))return new c(NaN);e=n.eq(10)}if(t=u.d,u.s<0||!t||!t[0]||u.eq(1))return new c(t&&!t[0]?-1/0:u.s!=1?NaN:t?0:1/0);if(e)if(t.length>1)o=!0;else{for(i=t[0];i%10===0;)i/=10;o=i!==1}if(tn=!1,a=f+h,s=cf(u,a),r=e?fE(c,a+10):cf(n,a),l=sr(s,r,a,1),Ly(l.d,i=f,d))do if(a+=10,s=cf(u,a),r=e?fE(c,a+10):cf(n,a),l=sr(s,r,a,1),!o){+qi(l.d).slice(i+1,i+15)+1==1e14&&(l=Bt(l,f+1,0));break}while(Ly(l.d,i+=10,d));return tn=!0,Bt(l,f,d)};st.minus=st.sub=function(n){var e,t,r,i,o,s,a,l,u,c,f,d,h=this,m=h.constructor;if(n=new m(n),!h.d||!n.d)return!h.s||!n.s?n=new m(NaN):h.d?n.s=-n.s:n=new m(n.d||h.s!==n.s?h:NaN),n;if(h.s!=n.s)return n.s=-n.s,h.plus(n);if(u=h.d,d=n.d,a=m.precision,l=m.rounding,!u[0]||!d[0]){if(d[0])n.s=-n.s;else if(u[0])n=new m(h);else return new m(l===3?-0:0);return tn?Bt(n,a,l):n}if(t=wo(n.e/Yt),c=wo(h.e/Yt),u=u.slice(),o=c-t,o){for(f=o<0,f?(e=u,o=-o,s=d.length):(e=d,t=c,s=u.length),r=Math.max(Math.ceil(a/Yt),s)+2,o>r&&(o=r,e.length=1),e.reverse(),r=o;r--;)e.push(0);e.reverse()}else{for(r=u.length,s=d.length,f=r<s,f&&(s=r),r=0;r<s;r++)if(u[r]!=d[r]){f=u[r]<d[r];break}o=0}for(f&&(e=u,u=d,d=e,n.s=-n.s),s=u.length,r=d.length-s;r>0;--r)u[s++]=0;for(r=d.length;r>o;){if(u[--r]<d[r]){for(i=r;i&&u[--i]===0;)u[i]=tl-1;--u[i],u[r]+=tl}u[r]-=d[r]}for(;u[--s]===0;)u.pop();for(;u[0]===0;u.shift())--t;return u[0]?(n.d=u,n.e=i2(u,t),tn?Bt(n,a,l):n):new m(l===3?-0:0)};st.modulo=st.mod=function(n){var e,t=this,r=t.constructor;return n=new r(n),!t.d||!n.s||n.d&&!n.d[0]?new r(NaN):!n.d||t.d&&!t.d[0]?Bt(new r(t),r.precision,r.rounding):(tn=!1,r.modulo==9?(e=sr(t,n.abs(),0,3,1),e.s*=n.s):e=sr(t,n,0,r.modulo,1),e=e.times(n),tn=!0,t.minus(e))};st.naturalExponential=st.exp=function(){return CN(this)};st.naturalLogarithm=st.ln=function(){return cf(this)};st.negated=st.neg=function(){var n=new this.constructor(this);return n.s=-n.s,Bt(n)};st.plus=st.add=function(n){var e,t,r,i,o,s,a,l,u,c,f=this,d=f.constructor;if(n=new d(n),!f.d||!n.d)return!f.s||!n.s?n=new d(NaN):f.d||(n=new d(n.d||f.s===n.s?f:NaN)),n;if(f.s!=n.s)return n.s=-n.s,f.minus(n);if(u=f.d,c=n.d,a=d.precision,l=d.rounding,!u[0]||!c[0])return c[0]||(n=new d(f)),tn?Bt(n,a,l):n;if(o=wo(f.e/Yt),r=wo(n.e/Yt),u=u.slice(),i=o-r,i){for(i<0?(t=u,i=-i,s=c.length):(t=c,r=o,s=u.length),o=Math.ceil(a/Yt),s=o>s?o+1:s+1,i>s&&(i=s,t.length=1),t.reverse();i--;)t.push(0);t.reverse()}for(s=u.length,i=c.length,s-i<0&&(i=s,t=c,c=u,u=t),e=0;i;)e=(u[--i]=u[i]+c[i]+e)/tl|0,u[i]%=tl;for(e&&(u.unshift(e),++r),s=u.length;u[--s]==0;)u.pop();return n.d=u,n.e=i2(u,r),tn?Bt(n,a,l):n};st.precision=st.sd=function(n){var e,t=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error(Ff+n);return t.d?(e=iY(t.d),n&&t.e+1>e&&(e=t.e+1)):e=NaN,e};st.round=function(){var n=this,e=n.constructor;return Bt(new e(n),n.e+1,e.rounding)};st.sine=st.sin=function(){var n,e,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+Math.max(t.e,t.sd())+Yt,r.rounding=1,t=ude(r,lY(r,t)),r.precision=n,r.rounding=e,Bt($u>2?t.neg():t,n,e,!0)):new r(NaN)};st.squareRoot=st.sqrt=function(){var n,e,t,r,i,o,s=this,a=s.d,l=s.e,u=s.s,c=s.constructor;if(u!==1||!a||!a[0])return new c(!u||u<0&&(!a||a[0])?NaN:a?s:1/0);for(tn=!1,u=Math.sqrt(+s),u==0||u==1/0?(e=qi(a),(e.length+l)%2==0&&(e+="0"),u=Math.sqrt(e),l=wo((l+1)/2)-(l<0||l%2),u==1/0?e="5e"+l:(e=u.toExponential(),e=e.slice(0,e.indexOf("e")+1)+l),r=new c(e)):r=new c(u.toString()),t=(l=c.precision)+3;;)if(o=r,r=o.plus(sr(s,o,t+2,1)).times(.5),qi(o.d).slice(0,t)===(e=qi(r.d)).slice(0,t))if(e=e.slice(t-3,t+1),e=="9999"||!i&&e=="4999"){if(!i&&(Bt(o,l+1,0),o.times(o).eq(s))){r=o;break}t+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Bt(r,l+1,1),n=!r.times(r).eq(s));break}return tn=!0,Bt(r,l,c.rounding,n)};st.tangent=st.tan=function(){var n,e,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+10,r.rounding=1,t=t.sin(),t.s=1,t=sr(t,new r(1).minus(t.times(t)).sqrt(),n+10,0),r.precision=n,r.rounding=e,Bt($u==2||$u==4?t.neg():t,n,e,!0)):new r(NaN)};st.times=st.mul=function(n){var e,t,r,i,o,s,a,l,u,c=this,f=c.constructor,d=c.d,h=(n=new f(n)).d;if(n.s*=c.s,!d||!d[0]||!h||!h[0])return new f(!n.s||d&&!d[0]&&!h||h&&!h[0]&&!d?NaN:!d||!h?n.s/0:n.s*0);for(t=wo(c.e/Yt)+wo(n.e/Yt),l=d.length,u=h.length,l<u&&(o=d,d=h,h=o,s=l,l=u,u=s),o=[],s=l+u,r=s;r--;)o.push(0);for(r=u;--r>=0;){for(e=0,i=l+r;i>r;)a=o[i]+h[r]*d[i-r-1]+e,o[i--]=a%tl|0,e=a/tl|0;o[i]=(o[i]+e)%tl|0}for(;!o[--s];)o.pop();return e?++t:o.shift(),n.d=o,n.e=i2(o,t),tn?Bt(n,f.precision,f.rounding):n};st.toBinary=function(n,e){return Rk(this,2,n,e)};st.toDecimalPlaces=st.toDP=function(n,e){var t=this,r=t.constructor;return t=new r(t),n===void 0?t:(ys(n,0,id),e===void 0?e=r.rounding:ys(e,0,8),Bt(t,n+t.e+1,e))};st.toExponential=function(n,e){var t,r=this,i=r.constructor;return n===void 0?t=nu(r,!0):(ys(n,0,id),e===void 0?e=i.rounding:ys(e,0,8),r=Bt(new i(r),n+1,e),t=nu(r,!0,n+1)),r.isNeg()&&!r.isZero()?"-"+t:t};st.toFixed=function(n,e){var t,r,i=this,o=i.constructor;return n===void 0?t=nu(i):(ys(n,0,id),e===void 0?e=o.rounding:ys(e,0,8),r=Bt(new o(i),n+i.e+1,e),t=nu(r,!1,n+r.e+1)),i.isNeg()&&!i.isZero()?"-"+t:t};st.toFraction=function(n){var e,t,r,i,o,s,a,l,u,c,f,d,h=this,m=h.d,g=h.constructor;if(!m)return new g(h);if(u=t=new g(1),r=l=new g(0),e=new g(r),o=e.e=iY(m)-h.e-1,s=o%Yt,e.d[0]=pi(10,s<0?Yt+s:s),n==null)n=o>0?e:u;else{if(a=new g(n),!a.isInt()||a.lt(u))throw Error(Ff+a);n=a.gt(e)?o>0?e:u:a}for(tn=!1,a=new g(qi(m)),c=g.precision,g.precision=o=m.length*Yt*2;f=sr(a,e,0,1,1),i=t.plus(f.times(r)),i.cmp(n)!=1;)t=r,r=i,i=u,u=l.plus(f.times(i)),l=i,i=e,e=a.minus(f.times(i)),a=i;return i=sr(n.minus(t),r,0,1,1),l=l.plus(i.times(u)),t=t.plus(i.times(r)),l.s=u.s=h.s,d=sr(u,r,o,1).minus(h).abs().cmp(sr(l,t,o,1).minus(h).abs())<1?[u,r]:[l,t],g.precision=c,tn=!0,d};st.toHexadecimal=st.toHex=function(n,e){return Rk(this,16,n,e)};st.toNearest=function(n,e){var t=this,r=t.constructor;if(t=new r(t),n==null){if(!t.d)return t;n=new r(1),e=r.rounding}else{if(n=new r(n),e===void 0?e=r.rounding:ys(e,0,8),!t.d)return n.s?t:n;if(!n.d)return n.s&&(n.s=t.s),n}return n.d[0]?(tn=!1,t=sr(t,n,0,e,1).times(n),tn=!0,Bt(t)):(n.s=t.s,t=n),t};st.toNumber=function(){return+this};st.toOctal=function(n,e){return Rk(this,8,n,e)};st.toPower=st.pow=function(n){var e,t,r,i,o,s,a=this,l=a.constructor,u=+(n=new l(n));if(!a.d||!n.d||!a.d[0]||!n.d[0])return new l(pi(+a,u));if(a=new l(a),a.eq(1))return a;if(r=l.precision,o=l.rounding,n.eq(1))return Bt(a,r,o);if(e=wo(n.e/Yt),e>=n.d.length-1&&(t=u<0?-u:u)<=ode)return i=oY(l,a,t,r),n.s<0?new l(1).div(i):Bt(i,r,o);if(s=a.s,s<0){if(e<n.d.length-1)return new l(NaN);if(n.d[e]&1||(s=1),a.e==0&&a.d[0]==1&&a.d.length==1)return a.s=s,a}return t=pi(+a,u),e=t==0||!isFinite(t)?wo(u*(Math.log("0."+qi(a.d))/Math.LN10+a.e+1)):new l(t+"").e,e>l.maxE+1||e<l.minE-1?new l(e>0?s/0:0):(tn=!1,l.rounding=a.s=1,t=Math.min(12,(e+"").length),i=CN(n.times(cf(a,r+t)),r),i.d&&(i=Bt(i,r+5,1),Ly(i.d,r,o)&&(e=r+10,i=Bt(CN(n.times(cf(a,e+t)),e),e+5,1),+qi(i.d).slice(r+1,r+15)+1==1e14&&(i=Bt(i,r+1,0)))),i.s=s,tn=!0,l.rounding=o,Bt(i,r,o))};st.toPrecision=function(n,e){var t,r=this,i=r.constructor;return n===void 0?t=nu(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(ys(n,1,id),e===void 0?e=i.rounding:ys(e,0,8),r=Bt(new i(r),n,e),t=nu(r,n<=r.e||r.e<=i.toExpNeg,n)),r.isNeg()&&!r.isZero()?"-"+t:t};st.toSignificantDigits=st.toSD=function(n,e){var t=this,r=t.constructor;return n===void 0?(n=r.precision,e=r.rounding):(ys(n,1,id),e===void 0?e=r.rounding:ys(e,0,8)),Bt(new r(t),n,e)};st.toString=function(){var n=this,e=n.constructor,t=nu(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()&&!n.isZero()?"-"+t:t};st.truncated=st.trunc=function(){return Bt(new this.constructor(this),this.e+1,1)};st.valueOf=st.toJSON=function(){var n=this,e=n.constructor,t=nu(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()?"-"+t:t};function qi(n){var e,t,r,i=n.length-1,o="",s=n[0];if(i>0){for(o+=s,e=1;e<i;e++)r=n[e]+"",t=Yt-r.length,t&&(o+=Xc(t)),o+=r;s=n[e],r=s+"",t=Yt-r.length,t&&(o+=Xc(t))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}function ys(n,e,t){if(n!==~~n||n<e||n>t)throw Error(Ff+n)}function Ly(n,e,t,r){var i,o,s,a;for(o=n[0];o>=10;o/=10)--e;return--e<0?(e+=Yt,i=0):(i=Math.ceil((e+1)/Yt),e%=Yt),o=pi(10,Yt-e),a=n[i]%o|0,r==null?e<3?(e==0?a=a/100|0:e==1&&(a=a/10|0),s=t<4&&a==99999||t>3&&a==49999||a==5e4||a==0):s=(t<4&&a+1==o||t>3&&a+1==o/2)&&(n[i+1]/o/100|0)==pi(10,e-2)-1||(a==o/2||a==0)&&(n[i+1]/o/100|0)==0:e<4?(e==0?a=a/1e3|0:e==1?a=a/100|0:e==2&&(a=a/10|0),s=(r||t<4)&&a==9999||!r&&t>3&&a==4999):s=((r||t<4)&&a+1==o||!r&&t>3&&a+1==o/2)&&(n[i+1]/o/1e3|0)==pi(10,e-3)-1,s}function i_(n,e,t){for(var r,i=[0],o,s=0,a=n.length;s<a;){for(o=i.length;o--;)i[o]*=e;for(i[0]+=_N.indexOf(n.charAt(s++)),r=0;r<i.length;r++)i[r]>t-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/t|0,i[r]%=t)}return i.reverse()}function ade(n,e){var t,r,i;if(e.isZero())return e;r=e.d.length,r<32?(t=Math.ceil(r/3),i=(1/o2(4,t)).toString()):(t=16,i="2.3283064365386962890625e-10"),n.precision+=t,e=mg(n,1,e.times(i),new n(1));for(var o=t;o--;){var s=e.times(e);e=s.times(s).minus(s).times(8).plus(1)}return n.precision-=t,e}var sr=function(){function n(r,i,o){var s,a=0,l=r.length;for(r=r.slice();l--;)s=r[l]*i+a,r[l]=s%o|0,a=s/o|0;return a&&r.unshift(a),r}function e(r,i,o,s){var a,l;if(o!=s)l=o>s?1:-1;else for(a=l=0;a<o;a++)if(r[a]!=i[a]){l=r[a]>i[a]?1:-1;break}return l}function t(r,i,o,s){for(var a=0;o--;)r[o]-=a,a=r[o]<i[o]?1:0,r[o]=a*s+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,s,a,l){var u,c,f,d,h,m,g,y,p,w,b,v,S,x,M,A,T,C,D,R,B=r.constructor,F=r.s==i.s?1:-1,U=r.d,N=i.d;if(!U||!U[0]||!N||!N[0])return new B(!r.s||!i.s||(U?N&&U[0]==N[0]:!N)?NaN:U&&U[0]==0||!N?F*0:F/0);for(l?(h=1,c=r.e-i.e):(l=tl,h=Yt,c=wo(r.e/h)-wo(i.e/h)),D=N.length,T=U.length,p=new B(F),w=p.d=[],f=0;N[f]==(U[f]||0);f++);if(N[f]>(U[f]||0)&&c--,o==null?(x=o=B.precision,s=B.rounding):a?x=o+(r.e-i.e)+1:x=o,x<0)w.push(1),m=!0;else{if(x=x/h+2|0,f=0,D==1){for(d=0,N=N[0],x++;(f<T||d)&&x--;f++)M=d*l+(U[f]||0),w[f]=M/N|0,d=M%N|0;m=d||f<T}else{for(d=l/(N[0]+1)|0,d>1&&(N=n(N,d,l),U=n(U,d,l),D=N.length,T=U.length),A=D,b=U.slice(0,D),v=b.length;v<D;)b[v++]=0;R=N.slice(),R.unshift(0),C=N[0],N[1]>=l/2&&++C;do d=0,u=e(N,b,D,v),u<0?(S=b[0],D!=v&&(S=S*l+(b[1]||0)),d=S/C|0,d>1?(d>=l&&(d=l-1),g=n(N,d,l),y=g.length,v=b.length,u=e(g,b,y,v),u==1&&(d--,t(g,D<y?R:N,y,l))):(d==0&&(u=d=1),g=N.slice()),y=g.length,y<v&&g.unshift(0),t(b,g,v,l),u==-1&&(v=b.length,u=e(N,b,D,v),u<1&&(d++,t(b,D<v?R:N,v,l))),v=b.length):u===0&&(d++,b=[0]),w[f++]=d,u&&b[0]?b[v++]=U[A]||0:(b=[U[A]],v=1);while((A++<T||b[0]!==void 0)&&x--);m=b[0]!==void 0}w[0]||w.shift()}if(h==1)p.e=c,QX=m;else{for(f=1,d=w[0];d>=10;d/=10)f++;p.e=f+c*h-1,Bt(p,a?o+p.e+1:o,s,m)}return p}}();function Bt(n,e,t,r){var i,o,s,a,l,u,c,f,d,h=n.constructor;e:if(e!=null){if(f=n.d,!f)return n;for(i=1,a=f[0];a>=10;a/=10)i++;if(o=e-i,o<0)o+=Yt,s=e,c=f[d=0],l=c/pi(10,i-s-1)%10|0;else if(d=Math.ceil((o+1)/Yt),a=f.length,d>=a)if(r){for(;a++<=d;)f.push(0);c=l=0,i=1,o%=Yt,s=o-Yt+1}else break e;else{for(c=a=f[d],i=1;a>=10;a/=10)i++;o%=Yt,s=o-Yt+i,l=s<0?0:c/pi(10,i-s-1)%10|0}if(r=r||e<0||f[d+1]!==void 0||(s<0?c:c%pi(10,i-s-1)),u=t<4?(l||r)&&(t==0||t==(n.s<0?3:2)):l>5||l==5&&(t==4||r||t==6&&(o>0?s>0?c/pi(10,i-s):0:f[d-1])%10&1||t==(n.s<0?8:7)),e<1||!f[0])return f.length=0,u?(e-=n.e+1,f[0]=pi(10,(Yt-e%Yt)%Yt),n.e=-e||0):f[0]=n.e=0,n;if(o==0?(f.length=d,a=1,d--):(f.length=d+1,a=pi(10,Yt-o),f[d]=s>0?(c/pi(10,i-s)%pi(10,s)|0)*a:0),u)for(;;)if(d==0){for(o=1,s=f[0];s>=10;s/=10)o++;for(s=f[0]+=a,a=1;s>=10;s/=10)a++;o!=a&&(n.e++,f[0]==tl&&(f[0]=1));break}else{if(f[d]+=a,f[d]!=tl)break;f[d--]=0,a=1}for(o=f.length;f[--o]===0;)f.pop()}return tn&&(n.e>h.maxE?(n.d=null,n.e=NaN):n.e<h.minE&&(n.e=0,n.d=[0])),n}function nu(n,e,t){if(!n.isFinite())return aY(n);var r,i=n.e,o=qi(n.d),s=o.length;return e?(t&&(r=t-s)>0?o=o.charAt(0)+"."+o.slice(1)+Xc(r):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(n.e<0?"e":"e+")+n.e):i<0?(o="0."+Xc(-i-1)+o,t&&(r=t-s)>0&&(o+=Xc(r))):i>=s?(o+=Xc(i+1-s),t&&(r=t-i-1)>0&&(o=o+"."+Xc(r))):((r=i+1)<s&&(o=o.slice(0,r)+"."+o.slice(r)),t&&(r=t-s)>0&&(i+1===s&&(o+="."),o+=Xc(r))),o}function i2(n,e){var t=n[0];for(e*=Yt;t>=10;t/=10)e++;return e}function fE(n,e,t){if(e>sde)throw tn=!0,t&&(n.precision=t),Error(eY);return Bt(new n(uE),e,1,!0)}function Ka(n,e,t){if(e>MN)throw Error(eY);return Bt(new n(cE),e,t,!0)}function iY(n){var e=n.length-1,t=e*Yt+1;if(e=n[e],e){for(;e%10==0;e/=10)t--;for(e=n[0];e>=10;e/=10)t++}return t}function Xc(n){for(var e="";n--;)e+="0";return e}function oY(n,e,t,r){var i,o=new n(1),s=Math.ceil(r/Yt+4);for(tn=!1;;){if(t%2&&(o=o.times(e),OB(o.d,s)&&(i=!0)),t=wo(t/2),t===0){t=o.d.length-1,i&&o.d[t]===0&&++o.d[t];break}e=e.times(e),OB(e.d,s)}return tn=!0,o}function RB(n){return n.d[n.d.length-1]&1}function sY(n,e,t){for(var r,i=new n(e[0]),o=0;++o<e.length;)if(r=new n(e[o]),r.s)i[t](r)&&(i=r);else{i=r;break}return i}function CN(n,e){var t,r,i,o,s,a,l,u=0,c=0,f=0,d=n.constructor,h=d.rounding,m=d.precision;if(!n.d||!n.d[0]||n.e>17)return new d(n.d?n.d[0]?n.s<0?0:1/0:1:n.s?n.s<0?0:n:NaN);for(e==null?(tn=!1,l=m):l=e,a=new d(.03125);n.e>-2;)n=n.times(a),f+=5;for(r=Math.log(pi(2,f))/Math.LN10*2+5|0,l+=r,t=o=s=new d(1),d.precision=l;;){if(o=Bt(o.times(n),l,1),t=t.times(++c),a=s.plus(sr(o,t,l,1)),qi(a.d).slice(0,l)===qi(s.d).slice(0,l)){for(i=f;i--;)s=Bt(s.times(s),l,1);if(e==null)if(u<3&&Ly(s.d,l-r,h,u))d.precision=l+=10,t=o=a=new d(1),c=0,u++;else return Bt(s,d.precision=m,h,tn=!0);else return d.precision=m,s}s=a}}function cf(n,e){var t,r,i,o,s,a,l,u,c,f,d,h=1,m=10,g=n,y=g.d,p=g.constructor,w=p.rounding,b=p.precision;if(g.s<0||!y||!y[0]||!g.e&&y[0]==1&&y.length==1)return new p(y&&!y[0]?-1/0:g.s!=1?NaN:y?0:g);if(e==null?(tn=!1,c=b):c=e,p.precision=c+=m,t=qi(y),r=t.charAt(0),Math.abs(o=g.e)<15e14){for(;r<7&&r!=1||r==1&&t.charAt(1)>3;)g=g.times(n),t=qi(g.d),r=t.charAt(0),h++;o=g.e,r>1?(g=new p("0."+t),o++):g=new p(r+"."+t.slice(1))}else return u=fE(p,c+2,b).times(o+""),g=cf(new p(r+"."+t.slice(1)),c-m).plus(u),p.precision=b,e==null?Bt(g,b,w,tn=!0):g;for(f=g,l=s=g=sr(g.minus(1),g.plus(1),c,1),d=Bt(g.times(g),c,1),i=3;;){if(s=Bt(s.times(d),c,1),u=l.plus(sr(s,new p(i),c,1)),qi(u.d).slice(0,c)===qi(l.d).slice(0,c))if(l=l.times(2),o!==0&&(l=l.plus(fE(p,c+2,b).times(o+""))),l=sr(l,new p(h),c,1),e==null)if(Ly(l.d,c-m,w,a))p.precision=c+=m,u=s=g=sr(f.minus(1),f.plus(1),c,1),d=Bt(g.times(g),c,1),i=a=1;else return Bt(l,p.precision=b,w,tn=!0);else return p.precision=b,l;l=u,i+=2}}function aY(n){return String(n.s*n.s/0)}function AN(n,e){var t,r,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(t<0&&(t=r),t+=+e.slice(r+1),e=e.substring(0,r)):t<0&&(t=e.length),r=0;e.charCodeAt(r)===48;r++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(r,i),e){if(i-=r,n.e=t=t-r-1,n.d=[],r=(t+1)%Yt,t<0&&(r+=Yt),r<i){for(r&&n.d.push(+e.slice(0,r)),i-=Yt;r<i;)n.d.push(+e.slice(r,r+=Yt));e=e.slice(r),r=Yt-e.length}else r-=i;for(;r--;)e+="0";n.d.push(+e),tn&&(n.e>n.constructor.maxE?(n.d=null,n.e=NaN):n.e<n.constructor.minE&&(n.e=0,n.d=[0]))}else n.e=0,n.d=[0];return n}function lde(n,e){var t,r,i,o,s,a,l,u,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),rY.test(e))return AN(n,e)}else if(e==="Infinity"||e==="NaN")return+e||(n.s=NaN),n.e=NaN,n.d=null,n;if(rde.test(e))t=16,e=e.toLowerCase();else if(nde.test(e))t=2;else if(ide.test(e))t=8;else throw Error(Ff+e);for(o=e.search(/p/i),o>0?(l=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),o=e.indexOf("."),s=o>=0,r=n.constructor,s&&(e=e.replace(".",""),a=e.length,o=a-o,i=oY(r,new r(t),o,o*2)),u=i_(e,t,tl),c=u.length-1,o=c;u[o]===0;--o)u.pop();return o<0?new r(n.s*0):(n.e=i2(u,c),n.d=u,tn=!1,s&&(n=sr(n,i,a*4)),l&&(n=n.times(Math.abs(l)<54?pi(2,l):Bf.pow(2,l))),tn=!0,n)}function ude(n,e){var t,r=e.d.length;if(r<3)return e.isZero()?e:mg(n,2,e,e);t=1.4*Math.sqrt(r),t=t>16?16:t|0,e=e.times(1/o2(5,t)),e=mg(n,2,e,e);for(var i,o=new n(5),s=new n(16),a=new n(20);t--;)i=e.times(e),e=e.times(o.plus(i.times(s.times(i).minus(a))));return e}function mg(n,e,t,r,i){var o,s,a,l,u=n.precision,c=Math.ceil(u/Yt);for(tn=!1,l=t.times(t),a=new n(r);;){if(s=sr(a.times(l),new n(e++*e++),u,1),a=i?r.plus(s):r.minus(s),r=sr(s.times(l),new n(e++*e++),u,1),s=a.plus(r),s.d[c]!==void 0){for(o=c;s.d[o]===a.d[o]&&o--;);if(o==-1)break}o=a,a=r,r=s,s=o}return tn=!0,s.d.length=c+1,s}function o2(n,e){for(var t=n;--e;)t*=n;return t}function lY(n,e){var t,r=e.s<0,i=Ka(n,n.precision,1),o=i.times(.5);if(e=e.abs(),e.lte(o))return $u=r?4:1,e;if(t=e.divToInt(i),t.isZero())$u=r?3:2;else{if(e=e.minus(t.times(i)),e.lte(o))return $u=RB(t)?r?2:3:r?4:1,e;$u=RB(t)?r?1:4:r?3:2}return e.minus(i).abs()}function Rk(n,e,t,r){var i,o,s,a,l,u,c,f,d,h=n.constructor,m=t!==void 0;if(m?(ys(t,1,id),r===void 0?r=h.rounding:ys(r,0,8)):(t=h.precision,r=h.rounding),!n.isFinite())c=aY(n);else{for(c=nu(n),s=c.indexOf("."),m?(i=2,e==16?t=t*4-3:e==8&&(t=t*3-2)):i=e,s>=0&&(c=c.replace(".",""),d=new h(1),d.e=c.length-s,d.d=i_(nu(d),10,i),d.e=d.d.length),f=i_(c,10,i),o=l=f.length;f[--l]==0;)f.pop();if(!f[0])c=m?"0p+0":"0";else{if(s<0?o--:(n=new h(n),n.d=f,n.e=o,n=sr(n,d,t,r,0,i),f=n.d,o=n.e,u=QX),s=f[t],a=i/2,u=u||f[t+1]!==void 0,u=r<4?(s!==void 0||u)&&(r===0||r===(n.s<0?3:2)):s>a||s===a&&(r===4||u||r===6&&f[t-1]&1||r===(n.s<0?8:7)),f.length=t,u)for(;++f[--t]>i-1;)f[t]=0,t||(++o,f.unshift(1));for(l=f.length;!f[l-1];--l);for(s=0,c="";s<l;s++)c+=_N.charAt(f[s]);if(m){if(l>1)if(e==16||e==8){for(s=e==16?4:3,--l;l%s;l++)c+="0";for(f=i_(c,i,e),l=f.length;!f[l-1];--l);for(s=1,c="1.";s<l;s++)c+=_N.charAt(f[s])}else c=c.charAt(0)+"."+c.slice(1);c=c+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)c="0"+c;c="0."+c}else if(++o>l)for(o-=l;o--;)c+="0";else o<l&&(c=c.slice(0,o)+"."+c.slice(o))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return n.s<0?"-"+c:c}function OB(n,e){if(n.length>e)return n.length=e,!0}function cde(n){return new this(n).abs()}function fde(n){return new this(n).acos()}function dde(n){return new this(n).acosh()}function hde(n,e){return new this(n).plus(e)}function pde(n){return new this(n).asin()}function mde(n){return new this(n).asinh()}function gde(n){return new this(n).atan()}function vde(n){return new this(n).atanh()}function yde(n,e){n=new this(n),e=new this(e);var t,r=this.precision,i=this.rounding,o=r+4;return!n.s||!e.s?t=new this(NaN):!n.d&&!e.d?(t=Ka(this,o,1).times(e.s>0?.25:.75),t.s=n.s):!e.d||n.isZero()?(t=e.s<0?Ka(this,r,i):new this(0),t.s=n.s):!n.d||e.isZero()?(t=Ka(this,o,1).times(.5),t.s=n.s):e.s<0?(this.precision=o,this.rounding=1,t=this.atan(sr(n,e,o,1)),e=Ka(this,o,1),this.precision=r,this.rounding=i,t=n.s<0?t.minus(e):t.plus(e)):t=this.atan(sr(n,e,o,1)),t}function xde(n){return new this(n).cbrt()}function bde(n){return Bt(n=new this(n),n.e+1,2)}function wde(n,e,t){return new this(n).clamp(e,t)}function Sde(n){if(!n||typeof n!="object")throw Error(r2+"Object expected");var e,t,r,i=n.defaults===!0,o=["precision",1,id,"rounding",0,8,"toExpNeg",-Am,0,"toExpPos",0,Am,"maxE",0,Am,"minE",-Am,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(t=o[e],i&&(this[t]=EN[t]),(r=n[t])!==void 0)if(wo(r)===r&&r>=o[e+1]&&r<=o[e+2])this[t]=r;else throw Error(Ff+t+": "+r);if(t="crypto",i&&(this[t]=EN[t]),(r=n[t])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(tY);else this[t]=!1;else throw Error(Ff+t+": "+r);return this}function _de(n){return new this(n).cos()}function Ede(n){return new this(n).cosh()}function uY(n){var e,t,r;function i(o){var s,a,l,u=this;if(!(u instanceof i))return new i(o);if(u.constructor=i,kB(o)){u.s=o.s,tn?!o.d||o.e>i.maxE?(u.e=NaN,u.d=null):o.e<i.minE?(u.e=0,u.d=[0]):(u.e=o.e,u.d=o.d.slice()):(u.e=o.e,u.d=o.d?o.d.slice():o.d);return}if(l=typeof o,l==="number"){if(o===0){u.s=1/o<0?-1:1,u.e=0,u.d=[0];return}if(o<0?(o=-o,u.s=-1):u.s=1,o===~~o&&o<1e7){for(s=0,a=o;a>=10;a/=10)s++;tn?s>i.maxE?(u.e=NaN,u.d=null):s<i.minE?(u.e=0,u.d=[0]):(u.e=s,u.d=[o]):(u.e=s,u.d=[o]);return}else if(o*0!==0){o||(u.s=NaN),u.e=NaN,u.d=null;return}return AN(u,o.toString())}else if(l!=="string")throw Error(Ff+o);return(a=o.charCodeAt(0))===45?(o=o.slice(1),u.s=-1):(a===43&&(o=o.slice(1)),u.s=1),rY.test(o)?AN(u,o):lde(u,o)}if(i.prototype=st,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=Sde,i.clone=uY,i.isDecimal=kB,i.abs=cde,i.acos=fde,i.acosh=dde,i.add=hde,i.asin=pde,i.asinh=mde,i.atan=gde,i.atanh=vde,i.atan2=yde,i.cbrt=xde,i.ceil=bde,i.clamp=wde,i.cos=_de,i.cosh=Ede,i.div=Mde,i.exp=Cde,i.floor=Ade,i.hypot=Tde,i.ln=Dde,i.log=Nde,i.log10=Rde,i.log2=Pde,i.max=Ode,i.min=kde,i.mod=Ide,i.mul=Lde,i.pow=Fde,i.random=Bde,i.round=zde,i.sign=Ude,i.sin=Vde,i.sinh=$de,i.sqrt=Hde,i.sub=Wde,i.sum=jde,i.tan=Gde,i.tanh=qde,i.trunc=Xde,n===void 0&&(n={}),n&&n.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<r.length;)n.hasOwnProperty(t=r[e++])||(n[t]=this[t]);return i.config(n),i}function Mde(n,e){return new this(n).div(e)}function Cde(n){return new this(n).exp()}function Ade(n){return Bt(n=new this(n),n.e+1,3)}function Tde(){var n,e,t=new this(0);for(tn=!1,n=0;n<arguments.length;)if(e=new this(arguments[n++]),e.d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return tn=!0,new this(1/0);t=e}return tn=!0,t.sqrt()}function kB(n){return n instanceof Bf||n&&n.toStringTag===nY||!1}function Dde(n){return new this(n).ln()}function Nde(n,e){return new this(n).log(e)}function Pde(n){return new this(n).log(2)}function Rde(n){return new this(n).log(10)}function Ode(){return sY(this,arguments,"lt")}function kde(){return sY(this,arguments,"gt")}function Ide(n,e){return new this(n).mod(e)}function Lde(n,e){return new this(n).mul(e)}function Fde(n,e){return new this(n).pow(e)}function Bde(n){var e,t,r,i,o=0,s=new this(1),a=[];if(n===void 0?n=this.precision:ys(n,1,id),r=Math.ceil(n/Yt),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));o<r;)i=e[o],i>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:a[o++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(r*=4);o<r;)i=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((e[o+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,o):(a.push(i%1e7),o+=4);o=r/4}else throw Error(tY);else for(;o<r;)a[o++]=Math.random()*1e7|0;for(r=a[--o],n%=Yt,r&&n&&(i=pi(10,Yt-n),a[o]=(r/i|0)*i);a[o]===0;o--)a.pop();if(o<0)t=0,a=[0];else{for(t=-1;a[0]===0;t-=Yt)a.shift();for(r=1,i=a[0];i>=10;i/=10)r++;r<Yt&&(t-=Yt-r)}return s.e=t,s.d=a,s}function zde(n){return Bt(n=new this(n),n.e+1,this.rounding)}function Ude(n){return n=new this(n),n.d?n.d[0]?n.s:0*n.s:n.s||NaN}function Vde(n){return new this(n).sin()}function $de(n){return new this(n).sinh()}function Hde(n){return new this(n).sqrt()}function Wde(n,e){return new this(n).sub(e)}function jde(){var n=0,e=arguments,t=new this(e[n]);for(tn=!1;t.s&&++n<e.length;)t=t.plus(e[n]);return tn=!0,Bt(t,this.precision,this.rounding)}function Gde(n){return new this(n).tan()}function qde(n){return new this(n).tanh()}function Xde(n){return Bt(n=new this(n),n.e+1,1)}st[Symbol.for("nodejs.util.inspect.custom")]=st.toString;st[Symbol.toStringTag]="Decimal";var Bf=st.constructor=uY(EN);uE=new Bf(uE);cE=new Bf(cE);var Yde="BigNumber",Kde=["?on","config"],Zde=ae(Yde,Kde,n=>{var{on:e,config:t}=n,r=Bf.clone({precision:t.precision,modulo:Bf.EUCLID});return r.prototype=Object.create(r.prototype),r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(i){return new r(i.value)},e&&e("config",function(i,o){i.precision!==o.precision&&r.config({precision:i.precision})}),r},{isClass:!0});const so=Math.cosh||function(n){return Math.abs(n)<1e-9?1-n:(Math.exp(n)+Math.exp(-n))*.5},aa=Math.sinh||function(n){return Math.abs(n)<1e-9?n:(Math.exp(n)-Math.exp(-n))*.5},Jde=function(n){const e=Math.PI/4;if(-e>n||n>e)return Math.cos(n)-1;const t=n*n;return t*(t*(t*(t*(t*(t*(t*(t/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},fT=function(n,e){return n=Math.abs(n),e=Math.abs(e),n<e&&([n,e]=[e,n]),n<1e8?Math.sqrt(n*n+e*e):(e/=n,n*Math.sqrt(1+e*e))},Cp=function(){throw SyntaxError("Invalid Param")};function dT(n,e){const t=Math.abs(n),r=Math.abs(e);return n===0?Math.log(r):e===0?Math.log(t):t<3e3&&r<3e3?Math.log(n*n+e*e)*.5:(n=n*.5,e=e*.5,.5*Math.log(n*n+e*e)+Math.LN2)}const Qde={re:0,im:0},zd=function(n,e){const t=Qde;if(n==null)t.re=t.im=0;else if(e!==void 0)t.re=n,t.im=e;else switch(typeof n){case"object":if("im"in n&&"re"in n)t.re=n.re,t.im=n.im;else if("abs"in n&&"arg"in n){if(!isFinite(n.abs)&&isFinite(n.arg))return et.INFINITY;t.re=n.abs*Math.cos(n.arg),t.im=n.abs*Math.sin(n.arg)}else if("r"in n&&"phi"in n){if(!isFinite(n.r)&&isFinite(n.phi))return et.INFINITY;t.re=n.r*Math.cos(n.phi),t.im=n.r*Math.sin(n.phi)}else n.length===2?(t.re=n[0],t.im=n[1]):Cp();break;case"string":t.im=t.re=0;const r=n.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let i=1,o=0;r===null&&Cp();for(let s=0;s<r.length;s++){const a=r[s];a===" "||a==="	"||a===`
`||(a==="+"?i++:a==="-"?o++:a==="i"||a==="I"?(i+o===0&&Cp(),r[s+1]!==" "&&!isNaN(r[s+1])?(t.im+=parseFloat((o%2?"-":"")+r[s+1]),s++):t.im+=parseFloat((o%2?"-":"")+"1"),i=o=0):((i+o===0||isNaN(a))&&Cp(),r[s+1]==="i"||r[s+1]==="I"?(t.im+=parseFloat((o%2?"-":"")+a),s++):t.re+=parseFloat((o%2?"-":"")+a),i=o=0))}i+o>0&&Cp();break;case"number":t.im=0,t.re=n;break;default:Cp()}return isNaN(t.re)||isNaN(t.im),t};function et(n,e){if(!(this instanceof et))return new et(n,e);const t=zd(n,e);this.re=t.re,this.im=t.im}et.prototype={re:0,im:0,sign:function(){const n=fT(this.re,this.im);return new et(this.re/n,this.im/n)},add:function(n,e){const t=zd(n,e),r=this.isInfinite(),i=!(isFinite(t.re)&&isFinite(t.im));return r||i?r&&i?et.NAN:et.INFINITY:new et(this.re+t.re,this.im+t.im)},sub:function(n,e){const t=zd(n,e),r=this.isInfinite(),i=!(isFinite(t.re)&&isFinite(t.im));return r||i?r&&i?et.NAN:et.INFINITY:new et(this.re-t.re,this.im-t.im)},mul:function(n,e){const t=zd(n,e),r=this.isInfinite(),i=!(isFinite(t.re)&&isFinite(t.im)),o=this.re===0&&this.im===0,s=t.re===0&&t.im===0;return r&&s||i&&o?et.NAN:r||i?et.INFINITY:t.im===0&&this.im===0?new et(this.re*t.re,0):new et(this.re*t.re-this.im*t.im,this.re*t.im+this.im*t.re)},div:function(n,e){const t=zd(n,e),r=this.isInfinite(),i=!(isFinite(t.re)&&isFinite(t.im)),o=this.re===0&&this.im===0,s=t.re===0&&t.im===0;if(o&&s||r&&i)return et.NAN;if(s||r)return et.INFINITY;if(o||i)return et.ZERO;if(t.im===0)return new et(this.re/t.re,this.im/t.re);if(Math.abs(t.re)<Math.abs(t.im)){const a=t.re/t.im,l=t.re*a+t.im;return new et((this.re*a+this.im)/l,(this.im*a-this.re)/l)}else{const a=t.im/t.re,l=t.im*a+t.re;return new et((this.re+this.im*a)/l,(this.im-this.re*a)/l)}},pow:function(n,e){const t=zd(n,e),r=this.re===0&&this.im===0;if(t.re===0&&t.im===0)return et.ONE;if(t.im===0){if(this.im===0&&this.re>0)return new et(Math.pow(this.re,t.re),0);if(this.re===0)switch((t.re%4+4)%4){case 0:return new et(Math.pow(this.im,t.re),0);case 1:return new et(0,Math.pow(this.im,t.re));case 2:return new et(-Math.pow(this.im,t.re),0);case 3:return new et(0,-Math.pow(this.im,t.re))}}if(r&&t.re>0)return et.ZERO;const o=Math.atan2(this.im,this.re),s=dT(this.re,this.im);let a=Math.exp(t.re*s-t.im*o),l=t.im*s+t.re*o;return new et(a*Math.cos(l),a*Math.sin(l))},sqrt:function(){const n=this.re,e=this.im;if(e===0)return n>=0?new et(Math.sqrt(n),0):new et(0,Math.sqrt(-n));const t=fT(n,e);let r=Math.sqrt(.5*(t+Math.abs(n))),i=Math.abs(e)/(2*r);return n>=0?new et(r,e<0?-i:i):new et(i,e<0?-r:r)},exp:function(){const n=Math.exp(this.re);return this.im===0?new et(n,0):new et(n*Math.cos(this.im),n*Math.sin(this.im))},expm1:function(){const n=this.re,e=this.im;return new et(Math.expm1(n)*Math.cos(e)+Jde(e),Math.exp(n)*Math.sin(e))},log:function(){const n=this.re,e=this.im;return e===0&&n>0?new et(Math.log(n),0):new et(dT(n,e),Math.atan2(e,n))},abs:function(){return fT(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const n=this.re,e=this.im;return new et(Math.sin(n)*so(e),Math.cos(n)*aa(e))},cos:function(){const n=this.re,e=this.im;return new et(Math.cos(n)*so(e),-Math.sin(n)*aa(e))},tan:function(){const n=2*this.re,e=2*this.im,t=Math.cos(n)+so(e);return new et(Math.sin(n)/t,aa(e)/t)},cot:function(){const n=2*this.re,e=2*this.im,t=Math.cos(n)-so(e);return new et(-Math.sin(n)/t,aa(e)/t)},sec:function(){const n=this.re,e=this.im,t=.5*so(2*e)+.5*Math.cos(2*n);return new et(Math.cos(n)*so(e)/t,Math.sin(n)*aa(e)/t)},csc:function(){const n=this.re,e=this.im,t=.5*so(2*e)-.5*Math.cos(2*n);return new et(Math.sin(n)*so(e)/t,-Math.cos(n)*aa(e)/t)},asin:function(){const n=this.re,e=this.im,t=new et(e*e-n*n+1,-2*n*e).sqrt(),r=new et(t.re-e,t.im+n).log();return new et(r.im,-r.re)},acos:function(){const n=this.re,e=this.im,t=new et(e*e-n*n+1,-2*n*e).sqrt(),r=new et(t.re-e,t.im+n).log();return new et(Math.PI/2-r.im,r.re)},atan:function(){const n=this.re,e=this.im;if(n===0){if(e===1)return new et(0,1/0);if(e===-1)return new et(0,-1/0)}const t=n*n+(1-e)*(1-e),r=new et((1-e*e-n*n)/t,-2*n/t).log();return new et(-.5*r.im,.5*r.re)},acot:function(){const n=this.re,e=this.im;if(e===0)return new et(Math.atan2(1,n),0);const t=n*n+e*e;return t!==0?new et(n/t,-e/t).atan():new et(n!==0?n/0:0,e!==0?-e/0:0).atan()},asec:function(){const n=this.re,e=this.im;if(n===0&&e===0)return new et(0,1/0);const t=n*n+e*e;return t!==0?new et(n/t,-e/t).acos():new et(n!==0?n/0:0,e!==0?-e/0:0).acos()},acsc:function(){const n=this.re,e=this.im;if(n===0&&e===0)return new et(Math.PI/2,1/0);const t=n*n+e*e;return t!==0?new et(n/t,-e/t).asin():new et(n!==0?n/0:0,e!==0?-e/0:0).asin()},sinh:function(){const n=this.re,e=this.im;return new et(aa(n)*Math.cos(e),so(n)*Math.sin(e))},cosh:function(){const n=this.re,e=this.im;return new et(so(n)*Math.cos(e),aa(n)*Math.sin(e))},tanh:function(){const n=2*this.re,e=2*this.im,t=so(n)+Math.cos(e);return new et(aa(n)/t,Math.sin(e)/t)},coth:function(){const n=2*this.re,e=2*this.im,t=so(n)-Math.cos(e);return new et(aa(n)/t,-Math.sin(e)/t)},csch:function(){const n=this.re,e=this.im,t=Math.cos(2*e)-so(2*n);return new et(-2*aa(n)*Math.cos(e)/t,2*so(n)*Math.sin(e)/t)},sech:function(){const n=this.re,e=this.im,t=Math.cos(2*e)+so(2*n);return new et(2*so(n)*Math.cos(e)/t,-2*aa(n)*Math.sin(e)/t)},asinh:function(){let n=this.im;this.im=-this.re,this.re=n;const e=this.asin();return this.re=-this.im,this.im=n,n=e.re,e.re=-e.im,e.im=n,e},acosh:function(){const n=this.acos();if(n.im<=0){const e=n.re;n.re=-n.im,n.im=e}else{const e=n.im;n.im=-n.re,n.re=e}return n},atanh:function(){const n=this.re,e=this.im,t=n>1&&e===0,r=1-n,i=1+n,o=r*r+e*e,s=o!==0?new et((i*r-e*e)/o,(e*r+i*e)/o):new et(n!==-1?n/0:0,e!==0?e/0:0),a=s.re;return s.re=dT(s.re,s.im)/2,s.im=Math.atan2(s.im,a)/2,t&&(s.im=-s.im),s},acoth:function(){const n=this.re,e=this.im;if(n===0&&e===0)return new et(0,Math.PI/2);const t=n*n+e*e;return t!==0?new et(n/t,-e/t).atanh():new et(n!==0?n/0:0,e!==0?-e/0:0).atanh()},acsch:function(){const n=this.re,e=this.im;if(e===0)return new et(n!==0?Math.log(n+Math.sqrt(n*n+1)):1/0,0);const t=n*n+e*e;return t!==0?new et(n/t,-e/t).asinh():new et(n!==0?n/0:0,e!==0?-e/0:0).asinh()},asech:function(){const n=this.re,e=this.im;if(this.isZero())return et.INFINITY;const t=n*n+e*e;return t!==0?new et(n/t,-e/t).acosh():new et(n!==0?n/0:0,e!==0?-e/0:0).acosh()},inverse:function(){if(this.isZero())return et.INFINITY;if(this.isInfinite())return et.ZERO;const n=this.re,e=this.im,t=n*n+e*e;return new et(n/t,-e/t)},conjugate:function(){return new et(this.re,-this.im)},neg:function(){return new et(-this.re,-this.im)},ceil:function(n){return n=Math.pow(10,n||0),new et(Math.ceil(this.re*n)/n,Math.ceil(this.im*n)/n)},floor:function(n){return n=Math.pow(10,n||0),new et(Math.floor(this.re*n)/n,Math.floor(this.im*n)/n)},round:function(n){return n=Math.pow(10,n||0),new et(Math.round(this.re*n)/n,Math.round(this.im*n)/n)},equals:function(n,e){const t=zd(n,e);return Math.abs(t.re-this.re)<=et.EPSILON&&Math.abs(t.im-this.im)<=et.EPSILON},clone:function(){return new et(this.re,this.im)},toString:function(){let n=this.re,e=this.im,t="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(n)<et.EPSILON&&(n=0),Math.abs(e)<et.EPSILON&&(e=0),e===0?t+n:(n!==0?(t+=n,t+=" ",e<0?(e=-e,t+="-"):t+="+",t+=" "):e<0&&(e=-e,t+="-"),e!==1&&(t+=e),t+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};et.ZERO=new et(0,0);et.ONE=new et(1,0);et.I=new et(0,1);et.PI=new et(Math.PI,0);et.E=new et(Math.E,0);et.INFINITY=new et(1/0,1/0);et.NAN=new et(NaN,NaN);et.EPSILON=1e-15;var ehe="Complex",the=[],nhe=ae(ehe,the,()=>(Object.defineProperty(et,"name",{value:"Complex"}),et.prototype.constructor=et,et.prototype.type="Complex",et.prototype.isComplex=!0,et.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},et.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},et.prototype.format=function(n){var e="",t=this.im,r=this.re,i=hh(this.re,n),o=hh(this.im,n),s=rn(n)?n:n?n.precision:null;if(s!==null){var a=Math.pow(10,-s);Math.abs(r/t)<a&&(r=0),Math.abs(t/r)<a&&(t=0)}return t===0?e=i:r===0?t===1?e="i":t===-1?e="-i":e=o+"i":t<0?t===-1?e=i+" - i":e=i+" - "+o.substring(1)+"i":t===1?e=i+" + i":e=i+" + "+o+"i",e},et.fromPolar=function(n){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return et(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var t=arguments[0],r=arguments[1];if(rn(t)){if(os(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),rn(r))return new et({r:t,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},et.prototype.valueOf=et.prototype.toString,et.fromJSON=function(n){return new et(n)},et.compare=function(n,e){return n.re>e.re?1:n.re<e.re?-1:n.im>e.im?1:n.im<e.im?-1:0},et),{isClass:!0}),cY={exports:{}};/**
 * @license Fraction.js v4.3.0 20/08/2023
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2023, Robert Eisele (robert@raw.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(n,e){(function(t){var r=2e3,i={s:1,n:0,d:1};function o(p,w){if(isNaN(p=parseInt(p,10)))throw g();return p*w}function s(p,w){if(w===0)throw m();var b=Object.create(h.prototype);b.s=p<0?-1:1,p=p<0?-p:p;var v=d(p,w);return b.n=p/v,b.d=w/v,b}function a(p){for(var w={},b=p,v=2,S=4;S<=b;){for(;b%v===0;)b/=v,w[v]=(w[v]||0)+1;S+=1+2*v++}return b!==p?b>1&&(w[b]=(w[b]||0)+1):w[p]=(w[p]||0)+1,w}var l=function(p,w){var b=0,v=1,S=1,x=0,M=0,A=0,T=1,C=1,D=0,R=1,B=1,F=1,U=1e7,N;if(p!=null)if(w!==void 0){if(b=p,v=w,S=b*v,b%1!==0||v%1!==0)throw y()}else switch(typeof p){case"object":{if("d"in p&&"n"in p)b=p.n,v=p.d,"s"in p&&(b*=p.s);else if(0 in p)b=p[0],1 in p&&(v=p[1]);else throw g();S=b*v;break}case"number":{if(p<0&&(S=p,p=-p),p%1===0)b=p;else if(p>0){for(p>=1&&(C=Math.pow(10,Math.floor(1+Math.log(p)/Math.LN10)),p/=C);R<=U&&F<=U;)if(N=(D+B)/(R+F),p===N){R+F<=U?(b=D+B,v=R+F):F>R?(b=B,v=F):(b=D,v=R);break}else p>N?(D+=B,R+=F):(B+=D,F+=R),R>U?(b=B,v=F):(b=D,v=R);b*=C}else(isNaN(p)||isNaN(w))&&(v=b=NaN);break}case"string":{if(R=p.match(/\d+|./g),R===null)throw g();if(R[D]==="-"?(S=-1,D++):R[D]==="+"&&D++,R.length===D+1?M=o(R[D++],S):R[D+1]==="."||R[D]==="."?(R[D]!=="."&&(x=o(R[D++],S)),D++,(D+1===R.length||R[D+1]==="("&&R[D+3]===")"||R[D+1]==="'"&&R[D+3]==="'")&&(M=o(R[D],S),T=Math.pow(10,R[D].length),D++),(R[D]==="("&&R[D+2]===")"||R[D]==="'"&&R[D+2]==="'")&&(A=o(R[D+1],S),C=Math.pow(10,R[D+1].length)-1,D+=3)):R[D+1]==="/"||R[D+1]===":"?(M=o(R[D],S),T=o(R[D+2],1),D+=3):R[D+3]==="/"&&R[D+1]===" "&&(x=o(R[D],S),M=o(R[D+2],S),T=o(R[D+4],1),D+=5),R.length<=D){v=T*C,S=b=A+v*x+C*M;break}}default:throw g()}if(v===0)throw m();i.s=S<0?-1:1,i.n=Math.abs(b),i.d=Math.abs(v)};function u(p,w,b){for(var v=1;w>0;p=p*p%b,w>>=1)w&1&&(v=v*p%b);return v}function c(p,w){for(;w%2===0;w/=2);for(;w%5===0;w/=5);if(w===1)return 0;for(var b=10%w,v=1;b!==1;v++)if(b=b*10%w,v>r)return 0;return v}function f(p,w,b){for(var v=1,S=u(10,b,w),x=0;x<300;x++){if(v===S)return x;v=v*10%w,S=S*10%w}return 0}function d(p,w){if(!p)return w;if(!w)return p;for(;;){if(p%=w,!p)return w;if(w%=p,!w)return p}}function h(p,w){if(l(p,w),this instanceof h)p=d(i.d,i.n),this.s=i.s,this.n=i.n/p,this.d=i.d/p;else return s(i.s*i.n,i.d)}var m=function(){return new Error("Division by Zero")},g=function(){return new Error("Invalid argument")},y=function(){return new Error("Parameters must be integer")};h.prototype={s:1,n:0,d:1,abs:function(){return s(this.n,this.d)},neg:function(){return s(-this.s*this.n,this.d)},add:function(p,w){return l(p,w),s(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(p,w){return l(p,w),s(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(p,w){return l(p,w),s(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(p,w){return l(p,w),s(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return s(this.s*this.n,this.d)},mod:function(p,w){if(isNaN(this.n)||isNaN(this.d))return new h(NaN);if(p===void 0)return s(this.s*this.n%this.d,1);if(l(p,w),i.n===0&&this.d===0)throw m();return s(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d)},gcd:function(p,w){return l(p,w),s(d(i.n,this.n)*d(i.d,this.d),i.d*this.d)},lcm:function(p,w){return l(p,w),i.n===0&&this.n===0?s(0,1):s(i.n*this.n,d(i.n,this.n)*d(i.d,this.d))},ceil:function(p){return p=Math.pow(10,p||0),isNaN(this.n)||isNaN(this.d)?new h(NaN):s(Math.ceil(p*this.s*this.n/this.d),p)},floor:function(p){return p=Math.pow(10,p||0),isNaN(this.n)||isNaN(this.d)?new h(NaN):s(Math.floor(p*this.s*this.n/this.d),p)},round:function(p){return p=Math.pow(10,p||0),isNaN(this.n)||isNaN(this.d)?new h(NaN):s(Math.round(p*this.s*this.n/this.d),p)},inverse:function(){return s(this.s*this.d,this.n)},pow:function(p,w){if(l(p,w),i.d===1)return i.s<0?s(Math.pow(this.s*this.d,i.n),Math.pow(this.n,i.n)):s(Math.pow(this.s*this.n,i.n),Math.pow(this.d,i.n));if(this.s<0)return null;var b=a(this.n),v=a(this.d),S=1,x=1;for(var M in b)if(M!=="1"){if(M==="0"){S=0;break}if(b[M]*=i.n,b[M]%i.d===0)b[M]/=i.d;else return null;S*=Math.pow(M,b[M])}for(var M in v)if(M!=="1"){if(v[M]*=i.n,v[M]%i.d===0)v[M]/=i.d;else return null;x*=Math.pow(M,v[M])}return i.s<0?s(x,S):s(S,x)},equals:function(p,w){return l(p,w),this.s*this.n*i.d===i.s*i.n*this.d},compare:function(p,w){l(p,w);var b=this.s*this.n*i.d-i.s*i.n*this.d;return(0<b)-(b<0)},simplify:function(p){if(isNaN(this.n)||isNaN(this.d))return this;p=p||.001;for(var w=this.abs(),b=w.toContinued(),v=1;v<b.length;v++){for(var S=s(b[v-1],1),x=v-2;x>=0;x--)S=S.inverse().add(b[x]);if(Math.abs(S.sub(w).valueOf())<p)return S.mul(this.s)}return this},divisible:function(p,w){return l(p,w),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(p){var w,b="",v=this.n,S=this.d;return this.s<0&&(b+="-"),S===1?b+=v:(p&&(w=Math.floor(v/S))>0&&(b+=w,b+=" ",v%=S),b+=v,b+="/",b+=S),b},toLatex:function(p){var w,b="",v=this.n,S=this.d;return this.s<0&&(b+="-"),S===1?b+=v:(p&&(w=Math.floor(v/S))>0&&(b+=w,v%=S),b+="\\frac{",b+=v,b+="}{",b+=S,b+="}"),b},toContinued:function(){var p,w=this.n,b=this.d,v=[];if(isNaN(w)||isNaN(b))return v;do v.push(Math.floor(w/b)),p=w%b,w=b,b=p;while(w!==1);return v},toString:function(p){var w=this.n,b=this.d;if(isNaN(w)||isNaN(b))return"NaN";p=p||15;var v=c(w,b),S=f(w,b,v),x=this.s<0?"-":"";if(x+=w/b|0,w%=b,w*=10,w&&(x+="."),v){for(var M=S;M--;)x+=w/b|0,w%=b,w*=10;x+="(";for(var M=v;M--;)x+=w/b|0,w%=b,w*=10;x+=")"}else for(var M=p;w&&M--;)x+=w/b|0,w%=b,w*=10;return x}},Object.defineProperty(h,"__esModule",{value:!0}),h.default=h,h.Fraction=h,n.exports=h})()})(cY);var rhe=cY.exports;const _u=ll(rhe);var ihe="Fraction",ohe=[],she=ae(ihe,ohe,()=>(Object.defineProperty(_u,"name",{value:"Fraction"}),_u.prototype.constructor=_u,_u.prototype.type="Fraction",_u.prototype.isFraction=!0,_u.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},_u.fromJSON=function(n){return new _u(n)},_u),{isClass:!0}),ahe="Range",lhe=[],uhe=ae(ahe,lhe,()=>{function n(e,t,r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");var i=e!=null,o=t!=null,s=r!=null;if(i){if(en(e))e=e.toNumber();else if(typeof e!="number")throw new TypeError("Parameter start must be a number")}if(o){if(en(t))t=t.toNumber();else if(typeof t!="number")throw new TypeError("Parameter end must be a number")}if(s){if(en(r))r=r.toNumber();else if(typeof r!="number")throw new TypeError("Parameter step must be a number")}this.start=i?parseFloat(e):0,this.end=o?parseFloat(t):0,this.step=s?parseFloat(r):1}return n.prototype.type="Range",n.prototype.isRange=!0,n.parse=function(e){if(typeof e!="string")return null;var t=e.split(":"),r=t.map(function(o){return parseFloat(o)}),i=r.some(function(o){return isNaN(o)});if(i)return null;switch(r.length){case 2:return new n(r[0],r[1]);case 3:return new n(r[0],r[2],r[1]);default:return null}},n.prototype.clone=function(){return new n(this.start,this.end,this.step)},n.prototype.size=function(){var e=0,t=this.start,r=this.step,i=this.end,o=i-t;return uf(r)===uf(o)?e=Math.ceil(o/r):o===0&&(e=0),isNaN(e)&&(e=0),[e]},n.prototype.min=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start:this.start+(e-1)*this.step},n.prototype.max=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start+(e-1)*this.step:this.start},n.prototype.forEach=function(e){var t=this.start,r=this.step,i=this.end,o=0;if(r>0)for(;t<i;)e(t,[o],this),t+=r,o++;else if(r<0)for(;t>i;)e(t,[o],this),t+=r,o++},n.prototype.map=function(e){var t=[];return this.forEach(function(r,i,o){t[i[0]]=e(r,i,o)}),t},n.prototype.toArray=function(){var e=[];return this.forEach(function(t,r){e[r[0]]=t}),e},n.prototype.valueOf=function(){return this.toArray()},n.prototype.format=function(e){var t=hh(this.start,e);return this.step!==1&&(t+=":"+hh(this.step,e)),t+=":"+hh(this.end,e),t},n.prototype.toString=function(){return this.format()},n.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},n.fromJSON=function(e){return new n(e.start,e.end,e.step)},n},{isClass:!0}),che="Matrix",fhe=[],dhe=ae(che,fhe,()=>{function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator")}return n.prototype.type="Matrix",n.prototype.isMatrix=!0,n.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},n.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},n.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface")},n.prototype.subset=function(e,t,r){throw new Error("Cannot invoke subset on a Matrix interface")},n.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},n.prototype.set=function(e,t,r){throw new Error("Cannot invoke set on a Matrix interface")},n.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface")},n.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface")},n.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},n.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},n.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface")},n.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},n.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},n.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},n.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},n.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},n.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},n},{isClass:!0});function hT(n,e,t){var r=n.constructor,i=new r(2),o="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!kt(t))throw new Error("size must be an integer");if(n.greaterThan(i.pow(t-1).sub(1))||n.lessThan(i.pow(t-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!n.isInteger())throw new Error("Value must be an integer");n.lessThan(0)&&(n=n.add(i.pow(t))),o="i".concat(t)}switch(e){case 2:return"".concat(n.toBinary()).concat(o);case 8:return"".concat(n.toOctal()).concat(o);case 16:return"".concat(n.toHexadecimal()).concat(o);default:throw new Error("Base ".concat(e," not supported "))}}function hhe(n,e){if(typeof e=="function")return e(n);if(!n.isFinite())return n.isNaN()?"NaN":n.gt(0)?"Infinity":"-Infinity";var{notation:t,precision:r,wordSize:i}=HX(e);switch(t){case"fixed":return mhe(n,r);case"exponential":return IB(n,r);case"engineering":return phe(n,r);case"bin":return hT(n,2,i);case"oct":return hT(n,8,i);case"hex":return hT(n,16,i);case"auto":{var o=LB(e==null?void 0:e.lowerExp,-3),s=LB(e==null?void 0:e.upperExp,5);if(n.isZero())return"0";var a,l=n.toSignificantDigits(r),u=l.e;return u>=o&&u<s?a=l.toFixed():a=IB(n,r),a.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function phe(n,e){var t=n.e,r=t%3===0?t:t<0?t-3-t%3:t-t%3,i=n.mul(Math.pow(10,-r)),o=i.toPrecision(e);if(o.includes("e")){var s=n.constructor;o=new s(o).toFixed()}return o+"e"+(t>=0?"+":"")+r.toString()}function IB(n,e){return e!==void 0?n.toExponential(e-1):n.toExponential()}function mhe(n,e){return n.toFixed(e)}function LB(n,e){return rn(n)?n:en(n)?n.toNumber():e}function ghe(n,e){var t=n.length-e.length,r=n.length;return n.substring(t,r)===e}function fn(n,e){var t=vhe(n,e);return e&&typeof e=="object"&&"truncate"in e&&t.length>e.truncate?t.substring(0,e.truncate-3)+"...":t}function vhe(n,e){if(typeof n=="number")return hh(n,e);if(en(n))return hhe(n,e);if(yhe(n))return!e||e.fraction!=="decimal"?n.s*n.n+"/"+n.d:n.toString();if(Array.isArray(n))return fY(n,e);if(Hi(n))return Tm(n);if(typeof n=="function")return n.syntax?String(n.syntax):"function";if(n&&typeof n=="object"){if(typeof n.format=="function")return n.format(e);if(n&&n.toString(e)!=={}.toString())return n.toString(e);var t=Object.keys(n).map(r=>Tm(r)+": "+fn(n[r],e));return"{"+t.join(", ")+"}"}return String(n)}function Tm(n){for(var e=String(n),t="",r=0;r<e.length;){var i=e.charAt(r);t+=i in FB?FB[i]:i,r++}return'"'+t+'"'}var FB={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function pa(n){var e=String(n);return e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e}function fY(n,e){if(Array.isArray(n)){for(var t="[",r=n.length,i=0;i<r;i++)i!==0&&(t+=", "),t+=fY(n[i],e);return t+="]",t}else return fn(n,e)}function yhe(n){return n&&typeof n=="object"&&typeof n.s=="number"&&typeof n.n=="number"&&typeof n.d=="number"||!1}function TN(n,e){if(!Hi(n))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Zn(n)+", index: 0)");if(!Hi(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Zn(e)+", index: 1)");return n===e?0:n>e?1:-1}function un(n,e,t){if(!(this instanceof un))throw new SyntaxError("Constructor must be called with the new operator");this.actual=n,this.expected=e,this.relation=t,this.message="Dimension mismatch ("+(Array.isArray(n)?"["+n.join(", ")+"]":n)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}un.prototype=new RangeError;un.prototype.constructor=RangeError;un.prototype.name="DimensionError";un.prototype.isDimensionError=!0;function Ia(n,e,t){if(!(this instanceof Ia))throw new SyntaxError("Constructor must be called with the new operator");this.index=n,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=t),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Ia.prototype=new RangeError;Ia.prototype.constructor=RangeError;Ia.prototype.name="IndexError";Ia.prototype.isIndexError=!0;function on(n){for(var e=[];Array.isArray(n);)e.push(n.length),n=n[0];return e}function dY(n,e,t){var r,i=n.length;if(i!==e[t])throw new un(i,e[t]);if(t<e.length-1){var o=t+1;for(r=0;r<i;r++){var s=n[r];if(!Array.isArray(s))throw new un(e.length-1,e.length,"<");dY(n[r],e,o)}}else for(r=0;r<i;r++)if(Array.isArray(n[r]))throw new un(e.length+1,e.length,">")}function BB(n,e){var t=e.length===0;if(t){if(Array.isArray(n))throw new un(n.length,0)}else dY(n,e,0)}function dE(n,e){var t=n.isMatrix?n._size:on(n),r=e._sourceSize;r.forEach((i,o)=>{if(i!==null&&i!==t[o])throw new un(i,t[o])})}function jn(n,e){if(n!==void 0){if(!rn(n)||!kt(n))throw new TypeError("Index must be an integer (value: "+n+")");if(n<0||typeof e=="number"&&n>=e)throw new Ia(n,e)}}function gg(n){for(var e=0;e<n._dimensions.length;++e){var t=n._dimensions[e];if(t._data&&Tn(t._data)){if(t._size[0]===0)return!0}else if(t.isRange){if(t.start===t.end)return!0}else if(Hi(t)&&t.length===0)return!0}return!1}function vg(n,e,t){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!rn(i)||!kt(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+fn(e)+")")}),(rn(n)||en(n))&&(n=[n]);var r=t!==void 0?t:0;return DN(n,e,0,r),n}function DN(n,e,t,r){var i,o,s=n.length,a=e[t],l=Math.min(s,a);if(n.length=a,t<e.length-1){var u=t+1;for(i=0;i<l;i++)o=n[i],Array.isArray(o)||(o=[o],n[i]=o),DN(o,e,u,r);for(i=l;i<a;i++)o=[],n[i]=o,DN(o,e,u,r)}else{for(i=0;i<l;i++)for(;Array.isArray(n[i]);)n[i]=n[i][0];for(i=l;i<a;i++)n[i]=r}}function Ok(n,e){var t=Cn(n),r=t.length;if(!Array.isArray(n)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new un(0,r,"!=");e=kk(e,r);var i=hY(e);if(r!==i)throw new un(i,r,"!=");try{return xhe(t,e)}catch(o){throw o instanceof un?new un(i,r,"!="):o}}function kk(n,e){var t=hY(n),r=n.slice(),i=-1,o=n.indexOf(i),s=n.indexOf(i,o+1)>=0;if(s)throw new Error("More than one wildcard in sizes");var a=o>=0,l=e%t===0;if(a)if(l)r[o]=-e/t;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-t);return r}function hY(n){return n.reduce((e,t)=>e*t,1)}function xhe(n,e){for(var t=n,r,i=e.length-1;i>0;i--){var o=e[i];r=[];for(var s=t.length/o,a=0;a<s;a++)r.push(t.slice(a*o,(a+1)*o));t=r}return t}function hE(n,e){for(var t=on(n);Array.isArray(n)&&n.length===1;)n=n[0],t.shift();for(var r=t.length;t[r-1]===1;)r--;return r<t.length&&(n=pY(n,r,0),t.length=r),n}function pY(n,e,t){var r,i;if(t<e){var o=t+1;for(r=0,i=n.length;r<i;r++)n[r]=pY(n[r],e,o)}else for(;Array.isArray(n);)n=n[0];return n}function mY(n,e,t,r){var i=r||on(n);if(t)for(var o=0;o<t;o++)n=[n],i.unshift(1);for(n=gY(n,e,0);i.length<e;)i.push(1);return n}function gY(n,e,t){var r,i;if(Array.isArray(n)){var o=t+1;for(r=0,i=n.length;r<i;r++)n[r]=gY(n[r],e,o)}else for(var s=t;s<e;s++)n=[n];return n}function Cn(n){if(!Array.isArray(n))return n;var e=[];return n.forEach(function t(r){Array.isArray(r)?r.forEach(t):e.push(r)}),e}function Xu(n,e){return Array.prototype.map.call(n,e)}function s2(n,e){Array.prototype.forEach.call(n,e)}function vY(n,e){if(on(n).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(n,e)}function pE(n,e){if(on(n).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(n,t=>e.test(t))}function zB(n,e){return Array.prototype.join.call(n,e)}function yg(n){if(!Array.isArray(n))throw new TypeError("Array input expected");if(n.length===0)return n;var e=[],t=0;e[0]={value:n[0],identifier:0};for(var r=1;r<n.length;r++)n[r]===n[r-1]?t++:t=0,e.push({value:n[r],identifier:t});return e}function mE(n){if(!Array.isArray(n))throw new TypeError("Array input expected");if(n.length===0)return n;for(var e=[],t=0;t<n.length;t++)e.push(n[t].value);return e}function Fy(n,e){for(var t,r=0,i=0;i<n.length;i++){var o=n[i],s=Array.isArray(o);if(i===0&&s&&(r=o.length),s&&o.length!==r)return;var a=s?Fy(o,e):e(o);if(t===void 0)t=a;else if(t!==a)return"mixed"}return t}function yY(n,e,t,r){if(r<t){if(n.length!==e.length)throw new un(n.length,e.length);for(var i=[],o=0;o<n.length;o++)i[o]=yY(n[o],e[o],t,r+1);return i}else return n.concat(e)}function xY(){var n=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(n.length===1)return n[0];if(n.length>1)return n.slice(1).reduce(function(t,r){return yY(t,r,e,0)},n[0]);throw new Error("Wrong number of arguments in function concat")}function bhe(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];for(var r=e.map(d=>d.length),i=Math.max(...r),o=new Array(i).fill(null),s=0;s<e.length;s++)for(var a=e[s],l=r[s],u=0;u<l;u++){var c=i-l+u;a[u]>o[c]&&(o[c]=a[u])}for(var f=0;f<e.length;f++)gE(e[f],o);return o}function gE(n,e){for(var t=e.length,r=n.length,i=0;i<r;i++){var o=t-r+i;if(n[i]<e[o]&&n[i]>1||n[i]>e[o])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(n,") not possible to broadcast dimension ").concat(r," with size ").concat(n[i]," to size ").concat(e[o]))}}function UB(n,e){var t=on(n);if(Ph(t,e))return n;gE(t,e);var r=bhe(t,e),i=r.length,o=[...Array(i-t.length).fill(1),...t],s=She(n);t.length<i&&(s=Ok(s,o),t=on(s));for(var a=0;a<i;a++)t[a]<r[a]&&(s=whe(s,r[a],a),t=on(s));return s}function whe(n,e,t){return xY(...Array(e).fill(n),t)}function She(n){return pt([],n)}function _he(n){var e=0,t=1,r=Object.create(null),i=Object.create(null),o=0,s=function(l){var u=i[l];if(u&&(delete r[u],delete i[l],--e,t===u)){if(!e){o=0,t=1;return}for(;!Object.prototype.hasOwnProperty.call(r,++t););}};return n=Math.abs(n),{hit:function(l){var u=i[l],c=++o;if(r[c]=l,i[l]=c,!u)return++e,e<=n?void 0:(l=r[t],s(l),l);if(delete r[u],t===u)for(;!Object.prototype.hasOwnProperty.call(r,++t););},delete:s,clear:function(){e=o=0,t=1,r=Object.create(null),i=Object.create(null)}}}function X1(n){var{hasher:e,limit:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t=t??Number.POSITIVE_INFINITY,e=e??JSON.stringify,function r(){typeof r.cache!="object"&&(r.cache={values:new Map,lru:_he(t||Number.POSITIVE_INFINITY)});for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s=e(i);if(r.cache.values.has(s))return r.cache.lru.hit(s),r.cache.values.get(s);var a=n.apply(n,i);return r.cache.values.set(s,a),r.cache.values.delete(r.cache.lru.hit(s)),a}}function bY(n){return Object.keys(n.signatures||{}).reduce(function(e,t){var r=(t.match(/,/g)||[]).length+1;return Math.max(e,r)},-1)}var Ehe="DenseMatrix",Mhe=["Matrix"],Che=ae(Ehe,Mhe,n=>{var{Matrix:e}=n;function t(c,f){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!Hi(f))throw new Error("Invalid datatype: "+f);if(Vt(c))c.type==="DenseMatrix"?(this._data=Kt(c._data),this._size=Kt(c._size),this._datatype=f||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=f||c._datatype);else if(c&&Tn(c.data)&&Tn(c.size))this._data=c.data,this._size=c.size,BB(this._data,this._size),this._datatype=f||c.datatype;else if(Tn(c))this._data=u(c),this._size=on(this._data),BB(this._data,this._size),this._datatype=f;else{if(c)throw new TypeError("Unsupported type of data ("+Zn(c)+")");this._data=[],this._size=[0],this._datatype=f}}t.prototype=new e,t.prototype.createDenseMatrix=function(c,f){return new t(c,f)},Object.defineProperty(t,"name",{value:"DenseMatrix"}),t.prototype.constructor=t,t.prototype.type="DenseMatrix",t.prototype.isDenseMatrix=!0,t.prototype.getDataType=function(){return Fy(this._data,Zn)},t.prototype.storage=function(){return"dense"},t.prototype.datatype=function(){return this._datatype},t.prototype.create=function(c,f){return new t(c,f)},t.prototype.subset=function(c,f,d){switch(arguments.length){case 1:return r(this,c);case 2:case 3:return o(this,c,f,d);default:throw new SyntaxError("Wrong number of arguments")}},t.prototype.get=function(c){if(!Tn(c))throw new TypeError("Array expected");if(c.length!==this._size.length)throw new un(c.length,this._size.length);for(var f=0;f<c.length;f++)jn(c[f],this._size[f]);for(var d=this._data,h=0,m=c.length;h<m;h++){var g=c[h];jn(g,d.length),d=d[g]}return d},t.prototype.set=function(c,f,d){if(!Tn(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new un(c.length,this._size.length,"<");var h,m,g,y=c.map(function(w){return w+1});l(this,y,d);var p=this._data;for(h=0,m=c.length-1;h<m;h++)g=c[h],jn(g,p.length),p=p[g];return g=c[c.length-1],jn(g,p.length),p[g]=f,this};function r(c,f){if(!W1(f))throw new TypeError("Invalid index");var d=f.isScalar();if(d)return c.get(f.min());var h=f.size();if(h.length!==c._size.length)throw new un(h.length,c._size.length);for(var m=f.min(),g=f.max(),y=0,p=c._size.length;y<p;y++)jn(m[y],c._size[y]),jn(g[y],c._size[y]);return new t(i(c._data,f,h.length,0),c._datatype)}function i(c,f,d,h){var m=h===d-1,g=f.dimension(h);return m?g.map(function(y){return jn(y,c.length),c[y]}).valueOf():g.map(function(y){jn(y,c.length);var p=c[y];return i(p,f,d,h+1)}).valueOf()}function o(c,f,d,h){if(!f||f.isIndex!==!0)throw new TypeError("Invalid index");var m=f.size(),g=f.isScalar(),y;if(Vt(d)?(y=d.size(),d=d.valueOf()):y=on(d),g){if(y.length!==0)throw new TypeError("Scalar expected");c.set(f.min(),d,h)}else{if(!Ph(y,m))try{y.length===0?d=UB([d],m):d=UB(d,m),y=on(d)}catch{}if(m.length<c._size.length)throw new un(m.length,c._size.length,"<");if(y.length<m.length){for(var p=0,w=0;m[p]===1&&y[p]===1;)p++;for(;m[p]===1;)w++,p++;d=mY(d,m.length,w,y)}if(!Ph(m,y))throw new un(m,y,">");var b=f.max().map(function(x){return x+1});l(c,b,h);var v=m.length,S=0;s(c._data,f,d,v,S)}return c}function s(c,f,d,h,m){var g=m===h-1,y=f.dimension(m);g?y.forEach(function(p,w){jn(p),c[p]=d[w[0]]}):y.forEach(function(p,w){jn(p),s(c[p],f,d[w[0]],h,m+1)})}t.prototype.resize=function(c,f,d){if(!js(c))throw new TypeError("Array or Matrix expected");var h=c.valueOf().map(g=>Array.isArray(g)&&g.length===1?g[0]:g),m=d?this.clone():this;return a(m,h,f)};function a(c,f,d){if(f.length===0){for(var h=c._data;Tn(h);)h=h[0];return h}return c._size=f.slice(0),c._data=vg(c._data,c._size,d),c}t.prototype.reshape=function(c,f){var d=f?this.clone():this;d._data=Ok(d._data,c);var h=d._size.reduce((m,g)=>m*g);return d._size=kk(c,h),d};function l(c,f,d){for(var h=c._size.slice(0),m=!1;h.length<f.length;)h.push(0),m=!0;for(var g=0,y=f.length;g<y;g++)f[g]>h[g]&&(h[g]=f[g],m=!0);m&&a(c,h,d)}t.prototype.clone=function(){var c=new t({data:Kt(this._data),size:Kt(this._size),datatype:this._datatype});return c},t.prototype.size=function(){return this._size.slice(0)},t.prototype.map=function(c){var f=this,d=bY(c),h=function y(p,w){return Tn(p)?p.map(function(b,v){return y(b,w.concat(v))}):d===1?c(p):d===2?c(p,w):c(p,w,f)},m=h(this._data,[]),g=this._datatype!==void 0?Fy(m,Zn):void 0;return new t(m,g)},t.prototype.forEach=function(c){var f=this,d=function h(m,g){Tn(m)?m.forEach(function(y,p){h(y,g.concat(p))}):c(m,g,f)};d(this._data,[])},t.prototype[Symbol.iterator]=function*(){var c=function*f(d,h){if(Tn(d))for(var m=0;m<d.length;m++)yield*f(d[m],h.concat(m));else yield{value:d,index:h}};yield*c(this._data,[])},t.prototype.rows=function(){var c=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var d=this._data;for(var h of d)c.push(new t([h],this._datatype));return c},t.prototype.columns=function(){var c=this,f=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var h=this._data,m=function(p){var w=h.map(b=>[b[p]]);f.push(new t(w,c._datatype))},g=0;g<d[1];g++)m(g);return f},t.prototype.toArray=function(){return Kt(this._data)},t.prototype.valueOf=function(){return this._data},t.prototype.format=function(c){return fn(this._data,c)},t.prototype.toString=function(){return fn(this._data)},t.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},t.prototype.diagonal=function(c){if(c){if(en(c)&&(c=c.toNumber()),!rn(c)||!kt(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var f=c>0?c:0,d=c<0?-c:0,h=this._size[0],m=this._size[1],g=Math.min(h-d,m-f),y=[],p=0;p<g;p++)y[p]=this._data[p+d][p+f];return new t({data:y,size:[g],datatype:this._datatype})},t.diagonal=function(c,f,d,h){if(!Tn(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(M){if(en(M)&&(M=M.toNumber()),!rn(M)||!kt(M)||M<1)throw new Error("Size values must be positive integers");return M}),d){if(en(d)&&(d=d.toNumber()),!rn(d)||!kt(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var m=d>0?d:0,g=d<0?-d:0,y=c[0],p=c[1],w=Math.min(y-g,p-m),b;if(Tn(f)){if(f.length!==w)throw new Error("Invalid value array length");b=function(A){return f[A]}}else if(Vt(f)){var v=f.size();if(v.length!==1||v[0]!==w)throw new Error("Invalid matrix length");b=function(A){return f.get([A])}}else b=function(){return f};h||(h=en(b(0))?b(0).mul(0):0);var S=[];if(c.length>0){S=vg(S,c,h);for(var x=0;x<w;x++)S[x+g][x+m]=b(x)}return new t({data:S,size:[y,p]})},t.fromJSON=function(c){return new t(c)},t.prototype.swapRows=function(c,f){if(!rn(c)||!kt(c)||!rn(f)||!kt(f))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return jn(c,this._size[0]),jn(f,this._size[0]),t._swapRows(c,f,this._data),this},t._swapRows=function(c,f,d){var h=d[c];d[c]=d[f],d[f]=h};function u(c){return Vt(c)?u(c.valueOf()):Tn(c)?c.map(u):c}return t},{isClass:!0}),VB="clone",Ahe=["typed"],The=ae(VB,Ahe,n=>{var{typed:e}=n;return e(VB,{any:Kt})});function wY(n){var e=n.length,t=n[0].length,r,i,o=[];for(i=0;i<t;i++){var s=[];for(r=0;r<e;r++)s.push(n[r][i]);o.push(s)}return o}function Gg(n){for(var e=0;e<n.length;e++)if(js(n[e]))return!0;return!1}function sc(n,e){Vt(n)&&(n=n.valueOf());for(var t=0,r=n.length;t<r;t++){var i=n[t];Array.isArray(i)?sc(i,e):e(i)}}function hn(n,e,t){return n&&typeof n.map=="function"?n.map(function(r){return hn(r,e)}):e(n)}function a2(n,e,t){var r=Array.isArray(n)?on(n):n.size();if(e<0||e>=r.length)throw new Ia(e,r.length);return Vt(n)?n.create(vE(n.valueOf(),e,t)):vE(n,e,t)}function vE(n,e,t){var r,i,o,s;if(e<=0)if(Array.isArray(n[0])){for(s=wY(n),i=[],r=0;r<s.length;r++)i[r]=vE(s[r],e-1,t);return i}else{for(o=n[0],r=1;r<n.length;r++)o=t(o,n[r]);return o}else{for(i=[],r=0;r<n.length;r++)i[r]=vE(n[r],e-1,t);return i}}function $B(n,e,t,r,i,o,s,a,l,u,c){var f=n._values,d=n._index,h=n._ptr,m,g,y,p;if(r)for(g=h[e],y=h[e+1],m=g;m<y;m++)p=d[m],t[p]!==o?(t[p]=o,s.push(p),r[p]=f[m]):(r[p]=a(r[p],f[m]),i[p]=o);else for(g=h[e],y=h[e+1],m=g;m<y;m++)p=d[m],t[p]!==o?(t[p]=o,s.push(p)):i[p]=o}var HB="isInteger",Dhe=["typed"],Nhe=ae(HB,Dhe,n=>{var{typed:e}=n;return e(HB,{number:kt,BigNumber:function(r){return r.isInt()},Fraction:function(r){return r.d===1&&isFinite(r.n)},"Array | Matrix":e.referToSelf(t=>r=>hn(r,t))})}),ul="number",qg="number, number";function SY(n){return Math.abs(n)}SY.signature=ul;function _Y(n,e){return n+e}_Y.signature=qg;function EY(n,e){return n-e}EY.signature=qg;function MY(n,e){return n*e}MY.signature=qg;function CY(n){return-n}CY.signature=ul;function AY(n){return n}AY.signature=ul;function R0(n){return Nfe(n)}R0.signature=ul;function TY(n){return n*n*n}TY.signature=ul;function DY(n){return Math.exp(n)}DY.signature=ul;function NY(n){return Pfe(n)}NY.signature=ul;function PY(n,e){if(!kt(n)||!kt(e))throw new Error("Parameters in function lcm must be integer numbers");if(n===0||e===0)return 0;for(var t,r=n*e;e!==0;)t=e,e=n%t,n=t;return Math.abs(r/n)}PY.signature=qg;function Phe(n,e){return Math.log(n)}function RY(n){return Tfe(n)}RY.signature=ul;function OY(n){return Afe(n)}OY.signature=ul;function WB(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,t=e<0;if(t&&(e=-e),e===0)throw new Error("Root must be non-zero");if(n<0&&Math.abs(e)%2!==1)throw new Error("Root must be odd when a is negative.");if(n===0)return t?1/0:0;if(!isFinite(n))return t?0:n;var r=Math.pow(Math.abs(n),1/e);return r=n<0?-r:r,t?1/r:r}function NN(n){return uf(n)}NN.signature=ul;function kY(n){return n*n}kY.signature=ul;function IY(n,e){var t,r,i,o=0,s=1,a=1,l=0;if(!kt(n)||!kt(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)r=Math.floor(n/e),i=n-r*e,t=o,o=s-r*o,s=t,t=a,a=l-r*a,l=t,n=e,e=i;var u;return n<0?u=[-n,-s,-l]:u=[n,n?s:0,l],u}IY.signature=qg;function LY(n,e){return n*n<1&&e===1/0||n*n>1&&e===-1/0?0:Math.pow(n,e)}LY.signature=qg;function Xv(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!kt(e)||e<0||e>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(WX(n,e))}var Rhe="number",Xg="number, number";function FY(n,e){if(!kt(n)||!kt(e))throw new Error("Integers expected in function bitAnd");return n&e}FY.signature=Xg;function BY(n){if(!kt(n))throw new Error("Integer expected in function bitNot");return~n}BY.signature=Rhe;function zY(n,e){if(!kt(n)||!kt(e))throw new Error("Integers expected in function bitOr");return n|e}zY.signature=Xg;function UY(n,e){if(!kt(n)||!kt(e))throw new Error("Integers expected in function bitXor");return n^e}UY.signature=Xg;function VY(n,e){if(!kt(n)||!kt(e))throw new Error("Integers expected in function leftShift");return n<<e}VY.signature=Xg;function $Y(n,e){if(!kt(n)||!kt(e))throw new Error("Integers expected in function rightArithShift");return n>>e}$Y.signature=Xg;function HY(n,e){if(!kt(n)||!kt(e))throw new Error("Integers expected in function rightLogShift");return n>>>e}HY.signature=Xg;function Hu(n,e){if(e<n)return 1;if(e===n)return e;var t=e+n>>1;return Hu(n,t)*Hu(t+1,e)}function WY(n,e){if(!kt(n)||n<0)throw new TypeError("Positive integer value expected in function combinations");if(!kt(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>n)throw new TypeError("k must be less than or equal to n");for(var t=n-e,r=1,i=e<t?t+1:e+1,o=2,s=e<t?e:t,a=i;a<=n;++a)for(r*=a;o<=s&&r%o===0;)r/=o,++o;return o<=s&&(r/=Hu(o,s)),r}WY.signature="number, number";var Ohe=Math.PI,khe=2*Math.PI,Ihe=Math.E,Lhe=1.618033988749895,Fhe="number",Ik="number, number";function jY(n){return!n}jY.signature=Fhe;function GY(n,e){return!!(n||e)}GY.signature=Ik;function qY(n,e){return!!n!=!!e}qY.signature=Ik;function XY(n,e){return!!(n&&e)}XY.signature=Ik;function yE(n){var e;if(kt(n))return n<=0?isFinite(n)?1/0:NaN:n>171?1/0:Hu(1,n-1);if(n<.5)return Math.PI/(Math.sin(Math.PI*n)*yE(1-n));if(n>=171.35)return 1/0;if(n>85){var t=n*n,r=t*n,i=r*n,o=i*n;return Math.sqrt(2*Math.PI/n)*Math.pow(n/Math.E,n)*(1+1/(12*n)+1/(288*t)-139/(51840*r)-571/(2488320*i)+163879/(209018880*o)+5246819/(75246796800*o*n))}--n,e=Xm[0];for(var s=1;s<Xm.length;++s)e+=Xm[s]/(n+s);var a=n+YY+.5;return Math.sqrt(2*Math.PI)*Math.pow(a,n+.5)*Math.exp(-a)*e}yE.signature="number";var YY=4.7421875,Xm=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],KY=.9189385332046728,Bhe=5,zhe=7,jB=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function xE(n){if(n<0)return NaN;if(n===0)return 1/0;if(!isFinite(n))return n;if(n<.5)return Math.log(Math.PI/Math.sin(Math.PI*n))-xE(1-n);n=n-1;for(var e=n+Bhe+.5,t=jB[0],r=zhe-1;r>=1;r--)t+=jB[r]/(n+r);return KY+(n+.5)*Math.log(e)-e+Math.log(t)}xE.signature="number";var _o="number";function ZY(n){return Lfe(n)}ZY.signature=_o;function JY(n){return Math.atan(1/n)}JY.signature=_o;function QY(n){return isFinite(n)?(Math.log((n+1)/n)+Math.log(n/(n-1)))/2:0}QY.signature=_o;function eK(n){return Math.asin(1/n)}eK.signature=_o;function tK(n){var e=1/n;return Math.log(e+Math.sqrt(e*e+1))}tK.signature=_o;function nK(n){return Math.acos(1/n)}nK.signature=_o;function rK(n){var e=1/n,t=Math.sqrt(e*e-1);return Math.log(t+e)}rK.signature=_o;function iK(n){return Ffe(n)}iK.signature=_o;function oK(n){return Bfe(n)}oK.signature=_o;function sK(n){return 1/Math.tan(n)}sK.signature=_o;function aK(n){var e=Math.exp(2*n);return(e+1)/(e-1)}aK.signature=_o;function lK(n){return 1/Math.sin(n)}lK.signature=_o;function uK(n){return n===0?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(n)-Math.exp(-n)))*uf(n)}uK.signature=_o;function cK(n){return 1/Math.cos(n)}cK.signature=_o;function fK(n){return 2/(Math.exp(n)+Math.exp(-n))}fK.signature=_o;function dK(n){return Ufe(n)}dK.signature=_o;var l2="number";function hK(n){return n<0}hK.signature=l2;function pK(n){return n>0}pK.signature=l2;function mK(n){return n===0}mK.signature=l2;function gK(n){return Number.isNaN(n)}gK.signature=l2;var GB="isNegative",Uhe=["typed"],Vhe=ae(GB,Uhe,n=>{var{typed:e}=n;return e(GB,{number:hK,BigNumber:function(r){return r.isNeg()&&!r.isZero()&&!r.isNaN()},Fraction:function(r){return r.s<0},Unit:e.referToSelf(t=>r=>e.find(t,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(t=>r=>hn(r,t))})}),qB="isNumeric",$he=["typed"],Hhe=ae(qB,$he,n=>{var{typed:e}=n;return e(qB,{"number | BigNumber | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":e.referToSelf(t=>r=>hn(r,t))})}),XB="hasNumericValue",Whe=["typed","isNumeric"],jhe=ae(XB,Whe,n=>{var{typed:e,isNumeric:t}=n;return e(XB,{boolean:()=>!0,string:function(i){return i.trim().length>0&&!isNaN(Number(i))},any:function(i){return t(i)}})}),YB="isPositive",Ghe=["typed"],qhe=ae(YB,Ghe,n=>{var{typed:e}=n;return e(YB,{number:pK,BigNumber:function(r){return!r.isNeg()&&!r.isZero()&&!r.isNaN()},Fraction:function(r){return r.s>0&&r.n>0},Unit:e.referToSelf(t=>r=>e.find(t,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(t=>r=>hn(r,t))})}),KB="isZero",Xhe=["typed"],Yhe=ae(KB,Xhe,n=>{var{typed:e}=n;return e(KB,{number:mK,BigNumber:function(r){return r.isZero()},Complex:function(r){return r.re===0&&r.im===0},Fraction:function(r){return r.d===1&&r.n===0},Unit:e.referToSelf(t=>r=>e.find(t,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(t=>r=>hn(r,t))})}),ZB="isNaN",Khe=["typed"],Zhe=ae(ZB,Khe,n=>{var{typed:e}=n;return e(ZB,{number:gK,BigNumber:function(r){return r.isNaN()},Fraction:function(r){return!1},Complex:function(r){return r.isNaN()},Unit:function(r){return Number.isNaN(r.value)},"Array | Matrix":e.referToSelf(t=>r=>hn(r,t))})}),JB="typeOf",Jhe=["typed"],Qhe=ae(JB,Jhe,n=>{var{typed:e}=n;return e(JB,{any:Zn})});function Ta(n,e,t){if(t==null)return n.eq(e);if(n.eq(e))return!0;if(n.isNaN()||e.isNaN())return!1;if(n.isFinite()&&e.isFinite()){var r=n.minus(e).abs();if(r.isZero())return!0;var i=n.constructor.max(n.abs(),e.abs());return r.lte(i.times(t))}return!1}function epe(n,e,t){return Wo(n.re,e.re,t)&&Wo(n.im,e.im,t)}var Yg=ae("compareUnits",["typed"],n=>{var{typed:e}=n;return{"Unit, Unit":e.referToSelf(t=>(r,i)=>{if(!r.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(t,[r.valueType(),i.valueType()])(r.value,i.value)})}}),bE="equalScalar",tpe=["typed","config"],npe=ae(bE,tpe,n=>{var{typed:e,config:t}=n,r=Yg({typed:e});return e(bE,{"boolean, boolean":function(o,s){return o===s},"number, number":function(o,s){return Wo(o,s,t.epsilon)},"BigNumber, BigNumber":function(o,s){return o.eq(s)||Ta(o,s,t.epsilon)},"Fraction, Fraction":function(o,s){return o.equals(s)},"Complex, Complex":function(o,s){return epe(o,s,t.epsilon)}},r)});ae(bE,["typed","config"],n=>{var{typed:e,config:t}=n;return e(bE,{"number, number":function(i,o){return Wo(i,o,t.epsilon)}})});var rpe="SparseMatrix",ipe=["typed","equalScalar","Matrix"],ope=ae(rpe,ipe,n=>{var{typed:e,equalScalar:t,Matrix:r}=n;function i(g,y){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(y&&!Hi(y))throw new Error("Invalid datatype: "+y);if(Vt(g))o(this,g,y);else if(g&&Tn(g.index)&&Tn(g.ptr)&&Tn(g.size))this._values=g.values,this._index=g.index,this._ptr=g.ptr,this._size=g.size,this._datatype=y||g.datatype;else if(Tn(g))s(this,g,y);else{if(g)throw new TypeError("Unsupported type of data ("+Zn(g)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=y}}function o(g,y,p){y.type==="SparseMatrix"?(g._values=y._values?Kt(y._values):void 0,g._index=Kt(y._index),g._ptr=Kt(y._ptr),g._size=Kt(y._size),g._datatype=p||y._datatype):s(g,y.valueOf(),p||y._datatype)}function s(g,y,p){g._values=[],g._index=[],g._ptr=[],g._datatype=p;var w=y.length,b=0,v=t,S=0;if(Hi(p)&&(v=e.find(t,[p,p])||t,S=e.convert(0,p)),w>0){var x=0;do{g._ptr.push(g._index.length);for(var M=0;M<w;M++){var A=y[M];if(Tn(A)){if(x===0&&b<A.length&&(b=A.length),x<A.length){var T=A[x];v(T,S)||(g._values.push(T),g._index.push(M))}}else x===0&&b<1&&(b=1),v(A,S)||(g._values.push(A),g._index.push(M))}x++}while(x<b)}g._ptr.push(g._index.length),g._size=[w,b]}i.prototype=new r,i.prototype.createSparseMatrix=function(g,y){return new i(g,y)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return Fy(this._values,Zn)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(g,y){return new i(g,y)},i.prototype.density=function(){var g=this._size[0],y=this._size[1];return g!==0&&y!==0?this._index.length/(g*y):0},i.prototype.subset=function(g,y,p){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return a(this,g);case 2:case 3:return l(this,g,y,p);default:throw new SyntaxError("Wrong number of arguments")}};function a(g,y){if(!W1(y))throw new TypeError("Invalid index");var p=y.isScalar();if(p)return g.get(y.min());var w=y.size();if(w.length!==g._size.length)throw new un(w.length,g._size.length);var b,v,S,x,M=y.min(),A=y.max();for(b=0,v=g._size.length;b<v;b++)jn(M[b],g._size[b]),jn(A[b],g._size[b]);var T=g._values,C=g._index,D=g._ptr,R=y.dimension(0),B=y.dimension(1),F=[],U=[];R.forEach(function(L,X){U[L]=X[0],F[L]=!0});var N=T?[]:void 0,I=[],V=[];return B.forEach(function(L){for(V.push(I.length),S=D[L],x=D[L+1];S<x;S++)b=C[S],F[b]===!0&&(I.push(U[b]),N&&N.push(T[S]))}),V.push(I.length),new i({values:N,index:I,ptr:V,size:w,datatype:g._datatype})}function l(g,y,p,w){if(!y||y.isIndex!==!0)throw new TypeError("Invalid index");var b=y.size(),v=y.isScalar(),S;if(Vt(p)?(S=p.size(),p=p.toArray()):S=on(p),v){if(S.length!==0)throw new TypeError("Scalar expected");g.set(y.min(),p,w)}else{if(b.length!==1&&b.length!==2)throw new un(b.length,g._size.length,"<");if(S.length<b.length){for(var x=0,M=0;b[x]===1&&S[x]===1;)x++;for(;b[x]===1;)M++,x++;p=mY(p,b.length,M,S)}if(!Ph(b,S))throw new un(b,S,">");if(b.length===1){var A=y.dimension(0);A.forEach(function(D,R){jn(D),g.set([D,0],p[R[0]],w)})}else{var T=y.dimension(0),C=y.dimension(1);T.forEach(function(D,R){jn(D),C.forEach(function(B,F){jn(B),g.set([D,B],p[R[0]][F[0]],w)})})}}return g}i.prototype.get=function(g){if(!Tn(g))throw new TypeError("Array expected");if(g.length!==this._size.length)throw new un(g.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var y=g[0],p=g[1];jn(y,this._size[0]),jn(p,this._size[1]);var w=u(y,this._ptr[p],this._ptr[p+1],this._index);return w<this._ptr[p+1]&&this._index[w]===y?this._values[w]:0},i.prototype.set=function(g,y,p){if(!Tn(g))throw new TypeError("Array expected");if(g.length!==this._size.length)throw new un(g.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var w=g[0],b=g[1],v=this._size[0],S=this._size[1],x=t,M=0;Hi(this._datatype)&&(x=e.find(t,[this._datatype,this._datatype])||t,M=e.convert(0,this._datatype)),(w>v-1||b>S-1)&&(d(this,Math.max(w+1,v),Math.max(b+1,S),p),v=this._size[0],S=this._size[1]),jn(w,v),jn(b,S);var A=u(w,this._ptr[b],this._ptr[b+1],this._index);return A<this._ptr[b+1]&&this._index[A]===w?x(y,M)?c(A,b,this._values,this._index,this._ptr):this._values[A]=y:x(y,M)||f(A,w,b,y,this._values,this._index,this._ptr),this};function u(g,y,p,w){if(p-y===0)return p;for(var b=y;b<p;b++)if(w[b]===g)return b;return y}function c(g,y,p,w,b){p.splice(g,1),w.splice(g,1);for(var v=y+1;v<b.length;v++)b[v]--}function f(g,y,p,w,b,v,S){b.splice(g,0,w),v.splice(g,0,y);for(var x=p+1;x<S.length;x++)S[x]++}i.prototype.resize=function(g,y,p){if(!js(g))throw new TypeError("Array or Matrix expected");var w=g.valueOf().map(v=>Array.isArray(v)&&v.length===1?v[0]:v);if(w.length!==2)throw new Error("Only two dimensions matrix are supported");w.forEach(function(v){if(!rn(v)||!kt(v)||v<0)throw new TypeError("Invalid size, must contain positive integers (size: "+fn(w)+")")});var b=p?this.clone():this;return d(b,w[0],w[1],y)};function d(g,y,p,w){var b=w||0,v=t,S=0;Hi(g._datatype)&&(v=e.find(t,[g._datatype,g._datatype])||t,S=e.convert(0,g._datatype),b=e.convert(b,g._datatype));var x=!v(b,S),M=g._size[0],A=g._size[1],T,C,D;if(p>A){for(C=A;C<p;C++)if(g._ptr[C]=g._values.length,x)for(T=0;T<M;T++)g._values.push(b),g._index.push(T);g._ptr[p]=g._values.length}else p<A&&(g._ptr.splice(p+1,A-p),g._values.splice(g._ptr[p],g._values.length),g._index.splice(g._ptr[p],g._index.length));if(A=p,y>M){if(x){var R=0;for(C=0;C<A;C++){g._ptr[C]=g._ptr[C]+R,D=g._ptr[C+1]+R;var B=0;for(T=M;T<y;T++,B++)g._values.splice(D+B,0,b),g._index.splice(D+B,0,T),R++}g._ptr[A]=g._values.length}}else if(y<M){var F=0;for(C=0;C<A;C++){g._ptr[C]=g._ptr[C]-F;var U=g._ptr[C],N=g._ptr[C+1]-F;for(D=U;D<N;D++)T=g._index[D],T>y-1&&(g._values.splice(D,1),g._index.splice(D,1),F++)}g._ptr[C]=g._values.length}return g._size[0]=y,g._size[1]=p,g}i.prototype.reshape=function(g,y){if(!Tn(g))throw new TypeError("Array expected");if(g.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");g.forEach(function(L){if(!rn(L)||!kt(L)||L<=-2||L===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+fn(g)+")")});var p=this._size[0]*this._size[1];g=kk(g,p);var w=g[0]*g[1];if(p!==w)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var b=y?this.clone():this;if(this._size[0]===g[0]&&this._size[1]===g[1])return b;for(var v=[],S=0;S<b._ptr.length;S++)for(var x=0;x<b._ptr[S+1]-b._ptr[S];x++)v.push(S);for(var M=b._values.slice(),A=b._index.slice(),T=0;T<b._index.length;T++){var C=A[T],D=v[T],R=C*b._size[1]+D;v[T]=R%g[1],A[T]=Math.floor(R/g[1])}b._values.length=0,b._index.length=0,b._ptr.length=g[1]+1,b._size=g.slice();for(var B=0;B<b._ptr.length;B++)b._ptr[B]=0;for(var F=0;F<M.length;F++){var U=A[F],N=v[F],I=M[F],V=u(U,b._ptr[N],b._ptr[N+1],b._index);f(V,U,N,I,b._values,b._index,b._ptr)}return b},i.prototype.clone=function(){var g=new i({values:this._values?Kt(this._values):void 0,index:Kt(this._index),ptr:Kt(this._ptr),size:Kt(this._size),datatype:this._datatype});return g},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(g,y){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var p=this,w=this._size[0],b=this._size[1],v=bY(g),S=function(M,A,T){return v===1?g(M):v===2?g(M,[A,T]):g(M,[A,T],p)};return h(this,0,w-1,0,b-1,S,y)};function h(g,y,p,w,b,v,S){var x=[],M=[],A=[],T=t,C=0;Hi(g._datatype)&&(T=e.find(t,[g._datatype,g._datatype])||t,C=e.convert(0,g._datatype));for(var D=function(Y,re,fe){Y=v(Y,re,fe),T(Y,C)||(x.push(Y),M.push(re))},R=w;R<=b;R++){A.push(x.length);var B=g._ptr[R],F=g._ptr[R+1];if(S)for(var U=B;U<F;U++){var N=g._index[U];N>=y&&N<=p&&D(g._values[U],N-y,R-w)}else{for(var I={},V=B;V<F;V++){var L=g._index[V];I[L]=g._values[V]}for(var X=y;X<=p;X++){var Z=X in I?I[X]:0;D(Z,X-y,R-w)}}}return A.push(x.length),new i({values:x,index:M,ptr:A,size:[p-y+1,b-w+1]})}i.prototype.forEach=function(g,y){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var p=this,w=this._size[0],b=this._size[1],v=0;v<b;v++){var S=this._ptr[v],x=this._ptr[v+1];if(y)for(var M=S;M<x;M++){var A=this._index[M];g(this._values[M],[A,v],p)}else{for(var T={},C=S;C<x;C++){var D=this._index[C];T[D]=this._values[C]}for(var R=0;R<w;R++){var B=R in T?T[R]:0;g(B,[R,v],p)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var g=this._size[1],y=0;y<g;y++)for(var p=this._ptr[y],w=this._ptr[y+1],b=p;b<w;b++){var v=this._index[b];yield{value:this._values[b],index:[v,y]}}},i.prototype.toArray=function(){return m(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return m(this._values,this._index,this._ptr,this._size,!1)};function m(g,y,p,w,b){var v=w[0],S=w[1],x=[],M,A;for(M=0;M<v;M++)for(x[M]=[],A=0;A<S;A++)x[M][A]=0;for(A=0;A<S;A++)for(var T=p[A],C=p[A+1],D=T;D<C;D++)M=y[D],x[M][A]=g?b?Kt(g[D]):g[D]:1;return x}return i.prototype.format=function(g){for(var y=this._size[0],p=this._size[1],w=this.density(),b="Sparse Matrix ["+fn(y,g)+" x "+fn(p,g)+"] density: "+fn(w,g)+`
`,v=0;v<p;v++)for(var S=this._ptr[v],x=this._ptr[v+1],M=S;M<x;M++){var A=this._index[M];b+=`
    (`+fn(A,g)+", "+fn(v,g)+") ==> "+(this._values?fn(this._values[M],g):"X")}return b},i.prototype.toString=function(){return fn(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(g){if(g){if(en(g)&&(g=g.toNumber()),!rn(g)||!kt(g))throw new TypeError("The parameter k must be an integer number")}else g=0;var y=g>0?g:0,p=g<0?-g:0,w=this._size[0],b=this._size[1],v=Math.min(w-p,b-y),S=[],x=[],M=[];M[0]=0;for(var A=y;A<b&&S.length<v;A++)for(var T=this._ptr[A],C=this._ptr[A+1],D=T;D<C;D++){var R=this._index[D];if(R===A-y+p){S.push(this._values[D]),x[S.length-1]=R-p;break}}return M.push(S.length),new i({values:S,index:x,ptr:M,size:[v,1]})},i.fromJSON=function(g){return new i(g)},i.diagonal=function(g,y,p,w,b){if(!Tn(g))throw new TypeError("Array expected, size parameter");if(g.length!==2)throw new Error("Only two dimensions matrix are supported");if(g=g.map(function(L){if(en(L)&&(L=L.toNumber()),!rn(L)||!kt(L)||L<1)throw new Error("Size values must be positive integers");return L}),p){if(en(p)&&(p=p.toNumber()),!rn(p)||!kt(p))throw new TypeError("The parameter k must be an integer number")}else p=0;var v=t,S=0;Hi(b)&&(v=e.find(t,[b,b])||t,S=e.convert(0,b));var x=p>0?p:0,M=p<0?-p:0,A=g[0],T=g[1],C=Math.min(A-M,T-x),D;if(Tn(y)){if(y.length!==C)throw new Error("Invalid value array length");D=function(X){return y[X]}}else if(Vt(y)){var R=y.size();if(R.length!==1||R[0]!==C)throw new Error("Invalid matrix length");D=function(X){return y.get([X])}}else D=function(){return y};for(var B=[],F=[],U=[],N=0;N<T;N++){U.push(B.length);var I=N-x;if(I>=0&&I<C){var V=D(I);v(V,S)||(F.push(I+M),B.push(V))}}return U.push(B.length),new i({values:B,index:F,ptr:U,size:[A,T]})},i.prototype.swapRows=function(g,y){if(!rn(g)||!kt(g)||!rn(y)||!kt(y))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return jn(g,this._size[0]),jn(y,this._size[0]),i._swapRows(g,y,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(g,y,p,w,b){for(var v=w[g],S=w[g+1],x=v;x<S;x++)b(p[x],y[x])},i._swapRows=function(g,y,p,w,b,v){for(var S=0;S<p;S++){var x=v[S],M=v[S+1],A=u(g,x,M,b),T=u(y,x,M,b);if(A<M&&T<M&&b[A]===g&&b[T]===y){if(w){var C=w[A];w[A]=w[T],w[T]=C}continue}if(A<M&&b[A]===g&&(T>=M||b[T]!==y)){var D=w?w[A]:void 0;b.splice(T,0,y),w&&w.splice(T,0,D),b.splice(T<=A?A+1:A,1),w&&w.splice(T<=A?A+1:A,1);continue}if(T<M&&b[T]===y&&(A>=M||b[A]!==g)){var R=w?w[T]:void 0;b.splice(A,0,g),w&&w.splice(A,0,R),b.splice(A<=T?T+1:T,1),w&&w.splice(A<=T?T+1:T,1)}}},i},{isClass:!0}),spe="number",ape=["typed"];function lpe(n){var e=n.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var t={"0b":2,"0o":8,"0x":16}[e[1]],r=e[2],i=e[3];return{input:n,radix:t,integerPart:r,fractionalPart:i}}else return null}function upe(n){for(var e=parseInt(n.integerPart,n.radix),t=0,r=0;r<n.fractionalPart.length;r++){var i=parseInt(n.fractionalPart[r],n.radix);t+=i/Math.pow(n.radix,r+1)}var o=e+t;if(isNaN(o))throw new SyntaxError('String "'+n.input+'" is not a valid number');return o}var cpe=ae(spe,ape,n=>{var{typed:e}=n,t=e("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var o=lpe(i);if(o)return upe(o);var s=0,a=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);a&&(s=Number(a[2]),i=a[1]);var l=Number(i);if(isNaN(l))throw new SyntaxError('String "'+i+'" is not a valid number');if(a){if(l>2**s-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));l>=2**(s-1)&&(l=l-2**s)}return l},BigNumber:function(i){return i.toNumber()},Fraction:function(i){return i.valueOf()},Unit:e.referToSelf(r=>i=>{var o=i.clone();return o.value=r(i.value),o}),null:function(i){return 0},"Unit, string | Unit":function(i,o){return i.toNumber(o)},"Array | Matrix":e.referToSelf(r=>i=>hn(i,r))});return t.fromJSON=function(r){return parseFloat(r.value)},t}),QB="string",fpe=["typed"],dpe=ae(QB,fpe,n=>{var{typed:e}=n;return e(QB,{"":function(){return""},number:hh,null:function(r){return"null"},boolean:function(r){return r+""},string:function(r){return r},"Array | Matrix":e.referToSelf(t=>r=>hn(r,t)),any:function(r){return String(r)}})}),e5="boolean",hpe=["typed"],ppe=ae(e5,hpe,n=>{var{typed:e}=n;return e(e5,{"":function(){return!1},boolean:function(r){return r},number:function(r){return!!r},null:function(r){return!1},BigNumber:function(r){return!r.isZero()},string:function(r){var i=r.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;var o=Number(r);if(r!==""&&!isNaN(o))return!!o;throw new Error('Cannot convert "'+r+'" to a boolean')},"Array | Matrix":e.referToSelf(t=>r=>hn(r,t))})}),mpe="bignumber",gpe=["typed","BigNumber"],vpe=ae(mpe,gpe,n=>{var{typed:e,BigNumber:t}=n;return e("bignumber",{"":function(){return new t(0)},number:function(i){return new t(i+"")},string:function(i){var o=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(o){var s=o[2],a=t(o[1]),l=new t(2).pow(Number(s));if(a.gt(l.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var u=new t(2).pow(Number(s)-1);return a.gte(u)?a.sub(l):a}return new t(i)},BigNumber:function(i){return i},Unit:e.referToSelf(r=>i=>{var o=i.clone();return o.value=r(i.value),o}),Fraction:function(i){return new t(i.n).div(i.d).times(i.s)},null:function(i){return new t(0)},"Array | Matrix":e.referToSelf(r=>i=>hn(i,r))})}),ype="complex",xpe=["typed","Complex"],bpe=ae(ype,xpe,n=>{var{typed:e,Complex:t}=n;return e("complex",{"":function(){return t.ZERO},number:function(i){return new t(i,0)},"number, number":function(i,o){return new t(i,o)},"BigNumber, BigNumber":function(i,o){return new t(i.toNumber(),o.toNumber())},Fraction:function(i){return new t(i.valueOf(),0)},Complex:function(i){return i.clone()},string:function(i){return t(i)},null:function(i){return t(0)},Object:function(i){if("re"in i&&"im"in i)return new t(i.re,i.im);if("r"in i&&"phi"in i||"abs"in i&&"arg"in i)return new t(i);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":e.referToSelf(r=>i=>hn(i,r))})}),wpe="fraction",Spe=["typed","Fraction"],_pe=ae(wpe,Spe,n=>{var{typed:e,Fraction:t}=n;return e("fraction",{number:function(i){if(!isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new t(i)},string:function(i){return new t(i)},"number, number":function(i,o){return new t(i,o)},null:function(i){return new t(0)},BigNumber:function(i){return new t(i.toString())},Fraction:function(i){return i},Unit:e.referToSelf(r=>i=>{var o=i.clone();return o.value=r(i.value),o}),Object:function(i){return new t(i)},"Array | Matrix":e.referToSelf(r=>i=>hn(i,r))})}),t5="matrix",Epe=["typed","Matrix","DenseMatrix","SparseMatrix"],Mpe=ae(t5,Epe,n=>{var{typed:e,Matrix:t,DenseMatrix:r,SparseMatrix:i}=n;return e(t5,{"":function(){return o([])},string:function(a){return o([],a)},"string, string":function(a,l){return o([],a,l)},Array:function(a){return o(a)},Matrix:function(a){return o(a,a.storage())},"Array | Matrix, string":o,"Array | Matrix, string, string":o});function o(s,a,l){if(a==="dense"||a==="default"||a===void 0)return new r(s,l);if(a==="sparse")return new i(s,l);throw new TypeError("Unknown matrix type "+JSON.stringify(a)+".")}}),n5="matrixFromFunction",Cpe=["typed","matrix","isZero"],Ape=ae(n5,Cpe,n=>{var{typed:e,matrix:t,isZero:r}=n;return e(n5,{"Array | Matrix, function, string, string":function(s,a,l,u){return i(s,a,l,u)},"Array | Matrix, function, string":function(s,a,l){return i(s,a,l)},"Matrix, function":function(s,a){return i(s,a,"dense")},"Array, function":function(s,a){return i(s,a,"dense").toArray()},"Array | Matrix, string, function":function(s,a,l){return i(s,l,a)},"Array | Matrix, string, string, function":function(s,a,l,u){return i(s,u,a,l)}});function i(o,s,a,l){var u;return l!==void 0?u=t(a,l):u=t(a),u.resize(o),u.forEach(function(c,f){var d=s(f);r(d)||u.set(f,d)}),u}}),r5="matrixFromRows",Tpe=["typed","matrix","flatten","size"],Dpe=ae(r5,Tpe,n=>{var{typed:e,matrix:t,flatten:r,size:i}=n;return e(r5,{"...Array":function(l){return o(l)},"...Matrix":function(l){return t(o(l.map(u=>u.toArray())))}});function o(a){if(a.length===0)throw new TypeError("At least one row is needed to construct a matrix.");var l=s(a[0]),u=[];for(var c of a){var f=s(c);if(f!==l)throw new TypeError("The vectors had different length: "+(l|0)+"  "+(f|0));u.push(r(c))}return u}function s(a){var l=i(a);if(l.length===1)return l[0];if(l.length===2){if(l[0]===1)return l[1];if(l[1]===1)return l[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),i5="matrixFromColumns",Npe=["typed","matrix","flatten","size"],Ppe=ae(i5,Npe,n=>{var{typed:e,matrix:t,flatten:r,size:i}=n;return e(i5,{"...Array":function(l){return o(l)},"...Matrix":function(l){return t(o(l.map(u=>u.toArray())))}});function o(a){if(a.length===0)throw new TypeError("At least one column is needed to construct a matrix.");for(var l=s(a[0]),u=[],c=0;c<l;c++)u[c]=[];for(var f of a){var d=s(f);if(d!==l)throw new TypeError("The vectors had different length: "+(l|0)+"  "+(d|0));for(var h=r(f),m=0;m<l;m++)u[m].push(h[m])}return u}function s(a){var l=i(a);if(l.length===1)return l[0];if(l.length===2){if(l[0]===1)return l[1];if(l[1]===1)return l[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),o5="splitUnit",Rpe=["typed"],Ope=ae(o5,Rpe,n=>{var{typed:e}=n;return e(o5,{"Unit, Array":function(r,i){return r.splitUnit(i)}})}),s5="unaryMinus",kpe=["typed"],Ipe=ae(s5,kpe,n=>{var{typed:e}=n;return e(s5,{number:CY,"Complex | BigNumber | Fraction":t=>t.neg(),Unit:e.referToSelf(t=>r=>{var i=r.clone();return i.value=e.find(t,i.valueType())(r.value),i}),"Array | Matrix":e.referToSelf(t=>r=>hn(r,t))})}),a5="unaryPlus",Lpe=["typed","config","BigNumber"],Fpe=ae(a5,Lpe,n=>{var{typed:e,config:t,BigNumber:r}=n;return e(a5,{number:AY,Complex:function(o){return o},BigNumber:function(o){return o},Fraction:function(o){return o},Unit:function(o){return o.clone()},"Array | Matrix":e.referToSelf(i=>o=>hn(o,i)),"boolean | string":function(o){return t.number==="BigNumber"?new r(+o):+o}})}),l5="abs",Bpe=["typed"],zpe=ae(l5,Bpe,n=>{var{typed:e}=n;return e(l5,{number:SY,"Complex | BigNumber | Fraction | Unit":t=>t.abs(),"Array | Matrix":e.referToSelf(t=>r=>hn(r,t))})}),u5="apply",Upe=["typed","isInteger"],Lk=ae(u5,Upe,n=>{var{typed:e,isInteger:t}=n;return e(u5,{"Array | Matrix, number | BigNumber, function":function(i,o,s){if(!t(o))throw new TypeError("Integer number expected for dimension");var a=Array.isArray(i)?on(i):i.size();if(o<0||o>=a.length)throw new Ia(o,a.length);return Vt(i)?i.create(wE(i.valueOf(),o,s)):wE(i,o,s)}})});function wE(n,e,t){var r,i,o;if(e<=0)if(Array.isArray(n[0])){for(o=Vpe(n),i=[],r=0;r<o.length;r++)i[r]=wE(o[r],e-1,t);return i}else return t(n);else{for(i=[],r=0;r<n.length;r++)i[r]=wE(n[r],e-1,t);return i}}function Vpe(n){var e=n.length,t=n[0].length,r,i,o=[];for(i=0;i<t;i++){var s=[];for(r=0;r<e;r++)s.push(n[r][i]);o.push(s)}return o}var c5="addScalar",$pe=["typed"],Hpe=ae(c5,$pe,n=>{var{typed:e}=n;return e(c5,{"number, number":_Y,"Complex, Complex":function(r,i){return r.add(i)},"BigNumber, BigNumber":function(r,i){return r.plus(i)},"Fraction, Fraction":function(r,i){return r.add(i)},"Unit, Unit":e.referToSelf(t=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var o=r.clone();return o.value=e.find(t,[o.valueType(),i.valueType()])(o.value,i.value),o.fixPrefix=!1,o})})}),f5="subtractScalar",Wpe=["typed"],jpe=ae(f5,Wpe,n=>{var{typed:e}=n;return e(f5,{"number, number":EY,"Complex, Complex":function(r,i){return r.sub(i)},"BigNumber, BigNumber":function(r,i){return r.minus(i)},"Fraction, Fraction":function(r,i){return r.sub(i)},"Unit, Unit":e.referToSelf(t=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var o=r.clone();return o.value=e.find(t,[o.valueType(),i.valueType()])(o.value,i.value),o.fixPrefix=!1,o})})}),d5="cbrt",Gpe=["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],qpe=ae(d5,Gpe,n=>{var{config:e,typed:t,isNegative:r,unaryMinus:i,matrix:o,Complex:s,BigNumber:a,Fraction:l}=n;return t(d5,{number:R0,Complex:u,"Complex, boolean":u,BigNumber:function(d){return d.cbrt()},Unit:c});function u(f,d){var h=f.arg()/3,m=f.abs(),g=new s(R0(m),0).mul(new s(0,h).exp());if(d){var y=[g,new s(R0(m),0).mul(new s(0,h+Math.PI*2/3).exp()),new s(R0(m),0).mul(new s(0,h-Math.PI*2/3).exp())];return e.matrix==="Array"?y:o(y)}else return g}function c(f){if(f.value&&el(f.value)){var d=f.clone();return d.value=1,d=d.pow(1/3),d.value=u(f.value),d}else{var h=r(f.value);h&&(f.value=i(f.value));var m;en(f.value)?m=new a(1).div(3):Zh(f.value)?m=new l(1,3):m=1/3;var g=f.pow(m);return h&&(g.value=i(g.value)),g}}}),Xpe="matAlgo11xS0s",Ype=["typed","equalScalar"],Zi=ae(Xpe,Ype,n=>{var{typed:e,equalScalar:t}=n;return function(i,o,s,a){var l=i._values,u=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],m=f[1],g,y=t,p=0,w=s;typeof d=="string"&&(g=d,y=e.find(t,[g,g]),p=e.convert(0,g),o=e.convert(o,g),w=e.find(s,[g,g]));for(var b=[],v=[],S=[],x=0;x<m;x++){S[x]=v.length;for(var M=c[x],A=c[x+1],T=M;T<A;T++){var C=u[T],D=a?w(o,l[T]):w(l[T],o);y(D,p)||(v.push(C),b.push(D))}}return S[m]=v.length,i.createSparseMatrix({values:b,index:v,ptr:S,size:[h,m],datatype:g})}}),Kpe="matAlgo12xSfs",Zpe=["typed","DenseMatrix"],Si=ae(Kpe,Zpe,n=>{var{typed:e,DenseMatrix:t}=n;return function(i,o,s,a){var l=i._values,u=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],m=f[1],g,y=s;typeof d=="string"&&(g=d,o=e.convert(o,g),y=e.find(s,[g,g]));for(var p=[],w=[],b=[],v=0;v<m;v++){for(var S=v+1,x=c[v],M=c[v+1],A=x;A<M;A++){var T=u[A];w[T]=l[A],b[T]=S}for(var C=0;C<h;C++)v===0&&(p[C]=[]),b[C]===S?p[C][v]=a?y(o,w[C]):y(w[C],o):p[C][v]=a?y(o,0):y(0,o)}return new t({data:p,size:[h,m],datatype:g})}}),Jpe="matAlgo14xDs",Qpe=["typed"],cl=ae(Jpe,Qpe,n=>{var{typed:e}=n;return function(i,o,s,a){var l=i._data,u=i._size,c=i._datatype,f,d=s;typeof c=="string"&&(f=c,o=e.convert(o,f),d=e.find(s,[f,f]));var h=u.length>0?t(d,0,u,u[0],l,o,a):[];return i.createDenseMatrix({data:h,size:Kt(u),datatype:f})};function t(r,i,o,s,a,l,u){var c=[];if(i===o.length-1)for(var f=0;f<s;f++)c[f]=u?r(l,a[f]):r(a[f],l);else for(var d=0;d<s;d++)c[d]=t(r,i+1,o,o[i+1],a[d],l,u);return c}}),PN="ceil",eme=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],tme=ae(PN,["typed","config","round"],n=>{var{typed:e,config:t,round:r}=n;return e(PN,{number:function(o){return Wo(o,r(o),t.epsilon)?r(o):Math.ceil(o)},"number, number":function(o,s){if(Wo(o,r(o,s),t.epsilon))return r(o,s);var[a,l]="".concat(o,"e").split("e"),u=Math.ceil(Number("".concat(a,"e").concat(Number(l)+s)));return[a,l]="".concat(u,"e").split("e"),Number("".concat(a,"e").concat(Number(l)-s))}})}),nme=ae(PN,eme,n=>{var{typed:e,config:t,round:r,matrix:i,equalScalar:o,zeros:s,DenseMatrix:a}=n,l=Zi({typed:e,equalScalar:o}),u=Si({typed:e,DenseMatrix:a}),c=cl({typed:e}),f=tme({typed:e,config:t,round:r});return e("ceil",{number:f.signatures.number,"number,number":f.signatures["number,number"],Complex:function(h){return h.ceil()},"Complex, number":function(h,m){return h.ceil(m)},"Complex, BigNumber":function(h,m){return h.ceil(m.toNumber())},BigNumber:function(h){return Ta(h,r(h),t.epsilon)?r(h):h.ceil()},"BigNumber, BigNumber":function(h,m){return Ta(h,r(h,m),t.epsilon)?r(h,m):h.toDecimalPlaces(m.toNumber(),Bf.ROUND_CEIL)},Fraction:function(h){return h.ceil()},"Fraction, number":function(h,m){return h.ceil(m)},"Fraction, BigNumber":function(h,m){return h.ceil(m.toNumber())},"Array | Matrix":e.referToSelf(d=>h=>hn(h,d)),"Array, number | BigNumber":e.referToSelf(d=>(h,m)=>hn(h,g=>d(g,m))),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>l(h,m,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>c(h,m,d,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(h,m)=>c(i(m),h,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(h,m)=>o(h,0)?s(m.size(),m.storage()):m.storage()==="dense"?c(m,h,d,!0):u(m,h,d,!0))})}),h5="cube",rme=["typed"],ime=ae(h5,rme,n=>{var{typed:e}=n;return e(h5,{number:TY,Complex:function(r){return r.mul(r).mul(r)},BigNumber:function(r){return r.times(r).times(r)},Fraction:function(r){return r.pow(3)},Unit:function(r){return r.pow(3)}})}),p5="exp",ome=["typed"],sme=ae(p5,ome,n=>{var{typed:e}=n;return e(p5,{number:DY,Complex:function(r){return r.exp()},BigNumber:function(r){return r.exp()}})}),m5="expm1",ame=["typed","Complex"],lme=ae(m5,ame,n=>{var{typed:e,Complex:t}=n;return e(m5,{number:NY,Complex:function(i){var o=Math.exp(i.re);return new t(o*Math.cos(i.im)-1,o*Math.sin(i.im))},BigNumber:function(i){return i.exp().minus(1)}})}),RN="fix",ume=["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],cme=ae(RN,["typed","ceil","floor"],n=>{var{typed:e,ceil:t,floor:r}=n;return e(RN,{number:function(o){return o>0?r(o):t(o)},"number, number":function(o,s){return o>0?r(o,s):t(o,s)}})}),fme=ae(RN,ume,n=>{var{typed:e,Complex:t,matrix:r,ceil:i,floor:o,equalScalar:s,zeros:a,DenseMatrix:l}=n,u=Si({typed:e,DenseMatrix:l}),c=cl({typed:e}),f=cme({typed:e,ceil:i,floor:o});return e("fix",{number:f.signatures.number,"number, number | BigNumber":f.signatures["number,number"],Complex:function(h){return new t(h.re>0?Math.floor(h.re):Math.ceil(h.re),h.im>0?Math.floor(h.im):Math.ceil(h.im))},"Complex, number":function(h,m){return new t(h.re>0?o(h.re,m):i(h.re,m),h.im>0?o(h.im,m):i(h.im,m))},"Complex, BigNumber":function(h,m){var g=m.toNumber();return new t(h.re>0?o(h.re,g):i(h.re,g),h.im>0?o(h.im,g):i(h.im,g))},BigNumber:function(h){return h.isNegative()?i(h):o(h)},"BigNumber, number | BigNumber":function(h,m){return h.isNegative()?i(h,m):o(h,m)},Fraction:function(h){return h.s<0?h.ceil():h.floor()},"Fraction, number | BigNumber":function(h,m){return h.s<0?i(h,m):o(h,m)},"Array | Matrix":e.referToSelf(d=>h=>hn(h,d)),"Array | Matrix, number | BigNumber":e.referToSelf(d=>(h,m)=>hn(h,g=>d(g,m))),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(h,m)=>c(r(m),h,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(h,m)=>s(h,0)?a(m.size(),m.storage()):m.storage()==="dense"?c(m,h,d,!0):u(m,h,d,!0))})}),ON="floor",dme=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],hme=ae(ON,["typed","config","round"],n=>{var{typed:e,config:t,round:r}=n;return e(ON,{number:function(o){return Wo(o,r(o),t.epsilon)?r(o):Math.floor(o)},"number, number":function(o,s){if(Wo(o,r(o,s),t.epsilon))return r(o,s);var[a,l]="".concat(o,"e").split("e"),u=Math.floor(Number("".concat(a,"e").concat(Number(l)+s)));return[a,l]="".concat(u,"e").split("e"),Number("".concat(a,"e").concat(Number(l)-s))}})}),vK=ae(ON,dme,n=>{var{typed:e,config:t,round:r,matrix:i,equalScalar:o,zeros:s,DenseMatrix:a}=n,l=Zi({typed:e,equalScalar:o}),u=Si({typed:e,DenseMatrix:a}),c=cl({typed:e}),f=hme({typed:e,config:t,round:r});return e("floor",{number:f.signatures.number,"number,number":f.signatures["number,number"],Complex:function(h){return h.floor()},"Complex, number":function(h,m){return h.floor(m)},"Complex, BigNumber":function(h,m){return h.floor(m.toNumber())},BigNumber:function(h){return Ta(h,r(h),t.epsilon)?r(h):h.floor()},"BigNumber, BigNumber":function(h,m){return Ta(h,r(h,m),t.epsilon)?r(h,m):h.toDecimalPlaces(m.toNumber(),Bf.ROUND_FLOOR)},Fraction:function(h){return h.floor()},"Fraction, number":function(h,m){return h.floor(m)},"Fraction, BigNumber":function(h,m){return h.floor(m.toNumber())},"Array | Matrix":e.referToSelf(d=>h=>hn(h,d)),"Array, number | BigNumber":e.referToSelf(d=>(h,m)=>hn(h,g=>d(g,m))),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>l(h,m,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>c(h,m,d,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(h,m)=>c(i(m),h,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(h,m)=>o(h,0)?s(m.size(),m.storage()):m.storage()==="dense"?c(m,h,d,!0):u(m,h,d,!0))})}),pme="matAlgo02xDS0",mme=["typed","equalScalar"],fl=ae(pme,mme,n=>{var{typed:e,equalScalar:t}=n;return function(i,o,s,a){var l=i._data,u=i._size,c=i._datatype||i.getDataType(),f=o._values,d=o._index,h=o._ptr,m=o._size,g=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(u.length!==m.length)throw new un(u.length,m.length);if(u[0]!==m[0]||u[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+m+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var y=u[0],p=u[1],w,b=t,v=0,S=s;typeof c=="string"&&c===g&&c!=="mixed"&&(w=c,b=e.find(t,[w,w]),v=e.convert(0,w),S=e.find(s,[w,w]));for(var x=[],M=[],A=[],T=0;T<p;T++){A[T]=M.length;for(var C=h[T],D=h[T+1],R=C;R<D;R++){var B=d[R],F=a?S(f[R],l[B][T]):S(l[B][T],f[R]);b(F,v)||(M.push(B),x.push(F))}}return A[p]=M.length,o.createSparseMatrix({values:x,index:M,ptr:A,size:[y,p],datatype:c===i._datatype&&g===o._datatype?w:void 0})}}),gme="matAlgo03xDSf",vme=["typed"],Xo=ae(gme,vme,n=>{var{typed:e}=n;return function(r,i,o,s){var a=r._data,l=r._size,u=r._datatype||r.getDataType(),c=i._values,f=i._index,d=i._ptr,h=i._size,m=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(l.length!==h.length)throw new un(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var g=l[0],y=l[1],p,w=0,b=o;typeof u=="string"&&u===m&&u!=="mixed"&&(p=u,w=e.convert(0,p),b=e.find(o,[p,p]));for(var v=[],S=0;S<g;S++)v[S]=[];for(var x=[],M=[],A=0;A<y;A++){for(var T=A+1,C=d[A],D=d[A+1],R=C;R<D;R++){var B=f[R];x[B]=s?b(c[R],a[B][A]):b(a[B][A],c[R]),M[B]=T}for(var F=0;F<g;F++)M[F]===T?v[F][A]=x[F]:v[F][A]=s?b(w,a[F][A]):b(a[F][A],w)}return r.createDenseMatrix({data:v,size:[g,y],datatype:u===r._datatype&&m===i._datatype?p:void 0})}}),yme="matAlgo05xSfSf",xme=["typed","equalScalar"],u2=ae(yme,xme,n=>{var{typed:e,equalScalar:t}=n;return function(i,o,s){var a=i._values,l=i._index,u=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=o._values,h=o._index,m=o._ptr,g=o._size,y=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(c.length!==g.length)throw new un(c.length,g.length);if(c[0]!==g[0]||c[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+g+")");var p=c[0],w=c[1],b,v=t,S=0,x=s;typeof f=="string"&&f===y&&f!=="mixed"&&(b=f,v=e.find(t,[b,b]),S=e.convert(0,b),x=e.find(s,[b,b]));var M=a&&d?[]:void 0,A=[],T=[],C=M?[]:void 0,D=M?[]:void 0,R=[],B=[],F,U,N,I;for(U=0;U<w;U++){T[U]=A.length;var V=U+1;for(N=u[U],I=u[U+1];N<I;N++)F=l[N],A.push(F),R[F]=V,C&&(C[F]=a[N]);for(N=m[U],I=m[U+1];N<I;N++)F=h[N],R[F]!==V&&A.push(F),B[F]=V,D&&(D[F]=d[N]);if(M)for(N=T[U];N<A.length;){F=A[N];var L=R[F],X=B[F];if(L===V||X===V){var Z=L===V?C[F]:S,te=X===V?D[F]:S,Y=x(Z,te);v(Y,S)?A.splice(N,1):(M.push(Y),N++)}}}return T[w]=A.length,i.createSparseMatrix({values:M,index:A,ptr:T,size:[p,w],datatype:f===i._datatype&&y===o._datatype?b:void 0})}}),bme="matAlgo13xDD",wme=["typed"],Sme=ae(bme,wme,n=>{var{typed:e}=n;return function(i,o,s){var a=i._data,l=i._size,u=i._datatype,c=o._data,f=o._size,d=o._datatype,h=[];if(l.length!==f.length)throw new un(l.length,f.length);for(var m=0;m<l.length;m++){if(l[m]!==f[m])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");h[m]=l[m]}var g,y=s;typeof u=="string"&&u===d&&(g=u,y=e.find(s,[g,g]));var p=h.length>0?t(y,0,h,h[0],a,c):[];return i.createDenseMatrix({data:p,size:h,datatype:g})};function t(r,i,o,s,a,l){var u=[];if(i===o.length-1)for(var c=0;c<s;c++)u[c]=r(a[c],l[c]);else for(var f=0;f<s;f++)u[f]=t(r,i+1,o,o[i+1],a[f],l[f]);return u}}),_me="broadcast",Eme=["concat"],Mme=ae(_me,Eme,n=>{var{concat:e}=n;return function(i,o){var s=Math.max(i._size.length,o._size.length);if(i._size.length===o._size.length&&i._size.every((m,g)=>m===o._size[g]))return[i,o];for(var a=t(i._size,s,0),l=t(o._size,s,0),u=[],c=0;c<s;c++)u[c]=Math.max(a[c],l[c]);gE(a,u),gE(l,u);var f=i.clone(),d=o.clone();f._size.length<s?f.reshape(t(f._size,s,1)):d._size.length<s&&d.reshape(t(d._size,s,1));for(var h=0;h<s;h++)f._size[h]<u[h]&&(f=r(f,u[h],h)),d._size[h]<u[h]&&(d=r(d,u[h],h));return[f,d]};function t(i,o,s){return[...Array(o-i.length).fill(s),...i]}function r(i,o,s){return e(...Array(o).fill(i),s)}}),Cme="matrixAlgorithmSuite",Ame=["typed","matrix","concat"],nr=ae(Cme,Ame,n=>{var{typed:e,matrix:t,concat:r}=n,i=Sme({typed:e}),o=cl({typed:e}),s=Mme({concat:r});return function(l){var u=l.elop,c=l.SD||l.DS,f;u?(f={"DenseMatrix, DenseMatrix":(g,y)=>i(...s(g,y),u),"Array, Array":(g,y)=>i(...s(t(g),t(y)),u).valueOf(),"Array, DenseMatrix":(g,y)=>i(...s(t(g),y),u),"DenseMatrix, Array":(g,y)=>i(...s(g,t(y)),u)},l.SS&&(f["SparseMatrix, SparseMatrix"]=(g,y)=>l.SS(...s(g,y),u,!1)),l.DS&&(f["DenseMatrix, SparseMatrix"]=(g,y)=>l.DS(...s(g,y),u,!1),f["Array, SparseMatrix"]=(g,y)=>l.DS(...s(t(g),y),u,!1)),c&&(f["SparseMatrix, DenseMatrix"]=(g,y)=>c(...s(y,g),u,!0),f["SparseMatrix, Array"]=(g,y)=>c(...s(t(y),g),u,!0))):(f={"DenseMatrix, DenseMatrix":e.referToSelf(g=>(y,p)=>i(...s(y,p),g)),"Array, Array":e.referToSelf(g=>(y,p)=>i(...s(t(y),t(p)),g).valueOf()),"Array, DenseMatrix":e.referToSelf(g=>(y,p)=>i(...s(t(y),p),g)),"DenseMatrix, Array":e.referToSelf(g=>(y,p)=>i(...s(y,t(p)),g))},l.SS&&(f["SparseMatrix, SparseMatrix"]=e.referToSelf(g=>(y,p)=>l.SS(...s(y,p),g,!1))),l.DS&&(f["DenseMatrix, SparseMatrix"]=e.referToSelf(g=>(y,p)=>l.DS(...s(y,p),g,!1)),f["Array, SparseMatrix"]=e.referToSelf(g=>(y,p)=>l.DS(...s(t(y),p),g,!1))),c&&(f["SparseMatrix, DenseMatrix"]=e.referToSelf(g=>(y,p)=>c(...s(p,y),g,!0)),f["SparseMatrix, Array"]=e.referToSelf(g=>(y,p)=>c(...s(t(p),y),g,!0))));var d=l.scalar||"any",h=l.Ds||l.Ss;h&&(u?(f["DenseMatrix,"+d]=(g,y)=>o(g,y,u,!1),f[d+", DenseMatrix"]=(g,y)=>o(y,g,u,!0),f["Array,"+d]=(g,y)=>o(t(g),y,u,!1).valueOf(),f[d+", Array"]=(g,y)=>o(t(y),g,u,!0).valueOf()):(f["DenseMatrix,"+d]=e.referToSelf(g=>(y,p)=>o(y,p,g,!1)),f[d+", DenseMatrix"]=e.referToSelf(g=>(y,p)=>o(p,y,g,!0)),f["Array,"+d]=e.referToSelf(g=>(y,p)=>o(t(y),p,g,!1).valueOf()),f[d+", Array"]=e.referToSelf(g=>(y,p)=>o(t(p),y,g,!0).valueOf())));var m=l.sS!==void 0?l.sS:l.Ss;return u?(l.Ss&&(f["SparseMatrix,"+d]=(g,y)=>l.Ss(g,y,u,!1)),m&&(f[d+", SparseMatrix"]=(g,y)=>m(y,g,u,!0))):(l.Ss&&(f["SparseMatrix,"+d]=e.referToSelf(g=>(y,p)=>l.Ss(y,p,g,!1))),m&&(f[d+", SparseMatrix"]=e.referToSelf(g=>(y,p)=>m(p,y,g,!0)))),u&&u.signatures&&zX(f,u.signatures),f}}),g5="mod",Tme=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix","concat"],yK=ae(g5,Tme,n=>{var{typed:e,config:t,round:r,matrix:i,equalScalar:o,zeros:s,DenseMatrix:a,concat:l}=n,u=vK({typed:e,config:t,round:r,matrix:i,equalScalar:o,zeros:s,DenseMatrix:a}),c=fl({typed:e,equalScalar:o}),f=Xo({typed:e}),d=u2({typed:e,equalScalar:o}),h=Zi({typed:e,equalScalar:o}),m=Si({typed:e,DenseMatrix:a}),g=nr({typed:e,matrix:i,concat:l});return e(g5,{"number, number":y,"BigNumber, BigNumber":function(w,b){return b.isZero()?w:w.sub(b.mul(u(w.div(b))))},"Fraction, Fraction":function(w,b){return b.equals(0)?w:w.sub(b.mul(u(w.div(b))))}},g({SS:d,DS:f,SD:c,Ss:h,sS:m}));function y(p,w){return w===0?p:p-w*u(p/w)}}),Dme="matAlgo01xDSid",Nme=["typed"],od=ae(Dme,Nme,n=>{var{typed:e}=n;return function(r,i,o,s){var a=r._data,l=r._size,u=r._datatype||r.getDataType(),c=i._values,f=i._index,d=i._ptr,h=i._size,m=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(l.length!==h.length)throw new un(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var g=l[0],y=l[1],p=typeof u=="string"&&u!=="mixed"&&u===m?u:void 0,w=p?e.find(o,[p,p]):o,b,v,S=[];for(b=0;b<g;b++)S[b]=[];var x=[],M=[];for(v=0;v<y;v++){for(var A=v+1,T=d[v],C=d[v+1],D=T;D<C;D++)b=f[D],x[b]=s?w(c[D],a[b][v]):w(a[b][v],c[D]),M[b]=A;for(b=0;b<g;b++)M[b]===A?S[b][v]=x[b]:S[b][v]=a[b][v]}return r.createDenseMatrix({data:S,size:[g,y],datatype:u===r._datatype&&m===i._datatype?p:void 0})}}),Pme="matAlgo04xSidSid",Rme=["typed","equalScalar"],Fk=ae(Pme,Rme,n=>{var{typed:e,equalScalar:t}=n;return function(i,o,s){var a=i._values,l=i._index,u=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=o._values,h=o._index,m=o._ptr,g=o._size,y=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(c.length!==g.length)throw new un(c.length,g.length);if(c[0]!==g[0]||c[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+g+")");var p=c[0],w=c[1],b,v=t,S=0,x=s;typeof f=="string"&&f===y&&f!=="mixed"&&(b=f,v=e.find(t,[b,b]),S=e.convert(0,b),x=e.find(s,[b,b]));var M=a&&d?[]:void 0,A=[],T=[],C=a&&d?[]:void 0,D=a&&d?[]:void 0,R=[],B=[],F,U,N,I,V;for(U=0;U<w;U++){T[U]=A.length;var L=U+1;for(I=u[U],V=u[U+1],N=I;N<V;N++)F=l[N],A.push(F),R[F]=L,C&&(C[F]=a[N]);for(I=m[U],V=m[U+1],N=I;N<V;N++)if(F=h[N],R[F]===L){if(C){var X=x(C[F],d[N]);v(X,S)?R[F]=null:C[F]=X}}else A.push(F),B[F]=L,D&&(D[F]=d[N]);if(C&&D)for(N=T[U];N<A.length;)F=A[N],R[F]===L?(M[N]=C[F],N++):B[F]===L?(M[N]=D[F],N++):A.splice(N,1)}return T[w]=A.length,i.createSparseMatrix({values:M,index:A,ptr:T,size:[p,w],datatype:f===i._datatype&&y===o._datatype?b:void 0})}}),Ome="matAlgo10xSids",kme=["typed","DenseMatrix"],Qh=ae(Ome,kme,n=>{var{typed:e,DenseMatrix:t}=n;return function(i,o,s,a){var l=i._values,u=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],m=f[1],g,y=s;typeof d=="string"&&(g=d,o=e.convert(o,g),y=e.find(s,[g,g]));for(var p=[],w=[],b=[],v=0;v<m;v++){for(var S=v+1,x=c[v],M=c[v+1],A=x;A<M;A++){var T=u[A];w[T]=l[A],b[T]=S}for(var C=0;C<h;C++)v===0&&(p[C]=[]),b[C]===S?p[C][v]=a?y(o,w[C]):y(w[C],o):p[C][v]=o}return new t({data:p,size:[h,m],datatype:g})}});function bc(n,e,t,r){if(!(this instanceof bc))throw new SyntaxError("Constructor must be called with the new operator");this.fn=n,this.count=e,this.min=t,this.max=r,this.message="Wrong number of arguments in function "+n+" ("+e+" provided, "+t+(r!=null?"-"+r:"")+" expected)",this.stack=new Error().stack}bc.prototype=new Error;bc.prototype.constructor=Error;bc.prototype.name="ArgumentsError";bc.prototype.isArgumentsError=!0;var v5="gcd",Ime=["typed","config","round","matrix","equalScalar","zeros","BigNumber","DenseMatrix","concat"],pT="number | BigNumber | Fraction | Matrix | Array",Lme="".concat(pT,", ").concat(pT,", ...").concat(pT);function y5(n){return!n.some(e=>Array.isArray(e))}var Fme=ae(v5,Ime,n=>{var{typed:e,matrix:t,config:r,round:i,equalScalar:o,zeros:s,BigNumber:a,DenseMatrix:l,concat:u}=n,c=yK({typed:e,config:r,round:i,matrix:t,equalScalar:o,zeros:s,DenseMatrix:l,concat:u}),f=od({typed:e}),d=Fk({typed:e,equalScalar:o}),h=Qh({typed:e,DenseMatrix:l}),m=nr({typed:e,matrix:t,concat:u});return e(v5,{"number, number":g,"BigNumber, BigNumber":y,"Fraction, Fraction":(p,w)=>p.gcd(w)},m({SS:d,DS:f,Ss:h}),{[Lme]:e.referToSelf(p=>(w,b,v)=>{for(var S=p(w,b),x=0;x<v.length;x++)S=p(S,v[x]);return S}),Array:e.referToSelf(p=>w=>{if(w.length===1&&Array.isArray(w[0])&&y5(w[0]))return p(...w[0]);if(y5(w))return p(...w);throw new bc("gcd() supports only 1d matrices!")}),Matrix:e.referToSelf(p=>w=>p(w.toArray()))});function g(p,w){if(!kt(p)||!kt(w))throw new Error("Parameters in function gcd must be integer numbers");for(var b;w!==0;)b=c(p,w),p=w,w=b;return p<0?-p:p}function y(p,w){if(!p.isInt()||!w.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var b=new a(0);!w.isZero();){var v=c(p,w);p=w,w=v}return p.lt(b)?p.neg():p}}),Bme="matAlgo06xS0S0",zme=["typed","equalScalar"],c2=ae(Bme,zme,n=>{var{typed:e,equalScalar:t}=n;return function(i,o,s){var a=i._values,l=i._size,u=i._datatype||i._data===void 0?i._datatype:i.getDataType(),c=o._values,f=o._size,d=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(l.length!==f.length)throw new un(l.length,f.length);if(l[0]!==f[0]||l[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");var h=l[0],m=l[1],g,y=t,p=0,w=s;typeof u=="string"&&u===d&&u!=="mixed"&&(g=u,y=e.find(t,[g,g]),p=e.convert(0,g),w=e.find(s,[g,g]));for(var b=a&&c?[]:void 0,v=[],S=[],x=b?[]:void 0,M=[],A=[],T=0;T<m;T++){S[T]=v.length;var C=T+1;if($B(i,T,M,x,A,C,v,w),$B(o,T,M,x,A,C,v,w),x)for(var D=S[T];D<v.length;){var R=v[D];if(A[R]===C){var B=x[R];y(B,p)?v.splice(D,1):(b.push(B),D++)}else v.splice(D,1)}else for(var F=S[T];F<v.length;){var U=v[F];A[U]!==C?v.splice(F,1):F++}}return S[m]=v.length,i.createSparseMatrix({values:b,index:v,ptr:S,size:[h,m],datatype:u===i._datatype&&d===o._datatype?g:void 0})}}),x5="lcm",Ume=["typed","matrix","equalScalar","concat"],Vme=ae(x5,Ume,n=>{var{typed:e,matrix:t,equalScalar:r,concat:i}=n,o=fl({typed:e,equalScalar:r}),s=c2({typed:e,equalScalar:r}),a=Zi({typed:e,equalScalar:r}),l=nr({typed:e,matrix:t,concat:i}),u="number | BigNumber | Fraction | Matrix | Array",c={};return c["".concat(u,", ").concat(u,", ...").concat(u)]=e.referToSelf(d=>(h,m,g)=>{for(var y=d(h,m),p=0;p<g.length;p++)y=d(y,g[p]);return y}),e(x5,{"number, number":PY,"BigNumber, BigNumber":f,"Fraction, Fraction":(d,h)=>d.lcm(h)},l({SS:s,DS:o,Ss:a}),c);function f(d,h){if(!d.isInt()||!h.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(d.isZero())return d;if(h.isZero())return h;for(var m=d.times(h);!h.isZero();){var g=h;h=d.mod(g),d=g}return m.div(d).abs()}}),b5="log10",$me=["typed","config","Complex"],Hme=ae(b5,$me,n=>{var{typed:e,config:t,Complex:r}=n;return e(b5,{number:function(o){return o>=0||t.predictable?RY(o):new r(o,0).log().div(Math.LN10)},Complex:function(o){return new r(o).log().div(Math.LN10)},BigNumber:function(o){return!o.isNegative()||t.predictable?o.log():new r(o.toNumber(),0).log().div(Math.LN10)},"Array | Matrix":e.referToSelf(i=>o=>hn(o,i))})}),w5="log2",Wme=["typed","config","Complex"],jme=ae(w5,Wme,n=>{var{typed:e,config:t,Complex:r}=n;return e(w5,{number:function(s){return s>=0||t.predictable?OY(s):i(new r(s,0))},Complex:i,BigNumber:function(s){return!s.isNegative()||t.predictable?s.log(2):i(new r(s.toNumber(),0))},"Array | Matrix":e.referToSelf(o=>s=>hn(s,o))});function i(o){var s=Math.sqrt(o.re*o.re+o.im*o.im);return new r(Math.log2?Math.log2(s):Math.log(s)/Math.LN2,Math.atan2(o.im,o.re)/Math.LN2)}}),Gme="multiplyScalar",qme=["typed"],Xme=ae(Gme,qme,n=>{var{typed:e}=n;return e("multiplyScalar",{"number, number":MY,"Complex, Complex":function(r,i){return r.mul(i)},"BigNumber, BigNumber":function(r,i){return r.times(i)},"Fraction, Fraction":function(r,i){return r.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(t,r)=>r.multiply(t),"Unit, number | Fraction | BigNumber | Complex | Unit":(t,r)=>t.multiply(r)})}),S5="multiply",Yme=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],Kme=ae(S5,Yme,n=>{var{typed:e,matrix:t,addScalar:r,multiplyScalar:i,equalScalar:o,dot:s}=n,a=Zi({typed:e,equalScalar:o}),l=cl({typed:e});function u(S,x){switch(S.length){case 1:switch(x.length){case 1:if(S[0]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(S[0]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+S[0]+") must match Matrix rows ("+x[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+x.length+" dimensions)")}break;case 2:switch(x.length){case 1:if(S[1]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+S[1]+") must match Vector length ("+x[0]+")");break;case 2:if(S[1]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+S[1]+") must match Matrix B rows ("+x[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+x.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+S.length+" dimensions)")}}function c(S,x,M){if(M===0)throw new Error("Cannot multiply two empty vectors");return s(S,x)}function f(S,x){if(x.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(S,x)}function d(S,x){var M=S._data,A=S._size,T=S._datatype||S.getDataType(),C=x._data,D=x._size,R=x._datatype||x.getDataType(),B=A[0],F=D[1],U,N=r,I=i;T&&R&&T===R&&typeof T=="string"&&T!=="mixed"&&(U=T,N=e.find(r,[U,U]),I=e.find(i,[U,U]));for(var V=[],L=0;L<F;L++){for(var X=I(M[0],C[0][L]),Z=1;Z<B;Z++)X=N(X,I(M[Z],C[Z][L]));V[L]=X}return S.createDenseMatrix({data:V,size:[F],datatype:T===S._datatype&&R===x._datatype?U:void 0})}var h=e("_multiplyMatrixVector",{"DenseMatrix, any":g,"SparseMatrix, any":w}),m=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":y,"DenseMatrix, SparseMatrix":p,"SparseMatrix, DenseMatrix":b,"SparseMatrix, SparseMatrix":v});function g(S,x){var M=S._data,A=S._size,T=S._datatype||S.getDataType(),C=x._data,D=x._datatype||x.getDataType(),R=A[0],B=A[1],F,U=r,N=i;T&&D&&T===D&&typeof T=="string"&&T!=="mixed"&&(F=T,U=e.find(r,[F,F]),N=e.find(i,[F,F]));for(var I=[],V=0;V<R;V++){for(var L=M[V],X=N(L[0],C[0]),Z=1;Z<B;Z++)X=U(X,N(L[Z],C[Z]));I[V]=X}return S.createDenseMatrix({data:I,size:[R],datatype:T===S._datatype&&D===x._datatype?F:void 0})}function y(S,x){var M=S._data,A=S._size,T=S._datatype||S.getDataType(),C=x._data,D=x._size,R=x._datatype||x.getDataType(),B=A[0],F=A[1],U=D[1],N,I=r,V=i;T&&R&&T===R&&typeof T=="string"&&T!=="mixed"&&T!=="mixed"&&(N=T,I=e.find(r,[N,N]),V=e.find(i,[N,N]));for(var L=[],X=0;X<B;X++){var Z=M[X];L[X]=[];for(var te=0;te<U;te++){for(var Y=V(Z[0],C[0][te]),re=1;re<F;re++)Y=I(Y,V(Z[re],C[re][te]));L[X][te]=Y}}return S.createDenseMatrix({data:L,size:[B,U],datatype:T===S._datatype&&R===x._datatype?N:void 0})}function p(S,x){var M=S._data,A=S._size,T=S._datatype||S.getDataType(),C=x._values,D=x._index,R=x._ptr,B=x._size,F=x._datatype||x._data===void 0?x._datatype:x.getDataType();if(!C)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var U=A[0],N=B[1],I,V=r,L=i,X=o,Z=0;T&&F&&T===F&&typeof T=="string"&&T!=="mixed"&&(I=T,V=e.find(r,[I,I]),L=e.find(i,[I,I]),X=e.find(o,[I,I]),Z=e.convert(0,I));for(var te=[],Y=[],re=[],fe=x.createSparseMatrix({values:te,index:Y,ptr:re,size:[U,N],datatype:T===S._datatype&&F===x._datatype?I:void 0}),ue=0;ue<N;ue++){re[ue]=Y.length;var ge=R[ue],Se=R[ue+1];if(Se>ge)for(var xe=0,De=0;De<U;De++){for(var Ae=De+1,ie=void 0,Re=ge;Re<Se;Re++){var Pe=D[Re];xe!==Ae?(ie=L(M[De][Pe],C[Re]),xe=Ae):ie=V(ie,L(M[De][Pe],C[Re]))}xe===Ae&&!X(ie,Z)&&(Y.push(De),te.push(ie))}}return re[N]=Y.length,fe}function w(S,x){var M=S._values,A=S._index,T=S._ptr,C=S._datatype||S._data===void 0?S._datatype:S.getDataType();if(!M)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var D=x._data,R=x._datatype||x.getDataType(),B=S._size[0],F=x._size[0],U=[],N=[],I=[],V,L=r,X=i,Z=o,te=0;C&&R&&C===R&&typeof C=="string"&&C!=="mixed"&&(V=C,L=e.find(r,[V,V]),X=e.find(i,[V,V]),Z=e.find(o,[V,V]),te=e.convert(0,V));var Y=[],re=[];I[0]=0;for(var fe=0;fe<F;fe++){var ue=D[fe];if(!Z(ue,te))for(var ge=T[fe],Se=T[fe+1],xe=ge;xe<Se;xe++){var De=A[xe];re[De]?Y[De]=L(Y[De],X(ue,M[xe])):(re[De]=!0,N.push(De),Y[De]=X(ue,M[xe]))}}for(var Ae=N.length,ie=0;ie<Ae;ie++){var Re=N[ie];U[ie]=Y[Re]}return I[1]=N.length,S.createSparseMatrix({values:U,index:N,ptr:I,size:[B,1],datatype:C===S._datatype&&R===x._datatype?V:void 0})}function b(S,x){var M=S._values,A=S._index,T=S._ptr,C=S._datatype||S._data===void 0?S._datatype:S.getDataType();if(!M)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var D=x._data,R=x._datatype||x.getDataType(),B=S._size[0],F=x._size[0],U=x._size[1],N,I=r,V=i,L=o,X=0;C&&R&&C===R&&typeof C=="string"&&C!=="mixed"&&(N=C,I=e.find(r,[N,N]),V=e.find(i,[N,N]),L=e.find(o,[N,N]),X=e.convert(0,N));for(var Z=[],te=[],Y=[],re=S.createSparseMatrix({values:Z,index:te,ptr:Y,size:[B,U],datatype:C===S._datatype&&R===x._datatype?N:void 0}),fe=[],ue=[],ge=0;ge<U;ge++){Y[ge]=te.length;for(var Se=ge+1,xe=0;xe<F;xe++){var De=D[xe][ge];if(!L(De,X))for(var Ae=T[xe],ie=T[xe+1],Re=Ae;Re<ie;Re++){var Pe=A[Re];ue[Pe]!==Se?(ue[Pe]=Se,te.push(Pe),fe[Pe]=V(De,M[Re])):fe[Pe]=I(fe[Pe],V(De,M[Re]))}}for(var ee=Y[ge],oe=te.length,Me=ee;Me<oe;Me++){var se=te[Me];Z[Me]=fe[se]}}return Y[U]=te.length,re}function v(S,x){var M=S._values,A=S._index,T=S._ptr,C=S._datatype||S._data===void 0?S._datatype:S.getDataType(),D=x._values,R=x._index,B=x._ptr,F=x._datatype||x._data===void 0?x._datatype:x.getDataType(),U=S._size[0],N=x._size[1],I=M&&D,V,L=r,X=i;C&&F&&C===F&&typeof C=="string"&&C!=="mixed"&&(V=C,L=e.find(r,[V,V]),X=e.find(i,[V,V]));for(var Z=I?[]:void 0,te=[],Y=[],re=S.createSparseMatrix({values:Z,index:te,ptr:Y,size:[U,N],datatype:C===S._datatype&&F===x._datatype?V:void 0}),fe=I?[]:void 0,ue=[],ge,Se,xe,De,Ae,ie,Re,Pe,ee=0;ee<N;ee++){Y[ee]=te.length;var oe=ee+1;for(Ae=B[ee],ie=B[ee+1],De=Ae;De<ie;De++)if(Pe=R[De],I)for(Se=T[Pe],xe=T[Pe+1],ge=Se;ge<xe;ge++)Re=A[ge],ue[Re]!==oe?(ue[Re]=oe,te.push(Re),fe[Re]=X(D[De],M[ge])):fe[Re]=L(fe[Re],X(D[De],M[ge]));else for(Se=T[Pe],xe=T[Pe+1],ge=Se;ge<xe;ge++)Re=A[ge],ue[Re]!==oe&&(ue[Re]=oe,te.push(Re));if(I)for(var Me=Y[ee],se=te.length,G=Me;G<se;G++){var j=te[G];Z[G]=fe[j]}}return Y[N]=te.length,re}return e(S5,i,{"Array, Array":e.referTo("Matrix, Matrix",S=>(x,M)=>{u(on(x),on(M));var A=S(t(x),t(M));return Vt(A)?A.valueOf():A}),"Matrix, Matrix":function(x,M){var A=x.size(),T=M.size();return u(A,T),A.length===1?T.length===1?c(x,M,A[0]):f(x,M):T.length===1?h(x,M):m(x,M)},"Matrix, Array":e.referTo("Matrix,Matrix",S=>(x,M)=>S(x,t(M))),"Array, Matrix":e.referToSelf(S=>(x,M)=>S(t(x,M.storage()),M)),"SparseMatrix, any":function(x,M){return a(x,M,i,!1)},"DenseMatrix, any":function(x,M){return l(x,M,i,!1)},"any, SparseMatrix":function(x,M){return a(M,x,i,!0)},"any, DenseMatrix":function(x,M){return l(M,x,i,!0)},"Array, any":function(x,M){return l(t(x),M,i,!1).valueOf()},"any, Array":function(x,M){return l(t(M),x,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(S=>(x,M,A)=>{for(var T=S(x,M),C=0;C<A.length;C++)T=S(T,A[C]);return T})})}),_5="nthRoot",Zme=["typed","matrix","equalScalar","BigNumber","concat"],Jme=ae(_5,Zme,n=>{var{typed:e,matrix:t,equalScalar:r,BigNumber:i,concat:o}=n,s=od({typed:e}),a=fl({typed:e,equalScalar:r}),l=c2({typed:e,equalScalar:r}),u=Zi({typed:e,equalScalar:r}),c=nr({typed:e,matrix:t,concat:o});function f(){throw new Error("Complex number not supported in function nthRoot. Use nthRoots instead.")}return e(_5,{number:WB,"number, number":WB,BigNumber:h=>d(h,new i(2)),"BigNumber, BigNumber":d,Complex:f,"Complex, number":f,Array:e.referTo("DenseMatrix,number",h=>m=>h(t(m),2).valueOf()),DenseMatrix:e.referTo("DenseMatrix,number",h=>m=>h(m,2)),SparseMatrix:e.referTo("SparseMatrix,number",h=>m=>h(m,2)),"SparseMatrix, SparseMatrix":e.referToSelf(h=>(m,g)=>{if(g.density()===1)return l(m,g,h);throw new Error("Root must be non-zero")}),"DenseMatrix, SparseMatrix":e.referToSelf(h=>(m,g)=>{if(g.density()===1)return s(m,g,h,!1);throw new Error("Root must be non-zero")}),"Array, SparseMatrix":e.referTo("DenseMatrix,SparseMatrix",h=>(m,g)=>h(t(m),g)),"number | BigNumber, SparseMatrix":e.referToSelf(h=>(m,g)=>{if(g.density()===1)return u(g,m,h,!0);throw new Error("Root must be non-zero")})},c({scalar:"number | BigNumber",SD:a,Ss:u,sS:!1}));function d(h,m){var g=i.precision,y=i.clone({precision:g+2}),p=new i(0),w=new y(1),b=m.isNegative();if(b&&(m=m.neg()),m.isZero())throw new Error("Root must be non-zero");if(h.isNegative()&&!m.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(h.isZero())return b?new y(1/0):0;if(!h.isFinite())return b?p:h;var v=h.abs().pow(w.div(m));return v=h.isNeg()?v.neg():v,new i((b?w.div(v):v).toPrecision(g))}}),E5="sign",Qme=["typed","BigNumber","Fraction","complex"],ege=ae(E5,Qme,n=>{var{typed:e,BigNumber:t,complex:r,Fraction:i}=n;return e(E5,{number:NN,Complex:function(s){return s.im===0?r(NN(s.re)):s.sign()},BigNumber:function(s){return new t(s.cmp(0))},Fraction:function(s){return new i(s.s,1)},"Array | Matrix":e.referToSelf(o=>s=>hn(s,o)),Unit:e.referToSelf(o=>s=>{if(!s._isDerived()&&s.units[0].unit.offset!==0)throw new TypeError("sign is ambiguous for units with offset");return e.find(o,s.valueType())(s.value)})})}),tge="sqrt",nge=["config","typed","Complex"],rge=ae(tge,nge,n=>{var{config:e,typed:t,Complex:r}=n;return t("sqrt",{number:i,Complex:function(s){return s.sqrt()},BigNumber:function(s){return!s.isNegative()||e.predictable?s.sqrt():i(s.toNumber())},Unit:function(s){return s.pow(.5)}});function i(o){return isNaN(o)?NaN:o>=0||e.predictable?Math.sqrt(o):new r(o,0).sqrt()}}),M5="square",ige=["typed"],oge=ae(M5,ige,n=>{var{typed:e}=n;return e(M5,{number:kY,Complex:function(r){return r.mul(r)},BigNumber:function(r){return r.times(r)},Fraction:function(r){return r.mul(r)},Unit:function(r){return r.pow(2)}})}),C5="subtract",sge=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],age=ae(C5,sge,n=>{var{typed:e,matrix:t,equalScalar:r,subtractScalar:i,unaryMinus:o,DenseMatrix:s,concat:a}=n,l=od({typed:e}),u=Xo({typed:e}),c=u2({typed:e,equalScalar:r}),f=Qh({typed:e,DenseMatrix:s}),d=Si({typed:e,DenseMatrix:s}),h=nr({typed:e,matrix:t,concat:a});return e(C5,{"any, any":i},h({elop:i,SS:c,DS:l,SD:u,Ss:d,sS:f}))}),A5="xgcd",lge=["typed","config","matrix","BigNumber"],uge=ae(A5,lge,n=>{var{typed:e,config:t,matrix:r,BigNumber:i}=n;return e(A5,{"number, number":function(a,l){var u=IY(a,l);return t.matrix==="Array"?u:r(u)},"BigNumber, BigNumber":o});function o(s,a){var l,u,c,f=new i(0),d=new i(1),h=f,m=d,g=d,y=f;if(!s.isInt()||!a.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!a.isZero();)u=s.div(a).floor(),c=s.mod(a),l=h,h=m.minus(u.times(h)),m=l,l=g,g=y.minus(u.times(g)),y=l,s=a,a=c;var p;return s.lt(f)?p=[s.neg(),m.neg(),y.neg()]:p=[s,s.isZero()?0:m,y],t.matrix==="Array"?p:r(p)}}),T5="invmod",cge=["typed","config","BigNumber","xgcd","equal","smaller","mod","add","isInteger"],fge=ae(T5,cge,n=>{var{typed:e,config:t,BigNumber:r,xgcd:i,equal:o,smaller:s,mod:a,add:l,isInteger:u}=n;return e(T5,{"number, number":c,"BigNumber, BigNumber":c});function c(f,d){if(!u(f)||!u(d))throw new Error("Parameters in function invmod must be integer numbers");if(f=a(f,d),o(d,0))throw new Error("Divisor must be non zero");var h=i(f,d);h=h.valueOf();var[m,g]=h;return o(m,r(1))?(g=a(g,d),s(g,r(0))&&(g=l(g,d)),g):NaN}}),dge="matAlgo09xS0Sf",hge=["typed","equalScalar"],xK=ae(dge,hge,n=>{var{typed:e,equalScalar:t}=n;return function(i,o,s){var a=i._values,l=i._index,u=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=o._values,h=o._index,m=o._ptr,g=o._size,y=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(c.length!==g.length)throw new un(c.length,g.length);if(c[0]!==g[0]||c[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+g+")");var p=c[0],w=c[1],b,v=t,S=0,x=s;typeof f=="string"&&f===y&&f!=="mixed"&&(b=f,v=e.find(t,[b,b]),S=e.convert(0,b),x=e.find(s,[b,b]));var M=a&&d?[]:void 0,A=[],T=[],C=M?[]:void 0,D=[],R,B,F,U,N;for(B=0;B<w;B++){T[B]=A.length;var I=B+1;if(C)for(U=m[B],N=m[B+1],F=U;F<N;F++)R=h[F],D[R]=I,C[R]=d[F];for(U=u[B],N=u[B+1],F=U;F<N;F++)if(R=l[F],C){var V=D[R]===I?C[R]:S,L=x(a[F],V);v(L,S)||(A.push(R),M.push(L))}else A.push(R)}return T[w]=A.length,i.createSparseMatrix({values:M,index:A,ptr:T,size:[p,w],datatype:f===i._datatype&&y===o._datatype?b:void 0})}}),D5="dotMultiply",pge=["typed","matrix","equalScalar","multiplyScalar","concat"],mge=ae(D5,pge,n=>{var{typed:e,matrix:t,equalScalar:r,multiplyScalar:i,concat:o}=n,s=fl({typed:e,equalScalar:r}),a=xK({typed:e,equalScalar:r}),l=Zi({typed:e,equalScalar:r}),u=nr({typed:e,matrix:t,concat:o});return e(D5,u({elop:i,SS:a,DS:s,Ss:l}))});function gge(n,e){if(n.isFinite()&&!n.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitAnd");var t=n.constructor;if(n.isNaN()||e.isNaN())return new t(NaN);if(n.isZero()||e.eq(-1)||n.eq(e))return n;if(e.isZero()||n.eq(-1))return e;if(!n.isFinite()||!e.isFinite()){if(!n.isFinite()&&!e.isFinite())return n.isNegative()===e.isNegative()?n:new t(0);if(!n.isFinite())return e.isNegative()?n:n.isNegative()?new t(0):e;if(!e.isFinite())return n.isNegative()?e:e.isNegative()?new t(0):n}return Bk(n,e,function(r,i){return r&i})}function By(n){if(n.isFinite()&&!n.isInteger())throw new Error("Integer expected in function bitNot");var e=n.constructor,t=e.precision;e.config({precision:1e9});var r=n.plus(new e(1));return r.s=-r.s||null,e.config({precision:t}),r}function vge(n,e){if(n.isFinite()&&!n.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitOr");var t=n.constructor;if(n.isNaN()||e.isNaN())return new t(NaN);var r=new t(-1);return n.isZero()||e.eq(r)||n.eq(e)?e:e.isZero()||n.eq(r)?n:!n.isFinite()||!e.isFinite()?!n.isFinite()&&!n.isNegative()&&e.isNegative()||n.isNegative()&&!e.isNegative()&&!e.isFinite()?r:n.isNegative()&&e.isNegative()?n.isFinite()?n:e:n.isFinite()?e:n:Bk(n,e,function(i,o){return i|o})}function Bk(n,e,t){var r=n.constructor,i,o,s=+(n.s<0),a=+(e.s<0);if(s){i=Wb(By(n));for(var l=0;l<i.length;++l)i[l]^=1}else i=Wb(n);if(a){o=Wb(By(e));for(var u=0;u<o.length;++u)o[u]^=1}else o=Wb(e);var c,f,d;i.length<=o.length?(c=i,f=o,d=s):(c=o,f=i,d=a);var h=c.length,m=f.length,g=t(s,a)^1,y=new r(g^1),p=new r(1),w=new r(2),b=r.precision;for(r.config({precision:1e9});h>0;)t(c[--h],f[--m])===g&&(y=y.plus(p)),p=p.times(w);for(;m>0;)t(d,f[--m])===g&&(y=y.plus(p)),p=p.times(w);return r.config({precision:b}),g===0&&(y.s=-y.s),y}function Wb(n){for(var e=n.d,t=e[0]+"",r=1;r<e.length;++r){for(var i=e[r]+"",o=7-i.length;o--;)i="0"+i;t+=i}for(var s=t.length;t.charAt(s)==="0";)s--;var a=n.e,l=t.slice(0,s+1||1),u=l.length;if(a>0)if(++a>u)for(a-=u;a--;)l+="0";else a<u&&(l=l.slice(0,a)+"."+l.slice(a));for(var c=[0],f=0;f<l.length;){for(var d=c.length;d--;)c[d]*=10;c[0]+=parseInt(l.charAt(f++));for(var h=0;h<c.length;++h)c[h]>1&&((c[h+1]===null||c[h+1]===void 0)&&(c[h+1]=0),c[h+1]+=c[h]>>1,c[h]&=1)}return c.reverse()}function yge(n,e){if(n.isFinite()&&!n.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitXor");var t=n.constructor;if(n.isNaN()||e.isNaN())return new t(NaN);if(n.isZero())return e;if(e.isZero())return n;if(n.eq(e))return new t(0);var r=new t(-1);return n.eq(r)?By(e):e.eq(r)?By(n):!n.isFinite()||!e.isFinite()?!n.isFinite()&&!e.isFinite()?r:new t(n.isNegative()===e.isNegative()?1/0:-1/0):Bk(n,e,function(i,o){return i^o})}function xge(n,e){if(n.isFinite()&&!n.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function leftShift");var t=n.constructor;return n.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new t(NaN):n.isZero()||e.isZero()?n:!n.isFinite()&&!e.isFinite()?new t(NaN):e.lt(55)?n.times(Math.pow(2,e.toNumber())+""):n.times(new t(2).pow(e))}function bge(n,e){if(n.isFinite()&&!n.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function rightArithShift");var t=n.constructor;return n.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new t(NaN):n.isZero()||e.isZero()?n:e.isFinite()?e.lt(55)?n.div(Math.pow(2,e.toNumber())+"").floor():n.div(new t(2).pow(e)).floor():n.isNegative()?new t(-1):n.isFinite()?new t(0):new t(NaN)}var N5="bitAnd",wge=["typed","matrix","equalScalar","concat"],bK=ae(N5,wge,n=>{var{typed:e,matrix:t,equalScalar:r,concat:i}=n,o=fl({typed:e,equalScalar:r}),s=c2({typed:e,equalScalar:r}),a=Zi({typed:e,equalScalar:r}),l=nr({typed:e,matrix:t,concat:i});return e(N5,{"number, number":FY,"BigNumber, BigNumber":gge},l({SS:s,DS:o,Ss:a}))}),P5="bitNot",Sge=["typed"],_ge=ae(P5,Sge,n=>{var{typed:e}=n;return e(P5,{number:BY,BigNumber:By,"Array | Matrix":e.referToSelf(t=>r=>hn(r,t))})}),R5="bitOr",Ege=["typed","matrix","equalScalar","DenseMatrix","concat"],wK=ae(R5,Ege,n=>{var{typed:e,matrix:t,equalScalar:r,DenseMatrix:i,concat:o}=n,s=od({typed:e}),a=Fk({typed:e,equalScalar:r}),l=Qh({typed:e,DenseMatrix:i}),u=nr({typed:e,matrix:t,concat:o});return e(R5,{"number, number":zY,"BigNumber, BigNumber":vge},u({SS:a,DS:s,Ss:l}))}),Mge="matAlgo07xSSf",Cge=["typed","DenseMatrix"],lu=ae(Mge,Cge,n=>{var{typed:e,DenseMatrix:t}=n;return function(o,s,a){var l=o._size,u=o._datatype||o._data===void 0?o._datatype:o.getDataType(),c=s._size,f=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(l.length!==c.length)throw new un(l.length,c.length);if(l[0]!==c[0]||l[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+c+")");var d=l[0],h=l[1],m,g=0,y=a;typeof u=="string"&&u===f&&u!=="mixed"&&(m=u,g=e.convert(0,m),y=e.find(a,[m,m]));var p,w,b=[];for(p=0;p<d;p++)b[p]=[];var v=[],S=[],x=[],M=[];for(w=0;w<h;w++){var A=w+1;for(r(o,w,x,v,A),r(s,w,M,S,A),p=0;p<d;p++){var T=x[p]===A?v[p]:g,C=M[p]===A?S[p]:g;b[p][w]=y(T,C)}}return new t({data:b,size:[d,h],datatype:u===o._datatype&&f===s._datatype?m:void 0})};function r(i,o,s,a,l){for(var u=i._values,c=i._index,f=i._ptr,d=f[o],h=f[o+1];d<h;d++){var m=c[d];s[m]=l,a[m]=u[d]}}}),O5="bitXor",Age=["typed","matrix","DenseMatrix","concat"],Tge=ae(O5,Age,n=>{var{typed:e,matrix:t,DenseMatrix:r,concat:i}=n,o=Xo({typed:e}),s=lu({typed:e,DenseMatrix:r}),a=Si({typed:e,DenseMatrix:r}),l=nr({typed:e,matrix:t,concat:i});return e(O5,{"number, number":UY,"BigNumber, BigNumber":yge},l({SS:s,DS:o,Ss:a}))}),k5="arg",Dge=["typed"],Nge=ae(k5,Dge,n=>{var{typed:e}=n;return e(k5,{number:function(r){return Math.atan2(0,r)},BigNumber:function(r){return r.constructor.atan2(0,r)},Complex:function(r){return r.arg()},"Array | Matrix":e.referToSelf(t=>r=>hn(r,t))})}),I5="conj",Pge=["typed"],Rge=ae(I5,Pge,n=>{var{typed:e}=n;return e(I5,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.conjugate(),"Array | Matrix":e.referToSelf(t=>r=>hn(r,t))})}),L5="im",Oge=["typed"],kge=ae(L5,Oge,n=>{var{typed:e}=n;return e(L5,{number:()=>0,"BigNumber | Fraction":t=>t.mul(0),Complex:t=>t.im,"Array | Matrix":e.referToSelf(t=>r=>hn(r,t))})}),F5="re",Ige=["typed"],Lge=ae(F5,Ige,n=>{var{typed:e}=n;return e(F5,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.re,"Array | Matrix":e.referToSelf(t=>r=>hn(r,t))})}),B5="not",Fge=["typed"],Bge=ae(B5,Fge,n=>{var{typed:e}=n;return e(B5,{"null | undefined":()=>!0,number:jY,Complex:function(r){return r.re===0&&r.im===0},BigNumber:function(r){return r.isZero()||r.isNaN()},Unit:e.referToSelf(t=>r=>e.find(t,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(t=>r=>hn(r,t))})}),z5="or",zge=["typed","matrix","equalScalar","DenseMatrix","concat"],SK=ae(z5,zge,n=>{var{typed:e,matrix:t,equalScalar:r,DenseMatrix:i,concat:o}=n,s=Xo({typed:e}),a=u2({typed:e,equalScalar:r}),l=Si({typed:e,DenseMatrix:i}),u=nr({typed:e,matrix:t,concat:o});return e(z5,{"number, number":GY,"Complex, Complex":function(f,d){return f.re!==0||f.im!==0||d.re!==0||d.im!==0},"BigNumber, BigNumber":function(f,d){return!f.isZero()&&!f.isNaN()||!d.isZero()&&!d.isNaN()},"Unit, Unit":e.referToSelf(c=>(f,d)=>c(f.value||0,d.value||0))},u({SS:a,DS:s,Ss:l}))}),U5="xor",Uge=["typed","matrix","DenseMatrix","concat"],Vge=ae(U5,Uge,n=>{var{typed:e,matrix:t,DenseMatrix:r,concat:i}=n,o=Xo({typed:e}),s=lu({typed:e,DenseMatrix:r}),a=Si({typed:e,DenseMatrix:r}),l=nr({typed:e,matrix:t,concat:i});return e(U5,{"number, number":qY,"Complex, Complex":function(c,f){return(c.re!==0||c.im!==0)!=(f.re!==0||f.im!==0)},"BigNumber, BigNumber":function(c,f){return(!c.isZero()&&!c.isNaN())!=(!f.isZero()&&!f.isNaN())},"Unit, Unit":e.referToSelf(u=>(c,f)=>u(c.value||0,f.value||0))},l({SS:s,DS:o,Ss:a}))}),V5="concat",$ge=["typed","matrix","isInteger"],_K=ae(V5,$ge,n=>{var{typed:e,matrix:t,isInteger:r}=n;return e(V5,{"...Array | Matrix | number | BigNumber":function(o){var s,a=o.length,l=-1,u,c=!1,f=[];for(s=0;s<a;s++){var d=o[s];if(Vt(d)&&(c=!0),rn(d)||en(d)){if(s!==a-1)throw new Error("Dimension must be specified as last argument");if(u=l,l=d.valueOf(),!r(l))throw new TypeError("Integer number expected for dimension");if(l<0||s>0&&l>u)throw new Ia(l,u+1)}else{var h=Kt(d).valueOf(),m=on(h);if(f[s]=h,u=l,l=m.length-1,s>0&&l!==u)throw new un(u+1,l+1)}}if(f.length===0)throw new SyntaxError("At least one matrix expected");for(var g=f.shift();f.length;)g=xY(g,f.shift(),l);return c?t(g):g},"...string":function(o){return o.join("")}})}),$5="column",Hge=["typed","Index","matrix","range"],EK=ae($5,Hge,n=>{var{typed:e,Index:t,matrix:r,range:i}=n;return e($5,{"Matrix, number":o,"Array, number":function(a,l){return o(r(Kt(a)),l).valueOf()}});function o(s,a){if(s.size().length!==2)throw new Error("Only two dimensional matrix is supported");jn(a,s.size()[1]);var l=i(0,s.size()[0]),u=new t(l,a),c=s.subset(u);return Vt(c)?c:r([[c]])}}),H5="count",Wge=["typed","size","prod"],jge=ae(H5,Wge,n=>{var{typed:e,size:t,prod:r}=n;return e(H5,{string:function(o){return o.length},"Matrix | Array":function(o){return r(t(o))}})}),W5="cross",Gge=["typed","matrix","subtract","multiply"],qge=ae(W5,Gge,n=>{var{typed:e,matrix:t,subtract:r,multiply:i}=n;return e(W5,{"Matrix, Matrix":function(a,l){return t(o(a.toArray(),l.toArray()))},"Matrix, Array":function(a,l){return t(o(a.toArray(),l))},"Array, Matrix":function(a,l){return t(o(a,l.toArray()))},"Array, Array":o});function o(s,a){var l=Math.max(on(s).length,on(a).length);s=hE(s),a=hE(a);var u=on(s),c=on(a);if(u.length!==1||c.length!==1||u[0]!==3||c[0]!==3)throw new RangeError("Vectors with length 3 expected (Size A = ["+u.join(", ")+"], B = ["+c.join(", ")+"])");var f=[r(i(s[1],a[2]),i(s[2],a[1])),r(i(s[2],a[0]),i(s[0],a[2])),r(i(s[0],a[1]),i(s[1],a[0]))];return l>1?[f]:f}}),j5="diag",Xge=["typed","matrix","DenseMatrix","SparseMatrix"],Yge=ae(j5,Xge,n=>{var{typed:e,matrix:t,DenseMatrix:r,SparseMatrix:i}=n;return e(j5,{Array:function(u){return o(u,0,on(u),null)},"Array, number":function(u,c){return o(u,c,on(u),null)},"Array, BigNumber":function(u,c){return o(u,c.toNumber(),on(u),null)},"Array, string":function(u,c){return o(u,0,on(u),c)},"Array, number, string":function(u,c,f){return o(u,c,on(u),f)},"Array, BigNumber, string":function(u,c,f){return o(u,c.toNumber(),on(u),f)},Matrix:function(u){return o(u,0,u.size(),u.storage())},"Matrix, number":function(u,c){return o(u,c,u.size(),u.storage())},"Matrix, BigNumber":function(u,c){return o(u,c.toNumber(),u.size(),u.storage())},"Matrix, string":function(u,c){return o(u,0,u.size(),c)},"Matrix, number, string":function(u,c,f){return o(u,c,u.size(),f)},"Matrix, BigNumber, string":function(u,c,f){return o(u,c.toNumber(),u.size(),f)}});function o(l,u,c,f){if(!kt(u))throw new TypeError("Second parameter in function diag must be an integer");var d=u>0?u:0,h=u<0?-u:0;switch(c.length){case 1:return s(l,u,f,c[0],h,d);case 2:return a(l,u,f,c,h,d)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function s(l,u,c,f,d,h){var m=[f+d,f+h];if(c&&c!=="sparse"&&c!=="dense")throw new TypeError("Unknown matrix type ".concat(c,'"'));var g=c==="sparse"?i.diagonal(m,l,u):r.diagonal(m,l,u);return c!==null?g:g.valueOf()}function a(l,u,c,f,d,h){if(Vt(l)){var m=l.diagonal(u);return c!==null?c!==m.storage()?t(m,c):m:m.valueOf()}for(var g=Math.min(f[0]-d,f[1]-h),y=[],p=0;p<g;p++)y[p]=l[p+d][p+h];return c!==null?t(y):y}});function Kg(n,e,t,r,i){if(nh.isTypedFunction(n)){var o=[e,t,r],s=nh.resolve(n,o);if(s)return f(s.implementation,o);var a=[e,t],l=nh.resolve(n,a);if(l)return f(l.implementation,a);var u=[e],c=nh.resolve(n,u);return c?f(c.implementation,u):f(n,o)}else return n(e,t,r);function f(d,h){try{return d.apply(d,h)}catch(y){var m;if(y instanceof TypeError&&((m=y.data)===null||m===void 0?void 0:m.category)==="wrongType"){var g=[];throw g.push("value: ".concat(Zn(e))),h.length>=2&&g.push("index: ".concat(Zn(t))),h.length>=3&&g.push("array: ".concat(Zn(r))),new TypeError("Function ".concat(i," cannot apply callback arguments ")+"".concat(n.name,"(").concat(g.join(", "),") at index ").concat(JSON.stringify(t)))}else throw new TypeError("Function ".concat(i," cannot apply callback arguments ")+"to function ".concat(n.name,": ").concat(y.message))}}}var Kge="filter",Zge=["typed"],Jge=ae(Kge,Zge,n=>{var{typed:e}=n;return e("filter",{"Array, function":G5,"Matrix, function":function(r,i){return r.create(G5(r.toArray(),i))},"Array, RegExp":pE,"Matrix, RegExp":function(r,i){return r.create(pE(r.toArray(),i))}})});function G5(n,e){return vY(n,function(t,r,i){return Kg(e,t,[r],i,"filter")})}var q5="flatten",Qge=["typed","matrix"],eve=ae(q5,Qge,n=>{var{typed:e,matrix:t}=n;return e(q5,{Array:function(i){return Cn(i)},Matrix:function(i){var o=Cn(i.toArray());return t(o)}})}),X5="forEach",tve=["typed"],nve=ae(X5,tve,n=>{var{typed:e}=n;return e(X5,{"Array, function":rve,"Matrix, function":function(r,i){r.forEach(i)}})});function rve(n,e){var t=function r(i,o){if(Array.isArray(i))s2(i,function(s,a){r(s,o.concat(a))});else return Kg(e,i,o,n,"forEach")};t(n,[])}var Y5="getMatrixDataType",ive=["typed"],ove=ae(Y5,ive,n=>{var{typed:e}=n;return e(Y5,{Array:function(r){return Fy(r,Zn)},Matrix:function(r){return r.getDataType()}})}),K5="identity",sve=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],ave=ae(K5,sve,n=>{var{typed:e,config:t,matrix:r,BigNumber:i,DenseMatrix:o,SparseMatrix:s}=n;return e(K5,{"":function(){return t.matrix==="Matrix"?r([]):[]},string:function(c){return r(c)},"number | BigNumber":function(c){return l(c,c,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,f){return l(c,c,f)},"number | BigNumber, number | BigNumber":function(c,f){return l(c,f,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,f,d){return l(c,f,d)},Array:function(c){return a(c)},"Array, string":function(c,f){return a(c,f)},Matrix:function(c){return a(c.valueOf(),c.storage())},"Matrix, string":function(c,f){return a(c.valueOf(),f)}});function a(u,c){switch(u.length){case 0:return c?r(c):[];case 1:return l(u[0],u[0],c);case 2:return l(u[0],u[1],c);default:throw new Error("Vector containing two values expected")}}function l(u,c,f){var d=en(u)||en(c)?i:null;if(en(u)&&(u=u.toNumber()),en(c)&&(c=c.toNumber()),!kt(u)||u<1)throw new Error("Parameters in function identity must be positive integers");if(!kt(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var h=d?new i(1):1,m=d?new d(0):0,g=[u,c];if(f){if(f==="sparse")return s.diagonal(g,h,0,m);if(f==="dense")return o.diagonal(g,h,0,m);throw new TypeError('Unknown matrix type "'.concat(f,'"'))}for(var y=vg([],g,m),p=u<c?u:c,w=0;w<p;w++)y[w][w]=h;return y}}),Z5="kron",lve=["typed","matrix","multiplyScalar"],uve=ae(Z5,lve,n=>{var{typed:e,matrix:t,multiplyScalar:r}=n;return e(Z5,{"Matrix, Matrix":function(s,a){return t(i(s.toArray(),a.toArray()))},"Matrix, Array":function(s,a){return t(i(s.toArray(),a))},"Array, Matrix":function(s,a){return t(i(s,a.toArray()))},"Array, Array":i});function i(o,s){if(on(o).length===1&&(o=[o]),on(s).length===1&&(s=[s]),on(o).length>2||on(s).length>2)throw new RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(o.length)+", y = "+JSON.stringify(s.length)+")");var a=[],l=[];return o.map(function(u){return s.map(function(c){return l=[],a.push(l),u.map(function(f){return c.map(function(d){return l.push(r(f,d))})})})})&&a}}),J5="map",cve=["typed"],fve=ae(J5,cve,n=>{var{typed:e}=n;return e(J5,{"Array, function":dve,"Matrix, function":function(r,i){return r.map(i)}})});function dve(n,e){var t=function r(i,o){return Array.isArray(i)?i.map(function(s,a){return r(s,o.concat(a))}):Kg(e,i,o,n,"map")};return t(n,[])}var Q5="diff",hve=["typed","matrix","subtract","number"],MK=ae(Q5,hve,n=>{var{typed:e,matrix:t,subtract:r,number:i}=n;return e(Q5,{"Array | Matrix":function(c){return Vt(c)?t(s(c.toArray())):s(c)},"Array | Matrix, number":function(c,f){if(!kt(f))throw new RangeError("Dimension must be a whole number");return Vt(c)?t(o(c.toArray(),f)):o(c,f)},"Array, BigNumber":e.referTo("Array,number",u=>(c,f)=>u(c,i(f))),"Matrix, BigNumber":e.referTo("Matrix,number",u=>(c,f)=>u(c,i(f)))});function o(u,c){if(Vt(u)&&(u=u.toArray()),!Array.isArray(u))throw RangeError("Array/Matrix does not have that many dimensions");if(c>0){var f=[];return u.forEach(d=>{f.push(o(d,c-1))}),f}else{if(c===0)return s(u);throw RangeError("Cannot have negative dimension")}}function s(u){for(var c=[],f=u.length,d=1;d<f;d++)c.push(a(u[d-1],u[d]));return c}function a(u,c){Vt(u)&&(u=u.toArray()),Vt(c)&&(c=c.toArray());var f=Array.isArray(u),d=Array.isArray(c);if(f&&d)return l(u,c);if(!f&&!d)return r(c,u);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}function l(u,c){if(u.length!==c.length)throw RangeError("Not all sub-arrays have the same length");for(var f=[],d=u.length,h=0;h<d;h++)f.push(a(u[h],c[h]));return f}}),pve="ones",mve=["typed","config","matrix","BigNumber"],gve=ae(pve,mve,n=>{var{typed:e,config:t,matrix:r,BigNumber:i}=n;return e("ones",{"":function(){return t.matrix==="Array"?o([]):o([],"default")},"...number | BigNumber | string":function(u){var c=u[u.length-1];if(typeof c=="string"){var f=u.pop();return o(u,f)}else return t.matrix==="Array"?o(u):o(u,"default")},Array:o,Matrix:function(u){var c=u.storage();return o(u.valueOf(),c)},"Array | Matrix, string":function(u,c){return o(u.valueOf(),c)}});function o(l,u){var c=s(l),f=c?new i(1):1;if(a(l),u){var d=r(u);return l.length>0?d.resize(l,f):d}else{var h=[];return l.length>0?vg(h,l,f):h}}function s(l){var u=!1;return l.forEach(function(c,f,d){en(c)&&(u=!0,d[f]=c.toNumber())}),u}function a(l){l.forEach(function(u){if(typeof u!="number"||!kt(u)||u<0)throw new Error("Parameters in function ones must be positive integers")})}});function zk(){throw new Error('No "bignumber" implementation available')}function CK(){throw new Error('No "fraction" implementation available')}function AK(){throw new Error('No "matrix" implementation available')}var ez="range",vve=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],TK=ae(ez,vve,n=>{var{typed:e,config:t,matrix:r,bignumber:i,smaller:o,smallerEq:s,larger:a,largerEq:l,add:u,isPositive:c}=n;return e(ez,{string:d,"string, boolean":d,"number, number":function(y,p){return f(h(y,p,1,!1))},"number, number, number":function(y,p,w){return f(h(y,p,w,!1))},"number, number, boolean":function(y,p,w){return f(h(y,p,1,w))},"number, number, number, boolean":function(y,p,w,b){return f(h(y,p,w,b))},"BigNumber, BigNumber":function(y,p){var w=y.constructor;return f(h(y,p,new w(1),!1))},"BigNumber, BigNumber, BigNumber":function(y,p,w){return f(h(y,p,w,!1))},"BigNumber, BigNumber, boolean":function(y,p,w){var b=y.constructor;return f(h(y,p,new b(1),w))},"BigNumber, BigNumber, BigNumber, boolean":function(y,p,w,b){return f(h(y,p,w,b))},"Unit, Unit, Unit":function(y,p,w){return f(h(y,p,w,!1))},"Unit, Unit, Unit, boolean":function(y,p,w,b){return f(h(y,p,w,b))}});function f(g){return t.matrix==="Matrix"?r?r(g):AK():g}function d(g,y){var p=m(g);if(!p)throw new SyntaxError('String "'+g+'" is no valid range');return t.number==="BigNumber"?(i===void 0&&zk(),f(h(i(p.start),i(p.end),i(p.step)))):f(h(p.start,p.end,p.step,y))}function h(g,y,p,w){for(var b=[],v=c(p)?w?s:o:w?l:a,S=g;v(S,y);)b.push(S),S=u(S,p);return b}function m(g){var y=g.split(":"),p=y.map(function(b){return Number(b)}),w=p.some(function(b){return isNaN(b)});if(w)return null;switch(p.length){case 2:return{start:p[0],end:p[1],step:1};case 3:return{start:p[0],end:p[2],step:p[1]};default:return null}}}),tz="reshape",yve=["typed","isInteger","matrix"],xve=ae(tz,yve,n=>{var{typed:e,isInteger:t}=n;return e(tz,{"Matrix, Array":function(i,o){return i.reshape(o,!0)},"Array, Array":function(i,o){return o.forEach(function(s){if(!t(s))throw new TypeError("Invalid size for dimension: "+s)}),Ok(i,o)}})}),bve="resize",wve=["config","matrix"],Sve=ae(bve,wve,n=>{var{config:e,matrix:t}=n;return function(o,s,a){if(arguments.length!==2&&arguments.length!==3)throw new bc("resize",arguments.length,2,3);if(Vt(s)&&(s=s.valueOf()),en(s[0])&&(s=s.map(function(c){return en(c)?c.toNumber():c})),Vt(o))return o.resize(s,a,!0);if(typeof o=="string")return r(o,s,a);var l=Array.isArray(o)?!1:e.matrix!=="Array";if(s.length===0){for(;Array.isArray(o);)o=o[0];return Kt(o)}else{Array.isArray(o)||(o=[o]),o=Kt(o);var u=vg(o,s,a);return l?t(u):u}};function r(i,o,s){if(s!==void 0){if(typeof s!="string"||s.length!==1)throw new TypeError("Single character expected as defaultValue")}else s=" ";if(o.length!==1)throw new un(o.length,1);var a=o[0];if(typeof a!="number"||!kt(a))throw new TypeError("Invalid size, must contain positive integers (size: "+fn(o)+")");if(i.length>a)return i.substring(0,a);if(i.length<a){for(var l=i,u=0,c=a-i.length;u<c;u++)l+=s;return l}else return i}}),nz="rotate",_ve=["typed","multiply","rotationMatrix"],Eve=ae(nz,_ve,n=>{var{typed:e,multiply:t,rotationMatrix:r}=n;return e(nz,{"Array , number | BigNumber | Complex | Unit":function(s,a){i(s,2);var l=t(r(a),s);return l.toArray()},"Matrix , number | BigNumber | Complex | Unit":function(s,a){return i(s,2),t(r(a),s)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(s,a,l){i(s,3);var u=t(r(a,l),s);return u},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(s,a,l){return i(s,3),t(r(a,l),s)}});function i(o,s){var a=Array.isArray(o)?on(o):o.size();if(a.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(s));if(a.length===2&&a[1]!==1)throw new RangeError("Vector must be of dimensions 1x".concat(s));if(a[0]!==s)throw new RangeError("Vector must be of dimensions 1x".concat(s))}}),rz="rotationMatrix",Mve=["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],Cve=ae(rz,Mve,n=>{var{typed:e,config:t,multiplyScalar:r,addScalar:i,unaryMinus:o,norm:s,BigNumber:a,matrix:l,DenseMatrix:u,SparseMatrix:c,cos:f,sin:d}=n;return e(rz,{"":function(){return t.matrix==="Matrix"?l([]):[]},string:function(b){return l(b)},"number | BigNumber | Complex | Unit":function(b){return h(b,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(b,v){return h(b,v)},"number | BigNumber | Complex | Unit, Array":function(b,v){var S=l(v);return m(S),p(b,S,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(b,v){m(v);var S=v.storage()||(t.matrix==="Matrix"?"dense":void 0);return p(b,v,S)},"number | BigNumber | Complex | Unit, Array, string":function(b,v,S){var x=l(v);return m(x),p(b,x,S)},"number | BigNumber | Complex | Unit, Matrix, string":function(b,v,S){return m(v),p(b,v,S)}});function h(w,b){var v=en(w),S=v?new a(-1):-1,x=f(w),M=d(w),A=[[x,r(S,M)],[M,x]];return y(A,b)}function m(w){var b=w.size();if(b.length<1||b[0]!==3)throw new RangeError("Vector must be of dimensions 1x3")}function g(w){return w.reduce((b,v)=>r(b,v))}function y(w,b){if(b){if(b==="sparse")return new c(w);if(b==="dense")return new u(w);throw new TypeError('Unknown matrix type "'.concat(b,'"'))}return w}function p(w,b,v){var S=s(b);if(S===0)throw new RangeError("Rotation around zero vector");var x=en(w)?a:null,M=x?new x(1):1,A=x?new x(-1):-1,T=x?new x(b.get([0])/S):b.get([0])/S,C=x?new x(b.get([1])/S):b.get([1])/S,D=x?new x(b.get([2])/S):b.get([2])/S,R=f(w),B=i(M,o(R)),F=d(w),U=i(R,g([T,T,B])),N=i(g([T,C,B]),g([A,D,F])),I=i(g([T,D,B]),g([C,F])),V=i(g([T,C,B]),g([D,F])),L=i(R,g([C,C,B])),X=i(g([C,D,B]),g([A,T,F])),Z=i(g([T,D,B]),g([A,C,F])),te=i(g([C,D,B]),g([T,F])),Y=i(R,g([D,D,B])),re=[[U,N,I],[V,L,X],[Z,te,Y]];return y(re,v)}}),iz="row",Ave=["typed","Index","matrix","range"],DK=ae(iz,Ave,n=>{var{typed:e,Index:t,matrix:r,range:i}=n;return e(iz,{"Matrix, number":o,"Array, number":function(a,l){return o(r(Kt(a)),l).valueOf()}});function o(s,a){if(s.size().length!==2)throw new Error("Only two dimensional matrix is supported");jn(a,s.size()[0]);var l=i(0,s.size()[1]),u=new t(a,l),c=s.subset(u);return Vt(c)?c:r([[c]])}}),oz="size",Tve=["typed","config","?matrix"],Dve=ae(oz,Tve,n=>{var{typed:e,config:t,matrix:r}=n;return e(oz,{Matrix:function(o){return o.create(o.size())},Array:on,string:function(o){return t.matrix==="Array"?[o.length]:r([o.length])},"number | Complex | BigNumber | Unit | boolean | null":function(o){return t.matrix==="Array"?[]:r?r([]):AK()}})}),sz="squeeze",Nve=["typed","matrix"],Pve=ae(sz,Nve,n=>{var{typed:e,matrix:t}=n;return e(sz,{Array:function(i){return hE(Kt(i))},Matrix:function(i){var o=hE(i.toArray());return Array.isArray(o)?t(o):o},any:function(i){return Kt(i)}})}),az="subset",Rve=["typed","matrix","zeros","add"],NK=ae(az,Rve,n=>{var{typed:e,matrix:t,zeros:r,add:i}=n;return e(az,{"Matrix, Index":function(a,l){return gg(l)?t():(dE(a,l),a.subset(l))},"Array, Index":e.referTo("Matrix, Index",function(s){return function(a,l){var u=s(t(a),l);return l.isScalar()?u:u.valueOf()}}),"Object, Index":kve,"string, Index":Ove,"Matrix, Index, any, any":function(a,l,u,c){return gg(l)?a:(dE(a,l),a.clone().subset(l,o(u,l),c))},"Array, Index, any, any":e.referTo("Matrix, Index, any, any",function(s){return function(a,l,u,c){var f=s(t(a),l,u,c);return f.isMatrix?f.valueOf():f}}),"Array, Index, any":e.referTo("Matrix, Index, any, any",function(s){return function(a,l,u){return s(t(a),l,u,void 0).valueOf()}}),"Matrix, Index, any":e.referTo("Matrix, Index, any, any",function(s){return function(a,l,u){return s(a,l,u,void 0)}}),"string, Index, string":lz,"string, Index, string, string":lz,"Object, Index, any":Ive});function o(s,a){if(typeof s=="string")throw new Error("can't boradcast a string");if(a._isScalar)return s;var l=a.size();if(l.every(u=>u>0))try{return i(s,r(l))}catch{return s}else return s}});function Ove(n,e){if(!W1(e))throw new TypeError("Index expected");if(gg(e))return"";if(dE(Array.from(n),e),e.size().length!==1)throw new un(e.size().length,1);var t=n.length;jn(e.min()[0],t),jn(e.max()[0],t);var r=e.dimension(0),i="";return r.forEach(function(o){i+=n.charAt(o)}),i}function lz(n,e,t,r){if(!e||e.isIndex!==!0)throw new TypeError("Index expected");if(gg(e))return n;if(dE(Array.from(n),e),e.size().length!==1)throw new un(e.size().length,1);if(r!==void 0){if(typeof r!="string"||r.length!==1)throw new TypeError("Single character expected as defaultValue")}else r=" ";var i=e.dimension(0),o=i.size()[0];if(o!==t.length)throw new un(i.size()[0],t.length);var s=n.length;jn(e.min()[0]),jn(e.max()[0]);for(var a=[],l=0;l<s;l++)a[l]=n.charAt(l);if(i.forEach(function(f,d){a[f]=t.charAt(d[0])}),a.length>s)for(var u=s-1,c=a.length;u<c;u++)a[u]||(a[u]=r);return a.join("")}function kve(n,e){if(!gg(e)){if(e.size().length!==1)throw new un(e.size(),1);var t=e.dimension(0);if(typeof t!="string")throw new TypeError("String expected as index to retrieve an object property");return zo(n,t)}}function Ive(n,e,t){if(gg(e))return n;if(e.size().length!==1)throw new un(e.size(),1);var r=e.dimension(0);if(typeof r!="string")throw new TypeError("String expected as index to retrieve an object property");var i=Kt(n);return pg(i,r,t),i}var uz="transpose",Lve=["typed","matrix"],Fve=ae(uz,Lve,n=>{var{typed:e,matrix:t}=n;return e(uz,{Array:s=>r(t(s)).valueOf(),Matrix:r,any:Kt});function r(s){var a=s.size(),l;switch(a.length){case 1:l=s.clone();break;case 2:{var u=a[0],c=a[1];if(c===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+fn(a)+")");switch(s.storage()){case"dense":l=i(s,u,c);break;case"sparse":l=o(s,u,c);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+fn(a)+")")}return l}function i(s,a,l){for(var u=s._data,c=[],f,d=0;d<l;d++){f=c[d]=[];for(var h=0;h<a;h++)f[h]=Kt(u[h][d])}return s.createDenseMatrix({data:c,size:[l,a],datatype:s._datatype})}function o(s,a,l){for(var u=s._values,c=s._index,f=s._ptr,d=u?[]:void 0,h=[],m=[],g=[],y=0;y<a;y++)g[y]=0;var p,w,b;for(p=0,w=c.length;p<w;p++)g[c[p]]++;for(var v=0,S=0;S<a;S++)m.push(v),v+=g[S],g[S]=m[S];for(m.push(v),b=0;b<l;b++)for(var x=f[b],M=f[b+1],A=x;A<M;A++){var T=g[c[A]]++;h[T]=b,u&&(d[T]=Kt(u[A]))}return s.createSparseMatrix({values:d,index:h,ptr:m,size:[l,a],datatype:s._datatype})}}),cz="ctranspose",Bve=["typed","transpose","conj"],zve=ae(cz,Bve,n=>{var{typed:e,transpose:t,conj:r}=n;return e(cz,{any:function(o){return r(t(o))}})}),fz="zeros",Uve=["typed","config","matrix","BigNumber"],Vve=ae(fz,Uve,n=>{var{typed:e,config:t,matrix:r,BigNumber:i}=n;return e(fz,{"":function(){return t.matrix==="Array"?o([]):o([],"default")},"...number | BigNumber | string":function(u){var c=u[u.length-1];if(typeof c=="string"){var f=u.pop();return o(u,f)}else return t.matrix==="Array"?o(u):o(u,"default")},Array:o,Matrix:function(u){var c=u.storage();return o(u.valueOf(),c)},"Array | Matrix, string":function(u,c){return o(u.valueOf(),c)}});function o(l,u){var c=s(l),f=c?new i(0):0;if(a(l),u){var d=r(u);return l.length>0?d.resize(l,f):d}else{var h=[];return l.length>0?vg(h,l,f):h}}function s(l){var u=!1;return l.forEach(function(c,f,d){en(c)&&(u=!0,d[f]=c.toNumber())}),u}function a(l){l.forEach(function(u){if(typeof u!="number"||!kt(u)||u<0)throw new Error("Parameters in function zeros must be positive integers")})}}),dz="fft",$ve=["typed","matrix","addScalar","multiplyScalar","divideScalar","exp","tau","i","dotDivide","conj","pow","ceil","log2"],Hve=ae(dz,$ve,n=>{var{typed:e,matrix:t,addScalar:r,multiplyScalar:i,divideScalar:o,exp:s,tau:a,i:l,dotDivide:u,conj:c,pow:f,ceil:d,log2:h}=n;return e(dz,{Array:m,Matrix:function(b){return b.create(m(b.toArray()))}});function m(w){var b=on(w);return b.length===1?p(w,b[0]):g(w.map(v=>m(v,b.slice(1))),0)}function g(w,b){var v=on(w);if(b!==0)return new Array(v[0]).fill(0).map((x,M)=>g(w[M],b-1));if(v.length===1)return p(w);function S(x){var M=on(x);return new Array(M[1]).fill(0).map((A,T)=>new Array(M[0]).fill(0).map((C,D)=>x[D][T]))}return S(g(S(w),1))}function y(w){for(var b=w.length,v=s(o(i(-1,i(l,a)),b)),S=[],x=1-b;x<b;x++)S.push(f(v,o(f(x,2),2)));for(var M=f(2,d(h(b+b-1))),A=[...new Array(b).fill(0).map((N,I)=>i(w[I],S[b-1+I])),...new Array(M-b).fill(0)],T=[...new Array(b+b-1).fill(0).map((N,I)=>o(1,S[I])),...new Array(M-(b+b-1)).fill(0)],C=p(A),D=p(T),R=new Array(M).fill(0).map((N,I)=>i(C[I],D[I])),B=u(c(m(c(R))),M),F=[],U=b-1;U<b+b-1;U++)F.push(i(B[U],S[U]));return F}function p(w){var b=w.length;if(b===1)return[w[0]];if(b%2===0){for(var v=[...p(w.filter((A,T)=>T%2===0)),...p(w.filter((A,T)=>T%2===1))],S=0;S<b/2;S++){var x=v[S],M=i(v[S+b/2],s(i(i(a,l),o(-S,b))));v[S]=r(x,M),v[S+b/2]=r(x,i(-1,M))}return v}else return y(w)}}),hz="ifft",Wve=["typed","fft","dotDivide","conj"],jve=ae(hz,Wve,n=>{var{typed:e,fft:t,dotDivide:r,conj:i}=n;return e(hz,{"Array | Matrix":function(s){var a=Vt(s)?s.size():on(s);return r(i(t(i(s))),a.reduce((l,u)=>l*u,1))}})});function Rh(n){"@babel/helpers - typeof";return Rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rh(n)}function Gve(n,e){if(Rh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(Rh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function PK(n){var e=Gve(n,"string");return Rh(e)=="symbol"?e:e+""}function _r(n,e,t){return(e=PK(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function pz(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function qve(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?pz(Object(t),!0).forEach(function(r){_r(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):pz(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var Xve="solveODE",Yve=["typed","add","subtract","multiply","divide","max","map","abs","isPositive","isNegative","larger","smaller","matrix","bignumber","unaryMinus"],Kve=ae(Xve,Yve,n=>{var{typed:e,add:t,subtract:r,multiply:i,divide:o,max:s,map:a,abs:l,isPositive:u,isNegative:c,larger:f,smaller:d,matrix:h,bignumber:m,unaryMinus:g}=n;function y(A){return function(T,C,D,R){var B=!(C.length===2&&(C.every(x)||C.every(os)));if(B)throw new Error('"tspan" must be an Array of two numeric values or two units [tStart, tEnd]');var F=C[0],U=C[1],N=f(U,F),I=R.firstStep;if(I!==void 0&&!u(I))throw new Error('"firstStep" must be positive');var V=R.maxStep;if(V!==void 0&&!u(V))throw new Error('"maxStep" must be positive');var L=R.minStep;if(L&&c(L))throw new Error('"minStep" must be positive or zero');var X=[F,U,I,L,V].filter(q=>q!==void 0);if(!(X.every(x)||X.every(os)))throw new Error('Inconsistent type of "t" dependant variables');for(var Z=1,te=R.tol?R.tol:1e-4,Y=R.minDelta?R.minDelta:.2,re=R.maxDelta?R.maxDelta:5,fe=R.maxIter?R.maxIter:1e4,ue=[F,U,...D,V,L].some(en),[ge,Se,xe,De]=ue?[m(A.a),m(A.c),m(A.b),m(A.bp)]:[A.a,A.c,A.b,A.bp],Ae=I?N?I:g(I):o(r(U,F),Z),ie=[F],Re=[D],Pe=r(xe,De),ee=0,oe=0,Me=v(N),se=S(N);Me(ie[ee],U);){var G=[];Ae=se(ie[ee],U,Ae),G.push(T(ie[ee],Re[ee]));for(var j=1;j<Se.length;++j)G.push(T(t(ie[ee],i(Se[j],Ae)),t(Re[ee],i(Ae,ge[j],G))));var he=s(l(a(i(Pe,G),q=>os(q)?q.value:q)));he<te&&te/he>1/4&&(ie.push(t(ie[ee],Ae)),Re.push(t(Re[ee],i(Ae,xe,G))),ee++);var Ce=.84*(te/he)**(1/5);if(d(Ce,Y)?Ce=Y:f(Ce,re)&&(Ce=re),Ce=ue?m(Ce):Ce,Ae=i(Ae,Ce),V&&f(l(Ae),V)?Ae=N?V:g(V):L&&d(l(Ae),L)&&(Ae=N?L:g(L)),oe++,oe>fe)throw new Error("Maximum number of iterations reached, try changing options")}return{t:ie,y:Re}}}function p(A,T,C,D){var R=[[],[.5],[0,.75],[.2222222222222222,.3333333333333333,.4444444444444444]],B=[null,1/2,3/4,1],F=[2/9,1/3,4/9,0],U=[7/24,1/4,1/3,1/8],N={a:R,c:B,b:F,bp:U};return y(N)(A,T,C,D)}function w(A,T,C,D){var R=[[],[.2],[.075,.225],[.9777777777777777,-3.7333333333333334,3.5555555555555554],[2.9525986892242035,-11.595793324188385,9.822892851699436,-.2908093278463649],[2.8462752525252526,-10.757575757575758,8.906422717743473,.2784090909090909,-.2735313036020583],[.09114583333333333,0,.44923629829290207,.6510416666666666,-.322376179245283,.13095238095238096]],B=[null,1/5,3/10,4/5,8/9,1,1],F=[35/384,0,500/1113,125/192,-2187/6784,11/84,0],U=[5179/57600,0,7571/16695,393/640,-92097/339200,187/2100,1/40],N={a:R,c:B,b:F,bp:U};return y(N)(A,T,C,D)}function b(A,T,C,D){var R=D.method?D.method:"RK45",B={RK23:p,RK45:w};if(R.toUpperCase()in B){var F=qve({},D);return delete F.method,B[R.toUpperCase()](A,T,C,F)}else{var U=Object.keys(B).map(I=>'"'.concat(I,'"')),N="".concat(U.slice(0,-1).join(", ")," and ").concat(U.slice(-1));throw new Error('Unavailable method "'.concat(R,'". Available methods are ').concat(N))}}function v(A){return A?d:f}function S(A){var T=A?f:d;return function(C,D,R){var B=t(C,R);return T(B,D)?r(D,C):R}}function x(A){return en(A)||rn(A)}function M(A,T,C,D){var R=b(A,T.toArray(),C.toArray(),D);return{t:h(R.t),y:h(R.y)}}return e("solveODE",{"function, Array, Array, Object":b,"function, Matrix, Matrix, Object":M,"function, Array, Array":(A,T,C)=>b(A,T,C,{}),"function, Matrix, Matrix":(A,T,C)=>M(A,T,C,{}),"function, Array, number | BigNumber | Unit":(A,T,C)=>{var D=b(A,T,[C],{});return{t:D.t,y:D.y.map(R=>R[0])}},"function, Matrix, number | BigNumber | Unit":(A,T,C)=>{var D=b(A,T.toArray(),[C],{});return{t:h(D.t),y:h(D.y.map(R=>R[0]))}},"function, Array, number | BigNumber | Unit, Object":(A,T,C,D)=>{var R=b(A,T,[C],D);return{t:R.t,y:R.y.map(B=>B[0])}},"function, Matrix, number | BigNumber | Unit, Object":(A,T,C,D)=>{var R=b(A,T.toArray(),[C],D);return{t:h(R.t),y:h(R.y.map(B=>B[0]))}}})}),Zve="erf",Jve=["typed"],Qve=ae(Zve,Jve,n=>{var{typed:e}=n;return e("name",{number:function(s){var a=Math.abs(s);return a>=n0e?uf(s):a<=e0e?uf(s)*t(a):a<=4?uf(s)*(1-r(a)):uf(s)*(1-i(a))},"Array | Matrix":e.referToSelf(o=>s=>hn(s,o))});function t(o){var s=o*o,a=Eu[0][4]*s,l=s,u;for(u=0;u<3;u+=1)a=(a+Eu[0][u])*s,l=(l+Ap[0][u])*s;return o*(a+Eu[0][3])/(l+Ap[0][3])}function r(o){var s=Eu[1][8]*o,a=o,l;for(l=0;l<7;l+=1)s=(s+Eu[1][l])*o,a=(a+Ap[1][l])*o;var u=(s+Eu[1][7])/(a+Ap[1][7]),c=parseInt(o*16)/16,f=(o-c)*(o+c);return Math.exp(-c*c)*Math.exp(-f)*u}function i(o){var s=1/(o*o),a=Eu[2][5]*s,l=s,u;for(u=0;u<4;u+=1)a=(a+Eu[2][u])*s,l=(l+Ap[2][u])*s;var c=s*(a+Eu[2][4])/(l+Ap[2][4]);c=(t0e-c)/o,s=parseInt(o*16)/16;var f=(o-s)*(o+s);return Math.exp(-s*s)*Math.exp(-f)*c}}),e0e=.46875,t0e=.5641895835477563,Eu=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,21531153547440383e-24],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],Ap=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],n0e=Math.pow(2,53),mz="zeta",r0e=["typed","config","multiply","pow","divide","factorial","equal","smallerEq","isNegative","gamma","sin","subtract","add","?Complex","?BigNumber","pi"],i0e=ae(mz,r0e,n=>{var{typed:e,config:t,multiply:r,pow:i,divide:o,factorial:s,equal:a,smallerEq:l,isNegative:u,gamma:c,sin:f,subtract:d,add:h,Complex:m,BigNumber:g,pi:y}=n;return e(mz,{number:x=>p(x,M=>M,()=>20),BigNumber:x=>p(x,M=>new g(M),()=>Math.abs(Math.log10(t.epsilon))),Complex:w});function p(x,M,A){return a(x,0)?M(-.5):a(x,1)?M(NaN):isFinite(x)?b(x,M,A,T=>T):u(x)?M(NaN):M(1)}function w(x){return x.re===0&&x.im===0?new m(-.5):x.re===1?new m(NaN,NaN):x.re===1/0&&x.im===0?new m(1):x.im===1/0||x.re===-1/0?new m(NaN,NaN):b(x,M=>M,M=>Math.round(1.3*15+.9*Math.abs(M.im)),M=>M.re)}function b(x,M,A,T){var C=A(x);if(T(x)>-(C-1)/2)return S(x,M(C),M);var D=r(i(2,x),i(M(y),d(x,1)));return D=r(D,f(r(o(M(y),2),x))),D=r(D,c(d(1,x))),r(D,b(d(1,x),M,A,T))}function v(x,M){for(var A=x,T=x;l(T,M);T=h(T,1)){var C=o(r(s(h(M,d(T,1))),i(4,T)),r(s(d(M,T)),s(r(2,T))));A=h(A,C)}return r(M,A)}function S(x,M,A){for(var T=o(1,r(v(A(0),M),d(1,i(2,d(1,x))))),C=A(0),D=A(1);l(D,M);D=h(D,1))C=h(C,o(r((-1)**(D-1),v(D,M)),i(D,x)));return r(T,C)}}),gz="mode",o0e=["typed","isNaN","isNumeric"],s0e=ae(gz,o0e,n=>{var{typed:e,isNaN:t,isNumeric:r}=n;return e(gz,{"Array | Matrix":i,"...":function(s){return i(s)}});function i(o){o=Cn(o.valueOf());var s=o.length;if(s===0)throw new Error("Cannot calculate mode of an empty array");for(var a={},l=[],u=0,c=0;c<o.length;c++){var f=o[c];if(r(f)&&t(f))throw new Error("Cannot calculate mode of an array containing NaN values");f in a||(a[f]=0),a[f]++,a[f]===u?l.push(f):a[f]>u&&(u=a[f],l=[f])}return l}});function jo(n,e,t){var r;return String(n).includes("Unexpected type")?(r=arguments.length>2?" (type: "+Zn(t)+", value: "+JSON.stringify(t)+")":" (type: "+n.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+r)):String(n).includes("complex numbers")?(r=arguments.length>2?" (type: "+Zn(t)+", value: "+JSON.stringify(t)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+r)):n}var vz="prod",a0e=["typed","config","multiplyScalar","numeric"],l0e=ae(vz,a0e,n=>{var{typed:e,config:t,multiplyScalar:r,numeric:i}=n;return e(vz,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(a,l){throw new Error("prod(A, dim) is not yet supported")},"...":function(a){return o(a)}});function o(s){var a;if(sc(s,function(l){try{a=a===void 0?l:r(a,l)}catch(u){throw jo(u,"prod",l)}}),typeof a=="string"&&(a=i(a,t.number)),a===void 0)throw new Error("Cannot calculate prod of an empty array");return a}}),yz="format",u0e=["typed"],c0e=ae(yz,u0e,n=>{var{typed:e}=n;return e(yz,{any:fn,"any, Object | function | number | BigNumber":fn})}),xz="bin",f0e=["typed","format"],d0e=ae(xz,f0e,n=>{var{typed:e,format:t}=n;return e(xz,{"number | BigNumber":function(i){return t(i,{notation:"bin"})},"number | BigNumber, number | BigNumber":function(i,o){return t(i,{notation:"bin",wordSize:o})}})}),bz="oct",h0e=["typed","format"],p0e=ae(bz,h0e,n=>{var{typed:e,format:t}=n;return e(bz,{"number | BigNumber":function(i){return t(i,{notation:"oct"})},"number | BigNumber, number | BigNumber":function(i,o){return t(i,{notation:"oct",wordSize:o})}})}),wz="hex",m0e=["typed","format"],g0e=ae(wz,m0e,n=>{var{typed:e,format:t}=n;return e(wz,{"number | BigNumber":function(i){return t(i,{notation:"hex"})},"number | BigNumber, number | BigNumber":function(i,o){return t(i,{notation:"hex",wordSize:o})}})}),RK=/\$([\w.]+)/g,Sz="print",v0e=["typed"],OK=ae(Sz,v0e,n=>{var{typed:e}=n;return e(Sz,{"string, Object | Array":_z,"string, Object | Array, number | Object":_z})});function _z(n,e,t){return n.replace(RK,function(r,i){var o=i.split("."),s=e[o.shift()];for(s!==void 0&&s.isMatrix&&(s=s.toArray());o.length&&s!==void 0;){var a=o.shift();s=a?s[a]:s+"."}return s!==void 0?Hi(s)?s:fn(s,t):r})}var Ez="to",y0e=["typed","matrix","concat"],x0e=ae(Ez,y0e,n=>{var{typed:e,matrix:t,concat:r}=n,i=nr({typed:e,matrix:t,concat:r});return e(Ez,{"Unit, Unit | string":(o,s)=>o.to(s)},i({Ds:!0}))}),Mz="isPrime",b0e=["typed"],w0e=ae(Mz,b0e,n=>{var{typed:e}=n;return e(Mz,{number:function(r){if(r*0!==0)return!1;if(r<=3)return r>1;if(r%2===0||r%3===0)return!1;for(var i=5;i*i<=r;i+=6)if(r%i===0||r%(i+2)===0)return!1;return!0},BigNumber:function(r){if(r.toNumber()*0!==0)return!1;if(r.lte(3))return r.gt(1);if(r.mod(2).eq(0)||r.mod(3).eq(0))return!1;if(r.lt(Math.pow(2,32))){for(var i=r.toNumber(),o=5;o*o<=i;o+=6)if(i%o===0||i%(o+2)===0)return!1;return!0}function s(w,b,v){for(var S=1;!b.eq(0);)b.mod(2).eq(0)?(b=b.div(2),w=w.mul(w).mod(v)):(b=b.sub(1),S=w.mul(S).mod(v));return S}var a=r.constructor.clone({precision:r.toFixed(0).length*2});r=new a(r);for(var l=0,u=r.sub(1);u.mod(2).eq(0);)u=u.div(2),l+=1;var c=null;if(r.lt("3317044064679887385961981"))c=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter(w=>w<r);else{var f=Math.min(r.toNumber()-2,Math.floor(2*Math.pow(r.toFixed(0).length*Math.log(10),2)));c=[];for(var d=2;d<=f;d+=1)c.push(f)}for(var h=0;h<c.length;h+=1){var m=c[h],g=s(r.sub(r).add(m),u,r);if(!g.eq(1)){for(var y=0,p=g;!p.eq(r.sub(1));y+=1,p=p.mul(p).mod(r))if(y===l-1)return!1}}return!0},"Array | Matrix":e.referToSelf(t=>r=>hn(r,t))})}),S0e="numeric",_0e=["number","?bignumber","?fraction"],E0e=ae(S0e,_0e,n=>{var{number:e,bignumber:t,fraction:r}=n,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},o={number:s=>e(s),BigNumber:t?s=>t(s):zk,Fraction:r?s=>r(s):CK};return function(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",u=arguments.length>2?arguments[2]:void 0;if(u!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=Zn(a);if(!(c in i))throw new TypeError("Cannot convert "+a+' of type "'+c+'"; valid input types are '+Object.keys(i).join(", "));if(!(l in o))throw new TypeError("Cannot convert "+a+' to type "'+l+'"; valid output types are '+Object.keys(o).join(", "));return l===c?a:o[l](a)}}),Cz="divideScalar",M0e=["typed","numeric"],C0e=ae(Cz,M0e,n=>{var{typed:e,numeric:t}=n;return e(Cz,{"number, number":function(i,o){return i/o},"Complex, Complex":function(i,o){return i.div(o)},"BigNumber, BigNumber":function(i,o){return i.div(o)},"Fraction, Fraction":function(i,o){return i.div(o)},"Unit, number | Complex | Fraction | BigNumber | Unit":(r,i)=>r.divide(i),"number | Fraction | Complex | BigNumber, Unit":(r,i)=>i.divideInto(r)})}),Az="pow",A0e=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],T0e=ae(Az,A0e,n=>{var{typed:e,config:t,identity:r,multiply:i,matrix:o,inv:s,number:a,fraction:l,Complex:u}=n;return e(Az,{"number, number":c,"Complex, Complex":function(m,g){return m.pow(g)},"BigNumber, BigNumber":function(m,g){return g.isInteger()||m>=0||t.predictable?m.pow(g):new u(m.toNumber(),0).pow(g.toNumber(),0)},"Fraction, Fraction":function(m,g){var y=m.pow(g);if(y!=null)return y;if(t.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return c(m.valueOf(),g.valueOf())},"Array, number":f,"Array, BigNumber":function(m,g){return f(m,g.toNumber())},"Matrix, number":d,"Matrix, BigNumber":function(m,g){return d(m,g.toNumber())},"Unit, number | BigNumber":function(m,g){return m.pow(g)}});function c(h,m){if(t.predictable&&!kt(m)&&h<0)try{var g=l(m),y=a(g);if((m===y||Math.abs((m-y)/m)<1e-14)&&g.d%2===1)return(g.n%2===0?1:-1)*Math.pow(-h,m)}catch{}return t.predictable&&(h<-1&&m===1/0||h>-1&&h<0&&m===-1/0)?NaN:kt(m)||h>=0||t.predictable?LY(h,m):h*h<1&&m===1/0||h*h>1&&m===-1/0?0:new u(h,0).pow(m,0)}function f(h,m){if(!kt(m))throw new TypeError("For A^b, b must be an integer (value is "+m+")");var g=on(h);if(g.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+g.length+" dimensions)");if(g[0]!==g[1])throw new Error("For A^b, A must be square (size is "+g[0]+"x"+g[1]+")");if(m<0)try{return f(s(h),-m)}catch(w){throw w.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+m+")"):w}for(var y=r(g[0]).valueOf(),p=h;m>=1;)(m&1)===1&&(y=i(p,y)),m>>=1,p=i(p,p);return y}function d(h,m){return o(f(h.valueOf(),m))}}),Tp="Number of decimals in function round must be an integer",Tz="round",D0e=["typed","config","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],N0e=ae(Tz,D0e,n=>{var{typed:e,config:t,matrix:r,equalScalar:i,zeros:o,BigNumber:s,DenseMatrix:a}=n,l=Zi({typed:e,equalScalar:i}),u=Si({typed:e,DenseMatrix:a}),c=cl({typed:e});function f(d){return Math.abs(q1(d).exponent)}return e(Tz,{number:function(h){var m=Xv(h,f(t.epsilon)),g=Wo(h,m,t.epsilon)?m:h;return Xv(g)},"number, number":function(h,m){var g=f(t.epsilon);if(m>=g)return Xv(h,m);var y=Xv(h,g),p=Wo(h,y,t.epsilon)?y:h;return Xv(p,m)},"number, BigNumber":function(h,m){if(!m.isInteger())throw new TypeError(Tp);return new s(h).toDecimalPlaces(m.toNumber())},Complex:function(h){return h.round()},"Complex, number":function(h,m){if(m%1)throw new TypeError(Tp);return h.round(m)},"Complex, BigNumber":function(h,m){if(!m.isInteger())throw new TypeError(Tp);var g=m.toNumber();return h.round(g)},BigNumber:function(h){var m=new s(h).toDecimalPlaces(f(t.epsilon)),g=Ta(h,m,t.epsilon)?m:h;return g.toDecimalPlaces(0)},"BigNumber, BigNumber":function(h,m){if(!m.isInteger())throw new TypeError(Tp);var g=f(t.epsilon);if(m>=g)return h.toDecimalPlaces(m.toNumber());var y=h.toDecimalPlaces(g),p=Ta(h,y,t.epsilon)?y:h;return p.toDecimalPlaces(m.toNumber())},Fraction:function(h){return h.round()},"Fraction, number":function(h,m){if(m%1)throw new TypeError(Tp);return h.round(m)},"Fraction, BigNumber":function(h,m){if(!m.isInteger())throw new TypeError(Tp);return h.round(m.toNumber())},"Unit, number, Unit":e.referToSelf(d=>function(h,m,g){var y=h.toNumeric(g);return g.multiply(d(y,m))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(h,m,g)=>d(h,m.toNumber(),g)),"Unit, Unit":e.referToSelf(d=>(h,m)=>d(h,0,m)),"Array | Matrix, number, Unit":e.referToSelf(d=>(h,m,g)=>hn(h,y=>d(y,m,g))),"Array | Matrix, BigNumber, Unit":e.referToSelf(d=>(h,m,g)=>d(h,m.toNumber(),g)),"Array | Matrix, Unit":e.referToSelf(d=>(h,m)=>d(h,0,m)),"Array | Matrix":e.referToSelf(d=>h=>hn(h,d)),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>l(h,m,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>c(h,m,d,!1)),"Array, number | BigNumber":e.referToSelf(d=>(h,m)=>c(r(h),m,d,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":e.referToSelf(d=>(h,m)=>i(h,0)?o(m.size(),m.storage()):u(m,h,d,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":e.referToSelf(d=>(h,m)=>i(h,0)?o(m.size(),m.storage()):c(m,h,d,!0)),"number | Complex | BigNumber | Fraction, Array":e.referToSelf(d=>(h,m)=>c(r(m),h,d,!0).valueOf())})}),Dz="log",P0e=["config","typed","divideScalar","Complex"],R0e=ae(Dz,P0e,n=>{var{typed:e,config:t,divideScalar:r,Complex:i}=n;return e(Dz,{number:function(s){return s>=0||t.predictable?Phe(s):new i(s,0).log()},Complex:function(s){return s.log()},BigNumber:function(s){return!s.isNegative()||t.predictable?s.ln():new i(s.toNumber(),0).log()},"any, any":e.referToSelf(o=>(s,a)=>r(o(s),o(a)))})}),Nz="log1p",O0e=["typed","config","divideScalar","log","Complex"],k0e=ae(Nz,O0e,n=>{var{typed:e,config:t,divideScalar:r,log:i,Complex:o}=n;return e(Nz,{number:function(l){return l>=-1||t.predictable?Dfe(l):s(new o(l,0))},Complex:s,BigNumber:function(l){var u=l.plus(1);return!u.isNegative()||t.predictable?u.ln():s(new o(l.toNumber(),0))},"Array | Matrix":e.referToSelf(a=>l=>hn(l,a)),"any, any":e.referToSelf(a=>(l,u)=>r(a(l),i(u)))});function s(a){var l=a.re+1;return new o(Math.log(Math.sqrt(l*l+a.im*a.im)),Math.atan2(a.im,l))}}),Pz="nthRoots",I0e=["config","typed","divideScalar","Complex"],L0e=ae(Pz,I0e,n=>{var{typed:e,config:t,divideScalar:r,Complex:i}=n,o=[function(l){return new i(l,0)},function(l){return new i(0,l)},function(l){return new i(-l,0)},function(l){return new i(0,-l)}];function s(a,l){if(l<0)throw new Error("Root must be greater than zero");if(l===0)throw new Error("Root must be non-zero");if(l%1!==0)throw new Error("Root must be an integer");if(a===0||a.abs()===0)return[new i(0,0)];var u=typeof a=="number",c;(u||a.re===0||a.im===0)&&(u?c=2*+(a<0):a.im===0?c=2*+(a.re<0):c=2*+(a.im<0)+1);for(var f=a.arg(),d=a.abs(),h=[],m=Math.pow(d,1/l),g=0;g<l;g++){var y=(c+4*g)/l;if(y===Math.round(y)){h.push(o[y%4](m));continue}h.push(new i({r:m,phi:(f+2*Math.PI*g)/l}))}return h}return e(Pz,{Complex:function(l){return s(l,2)},"Complex, number":s})}),Rz="dotPow",F0e=["typed","equalScalar","matrix","pow","DenseMatrix","concat"],B0e=ae(Rz,F0e,n=>{var{typed:e,equalScalar:t,matrix:r,pow:i,DenseMatrix:o,concat:s}=n,a=Xo({typed:e}),l=lu({typed:e,DenseMatrix:o}),u=Zi({typed:e,equalScalar:t}),c=Si({typed:e,DenseMatrix:o}),f=nr({typed:e,matrix:r,concat:s}),d={};for(var h in i.signatures)Object.prototype.hasOwnProperty.call(i.signatures,h)&&!h.includes("Matrix")&&!h.includes("Array")&&(d[h]=i.signatures[h]);var m=e(d);return e(Rz,f({elop:m,SS:l,DS:a,Ss:u,sS:c}))}),Oz="dotDivide",z0e=["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat"],U0e=ae(Oz,z0e,n=>{var{typed:e,matrix:t,equalScalar:r,divideScalar:i,DenseMatrix:o,concat:s}=n,a=fl({typed:e,equalScalar:r}),l=Xo({typed:e}),u=lu({typed:e,DenseMatrix:o}),c=Zi({typed:e,equalScalar:r}),f=Si({typed:e,DenseMatrix:o}),d=nr({typed:e,matrix:t,concat:s});return e(Oz,d({elop:i,SS:u,DS:l,SD:a,Ss:c,sS:f}))});function Y1(n){var{DenseMatrix:e}=n;return function(r,i,o){var s=r.size();if(s.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+fn(s)+")");var a=s[0],l=s[1];if(a!==l)throw new RangeError("Matrix must be square (size: "+fn(s)+")");var u=[];if(Vt(i)){var c=i.size(),f=i._data;if(c.length===1){if(c[0]!==a)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var d=0;d<a;d++)u[d]=[f[d]];return new e({data:u,size:[a,1],datatype:i._datatype})}if(c.length===2){if(c[0]!==a||c[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(ky(i)){if(o){u=[];for(var h=0;h<a;h++)u[h]=[f[h][0]];return new e({data:u,size:[a,1],datatype:i._datatype})}return i}if(lf(i)){for(var m=0;m<a;m++)u[m]=[0];for(var g=i._values,y=i._index,p=i._ptr,w=p[1],b=p[0];b<w;b++){var v=y[b];u[v][0]=g[b]}return new e({data:u,size:[a,1],datatype:i._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(Tn(i)){var S=on(i);if(S.length===1){if(S[0]!==a)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var x=0;x<a;x++)u[x]=[i[x]];return new e({data:u,size:[a,1]})}if(S.length===2){if(S[0]!==a||S[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var M=0;M<a;M++)u[M]=[i[M][0]];return new e({data:u,size:[a,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var kz="lsolve",V0e=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],$0e=ae(kz,V0e,n=>{var{typed:e,matrix:t,divideScalar:r,multiplyScalar:i,subtractScalar:o,equalScalar:s,DenseMatrix:a}=n,l=Y1({DenseMatrix:a});return e(kz,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return u(d,h)},"Array, Array | Matrix":function(d,h){var m=t(d),g=u(m,h);return g.valueOf()}});function u(f,d){d=l(f,d,!0);for(var h=d._data,m=f._size[0],g=f._size[1],y=[],p=f._data,w=0;w<g;w++){var b=h[w][0]||0,v=void 0;if(s(b,0))v=0;else{var S=p[w][w];if(s(S,0))throw new Error("Linear system cannot be solved since matrix is singular");v=r(b,S);for(var x=w+1;x<m;x++)h[x]=[o(h[x][0]||0,i(v,p[x][w]))]}y[w]=[v]}return new a({data:y,size:[m,1]})}function c(f,d){d=l(f,d,!0);for(var h=d._data,m=f._size[0],g=f._size[1],y=f._values,p=f._index,w=f._ptr,b=[],v=0;v<g;v++){var S=h[v][0]||0;if(s(S,0))b[v]=[0];else{for(var x=0,M=[],A=[],T=w[v],C=w[v+1],D=T;D<C;D++){var R=p[D];R===v?x=y[D]:R>v&&(M.push(y[D]),A.push(R))}if(s(x,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var B=r(S,x),F=0,U=A.length;F<U;F++){var N=A[F];h[N]=[o(h[N][0]||0,i(B,M[F]))]}b[v]=[B]}}return new a({data:b,size:[m,1]})}}),Iz="usolve",H0e=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],W0e=ae(Iz,H0e,n=>{var{typed:e,matrix:t,divideScalar:r,multiplyScalar:i,subtractScalar:o,equalScalar:s,DenseMatrix:a}=n,l=Y1({DenseMatrix:a});return e(Iz,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return u(d,h)},"Array, Array | Matrix":function(d,h){var m=t(d),g=u(m,h);return g.valueOf()}});function u(f,d){d=l(f,d,!0);for(var h=d._data,m=f._size[0],g=f._size[1],y=[],p=f._data,w=g-1;w>=0;w--){var b=h[w][0]||0,v=void 0;if(s(b,0))v=0;else{var S=p[w][w];if(s(S,0))throw new Error("Linear system cannot be solved since matrix is singular");v=r(b,S);for(var x=w-1;x>=0;x--)h[x]=[o(h[x][0]||0,i(v,p[x][w]))]}y[w]=[v]}return new a({data:y,size:[m,1]})}function c(f,d){d=l(f,d,!0);for(var h=d._data,m=f._size[0],g=f._size[1],y=f._values,p=f._index,w=f._ptr,b=[],v=g-1;v>=0;v--){var S=h[v][0]||0;if(s(S,0))b[v]=[0];else{for(var x=0,M=[],A=[],T=w[v],C=w[v+1],D=C-1;D>=T;D--){var R=p[D];R===v?x=y[D]:R<v&&(M.push(y[D]),A.push(R))}if(s(x,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var B=r(S,x),F=0,U=A.length;F<U;F++){var N=A[F];h[N]=[o(h[N][0],i(B,M[F]))]}b[v]=[B]}}return new a({data:b,size:[m,1]})}}),Lz="lsolveAll",j0e=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],G0e=ae(Lz,j0e,n=>{var{typed:e,matrix:t,divideScalar:r,multiplyScalar:i,subtractScalar:o,equalScalar:s,DenseMatrix:a}=n,l=Y1({DenseMatrix:a});return e(Lz,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return u(d,h)},"Array, Array | Matrix":function(d,h){var m=t(d),g=u(m,h);return g.map(y=>y.valueOf())}});function u(f,d){for(var h=[l(f,d,!0)._data.map(A=>A[0])],m=f._data,g=f._size[0],y=f._size[1],p=0;p<y;p++)for(var w=h.length,b=0;b<w;b++){var v=h[b];if(s(m[p][p],0))if(s(v[p],0)){if(b===0){var x=[...v];x[p]=1;for(var M=p+1;M<y;M++)x[M]=o(x[M],m[M][p]);h.push(x)}}else{if(b===0)return[];h.splice(b,1),b-=1,w-=1}else{v[p]=r(v[p],m[p][p]);for(var S=p+1;S<y;S++)v[S]=o(v[S],i(v[p],m[S][p]))}}return h.map(A=>new a({data:A.map(T=>[T]),size:[g,1]}))}function c(f,d){for(var h=[l(f,d,!0)._data.map(Z=>Z[0])],m=f._size[0],g=f._size[1],y=f._values,p=f._index,w=f._ptr,b=0;b<g;b++)for(var v=h.length,S=0;S<v;S++){for(var x=h[S],M=[],A=[],T=w[b],C=w[b+1],D=0,R=T;R<C;R++){var B=p[R];B===b?D=y[R]:B>b&&(M.push(y[R]),A.push(B))}if(s(D,0))if(s(x[b],0)){if(S===0){var I=[...x];I[b]=1;for(var V=0,L=A.length;V<L;V++){var X=A[V];I[X]=o(I[X],M[V])}h.push(I)}}else{if(S===0)return[];h.splice(S,1),S-=1,v-=1}else{x[b]=r(x[b],D);for(var F=0,U=A.length;F<U;F++){var N=A[F];x[N]=o(x[N],i(x[b],M[F]))}}}return h.map(Z=>new a({data:Z.map(te=>[te]),size:[m,1]}))}}),Fz="usolveAll",q0e=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],X0e=ae(Fz,q0e,n=>{var{typed:e,matrix:t,divideScalar:r,multiplyScalar:i,subtractScalar:o,equalScalar:s,DenseMatrix:a}=n,l=Y1({DenseMatrix:a});return e(Fz,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return u(d,h)},"Array, Array | Matrix":function(d,h){var m=t(d),g=u(m,h);return g.map(y=>y.valueOf())}});function u(f,d){for(var h=[l(f,d,!0)._data.map(A=>A[0])],m=f._data,g=f._size[0],y=f._size[1],p=y-1;p>=0;p--)for(var w=h.length,b=0;b<w;b++){var v=h[b];if(s(m[p][p],0))if(s(v[p],0)){if(b===0){var x=[...v];x[p]=1;for(var M=p-1;M>=0;M--)x[M]=o(x[M],m[M][p]);h.push(x)}}else{if(b===0)return[];h.splice(b,1),b-=1,w-=1}else{v[p]=r(v[p],m[p][p]);for(var S=p-1;S>=0;S--)v[S]=o(v[S],i(v[p],m[S][p]))}}return h.map(A=>new a({data:A.map(T=>[T]),size:[g,1]}))}function c(f,d){for(var h=[l(f,d,!0)._data.map(Z=>Z[0])],m=f._size[0],g=f._size[1],y=f._values,p=f._index,w=f._ptr,b=g-1;b>=0;b--)for(var v=h.length,S=0;S<v;S++){for(var x=h[S],M=[],A=[],T=w[b],C=w[b+1],D=0,R=C-1;R>=T;R--){var B=p[R];B===b?D=y[R]:B<b&&(M.push(y[R]),A.push(B))}if(s(D,0))if(s(x[b],0)){if(S===0){var I=[...x];I[b]=1;for(var V=0,L=A.length;V<L;V++){var X=A[V];I[X]=o(I[X],M[V])}h.push(I)}}else{if(S===0)return[];h.splice(S,1),S-=1,v-=1}else{x[b]=r(x[b],D);for(var F=0,U=A.length;F<U;F++){var N=A[F];x[N]=o(x[N],i(x[b],M[F]))}}}return h.map(Z=>new a({data:Z.map(te=>[te]),size:[m,1]}))}}),Y0e="matAlgo08xS0Sid",K0e=["typed","equalScalar"],Uk=ae(Y0e,K0e,n=>{var{typed:e,equalScalar:t}=n;return function(i,o,s){var a=i._values,l=i._index,u=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=o._values,h=o._index,m=o._ptr,g=o._size,y=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(c.length!==g.length)throw new un(c.length,g.length);if(c[0]!==g[0]||c[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+g+")");if(!a||!d)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var p=c[0],w=c[1],b,v=t,S=0,x=s;typeof f=="string"&&f===y&&f!=="mixed"&&(b=f,v=e.find(t,[b,b]),S=e.convert(0,b),x=e.find(s,[b,b]));for(var M=[],A=[],T=[],C=[],D=[],R,B,F,U,N=0;N<w;N++){T[N]=A.length;var I=N+1;for(B=u[N],F=u[N+1],R=B;R<F;R++)U=l[R],D[U]=I,C[U]=a[R],A.push(U);for(B=m[N],F=m[N+1],R=B;R<F;R++)U=h[R],D[U]===I&&(C[U]=x(C[U],d[R]));for(R=T[N];R<A.length;){U=A[R];var V=C[U];v(V,S)?A.splice(R,1):(M.push(V),R++)}}return T[w]=A.length,i.createSparseMatrix({values:M,index:A,ptr:T,size:[p,w],datatype:f===i._datatype&&y===o._datatype?b:void 0})}}),Vk=ae("useMatrixForArrayScalar",["typed","matrix"],n=>{var{typed:e,matrix:t}=n;return{"Array, number":e.referTo("DenseMatrix, number",r=>(i,o)=>r(t(i),o).valueOf()),"Array, BigNumber":e.referTo("DenseMatrix, BigNumber",r=>(i,o)=>r(t(i),o).valueOf()),"number, Array":e.referTo("number, DenseMatrix",r=>(i,o)=>r(i,t(o)).valueOf()),"BigNumber, Array":e.referTo("BigNumber, DenseMatrix",r=>(i,o)=>r(i,t(o)).valueOf())}}),Bz="leftShift",Z0e=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],J0e=ae(Bz,Z0e,n=>{var{typed:e,matrix:t,equalScalar:r,zeros:i,DenseMatrix:o,concat:s}=n,a=od({typed:e}),l=fl({typed:e,equalScalar:r}),u=Uk({typed:e,equalScalar:r}),c=Qh({typed:e,DenseMatrix:o}),f=Zi({typed:e,equalScalar:r}),d=cl({typed:e}),h=nr({typed:e,matrix:t,concat:s}),m=Vk({typed:e,matrix:t});return e(Bz,{"number, number":VY,"BigNumber, BigNumber":xge,"SparseMatrix, number | BigNumber":e.referToSelf(g=>(y,p)=>r(p,0)?y.clone():f(y,p,g,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(g=>(y,p)=>r(p,0)?y.clone():d(y,p,g,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(g=>(y,p)=>r(y,0)?i(p.size(),p.storage()):c(p,y,g,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(g=>(y,p)=>r(y,0)?i(p.size(),p.storage()):d(p,y,g,!0))},m,h({SS:u,DS:a,SD:l}))}),zz="rightArithShift",Q0e=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],eye=ae(zz,Q0e,n=>{var{typed:e,matrix:t,equalScalar:r,zeros:i,DenseMatrix:o,concat:s}=n,a=od({typed:e}),l=fl({typed:e,equalScalar:r}),u=Uk({typed:e,equalScalar:r}),c=Qh({typed:e,DenseMatrix:o}),f=Zi({typed:e,equalScalar:r}),d=cl({typed:e}),h=nr({typed:e,matrix:t,concat:s}),m=Vk({typed:e,matrix:t});return e(zz,{"number, number":$Y,"BigNumber, BigNumber":bge,"SparseMatrix, number | BigNumber":e.referToSelf(g=>(y,p)=>r(p,0)?y.clone():f(y,p,g,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(g=>(y,p)=>r(p,0)?y.clone():d(y,p,g,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(g=>(y,p)=>r(y,0)?i(p.size(),p.storage()):c(p,y,g,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(g=>(y,p)=>r(y,0)?i(p.size(),p.storage()):d(p,y,g,!0))},m,h({SS:u,DS:a,SD:l}))}),Uz="rightLogShift",tye=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],nye=ae(Uz,tye,n=>{var{typed:e,matrix:t,equalScalar:r,zeros:i,DenseMatrix:o,concat:s}=n,a=od({typed:e}),l=fl({typed:e,equalScalar:r}),u=Uk({typed:e,equalScalar:r}),c=Qh({typed:e,DenseMatrix:o}),f=Zi({typed:e,equalScalar:r}),d=cl({typed:e}),h=nr({typed:e,matrix:t,concat:s}),m=Vk({typed:e,matrix:t});return e(Uz,{"number, number":HY,"SparseMatrix, number | BigNumber":e.referToSelf(g=>(y,p)=>r(p,0)?y.clone():f(y,p,g,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(g=>(y,p)=>r(p,0)?y.clone():d(y,p,g,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(g=>(y,p)=>r(y,0)?i(p.size(),p.storage()):c(p,y,g,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(g=>(y,p)=>r(y,0)?i(p.size(),p.storage()):d(p,y,g,!0))},m,h({SS:u,DS:a,SD:l}))}),Vz="and",rye=["typed","matrix","equalScalar","zeros","not","concat"],kK=ae(Vz,rye,n=>{var{typed:e,matrix:t,equalScalar:r,zeros:i,not:o,concat:s}=n,a=fl({typed:e,equalScalar:r}),l=c2({typed:e,equalScalar:r}),u=Zi({typed:e,equalScalar:r}),c=cl({typed:e}),f=nr({typed:e,matrix:t,concat:s});return e(Vz,{"number, number":XY,"Complex, Complex":function(h,m){return(h.re!==0||h.im!==0)&&(m.re!==0||m.im!==0)},"BigNumber, BigNumber":function(h,m){return!h.isZero()&&!m.isZero()&&!h.isNaN()&&!m.isNaN()},"Unit, Unit":e.referToSelf(d=>(h,m)=>d(h.value||0,m.value||0)),"SparseMatrix, any":e.referToSelf(d=>(h,m)=>o(m)?i(h.size(),h.storage()):u(h,m,d,!1)),"DenseMatrix, any":e.referToSelf(d=>(h,m)=>o(m)?i(h.size(),h.storage()):c(h,m,d,!1)),"any, SparseMatrix":e.referToSelf(d=>(h,m)=>o(h)?i(h.size(),h.storage()):u(m,h,d,!0)),"any, DenseMatrix":e.referToSelf(d=>(h,m)=>o(h)?i(h.size(),h.storage()):c(m,h,d,!0)),"Array, any":e.referToSelf(d=>(h,m)=>d(t(h),m).valueOf()),"any, Array":e.referToSelf(d=>(h,m)=>d(h,t(m)).valueOf())},f({SS:l,DS:a}))}),SE="compare",iye=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix","concat"],oye=ae(SE,iye,n=>{var{typed:e,config:t,equalScalar:r,matrix:i,BigNumber:o,Fraction:s,DenseMatrix:a,concat:l}=n,u=Xo({typed:e}),c=u2({typed:e,equalScalar:r}),f=Si({typed:e,DenseMatrix:a}),d=nr({typed:e,matrix:i,concat:l}),h=Yg({typed:e});return e(SE,sye({typed:e,config:t}),{"boolean, boolean":function(g,y){return g===y?0:g>y?1:-1},"BigNumber, BigNumber":function(g,y){return Ta(g,y,t.epsilon)?new o(0):new o(g.cmp(y))},"Fraction, Fraction":function(g,y){return new s(g.compare(y))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},h,d({SS:c,DS:u,Ss:f}))}),sye=ae(SE,["typed","config"],n=>{var{typed:e,config:t}=n;return e(SE,{"number, number":function(i,o){return Wo(i,o,t.epsilon)?0:i>o?1:-1}})}),aye=function n(e,t){var r=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,i=/(^[ ]*|[ ]*$)/g,o=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,s=/^0x[0-9a-f]+$/i,a=/^0/,l=function(b){return n.insensitive&&(""+b).toLowerCase()||""+b},u=l(e).replace(i,"")||"",c=l(t).replace(i,"")||"",f=u.replace(r,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),d=c.replace(r,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),h=parseInt(u.match(s),16)||f.length!==1&&u.match(o)&&Date.parse(u),m=parseInt(c.match(s),16)||h&&c.match(o)&&Date.parse(c)||null,g,y;if(m){if(h<m)return-1;if(h>m)return 1}for(var p=0,w=Math.max(f.length,d.length);p<w;p++){if(g=!(f[p]||"").match(a)&&parseFloat(f[p])||f[p]||0,y=!(d[p]||"").match(a)&&parseFloat(d[p])||d[p]||0,isNaN(g)!==isNaN(y))return isNaN(g)?1:-1;if(typeof g!=typeof y&&(g+="",y+=""),g<y)return-1;if(g>y)return 1}return 0};const Dp=ll(aye);var $z="compareNatural",lye=["typed","compare"],uye=ae($z,lye,n=>{var{typed:e,compare:t}=n,r=t.signatures["boolean,boolean"];return e($z,{"any, any":i});function i(l,u){var c=Zn(l),f=Zn(u),d;if((c==="number"||c==="BigNumber"||c==="Fraction")&&(f==="number"||f==="BigNumber"||f==="Fraction"))return d=t(l,u),d.toString()!=="0"?d>0?1:-1:Dp(c,f);var h=["Array","DenseMatrix","SparseMatrix"];if(h.includes(c)||h.includes(f))return d=o(i,l,u),d!==0?d:Dp(c,f);if(c!==f)return Dp(c,f);if(c==="Complex")return cye(l,u);if(c==="Unit")return l.equalBase(u)?i(l.value,u.value):s(i,l.formatUnits(),u.formatUnits());if(c==="boolean")return r(l,u);if(c==="string")return Dp(l,u);if(c==="Object")return a(i,l,u);if(c==="null"||c==="undefined")return 0;throw new TypeError('Unsupported type of value "'+c+'"')}function o(l,u,c){return lf(u)&&lf(c)?s(l,u.toJSON().values,c.toJSON().values):lf(u)?o(l,u.toArray(),c):lf(c)?o(l,u,c.toArray()):ky(u)?o(l,u.toJSON().data,c):ky(c)?o(l,u,c.toJSON().data):Array.isArray(u)?Array.isArray(c)?s(l,u,c):o(l,u,[c]):o(l,[u],c)}function s(l,u,c){for(var f=0,d=Math.min(u.length,c.length);f<d;f++){var h=l(u[f],c[f]);if(h!==0)return h}return u.length>c.length?1:u.length<c.length?-1:0}function a(l,u,c){var f=Object.keys(u),d=Object.keys(c);f.sort(Dp),d.sort(Dp);var h=s(l,f,d);if(h!==0)return h;for(var m=0;m<f.length;m++){var g=l(u[f[m]],c[d[m]]);if(g!==0)return g}return 0}});function cye(n,e){return n.re>e.re?1:n.re<e.re?-1:n.im>e.im?1:n.im<e.im?-1:0}var Hz="compareText",fye=["typed","matrix","concat"];TN.signature="any, any";var dye=ae(Hz,fye,n=>{var{typed:e,matrix:t,concat:r}=n,i=nr({typed:e,matrix:t,concat:r});return e(Hz,TN,i({elop:TN,Ds:!0}))}),_E="equal",hye=["typed","matrix","equalScalar","DenseMatrix","concat"],pye=ae(_E,hye,n=>{var{typed:e,matrix:t,equalScalar:r,DenseMatrix:i,concat:o}=n,s=Xo({typed:e}),a=lu({typed:e,DenseMatrix:i}),l=Si({typed:e,DenseMatrix:i}),u=nr({typed:e,matrix:t,concat:o});return e(_E,mye({typed:e,equalScalar:r}),u({elop:r,SS:a,DS:s,Ss:l}))}),mye=ae(_E,["typed","equalScalar"],n=>{var{typed:e,equalScalar:t}=n;return e(_E,{"any, any":function(i,o){return i===null?o===null:o===null?i===null:i===void 0?o===void 0:o===void 0?i===void 0:t(i,o)}})}),Wz="equalText",gye=["typed","compareText","isZero"],vye=ae(Wz,gye,n=>{var{typed:e,compareText:t,isZero:r}=n;return e(Wz,{"any, any":function(o,s){return r(t(o,s))}})}),EE="smaller",yye=["typed","config","matrix","DenseMatrix","concat"],xye=ae(EE,yye,n=>{var{typed:e,config:t,matrix:r,DenseMatrix:i,concat:o}=n,s=Xo({typed:e}),a=lu({typed:e,DenseMatrix:i}),l=Si({typed:e,DenseMatrix:i}),u=nr({typed:e,matrix:r,concat:o}),c=Yg({typed:e});return e(EE,bye({typed:e,config:t}),{"boolean, boolean":(f,d)=>f<d,"BigNumber, BigNumber":function(d,h){return d.lt(h)&&!Ta(d,h,t.epsilon)},"Fraction, Fraction":(f,d)=>f.compare(d)===-1,"Complex, Complex":function(d,h){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:a,DS:s,Ss:l}))}),bye=ae(EE,["typed","config"],n=>{var{typed:e,config:t}=n;return e(EE,{"number, number":function(i,o){return i<o&&!Wo(i,o,t.epsilon)}})}),ME="smallerEq",wye=["typed","config","matrix","DenseMatrix","concat"],Sye=ae(ME,wye,n=>{var{typed:e,config:t,matrix:r,DenseMatrix:i,concat:o}=n,s=Xo({typed:e}),a=lu({typed:e,DenseMatrix:i}),l=Si({typed:e,DenseMatrix:i}),u=nr({typed:e,matrix:r,concat:o}),c=Yg({typed:e});return e(ME,_ye({typed:e,config:t}),{"boolean, boolean":(f,d)=>f<=d,"BigNumber, BigNumber":function(d,h){return d.lte(h)||Ta(d,h,t.epsilon)},"Fraction, Fraction":(f,d)=>f.compare(d)!==1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:a,DS:s,Ss:l}))}),_ye=ae(ME,["typed","config"],n=>{var{typed:e,config:t}=n;return e(ME,{"number, number":function(i,o){return i<=o||Wo(i,o,t.epsilon)}})}),CE="larger",Eye=["typed","config","matrix","DenseMatrix","concat"],Mye=ae(CE,Eye,n=>{var{typed:e,config:t,matrix:r,DenseMatrix:i,concat:o}=n,s=Xo({typed:e}),a=lu({typed:e,DenseMatrix:i}),l=Si({typed:e,DenseMatrix:i}),u=nr({typed:e,matrix:r,concat:o}),c=Yg({typed:e});return e(CE,Cye({typed:e,config:t}),{"boolean, boolean":(f,d)=>f>d,"BigNumber, BigNumber":function(d,h){return d.gt(h)&&!Ta(d,h,t.epsilon)},"Fraction, Fraction":(f,d)=>f.compare(d)===1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:a,DS:s,Ss:l}))}),Cye=ae(CE,["typed","config"],n=>{var{typed:e,config:t}=n;return e(CE,{"number, number":function(i,o){return i>o&&!Wo(i,o,t.epsilon)}})}),AE="largerEq",Aye=["typed","config","matrix","DenseMatrix","concat"],Tye=ae(AE,Aye,n=>{var{typed:e,config:t,matrix:r,DenseMatrix:i,concat:o}=n,s=Xo({typed:e}),a=lu({typed:e,DenseMatrix:i}),l=Si({typed:e,DenseMatrix:i}),u=nr({typed:e,matrix:r,concat:o}),c=Yg({typed:e});return e(AE,Dye({typed:e,config:t}),{"boolean, boolean":(f,d)=>f>=d,"BigNumber, BigNumber":function(d,h){return d.gte(h)||Ta(d,h,t.epsilon)},"Fraction, Fraction":(f,d)=>f.compare(d)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:a,DS:s,Ss:l}))}),Dye=ae(AE,["typed","config"],n=>{var{typed:e,config:t}=n;return e(AE,{"number, number":function(i,o){return i>=o||Wo(i,o,t.epsilon)}})}),jz="deepEqual",Nye=["typed","equal"],Pye=ae(jz,Nye,n=>{var{typed:e,equal:t}=n;return e(jz,{"any, any":function(o,s){return r(o.valueOf(),s.valueOf())}});function r(i,o){if(Array.isArray(i))if(Array.isArray(o)){var s=i.length;if(s!==o.length)return!1;for(var a=0;a<s;a++)if(!r(i[a],o[a]))return!1;return!0}else return!1;else return Array.isArray(o)?!1:t(i,o)}}),TE="unequal",Rye=["typed","config","equalScalar","matrix","DenseMatrix","concat"],Oye=ae(TE,Rye,n=>{var{typed:e,config:t,equalScalar:r,matrix:i,DenseMatrix:o,concat:s}=n,a=Xo({typed:e}),l=lu({typed:e,DenseMatrix:o}),u=Si({typed:e,DenseMatrix:o}),c=nr({typed:e,matrix:i,concat:s});return e(TE,kye({typed:e,equalScalar:r}),c({elop:f,SS:l,DS:a,Ss:u}));function f(d,h){return!r(d,h)}}),kye=ae(TE,["typed","equalScalar"],n=>{var{typed:e,equalScalar:t}=n;return e(TE,{"any, any":function(i,o){return i===null?o!==null:o===null?i!==null:i===void 0?o!==void 0:o===void 0?i!==void 0:!t(i,o)}})}),Gz="partitionSelect",Iye=["typed","isNumeric","isNaN","compare"],Lye=ae(Gz,Iye,n=>{var{typed:e,isNumeric:t,isNaN:r,compare:i}=n,o=i,s=(u,c)=>-i(u,c);return e(Gz,{"Array | Matrix, number":function(c,f){return a(c,f,o)},"Array | Matrix, number, string":function(c,f,d){if(d==="asc")return a(c,f,o);if(d==="desc")return a(c,f,s);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":a});function a(u,c,f){if(!kt(c)||c<0)throw new Error("k must be a non-negative integer");if(Vt(u)){var d=u.size();if(d.length>1)throw new Error("Only one dimensional matrices supported");return l(u.valueOf(),c,f)}if(Array.isArray(u))return l(u,c,f)}function l(u,c,f){if(c>=u.length)throw new Error("k out of bounds");for(var d=0;d<u.length;d++)if(t(u[d])&&r(u[d]))return u[d];for(var h=0,m=u.length-1;h<m;){for(var g=h,y=m,p=u[Math.floor(Math.random()*(m-h+1))+h];g<y;)if(f(u[g],p)>=0){var w=u[y];u[y]=u[g],u[g]=w,--y}else++g;f(u[g],p)>0&&--g,c<=g?m=g:h=g+1}return u[c]}}),qz="sort",Fye=["typed","matrix","compare","compareNatural"],Bye=ae(qz,Fye,n=>{var{typed:e,matrix:t,compare:r,compareNatural:i}=n,o=r,s=(c,f)=>-r(c,f);return e(qz,{Array:function(f){return l(f),f.sort(o)},Matrix:function(f){return u(f),t(f.toArray().sort(o),f.storage())},"Array, function":function(f,d){return l(f),f.sort(d)},"Matrix, function":function(f,d){return u(f),t(f.toArray().sort(d),f.storage())},"Array, string":function(f,d){return l(f),f.sort(a(d))},"Matrix, string":function(f,d){return u(f),t(f.toArray().sort(a(d)),f.storage())}});function a(c){if(c==="asc")return o;if(c==="desc")return s;if(c==="natural")return i;throw new Error('String "asc", "desc", or "natural" expected')}function l(c){if(on(c).length!==1)throw new Error("One dimensional array expected")}function u(c){if(c.size().length!==1)throw new Error("One dimensional matrix expected")}}),Xz="max",zye=["typed","config","numeric","larger"],IK=ae(Xz,zye,n=>{var{typed:e,config:t,numeric:r,larger:i}=n;return e(Xz,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(l,u){return a2(l,u.valueOf(),o)},"...":function(l){if(Gg(l))throw new TypeError("Scalar values expected in function max");return s(l)}});function o(a,l){try{return i(a,l)?a:l}catch(u){throw jo(u,"max",l)}}function s(a){var l;if(sc(a,function(u){try{isNaN(u)&&typeof u=="number"?l=NaN:(l===void 0||i(u,l))&&(l=u)}catch(c){throw jo(c,"max",u)}}),l===void 0)throw new Error("Cannot calculate max of an empty array");return typeof l=="string"&&(l=r(l,t.number)),l}}),Yz="min",Uye=["typed","config","numeric","smaller"],LK=ae(Yz,Uye,n=>{var{typed:e,config:t,numeric:r,smaller:i}=n;return e(Yz,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(l,u){return a2(l,u.valueOf(),o)},"...":function(l){if(Gg(l))throw new TypeError("Scalar values expected in function min");return s(l)}});function o(a,l){try{return i(a,l)?a:l}catch(u){throw jo(u,"min",l)}}function s(a){var l;if(sc(a,function(u){try{isNaN(u)&&typeof u=="number"?l=NaN:(l===void 0||i(u,l))&&(l=u)}catch(c){throw jo(c,"min",u)}}),l===void 0)throw new Error("Cannot calculate min of an empty array");return typeof l=="string"&&(l=r(l,t.number)),l}}),Vye="ImmutableDenseMatrix",$ye=["smaller","DenseMatrix"],Hye=ae(Vye,$ye,n=>{var{smaller:e,DenseMatrix:t}=n;function r(i,o){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(o&&!Hi(o))throw new Error("Invalid datatype: "+o);if(Vt(i)||Tn(i)){var s=new t(i,o);this._data=s._data,this._size=s._size,this._datatype=s._datatype,this._min=null,this._max=null}else if(i&&Tn(i.data)&&Tn(i.size))this._data=i.data,this._size=i.size,this._datatype=i.datatype,this._min=typeof i.min<"u"?i.min:null,this._max=typeof i.max<"u"?i.max:null;else{if(i)throw new TypeError("Unsupported type of data ("+Zn(i)+")");this._data=[],this._size=[0],this._datatype=o,this._min=null,this._max=null}}return r.prototype=new t,r.prototype.type="ImmutableDenseMatrix",r.prototype.isImmutableDenseMatrix=!0,r.prototype.subset=function(i){switch(arguments.length){case 1:{var o=t.prototype.subset.call(this,i);return Vt(o)?new r({data:o._data,size:o._size,datatype:o._datatype}):o}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},r.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},r.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},r.prototype.clone=function(){return new r({data:Kt(this._data),size:Kt(this._size),datatype:this._datatype})},r.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.fromJSON=function(i){return new r(i)},r.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},r.prototype.min=function(){if(this._min===null){var i=null;this.forEach(function(o){(i===null||e(o,i))&&(i=o)}),this._min=i!==null?i:void 0}return this._min},r.prototype.max=function(){if(this._max===null){var i=null;this.forEach(function(o){(i===null||e(i,o))&&(i=o)}),this._max=i!==null?i:void 0}return this._max},r},{isClass:!0}),Wye="Index",jye=["ImmutableDenseMatrix","getMatrixDataType"],Gye=ae(Wye,jye,n=>{var{ImmutableDenseMatrix:e,getMatrixDataType:t}=n;function r(o){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var s=0,a=arguments.length;s<a;s++){var l=arguments[s],u=Tn(l),c=Vt(l),f=null;if(e2(l))this._dimensions.push(l),this._isScalar=!1;else if(u||c){var d=void 0;t(l)==="boolean"?(u&&(d=i(Kz(l).valueOf())),c&&(d=i(Kz(l._data).valueOf())),f=l.valueOf().length):d=i(l.valueOf()),this._dimensions.push(d);var h=d.size();(h.length!==1||h[0]!==1||f!==null)&&(this._isScalar=!1)}else if(typeof l=="number")this._dimensions.push(i([l]));else if(typeof l=="string")this._dimensions.push(l);else throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._sourceSize.push(f)}}r.prototype.type="Index",r.prototype.isIndex=!0;function i(o){for(var s=0,a=o.length;s<a;s++)if(typeof o[s]!="number"||!kt(o[s]))throw new TypeError("Index parameters must be positive integer numbers");return new e(o)}return r.prototype.clone=function(){var o=new r;return o._dimensions=Kt(this._dimensions),o._isScalar=this._isScalar,o._sourceSize=this._sourceSize,o},r.create=function(o){var s=new r;return r.apply(s,o),s},r.prototype.size=function(){for(var o=[],s=0,a=this._dimensions.length;s<a;s++){var l=this._dimensions[s];o[s]=typeof l=="string"?1:l.size()[0]}return o},r.prototype.max=function(){for(var o=[],s=0,a=this._dimensions.length;s<a;s++){var l=this._dimensions[s];o[s]=typeof l=="string"?l:l.max()}return o},r.prototype.min=function(){for(var o=[],s=0,a=this._dimensions.length;s<a;s++){var l=this._dimensions[s];o[s]=typeof l=="string"?l:l.min()}return o},r.prototype.forEach=function(o){for(var s=0,a=this._dimensions.length;s<a;s++)o(this._dimensions[s],s,this)},r.prototype.dimension=function(o){return this._dimensions[o]||null},r.prototype.isObjectProperty=function(){return this._dimensions.length===1&&typeof this._dimensions[0]=="string"},r.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},r.prototype.isScalar=function(){return this._isScalar},r.prototype.toArray=function(){for(var o=[],s=0,a=this._dimensions.length;s<a;s++){var l=this._dimensions[s];o.push(typeof l=="string"?l:l.toArray())}return o},r.prototype.valueOf=r.prototype.toArray,r.prototype.toString=function(){for(var o=[],s=0,a=this._dimensions.length;s<a;s++){var l=this._dimensions[s];typeof l=="string"?o.push(JSON.stringify(l)):o.push(l.toString())}return"["+o.join(", ")+"]"},r.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},r.fromJSON=function(o){return r.create(o.dimensions)},r},{isClass:!0});function Kz(n){var e=[];return n.forEach((t,r)=>{t&&e.push(r)}),e}var qye="FibonacciHeap",Xye=["smaller","larger"],Yye=ae(qye,Xye,n=>{var{smaller:e,larger:t}=n,r=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(c,f){var d={key:c,value:f,degree:0};if(this._minimum){var h=this._minimum;d.left=h,d.right=h.right,h.right=d,d.right.left=d,e(c,h.key)&&(this._minimum=d)}else d.left=d,d.right=d,this._minimum=d;return this._size++,d},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return this._size===0},i.prototype.extractMinimum=function(){var c=this._minimum;if(c===null)return c;for(var f=this._minimum,d=c.degree,h=c.child;d>0;){var m=h.right;h.left.right=h.right,h.right.left=h.left,h.left=f,h.right=f.right,f.right=h,h.right.left=h,h.parent=null,h=m,d--}return c.left.right=c.right,c.right.left=c.left,c===c.right?f=null:(f=c.right,f=u(f,this._size)),this._size--,this._minimum=f,c},i.prototype.remove=function(c){this._minimum=o(this._minimum,c,-1),this.extractMinimum()};function o(c,f,d){f.key=d;var h=f.parent;return h&&e(f.key,h.key)&&(s(c,f,h),a(c,h)),e(f.key,c.key)&&(c=f),c}function s(c,f,d){f.left.right=f.right,f.right.left=f.left,d.degree--,d.child===f&&(d.child=f.right),d.degree===0&&(d.child=null),f.left=c,f.right=c.right,c.right=f,f.right.left=f,f.parent=null,f.mark=!1}function a(c,f){var d=f.parent;d&&(f.mark?(s(c,f,d),a(d)):f.mark=!0)}var l=function(f,d){f.left.right=f.right,f.right.left=f.left,f.parent=d,d.child?(f.left=d.child,f.right=d.child.right,d.child.right=f,f.right.left=f):(d.child=f,f.right=f,f.left=f),d.degree++,f.mark=!1};function u(c,f){var d=Math.floor(Math.log(f)*r)+1,h=new Array(d),m=0,g=c;if(g)for(m++,g=g.right;g!==c;)m++,g=g.right;for(var y;m>0;){for(var p=g.degree,w=g.right;y=h[p],!!y;){if(t(g.key,y.key)){var b=y;y=g,g=b}l(y,g),h[p]=null,p++}h[p]=g,g=w,m--}c=null;for(var v=0;v<d;v++)y=h[v],y&&(c?(y.left.right=y.right,y.right.left=y.left,y.left=c,y.right=c.right,c.right=y,y.right.left=y,e(y.key,c.key)&&(c=y)):c=y);return c}return i},{isClass:!0}),Kye="Spa",Zye=["addScalar","equalScalar","FibonacciHeap"],Jye=ae(Kye,Zye,n=>{var{addScalar:e,equalScalar:t,FibonacciHeap:r}=n;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new r}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(o,s){if(this._values[o])this._values[o].value=s;else{var a=this._heap.insert(o,s);this._values[o]=a}},i.prototype.get=function(o){var s=this._values[o];return s?s.value:0},i.prototype.accumulate=function(o,s){var a=this._values[o];a?a.value=e(a.value,s):(a=this._heap.insert(o,s),this._values[o]=a)},i.prototype.forEach=function(o,s,a){var l=this._heap,u=this._values,c=[],f=l.extractMinimum();for(f&&c.push(f);f&&f.key<=s;)f.key>=o&&(t(f.value,0)||a(f.key,f.value,this)),f=l.extractMinimum(),f&&c.push(f);for(var d=0;d<c.length;d++){var h=c[d];f=l.insert(h.key,h.value),u[f.key]=f}},i.prototype.swap=function(o,s){var a=this._values[o],l=this._values[s];if(!a&&l)a=this._heap.insert(o,l.value),this._heap.remove(l),this._values[o]=a,this._values[s]=void 0;else if(a&&!l)l=this._heap.insert(s,a.value),this._heap.remove(a),this._values[s]=l,this._values[o]=void 0;else if(a&&l){var u=a.value;a.value=l.value,l.value=u}},i},{isClass:!0}),Qye=X1(function(n){return new n(1).exp()},{hasher:f2}),e1e=X1(function(n){return new n(1).plus(new n(5).sqrt()).div(2)},{hasher:f2}),$k=X1(function(n){return n.acos(-1)},{hasher:f2}),t1e=X1(function(n){return $k(n).times(2)},{hasher:f2});function f2(n){return n[0].precision}function Zz(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function mT(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Zz(Object(t),!0).forEach(function(r){_r(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Zz(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var n1e="Unit",r1e=["?on","config","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],i1e=ae(n1e,r1e,n=>{var{on:e,config:t,addScalar:r,subtractScalar:i,multiplyScalar:o,divideScalar:s,pow:a,abs:l,fix:u,round:c,equal:f,isNumeric:d,format:h,number:m,Complex:g,BigNumber:y,Fraction:p}=n,w=m;function b(ee,oe){if(!(this instanceof b))throw new Error("Constructor must be called with the new operator");if(!(ee==null||d(ee)||el(ee)))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=!1,this.skipAutomaticSimplification=!0,oe===void 0)this.units=[],this.dimensions=V.map(se=>0);else if(typeof oe=="string"){var Me=b.parse(oe);this.units=Me.units,this.dimensions=Me.dimensions}else if(os(oe)&&oe.value===null)this.fixPrefix=oe.fixPrefix,this.skipAutomaticSimplification=oe.skipAutomaticSimplification,this.dimensions=oe.dimensions.slice(0),this.units=oe.units.map(se=>pt({},se));else throw new TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.value=this._normalize(ee)}Object.defineProperty(b,"name",{value:"Unit"}),b.prototype.constructor=b,b.prototype.type="Unit",b.prototype.isUnit=!0;var v,S,x;function M(){for(;x===" "||x==="	";)C()}function A(ee){return ee>="0"&&ee<="9"||ee==="."}function T(ee){return ee>="0"&&ee<="9"}function C(){S++,x=v.charAt(S)}function D(ee){S=ee,x=v.charAt(S)}function R(){var ee="",oe=S;if(x==="+"?C():x==="-"&&(ee+=x,C()),!A(x))return D(oe),null;if(x==="."){if(ee+=x,C(),!T(x))return D(oe),null}else{for(;T(x);)ee+=x,C();x==="."&&(ee+=x,C())}for(;T(x);)ee+=x,C();if(x==="E"||x==="e"){var Me="",se=S;if(Me+=x,C(),(x==="+"||x==="-")&&(Me+=x,C()),!T(x))return D(se),ee;for(ee=ee+Me;T(x);)ee+=x,C()}return ee}function B(){for(var ee="";T(x)||b.isValidAlpha(x);)ee+=x,C();var oe=ee.charAt(0);return b.isValidAlpha(oe)?ee:null}function F(ee){return x===ee?(C(),ee):null}b.parse=function(ee,oe){if(oe=oe||{},v=ee,S=-1,x="",typeof v!="string")throw new TypeError("Invalid argument in Unit.parse, string expected");var Me=new b;Me.units=[];var se=1,G=!1;C(),M();var j=R(),he=null;if(j){if(t.number==="BigNumber")he=new y(j);else if(t.number==="Fraction")try{he=new p(j)}catch{he=parseFloat(j)}else he=parseFloat(j);M(),F("*")?(se=1,G=!0):F("/")&&(se=-1,G=!0)}for(var Ce=[],q=1;;){for(M();x==="(";)Ce.push(se),q*=se,se=1,C(),M();var J=void 0;if(x){var ye=x;if(J=B(),J===null)throw new SyntaxError('Unexpected "'+ye+'" in "'+v+'" at index '+S.toString())}else break;var we=U(J);if(we===null)throw new SyntaxError('Unit "'+J+'" not found.');var ke=se*q;if(M(),F("^")){M();var Fe=R();if(Fe===null)throw new SyntaxError('In "'+ee+'", "^" must be followed by a floating-point number');ke*=Fe}Me.units.push({unit:we.unit,prefix:we.prefix,power:ke});for(var He=0;He<V.length;He++)Me.dimensions[He]+=(we.unit.dimensions[He]||0)*ke;for(M();x===")";){if(Ce.length===0)throw new SyntaxError('Unmatched ")" in "'+v+'" at index '+S.toString());q/=Ce.pop(),C(),M()}if(G=!1,F("*")?(se=1,G=!0):F("/")?(se=-1,G=!0):se=1,we.unit.base){var Ie=we.unit.base.key;ue.auto[Ie]={unit:we.unit,prefix:we.prefix}}}if(M(),x)throw new SyntaxError('Could not parse: "'+ee+'"');if(G)throw new SyntaxError('Trailing characters: "'+ee+'"');if(Ce.length!==0)throw new SyntaxError('Unmatched "(" in "'+v+'"');if(Me.units.length===0&&!oe.allowNoUnits)throw new SyntaxError('"'+ee+'" contains no units');return Me.value=he!==void 0?Me._normalize(he):null,Me},b.prototype.clone=function(){var ee=new b;ee.fixPrefix=this.fixPrefix,ee.skipAutomaticSimplification=this.skipAutomaticSimplification,ee.value=Kt(this.value),ee.dimensions=this.dimensions.slice(0),ee.units=[];for(var oe=0;oe<this.units.length;oe++){ee.units[oe]={};for(var Me in this.units[oe])vt(this.units[oe],Me)&&(ee.units[oe][Me]=this.units[oe][Me])}return ee},b.prototype.valueType=function(){return Zn(this.value)},b.prototype._isDerived=function(){return this.units.length===0?!1:this.units.length>1||Math.abs(this.units[0].power-1)>1e-15},b.prototype._normalize=function(ee){if(ee==null||this.units.length===0)return ee;for(var oe=ee,Me=b._getNumberConverter(Zn(ee)),se=0;se<this.units.length;se++){var G=Me(this.units[se].unit.value),j=Me(this.units[se].prefix.value),he=Me(this.units[se].power);oe=o(oe,a(o(G,j),he))}return oe},b.prototype._denormalize=function(ee,oe){if(ee==null||this.units.length===0)return ee;for(var Me=ee,se=b._getNumberConverter(Zn(ee)),G=0;G<this.units.length;G++){var j=se(this.units[G].unit.value),he=se(this.units[G].prefix.value),Ce=se(this.units[G].power);Me=s(Me,a(o(j,he),Ce))}return Me};var U=X1(ee=>{if(vt(Y,ee)){var oe=Y[ee],Me=oe.prefixes[""];return{unit:oe,prefix:Me}}for(var se in Y)if(vt(Y,se)&&ghe(ee,se)){var G=Y[se],j=ee.length-se.length,he=ee.substring(0,j),Ce=vt(G.prefixes,he)?G.prefixes[he]:void 0;if(Ce!==void 0)return{unit:G,prefix:Ce}}return null},{hasher:ee=>ee[0],limit:100});b.isValuelessUnit=function(ee){return U(ee)!==null},b.prototype.hasBase=function(ee){if(typeof ee=="string"&&(ee=L[ee]),!ee)return!1;for(var oe=0;oe<V.length;oe++)if(Math.abs((this.dimensions[oe]||0)-(ee.dimensions[oe]||0))>1e-12)return!1;return!0},b.prototype.equalBase=function(ee){for(var oe=0;oe<V.length;oe++)if(Math.abs((this.dimensions[oe]||0)-(ee.dimensions[oe]||0))>1e-12)return!1;return!0},b.prototype.equals=function(ee){return this.equalBase(ee)&&f(this.value,ee.value)},b.prototype.multiply=function(ee){for(var oe=this.clone(),Me=os(ee)?ee:new b(ee),se=0;se<V.length;se++)oe.dimensions[se]=(this.dimensions[se]||0)+(Me.dimensions[se]||0);for(var G=0;G<Me.units.length;G++){var j=mT({},Me.units[G]);oe.units.push(j)}if(this.value!==null||Me.value!==null){var he=this.value===null?this._normalize(1):this.value,Ce=Me.value===null?Me._normalize(1):Me.value;oe.value=o(he,Ce)}else oe.value=null;return os(ee)&&(oe.skipAutomaticSimplification=!1),N(oe)},b.prototype.divideInto=function(ee){return new b(ee).divide(this)},b.prototype.divide=function(ee){for(var oe=this.clone(),Me=os(ee)?ee:new b(ee),se=0;se<V.length;se++)oe.dimensions[se]=(this.dimensions[se]||0)-(Me.dimensions[se]||0);for(var G=0;G<Me.units.length;G++){var j=mT(mT({},Me.units[G]),{},{power:-Me.units[G].power});oe.units.push(j)}if(this.value!==null||Me.value!==null){var he=this.value===null?this._normalize(1):this.value,Ce=Me.value===null?Me._normalize(1):Me.value;oe.value=s(he,Ce)}else oe.value=null;return os(ee)&&(oe.skipAutomaticSimplification=!1),N(oe)},b.prototype.pow=function(ee){for(var oe=this.clone(),Me=0;Me<V.length;Me++)oe.dimensions[Me]=(this.dimensions[Me]||0)*ee;for(var se=0;se<oe.units.length;se++)oe.units[se].power*=ee;return oe.value!==null?oe.value=a(oe.value,ee):oe.value=null,oe.skipAutomaticSimplification=!1,N(oe)};function N(ee){return ee.equalBase(L.NONE)&&ee.value!==null&&!t.predictable?ee.value:ee}b.prototype.abs=function(){var ee=this.clone();if(ee.value!==null)if(ee._isDerived()||ee.units.length===0||ee.units[0].unit.offset===0)ee.value=l(ee.value);else{var oe=ee._numberConverter(),Me=oe(ee.units[0].unit.value),se=oe(ee.units[0].unit.offset),G=o(Me,se);ee.value=i(l(r(ee.value,G)),G)}for(var j in ee.units)(ee.units[j].unit.name==="VA"||ee.units[j].unit.name==="VAR")&&(ee.units[j].unit=Y.W);return ee},b.prototype.to=function(ee){var oe=this.value===null?this._normalize(1):this.value,Me;if(typeof ee=="string")Me=b.parse(ee);else if(os(ee))Me=ee.clone();else throw new Error("String or Unit expected as parameter");if(!this.equalBase(Me))throw new Error("Units do not match ('".concat(Me.toString(),"' != '").concat(this.toString(),"')"));if(Me.value!==null)throw new Error("Cannot convert to a unit with a value");if(this.value===null||this._isDerived()||this.units.length===0||Me.units.length===0||this.units[0].unit.offset===Me.units[0].unit.offset)Me.value=Kt(oe);else{var se=b._getNumberConverter(Zn(oe)),G=this.units[0].unit.value,j=this.units[0].unit.offset,he=o(G,j),Ce=Me.units[0].unit.value,q=Me.units[0].unit.offset,J=o(Ce,q);Me.value=r(oe,se(i(he,J)))}return Me.fixPrefix=!0,Me.skipAutomaticSimplification=!0,Me},b.prototype.toNumber=function(ee){return w(this.toNumeric(ee))},b.prototype.toNumeric=function(ee){var oe;return ee?oe=this.to(ee):oe=this.clone(),oe._isDerived()||oe.units.length===0?oe._denormalize(oe.value):oe._denormalize(oe.value,oe.units[0].prefix.value)},b.prototype.toString=function(){return this.format()},b.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.units.length>0?this.formatUnits():null,fixPrefix:this.fixPrefix}},b.fromJSON=function(ee){var oe,Me=new b(ee.value,(oe=ee.unit)!==null&&oe!==void 0?oe:void 0);return Me.fixPrefix=ee.fixPrefix||!1,Me},b.prototype.valueOf=b.prototype.toString,b.prototype.simplify=function(){var ee=this.clone(),oe=[],Me;for(var se in ge)if(vt(ge,se)&&ee.hasBase(L[se])){Me=se;break}if(Me==="NONE")ee.units=[];else{var G;if(Me&&vt(ge,Me)&&(G=ge[Me]),G)ee.units=[{unit:G.unit,prefix:G.prefix,power:1}];else{for(var j=!1,he=0;he<V.length;he++){var Ce=V[he];Math.abs(ee.dimensions[he]||0)>1e-12&&(vt(ge,Ce)?oe.push({unit:ge[Ce].unit,prefix:ge[Ce].prefix,power:ee.dimensions[he]||0}):j=!0)}oe.length<ee.units.length&&!j&&(ee.units=oe)}}return ee},b.prototype.toSI=function(){for(var ee=this.clone(),oe=[],Me=0;Me<V.length;Me++){var se=V[Me];if(Math.abs(ee.dimensions[Me]||0)>1e-12)if(vt(ue.si,se))oe.push({unit:ue.si[se].unit,prefix:ue.si[se].prefix,power:ee.dimensions[Me]||0});else throw new Error("Cannot express custom unit "+se+" in SI units")}return ee.units=oe,ee.fixPrefix=!0,ee.skipAutomaticSimplification=!0,this.value!==null?(ee.value=null,this.to(ee)):ee},b.prototype.formatUnits=function(){for(var ee="",oe="",Me=0,se=0,G=0;G<this.units.length;G++)this.units[G].power>0?(Me++,ee+=" "+this.units[G].prefix.name+this.units[G].unit.name,Math.abs(this.units[G].power-1)>1e-15&&(ee+="^"+this.units[G].power)):this.units[G].power<0&&se++;if(se>0)for(var j=0;j<this.units.length;j++)this.units[j].power<0&&(Me>0?(oe+=" "+this.units[j].prefix.name+this.units[j].unit.name,Math.abs(this.units[j].power+1)>1e-15&&(oe+="^"+-this.units[j].power)):(oe+=" "+this.units[j].prefix.name+this.units[j].unit.name,oe+="^"+this.units[j].power));ee=ee.substr(1),oe=oe.substr(1),Me>1&&se>0&&(ee="("+ee+")"),se>1&&Me>0&&(oe="("+oe+")");var he=ee;return Me>0&&se>0&&(he+=" / "),he+=oe,he},b.prototype.format=function(ee){var oe=this.skipAutomaticSimplification||this.value===null?this.clone():this.simplify(),Me=!1;typeof oe.value<"u"&&oe.value!==null&&el(oe.value)&&(Me=Math.abs(oe.value.re)<1e-14);for(var se in oe.units)vt(oe.units,se)&&oe.units[se].unit&&(oe.units[se].unit.name==="VA"&&Me?oe.units[se].unit=Y.VAR:oe.units[se].unit.name==="VAR"&&!Me&&(oe.units[se].unit=Y.VA));oe.units.length===1&&!oe.fixPrefix&&Math.abs(oe.units[0].power-Math.round(oe.units[0].power))<1e-14&&(oe.units[0].prefix=oe._bestPrefix());var G=oe._denormalize(oe.value),j=oe.value!==null?h(G,ee||{}):"",he=oe.formatUnits();return oe.value&&el(oe.value)&&(j="("+j+")"),he.length>0&&j.length>0&&(j+=" "),j+=he,j},b.prototype._bestPrefix=function(){if(this.units.length!==1)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var ee=this.value!==null?l(this.value):0,oe=l(this.units[0].unit.value),Me=this.units[0].prefix;if(ee===0)return Me;var se=this.units[0].power,G=Math.log(ee/Math.pow(Me.value*oe,se))/Math.LN10-1.2;if(G>-2.200001&&G<1.800001)return Me;G=Math.abs(G);var j=this.units[0].unit.prefixes;for(var he in j)if(vt(j,he)){var Ce=j[he];if(Ce.scientific){var q=Math.abs(Math.log(ee/Math.pow(Ce.value*oe,se))/Math.LN10-1.2);(q<G||q===G&&Ce.name.length<Me.name.length)&&(Me=Ce,G=q)}}return Me},b.prototype.splitUnit=function(ee){for(var oe=this.clone(),Me=[],se=0;se<ee.length&&(oe=oe.to(ee[se]),se!==ee.length-1);se++){var G=oe.toNumeric(),j=c(G),he=void 0,Ce=f(j,G);Ce?he=j:he=u(oe.toNumeric());var q=new b(he,ee[se].toString());Me.push(q),oe=i(oe,q)}for(var J=0,ye=0;ye<Me.length;ye++)J=r(J,Me[ye].value);return f(J,this.value)&&(oe.value=0),Me.push(oe),Me};var I={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},R:{name:"R",value:1e27,scientific:!0},Q:{name:"Q",value:1e30,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0},r:{name:"r",value:1e-27,scientific:!0},q:{name:"q",value:1e-30,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},ronna:{name:"ronna",value:1e27,scientific:!0},quetta:{name:"quetta",value:1e30,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0},ronto:{name:"ronto",value:1e-27,scientific:!0},quecto:{name:"quecto",value:1e-30,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},R:{name:"R",value:1e54,scientific:!0},Q:{name:"Q",value:1e60,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0},r:{name:"r",value:1e-54,scientific:!0},q:{name:"q",value:1e-60,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},R:{name:"R",value:1e81,scientific:!0},Q:{name:"Q",value:1e90,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0},r:{name:"r",value:1e-81,scientific:!0},q:{name:"q",value:1e-90,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};I.SHORTLONG=pt({},I.SHORT,I.LONG),I.BINARY_SHORT=pt({},I.BINARY_SHORT_SI,I.BINARY_SHORT_IEC),I.BINARY_LONG=pt({},I.BINARY_LONG_SI,I.BINARY_LONG_IEC);var V=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],L={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var X in L)vt(L,X)&&(L[X].key=X);var Z={},te={name:"",base:Z,value:1,offset:0,dimensions:V.map(ee=>0)},Y={meter:{name:"meter",base:L.LENGTH,prefixes:I.LONG,value:1,offset:0},inch:{name:"inch",base:L.LENGTH,prefixes:I.NONE,value:.0254,offset:0},foot:{name:"foot",base:L.LENGTH,prefixes:I.NONE,value:.3048,offset:0},yard:{name:"yard",base:L.LENGTH,prefixes:I.NONE,value:.9144,offset:0},mile:{name:"mile",base:L.LENGTH,prefixes:I.NONE,value:1609.344,offset:0},link:{name:"link",base:L.LENGTH,prefixes:I.NONE,value:.201168,offset:0},rod:{name:"rod",base:L.LENGTH,prefixes:I.NONE,value:5.0292,offset:0},chain:{name:"chain",base:L.LENGTH,prefixes:I.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:L.LENGTH,prefixes:I.NONE,value:1e-10,offset:0},m:{name:"m",base:L.LENGTH,prefixes:I.SHORT,value:1,offset:0},in:{name:"in",base:L.LENGTH,prefixes:I.NONE,value:.0254,offset:0},ft:{name:"ft",base:L.LENGTH,prefixes:I.NONE,value:.3048,offset:0},yd:{name:"yd",base:L.LENGTH,prefixes:I.NONE,value:.9144,offset:0},mi:{name:"mi",base:L.LENGTH,prefixes:I.NONE,value:1609.344,offset:0},li:{name:"li",base:L.LENGTH,prefixes:I.NONE,value:.201168,offset:0},rd:{name:"rd",base:L.LENGTH,prefixes:I.NONE,value:5.02921,offset:0},ch:{name:"ch",base:L.LENGTH,prefixes:I.NONE,value:20.1168,offset:0},mil:{name:"mil",base:L.LENGTH,prefixes:I.NONE,value:254e-7,offset:0},m2:{name:"m2",base:L.SURFACE,prefixes:I.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:L.SURFACE,prefixes:I.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:L.SURFACE,prefixes:I.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:L.SURFACE,prefixes:I.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:L.SURFACE,prefixes:I.NONE,value:2589988110336e-6,offset:0},sqrd:{name:"sqrd",base:L.SURFACE,prefixes:I.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:L.SURFACE,prefixes:I.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:L.SURFACE,prefixes:I.NONE,value:64516e-14,offset:0},acre:{name:"acre",base:L.SURFACE,prefixes:I.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:L.SURFACE,prefixes:I.NONE,value:1e4,offset:0},m3:{name:"m3",base:L.VOLUME,prefixes:I.CUBIC,value:1,offset:0},L:{name:"L",base:L.VOLUME,prefixes:I.SHORT,value:.001,offset:0},l:{name:"l",base:L.VOLUME,prefixes:I.SHORT,value:.001,offset:0},litre:{name:"litre",base:L.VOLUME,prefixes:I.LONG,value:.001,offset:0},cuin:{name:"cuin",base:L.VOLUME,prefixes:I.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:L.VOLUME,prefixes:I.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:L.VOLUME,prefixes:I.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:L.VOLUME,prefixes:I.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:L.VOLUME,prefixes:I.NONE,value:15e-6,offset:0},drop:{name:"drop",base:L.VOLUME,prefixes:I.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:L.VOLUME,prefixes:I.NONE,value:5e-8,offset:0},minim:{name:"minim",base:L.VOLUME,prefixes:I.NONE,value:6161152e-14,offset:0},fluiddram:{name:"fluiddram",base:L.VOLUME,prefixes:I.NONE,value:36966911e-13,offset:0},fluidounce:{name:"fluidounce",base:L.VOLUME,prefixes:I.NONE,value:2957353e-11,offset:0},gill:{name:"gill",base:L.VOLUME,prefixes:I.NONE,value:.0001182941,offset:0},cc:{name:"cc",base:L.VOLUME,prefixes:I.NONE,value:1e-6,offset:0},cup:{name:"cup",base:L.VOLUME,prefixes:I.NONE,value:.0002365882,offset:0},pint:{name:"pint",base:L.VOLUME,prefixes:I.NONE,value:.0004731765,offset:0},quart:{name:"quart",base:L.VOLUME,prefixes:I.NONE,value:.0009463529,offset:0},gallon:{name:"gallon",base:L.VOLUME,prefixes:I.NONE,value:.003785412,offset:0},beerbarrel:{name:"beerbarrel",base:L.VOLUME,prefixes:I.NONE,value:.1173478,offset:0},oilbarrel:{name:"oilbarrel",base:L.VOLUME,prefixes:I.NONE,value:.1589873,offset:0},hogshead:{name:"hogshead",base:L.VOLUME,prefixes:I.NONE,value:.238481,offset:0},fldr:{name:"fldr",base:L.VOLUME,prefixes:I.NONE,value:36966911e-13,offset:0},floz:{name:"floz",base:L.VOLUME,prefixes:I.NONE,value:2957353e-11,offset:0},gi:{name:"gi",base:L.VOLUME,prefixes:I.NONE,value:.0001182941,offset:0},cp:{name:"cp",base:L.VOLUME,prefixes:I.NONE,value:.0002365882,offset:0},pt:{name:"pt",base:L.VOLUME,prefixes:I.NONE,value:.0004731765,offset:0},qt:{name:"qt",base:L.VOLUME,prefixes:I.NONE,value:.0009463529,offset:0},gal:{name:"gal",base:L.VOLUME,prefixes:I.NONE,value:.003785412,offset:0},bbl:{name:"bbl",base:L.VOLUME,prefixes:I.NONE,value:.1173478,offset:0},obl:{name:"obl",base:L.VOLUME,prefixes:I.NONE,value:.1589873,offset:0},g:{name:"g",base:L.MASS,prefixes:I.SHORT,value:.001,offset:0},gram:{name:"gram",base:L.MASS,prefixes:I.LONG,value:.001,offset:0},ton:{name:"ton",base:L.MASS,prefixes:I.SHORT,value:907.18474,offset:0},t:{name:"t",base:L.MASS,prefixes:I.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:L.MASS,prefixes:I.LONG,value:1e3,offset:0},grain:{name:"grain",base:L.MASS,prefixes:I.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:L.MASS,prefixes:I.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:L.MASS,prefixes:I.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:L.MASS,prefixes:I.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:L.MASS,prefixes:I.NONE,value:45.359237,offset:0},stick:{name:"stick",base:L.MASS,prefixes:I.NONE,value:.115,offset:0},stone:{name:"stone",base:L.MASS,prefixes:I.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:L.MASS,prefixes:I.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:L.MASS,prefixes:I.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:L.MASS,prefixes:I.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:L.MASS,prefixes:I.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:L.MASS,prefixes:I.NONE,value:45.359237,offset:0},s:{name:"s",base:L.TIME,prefixes:I.SHORT,value:1,offset:0},min:{name:"min",base:L.TIME,prefixes:I.NONE,value:60,offset:0},h:{name:"h",base:L.TIME,prefixes:I.NONE,value:3600,offset:0},second:{name:"second",base:L.TIME,prefixes:I.LONG,value:1,offset:0},sec:{name:"sec",base:L.TIME,prefixes:I.LONG,value:1,offset:0},minute:{name:"minute",base:L.TIME,prefixes:I.NONE,value:60,offset:0},hour:{name:"hour",base:L.TIME,prefixes:I.NONE,value:3600,offset:0},day:{name:"day",base:L.TIME,prefixes:I.NONE,value:86400,offset:0},week:{name:"week",base:L.TIME,prefixes:I.NONE,value:7*86400,offset:0},month:{name:"month",base:L.TIME,prefixes:I.NONE,value:2629800,offset:0},year:{name:"year",base:L.TIME,prefixes:I.NONE,value:31557600,offset:0},decade:{name:"decade",base:L.TIME,prefixes:I.NONE,value:315576e3,offset:0},century:{name:"century",base:L.TIME,prefixes:I.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:L.TIME,prefixes:I.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:L.FREQUENCY,prefixes:I.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:L.FREQUENCY,prefixes:I.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:L.ANGLE,prefixes:I.SHORT,value:1,offset:0},radian:{name:"radian",base:L.ANGLE,prefixes:I.LONG,value:1,offset:0},deg:{name:"deg",base:L.ANGLE,prefixes:I.SHORT,value:null,offset:0},degree:{name:"degree",base:L.ANGLE,prefixes:I.LONG,value:null,offset:0},grad:{name:"grad",base:L.ANGLE,prefixes:I.SHORT,value:null,offset:0},gradian:{name:"gradian",base:L.ANGLE,prefixes:I.LONG,value:null,offset:0},cycle:{name:"cycle",base:L.ANGLE,prefixes:I.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:L.ANGLE,prefixes:I.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:L.ANGLE,prefixes:I.NONE,value:null,offset:0},A:{name:"A",base:L.CURRENT,prefixes:I.SHORT,value:1,offset:0},ampere:{name:"ampere",base:L.CURRENT,prefixes:I.LONG,value:1,offset:0},K:{name:"K",base:L.TEMPERATURE,prefixes:I.SHORT,value:1,offset:0},degC:{name:"degC",base:L.TEMPERATURE,prefixes:I.SHORT,value:1,offset:273.15},degF:{name:"degF",base:L.TEMPERATURE,prefixes:I.SHORT,value:new p(5,9),offset:459.67},degR:{name:"degR",base:L.TEMPERATURE,prefixes:I.SHORT,value:new p(5,9),offset:0},kelvin:{name:"kelvin",base:L.TEMPERATURE,prefixes:I.LONG,value:1,offset:0},celsius:{name:"celsius",base:L.TEMPERATURE,prefixes:I.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:L.TEMPERATURE,prefixes:I.LONG,value:new p(5,9),offset:459.67},rankine:{name:"rankine",base:L.TEMPERATURE,prefixes:I.LONG,value:new p(5,9),offset:0},mol:{name:"mol",base:L.AMOUNT_OF_SUBSTANCE,prefixes:I.SHORT,value:1,offset:0},mole:{name:"mole",base:L.AMOUNT_OF_SUBSTANCE,prefixes:I.LONG,value:1,offset:0},cd:{name:"cd",base:L.LUMINOUS_INTENSITY,prefixes:I.SHORT,value:1,offset:0},candela:{name:"candela",base:L.LUMINOUS_INTENSITY,prefixes:I.LONG,value:1,offset:0},N:{name:"N",base:L.FORCE,prefixes:I.SHORT,value:1,offset:0},newton:{name:"newton",base:L.FORCE,prefixes:I.LONG,value:1,offset:0},dyn:{name:"dyn",base:L.FORCE,prefixes:I.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:L.FORCE,prefixes:I.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:L.FORCE,prefixes:I.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:L.FORCE,prefixes:I.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:L.FORCE,prefixes:I.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:L.FORCE,prefixes:I.NONE,value:9.80665,offset:0},J:{name:"J",base:L.ENERGY,prefixes:I.SHORT,value:1,offset:0},joule:{name:"joule",base:L.ENERGY,prefixes:I.LONG,value:1,offset:0},erg:{name:"erg",base:L.ENERGY,prefixes:I.SHORTLONG,value:1e-7,offset:0},Wh:{name:"Wh",base:L.ENERGY,prefixes:I.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:L.ENERGY,prefixes:I.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:L.ENERGY,prefixes:I.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:L.ENERGY,prefixes:I.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:L.POWER,prefixes:I.SHORT,value:1,offset:0},watt:{name:"watt",base:L.POWER,prefixes:I.LONG,value:1,offset:0},hp:{name:"hp",base:L.POWER,prefixes:I.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:L.POWER,prefixes:I.SHORT,value:g.I,offset:0},VA:{name:"VA",base:L.POWER,prefixes:I.SHORT,value:1,offset:0},Pa:{name:"Pa",base:L.PRESSURE,prefixes:I.SHORT,value:1,offset:0},psi:{name:"psi",base:L.PRESSURE,prefixes:I.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:L.PRESSURE,prefixes:I.NONE,value:101325,offset:0},bar:{name:"bar",base:L.PRESSURE,prefixes:I.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:L.PRESSURE,prefixes:I.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:L.PRESSURE,prefixes:I.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:L.PRESSURE,prefixes:I.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:L.PRESSURE,prefixes:I.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:L.ELECTRIC_CHARGE,prefixes:I.LONG,value:1,offset:0},C:{name:"C",base:L.ELECTRIC_CHARGE,prefixes:I.SHORT,value:1,offset:0},farad:{name:"farad",base:L.ELECTRIC_CAPACITANCE,prefixes:I.LONG,value:1,offset:0},F:{name:"F",base:L.ELECTRIC_CAPACITANCE,prefixes:I.SHORT,value:1,offset:0},volt:{name:"volt",base:L.ELECTRIC_POTENTIAL,prefixes:I.LONG,value:1,offset:0},V:{name:"V",base:L.ELECTRIC_POTENTIAL,prefixes:I.SHORT,value:1,offset:0},ohm:{name:"ohm",base:L.ELECTRIC_RESISTANCE,prefixes:I.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:L.ELECTRIC_INDUCTANCE,prefixes:I.LONG,value:1,offset:0},H:{name:"H",base:L.ELECTRIC_INDUCTANCE,prefixes:I.SHORT,value:1,offset:0},siemens:{name:"siemens",base:L.ELECTRIC_CONDUCTANCE,prefixes:I.LONG,value:1,offset:0},S:{name:"S",base:L.ELECTRIC_CONDUCTANCE,prefixes:I.SHORT,value:1,offset:0},weber:{name:"weber",base:L.MAGNETIC_FLUX,prefixes:I.LONG,value:1,offset:0},Wb:{name:"Wb",base:L.MAGNETIC_FLUX,prefixes:I.SHORT,value:1,offset:0},tesla:{name:"tesla",base:L.MAGNETIC_FLUX_DENSITY,prefixes:I.LONG,value:1,offset:0},T:{name:"T",base:L.MAGNETIC_FLUX_DENSITY,prefixes:I.SHORT,value:1,offset:0},b:{name:"b",base:L.BIT,prefixes:I.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:L.BIT,prefixes:I.BINARY_LONG,value:1,offset:0},B:{name:"B",base:L.BIT,prefixes:I.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:L.BIT,prefixes:I.BINARY_LONG,value:8,offset:0}},re={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fluiddrams:"fluiddram",fluidounces:"fluidounce",gills:"gill",cups:"cup",pints:"pint",quarts:"quart",gallons:"gallon",beerbarrels:"beerbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",amps:"ampere",amp:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function fe(ee){if(ee.number==="BigNumber"){var oe=$k(y);Y.rad.value=new y(1),Y.deg.value=oe.div(180),Y.grad.value=oe.div(200),Y.cycle.value=oe.times(2),Y.arcsec.value=oe.div(648e3),Y.arcmin.value=oe.div(10800)}else Y.rad.value=1,Y.deg.value=Math.PI/180,Y.grad.value=Math.PI/200,Y.cycle.value=Math.PI*2,Y.arcsec.value=Math.PI/648e3,Y.arcmin.value=Math.PI/10800;Y.radian.value=Y.rad.value,Y.degree.value=Y.deg.value,Y.gradian.value=Y.grad.value}fe(t),e&&e("config",function(ee,oe){ee.number!==oe.number&&fe(ee)});var ue={si:{NONE:{unit:te,prefix:I.NONE[""]},LENGTH:{unit:Y.m,prefix:I.SHORT[""]},MASS:{unit:Y.g,prefix:I.SHORT.k},TIME:{unit:Y.s,prefix:I.SHORT[""]},CURRENT:{unit:Y.A,prefix:I.SHORT[""]},TEMPERATURE:{unit:Y.K,prefix:I.SHORT[""]},LUMINOUS_INTENSITY:{unit:Y.cd,prefix:I.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:Y.mol,prefix:I.SHORT[""]},ANGLE:{unit:Y.rad,prefix:I.SHORT[""]},BIT:{unit:Y.bits,prefix:I.SHORT[""]},FORCE:{unit:Y.N,prefix:I.SHORT[""]},ENERGY:{unit:Y.J,prefix:I.SHORT[""]},POWER:{unit:Y.W,prefix:I.SHORT[""]},PRESSURE:{unit:Y.Pa,prefix:I.SHORT[""]},ELECTRIC_CHARGE:{unit:Y.C,prefix:I.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:Y.F,prefix:I.SHORT[""]},ELECTRIC_POTENTIAL:{unit:Y.V,prefix:I.SHORT[""]},ELECTRIC_RESISTANCE:{unit:Y.ohm,prefix:I.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:Y.H,prefix:I.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:Y.S,prefix:I.SHORT[""]},MAGNETIC_FLUX:{unit:Y.Wb,prefix:I.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:Y.T,prefix:I.SHORT[""]},FREQUENCY:{unit:Y.Hz,prefix:I.SHORT[""]}}};ue.cgs=JSON.parse(JSON.stringify(ue.si)),ue.cgs.LENGTH={unit:Y.m,prefix:I.SHORT.c},ue.cgs.MASS={unit:Y.g,prefix:I.SHORT[""]},ue.cgs.FORCE={unit:Y.dyn,prefix:I.SHORT[""]},ue.cgs.ENERGY={unit:Y.erg,prefix:I.NONE[""]},ue.us=JSON.parse(JSON.stringify(ue.si)),ue.us.LENGTH={unit:Y.ft,prefix:I.NONE[""]},ue.us.MASS={unit:Y.lbm,prefix:I.NONE[""]},ue.us.TEMPERATURE={unit:Y.degF,prefix:I.NONE[""]},ue.us.FORCE={unit:Y.lbf,prefix:I.NONE[""]},ue.us.ENERGY={unit:Y.BTU,prefix:I.BTU[""]},ue.us.POWER={unit:Y.hp,prefix:I.NONE[""]},ue.us.PRESSURE={unit:Y.psi,prefix:I.NONE[""]},ue.auto=JSON.parse(JSON.stringify(ue.si));var ge=ue.auto;b.setUnitSystem=function(ee){if(vt(ue,ee))ge=ue[ee];else throw new Error("Unit system "+ee+" does not exist. Choices are: "+Object.keys(ue).join(", "))},b.getUnitSystem=function(){for(var ee in ue)if(vt(ue,ee)&&ue[ee]===ge)return ee},b.typeConverters={BigNumber:function(oe){return oe!=null&&oe.isFraction?new y(oe.n).div(oe.d).times(oe.s):new y(oe+"")},Fraction:function(oe){return new p(oe)},Complex:function(oe){return oe},number:function(oe){return oe!=null&&oe.isFraction?m(oe):oe}},b.prototype._numberConverter=function(){var ee=b.typeConverters[this.valueType()];if(ee)return ee;throw new TypeError('Unsupported Unit value type "'+this.valueType()+'"')},b._getNumberConverter=function(ee){if(!b.typeConverters[ee])throw new TypeError('Unsupported type "'+ee+'"');return b.typeConverters[ee]};for(var Se in Y)if(vt(Y,Se)){var xe=Y[Se];xe.dimensions=xe.base.dimensions}for(var De in re)if(vt(re,De)){var Ae=Y[re[De]],ie={};for(var Re in Ae)vt(Ae,Re)&&(ie[Re]=Ae[Re]);ie.name=De,Y[De]=ie}b.isValidAlpha=function(oe){return/^[a-zA-Z]$/.test(oe)};function Pe(ee){for(var oe=0;oe<ee.length;oe++){if(x=ee.charAt(oe),oe===0&&!b.isValidAlpha(x))throw new Error('Invalid unit name (must begin with alpha character): "'+ee+'"');if(oe>0&&!(b.isValidAlpha(x)||T(x)))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+ee+'"')}}return b.createUnit=function(ee,oe){if(typeof ee!="object")throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(oe&&oe.override){for(var Me in ee)if(vt(ee,Me)&&b.deleteUnit(Me),ee[Me].aliases)for(var se=0;se<ee[Me].aliases.length;se++)b.deleteUnit(ee[Me].aliases[se])}var G;for(var j in ee)vt(ee,j)&&(G=b.createUnitSingle(j,ee[j]));return G},b.createUnitSingle=function(ee,oe){if((typeof oe>"u"||oe===null)&&(oe={}),typeof ee!="string")throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(vt(Y,ee))throw new Error('Cannot create unit "'+ee+'": a unit with that name already exists');Pe(ee);var Me=null,se=[],G=0,j,he,Ce;if(oe&&oe.type==="Unit")Me=oe.clone();else if(typeof oe=="string")oe!==""&&(j=oe);else if(typeof oe=="object")j=oe.definition,he=oe.prefixes,G=oe.offset,Ce=oe.baseName,oe.aliases&&(se=oe.aliases.valueOf());else throw new TypeError('Cannot create unit "'+ee+'" from "'+oe.toString()+'": expecting "string" or "Unit" or "Object"');if(se){for(var q=0;q<se.length;q++)if(vt(Y,se[q]))throw new Error('Cannot create alias "'+se[q]+'": a unit with that name already exists')}if(j&&typeof j=="string"&&!Me)try{Me=b.parse(j,{allowNoUnits:!0})}catch($){throw $.message='Could not create unit "'+ee+'" from "'+j+'": '+$.message,$}else j&&j.type==="Unit"&&(Me=j.clone());se=se||[],G=G||0,he&&he.toUpperCase?he=I[he.toUpperCase()]||I.NONE:he=I.NONE;var J={};if(Me){J={name:ee,value:Me.value,dimensions:Me.dimensions.slice(0),prefixes:he,offset:G};var Fe=!1;for(var He in L)if(vt(L,He)){for(var Ie=!0,Ze=0;Ze<V.length;Ze++)if(Math.abs((J.dimensions[Ze]||0)-(L[He].dimensions[Ze]||0))>1e-12){Ie=!1;break}if(Ie){Fe=!0,J.base=L[He];break}}if(!Fe){Ce=Ce||ee+"_STUFF";var qe={dimensions:Me.dimensions.slice(0)};qe.key=Ce,L[Ce]=qe,ge[Ce]={unit:J,prefix:I.NONE[""]},J.base=L[Ce]}}else{if(Ce=Ce||ee+"_STUFF",V.indexOf(Ce)>=0)throw new Error('Cannot create new base unit "'+ee+'": a base unit with that name already exists (and cannot be overridden)');V.push(Ce);for(var ye in L)vt(L,ye)&&(L[ye].dimensions[V.length-1]=0);for(var we={dimensions:[]},ke=0;ke<V.length;ke++)we.dimensions[ke]=0;we.dimensions[V.length-1]=1,we.key=Ce,L[Ce]=we,J={name:ee,value:1,dimensions:L[Ce].dimensions.slice(0),prefixes:he,offset:G,base:L[Ce]},ge[Ce]={unit:J,prefix:I.NONE[""]}}b.UNITS[ee]=J;for(var lt=0;lt<se.length;lt++){var at=se[lt],Je={};for(var Ee in J)vt(J,Ee)&&(Je[Ee]=J[Ee]);Je.name=at,b.UNITS[at]=Je}return delete U.cache,new b(null,ee)},b.deleteUnit=function(ee){delete b.UNITS[ee],delete U.cache},b.PREFIXES=I,b.BASE_DIMENSIONS=V,b.BASE_UNITS=L,b.UNIT_SYSTEMS=ue,b.UNITS=Y,b},{isClass:!0}),Jz="unit",o1e=["typed","Unit"],s1e=ae(Jz,o1e,n=>{var{typed:e,Unit:t}=n;return e(Jz,{Unit:function(i){return i.clone()},string:function(i){return t.isValuelessUnit(i)?new t(null,i):t.parse(i,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string | Unit":function(i,o){return new t(i,o)},"number | BigNumber | Fraction":function(i){return new t(i)},"Array | Matrix":e.referToSelf(r=>i=>hn(i,r))})}),Qz="sparse",a1e=["typed","SparseMatrix"],l1e=ae(Qz,a1e,n=>{var{typed:e,SparseMatrix:t}=n;return e(Qz,{"":function(){return new t([])},string:function(i){return new t([],i)},"Array | Matrix":function(i){return new t(i)},"Array | Matrix, string":function(i,o){return new t(i,o)}})}),eU="createUnit",u1e=["typed","Unit"],c1e=ae(eU,u1e,n=>{var{typed:e,Unit:t}=n;return e(eU,{"Object, Object":function(i,o){return t.createUnit(i,o)},Object:function(i){return t.createUnit(i,{})},"string, Unit | string | Object, Object":function(i,o,s){var a={};return a[i]=o,t.createUnit(a,s)},"string, Unit | string | Object":function(i,o){var s={};return s[i]=o,t.createUnit(s,{})},string:function(i){var o={};return o[i]={},t.createUnit(o,{})}})}),tU="acos",f1e=["typed","config","Complex"],d1e=ae(tU,f1e,n=>{var{typed:e,config:t,Complex:r}=n;return e(tU,{number:function(o){return o>=-1&&o<=1||t.predictable?Math.acos(o):new r(o,0).acos()},Complex:function(o){return o.acos()},BigNumber:function(o){return o.acos()}})}),nU="acosh",h1e=["typed","config","Complex"],p1e=ae(nU,h1e,n=>{var{typed:e,config:t,Complex:r}=n;return e(nU,{number:function(o){return o>=1||t.predictable?ZY(o):o<=-1?new r(Math.log(Math.sqrt(o*o-1)-o),Math.PI):new r(o,0).acosh()},Complex:function(o){return o.acosh()},BigNumber:function(o){return o.acosh()}})}),rU="acot",m1e=["typed","BigNumber"],g1e=ae(rU,m1e,n=>{var{typed:e,BigNumber:t}=n;return e(rU,{number:JY,Complex:function(i){return i.acot()},BigNumber:function(i){return new t(1).div(i).atan()}})}),iU="acoth",v1e=["typed","config","Complex","BigNumber"],y1e=ae(iU,v1e,n=>{var{typed:e,config:t,Complex:r,BigNumber:i}=n;return e(iU,{number:function(s){return s>=1||s<=-1||t.predictable?QY(s):new r(s,0).acoth()},Complex:function(s){return s.acoth()},BigNumber:function(s){return new i(1).div(s).atanh()}})}),oU="acsc",x1e=["typed","config","Complex","BigNumber"],b1e=ae(oU,x1e,n=>{var{typed:e,config:t,Complex:r,BigNumber:i}=n;return e(oU,{number:function(s){return s<=-1||s>=1||t.predictable?eK(s):new r(s,0).acsc()},Complex:function(s){return s.acsc()},BigNumber:function(s){return new i(1).div(s).asin()}})}),sU="acsch",w1e=["typed","BigNumber"],S1e=ae(sU,w1e,n=>{var{typed:e,BigNumber:t}=n;return e(sU,{number:tK,Complex:function(i){return i.acsch()},BigNumber:function(i){return new t(1).div(i).asinh()}})}),aU="asec",_1e=["typed","config","Complex","BigNumber"],E1e=ae(aU,_1e,n=>{var{typed:e,config:t,Complex:r,BigNumber:i}=n;return e(aU,{number:function(s){return s<=-1||s>=1||t.predictable?nK(s):new r(s,0).asec()},Complex:function(s){return s.asec()},BigNumber:function(s){return new i(1).div(s).acos()}})}),lU="asech",M1e=["typed","config","Complex","BigNumber"],C1e=ae(lU,M1e,n=>{var{typed:e,config:t,Complex:r,BigNumber:i}=n;return e(lU,{number:function(s){if(s<=1&&s>=-1||t.predictable){var a=1/s;if(a>0||t.predictable)return rK(s);var l=Math.sqrt(a*a-1);return new r(Math.log(l-a),Math.PI)}return new r(s,0).asech()},Complex:function(s){return s.asech()},BigNumber:function(s){return new i(1).div(s).acosh()}})}),uU="asin",A1e=["typed","config","Complex"],T1e=ae(uU,A1e,n=>{var{typed:e,config:t,Complex:r}=n;return e(uU,{number:function(o){return o>=-1&&o<=1||t.predictable?Math.asin(o):new r(o,0).asin()},Complex:function(o){return o.asin()},BigNumber:function(o){return o.asin()}})}),D1e="asinh",N1e=["typed"],P1e=ae(D1e,N1e,n=>{var{typed:e}=n;return e("asinh",{number:iK,Complex:function(r){return r.asinh()},BigNumber:function(r){return r.asinh()}})}),R1e="atan",O1e=["typed"],k1e=ae(R1e,O1e,n=>{var{typed:e}=n;return e("atan",{number:function(r){return Math.atan(r)},Complex:function(r){return r.atan()},BigNumber:function(r){return r.atan()}})}),cU="atan2",I1e=["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],L1e=ae(cU,I1e,n=>{var{typed:e,matrix:t,equalScalar:r,BigNumber:i,DenseMatrix:o,concat:s}=n,a=fl({typed:e,equalScalar:r}),l=Xo({typed:e}),u=xK({typed:e,equalScalar:r}),c=Zi({typed:e,equalScalar:r}),f=Si({typed:e,DenseMatrix:o}),d=nr({typed:e,matrix:t,concat:s});return e(cU,{"number, number":Math.atan2,"BigNumber, BigNumber":(h,m)=>i.atan2(h,m)},d({scalar:"number | BigNumber",SS:u,DS:l,SD:a,Ss:c,sS:f}))}),fU="atanh",F1e=["typed","config","Complex"],B1e=ae(fU,F1e,n=>{var{typed:e,config:t,Complex:r}=n;return e(fU,{number:function(o){return o<=1&&o>=-1||t.predictable?oK(o):new r(o,0).atanh()},Complex:function(o){return o.atanh()},BigNumber:function(o){return o.atanh()}})}),Zg=ae("trigUnit",["typed"],n=>{var{typed:e}=n;return{Unit:e.referToSelf(t=>r=>{if(!r.hasBase(r.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return e.find(t,r.valueType())(r.value)})}}),dU="cos",z1e=["typed"],U1e=ae(dU,z1e,n=>{var{typed:e}=n,t=Zg({typed:e});return e(dU,{number:Math.cos,"Complex | BigNumber":r=>r.cos()},t)}),hU="cosh",V1e=["typed"],$1e=ae(hU,V1e,n=>{var{typed:e}=n;return e(hU,{number:zfe,"Complex | BigNumber":t=>t.cosh()})}),pU="cot",H1e=["typed","BigNumber"],W1e=ae(pU,H1e,n=>{var{typed:e,BigNumber:t}=n,r=Zg({typed:e});return e(pU,{number:sK,Complex:i=>i.cot(),BigNumber:i=>new t(1).div(i.tan())},r)}),mU="coth",j1e=["typed","BigNumber"],G1e=ae(mU,j1e,n=>{var{typed:e,BigNumber:t}=n;return e(mU,{number:aK,Complex:r=>r.coth(),BigNumber:r=>new t(1).div(r.tanh())})}),gU="csc",q1e=["typed","BigNumber"],X1e=ae(gU,q1e,n=>{var{typed:e,BigNumber:t}=n,r=Zg({typed:e});return e(gU,{number:lK,Complex:i=>i.csc(),BigNumber:i=>new t(1).div(i.sin())},r)}),vU="csch",Y1e=["typed","BigNumber"],K1e=ae(vU,Y1e,n=>{var{typed:e,BigNumber:t}=n;return e(vU,{number:uK,Complex:r=>r.csch(),BigNumber:r=>new t(1).div(r.sinh())})}),yU="sec",Z1e=["typed","BigNumber"],J1e=ae(yU,Z1e,n=>{var{typed:e,BigNumber:t}=n,r=Zg({typed:e});return e(yU,{number:cK,Complex:i=>i.sec(),BigNumber:i=>new t(1).div(i.cos())},r)}),xU="sech",Q1e=["typed","BigNumber"],exe=ae(xU,Q1e,n=>{var{typed:e,BigNumber:t}=n;return e(xU,{number:fK,Complex:r=>r.sech(),BigNumber:r=>new t(1).div(r.cosh())})}),bU="sin",txe=["typed"],nxe=ae(bU,txe,n=>{var{typed:e}=n,t=Zg({typed:e});return e(bU,{number:Math.sin,"Complex | BigNumber":r=>r.sin()},t)}),wU="sinh",rxe=["typed"],ixe=ae(wU,rxe,n=>{var{typed:e}=n;return e(wU,{number:dK,"Complex | BigNumber":t=>t.sinh()})}),SU="tan",oxe=["typed"],sxe=ae(SU,oxe,n=>{var{typed:e}=n,t=Zg({typed:e});return e(SU,{number:Math.tan,"Complex | BigNumber":r=>r.tan()},t)}),axe="tanh",lxe=["typed"],uxe=ae(axe,lxe,n=>{var{typed:e}=n;return e("tanh",{number:Vfe,"Complex | BigNumber":t=>t.tanh()})}),_U="setCartesian",cxe=["typed","size","subset","compareNatural","Index","DenseMatrix"],fxe=ae(_U,cxe,n=>{var{typed:e,size:t,subset:r,compareNatural:i,Index:o,DenseMatrix:s}=n;return e(_U,{"Array | Matrix, Array | Matrix":function(l,u){var c=[];if(r(t(l),new o(0))!==0&&r(t(u),new o(0))!==0){var f=Cn(Array.isArray(l)?l:l.toArray()).sort(i),d=Cn(Array.isArray(u)?u:u.toArray()).sort(i);c=[];for(var h=0;h<f.length;h++)for(var m=0;m<d.length;m++)c.push([f[h],d[m]])}return Array.isArray(l)&&Array.isArray(u)?c:new s(c)}})}),EU="setDifference",dxe=["typed","size","subset","compareNatural","Index","DenseMatrix"],hxe=ae(EU,dxe,n=>{var{typed:e,size:t,subset:r,compareNatural:i,Index:o,DenseMatrix:s}=n;return e(EU,{"Array | Matrix, Array | Matrix":function(l,u){var c;if(r(t(l),new o(0))===0)c=[];else{if(r(t(u),new o(0))===0)return Cn(l.toArray());var f=yg(Cn(Array.isArray(l)?l:l.toArray()).sort(i)),d=yg(Cn(Array.isArray(u)?u:u.toArray()).sort(i));c=[];for(var h,m=0;m<f.length;m++){h=!1;for(var g=0;g<d.length;g++)if(i(f[m].value,d[g].value)===0&&f[m].identifier===d[g].identifier){h=!0;break}h||c.push(f[m])}}return Array.isArray(l)&&Array.isArray(u)?mE(c):new s(mE(c))}})}),MU="setDistinct",pxe=["typed","size","subset","compareNatural","Index","DenseMatrix"],mxe=ae(MU,pxe,n=>{var{typed:e,size:t,subset:r,compareNatural:i,Index:o,DenseMatrix:s}=n;return e(MU,{"Array | Matrix":function(l){var u;if(r(t(l),new o(0))===0)u=[];else{var c=Cn(Array.isArray(l)?l:l.toArray()).sort(i);u=[],u.push(c[0]);for(var f=1;f<c.length;f++)i(c[f],c[f-1])!==0&&u.push(c[f])}return Array.isArray(l)?u:new s(u)}})}),CU="setIntersect",gxe=["typed","size","subset","compareNatural","Index","DenseMatrix"],vxe=ae(CU,gxe,n=>{var{typed:e,size:t,subset:r,compareNatural:i,Index:o,DenseMatrix:s}=n;return e(CU,{"Array | Matrix, Array | Matrix":function(l,u){var c;if(r(t(l),new o(0))===0||r(t(u),new o(0))===0)c=[];else{var f=yg(Cn(Array.isArray(l)?l:l.toArray()).sort(i)),d=yg(Cn(Array.isArray(u)?u:u.toArray()).sort(i));c=[];for(var h=0;h<f.length;h++)for(var m=0;m<d.length;m++)if(i(f[h].value,d[m].value)===0&&f[h].identifier===d[m].identifier){c.push(f[h]);break}}return Array.isArray(l)&&Array.isArray(u)?mE(c):new s(mE(c))}})}),AU="setIsSubset",yxe=["typed","size","subset","compareNatural","Index"],xxe=ae(AU,yxe,n=>{var{typed:e,size:t,subset:r,compareNatural:i,Index:o}=n;return e(AU,{"Array | Matrix, Array | Matrix":function(a,l){if(r(t(a),new o(0))===0)return!0;if(r(t(l),new o(0))===0)return!1;for(var u=yg(Cn(Array.isArray(a)?a:a.toArray()).sort(i)),c=yg(Cn(Array.isArray(l)?l:l.toArray()).sort(i)),f,d=0;d<u.length;d++){f=!1;for(var h=0;h<c.length;h++)if(i(u[d].value,c[h].value)===0&&u[d].identifier===c[h].identifier){f=!0;break}if(f===!1)return!1}return!0}})}),TU="setMultiplicity",bxe=["typed","size","subset","compareNatural","Index"],wxe=ae(TU,bxe,n=>{var{typed:e,size:t,subset:r,compareNatural:i,Index:o}=n;return e(TU,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(a,l){if(r(t(l),new o(0))===0)return 0;for(var u=Cn(Array.isArray(l)?l:l.toArray()),c=0,f=0;f<u.length;f++)i(u[f],a)===0&&c++;return c}})}),DU="setPowerset",Sxe=["typed","size","subset","compareNatural","Index"],_xe=ae(DU,Sxe,n=>{var{typed:e,size:t,subset:r,compareNatural:i,Index:o}=n;return e(DU,{"Array | Matrix":function(u){if(r(t(u),new o(0))===0)return[];for(var c=Cn(Array.isArray(u)?u:u.toArray()).sort(i),f=[],d=0;d.toString(2).length<=c.length;)f.push(s(c,d.toString(2).split("").reverse())),d++;return a(f)}});function s(l,u){for(var c=[],f=0;f<u.length;f++)u[f]==="1"&&c.push(l[f]);return c}function a(l){for(var u=[],c=l.length-1;c>0;c--)for(var f=0;f<c;f++)l[f].length>l[f+1].length&&(u=l[f],l[f]=l[f+1],l[f+1]=u);return l}}),NU="setSize",Exe=["typed","compareNatural"],Mxe=ae(NU,Exe,n=>{var{typed:e,compareNatural:t}=n;return e(NU,{"Array | Matrix":function(i){return Array.isArray(i)?Cn(i).length:Cn(i.toArray()).length},"Array | Matrix, boolean":function(i,o){if(o===!1||i.length===0)return Array.isArray(i)?Cn(i).length:Cn(i.toArray()).length;for(var s=Cn(Array.isArray(i)?i:i.toArray()).sort(t),a=1,l=1;l<s.length;l++)t(s[l],s[l-1])!==0&&a++;return a}})}),PU="setSymDifference",Cxe=["typed","size","concat","subset","setDifference","Index"],Axe=ae(PU,Cxe,n=>{var{typed:e,size:t,concat:r,subset:i,setDifference:o,Index:s}=n;return e(PU,{"Array | Matrix, Array | Matrix":function(l,u){if(i(t(l),new s(0))===0)return Cn(u);if(i(t(u),new s(0))===0)return Cn(l);var c=Cn(l),f=Cn(u);return r(o(c,f),o(f,c))}})}),RU="setUnion",Txe=["typed","size","concat","subset","setIntersect","setSymDifference","Index"],Dxe=ae(RU,Txe,n=>{var{typed:e,size:t,concat:r,subset:i,setIntersect:o,setSymDifference:s,Index:a}=n;return e(RU,{"Array | Matrix, Array | Matrix":function(u,c){if(i(t(u),new a(0))===0)return Cn(c);if(i(t(c),new a(0))===0)return Cn(u);var f=Cn(u),d=Cn(c);return r(s(f,d),o(f,d))}})}),OU="add",Nxe=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],Pxe=ae(OU,Nxe,n=>{var{typed:e,matrix:t,addScalar:r,equalScalar:i,DenseMatrix:o,SparseMatrix:s,concat:a}=n,l=od({typed:e}),u=Fk({typed:e,equalScalar:i}),c=Qh({typed:e,DenseMatrix:o}),f=nr({typed:e,matrix:t,concat:a});return e(OU,{"any, any":r,"any, any, ...any":e.referToSelf(d=>(h,m,g)=>{for(var y=d(h,m),p=0;p<g.length;p++)y=d(y,g[p]);return y})},f({elop:r,DS:l,SS:u,Ss:c}))}),kU="hypot",Rxe=["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],Oxe=ae(kU,Rxe,n=>{var{typed:e,abs:t,addScalar:r,divideScalar:i,multiplyScalar:o,sqrt:s,smaller:a,isPositive:l}=n;return e(kU,{"... number | BigNumber":u,Array:u,Matrix:c=>u(Cn(c.toArray()))});function u(c){for(var f=0,d=0,h=0;h<c.length;h++){if(el(c[h]))throw new TypeError("Unexpected type of argument to hypot");var m=t(c[h]);a(d,m)?(f=o(f,o(i(d,m),i(d,m))),f=r(f,1),d=m):f=r(f,l(m)?o(i(m,d),i(m,d)):m)}return o(d,s(f))}}),IU="norm",kxe=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],Ixe=ae(IU,kxe,n=>{var{typed:e,abs:t,add:r,pow:i,conj:o,sqrt:s,multiply:a,equalScalar:l,larger:u,smaller:c,matrix:f,ctranspose:d,eigs:h}=n;return e(IU,{number:Math.abs,Complex:function(A){return A.abs()},BigNumber:function(A){return A.abs()},boolean:function(A){return Math.abs(A)},Array:function(A){return x(f(A),2)},Matrix:function(A){return x(A,2)},"Array, number | BigNumber | string":function(A,T){return x(f(A),T)},"Matrix, number | BigNumber | string":function(A,T){return x(A,T)}});function m(M){var A=0;return M.forEach(function(T){var C=t(T);u(C,A)&&(A=C)},!0),A}function g(M){var A;return M.forEach(function(T){var C=t(T);(!A||c(C,A))&&(A=C)},!0),A||0}function y(M,A){if(A===Number.POSITIVE_INFINITY||A==="inf")return m(M);if(A===Number.NEGATIVE_INFINITY||A==="-inf")return g(M);if(A==="fro")return x(M,2);if(typeof A=="number"&&!isNaN(A)){if(!l(A,0)){var T=0;return M.forEach(function(C){T=r(i(t(C),A),T)},!0),i(T,1/A)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function p(M){var A=0;return M.forEach(function(T,C){A=r(A,a(T,o(T)))}),t(s(A))}function w(M){var A=[],T=0;return M.forEach(function(C,D){var R=D[1],B=r(A[R]||0,t(C));u(B,T)&&(T=B),A[R]=B},!0),T}function b(M){var A=M.size();if(A[0]!==A[1])throw new RangeError("Invalid matrix dimensions");var T=d(M),C=a(T,M),D=h(C).values.toArray(),R=D[D.length-1];return t(s(R))}function v(M){var A=[],T=0;return M.forEach(function(C,D){var R=D[0],B=r(A[R]||0,t(C));u(B,T)&&(T=B),A[R]=B},!0),T}function S(M,A){if(A===1)return w(M);if(A===Number.POSITIVE_INFINITY||A==="inf")return v(M);if(A==="fro")return p(M);if(A===2)return b(M);throw new Error("Unsupported parameter value "+A)}function x(M,A){var T=M.size();if(T.length===1)return y(M,A);if(T.length===2){if(T[0]&&T[1])return S(M,A);throw new RangeError("Invalid matrix dimensions")}}}),LU="dot",Lxe=["typed","addScalar","multiplyScalar","conj","size"],Fxe=ae(LU,Lxe,n=>{var{typed:e,addScalar:t,multiplyScalar:r,conj:i,size:o}=n;return e(LU,{"Array | DenseMatrix, Array | DenseMatrix":a,"SparseMatrix, SparseMatrix":l});function s(c,f){var d=u(c),h=u(f),m,g;if(d.length===1)m=d[0];else if(d.length===2&&d[1]===1)m=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(h.length===1)g=h[0];else if(h.length===2&&h[1]===1)g=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(m!==g)throw new RangeError("Vectors must have equal length ("+m+" != "+g+")");if(m===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return m}function a(c,f){var d=s(c,f),h=Vt(c)?c._data:c,m=Vt(c)?c._datatype||c.getDataType():void 0,g=Vt(f)?f._data:f,y=Vt(f)?f._datatype||f.getDataType():void 0,p=u(c).length===2,w=u(f).length===2,b=t,v=r;if(m&&y&&m===y&&typeof m=="string"&&m!=="mixed"){var S=m;b=e.find(t,[S,S]),v=e.find(r,[S,S])}if(!p&&!w){for(var x=v(i(h[0]),g[0]),M=1;M<d;M++)x=b(x,v(i(h[M]),g[M]));return x}if(!p&&w){for(var A=v(i(h[0]),g[0][0]),T=1;T<d;T++)A=b(A,v(i(h[T]),g[T][0]));return A}if(p&&!w){for(var C=v(i(h[0][0]),g[0]),D=1;D<d;D++)C=b(C,v(i(h[D][0]),g[D]));return C}if(p&&w){for(var R=v(i(h[0][0]),g[0][0]),B=1;B<d;B++)R=b(R,v(i(h[B][0]),g[B][0]));return R}}function l(c,f){s(c,f);for(var d=c._index,h=c._values,m=f._index,g=f._values,y=0,p=t,w=r,b=0,v=0;b<d.length&&v<m.length;){var S=d[b],x=m[v];if(S<x){b++;continue}if(S>x){v++;continue}S===x&&(y=p(y,w(h[b],g[v])),b++,v++)}return y}function u(c){return Vt(c)?c.size():o(c)}}),Bxe="trace",zxe=["typed","matrix","add"],Uxe=ae(Bxe,zxe,n=>{var{typed:e,matrix:t,add:r}=n;return e("trace",{Array:function(a){return i(t(a))},SparseMatrix:o,DenseMatrix:i,any:Kt});function i(s){var a=s._size,l=s._data;switch(a.length){case 1:if(a[0]===1)return Kt(l[0]);throw new RangeError("Matrix must be square (size: "+fn(a)+")");case 2:{var u=a[0],c=a[1];if(u===c){for(var f=0,d=0;d<u;d++)f=r(f,l[d][d]);return f}else throw new RangeError("Matrix must be square (size: "+fn(a)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+fn(a)+")")}}function o(s){var a=s._values,l=s._index,u=s._ptr,c=s._size,f=c[0],d=c[1];if(f===d){var h=0;if(a.length>0)for(var m=0;m<d;m++)for(var g=u[m],y=u[m+1],p=g;p<y;p++){var w=l[p];if(w===m){h=r(h,a[p]);break}if(w>m)break}return h}throw new RangeError("Matrix must be square (size: "+fn(c)+")")}}),FU="index",Vxe=["typed","Index"],$xe=ae(FU,Vxe,n=>{var{typed:e,Index:t}=n;return e(FU,{"...number | string | BigNumber | Range | Array | Matrix":function(i){var o=i.map(function(a){return en(a)?a.toNumber():Tn(a)||Vt(a)?a.map(function(l){return en(l)?l.toNumber():l}):a}),s=new t;return t.apply(s,o),s}})}),FK=new Set(["end"]),Hxe="Node",Wxe=["mathWithTransform"],jxe=ae(Hxe,Wxe,n=>{var{mathWithTransform:e}=n;function t(i){for(var o of[...FK])if(i.has(o))throw new Error('Scope contains an illegal symbol, "'+o+'" is a reserved keyword')}class r{get type(){return"Node"}get isNode(){return!0}evaluate(o){return this.compile().evaluate(o)}compile(){var o=this._compile(e,{}),s={},a=null;function l(u){var c=qm(u);return t(c),o(c,s,a)}return{evaluate:l}}_compile(o,s){throw new Error("Method _compile must be implemented by type "+this.type)}forEach(o){throw new Error("Cannot run forEach on a Node interface")}map(o){throw new Error("Cannot run map on a Node interface")}_ifNode(o){if(!Vn(o))throw new TypeError("Callback function must return a Node");return o}traverse(o){o(this,null,null);function s(a,l){a.forEach(function(u,c,f){l(u,c,f),s(u,l)})}s(this,o)}transform(o){function s(a,l,u){var c=o(a,l,u);return c!==a?c:a.map(s)}return s(this,null,null)}filter(o){var s=[];return this.traverse(function(a,l,u){o(a,l,u)&&s.push(a)}),s}clone(){throw new Error("Cannot clone a Node interface")}cloneDeep(){return this.map(function(o){return o.cloneDeep()})}equals(o){return o?this.type===o.type&&Ph(this,o):!1}toString(o){var s=this._getCustomString(o);return typeof s<"u"?s:this._toString(o)}_toString(){throw new Error("_toString not implemented for "+this.type)}toJSON(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)}toHTML(o){var s=this._getCustomString(o);return typeof s<"u"?s:this._toHTML(o)}_toHTML(){throw new Error("_toHTML not implemented for "+this.type)}toTex(o){var s=this._getCustomString(o);return typeof s<"u"?s:this._toTex(o)}_toTex(o){throw new Error("_toTex not implemented for "+this.type)}_getCustomString(o){if(o&&typeof o=="object")switch(typeof o.handler){case"object":case"undefined":return;case"function":return o.handler(this,o);default:throw new TypeError("Object or function expected as callback")}}getIdentifier(){return this.type}getContent(){return this}}return r},{isClass:!0,isNode:!0});function Yo(n){return n&&n.isIndexError?new Ia(n.index+1,n.min+1,n.max!==void 0?n.max+1:void 0):n}function BK(n){var{subset:e}=n;return function(r,i){try{if(Array.isArray(r))return e(r,i);if(r&&typeof r.subset=="function")return r.subset(i);if(typeof r=="string")return e(r,i);if(typeof r=="object"){if(!i.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return zo(r,i.getObjectProperty())}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(o){throw Yo(o)}}}var jb="AccessorNode",Gxe=["subset","Node"],qxe=ae(jb,Gxe,n=>{var{subset:e,Node:t}=n,r=BK({subset:e});function i(s){return!(Lf(s)||Rs(s)||wn(s)||oc(s)||G1(s)||tu(s)||yi(s))}class o extends t{constructor(a,l){if(super(),!Vn(a))throw new TypeError('Node expected for parameter "object"');if(!Jh(l))throw new TypeError('IndexNode expected for parameter "index"');this.object=a,this.index=l}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return jb}get isAccessorNode(){return!0}_compile(a,l){var u=this.object._compile(a,l),c=this.index._compile(a,l);if(this.index.isObjectProperty()){var f=this.index.getObjectProperty();return function(h,m,g){return zo(u(h,m,g),f)}}else return function(h,m,g){var y=u(h,m,g),p=c(h,m,y);return r(y,p)}}forEach(a){a(this.object,"object",this),a(this.index,"index",this)}map(a){return new o(this._ifNode(a(this.object,"object",this)),this._ifNode(a(this.index,"index",this)))}clone(){return new o(this.object,this.index)}_toString(a){var l=this.object.toString(a);return i(this.object)&&(l="("+l+")"),l+this.index.toString(a)}_toHTML(a){var l=this.object.toHTML(a);return i(this.object)&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+this.index.toHTML(a)}_toTex(a){var l=this.object.toTex(a);return i(this.object)&&(l="\\left(' + object + '\\right)"),l+this.index.toTex(a)}toJSON(){return{mathjs:jb,object:this.object,index:this.index}}static fromJSON(a){return new o(a.object,a.index)}}return _r(o,"name",jb),o},{isClass:!0,isNode:!0}),Gb="ArrayNode",Xxe=["Node"],Yxe=ae(Gb,Xxe,n=>{var{Node:e}=n;class t extends e{constructor(i){if(super(),this.items=i||[],!Array.isArray(this.items)||!this.items.every(Vn))throw new TypeError("Array containing Nodes expected")}get type(){return Gb}get isArrayNode(){return!0}_compile(i,o){var s=Xu(this.items,function(u){return u._compile(i,o)}),a=i.config.matrix!=="Array";if(a){var l=i.matrix;return function(c,f,d){return l(Xu(s,function(h){return h(c,f,d)}))}}else return function(c,f,d){return Xu(s,function(h){return h(c,f,d)})}}forEach(i){for(var o=0;o<this.items.length;o++){var s=this.items[o];i(s,"items["+o+"]",this)}}map(i){for(var o=[],s=0;s<this.items.length;s++)o[s]=this._ifNode(i(this.items[s],"items["+s+"]",this));return new t(o)}clone(){return new t(this.items.slice(0))}_toString(i){var o=this.items.map(function(s){return s.toString(i)});return"["+o.join(", ")+"]"}toJSON(){return{mathjs:Gb,items:this.items}}static fromJSON(i){return new t(i.items)}_toHTML(i){var o=this.items.map(function(s){return s.toHTML(i)});return'<span class="math-parenthesis math-square-parenthesis">[</span>'+o.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(i){function o(s,a){var l=s.some(Rs)&&!s.every(Rs),u=a||l,c=u?"&":"\\\\",f=s.map(function(d){return d.items?o(d.items,!a):d.toTex(i)}).join(c);return l||!u||u&&!a?"\\begin{bmatrix}"+f+"\\end{bmatrix}":f}return o(this.items,!1)}}return _r(t,"name",Gb),t},{isClass:!0,isNode:!0});function Kxe(n){var{subset:e,matrix:t}=n;return function(i,o,s){try{if(Array.isArray(i)){var a=t(i).subset(o,s).valueOf();return a.forEach((l,u)=>{i[u]=l}),i}else{if(i&&typeof i.subset=="function")return i.subset(o,s);if(typeof i=="string")return e(i,o,s);if(typeof i=="object"){if(!o.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return pg(i,o.getObjectProperty(),s),i}else throw new TypeError("Cannot apply index: unsupported type of object")}}catch(l){throw Yo(l)}}}var Xa=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{op:"or",associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{op:"xor",associativity:"left",associativeWith:[]}},{"OperatorNode:and":{op:"and",associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{op:"|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{op:"^|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{op:"&",associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{op:"==",associativity:"left",associativeWith:[]},"OperatorNode:unequal":{op:"!=",associativity:"left",associativeWith:[]},"OperatorNode:smaller":{op:"<",associativity:"left",associativeWith:[]},"OperatorNode:larger":{op:">",associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{op:"<=",associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{op:">=",associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{op:"<<",associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{op:">>",associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{op:">>>",associativity:"left",associativeWith:[]}},{"OperatorNode:to":{op:"to",associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{op:"+",associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{op:"-",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{op:"*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{op:"/",associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{op:".*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{op:"./",associativity:"left",associativeWith:[]},"OperatorNode:mod":{op:"mod",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]}},{"OperatorNode:unaryPlus":{op:"+",associativity:"right"},"OperatorNode:unaryMinus":{op:"-",associativity:"right"},"OperatorNode:bitNot":{op:"~",associativity:"right"},"OperatorNode:not":{op:"not",associativity:"right"}},{"OperatorNode:pow":{op:"^",associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{op:".^",associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{op:"!",associativity:"left"}},{"OperatorNode:ctranspose":{op:"'",associativity:"left"}}];function qb(n,e){if(!e||e!=="auto")return n;for(var t=n;tu(t);)t=t.content;return t}function Xn(n,e,t,r){var i=n;e!=="keep"&&(i=n.getContent());for(var o=i.getIdentifier(),s=null,a=0;a<Xa.length;a++)if(o in Xa[a]){s=a;break}if(o==="OperatorNode:multiply"&&i.implicit&&t!=="show"){var l=qb(i.args[0],e);!(wn(l)&&r&&r.getIdentifier()==="OperatorNode:divide"&&SN(qb(r.args[0],e)))&&!(l.getIdentifier()==="OperatorNode:divide"&&SN(qb(l.args[0],e))&&wn(qb(l.args[1])))&&(s+=1)}return s}function Yv(n,e){var t=n;e!=="keep"&&(t=n.getContent());var r=t.getIdentifier(),i=Xn(t,e);if(i===null)return null;var o=Xa[i][r];if(vt(o,"associativity")){if(o.associativity==="left")return"left";if(o.associativity==="right")return"right";throw Error("'"+r+"' has the invalid associativity '"+o.associativity+"'.")}return null}function gT(n,e,t){var r=t!=="keep"?n.getContent():n,i=t!=="keep"?n.getContent():e,o=r.getIdentifier(),s=i.getIdentifier(),a=Xn(r,t);if(a===null)return null;var l=Xa[a][o];if(vt(l,"associativeWith")&&l.associativeWith instanceof Array){for(var u=0;u<l.associativeWith.length;u++)if(l.associativeWith[u]===s)return!0;return!1}return null}function Zxe(n){var e="OperatorNode:"+n;for(var t of Xa)if(e in t)return t[e].op;return null}var Xb="AssignmentNode",Jxe=["subset","?matrix","Node"],Qxe=ae(Xb,Jxe,n=>{var{subset:e,matrix:t,Node:r}=n,i=BK({subset:e}),o=Kxe({subset:e,matrix:t});function s(l,u,c){u||(u="keep");var f=Xn(l,u,c),d=Xn(l.value,u,c);return u==="all"||d!==null&&d<=f}class a extends r{constructor(u,c,f){if(super(),this.object=u,this.index=f?c:null,this.value=f||c,!yi(u)&&!Lf(u))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(yi(u)&&u.name==="end")throw new Error('Cannot assign to symbol "end"');if(this.index&&!Jh(this.index))throw new TypeError('IndexNode expected as "index"');if(!Vn(this.value))throw new TypeError('Node expected as "value"')}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return Xb}get isAssignmentNode(){return!0}_compile(u,c){var f=this.object._compile(u,c),d=this.index?this.index._compile(u,c):null,h=this.value._compile(u,c),m=this.object.name;if(this.index)if(this.index.isObjectProperty()){var g=this.index.getObjectProperty();return function(v,S,x){var M=f(v,S,x),A=h(v,S,x);return pg(M,g,A),A}}else{if(yi(this.object))return function(v,S,x){var M=f(v,S,x),A=h(v,S,x),T=d(v,S,M);return v.set(m,o(M,T,A)),A};var y=this.object.object._compile(u,c);if(this.object.index.isObjectProperty()){var p=this.object.index.getObjectProperty();return function(v,S,x){var M=y(v,S,x),A=zo(M,p),T=d(v,S,A),C=h(v,S,x);return pg(M,p,o(A,T,C)),C}}else{var w=this.object.index._compile(u,c);return function(v,S,x){var M=y(v,S,x),A=w(v,S,M),T=i(M,A),C=d(v,S,T),D=h(v,S,x);return o(M,A,o(T,C,D)),D}}}else{if(!yi(this.object))throw new TypeError("SymbolNode expected as object");return function(v,S,x){var M=h(v,S,x);return v.set(m,M),M}}}forEach(u){u(this.object,"object",this),this.index&&u(this.index,"index",this),u(this.value,"value",this)}map(u){var c=this._ifNode(u(this.object,"object",this)),f=this.index?this._ifNode(u(this.index,"index",this)):null,d=this._ifNode(u(this.value,"value",this));return new a(c,f,d)}clone(){return new a(this.object,this.index,this.value)}_toString(u){var c=this.object.toString(u),f=this.index?this.index.toString(u):"",d=this.value.toString(u);return s(this,u&&u.parenthesis,u&&u.implicit)&&(d="("+d+")"),c+f+" = "+d}toJSON(){return{mathjs:Xb,object:this.object,index:this.index,value:this.value}}static fromJSON(u){return new a(u.object,u.index,u.value)}_toHTML(u){var c=this.object.toHTML(u),f=this.index?this.index.toHTML(u):"",d=this.value.toHTML(u);return s(this,u&&u.parenthesis,u&&u.implicit)&&(d='<span class="math-paranthesis math-round-parenthesis">(</span>'+d+'<span class="math-paranthesis math-round-parenthesis">)</span>'),c+f+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+d}_toTex(u){var c=this.object.toTex(u),f=this.index?this.index.toTex(u):"",d=this.value.toTex(u);return s(this,u&&u.parenthesis,u&&u.implicit)&&(d="\\left(".concat(d,"\\right)")),c+f+"="+d}}return _r(a,"name",Xb),a},{isClass:!0,isNode:!0}),Yb="BlockNode",ebe=["ResultSet","Node"],tbe=ae(Yb,ebe,n=>{var{ResultSet:e,Node:t}=n;class r extends t{constructor(o){if(super(),!Array.isArray(o))throw new Error("Array expected");this.blocks=o.map(function(s){var a=s&&s.node,l=s&&s.visible!==void 0?s.visible:!0;if(!Vn(a))throw new TypeError('Property "node" must be a Node');if(typeof l!="boolean")throw new TypeError('Property "visible" must be a boolean');return{node:a,visible:l}})}get type(){return Yb}get isBlockNode(){return!0}_compile(o,s){var a=Xu(this.blocks,function(l){return{evaluate:l.node._compile(o,s),visible:l.visible}});return function(u,c,f){var d=[];return s2(a,function(m){var g=m.evaluate(u,c,f);m.visible&&d.push(g)}),new e(d)}}forEach(o){for(var s=0;s<this.blocks.length;s++)o(this.blocks[s].node,"blocks["+s+"].node",this)}map(o){for(var s=[],a=0;a<this.blocks.length;a++){var l=this.blocks[a],u=this._ifNode(o(l.node,"blocks["+a+"].node",this));s[a]={node:u,visible:l.visible}}return new r(s)}clone(){var o=this.blocks.map(function(s){return{node:s.node,visible:s.visible}});return new r(o)}_toString(o){return this.blocks.map(function(s){return s.node.toString(o)+(s.visible?"":";")}).join(`
`)}toJSON(){return{mathjs:Yb,blocks:this.blocks}}static fromJSON(o){return new r(o.blocks)}_toHTML(o){return this.blocks.map(function(s){return s.node.toHTML(o)+(s.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')}_toTex(o){return this.blocks.map(function(s){return s.node.toTex(o)+(s.visible?"":";")}).join(`\\;\\;
`)}}return _r(r,"name",Yb),r},{isClass:!0,isNode:!0}),Kb="ConditionalNode",nbe=["Node"],rbe=ae(Kb,nbe,n=>{var{Node:e}=n;function t(i){if(typeof i=="number"||typeof i=="boolean"||typeof i=="string")return!!i;if(i){if(en(i))return!i.isZero();if(el(i))return!!(i.re||i.im);if(os(i))return!!i.value}if(i==null)return!1;throw new TypeError('Unsupported type of condition "'+Zn(i)+'"')}class r extends e{constructor(o,s,a){if(super(),!Vn(o))throw new TypeError("Parameter condition must be a Node");if(!Vn(s))throw new TypeError("Parameter trueExpr must be a Node");if(!Vn(a))throw new TypeError("Parameter falseExpr must be a Node");this.condition=o,this.trueExpr=s,this.falseExpr=a}get type(){return Kb}get isConditionalNode(){return!0}_compile(o,s){var a=this.condition._compile(o,s),l=this.trueExpr._compile(o,s),u=this.falseExpr._compile(o,s);return function(f,d,h){return t(a(f,d,h))?l(f,d,h):u(f,d,h)}}forEach(o){o(this.condition,"condition",this),o(this.trueExpr,"trueExpr",this),o(this.falseExpr,"falseExpr",this)}map(o){return new r(this._ifNode(o(this.condition,"condition",this)),this._ifNode(o(this.trueExpr,"trueExpr",this)),this._ifNode(o(this.falseExpr,"falseExpr",this)))}clone(){return new r(this.condition,this.trueExpr,this.falseExpr)}_toString(o){var s=o&&o.parenthesis?o.parenthesis:"keep",a=Xn(this,s,o&&o.implicit),l=this.condition.toString(o),u=Xn(this.condition,s,o&&o.implicit);(s==="all"||this.condition.type==="OperatorNode"||u!==null&&u<=a)&&(l="("+l+")");var c=this.trueExpr.toString(o),f=Xn(this.trueExpr,s,o&&o.implicit);(s==="all"||this.trueExpr.type==="OperatorNode"||f!==null&&f<=a)&&(c="("+c+")");var d=this.falseExpr.toString(o),h=Xn(this.falseExpr,s,o&&o.implicit);return(s==="all"||this.falseExpr.type==="OperatorNode"||h!==null&&h<=a)&&(d="("+d+")"),l+" ? "+c+" : "+d}toJSON(){return{mathjs:Kb,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}static fromJSON(o){return new r(o.condition,o.trueExpr,o.falseExpr)}_toHTML(o){var s=o&&o.parenthesis?o.parenthesis:"keep",a=Xn(this,s,o&&o.implicit),l=this.condition.toHTML(o),u=Xn(this.condition,s,o&&o.implicit);(s==="all"||this.condition.type==="OperatorNode"||u!==null&&u<=a)&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>');var c=this.trueExpr.toHTML(o),f=Xn(this.trueExpr,s,o&&o.implicit);(s==="all"||this.trueExpr.type==="OperatorNode"||f!==null&&f<=a)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>');var d=this.falseExpr.toHTML(o),h=Xn(this.falseExpr,s,o&&o.implicit);return(s==="all"||this.falseExpr.type==="OperatorNode"||h!==null&&h<=a)&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+'<span class="math-operator math-conditional-operator">?</span>'+c+'<span class="math-operator math-conditional-operator">:</span>'+d}_toTex(o){return"\\begin{cases} {"+this.trueExpr.toTex(o)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(o)+"}\\\\{"+this.falseExpr.toTex(o)+"}, &\\quad{\\text{otherwise}}\\end{cases}"}}return _r(r,"name",Kb),r},{isClass:!0,isNode:!0}),kN=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ibe={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},obe={"":"\\--","":"\\---"," ":"~","	":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},sbe=function(e,t){return kN({},e,t)},abe=function(n){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.preserveFormatting,r=t===void 0?!1:t,i=e.escapeMapFn,o=i===void 0?sbe:i,s=String(n),a="",l=o(kN({},ibe),r?kN({},obe):{}),u=Object.keys(l),c=function(){var d=!1;u.forEach(function(h,m){d||s.length>=h.length&&s.slice(0,h.length)===h&&(a+=l[u[m]],s=s.slice(h.length,s.length),d=!0)}),d||(a+=s.slice(0,1),s=s.slice(1,s.length))};s;)c();return a};const lbe=ll(abe);var IN={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},En={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},BU={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(En.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(En.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(En.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(En.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(En.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(En.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(En.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : $y^{args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(En.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(En.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(En.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(En.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(En.bitAnd,"${args[1]}\\right)")},bitNot:{1:En.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(En.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(En.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(En.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(En.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(En.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(En.and,"${args[1]}\\right)")},not:{1:En.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(En.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(En.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(En.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},pinv:{1:"\\left(${args[0]}\\right)^{+}"},sqrtm:{1:"{${args[0]}}".concat(En.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(En.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(En.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},lgamma:{1:"\\ln\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(En.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(En.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(En.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(En.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(En.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(En.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(En.to,"${args[1]}\\right)")},numeric:function(e,t){return e.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(IN.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},ube="\\mathrm{${name}}\\left(${args}\\right)",zU={deg:"^\\circ"};function LN(n){return lbe(n,{preserveFormatting:!0})}function zK(n,e){return e=typeof e>"u"?!1:e,e?vt(zU,n)?zU[n]:"\\mathrm{"+LN(n)+"}":vt(IN,n)?IN[n]:LN(n)}var Zb="ConstantNode",cbe=["Node"],fbe=ae(Zb,cbe,n=>{var{Node:e}=n;class t extends e{constructor(i){super(),this.value=i}get type(){return Zb}get isConstantNode(){return!0}_compile(i,o){var s=this.value;return function(){return s}}forEach(i){}map(i){return this.clone()}clone(){return new t(this.value)}_toString(i){return fn(this.value,i)}_toHTML(i){var o=this._toString(i);switch(Zn(this.value)){case"number":case"BigNumber":case"Fraction":return'<span class="math-number">'+o+"</span>";case"string":return'<span class="math-string">'+o+"</span>";case"boolean":return'<span class="math-boolean">'+o+"</span>";case"null":return'<span class="math-null-symbol">'+o+"</span>";case"undefined":return'<span class="math-undefined">'+o+"</span>";default:return'<span class="math-symbol">'+o+"</span>"}}toJSON(){return{mathjs:Zb,value:this.value}}static fromJSON(i){return new t(i.value)}_toTex(i){var o=this._toString(i),s=Zn(this.value);switch(s){case"string":return"\\mathtt{"+LN(o)+"}";case"number":case"BigNumber":{var a=s==="BigNumber"?this.value.isFinite():isFinite(this.value);if(!a)return this.value.valueOf()<0?"-\\infty":"\\infty";var l=o.toLowerCase().indexOf("e");return l!==-1?o.substring(0,l)+"\\cdot10^{"+o.substring(l+1)+"}":o}case"Fraction":return this.value.toLatex();default:return o}}}return _r(t,"name",Zb),t},{isClass:!0,isNode:!0}),Jb="FunctionAssignmentNode",dbe=["typed","Node"],hbe=ae(Jb,dbe,n=>{var{typed:e,Node:t}=n;function r(o,s,a){var l=Xn(o,s,a),u=Xn(o.expr,s,a);return s==="all"||u!==null&&u<=l}class i extends t{constructor(s,a,l){if(super(),typeof s!="string")throw new TypeError('String expected for parameter "name"');if(!Array.isArray(a))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!Vn(l))throw new TypeError('Node expected for parameter "expr"');if(FK.has(s))throw new Error('Illegal function name, "'+s+'" is a reserved keyword');var u=new Set;for(var c of a){var f=typeof c=="string"?c:c.name;if(u.has(f))throw new Error('Duplicate parameter name "'.concat(f,'"'));u.add(f)}this.name=s,this.params=a.map(function(d){return d&&d.name||d}),this.types=a.map(function(d){return d&&d.type||"any"}),this.expr=l}get type(){return Jb}get isFunctionAssignmentNode(){return!0}_compile(s,a){var l=Object.create(a);s2(this.params,function(m){l[m]=!0});var u=this.expr._compile(s,l),c=this.name,f=this.params,d=zB(this.types,","),h=c+"("+zB(this.params,", ")+")";return function(g,y,p){var w={};w[d]=function(){for(var v=Object.create(y),S=0;S<f.length;S++)v[f[S]]=arguments[S];return u(g,v,p)};var b=e(c,w);return b.syntax=h,g.set(c,b),b}}forEach(s){s(this.expr,"expr",this)}map(s){var a=this._ifNode(s(this.expr,"expr",this));return new i(this.name,this.params.slice(0),a)}clone(){return new i(this.name,this.params.slice(0),this.expr)}_toString(s){var a=s&&s.parenthesis?s.parenthesis:"keep",l=this.expr.toString(s);return r(this,a,s&&s.implicit)&&(l="("+l+")"),this.name+"("+this.params.join(", ")+") = "+l}toJSON(){var s=this.types;return{mathjs:Jb,name:this.name,params:this.params.map(function(a,l){return{name:a,type:s[l]}}),expr:this.expr}}static fromJSON(s){return new i(s.name,s.params,s.expr)}_toHTML(s){for(var a=s&&s.parenthesis?s.parenthesis:"keep",l=[],u=0;u<this.params.length;u++)l.push('<span class="math-symbol math-parameter">'+pa(this.params[u])+"</span>");var c=this.expr.toHTML(s);return r(this,a,s&&s.implicit)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+pa(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+l.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+c}_toTex(s){var a=s&&s.parenthesis?s.parenthesis:"keep",l=this.expr.toTex(s);return r(this,a,s&&s.implicit)&&(l="\\left(".concat(l,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(zK).join(",")+"\\right)="+l}}return _r(i,"name",Jb),i},{isClass:!0,isNode:!0}),Qb="IndexNode",pbe=["Node","size"],mbe=ae(Qb,pbe,n=>{var{Node:e,size:t}=n;class r extends e{constructor(o,s){if(super(),this.dimensions=o,this.dotNotation=s||!1,!Array.isArray(o)||!o.every(Vn))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}get type(){return Qb}get isIndexNode(){return!0}_compile(o,s){var a=Xu(this.dimensions,function(u,c){var f=u.filter(m=>m.isSymbolNode&&m.name==="end").length>0;if(f){var d=Object.create(s);d.end=!0;var h=u._compile(o,d);return function(g,y,p){if(!Vt(p)&&!Tn(p)&&!Hi(p))throw new TypeError('Cannot resolve "end": context must be a Matrix, Array, or string but is '+Zn(p));var w=t(p).valueOf(),b=Object.create(y);return b.end=w[c],h(g,b,p)}}else return u._compile(o,s)}),l=zo(o,"index");return function(c,f,d){var h=Xu(a,function(m){return m(c,f,d)});return l(...h)}}forEach(o){for(var s=0;s<this.dimensions.length;s++)o(this.dimensions[s],"dimensions["+s+"]",this)}map(o){for(var s=[],a=0;a<this.dimensions.length;a++)s[a]=this._ifNode(o(this.dimensions[a],"dimensions["+a+"]",this));return new r(s,this.dotNotation)}clone(){return new r(this.dimensions.slice(0),this.dotNotation)}isObjectProperty(){return this.dimensions.length===1&&wn(this.dimensions[0])&&typeof this.dimensions[0].value=="string"}getObjectProperty(){return this.isObjectProperty()?this.dimensions[0].value:null}_toString(o){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"}toJSON(){return{mathjs:Qb,dimensions:this.dimensions,dotNotation:this.dotNotation}}static fromJSON(o){return new r(o.dimensions,o.dotNotation)}_toHTML(o){for(var s=[],a=0;a<this.dimensions.length;a++)s[a]=this.dimensions[a].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+pa(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+s.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(o){var s=this.dimensions.map(function(a){return a.toTex(o)});return this.dotNotation?"."+this.getObjectProperty():"_{"+s.join(",")+"}"}}return _r(r,"name",Qb),r},{isClass:!0,isNode:!0}),ew="ObjectNode",gbe=["Node"],vbe=ae(ew,gbe,n=>{var{Node:e}=n;class t extends e{constructor(i){if(super(),this.properties=i||{},i&&(typeof i!="object"||!Object.keys(i).every(function(o){return Vn(i[o])})))throw new TypeError("Object containing Nodes expected")}get type(){return ew}get isObjectNode(){return!0}_compile(i,o){var s={};for(var a in this.properties)if(vt(this.properties,a)){var l=Tm(a),u=JSON.parse(l),c=zo(this.properties,a);s[u]=c._compile(i,o)}return function(d,h,m){var g={};for(var y in s)vt(s,y)&&(g[y]=s[y](d,h,m));return g}}forEach(i){for(var o in this.properties)vt(this.properties,o)&&i(this.properties[o],"properties["+Tm(o)+"]",this)}map(i){var o={};for(var s in this.properties)vt(this.properties,s)&&(o[s]=this._ifNode(i(this.properties[s],"properties["+Tm(s)+"]",this)));return new t(o)}clone(){var i={};for(var o in this.properties)vt(this.properties,o)&&(i[o]=this.properties[o]);return new t(i)}_toString(i){var o=[];for(var s in this.properties)vt(this.properties,s)&&o.push(Tm(s)+": "+this.properties[s].toString(i));return"{"+o.join(", ")+"}"}toJSON(){return{mathjs:ew,properties:this.properties}}static fromJSON(i){return new t(i.properties)}_toHTML(i){var o=[];for(var s in this.properties)vt(this.properties,s)&&o.push('<span class="math-symbol math-property">'+pa(s)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[s].toHTML(i));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+o.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'}_toTex(i){var o=[];for(var s in this.properties)vt(this.properties,s)&&o.push("\\mathbf{"+s+":} & "+this.properties[s].toTex(i)+"\\\\");var a="\\left\\{\\begin{array}{ll}"+o.join(`
`)+"\\end{array}\\right\\}";return a}}return _r(t,"name",ew),t},{isClass:!0,isNode:!0});function O0(n,e){return new YX(n,new n2(e),new Set(Object.keys(e)))}var tw="OperatorNode",ybe=["Node"],xbe=ae(tw,ybe,n=>{var{Node:e}=n;function t(o,s){var a=o;if(s==="auto")for(;tu(a);)a=a.content;return wn(a)?!0:Yr(a)?t(a.args[0],s):!1}function r(o,s,a,l,u){var c=Xn(o,s,a),f=Yv(o,s);if(s==="all"||l.length>2&&o.getIdentifier()!=="OperatorNode:add"&&o.getIdentifier()!=="OperatorNode:multiply")return l.map(function(C){switch(C.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});var d;switch(l.length){case 0:d=[];break;case 1:{var h=Xn(l[0],s,a,o);if(u&&h!==null){var m,g;if(s==="keep"?(m=l[0].getIdentifier(),g=o.getIdentifier()):(m=l[0].getContent().getIdentifier(),g=o.getContent().getIdentifier()),Xa[c][g].latexLeftParens===!1){d=[!1];break}if(Xa[h][m].latexParens===!1){d=[!1];break}}if(h===null){d=[!1];break}if(h<=c){d=[!0];break}d=[!1]}break;case 2:{var y,p=Xn(l[0],s,a,o),w=gT(o,l[0],s);p===null?y=!1:p===c&&f==="right"&&!w||p<c?y=!0:y=!1;var b,v=Xn(l[1],s,a,o),S=gT(o,l[1],s);if(v===null?b=!1:v===c&&f==="left"&&!S||v<c?b=!0:b=!1,u){var x,M,A;s==="keep"?(x=o.getIdentifier(),M=o.args[0].getIdentifier(),A=o.args[1].getIdentifier()):(x=o.getContent().getIdentifier(),M=o.args[0].getContent().getIdentifier(),A=o.args[1].getContent().getIdentifier()),p!==null&&(Xa[c][x].latexLeftParens===!1&&(y=!1),Xa[p][M].latexParens===!1&&(y=!1)),v!==null&&(Xa[c][x].latexRightParens===!1&&(b=!1),Xa[v][A].latexParens===!1&&(b=!1))}d=[y,b]}break;default:(o.getIdentifier()==="OperatorNode:add"||o.getIdentifier()==="OperatorNode:multiply")&&(d=l.map(function(C){var D=Xn(C,s,a,o),R=gT(o,C,s),B=Yv(C,s);return D===null?!1:c===D&&f===B&&!R?!0:D<c}));break}if(l.length>=2&&o.getIdentifier()==="OperatorNode:multiply"&&o.implicit&&s!=="all"&&a==="hide")for(var T=1;T<d.length;++T)t(l[T],s)&&!d[T-1]&&(s!=="keep"||!tu(l[T-1]))&&(d[T]=!0);return d}class i extends e{constructor(s,a,l,u,c){if(super(),typeof s!="string")throw new TypeError('string expected for parameter "op"');if(typeof a!="string")throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(l)||!l.every(Vn))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=u===!0,this.isPercentage=c===!0,this.op=s,this.fn=a,this.args=l||[]}get type(){return tw}get isOperatorNode(){return!0}_compile(s,a){if(typeof this.fn!="string"||!Pk(s,this.fn))throw s[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var l=zo(s,this.fn),u=Xu(this.args,function(m){return m._compile(s,a)});if(typeof l=="function"&&l.rawArgs===!0){var c=this.args;return function(g,y,p){return l(c,s,O0(g,y))}}else if(u.length===1){var f=u[0];return function(g,y,p){return l(f(g,y,p))}}else if(u.length===2){var d=u[0],h=u[1];return function(g,y,p){return l(d(g,y,p),h(g,y,p))}}else return function(g,y,p){return l.apply(null,Xu(u,function(w){return w(g,y,p)}))}}forEach(s){for(var a=0;a<this.args.length;a++)s(this.args[a],"args["+a+"]",this)}map(s){for(var a=[],l=0;l<this.args.length;l++)a[l]=this._ifNode(s(this.args[l],"args["+l+"]",this));return new i(this.op,this.fn,a,this.implicit,this.isPercentage)}clone(){return new i(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}isUnary(){return this.args.length===1}isBinary(){return this.args.length===2}_toString(s){var a=s&&s.parenthesis?s.parenthesis:"keep",l=s&&s.implicit?s.implicit:"hide",u=this.args,c=r(this,a,l,u,!1);if(u.length===1){var f=Yv(this,a),d=u[0].toString(s);c[0]&&(d="("+d+")");var h=/[a-zA-Z]+/.test(this.op);return f==="right"?this.op+(h?" ":"")+d:f==="left"?d+(h?" ":"")+this.op:d+this.op}else if(u.length===2){var m=u[0].toString(s),g=u[1].toString(s);return c[0]&&(m="("+m+")"),c[1]&&(g="("+g+")"),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?m+" "+g:m+" "+this.op+" "+g}else if(u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var y=u.map(function(p,w){return p=p.toString(s),c[w]&&(p="("+p+")"),p});return this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?y.join(" "):y.join(" "+this.op+" ")}else return this.fn+"("+this.args.join(", ")+")"}toJSON(){return{mathjs:tw,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}static fromJSON(s){return new i(s.op,s.fn,s.args,s.implicit,s.isPercentage)}_toHTML(s){var a=s&&s.parenthesis?s.parenthesis:"keep",l=s&&s.implicit?s.implicit:"hide",u=this.args,c=r(this,a,l,u,!1);if(u.length===1){var f=Yv(this,a),d=u[0].toHTML(s);return c[0]&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),f==="right"?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+pa(this.op)+"</span>"+d:d+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+pa(this.op)+"</span>"}else if(u.length===2){var h=u[0].toHTML(s),m=u[1].toHTML(s);return c[0]&&(h='<span class="math-parenthesis math-round-parenthesis">(</span>'+h+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c[1]&&(m='<span class="math-parenthesis math-round-parenthesis">(</span>'+m+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?h+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+m:h+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+pa(this.op)+"</span>"+m}else{var g=u.map(function(y,p){return y=y.toHTML(s),c[p]&&(y='<span class="math-parenthesis math-round-parenthesis">(</span>'+y+'<span class="math-parenthesis math-round-parenthesis">)</span>'),y});return u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")?this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?g.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):g.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+pa(this.op)+"</span>"):'<span class="math-function">'+pa(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+g.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}}_toTex(s){var a=s&&s.parenthesis?s.parenthesis:"keep",l=s&&s.implicit?s.implicit:"hide",u=this.args,c=r(this,a,l,u,!0),f=En[this.fn];if(f=typeof f>"u"?this.op:f,u.length===1){var d=Yv(this,a),h=u[0].toTex(s);return c[0]&&(h="\\left(".concat(h,"\\right)")),d==="right"?f+h:h+f}else if(u.length===2){var m=u[0],g=m.toTex(s);c[0]&&(g="\\left(".concat(g,"\\right)"));var y=u[1],p=y.toTex(s);c[1]&&(p="\\left(".concat(p,"\\right)"));var w;switch(a==="keep"?w=m.getIdentifier():w=m.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return f+"{"+g+"}{"+p+"}";case"OperatorNode:pow":switch(g="{"+g+"}",p="{"+p+"}",w){case"ConditionalNode":case"OperatorNode:divide":g="\\left(".concat(g,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&l==="hide")return g+"~"+p}return g+f+p}else if(u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var b=u.map(function(v,S){return v=v.toTex(s),c[S]&&(v="\\left(".concat(v,"\\right)")),v});return this.getIdentifier()==="OperatorNode:multiply"&&this.implicit&&l==="hide"?b.join("~"):b.join(f)}else return"\\mathrm{"+this.fn+"}\\left("+u.map(function(v){return v.toTex(s)}).join(",")+"\\right)"}getIdentifier(){return this.type+":"+this.fn}}return _r(i,"name",tw),i},{isClass:!0,isNode:!0}),nw="ParenthesisNode",bbe=["Node"],wbe=ae(nw,bbe,n=>{var{Node:e}=n;class t extends e{constructor(i){if(super(),!Vn(i))throw new TypeError('Node expected for parameter "content"');this.content=i}get type(){return nw}get isParenthesisNode(){return!0}_compile(i,o){return this.content._compile(i,o)}getContent(){return this.content.getContent()}forEach(i){i(this.content,"content",this)}map(i){var o=i(this.content,"content",this);return new t(o)}clone(){return new t(this.content)}_toString(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"("+this.content.toString(i)+")":this.content.toString(i)}toJSON(){return{mathjs:nw,content:this.content}}static fromJSON(i){return new t(i.content)}_toHTML(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(i)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(i)}_toTex(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"\\left(".concat(this.content.toTex(i),"\\right)"):this.content.toTex(i)}}return _r(t,"name",nw),t},{isClass:!0,isNode:!0}),rw="RangeNode",Sbe=["Node"],_be=ae(rw,Sbe,n=>{var{Node:e}=n;function t(i,o,s){var a=Xn(i,o,s),l={},u=Xn(i.start,o,s);if(l.start=u!==null&&u<=a||o==="all",i.step){var c=Xn(i.step,o,s);l.step=c!==null&&c<=a||o==="all"}var f=Xn(i.end,o,s);return l.end=f!==null&&f<=a||o==="all",l}class r extends e{constructor(o,s,a){if(super(),!Vn(o))throw new TypeError("Node expected");if(!Vn(s))throw new TypeError("Node expected");if(a&&!Vn(a))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=o,this.end=s,this.step=a||null}get type(){return rw}get isRangeNode(){return!0}needsEnd(){var o=this.filter(function(s){return yi(s)&&s.name==="end"});return o.length>0}_compile(o,s){var a=o.range,l=this.start._compile(o,s),u=this.end._compile(o,s);if(this.step){var c=this.step._compile(o,s);return function(d,h,m){return a(l(d,h,m),u(d,h,m),c(d,h,m))}}else return function(d,h,m){return a(l(d,h,m),u(d,h,m))}}forEach(o){o(this.start,"start",this),o(this.end,"end",this),this.step&&o(this.step,"step",this)}map(o){return new r(this._ifNode(o(this.start,"start",this)),this._ifNode(o(this.end,"end",this)),this.step&&this._ifNode(o(this.step,"step",this)))}clone(){return new r(this.start,this.end,this.step&&this.step)}_toString(o){var s=o&&o.parenthesis?o.parenthesis:"keep",a=t(this,s,o&&o.implicit),l,u=this.start.toString(o);if(a.start&&(u="("+u+")"),l=u,this.step){var c=this.step.toString(o);a.step&&(c="("+c+")"),l+=":"+c}var f=this.end.toString(o);return a.end&&(f="("+f+")"),l+=":"+f,l}toJSON(){return{mathjs:rw,start:this.start,end:this.end,step:this.step}}static fromJSON(o){return new r(o.start,o.end,o.step)}_toHTML(o){var s=o&&o.parenthesis?o.parenthesis:"keep",a=t(this,s,o&&o.implicit),l,u=this.start.toHTML(o);if(a.start&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l=u,this.step){var c=this.step.toHTML(o);a.step&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+='<span class="math-operator math-range-operator">:</span>'+c}var f=this.end.toHTML(o);return a.end&&(f='<span class="math-parenthesis math-round-parenthesis">(</span>'+f+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+='<span class="math-operator math-range-operator">:</span>'+f,l}_toTex(o){var s=o&&o.parenthesis?o.parenthesis:"keep",a=t(this,s,o&&o.implicit),l=this.start.toTex(o);if(a.start&&(l="\\left(".concat(l,"\\right)")),this.step){var u=this.step.toTex(o);a.step&&(u="\\left(".concat(u,"\\right)")),l+=":"+u}var c=this.end.toTex(o);return a.end&&(c="\\left(".concat(c,"\\right)")),l+=":"+c,l}}return _r(r,"name",rw),r},{isClass:!0,isNode:!0}),iw="RelationalNode",Ebe=["Node"],Mbe=ae(iw,Ebe,n=>{var{Node:e}=n,t={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="};class r extends e{constructor(o,s){if(super(),!Array.isArray(o))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(s))throw new TypeError("Parameter params must be an array");if(o.length!==s.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=o,this.params=s}get type(){return iw}get isRelationalNode(){return!0}_compile(o,s){var a=this,l=this.params.map(u=>u._compile(o,s));return function(c,f,d){for(var h,m=l[0](c,f,d),g=0;g<a.conditionals.length;g++){h=m,m=l[g+1](c,f,d);var y=zo(o,a.conditionals[g]);if(!y(h,m))return!1}return!0}}forEach(o){this.params.forEach((s,a)=>o(s,"params["+a+"]",this),this)}map(o){return new r(this.conditionals.slice(),this.params.map((s,a)=>this._ifNode(o(s,"params["+a+"]",this)),this))}clone(){return new r(this.conditionals,this.params)}_toString(o){for(var s=o&&o.parenthesis?o.parenthesis:"keep",a=Xn(this,s,o&&o.implicit),l=this.params.map(function(f,d){var h=Xn(f,s,o&&o.implicit);return s==="all"||h!==null&&h<=a?"("+f.toString(o)+")":f.toString(o)}),u=l[0],c=0;c<this.conditionals.length;c++)u+=" "+t[this.conditionals[c]],u+=" "+l[c+1];return u}toJSON(){return{mathjs:iw,conditionals:this.conditionals,params:this.params}}static fromJSON(o){return new r(o.conditionals,o.params)}_toHTML(o){for(var s=o&&o.parenthesis?o.parenthesis:"keep",a=Xn(this,s,o&&o.implicit),l=this.params.map(function(f,d){var h=Xn(f,s,o&&o.implicit);return s==="all"||h!==null&&h<=a?'<span class="math-parenthesis math-round-parenthesis">(</span>'+f.toHTML(o)+'<span class="math-parenthesis math-round-parenthesis">)</span>':f.toHTML(o)}),u=l[0],c=0;c<this.conditionals.length;c++)u+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+pa(t[this.conditionals[c]])+"</span>"+l[c+1];return u}_toTex(o){for(var s=o&&o.parenthesis?o.parenthesis:"keep",a=Xn(this,s,o&&o.implicit),l=this.params.map(function(f,d){var h=Xn(f,s,o&&o.implicit);return s==="all"||h!==null&&h<=a?"\\left("+f.toTex(o)+"\right)":f.toTex(o)}),u=l[0],c=0;c<this.conditionals.length;c++)u+=En[this.conditionals[c]]+l[c+1];return u}}return _r(r,"name",iw),r},{isClass:!0,isNode:!0}),Cbe="SymbolNode",Abe=["math","?Unit","Node"],Tbe=ae(Cbe,Abe,n=>{var{math:e,Unit:t,Node:r}=n;function i(s){return t?t.isValuelessUnit(s):!1}class o extends r{constructor(a){if(super(),typeof a!="string")throw new TypeError('String expected for parameter "name"');this.name=a}get type(){return"SymbolNode"}get isSymbolNode(){return!0}_compile(a,l){var u=this.name;if(l[u]===!0)return function(f,d,h){return zo(d,u)};if(u in a)return function(f,d,h){return f.has(u)?f.get(u):zo(a,u)};var c=i(u);return function(f,d,h){return f.has(u)?f.get(u):c?new t(null,u):o.onUndefinedSymbol(u)}}forEach(a){}map(a){return this.clone()}static onUndefinedSymbol(a){throw new Error("Undefined symbol "+a)}clone(){return new o(this.name)}_toString(a){return this.name}_toHTML(a){var l=pa(this.name);return l==="true"||l==="false"?'<span class="math-symbol math-boolean">'+l+"</span>":l==="i"?'<span class="math-symbol math-imaginary-symbol">'+l+"</span>":l==="Infinity"?'<span class="math-symbol math-infinity-symbol">'+l+"</span>":l==="NaN"?'<span class="math-symbol math-nan-symbol">'+l+"</span>":l==="null"?'<span class="math-symbol math-null-symbol">'+l+"</span>":l==="undefined"?'<span class="math-symbol math-undefined-symbol">'+l+"</span>":'<span class="math-symbol">'+l+"</span>"}toJSON(){return{mathjs:"SymbolNode",name:this.name}}static fromJSON(a){return new o(a.name)}_toTex(a){var l=!1;typeof e[this.name]>"u"&&i(this.name)&&(l=!0);var u=zK(this.name,l);return u[0]==="\\"?u:" "+u}}return o},{isClass:!0,isNode:!0}),ow="FunctionNode",Dbe=["math","Node","SymbolNode"],Nbe=ae(ow,Dbe,n=>{var e,{math:t,Node:r,SymbolNode:i}=n,o=l=>fn(l,{truncate:78});function s(l,u,c){for(var f="",d=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,h=0,m;(m=d.exec(l))!==null;)if(f+=l.substring(h,m.index),h=m.index,m[0]==="$$")f+="$",h++;else{h+=m[0].length;var g=u[m[1]];if(!g)throw new ReferenceError("Template: Property "+m[1]+" does not exist.");if(m[2]===void 0)switch(typeof g){case"string":f+=g;break;case"object":if(Vn(g))f+=g.toTex(c);else if(Array.isArray(g))f+=g.map(function(y,p){if(Vn(y))return y.toTex(c);throw new TypeError("Template: "+m[1]+"["+p+"] is not a Node.")}).join(",");else throw new TypeError("Template: "+m[1]+" has to be a Node, String or array of Nodes");break;default:throw new TypeError("Template: "+m[1]+" has to be a Node, String or array of Nodes")}else if(Vn(g[m[2]]&&g[m[2]]))f+=g[m[2]].toTex(c);else throw new TypeError("Template: "+m[1]+"["+m[2]+"] is not a Node.")}return f+=l.slice(h),f}class a extends r{constructor(u,c){if(super(),typeof u=="string"&&(u=new i(u)),!Vn(u))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(c)||!c.every(Vn))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=u,this.args=c||[]}get name(){return this.fn.name||""}get type(){return ow}get isFunctionNode(){return!0}_compile(u,c){var f=this.args.map(A=>A._compile(u,c));if(yi(this.fn)){var d=this.fn.name;if(c[d]){var p=this.args;return function(T,C,D){var R=zo(C,d);if(typeof R!="function")throw new TypeError("Argument '".concat(d,"' was not a function; received: ").concat(o(R)));if(R.rawArgs)return R(p,u,O0(T,C));var B=f.map(F=>F(T,C,D));return R.apply(R,B)}}else{var h=d in u?zo(u,d):void 0,m=typeof h=="function"&&h.rawArgs===!0,g=A=>{var T;if(A.has(d))T=A.get(d);else if(d in u)T=zo(u,d);else return a.onUndefinedFunction(d);if(typeof T=="function")return T;throw new TypeError("'".concat(d,`' is not a function; its value is:
  `).concat(o(T)))};if(m){var y=this.args;return function(T,C,D){var R=g(T);return R(y,u,O0(T,C))}}else switch(f.length){case 0:return function(T,C,D){var R=g(T);return R()};case 1:return function(T,C,D){var R=g(T),B=f[0];return R(B(T,C,D))};case 2:return function(T,C,D){var R=g(T),B=f[0],F=f[1];return R(B(T,C,D),F(T,C,D))};default:return function(T,C,D){var R=g(T),B=f.map(F=>F(T,C,D));return R(...B)}}}}else if(Lf(this.fn)&&Jh(this.fn.index)&&this.fn.index.isObjectProperty()){var w=this.fn.object._compile(u,c),b=this.fn.index.getObjectProperty(),v=this.args;return function(T,C,D){var R=w(T,C,D),B=Gfe(R,b);if(B!=null&&B.rawArgs)return B(v,u,O0(T,C));var F=f.map(U=>U(T,C,D));return B.apply(R,F)}}else{var S=this.fn.toString(),x=this.fn._compile(u,c),M=this.args;return function(T,C,D){var R=x(T,C,D);if(typeof R!="function")throw new TypeError("Expression '".concat(S,"' did not evaluate to a function; value is:")+`
  `.concat(o(R)));if(R.rawArgs)return R(M,u,O0(T,C));var B=f.map(F=>F(T,C,D));return R.apply(R,B)}}}forEach(u){u(this.fn,"fn",this);for(var c=0;c<this.args.length;c++)u(this.args[c],"args["+c+"]",this)}map(u){for(var c=this._ifNode(u(this.fn,"fn",this)),f=[],d=0;d<this.args.length;d++)f[d]=this._ifNode(u(this.args[d],"args["+d+"]",this));return new a(c,f)}clone(){return new a(this.fn,this.args.slice(0))}toString(u){var c,f=this.fn.toString(u);return u&&typeof u.handler=="object"&&vt(u.handler,f)&&(c=u.handler[f](this,u)),typeof c<"u"?c:super.toString(u)}_toString(u){var c=this.args.map(function(d){return d.toString(u)}),f=jg(this.fn)?"("+this.fn.toString(u)+")":this.fn.toString(u);return f+"("+c.join(", ")+")"}toJSON(){return{mathjs:ow,fn:this.fn,args:this.args}}_toHTML(u){var c=this.args.map(function(f){return f.toHTML(u)});return'<span class="math-function">'+pa(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+c.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}toTex(u){var c;return u&&typeof u.handler=="object"&&vt(u.handler,this.name)&&(c=u.handler[this.name](this,u)),typeof c<"u"?c:super.toTex(u)}_toTex(u){var c=this.args.map(function(h){return h.toTex(u)}),f;BU[this.name]&&(f=BU[this.name]),t[this.name]&&(typeof t[this.name].toTex=="function"||typeof t[this.name].toTex=="object"||typeof t[this.name].toTex=="string")&&(f=t[this.name].toTex);var d;switch(typeof f){case"function":d=f(this,u);break;case"string":d=s(f,this,u);break;case"object":switch(typeof f[c.length]){case"function":d=f[c.length](this,u);break;case"string":d=s(f[c.length],this,u);break}}return typeof d<"u"?d:s(ube,this,u)}getIdentifier(){return this.type+":"+this.name}}return e=a,_r(a,"name",ow),_r(a,"onUndefinedFunction",function(l){throw new Error("Undefined function "+l)}),_r(a,"fromJSON",function(l){return new e(l.fn,l.args)}),a},{isClass:!0,isNode:!0}),UU="parse",Pbe=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],Rbe=ae(UU,Pbe,n=>{var{typed:e,numeric:t,config:r,AccessorNode:i,ArrayNode:o,AssignmentNode:s,BlockNode:a,ConditionalNode:l,ConstantNode:u,FunctionAssignmentNode:c,FunctionNode:f,IndexNode:d,ObjectNode:h,OperatorNode:m,ParenthesisNode:g,RangeNode:y,RelationalNode:p,SymbolNode:w}=n,b=e(UU,{string:function(ce){return Z(ce,{})},"Array | Matrix":function(ce){return v(ce,{})},"string, Object":function(ce,Ne){var Ge=Ne.nodes!==void 0?Ne.nodes:{};return Z(ce,Ge)},"Array | Matrix, Object":v});function v($){var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ne=ce.nodes!==void 0?ce.nodes:{};return hn($,function(Ge){if(typeof Ge!="string")throw new TypeError("String expected");return Z(Ge,Ne)})}var S={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},x={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},M={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},A={true:!0,false:!1,null:null,undefined:void 0},T=["NaN","Infinity"],C={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function D(){return{extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:S.NULL,nestingLevel:0,conditionalLevel:null}}function R($,ce){return $.expression.substr($.index,ce)}function B($){return R($,1)}function F($){$.index++}function U($){return $.expression.charAt($.index-1)}function N($){return $.expression.charAt($.index+1)}function I($){for($.tokenType=S.NULL,$.token="",$.comment="";;){if(B($)==="#")for(;B($)!==`
`&&B($)!=="";)$.comment+=B($),F($);if(b.isWhitespace(B($),$.nestingLevel))F($);else break}if(B($)===""){$.tokenType=S.DELIMITER;return}if(B($)===`
`&&!$.nestingLevel){$.tokenType=S.DELIMITER,$.token=B($),F($);return}var ce=B($),Ne=R($,2),Ge=R($,3);if(Ge.length===3&&x[Ge]){$.tokenType=S.DELIMITER,$.token=Ge,F($),F($),F($);return}if(Ne.length===2&&x[Ne]){$.tokenType=S.DELIMITER,$.token=Ne,F($),F($);return}if(x[ce]){$.tokenType=S.DELIMITER,$.token=ce,F($);return}if(b.isDigitDot(ce)){$.tokenType=S.NUMBER;var de=R($,2);if(de==="0b"||de==="0o"||de==="0x"){for($.token+=B($),F($),$.token+=B($),F($);b.isHexDigit(B($));)$.token+=B($),F($);if(B($)===".")for($.token+=".",F($);b.isHexDigit(B($));)$.token+=B($),F($);else if(B($)==="i")for($.token+="i",F($);b.isDigit(B($));)$.token+=B($),F($);return}if(B($)==="."){if($.token+=B($),F($),!b.isDigit(B($))){$.tokenType=S.DELIMITER;return}}else{for(;b.isDigit(B($));)$.token+=B($),F($);b.isDecimalMark(B($),N($))&&($.token+=B($),F($))}for(;b.isDigit(B($));)$.token+=B($),F($);if(B($)==="E"||B($)==="e"){if(b.isDigit(N($))||N($)==="-"||N($)==="+"){if($.token+=B($),F($),(B($)==="+"||B($)==="-")&&($.token+=B($),F($)),!b.isDigit(B($)))throw Je($,'Digit expected, got "'+B($)+'"');for(;b.isDigit(B($));)$.token+=B($),F($);if(b.isDecimalMark(B($),N($)))throw Je($,'Digit expected, got "'+B($)+'"')}else if(N($)===".")throw F($),Je($,'Digit expected, got "'+B($)+'"')}return}if(b.isAlpha(B($),U($),N($))){for(;b.isAlpha(B($),U($),N($))||b.isDigit(B($));)$.token+=B($),F($);vt(M,$.token)?$.tokenType=S.DELIMITER:$.tokenType=S.SYMBOL;return}for($.tokenType=S.UNKNOWN;B($)!=="";)$.token+=B($),F($);throw Je($,'Syntax error in part "'+$.token+'"')}function V($){do I($);while($.token===`
`)}function L($){$.nestingLevel++}function X($){$.nestingLevel--}b.isAlpha=function(ce,Ne,Ge){return b.isValidLatinOrGreek(ce)||b.isValidMathSymbol(ce,Ge)||b.isValidMathSymbol(Ne,ce)},b.isValidLatinOrGreek=function(ce){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(ce)},b.isValidMathSymbol=function(ce,Ne){return/^[\uD835]$/.test(ce)&&/^[\uDC00-\uDFFF]$/.test(Ne)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(Ne)},b.isWhitespace=function(ce,Ne){return ce===" "||ce==="	"||ce===`
`&&Ne>0},b.isDecimalMark=function(ce,Ne){return ce==="."&&Ne!=="/"&&Ne!=="*"&&Ne!=="^"},b.isDigitDot=function(ce){return ce>="0"&&ce<="9"||ce==="."},b.isDigit=function(ce){return ce>="0"&&ce<="9"},b.isHexDigit=function(ce){return ce>="0"&&ce<="9"||ce>="a"&&ce<="f"||ce>="A"&&ce<="F"};function Z($,ce){var Ne=D();pt(Ne,{expression:$,extraNodes:ce}),I(Ne);var Ge=te(Ne);if(Ne.token!=="")throw Ne.tokenType===S.DELIMITER?Ee(Ne,"Unexpected operator "+Ne.token):Je(Ne,'Unexpected part "'+Ne.token+'"');return Ge}function te($){var ce,Ne=[],Ge;for($.token!==""&&$.token!==`
`&&$.token!==";"&&(ce=Y($),$.comment&&(ce.comment=$.comment));$.token===`
`||$.token===";";)Ne.length===0&&ce&&(Ge=$.token!==";",Ne.push({node:ce,visible:Ge})),I($),$.token!==`
`&&$.token!==";"&&$.token!==""&&(ce=Y($),$.comment&&(ce.comment=$.comment),Ge=$.token!==";",Ne.push({node:ce,visible:Ge}));return Ne.length>0?new a(Ne):(ce||(ce=new u(void 0),$.comment&&(ce.comment=$.comment)),ce)}function Y($){var ce,Ne,Ge,de,Ye=re($);if($.token==="="){if(yi(Ye))return ce=Ye.name,V($),Ge=Y($),new s(new w(ce),Ge);if(Lf(Ye))return V($),Ge=Y($),new s(Ye.object,Ye.index,Ge);if(oc(Ye)&&yi(Ye.fn)&&(de=!0,Ne=[],ce=Ye.name,Ye.args.forEach(function(W,ne){yi(W)?Ne[ne]=W.name:de=!1}),de))return V($),Ge=Y($),new c(ce,Ne,Ge);throw Je($,"Invalid left hand side of assignment operator =")}return Ye}function re($){for(var ce=fe($);$.token==="?";){var Ne=$.conditionalLevel;$.conditionalLevel=$.nestingLevel,V($);var Ge=ce,de=Y($);if($.token!==":")throw Je($,"False part of conditional expression expected");$.conditionalLevel=null,V($);var Ye=Y($);ce=new l(Ge,de,Ye),$.conditionalLevel=Ne}return ce}function fe($){for(var ce=ue($);$.token==="or";)V($),ce=new m("or","or",[ce,ue($)]);return ce}function ue($){for(var ce=ge($);$.token==="xor";)V($),ce=new m("xor","xor",[ce,ge($)]);return ce}function ge($){for(var ce=Se($);$.token==="and";)V($),ce=new m("and","and",[ce,Se($)]);return ce}function Se($){for(var ce=xe($);$.token==="|";)V($),ce=new m("|","bitOr",[ce,xe($)]);return ce}function xe($){for(var ce=De($);$.token==="^|";)V($),ce=new m("^|","bitXor",[ce,De($)]);return ce}function De($){for(var ce=Ae($);$.token==="&";)V($),ce=new m("&","bitAnd",[ce,Ae($)]);return ce}function Ae($){for(var ce=[ie($)],Ne=[],Ge={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};vt(Ge,$.token);){var de={name:$.token,fn:Ge[$.token]};Ne.push(de),V($),ce.push(ie($))}return ce.length===1?ce[0]:ce.length===2?new m(Ne[0].name,Ne[0].fn,ce):new p(Ne.map(Ye=>Ye.fn),ce)}function ie($){var ce,Ne,Ge,de;ce=Re($);for(var Ye={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};vt(Ye,$.token);)Ne=$.token,Ge=Ye[Ne],V($),de=[ce,Re($)],ce=new m(Ne,Ge,de);return ce}function Re($){var ce,Ne,Ge,de;ce=Pe($);for(var Ye={to:"to",in:"to"};vt(Ye,$.token);)Ne=$.token,Ge=Ye[Ne],V($),Ne==="in"&&$.token===""?ce=new m("*","multiply",[ce,new w("in")],!0):(de=[ce,Pe($)],ce=new m(Ne,Ge,de));return ce}function Pe($){var ce,Ne=[];if($.token===":"?ce=new u(1):ce=ee($),$.token===":"&&$.conditionalLevel!==$.nestingLevel){for(Ne.push(ce);$.token===":"&&Ne.length<3;)V($),$.token===")"||$.token==="]"||$.token===","||$.token===""?Ne.push(new w("end")):Ne.push(ee($));Ne.length===3?ce=new y(Ne[0],Ne[2],Ne[1]):ce=new y(Ne[0],Ne[1])}return ce}function ee($){var ce,Ne,Ge,de;ce=oe($);for(var Ye={"+":"add","-":"subtract"};vt(Ye,$.token);){Ne=$.token,Ge=Ye[Ne],V($);var W=oe($);W.isPercentage?de=[ce,new m("*","multiply",[ce,W])]:de=[ce,W],ce=new m(Ne,Ge,de)}return ce}function oe($){var ce,Ne,Ge,de;ce=Me($),Ne=ce;for(var Ye={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide"};vt(Ye,$.token);)Ge=$.token,de=Ye[Ge],V($),Ne=Me($),ce=new m(Ge,de,[ce,Ne]);return ce}function Me($){var ce,Ne;for(ce=se($),Ne=ce;$.tokenType===S.SYMBOL||$.token==="in"&&wn(ce)||$.tokenType===S.NUMBER&&!wn(Ne)&&(!Yr(Ne)||Ne.op==="!")||$.token==="(";)Ne=se($),ce=new m("*","multiply",[ce,Ne],!0);return ce}function se($){for(var ce=G($),Ne=ce,Ge=[];$.token==="/"&&SN(Ne);)if(Ge.push(pt({},$)),V($),$.tokenType===S.NUMBER)if(Ge.push(pt({},$)),V($),$.tokenType===S.SYMBOL||$.token==="(")pt($,Ge.pop()),Ge.pop(),Ne=G($),ce=new m("/","divide",[ce,Ne]);else{Ge.pop(),pt($,Ge.pop());break}else{pt($,Ge.pop());break}return ce}function G($){var ce,Ne,Ge,de;ce=j($);for(var Ye={"%":"mod",mod:"mod"};vt(Ye,$.token);)Ne=$.token,Ge=Ye[Ne],V($),Ne==="%"&&$.tokenType===S.DELIMITER&&$.token!=="("?ce=new m("/","divide",[ce,new u(100)],!1,!0):(de=[ce,j($)],ce=new m(Ne,Ge,de));return ce}function j($){var ce,Ne,Ge,de={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return vt(de,$.token)?(Ge=de[$.token],ce=$.token,V($),Ne=[j($)],new m(ce,Ge,Ne)):he($)}function he($){var ce,Ne,Ge,de;return ce=Ce($),($.token==="^"||$.token===".^")&&(Ne=$.token,Ge=Ne==="^"?"pow":"dotPow",V($),de=[ce,j($)],ce=new m(Ne,Ge,de)),ce}function Ce($){var ce,Ne,Ge,de;ce=q($);for(var Ye={"!":"factorial","'":"ctranspose"};vt(Ye,$.token);)Ne=$.token,Ge=Ye[Ne],I($),de=[ce],ce=new m(Ne,Ge,de),ce=ye($,ce);return ce}function q($){var ce=[];if($.tokenType===S.SYMBOL&&vt($.extraNodes,$.token)){var Ne=$.extraNodes[$.token];if(I($),$.token==="("){if(ce=[],L($),I($),$.token!==")")for(ce.push(Y($));$.token===",";)I($),ce.push(Y($));if($.token!==")")throw Je($,"Parenthesis ) expected");X($),I($)}return new Ne(ce)}return J($)}function J($){var ce,Ne;return $.tokenType===S.SYMBOL||$.tokenType===S.DELIMITER&&$.token in M?(Ne=$.token,I($),vt(A,Ne)?ce=new u(A[Ne]):T.includes(Ne)?ce=new u(t(Ne,"number")):ce=new w(Ne),ce=ye($,ce),ce):we($)}function ye($,ce,Ne){for(var Ge;($.token==="("||$.token==="["||$.token===".")&&!Ne;)if(Ge=[],$.token==="(")if(yi(ce)||Lf(ce)){if(L($),I($),$.token!==")")for(Ge.push(Y($));$.token===",";)I($),Ge.push(Y($));if($.token!==")")throw Je($,"Parenthesis ) expected");X($),I($),ce=new f(ce,Ge)}else return ce;else if($.token==="["){if(L($),I($),$.token!=="]")for(Ge.push(Y($));$.token===",";)I($),Ge.push(Y($));if($.token!=="]")throw Je($,"Parenthesis ] expected");X($),I($),ce=new i(ce,new d(Ge))}else{I($);var de=$.tokenType===S.SYMBOL||$.tokenType===S.DELIMITER&&$.token in M;if(!de)throw Je($,"Property name expected after dot");Ge.push(new u($.token)),I($);var Ye=!0;ce=new i(ce,new d(Ge,Ye))}return ce}function we($){var ce,Ne;return $.token==='"'||$.token==="'"?(Ne=ke($,$.token),ce=new u(Ne),ce=ye($,ce),ce):Fe($)}function ke($,ce){for(var Ne="";B($)!==""&&B($)!==ce;)if(B($)==="\\"){F($);var Ge=B($),de=C[Ge];if(de!==void 0)Ne+=de,$.index+=1;else if(Ge==="u"){var Ye=$.expression.slice($.index+1,$.index+5);if(/^[0-9A-Fa-f]{4}$/.test(Ye))Ne+=String.fromCharCode(parseInt(Ye,16)),$.index+=5;else throw Je($,"Invalid unicode character \\u".concat(Ye))}else throw Je($,"Bad escape character \\".concat(Ge))}else Ne+=B($),F($);if(I($),$.token!==ce)throw Je($,"End of string ".concat(ce," expected"));return I($),Ne}function Fe($){var ce,Ne,Ge,de;if($.token==="["){if(L($),I($),$.token!=="]"){var Ye=He($);if($.token===";"){for(Ge=1,Ne=[Ye];$.token===";";)I($),$.token!=="]"&&(Ne[Ge]=He($),Ge++);if($.token!=="]")throw Je($,"End of matrix ] expected");X($),I($),de=Ne[0].items.length;for(var W=1;W<Ge;W++)if(Ne[W].items.length!==de)throw Ee($,"Column dimensions mismatch ("+Ne[W].items.length+" !== "+de+")");ce=new o(Ne)}else{if($.token!=="]")throw Je($,"End of matrix ] expected");X($),I($),ce=Ye}}else X($),I($),ce=new o([]);return ye($,ce)}return Ie($)}function He($){for(var ce=[Y($)],Ne=1;$.token===",";)I($),$.token!=="]"&&$.token!==";"&&(ce[Ne]=Y($),Ne++);return new o(ce)}function Ie($){if($.token==="{"){L($);var ce,Ne={};do if(I($),$.token!=="}"){if($.token==='"'||$.token==="'")ce=ke($,$.token);else if($.tokenType===S.SYMBOL||$.tokenType===S.DELIMITER&&$.token in M)ce=$.token,I($);else throw Je($,"Symbol or string expected as object key");if($.token!==":")throw Je($,"Colon : expected after object key");I($),Ne[ce]=Y($)}while($.token===",");if($.token!=="}")throw Je($,"Comma , or bracket } expected after object value");X($),I($);var Ge=new h(Ne);return Ge=ye($,Ge),Ge}return Ze($)}function Ze($){var ce;return $.tokenType===S.NUMBER?(ce=$.token,I($),new u(t(ce,r.number))):qe($)}function qe($){var ce;if($.token==="("){if(L($),I($),ce=Y($),$.token!==")")throw Je($,"Parenthesis ) expected");return X($),I($),ce=new g(ce),ce=ye($,ce),ce}return lt($)}function lt($){throw $.token===""?Je($,"Unexpected end of expression"):Je($,"Value expected")}function at($){return $.index-$.token.length+1}function Je($,ce){var Ne=at($),Ge=new SyntaxError(ce+" (char "+Ne+")");return Ge.char=Ne,Ge}function Ee($,ce){var Ne=at($),Ge=new SyntaxError(ce+" (char "+Ne+")");return Ge.char=Ne,Ge}return e.addConversion({from:"string",to:"Node",convert:b}),b}),VU="compile",Obe=["typed","parse"],kbe=ae(VU,Obe,n=>{var{typed:e,parse:t}=n;return e(VU,{string:function(i){return t(i).compile()},"Array | Matrix":function(i){return hn(i,function(o){return t(o).compile()})}})}),$U="evaluate",Ibe=["typed","parse"],Lbe=ae($U,Ibe,n=>{var{typed:e,parse:t}=n;return e($U,{string:function(i){var o=Iy();return t(i).compile().evaluate(o)},"string, Map | Object":function(i,o){return t(i).compile().evaluate(o)},"Array | Matrix":function(i){var o=Iy();return hn(i,function(s){return t(s).compile().evaluate(o)})},"Array | Matrix, Map | Object":function(i,o){return hn(i,function(s){return t(s).compile().evaluate(o)})}})}),Fbe="Parser",Bbe=["evaluate"],zbe=ae(Fbe,Bbe,n=>{var{evaluate:e}=n;function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:Iy(),writable:!1})}return t.prototype.type="Parser",t.prototype.isParser=!0,t.prototype.evaluate=function(r){return e(r,this.scope)},t.prototype.get=function(r){if(this.scope.has(r))return this.scope.get(r)},t.prototype.getAll=function(){return Yfe(this.scope)},t.prototype.getAllAsMap=function(){return this.scope},t.prototype.set=function(r,i){return this.scope.set(r,i),i},t.prototype.remove=function(r){this.scope.delete(r)},t.prototype.clear=function(){this.scope.clear()},t},{isClass:!0}),HU="parser",Ube=["typed","Parser"],Vbe=ae(HU,Ube,n=>{var{typed:e,Parser:t}=n;return e(HU,{"":function(){return new t}})}),WU="lup",$be=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],Hbe=ae(WU,$be,n=>{var{typed:e,matrix:t,abs:r,addScalar:i,divideScalar:o,multiplyScalar:s,subtractScalar:a,larger:l,equalScalar:u,unaryMinus:c,DenseMatrix:f,SparseMatrix:d,Spa:h}=n;return e(WU,{DenseMatrix:function(p){return m(p)},SparseMatrix:function(p){return g(p)},Array:function(p){var w=t(p),b=m(w);return{L:b.L.valueOf(),U:b.U.valueOf(),p:b.p}}});function m(y){var p=y._size[0],w=y._size[1],b=Math.min(p,w),v=Kt(y._data),S=[],x=[p,b],M=[],A=[b,w],T,C,D,R=[];for(T=0;T<p;T++)R[T]=T;for(C=0;C<w;C++){if(C>0)for(T=0;T<p;T++){var B=Math.min(T,C),F=0;for(D=0;D<B;D++)F=i(F,s(v[T][D],v[D][C]));v[T][C]=a(v[T][C],F)}var U=C,N=0,I=0;for(T=C;T<p;T++){var V=v[T][C],L=r(V);l(L,N)&&(U=T,N=L,I=V)}if(C!==U&&(R[C]=[R[U],R[U]=R[C]][0],f._swapRows(C,U,v)),C<p)for(T=C+1;T<p;T++){var X=v[T][C];u(X,0)||(v[T][C]=o(v[T][C],I))}}for(C=0;C<w;C++)for(T=0;T<p;T++){if(C===0&&(T<w&&(M[T]=[]),S[T]=[]),T<C){T<w&&(M[T][C]=v[T][C]),C<p&&(S[T][C]=0);continue}if(T===C){T<w&&(M[T][C]=v[T][C]),C<p&&(S[T][C]=1);continue}T<w&&(M[T][C]=0),C<p&&(S[T][C]=v[T][C])}var Z=new f({data:S,size:x}),te=new f({data:M,size:A}),Y=[];for(T=0,b=R.length;T<b;T++)Y[R[T]]=T;return{L:Z,U:te,p:Y,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function g(y){var p=y._size[0],w=y._size[1],b=Math.min(p,w),v=y._values,S=y._index,x=y._ptr,M=[],A=[],T=[],C=[p,b],D=[],R=[],B=[],F=[b,w],U,N,I,V=[],L=[];for(U=0;U<p;U++)V[U]=U,L[U]=U;var X=function(Y,re){var fe=L[Y],ue=L[re];V[fe]=re,V[ue]=Y,L[Y]=ue,L[re]=fe},Z=function(){var Y=new h;N<p&&(T.push(M.length),M.push(1),A.push(N)),B.push(D.length);var re=x[N],fe=x[N+1];for(I=re;I<fe;I++)U=S[I],Y.set(V[U],v[I]);N>0&&Y.forEach(0,N-1,function(xe,De){d._forEachRow(xe,M,A,T,function(Ae,ie){Ae>xe&&Y.accumulate(Ae,c(s(ie,De)))})});var ue=N,ge=Y.get(N),Se=r(ge);Y.forEach(N+1,p-1,function(xe,De){var Ae=r(De);l(Ae,Se)&&(ue=xe,Se=Ae,ge=De)}),N!==ue&&(d._swapRows(N,ue,C[1],M,A,T),d._swapRows(N,ue,F[1],D,R,B),Y.swap(N,ue),X(N,ue)),Y.forEach(0,p-1,function(xe,De){xe<=N?(D.push(De),R.push(xe)):(De=o(De,ge),u(De,0)||(M.push(De),A.push(xe)))})};for(N=0;N<w;N++)Z();return B.push(D.length),T.push(M.length),{L:new d({values:M,index:A,ptr:T,size:C}),U:new d({values:D,index:R,ptr:B,size:F}),p:V,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}}),jU="qr",Wbe=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],jbe=ae(jU,Wbe,n=>{var{typed:e,matrix:t,zeros:r,identity:i,isZero:o,equal:s,sign:a,sqrt:l,conj:u,unaryMinus:c,addScalar:f,divideScalar:d,multiplyScalar:h,subtractScalar:m,complex:g}=n;return pt(e(jU,{DenseMatrix:function(v){return p(v)},SparseMatrix:function(v){return w()},Array:function(v){var S=t(v),x=p(S);return{Q:x.Q.valueOf(),R:x.R.valueOf()}}}),{_denseQRimpl:y});function y(b){var v=b._size[0],S=b._size[1],x=i([v],"dense"),M=x._data,A=b.clone(),T=A._data,C,D,R,B=r([v],"");for(R=0;R<Math.min(S,v);++R){var F=T[R][R],U=c(s(F,0)?1:a(F)),N=u(U),I=0;for(C=R;C<v;C++)I=f(I,h(T[C][R],u(T[C][R])));var V=h(U,l(I));if(!o(V)){var L=m(F,V);for(B[R]=1,C=R+1;C<v;C++)B[C]=d(T[C][R],L);var X=c(u(d(L,V))),Z=void 0;for(D=R;D<S;D++){for(Z=0,C=R;C<v;C++)Z=f(Z,h(u(B[C]),T[C][D]));for(Z=h(Z,X),C=R;C<v;C++)T[C][D]=h(m(T[C][D],h(B[C],Z)),N)}for(C=0;C<v;C++){for(Z=0,D=R;D<v;D++)Z=f(Z,h(M[C][D],B[D]));for(Z=h(Z,X),D=R;D<v;++D)M[C][D]=d(m(M[C][D],h(Z,u(B[D]))),N)}}}return{Q:x,R:A,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function p(b){var v=y(b),S=v.R._data;if(b._data.length>0)for(var x=S[0][0].type==="Complex"?g(0):0,M=0;M<S.length;++M)for(var A=0;A<M&&A<(S[0]||[]).length;++A)S[M][A]=x;return v}function w(b){throw new Error("qr not implemented for sparse matrices yet")}});function Gbe(n,e,t,r){n._values;for(var i=n._index,o=n._ptr,s=n._size,a=n._datatype,l=s[0],u=s[1],c=null,f=[],d=[],h=0,m=0;m<u;m++){d[m]=h;for(var g=t?t[m]:m,y=o[g],p=o[g+1],w=y;w<p;w++){var b=i[w];f[h]=b,h++}}return d[u]=h,n.createSparseMatrix({values:c,index:f,ptr:d,size:[l,u],datatype:a})}function UK(n,e,t,r,i,o,s){var a=0;for(t[s]=n;a>=0;){var l=t[s+a],u=t[r+l];u===-1?(a--,o[e++]=l):(t[r+l]=t[i+u],++a,t[s+a]=u)}return e}function qbe(n,e){if(!n)return null;var t=0,r,i=[],o=[],s=0,a=e,l=2*e;for(r=0;r<e;r++)o[s+r]=-1;for(r=e-1;r>=0;r--)n[r]!==-1&&(o[a+r]=o[s+n[r]],o[s+n[r]]=r);for(r=0;r<e;r++)n[r]===-1&&(t=UK(r,t,o,s,a,i,l));return i}function Xbe(n,e){if(!n)return null;var t=n._index,r=n._ptr,i=n._size,o=i[0],s=i[1],a=[],l=[],u=0,c=s,f,d;for(f=0;f<o;f++)l[c+f]=-1;for(var h=0;h<s;h++){a[h]=-1,l[u+h]=-1;for(var m=r[h],g=r[h+1],y=m;y<g;y++){var p=t[y];for(f=l[c+p];f!==-1&&f<h;f=d)d=l[u+f],l[u+f]=h,d===-1&&(a[f]=h);l[c+p]=h}}return a}function Ybe(n,e,t){for(var r=n._values,i=n._index,o=n._ptr,s=n._size,a=s[1],l=0,u=0;u<a;u++){var c=o[u];for(o[u]=l;c<o[u+1];c++)e(i[c],u,r?r[c]:1,t)&&(i[l]=i[c],r&&(r[l]=r[c]),l++)}return o[a]=l,i.splice(l,i.length-l),r&&r.splice(l,r.length-l),l}function Yc(n){return-n-2}var Kbe="csAmd",Zbe=["add","multiply","transpose"],Jbe=ae(Kbe,Zbe,n=>{var{add:e,multiply:t,transpose:r}=n;return function(c,f){if(!f||c<=0||c>3)return null;var d=f._size,h=d[0],m=d[1],g=0,y=Math.max(16,10*Math.sqrt(m));y=Math.min(m-2,y);var p=i(c,f,h,m,y);Ybe(p,l,null);for(var w=p._index,b=p._ptr,v=b[m],S=[],x=[],M=0,A=m+1,T=2*(m+1),C=3*(m+1),D=4*(m+1),R=5*(m+1),B=6*(m+1),F=7*(m+1),U=S,N=o(m,b,x,M,C,U,T,F,A,B,D,R),I=s(m,b,x,R,D,B,y,A,C,U,T),V=0,L,X,Z,te,Y,re,fe,ue,ge,Se,xe,De,Ae,ie,Re,Pe;I<m;){for(Z=-1;V<m&&(Z=x[C+V])===-1;V++);x[T+Z]!==-1&&(U[x[T+Z]]=-1),x[C+V]=x[T+Z];var ee=x[D+Z],oe=x[A+Z];I+=oe;var Me=0;x[A+Z]=-oe;var se=b[Z],G=ee===0?se:v,j=G;for(te=1;te<=ee+1;te++){for(te>ee?(re=Z,fe=se,ue=x[M+Z]-ee):(re=w[se++],fe=b[re],ue=x[M+re]),Y=1;Y<=ue;Y++)L=w[fe++],!((ge=x[A+L])<=0)&&(Me+=ge,x[A+L]=-ge,w[j++]=L,x[T+L]!==-1&&(U[x[T+L]]=U[L]),U[L]!==-1?x[T+U[L]]=x[T+L]:x[C+x[R+L]]=x[T+L]);re!==Z&&(b[re]=Yc(Z),x[B+re]=0)}for(ee!==0&&(v=j),x[R+Z]=Me,b[Z]=G,x[M+Z]=j-G,x[D+Z]=-2,N=a(N,g,x,B,m),Se=G;Se<j;Se++)if(L=w[Se],!((xe=x[D+L])<=0)){ge=-x[A+L];var he=N-ge;for(se=b[L],De=b[L]+xe-1;se<=De;se++)re=w[se],x[B+re]>=N?x[B+re]-=ge:x[B+re]!==0&&(x[B+re]=x[R+re]+he)}for(Se=G;Se<j;Se++){for(L=w[Se],De=b[L],Ae=De+x[D+L]-1,ie=De,Re=0,Pe=0,se=De;se<=Ae;se++)if(re=w[se],x[B+re]!==0){var Ce=x[B+re]-N;Ce>0?(Pe+=Ce,w[ie++]=re,Re+=re):(b[re]=Yc(Z),x[B+re]=0)}x[D+L]=ie-De+1;var q=ie,J=De+x[M+L];for(se=Ae+1;se<J;se++){X=w[se];var ye=x[A+X];ye<=0||(Pe+=ye,w[ie++]=X,Re+=X)}Pe===0?(b[L]=Yc(Z),ge=-x[A+L],Me-=ge,oe+=ge,I+=ge,x[A+L]=0,x[D+L]=-1):(x[R+L]=Math.min(x[R+L],Pe),w[ie]=w[q],w[q]=w[De],w[De]=Z,x[M+L]=ie-De+1,Re=(Re<0?-Re:Re)%m,x[T+L]=x[F+Re],x[F+Re]=L,U[L]=Re)}for(x[R+Z]=Me,g=Math.max(g,Me),N=a(N+g,g,x,B,m),Se=G;Se<j;Se++)if(L=w[Se],!(x[A+L]>=0))for(Re=U[L],L=x[F+Re],x[F+Re]=-1;L!==-1&&x[T+L]!==-1;L=x[T+L],N++){for(ue=x[M+L],xe=x[D+L],se=b[L]+1;se<=b[L]+ue-1;se++)x[B+w[se]]=N;var we=L;for(X=x[T+L];X!==-1;){var ke=x[M+X]===ue&&x[D+X]===xe;for(se=b[X]+1;ke&&se<=b[X]+ue-1;se++)x[B+w[se]]!==N&&(ke=0);ke?(b[X]=Yc(L),x[A+L]+=x[A+X],x[A+X]=0,x[D+X]=-1,X=x[T+X],x[T+we]=X):(we=X,X=x[T+X])}}for(se=G,Se=G;Se<j;Se++)L=w[Se],!((ge=-x[A+L])<=0)&&(x[A+L]=ge,Pe=x[R+L]+Me-ge,Pe=Math.min(Pe,m-I-ge),x[C+Pe]!==-1&&(U[x[C+Pe]]=L),x[T+L]=x[C+Pe],U[L]=-1,x[C+Pe]=L,V=Math.min(V,Pe),x[R+L]=Pe,w[se++]=L);x[A+Z]=oe,(x[M+Z]=se-G)===0&&(b[Z]=-1,x[B+Z]=0),ee!==0&&(v=se)}for(L=0;L<m;L++)b[L]=Yc(b[L]);for(X=0;X<=m;X++)x[C+X]=-1;for(X=m;X>=0;X--)x[A+X]>0||(x[T+X]=x[C+b[X]],x[C+b[X]]=X);for(re=m;re>=0;re--)x[A+re]<=0||b[re]!==-1&&(x[T+re]=x[C+b[re]],x[C+b[re]]=re);for(Z=0,L=0;L<=m;L++)b[L]===-1&&(Z=UK(L,Z,x,C,T,S,B));return S.splice(S.length-1,1),S};function i(u,c,f,d,h){var m=r(c);if(u===1&&d===f)return e(c,m);if(u===2){for(var g=m._index,y=m._ptr,p=0,w=0;w<f;w++){var b=y[w];if(y[w]=p,!(y[w+1]-b>h))for(var v=y[w+1];b<v;b++)g[p++]=g[b]}return y[f]=p,c=r(m),t(m,c)}return t(m,c)}function o(u,c,f,d,h,m,g,y,p,w,b,v){for(var S=0;S<u;S++)f[d+S]=c[S+1]-c[S];f[d+u]=0;for(var x=0;x<=u;x++)f[h+x]=-1,m[x]=-1,f[g+x]=-1,f[y+x]=-1,f[p+x]=1,f[w+x]=1,f[b+x]=0,f[v+x]=f[d+x];var M=a(0,0,f,w,u);return f[b+u]=-2,c[u]=-1,f[w+u]=0,M}function s(u,c,f,d,h,m,g,y,p,w,b){for(var v=0,S=0;S<u;S++){var x=f[d+S];if(x===0)f[h+S]=-2,v++,c[S]=-1,f[m+S]=0;else if(x>g)f[y+S]=0,f[h+S]=-1,v++,c[S]=Yc(u),f[y+u]++;else{var M=f[p+x];M!==-1&&(w[M]=S),f[b+S]=f[p+x],f[p+x]=S}}return v}function a(u,c,f,d,h){if(u<2||u+c<0){for(var m=0;m<h;m++)f[d+m]!==0&&(f[d+m]=1);u=2}return u}function l(u,c){return u!==c}});function Qbe(n,e,t,r,i,o,s){var a,l,u=0,c;if(n<=e||t[r+e]<=t[i+n])return-1;t[i+n]=t[r+e];var f=t[o+n];if(t[o+n]=e,f===-1)u=1,c=n;else{for(u=2,c=f;c!==t[s+c];c=t[s+c]);for(a=f;a!==c;a=l)l=t[s+a],t[s+a]=c}return{jleaf:u,q:c}}var ewe="csCounts",twe=["transpose"],nwe=ae(ewe,twe,n=>{var{transpose:e}=n;return function(t,r,i,o){if(!t||!r||!i)return null;var s=t._size,a=s[0],l=s[1],u,c,f,d,h,m,g,y=4*l+(o?l+a+1:0),p=[],w=0,b=l,v=2*l,S=3*l,x=4*l,M=5*l+1;for(f=0;f<y;f++)p[f]=-1;var A=[],T=e(t),C=T._index,D=T._ptr;for(f=0;f<l;f++)for(c=i[f],A[c]=p[S+c]===-1?1:0;c!==-1&&p[S+c]===-1;c=r[c])p[S+c]=f;if(o){for(f=0;f<l;f++)p[i[f]]=f;for(u=0;u<a;u++){for(f=l,m=D[u],g=D[u+1],h=m;h<g;h++)f=Math.min(f,p[C[h]]);p[M+u]=p[x+f],p[x+f]=u}}for(u=0;u<l;u++)p[w+u]=u;for(f=0;f<l;f++){for(c=i[f],r[c]!==-1&&A[r[c]]--,d=o?p[x+f]:c;d!==-1;d=o?p[M+d]:-1)for(h=D[d];h<D[d+1];h++){u=C[h];var R=Qbe(u,c,p,S,b,v,w);R.jleaf>=1&&A[c]++,R.jleaf===2&&A[R.q]--}r[c]!==-1&&(p[w+c]=r[c])}for(c=0;c<l;c++)r[c]!==-1&&(A[r[c]]+=A[c]);return A}}),rwe="csSqr",iwe=["add","multiply","transpose"],owe=ae(rwe,iwe,n=>{var{add:e,multiply:t,transpose:r}=n,i=Jbe({add:e,multiply:t,transpose:r}),o=nwe({transpose:r});return function(l,u,c){var f=u._ptr,d=u._size,h=d[1],m,g={};if(g.q=i(l,u),l&&!g.q)return null;if(c){var y=l?Gbe(u,null,g.q):u;g.parent=Xbe(y);var p=qbe(g.parent,h);if(g.cp=o(y,g.parent,p,1),y&&g.parent&&g.cp&&s(y,g))for(g.unz=0,m=0;m<h;m++)g.unz+=g.cp[m]}else g.unz=4*f[h]+h,g.lnz=g.unz;return g};function s(a,l){var u=a._ptr,c=a._index,f=a._size,d=f[0],h=f[1];l.pinv=[],l.leftmost=[];var m=l.parent,g=l.pinv,y=l.leftmost,p=[],w=0,b=d,v=d+h,S=d+2*h,x,M,A,T,C;for(M=0;M<h;M++)p[b+M]=-1,p[v+M]=-1,p[S+M]=0;for(x=0;x<d;x++)y[x]=-1;for(M=h-1;M>=0;M--)for(T=u[M],C=u[M+1],A=T;A<C;A++)y[c[A]]=M;for(x=d-1;x>=0;x--)g[x]=-1,M=y[x],M!==-1&&(p[S+M]++===0&&(p[v+M]=x),p[w+x]=p[b+M],p[b+M]=x);for(l.lnz=0,l.m2=d,M=0;M<h;M++)if(x=p[b+M],l.lnz++,x<0&&(x=l.m2++),g[x]=M,!(--S[M]<=0)){l.lnz+=p[S+M];var D=m[M];D!==-1&&(p[S+D]===0&&(p[v+D]=p[v+M]),p[w+p[v+M]]=p[b+D],p[b+D]=p[w+x],p[S+D]+=p[S+M])}for(x=0;x<d;x++)g[x]<0&&(g[x]=M++);return!0}});function FN(n,e){return n[e]<0}function VK(n,e){n[e]=Yc(n[e])}function GU(n){return n<0?Yc(n):n}function swe(n,e,t,r,i){var o=e._index,s=e._ptr,a=e._size,l=a[1],u,c,f,d=0;for(r[0]=n;d>=0;){n=r[d];var h=i?i[n]:n;FN(s,n)||(VK(s,n),r[l+d]=h<0?0:GU(s[h]));var m=1;for(c=r[l+d],f=h<0?0:GU(s[h+1]);c<f;c++)if(u=o[c],!FN(s,u)){r[l+d]=c,r[++d]=u,m=0;break}m&&(d--,r[--t]=n)}return t}function awe(n,e,t,r,i){var o=n._ptr,s=n._size,a=e._index,l=e._ptr,u=s[1],c,f,d,h=u;for(f=l[t],d=l[t+1],c=f;c<d;c++){var m=a[c];FN(o,m)||(h=swe(m,n,h,r,i))}for(c=h;c<u;c++)VK(o,r[c]);return h}var lwe="csSpsolve",uwe=["divideScalar","multiply","subtract"],cwe=ae(lwe,uwe,n=>{var{divideScalar:e,multiply:t,subtract:r}=n;return function(o,s,a,l,u,c,f){var d=o._values,h=o._index,m=o._ptr,g=o._size,y=g[1],p=s._values,w=s._index,b=s._ptr,v,S,x,M,A=awe(o,s,a,l,c);for(v=A;v<y;v++)u[l[v]]=0;for(S=b[a],x=b[a+1],v=S;v<x;v++)u[w[v]]=p[v];for(var T=A;T<y;T++){var C=l[T],D=c?c[C]:C;if(!(D<0))for(S=m[D],x=m[D+1],u[C]=e(u[C],d[f?S:x-1]),v=f?S+1:S,M=f?x:x-1;v<M;v++){var R=h[v];u[R]=r(u[R],t(d[v],u[C]))}}return A}}),fwe="csLu",dwe=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],hwe=ae(fwe,dwe,n=>{var{abs:e,divideScalar:t,multiply:r,subtract:i,larger:o,largerEq:s,SparseMatrix:a}=n,l=cwe({divideScalar:t,multiply:r,subtract:i});return function(c,f,d){if(!c)return null;var h=c._size,m=h[1],g,y=100,p=100;f&&(g=f.q,y=f.lnz||y,p=f.unz||p);var w=[],b=[],v=[],S=new a({values:w,index:b,ptr:v,size:[m,m]}),x=[],M=[],A=[],T=new a({values:x,index:M,ptr:A,size:[m,m]}),C=[],D,R,B=[],F=[];for(D=0;D<m;D++)B[D]=0,C[D]=-1,v[D+1]=0;y=0,p=0;for(var U=0;U<m;U++){v[U]=y,A[U]=p;var N=g?g[U]:U,I=l(S,c,N,F,B,C,1),V=-1,L=-1;for(R=I;R<m;R++)if(D=F[R],C[D]<0){var X=e(B[D]);o(X,L)&&(L=X,V=D)}else M[p]=C[D],x[p++]=B[D];if(V===-1||L<=0)return null;C[N]<0&&s(e(B[N]),r(L,d))&&(V=N);var Z=B[V];for(M[p]=U,x[p++]=Z,C[V]=U,b[y]=V,w[y++]=1,R=I;R<m;R++)D=F[R],C[D]<0&&(b[y]=D,w[y++]=t(B[D],Z)),B[D]=0}for(v[m]=y,A[m]=p,R=0;R<y;R++)b[R]=C[b[R]];return w.splice(y,w.length-y),b.splice(y,b.length-y),x.splice(p,x.length-p),M.splice(p,M.length-p),{L:S,U:T,pinv:C}}}),qU="slu",pwe=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],mwe=ae(qU,pwe,n=>{var{typed:e,abs:t,add:r,multiply:i,transpose:o,divideScalar:s,subtract:a,larger:l,largerEq:u,SparseMatrix:c}=n,f=owe({add:r,multiply:i,transpose:o}),d=hwe({abs:t,divideScalar:s,multiply:i,subtract:a,larger:l,largerEq:u,SparseMatrix:c});return e(qU,{"SparseMatrix, number, number":function(m,g,y){if(!kt(g)||g<0||g>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(y<0||y>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var p=f(g,m,!1),w=d(m,p,y);return{L:w.L,U:w.U,p:w.pinv,q:p.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function XU(n,e){var t,r=e.length,i=[];if(n)for(t=0;t<r;t++)i[n[t]]=e[t];else for(t=0;t<r;t++)i[t]=e[t];return i}var YU="lusolve",gwe=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],vwe=ae(YU,gwe,n=>{var{typed:e,matrix:t,lup:r,slu:i,usolve:o,lsolve:s,DenseMatrix:a}=n,l=Y1({DenseMatrix:a});return e(YU,{"Array, Array | Matrix":function(d,h){d=t(d);var m=r(d),g=c(m.L,m.U,m.p,null,h);return g.valueOf()},"DenseMatrix, Array | Matrix":function(d,h){var m=r(d);return c(m.L,m.U,m.p,null,h)},"SparseMatrix, Array | Matrix":function(d,h){var m=r(d);return c(m.L,m.U,m.p,null,h)},"SparseMatrix, Array | Matrix, number, number":function(d,h,m,g){var y=i(d,m,g);return c(y.L,y.U,y.p,y.q,h)},"Object, Array | Matrix":function(d,h){return c(d.L,d.U,d.p,d.q,h)}});function u(f){if(Vt(f))return f;if(Tn(f))return t(f);throw new TypeError("Invalid Matrix LU decomposition")}function c(f,d,h,m,g){f=u(f),d=u(d),h&&(g=l(f,g,!0),g._data=XU(h,g._data));var y=s(f,g),p=o(d,y);return m&&(p._data=XU(m,p._data)),p}}),KU="polynomialRoot",ywe=["typed","isZero","equalScalar","add","subtract","multiply","divide","sqrt","unaryMinus","cbrt","typeOf","im","re"],xwe=ae(KU,ywe,n=>{var{typed:e,isZero:t,equalScalar:r,add:i,subtract:o,multiply:s,divide:a,sqrt:l,unaryMinus:u,cbrt:c,typeOf:f,im:d,re:h}=n;return e(KU,{"number|Complex, ...number|Complex":(m,g)=>{for(var y=[m,...g];y.length>0&&t(y[y.length-1]);)y.pop();if(y.length<2)throw new RangeError("Polynomial [".concat(m,", ").concat(g,"] must have a non-zero non-constant coefficient"));switch(y.length){case 2:return[u(a(y[0],y[1]))];case 3:{var[p,w,b]=y,v=s(2,b),S=s(w,w),x=s(4,b,p);if(r(S,x))return[a(u(w),v)];var M=l(o(S,x));return[a(o(M,w),v),a(o(u(M),w),v)]}case 4:{var[A,T,C,D]=y,R=u(s(3,D)),B=s(C,C),F=s(3,D,T),U=i(s(2,C,C,C),s(27,D,D,A)),N=s(9,D,C,T);if(r(B,F)&&r(U,N))return[a(C,R)];var I=o(B,F),V=o(U,N),L=i(s(18,D,C,T,A),s(C,C,T,T)),X=i(s(4,C,C,C,A),s(4,D,T,T,T),s(27,D,D,A,A));if(r(L,X))return[a(o(s(4,D,C,T),i(s(9,D,D,A),s(C,C,C))),s(D,I)),a(o(s(9,D,A),s(C,T)),s(2,I))];var Z;r(B,F)?Z=V:Z=a(i(V,l(o(s(V,V),s(4,I,I,I)))),2);var te=!0,Y=c(Z,te).toArray().map(re=>a(i(C,re,a(I,re)),R));return Y.map(re=>f(re)==="Complex"&&r(h(re),h(re)+d(re))?h(re):re)}default:throw new RangeError("only implemented for cubic or lower-order polynomials, not ".concat(y))}}})}),bwe="Help",wwe=["evaluate"],Swe=ae(bwe,wwe,n=>{var{evaluate:e}=n;function t(r){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(!r)throw new Error('Argument "doc" missing');this.doc=r}return t.prototype.type="Help",t.prototype.isHelp=!0,t.prototype.toString=function(){var r=this.doc||{},i=`
`;if(r.name&&(i+="Name: "+r.name+`

`),r.category&&(i+="Category: "+r.category+`

`),r.description&&(i+=`Description:
    `+r.description+`

`),r.syntax&&(i+=`Syntax:
    `+r.syntax.join(`
    `)+`

`),r.examples){i+=`Examples:
`;for(var o=!1,s=e("config()"),a={config:f=>(o=!0,e("config(newConfig)",{newConfig:f}))},l=0;l<r.examples.length;l++){var u=r.examples[l];i+="    "+u+`
`;var c=void 0;try{c=e(u,a)}catch(f){c=f}c!==void 0&&!Dk(c)&&(i+="        "+fn(c,{precision:14})+`
`)}i+=`
`,o&&e("config(originalConfig)",{originalConfig:s})}return r.mayThrow&&r.mayThrow.length&&(i+="Throws: "+r.mayThrow.join(", ")+`

`),r.seealso&&r.seealso.length&&(i+="See also: "+r.seealso.join(", ")+`
`),i},t.prototype.toJSON=function(){var r=Kt(this.doc);return r.mathjs="Help",r},t.fromJSON=function(r){var i={};return Object.keys(r).filter(o=>o!=="mathjs").forEach(o=>{i[o]=r[o]}),new t(i)},t.prototype.valueOf=t.prototype.toString,t},{isClass:!0}),_we="Chain",Ewe=["?on","math","typed"],Mwe=ae(_we,Ewe,n=>{var{on:e,math:t,typed:r}=n;function i(u){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");Nk(u)?this.value=u.value:this.value=u}i.prototype.type="Chain",i.prototype.isChain=!0,i.prototype.done=function(){return this.value},i.prototype.valueOf=function(){return this.value},i.prototype.toString=function(){return fn(this.value)},i.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},i.fromJSON=function(u){return new i(u.value)};function o(u,c){typeof c=="function"&&(i.prototype[u]=a(c))}function s(u,c){r_(i.prototype,u,function(){var d=c();if(typeof d=="function")return a(d)})}function a(u){return function(){if(arguments.length===0)return new i(u(this.value));for(var c=[this.value],f=0;f<arguments.length;f++)c[f+1]=arguments[f];if(r.isTypedFunction(u)){var d=r.resolve(u,c);if(d.params.length===1)throw new Error("chain function "+u.name+" cannot match rest parameter between chain value and additional arguments.");return new i(d.implementation.apply(u,c))}return new i(u.apply(u,c))}}i.createProxy=function(u,c){if(typeof u=="string")o(u,c);else{var f=function(m){vt(u,m)&&l[m]===void 0&&s(m,()=>u[m])};for(var d in u)f(d)}};var l={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return i.createProxy(t),e&&e("import",function(u,c,f){f||s(u,c)}),i},{isClass:!0}),ZU={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},Cwe={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},Awe={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},Twe={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},Dwe={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},Nwe={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},Pwe={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},Rwe={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},Owe={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},kwe={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},Iwe={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},JU={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},Lwe={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},Fwe={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},Bwe={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},zwe={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},Uwe={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},Vwe={name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","complex","fraction","index","matrix","string","unit"]},$we={name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},Hwe={name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},Wwe={name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},jwe={name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(matrix)","fraction(num,den)","fraction({n: num, d: den})"],description:"Create a fraction from a number or from integer numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)","fraction({n: 333, d: 53})","fraction([sqrt(9), sqrt(10), sqrt(11)])"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},Gwe={name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[1:2, 1:2] = 1","B = [1, 2, 3]","B[B>1 and B<3]"],seealso:["bignumber","boolean","complex","matrix,","number","range","string","unit"]},qwe={name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},Xwe={name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","boolean","complex","fraction","index","matrix","string","unit"]},Ywe={name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},Kwe={name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},Zwe={name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},Jwe={name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},Qwe={name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},eSe={name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},tSe={name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number": f(x)=x+x, "string": f(x)=concat(x,x) })',"double(2)",'double("hello")'],seealso:[]},nSe={name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},rSe={name:"leafCount",category:"Algebra",syntax:["leafCount(expr)"],description:"Computes the number of leaves in the parse tree of the given expression",examples:['leafCount("e^(i*pi)-1")','leafCount(parse("{a: 22/7, b: 10^(1/2)}"))'],seealso:["simplify"]},iSe={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]},oSe={name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]},sSe={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},aSe={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},lSe={name:"polynomialRoot",category:"Algebra",syntax:["x=polynomialRoot(-6, 3)","x=polynomialRoot(4, -4, 1)","x=polynomialRoot(-8, 12, -6, 1)"],description:"Finds the roots of a univariate polynomial given by its coefficients starting from constant, linear, and so on, increasing in degree.",examples:["a = polynomialRoot(-6, 11, -6, 1)"],seealso:["cbrt","sqrt"]},uSe={name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},cSe={name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},fSe={name:"resolve",category:"Algebra",syntax:["resolve(node, scope)"],description:"Recursively substitute variables in an expression tree.",examples:['resolve(parse("1 + x"), { x: 7 })','resolve(parse("size(text)"), { text: "Hello World" })','resolve(parse("x + y"), { x: parse("3z") })','resolve(parse("3x"), { x: parse("y+z"), z: parse("w^y") })'],seealso:["simplify","evaluate"],mayThrow:["ReferenceError"]},dSe={name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["simplifyCore","derivative","evaluate","parse","rationalize","resolve"]},hSe={name:"simplifyConstant",category:"Algebra",syntax:["simplifyConstant(expr)","simplifyConstant(expr, options)"],description:"Replace constant subexpressions of node with their values.",examples:['simplifyConstant("(3-3)*x")','simplifyConstant(parse("z-cos(tau/8)"))'],seealso:["simplify","simplifyCore","evaluate"]},pSe={name:"simplifyCore",category:"Algebra",syntax:["simplifyCore(node)"],description:"Perform simple one-pass simplifications on an expression tree.",examples:['simplifyCore(parse("0*x"))','simplifyCore(parse("(x+0)*2"))'],seealso:["simplify","simplifyConstant","evaluate"]},mSe={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},gSe={name:"symbolicEqual",category:"Algebra",syntax:["symbolicEqual(expr1, expr2)","symbolicEqual(expr1, expr2, options)"],description:"Returns true if the difference of the expressions simplifies to 0",examples:['symbolicEqual("x*y","y*x")','symbolicEqual("abs(x^2)", "x^2")','symbolicEqual("abs(x)", "x", {context: {abs: {trivial: true}}})'],seealso:["simplify","evaluate"]},vSe={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]},ySe={name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]},xSe={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},bSe={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},wSe={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},SSe={name:"ceil",category:"Arithmetic",syntax:["ceil(x)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)"],seealso:["floor","fix","round"]},_Se={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},ESe={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},MSe={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},CSe={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},ASe={name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},TSe={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},DSe={name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},NSe={name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},PSe={name:"fix",category:"Arithmetic",syntax:["fix(x)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)"],seealso:["ceil","floor","round"]},RSe={name:"floor",category:"Arithmetic",syntax:["floor(x)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)"],seealso:["ceil","fix","round"]},OSe={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},kSe={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenusa of a list with values. ",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},ISe={name:"invmod",category:"Arithmetic",syntax:["invmod(a, b)"],description:"Calculate the (modular) multiplicative inverse of a modulo b. Solution to the equation ax  1 (mod b)",examples:["invmod(8, 12)","invmod(7, 13)","invmod(15151, 15122)"],seealso:["gcd","xgcd"]},LSe={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},FSe={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},BSe={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},zSe={name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},USe={name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},VSe={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},$Se={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},HSe={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},WSe={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},jSe={name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},GSe={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)","pow([[1, 2], [4, 3]], 2)","pow([[1, 2], [4, 3]], -1)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},qSe={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)","round(unit, valuelessUnit)","round(unit, n, valuelessUnit)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)","round(3.241cm, 2, cm)","round([3.2, 3.8, -4.7])"],seealso:["ceil","floor","fix"]},XSe={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>1, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},YSe={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},KSe={name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[33, 24], [48, 57]])"],seealso:["sqrt","abs","square","multiply"]},ZSe={name:"sylvester",category:"Algebra",syntax:["sylvester(A,B,C)"],description:"Solves the real-valued Sylvester equation AX+XB=C for X",examples:["sylvester([[-1, -2], [1, 1]], [[-2, 1], [-1, 2]], [[-3, 2], [3, 0]])","A = [[-1, -2], [1, 1]]; B = [[2, -1], [1, -2]]; C = [[-3, 2], [3, 0]]","sylvester(A, B, C)"],seealso:["schur","lyap"]},JSe={name:"schur",category:"Algebra",syntax:["schur(A)"],description:"Performs a real Schur decomposition of the real matrix A = UTU'",examples:["schur([[1, 0], [-4, 3]])","A = [[1, 0], [-4, 3]]","schur(A)"],seealso:["lyap","sylvester"]},QSe={name:"lyap",category:"Algebra",syntax:["lyap(A,Q)"],description:"Solves the Continuous-time Lyapunov equation AP+PA'+Q=0 for P",examples:["lyap([[-2, 0], [1, -4]], [[3, 1], [1, 3]])","A = [[-2, 0], [1, -4]]","Q = [[3, 1], [1, 3]]","lyap(A,Q)"],seealso:["schur","sylvester"]},e_e={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},t_e={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},n_e={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},r_e={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},i_e={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},o_e={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},s_e={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},a_e={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},l_e={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},u_e={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},c_e={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},f_e={name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},d_e={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},h_e={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},p_e={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},m_e={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]},g_e={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},v_e={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},y_e={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},x_e={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},b_e={name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate(expression, scope)","evaluate([expr1, expr2, expr3, ...])","evaluate([expr1, expr2, expr3, ...], scope)"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(16)")','evaluate("2 inch to cm")','evaluate("sin(x * pi)", { "x": 1/2 })','evaluate(["width=2", "height=4","width*height"])'],seealso:[]},w_e={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},S_e={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},__e={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},E_e={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},M_e={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},C_e={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},A_e={name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},T_e={name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]},D_e={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},N_e={name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]},P_e={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},R_e={name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},O_e={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},k_e={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},I_e={name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicant the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["A = [1, 2, 4, 7, 0]","diff(A)","diff(A, 1)","B = [[1, 2], [3, 4]]","diff(B)","diff(B, 1)","diff(B, 2)","diff(B, bignumber(2))","diff([[1, 2], matrix([3, 4])], 2)"],seealso:["subtract","partitionSelect"]},L_e={name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},F_e={name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and optionally eigenvectors of a square matrix",examples:["eigs([[5, 2.3], [2.3, 1]])","eigs([[1, 2, 3], [4, 5, 6], [7, 8, 9]], { precision: 1e-6, eigenvectors: false })"],seealso:["inv"]},B_e={name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},z_e={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},U_e={name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["numberOfPets = {}","addPet(n) = numberOfPets[n] = (numberOfPets[n] ? numberOfPets[n]:0 ) + 1;",'forEach(["Dog","Cat","Cat"], addPet)',"numberOfPets"],seealso:["map","sort","filter"]},V_e={name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},$_e={name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},H_e={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},W_e={name:"pinv",category:"Matrix",syntax:["pinv(x)"],description:"Calculate the MoorePenrose inverse of a matrix",examples:["pinv([1, 2; 3, 4])","pinv([[1, 0], [0, 1], [0, 1]])","pinv(4)"],seealso:["inv"]},j_e={name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},G_e={name:"map",category:"Matrix",syntax:["map(x, callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array.",examples:["map([1, 2, 3], square)"],seealso:["filter","forEach"]},q_e={name:"matrixFromColumns",category:"Matrix",syntax:["matrixFromColumns(...arr)","matrixFromColumns(row1, row2)","matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]},X_e={name:"matrixFromFunction",category:"Matrix",syntax:["matrixFromFunction(size, fn)","matrixFromFunction(size, fn, format)","matrixFromFunction(size, fn, format, datatype)","matrixFromFunction(size, format, fn)","matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]},Y_e={name:"matrixFromRows",category:"Matrix",syntax:["matrixFromRows(...arr)","matrixFromRows(row1, row2)","matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]},K_e={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},Z_e={name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1, compareText)',"arr = [5, 2, 1]","partitionSelect(arr, 0) # returns 1, arr is now: [1, 2, 5]","arr","partitionSelect(arr, 1, 'desc') # returns 2, arr is now: [5, 2, 1]","arr"],seealso:["sort"]},J_e={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"range(1m, 1m, 3m)","a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},Q_e={name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])","reshape([1, 2, 3, 4], [-1, 2])"],seealso:["size","squeeze","resize"]},eEe={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},tEe={name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]},nEe={name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]},rEe={name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]},iEe={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},oEe={name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"], "natural")',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},sEe={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},aEe={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of the entries of a matrix or characters of a string. Indexes are one-based. There should be one index specification for each dimension of the target. Each specification can be a single index, a list of indices, or a range in colon notation `l:u`. In a range, both the lower bound l and upper bound u are included; and if a bound is omitted it defaults to the most extreme valid value. The cartesian product of the indices specified in each dimension determines the target of the operation.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]","f[[1,2], [1,3]] = [9, 10; 11, 12]","f"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},lEe={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},uEe={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},cEe={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},fEe={name:"fft",category:"Matrix",syntax:["fft(x)"],description:"Calculate N-dimensional fourier transform",examples:["fft([[1, 0], [1, 0]])"],seealso:["ifft"]},dEe={name:"ifft",category:"Matrix",syntax:["ifft(x)"],description:"Calculate N-dimensional inverse fourier transform",examples:["ifft([[2, 2], [0, 0]])"],seealso:["fft"]},hEe={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},pEe={name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},mEe={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},gEe={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},vEe={name:"lgamma",category:"Probability",syntax:["lgamma(n)"],description:"Logarithm of the gamma function for real, positive numbers and complex numbers, using Lanczos approximation for numbers and Stirling series for complex numbers.",examples:["lgamma(4)","lgamma(1/2)","lgamma(i)","lgamma(complex(1.1, 2))"],seealso:["gamma"]},yEe={name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},xEe={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},bEe={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},wEe={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},SEe={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},_Ee={name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},EEe={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},MEe={name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},CEe={name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},AEe={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},TEe={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},DEe={name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},NEe={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},PEe={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},REe={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},OEe={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},kEe={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},IEe={name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},LEe={name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},FEe={name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},BEe={name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},zEe={name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},UEe={name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},VEe={name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},$Ee={name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},HEe={name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},WEe={name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},jEe={name:"zpk2tf",category:"Signal",syntax:["zpk2tf(z, p, k)"],description:"Compute the transfer function of a zero-pole-gain model.",examples:["zpk2tf([1, 2], [-1, -2], 1)","zpk2tf([1, 2], [-1, -2])","zpk2tf([1 - 3i, 2 + 2i], [-1, -2])"],seealso:[]},GEe={name:"freqz",category:"Signal",syntax:["freqz(b, a)","freqz(b, a, w)"],description:"Calculates the frequency response of a filter given its numerator and denominator coefficients.",examples:["freqz([1, 2], [1, 2, 3])","freqz([1, 2], [1, 2, 3], [0, 1])","freqz([1, 2], [1, 2, 3], 512)"],seealso:[]},qEe={name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},XEe={name:"zeta",category:"Special",syntax:["zeta(s)"],description:"Compute the Riemann Zeta Function using an infinite series and Riemanns Functional Equation for the entire complex plane",examples:["zeta(0.2)","zeta(-0.5)","zeta(4)"],seealso:[]},YEe={name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},KEe={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dimension)"],description:"Compute the maximum value of a list of values.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},ZEe={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dimension)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},JEe={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},QEe={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dimension)"],description:"Compute the minimum value of a list of values.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},eMe={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},tMe={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},nMe={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:`Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probablity are: Number, BigNumber. 

In case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.`,examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},rMe={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, dimension)","std(A, normalization)","std(A, dimension, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},iMe={name:"cumsum",category:"Statistics",syntax:["cumsum(a, b, c, ...)","cumsum(A)"],description:"Compute the cumulative sum of all values.",examples:["cumsum(2, 3, 4, 1)","cumsum([2, 3, 4, 1])","cumsum([1, 2; 3, 4])","cumsum([1, 2; 3, 4], 1)","cumsum([1, 2; 3, 4], 2)"],seealso:["max","mean","median","min","prod","std","sum","variance"]},oMe={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)","sum(A, dimension)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","sum","variance"]},sMe={name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, dimension)","variance(A, normalization)","variance(A, dimension, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},aMe={name:"corr",category:"Statistics",syntax:["corr(A,B)"],description:"Compute the correlation coefficient of a two list with values, For matrices, the matrix correlation coefficient is calculated.",examples:["corr([2, 4, 6, 8],[1, 2, 3, 6])","corr(matrix([[1, 2.2, 3, 4.8, 5], [1, 2, 3, 4, 5]]), matrix([[4, 5.3, 6.6, 7, 8], [1, 2, 3, 4, 5]]))"],seealso:["max","mean","min","median","min","prod","std","sum"]},lMe={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},uMe={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},cMe={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},fMe={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the hyperbolic arccotangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},dMe={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},hMe={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the hyperbolic arccosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},pMe={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},mMe={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},gMe={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},vMe={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},yMe={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},xMe={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},bMe={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},wMe={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},SMe={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},_Me={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},EMe={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},MMe={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},CMe={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},AMe={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},TMe={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},DMe={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},NMe={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},PMe={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},RMe={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},OMe={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},kMe={name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]},IMe={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables,and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},LMe={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},FMe={name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},BMe={name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]},zMe={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},UMe={name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]},VMe={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},$Me={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue"]},HMe={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},WMe={name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},jMe={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},GMe={name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "BigNumber")','numeric("4", "Fraction")','numeric(4, "Fraction")','numeric(fraction(2, 5), "number")'],seealso:["number","fraction","bignumber","string","format"]},qMe={name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]},XMe={name:"print",category:"Utils",syntax:["print(template, values)","print(template, values, precision)"],description:"Interpolate values into a string template.",examples:['print("Lucy is $age years old", {age: 5})','print("The value of pi is $pi", {pi: pi}, 3)','print("Hello, $user.name!", {user: {name: "John"}})','print("Values: $1, $2, $3", [6, 9, 4])'],seealso:["format"]},YMe={name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},KMe={name:"solveODE",category:"Numeric",syntax:["solveODE(func, tspan, y0)","solveODE(func, tspan, y0, options)"],description:"Numerical Integration of Ordinary Differential Equations.",examples:["f(t,y) = y","tspan = [0, 4]","solveODE(f, tspan, 1)","solveODE(f, tspan, [1, 2])",'solveODE(f, tspan, 1, { method:"RK23", maxStep:0.1 })'],seealso:["derivative","simplifyCore"]},ZMe={bignumber:Vwe,boolean:$we,complex:Hwe,createUnit:Wwe,fraction:jwe,index:Gwe,matrix:qwe,number:Xwe,sparse:Ywe,splitUnit:Kwe,string:Zwe,unit:Jwe,e:ZU,E:ZU,false:Cwe,i:Awe,Infinity:Twe,LN2:Nwe,LN10:Dwe,LOG2E:Rwe,LOG10E:Pwe,NaN:Owe,null:kwe,pi:JU,PI:JU,phi:Iwe,SQRT1_2:Lwe,SQRT2:Fwe,tau:Bwe,true:zwe,version:Uwe,speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant",examples:["coulomb"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Borh magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Borh radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:nSe,lsolve:iSe,lsolveAll:oSe,lup:sSe,lusolve:aSe,leafCount:rSe,polynomialRoot:lSe,resolve:fSe,simplify:dSe,simplifyConstant:hSe,simplifyCore:pSe,symbolicEqual:gSe,rationalize:cSe,slu:mSe,usolve:vSe,usolveAll:ySe,qr:uSe,abs:xSe,add:bSe,cbrt:wSe,ceil:SSe,cube:_Se,divide:ESe,dotDivide:MSe,dotMultiply:CSe,dotPow:ASe,exp:TSe,expm:DSe,expm1:NSe,fix:PSe,floor:RSe,gcd:OSe,hypot:kSe,lcm:LSe,log:FSe,log2:USe,log1p:zSe,log10:BSe,mod:VSe,multiply:$Se,norm:HSe,nthRoot:WSe,nthRoots:jSe,pow:GSe,round:qSe,sign:XSe,sqrt:YSe,sqrtm:KSe,square:e_e,subtract:t_e,unaryMinus:n_e,unaryPlus:r_e,xgcd:i_e,invmod:ISe,bitAnd:o_e,bitNot:s_e,bitOr:a_e,bitXor:l_e,leftShift:u_e,rightArithShift:c_e,rightLogShift:f_e,bellNumbers:d_e,catalan:h_e,composition:p_e,stirlingS2:m_e,config:Qwe,import:eSe,typed:tSe,arg:g_e,conj:v_e,re:x_e,im:y_e,evaluate:b_e,help:w_e,distance:S_e,intersect:__e,and:E_e,not:M_e,or:C_e,xor:A_e,concat:D_e,count:N_e,cross:P_e,column:T_e,ctranspose:R_e,det:O_e,diag:k_e,diff:I_e,dot:L_e,getMatrixDataType:V_e,identity:$_e,filter:B_e,flatten:z_e,forEach:U_e,inv:H_e,pinv:W_e,eigs:F_e,kron:j_e,matrixFromFunction:X_e,matrixFromRows:Y_e,matrixFromColumns:q_e,map:G_e,ones:K_e,partitionSelect:Z_e,range:J_e,resize:eEe,reshape:Q_e,rotate:tEe,rotationMatrix:nEe,row:rEe,size:iEe,sort:oEe,squeeze:sEe,subset:aEe,trace:lEe,transpose:uEe,zeros:cEe,fft:fEe,ifft:dEe,sylvester:ZSe,schur:JSe,lyap:QSe,solveODE:KMe,combinations:hEe,combinationsWithRep:pEe,factorial:mEe,gamma:gEe,kldivergence:yEe,lgamma:vEe,multinomial:xEe,permutations:bEe,pickRandom:wEe,random:SEe,randomInt:_Ee,compare:EEe,compareNatural:MEe,compareText:CEe,deepEqual:AEe,equal:TEe,equalText:DEe,larger:NEe,largerEq:PEe,smaller:REe,smallerEq:OEe,unequal:kEe,setCartesian:IEe,setDifference:LEe,setDistinct:FEe,setIntersect:BEe,setIsSubset:zEe,setMultiplicity:UEe,setPowerset:VEe,setSize:$Ee,setSymDifference:HEe,setUnion:WEe,zpk2tf:jEe,freqz:GEe,erf:qEe,zeta:XEe,cumsum:iMe,mad:YEe,max:KEe,mean:ZEe,median:JEe,min:QEe,mode:eMe,prod:tMe,quantileSeq:nMe,std:rMe,sum:oMe,variance:sMe,corr:aMe,acos:lMe,acosh:uMe,acot:cMe,acoth:fMe,acsc:dMe,acsch:hMe,asec:pMe,asech:mMe,asin:gMe,asinh:vMe,atan:yMe,atanh:bMe,atan2:xMe,cos:wMe,cosh:SMe,cot:_Me,coth:EMe,csc:MMe,csch:CMe,sec:AMe,sech:TMe,sin:DMe,sinh:NMe,tan:PMe,tanh:RMe,to:OMe,clone:IMe,format:LMe,bin:kMe,oct:qMe,hex:BMe,isNaN:UMe,isInteger:zMe,isNegative:VMe,isNumeric:$Me,hasNumericValue:FMe,isPositive:HMe,isPrime:WMe,isZero:jMe,print:XMe,typeOf:YMe,numeric:GMe},QU="help",JMe=["typed","mathWithTransform","Help"],QMe=ae(QU,JMe,n=>{var{typed:e,mathWithTransform:t,Help:r}=n;return e(QU,{any:function(o){var s,a=o;if(typeof o!="string"){for(s in t)if(vt(t,s)&&o===t[s]){a=s;break}}var l=zo(ZMe,a);if(!l){var u=typeof a=="function"?a.name:a;throw new Error('No documentation found on "'+u+'"')}return new r(l)}})}),e6="chain",e2e=["typed","Chain"],t2e=ae(e6,e2e,n=>{var{typed:e,Chain:t}=n;return e(e6,{"":function(){return new t},any:function(i){return new t(i)}})}),t6="det",n2e=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],r2e=ae(t6,n2e,n=>{var{typed:e,matrix:t,subtractScalar:r,multiply:i,divideScalar:o,isZero:s,unaryMinus:a}=n;return e(t6,{any:function(c){return Kt(c)},"Array | Matrix":function(c){var f;switch(Vt(c)?f=c.size():Array.isArray(c)?(c=t(c),f=c.size()):f=[],f.length){case 0:return Kt(c);case 1:if(f[0]===1)return Kt(c.valueOf()[0]);if(f[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+fn(f)+")");case 2:{var d=f[0],h=f[1];if(d===h)return l(c.clone().valueOf(),d);if(h===0)return 1;throw new RangeError("Matrix must be square (size: "+fn(f)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+fn(f)+")")}}});function l(u,c,f){if(c===1)return Kt(u[0][0]);if(c===2)return r(i(u[0][0],u[1][1]),i(u[1][0],u[0][1]));for(var d=!1,h=new Array(c).fill(0).map((M,A)=>A),m=0;m<c;m++){var g=h[m];if(s(u[g][m])){var y=void 0;for(y=m+1;y<c;y++)if(!s(u[h[y]][m])){g=h[y],h[y]=h[m],h[m]=g,d=!d;break}if(y===c)return u[g][m]}for(var p=u[g][m],w=m===0?1:u[h[m-1]][m-1],b=m+1;b<c;b++)for(var v=h[b],S=m+1;S<c;S++)u[v][S]=o(r(i(u[v][S],p),i(u[v][m],u[g][S])),w)}var x=u[h[c-1]][c-1];return d?a(x):x}}),n6="inv",i2e=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],o2e=ae(n6,i2e,n=>{var{typed:e,matrix:t,divideScalar:r,addScalar:i,multiply:o,unaryMinus:s,det:a,identity:l,abs:u}=n;return e(n6,{"Array | Matrix":function(d){var h=Vt(d)?d.size():on(d);switch(h.length){case 1:if(h[0]===1)return Vt(d)?t([r(1,d.valueOf()[0])]):[r(1,d[0])];throw new RangeError("Matrix must be square (size: "+fn(h)+")");case 2:{var m=h[0],g=h[1];if(m===g)return Vt(d)?t(c(d.valueOf(),m,g),d.storage()):c(d,m,g);throw new RangeError("Matrix must be square (size: "+fn(h)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+fn(h)+")")}},any:function(d){return r(1,d)}});function c(f,d,h){var m,g,y,p,w;if(d===1){if(p=f[0][0],p===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(1,p)]]}else if(d===2){var b=a(f);if(b===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(f[1][1],b),r(s(f[0][1]),b)],[r(s(f[1][0]),b),r(f[0][0],b)]]}else{var v=f.concat();for(m=0;m<d;m++)v[m]=v[m].concat();for(var S=l(d).valueOf(),x=0;x<h;x++){var M=u(v[x][x]),A=x;for(m=x+1;m<d;)u(v[m][x])>M&&(M=u(v[m][x]),A=m),m++;if(M===0)throw Error("Cannot calculate inverse, determinant is zero");m=A,m!==x&&(w=v[x],v[x]=v[m],v[m]=w,w=S[x],S[x]=S[m],S[m]=w);var T=v[x],C=S[x];for(m=0;m<d;m++){var D=v[m],R=S[m];if(m!==x){if(D[x]!==0){for(y=r(s(D[x]),T[x]),g=x;g<h;g++)D[g]=i(D[g],o(y,T[g]));for(g=0;g<h;g++)R[g]=i(R[g],o(y,C[g]))}}else{for(y=T[x],g=x;g<h;g++)D[g]=r(D[g],y);for(g=0;g<h;g++)R[g]=r(R[g],y)}}}return S}}}),r6="pinv",s2e=["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],a2e=ae(r6,s2e,n=>{var{typed:e,matrix:t,inv:r,deepEqual:i,equal:o,dotDivide:s,dot:a,ctranspose:l,divideScalar:u,multiply:c,add:f,Complex:d}=n;return e(r6,{"Array | Matrix":function(b){var v=Vt(b)?b.size():on(b);switch(v.length){case 1:return p(b)?l(b):v[0]===1?r(b):s(l(b),a(b,b));case 2:{if(p(b))return l(b);var S=v[0],x=v[1];if(S===x)try{return r(b)}catch(M){if(!(M instanceof Error&&M.message.match(/Cannot calculate inverse, determinant is zero/)))throw M}return Vt(b)?t(h(b.valueOf(),S,x),b.storage()):h(b,S,x)}default:throw new RangeError("Matrix must be two dimensional (size: "+fn(v)+")")}},any:function(b){return o(b,0)?Kt(b):u(1,b)}});function h(w,b,v){var{C:S,F:x}=g(w,b,v),M=c(r(c(l(S),S)),l(S)),A=c(l(x),r(c(x,l(x))));return c(A,M)}function m(w,b,v){for(var S=Kt(w),x=0,M=0;M<b;M++){if(v<=x)return S;for(var A=M;y(S[A][x]);)if(A++,b===A&&(A=M,x++,v===x))return S;[S[A],S[M]]=[S[M],S[A]];for(var T=S[M][x],C=0;C<v;C++)S[M][C]=s(S[M][C],T);for(var D=0;D<b;D++)if(D!==M){T=S[D][x];for(var R=0;R<v;R++)S[D][R]=f(S[D][R],c(-1,c(T,S[M][R])))}x++}return S}function g(w,b,v){var S=m(w,b,v),x=w.map((A,T)=>A.filter((C,D)=>D<b&&!y(a(S[D],S[D])))),M=S.filter((A,T)=>!y(a(S[T],S[T])));return{C:x,F:M}}function y(w){return o(f(w,d(1,1)),f(0,d(1,1)))}function p(w){return i(f(w,d(1,1)),f(c(w,0),d(1,1)))}});function l2e(n){var{addScalar:e,subtract:t,flatten:r,multiply:i,multiplyScalar:o,divideScalar:s,sqrt:a,abs:l,bignumber:u,diag:c,size:f,reshape:d,inv:h,qr:m,usolve:g,usolveAll:y,equal:p,complex:w,larger:b,smaller:v,matrixFromColumns:S,dot:x}=n;function M(te,Y,re,fe){var ue=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,ge=A(te,Y,re,fe,ue);T(te,Y,re,fe,ue,ge);var{values:Se,C:xe}=C(te,Y,re,fe,ue);if(ue){var De=D(te,Y,xe,ge,Se,re,fe);return{values:Se,eigenvectors:De}}return{values:Se}}function A(te,Y,re,fe,ue){var ge=fe==="BigNumber",Se=fe==="Complex",xe=ge?u(0):0,De=ge?u(1):Se?w(1):1,Ae=ge?u(1):1,ie=ge?u(10):2,Re=o(ie,ie),Pe;ue&&(Pe=Array(Y).fill(De));for(var ee=!1;!ee;){ee=!0;for(var oe=0;oe<Y;oe++){for(var Me=xe,se=xe,G=0;G<Y;G++)oe!==G&&(Me=e(Me,l(te[G][oe])),se=e(se,l(te[oe][G])));if(!p(Me,0)&&!p(se,0)){for(var j=Ae,he=Me,Ce=s(se,ie),q=o(se,ie);v(he,Ce);)he=o(he,Re),j=o(j,ie);for(;b(he,q);)he=s(he,Re),j=s(j,ie);var J=v(s(e(he,se),j),o(e(Me,se),.95));if(J){ee=!1;for(var ye=s(1,j),we=0;we<Y;we++)oe!==we&&(te[oe][we]=o(te[oe][we],ye),te[we][oe]=o(te[we][oe],j));ue&&(Pe[oe]=o(Pe[oe],ye))}}}}return ue?c(Pe):null}function T(te,Y,re,fe,ue,ge){var Se=fe==="BigNumber",xe=fe==="Complex",De=Se?u(0):xe?w(0):0;Se&&(re=u(re));for(var Ae=0;Ae<Y-2;Ae++){for(var ie=0,Re=De,Pe=Ae+1;Pe<Y;Pe++){var ee=te[Pe][Ae];v(l(Re),l(ee))&&(Re=ee,ie=Pe)}if(!v(l(Re),re)){if(ie!==Ae+1){var oe=te[ie];te[ie]=te[Ae+1],te[Ae+1]=oe;for(var Me=0;Me<Y;Me++){var se=te[Me][ie];te[Me][ie]=te[Me][Ae+1],te[Me][Ae+1]=se}if(ue){var G=ge[ie];ge[ie]=ge[Ae+1],ge[Ae+1]=G}}for(var j=Ae+2;j<Y;j++){var he=s(te[j][Ae],Re);if(he!==0){for(var Ce=0;Ce<Y;Ce++)te[j][Ce]=t(te[j][Ce],o(he,te[Ae+1][Ce]));for(var q=0;q<Y;q++)te[q][Ae+1]=e(te[q][Ae+1],o(he,te[q][j]));if(ue)for(var J=0;J<Y;J++)ge[j][J]=t(ge[j][J],o(he,ge[Ae+1][J]))}}}}return ge}function C(te,Y,re,fe,ue){var ge=fe==="BigNumber",Se=fe==="Complex",xe=ge?u(1):Se?w(1):1;ge&&(re=u(re));for(var De=Kt(te),Ae=[],ie=Y,Re=[],Pe=ue?c(Array(Y).fill(xe)):void 0,ee=ue?c(Array(ie).fill(xe)):void 0,oe=0;oe<=100;){oe+=1;for(var Me=De[ie-1][ie-1],se=0;se<ie;se++)De[se][se]=t(De[se][se],Me);var{Q:G,R:j}=m(De);De=i(j,G);for(var he=0;he<ie;he++)De[he][he]=e(De[he][he],Me);if(ue&&(ee=i(ee,G)),ie===1||v(l(De[ie-1][ie-2]),re)){oe=0,Ae.push(De[ie-1][ie-1]),ue&&(Re.unshift([[1]]),F(ee,Y),Pe=i(Pe,ee),ie>1&&(ee=c(Array(ie-1).fill(xe)))),ie-=1,De.pop();for(var Ce=0;Ce<ie;Ce++)De[Ce].pop()}else if(ie===2||v(l(De[ie-2][ie-3]),re)){oe=0;var q=R(De[ie-2][ie-2],De[ie-2][ie-1],De[ie-1][ie-2],De[ie-1][ie-1]);Ae.push(...q),ue&&(Re.unshift(B(De[ie-2][ie-2],De[ie-2][ie-1],De[ie-1][ie-2],De[ie-1][ie-1],q[0],q[1],re,fe)),F(ee,Y),Pe=i(Pe,ee),ie>2&&(ee=c(Array(ie-2).fill(xe)))),ie-=2,De.pop(),De.pop();for(var J=0;J<ie;J++)De[J].pop(),De[J].pop()}if(ie===0)break}if(Ae.sort((ke,Fe)=>+t(l(ke),l(Fe))),oe>100){var ye=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+Ae.join(", "));throw ye.values=Ae,ye.vectors=[],ye}var we=ue?i(Pe,U(Re,Y)):void 0;return{values:Ae,C:we}}function D(te,Y,re,fe,ue,ge,Se){var xe=h(re),De=i(xe,te,re),Ae=Se==="BigNumber",ie=Se==="Complex",Re=Ae?u(0):ie?w(0):0,Pe=Ae?u(1):ie?w(1):1,ee=[],oe=[];for(var Me of ue){var se=N(ee,Me,p);se===-1?(ee.push(Me),oe.push(1)):oe[se]+=1}for(var G=[],j=ee.length,he=Array(Y).fill(Re),Ce=c(Array(Y).fill(Pe)),q=function(){var we=ee[J],ke=t(De,i(we,Ce)),Fe=y(ke,he);for(Fe.shift();Fe.length<oe[J];){var He=I(ke,Y,Fe,ge,Se);if(He===null)break;Fe.push(He)}var Ie=i(h(fe),re);Fe=Fe.map(Ze=>i(Ie,Ze)),G.push(...Fe.map(Ze=>({value:we,vector:r(Ze)})))},J=0;J<j;J++)q();return G}function R(te,Y,re,fe){var ue=e(te,fe),ge=t(o(te,fe),o(Y,re)),Se=o(ue,.5),xe=o(a(t(o(ue,ue),o(4,ge))),.5);return[e(Se,xe),t(Se,xe)]}function B(te,Y,re,fe,ue,ge,Se,xe){var De=xe==="BigNumber",Ae=xe==="Complex",ie=De?u(0):Ae?w(0):0,Re=De?u(1):Ae?w(1):1;if(v(l(re),Se))return[[Re,ie],[ie,Re]];if(b(l(t(ue,ge)),Se))return[[t(ue,fe),t(ge,fe)],[re,re]];var Pe=t(te,ue),ee=t(fe,ue);return v(l(Y),Se)&&v(l(ee),Se)?[[Pe,Re],[re,ie]]:[[Y,ie],[ee,Re]]}function F(te,Y){for(var re=0;re<te.length;re++)te[re].push(...Array(Y-te[re].length).fill(0));for(var fe=te.length;fe<Y;fe++)te.push(Array(Y).fill(0)),te[fe][fe]=1;return te}function U(te,Y){for(var re=[],fe=0;fe<Y;fe++)re[fe]=Array(Y).fill(0);var ue=0;for(var ge of te){for(var Se=ge.length,xe=0;xe<Se;xe++)for(var De=0;De<Se;De++)re[ue+xe][ue+De]=ge[xe][De];ue+=Se}return re}function N(te,Y,re){for(var fe=0;fe<te.length;fe++)if(re(te[fe],Y))return fe;return-1}function I(te,Y,re,fe,ue){for(var ge=ue==="BigNumber"?u(1e3):1e3,Se,xe=0;xe<5;++xe){Se=V(Y,re,ue);try{Se=g(te,Se)}catch{continue}if(b(X(Se),ge))break}if(xe>=5)return null;for(xe=0;;){var De=g(te,Se);if(v(X(L(Se,[De])),fe))break;if(++xe>=10)return null;Se=Z(De)}return Se}function V(te,Y,re){var fe=re==="BigNumber",ue=re==="Complex",ge=Array(te).fill(0).map(Se=>2*Math.random()-1);return fe&&(ge=ge.map(Se=>u(Se))),ue&&(ge=ge.map(Se=>w(Se))),ge=L(ge,Y),Z(ge,re)}function L(te,Y){var re=f(te);for(var fe of Y)fe=d(fe,re),te=t(te,i(s(x(fe,te),x(fe,fe)),fe));return te}function X(te){return l(a(x(te,te)))}function Z(te,Y){var re=Y==="BigNumber",fe=Y==="Complex",ue=re?u(1):fe?w(1):1;return i(s(ue,X(te)),te)}return M}function u2e(n){var{config:e,addScalar:t,subtract:r,abs:i,atan:o,cos:s,sin:a,multiplyScalar:l,inv:u,bignumber:c,multiply:f,add:d}=n;function h(T,C){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.epsilon,R=arguments.length>3?arguments[3]:void 0,B=arguments.length>4?arguments[4]:void 0;if(R==="number")return m(T,D,B);if(R==="BigNumber")return g(T,D,B);throw TypeError("Unsupported data type: "+R)}function m(T,C,D){var R=T.length,B=Math.abs(C/R),F,U;if(D){U=new Array(R);for(var N=0;N<R;N++)U[N]=Array(R).fill(0),U[N][N]=1}for(var I=x(T);Math.abs(I[1])>=Math.abs(B);){var V=I[0][0],L=I[0][1];F=y(T[V][V],T[L][L],T[V][L]),T=S(T,F,V,L),D&&(U=w(U,F,V,L)),I=x(T)}for(var X=Array(R).fill(0),Z=0;Z<R;Z++)X[Z]=T[Z][Z];return A(Kt(X),U,D)}function g(T,C,D){var R=T.length,B=i(C/R),F,U;if(D){U=new Array(R);for(var N=0;N<R;N++)U[N]=Array(R).fill(0),U[N][N]=1}for(var I=M(T);i(I[1])>=i(B);){var V=I[0][0],L=I[0][1];F=p(T[V][V],T[L][L],T[V][L]),T=v(T,F,V,L),D&&(U=b(U,F,V,L)),I=M(T)}for(var X=Array(R).fill(0),Z=0;Z<R;Z++)X[Z]=T[Z][Z];return A(Kt(X),U,D)}function y(T,C,D){var R=C-T;return Math.abs(R)<=e.epsilon?Math.PI/4:.5*Math.atan(2*D/(C-T))}function p(T,C,D){var R=r(C,T);return i(R)<=e.epsilon?c(-1).acos().div(4):l(.5,o(f(2,D,u(R))))}function w(T,C,D,R){for(var B=T.length,F=Math.cos(C),U=Math.sin(C),N=Array(B).fill(0),I=Array(B).fill(0),V=0;V<B;V++)N[V]=F*T[V][D]-U*T[V][R],I[V]=U*T[V][D]+F*T[V][R];for(var L=0;L<B;L++)T[L][D]=N[L],T[L][R]=I[L];return T}function b(T,C,D,R){for(var B=T.length,F=s(C),U=a(C),N=Array(B).fill(c(0)),I=Array(B).fill(c(0)),V=0;V<B;V++)N[V]=r(l(F,T[V][D]),l(U,T[V][R])),I[V]=t(l(U,T[V][D]),l(F,T[V][R]));for(var L=0;L<B;L++)T[L][D]=N[L],T[L][R]=I[L];return T}function v(T,C,D,R){for(var B=T.length,F=c(s(C)),U=c(a(C)),N=l(F,F),I=l(U,U),V=Array(B).fill(c(0)),L=Array(B).fill(c(0)),X=f(c(2),F,U,T[D][R]),Z=t(r(l(N,T[D][D]),X),l(I,T[R][R])),te=d(l(I,T[D][D]),X,l(N,T[R][R])),Y=0;Y<B;Y++)V[Y]=r(l(F,T[D][Y]),l(U,T[R][Y])),L[Y]=t(l(U,T[D][Y]),l(F,T[R][Y]));T[D][D]=Z,T[R][R]=te,T[D][R]=c(0),T[R][D]=c(0);for(var re=0;re<B;re++)re!==D&&re!==R&&(T[D][re]=V[re],T[re][D]=V[re],T[R][re]=L[re],T[re][R]=L[re]);return T}function S(T,C,D,R){for(var B=T.length,F=Math.cos(C),U=Math.sin(C),N=F*F,I=U*U,V=Array(B).fill(0),L=Array(B).fill(0),X=N*T[D][D]-2*F*U*T[D][R]+I*T[R][R],Z=I*T[D][D]+2*F*U*T[D][R]+N*T[R][R],te=0;te<B;te++)V[te]=F*T[D][te]-U*T[R][te],L[te]=U*T[D][te]+F*T[R][te];T[D][D]=X,T[R][R]=Z,T[D][R]=0,T[R][D]=0;for(var Y=0;Y<B;Y++)Y!==D&&Y!==R&&(T[D][Y]=V[Y],T[Y][D]=V[Y],T[R][Y]=L[Y],T[Y][R]=L[Y]);return T}function x(T){for(var C=T.length,D=0,R=[0,1],B=0;B<C;B++)for(var F=B+1;F<C;F++)Math.abs(D)<Math.abs(T[B][F])&&(D=Math.abs(T[B][F]),R=[B,F]);return[R,D]}function M(T){for(var C=T.length,D=0,R=[0,1],B=0;B<C;B++)for(var F=B+1;F<C;F++)i(D)<i(T[B][F])&&(D=i(T[B][F]),R=[B,F]);return[R,D]}function A(T,C,D){var R=T.length,B=Array(R),F;if(D){F=Array(R);for(var U=0;U<R;U++)F[U]=Array(R)}for(var N=0;N<R;N++){for(var I=0,V=T[0],L=0;L<T.length;L++)i(T[L])<i(V)&&(I=L,V=T[I]);if(B[N]=T.splice(I,1)[0],D)for(var X=0;X<R;X++)F[N][X]=C[X][I],C[X].splice(I,1)}if(!D)return{values:B};var Z=F.map((te,Y)=>({value:B[Y],vector:te}));return{values:B,eigenvectors:Z}}return h}var c2e="eigs",f2e=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],d2e=ae(c2e,f2e,n=>{var{config:e,typed:t,matrix:r,addScalar:i,subtract:o,equal:s,abs:a,atan:l,cos:u,sin:c,multiplyScalar:f,divideScalar:d,inv:h,bignumber:m,multiply:g,add:y,larger:p,column:w,flatten:b,number:v,complex:S,sqrt:x,diag:M,size:A,reshape:T,qr:C,usolve:D,usolveAll:R,im:B,re:F,smaller:U,matrixFromColumns:N,dot:I}=n,V=u2e({config:e,addScalar:i,subtract:o,column:w,flatten:b,equal:s,abs:a,atan:l,cos:u,sin:c,multiplyScalar:f,inv:h,bignumber:m,complex:S,multiply:g,add:y}),L=l2e({config:e,addScalar:i,subtract:o,multiply:g,multiplyScalar:f,flatten:b,divideScalar:d,sqrt:x,abs:a,bignumber:m,diag:M,size:A,reshape:T,qr:C,inv:h,usolve:D,usolveAll:R,equal:s,complex:S,larger:p,smaller:U,matrixFromColumns:N,dot:I});return t("eigs",{Array:function(ge){return X(r(ge))},"Array, number|BigNumber":function(ge,Se){return X(r(ge),{precision:Se})},"Array, Object"(ue,ge){return X(r(ue),ge)},Matrix:function(ge){return X(ge,{matricize:!0})},"Matrix, number|BigNumber":function(ge,Se){return X(ge,{precision:Se,matricize:!0})},"Matrix, Object":function(ge,Se){var xe={matricize:!0};return pt(xe,Se),X(ge,xe)}});function X(ue){var ge,Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},xe="eigenvectors"in Se?Se.eigenvectors:!0,De=(ge=Se.precision)!==null&&ge!==void 0?ge:e.epsilon,Ae=Z(ue,De,xe);return Se.matricize&&(Ae.values=r(Ae.values),xe&&(Ae.eigenvectors=Ae.eigenvectors.map(ie=>{var{value:Re,vector:Pe}=ie;return{value:Re,vector:r(Pe)}}))),xe&&Object.defineProperty(Ae,"vectors",{enumerable:!1,get:()=>{throw new Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),Ae}function Z(ue,ge,Se){var xe=ue.toArray(),De=ue.size();if(De.length!==2||De[0]!==De[1])throw new RangeError("Matrix must be square (size: ".concat(fn(De),")"));var Ae=De[0];if(Y(xe,Ae,ge)&&(re(xe,Ae),te(xe,Ae,ge))){var ie=fe(ue,xe,Ae);return V(xe,Ae,ge,ie,Se)}var Re=fe(ue,xe,Ae);return L(xe,Ae,ge,Re,Se)}function te(ue,ge,Se){for(var xe=0;xe<ge;xe++)for(var De=xe;De<ge;De++)if(p(m(a(o(ue[xe][De],ue[De][xe]))),Se))return!1;return!0}function Y(ue,ge,Se){for(var xe=0;xe<ge;xe++)for(var De=0;De<ge;De++)if(p(m(a(B(ue[xe][De]))),Se))return!1;return!0}function re(ue,ge){for(var Se=0;Se<ge;Se++)for(var xe=0;xe<ge;xe++)ue[Se][xe]=F(ue[Se][xe])}function fe(ue,ge,Se){var xe=ue.datatype();if(xe==="number"||xe==="BigNumber"||xe==="Complex")return xe;for(var De=!1,Ae=!1,ie=!1,Re=0;Re<Se;Re++)for(var Pe=0;Pe<Se;Pe++){var ee=ge[Re][Pe];if(rn(ee)||Zh(ee))De=!0;else if(en(ee))Ae=!0;else if(el(ee))ie=!0;else throw TypeError("Unsupported type in Matrix: "+Zn(ee))}if(Ae&&ie&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),ie){for(var oe=0;oe<Se;oe++)for(var Me=0;Me<Se;Me++)ge[oe][Me]=S(ge[oe][Me]);return"Complex"}if(Ae){for(var se=0;se<Se;se++)for(var G=0;G<Se;G++)ge[se][G]=m(ge[se][G]);return"BigNumber"}if(De){for(var j=0;j<Se;j++)for(var he=0;he<Se;he++)ge[j][he]=v(ge[j][he]);return"number"}else throw TypeError("Matrix contains unsupported types only.")}}),i6="expm",h2e=["typed","abs","add","identity","inv","multiply"],p2e=ae(i6,h2e,n=>{var{typed:e,abs:t,add:r,identity:i,inv:o,multiply:s}=n;return e(i6,{Matrix:function(f){var d=f.size();if(d.length!==2||d[0]!==d[1])throw new RangeError("Matrix must be square (size: "+fn(d)+")");for(var h=d[0],m=1e-15,g=a(f),y=l(g,m),p=y.q,w=y.j,b=s(f,Math.pow(2,-w)),v=i(h),S=i(h),x=1,M=b,A=-1,T=1;T<=p;T++)T>1&&(M=s(M,b),A=-A),x=x*(p-T+1)/((2*p-T+1)*T),v=r(v,s(x,M)),S=r(S,s(x*A,M));for(var C=s(o(S),v),D=0;D<w;D++)C=s(C,C);return lf(f)?f.createSparseMatrix(C):C}});function a(c){for(var f=c.size()[0],d=0,h=0;h<f;h++){for(var m=0,g=0;g<f;g++)m+=t(c.get([h,g]));d=Math.max(m,d)}return d}function l(c,f){for(var d=30,h=0;h<d;h++)for(var m=0;m<=h;m++){var g=h-m;if(u(c,m,g)<f)return{q:m,j:g}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}function u(c,f,d){for(var h=1,m=2;m<=f;m++)h*=m;for(var g=h,y=f+1;y<=2*f;y++)g*=y;var p=g*(2*f+1);return 8*Math.pow(c/Math.pow(2,d),2*f)*h*h/(g*p)}}),o6="sqrtm",m2e=["typed","abs","add","multiply","map","sqrt","subtract","inv","size","max","identity"],g2e=ae(o6,m2e,n=>{var{typed:e,abs:t,add:r,multiply:i,map:o,sqrt:s,subtract:a,inv:l,size:u,max:c,identity:f}=n,d=1e3,h=1e-6;function m(g){var y,p=0,w=g,b=f(u(g));do{var v=w;if(w=i(.5,r(v,l(b))),b=i(.5,r(b,l(v))),y=c(t(a(w,v))),y>h&&++p>d)throw new Error("computing square root of matrix: iterative method could not converge")}while(y>h);return w}return e(o6,{"Array | Matrix":function(y){var p=Vt(y)?y.size():on(y);switch(p.length){case 1:if(p[0]===1)return o(y,s);throw new RangeError("Matrix must be square (size: "+fn(p)+")");case 2:{var w=p[0],b=p[1];if(w===b)return m(y);throw new RangeError("Matrix must be square (size: "+fn(p)+")")}default:throw new RangeError("Matrix must be at most two dimensional (size: "+fn(p)+")")}}})}),s6="sylvester",v2e=["typed","schur","matrixFromColumns","matrix","multiply","range","concat","transpose","index","subset","add","subtract","identity","lusolve","abs"],y2e=ae(s6,v2e,n=>{var{typed:e,schur:t,matrixFromColumns:r,matrix:i,multiply:o,range:s,concat:a,transpose:l,index:u,subset:c,add:f,subtract:d,identity:h,lusolve:m,abs:g}=n;return e(s6,{"Matrix, Matrix, Matrix":y,"Array, Matrix, Matrix":function(w,b,v){return y(i(w),b,v)},"Array, Array, Matrix":function(w,b,v){return y(i(w),i(b),v)},"Array, Matrix, Array":function(w,b,v){return y(i(w),b,i(v))},"Matrix, Array, Matrix":function(w,b,v){return y(w,i(b),v)},"Matrix, Array, Array":function(w,b,v){return y(w,i(b),i(v))},"Matrix, Matrix, Array":function(w,b,v){return y(w,b,i(v))},"Array, Array, Array":function(w,b,v){return y(i(w),i(b),i(v)).toArray()}});function y(p,w,b){for(var v=w.size()[0],S=p.size()[0],x=t(p),M=x.T,A=x.U,T=t(o(-1,w)),C=T.T,D=T.U,R=o(o(l(A),b),D),B=s(0,S),F=[],U=(ie,Re)=>a(ie,Re,1),N=(ie,Re)=>a(ie,Re,0),I=0;I<v;I++)if(I<v-1&&g(c(C,u(I+1,I)))>1e-5){for(var V=N(c(R,u(B,I)),c(R,u(B,I+1))),L=0;L<I;L++)V=f(V,N(o(F[L],c(C,u(L,I))),o(F[L],c(C,u(L,I+1)))));var X=o(h(S),o(-1,c(C,u(I,I)))),Z=o(h(S),o(-1,c(C,u(I+1,I)))),te=o(h(S),o(-1,c(C,u(I,I+1)))),Y=o(h(S),o(-1,c(C,u(I+1,I+1)))),re=N(U(f(M,X),Z),U(te,f(M,Y))),fe=m(re,V);F[I]=fe.subset(u(s(0,S),0)),F[I+1]=fe.subset(u(s(S,2*S),0)),I++}else{for(var ue=c(R,u(B,I)),ge=0;ge<I;ge++)ue=f(ue,o(F[ge],c(C,u(ge,I))));var Se=c(C,u(I,I)),xe=d(M,o(Se,h(S)));F[I]=m(xe,ue)}var De=i(r(...F)),Ae=o(A,o(De,l(D)));return Ae}}),a6="schur",x2e=["typed","matrix","identity","multiply","qr","norm","subtract"],b2e=ae(a6,x2e,n=>{var{typed:e,matrix:t,identity:r,multiply:i,qr:o,norm:s,subtract:a}=n;return e(a6,{Array:function(c){var f=l(t(c));return{U:f.U.valueOf(),T:f.T.valueOf()}},Matrix:function(c){return l(c)}});function l(u){var c=u.size()[0],f=u,d=r(c),h=0,m;do{m=f;var g=o(f),y=g.Q,p=g.R;if(f=i(p,y),d=i(d,y),h++>100)break}while(s(a(f,m))>1e-4);return{U:d,T:f}}}),l6="lyap",w2e=["typed","matrix","sylvester","multiply","transpose"],S2e=ae(l6,w2e,n=>{var{typed:e,matrix:t,sylvester:r,multiply:i,transpose:o}=n;return e(l6,{"Matrix, Matrix":function(a,l){return r(a,o(a),i(-1,l))},"Array, Matrix":function(a,l){return r(t(a),o(t(a)),i(-1,l))},"Matrix, Array":function(a,l){return r(a,o(t(a)),t(i(-1,l)))},"Array, Array":function(a,l){return r(t(a),o(t(a)),t(i(-1,l))).toArray()}})}),_2e="divide",E2e=["typed","matrix","multiply","equalScalar","divideScalar","inv"],M2e=ae(_2e,E2e,n=>{var{typed:e,matrix:t,multiply:r,equalScalar:i,divideScalar:o,inv:s}=n,a=Zi({typed:e,equalScalar:i}),l=cl({typed:e});return e("divide",zX({"Array | Matrix, Array | Matrix":function(c,f){return r(c,s(f))},"DenseMatrix, any":function(c,f){return l(c,f,o,!1)},"SparseMatrix, any":function(c,f){return a(c,f,o,!1)},"Array, any":function(c,f){return l(t(c),f,o,!1).valueOf()},"any, Array | Matrix":function(c,f){return r(c,s(f))}},o.signatures))}),u6="distance",C2e=["typed","addScalar","subtractScalar","divideScalar","multiplyScalar","deepEqual","sqrt","abs"],A2e=ae(u6,C2e,n=>{var{typed:e,addScalar:t,subtractScalar:r,multiplyScalar:i,divideScalar:o,deepEqual:s,sqrt:a,abs:l}=n;return e(u6,{"Array, Array, Array":function(S,x,M){if(S.length===2&&x.length===2&&M.length===2){if(!c(S))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!c(x))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!c(M))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(s(x,M))throw new TypeError("LinePoint1 should not be same with LinePoint2");var A=r(M[1],x[1]),T=r(x[0],M[0]),C=r(i(M[0],x[1]),i(x[0],M[1]));return y(S[0],S[1],A,T,C)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(S,x,M){if(Object.keys(S).length===2&&Object.keys(x).length===2&&Object.keys(M).length===2){if(!c(S))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!c(x))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!c(M))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(s(m(x),m(M)))throw new TypeError("LinePoint1 should not be same with LinePoint2");if("pointX"in S&&"pointY"in S&&"lineOnePtX"in x&&"lineOnePtY"in x&&"lineTwoPtX"in M&&"lineTwoPtY"in M){var A=r(M.lineTwoPtY,x.lineOnePtY),T=r(x.lineOnePtX,M.lineTwoPtX),C=r(i(M.lineTwoPtX,x.lineOnePtY),i(x.lineOnePtX,M.lineTwoPtY));return y(S.pointX,S.pointY,A,T,C)}else throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(S,x){if(S.length===2&&x.length===3){if(!c(S))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!f(x))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return y(S[0],S[1],x[0],x[1],x[2])}else if(S.length===3&&x.length===6){if(!f(S))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!h(x))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return p(S[0],S[1],S[2],x[0],x[1],x[2],x[3],x[4],x[5])}else if(S.length===x.length&&S.length>0){if(!d(S))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!d(x))throw new TypeError("All values of an array should be numbers or BigNumbers");return w(S,x)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(S,x){if(Object.keys(S).length===2&&Object.keys(x).length===3){if(!c(S))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!f(x))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in S&&"pointY"in S&&"xCoeffLine"in x&&"yCoeffLine"in x&&"constant"in x)return y(S.pointX,S.pointY,x.xCoeffLine,x.yCoeffLine,x.constant);throw new TypeError("Key names do not match")}else if(Object.keys(S).length===3&&Object.keys(x).length===6){if(!f(S))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!h(x))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in S&&"pointY"in S&&"x0"in x&&"y0"in x&&"z0"in x&&"a"in x&&"b"in x&&"c"in x)return p(S.pointX,S.pointY,S.pointZ,x.x0,x.y0,x.z0,x.a,x.b,x.c);throw new TypeError("Key names do not match")}else if(Object.keys(S).length===2&&Object.keys(x).length===2){if(!c(S))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!c(x))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in S&&"pointOneY"in S&&"pointTwoX"in x&&"pointTwoY"in x)return w([S.pointOneX,S.pointOneY],[x.pointTwoX,x.pointTwoY]);throw new TypeError("Key names do not match")}else if(Object.keys(S).length===3&&Object.keys(x).length===3){if(!f(S))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!f(x))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in S&&"pointOneY"in S&&"pointOneZ"in S&&"pointTwoX"in x&&"pointTwoY"in x&&"pointTwoZ"in x)return w([S.pointOneX,S.pointOneY,S.pointOneZ],[x.pointTwoX,x.pointTwoY,x.pointTwoZ]);throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},Array:function(S){if(!g(S))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return b(S)}});function u(v){return typeof v=="number"||en(v)}function c(v){return v.constructor!==Array&&(v=m(v)),u(v[0])&&u(v[1])}function f(v){return v.constructor!==Array&&(v=m(v)),u(v[0])&&u(v[1])&&u(v[2])}function d(v){return Array.isArray(v)||(v=m(v)),v.every(u)}function h(v){return v.constructor!==Array&&(v=m(v)),u(v[0])&&u(v[1])&&u(v[2])&&u(v[3])&&u(v[4])&&u(v[5])}function m(v){for(var S=Object.keys(v),x=[],M=0;M<S.length;M++)x.push(v[S[M]]);return x}function g(v){if(v[0].length===2&&u(v[0][0])&&u(v[0][1])){if(v.some(S=>S.length!==2||!u(S[0])||!u(S[1])))return!1}else if(v[0].length===3&&u(v[0][0])&&u(v[0][1])&&u(v[0][2])){if(v.some(S=>S.length!==3||!u(S[0])||!u(S[1])||!u(S[2])))return!1}else return!1;return!0}function y(v,S,x,M,A){var T=l(t(t(i(x,v),i(M,S)),A)),C=a(t(i(x,x),i(M,M)));return o(T,C)}function p(v,S,x,M,A,T,C,D,R){var B=[r(i(r(A,S),R),i(r(T,x),D)),r(i(r(T,x),C),i(r(M,v),R)),r(i(r(M,v),D),i(r(A,S),C))];B=a(t(t(i(B[0],B[0]),i(B[1],B[1])),i(B[2],B[2])));var F=a(t(t(i(C,C),i(D,D)),i(R,R)));return o(B,F)}function w(v,S){for(var x=v.length,M=0,A=0,T=0;T<x;T++)A=r(v[T],S[T]),M=t(i(A,A),M);return a(M)}function b(v){for(var S=[],x=[],M=[],A=0;A<v.length-1;A++)for(var T=A+1;T<v.length;T++)v[0].length===2?(x=[v[A][0],v[A][1]],M=[v[T][0],v[T][1]]):v[0].length===3&&(x=[v[A][0],v[A][1],v[A][2]],M=[v[T][0],v[T][1],v[T][2]]),S.push(w(x,M));return S}}),T2e="intersect",D2e=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],N2e=ae(T2e,D2e,n=>{var{typed:e,config:t,abs:r,add:i,addScalar:o,matrix:s,multiply:a,multiplyScalar:l,divideScalar:u,subtract:c,smaller:f,equalScalar:d,flatten:h,isZero:m,isNumeric:g}=n;return e("intersect",{"Array, Array, Array":y,"Array, Array, Array, Array":p,"Matrix, Matrix, Matrix":function(D,R,B){var F=y(D.valueOf(),R.valueOf(),B.valueOf());return F===null?null:s(F)},"Matrix, Matrix, Matrix, Matrix":function(D,R,B,F){var U=p(D.valueOf(),R.valueOf(),B.valueOf(),F.valueOf());return U===null?null:s(U)}});function y(C,D,R){if(C=w(C),D=w(D),R=w(R),!v(C))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!v(D))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!S(R))throw new TypeError("Array with 4 numbers expected as third argument");return T(C[0],C[1],C[2],D[0],D[1],D[2],R[0],R[1],R[2],R[3])}function p(C,D,R,B){if(C=w(C),D=w(D),R=w(R),B=w(B),C.length===2){if(!b(C))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!b(D))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!b(R))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!b(B))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return x(C,D,R,B)}else if(C.length===3){if(!v(C))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!v(D))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!v(R))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!v(B))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return A(C[0],C[1],C[2],D[0],D[1],D[2],R[0],R[1],R[2],B[0],B[1],B[2])}else throw new TypeError("Arrays with two or thee dimensional points expected")}function w(C){return C.length===1?C[0]:C.length>1&&Array.isArray(C[0])&&C.every(D=>Array.isArray(D)&&D.length===1)?h(C):C}function b(C){return C.length===2&&g(C[0])&&g(C[1])}function v(C){return C.length===3&&g(C[0])&&g(C[1])&&g(C[2])}function S(C){return C.length===4&&g(C[0])&&g(C[1])&&g(C[2])&&g(C[3])}function x(C,D,R,B){var F=C,U=R,N=c(F,D),I=c(U,B),V=c(l(N[0],I[1]),l(I[0],N[1]));if(m(V)||f(r(V),t.epsilon))return null;var L=l(I[0],F[1]),X=l(I[1],F[0]),Z=l(I[0],U[1]),te=l(I[1],U[0]),Y=u(o(c(c(L,X),Z),te),V);return i(a(N,Y),F)}function M(C,D,R,B,F,U,N,I,V,L,X,Z){var te=l(c(C,D),c(R,B)),Y=l(c(F,U),c(N,I)),re=l(c(V,L),c(X,Z));return o(o(te,Y),re)}function A(C,D,R,B,F,U,N,I,V,L,X,Z){var te=M(C,N,L,N,D,I,X,I,R,V,Z,V),Y=M(L,N,B,C,X,I,F,D,Z,V,U,R),re=M(C,N,B,C,D,I,F,D,R,V,U,R),fe=M(L,N,L,N,X,I,X,I,Z,V,Z,V),ue=M(B,C,B,C,F,D,F,D,U,R,U,R),ge=c(l(te,Y),l(re,fe)),Se=c(l(ue,fe),l(Y,Y));if(m(Se))return null;var xe=u(ge,Se),De=u(o(te,l(xe,Y)),fe),Ae=o(C,l(xe,c(B,C))),ie=o(D,l(xe,c(F,D))),Re=o(R,l(xe,c(U,R))),Pe=o(N,l(De,c(L,N))),ee=o(I,l(De,c(X,I))),oe=o(V,l(De,c(Z,V)));return d(Ae,Pe)&&d(ie,ee)&&d(Re,oe)?[Ae,ie,Re]:null}function T(C,D,R,B,F,U,N,I,V,L){var X=l(C,N),Z=l(B,N),te=l(D,I),Y=l(F,I),re=l(R,V),fe=l(U,V),ue=c(c(c(L,X),te),re),ge=c(c(c(o(o(Z,Y),fe),X),te),re),Se=u(ue,ge),xe=o(C,l(Se,c(B,C))),De=o(D,l(Se,c(F,D))),Ae=o(R,l(Se,c(U,R)));return[xe,De,Ae]}}),c6="sum",P2e=["typed","config","add","numeric"],$K=ae(c6,P2e,n=>{var{typed:e,config:t,add:r,numeric:i}=n;return e(c6,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":s,"...":function(l){if(Gg(l))throw new TypeError("Scalar values expected in function sum");return o(l)}});function o(a){var l;return sc(a,function(u){try{l=l===void 0?u:r(l,u)}catch(c){throw jo(c,"sum",u)}}),l===void 0&&(l=i(0,t.number)),typeof l=="string"&&(l=i(l,t.number)),l}function s(a,l){try{var u=a2(a,l,r);return u}catch(c){throw jo(c,"sum")}}}),sw="cumsum",R2e=["typed","add","unaryPlus"],HK=ae(sw,R2e,n=>{var{typed:e,add:t,unaryPlus:r}=n;return e(sw,{Array:i,Matrix:function(u){return u.create(i(u.valueOf()))},"Array, number | BigNumber":s,"Matrix, number | BigNumber":function(u,c){return u.create(s(u.valueOf(),c))},"...":function(u){if(Gg(u))throw new TypeError("All values expected to be scalar in function cumsum");return i(u)}});function i(l){try{return o(l)}catch(u){throw jo(u,sw)}}function o(l){if(l.length===0)return[];for(var u=[r(l[0])],c=1;c<l.length;++c)u.push(t(u[c-1],l[c]));return u}function s(l,u){var c=on(l);if(u<0||u>=c.length)throw new Ia(u,c.length);try{return a(l,u)}catch(f){throw jo(f,sw)}}function a(l,u){var c,f,d;if(u<=0){var h=l[0][0];if(Array.isArray(h)){for(d=wY(l),f=[],c=0;c<d.length;c++)f[c]=a(d[c],u-1);return f}else return o(l)}else{for(f=[],c=0;c<l.length;c++)f[c]=a(l[c],u-1);return f}}}),f6="mean",O2e=["typed","add","divide"],WK=ae(f6,O2e,n=>{var{typed:e,add:t,divide:r}=n;return e(f6,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":i,"...":function(a){if(Gg(a))throw new TypeError("Scalar values expected in function mean");return o(a)}});function i(s,a){try{var l=a2(s,a,t),u=Array.isArray(s)?on(s):s.size();return r(l,u[a])}catch(c){throw jo(c,"mean")}}function o(s){var a,l=0;if(sc(s,function(u){try{a=a===void 0?u:t(a,u),l++}catch(c){throw jo(c,"mean",u)}}),l===0)throw new Error("Cannot calculate the mean of an empty array");return r(a,l)}}),d6="median",k2e=["typed","add","divide","compare","partitionSelect"],I2e=ae(d6,k2e,n=>{var{typed:e,add:t,divide:r,compare:i,partitionSelect:o}=n;function s(u){try{u=Cn(u.valueOf());var c=u.length;if(c===0)throw new Error("Cannot calculate median of an empty array");if(c%2===0){for(var f=c/2-1,d=o(u,f+1),h=u[f],m=0;m<f;++m)i(u[m],h)>0&&(h=u[m]);return l(h,d)}else{var g=o(u,(c-1)/2);return a(g)}}catch(y){throw jo(y,"median")}}var a=e({"number | BigNumber | Complex | Unit":function(c){return c}}),l=e({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(c,f){return r(t(c,f),2)}});return e(d6,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(c,f){throw new Error("median(A, dim) is not yet supported")},"...":function(c){if(Gg(c))throw new TypeError("Scalar values expected in function median");return s(c)}})}),h6="mad",L2e=["typed","abs","map","median","subtract"],F2e=ae(h6,L2e,n=>{var{typed:e,abs:t,map:r,median:i,subtract:o}=n;return e(h6,{"Array | Matrix":s,"...":function(l){return s(l)}});function s(a){if(a=Cn(a.valueOf()),a.length===0)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var l=i(a);return i(r(a,function(u){return t(o(u,l))}))}catch(u){throw u instanceof TypeError&&u.message.includes("median")?new TypeError(u.message.replace("median","mad")):jo(u,"mad")}}}),vT="unbiased",p6="variance",B2e=["typed","add","subtract","multiply","divide","apply","isNaN"],jK=ae(p6,B2e,n=>{var{typed:e,add:t,subtract:r,multiply:i,divide:o,apply:s,isNaN:a}=n;return e(p6,{"Array | Matrix":function(f){return l(f,vT)},"Array | Matrix, string":l,"Array | Matrix, number | BigNumber":function(f,d){return u(f,d,vT)},"Array | Matrix, number | BigNumber, string":u,"...":function(f){return l(f,vT)}});function l(c,f){var d,h=0;if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(sc(c,function(y){try{d=d===void 0?y:t(d,y),h++}catch(p){throw jo(p,"variance",y)}}),h===0)throw new Error("Cannot calculate variance of an empty array");var m=o(d,h);if(d=void 0,sc(c,function(y){var p=r(y,m);d=d===void 0?i(p,p):t(d,i(p,p))}),a(d))return d;switch(f){case"uncorrected":return o(d,h);case"biased":return o(d,h+1);case"unbiased":{var g=en(d)?d.mul(0):0;return h===1?g:o(d,h-1)}default:throw new Error('Unknown normalization "'+f+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function u(c,f,d){try{if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return s(c,f,h=>l(h,d))}catch(h){throw jo(h,"variance")}}}),m6="quantileSeq",z2e=["typed","?bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger"],GK=ae(m6,z2e,n=>{var{typed:e,bignumber:t,add:r,subtract:i,divide:o,multiply:s,partitionSelect:a,compare:l,isInteger:u,smaller:c,smallerEq:f,larger:d}=n,h=Lk({typed:e,isInteger:u});return e(m6,{"Array | Matrix, number | BigNumber":(w,b)=>g(w,b,!1),"Array | Matrix, number | BigNumber, number":(w,b,v)=>m(w,b,!1,v,g),"Array | Matrix, number | BigNumber, boolean":g,"Array | Matrix, number | BigNumber, boolean, number":(w,b,v,S)=>m(w,b,v,S,g),"Array | Matrix, Array | Matrix":(w,b)=>y(w,b,!1),"Array | Matrix, Array | Matrix, number":(w,b,v)=>m(w,b,!1,v,y),"Array | Matrix, Array | Matrix, boolean":y,"Array | Matrix, Array | Matrix, boolean, number":(w,b,v,S)=>m(w,b,v,S,y)});function m(w,b,v,S,x){return h(w,S,M=>x(M,b,v))}function g(w,b,v){var S,x=w.valueOf();if(c(b,0))throw new Error("N/prob must be non-negative");if(f(b,1))return rn(b)?p(x,b,v):t(p(x,b,v));if(d(b,1)){if(!u(b))throw new Error("N must be a positive integer");if(d(b,4294967295))throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var M=r(b,1);S=[];for(var A=0;c(A,b);A++){var T=o(A+1,M);S.push(p(x,T,v))}return rn(b)?S:t(S)}}function y(w,b,v){for(var S=w.valueOf(),x=b.valueOf(),M=[],A=0;A<x.length;++A)M.push(p(S,x[A],v));return M}function p(w,b,v){var S=Cn(w),x=S.length;if(x===0)throw new Error("Cannot calculate quantile of an empty sequence");var M=rn(b)?b*(x-1):b.times(x-1),A=rn(b)?Math.floor(M):M.floor().toNumber(),T=rn(b)?M%1:M.minus(A);if(u(M))return v?S[M]:a(S,rn(b)?M:M.valueOf());var C,D;if(v)C=S[A],D=S[A+1];else{D=a(S,A+1),C=S[A];for(var R=0;R<A;++R)l(S[R],C)>0&&(C=S[R])}return r(s(C,i(1,T)),s(D,T))}}),g6="std",U2e=["typed","map","sqrt","variance"],qK=ae(g6,U2e,n=>{var{typed:e,map:t,sqrt:r,variance:i}=n;return e(g6,{"Array | Matrix":o,"Array | Matrix, string":o,"Array | Matrix, number | BigNumber":o,"Array | Matrix, number | BigNumber, string":o,"...":function(a){return o(a)}});function o(s,a){if(s.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var l=i.apply(null,arguments);return js(l)?t(l,r):r(l)}catch(u){throw u instanceof TypeError&&u.message.includes(" variance")?new TypeError(u.message.replace(" variance"," std")):u}}}),v6="corr",V2e=["typed","matrix","mean","sqrt","sum","add","subtract","multiply","pow","divide"],$2e=ae(v6,V2e,n=>{var{typed:e,matrix:t,sqrt:r,sum:i,add:o,subtract:s,multiply:a,pow:l,divide:u}=n;return e(v6,{"Array, Array":function(h,m){return c(h,m)},"Matrix, Matrix":function(h,m){var g=c(h.toArray(),m.toArray());return Array.isArray(g)?t(g):g}});function c(d,h){var m=[];if(Array.isArray(d[0])&&Array.isArray(h[0])){if(d.length!==h.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same length.");for(var g=0;g<d.length;g++){if(d[g].length!==h[g].length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");m.push(f(d[g],h[g]))}return m}else{if(d.length!==h.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");return f(d,h)}}function f(d,h){var m=d.length,g=i(d),y=i(h),p=d.reduce((x,M,A)=>o(x,a(M,h[A])),0),w=i(d.map(x=>l(x,2))),b=i(h.map(x=>l(x,2))),v=s(a(m,p),a(g,y)),S=r(a(s(a(m,w),l(g,2)),s(a(m,b),l(y,2))));return u(v,S)}}),y6="combinations",H2e=["typed"],W2e=ae(y6,H2e,n=>{var{typed:e}=n;return e(y6,{"number, number":WY,"BigNumber, BigNumber":function(r,i){var o=r.constructor,s,a,l=r.minus(i),u=new o(1);if(!x6(r)||!x6(i))throw new TypeError("Positive integer value expected in function combinations");if(i.gt(r))throw new TypeError("k must be less than n in function combinations");if(s=u,i.lt(l))for(a=u;a.lte(l);a=a.plus(u))s=s.times(i.plus(a)).dividedBy(a);else for(a=u;a.lte(i);a=a.plus(u))s=s.times(l.plus(a)).dividedBy(a);return s}})});function x6(n){return n.isInteger()&&n.gte(0)}var b6="combinationsWithRep",j2e=["typed"],G2e=ae(b6,j2e,n=>{var{typed:e}=n;return e(b6,{"number, number":function(r,i){if(!kt(r)||r<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!kt(i)||i<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(r<1)throw new TypeError("k must be less than or equal to n + k - 1");if(i<r-1){var o=Hu(r,r+i-1);return o/Hu(1,i)}var s=Hu(i+1,r+i-1);return s/Hu(1,r-1)},"BigNumber, BigNumber":function(r,i){var o=r.constructor,s,a,l=new o(1),u=r.minus(l);if(!w6(r)||!w6(i))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(r.lt(l))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(s=l,i.lt(u))for(a=l;a.lte(u);a=a.plus(l))s=s.times(i.plus(a)).dividedBy(a);else for(a=l;a.lte(i);a=a.plus(l))s=s.times(u.plus(a)).dividedBy(a);return s}})});function w6(n){return n.isInteger()&&n.gte(0)}var S6="gamma",q2e=["typed","config","multiplyScalar","pow","BigNumber","Complex"],X2e=ae(S6,q2e,n=>{var{typed:e,config:t,multiplyScalar:r,pow:i,BigNumber:o,Complex:s}=n;function a(u){if(u.im===0)return yE(u.re);if(u.re<.5){var c=new s(1-u.re,-u.im),f=new s(Math.PI*u.re,Math.PI*u.im);return new s(Math.PI).div(f.sin()).div(a(c))}u=new s(u.re-1,u.im);for(var d=new s(Xm[0],0),h=1;h<Xm.length;++h){var m=new s(Xm[h],0);d=d.add(m.div(u.add(h)))}var g=new s(u.re+YY+.5,u.im),y=Math.sqrt(2*Math.PI),p=g.pow(u.add(.5)),w=g.neg().exp();return d.mul(y).mul(p).mul(w)}return e(S6,{number:yE,Complex:a,BigNumber:function(c){if(c.isInteger())return c.isNegative()||c.isZero()?new o(1/0):l(c.minus(1));if(!c.isFinite())return new o(c.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function l(u){if(u<8)return new o([1,1,2,6,24,120,720,5040][u]);var c=t.precision+(Math.log(u.toNumber())|0),f=o.clone({precision:c});if(u%2===1)return u.times(l(new o(u-1)));for(var d=u,h=new f(u),m=u.toNumber();d>2;)d-=2,m+=d,h=h.times(m);return new o(h.toPrecision(o.precision))}}),_6="lgamma",Y2e=["Complex","typed"],K2e=ae(_6,Y2e,n=>{var{Complex:e,typed:t}=n,r=7,i=7,o=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return t(_6,{number:xE,Complex:s,BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function s(u){var c=6.283185307179586,f=1.1447298858494002,d=.1;if(u.isNaN())return new e(NaN,NaN);if(u.im===0)return new e(xE(u.re),0);if(u.re>=r||Math.abs(u.im)>=i)return a(u);if(u.re<=d){var h=$fe(c,u.im)*Math.floor(.5*u.re+.25),m=u.mul(Math.PI).sin().log(),g=s(new e(1-u.re,-u.im));return new e(f,h).sub(m).sub(g)}else return u.im>=0?l(u):l(u.conjugate()).conjugate()}function a(u){for(var c=u.sub(.5).mul(u.log()).sub(u).add(KY),f=new e(1,0).div(u),d=f.div(u),h=o[0],m=o[1],g=2*d.re,y=d.re*d.re+d.im*d.im,p=2;p<8;p++){var w=m;m=-y*h+o[p],h=g*h+w}var b=f.mul(d.mul(h).add(m));return c.add(b)}function l(u){var c=0,f=0,d=u;for(u=u.add(1);u.re<=r;){d=d.mul(u);var h=d.im<0?1:0;h!==0&&f===0&&c++,f=h,u=u.add(1)}return a(u).sub(d.log()).sub(new e(0,c*2*Math.PI*1))}}),E6="factorial",Z2e=["typed","gamma"],J2e=ae(E6,Z2e,n=>{var{typed:e,gamma:t}=n;return e(E6,{number:function(i){if(i<0)throw new Error("Value must be non-negative");return t(i+1)},BigNumber:function(i){if(i.isNegative())throw new Error("Value must be non-negative");return t(i.plus(1))},"Array | Matrix":e.referToSelf(r=>i=>hn(i,r))})}),M6="kldivergence",Q2e=["typed","matrix","divide","sum","multiply","map","dotDivide","log","isNumeric"],eCe=ae(M6,Q2e,n=>{var{typed:e,matrix:t,divide:r,sum:i,multiply:o,map:s,dotDivide:a,log:l,isNumeric:u}=n;return e(M6,{"Array, Array":function(d,h){return c(t(d),t(h))},"Matrix, Array":function(d,h){return c(d,t(h))},"Array, Matrix":function(d,h){return c(t(d),h)},"Matrix, Matrix":function(d,h){return c(d,h)}});function c(f,d){var h=d.size().length,m=f.size().length;if(h>1)throw new Error("first object must be one dimensional");if(m>1)throw new Error("second object must be one dimensional");if(h!==m)throw new Error("Length of two vectors must be equal");var g=i(f);if(g===0)throw new Error("Sum of elements in first object must be non zero");var y=i(d);if(y===0)throw new Error("Sum of elements in second object must be non zero");var p=r(f,i(f)),w=r(d,i(d)),b=i(o(p,s(a(p,w),v=>l(v))));return u(b)?b:Number.NaN}}),C6="multinomial",tCe=["typed","add","divide","multiply","factorial","isInteger","isPositive"],nCe=ae(C6,tCe,n=>{var{typed:e,add:t,divide:r,multiply:i,factorial:o,isInteger:s,isPositive:a}=n;return e(C6,{"Array | Matrix":function(u){var c=0,f=1;return sc(u,function(d){if(!s(d)||!a(d))throw new TypeError("Positive integer value expected in function multinomial");c=t(c,d),f=i(f,o(d))}),r(o(c),f)}})}),A6="permutations",rCe=["typed","factorial"],iCe=ae(A6,rCe,n=>{var{typed:e,factorial:t}=n;return e(A6,{"number | BigNumber":t,"number, number":function(i,o){if(!kt(i)||i<0)throw new TypeError("Positive integer value expected in function permutations");if(!kt(o)||o<0)throw new TypeError("Positive integer value expected in function permutations");if(o>i)throw new TypeError("second argument k must be less than or equal to first argument n");return Hu(i-o+1,i)},"BigNumber, BigNumber":function(i,o){var s,a;if(!T6(i)||!T6(o))throw new TypeError("Positive integer value expected in function permutations");if(o.gt(i))throw new TypeError("second argument k must be less than or equal to first argument n");var l=i.mul(0).add(1);for(s=l,a=i.minus(o).plus(1);a.lte(i);a=a.plus(1))s=s.times(a);return s}})});function T6(n){return n.isInteger()&&n.gte(0)}var Hk={exports:{}};Hk.exports;(function(n){(function(e,t,r){function i(l){var u=this,c=a();u.next=function(){var f=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=f-(u.c=f|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function o(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function s(l,u){var c=new i(l),f=u&&u.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,f&&(typeof f=="object"&&o(f,c),d.state=function(){return o(c,{})}),d}function a(){var l=4022871197,u=function(c){c=String(c);for(var f=0;f<c.length;f++){l+=c.charCodeAt(f);var d=.02519603282416938*l;l=d>>>0,d-=l,d*=l,l=d>>>0,d-=l,l+=d*4294967296}return(l>>>0)*23283064365386963e-26};return u}t&&t.exports?t.exports=s:this.alea=s})(ks,n)})(Hk);var oCe=Hk.exports,Wk={exports:{}};Wk.exports;(function(n){(function(e,t,r){function i(a){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var f=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^f^f>>>8},a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function o(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function s(a,l){var u=new i(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&o(c,u),f.state=function(){return o(u,{})}),f}t&&t.exports?t.exports=s:this.xor128=s})(ks,n)})(Wk);var sCe=Wk.exports,jk={exports:{}};jk.exports;(function(n){(function(e,t,r){function i(a){var l=this,u="";l.next=function(){var f=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(f^f<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function o(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function s(a,l){var u=new i(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&o(c,u),f.state=function(){return o(u,{})}),f}t&&t.exports?t.exports=s:this.xorwow=s})(ks,n)})(jk);var aCe=jk.exports,Gk={exports:{}};Gk.exports;(function(n){(function(e,t,r){function i(a){var l=this;l.next=function(){var c=l.x,f=l.i,d,h;return d=c[f],d^=d>>>7,h=d^d<<24,d=c[f+1&7],h^=d^d>>>10,d=c[f+3&7],h^=d^d>>>3,d=c[f+4&7],h^=d^d<<7,d=c[f+7&7],d=d^d<<13,h^=d^d<<9,c[f]=h,l.i=f+1&7,h};function u(c,f){var d,h=[];if(f===(f|0))h[0]=f;else for(f=""+f,d=0;d<f.length;++d)h[d&7]=h[d&7]<<15^f.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?h[7]=-1:h[d],c.x=h,c.i=0,d=256;d>0;--d)c.next()}u(l,a)}function o(a,l){return l.x=a.x.slice(),l.i=a.i,l}function s(a,l){a==null&&(a=+new Date);var u=new i(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(c.x&&o(c,u),f.state=function(){return o(u,{})}),f}t&&t.exports?t.exports=s:this.xorshift7=s})(ks,n)})(Gk);var lCe=Gk.exports,qk={exports:{}};qk.exports;(function(n){(function(e,t,r){function i(a){var l=this;l.next=function(){var c=l.w,f=l.X,d=l.i,h,m;return l.w=c=c+1640531527|0,m=f[d+34&127],h=f[d=d+1&127],m^=m<<13,h^=h<<17,m^=m>>>15,h^=h>>>12,m=f[d]=m^h,l.i=d,m+(c^c>>>16)|0};function u(c,f){var d,h,m,g,y,p=[],w=128;for(f===(f|0)?(h=f,f=null):(f=f+"\0",h=0,w=Math.max(w,f.length)),m=0,g=-32;g<w;++g)f&&(h^=f.charCodeAt((g+32)%f.length)),g===0&&(y=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,g>=0&&(y=y+1640531527|0,d=p[g&127]^=h+y,m=d==0?m+1:0);for(m>=128&&(p[(f&&f.length||0)&127]=-1),m=127,g=4*128;g>0;--g)h=p[m+34&127],d=p[m=m+1&127],h^=h<<13,d^=d<<17,h^=h>>>15,d^=d>>>12,p[m]=h^d;c.w=y,c.X=p,c.i=m}u(l,a)}function o(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function s(a,l){a==null&&(a=+new Date);var u=new i(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(c.X&&o(c,u),f.state=function(){return o(u,{})}),f}t&&t.exports?t.exports=s:this.xor4096=s})(ks,n)})(qk);var uCe=qk.exports,Xk={exports:{}};Xk.exports;(function(n){(function(e,t,r){function i(a){var l=this,u="";l.next=function(){var f=l.b,d=l.c,h=l.d,m=l.a;return f=f<<25^f>>>7^d,d=d-h|0,h=h<<24^h>>>8^m,m=m-f|0,l.b=f=f<<20^f>>>12^d,l.c=d=d-h|0,l.d=h<<16^d>>>16^m,l.a=m-f|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):u+=a;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function o(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function s(a,l){var u=new i(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&o(c,u),f.state=function(){return o(u,{})}),f}t&&t.exports?t.exports=s:this.tychei=s})(ks,n)})(Xk);var cCe=Xk.exports,XK={exports:{}};const fCe={},dCe=Object.freeze(Object.defineProperty({__proto__:null,default:fCe},Symbol.toStringTag,{value:"Module"})),hCe=Uae(dCe);(function(n){(function(e,t,r){var i=256,o=6,s=52,a="random",l=r.pow(i,o),u=r.pow(2,s),c=u*2,f=i-1,d;function h(v,S,x){var M=[];S=S==!0?{entropy:!0}:S||{};var A=p(y(S.entropy?[v,b(t)]:v??w(),3),M),T=new m(M),C=function(){for(var D=T.g(o),R=l,B=0;D<u;)D=(D+B)*i,R*=i,B=T.g(1);for(;D>=c;)D/=2,R/=2,B>>>=1;return(D+B)/R};return C.int32=function(){return T.g(4)|0},C.quick=function(){return T.g(4)/4294967296},C.double=C,p(b(T.S),t),(S.pass||x||function(D,R,B,F){return F&&(F.S&&g(F,T),D.state=function(){return g(T,{})}),B?(r[a]=D,R):D})(C,A,"global"in S?S.global:this==r,S.state)}function m(v){var S,x=v.length,M=this,A=0,T=M.i=M.j=0,C=M.S=[];for(x||(v=[x++]);A<i;)C[A]=A++;for(A=0;A<i;A++)C[A]=C[T=f&T+v[A%x]+(S=C[A])],C[T]=S;(M.g=function(D){for(var R,B=0,F=M.i,U=M.j,N=M.S;D--;)R=N[F=f&F+1],B=B*i+N[f&(N[F]=N[U=f&U+R])+(N[U]=R)];return M.i=F,M.j=U,B})(i)}function g(v,S){return S.i=v.i,S.j=v.j,S.S=v.S.slice(),S}function y(v,S){var x=[],M=typeof v,A;if(S&&M=="object")for(A in v)try{x.push(y(v[A],S-1))}catch{}return x.length?x:M=="string"?v:v+"\0"}function p(v,S){for(var x=v+"",M,A=0;A<x.length;)S[f&A]=f&(M^=S[f&A]*19)+x.charCodeAt(A++);return b(S)}function w(){try{var v;return d&&(v=d.randomBytes)?v=v(i):(v=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(v)),b(v)}catch{var S=e.navigator,x=S&&S.plugins;return[+new Date,e,x,e.screen,b(t)]}}function b(v){return String.fromCharCode.apply(0,v)}if(p(r.random(),t),n.exports){n.exports=h;try{d=hCe}catch{}}else r["seed"+a]=h})(typeof self<"u"?self:ks,[],Math)})(XK);var pCe=XK.exports,mCe=oCe,gCe=sCe,vCe=aCe,yCe=lCe,xCe=uCe,bCe=cCe,ep=pCe;ep.alea=mCe;ep.xor128=gCe;ep.xorwow=vCe;ep.xorshift7=yCe;ep.xor4096=xCe;ep.tychei=bCe;var wCe=ep;const YK=ll(wCe);var SCe=YK(Date.now());function xg(n){var e;function t(i){e=i===null?SCe:YK(String(i))}t(n);function r(){return e()}return r}var D6="pickRandom",_Ce=["typed","config","?on"],ECe=ae(D6,_Ce,n=>{var{typed:e,config:t,on:r}=n,i=xg(t.randomSeed);return r&&r("config",function(s,a){s.randomSeed!==a.randomSeed&&(i=xg(s.randomSeed))}),e(D6,{"Array | Matrix":function(a){return o(a,{})},"Array | Matrix, Object":function(a,l){return o(a,l)},"Array | Matrix, number":function(a,l){return o(a,{number:l})},"Array | Matrix, Array | Matrix":function(a,l){return o(a,{weights:l})},"Array | Matrix, Array | Matrix, number":function(a,l,u){return o(a,{number:u,weights:l})},"Array | Matrix, number, Array | Matrix":function(a,l,u){return o(a,{number:l,weights:u})}});function o(s,a){var{number:l,weights:u,elementWise:c=!0}=a,f=typeof l>"u";f&&(l=1);var d=Vt(s)?s.create:Vt(u)?u.create:null;s=s.valueOf(),u&&(u=u.valueOf()),c===!0&&(s=Cn(s),u=Cn(u));var h=0;if(typeof u<"u"){if(u.length!==s.length)throw new Error("Weights must have the same length as possibles");for(var m=0,g=u.length;m<g;m++){if(!rn(u[m])||u[m]<0)throw new Error("Weights must be an array of positive numbers");h+=u[m]}}for(var y=s.length,p=[],w;p.length<l;){if(typeof u>"u")w=s[Math.floor(i()*y)];else for(var b=i()*h,v=0,S=s.length;v<S;v++)if(b-=u[v],b<0){w=s[v];break}p.push(w)}return f?p[0]:d?d(p):p}});function Yk(n,e){var t=[];if(n=n.slice(0),n.length>1)for(var r=0,i=n.shift();r<i;r++)t.push(Yk(n,e));else for(var o=0,s=n.shift();o<s;o++)t.push(e());return t}var N6="random",MCe=["typed","config","?on"],CCe=ae(N6,MCe,n=>{var{typed:e,config:t,on:r}=n,i=xg(t.randomSeed);return r&&r("config",function(a,l){a.randomSeed!==l.randomSeed&&(i=xg(a.randomSeed))}),e(N6,{"":()=>s(0,1),number:a=>s(0,a),"number, number":(a,l)=>s(a,l),"Array | Matrix":a=>o(a,0,1),"Array | Matrix, number":(a,l)=>o(a,0,l),"Array | Matrix, number, number":(a,l,u)=>o(a,l,u)});function o(a,l,u){var c=Yk(a.valueOf(),()=>s(l,u));return Vt(a)?a.create(c):c}function s(a,l){return a+i()*(l-a)}}),P6="randomInt",ACe=["typed","config","?on"],TCe=ae(P6,ACe,n=>{var{typed:e,config:t,on:r}=n,i=xg(t.randomSeed);return r&&r("config",function(a,l){a.randomSeed!==l.randomSeed&&(i=xg(a.randomSeed))}),e(P6,{"":()=>s(0,1),number:a=>s(0,a),"number, number":(a,l)=>s(a,l),"Array | Matrix":a=>o(a,0,1),"Array | Matrix, number":(a,l)=>o(a,0,l),"Array | Matrix, number, number":(a,l,u)=>o(a,l,u)});function o(a,l,u){var c=Yk(a.valueOf(),()=>s(l,u));return Vt(a)?a.create(c):c}function s(a,l){return Math.floor(a+i()*(l-a))}}),R6="stirlingS2",DCe=["typed","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","number","?bignumber","larger"],NCe=ae(R6,DCe,n=>{var{typed:e,addScalar:t,subtractScalar:r,multiplyScalar:i,divideScalar:o,pow:s,factorial:a,combinations:l,isNegative:u,isInteger:c,number:f,bignumber:d,larger:h}=n,m=[],g=[];return e(R6,{"number | BigNumber, number | BigNumber":function(p,w){if(!c(p)||u(p)||!c(w)||u(w))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(h(w,p))throw new TypeError("k must be less than or equal to n in function stirlingS2");var b=!(rn(p)&&rn(w)),v=b?g:m,S=b?d:f,x=f(p),M=f(w);if(v[x]&&v[x].length>M)return v[x][M];for(var A=0;A<=x;++A)if(v[A]||(v[A]=[S(A===0?1:0)]),A!==0)for(var T=v[A],C=v[A-1],D=T.length;D<=A&&D<=M;++D)D===A?T[D]=1:T[D]=t(i(S(D),C[D]),C[D-1]);return v[x][M]}})}),O6="bellNumbers",PCe=["typed","addScalar","isNegative","isInteger","stirlingS2"],RCe=ae(O6,PCe,n=>{var{typed:e,addScalar:t,isNegative:r,isInteger:i,stirlingS2:o}=n;return e(O6,{"number | BigNumber":function(a){if(!i(a)||r(a))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var l=0,u=0;u<=a;u++)l=t(l,o(a,u));return l}})}),k6="catalan",OCe=["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],kCe=ae(k6,OCe,n=>{var{typed:e,addScalar:t,divideScalar:r,multiplyScalar:i,combinations:o,isNegative:s,isInteger:a}=n;return e(k6,{"number | BigNumber":function(u){if(!a(u)||s(u))throw new TypeError("Non-negative integer value expected in function catalan");return r(o(i(u,2),u),t(u,1))}})}),I6="composition",ICe=["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],LCe=ae(I6,ICe,n=>{var{typed:e,addScalar:t,combinations:r,isPositive:i,isNegative:o,isInteger:s,larger:a}=n;return e(I6,{"number | BigNumber, number | BigNumber":function(u,c){if(!s(u)||!i(u)||!s(c)||!i(c))throw new TypeError("Positive integer value expected in function composition");if(a(c,u))throw new TypeError("k must be less than or equal to n in function composition");return r(t(u,-1),t(c,-1))}})}),L6="leafCount",FCe=["parse","typed"],BCe=ae(L6,FCe,n=>{var{parse:e,typed:t}=n;function r(i){var o=0;return i.forEach(s=>{o+=r(s)}),o||1}return t(L6,{Node:function(o){return r(o)}})});function F6(n){return wn(n)||Yr(n)&&n.isUnary()&&wn(n.args[0])}function DE(n){return!!(wn(n)||(oc(n)||Yr(n))&&n.args.every(DE)||tu(n)&&DE(n.content))}function B6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function yT(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?B6(Object(t),!0).forEach(function(r){_r(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):B6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var zCe="simplifyUtil",UCe=["FunctionNode","OperatorNode","SymbolNode"],Kk=ae(zCe,UCe,n=>{var{FunctionNode:e,OperatorNode:t,SymbolNode:r}=n,i=!0,o=!1,s="defaultF",a={add:{trivial:i,total:i,commutative:i,associative:i},unaryPlus:{trivial:i,total:i,commutative:i,associative:i},subtract:{trivial:o,total:i,commutative:o,associative:o},multiply:{trivial:i,total:i,commutative:i,associative:i},divide:{trivial:o,total:i,commutative:o,associative:o},paren:{trivial:i,total:i,commutative:i,associative:o},defaultF:{trivial:o,total:i,commutative:o,associative:o}},l={divide:{total:o},log:{total:o}},u={subtract:{total:o},abs:{trivial:i},log:{total:i}};function c(b,v){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a,x=s;if(typeof b=="string"?x=b:Yr(b)?x=b.fn.toString():oc(b)?x=b.name:tu(b)&&(x="paren"),vt(S,x)){var M=S[x];if(vt(M,v))return M[v];if(vt(a,x))return a[x][v]}if(vt(S,s)){var A=S[s];return vt(A,v)?A[v]:a[s][v]}if(vt(a,x)){var T=a[x];if(vt(T,v))return T[v]}return a[s][v]}function f(b){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a;return c(b,"commutative",v)}function d(b){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a;return c(b,"associative",v)}function h(b,v){var S=yT({},b);for(var x in v)vt(b,x)?S[x]=yT(yT({},v[x]),b[x]):S[x]=v[x];return S}function m(b,v){if(!b.args||b.args.length===0)return b;b.args=g(b,v);for(var S=0;S<b.args.length;S++)m(b.args[S],v)}function g(b,v){var S,x=[],M=function A(T){for(var C=0;C<T.args.length;C++){var D=T.args[C];Yr(D)&&S===D.op?A(D):x.push(D)}};return d(b,v)?(S=b.op,M(b),x):b.args}function y(b,v){if(!(!b.args||b.args.length===0)){for(var S=w(b),x=b.args.length,M=0;M<x;M++)y(b.args[M],v);if(x>2&&d(b,v)){for(var A=b.args.pop();b.args.length>0;)A=S([b.args.pop(),A]);b.args=A.args}}}function p(b,v){if(!(!b.args||b.args.length===0)){for(var S=w(b),x=b.args.length,M=0;M<x;M++)p(b.args[M],v);if(x>2&&d(b,v)){for(var A=b.args.shift();b.args.length>0;)A=S([A,b.args.shift()]);b.args=A.args}}}function w(b){return Yr(b)?function(v){try{return new t(b.op,b.fn,v,b.implicit)}catch(S){return console.error(S),[]}}:function(v){return new e(new r(b.name),v)}}return{createMakeNodeFunction:w,hasProperty:c,isCommutative:f,isAssociative:d,mergeContext:h,flatten:m,allChildren:g,unflattenr:y,unflattenl:p,defaultContext:a,realContext:l,positiveContext:u}}),VCe="simplify",$Ce=["config","typed","parse","add","subtract","multiply","divide","pow","isZero","equal","resolve","simplifyConstant","simplifyCore","?fraction","?bignumber","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],HCe=ae(VCe,$Ce,n=>{var{config:e,typed:t,parse:r,add:i,subtract:o,multiply:s,divide:a,pow:l,isZero:u,equal:c,resolve:f,simplifyConstant:d,simplifyCore:h,fraction:m,bignumber:g,mathWithTransform:y,matrix:p,AccessorNode:w,ArrayNode:b,ConstantNode:v,FunctionNode:S,IndexNode:x,ObjectNode:M,OperatorNode:A,ParenthesisNode:T,SymbolNode:C}=n,{hasProperty:D,isCommutative:R,isAssociative:B,mergeContext:F,flatten:U,unflattenr:N,unflattenl:I,createMakeNodeFunction:V,defaultContext:L,realContext:X,positiveContext:Z}=Kk({FunctionNode:S,OperatorNode:A,SymbolNode:C});t.addConversion({from:"Object",to:"Map",convert:qm});var te=t("simplify",{Node:xe,"Node, Map":(se,G)=>xe(se,!1,G),"Node, Map, Object":(se,G,j)=>xe(se,!1,G,j),"Node, Array":xe,"Node, Array, Map":xe,"Node, Array, Map, Object":xe});t.removeConversion({from:"Object",to:"Map",convert:qm}),te.defaultContext=L,te.realContext=X,te.positiveContext=Z;function Y(se){return se.transform(function(G,j,he){return tu(G)?Y(G.content):G})}var re={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};te.rules=[h,{l:"log(e)",r:"1"},{s:"n-n1 -> n+-n1",assuming:{subtract:{total:!0}}},{s:"n-n -> 0",assuming:{subtract:{total:!1}}},{s:"-(cl*v) -> v * (-cl)",assuming:{multiply:{commutative:!0},subtract:{total:!0}}},{s:"-(cl*v) -> (-cl) * v",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{s:"-(v*cl) -> v * (-cl)",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{l:"-(n1/n2)",r:"-n1/n2"},{l:"-v",r:"v * (-1)"},{l:"(n1 + n2)*(-1)",r:"n1*(-1) + n2*(-1)",repeat:!0},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{s:"(n1*n2)^n3 -> n1^n3 * n2^n3",assuming:{multiply:{commutative:!0}}},{s:"(n1*n2)^(-1) -> n2^(-1) * n1^(-1)",assuming:{multiply:{commutative:!1}}},{s:"(n ^ n1) ^ n2 -> n ^ (n1 * n2)",assuming:{divide:{total:!0}}},{l:" vd   * ( vd   * n1 + n2)",r:"vd^2       * n1 +  vd   * n2"},{s:" vd   * (vd^n4 * n1 + n2)   ->  vd^(1+n4)  * n1 +  vd   * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * ( vd   * n1 + n2)   ->  vd^(n3+1)  * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * (vd^n4 * n1 + n2)   ->  vd^(n3+n4) * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{l:"n*n",r:"n^2"},{s:"n * n^n1 -> n^(n1+1)",assuming:{divide:{total:!0}}},{s:"n^n1 * n^n2 -> n^(n1+n2)",assuming:{divide:{total:!0}}},d,{s:"n+n -> 2*n",assuming:{add:{total:!0}}},{l:"n+-n",r:"0"},{l:"vd*n + vd",r:"vd*(n+1)"},{l:"n3*n1 + n3*n2",r:"n3*(n1+n2)"},{l:"n3^(-n4)*n1 +   n3  * n2",r:"n3^(-n4)*(n1 + n3^(n4+1) *n2)"},{l:"n3^(-n4)*n1 + n3^n5 * n2",r:"n3^(-n4)*(n1 + n3^(n4+n5)*n2)"},{s:"n*vd + vd -> (n+1)*vd",assuming:{multiply:{commutative:!1}}},{s:"vd + n*vd -> (1+n)*vd",assuming:{multiply:{commutative:!1}}},{s:"n1*n3 + n2*n3 -> (n1+n2)*n3",assuming:{multiply:{commutative:!1}}},{s:"n^n1 * n -> n^(n1+1)",assuming:{divide:{total:!0},multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3    -> (n1 + n2*n3^(n4 +  1))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3^n5 -> (n1 + n2*n3^(n4 + n5))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{l:"n*cd + cd",r:"(n+1)*cd"},{s:"cd*n + cd -> cd*(n+1)",assuming:{multiply:{commutative:!1}}},{s:"cd + cd*n -> cd*(1+n)",assuming:{multiply:{commutative:!1}}},d,{s:"(-n)*n1 -> -(n*n1)",assuming:{subtract:{total:!0}}},{s:"n1*(-n) -> -(n1*n)",assuming:{subtract:{total:!0},multiply:{commutative:!1}}},{s:"ce+ve -> ve+ce",assuming:{add:{commutative:!0}},imposeContext:{add:{commutative:!1}}},{s:"vd*cd -> cd*vd",assuming:{multiply:{commutative:!0}},imposeContext:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n+-(n1)",r:"n-(n1)"},{s:"n*(n1^-1) -> n/n1",assuming:{multiply:{commutative:!0}}},{s:"n*n1^-n2 -> n/n1^n2",assuming:{multiply:{commutative:!0}}},{s:"n^-1 -> 1/n",assuming:{multiply:{commutative:!0}}},{l:"n^1",r:"n"},{s:"n*(n1/n2) -> (n*n1)/n2",assuming:{multiply:{associative:!0}}},{s:"n-(n1+n2) -> n-n1-n2",assuming:{addition:{associative:!0,commutative:!0}}},{l:"1*n",r:"n",imposeContext:{multiply:{commutative:!0}}},{s:"n1/(n2/n3) -> (n1*n3)/n2",assuming:{multiply:{associative:!0}}},{l:"n1/(-n2)",r:"-n1/n2"}];function fe(se,G){var j={};if(se.s){var he=se.s.split("->");if(he.length===2)j.l=he[0],j.r=he[1];else throw SyntaxError("Could not parse rule: "+se.s)}else j.l=se.l,j.r=se.r;j.l=Y(r(j.l)),j.r=Y(r(j.r));for(var Ce of["imposeContext","repeat","assuming"])Ce in se&&(j[Ce]=se[Ce]);if(se.evaluate&&(j.evaluate=r(se.evaluate)),B(j.l,G)){var q=!R(j.l,G),J;q&&(J=Se());var ye=V(j.l),we=Se();j.expanded={},j.expanded.l=ye([j.l,we]),U(j.expanded.l,G),N(j.expanded.l,G),j.expanded.r=ye([j.r,we]),q&&(j.expandedNC1={},j.expandedNC1.l=ye([J,j.l]),j.expandedNC1.r=ye([J,j.r]),j.expandedNC2={},j.expandedNC2.l=ye([J,j.expanded.l]),j.expandedNC2.r=ye([J,j.expanded.r]))}return j}function ue(se,G){for(var j=[],he=0;he<se.length;he++){var Ce=se[he],q=void 0,J=typeof Ce;switch(J){case"string":Ce={s:Ce};case"object":q=fe(Ce,G);break;case"function":q=Ce;break;default:throw TypeError("Unsupported type of rule: "+J)}j.push(q)}return j}var ge=0;function Se(){return new C("_p"+ge++)}function xe(se,G){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Iy(),he=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},Ce=he.consoleDebug;G=ue(G||te.rules,he.context);var q=f(se,j);q=Y(q);for(var J={},ye=q.toString({parenthesis:"all"});!J[ye];){J[ye]=!0,ge=0;var we=ye;Ce&&console.log("Working on: ",ye);for(var ke=0;ke<G.length;ke++){var Fe="";if(typeof G[ke]=="function"?(q=G[ke](q,he),Ce&&(Fe=G[ke].name)):(U(q,he.context),q=Ae(q,G[ke],he.context),Ce&&(Fe="".concat(G[ke].l.toString()," -> ").concat(G[ke].r.toString()))),Ce){var He=q.toString({parenthesis:"all"});He!==we&&(console.log("Applying",Fe,"produced",He),we=He)}I(q,he.context)}ye=q.toString({parenthesis:"all"})}return q}function De(se,G,j){var he=se;if(se)for(var Ce=0;Ce<se.length;++Ce){var q=Ae(se[Ce],G,j);q!==se[Ce]&&(he===se&&(he=se.slice()),he[Ce]=q)}return he}function Ae(se,G,j){if(G.assuming){for(var he in G.assuming)for(var Ce in G.assuming[he])if(D(he,Ce,j)!==G.assuming[he][Ce])return se}var q=F(G.imposeContext,j),J=se;if(J instanceof A||J instanceof S){var ye=De(J.args,G,j);ye!==J.args&&(J=J.clone(),J.args=ye)}else if(J instanceof T){if(J.content){var we=Ae(J.content,G,j);we!==J.content&&(J=new T(we))}}else if(J instanceof b){var ke=De(J.items,G,j);ke!==J.items&&(J=new b(ke))}else if(J instanceof w){var Fe=J.object;J.object&&(Fe=Ae(J.object,G,j));var He=J.index;J.index&&(He=Ae(J.index,G,j)),(Fe!==J.object||He!==J.index)&&(J=new w(Fe,He))}else if(J instanceof x){var Ie=De(J.dimensions,G,j);Ie!==J.dimensions&&(J=new x(Ie))}else if(J instanceof M){var Ze=!1,qe={};for(var lt in J.properties)qe[lt]=Ae(J.properties[lt],G,j),qe[lt]!==J.properties[lt]&&(Ze=!0);Ze&&(J=new M(qe))}var at=G.r,Je=oe(G.l,J,q)[0];if(!Je&&G.expanded&&(at=G.expanded.r,Je=oe(G.expanded.l,J,q)[0]),!Je&&G.expandedNC1&&(at=G.expandedNC1.r,Je=oe(G.expandedNC1.l,J,q)[0],Je||(at=G.expandedNC2.r,Je=oe(G.expandedNC2.l,J,q)[0])),Je){var Ee=J.implicit;J=at.clone(),Ee&&"implicit"in at&&(J.implicit=!0),J=J.transform(function($){return $.isSymbolNode&&vt(Je.placeholders,$.name)?Je.placeholders[$.name].clone():$})}return G.repeat&&J!==se&&(J=Ae(J,G,j)),J}function ie(se,G){var j=[],he,Ce,q=V(se);if(R(se,G))for(var J=0;J<se.args.length;J++)Ce=se.args.slice(0),Ce.splice(J,1),he=Ce.length===1?Ce[0]:q(Ce),j.push(q([se.args[J],he]));else for(var ye=1;ye<se.args.length;ye++){var we=se.args[0];ye>1&&(we=q(se.args.slice(0,ye))),Ce=se.args.slice(ye),he=Ce.length===1?Ce[0]:q(Ce),j.push(q([we,he]))}return j}function Re(se,G){var j={placeholders:{}};if(!se.placeholders&&!G.placeholders)return j;if(se.placeholders){if(!G.placeholders)return se}else return G;for(var he in se.placeholders)if(vt(se.placeholders,he)&&(j.placeholders[he]=se.placeholders[he],vt(G.placeholders,he)&&!Me(se.placeholders[he],G.placeholders[he])))return null;for(var Ce in G.placeholders)vt(G.placeholders,Ce)&&(j.placeholders[Ce]=G.placeholders[Ce]);return j}function Pe(se,G){var j=[];if(se.length===0||G.length===0)return j;for(var he,Ce=0;Ce<se.length;Ce++)for(var q=0;q<G.length;q++)he=Re(se[Ce],G[q]),he&&j.push(he);return j}function ee(se){if(se.length===0)return se;for(var G=se.reduce(Pe),j=[],he={},Ce=0;Ce<G.length;Ce++){var q=JSON.stringify(G[Ce]);he[q]||(he[q]=!0,j.push(G[Ce]))}return j}function oe(se,G,j,he){var Ce=[{placeholders:{}}];if(se instanceof A&&G instanceof A||se instanceof S&&G instanceof S){if(se instanceof A){if(se.op!==G.op||se.fn!==G.fn)return[]}else if(se instanceof S&&se.name!==G.name)return[];if(G.args.length===1&&se.args.length===1||!B(G,j)&&G.args.length===se.args.length||he){for(var q=[],J=0;J<se.args.length;J++){var ye=oe(se.args[J],G.args[J],j);if(ye.length===0)break;q.push(ye)}if(q.length!==se.args.length){if(!R(G,j)||se.args.length===1)return[];if(se.args.length>2)throw new Error("permuting >2 commutative non-associative rule arguments not yet implemented");var we=oe(se.args[0],G.args[1],j);if(we.length===0)return[];var ke=oe(se.args[1],G.args[0],j);if(ke.length===0)return[];q=[we,ke]}Ce=ee(q)}else if(G.args.length>=2&&se.args.length===2){for(var Fe=ie(G,j),He=[],Ie=0;Ie<Fe.length;Ie++){var Ze=oe(se,Fe[Ie],j,!0);He=He.concat(Ze)}return He}else{if(se.args.length>2)throw Error("Unexpected non-binary associative function: "+se.toString());return[]}}else if(se instanceof C){if(se.name.length===0)throw new Error("Symbol in rule has 0 length...!?");if(re[se.name]){if(se.name!==G.name)return[]}else switch(se.name[1]>="a"&&se.name[1]<="z"?se.name.substring(0,2):se.name[0]){case"n":case"_p":Ce[0].placeholders[se.name]=G;break;case"c":case"cl":if(wn(G))Ce[0].placeholders[se.name]=G;else return[];break;case"v":if(!wn(G))Ce[0].placeholders[se.name]=G;else return[];break;case"vl":if(yi(G))Ce[0].placeholders[se.name]=G;else return[];break;case"cd":if(F6(G))Ce[0].placeholders[se.name]=G;else return[];break;case"vd":if(!F6(G))Ce[0].placeholders[se.name]=G;else return[];break;case"ce":if(DE(G))Ce[0].placeholders[se.name]=G;else return[];break;case"ve":if(!DE(G))Ce[0].placeholders[se.name]=G;else return[];break;default:throw new Error("Invalid symbol in rule: "+se.name)}}else if(se instanceof v){if(!c(se.value,G.value))return[]}else return[];return Ce}function Me(se,G){if(se instanceof v&&G instanceof v){if(!c(se.value,G.value))return!1}else if(se instanceof C&&G instanceof C){if(se.name!==G.name)return!1}else if(se instanceof A&&G instanceof A||se instanceof S&&G instanceof S){if(se instanceof A){if(se.op!==G.op||se.fn!==G.fn)return!1}else if(se instanceof S&&se.name!==G.name)return!1;if(se.args.length!==G.args.length)return!1;for(var j=0;j<se.args.length;j++)if(!Me(se.args[j],G.args[j]))return!1}else return!1;return!0}return te}),WCe="simplifyConstant",jCe=["typed","config","mathWithTransform","matrix","?fraction","?bignumber","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode"],GCe=ae(WCe,jCe,n=>{var{typed:e,config:t,mathWithTransform:r,matrix:i,fraction:o,bignumber:s,AccessorNode:a,ArrayNode:l,ConstantNode:u,FunctionNode:c,IndexNode:f,ObjectNode:d,OperatorNode:h,SymbolNode:m}=n,{isCommutative:g,isAssociative:y,allChildren:p,createMakeNodeFunction:w}=Kk({FunctionNode:c,OperatorNode:h,SymbolNode:m}),b=e("simplifyConstant",{Node:U=>M(F(U,{})),"Node, Object":function(N,I){return M(F(N,I))}});function v(U){return Zh(U)?U.valueOf():U instanceof Array?U.map(v):Vt(U)?i(v(U.valueOf())):U}function S(U,N,I){try{return r[U].apply(null,N)}catch{return N=N.map(v),T(r[U].apply(null,N),I)}}var x=e({Fraction:D,number:function(N){return N<0?C(new u(-N)):new u(N)},BigNumber:function(N){return N<0?C(new u(-N)):new u(N)},Complex:function(N){throw new Error("Cannot convert Complex number to Node")},string:function(N){return new u(N)},Matrix:function(N){return new l(N.valueOf().map(I=>x(I)))}});function M(U){return Vn(U)?U:x(U)}function A(U,N){var I=N&&N.exactFractions!==!1;if(I&&isFinite(U)&&o){var V=o(U),L=N&&typeof N.fractionsLimit=="number"?N.fractionsLimit:1/0;if(V.valueOf()===U&&V.n<L&&V.d<L)return V}return U}var T=e({"string, Object":function(N,I){if(t.number==="BigNumber")return s===void 0&&zk(),s(N);if(t.number==="Fraction")return o===void 0&&CK(),o(N);var V=parseFloat(N);return A(V,I)},"Fraction, Object":function(N,I){return N},"BigNumber, Object":function(N,I){return N},"number, Object":function(N,I){return A(N,I)},"Complex, Object":function(N,I){return N.im!==0?N:A(N.re,I)},"Matrix, Object":function(N,I){return i(A(N.valueOf()))},"Array, Object":function(N,I){return N.map(A)}});function C(U){return new h("-","unaryMinus",[U])}function D(U){var N,I=U.s*U.n;return I<0?N=new h("-","unaryMinus",[new u(-I)]):N=new u(I),U.d===1?N:new h("/","divide",[N,new u(U.d)])}function R(U,N,I){if(!Jh(N))return new a(M(U),M(N));if(Rs(U)||Vt(U)){for(var V=Array.from(N.dimensions);V.length>0;)if(wn(V[0])&&typeof V[0].value!="string"){var L=T(V.shift().value,I);Rs(U)?U=U.items[L-1]:(U=U.valueOf()[L-1],U instanceof Array&&(U=i(U)))}else if(V.length>1&&wn(V[1])&&typeof V[1].value!="string"){var X=T(V[1].value,I),Z=[],te=Rs(U)?U.items:U.valueOf();for(var Y of te)if(Rs(Y))Z.push(Y.items[X-1]);else if(Vt(U))Z.push(Y[X-1]);else break;if(Z.length===te.length)Rs(U)?U=new l(Z):U=i(Z),V.splice(1,1);else break}else break;return V.length===N.dimensions.length?new a(M(U),N):V.length>0?(N=new f(V),new a(M(U),N)):U}if(G1(U)&&N.dimensions.length===1&&wn(N.dimensions[0])){var re=N.dimensions[0].value;return re in U.properties?U.properties[re]:new u}return new a(M(U),N)}function B(U,N,I,V){var L=N.shift(),X=N.reduce((Z,te)=>{if(!Vn(te)){var Y=Z.pop();if(Vn(Y))return[Y,te];try{return Z.push(S(U,[Y,te],V)),Z}catch{Z.push(Y)}}Z.push(M(Z.pop()));var re=Z.length===1?Z[0]:I(Z);return[I([re,M(te)])]},[L]);return X.length===1?X[0]:I([X[0],x(X[1])])}function F(U,N){switch(U.type){case"SymbolNode":return U;case"ConstantNode":switch(typeof U.value){case"number":return T(U.value,N);case"string":return U.value;default:if(!isNaN(U.value))return T(U.value,N)}return U;case"FunctionNode":if(r[U.name]&&r[U.name].rawArgs)return U;{var I=["add","multiply"];if(!I.includes(U.name)){var V=U.args.map(Ae=>F(Ae,N));if(!V.some(Vn))try{return S(U.name,V,N)}catch{}if(U.name==="size"&&V.length===1&&Rs(V[0])){for(var L=[],X=V[0];Rs(X);)L.push(X.items.length),X=X.items[0];return i(L)}return new c(U.name,V.map(M))}}case"OperatorNode":{var Z=U.fn.toString(),te,Y,re=w(U);if(Yr(U)&&U.isUnary())te=[F(U.args[0],N)],Vn(te[0])?Y=re(te):Y=S(Z,te,N);else if(y(U,N.context))if(te=p(U,N.context),te=te.map(Ae=>F(Ae,N)),g(Z,N.context)){for(var fe=[],ue=[],ge=0;ge<te.length;ge++)Vn(te[ge])?ue.push(te[ge]):fe.push(te[ge]);fe.length>1?(Y=B(Z,fe,re,N),ue.unshift(Y),Y=B(Z,ue,re,N)):Y=B(Z,te,re,N)}else Y=B(Z,te,re,N);else te=U.args.map(Ae=>F(Ae,N)),Y=B(Z,te,re,N);return Y}case"ParenthesisNode":return F(U.content,N);case"AccessorNode":return R(F(U.object,N),F(U.index,N),N);case"ArrayNode":{var Se=U.items.map(Ae=>F(Ae,N));return Se.some(Vn)?new l(Se.map(M)):i(Se)}case"IndexNode":return new f(U.dimensions.map(Ae=>b(Ae,N)));case"ObjectNode":{var xe={};for(var De in U.properties)xe[De]=b(U.properties[De],N);return new d(xe)}case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"RangeNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(U.type))}}return b}),z6="simplifyCore",qCe=["typed","parse","equal","isZero","add","subtract","multiply","divide","pow","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],XCe=ae(z6,qCe,n=>{var{typed:e,parse:t,equal:r,isZero:i,add:o,subtract:s,multiply:a,divide:l,pow:u,AccessorNode:c,ArrayNode:f,ConstantNode:d,FunctionNode:h,IndexNode:m,ObjectNode:g,OperatorNode:y,ParenthesisNode:p,SymbolNode:w}=n,b=new d(0),v=new d(1),S=new d(!0),x=new d(!1);function M(D){return Yr(D)&&["and","not","or"].includes(D.op)}var{hasProperty:A,isCommutative:T}=Kk({FunctionNode:h,OperatorNode:y,SymbolNode:w});function C(D){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},B=R?R.context:void 0;if(A(D,"trivial",B)){if(oc(D)&&D.args.length===1)return C(D.args[0],R);var F=!1,U=0;if(D.forEach(ue=>{++U,U===1&&(F=C(ue,R))}),U===1)return F}var N=D;if(oc(N)){var I=Zxe(N.name);if(I){if(N.args.length>2&&A(N,"associative",B))for(;N.args.length>2;){var V=N.args.pop(),L=N.args.pop();N.args.push(new y(I,N.name,[V,L]))}N=new y(I,N.name,N.args)}else return new h(C(N.fn),N.args.map(ue=>C(ue,R)))}if(Yr(N)&&N.isUnary()){var X=C(N.args[0],R);if(N.op==="~"&&Yr(X)&&X.isUnary()&&X.op==="~"||N.op==="not"&&Yr(X)&&X.isUnary()&&X.op==="not"&&M(X.args[0]))return X.args[0];var Z=!0;if(N.op==="-"&&Yr(X)&&(X.isBinary()&&X.fn==="subtract"&&(N=new y("-","subtract",[X.args[1],X.args[0]]),Z=!1),X.isUnary()&&X.op==="-"))return X.args[0];if(Z)return new y(N.op,N.fn,[X])}if(Yr(N)&&N.isBinary()){var te=C(N.args[0],R),Y=C(N.args[1],R);if(N.op==="+"){if(wn(te)&&i(te.value))return Y;if(wn(Y)&&i(Y.value))return te;Yr(Y)&&Y.isUnary()&&Y.op==="-"&&(Y=Y.args[0],N=new y("-","subtract",[te,Y]))}if(N.op==="-")return Yr(Y)&&Y.isUnary()&&Y.op==="-"?C(new y("+","add",[te,Y.args[0]]),R):wn(te)&&i(te.value)?C(new y("-","unaryMinus",[Y])):wn(Y)&&i(Y.value)?te:new y(N.op,N.fn,[te,Y]);if(N.op==="*"){if(wn(te)){if(i(te.value))return b;if(r(te.value,1))return Y}if(wn(Y)){if(i(Y.value))return b;if(r(Y.value,1))return te;if(T(N,B))return new y(N.op,N.fn,[Y,te],N.implicit)}return new y(N.op,N.fn,[te,Y],N.implicit)}if(N.op==="/")return wn(te)&&i(te.value)?b:wn(Y)&&r(Y.value,1)?te:new y(N.op,N.fn,[te,Y]);if(N.op==="^"&&wn(Y)){if(i(Y.value))return v;if(r(Y.value,1))return te}if(N.op==="and"){if(wn(te))if(te.value){if(M(Y))return Y;if(wn(Y))return Y.value?S:x}else return x;if(wn(Y))if(Y.value){if(M(te))return te}else return x}if(N.op==="or"){if(wn(te)){if(te.value)return S;if(M(Y))return Y}if(wn(Y)){if(Y.value)return S;if(M(te))return te}}return new y(N.op,N.fn,[te,Y])}if(Yr(N))return new y(N.op,N.fn,N.args.map(ue=>C(ue,R)));if(Rs(N))return new f(N.items.map(ue=>C(ue,R)));if(Lf(N))return new c(C(N.object,R),C(N.index,R));if(Jh(N))return new m(N.dimensions.map(ue=>C(ue,R)));if(G1(N)){var re={};for(var fe in N.properties)re[fe]=C(N.properties[fe],R);return new g(re)}return N}return e(z6,{Node:C,"Node,Object":C})}),YCe="resolve",KCe=["typed","parse","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode"],ZCe=ae(YCe,KCe,n=>{var{typed:e,parse:t,ConstantNode:r,FunctionNode:i,OperatorNode:o,ParenthesisNode:s}=n;function a(l,u){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Set;if(!u)return l;if(yi(l)){if(c.has(l.name)){var f=Array.from(c).join(", ");throw new ReferenceError("recursive loop of variable definitions among {".concat(f,"}"))}var d=u.get(l.name);if(Vn(d)){var h=new Set(c);return h.add(l.name),a(d,u,h)}else return typeof d=="number"?t(String(d)):d!==void 0?new r(d):l}else if(Yr(l)){var m=l.args.map(function(y){return a(y,u,c)});return new o(l.op,l.fn,m,l.implicit)}else{if(tu(l))return new s(a(l.content,u,c));if(oc(l)){var g=l.args.map(function(y){return a(y,u,c)});return new i(l.name,g)}}return l.map(y=>a(y,u,c))}return e("resolve",{Node:a,"Node, Map | null | undefined":a,"Node, Object":(l,u)=>a(l,qm(u)),"Array | Matrix":e.referToSelf(l=>u=>u.map(c=>l(c))),"Array | Matrix, null | undefined":e.referToSelf(l=>u=>u.map(c=>l(c))),"Array, Object":e.referTo("Array,Map",l=>(u,c)=>l(u,qm(c))),"Matrix, Object":e.referTo("Matrix,Map",l=>(u,c)=>l(u,qm(c))),"Array | Matrix, Map":e.referToSelf(l=>(u,c)=>u.map(f=>l(f,c)))})}),U6="symbolicEqual",JCe=["parse","simplify","typed","OperatorNode"],QCe=ae(U6,JCe,n=>{var{parse:e,simplify:t,typed:r,OperatorNode:i}=n;function o(s,a){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=new i("-","subtract",[s,a]),c=t(u,{},l);return wn(c)&&!c.value}return r(U6,{"Node, Node":o,"Node, Node, Object":o})}),V6="derivative",eAe=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],tAe=ae(V6,eAe,n=>{var{typed:e,config:t,parse:r,simplify:i,equal:o,isZero:s,numeric:a,ConstantNode:l,FunctionNode:u,OperatorNode:c,ParenthesisNode:f,SymbolNode:d}=n;function h(b,v){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{simplify:!0},x={};y(x,b,v.name);var M=p(b,x);return S.simplify?i(M):M}e.addConversion({from:"identifier",to:"SymbolNode",convert:r});var m=e(V6,{"Node, SymbolNode":h,"Node, SymbolNode, Object":h});e.removeConversion({from:"identifier",to:"SymbolNode",convert:r}),m._simplify=!0,m.toTex=function(b){return g.apply(null,b.args)};var g=e("_derivTex",{"Node, SymbolNode":function(v,S){return wn(v)&&Zn(v.value)==="string"?g(r(v.value).toString(),S.toString(),1):g(v.toTex(),S.toString(),1)},"Node, ConstantNode":function(v,S){if(Zn(S.value)==="string")return g(v,r(S.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(v,S,x){return g(v.toString(),S.name,x.value)},"string, string, number":function(v,S,x){var M;return x===1?M="{d\\over d"+S+"}":M="{d^{"+x+"}\\over d"+S+"^{"+x+"}}",M+"\\left[".concat(v,"\\right]")}}),y=e("constTag",{"Object, ConstantNode, string":function(v,S){return v[S]=!0,!0},"Object, SymbolNode, string":function(v,S,x){return S.name!==x?(v[S]=!0,!0):!1},"Object, ParenthesisNode, string":function(v,S,x){return y(v,S.content,x)},"Object, FunctionAssignmentNode, string":function(v,S,x){return S.params.includes(x)?y(v,S.expr,x):(v[S]=!0,!0)},"Object, FunctionNode | OperatorNode, string":function(v,S,x){if(S.args.length>0){for(var M=y(v,S.args[0],x),A=1;A<S.args.length;++A)M=y(v,S.args[A],x)&&M;if(M)return v[S]=!0,!0}return!1}}),p=e("_derivative",{"ConstantNode, Object":function(v){return w(0)},"SymbolNode, Object":function(v,S){return S[v]!==void 0?w(0):w(1)},"ParenthesisNode, Object":function(v,S){return new f(p(v.content,S))},"FunctionAssignmentNode, Object":function(v,S){return S[v]!==void 0?w(0):p(v.expr,S)},"FunctionNode, Object":function(v,S){if(S[v]!==void 0)return w(0);var x=v.args[0],M,A=!1,T=!1,C;switch(v.name){case"cbrt":A=!0,C=new c("*","multiply",[w(3),new c("^","pow",[x,new c("/","divide",[w(2),w(3)])])]);break;case"sqrt":case"nthRoot":if(v.args.length===1)A=!0,C=new c("*","multiply",[w(2),new u("sqrt",[x])]);else if(v.args.length===2)return M=new c("/","divide",[w(1),v.args[1]]),S[M]=S[v.args[1]],p(new c("^","pow",[x,M]),S);break;case"log10":M=w(10);case"log":if(!M&&v.args.length===1)C=x.clone(),A=!0;else if(v.args.length===1&&M||v.args.length===2&&S[v.args[1]]!==void 0)C=new c("*","multiply",[x.clone(),new u("log",[M||v.args[1]])]),A=!0;else if(v.args.length===2)return p(new c("/","divide",[new u("log",[x]),new u("log",[v.args[1]])]),S);break;case"pow":if(v.args.length===2)return S[M]=S[v.args[1]],p(new c("^","pow",[x,v.args[1]]),S);break;case"exp":C=new u("exp",[x.clone()]);break;case"sin":C=new u("cos",[x.clone()]);break;case"cos":C=new c("-","unaryMinus",[new u("sin",[x.clone()])]);break;case"tan":C=new c("^","pow",[new u("sec",[x.clone()]),w(2)]);break;case"sec":C=new c("*","multiply",[v,new u("tan",[x.clone()])]);break;case"csc":T=!0,C=new c("*","multiply",[v,new u("cot",[x.clone()])]);break;case"cot":T=!0,C=new c("^","pow",[new u("csc",[x.clone()]),w(2)]);break;case"asin":A=!0,C=new u("sqrt",[new c("-","subtract",[w(1),new c("^","pow",[x.clone(),w(2)])])]);break;case"acos":A=!0,T=!0,C=new u("sqrt",[new c("-","subtract",[w(1),new c("^","pow",[x.clone(),w(2)])])]);break;case"atan":A=!0,C=new c("+","add",[new c("^","pow",[x.clone(),w(2)]),w(1)]);break;case"asec":A=!0,C=new c("*","multiply",[new u("abs",[x.clone()]),new u("sqrt",[new c("-","subtract",[new c("^","pow",[x.clone(),w(2)]),w(1)])])]);break;case"acsc":A=!0,T=!0,C=new c("*","multiply",[new u("abs",[x.clone()]),new u("sqrt",[new c("-","subtract",[new c("^","pow",[x.clone(),w(2)]),w(1)])])]);break;case"acot":A=!0,T=!0,C=new c("+","add",[new c("^","pow",[x.clone(),w(2)]),w(1)]);break;case"sinh":C=new u("cosh",[x.clone()]);break;case"cosh":C=new u("sinh",[x.clone()]);break;case"tanh":C=new c("^","pow",[new u("sech",[x.clone()]),w(2)]);break;case"sech":T=!0,C=new c("*","multiply",[v,new u("tanh",[x.clone()])]);break;case"csch":T=!0,C=new c("*","multiply",[v,new u("coth",[x.clone()])]);break;case"coth":T=!0,C=new c("^","pow",[new u("csch",[x.clone()]),w(2)]);break;case"asinh":A=!0,C=new u("sqrt",[new c("+","add",[new c("^","pow",[x.clone(),w(2)]),w(1)])]);break;case"acosh":A=!0,C=new u("sqrt",[new c("-","subtract",[new c("^","pow",[x.clone(),w(2)]),w(1)])]);break;case"atanh":A=!0,C=new c("-","subtract",[w(1),new c("^","pow",[x.clone(),w(2)])]);break;case"asech":A=!0,T=!0,C=new c("*","multiply",[x.clone(),new u("sqrt",[new c("-","subtract",[w(1),new c("^","pow",[x.clone(),w(2)])])])]);break;case"acsch":A=!0,T=!0,C=new c("*","multiply",[new u("abs",[x.clone()]),new u("sqrt",[new c("+","add",[new c("^","pow",[x.clone(),w(2)]),w(1)])])]);break;case"acoth":A=!0,T=!0,C=new c("-","subtract",[w(1),new c("^","pow",[x.clone(),w(2)])]);break;case"abs":C=new c("/","divide",[new u(new d("abs"),[x.clone()]),x.clone()]);break;case"gamma":default:throw new Error('Cannot process function "'+v.name+'" in derivative: the function is not supported, undefined, or the number of arguments passed to it are not supported')}var D,R;A?(D="/",R="divide"):(D="*",R="multiply");var B=p(x,S);return T&&(B=new c("-","unaryMinus",[B])),new c(D,R,[B,C])},"OperatorNode, Object":function(v,S){if(S[v]!==void 0)return w(0);if(v.op==="+")return new c(v.op,v.fn,v.args.map(function(U){return p(U,S)}));if(v.op==="-"){if(v.isUnary())return new c(v.op,v.fn,[p(v.args[0],S)]);if(v.isBinary())return new c(v.op,v.fn,[p(v.args[0],S),p(v.args[1],S)])}if(v.op==="*"){var x=v.args.filter(function(U){return S[U]!==void 0});if(x.length>0){var M=v.args.filter(function(U){return S[U]===void 0}),A=M.length===1?M[0]:new c("*","multiply",M),T=x.concat(p(A,S));return new c("*","multiply",T)}return new c("+","add",v.args.map(function(U){return new c("*","multiply",v.args.map(function(N){return N===U?p(N,S):N.clone()}))}))}if(v.op==="/"&&v.isBinary()){var C=v.args[0],D=v.args[1];return S[D]!==void 0?new c("/","divide",[p(C,S),D]):S[C]!==void 0?new c("*","multiply",[new c("-","unaryMinus",[C]),new c("/","divide",[p(D,S),new c("^","pow",[D.clone(),w(2)])])]):new c("/","divide",[new c("-","subtract",[new c("*","multiply",[p(C,S),D.clone()]),new c("*","multiply",[C.clone(),p(D,S)])]),new c("^","pow",[D.clone(),w(2)])])}if(v.op==="^"&&v.isBinary()){var R=v.args[0],B=v.args[1];if(S[R]!==void 0)return wn(R)&&(s(R.value)||o(R.value,1))?w(0):new c("*","multiply",[v,new c("*","multiply",[new u("log",[R.clone()]),p(B.clone(),S)])]);if(S[B]!==void 0){if(wn(B)){if(s(B.value))return w(0);if(o(B.value,1))return p(R,S)}var F=new c("^","pow",[R.clone(),new c("-","subtract",[B,w(1)])]);return new c("*","multiply",[B.clone(),new c("*","multiply",[p(R,S),F])])}return new c("*","multiply",[new c("^","pow",[R.clone(),B.clone()]),new c("+","add",[new c("*","multiply",[p(R,S),new c("/","divide",[B.clone(),R.clone()])]),new c("*","multiply",[p(B,S),new u("log",[R.clone()])])])])}throw new Error('Cannot process operator "'+v.op+'" in derivative: the operator is not supported, undefined, or the number of arguments passed to it are not supported')}});function w(b,v){return new l(a(b,t.number))}return m}),$6="rationalize",nAe=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplifyConstant","simplifyCore","simplify","?bignumber","?fraction","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode","ParenthesisNode"],rAe=ae($6,nAe,n=>{var{config:e,typed:t,equal:r,isZero:i,add:o,subtract:s,multiply:a,divide:l,pow:u,parse:c,simplifyConstant:f,simplifyCore:d,simplify:h,fraction:m,bignumber:g,mathWithTransform:y,matrix:p,AccessorNode:w,ArrayNode:b,ConstantNode:v,FunctionNode:S,IndexNode:x,ObjectNode:M,OperatorNode:A,SymbolNode:T,ParenthesisNode:C}=n;function D(N){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,L=B(),X=R(N,I,!0,L.firstRules),Z=X.variables.length,te={exactFractions:!1},Y={exactFractions:!0};if(N=X.expression,Z>=1){N=F(N);var re,fe,ue=!0,ge=!1;N=h(N,L.firstRules,{},te);for(var Se;fe=ue?L.distrDivRules:L.sucDivRules,N=h(N,fe,{},Y),ue=!ue,Se=N.toString(),Se!==re;)ge=!0,re=Se;ge&&(N=h(N,L.firstRulesAgain,{},te)),N=h(N,L.finalRules,{},te)}var xe=[],De={};return N.type==="OperatorNode"&&N.isBinary()&&N.op==="/"?(Z===1&&(N.args[0]=U(N.args[0],xe),N.args[1]=U(N.args[1])),V&&(De.numerator=N.args[0],De.denominator=N.args[1])):(Z===1&&(N=U(N,xe)),V&&(De.numerator=N,De.denominator=null)),V?(De.coefficients=xe,De.variables=X.variables,De.expression=N,De):N}return t($6,{Node:D,"Node, boolean":(N,I)=>D(N,{},I),"Node, Object":D,"Node, Object, boolean":D});function R(N,I,V,L){var X=[],Z=h(N,L,I,{exactFractions:!1});V=!!V;var te="+-*"+(V?"/":"");re(Z);var Y={};return Y.expression=Z,Y.variables=X,Y;function re(fe){var ue=fe.type;if(ue==="FunctionNode")throw new Error("There is an unsolved function call");if(ue==="OperatorNode")if(fe.op==="^"){if(fe.args[1].type!=="ConstantNode"||!kt(parseFloat(fe.args[1].value)))throw new Error("There is a non-integer exponent");re(fe.args[0])}else{if(!te.includes(fe.op))throw new Error("Operator "+fe.op+" invalid in polynomial expression");for(var ge=0;ge<fe.args.length;ge++)re(fe.args[ge])}else if(ue==="SymbolNode"){var Se=fe.name,xe=X.indexOf(Se);xe===-1&&X.push(Se)}else if(ue==="ParenthesisNode")re(fe.content);else if(ue!=="ConstantNode")throw new Error("type "+ue+" is not allowed in polynomial expression")}}function B(){var N=[d,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},f,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],I=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],V=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],L=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],X={};return X.firstRules=N.concat(I,L),X.distrDivRules=V,X.sucDivRules=L,X.firstRulesAgain=N.concat(I),X.finalRules=[d,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},f,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],X}function F(N,I,V){var L=N.type,X=arguments.length>1;if(L==="OperatorNode"&&N.isBinary()){var Z=!1,te;if(N.op==="^"&&(N.args[0].type==="ParenthesisNode"||N.args[0].type==="OperatorNode")&&N.args[1].type==="ConstantNode"&&(te=parseFloat(N.args[1].value),Z=te>=2&&kt(te)),Z){if(te>2){var Y=N.args[0],re=new A("^","pow",[N.args[0].cloneDeep(),new v(te-1)]);N=new A("*","multiply",[Y,re])}else N=new A("*","multiply",[N.args[0],N.args[0].cloneDeep()]);X&&(V==="content"?I.content=N:I.args[V]=N)}}if(L==="ParenthesisNode")F(N.content,N,"content");else if(L!=="ConstantNode"&&L!=="SymbolNode")for(var fe=0;fe<N.args.length;fe++)F(N.args[fe],N,fe);if(!X)return N}function U(N,I){I===void 0&&(I=[]),I[0]=0;var V={};V.cte=1,V.oper="+",V.fire="";var L=0,X="";Se(N,null,V),L=I.length-1;for(var Z=!0,te,Y=L;Y>=0;Y--)if(I[Y]!==0){var re=new v(Z?I[Y]:Math.abs(I[Y])),fe=I[Y]<0?"-":"+";if(Y>0){var ue=new T(X);if(Y>1){var ge=new v(Y);ue=new A("^","pow",[ue,ge])}I[Y]===-1&&Z?re=new A("-","unaryMinus",[ue]):Math.abs(I[Y])===1?re=ue:re=new A("*","multiply",[re,ue])}Z?te=re:fe==="+"?te=new A("+","add",[te,re]):te=new A("-","subtract",[te,re]),Z=!1}if(Z)return new v(0);return te;function Se(xe,De,Ae){var ie=xe.type;if(ie==="FunctionNode")throw new Error("There is an unsolved function call");if(ie==="OperatorNode"){if(!"+-*^".includes(xe.op))throw new Error("Operator "+xe.op+" invalid");if(De!==null){if((xe.fn==="unaryMinus"||xe.fn==="pow")&&De.fn!=="add"&&De.fn!=="subtract"&&De.fn!=="multiply")throw new Error("Invalid "+xe.op+" placing");if((xe.fn==="subtract"||xe.fn==="add"||xe.fn==="multiply")&&De.fn!=="add"&&De.fn!=="subtract")throw new Error("Invalid "+xe.op+" placing");if((xe.fn==="subtract"||xe.fn==="add"||xe.fn==="unaryMinus")&&Ae.noFil!==0)throw new Error("Invalid "+xe.op+" placing")}(xe.op==="^"||xe.op==="*")&&(Ae.fire=xe.op);for(var Re=0;Re<xe.args.length;Re++)xe.fn==="unaryMinus"&&(Ae.oper="-"),(xe.op==="+"||xe.fn==="subtract")&&(Ae.fire="",Ae.cte=1,Ae.oper=Re===0?"+":xe.op),Ae.noFil=Re,Se(xe.args[Re],xe,Ae)}else if(ie==="SymbolNode"){if(xe.name!==X&&X!=="")throw new Error("There is more than one variable");if(X=xe.name,De===null){I[1]=1;return}if(De.op==="^"&&Ae.noFil!==0)throw new Error("In power the variable should be the first parameter");if(De.op==="*"&&Ae.noFil!==1)throw new Error("In multiply the variable should be the second parameter");(Ae.fire===""||Ae.fire==="*")&&(L<1&&(I[1]=0),I[1]+=Ae.cte*(Ae.oper==="+"?1:-1),L=Math.max(1,L))}else if(ie==="ConstantNode"){var Pe=parseFloat(xe.value);if(De===null){I[0]=Pe;return}if(De.op==="^"){if(Ae.noFil!==1)throw new Error("Constant cannot be powered");if(!kt(Pe)||Pe<=0)throw new Error("Non-integer exponent is not allowed");for(var ee=L+1;ee<Pe;ee++)I[ee]=0;Pe>L&&(I[Pe]=0),I[Pe]+=Ae.cte*(Ae.oper==="+"?1:-1),L=Math.max(Pe,L);return}Ae.cte=Pe,Ae.fire===""&&(I[0]+=Ae.cte*(Ae.oper==="+"?1:-1))}else throw new Error("Type "+ie+" is not allowed")}}}),H6="zpk2tf",iAe=["typed","add","multiply","Complex","number"],oAe=ae(H6,iAe,n=>{var{typed:e,add:t,multiply:r,Complex:i,number:o}=n;return e(H6,{"Array,Array,number":function(u,c,f){return s(u,c,f)},"Array,Array":function(u,c){return s(u,c,1)},"Matrix,Matrix,number":function(u,c,f){return s(u.valueOf(),c.valueOf(),f)},"Matrix,Matrix":function(u,c){return s(u.valueOf(),c.valueOf(),1)}});function s(l,u,c){l.some(w=>w.type==="BigNumber")&&(l=l.map(w=>o(w))),u.some(w=>w.type==="BigNumber")&&(u=u.map(w=>o(w)));for(var f=[i(1,0)],d=[i(1,0)],h=0;h<l.length;h++){var m=l[h];typeof m=="number"&&(m=i(m,0)),f=a(f,[i(1,0),i(-m.re,-m.im)])}for(var g=0;g<u.length;g++){var y=u[g];typeof y=="number"&&(y=i(y,0)),d=a(d,[i(1,0),i(-y.re,-y.im)])}for(var p=0;p<f.length;p++)f[p]=r(f[p],c);return[f,d]}function a(l,u){for(var c=[],f=0;f<l.length+u.length-1;f++){c[f]=i(0,0);for(var d=0;d<l.length;d++)f-d>=0&&f-d<u.length&&(c[f]=t(c[f],r(l[d],u[f-d])))}return c}}),W6="freqz",sAe=["typed","add","multiply","Complex","divide","matrix"],aAe=ae(W6,sAe,n=>{var{typed:e,add:t,multiply:r,Complex:i,divide:o,matrix:s}=n;return e(W6,{"Array, Array":function(c,f){var d=l(512);return a(c,f,d)},"Array, Array, Array":function(c,f,d){return a(c,f,d)},"Array, Array, number":function(c,f,d){if(d<0)throw new Error("w must be a positive number");var h=l(d);return a(c,f,h)},"Matrix, Matrix":function(c,f){var d=l(512),{w:h,h:m}=a(c.valueOf(),f.valueOf(),d);return{w:s(h),h:s(m)}},"Matrix, Matrix, Matrix":function(c,f,d){var{h}=a(c.valueOf(),f.valueOf(),d.valueOf());return{h:s(h),w:s(d)}},"Matrix, Matrix, number":function(c,f,d){if(d<0)throw new Error("w must be a positive number");var h=l(d),{h:m}=a(c.valueOf(),f.valueOf(),h);return{h:s(m),w:s(h)}}});function a(u,c,f){for(var d=[],h=[],m=0;m<f.length;m++){for(var g=i(0,0),y=i(0,0),p=0;p<u.length;p++)g=t(g,r(u[p],i(Math.cos(-p*f[m]),Math.sin(-p*f[m]))));for(var w=0;w<c.length;w++)y=t(y,r(c[w],i(Math.cos(-w*f[m]),Math.sin(-w*f[m]))));d.push(g),h.push(y)}for(var b=[],v=0;v<d.length;v++)b.push(o(d[v],h[v]));return{h:b,w:f}}function l(u){for(var c=[],f=0;f<u;f++)c.push(f/u*Math.PI);return c}}),lAe="reviver",uAe=["classes"],cAe=ae(lAe,uAe,n=>{var{classes:e}=n;return function(r,i){var o=e[i&&i.mathjs];return o&&typeof o.fromJSON=="function"?o.fromJSON(i):i}}),fAe="replacer",dAe=[],hAe=ae(fAe,dAe,()=>function(e,t){return typeof t=="number"&&(!isFinite(t)||isNaN(t))?{mathjs:"number",value:String(t)}:t}),pAe="12.4.3",mAe=ae("true",[],()=>!0),gAe=ae("false",[],()=>!1),vAe=ae("null",[],()=>null),yAe=Xs("Infinity",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?new t(1/0):1/0}),xAe=Xs("NaN",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?new t(NaN):NaN}),bAe=Xs("pi",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?$k(t):Ohe}),wAe=Xs("tau",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?t1e(t):khe}),SAe=Xs("e",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?Qye(t):Ihe}),_Ae=Xs("phi",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?e1e(t):Lhe}),EAe=Xs("LN2",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?new t(2).ln():Math.LN2}),MAe=Xs("LN10",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?new t(10).ln():Math.LN10}),CAe=Xs("LOG2E",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?new t(1).div(new t(2).ln()):Math.LOG2E}),AAe=Xs("LOG10E",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?new t(1).div(new t(10).ln()):Math.LOG10E}),TAe=Xs("SQRT1_2",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?new t("0.5").sqrt():Math.SQRT1_2}),DAe=Xs("SQRT2",["config","?BigNumber"],n=>{var{config:e,BigNumber:t}=n;return e.number==="BigNumber"?new t(2).sqrt():Math.SQRT2}),NAe=Xs("i",["Complex"],n=>{var{Complex:e}=n;return e.I}),PAe=ae("PI",["pi"],n=>{var{pi:e}=n;return e}),RAe=ae("E",["e"],n=>{var{e}=n;return e}),OAe=ae("version",[],()=>pAe);function Xs(n,e,t){return ae(n,e,t,{recreateOnConfigChange:!0})}var kAe=nn("speedOfLight","299792458","m s^-1"),IAe=nn("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),LAe=nn("planckConstant","6.62607015e-34","J s"),FAe=nn("reducedPlanckConstant","1.0545718176461565e-34","J s"),BAe=nn("magneticConstant","1.25663706212e-6","N A^-2"),zAe=nn("electricConstant","8.8541878128e-12","F m^-1"),UAe=nn("vacuumImpedance","376.730313667","ohm"),VAe=nn("coulomb","8.987551792261171e9","N m^2 C^-2"),$Ae=nn("elementaryCharge","1.602176634e-19","C"),HAe=nn("bohrMagneton","9.2740100783e-24","J T^-1"),WAe=nn("conductanceQuantum","7.748091729863649e-5","S"),jAe=nn("inverseConductanceQuantum","12906.403729652257","ohm"),GAe=nn("magneticFluxQuantum","2.0678338484619295e-15","Wb"),qAe=nn("nuclearMagneton","5.0507837461e-27","J T^-1"),XAe=nn("klitzing","25812.807459304513","ohm"),YAe=nn("bohrRadius","5.29177210903e-11","m"),KAe=nn("classicalElectronRadius","2.8179403262e-15","m"),ZAe=nn("electronMass","9.1093837015e-31","kg"),JAe=nn("fermiCoupling","1.1663787e-5","GeV^-2"),QAe=d2("fineStructure",.0072973525693),eTe=nn("hartreeEnergy","4.3597447222071e-18","J"),tTe=nn("protonMass","1.67262192369e-27","kg"),nTe=nn("deuteronMass","3.3435830926e-27","kg"),rTe=nn("neutronMass","1.6749271613e-27","kg"),iTe=nn("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),oTe=nn("rydberg","10973731.568160","m^-1"),sTe=nn("thomsonCrossSection","6.6524587321e-29","m^2"),aTe=d2("weakMixingAngle",.2229),lTe=d2("efimovFactor",22.7),uTe=nn("atomicMass","1.66053906660e-27","kg"),cTe=nn("avogadro","6.02214076e23","mol^-1"),fTe=nn("boltzmann","1.380649e-23","J K^-1"),dTe=nn("faraday","96485.33212331001","C mol^-1"),hTe=nn("firstRadiation","3.7417718521927573e-16","W m^2"),pTe=nn("loschmidt","2.686780111798444e25","m^-3"),mTe=nn("gasConstant","8.31446261815324","J K^-1 mol^-1"),gTe=nn("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),vTe=nn("molarVolume","0.022413969545014137","m^3 mol^-1"),yTe=d2("sackurTetrode",-1.16487052358),xTe=nn("secondRadiation","0.014387768775039337","m K"),bTe=nn("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),wTe=nn("wienDisplacement","2.897771955e-3","m K"),STe=nn("molarMass","0.99999999965e-3","kg mol^-1"),_Te=nn("molarMassC12","11.9999999958e-3","kg mol^-1"),ETe=nn("gravity","9.80665","m s^-2"),MTe=nn("planckLength","1.616255e-35","m"),CTe=nn("planckMass","2.176435e-8","kg"),ATe=nn("planckTime","5.391245e-44","s"),TTe=nn("planckCharge","1.87554603778e-18","C"),DTe=nn("planckTemperature","1.416785e+32","K");function nn(n,e,t){var r=["config","Unit","BigNumber"];return ae(n,r,i=>{var{config:o,Unit:s,BigNumber:a}=i,l=o.number==="BigNumber"?new a(e):parseFloat(e),u=new s(l,t);return u.fixPrefix=!0,u})}function d2(n,e){var t=["config","BigNumber"];return ae(n,t,r=>{var{config:i,BigNumber:o}=r;return i.number==="BigNumber"?new o(e):e})}var NTe="apply",PTe=["typed","isInteger"],RTe=ae(NTe,PTe,n=>{var{typed:e,isInteger:t}=n,r=Lk({typed:e,isInteger:t});return e("apply",{"...any":function(o){var s=o[1];rn(s)?o[1]=s-1:en(s)&&(o[1]=s.minus(1));try{return r.apply(null,o)}catch(a){throw Yo(a)}}})},{isTransformFunction:!0}),OTe="column",kTe=["typed","Index","matrix","range"],ITe=ae(OTe,kTe,n=>{var{typed:e,Index:t,matrix:r,range:i}=n,o=EK({typed:e,Index:t,matrix:r,range:i});return e("column",{"...any":function(a){var l=a.length-1,u=a[l];rn(u)&&(a[l]=u-1);try{return o.apply(null,a)}catch(c){throw Yo(c)}}})},{isTransformFunction:!0});function Zk(n,e,t){var r=n.filter(function(l){return yi(l)&&!(l.name in e)&&!t.has(l.name)})[0];if(!r)throw new Error('No undefined variable found in inline expression "'+n+'"');var i=r.name,o=new Map,s=new YX(t,o,new Set([i])),a=n.compile();return function(u){return o.set(i,u),a.evaluate(s)}}var LTe="filter",FTe=["typed"],BTe=ae(LTe,FTe,n=>{var{typed:e}=n;function t(i,o,s){var a,l;return i[0]&&(a=i[0].compile().evaluate(s)),i[1]&&(yi(i[1])||jg(i[1])?l=i[1].compile().evaluate(s):l=Zk(i[1],o,s)),r(a,l)}t.rawArgs=!0;var r=e("filter",{"Array, function":j6,"Matrix, function":function(o,s){return o.create(j6(o.toArray(),s))},"Array, RegExp":pE,"Matrix, RegExp":function(o,s){return o.create(pE(o.toArray(),s))}});return t},{isTransformFunction:!0});function j6(n,e){return vY(n,function(t,r,i){return Kg(e,t,[r+1],i,"filter")})}var zTe="forEach",UTe=["typed"],VTe=ae(zTe,UTe,n=>{var{typed:e}=n;function t(i,o,s){var a,l;return i[0]&&(a=i[0].compile().evaluate(s)),i[1]&&(yi(i[1])||jg(i[1])?l=i[1].compile().evaluate(s):l=Zk(i[1],o,s)),r(a,l)}t.rawArgs=!0;var r=e("forEach",{"Array | Matrix, function":function(o,s){var a=function l(u,c){if(Array.isArray(u))s2(u,function(f,d){l(f,c.concat(d+1))});else return Kg(s,u,c,o,"forEach")};a(o.valueOf(),[])}});return t},{isTransformFunction:!0}),$Te="index",HTe=["Index","getMatrixDataType"],WTe=ae($Te,HTe,n=>{var{Index:e,getMatrixDataType:t}=n;return function(){for(var i=[],o=0,s=arguments.length;o<s;o++){var a=arguments[o];if(e2(a))a.start--,a.end-=a.step>0?0:2;else if(a&&a.isSet===!0)a=a.map(function(u){return u-1});else if(Tn(a)||Vt(a))t(a)!=="boolean"&&(a=a.map(function(u){return u-1}));else if(rn(a))a--;else if(en(a))a=a.toNumber()-1;else if(typeof a!="string")throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");i[o]=a}var l=new e;return e.apply(l,i),l}},{isTransformFunction:!0}),jTe="map",GTe=["typed"],qTe=ae(jTe,GTe,n=>{var{typed:e}=n;function t(i,o,s){var a,l;return i[0]&&(a=i[0].compile().evaluate(s)),i[1]&&(yi(i[1])||jg(i[1])?l=i[1].compile().evaluate(s):l=Zk(i[1],o,s)),r(a,l)}t.rawArgs=!0;var r=e("map",{"Array, function":function(o,s){return G6(o,s,o)},"Matrix, function":function(o,s){return o.create(G6(o.valueOf(),s,o))}});return t},{isTransformFunction:!0});function G6(n,e,t){function r(i,o){return Array.isArray(i)?Xu(i,function(s,a){return r(s,o.concat(a+1))}):Kg(e,i,o,t,"map")}return r(n,[])}function sd(n){if(n.length===2&&js(n[0])){n=n.slice();var e=n[1];rn(e)?n[1]=e-1:en(e)&&(n[1]=e.minus(1))}return n}var XTe="max",YTe=["typed","config","numeric","larger"],KTe=ae(XTe,YTe,n=>{var{typed:e,config:t,numeric:r,larger:i}=n,o=IK({typed:e,config:t,numeric:r,larger:i});return e("max",{"...any":function(a){a=sd(a);try{return o.apply(null,a)}catch(l){throw Yo(l)}}})},{isTransformFunction:!0}),ZTe="mean",JTe=["typed","add","divide"],QTe=ae(ZTe,JTe,n=>{var{typed:e,add:t,divide:r}=n,i=WK({typed:e,add:t,divide:r});return e("mean",{"...any":function(s){s=sd(s);try{return i.apply(null,s)}catch(a){throw Yo(a)}}})},{isTransformFunction:!0}),e3e="min",t3e=["typed","config","numeric","smaller"],n3e=ae(e3e,t3e,n=>{var{typed:e,config:t,numeric:r,smaller:i}=n,o=LK({typed:e,config:t,numeric:r,smaller:i});return e("min",{"...any":function(a){a=sd(a);try{return o.apply(null,a)}catch(l){throw Yo(l)}}})},{isTransformFunction:!0}),r3e="range",i3e=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],o3e=ae(r3e,i3e,n=>{var{typed:e,config:t,matrix:r,bignumber:i,smaller:o,smallerEq:s,larger:a,largerEq:l,add:u,isPositive:c}=n,f=TK({typed:e,config:t,matrix:r,bignumber:i,smaller:o,smallerEq:s,larger:a,largerEq:l,add:u,isPositive:c});return e("range",{"...any":function(h){var m=h.length-1,g=h[m];return typeof g!="boolean"&&h.push(!0),f.apply(null,h)}})},{isTransformFunction:!0}),s3e="row",a3e=["typed","Index","matrix","range"],l3e=ae(s3e,a3e,n=>{var{typed:e,Index:t,matrix:r,range:i}=n,o=DK({typed:e,Index:t,matrix:r,range:i});return e("row",{"...any":function(a){var l=a.length-1,u=a[l];rn(u)&&(a[l]=u-1);try{return o.apply(null,a)}catch(c){throw Yo(c)}}})},{isTransformFunction:!0}),u3e="subset",c3e=["typed","matrix","zeros","add"],f3e=ae(u3e,c3e,n=>{var{typed:e,matrix:t,zeros:r,add:i}=n,o=NK({typed:e,matrix:t,zeros:r,add:i});return e("subset",{"...any":function(a){try{return o.apply(null,a)}catch(l){throw Yo(l)}}})},{isTransformFunction:!0}),d3e="concat",h3e=["typed","matrix","isInteger"],p3e=ae(d3e,h3e,n=>{var{typed:e,matrix:t,isInteger:r}=n,i=_K({typed:e,matrix:t,isInteger:r});return e("concat",{"...any":function(s){var a=s.length-1,l=s[a];rn(l)?s[a]=l-1:en(l)&&(s[a]=l.minus(1));try{return i.apply(null,s)}catch(u){throw Yo(u)}}})},{isTransformFunction:!0}),q6="diff",m3e=["typed","matrix","subtract","number","bignumber"],g3e=ae(q6,m3e,n=>{var{typed:e,matrix:t,subtract:r,number:i,bignumber:o}=n,s=MK({typed:e,matrix:t,subtract:r,number:i,bignumber:o});return e(q6,{"...any":function(l){l=sd(l);try{return s.apply(null,l)}catch(u){throw Yo(u)}}})},{isTransformFunction:!0}),v3e="std",y3e=["typed","map","sqrt","variance"],x3e=ae(v3e,y3e,n=>{var{typed:e,map:t,sqrt:r,variance:i}=n,o=qK({typed:e,map:t,sqrt:r,variance:i});return e("std",{"...any":function(a){a=sd(a);try{return o.apply(null,a)}catch(l){throw Yo(l)}}})},{isTransformFunction:!0}),X6="sum",b3e=["typed","config","add","numeric"],w3e=ae(X6,b3e,n=>{var{typed:e,config:t,add:r,numeric:i}=n,o=$K({typed:e,config:t,add:r,numeric:i});return e(X6,{"...any":function(a){a=sd(a);try{return o.apply(null,a)}catch(l){throw Yo(l)}}})},{isTransformFunction:!0}),S3e="quantileSeq",_3e=["typed","bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger"],E3e=ae(S3e,_3e,n=>{var{typed:e,bignumber:t,add:r,subtract:i,divide:o,multiply:s,partitionSelect:a,compare:l,isInteger:u,smaller:c,smallerEq:f,larger:d}=n,h=GK({typed:e,bignumber:t,add:r,subtract:i,divide:o,multiply:s,partitionSelect:a,compare:l,isInteger:u,smaller:c,smallerEq:f,larger:d});return e("quantileSeq",{"Array | Matrix, number | BigNumber":h,"Array | Matrix, number | BigNumber, number":(g,y,p)=>h(g,y,m(p)),"Array | Matrix, number | BigNumber, boolean":h,"Array | Matrix, number | BigNumber, boolean, number":(g,y,p,w)=>h(g,y,p,m(w)),"Array | Matrix, Array | Matrix":h,"Array | Matrix, Array | Matrix, number":(g,y,p)=>h(g,y,m(p)),"Array | Matrix, Array | Matrix, boolean":h,"Array | Matrix, Array | Matrix, boolean, number":(g,y,p,w)=>h(g,y,p,m(w))});function m(g){return sd([[],g])[1]}},{isTransformFunction:!0}),Y6="cumsum",M3e=["typed","add","unaryPlus"],C3e=ae(Y6,M3e,n=>{var{typed:e,add:t,unaryPlus:r}=n,i=HK({typed:e,add:t,unaryPlus:r});return e(Y6,{"...any":function(s){if(s.length===2&&js(s[0])){var a=s[1];rn(a)?s[1]=a-1:en(a)&&(s[1]=a.minus(1))}try{return i.apply(null,s)}catch(l){throw Yo(l)}}})},{isTransformFunction:!0}),K6="variance",A3e=["typed","add","subtract","multiply","divide","apply","isNaN"],T3e=ae(K6,A3e,n=>{var{typed:e,add:t,subtract:r,multiply:i,divide:o,apply:s,isNaN:a}=n,l=jK({typed:e,add:t,subtract:r,multiply:i,divide:o,apply:s,isNaN:a});return e(K6,{"...any":function(c){c=sd(c);try{return l.apply(null,c)}catch(f){throw Yo(f)}}})},{isTransformFunction:!0}),Z6="print",D3e=["typed","matrix","zeros","add"],N3e=ae(Z6,D3e,n=>{var{typed:e,matrix:t,zeros:r,add:i}=n,o=OK({typed:e,matrix:t,zeros:r,add:i});return e(Z6,{"string, Object | Array":function(l,u){return o(s(l),u)},"string, Object | Array, number | Object":function(l,u,c){return o(s(l),u,c)}});function s(a){return a.replace(RK,l=>{var u=l.slice(1).split("."),c=u.map(function(f){return!isNaN(f)&&f.length>0?parseInt(f)-1:f});return"$"+c.join(".")})}},{isTransformFunction:!0}),P3e="and",R3e=["typed","matrix","zeros","add","equalScalar","not","concat"],O3e=ae(P3e,R3e,n=>{var{typed:e,matrix:t,equalScalar:r,zeros:i,not:o,concat:s}=n,a=kK({typed:e,matrix:t,equalScalar:r,zeros:i,not:o,concat:s});function l(u,c,f){var d=u[0].compile().evaluate(f);if(!js(d)&&!a(d,!0))return!1;var h=u[1].compile().evaluate(f);return a(d,h)}return l.rawArgs=!0,l},{isTransformFunction:!0}),k3e="or",I3e=["typed","matrix","equalScalar","DenseMatrix","concat"],L3e=ae(k3e,I3e,n=>{var{typed:e,matrix:t,equalScalar:r,DenseMatrix:i,concat:o}=n,s=SK({typed:e,matrix:t,equalScalar:r,DenseMatrix:i,concat:o});function a(l,u,c){var f=l[0].compile().evaluate(c);if(!js(f)&&s(f,!1))return!0;var d=l[1].compile().evaluate(c);return s(f,d)}return a.rawArgs=!0,a},{isTransformFunction:!0}),F3e="bitAnd",B3e=["typed","matrix","zeros","add","equalScalar","not","concat"],z3e=ae(F3e,B3e,n=>{var{typed:e,matrix:t,equalScalar:r,zeros:i,not:o,concat:s}=n,a=bK({typed:e,matrix:t,equalScalar:r,zeros:i,not:o,concat:s});function l(u,c,f){var d=u[0].compile().evaluate(f);if(!js(d)){if(isNaN(d))return NaN;if(d===0||d===!1)return 0}var h=u[1].compile().evaluate(f);return a(d,h)}return l.rawArgs=!0,l},{isTransformFunction:!0}),U3e="bitOr",V3e=["typed","matrix","equalScalar","DenseMatrix","concat"],$3e=ae(U3e,V3e,n=>{var{typed:e,matrix:t,equalScalar:r,DenseMatrix:i,concat:o}=n,s=wK({typed:e,matrix:t,equalScalar:r,DenseMatrix:i,concat:o});function a(l,u,c){var f=l[0].compile().evaluate(c);if(!js(f)){if(isNaN(f))return NaN;if(f===-1)return-1;if(f===!0)return 1}var d=l[1].compile().evaluate(c);return s(f,d)}return a.rawArgs=!0,a},{isTransformFunction:!0});const H3e=Object.freeze(Object.defineProperty({__proto__:null,createAbs:zpe,createAccessorNode:qxe,createAcos:d1e,createAcosh:p1e,createAcot:g1e,createAcoth:y1e,createAcsc:b1e,createAcsch:S1e,createAdd:Pxe,createAddScalar:Hpe,createAnd:kK,createAndTransform:O3e,createApply:Lk,createApplyTransform:RTe,createArg:Nge,createArrayNode:Yxe,createAsec:E1e,createAsech:C1e,createAsin:T1e,createAsinh:P1e,createAssignmentNode:Qxe,createAtan:k1e,createAtan2:L1e,createAtanh:B1e,createAtomicMass:uTe,createAvogadro:cTe,createBellNumbers:RCe,createBigNumberClass:Zde,createBignumber:vpe,createBin:d0e,createBitAnd:bK,createBitAndTransform:z3e,createBitNot:_ge,createBitOr:wK,createBitOrTransform:$3e,createBitXor:Tge,createBlockNode:tbe,createBohrMagneton:HAe,createBohrRadius:YAe,createBoltzmann:fTe,createBoolean:ppe,createCatalan:kCe,createCbrt:qpe,createCeil:nme,createChain:t2e,createChainClass:Mwe,createClassicalElectronRadius:KAe,createClone:The,createColumn:EK,createColumnTransform:ITe,createCombinations:W2e,createCombinationsWithRep:G2e,createCompare:oye,createCompareNatural:uye,createCompareText:dye,createCompile:kbe,createComplex:bpe,createComplexClass:nhe,createComposition:LCe,createConcat:_K,createConcatTransform:p3e,createConditionalNode:rbe,createConductanceQuantum:WAe,createConj:Rge,createConstantNode:fbe,createCorr:$2e,createCos:U1e,createCosh:$1e,createCot:W1e,createCoth:G1e,createCoulomb:VAe,createCount:jge,createCreateUnit:c1e,createCross:qge,createCsc:X1e,createCsch:K1e,createCtranspose:zve,createCube:ime,createCumSum:HK,createCumSumTransform:C3e,createDeepEqual:Pye,createDenseMatrixClass:Che,createDerivative:tAe,createDet:r2e,createDeuteronMass:nTe,createDiag:Yge,createDiff:MK,createDiffTransform:g3e,createDistance:A2e,createDivide:M2e,createDivideScalar:C0e,createDot:Fxe,createDotDivide:U0e,createDotMultiply:mge,createDotPow:B0e,createE:SAe,createEfimovFactor:lTe,createEigs:d2e,createElectricConstant:zAe,createElectronMass:ZAe,createElementaryCharge:$Ae,createEqual:pye,createEqualScalar:npe,createEqualText:vye,createErf:Qve,createEvaluate:Lbe,createExp:sme,createExpm:p2e,createExpm1:lme,createFactorial:J2e,createFalse:gAe,createFaraday:dTe,createFermiCoupling:JAe,createFft:Hve,createFibonacciHeapClass:Yye,createFilter:Jge,createFilterTransform:BTe,createFineStructure:QAe,createFirstRadiation:hTe,createFix:fme,createFlatten:eve,createFloor:vK,createForEach:nve,createForEachTransform:VTe,createFormat:c0e,createFraction:_pe,createFractionClass:she,createFreqz:aAe,createFunctionAssignmentNode:hbe,createFunctionNode:Nbe,createGamma:X2e,createGasConstant:mTe,createGcd:Fme,createGetMatrixDataType:ove,createGravitationConstant:IAe,createGravity:ETe,createHartreeEnergy:eTe,createHasNumericValue:jhe,createHelp:QMe,createHelpClass:Swe,createHex:g0e,createHypot:Oxe,createI:NAe,createIdentity:ave,createIfft:jve,createIm:kge,createImmutableDenseMatrixClass:Hye,createIndex:$xe,createIndexClass:Gye,createIndexNode:mbe,createIndexTransform:WTe,createInfinity:yAe,createIntersect:N2e,createInv:o2e,createInverseConductanceQuantum:jAe,createInvmod:fge,createIsInteger:Nhe,createIsNaN:Zhe,createIsNegative:Vhe,createIsNumeric:Hhe,createIsPositive:qhe,createIsPrime:w0e,createIsZero:Yhe,createKldivergence:eCe,createKlitzing:XAe,createKron:uve,createLN10:MAe,createLN2:EAe,createLOG10E:AAe,createLOG2E:CAe,createLarger:Mye,createLargerEq:Tye,createLcm:Vme,createLeafCount:BCe,createLeftShift:J0e,createLgamma:K2e,createLog:R0e,createLog10:Hme,createLog1p:k0e,createLog2:jme,createLoschmidt:pTe,createLsolve:$0e,createLsolveAll:G0e,createLup:Hbe,createLusolve:vwe,createLyap:S2e,createMad:F2e,createMagneticConstant:BAe,createMagneticFluxQuantum:GAe,createMap:fve,createMapTransform:qTe,createMatrix:Mpe,createMatrixClass:dhe,createMatrixFromColumns:Ppe,createMatrixFromFunction:Ape,createMatrixFromRows:Dpe,createMax:IK,createMaxTransform:KTe,createMean:WK,createMeanTransform:QTe,createMedian:I2e,createMin:LK,createMinTransform:n3e,createMod:yK,createMode:s0e,createMolarMass:STe,createMolarMassC12:_Te,createMolarPlanckConstant:gTe,createMolarVolume:vTe,createMultinomial:nCe,createMultiply:Kme,createMultiplyScalar:Xme,createNaN:xAe,createNeutronMass:rTe,createNode:jxe,createNorm:Ixe,createNot:Bge,createNthRoot:Jme,createNthRoots:L0e,createNuclearMagneton:qAe,createNull:vAe,createNumber:cpe,createNumeric:E0e,createObjectNode:vbe,createOct:p0e,createOnes:gve,createOperatorNode:xbe,createOr:SK,createOrTransform:L3e,createParenthesisNode:wbe,createParse:Rbe,createParser:Vbe,createParserClass:zbe,createPartitionSelect:Lye,createPermutations:iCe,createPhi:_Ae,createPi:bAe,createPickRandom:ECe,createPinv:a2e,createPlanckCharge:TTe,createPlanckConstant:LAe,createPlanckLength:MTe,createPlanckMass:CTe,createPlanckTemperature:DTe,createPlanckTime:ATe,createPolynomialRoot:xwe,createPow:T0e,createPrint:OK,createPrintTransform:N3e,createProd:l0e,createProtonMass:tTe,createQr:jbe,createQuantileSeq:GK,createQuantileSeqTransform:E3e,createQuantumOfCirculation:iTe,createRandom:CCe,createRandomInt:TCe,createRange:TK,createRangeClass:uhe,createRangeNode:_be,createRangeTransform:o3e,createRationalize:rAe,createRe:Lge,createReducedPlanckConstant:FAe,createRelationalNode:Mbe,createReplacer:hAe,createReshape:xve,createResize:Sve,createResolve:ZCe,createResultSet:tde,createReviver:cAe,createRightArithShift:eye,createRightLogShift:nye,createRotate:Eve,createRotationMatrix:Cve,createRound:N0e,createRow:DK,createRowTransform:l3e,createRydberg:oTe,createSQRT1_2:TAe,createSQRT2:DAe,createSackurTetrode:yTe,createSchur:b2e,createSec:J1e,createSech:exe,createSecondRadiation:xTe,createSetCartesian:fxe,createSetDifference:hxe,createSetDistinct:mxe,createSetIntersect:vxe,createSetIsSubset:xxe,createSetMultiplicity:wxe,createSetPowerset:_xe,createSetSize:Mxe,createSetSymDifference:Axe,createSetUnion:Dxe,createSign:ege,createSimplify:HCe,createSimplifyConstant:GCe,createSimplifyCore:XCe,createSin:nxe,createSinh:ixe,createSize:Dve,createSlu:mwe,createSmaller:xye,createSmallerEq:Sye,createSolveODE:Kve,createSort:Bye,createSpaClass:Jye,createSparse:l1e,createSparseMatrixClass:ope,createSpeedOfLight:kAe,createSplitUnit:Ope,createSqrt:rge,createSqrtm:g2e,createSquare:oge,createSqueeze:Pve,createStd:qK,createStdTransform:x3e,createStefanBoltzmann:bTe,createStirlingS2:NCe,createString:dpe,createSubset:NK,createSubsetTransform:f3e,createSubtract:age,createSubtractScalar:jpe,createSum:$K,createSumTransform:w3e,createSylvester:y2e,createSymbolNode:Tbe,createSymbolicEqual:QCe,createTan:sxe,createTanh:uxe,createTau:wAe,createThomsonCrossSection:sTe,createTo:x0e,createTrace:Uxe,createTranspose:Fve,createTrue:mAe,createTypeOf:Qhe,createTyped:Zfe,createUnaryMinus:Ipe,createUnaryPlus:Fpe,createUnequal:Oye,createUnitClass:i1e,createUnitFunction:s1e,createUppercaseE:RAe,createUppercasePi:PAe,createUsolve:W0e,createUsolveAll:X0e,createVacuumImpedance:UAe,createVariance:jK,createVarianceTransform:T3e,createVersion:OAe,createWeakMixingAngle:aTe,createWienDisplacement:wTe,createXgcd:uge,createXor:Vge,createZeros:Vve,createZeta:i0e,createZpk2tf:oAe},Symbol.toStringTag,{value:"Module"}));var W3e=H3e,Jk={exports:{}};function Qk(){}Qk.prototype={on:function(n,e,t){var r=this.e||(this.e={});return(r[n]||(r[n]=[])).push({fn:e,ctx:t}),this},once:function(n,e,t){var r=this;function i(){r.off(n,i),e.apply(t,arguments)}return i._=e,this.on(n,i,t)},emit:function(n){var e=[].slice.call(arguments,1),t=((this.e||(this.e={}))[n]||[]).slice(),r=0,i=t.length;for(r;r<i;r++)t[r].fn.apply(t[r].ctx,e);return this},off:function(n,e){var t=this.e||(this.e={}),r=t[n],i=[];if(r&&e)for(var o=0,s=r.length;o<s;o++)r[o].fn!==e&&r[o].fn._!==e&&i.push(r[o]);return i.length?t[n]=i:delete t[n],this}};Jk.exports=Qk;Jk.exports.TinyEmitter=Qk;var j3e=Jk.exports;const G3e=ll(j3e);function q3e(n){var e=new G3e;return n.on=e.on.bind(e),n.off=e.off.bind(e),n.once=e.once.bind(e),n.emit=e.emit.bind(e),n}function X3e(n,e,t,r){function i(y,p){var w=arguments.length;if(w!==1&&w!==2)throw new bc("import",w,1,2);p||(p={});function b(M,A,T){if(Array.isArray(A))A.forEach(R=>b(M,R));else if(typeof A=="object")for(var C in A)vt(A,C)&&b(M,A[C],C);else if(Q0(A)||T!==void 0){var D=Q0(A)?m(A)?A.fn+".transform":A.fn:T;if(vt(M,D)&&M[D]!==A&&!p.silent)throw new Error('Cannot import "'+D+'" twice');M[D]=A}else if(!p.silent)throw new TypeError("Factory, Object, or Array expected")}var v={};b(v,y);for(var S in v)if(vt(v,S)){var x=v[S];if(Q0(x))u(x,p);else if(c(x))o(S,x,p);else if(!p.silent)throw new TypeError("Factory, Object, or Array expected")}}function o(y,p,w){if(w.wrap&&typeof p=="function"&&(p=l(p)),f(p)&&(p=n(y,{[p.signature]:p})),n.isTypedFunction(t[y])&&n.isTypedFunction(p)){w.override?p=n(y,p.signatures):p=n(t[y],p),t[y]=p,delete r[y],s(y,p),t.emit("import",y,function(){return p});return}if(t[y]===void 0||w.override){t[y]=p,delete r[y],s(y,p),t.emit("import",y,function(){return p});return}if(!w.silent)throw new Error('Cannot import "'+y+'": already exists')}function s(y,p){p&&typeof p.transform=="function"?(t.expression.transform[y]=p.transform,d(y)&&(t.expression.mathWithTransform[y]=p.transform)):(delete t.expression.transform[y],d(y)&&(t.expression.mathWithTransform[y]=p))}function a(y){delete t.expression.transform[y],d(y)?t.expression.mathWithTransform[y]=t[y]:delete t.expression.mathWithTransform[y]}function l(y){var p=function(){for(var b=[],v=0,S=arguments.length;v<S;v++){var x=arguments[v];b[v]=x&&x.valueOf()}return y.apply(t,b)};return y.transform&&(p.transform=y.transform),p}function u(y,p){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.fn;if(w.includes("."))throw new Error("Factory name should not contain a nested path. Name: "+JSON.stringify(w));var b=m(y)?t.expression.transform:t,v=w in t.expression.transform,S=vt(b,w)?b[w]:void 0,x=function(){var A={};y.dependencies.map(GX).forEach(C=>{if(C.includes("."))throw new Error("Factory dependency should not contain a nested path. Name: "+JSON.stringify(C));C==="math"?A.math=t:C==="mathWithTransform"?A.mathWithTransform=t.expression.mathWithTransform:C==="classes"?A.classes=t:A[C]=t[C]});var T=y(A);if(T&&typeof T.transform=="function")throw new Error('Transforms cannot be attached to factory functions. Please create a separate function for it with exports.path="expression.transform"');if(S===void 0||p.override)return T;if(n.isTypedFunction(S)&&n.isTypedFunction(T))return n(S,T);if(p.silent)return S;throw new Error('Cannot import "'+w+'": already exists')};!y.meta||y.meta.lazy!==!1?(r_(b,w,x),S&&v?a(w):(m(y)||h(y))&&r_(t.expression.mathWithTransform,w,()=>b[w])):(b[w]=x(),S&&v?a(w):(m(y)||h(y))&&r_(t.expression.mathWithTransform,w,()=>b[w])),r[w]=y,t.emit("import",w,x)}function c(y){return typeof y=="function"||typeof y=="number"||typeof y=="string"||typeof y=="boolean"||y===null||os(y)||el(y)||en(y)||Zh(y)||Vt(y)||Array.isArray(y)}function f(y){return typeof y=="function"&&typeof y.signature=="string"}function d(y){return!vt(g,y)}function h(y){return!y.fn.includes(".")&&!vt(g,y.fn)&&(!y.meta||!y.meta.isClass)}function m(y){return y!==void 0&&y.meta!==void 0&&y.meta.isTransformFunction===!0||!1}var g={expression:!0,type:!0,docs:!0,error:!0,json:!0,chain:!0};return i}function KK(n,e){var t=pt({},CX,e);if(typeof Object.create!="function")throw new Error("ES5 not supported by this JavaScript engine. Please load the es5-shim and es5-sham library for compatibility.");var r=q3e({isNumber:rn,isComplex:el,isBigNumber:en,isFraction:Zh,isUnit:os,isString:Hi,isArray:Tn,isMatrix:Vt,isCollection:js,isDenseMatrix:ky,isSparseMatrix:lf,isRange:e2,isIndex:W1,isBoolean:AX,isResultSet:TX,isHelp:Dk,isFunction:DX,isDate:NX,isRegExp:PX,isObject:j1,isNull:RX,isUndefined:OX,isAccessorNode:Lf,isArrayNode:Rs,isAssignmentNode:kX,isBlockNode:IX,isConditionalNode:LX,isConstantNode:wn,isFunctionAssignmentNode:jg,isFunctionNode:oc,isIndexNode:Jh,isNode:Vn,isObjectNode:G1,isOperatorNode:Yr,isParenthesisNode:tu,isRangeNode:FX,isRelationalNode:BX,isSymbolNode:yi,isChain:Nk});r.config=Cfe(t,r.emit),r.expression={transform:{},mathWithTransform:{config:r.config}};var i=[],o=[];function s(c){if(Q0(c))return c(r);var f=c[Object.keys(c)[0]];if(Q0(f))return f(r);if(!Efe(c))throw console.warn("Factory object with properties `type`, `name`, and `factory` expected",c),new Error("Factory object with properties `type`, `name`, and `factory` expected");var d=i.indexOf(c),h;return d===-1?(c.math===!0?h=c.factory(r.type,t,s,r.typed,r):h=c.factory(r.type,t,s,r.typed),i.push(c),o.push(h)):h=o[d],h}var a={};function l(){for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return r.typed.apply(r.typed,f)}l.isTypedFunction=nh.isTypedFunction;var u=X3e(l,s,r,a);return r.import=u,r.on("config",()=>{Object.values(a).forEach(c=>{c&&c.meta&&c.meta.recreateOnConfigChange&&u(c,{override:!0})})}),r.create=KK.bind(null,n),r.factory=ae,r.import(Object.values(_fe(n))),r.ArgumentsError=bc,r.DimensionError=un,r.IndexError=Ia,r}class ZK{constructor(e){this.isMoving=!1,this.color="black",this.atomType="Connector",this.selected=!1,this.attachmentPoint1=null,this.attachmentPoint2=null;for(var t in e)this[t]=e[t];this.startX=this.attachmentPoint1.parentMolecule.outputX,this.startY=this.attachmentPoint1.parentMolecule.y,this.attachmentPoint1.connectors.push(this),this.attachmentPoint2!=null&&this.attachmentPoint2.connectors.push(this)}draw(){let e=O.widthToPixels(this.startX),t=O.heightToPixels(this.startY),r=O.widthToPixels(this.endX),i=O.heightToPixels(this.endY);O.c.beginPath(),O.c.fillStyle=this.color,O.c.strokeStyle=this.color,O.c.globalCompositeOperation="destination-over",this.selected?O.c.lineWidth=3:O.c.lineWidth=1,O.c.moveTo(e,t),O.c.bezierCurveTo(e+100,t,r-100,i,r,i),O.c.stroke(),O.c.globalCompositeOperation="source-over"}clickUp(e,t){if(this.isMoving){var r=!1;O.currentMolecule.nodesOnTheScreen.forEach(i=>{i.inputs.forEach(o=>{o.wasConnectionMade(e,t)&&!r&&this.attachmentPoint1.parentMolecule!==o.parentMolecule&&(r=!0,this.attachmentPoint2=o,o.attach(this),this.propogate())})}),r||this.deleteSelf(),this.isMoving=!1}}mouseMove(e,t){this.isMoving==!0&&(this.endX=O.pixelsToWidth(e),this.endY=O.pixelsToHeight(t))}keyPress(e){this.selected&&["Delete","Backspace"].includes(e)&&this.deleteSelf()}deleteSelf(e=!1){this.attachmentPoint1.deleteConnector(this),this.attachmentPoint2!=null&&(this.attachmentPoint2.deleteConnector(this),e||this.attachmentPoint2.setDefault())}serialize(){if(this.attachmentPoint2!=null){var e={ap1Name:this.attachmentPoint1.name,ap2Name:this.attachmentPoint2.name,ap2Primary:this.attachmentPoint2.primary,ap1ID:this.attachmentPoint1.parentMolecule.uniqueID,ap2ID:this.attachmentPoint2.parentMolecule.uniqueID};return e}}waitOnComingInformation(){this.attachmentPoint2&&this.attachmentPoint2.waitOnComingInformation()}propogate(){this.attachmentPoint1.ready&&this.attachmentPoint2&&this.attachmentPoint2.setValue(this.attachmentPoint1.getValue())}walkBackForConstants(e){this.attachmentPoint1.parentMolecule.walkBackForConstants(e)}update(){this.startX=this.attachmentPoint1.x,this.startY=this.attachmentPoint1.y,this.attachmentPoint2&&(this.endX=this.attachmentPoint2.x,this.endY=this.attachmentPoint2.y),this.draw()}}class Ds{static get DIST_FROM_PARENT(){return 3.5}static get TARGET_SCALEUP(){return 1.2}static get RADIUS(){return 1/150}constructor(e){this.isVisible=!1,this.isTargetted=!1,this.x,this.y,this.uniqueID=0,this.atomType="AttachmentPoint",this.valueType="number",this.type="output",this.value=10,this.defaultValue=10,this.ready=!0,this.connectors=[];for(var t in e)this[t]=e[t];this.unexpand()}draw(){if(!this.isVisible)return;let e=O.widthToPixels(this.x),t=O.heightToPixels(this.y),r=O.widthToPixels(Ds.RADIUS);this.isTargetted&&(r=r*Ds.TARGET_SCALEUP),O.c.font="10px Work Sans";var i=O.c.measureText(this.name).width,o=this.name==="geometry"?this.parentMolecule.selectedColor:"#C300FF",s=r*.5;O.c.globalCompositeOperation="source-over",O.c.beginPath(),O.c.fillStyle=o;var a=t-r,l=e;this.type=="input"&&(l=e-i-r-s);var u=l;this.type=="output"&&(u=l+r+s),O.c.arc(l,t,r,Math.PI/2,-1*Math.PI/2),O.c.rect(l,a,i+r+s,r*2),O.c.arc(l+i+r+s,t,r,-1*Math.PI/2,Math.PI/2),O.c.fill(),O.c.beginPath(),O.c.fillStyle=this.parentMolecule.defaultColor,O.c.fillText(this.name,u,t+2),O.c.fill(),O.c.closePath(),O.c.beginPath(),this.ready?O.c.fillStyle=this.parentMolecule.color:O.c.fillStyle="#6ba4ff",O.c.strokeStyle=this.parentMolecule.strokeColor,O.c.lineWidth=1,O.c.arc(e,t,r,0,Math.PI*2,!1),O.c.fill(),O.c.stroke(),O.c.closePath()}clickDown(e,t,r){return this.isCloseEnoughToTarget(e,t)&&!r?(this.type=="output"&&new ZK({parentMolecule:this.parentMolecule,attachmentPoint1:this,atomType:"Connector",isMoving:!0}),this.type=="input"&&this.connectors.forEach(i=>{i.selected=!0}),!0):(this.type=="input"&&this.connectors.forEach(i=>{i.selected=!1}),!1)}clickUp(e,t){this.connectors.forEach(r=>{r.clickUp(e,t)})}mouseMove(e,t){let r=Ds.DIST_FROM_PARENT*this.parentMolecule.radius,i=O.widthToPixels(this.parentMolecule.x),o=O.heightToPixels(this.parentMolecule.y);O.distBetweenPoints(i,e,o,t)<=O.widthToPixels(r)?(this.isVisible=!0,[this.x,this.y]=this.computePosition(r),[this.x,this.y]=O.constrainToCanvasBorders(this.x,this.y),this.isTargetted=this.isCloseEnoughToTarget(e,t)):this.unexpand(),this.connectors.forEach(s=>{s.mouseMove(e,t)})}unexpand(){this.isVisible=!1,this.isTargetted=!1,this.y=this.parentMolecule.y,this.type=="input"?this.x=this.parentMolecule.x-this.parentMolecule.radius:this.x=this.parentMolecule.x+this.parentMolecule.radius,[this.x,this.y]=O.constrainToCanvasBorders(this.x,this.y)}computePosition(e){const t=this.parentMolecule.inputs.filter(r=>r.type=="input");if(this.type=="output")return[this.parentMolecule.x+this.parentMolecule.radius+Ds.RADIUS*.75,this.parentMolecule.y];if(this.type=="input"&&t.length==1)return[this.parentMolecule.x-this.parentMolecule.radius-Ds.RADIUS*.75,this.parentMolecule.y];{const r=t.indexOf(this),i=Math.PI/(t.length+1),o=e-Ds.RADIUS*Ds.TARGET_SCALEUP,s=Math.PI/2+i;let a=o*Math.cos(r*i+s),l=-1*O.pixelsToHeight(O.widthToPixels(o)*Math.sin(r*i+s));return[this.parentMolecule.x+a,this.parentMolecule.y+l]}}isCloseEnoughToTarget(e,t){if(!this.isVisible)return!1;const r=O.distBetweenPoints(e,O.widthToPixels(this.x),t,O.heightToPixels(this.y)),i=O.widthToPixels(Ds.RADIUS);if(this.type=="output")return r<=i*2;{let o=i*2;const s=this.parentMolecule.inputs.filter(c=>c.type=="input").length;let a=O.widthToPixels(Ds.DIST_FROM_PARENT*this.parentMolecule.radius-Ds.RADIUS*Ds.TARGET_SCALEUP);const l=Math.PI/(s+1),u=a*Math.sin(l/2);return o=Math.max(i,Math.min(o,u)),r<o}}keyPress(e){this.connectors.forEach(t=>{t.keyPress(e)})}deleteSelf(e=!1){var t=[...this.connectors];t.forEach(r=>{r.deleteSelf(e)})}deleteConnector(e="all"){try{const t=this.connectors.indexOf(e);t!=-1?this.connectors.splice(t,1):this.connectors=[]}catch(t){console.warn("Error deleting connector: "),console.warn(t)}}wasConnectionMade(e,t){return this.isCloseEnoughToTarget(e,t)&&this.connectors.length==0}attach(e){this.connectors.push(e)}beginPropagation(){this.connectors.length==0&&this.setValue(this.value)}waitOnComingInformation(){this.type=="output"?this.connectors.forEach(e=>{e.waitOnComingInformation()}):(this.ready=!1,this.parentMolecule.waitOnComingInformation(this.name))}setDefault(){this.setValue(this.defaultValue)}updateDefault(e){var t=this.defaultValue;this.defaultValue=e,this.connectors.length==0&&this.value==t&&(this.value=this.defaultValue)}getValue(){return this.value}setValue(e){this.value=e,this.ready=!0,this.type=="output"?this.connectors.forEach(t=>{t.propogate()}):this.parentMolecule.updateValue(this.name)}update(){this.draw(),this.connectors.forEach(e=>{e.update()})}}var Y3e={exports:{}};(function(n){(function(){function e(v){var S={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:`Remove only spaces, ' and " from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids`,type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,describe:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,describe:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,describe:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,describe:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,describe:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",describe:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,describe:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,describe:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,describe:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,describe:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,describe:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},ellipsis:{defaultValue:!0,describe:"Replaces three dots with the ellipsis unicode character",type:"boolean"},completeHTMLDocument:{defaultValue:!1,describe:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,describe:"Enable support for document metadata (defined at the top of the document between `` and `` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,describe:"Split adjacent blockquote blocks",type:"boolean"}};if(v===!1)return JSON.parse(JSON.stringify(S));var x={};for(var M in S)S.hasOwnProperty(M)&&(x[M]=S[M].defaultValue);return x}function t(){var v=e(!0),S={};for(var x in v)v.hasOwnProperty(x)&&(S[x]=!0);return S}var r={},i={},o={},s=e(!0),a="vanilla",l={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:e(!0),allOn:t()};r.helper={},r.extensions={},r.setOption=function(v,S){return s[v]=S,this},r.getOption=function(v){return s[v]},r.getOptions=function(){return s},r.resetOptions=function(){s=e(!0)},r.setFlavor=function(v){if(!l.hasOwnProperty(v))throw Error(v+" flavor was not found");r.resetOptions();var S=l[v];a=v;for(var x in S)S.hasOwnProperty(x)&&(s[x]=S[x])},r.getFlavor=function(){return a},r.getFlavorOptions=function(v){if(l.hasOwnProperty(v))return l[v]},r.getDefaultOptions=function(v){return e(v)},r.subParser=function(v,S){if(r.helper.isString(v))if(typeof S<"u")i[v]=S;else{if(i.hasOwnProperty(v))return i[v];throw Error("SubParser named "+v+" not registered!")}},r.extension=function(v,S){if(!r.helper.isString(v))throw Error("Extension 'name' must be a string");if(v=r.helper.stdExtName(v),r.helper.isUndefined(S)){if(!o.hasOwnProperty(v))throw Error("Extension named "+v+" is not registered!");return o[v]}else{typeof S=="function"&&(S=S()),r.helper.isArray(S)||(S=[S]);var x=u(S,v);if(x.valid)o[v]=S;else throw Error(x.error)}},r.getAllExtensions=function(){return o},r.removeExtension=function(v){delete o[v]},r.resetExtensions=function(){o={}};function u(v,S){var x=S?"Error in "+S+" extension->":"Error in unnamed extension",M={valid:!0,error:""};r.helper.isArray(v)||(v=[v]);for(var A=0;A<v.length;++A){var T=x+" sub-extension "+A+": ",C=v[A];if(typeof C!="object")return M.valid=!1,M.error=T+"must be an object, but "+typeof C+" given",M;if(!r.helper.isString(C.type))return M.valid=!1,M.error=T+'property "type" must be a string, but '+typeof C.type+" given",M;var D=C.type=C.type.toLowerCase();if(D==="language"&&(D=C.type="lang"),D==="html"&&(D=C.type="output"),D!=="lang"&&D!=="output"&&D!=="listener")return M.valid=!1,M.error=T+"type "+D+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',M;if(D==="listener"){if(r.helper.isUndefined(C.listeners))return M.valid=!1,M.error=T+'. Extensions of type "listener" must have a property called "listeners"',M}else if(r.helper.isUndefined(C.filter)&&r.helper.isUndefined(C.regex))return M.valid=!1,M.error=T+D+' extensions must define either a "regex" property or a "filter" method',M;if(C.listeners){if(typeof C.listeners!="object")return M.valid=!1,M.error=T+'"listeners" property must be an object but '+typeof C.listeners+" given",M;for(var R in C.listeners)if(C.listeners.hasOwnProperty(R)&&typeof C.listeners[R]!="function")return M.valid=!1,M.error=T+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+R+" must be a function but "+typeof C.listeners[R]+" given",M}if(C.filter){if(typeof C.filter!="function")return M.valid=!1,M.error=T+'"filter" must be a function, but '+typeof C.filter+" given",M}else if(C.regex){if(r.helper.isString(C.regex)&&(C.regex=new RegExp(C.regex,"g")),!(C.regex instanceof RegExp))return M.valid=!1,M.error=T+'"regex" property must either be a string or a RegExp object, but '+typeof C.regex+" given",M;if(r.helper.isUndefined(C.replace))return M.valid=!1,M.error=T+'"regex" extensions must implement a replace string or function',M}}return M}r.validateExtension=function(v){var S=u(v,null);return S.valid?!0:(console.warn(S.error),!1)},r.hasOwnProperty("helper")||(r.helper={}),r.helper.isString=function(v){return typeof v=="string"||v instanceof String},r.helper.isFunction=function(v){var S={};return v&&S.toString.call(v)==="[object Function]"},r.helper.isArray=function(v){return Array.isArray(v)},r.helper.isUndefined=function(v){return typeof v>"u"},r.helper.forEach=function(v,S){if(r.helper.isUndefined(v))throw new Error("obj param is required");if(r.helper.isUndefined(S))throw new Error("callback param is required");if(!r.helper.isFunction(S))throw new Error("callback param must be a function/closure");if(typeof v.forEach=="function")v.forEach(S);else if(r.helper.isArray(v))for(var x=0;x<v.length;x++)S(v[x],x,v);else if(typeof v=="object")for(var M in v)v.hasOwnProperty(M)&&S(v[M],M,v);else throw new Error("obj does not seem to be an array or an iterable object")},r.helper.stdExtName=function(v){return v.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()};function c(v,S){var x=S.charCodeAt(0);return"E"+x+"E"}r.helper.escapeCharactersCallback=c,r.helper.escapeCharacters=function(v,S,x){var M="(["+S.replace(/([\[\]\\])/g,"\\$1")+"])";x&&(M="\\\\"+M);var A=new RegExp(M,"g");return v=v.replace(A,c),v},r.helper.unescapeHTMLEntities=function(v){return v.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var f=function(v,S,x,M){var A=M||"",T=A.indexOf("g")>-1,C=new RegExp(S+"|"+x,"g"+A.replace(/g/g,"")),D=new RegExp(S,A.replace(/g/g,"")),R=[],B,F,U,N,I;do for(B=0;U=C.exec(v);)if(D.test(U[0]))B++||(F=C.lastIndex,N=F-U[0].length);else if(B&&!--B){I=U.index+U[0].length;var V={left:{start:N,end:F},match:{start:F,end:U.index},right:{start:U.index,end:I},wholeMatch:{start:N,end:I}};if(R.push(V),!T)return R}while(B&&(C.lastIndex=F));return R};r.helper.matchRecursiveRegExp=function(v,S,x,M){for(var A=f(v,S,x,M),T=[],C=0;C<A.length;++C)T.push([v.slice(A[C].wholeMatch.start,A[C].wholeMatch.end),v.slice(A[C].match.start,A[C].match.end),v.slice(A[C].left.start,A[C].left.end),v.slice(A[C].right.start,A[C].right.end)]);return T},r.helper.replaceRecursiveRegExp=function(v,S,x,M,A){if(!r.helper.isFunction(S)){var T=S;S=function(){return T}}var C=f(v,x,M,A),D=v,R=C.length;if(R>0){var B=[];C[0].wholeMatch.start!==0&&B.push(v.slice(0,C[0].wholeMatch.start));for(var F=0;F<R;++F)B.push(S(v.slice(C[F].wholeMatch.start,C[F].wholeMatch.end),v.slice(C[F].match.start,C[F].match.end),v.slice(C[F].left.start,C[F].left.end),v.slice(C[F].right.start,C[F].right.end))),F<R-1&&B.push(v.slice(C[F].wholeMatch.end,C[F+1].wholeMatch.start));C[R-1].wholeMatch.end<v.length&&B.push(v.slice(C[R-1].wholeMatch.end)),D=B.join("")}return D},r.helper.regexIndexOf=function(v,S,x){if(!r.helper.isString(v))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(!(S instanceof RegExp))throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var M=v.substring(x||0).search(S);return M>=0?M+(x||0):M},r.helper.splitAtIndex=function(v,S){if(!r.helper.isString(v))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[v.substring(0,S),v.substring(S)]},r.helper.encodeEmailAddress=function(v){var S=[function(x){return"&#"+x.charCodeAt(0)+";"},function(x){return"&#x"+x.charCodeAt(0).toString(16)+";"},function(x){return x}];return v=v.replace(/./g,function(x){if(x==="@")x=S[Math.floor(Math.random()*2)](x);else{var M=Math.random();x=M>.9?S[2](x):M>.45?S[1](x):S[0](x)}return x}),v},r.helper.padEnd=function(S,x,M){return x=x>>0,M=String(M||" "),S.length>x?String(S):(x=x-S.length,x>M.length&&(M+=M.repeat(x/M.length)),String(S)+M.slice(0,x))},typeof console>"u"&&(console={warn:function(v){alert(v)},log:function(v){alert(v)},error:function(v){throw v}}),r.helper.regexes={asteriskDashAndColon:/([*_:~])/g},r.helper.emojis={"+1":"","-1":"",100:"",1234:"","1st_place_medal":"","2nd_place_medal":"","3rd_place_medal":"","8ball":"",a:"",ab:"",abc:"",abcd:"",accept:"",aerial_tramway:"",airplane:"",alarm_clock:"",alembic:"",alien:"",ambulance:"",amphora:"",anchor:"",angel:"",anger:"",angry:"",anguished:"",ant:"",apple:"",aquarius:"",aries:"",arrow_backward:"",arrow_double_down:"",arrow_double_up:"",arrow_down:"",arrow_down_small:"",arrow_forward:"",arrow_heading_down:"",arrow_heading_up:"",arrow_left:"",arrow_lower_left:"",arrow_lower_right:"",arrow_right:"",arrow_right_hook:"",arrow_up:"",arrow_up_down:"",arrow_up_small:"",arrow_upper_left:"",arrow_upper_right:"",arrows_clockwise:"",arrows_counterclockwise:"",art:"",articulated_lorry:"",artificial_satellite:"",astonished:"",athletic_shoe:"",atm:"",atom_symbol:"",avocado:"",b:"",baby:"",baby_bottle:"",baby_chick:"",baby_symbol:"",back:"",bacon:"",badminton:"",baggage_claim:"",baguette_bread:"",balance_scale:"",balloon:"",ballot_box:"",ballot_box_with_check:"",bamboo:"",banana:"",bangbang:"",bank:"",bar_chart:"",barber:"",baseball:"",basketball:"",basketball_man:"",basketball_woman:"&zwj;",bat:"",bath:"",bathtub:"",battery:"",beach_umbrella:"",bear:"",bed:"",bee:"",beer:"",beers:"",beetle:"",beginner:"",bell:"",bellhop_bell:"",bento:"",biking_man:"",bike:"",biking_woman:"&zwj;",bikini:"",biohazard:"",bird:"",birthday:"",black_circle:"",black_flag:"",black_heart:"",black_joker:"",black_large_square:"",black_medium_small_square:"",black_medium_square:"",black_nib:"",black_small_square:"",black_square_button:"",blonde_man:"",blonde_woman:"&zwj;",blossom:"",blowfish:"",blue_book:"",blue_car:"",blue_heart:"",blush:"",boar:"",boat:"",bomb:"",book:"",bookmark:"",bookmark_tabs:"",books:"",boom:"",boot:"",bouquet:"",bowing_man:"",bow_and_arrow:"",bowing_woman:"&zwj;",bowling:"",boxing_glove:"",boy:"",bread:"",bride_with_veil:"",bridge_at_night:"",briefcase:"",broken_heart:"",bug:"",building_construction:"",bulb:"",bullettrain_front:"",bullettrain_side:"",burrito:"",bus:"",business_suit_levitating:"",busstop:"",bust_in_silhouette:"",busts_in_silhouette:"",butterfly:"",cactus:"",cake:"",calendar:"",call_me_hand:"",calling:"",camel:"",camera:"",camera_flash:"",camping:"",cancer:"",candle:"",candy:"",canoe:"",capital_abcd:"",capricorn:"",car:"",card_file_box:"",card_index:"",card_index_dividers:"",carousel_horse:"",carrot:"",cat:"",cat2:"",cd:"",chains:"",champagne:"",chart:"",chart_with_downwards_trend:"",chart_with_upwards_trend:"",checkered_flag:"",cheese:"",cherries:"",cherry_blossom:"",chestnut:"",chicken:"",children_crossing:"",chipmunk:"",chocolate_bar:"",christmas_tree:"",church:"",cinema:"",circus_tent:"",city_sunrise:"",city_sunset:"",cityscape:"",cl:"",clamp:"",clap:"",clapper:"",classical_building:"",clinking_glasses:"",clipboard:"",clock1:"",clock10:"",clock1030:"",clock11:"",clock1130:"",clock12:"",clock1230:"",clock130:"",clock2:"",clock230:"",clock3:"",clock330:"",clock4:"",clock430:"",clock5:"",clock530:"",clock6:"",clock630:"",clock7:"",clock730:"",clock8:"",clock830:"",clock9:"",clock930:"",closed_book:"",closed_lock_with_key:"",closed_umbrella:"",cloud:"",cloud_with_lightning:"",cloud_with_lightning_and_rain:"",cloud_with_rain:"",cloud_with_snow:"",clown_face:"",clubs:"",cocktail:"",coffee:"",coffin:"",cold_sweat:"",comet:"",computer:"",computer_mouse:"",confetti_ball:"",confounded:"",confused:"",congratulations:"",construction:"",construction_worker_man:"",construction_worker_woman:"&zwj;",control_knobs:"",convenience_store:"",cookie:"",cool:"",policeman:"",copyright:"",corn:"",couch_and_lamp:"",couple:"",couple_with_heart_woman_man:"",couple_with_heart_man_man:"&zwj;&zwj;",couple_with_heart_woman_woman:"&zwj;&zwj;",couplekiss_man_man:"&zwj;&zwj;&zwj;",couplekiss_man_woman:"",couplekiss_woman_woman:"&zwj;&zwj;&zwj;",cow:"",cow2:"",cowboy_hat_face:"",crab:"",crayon:"",credit_card:"",crescent_moon:"",cricket:"",crocodile:"",croissant:"",crossed_fingers:"",crossed_flags:"",crossed_swords:"",crown:"",cry:"",crying_cat_face:"",crystal_ball:"",cucumber:"",cupid:"",curly_loop:"",currency_exchange:"",curry:"",custard:"",customs:"",cyclone:"",dagger:"",dancer:"",dancing_women:"",dancing_men:"&zwj;",dango:"",dark_sunglasses:"",dart:"",dash:"",date:"",deciduous_tree:"",deer:"",department_store:"",derelict_house:"",desert:"",desert_island:"",desktop_computer:"",male_detective:"",diamond_shape_with_a_dot_inside:"",diamonds:"",disappointed:"",disappointed_relieved:"",dizzy:"",dizzy_face:"",do_not_litter:"",dog:"",dog2:"",dollar:"",dolls:"",dolphin:"",door:"",doughnut:"",dove:"",dragon:"",dragon_face:"",dress:"",dromedary_camel:"",drooling_face:"",droplet:"",drum:"",duck:"",dvd:"","e-mail":"",eagle:"",ear:"",ear_of_rice:"",earth_africa:"",earth_americas:"",earth_asia:"",egg:"",eggplant:"",eight_pointed_black_star:"",eight_spoked_asterisk:"",electric_plug:"",elephant:"",email:"",end:"",envelope_with_arrow:"",euro:"",european_castle:"",european_post_office:"",evergreen_tree:"",exclamation:"",expressionless:"",eye:"",eye_speech_bubble:"&zwj;",eyeglasses:"",eyes:"",face_with_head_bandage:"",face_with_thermometer:"",fist_oncoming:"",factory:"",fallen_leaf:"",family_man_woman_boy:"",family_man_boy:"&zwj;",family_man_boy_boy:"&zwj;&zwj;",family_man_girl:"&zwj;",family_man_girl_boy:"&zwj;&zwj;",family_man_girl_girl:"&zwj;&zwj;",family_man_man_boy:"&zwj;&zwj;",family_man_man_boy_boy:"&zwj;&zwj;&zwj;",family_man_man_girl:"&zwj;&zwj;",family_man_man_girl_boy:"&zwj;&zwj;&zwj;",family_man_man_girl_girl:"&zwj;&zwj;&zwj;",family_man_woman_boy_boy:"&zwj;&zwj;&zwj;",family_man_woman_girl:"&zwj;&zwj;",family_man_woman_girl_boy:"&zwj;&zwj;&zwj;",family_man_woman_girl_girl:"&zwj;&zwj;&zwj;",family_woman_boy:"&zwj;",family_woman_boy_boy:"&zwj;&zwj;",family_woman_girl:"&zwj;",family_woman_girl_boy:"&zwj;&zwj;",family_woman_girl_girl:"&zwj;&zwj;",family_woman_woman_boy:"&zwj;&zwj;",family_woman_woman_boy_boy:"&zwj;&zwj;&zwj;",family_woman_woman_girl:"&zwj;&zwj;",family_woman_woman_girl_boy:"&zwj;&zwj;&zwj;",family_woman_woman_girl_girl:"&zwj;&zwj;&zwj;",fast_forward:"",fax:"",fearful:"",feet:"",female_detective:"&zwj;",ferris_wheel:"",ferry:"",field_hockey:"",file_cabinet:"",file_folder:"",film_projector:"",film_strip:"",fire:"",fire_engine:"",fireworks:"",first_quarter_moon:"",first_quarter_moon_with_face:"",fish:"",fish_cake:"",fishing_pole_and_fish:"",fist_raised:"",fist_left:"",fist_right:"",flags:"",flashlight:"",fleur_de_lis:"",flight_arrival:"",flight_departure:"",floppy_disk:"",flower_playing_cards:"",flushed:"",fog:"",foggy:"",football:"",footprints:"",fork_and_knife:"",fountain:"",fountain_pen:"",four_leaf_clover:"",fox_face:"",framed_picture:"",free:"",fried_egg:"",fried_shrimp:"",fries:"",frog:"",frowning:"",frowning_face:"",frowning_man:"&zwj;",frowning_woman:"",middle_finger:"",fuelpump:"",full_moon:"",full_moon_with_face:"",funeral_urn:"",game_die:"",gear:"",gem:"",gemini:"",ghost:"",gift:"",gift_heart:"",girl:"",globe_with_meridians:"",goal_net:"",goat:"",golf:"",golfing_man:"",golfing_woman:"&zwj;",gorilla:"",grapes:"",green_apple:"",green_book:"",green_heart:"",green_salad:"",grey_exclamation:"",grey_question:"",grimacing:"",grin:"",grinning:"",guardsman:"",guardswoman:"&zwj;",guitar:"",gun:"",haircut_woman:"",haircut_man:"&zwj;",hamburger:"",hammer:"",hammer_and_pick:"",hammer_and_wrench:"",hamster:"",hand:"",handbag:"",handshake:"",hankey:"",hatched_chick:"",hatching_chick:"",headphones:"",hear_no_evil:"",heart:"",heart_decoration:"",heart_eyes:"",heart_eyes_cat:"",heartbeat:"",heartpulse:"",hearts:"",heavy_check_mark:"",heavy_division_sign:"",heavy_dollar_sign:"",heavy_heart_exclamation:"",heavy_minus_sign:"",heavy_multiplication_x:"",heavy_plus_sign:"",helicopter:"",herb:"",hibiscus:"",high_brightness:"",high_heel:"",hocho:"",hole:"",honey_pot:"",horse:"",horse_racing:"",hospital:"",hot_pepper:"",hotdog:"",hotel:"",hotsprings:"",hourglass:"",hourglass_flowing_sand:"",house:"",house_with_garden:"",houses:"",hugs:"",hushed:"",ice_cream:"",ice_hockey:"",ice_skate:"",icecream:"",id:"",ideograph_advantage:"",imp:"",inbox_tray:"",incoming_envelope:"",tipping_hand_woman:"",information_source:"",innocent:"",interrobang:"",iphone:"",izakaya_lantern:"",jack_o_lantern:"",japan:"",japanese_castle:"",japanese_goblin:"",japanese_ogre:"",jeans:"",joy:"",joy_cat:"",joystick:"",kaaba:"",key:"",keyboard:"",keycap_ten:"",kick_scooter:"",kimono:"",kiss:"",kissing:"",kissing_cat:"",kissing_closed_eyes:"",kissing_heart:"",kissing_smiling_eyes:"",kiwi_fruit:"",koala:"",koko:"",label:"",large_blue_circle:"",large_blue_diamond:"",large_orange_diamond:"",last_quarter_moon:"",last_quarter_moon_with_face:"",latin_cross:"",laughing:"",leaves:"",ledger:"",left_luggage:"",left_right_arrow:"",leftwards_arrow_with_hook:"",lemon:"",leo:"",leopard:"",level_slider:"",libra:"",light_rail:"",link:"",lion:"",lips:"",lipstick:"",lizard:"",lock:"",lock_with_ink_pen:"",lollipop:"",loop:"",loud_sound:"",loudspeaker:"",love_hotel:"",love_letter:"",low_brightness:"",lying_face:"",m:"",mag:"",mag_right:"",mahjong:"",mailbox:"",mailbox_closed:"",mailbox_with_mail:"",mailbox_with_no_mail:"",man:"",man_artist:"&zwj;",man_astronaut:"&zwj;",man_cartwheeling:"&zwj;",man_cook:"&zwj;",man_dancing:"",man_facepalming:"&zwj;",man_factory_worker:"&zwj;",man_farmer:"&zwj;",man_firefighter:"&zwj;",man_health_worker:"&zwj;",man_in_tuxedo:"",man_judge:"&zwj;",man_juggling:"&zwj;",man_mechanic:"&zwj;",man_office_worker:"&zwj;",man_pilot:"&zwj;",man_playing_handball:"&zwj;",man_playing_water_polo:"&zwj;",man_scientist:"&zwj;",man_shrugging:"&zwj;",man_singer:"&zwj;",man_student:"&zwj;",man_teacher:"&zwj;",man_technologist:"&zwj;",man_with_gua_pi_mao:"",man_with_turban:"",tangerine:"",mans_shoe:"",mantelpiece_clock:"",maple_leaf:"",martial_arts_uniform:"",mask:"",massage_woman:"",massage_man:"&zwj;",meat_on_bone:"",medal_military:"",medal_sports:"",mega:"",melon:"",memo:"",men_wrestling:"&zwj;",menorah:"",mens:"",metal:"",metro:"",microphone:"",microscope:"",milk_glass:"",milky_way:"",minibus:"",minidisc:"",mobile_phone_off:"",money_mouth_face:"",money_with_wings:"",moneybag:"",monkey:"",monkey_face:"",monorail:"",moon:"",mortar_board:"",mosque:"",motor_boat:"",motor_scooter:"",motorcycle:"",motorway:"",mount_fuji:"",mountain:"",mountain_biking_man:"",mountain_biking_woman:"&zwj;",mountain_cableway:"",mountain_railway:"",mountain_snow:"",mouse:"",mouse2:"",movie_camera:"",moyai:"",mrs_claus:"",muscle:"",mushroom:"",musical_keyboard:"",musical_note:"",musical_score:"",mute:"",nail_care:"",name_badge:"",national_park:"",nauseated_face:"",necktie:"",negative_squared_cross_mark:"",nerd_face:"",neutral_face:"",new:"",new_moon:"",new_moon_with_face:"",newspaper:"",newspaper_roll:"",next_track_button:"",ng:"",no_good_man:"&zwj;",no_good_woman:"",night_with_stars:"",no_bell:"",no_bicycles:"",no_entry:"",no_entry_sign:"",no_mobile_phones:"",no_mouth:"",no_pedestrians:"",no_smoking:"","non-potable_water":"",nose:"",notebook:"",notebook_with_decorative_cover:"",notes:"",nut_and_bolt:"",o:"",o2:"",ocean:"",octopus:"",oden:"",office:"",oil_drum:"",ok:"",ok_hand:"",ok_man:"&zwj;",ok_woman:"",old_key:"",older_man:"",older_woman:"",om:"",on:"",oncoming_automobile:"",oncoming_bus:"",oncoming_police_car:"",oncoming_taxi:"",open_file_folder:"",open_hands:"",open_mouth:"",open_umbrella:"",ophiuchus:"",orange_book:"",orthodox_cross:"",outbox_tray:"",owl:"",ox:"",package:"",page_facing_up:"",page_with_curl:"",pager:"",paintbrush:"",palm_tree:"",pancakes:"",panda_face:"",paperclip:"",paperclips:"",parasol_on_ground:"",parking:"",part_alternation_mark:"",partly_sunny:"",passenger_ship:"",passport_control:"",pause_button:"",peace_symbol:"",peach:"",peanuts:"",pear:"",pen:"",pencil2:"",penguin:"",pensive:"",performing_arts:"",persevere:"",person_fencing:"",pouting_woman:"",phone:"",pick:"",pig:"",pig2:"",pig_nose:"",pill:"",pineapple:"",ping_pong:"",pisces:"",pizza:"",place_of_worship:"",plate_with_cutlery:"",play_or_pause_button:"",point_down:"",point_left:"",point_right:"",point_up:"",point_up_2:"",police_car:"",policewoman:"&zwj;",poodle:"",popcorn:"",post_office:"",postal_horn:"",postbox:"",potable_water:"",potato:"",pouch:"",poultry_leg:"",pound:"",rage:"",pouting_cat:"",pouting_man:"&zwj;",pray:"",prayer_beads:"",pregnant_woman:"",previous_track_button:"",prince:"",princess:"",printer:"",purple_heart:"",purse:"",pushpin:"",put_litter_in_its_place:"",question:"",rabbit:"",rabbit2:"",racehorse:"",racing_car:"",radio:"",radio_button:"",radioactive:"",railway_car:"",railway_track:"",rainbow:"",rainbow_flag:"&zwj;",raised_back_of_hand:"",raised_hand_with_fingers_splayed:"",raised_hands:"",raising_hand_woman:"",raising_hand_man:"&zwj;",ram:"",ramen:"",rat:"",record_button:"",recycle:"",red_circle:"",registered:"",relaxed:"",relieved:"",reminder_ribbon:"",repeat:"",repeat_one:"",rescue_worker_helmet:"",restroom:"",revolving_hearts:"",rewind:"",rhinoceros:"",ribbon:"",rice:"",rice_ball:"",rice_cracker:"",rice_scene:"",right_anger_bubble:"",ring:"",robot:"",rocket:"",rofl:"",roll_eyes:"",roller_coaster:"",rooster:"",rose:"",rosette:"",rotating_light:"",round_pushpin:"",rowing_man:"",rowing_woman:"&zwj;",rugby_football:"",running_man:"",running_shirt_with_sash:"",running_woman:"&zwj;",sa:"",sagittarius:"",sake:"",sandal:"",santa:"",satellite:"",saxophone:"",school:"",school_satchel:"",scissors:"",scorpion:"",scorpius:"",scream:"",scream_cat:"",scroll:"",seat:"",secret:"",see_no_evil:"",seedling:"",selfie:"",shallow_pan_of_food:"",shamrock:"",shark:"",shaved_ice:"",sheep:"",shell:"",shield:"",shinto_shrine:"",ship:"",shirt:"",shopping:"",shopping_cart:"",shower:"",shrimp:"",signal_strength:"",six_pointed_star:"",ski:"",skier:"",skull:"",skull_and_crossbones:"",sleeping:"",sleeping_bed:"",sleepy:"",slightly_frowning_face:"",slightly_smiling_face:"",slot_machine:"",small_airplane:"",small_blue_diamond:"",small_orange_diamond:"",small_red_triangle:"",small_red_triangle_down:"",smile:"",smile_cat:"",smiley:"",smiley_cat:"",smiling_imp:"",smirk:"",smirk_cat:"",smoking:"",snail:"",snake:"",sneezing_face:"",snowboarder:"",snowflake:"",snowman:"",snowman_with_snow:"",sob:"",soccer:"",soon:"",sos:"",sound:"",space_invader:"",spades:"",spaghetti:"",sparkle:"",sparkler:"",sparkles:"",sparkling_heart:"",speak_no_evil:"",speaker:"",speaking_head:"",speech_balloon:"",speedboat:"",spider:"",spider_web:"",spiral_calendar:"",spiral_notepad:"",spoon:"",squid:"",stadium:"",star:"",star2:"",star_and_crescent:"",star_of_david:"",stars:"",station:"",statue_of_liberty:"",steam_locomotive:"",stew:"",stop_button:"",stop_sign:"",stopwatch:"",straight_ruler:"",strawberry:"",stuck_out_tongue:"",stuck_out_tongue_closed_eyes:"",stuck_out_tongue_winking_eye:"",studio_microphone:"",stuffed_flatbread:"",sun_behind_large_cloud:"",sun_behind_rain_cloud:"",sun_behind_small_cloud:"",sun_with_face:"",sunflower:"",sunglasses:"",sunny:"",sunrise:"",sunrise_over_mountains:"",surfing_man:"",surfing_woman:"&zwj;",sushi:"",suspension_railway:"",sweat:"",sweat_drops:"",sweat_smile:"",sweet_potato:"",swimming_man:"",swimming_woman:"&zwj;",symbols:"",synagogue:"",syringe:"",taco:"",tada:"",tanabata_tree:"",taurus:"",taxi:"",tea:"",telephone_receiver:"",telescope:"",tennis:"",tent:"",thermometer:"",thinking:"",thought_balloon:"",ticket:"",tickets:"",tiger:"",tiger2:"",timer_clock:"",tipping_hand_man:"&zwj;",tired_face:"",tm:"",toilet:"",tokyo_tower:"",tomato:"",tongue:"",top:"",tophat:"",tornado:"",trackball:"",tractor:"",traffic_light:"",train:"",train2:"",tram:"",triangular_flag_on_post:"",triangular_ruler:"",trident:"",triumph:"",trolleybus:"",trophy:"",tropical_drink:"",tropical_fish:"",truck:"",trumpet:"",tulip:"",tumbler_glass:"",turkey:"",turtle:"",tv:"",twisted_rightwards_arrows:"",two_hearts:"",two_men_holding_hands:"",two_women_holding_hands:"",u5272:"",u5408:"",u55b6:"",u6307:"",u6708:"",u6709:"",u6e80:"",u7121:"",u7533:"",u7981:"",u7a7a:"",umbrella:"",unamused:"",underage:"",unicorn:"",unlock:"",up:"",upside_down_face:"",v:"",vertical_traffic_light:"",vhs:"",vibration_mode:"",video_camera:"",video_game:"",violin:"",virgo:"",volcano:"",volleyball:"",vs:"",vulcan_salute:"",walking_man:"",walking_woman:"&zwj;",waning_crescent_moon:"",waning_gibbous_moon:"",warning:"",wastebasket:"",watch:"",water_buffalo:"",watermelon:"",wave:"",wavy_dash:"",waxing_crescent_moon:"",wc:"",weary:"",wedding:"",weight_lifting_man:"",weight_lifting_woman:"&zwj;",whale:"",whale2:"",wheel_of_dharma:"",wheelchair:"",white_check_mark:"",white_circle:"",white_flag:"",white_flower:"",white_large_square:"",white_medium_small_square:"",white_medium_square:"",white_small_square:"",white_square_button:"",wilted_flower:"",wind_chime:"",wind_face:"",wine_glass:"",wink:"",wolf:"",woman:"",woman_artist:"&zwj;",woman_astronaut:"&zwj;",woman_cartwheeling:"&zwj;",woman_cook:"&zwj;",woman_facepalming:"&zwj;",woman_factory_worker:"&zwj;",woman_farmer:"&zwj;",woman_firefighter:"&zwj;",woman_health_worker:"&zwj;",woman_judge:"&zwj;",woman_juggling:"&zwj;",woman_mechanic:"&zwj;",woman_office_worker:"&zwj;",woman_pilot:"&zwj;",woman_playing_handball:"&zwj;",woman_playing_water_polo:"&zwj;",woman_scientist:"&zwj;",woman_shrugging:"&zwj;",woman_singer:"&zwj;",woman_student:"&zwj;",woman_teacher:"&zwj;",woman_technologist:"&zwj;",woman_with_turban:"&zwj;",womans_clothes:"",womans_hat:"",women_wrestling:"&zwj;",womens:"",world_map:"",worried:"",wrench:"",writing_hand:"",x:"",yellow_heart:"",yen:"",yin_yang:"",yum:"",zap:"",zipper_mouth_face:"",zzz:"",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:`<span style="font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;">S</span>`},r.Converter=function(v){var S={},x=[],M=[],A={},T=a,C={parsed:{},raw:"",format:""};D();function D(){v=v||{};for(var N in s)s.hasOwnProperty(N)&&(S[N]=s[N]);if(typeof v=="object")for(var I in v)v.hasOwnProperty(I)&&(S[I]=v[I]);else throw Error("Converter expects the passed parameter to be an object, but "+typeof v+" was passed instead.");S.extensions&&r.helper.forEach(S.extensions,R)}function R(N,I){if(I=I||null,r.helper.isString(N))if(N=r.helper.stdExtName(N),I=N,r.extensions[N]){console.warn("DEPRECATION WARNING: "+N+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),B(r.extensions[N],N);return}else if(!r.helper.isUndefined(o[N]))N=o[N];else throw Error('Extension "'+N+'" could not be loaded. It was either not found or is not a valid extension.');typeof N=="function"&&(N=N()),r.helper.isArray(N)||(N=[N]);var V=u(N,I);if(!V.valid)throw Error(V.error);for(var L=0;L<N.length;++L){switch(N[L].type){case"lang":x.push(N[L]);break;case"output":M.push(N[L]);break}if(N[L].hasOwnProperty("listeners"))for(var X in N[L].listeners)N[L].listeners.hasOwnProperty(X)&&F(X,N[L].listeners[X])}}function B(N,I){typeof N=="function"&&(N=N(new r.Converter)),r.helper.isArray(N)||(N=[N]);var V=u(N,I);if(!V.valid)throw Error(V.error);for(var L=0;L<N.length;++L)switch(N[L].type){case"lang":x.push(N[L]);break;case"output":M.push(N[L]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}function F(N,I){if(!r.helper.isString(N))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof N+" given");if(typeof I!="function")throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof I+" given");A.hasOwnProperty(N)||(A[N]=[]),A[N].push(I)}function U(N){var I=N.match(/^\s*/)[0].length,V=new RegExp("^\\s{0,"+I+"}","gm");return N.replace(V,"")}this._dispatch=function(I,V,L,X){if(A.hasOwnProperty(I))for(var Z=0;Z<A[I].length;++Z){var te=A[I][Z](I,V,this,L,X);te&&typeof te<"u"&&(V=te)}return V},this.listen=function(N,I){return F(N,I),this},this.makeHtml=function(N){if(!N)return N;var I={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:x,outputModifiers:M,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return N=N.replace(//g,"T"),N=N.replace(/\$/g,"D"),N=N.replace(/\r\n/g,`
`),N=N.replace(/\r/g,`
`),N=N.replace(/\u00A0/g,"&nbsp;"),S.smartIndentationFix&&(N=U(N)),N=`

`+N+`

`,N=r.subParser("detab")(N,S,I),N=N.replace(/^[ \t]+$/mg,""),r.helper.forEach(x,function(V){N=r.subParser("runExtension")(V,N,S,I)}),N=r.subParser("metadata")(N,S,I),N=r.subParser("hashPreCodeTags")(N,S,I),N=r.subParser("githubCodeBlocks")(N,S,I),N=r.subParser("hashHTMLBlocks")(N,S,I),N=r.subParser("hashCodeTags")(N,S,I),N=r.subParser("stripLinkDefinitions")(N,S,I),N=r.subParser("blockGamut")(N,S,I),N=r.subParser("unhashHTMLSpans")(N,S,I),N=r.subParser("unescapeSpecialChars")(N,S,I),N=N.replace(/D/g,"$$"),N=N.replace(/T/g,""),N=r.subParser("completeHTMLDocument")(N,S,I),r.helper.forEach(M,function(V){N=r.subParser("runExtension")(V,N,S,I)}),C=I.metadata,N},this.makeMarkdown=this.makeMd=function(N,I){if(N=N.replace(/\r\n/g,`
`),N=N.replace(/\r/g,`
`),N=N.replace(/>[ \t]+</,">NBSP;<"),!I)if(window&&window.document)I=window.document;else throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");var V=I.createElement("div");V.innerHTML=N;var L={preList:re(V)};Y(V);for(var X=V.childNodes,Z="",te=0;te<X.length;te++)Z+=r.subParser("makeMarkdown.node")(X[te],L);function Y(fe){for(var ue=0;ue<fe.childNodes.length;++ue){var ge=fe.childNodes[ue];ge.nodeType===3?!/\S/.test(ge.nodeValue)&&!/^[ ]+$/.test(ge.nodeValue)?(fe.removeChild(ge),--ue):(ge.nodeValue=ge.nodeValue.split(`
`).join(" "),ge.nodeValue=ge.nodeValue.replace(/(\s)+/g,"$1")):ge.nodeType===1&&Y(ge)}}function re(fe){for(var ue=fe.querySelectorAll("pre"),ge=[],Se=0;Se<ue.length;++Se)if(ue[Se].childElementCount===1&&ue[Se].firstChild.tagName.toLowerCase()==="code"){var xe=ue[Se].firstChild.innerHTML.trim(),De=ue[Se].firstChild.getAttribute("data-language")||"";if(De==="")for(var Ae=ue[Se].firstChild.className.split(" "),ie=0;ie<Ae.length;++ie){var Re=Ae[ie].match(/^language-(.+)$/);if(Re!==null){De=Re[1];break}}xe=r.helper.unescapeHTMLEntities(xe),ge.push(xe),ue[Se].outerHTML='<precode language="'+De+'" precodenum="'+Se.toString()+'"></precode>'}else ge.push(ue[Se].innerHTML),ue[Se].innerHTML="",ue[Se].setAttribute("prenum",Se.toString());return ge}return Z},this.setOption=function(N,I){S[N]=I},this.getOption=function(N){return S[N]},this.getOptions=function(){return S},this.addExtension=function(N,I){I=I||null,R(N,I)},this.useExtension=function(N){R(N)},this.setFlavor=function(N){if(!l.hasOwnProperty(N))throw Error(N+" flavor was not found");var I=l[N];T=N;for(var V in I)I.hasOwnProperty(V)&&(S[V]=I[V])},this.getFlavor=function(){return T},this.removeExtension=function(N){r.helper.isArray(N)||(N=[N]);for(var I=0;I<N.length;++I){for(var V=N[I],L=0;L<x.length;++L)x[L]===V&&x.splice(L,1);for(var X=0;X<M.length;++X)M[X]===V&&M.splice(X,1)}},this.getAllExtensions=function(){return{language:x,output:M}},this.getMetadata=function(N){return N?C.raw:C.parsed},this.getMetadataFormat=function(){return C.format},this._setMetadataPair=function(N,I){C.parsed[N]=I},this._setMetadataFormat=function(N){C.format=N},this._setMetadataRaw=function(N){C.raw=N}},r.subParser("anchors",function(v,S,x){v=x.converter._dispatch("anchors.before",v,S,x);var M=function(A,T,C,D,R,B,F){if(r.helper.isUndefined(F)&&(F=""),C=C.toLowerCase(),A.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)D="";else if(!D)if(C||(C=T.toLowerCase().replace(/ ?\n/g," ")),D="#"+C,!r.helper.isUndefined(x.gUrls[C]))D=x.gUrls[C],r.helper.isUndefined(x.gTitles[C])||(F=x.gTitles[C]);else return A;D=D.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var U='<a href="'+D+'"';return F!==""&&F!==null&&(F=F.replace(/"/g,"&quot;"),F=F.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),U+=' title="'+F+'"'),S.openLinksInNewWindow&&!/^#/.test(D)&&(U+=' rel="noopener noreferrer" target="E95Eblank"'),U+=">"+T+"</a>",U};return v=v.replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,M),v=v.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,M),v=v.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,M),v=v.replace(/\[([^\[\]]+)]()()()()()/g,M),S.ghMentions&&(v=v.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gmi,function(A,T,C,D,R){if(C==="\\")return T+D;if(!r.helper.isString(S.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var B=S.ghMentionsLink.replace(/\{u}/g,R),F="";return S.openLinksInNewWindow&&(F=' rel="noopener noreferrer" target="E95Eblank"'),T+'<a href="'+B+'"'+F+">"+D+"</a>"})),v=x.converter._dispatch("anchors.after",v,S,x),v});var d=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,h=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,m=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,g=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gmi,y=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,p=function(v){return function(S,x,M,A,T,C,D){M=M.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var R=M,B="",F="",U=x||"",N=D||"";return/^www\./i.test(M)&&(M=M.replace(/^www\./i,"http://www.")),v.excludeTrailingPunctuationFromURLs&&C&&(B=C),v.openLinksInNewWindow&&(F=' rel="noopener noreferrer" target="E95Eblank"'),U+'<a href="'+M+'"'+F+">"+R+"</a>"+B+N}},w=function(v,S){return function(x,M,A){var T="mailto:";return M=M||"",A=r.subParser("unescapeSpecialChars")(A,v,S),v.encodeEmails?(T=r.helper.encodeEmailAddress(T+A),A=r.helper.encodeEmailAddress(A)):T=T+A,M+'<a href="'+T+'">'+A+"</a>"}};r.subParser("autoLinks",function(v,S,x){return v=x.converter._dispatch("autoLinks.before",v,S,x),v=v.replace(m,p(S)),v=v.replace(y,w(S,x)),v=x.converter._dispatch("autoLinks.after",v,S,x),v}),r.subParser("simplifiedAutoLinks",function(v,S,x){return S.simplifiedAutoLink&&(v=x.converter._dispatch("simplifiedAutoLinks.before",v,S,x),S.excludeTrailingPunctuationFromURLs?v=v.replace(h,p(S)):v=v.replace(d,p(S)),v=v.replace(g,w(S,x)),v=x.converter._dispatch("simplifiedAutoLinks.after",v,S,x)),v}),r.subParser("blockGamut",function(v,S,x){return v=x.converter._dispatch("blockGamut.before",v,S,x),v=r.subParser("blockQuotes")(v,S,x),v=r.subParser("headers")(v,S,x),v=r.subParser("horizontalRule")(v,S,x),v=r.subParser("lists")(v,S,x),v=r.subParser("codeBlocks")(v,S,x),v=r.subParser("tables")(v,S,x),v=r.subParser("hashHTMLBlocks")(v,S,x),v=r.subParser("paragraphs")(v,S,x),v=x.converter._dispatch("blockGamut.after",v,S,x),v}),r.subParser("blockQuotes",function(v,S,x){v=x.converter._dispatch("blockQuotes.before",v,S,x),v=v+`

`;var M=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return S.splitAdjacentBlockquotes&&(M=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),v=v.replace(M,function(A){return A=A.replace(/^[ \t]*>[ \t]?/gm,""),A=A.replace(/0/g,""),A=A.replace(/^[ \t]+$/gm,""),A=r.subParser("githubCodeBlocks")(A,S,x),A=r.subParser("blockGamut")(A,S,x),A=A.replace(/(^|\n)/g,"$1  "),A=A.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(T,C){var D=C;return D=D.replace(/^  /mg,"0"),D=D.replace(/0/g,""),D}),r.subParser("hashBlock")(`<blockquote>
`+A+`
</blockquote>`,S,x)}),v=x.converter._dispatch("blockQuotes.after",v,S,x),v}),r.subParser("codeBlocks",function(v,S,x){v=x.converter._dispatch("codeBlocks.before",v,S,x),v+="0";var M=/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=0))/g;return v=v.replace(M,function(A,T,C){var D=T,R=C,B=`
`;return D=r.subParser("outdent")(D,S,x),D=r.subParser("encodeCode")(D,S,x),D=r.subParser("detab")(D,S,x),D=D.replace(/^\n+/g,""),D=D.replace(/\n+$/g,""),S.omitExtraWLInCodeBlocks&&(B=""),D="<pre><code>"+D+B+"</code></pre>",r.subParser("hashBlock")(D,S,x)+R}),v=v.replace(/0/,""),v=x.converter._dispatch("codeBlocks.after",v,S,x),v}),r.subParser("codeSpans",function(v,S,x){return v=x.converter._dispatch("codeSpans.before",v,S,x),typeof v>"u"&&(v=""),v=v.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(M,A,T,C){var D=C;return D=D.replace(/^([ \t]*)/g,""),D=D.replace(/[ \t]*$/g,""),D=r.subParser("encodeCode")(D,S,x),D=A+"<code>"+D+"</code>",D=r.subParser("hashHTMLSpans")(D,S,x),D}),v=x.converter._dispatch("codeSpans.after",v,S,x),v}),r.subParser("completeHTMLDocument",function(v,S,x){if(!S.completeHTMLDocument)return v;v=x.converter._dispatch("completeHTMLDocument.before",v,S,x);var M="html",A=`<!DOCTYPE HTML>
`,T="",C=`<meta charset="utf-8">
`,D="",R="";typeof x.metadata.parsed.doctype<"u"&&(A="<!DOCTYPE "+x.metadata.parsed.doctype+`>
`,M=x.metadata.parsed.doctype.toString().toLowerCase(),(M==="html"||M==="html5")&&(C='<meta charset="utf-8">'));for(var B in x.metadata.parsed)if(x.metadata.parsed.hasOwnProperty(B))switch(B.toLowerCase()){case"doctype":break;case"title":T="<title>"+x.metadata.parsed.title+`</title>
`;break;case"charset":M==="html"||M==="html5"?C='<meta charset="'+x.metadata.parsed.charset+`">
`:C='<meta name="charset" content="'+x.metadata.parsed.charset+`">
`;break;case"language":case"lang":D=' lang="'+x.metadata.parsed[B]+'"',R+='<meta name="'+B+'" content="'+x.metadata.parsed[B]+`">
`;break;default:R+='<meta name="'+B+'" content="'+x.metadata.parsed[B]+`">
`}return v=A+"<html"+D+`>
<head>
`+T+C+R+`</head>
<body>
`+v.trim()+`
</body>
</html>`,v=x.converter._dispatch("completeHTMLDocument.after",v,S,x),v}),r.subParser("detab",function(v,S,x){return v=x.converter._dispatch("detab.before",v,S,x),v=v.replace(/\t(?=\t)/g,"    "),v=v.replace(/\t/g,"AB"),v=v.replace(/B(.+?)A/g,function(M,A){for(var T=A,C=4-T.length%4,D=0;D<C;D++)T+=" ";return T}),v=v.replace(/A/g,"    "),v=v.replace(/B/g,""),v=x.converter._dispatch("detab.after",v,S,x),v}),r.subParser("ellipsis",function(v,S,x){return S.ellipsis&&(v=x.converter._dispatch("ellipsis.before",v,S,x),v=v.replace(/\.\.\./g,""),v=x.converter._dispatch("ellipsis.after",v,S,x)),v}),r.subParser("emoji",function(v,S,x){if(!S.emoji)return v;v=x.converter._dispatch("emoji.before",v,S,x);var M=/:([\S]+?):/g;return v=v.replace(M,function(A,T){return r.helper.emojis.hasOwnProperty(T)?r.helper.emojis[T]:A}),v=x.converter._dispatch("emoji.after",v,S,x),v}),r.subParser("encodeAmpsAndAngles",function(v,S,x){return v=x.converter._dispatch("encodeAmpsAndAngles.before",v,S,x),v=v.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),v=v.replace(/<(?![a-z\/?$!])/gi,"&lt;"),v=v.replace(/</g,"&lt;"),v=v.replace(/>/g,"&gt;"),v=x.converter._dispatch("encodeAmpsAndAngles.after",v,S,x),v}),r.subParser("encodeBackslashEscapes",function(v,S,x){return v=x.converter._dispatch("encodeBackslashEscapes.before",v,S,x),v=v.replace(/\\(\\)/g,r.helper.escapeCharactersCallback),v=v.replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g,r.helper.escapeCharactersCallback),v=x.converter._dispatch("encodeBackslashEscapes.after",v,S,x),v}),r.subParser("encodeCode",function(v,S,x){return v=x.converter._dispatch("encodeCode.before",v,S,x),v=v.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,r.helper.escapeCharactersCallback),v=x.converter._dispatch("encodeCode.after",v,S,x),v}),r.subParser("escapeSpecialCharsWithinTagAttributes",function(v,S,x){v=x.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",v,S,x);var M=/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,A=/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi;return v=v.replace(M,function(T){return T.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),v=v.replace(A,function(T){return T.replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),v=x.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",v,S,x),v}),r.subParser("githubCodeBlocks",function(v,S,x){return S.ghCodeBlocks?(v=x.converter._dispatch("githubCodeBlocks.before",v,S,x),v+="0",v=v.replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,function(M,A,T,C){var D=S.omitExtraWLInCodeBlocks?"":`
`;return C=r.subParser("encodeCode")(C,S,x),C=r.subParser("detab")(C,S,x),C=C.replace(/^\n+/g,""),C=C.replace(/\n+$/g,""),C="<pre><code"+(T?' class="'+T+" language-"+T+'"':"")+">"+C+D+"</code></pre>",C=r.subParser("hashBlock")(C,S,x),`

G`+(x.ghCodeBlocks.push({text:M,codeblock:C})-1)+`G

`}),v=v.replace(/0/,""),x.converter._dispatch("githubCodeBlocks.after",v,S,x)):v}),r.subParser("hashBlock",function(v,S,x){return v=x.converter._dispatch("hashBlock.before",v,S,x),v=v.replace(/(^\n+|\n+$)/g,""),v=`

K`+(x.gHtmlBlocks.push(v)-1)+`K

`,v=x.converter._dispatch("hashBlock.after",v,S,x),v}),r.subParser("hashCodeTags",function(v,S,x){v=x.converter._dispatch("hashCodeTags.before",v,S,x);var M=function(A,T,C,D){var R=C+r.subParser("encodeCode")(T,S,x)+D;return"C"+(x.gHtmlSpans.push(R)-1)+"C"};return v=r.helper.replaceRecursiveRegExp(v,M,"<code\\b[^>]*>","</code>","gim"),v=x.converter._dispatch("hashCodeTags.after",v,S,x),v}),r.subParser("hashElement",function(v,S,x){return function(M,A){var T=A;return T=T.replace(/\n\n/g,`
`),T=T.replace(/^\n/,""),T=T.replace(/\n+$/g,""),T=`

K`+(x.gHtmlBlocks.push(T)-1)+`K

`,T}}),r.subParser("hashHTMLBlocks",function(v,S,x){v=x.converter._dispatch("hashHTMLBlocks.before",v,S,x);var M=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],A=function(N,I,V,L){var X=N;return V.search(/\bmarkdown\b/)!==-1&&(X=V+x.converter.makeHtml(I)+L),`

K`+(x.gHtmlBlocks.push(X)-1)+`K

`};S.backslashEscapesHTMLTags&&(v=v.replace(/\\<(\/?[^>]+?)>/g,function(N,I){return"&lt;"+I+"&gt;"}));for(var T=0;T<M.length;++T)for(var C,D=new RegExp("^ {0,3}(<"+M[T]+"\\b[^>]*>)","im"),R="<"+M[T]+"\\b[^>]*>",B="</"+M[T]+">";(C=r.helper.regexIndexOf(v,D))!==-1;){var F=r.helper.splitAtIndex(v,C),U=r.helper.replaceRecursiveRegExp(F[1],A,R,B,"im");if(U===F[1])break;v=F[0].concat(U)}return v=v.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(v,S,x)),v=r.helper.replaceRecursiveRegExp(v,function(N){return`

K`+(x.gHtmlBlocks.push(N)-1)+`K

`},"^ {0,3}<!--","-->","gm"),v=v.replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(v,S,x)),v=x.converter._dispatch("hashHTMLBlocks.after",v,S,x),v}),r.subParser("hashHTMLSpans",function(v,S,x){v=x.converter._dispatch("hashHTMLSpans.before",v,S,x);function M(A){return"C"+(x.gHtmlSpans.push(A)-1)+"C"}return v=v.replace(/<[^>]+?\/>/gi,function(A){return M(A)}),v=v.replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,function(A){return M(A)}),v=v.replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,function(A){return M(A)}),v=v.replace(/<[^>]+?>/gi,function(A){return M(A)}),v=x.converter._dispatch("hashHTMLSpans.after",v,S,x),v}),r.subParser("unhashHTMLSpans",function(v,S,x){v=x.converter._dispatch("unhashHTMLSpans.before",v,S,x);for(var M=0;M<x.gHtmlSpans.length;++M){for(var A=x.gHtmlSpans[M],T=0;/C(\d+)C/.test(A);){var C=RegExp.$1;if(A=A.replace("C"+C+"C",x.gHtmlSpans[C]),T===10){console.error("maximum nesting of 10 spans reached!!!");break}++T}v=v.replace("C"+M+"C",A)}return v=x.converter._dispatch("unhashHTMLSpans.after",v,S,x),v}),r.subParser("hashPreCodeTags",function(v,S,x){v=x.converter._dispatch("hashPreCodeTags.before",v,S,x);var M=function(A,T,C,D){var R=C+r.subParser("encodeCode")(T,S,x)+D;return`

G`+(x.ghCodeBlocks.push({text:A,codeblock:R})-1)+`G

`};return v=r.helper.replaceRecursiveRegExp(v,M,"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),v=x.converter._dispatch("hashPreCodeTags.after",v,S,x),v}),r.subParser("headers",function(v,S,x){v=x.converter._dispatch("headers.before",v,S,x);var M=isNaN(parseInt(S.headerLevelStart))?1:parseInt(S.headerLevelStart),A=S.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,T=S.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;v=v.replace(A,function(R,B){var F=r.subParser("spanGamut")(B,S,x),U=S.noHeaderId?"":' id="'+D(B)+'"',N=M,I="<h"+N+U+">"+F+"</h"+N+">";return r.subParser("hashBlock")(I,S,x)}),v=v.replace(T,function(R,B){var F=r.subParser("spanGamut")(B,S,x),U=S.noHeaderId?"":' id="'+D(B)+'"',N=M+1,I="<h"+N+U+">"+F+"</h"+N+">";return r.subParser("hashBlock")(I,S,x)});var C=S.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;v=v.replace(C,function(R,B,F){var U=F;S.customizedHeaderId&&(U=F.replace(/\s?\{([^{]+?)}\s*$/,""));var N=r.subParser("spanGamut")(U,S,x),I=S.noHeaderId?"":' id="'+D(F)+'"',V=M-1+B.length,L="<h"+V+I+">"+N+"</h"+V+">";return r.subParser("hashBlock")(L,S,x)});function D(R){var B,F;if(S.customizedHeaderId){var U=R.match(/\{([^{]+?)}\s*$/);U&&U[1]&&(R=U[1])}return B=R,r.helper.isString(S.prefixHeaderId)?F=S.prefixHeaderId:S.prefixHeaderId===!0?F="section-":F="",S.rawPrefixHeaderId||(B=F+B),S.ghCompatibleHeaderId?B=B.replace(/ /g,"-").replace(/&amp;/g,"").replace(/T/g,"").replace(/D/g,"").replace(/[&+$,\/:;=?@"#{}|^~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():S.rawHeaderId?B=B.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/T/g,"").replace(/D/g,"$").replace(/["']/g,"-").toLowerCase():B=B.replace(/[^\w]/g,"").toLowerCase(),S.rawPrefixHeaderId&&(B=F+B),x.hashLinkCounts[B]?B=B+"-"+x.hashLinkCounts[B]++:x.hashLinkCounts[B]=1,B}return v=x.converter._dispatch("headers.after",v,S,x),v}),r.subParser("horizontalRule",function(v,S,x){v=x.converter._dispatch("horizontalRule.before",v,S,x);var M=r.subParser("hashBlock")("<hr />",S,x);return v=v.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,M),v=v.replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,M),v=v.replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,M),v=x.converter._dispatch("horizontalRule.after",v,S,x),v}),r.subParser("images",function(v,S,x){v=x.converter._dispatch("images.before",v,S,x);var M=/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,A=/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,T=/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,C=/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,D=/!\[([^\[\]]+)]()()()()()/g;function R(F,U,N,I,V,L,X,Z){return I=I.replace(/\s/g,""),B(F,U,N,I,V,L,X,Z)}function B(F,U,N,I,V,L,X,Z){var te=x.gUrls,Y=x.gTitles,re=x.gDimensions;if(N=N.toLowerCase(),Z||(Z=""),F.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)I="";else if(I===""||I===null)if((N===""||N===null)&&(N=U.toLowerCase().replace(/ ?\n/g," ")),I="#"+N,!r.helper.isUndefined(te[N]))I=te[N],r.helper.isUndefined(Y[N])||(Z=Y[N]),r.helper.isUndefined(re[N])||(V=re[N].width,L=re[N].height);else return F;U=U.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),I=I.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var fe='<img src="'+I+'" alt="'+U+'"';return Z&&r.helper.isString(Z)&&(Z=Z.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),fe+=' title="'+Z+'"'),V&&L&&(V=V==="*"?"auto":V,L=L==="*"?"auto":L,fe+=' width="'+V+'"',fe+=' height="'+L+'"'),fe+=" />",fe}return v=v.replace(C,B),v=v.replace(T,R),v=v.replace(A,B),v=v.replace(M,B),v=v.replace(D,B),v=x.converter._dispatch("images.after",v,S,x),v}),r.subParser("italicsAndBold",function(v,S,x){v=x.converter._dispatch("italicsAndBold.before",v,S,x);function M(A,T,C){return T+A+C}return S.literalMidWordUnderscores?(v=v.replace(/\b___(\S[\s\S]*?)___\b/g,function(A,T){return M(T,"<strong><em>","</em></strong>")}),v=v.replace(/\b__(\S[\s\S]*?)__\b/g,function(A,T){return M(T,"<strong>","</strong>")}),v=v.replace(/\b_(\S[\s\S]*?)_\b/g,function(A,T){return M(T,"<em>","</em>")})):(v=v.replace(/___(\S[\s\S]*?)___/g,function(A,T){return/\S$/.test(T)?M(T,"<strong><em>","</em></strong>"):A}),v=v.replace(/__(\S[\s\S]*?)__/g,function(A,T){return/\S$/.test(T)?M(T,"<strong>","</strong>"):A}),v=v.replace(/_([^\s_][\s\S]*?)_/g,function(A,T){return/\S$/.test(T)?M(T,"<em>","</em>"):A})),S.literalMidWordAsterisks?(v=v.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,function(A,T,C){return M(C,T+"<strong><em>","</em></strong>")}),v=v.replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,function(A,T,C){return M(C,T+"<strong>","</strong>")}),v=v.replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,function(A,T,C){return M(C,T+"<em>","</em>")})):(v=v.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,function(A,T){return/\S$/.test(T)?M(T,"<strong><em>","</em></strong>"):A}),v=v.replace(/\*\*(\S[\s\S]*?)\*\*/g,function(A,T){return/\S$/.test(T)?M(T,"<strong>","</strong>"):A}),v=v.replace(/\*([^\s*][\s\S]*?)\*/g,function(A,T){return/\S$/.test(T)?M(T,"<em>","</em>"):A})),v=x.converter._dispatch("italicsAndBold.after",v,S,x),v}),r.subParser("lists",function(v,S,x){function M(C,D){x.gListLevel++,C=C.replace(/\n{2,}$/,`
`),C+="0";var R=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,B=/\n[ \t]*\n(?!0)/.test(C);return S.disableForced4SpacesIndentedSublists&&(R=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0|\2([*+-]|\d+[.])[ \t]+))/gm),C=C.replace(R,function(F,U,N,I,V,L,X){X=X&&X.trim()!=="";var Z=r.subParser("outdent")(V,S,x),te="";return L&&S.tasklists&&(te=' class="task-list-item" style="list-style-type: none;"',Z=Z.replace(/^[ \t]*\[(x|X| )?]/m,function(){var Y='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return X&&(Y+=" checked"),Y+=">",Y})),Z=Z.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,function(Y){return"A"+Y}),U||Z.search(/\n{2,}/)>-1?(Z=r.subParser("githubCodeBlocks")(Z,S,x),Z=r.subParser("blockGamut")(Z,S,x)):(Z=r.subParser("lists")(Z,S,x),Z=Z.replace(/\n$/,""),Z=r.subParser("hashHTMLBlocks")(Z,S,x),Z=Z.replace(/\n\n+/g,`

`),B?Z=r.subParser("paragraphs")(Z,S,x):Z=r.subParser("spanGamut")(Z,S,x)),Z=Z.replace("A",""),Z="<li"+te+">"+Z+`</li>
`,Z}),C=C.replace(/0/g,""),x.gListLevel--,D&&(C=C.replace(/\s+$/,"")),C}function A(C,D){if(D==="ol"){var R=C.match(/^ *(\d+)\./);if(R&&R[1]!=="1")return' start="'+R[1]+'"'}return""}function T(C,D,R){var B=S.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,F=S.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,U=D==="ul"?B:F,N="";if(C.search(U)!==-1)(function V(L){var X=L.search(U),Z=A(C,D);X!==-1?(N+=`

<`+D+Z+`>
`+M(L.slice(0,X),!!R)+"</"+D+`>
`,D=D==="ul"?"ol":"ul",U=D==="ul"?B:F,V(L.slice(X))):N+=`

<`+D+Z+`>
`+M(L,!!R)+"</"+D+`>
`})(C);else{var I=A(C,D);N=`

<`+D+I+`>
`+M(C,!!R)+"</"+D+`>
`}return N}return v=x.converter._dispatch("lists.before",v,S,x),v+="0",x.gListLevel?v=v.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(C,D,R){var B=R.search(/[*+-]/g)>-1?"ul":"ol";return T(D,B,!0)}):v=v.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(C,D,R,B){var F=B.search(/[*+-]/g)>-1?"ul":"ol";return T(R,F,!1)}),v=v.replace(/0/,""),v=x.converter._dispatch("lists.after",v,S,x),v}),r.subParser("metadata",function(v,S,x){if(!S.metadata)return v;v=x.converter._dispatch("metadata.before",v,S,x);function M(A){x.metadata.raw=A,A=A.replace(/&/g,"&amp;").replace(/"/g,"&quot;"),A=A.replace(/\n {4}/g," "),A.replace(/^([\S ]+): +([\s\S]+?)$/gm,function(T,C,D){return x.metadata.parsed[C]=D,""})}return v=v.replace(/^\s*+(\S*?)\n([\s\S]+?)\n+\n/,function(A,T,C){return M(C),"M"}),v=v.replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,function(A,T,C){return T&&(x.metadata.format=T),M(C),"M"}),v=v.replace(/M/g,""),v=x.converter._dispatch("metadata.after",v,S,x),v}),r.subParser("outdent",function(v,S,x){return v=x.converter._dispatch("outdent.before",v,S,x),v=v.replace(/^(\t|[ ]{1,4})/gm,"0"),v=v.replace(/0/g,""),v=x.converter._dispatch("outdent.after",v,S,x),v}),r.subParser("paragraphs",function(v,S,x){v=x.converter._dispatch("paragraphs.before",v,S,x),v=v.replace(/^\n+/g,""),v=v.replace(/\n+$/g,"");for(var M=v.split(/\n{2,}/g),A=[],T=M.length,C=0;C<T;C++){var D=M[C];D.search(/(K|G)(\d+)\1/g)>=0?A.push(D):D.search(/\S/)>=0&&(D=r.subParser("spanGamut")(D,S,x),D=D.replace(/^([ \t]*)/g,"<p>"),D+="</p>",A.push(D))}for(T=A.length,C=0;C<T;C++){for(var R="",B=A[C],F=!1;/(K|G)(\d+)\1/.test(B);){var U=RegExp.$1,N=RegExp.$2;U==="K"?R=x.gHtmlBlocks[N]:F?R=r.subParser("encodeCode")(x.ghCodeBlocks[N].text,S,x):R=x.ghCodeBlocks[N].codeblock,R=R.replace(/\$/g,"$$$$"),B=B.replace(/(\n\n)?(K|G)\d+\2(\n\n)?/,R),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(B)&&(F=!0)}A[C]=B}return v=A.join(`
`),v=v.replace(/^\n+/g,""),v=v.replace(/\n+$/g,""),x.converter._dispatch("paragraphs.after",v,S,x)}),r.subParser("runExtension",function(v,S,x,M){if(v.filter)S=v.filter(S,M.converter,x);else if(v.regex){var A=v.regex;A instanceof RegExp||(A=new RegExp(A,"g")),S=S.replace(A,v.replace)}return S}),r.subParser("spanGamut",function(v,S,x){return v=x.converter._dispatch("spanGamut.before",v,S,x),v=r.subParser("codeSpans")(v,S,x),v=r.subParser("escapeSpecialCharsWithinTagAttributes")(v,S,x),v=r.subParser("encodeBackslashEscapes")(v,S,x),v=r.subParser("images")(v,S,x),v=r.subParser("anchors")(v,S,x),v=r.subParser("autoLinks")(v,S,x),v=r.subParser("simplifiedAutoLinks")(v,S,x),v=r.subParser("emoji")(v,S,x),v=r.subParser("underline")(v,S,x),v=r.subParser("italicsAndBold")(v,S,x),v=r.subParser("strikethrough")(v,S,x),v=r.subParser("ellipsis")(v,S,x),v=r.subParser("hashHTMLSpans")(v,S,x),v=r.subParser("encodeAmpsAndAngles")(v,S,x),S.simpleLineBreaks?/\n\nK/.test(v)||(v=v.replace(/\n+/g,`<br />
`)):v=v.replace(/  +\n/g,`<br />
`),v=x.converter._dispatch("spanGamut.after",v,S,x),v}),r.subParser("strikethrough",function(v,S,x){function M(A){return S.simplifiedAutoLink&&(A=r.subParser("simplifiedAutoLinks")(A,S,x)),"<del>"+A+"</del>"}return S.strikethrough&&(v=x.converter._dispatch("strikethrough.before",v,S,x),v=v.replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,function(A,T){return M(T)}),v=x.converter._dispatch("strikethrough.after",v,S,x)),v}),r.subParser("stripLinkDefinitions",function(v,S,x){var M=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=0))/gm,A=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=0)|(?=\n\[))/gm;v+="0";var T=function(C,D,R,B,F,U,N){return D=D.toLowerCase(),v.toLowerCase().split(D).length-1<2?C:(R.match(/^data:.+?\/.+?;base64,/)?x.gUrls[D]=R.replace(/\s/g,""):x.gUrls[D]=r.subParser("encodeAmpsAndAngles")(R,S,x),U?U+N:(N&&(x.gTitles[D]=N.replace(/"|'/g,"&quot;")),S.parseImgDimensions&&B&&F&&(x.gDimensions[D]={width:B,height:F}),""))};return v=v.replace(A,T),v=v.replace(M,T),v=v.replace(/0/,""),v}),r.subParser("tables",function(v,S,x){if(!S.tables)return v;var M=/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|0)/gm,A=/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|0)/gm;function T(F){return/^:[ \t]*--*$/.test(F)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(F)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(F)?' style="text-align:center;"':""}function C(F,U){var N="";return F=F.trim(),(S.tablesHeaderId||S.tableHeaderId)&&(N=' id="'+F.replace(/ /g,"_").toLowerCase()+'"'),F=r.subParser("spanGamut")(F,S,x),"<th"+N+U+">"+F+`</th>
`}function D(F,U){var N=r.subParser("spanGamut")(F,S,x);return"<td"+U+">"+N+`</td>
`}function R(F,U){for(var N=`<table>
<thead>
<tr>
`,I=F.length,V=0;V<I;++V)N+=F[V];for(N+=`</tr>
</thead>
<tbody>
`,V=0;V<U.length;++V){N+=`<tr>
`;for(var L=0;L<I;++L)N+=U[V][L];N+=`</tr>
`}return N+=`</tbody>
</table>
`,N}function B(F){var U,N=F.split(`
`);for(U=0;U<N.length;++U)/^ {0,3}\|/.test(N[U])&&(N[U]=N[U].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(N[U])&&(N[U]=N[U].replace(/\|[ \t]*$/,"")),N[U]=r.subParser("codeSpans")(N[U],S,x);var I=N[0].split("|").map(function(fe){return fe.trim()}),V=N[1].split("|").map(function(fe){return fe.trim()}),L=[],X=[],Z=[],te=[];for(N.shift(),N.shift(),U=0;U<N.length;++U)N[U].trim()!==""&&L.push(N[U].split("|").map(function(fe){return fe.trim()}));if(I.length<V.length)return F;for(U=0;U<V.length;++U)Z.push(T(V[U]));for(U=0;U<I.length;++U)r.helper.isUndefined(Z[U])&&(Z[U]=""),X.push(C(I[U],Z[U]));for(U=0;U<L.length;++U){for(var Y=[],re=0;re<X.length;++re)r.helper.isUndefined(L[U][re]),Y.push(D(L[U][re],Z[re]));te.push(Y)}return R(X,te)}return v=x.converter._dispatch("tables.before",v,S,x),v=v.replace(/\\(\|)/g,r.helper.escapeCharactersCallback),v=v.replace(M,B),v=v.replace(A,B),v=x.converter._dispatch("tables.after",v,S,x),v}),r.subParser("underline",function(v,S,x){return S.underline&&(v=x.converter._dispatch("underline.before",v,S,x),S.literalMidWordUnderscores?(v=v.replace(/\b___(\S[\s\S]*?)___\b/g,function(M,A){return"<u>"+A+"</u>"}),v=v.replace(/\b__(\S[\s\S]*?)__\b/g,function(M,A){return"<u>"+A+"</u>"})):(v=v.replace(/___(\S[\s\S]*?)___/g,function(M,A){return/\S$/.test(A)?"<u>"+A+"</u>":M}),v=v.replace(/__(\S[\s\S]*?)__/g,function(M,A){return/\S$/.test(A)?"<u>"+A+"</u>":M})),v=v.replace(/(_)/g,r.helper.escapeCharactersCallback),v=x.converter._dispatch("underline.after",v,S,x)),v}),r.subParser("unescapeSpecialChars",function(v,S,x){return v=x.converter._dispatch("unescapeSpecialChars.before",v,S,x),v=v.replace(/E(\d+)E/g,function(M,A){var T=parseInt(A);return String.fromCharCode(T)}),v=x.converter._dispatch("unescapeSpecialChars.after",v,S,x),v}),r.subParser("makeMarkdown.blockquote",function(v,S){var x="";if(v.hasChildNodes())for(var M=v.childNodes,A=M.length,T=0;T<A;++T){var C=r.subParser("makeMarkdown.node")(M[T],S);C!==""&&(x+=C)}return x=x.trim(),x="> "+x.split(`
`).join(`
> `),x}),r.subParser("makeMarkdown.codeBlock",function(v,S){var x=v.getAttribute("language"),M=v.getAttribute("precodenum");return"```"+x+`
`+S.preList[M]+"\n```"}),r.subParser("makeMarkdown.codeSpan",function(v){return"`"+v.innerHTML+"`"}),r.subParser("makeMarkdown.emphasis",function(v,S){var x="";if(v.hasChildNodes()){x+="*";for(var M=v.childNodes,A=M.length,T=0;T<A;++T)x+=r.subParser("makeMarkdown.node")(M[T],S);x+="*"}return x}),r.subParser("makeMarkdown.header",function(v,S,x){var M=new Array(x+1).join("#"),A="";if(v.hasChildNodes()){A=M+" ";for(var T=v.childNodes,C=T.length,D=0;D<C;++D)A+=r.subParser("makeMarkdown.node")(T[D],S)}return A}),r.subParser("makeMarkdown.hr",function(){return"---"}),r.subParser("makeMarkdown.image",function(v){var S="";return v.hasAttribute("src")&&(S+="!["+v.getAttribute("alt")+"](",S+="<"+v.getAttribute("src")+">",v.hasAttribute("width")&&v.hasAttribute("height")&&(S+=" ="+v.getAttribute("width")+"x"+v.getAttribute("height")),v.hasAttribute("title")&&(S+=' "'+v.getAttribute("title")+'"'),S+=")"),S}),r.subParser("makeMarkdown.links",function(v,S){var x="";if(v.hasChildNodes()&&v.hasAttribute("href")){var M=v.childNodes,A=M.length;x="[";for(var T=0;T<A;++T)x+=r.subParser("makeMarkdown.node")(M[T],S);x+="](",x+="<"+v.getAttribute("href")+">",v.hasAttribute("title")&&(x+=' "'+v.getAttribute("title")+'"'),x+=")"}return x}),r.subParser("makeMarkdown.list",function(v,S,x){var M="";if(!v.hasChildNodes())return"";for(var A=v.childNodes,T=A.length,C=v.getAttribute("start")||1,D=0;D<T;++D)if(!(typeof A[D].tagName>"u"||A[D].tagName.toLowerCase()!=="li")){var R="";x==="ol"?R=C.toString()+". ":R="- ",M+=R+r.subParser("makeMarkdown.listItem")(A[D],S),++C}return M+=`
<!-- -->
`,M.trim()}),r.subParser("makeMarkdown.listItem",function(v,S){for(var x="",M=v.childNodes,A=M.length,T=0;T<A;++T)x+=r.subParser("makeMarkdown.node")(M[T],S);return/\n$/.test(x)?x=x.split(`
`).join(`
    `).replace(/^ {4}$/gm,"").replace(/\n\n+/g,`

`):x+=`
`,x}),r.subParser("makeMarkdown.node",function(v,S,x){x=x||!1;var M="";if(v.nodeType===3)return r.subParser("makeMarkdown.txt")(v,S);if(v.nodeType===8)return"<!--"+v.data+`-->

`;if(v.nodeType!==1)return"";var A=v.tagName.toLowerCase();switch(A){case"h1":x||(M=r.subParser("makeMarkdown.header")(v,S,1)+`

`);break;case"h2":x||(M=r.subParser("makeMarkdown.header")(v,S,2)+`

`);break;case"h3":x||(M=r.subParser("makeMarkdown.header")(v,S,3)+`

`);break;case"h4":x||(M=r.subParser("makeMarkdown.header")(v,S,4)+`

`);break;case"h5":x||(M=r.subParser("makeMarkdown.header")(v,S,5)+`

`);break;case"h6":x||(M=r.subParser("makeMarkdown.header")(v,S,6)+`

`);break;case"p":x||(M=r.subParser("makeMarkdown.paragraph")(v,S)+`

`);break;case"blockquote":x||(M=r.subParser("makeMarkdown.blockquote")(v,S)+`

`);break;case"hr":x||(M=r.subParser("makeMarkdown.hr")(v,S)+`

`);break;case"ol":x||(M=r.subParser("makeMarkdown.list")(v,S,"ol")+`

`);break;case"ul":x||(M=r.subParser("makeMarkdown.list")(v,S,"ul")+`

`);break;case"precode":x||(M=r.subParser("makeMarkdown.codeBlock")(v,S)+`

`);break;case"pre":x||(M=r.subParser("makeMarkdown.pre")(v,S)+`

`);break;case"table":x||(M=r.subParser("makeMarkdown.table")(v,S)+`

`);break;case"code":M=r.subParser("makeMarkdown.codeSpan")(v,S);break;case"em":case"i":M=r.subParser("makeMarkdown.emphasis")(v,S);break;case"strong":case"b":M=r.subParser("makeMarkdown.strong")(v,S);break;case"del":M=r.subParser("makeMarkdown.strikethrough")(v,S);break;case"a":M=r.subParser("makeMarkdown.links")(v,S);break;case"img":M=r.subParser("makeMarkdown.image")(v,S);break;default:M=v.outerHTML+`

`}return M}),r.subParser("makeMarkdown.paragraph",function(v,S){var x="";if(v.hasChildNodes())for(var M=v.childNodes,A=M.length,T=0;T<A;++T)x+=r.subParser("makeMarkdown.node")(M[T],S);return x=x.trim(),x}),r.subParser("makeMarkdown.pre",function(v,S){var x=v.getAttribute("prenum");return"<pre>"+S.preList[x]+"</pre>"}),r.subParser("makeMarkdown.strikethrough",function(v,S){var x="";if(v.hasChildNodes()){x+="~~";for(var M=v.childNodes,A=M.length,T=0;T<A;++T)x+=r.subParser("makeMarkdown.node")(M[T],S);x+="~~"}return x}),r.subParser("makeMarkdown.strong",function(v,S){var x="";if(v.hasChildNodes()){x+="**";for(var M=v.childNodes,A=M.length,T=0;T<A;++T)x+=r.subParser("makeMarkdown.node")(M[T],S);x+="**"}return x}),r.subParser("makeMarkdown.table",function(v,S){var x="",M=[[],[]],A=v.querySelectorAll("thead>tr>th"),T=v.querySelectorAll("tbody>tr"),C,D;for(C=0;C<A.length;++C){var R=r.subParser("makeMarkdown.tableCell")(A[C],S),B="---";if(A[C].hasAttribute("style")){var F=A[C].getAttribute("style").toLowerCase().replace(/\s/g,"");switch(F){case"text-align:left;":B=":---";break;case"text-align:right;":B="---:";break;case"text-align:center;":B=":---:";break}}M[0][C]=R.trim(),M[1][C]=B}for(C=0;C<T.length;++C){var U=M.push([])-1,N=T[C].getElementsByTagName("td");for(D=0;D<A.length;++D){var I=" ";typeof N[D]<"u"&&(I=r.subParser("makeMarkdown.tableCell")(N[D],S)),M[U].push(I)}}var V=3;for(C=0;C<M.length;++C)for(D=0;D<M[C].length;++D){var L=M[C][D].length;L>V&&(V=L)}for(C=0;C<M.length;++C){for(D=0;D<M[C].length;++D)C===1?M[C][D].slice(-1)===":"?M[C][D]=r.helper.padEnd(M[C][D].slice(-1),V-1,"-")+":":M[C][D]=r.helper.padEnd(M[C][D],V,"-"):M[C][D]=r.helper.padEnd(M[C][D],V);x+="| "+M[C].join(" | ")+` |
`}return x.trim()}),r.subParser("makeMarkdown.tableCell",function(v,S){var x="";if(!v.hasChildNodes())return"";for(var M=v.childNodes,A=M.length,T=0;T<A;++T)x+=r.subParser("makeMarkdown.node")(M[T],S,!0);return x.trim()}),r.subParser("makeMarkdown.txt",function(v){var S=v.nodeValue;return S=S.replace(/ +/g," "),S=S.replace(/NBSP;/g," "),S=r.helper.unescapeHTMLEntities(S),S=S.replace(/([*_~|`])/g,"\\$1"),S=S.replace(/^(\s*)>/g,"\\$1>"),S=S.replace(/^#/gm,"\\#"),S=S.replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3"),S=S.replace(/^( {0,3}\d+)\./gm,"$1\\."),S=S.replace(/^( {0,3})([+-])/gm,"$1\\$2"),S=S.replace(/]([\s]*)\(/g,"\\]$1\\("),S=S.replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:"),S});var b=this;n.exports?n.exports=r:b.showdown=r}).call(ks)})(Y3e);class Hn{constructor(e){this.inputs=[],this.output=null,this.uniqueID=O.generateUniqueID(),this.description="none",this.x=0,this.y=0,this.radius=1/75,this.defaultColor="#F3EFEF",this.selectedColor="#484848",this.strokeColor="#484848",this.selected=!1,this.color="#F3EFEF",this.name="name0",this.parentMolecule=null,this.value=null,this.isMoving=!1,this.showHover=!1,this.x=0,this.y=0,this.alertMessage="",this.processing=!1;for(var t in e)this[t]=e[t]}setValues(e){for(var t in e)this[t]=e[t];typeof this.ioValues<"u"&&this.ioValues.forEach(r=>{this.inputs.forEach(i=>{r.name==i.name&&i.type=="input"&&(i.value=r.ioValue)})})}draw(e){let t=O.widthToPixels(this.x),r=O.heightToPixels(this.y),i=O.widthToPixels(this.radius);if(this.inputs.forEach(o=>{o.draw()}),O.c.beginPath(),O.c.font="10px Work Sans",this.processing?O.c.fillStyle="blue":this.selected?(O.c.fillStyle=this.selectedColor,O.c.strokeStyle=this.selectedColor,this.color=this.selectedColor,this.strokeColor=this.defaultColor):(O.c.fillStyle=this.defaultColor,O.c.strokeStyle=this.selectedColor,this.color=this.defaultColor,this.strokeColor=this.selectedColor),O.c.beginPath(),e=="rect"?O.c.rect(t-i*1.25,r-this.height/1.5,2.5*i,this.height*1.25):e=="square"?O.c.rect(t-i,r-i,2*i,2*i):O.c.arc(t,r,i,0,Math.PI*2,!1),O.c.textAlign="start",O.c.fill(),O.c.strokeStyle=this.strokeColor,O.c.fillStyle="white",O.c.stroke(),O.c.closePath(),O.c.beginPath(),O.c.textAlign="start",O.c.fillText(this.name,t+i,r-i),O.c.fill(),O.c.strokeStyle=this.strokeColor,O.c.lineWidth=1,O.c.stroke(),O.c.closePath(),this.showHover&&this.alertMessage.length>0){this.color="red",O.c.beginPath();const o=10;O.c.fillStyle="red",O.c.rect(t+i-o/2,r-i+o/2,O.c.measureText(this.alertMessage.toUpperCase()).width+o,-(parseInt(O.c.font)+o)),O.c.fill(),O.c.strokeStyle="black",O.c.lineWidth=1,O.c.stroke(),O.c.closePath(),O.c.beginPath(),O.c.fillStyle="black",O.c.fillText(this.alertMessage.toUpperCase(),t+i,r-i),O.c.closePath()}}addIO(e,t,r,i,o,s,a=!1){if(r.inputs.find(c=>c.name===t&&c.type===e)==null){var l;e=="input"?l=-1*r.scaledRadius:l=r.scaledRadius;var u=new Ds({parentMolecule:r,defaultOffsetX:l,defaultOffsetY:0,type:e,valueType:i,name:t,primary:a,value:o,defaultValue:o,uniqueID:O.generateUniqueID(),atomType:"AttachmentPoint",ready:!0});e=="input"?r.inputs.push(u):r.output=u}}updateIO(e,t,r,i,o){let s=r.inputs.find(a=>a.name===t&&a.type===e);s&&(s.valueType=i,s.value=o)}removeIO(e,t,r,i=!1){r.inputs.forEach(o=>{o.name==t&&o.type==e&&(r.inputs.splice(r.inputs.indexOf(o),1),o.deleteSelf(i))})}alertingErrorHandler(){return e=>{this.processing=!1,console.log(e),this.setAlert(e.message)}}setAlert(e){this.color="orange",this.alertMessage=String(e)}clearAlert(){this.color=this.defaultColor,this.alertMessage=""}selectBox(e,t,r,i){let o=Math.min(e,r),s=Math.max(e,r),a=Math.min(t,i),l=Math.max(t,i),u=O.widthToPixels(this.x),c=O.heightToPixels(this.y);u>=o&&u<=s&&c>=a&&c<=l&&(this.selected=!0)}clickDown(e,t,r){let i=O.widthToPixels(this.x),o=O.heightToPixels(this.y),s=O.widthToPixels(this.radius),a;return!r&&O.distBetweenPoints(e,i,t,o)<s?(this.isMoving=!0,this.selected=!0,a=this,this.sendToRender()):O.ctrlDown||(this.selected=!1),this.inputs.forEach(l=>{l.clickDown(e,t,r)==!0&&(r=!0)}),this.output&&!a&&this.output.clickDown(e,t,r)==!0&&(r=!0),a}doubleClick(e,t){let r=O.widthToPixels(this.x),i=O.heightToPixels(this.y);var o=!1,s=O.distBetweenPoints(e,r,t,i);return s<r&&(o=!0),o}clickUp(e,t){this.isMoving=!1,this.inputs.forEach(r=>{r.clickUp(e,t)}),this.output&&this.output.clickUp(e,t)}mouseMove(e,t){let r=O.widthToPixels(this.x),i=O.heightToPixels(this.y),o=O.widthToPixels(this.radius);this.isMoving==!0&&(this.x=O.pixelsToWidth(e),this.y=O.pixelsToHeight(t)),this.inputs.forEach(a=>{a.mouseMove(e,t)}),this.output&&this.output.mouseMove(e,t);var s=O.distBetweenPoints(e,r,t,i);s<o?this.showHover=!0:this.showHover=!1}keyPress(e){this.inputs.forEach(t=>{t.keyPress(e)})}deleteNode(e=!0,t=!0,r=!1){this.inputs.forEach(o=>{o.ready=!1}),[...this.inputs].forEach(o=>{o.deleteSelf(r)}),this.output&&this.output.deleteSelf(r),O.cad.deleteFromLibrary(this.uniqueID).then(()=>{}),this.parent.nodesOnTheScreen.splice(this.parent.nodesOnTheScreen.indexOf(this),1)}update(){this.inputs.forEach(e=>{e.update()}),this.output&&this.output.update(),this.draw()}serialize(e={x:0,y:0}){var t=[];this.inputs.forEach(i=>{if(typeof i.getValue()=="number"||typeof i.getValue()=="string"){var o={name:i.name,ioValue:i.getValue()};t.push(o)}});var r={atomType:this.atomType,name:this.name,x:this.x+e.x,y:this.y-e.y,uniqueID:this.uniqueID,ioValues:t,description:this.description};return r}requestReadme(){return[]}decreaseToProcessCountByOne(){O.topLevelMolecule.census()}updateValue(){this.waitOnComingInformation()}walkBackForConstants(e){this.inputs.forEach(t=>{t.connectors.forEach(r=>{r.walkBackForConstants(e)})})}waitOnComingInformation(){this.output&&this.output.waitOnComingInformation(),this.processing}basicThreadValueProcessing(){this.decreaseToProcessCountByOne(),this.clearAlert(),this.output&&(this.output.setValue(this.uniqueID),this.output.ready=!0),this.processing=!1,this.selected&&this.sendToRender()}beginPropagation(){}census(){var e=0;return this.inputs.forEach(t=>{t.ready!=!0&&(e=1)}),[1,e]}sendToRender(){try{O.writeToDisplay(this.uniqueID)}catch(e){this.setAlert(e)}}createLevaInputs(){let e={};if(this.inputs)return this.inputs.map(t=>{const r=()=>t.connectors.length>0;t.valueType!=="geometry"&&(e[this.uniqueID+t.name]={value:t.value,label:t.name,step:.25,disabled:r(),onChange:i=>{t.value!==i&&t.setValue(i)}})}),e}findIOValue(e){e=e.split("~").join("");var t=null;return this.inputs.forEach(r=>{r.name==e&&r.type=="input"&&(t=r.getValue())}),t}}const J6=function(n){var e=0;return n.inputs.forEach(t=>{t.type=="input"&&t.connectors.length==0&&(e=e+1)}),e},K3e=function(n){var e;for(e=0;e<n.inputs.length-1;e++){var t=n.inputs[e];if(t.type=="input"&&t.connectors.length==0){n.removeIO("input",t.name,n);return}}},Q6=function(n){var e=0;return n.inputs.forEach(t=>{e=Math.max(e,parseInt(t.name.match(/\d+$/)[0]))}),e},zy=n=>{J6(n)==0&&(Q6(n),n.addIO("input","Shape "+(Q6(n)+1),n,"geometry","",!0)),J6(n)>=2&&K3e(n)};class Z3e extends Hn{constructor(e){super(e),this.addIO("output","geometry",this,"geometry",""),this.name="Join",this.atomType="Join",this.ioValues=[],this.removeCutawayGeometry=!0,this.description="Pick between assembly and fusion to join input geometries. Assembly takes multiple shapes together into one, shapes higher in the inputs list will cut into shapes lower on the input list where they overlap. Fusion takes all shapes or sketches and fuses them permanently into a single shape",this.setValues(e),typeof this.ioValues<"u"&&this.ioValues.forEach(t=>{this.addIO("input",t.name,this,"geometry","")}),this.unionType,this.unionIndex=0,this.setValues([])}beginPropagation(){super.beginPropagation()}draw(){super.draw();const e=O.widthToPixels(this.x),t=O.heightToPixels(this.y),r=O.widthToPixels(this.radius);O.c.beginPath(),O.c.fillStyle="#949294",O.c.moveTo(e-r/2,t+r/2),O.c.lineTo(e+r/2,t+r/2),O.c.lineTo(e+r/2,t),O.c.lineTo(e-r/2,t),O.c.lineTo(e-r/2,t+r/2),O.c.stroke(),O.c.closePath(),O.c.beginPath(),O.c.lineTo(e+r/4,t-r/2),O.c.lineTo(e-r/4,t-r/2),O.c.lineTo(e-r/4,t),O.c.lineTo(e+r/2,t),O.c.lineTo(e+r/4,t-r/2),O.c.lineWidth=1,O.c.lineJoin="round",O.c.stroke(),O.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(t=>t.ready)){this.processing=!0;var e=[];this.inputs.forEach(t=>{t.connectors.length>0&&t.type=="input"&&e.push(t.getValue())}),this.unionType==="Fusion"?O.cad.fusion(this.uniqueID,e).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler()):this.unionType==="Assembly"&&O.cad.assembly(e,this.uniqueID).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler()),zy(this)}}createLevaInputs(){let e={};const t=["Assembly","Fusion"];return e[this.uniqueID+"union_ops"]={value:this.unionType||t[this.unionIndex],options:t,label:"Union Type",onChange:r=>{this.unionIndex=t.indexOf(r),this.unionType!==t[this.unionIndex]&&(this.unionType=t[this.unionIndex],this.name=this.unionType,this.updateValue())}},e}serialize(e){var t=super.serialize(e),r=[];return this.inputs.forEach(i=>{if(i.connectors.length>0){var o={name:i.name,ioValue:i.getValue()};r.push(o)}}),t.ioValues=r,t.unionType=this.unionType,t}}class J3e extends Hn{constructor(e){super(e),this.name="Circle",this.atomType="Circle",this.description="Creates a new circle.",this.addIO("input","diameter",this,"number",10),this.addIO("output","geometry",this,"geometry",""),this.setValues(e)}beginPropagation(e=!1){this.inputs.forEach(t=>{t.beginPropagation()})}draw(){super.draw(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.arc(O.widthToPixels(this.x),O.heightToPixels(this.y),O.widthToPixels(this.radius/2),0,Math.PI*2,!1),O.c.stroke(),O.c.closePath()}updateValue(){super.updateValue();var e=this.findIOValue("diameter");O.cad.circle(this.uniqueID,e).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}let Q3e=class extends Hn{constructor(e){super(e),this.name="Color",this.atomType="Color",this.description="Changes the color of the shape.",this.selectedColorIndex=0,this.colorOptions={Red:"#FF9065",Orange:"#FFB458",Yellow:"#FFD600",Olive:"#C7DF66",Teal:"#71D1C2","Light Blue":"#75DBF2",Green:"#A3CE5B","Lavender ":"#CCABED",Brown:"#CFAB7C",Pink:"#FFB09D",Sand:"#E2C66C",Clay:"#C4D3AC",Blue:"#91C8D5","Light Green":"#96E1BB",Purple:"#ACAFDD","Light Purple":"#DFB1E8",Tan:"#F5D3B6","Mauve ":"#DBADA9",Grey:"#BABABA",Black:"#3C3C3C",White:"#FFFCF7","Keep Out":"#D9544D"},this.addIO("input","geometry",this,"geometry",null,!1,!0),this.addIO("output","geometry",this,"geometry",null),this.selectedValueColor,this.setValues(e)}draw(){super.draw(),O.c.beginPath(),O.c.fillStyle=this.selectedValueColor,O.c.arc(O.widthToPixels(this.x),O.heightToPixels(this.y),O.widthToPixels(this.radius/1.5),0,Math.PI*2,!1),O.c.fill(),O.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(r=>r.ready)){this.processing=!0;var e=this.findIOValue("geometry"),t=Object.values(this.colorOptions)[this.selectedColorIndex];this.selectedValueColor=Object.keys(this.colorOptions)[this.selectedColorIndex],O.cad.color(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}changeColor(e){this.selectedColorIndex=e,this.updateValue()}createLevaInputs(){let e={};if(this.inputs)return this.inputs.map(t=>{const r=()=>t.connectors.length>0;e[this.uniqueID+"color"]={value:Object.keys(this.colorOptions)[this.selectedColorIndex],label:"Color",options:Object.keys(this.colorOptions),onChange:i=>{this.changeColor(Object.keys(this.colorOptions).indexOf(i)),this.sendToRender()}},t.valueType!=="geometry"&&(e[this.uniqueID+t.name]={value:t.value,label:t.name,disabled:r(),onChange:i=>{t.value!==i&&t.setValue(i)}})}),e}updateSidebar(){const e=super.updateSidebar(),t=document.createElement("div");e.appendChild(t),this.createDropDown(t,this,Object.keys(this.colorOptions),this.selectedColorIndex,"Color",r=>{this.changeColor(r)})}serialize(e={x:0,y:0}){var t=super.serialize(e);return t.selectedColorIndex=this.selectedColorIndex,t}};function eDe(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function JK(...n){return e=>n.forEach(t=>eDe(t,e))}function tp(...n){return z.useCallback(JK(...n),n)}var QK=z.forwardRef((n,e)=>{const{children:t,...r}=n,i=z.Children.toArray(t),o=i.find(tDe);if(o){const s=o.props.children,a=i.map(l=>l===o?z.Children.count(s)>1?z.Children.only(null):z.isValidElement(s)?s.props.children:null:l);return Q.jsx(BN,{...r,ref:e,children:z.isValidElement(s)?z.cloneElement(s,void 0,a):null})}return Q.jsx(BN,{...r,ref:e,children:t})});QK.displayName="Slot";var BN=z.forwardRef((n,e)=>{const{children:t,...r}=n;if(z.isValidElement(t)){const i=rDe(t);return z.cloneElement(t,{...nDe(r,t.props),ref:e?JK(e,i):i})}return z.Children.count(t)>1?z.Children.only(null):null});BN.displayName="SlotClone";var eZ=({children:n})=>Q.jsx(Q.Fragment,{children:n});function tDe(n){return z.isValidElement(n)&&n.type===eZ}function nDe(n,e){const t={...e};for(const r in e){const i=n[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?t[r]=(...a)=>{o(...a),i(...a)}:i&&(t[r]=i):r==="style"?t[r]={...i,...o}:r==="className"&&(t[r]=[i,o].filter(Boolean).join(" "))}return{...n,...t}}function rDe(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var iDe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ad=iDe.reduce((n,e)=>{const t=z.forwardRef((r,i)=>{const{asChild:o,...s}=r,a=o?QK:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),Q.jsx(a,{...s,ref:i})});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function oDe(n,e){n&&$1.flushSync(()=>n.dispatchEvent(e))}var Oh=globalThis!=null&&globalThis.document?z.useLayoutEffect:()=>{},sDe="Portal",tZ=z.forwardRef((n,e)=>{var a;const{container:t,...r}=n,[i,o]=z.useState(!1);Oh(()=>o(!0),[]);const s=t||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return s?oX.createPortal(Q.jsx(ad.div,{...r,ref:e}),s):null});tZ.displayName=sDe;var aDe=tZ,e9=Object.prototype.hasOwnProperty;function Uy(n,e){var t,r;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((r=n.length)===e.length)for(;r--&&Uy(n[r],e[r]););return r===-1}if(!t||typeof n=="object"){r=0;for(t in n)if(e9.call(n,t)&&++r&&!e9.call(e,t)||!(t in e)||!Uy(n[t],e[t]))return!1;return Object.keys(e).length===r}}return n!==n&&e!==e}function h2(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let r=0;r<t.length;r++)if(!Object.prototype.hasOwnProperty.call(e,t[r])||!Object.is(n[t[r]],e[t[r]]))return!1;return!0}var p2=function(e,t,r,i){this.name=e,this.fn=t,this.args=r,this.modifiers=i};p2.prototype._test=function(e){var t=this.fn;try{Ym(this.modifiers.slice(),t,this)(e)}catch{t=function(){return!1}}try{return Ym(this.modifiers.slice(),t,this)(e)}catch{return!1}};p2.prototype._check=function(e){try{Ym(this.modifiers.slice(),this.fn,this)(e)}catch{if(Ym(this.modifiers.slice(),function(r){return r},this)(!1))return}if(!Ym(this.modifiers.slice(),this.fn,this)(e))throw null};p2.prototype._testAsync=function(e){var t=this;return new Promise(function(r,i){rZ(t.modifiers.slice(),t.fn,t)(e).then(function(o){o?r(e):i(null)}).catch(function(o){return i(o)})})};function nZ(n,e){return e===void 0&&(e="simple"),typeof n=="object"?n[e]:n}function Ym(n,e,t){if(n.length){var r=n.shift(),i=Ym(n,e,t);return r.perform(i,t)}else return nZ(e)}function rZ(n,e,t){if(n.length){var r=n.shift(),i=rZ(n,e,t);return r.performAsync(i,t)}else return function(o){return Promise.resolve(nZ(e,"async")(o))}}var lDe=function(e,t,r){this.name=e,this.perform=t,this.performAsync=r},eI=function(n){function e(t,r,i,o){for(var s=[],a=arguments.length-4;a-- >0;)s[a]=arguments[a+4];n.call(this,s),n.captureStackTrace&&n.captureStackTrace(this,e),this.rule=t,this.value=r,this.cause=i,this.target=o}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e}(Error),ru=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};ru.prototype._applyRule=function(e,t){var r=this;return function(){for(var i=[],o=arguments.length;o--;)i[o]=arguments[o];return r.chain.push(new p2(t,e.apply(r,i),i,r.nextRuleModifiers)),r.nextRuleModifiers=[],r}};ru.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new lDe(t,e.simple,e.async)),this};ru.prototype._clone=function(){return new ru(this.chain.slice(),this.nextRuleModifiers.slice())};ru.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})};ru.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(r){try{r._check(e)}catch(i){t.push(new eI(r,e,i))}}),t};ru.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(r){throw new eI(t,e,r)}})};ru.prototype.testAsync=function(e){var t=this;return new Promise(function(r,i){iZ(e,t.chain.slice(),r,i)})};function iZ(n,e,t,r){if(e.length){var i=e.shift();i._testAsync(n).then(function(){iZ(n,e,t,r)},function(o){r(new eI(i,n,o))})}else t(n)}var t9=function(n,e){return e&&typeof n=="string"&&n.trim().length===0?!0:n==null};function uDe(n,e){return e===void 0&&(e=!1),{simple:function(t){return t9(t,e)||n.check(t)===void 0},async:function(t){return t9(t,e)||n.testAsync(t)}}}function cs(){return typeof Proxy<"u"?oZ(new ru):zN(new ru)}var Vy={};cs.extend=function(n){Object.assign(Vy,n)};cs.clearCustomRules=function(){Vy={}};function oZ(n){return new Proxy(n,{get:function(t,r){if(r in t)return t[r];var i=oZ(n._clone());if(r in NE)return i._applyModifier(NE[r],r);if(r in Vy)return i._applyRule(Vy[r],r);if(r in UN)return i._applyRule(UN[r],r)}})}function zN(n){var e=function(i,o){return Object.keys(i).forEach(function(s){o[s]=function(){for(var a=[],l=arguments.length;l--;)a[l]=arguments[l];var u=zN(o._clone()),c=u._applyRule(i[s],s).apply(void 0,a);return c}}),o},t=e(UN,n),r=e(Vy,t);return Object.keys(NE).forEach(function(i){Object.defineProperty(r,i,{get:function(){var o=zN(r._clone());return o._applyModifier(NE[i],i)}})}),r}var NE={not:{simple:function(n){return function(e){return!n(e)}},async:function(n){return function(e){return Promise.resolve(n(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(n){return function(e){return aw(e).some(function(t){try{return n(t)}catch{return!1}})}},async:function(n){return function(e){return Promise.all(aw(e).map(function(t){try{return n(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(n){return function(e){return e!==!1&&aw(e).every(n)}},async:function(n){return function(e){return Promise.all(aw(e).map(n)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(n,e){return function(t){return n9(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&n(t):n(t)}},async:function(n,e){return function(t){return Promise.resolve(n(t)).then(function(r){return n9(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&r:r}).catch(function(){return!1})}}}};function n9(n){return n&&n.name==="schema"&&n.args.length>0&&typeof n.args[0]=="object"}function aw(n){return typeof n=="string"?n.split(""):n}var UN={equal:function(n){return function(e){return e==n}},exact:function(n){return function(e){return e===n}},number:function(n){return n===void 0&&(n=!0),function(e){return typeof e=="number"&&(n||isFinite(e))}},integer:function(){return function(n){var e=Number.isInteger||cDe;return e(n)}},numeric:function(){return function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},string:function(){return Np("string")},boolean:function(){return Np("boolean")},undefined:function(){return Np("undefined")},null:function(){return Np("null")},array:function(){return Np("array")},object:function(){return Np("object")},instanceOf:function(n){return function(e){return e instanceof n}},pattern:function(n){return function(e){return n.test(e)}},lowercase:function(){return function(n){return typeof n=="boolean"||n===n.toLowerCase()&&n.trim()!==""}},uppercase:function(){return function(n){return n===n.toUpperCase()&&n.trim()!==""}},vowel:function(){return function(n){return/^[aeiou]+$/i.test(n)}},consonant:function(){return function(n){return/^(?=[^aeiou])([a-z]+)$/i.test(n)}},first:function(n){return function(e){return e[0]==n}},last:function(n){return function(e){return e[e.length-1]==n}},empty:function(){return function(n){return n.length===0}},length:function(n,e){return function(t){return t.length>=n&&t.length<=(e||n)}},minLength:function(n){return function(e){return e.length>=n}},maxLength:function(n){return function(e){return e.length<=n}},negative:function(){return function(n){return n<0}},positive:function(){return function(n){return n>=0}},between:function(n,e){return function(t){return t>=n&&t<=e}},range:function(n,e){return function(t){return t>=n&&t<=e}},lessThan:function(n){return function(e){return e<n}},lessThanOrEqual:function(n){return function(e){return e<=n}},greaterThan:function(n){return function(e){return e>n}},greaterThanOrEqual:function(n){return function(e){return e>=n}},even:function(){return function(n){return n%2===0}},odd:function(){return function(n){return n%2!==0}},includes:function(n){return function(e){return~e.indexOf(n)}},schema:function(n){return fDe(n)},passesAnyOf:function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return function(t){return n.some(function(r){return r.test(t)})}},optional:uDe};function Np(n){return function(e){return Array.isArray(e)&&n==="array"||e===null&&n==="null"||typeof e===n}}function cDe(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n}function fDe(n){return{simple:function(e){var t=[];if(Object.keys(n).forEach(function(r){var i=n[r];try{i.check((e||{})[r])}catch(o){o.target=r,t.push(o)}}),t.length>0)throw t;return!0},async:function(e){var t=[],r=Object.keys(n).map(function(i){var o=n[i];return o.testAsync((e||{})[i]).catch(function(s){s.target=i,t.push(s)})});return Promise.all(r).then(function(){if(t.length>0)throw t;return!0})}}}var tr="colors",Do="sizes",Nt="space",dDe={gap:Nt,gridGap:Nt,columnGap:Nt,gridColumnGap:Nt,rowGap:Nt,gridRowGap:Nt,inset:Nt,insetBlock:Nt,insetBlockEnd:Nt,insetBlockStart:Nt,insetInline:Nt,insetInlineEnd:Nt,insetInlineStart:Nt,margin:Nt,marginTop:Nt,marginRight:Nt,marginBottom:Nt,marginLeft:Nt,marginBlock:Nt,marginBlockEnd:Nt,marginBlockStart:Nt,marginInline:Nt,marginInlineEnd:Nt,marginInlineStart:Nt,padding:Nt,paddingTop:Nt,paddingRight:Nt,paddingBottom:Nt,paddingLeft:Nt,paddingBlock:Nt,paddingBlockEnd:Nt,paddingBlockStart:Nt,paddingInline:Nt,paddingInlineEnd:Nt,paddingInlineStart:Nt,top:Nt,right:Nt,bottom:Nt,left:Nt,scrollMargin:Nt,scrollMarginTop:Nt,scrollMarginRight:Nt,scrollMarginBottom:Nt,scrollMarginLeft:Nt,scrollMarginX:Nt,scrollMarginY:Nt,scrollMarginBlock:Nt,scrollMarginBlockEnd:Nt,scrollMarginBlockStart:Nt,scrollMarginInline:Nt,scrollMarginInlineEnd:Nt,scrollMarginInlineStart:Nt,scrollPadding:Nt,scrollPaddingTop:Nt,scrollPaddingRight:Nt,scrollPaddingBottom:Nt,scrollPaddingLeft:Nt,scrollPaddingX:Nt,scrollPaddingY:Nt,scrollPaddingBlock:Nt,scrollPaddingBlockEnd:Nt,scrollPaddingBlockStart:Nt,scrollPaddingInline:Nt,scrollPaddingInlineEnd:Nt,scrollPaddingInlineStart:Nt,fontSize:"fontSizes",background:tr,backgroundColor:tr,backgroundImage:tr,borderImage:tr,border:tr,borderBlock:tr,borderBlockEnd:tr,borderBlockStart:tr,borderBottom:tr,borderBottomColor:tr,borderColor:tr,borderInline:tr,borderInlineEnd:tr,borderInlineStart:tr,borderLeft:tr,borderLeftColor:tr,borderRight:tr,borderRightColor:tr,borderTop:tr,borderTopColor:tr,caretColor:tr,color:tr,columnRuleColor:tr,fill:tr,outline:tr,outlineColor:tr,stroke:tr,textDecorationColor:tr,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:Do,minBlockSize:Do,maxBlockSize:Do,inlineSize:Do,minInlineSize:Do,maxInlineSize:Do,width:Do,minWidth:Do,maxWidth:Do,height:Do,minHeight:Do,maxHeight:Do,flexBasis:Do,gridTemplateColumns:Do,gridTemplateRows:Do,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},hDe=(n,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,Jg=()=>{const n=Object.create(null);return(e,t,...r)=>{const i=(o=>JSON.stringify(o,hDe))(e);return i in n?n[i]:n[i]=t(e,...r)}},ph=Symbol.for("sxs.internal"),tI=(n,e)=>Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)),r9=n=>{for(const e in n)return!0;return!1},{hasOwnProperty:pDe}=Object.prototype,VN=n=>n.includes("-")?n:n.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),mDe=/\s+(?![^()]*\))/,Pp=n=>e=>n(...typeof e=="string"?String(e).split(mDe):[e]),i9={appearance:n=>({WebkitAppearance:n,appearance:n}),backfaceVisibility:n=>({WebkitBackfaceVisibility:n,backfaceVisibility:n}),backdropFilter:n=>({WebkitBackdropFilter:n,backdropFilter:n}),backgroundClip:n=>({WebkitBackgroundClip:n,backgroundClip:n}),boxDecorationBreak:n=>({WebkitBoxDecorationBreak:n,boxDecorationBreak:n}),clipPath:n=>({WebkitClipPath:n,clipPath:n}),content:n=>({content:n.includes('"')||n.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(n)?n:`"${n}"`}),hyphens:n=>({WebkitHyphens:n,hyphens:n}),maskImage:n=>({WebkitMaskImage:n,maskImage:n}),maskSize:n=>({WebkitMaskSize:n,maskSize:n}),tabSize:n=>({MozTabSize:n,tabSize:n}),textSizeAdjust:n=>({WebkitTextSizeAdjust:n,textSizeAdjust:n}),userSelect:n=>({WebkitUserSelect:n,userSelect:n}),marginBlock:Pp((n,e)=>({marginBlockStart:n,marginBlockEnd:e||n})),marginInline:Pp((n,e)=>({marginInlineStart:n,marginInlineEnd:e||n})),maxSize:Pp((n,e)=>({maxBlockSize:n,maxInlineSize:e||n})),minSize:Pp((n,e)=>({minBlockSize:n,minInlineSize:e||n})),paddingBlock:Pp((n,e)=>({paddingBlockStart:n,paddingBlockEnd:e||n})),paddingInline:Pp((n,e)=>({paddingInlineStart:n,paddingInlineEnd:e||n}))},xT=/([\d.]+)([^]*)/,gDe=(n,e)=>n.length?n.reduce((t,r)=>(t.push(...e.map(i=>i.includes("&")?i.replace(/&/g,/[ +>|~]/.test(r)&&/&.*&/.test(i)?`:is(${r})`:r):r+" "+i)),t),[]):e,vDe=(n,e)=>n in yDe&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(t,r,i,o)=>r+(i==="stretch"?`-moz-available${o};${VN(n)}:${r}-webkit-fill-available`:`-moz-fit-content${o};${VN(n)}:${r}fit-content`)+o):String(e),yDe={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},ac=n=>n?n+"-":"",sZ=(n,e,t)=>n.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(r,i,o,s,a)=>s=="$"==!!o?r:(i||s=="--"?"calc(":"")+"var(--"+(s==="$"?ac(e)+(a.includes("$")?"":ac(t))+a.replace(/\$/g,"-"):a)+")"+(i||s=="--"?"*"+(i||"")+(o||"1")+")":"")),xDe=/\s*,\s*(?![^()]*\))/,bDe=Object.prototype.toString,Dm=(n,e,t,r,i)=>{let o,s,a;const l=(u,c,f)=>{let d,h;const m=g=>{for(d in g){const w=d.charCodeAt(0)===64,b=w&&Array.isArray(g[d])?g[d]:[g[d]];for(h of b){const v=/[A-Z]/.test(p=d)?p:p.replace(/-[^]/g,x=>x[1].toUpperCase()),S=typeof h=="object"&&h&&h.toString===bDe&&(!r.utils[v]||!c.length);if(v in r.utils&&!S){const x=r.utils[v];if(x!==s){s=x,m(x(h)),s=null;continue}}else if(v in i9){const x=i9[v];if(x!==a){a=x,m(x(h)),a=null;continue}}if(w&&(y=d.slice(1)in r.media?"@media "+r.media[d.slice(1)]:d,d=y.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(x,M,A,T,C,D)=>{const R=xT.test(M),B=.0625*(R?-1:1),[F,U]=R?[T,M]:[M,T];return"("+(A[0]==="="?"":A[0]===">"===R?"max-":"min-")+F+":"+(A[0]!=="="&&A.length===1?U.replace(xT,(N,I,V)=>Number(I)+B*(A===">"?1:-1)+V):U)+(C?") and ("+(C[0]===">"?"min-":"max-")+F+":"+(C.length===1?D.replace(xT,(N,I,V)=>Number(I)+B*(C===">"?-1:1)+V):D):"")+")"})),S){const x=w?f.concat(d):[...f],M=w?[...c]:gDe(c,d.split(xDe));o!==void 0&&i(o9(...o)),o=void 0,l(h,M,x)}else o===void 0&&(o=[[],c,f]),d=w||d.charCodeAt(0)!==36?d:`--${ac(r.prefix)}${d.slice(1).replace(/\$/g,"-")}`,h=S?h:typeof h=="number"?h&&v in wDe?String(h)+"px":String(h):sZ(vDe(v,h??""),r.prefix,r.themeMap[v]),o[0].push(`${w?`${d} `:`${VN(d)}:`}${h}`)}}var y,p};m(u),o!==void 0&&i(o9(...o)),o=void 0};l(n,e,t)},o9=(n,e,t)=>`${t.map(r=>`${r}{`).join("")}${e.length?`${e.join(",")}{`:""}${n.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,wDe={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},s9=n=>String.fromCharCode(n+(n>25?39:97)),mh=n=>(e=>{let t,r="";for(t=Math.abs(e);t>52;t=t/52|0)r=s9(t%52)+r;return s9(t%52)+r})(((e,t)=>{let r=t.length;for(;r;)e=33*e^t.charCodeAt(--r);return e})(5381,JSON.stringify(n))>>>0),k0=["themed","global","styled","onevar","resonevar","allvar","inline"],SDe=n=>{if(n.href&&!n.href.startsWith(location.origin))return!1;try{return!!n.cssRules}catch{return!1}},_De=n=>{let e;const t=()=>{const{cssRules:i}=e.sheet;return[].map.call(i,(o,s)=>{const{cssText:a}=o;let l="";if(a.startsWith("--sxs"))return"";if(i[s-1]&&(l=i[s-1].cssText).startsWith("--sxs")){if(!o.cssRules.length)return"";for(const u in e.rules)if(e.rules[u].group===o)return`--sxs{--sxs:${[...e.rules[u].cache].join(" ")}}${a}`;return o.cssRules.length?`${l}${a}`:""}return a}).join("")},r=()=>{if(e){const{rules:a,sheet:l}=e;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const u in a)delete a[u]}const i=Object(n).styleSheets||[];for(const a of i)if(SDe(a)){for(let l=0,u=a.cssRules;u[l];++l){const c=Object(u[l]);if(c.type!==1)continue;const f=Object(u[l+1]);if(f.type!==4)continue;++l;const{cssText:d}=c;if(!d.startsWith("--sxs"))continue;const h=d.slice(14,-3).trim().split(/\s+/),m=k0[h[0]];m&&(e||(e={sheet:a,reset:r,rules:{},toString:t}),e.rules[m]={group:f,index:l,cache:new Set(h)})}if(e)break}if(!e){const a=(l,u)=>({type:u,cssRules:[],insertRule(c,f){this.cssRules.splice(f,0,a(c,{import:3,undefined:1}[(c.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,c=>c.cssText).join("")}}`:l}});e={sheet:n?(n.head||n).appendChild(document.createElement("style")).sheet:a("","text/css"),rules:{},reset:r,toString:t}}const{sheet:o,rules:s}=e;for(let a=k0.length-1;a>=0;--a){const l=k0[a];if(!s[l]){const u=k0[a+1],c=s[u]?s[u].index:o.cssRules.length;o.insertRule("@media{}",c),o.insertRule(`--sxs{--sxs:${a}}`,c),s[l]={group:o.cssRules[c+1],index:c,cache:new Set([a])}}EDe(s[l])}};return r(),e},EDe=n=>{const e=n.group;let t=e.cssRules.length;n.apply=r=>{try{e.insertRule(r,t),++t}catch{}}},Kv=Symbol(),MDe=Jg(),a9=(n,e)=>MDe(n,()=>(...t)=>{let r={type:null,composers:new Set};for(const i of t)if(i!=null)if(i[ph]){r.type==null&&(r.type=i[ph].type);for(const o of i[ph].composers)r.composers.add(o)}else i.constructor!==Object||i.$$typeof?r.type==null&&(r.type=i):r.composers.add(CDe(i,n));return r.type==null&&(r.type="span"),r.composers.size||r.composers.add(["PJLV",{},[],[],{},[]]),ADe(n,r,e)}),CDe=({variants:n,compoundVariants:e,defaultVariants:t,...r},i)=>{const o=`${ac(i.prefix)}c-${mh(r)}`,s=[],a=[],l=Object.create(null),u=[];for(const d in t)l[d]=String(t[d]);if(typeof n=="object"&&n)for(const d in n){c=l,f=d,pDe.call(c,f)||(l[d]="undefined");const h=n[d];for(const m in h){const g={[d]:String(m)};String(m)==="undefined"&&u.push(d);const y=h[m],p=[g,y,!r9(y)];s.push(p)}}var c,f;if(typeof e=="object"&&e)for(const d of e){let{css:h,...m}=d;h=typeof h=="object"&&h||{};for(const y in m)m[y]=String(m[y]);const g=[m,h,!r9(h)];a.push(g)}return[o,r,s,a,l,u]},ADe=(n,e,t)=>{const[r,i,o,s]=TDe(e.composers),a=typeof e.type=="function"||e.type.$$typeof?(f=>{function d(){for(let h=0;h<d[Kv].length;h++){const[m,g]=d[Kv][h];f.rules[m].apply(g)}return d[Kv]=[],null}return d[Kv]=[],d.rules={},k0.forEach(h=>d.rules[h]={apply:m=>d[Kv].push([h,m])}),d})(t):null,l=(a||t).rules,u=`.${r}${i.length>1?`:where(.${i.slice(1).join(".")})`:""}`,c=f=>{f=typeof f=="object"&&f||DDe;const{css:d,...h}=f,m={};for(const p in o)if(delete h[p],p in f){let w=f[p];typeof w=="object"&&w?m[p]={"@initial":o[p],...w}:(w=String(w),m[p]=w!=="undefined"||s.has(p)?w:o[p])}else m[p]=o[p];const g=new Set([...i]);for(const[p,w,b,v]of e.composers){t.rules.styled.cache.has(p)||(t.rules.styled.cache.add(p),Dm(w,[`.${p}`],[],n,M=>{l.styled.apply(M)}));const S=l9(b,m,n.media),x=l9(v,m,n.media,!0);for(const M of S)if(M!==void 0)for(const[A,T,C]of M){const D=`${p}-${mh(T)}-${A}`;g.add(D);const R=(C?t.rules.resonevar:t.rules.onevar).cache,B=C?l.resonevar:l.onevar;R.has(D)||(R.add(D),Dm(T,[`.${D}`],[],n,F=>{B.apply(F)}))}for(const M of x)if(M!==void 0)for(const[A,T]of M){const C=`${p}-${mh(T)}-${A}`;g.add(C),t.rules.allvar.cache.has(C)||(t.rules.allvar.cache.add(C),Dm(T,[`.${C}`],[],n,D=>{l.allvar.apply(D)}))}}if(typeof d=="object"&&d){const p=`${r}-i${mh(d)}-css`;g.add(p),t.rules.inline.cache.has(p)||(t.rules.inline.cache.add(p),Dm(d,[`.${p}`],[],n,w=>{l.inline.apply(w)}))}for(const p of String(f.className||"").trim().split(/\s+/))p&&g.add(p);const y=h.className=[...g].join(" ");return{type:e.type,className:y,selector:u,props:h,toString:()=>y,deferredInjector:a}};return tI(c,{className:r,selector:u,[ph]:e,toString:()=>(t.rules.styled.cache.has(r)||c(),r)})},TDe=n=>{let e="";const t=[],r={},i=[];for(const[o,,,,s,a]of n){e===""&&(e=o),t.push(o),i.push(...a);for(const l in s){const u=s[l];(r[l]===void 0||u!=="undefined"||a.includes(u))&&(r[l]=u)}}return[e,t,r,new Set(i)]},l9=(n,e,t,r)=>{const i=[];e:for(let[o,s,a]of n){if(a)continue;let l,u=0,c=!1;for(l in o){const f=o[l];let d=e[l];if(d!==f){if(typeof d!="object"||!d)continue e;{let h,m,g=0;for(const y in d){if(f===String(d[y])){if(y!=="@initial"){const p=y.slice(1);(m=m||[]).push(p in t?t[p]:y.replace(/^@media ?/,"")),c=!0}u+=g,h=!0}++g}if(m&&m.length&&(s={["@media "+m.join(", ")]:s}),!h)continue e}}}(i[u]=i[u]||[]).push([r?"cv":`${l}-${o[l]}`,s,c])}return i},DDe={},NDe=Jg(),PDe=(n,e)=>NDe(n,()=>(...t)=>{const r=()=>{for(let i of t){i=typeof i=="object"&&i||{};let o=mh(i);if(!e.rules.global.cache.has(o)){if(e.rules.global.cache.add(o),"@import"in i){let s=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let a of[].concat(i["@import"]))a=a.includes('"')||a.includes("'")?a:`"${a}"`,e.sheet.insertRule(`@import ${a};`,s++);delete i["@import"]}Dm(i,[],[],n,s=>{e.rules.global.apply(s)})}}return""};return tI(r,{toString:r})}),RDe=Jg(),ODe=(n,e)=>RDe(n,()=>t=>{const r=`${ac(n.prefix)}k-${mh(t)}`,i=()=>{if(!e.rules.global.cache.has(r)){e.rules.global.cache.add(r);const o=[];Dm(t,[],[],n,a=>o.push(a));const s=`@keyframes ${r}{${o.join("")}}`;e.rules.global.apply(s)}return r};return tI(i,{get name(){return i()},toString:i})}),kDe=class{constructor(e,t,r,i){this.token=e==null?"":String(e),this.value=t==null?"":String(t),this.scale=r==null?"":String(r),this.prefix=i==null?"":String(i)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+ac(this.prefix)+ac(this.scale)+this.token}toString(){return this.computedValue}},IDe=Jg(),LDe=(n,e)=>IDe(n,()=>(t,r)=>{r=typeof t=="object"&&t||Object(r);const i=`.${t=(t=typeof t=="string"?t:"")||`${ac(n.prefix)}t-${mh(r)}`}`,o={},s=[];for(const l in r){o[l]={};for(const u in r[l]){const c=`--${ac(n.prefix)}${l}-${u}`,f=sZ(String(r[l][u]),n.prefix,l);o[l][u]=new kDe(u,f,l,n.prefix),s.push(`${c}:${f}`)}}const a=()=>{if(s.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const l=`${r===n.theme?":root,":""}.${t}{${s.join(";")}}`;e.rules.themed.apply(l)}return t};return{...o,get className(){return a()},selector:i,toString:a}}),FDe=Jg(),BDe=Jg(),zDe=n=>{const e=(t=>{let r=!1;const i=FDe(t,o=>{r=!0;const s="prefix"in(o=typeof o=="object"&&o||{})?String(o.prefix):"",a=typeof o.media=="object"&&o.media||{},l=typeof o.root=="object"?o.root||null:globalThis.document||null,u=typeof o.theme=="object"&&o.theme||{},c={prefix:s,media:a,theme:u,themeMap:typeof o.themeMap=="object"&&o.themeMap||{...dDe},utils:typeof o.utils=="object"&&o.utils||{}},f=_De(l),d={css:a9(c,f),globalCss:PDe(c,f),keyframes:ODe(c,f),createTheme:LDe(c,f),reset(){f.reset(),d.theme.toString()},theme:{},sheet:f,config:c,prefix:s,getCssText:f.toString,toString:f.toString};return String(d.theme=d.createTheme(u)),d});return r||i.reset(),i})(n);return e.styled=(({config:t,sheet:r})=>BDe(t,()=>{const i=a9(t,r);return(...o)=>{const s=i(...o),a=s[ph].type,l=Te.forwardRef((u,c)=>{const f=u&&u.as||a,{props:d,deferredInjector:h}=s(u);return delete d.as,d.ref=c,h?Te.createElement(Te.Fragment,null,Te.createElement(f,d),Te.createElement(h,null)):Te.createElement(f,d)});return l.className=s.className,l.displayName=`Styled.${a.displayName||a.name||a}`,l.selector=s.selector,l.toString=()=>s.selector,l[ph]=s[ph],l}}))(e),e};function UDe(n,e,t){return Math.max(e,Math.min(n,t))}const go={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function u9(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function c9(n,e,t,r=.15){return r===0?UDe(n,e,t):n<e?-u9(e-n,t-e,r)+e:n>t?+u9(n-t,t-e,r)+t:n}function VDe(n,[e,t],[r,i]){const[[o,s],[a,l]]=n;return[c9(e,o,s,r),c9(t,a,l,i)]}function $De(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function HDe(n){var e=$De(n,"string");return typeof e=="symbol"?e:String(e)}function rs(n,e,t){return e=HDe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function f9(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Nr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?f9(Object(t),!0).forEach(function(r){rs(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):f9(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const aZ={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function d9(n){return n?n[0].toUpperCase()+n.slice(1):""}const WDe=["enter","leave"];function jDe(n=!1,e){return n&&!WDe.includes(e)}function GDe(n,e="",t=!1){const r=aZ[n],i=r&&r[e]||e;return"on"+d9(n)+d9(i)+(jDe(t,i)?"Capture":"")}const qDe=["gotpointercapture","lostpointercapture"];function XDe(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const r=qDe.includes(e)?"capturecapture":"capture",i=!!~e.indexOf(r);return i&&(e=e.replace("capture","")),{device:e,capture:i,passive:t}}function YDe(n,e=""){const t=aZ[n],r=t&&t[e]||e;return n+r}function m2(n){return"touches"in n}function lZ(n){return m2(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function KDe(n){return Array.from(n.touches).filter(e=>{var t,r;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(r=t.contains)===null||r===void 0?void 0:r.call(t,e.target))})}function ZDe(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function uZ(n){return m2(n)?ZDe(n)[0]:n}function JDe(n){return KDe(n).map(e=>e.identifier)}function bT(n){const e=uZ(n);return m2(n)?e.identifier:e.pointerId}function h9(n){const e=uZ(n);return[e.clientX,e.clientY]}function QDe(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:r,metaKey:i,ctrlKey:o}=n;Object.assign(e,{shiftKey:t,altKey:r,metaKey:i,ctrlKey:o})}return e}function PE(n,...e){return typeof n=="function"?n(...e):n}function eNe(){}function tNe(...n){return n.length===0?eNe:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function p9(n,e){return Object.assign({},e,n||{})}const nNe=32;class rNe{constructor(e,t,r){this.ctrl=e,this.args=t,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:r,args:i}=this;t[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,r=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=r.from?PE(r.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:r,shared:i}=this;t.args=this.args;let o=0;if(e&&(t.event=e,r.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,QDe(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,o=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const x=t._delta.map(Math.abs);go.addTo(t._distance,x)}this.axisIntent&&this.axisIntent(e);const[s,a]=t._movement,[l,u]=r.threshold,{_step:c,values:f}=t;if(r.hasCustomTransform?(c[0]===!1&&(c[0]=Math.abs(s)>=l&&f[0]),c[1]===!1&&(c[1]=Math.abs(a)>=u&&f[1])):(c[0]===!1&&(c[0]=Math.abs(s)>=l&&Math.sign(s)*l),c[1]===!1&&(c[1]=Math.abs(a)>=u&&Math.sign(a)*u)),t.intentional=c[0]!==!1||c[1]!==!1,!t.intentional)return;const d=[0,0];if(r.hasCustomTransform){const[x,M]=f;d[0]=c[0]!==!1?x-c[0]:0,d[1]=c[1]!==!1?M-c[1]:0}else d[0]=c[0]!==!1?s-c[0]:0,d[1]=c[1]!==!1?a-c[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(d);const h=t.offset,m=t._active&&!t._blocked||t.active;m&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=i[this.ingKey]=t._active,e&&(t.first&&("bounds"in r&&(t._bounds=PE(r.bounds,t)),this.setup&&this.setup()),t.movement=d,this.computeOffset()));const[g,y]=t.offset,[[p,w],[b,v]]=t._bounds;t.overflow=[g<p?-1:g>w?1:0,y<b?-1:y>v?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const S=t._active?r.rubberband||[0,0]:[0,0];if(t.offset=VDe(t._bounds,t.offset,S),t.delta=go.sub(t.offset,h),this.computeMovement(),m&&(!t.last||o>nNe)){t.delta=go.sub(t.offset,h);const x=t.delta.map(Math.abs);go.addTo(t.distance,x),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&o>0&&(t.velocity=[x[0]/o,x[1]/o],t.timeDelta=o)}}emit(){const e=this.state,t=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const i=this.handler(Nr(Nr(Nr({},t),e),{},{[this.aliasKey]:e.values}));i!==void 0&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function iNe([n,e],t){const r=Math.abs(n),i=Math.abs(e);if(r>i&&r>t)return"x";if(i>r&&i>t)return"y"}class oNe extends rNe{constructor(...e){super(...e),rs(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=go.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=go.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,r=this.config;if(!t.axis&&e){const i=typeof r.axisThreshold=="object"?r.axisThreshold[lZ(e)]:r.axisThreshold;t.axis=iNe(t._movement,i)}t._blocked=(r.lockDirection||!!r.axis)&&!t.axis||!!r.axis&&r.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const sNe=n=>n,m9=.15,cZ={enabled(n=!0){return n},eventOptions(n,e,t){return Nr(Nr({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[m9,m9];case!1:return[0,0];default:return go.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return go.toVector(n)},transform(n,e,t){const r=n||t.shared.transform;return this.hasCustomTransform=!!r,r||sNe},threshold(n){return go.toVector(n,0)}},aNe=0,K1=Nr(Nr({},cZ),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=aNe){return n},bounds(n={}){if(typeof n=="function")return o=>K1.bounds(n(o));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:r=-1/0,bottom:i=1/0}=n;return[[e,t],[r,i]]}}),g9={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class lNe extends oNe{constructor(...e){super(...e),rs(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),i={left:t.left-r.left+e.offset[0],right:t.right-r.right+e.offset[0],top:t.top-r.top+e.offset[1],bottom:t.bottom-r.bottom+e.offset[1]};e._bounds=K1.bounds(i)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,r=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const i=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(i&&i.size>1&&r._pointerActive)&&(this.start(e),this.setupPointer(e),r._pointerId=bT(e),r._pointerActive=!0,this.computeValues(h9(e)),this.computeInitial(),t.preventScrollAxis&&lZ(e)!=="mouse"?(r._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,r=this.config;if(!t._pointerActive)return;const i=bT(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;const o=h9(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=go.sub(o,t._values),this.computeValues(o)),go.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(r.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,r=this.config;if(!t._active||!t._pointerActive)return;const i=bT(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[o,s]=t._distance;if(t.tap=o<=r.tapsThreshold&&s<=r.tapsThreshold,t.tap&&r.filterTaps)t._force=!0;else{const[a,l]=t._delta,[u,c]=t._movement,[f,d]=r.swipe.velocity,[h,m]=r.swipe.distance,g=r.swipe.duration;if(t.elapsedTime<g){const y=Math.abs(a/t.timeDelta),p=Math.abs(l/t.timeDelta);y>f&&Math.abs(u)>h&&(t.swipe[0]=Math.sign(a)),p>d&&Math.abs(c)>m&&(t.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,r=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,uNe(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=g9[e.key];if(t){const r=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),r._delta=t(this.config.keyboardDisplacement,i),r._keyboardActive=!0,go.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in g9&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function uNe(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const Z1=typeof window<"u"&&window.document&&window.document.createElement;function fZ(){return Z1&&"ontouchstart"in window}function cNe(){return fZ()||Z1&&window.navigator.maxTouchPoints>1}function fNe(){return Z1&&"onpointerdown"in window}function dNe(){return Z1&&"exitPointerLock"in window.document}function hNe(){try{return"constructor"in GestureEvent}catch{return!1}}const fa={isBrowser:Z1,gesture:hNe(),touch:fZ(),touchscreen:cNe(),pointer:fNe(),pointerLock:dNe()},pNe=250,mNe=180,gNe=.5,vNe=50,yNe=250,xNe=10,v9={mouse:0,touch:0,pen:8},bNe=Nr(Nr({},K1),{},{device(n,e,{pointer:{touch:t=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&fa.pointerLock,fa.touch&&t?"touch":this.pointerLock?"mouse":fa.pointer&&!i?"pointer":fa.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?pNe:void 0,!(!fa.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:r=3,axis:i=void 0}){const o=go.toVector(n,t?r:i?1:0);return this.filterTaps=t,this.tapsThreshold=r,o},swipe({velocity:n=gNe,distance:e=vNe,duration:t=yNe}={}){return{velocity:this.transform(go.toVector(n)),distance:this.transform(go.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return mNe;case!1:return 0;default:return n}},axisThreshold(n){return n?Nr(Nr({},v9),n):v9},keyboardDisplacement(n=xNe){return n}});Nr(Nr({},cZ),{},{device(n,e,{shared:t,pointer:{touch:r=!1}={}}){if(t.target&&!fa.touch&&fa.gesture)return"gesture";if(fa.touch&&r)return"touch";if(fa.touchscreen){if(fa.pointer)return"pointer";if(fa.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:r={}}){const i=s=>{const a=p9(PE(t,s),{min:-1/0,max:1/0});return[a.min,a.max]},o=s=>{const a=p9(PE(r,s),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof t!="function"&&typeof r!="function"?[i(),o()]:s=>[i(s),o(s)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",go.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});Nr(Nr({},K1),{},{mouseOnly:(n=!0)=>n});Nr(Nr({},K1),{},{mouseOnly:(n=!0)=>n});const dZ=new Map,$N=new Map;function wNe(n){dZ.set(n.key,n.engine),$N.set(n.key,n.resolver)}const SNe={key:"drag",engine:lNe,resolver:bNe};function _Ne(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function ENe(n,e){if(n==null)return{};var t=_Ne(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}const MNe={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=fa.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},CNe=["target","eventOptions","window","enabled","transform"];function o_(n={},e){const t={};for(const[r,i]of Object.entries(e))switch(typeof i){case"function":t[r]=i.call(t,n[r],r,n);break;case"object":t[r]=o_(n[r],i);break;case"boolean":i&&(t[r]=n[r]);break}return t}function ANe(n,e,t={}){const r=n,{target:i,eventOptions:o,window:s,enabled:a,transform:l}=r,u=ENe(r,CNe);if(t.shared=o_({target:i,eventOptions:o,window:s,enabled:a,transform:l},MNe),e){const c=$N.get(e);t[e]=o_(Nr({shared:t.shared},u),c)}else for(const c in u){const f=$N.get(c);f&&(t[c]=o_(Nr({shared:t.shared},u[c]),f))}return t}class hZ{constructor(e,t){rs(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,r,i,o){const s=this._listeners,a=YDe(t,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},u=Nr(Nr({},l),o);e.addEventListener(a,i,u);const c=()=>{e.removeEventListener(a,i,u),s.delete(c)};return s.add(c),c}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class TNe{constructor(){rs(this,"_timeouts",new Map)}add(e,t,r=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(t,r,...i))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class DNe{constructor(e){rs(this,"gestures",new Set),rs(this,"_targetEventStore",new hZ(this)),rs(this,"gestureEventStores",{}),rs(this,"gestureTimeoutStores",{}),rs(this,"handlers",{}),rs(this,"config",{}),rs(this,"pointerIds",new Set),rs(this,"touchIds",new Set),rs(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),NNe(this,e)}setEventIds(e){if(m2(e))return this.touchIds=new Set(JDe(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=ANe(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,r={};let i;if(!(t.target&&(i=t.target(),!i))){if(t.enabled){for(const s of this.gestures){const a=this.config[s],l=y9(r,a.eventOptions,!!i);if(a.enabled){const u=dZ.get(s);new u(this,e,s).bind(l)}}const o=y9(r,t.eventOptions,!!i);for(const s in this.nativeHandlers)o(s,"",a=>this.nativeHandlers[s](Nr(Nr({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const o in r)r[o]=tNe(...r[o]);if(!i)return r;for(const o in r){const{device:s,capture:a,passive:l}=XDe(o);this._targetEventStore.add(i,s,"",r[o],{capture:a,passive:l})}}}}function Rp(n,e){n.gestures.add(e),n.gestureEventStores[e]=new hZ(n,e),n.gestureTimeoutStores[e]=new TNe}function NNe(n,e){e.drag&&Rp(n,"drag"),e.wheel&&Rp(n,"wheel"),e.scroll&&Rp(n,"scroll"),e.move&&Rp(n,"move"),e.pinch&&Rp(n,"pinch"),e.hover&&Rp(n,"hover")}const y9=(n,e,t)=>(r,i,o,s={},a=!1)=>{var l,u;const c=(l=s.capture)!==null&&l!==void 0?l:e.capture,f=(u=s.passive)!==null&&u!==void 0?u:e.passive;let d=a?r:GDe(r,i,c);t&&f&&(d+="Passive"),n[d]=n[d]||[],n[d].push(o)};function PNe(n,e={},t,r){const i=Te.useMemo(()=>new DNe(n),[]);if(i.applyHandlers(n,r),i.applyConfig(e,t),Te.useEffect(i.effect.bind(i)),Te.useEffect(()=>i.clean.bind(i),[]),e.target===void 0)return i.bind.bind(i)}function RNe(n,e){return wNe(SNe),PNe({drag:n},e||{},"drag")}function Fu(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function ONe(n,e=[]){let t=[];function r(o,s){const a=z.createContext(s),l=t.length;t=[...t,s];const u=f=>{var p;const{scope:d,children:h,...m}=f,g=((p=d==null?void 0:d[n])==null?void 0:p[l])||a,y=z.useMemo(()=>m,Object.values(m));return Q.jsx(g.Provider,{value:y,children:h})};u.displayName=o+"Provider";function c(f,d){var g;const h=((g=d==null?void 0:d[n])==null?void 0:g[l])||a,m=z.useContext(h);if(m)return m;if(s!==void 0)return s;throw new Error(`\`${f}\` must be used within \`${o}\``)}return[u,c]}const i=()=>{const o=t.map(s=>z.createContext(s));return function(a){const l=(a==null?void 0:a[n])||o;return z.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return i.scopeName=n,[r,kNe(i,...e)]}function kNe(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const s=r.reduce((a,{useScope:l,scopeName:u})=>{const f=l(o)[`__scope${u}`];return{...a,...f}},{});return z.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return t.scopeName=e.scopeName,t}function Qg(n){const e=z.useRef(n);return z.useEffect(()=>{e.current=n}),z.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function INe(n,e=globalThis==null?void 0:globalThis.document){const t=Qg(n);z.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var LNe="DismissableLayer",HN="dismissableLayer.update",FNe="dismissableLayer.pointerDownOutside",BNe="dismissableLayer.focusOutside",x9,pZ=z.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),mZ=z.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:s,onDismiss:a,...l}=n,u=z.useContext(pZ),[c,f]=z.useState(null),d=(c==null?void 0:c.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=z.useState({}),m=tp(e,M=>f(M)),g=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),p=g.indexOf(y),w=c?g.indexOf(c):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,v=w>=p,S=VNe(M=>{const A=M.target,T=[...u.branches].some(C=>C.contains(A));!v||T||(i==null||i(M),s==null||s(M),M.defaultPrevented||a==null||a())},d),x=$Ne(M=>{const A=M.target;[...u.branches].some(C=>C.contains(A))||(o==null||o(M),s==null||s(M),M.defaultPrevented||a==null||a())},d);return INe(M=>{w===u.layers.size-1&&(r==null||r(M),!M.defaultPrevented&&a&&(M.preventDefault(),a()))},d),z.useEffect(()=>{if(c)return t&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(x9=d.body.style.pointerEvents,d.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(c)),u.layers.add(c),b9(),()=>{t&&u.layersWithOutsidePointerEventsDisabled.size===1&&(d.body.style.pointerEvents=x9)}},[c,d,t,u]),z.useEffect(()=>()=>{c&&(u.layers.delete(c),u.layersWithOutsidePointerEventsDisabled.delete(c),b9())},[c,u]),z.useEffect(()=>{const M=()=>h({});return document.addEventListener(HN,M),()=>document.removeEventListener(HN,M)},[]),Q.jsx(ad.div,{...l,ref:m,style:{pointerEvents:b?v?"auto":"none":void 0,...n.style},onFocusCapture:Fu(n.onFocusCapture,x.onFocusCapture),onBlurCapture:Fu(n.onBlurCapture,x.onBlurCapture),onPointerDownCapture:Fu(n.onPointerDownCapture,S.onPointerDownCapture)})});mZ.displayName=LNe;var zNe="DismissableLayerBranch",UNe=z.forwardRef((n,e)=>{const t=z.useContext(pZ),r=z.useRef(null),i=tp(e,r);return z.useEffect(()=>{const o=r.current;if(o)return t.branches.add(o),()=>{t.branches.delete(o)}},[t.branches]),Q.jsx(ad.div,{...n,ref:i})});UNe.displayName=zNe;function VNe(n,e=globalThis==null?void 0:globalThis.document){const t=Qg(n),r=z.useRef(!1),i=z.useRef(()=>{});return z.useEffect(()=>{const o=a=>{if(a.target&&!r.current){let l=function(){gZ(FNe,t,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function $Ne(n,e=globalThis==null?void 0:globalThis.document){const t=Qg(n),r=z.useRef(!1);return z.useEffect(()=>{const i=o=>{o.target&&!r.current&&gZ(BNe,t,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function b9(){const n=new CustomEvent(HN);document.dispatchEvent(n)}function gZ(n,e,t,{discrete:r}){const i=t.originalEvent.target,o=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?oDe(i,o):i.dispatchEvent(o)}var HNe=O_.useId||(()=>{}),WNe=0;function jNe(n){const[e,t]=z.useState(HNe());return Oh(()=>{t(r=>r??String(WNe++))},[n]),e?`radix-${e}`:""}const GNe=["top","right","bottom","left"],zf=Math.min,Os=Math.max,RE=Math.round,lw=Math.floor,Yl=n=>({x:n,y:n}),qNe={left:"right",right:"left",bottom:"top",top:"bottom"},XNe={start:"end",end:"start"};function WN(n,e,t){return Os(n,zf(e,t))}function lc(n,e){return typeof n=="function"?n(e):n}function uc(n){return n.split("-")[0]}function ev(n){return n.split("-")[1]}function nI(n){return n==="x"?"y":"x"}function rI(n){return n==="y"?"height":"width"}function Uf(n){return["top","bottom"].includes(uc(n))?"y":"x"}function iI(n){return nI(Uf(n))}function YNe(n,e,t){t===void 0&&(t=!1);const r=ev(n),i=iI(n),o=rI(i);let s=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(s=OE(s)),[s,OE(s)]}function KNe(n){const e=OE(n);return[jN(n),e,jN(e)]}function jN(n){return n.replace(/start|end/g,e=>XNe[e])}function ZNe(n,e,t){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(n){case"top":case"bottom":return t?e?i:r:e?r:i;case"left":case"right":return e?o:s;default:return[]}}function JNe(n,e,t,r){const i=ev(n);let o=ZNe(uc(n),t==="start",r);return i&&(o=o.map(s=>s+"-"+i),e&&(o=o.concat(o.map(jN)))),o}function OE(n){return n.replace(/left|right|bottom|top/g,e=>qNe[e])}function QNe(n){return{top:0,right:0,bottom:0,left:0,...n}}function vZ(n){return typeof n!="number"?QNe(n):{top:n,right:n,bottom:n,left:n}}function kE(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function w9(n,e,t){let{reference:r,floating:i}=n;const o=Uf(e),s=iI(e),a=rI(s),l=uc(e),u=o==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(l){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(ev(e)){case"start":h[s]-=d*(t&&u?-1:1);break;case"end":h[s]+=d*(t&&u?-1:1);break}return h}const ePe=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=t,a=o.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let u=await s.getElementRects({reference:n,floating:e,strategy:i}),{x:c,y:f}=w9(u,r,l),d=r,h={},m=0;for(let g=0;g<a.length;g++){const{name:y,fn:p}=a[g],{x:w,y:b,data:v,reset:S}=await p({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:u,platform:s,elements:{reference:n,floating:e}});c=w??c,f=b??f,h={...h,[y]:{...h[y],...v}},S&&m<=50&&(m++,typeof S=="object"&&(S.placement&&(d=S.placement),S.rects&&(u=S.rects===!0?await s.getElementRects({reference:n,floating:e,strategy:i}):S.rects),{x:c,y:f}=w9(u,d,l)),g=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function $y(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:l}=n,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=lc(e,n),m=vZ(h),y=a[d?f==="floating"?"reference":"floating":f],p=kE(await o.getClippingRect({element:(t=await(o.isElement==null?void 0:o.isElement(y)))==null||t?y:y.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),w=f==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),v=await(o.isElement==null?void 0:o.isElement(b))?await(o.getScale==null?void 0:o.getScale(b))||{x:1,y:1}:{x:1,y:1},S=kE(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:b,strategy:l}):w);return{top:(p.top-S.top+m.top)/v.y,bottom:(S.bottom-p.bottom+m.bottom)/v.y,left:(p.left-S.left+m.left)/v.x,right:(S.right-p.right+m.right)/v.x}}const tPe=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:o,platform:s,elements:a,middlewareData:l}=e,{element:u,padding:c=0}=lc(n,e)||{};if(u==null)return{};const f=vZ(c),d={x:t,y:r},h=iI(i),m=rI(h),g=await s.getDimensions(u),y=h==="y",p=y?"top":"left",w=y?"bottom":"right",b=y?"clientHeight":"clientWidth",v=o.reference[m]+o.reference[h]-d[h]-o.floating[m],S=d[h]-o.reference[h],x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(u));let M=x?x[b]:0;(!M||!await(s.isElement==null?void 0:s.isElement(x)))&&(M=a.floating[b]||o.floating[m]);const A=v/2-S/2,T=M/2-g[m]/2-1,C=zf(f[p],T),D=zf(f[w],T),R=C,B=M-g[m]-D,F=M/2-g[m]/2+A,U=WN(R,F,B),N=!l.arrow&&ev(i)!=null&&F!==U&&o.reference[m]/2-(F<R?C:D)-g[m]/2<0,I=N?F<R?F-R:F-B:0;return{[h]:d[h]+I,data:{[h]:U,centerOffset:F-U-I,...N&&{alignmentOffset:I}},reset:N}}}),nPe=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...y}=lc(n,e);if((t=o.arrow)!=null&&t.alignmentOffset)return{};const p=uc(i),w=Uf(a),b=uc(a)===a,v=await(l.isRTL==null?void 0:l.isRTL(u.floating)),S=d||(b||!g?[OE(a)]:KNe(a)),x=m!=="none";!d&&x&&S.push(...JNe(a,g,m,v));const M=[a,...S],A=await $y(e,y),T=[];let C=((r=o.flip)==null?void 0:r.overflows)||[];if(c&&T.push(A[p]),f){const F=YNe(i,s,v);T.push(A[F[0]],A[F[1]])}if(C=[...C,{placement:i,overflows:T}],!T.every(F=>F<=0)){var D,R;const F=(((D=o.flip)==null?void 0:D.index)||0)+1,U=M[F];if(U)return{data:{index:F,overflows:C},reset:{placement:U}};let N=(R=C.filter(I=>I.overflows[0]<=0).sort((I,V)=>I.overflows[1]-V.overflows[1])[0])==null?void 0:R.placement;if(!N)switch(h){case"bestFit":{var B;const I=(B=C.filter(V=>{if(x){const L=Uf(V.placement);return L===w||L==="y"}return!0}).map(V=>[V.placement,V.overflows.filter(L=>L>0).reduce((L,X)=>L+X,0)]).sort((V,L)=>V[1]-L[1])[0])==null?void 0:B[0];I&&(N=I);break}case"initialPlacement":N=a;break}if(i!==N)return{reset:{placement:N}}}return{}}}};function S9(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function _9(n){return GNe.some(e=>n[e]>=0)}const rPe=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=lc(n,e);switch(r){case"referenceHidden":{const o=await $y(e,{...i,elementContext:"reference"}),s=S9(o,t.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:_9(s)}}}case"escaped":{const o=await $y(e,{...i,altBoundary:!0}),s=S9(o,t.floating);return{data:{escapedOffsets:s,escaped:_9(s)}}}default:return{}}}}};async function iPe(n,e){const{placement:t,platform:r,elements:i}=n,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=uc(t),a=ev(t),l=Uf(t)==="y",u=["left","top"].includes(s)?-1:1,c=o&&l?-1:1,f=lc(e,n);let{mainAxis:d,crossAxis:h,alignmentAxis:m}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof m=="number"&&(h=a==="end"?m*-1:m),l?{x:h*c,y:d*u}:{x:d*u,y:h*c}}const oPe=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:o,placement:s,middlewareData:a}=e,l=await iPe(e,n);return s===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:{...l,placement:s}}}}},sPe=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:y=>{let{x:p,y:w}=y;return{x:p,y:w}}},...l}=lc(n,e),u={x:t,y:r},c=await $y(e,l),f=Uf(uc(i)),d=nI(f);let h=u[d],m=u[f];if(o){const y=d==="y"?"top":"left",p=d==="y"?"bottom":"right",w=h+c[y],b=h-c[p];h=WN(w,h,b)}if(s){const y=f==="y"?"top":"left",p=f==="y"?"bottom":"right",w=m+c[y],b=m-c[p];m=WN(w,m,b)}const g=a.fn({...e,[d]:h,[f]:m});return{...g,data:{x:g.x-t,y:g.y-r,enabled:{[d]:o,[f]:s}}}}}},aPe=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:o,middlewareData:s}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=lc(n,e),c={x:t,y:r},f=Uf(i),d=nI(f);let h=c[d],m=c[f];const g=lc(a,e),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const b=d==="y"?"height":"width",v=o.reference[d]-o.floating[b]+y.mainAxis,S=o.reference[d]+o.reference[b]-y.mainAxis;h<v?h=v:h>S&&(h=S)}if(u){var p,w;const b=d==="y"?"width":"height",v=["top","left"].includes(uc(i)),S=o.reference[f]-o.floating[b]+(v&&((p=s.offset)==null?void 0:p[f])||0)+(v?0:y.crossAxis),x=o.reference[f]+o.reference[b]+(v?0:((w=s.offset)==null?void 0:w[f])||0)-(v?y.crossAxis:0);m<S?m=S:m>x&&(m=x)}return{[d]:h,[f]:m}}}},lPe=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:i,rects:o,platform:s,elements:a}=e,{apply:l=()=>{},...u}=lc(n,e),c=await $y(e,u),f=uc(i),d=ev(i),h=Uf(i)==="y",{width:m,height:g}=o.floating;let y,p;f==="top"||f==="bottom"?(y=f,p=d===(await(s.isRTL==null?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(p=f,y=d==="end"?"top":"bottom");const w=g-c.top-c.bottom,b=m-c.left-c.right,v=zf(g-c[y],w),S=zf(m-c[p],b),x=!e.middlewareData.shift;let M=v,A=S;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(A=b),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(M=w),x&&!d){const C=Os(c.left,0),D=Os(c.right,0),R=Os(c.top,0),B=Os(c.bottom,0);h?A=m-2*(C!==0||D!==0?C+D:Os(c.left,c.right)):M=g-2*(R!==0||B!==0?R+B:Os(c.top,c.bottom))}await l({...e,availableWidth:A,availableHeight:M});const T=await s.getDimensions(a.floating);return m!==T.width||g!==T.height?{reset:{rects:!0}}:{}}}};function g2(){return typeof window<"u"}function tv(n){return yZ(n)?(n.nodeName||"").toLowerCase():"#document"}function Vs(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function uu(n){var e;return(e=(yZ(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function yZ(n){return g2()?n instanceof Node||n instanceof Vs(n).Node:!1}function il(n){return g2()?n instanceof Element||n instanceof Vs(n).Element:!1}function iu(n){return g2()?n instanceof HTMLElement||n instanceof Vs(n).HTMLElement:!1}function E9(n){return!g2()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Vs(n).ShadowRoot}function J1(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=ol(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(i)}function uPe(n){return["table","td","th"].includes(tv(n))}function v2(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function oI(n){const e=sI(),t=il(n)?ol(n):n;return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function cPe(n){let e=Vf(n);for(;iu(e)&&!bg(e);){if(oI(e))return e;if(v2(e))return null;e=Vf(e)}return null}function sI(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function bg(n){return["html","body","#document"].includes(tv(n))}function ol(n){return Vs(n).getComputedStyle(n)}function y2(n){return il(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Vf(n){if(tv(n)==="html")return n;const e=n.assignedSlot||n.parentNode||E9(n)&&n.host||uu(n);return E9(e)?e.host:e}function xZ(n){const e=Vf(n);return bg(e)?n.ownerDocument?n.ownerDocument.body:n.body:iu(e)&&J1(e)?e:xZ(e)}function Hy(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=xZ(n),o=i===((r=n.ownerDocument)==null?void 0:r.body),s=Vs(i);if(o){const a=GN(s);return e.concat(s,s.visualViewport||[],J1(i)?i:[],a&&t?Hy(a):[])}return e.concat(i,Hy(i,[],t))}function GN(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function bZ(n){const e=ol(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=iu(n),o=i?n.offsetWidth:t,s=i?n.offsetHeight:r,a=RE(t)!==o||RE(r)!==s;return a&&(t=o,r=s),{width:t,height:r,$:a}}function aI(n){return il(n)?n:n.contextElement}function Km(n){const e=aI(n);if(!iu(e))return Yl(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:o}=bZ(e);let s=(o?RE(t.width):t.width)/r,a=(o?RE(t.height):t.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const fPe=Yl(0);function wZ(n){const e=Vs(n);return!sI()||!e.visualViewport?fPe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function dPe(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Vs(n)?!1:e}function kh(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),o=aI(n);let s=Yl(1);e&&(r?il(r)&&(s=Km(r)):s=Km(n));const a=dPe(o,t,r)?wZ(o):Yl(0);let l=(i.left+a.x)/s.x,u=(i.top+a.y)/s.y,c=i.width/s.x,f=i.height/s.y;if(o){const d=Vs(o),h=r&&il(r)?Vs(r):r;let m=d,g=GN(m);for(;g&&r&&h!==m;){const y=Km(g),p=g.getBoundingClientRect(),w=ol(g),b=p.left+(g.clientLeft+parseFloat(w.paddingLeft))*y.x,v=p.top+(g.clientTop+parseFloat(w.paddingTop))*y.y;l*=y.x,u*=y.y,c*=y.x,f*=y.y,l+=b,u+=v,m=Vs(g),g=GN(m)}}return kE({width:c,height:f,x:l,y:u})}function lI(n,e){const t=y2(n).scrollLeft;return e?e.left+t:kh(uu(n)).left+t}function SZ(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),i=r.left+e.scrollLeft-(t?0:lI(n,r)),o=r.top+e.scrollTop;return{x:i,y:o}}function hPe(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const o=i==="fixed",s=uu(r),a=e?v2(e.floating):!1;if(r===s||a&&o)return t;let l={scrollLeft:0,scrollTop:0},u=Yl(1);const c=Yl(0),f=iu(r);if((f||!f&&!o)&&((tv(r)!=="body"||J1(s))&&(l=y2(r)),iu(r))){const h=kh(r);u=Km(r),c.x=h.x+r.clientLeft,c.y=h.y+r.clientTop}const d=s&&!f&&!o?SZ(s,l,!0):Yl(0);return{width:t.width*u.x,height:t.height*u.y,x:t.x*u.x-l.scrollLeft*u.x+c.x+d.x,y:t.y*u.y-l.scrollTop*u.y+c.y+d.y}}function pPe(n){return Array.from(n.getClientRects())}function mPe(n){const e=uu(n),t=y2(n),r=n.ownerDocument.body,i=Os(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Os(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-t.scrollLeft+lI(n);const a=-t.scrollTop;return ol(r).direction==="rtl"&&(s+=Os(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}function gPe(n,e){const t=Vs(n),r=uu(n),i=t.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;const u=sI();(!u||u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a,y:l}}function vPe(n,e){const t=kh(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,o=iu(n)?Km(n):Yl(1),s=n.clientWidth*o.x,a=n.clientHeight*o.y,l=i*o.x,u=r*o.y;return{width:s,height:a,x:l,y:u}}function M9(n,e,t){let r;if(e==="viewport")r=gPe(n,t);else if(e==="document")r=mPe(uu(n));else if(il(e))r=vPe(e,t);else{const i=wZ(n);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return kE(r)}function _Z(n,e){const t=Vf(n);return t===e||!il(t)||bg(t)?!1:ol(t).position==="fixed"||_Z(t,e)}function yPe(n,e){const t=e.get(n);if(t)return t;let r=Hy(n,[],!1).filter(a=>il(a)&&tv(a)!=="body"),i=null;const o=ol(n).position==="fixed";let s=o?Vf(n):n;for(;il(s)&&!bg(s);){const a=ol(s),l=oI(s);!l&&a.position==="fixed"&&(i=null),(o?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||J1(s)&&!l&&_Z(n,s))?r=r.filter(c=>c!==s):i=a,s=Vf(s)}return e.set(n,r),r}function xPe(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const s=[...t==="clippingAncestors"?v2(e)?[]:yPe(e,this._c):[].concat(t),r],a=s[0],l=s.reduce((u,c)=>{const f=M9(e,c,i);return u.top=Os(f.top,u.top),u.right=zf(f.right,u.right),u.bottom=zf(f.bottom,u.bottom),u.left=Os(f.left,u.left),u},M9(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function bPe(n){const{width:e,height:t}=bZ(n);return{width:e,height:t}}function wPe(n,e,t){const r=iu(e),i=uu(e),o=t==="fixed",s=kh(n,!0,o,e);let a={scrollLeft:0,scrollTop:0};const l=Yl(0);if(r||!r&&!o)if((tv(e)!=="body"||J1(i))&&(a=y2(e)),r){const d=kh(e,!0,o,e);l.x=d.x+e.clientLeft,l.y=d.y+e.clientTop}else i&&(l.x=lI(i));const u=i&&!r&&!o?SZ(i,a):Yl(0),c=s.left+a.scrollLeft-l.x-u.x,f=s.top+a.scrollTop-l.y-u.y;return{x:c,y:f,width:s.width,height:s.height}}function wT(n){return ol(n).position==="static"}function C9(n,e){if(!iu(n)||ol(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return uu(n)===t&&(t=t.ownerDocument.body),t}function EZ(n,e){const t=Vs(n);if(v2(n))return t;if(!iu(n)){let i=Vf(n);for(;i&&!bg(i);){if(il(i)&&!wT(i))return i;i=Vf(i)}return t}let r=C9(n,e);for(;r&&uPe(r)&&wT(r);)r=C9(r,e);return r&&bg(r)&&wT(r)&&!oI(r)?t:r||cPe(n)||t}const SPe=async function(n){const e=this.getOffsetParent||EZ,t=this.getDimensions,r=await t(n.floating);return{reference:wPe(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function _Pe(n){return ol(n).direction==="rtl"}const EPe={convertOffsetParentRelativeRectToViewportRelativeRect:hPe,getDocumentElement:uu,getClippingRect:xPe,getOffsetParent:EZ,getElementRects:SPe,getClientRects:pPe,getDimensions:bPe,getScale:Km,isElement:il,isRTL:_Pe};function MPe(n,e){let t=null,r;const i=uu(n);function o(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function s(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const{left:u,top:c,width:f,height:d}=n.getBoundingClientRect();if(a||e(),!f||!d)return;const h=lw(c),m=lw(i.clientWidth-(u+f)),g=lw(i.clientHeight-(c+d)),y=lw(u),w={rootMargin:-h+"px "+-m+"px "+-g+"px "+-y+"px",threshold:Os(0,zf(1,l))||1};let b=!0;function v(S){const x=S[0].intersectionRatio;if(x!==l){if(!b)return s();x?s(!1,x):r=setTimeout(()=>{s(!1,1e-7)},1e3)}b=!1}try{t=new IntersectionObserver(v,{...w,root:i.ownerDocument})}catch{t=new IntersectionObserver(v,w)}t.observe(n)}return s(!0),o}function MZ(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=aI(n),c=i||o?[...u?Hy(u):[],...Hy(e)]:[];c.forEach(p=>{i&&p.addEventListener("scroll",t,{passive:!0}),o&&p.addEventListener("resize",t)});const f=u&&a?MPe(u,t):null;let d=-1,h=null;s&&(h=new ResizeObserver(p=>{let[w]=p;w&&w.target===u&&h&&(h.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(e)})),t()}),u&&!l&&h.observe(u),h.observe(e));let m,g=l?kh(n):null;l&&y();function y(){const p=kh(n);g&&(p.x!==g.x||p.y!==g.y||p.width!==g.width||p.height!==g.height)&&t(),g=p,m=requestAnimationFrame(y)}return t(),()=>{var p;c.forEach(w=>{i&&w.removeEventListener("scroll",t),o&&w.removeEventListener("resize",t)}),f==null||f(),(p=h)==null||p.disconnect(),h=null,l&&cancelAnimationFrame(m)}}const CPe=oPe,APe=sPe,TPe=nPe,DPe=lPe,NPe=rPe,A9=tPe,PPe=aPe,RPe=(n,e,t)=>{const r=new Map,i={platform:EPe,...t},o={...i.platform,_c:r};return ePe(n,e,{...i,platform:o})};var s_=typeof document<"u"?z.useLayoutEffect:z.useEffect;function IE(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!IE(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const o=i[r];if(!(o==="_owner"&&n.$$typeof)&&!IE(n[o],e[o]))return!1}return!0}return n!==n&&e!==e}function CZ(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function T9(n,e){const t=CZ(n);return Math.round(e*t)/t}function ST(n){const e=z.useRef(n);return s_(()=>{e.current=n}),e}function OPe(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:s}={},transform:a=!0,whileElementsMounted:l,open:u}=n,[c,f]=z.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[d,h]=z.useState(r);IE(d,r)||h(r);const[m,g]=z.useState(null),[y,p]=z.useState(null),w=z.useCallback(V=>{V!==x.current&&(x.current=V,g(V))},[]),b=z.useCallback(V=>{V!==M.current&&(M.current=V,p(V))},[]),v=o||m,S=s||y,x=z.useRef(null),M=z.useRef(null),A=z.useRef(c),T=l!=null,C=ST(l),D=ST(i),R=ST(u),B=z.useCallback(()=>{if(!x.current||!M.current)return;const V={placement:e,strategy:t,middleware:d};D.current&&(V.platform=D.current),RPe(x.current,M.current,V).then(L=>{const X={...L,isPositioned:R.current!==!1};F.current&&!IE(A.current,X)&&(A.current=X,$1.flushSync(()=>{f(X)}))})},[d,e,t,D,R]);s_(()=>{u===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,f(V=>({...V,isPositioned:!1})))},[u]);const F=z.useRef(!1);s_(()=>(F.current=!0,()=>{F.current=!1}),[]),s_(()=>{if(v&&(x.current=v),S&&(M.current=S),v&&S){if(C.current)return C.current(v,S,B);B()}},[v,S,B,C,T]);const U=z.useMemo(()=>({reference:x,floating:M,setReference:w,setFloating:b}),[w,b]),N=z.useMemo(()=>({reference:v,floating:S}),[v,S]),I=z.useMemo(()=>{const V={position:t,left:0,top:0};if(!N.floating)return V;const L=T9(N.floating,c.x),X=T9(N.floating,c.y);return a?{...V,transform:"translate("+L+"px, "+X+"px)",...CZ(N.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:L,top:X}},[t,a,N.floating,c.x,c.y]);return z.useMemo(()=>({...c,update:B,refs:U,elements:N,floatingStyles:I}),[c,B,U,N,I])}const kPe=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?A9({element:r.current,padding:i}).fn(t):{}:r?A9({element:r,padding:i}).fn(t):{}}}},IPe=(n,e)=>({...CPe(n),options:[n,e]}),LPe=(n,e)=>({...APe(n),options:[n,e]}),FPe=(n,e)=>({...PPe(n),options:[n,e]}),BPe=(n,e)=>({...TPe(n),options:[n,e]}),zPe=(n,e)=>({...DPe(n),options:[n,e]}),UPe=(n,e)=>({...NPe(n),options:[n,e]}),VPe=(n,e)=>({...kPe(n),options:[n,e]});var $Pe="Arrow",AZ=z.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...o}=n;return Q.jsx(ad.svg,{...o,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:Q.jsx("polygon",{points:"0,0 30,0 15,10"})})});AZ.displayName=$Pe;var HPe=AZ;function WPe(n,e=[]){let t=[];function r(o,s){const a=z.createContext(s),l=t.length;t=[...t,s];function u(f){const{scope:d,children:h,...m}=f,g=(d==null?void 0:d[n][l])||a,y=z.useMemo(()=>m,Object.values(m));return Q.jsx(g.Provider,{value:y,children:h})}function c(f,d){const h=(d==null?void 0:d[n][l])||a,m=z.useContext(h);if(m)return m;if(s!==void 0)return s;throw new Error(`\`${f}\` must be used within \`${o}\``)}return u.displayName=o+"Provider",[u,c]}const i=()=>{const o=t.map(s=>z.createContext(s));return function(a){const l=(a==null?void 0:a[n])||o;return z.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return i.scopeName=n,[r,jPe(i,...e)]}function jPe(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const s=r.reduce((a,{useScope:l,scopeName:u})=>{const f=l(o)[`__scope${u}`];return{...a,...f}},{});return z.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return t.scopeName=e.scopeName,t}function GPe(n){const[e,t]=z.useState(void 0);return Oh(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let s,a;if("borderBoxSize"in o){const l=o.borderBoxSize,u=Array.isArray(l)?l[0]:l;s=u.inlineSize,a=u.blockSize}else s=n.offsetWidth,a=n.offsetHeight;t({width:s,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var uI="Popper",[TZ,DZ]=WPe(uI),[qPe,NZ]=TZ(uI),PZ=n=>{const{__scopePopper:e,children:t}=n,[r,i]=z.useState(null);return Q.jsx(qPe,{scope:e,anchor:r,onAnchorChange:i,children:t})};PZ.displayName=uI;var RZ="PopperAnchor",OZ=z.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,o=NZ(RZ,t),s=z.useRef(null),a=tp(e,s);return z.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||s.current)}),r?null:Q.jsx(ad.div,{...i,ref:a})});OZ.displayName=RZ;var cI="PopperContent",[XPe,YPe]=TZ(cI),kZ=z.forwardRef((n,e)=>{var ge,Se,xe,De,Ae,ie;const{__scopePopper:t,side:r="bottom",sideOffset:i=0,align:o="center",alignOffset:s=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:c=0,sticky:f="partial",hideWhenDetached:d=!1,updatePositionStrategy:h="optimized",onPlaced:m,...g}=n,y=NZ(cI,t),[p,w]=z.useState(null),b=tp(e,Re=>w(Re)),[v,S]=z.useState(null),x=GPe(v),M=(x==null?void 0:x.width)??0,A=(x==null?void 0:x.height)??0,T=r+(o!=="center"?"-"+o:""),C=typeof c=="number"?c:{top:0,right:0,bottom:0,left:0,...c},D=Array.isArray(u)?u:[u],R=D.length>0,B={padding:C,boundary:D.filter(ZPe),altBoundary:R},{refs:F,floatingStyles:U,placement:N,isPositioned:I,middlewareData:V}=OPe({strategy:"fixed",placement:T,whileElementsMounted:(...Re)=>MZ(...Re,{animationFrame:h==="always"}),elements:{reference:y.anchor},middleware:[IPe({mainAxis:i+A,alignmentAxis:s}),l&&LPe({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?FPe():void 0,...B}),l&&BPe({...B}),zPe({...B,apply:({elements:Re,rects:Pe,availableWidth:ee,availableHeight:oe})=>{const{width:Me,height:se}=Pe.reference,G=Re.floating.style;G.setProperty("--radix-popper-available-width",`${ee}px`),G.setProperty("--radix-popper-available-height",`${oe}px`),G.setProperty("--radix-popper-anchor-width",`${Me}px`),G.setProperty("--radix-popper-anchor-height",`${se}px`)}}),v&&VPe({element:v,padding:a}),JPe({arrowWidth:M,arrowHeight:A}),d&&UPe({strategy:"referenceHidden",...B})]}),[L,X]=FZ(N),Z=Qg(m);Oh(()=>{I&&(Z==null||Z())},[I,Z]);const te=(ge=V.arrow)==null?void 0:ge.x,Y=(Se=V.arrow)==null?void 0:Se.y,re=((xe=V.arrow)==null?void 0:xe.centerOffset)!==0,[fe,ue]=z.useState();return Oh(()=>{p&&ue(window.getComputedStyle(p).zIndex)},[p]),Q.jsx("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...U,transform:I?U.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:fe,"--radix-popper-transform-origin":[(De=V.transformOrigin)==null?void 0:De.x,(Ae=V.transformOrigin)==null?void 0:Ae.y].join(" "),...((ie=V.hide)==null?void 0:ie.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:Q.jsx(XPe,{scope:t,placedSide:L,onArrowChange:S,arrowX:te,arrowY:Y,shouldHideArrow:re,children:Q.jsx(ad.div,{"data-side":L,"data-align":X,...g,ref:b,style:{...g.style,animation:I?void 0:"none"}})})})});kZ.displayName=cI;var IZ="PopperArrow",KPe={top:"bottom",right:"left",bottom:"top",left:"right"},LZ=z.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,o=YPe(IZ,r),s=KPe[o.placedSide];return Q.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:Q.jsx(HPe,{...i,ref:t,style:{...i.style,display:"block"}})})});LZ.displayName=IZ;function ZPe(n){return n!==null}var JPe=n=>({name:"transformOrigin",options:n,fn(e){var y,p,w;const{placement:t,rects:r,middlewareData:i}=e,s=((y=i.arrow)==null?void 0:y.centerOffset)!==0,a=s?0:n.arrowWidth,l=s?0:n.arrowHeight,[u,c]=FZ(t),f={start:"0%",center:"50%",end:"100%"}[c],d=(((p=i.arrow)==null?void 0:p.x)??0)+a/2,h=(((w=i.arrow)==null?void 0:w.y)??0)+l/2;let m="",g="";return u==="bottom"?(m=s?f:`${d}px`,g=`${-l}px`):u==="top"?(m=s?f:`${d}px`,g=`${r.floating.height+l}px`):u==="right"?(m=`${-l}px`,g=s?f:`${h}px`):u==="left"&&(m=`${r.floating.width+l}px`,g=s?f:`${h}px`),{data:{x:m,y:g}}}});function FZ(n){const[e,t="center"]=n.split("-");return[e,t]}var QPe=PZ,eRe=OZ,tRe=kZ,nRe=LZ;function rRe(n,e){return z.useReducer((t,r)=>e[t][r]??t,n)}var BZ=n=>{const{present:e,children:t}=n,r=iRe(e),i=typeof t=="function"?t({present:r.isPresent}):z.Children.only(t),o=tp(r.ref,oRe(i));return typeof t=="function"||r.isPresent?z.cloneElement(i,{ref:o}):null};BZ.displayName="Presence";function iRe(n){const[e,t]=z.useState(),r=z.useRef({}),i=z.useRef(n),o=z.useRef("none"),s=n?"mounted":"unmounted",[a,l]=rRe(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return z.useEffect(()=>{const u=uw(r.current);o.current=a==="mounted"?u:"none"},[a]),Oh(()=>{const u=r.current,c=i.current;if(c!==n){const d=o.current,h=uw(u);n?l("MOUNT"):h==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(c&&d!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,l]),Oh(()=>{if(e){let u;const c=e.ownerDocument.defaultView??window,f=h=>{const g=uw(r.current).includes(h.animationName);if(h.target===e&&g&&(l("ANIMATION_END"),!i.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",u=c.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},d=h=>{h.target===e&&(o.current=uw(r.current))};return e.addEventListener("animationstart",d),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{c.clearTimeout(u),e.removeEventListener("animationstart",d),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:z.useCallback(u=>{u&&(r.current=getComputedStyle(u)),t(u)},[])}}function uw(n){return(n==null?void 0:n.animationName)||"none"}function oRe(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function sRe({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,i]=aRe({defaultProp:e,onChange:t}),o=n!==void 0,s=o?n:r,a=Qg(t),l=z.useCallback(u=>{if(o){const f=typeof u=="function"?u(n):u;f!==n&&a(f)}else i(u)},[o,n,i,a]);return[s,l]}function aRe({defaultProp:n,onChange:e}){const t=z.useState(n),[r]=t,i=z.useRef(r),o=Qg(e);return z.useEffect(()=>{i.current!==r&&(o(r),i.current=r)},[r,i,o]),t}var lRe="VisuallyHidden",zZ=z.forwardRef((n,e)=>Q.jsx(ad.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));zZ.displayName=lRe;var uRe=zZ,[x2,brt]=ONe("Tooltip",[DZ]),b2=DZ(),cRe="TooltipProvider",qN="tooltip.open",[wrt,fI]=x2(cRe),w2="Tooltip",[fRe,S2]=x2(w2),UZ=n=>{const{__scopeTooltip:e,children:t,open:r,defaultOpen:i=!1,onOpenChange:o,disableHoverableContent:s,delayDuration:a}=n,l=fI(w2,n.__scopeTooltip),u=b2(e),[c,f]=z.useState(null),d=jNe(),h=z.useRef(0),m=s??l.disableHoverableContent,g=a??l.delayDuration,y=z.useRef(!1),[p=!1,w]=sRe({prop:r,defaultProp:i,onChange:M=>{M?(l.onOpen(),document.dispatchEvent(new CustomEvent(qN))):l.onClose(),o==null||o(M)}}),b=z.useMemo(()=>p?y.current?"delayed-open":"instant-open":"closed",[p]),v=z.useCallback(()=>{window.clearTimeout(h.current),h.current=0,y.current=!1,w(!0)},[w]),S=z.useCallback(()=>{window.clearTimeout(h.current),h.current=0,w(!1)},[w]),x=z.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{y.current=!0,w(!0),h.current=0},g)},[g,w]);return z.useEffect(()=>()=>{h.current&&(window.clearTimeout(h.current),h.current=0)},[]),Q.jsx(QPe,{...u,children:Q.jsx(fRe,{scope:e,contentId:d,open:p,stateAttribute:b,trigger:c,onTriggerChange:f,onTriggerEnter:z.useCallback(()=>{l.isOpenDelayed?x():v()},[l.isOpenDelayed,x,v]),onTriggerLeave:z.useCallback(()=>{m?S():(window.clearTimeout(h.current),h.current=0)},[S,m]),onOpen:v,onClose:S,disableHoverableContent:m,children:t})})};UZ.displayName=w2;var XN="TooltipTrigger",VZ=z.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=S2(XN,t),o=fI(XN,t),s=b2(t),a=z.useRef(null),l=tp(e,a,i.onTriggerChange),u=z.useRef(!1),c=z.useRef(!1),f=z.useCallback(()=>u.current=!1,[]);return z.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),Q.jsx(eRe,{asChild:!0,...s,children:Q.jsx(ad.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:Fu(n.onPointerMove,d=>{d.pointerType!=="touch"&&!c.current&&!o.isPointerInTransitRef.current&&(i.onTriggerEnter(),c.current=!0)}),onPointerLeave:Fu(n.onPointerLeave,()=>{i.onTriggerLeave(),c.current=!1}),onPointerDown:Fu(n.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Fu(n.onFocus,()=>{u.current||i.onOpen()}),onBlur:Fu(n.onBlur,i.onClose),onClick:Fu(n.onClick,i.onClose)})})});VZ.displayName=XN;var dRe="TooltipPortal",[Srt,hRe]=x2(dRe,{forceMount:void 0}),wg="TooltipContent",$Z=z.forwardRef((n,e)=>{const t=hRe(wg,n.__scopeTooltip),{forceMount:r=t.forceMount,side:i="top",...o}=n,s=S2(wg,n.__scopeTooltip);return Q.jsx(BZ,{present:r||s.open,children:s.disableHoverableContent?Q.jsx(HZ,{side:i,...o,ref:e}):Q.jsx(pRe,{side:i,...o,ref:e})})}),pRe=z.forwardRef((n,e)=>{const t=S2(wg,n.__scopeTooltip),r=fI(wg,n.__scopeTooltip),i=z.useRef(null),o=tp(e,i),[s,a]=z.useState(null),{trigger:l,onClose:u}=t,c=i.current,{onPointerInTransitChange:f}=r,d=z.useCallback(()=>{a(null),f(!1)},[f]),h=z.useCallback((m,g)=>{const y=m.currentTarget,p={x:m.clientX,y:m.clientY},w=vRe(p,y.getBoundingClientRect()),b=yRe(p,w),v=xRe(g.getBoundingClientRect()),S=wRe([...b,...v]);a(S),f(!0)},[f]);return z.useEffect(()=>()=>d(),[d]),z.useEffect(()=>{if(l&&c){const m=y=>h(y,c),g=y=>h(y,l);return l.addEventListener("pointerleave",m),c.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",m),c.removeEventListener("pointerleave",g)}}},[l,c,h,d]),z.useEffect(()=>{if(s){const m=g=>{const y=g.target,p={x:g.clientX,y:g.clientY},w=(l==null?void 0:l.contains(y))||(c==null?void 0:c.contains(y)),b=!bRe(p,s);w?d():b&&(d(),u())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[l,c,s,u,d]),Q.jsx(HZ,{...n,ref:o})}),[mRe,gRe]=x2(w2,{isInside:!1}),HZ=z.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":i,onEscapeKeyDown:o,onPointerDownOutside:s,...a}=n,l=S2(wg,t),u=b2(t),{onClose:c}=l;return z.useEffect(()=>(document.addEventListener(qN,c),()=>document.removeEventListener(qN,c)),[c]),z.useEffect(()=>{if(l.trigger){const f=d=>{const h=d.target;h!=null&&h.contains(l.trigger)&&c()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,c]),Q.jsx(mZ,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:s,onFocusOutside:f=>f.preventDefault(),onDismiss:c,children:Q.jsxs(tRe,{"data-state":l.stateAttribute,...u,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[Q.jsx(eZ,{children:r}),Q.jsx(mRe,{scope:t,isInside:!0,children:Q.jsx(uRe,{id:l.contentId,role:"tooltip",children:i||r})})]})})});$Z.displayName=wg;var WZ="TooltipArrow",jZ=z.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=b2(t);return gRe(WZ,t).isInside?null:Q.jsx(nRe,{...i,...r,ref:e})});jZ.displayName=WZ;function vRe(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),o=Math.abs(e.left-n.x);switch(Math.min(t,r,i,o)){case o:return"left";case i:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function yRe(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function xRe(n){const{top:e,right:t,bottom:r,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:r},{x:i,y:r}]}function bRe(n,e){const{x:t,y:r}=n;let i=!1;for(let o=0,s=e.length-1;o<e.length;s=o++){const a=e[o].x,l=e[o].y,u=e[s].x,c=e[s].y;l>r!=c>r&&t<(u-a)*(r-l)/(c-l)+a&&(i=!i)}return i}function wRe(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),SRe(e)}function SRe(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const i=n[r];for(;e.length>=2;){const o=e[e.length-1],s=e[e.length-2];if((o.x-s.x)*(i.y-s.y)>=(o.y-s.y)*(i.x-s.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const i=n[r];for(;t.length>=2;){const o=t[t.length-1],s=t[t.length-2];if((o.x-s.x)*(i.y-s.y)>=(o.y-s.y)*(i.x-s.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var _Re=UZ,ERe=VZ,MRe=$Z,CRe=jZ;function ARe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Qn(n,e){if(n==null)return{};var t=ARe(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}let Ar;(function(n){n[n.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",n[n.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",n[n.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",n[n.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",n[n.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",n[n.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",n[n.THEME_ERROR=6]="THEME_ERROR",n[n.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",n[n.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",n[n.EMPTY_KEY=9]="EMPTY_KEY"})(Ar||(Ar={}));const TRe={[Ar.UNSUPPORTED_INPUT]:(n,e)=>[`An input with type \`${n}\` input was found at path \`${e}\` but it's not supported yet.`],[Ar.NO_COMPONENT_FOR_TYPE]:(n,e)=>[`Type \`${n}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[Ar.UNKNOWN_INPUT]:(n,e)=>[`input at path \`${n}\` is not recognized.`,e],[Ar.DUPLICATE_KEYS]:(n,e,t)=>[`Key \`${n}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[Ar.ALREADY_REGISTERED_TYPE]:n=>[`Type ${n} has already been registered. You can't register a component with the same type.`],[Ar.CLIPBOARD_ERROR]:n=>["Error copying the value",n],[Ar.THEME_ERROR]:(n,e)=>[`Error accessing the theme \`${n}.${e}\` value.`],[Ar.PATH_DOESNT_EXIST]:n=>[`Error getting the value at path \`${n}\`. There is probably an error in your \`render\` function.`],[Ar.PATH_DOESNT_EXIST]:n=>[`Error accessing the value at path \`${n}\``],[Ar.INPUT_TYPE_OVERRIDE]:(n,e,t)=>[`Input at path \`${n}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[Ar.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function GZ(n,e,...t){const[r,...i]=TRe[e](...t);console[n]("LEVA: "+r,...i)}const Bu=GZ.bind(null,"warn"),DRe=GZ.bind(null,"log"),NRe=["value"],PRe=["schema"],RRe=["value"],qZ=[],Ih={};function D9(n){let{value:e}=n,t=Qn(n,NRe);for(let r of qZ){const i=r(e,t);if(i)return i}}function wc(n,e){let{schema:t}=e,r=Qn(e,PRe);if(n in Ih){Bu(Ar.ALREADY_REGISTERED_TYPE,n);return}qZ.push((i,o)=>t(i,o)&&n),Ih[n]=r}function _T(n,e,t,r){const{normalize:i}=Ih[n];if(i)return i(e,t,r);if(typeof e!="object"||!("value"in e))return{value:e};const{value:o}=e,s=Qn(e,RRe);return{value:o,settings:s}}function ORe(n,e,t,r,i,o){const{sanitize:s}=Ih[n];return s?s(e,t,r,i,o):e}function N9(n,e,t){const{format:r}=Ih[n];return r?r(e,t):e}function kRe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function P9(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Xt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?P9(Object(t),!0).forEach(function(r){kRe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):P9(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const $f=(n,e,t)=>n>t?t:n<e?e:n,IRe=n=>{if(n===""||typeof n=="number")return n;try{const e=Wc(n);if(!isNaN(e))return e}catch{}return parseFloat(n)},LRe=Math.log(10);function R9(n){let e=Math.abs(+String(n).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/LRe)+1,r=Math.floor(Math.log10(Math.abs(n))),i=Math.pow(10,r-t);return Math.max(i,.001)}const LE=(n,e,t)=>t===e?0:($f(n,e,t)-e)/(t-e),FE=(n,e,t)=>n*(t-e)+e,FRe=()=>"_"+Math.random().toString(36).substr(2,9),O9=/\(([0-9+\-*/^ .]+)\)/,k9=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,I9=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,L9=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,F9=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,B9=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function Wc(n){if(isNaN(Number(n)))if(O9.test(n)){const e=n.replace(O9,(t,r)=>String(Wc(r)));return Wc(e)}else if(k9.test(n)){const e=n.replace(k9,(t,r,i)=>String(Math.pow(Number(r),Number(i))));return Wc(e)}else if(I9.test(n)){const e=n.replace(I9,(t,r,i)=>String(Number(r)*Number(i)));return Wc(e)}else if(L9.test(n)){const e=n.replace(L9,(t,r,i)=>{if(i!=0)return String(Number(r)/Number(i));throw new Error("Division by zero")});return Wc(e)}else if(F9.test(n)){const e=n.replace(F9,(t,r,i)=>String(Number(r)+Number(i)));return Wc(e)}else if(B9.test(n)){const e=n.replace(B9,(t,r,i)=>String(Number(r)-Number(i)));return Wc(e)}else return Number(n);return Number(n)}function BRe(n,e){return e.reduce((t,r)=>(n&&n.hasOwnProperty(r)&&(t[r]=n[r]),t),{})}function zRe(n,e){const t=Xt({},n);return e.forEach(r=>r in n&&delete t[r]),t}function URe(n,e){return n.reduce((t,r,i)=>Object.assign(t,{[e[i]]:r}),{})}function XZ(n){return Object.prototype.toString.call(n)==="[object Object]"}const VRe=n=>XZ(n)&&Object.keys(n).length===0;let _a;(function(n){n.BUTTON="BUTTON",n.BUTTON_GROUP="BUTTON_GROUP",n.MONITOR="MONITOR",n.FOLDER="FOLDER"})(_a||(_a={}));let Da;(function(n){n.SELECT="SELECT",n.IMAGE="IMAGE",n.NUMBER="NUMBER",n.COLOR="COLOR",n.STRING="STRING",n.BOOLEAN="BOOLEAN",n.INTERVAL="INTERVAL",n.VECTOR3D="VECTOR3D",n.VECTOR2D="VECTOR2D"})(Da||(Da={}));const $Re=["type","__customInput"],HRe=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],WRe=["type"];function YZ(n,e,t={},r){var i,o;if(typeof n!="object"||Array.isArray(n))return{type:r,input:n,options:Xt({key:e,label:e,optional:!1,disabled:!1,order:0},t)};if("__customInput"in n){const{type:S,__customInput:x}=n,M=Qn(n,$Re);return YZ(x,e,M,S)}const{render:s,label:a,optional:l,order:u=0,disabled:c,hint:f,onChange:d,onEditStart:h,onEditEnd:m,transient:g}=n,y=Qn(n,HRe),p=Xt({render:s,key:e,label:a??e,hint:f,transient:g??!!d,onEditStart:h,onEditEnd:m,disabled:c,optional:l,order:u},t);let{type:w}=y,b=Qn(y,WRe);if(w=r??w,w in _a)return{type:w,input:b,options:p};let v;return r&&XZ(b)&&"value"in b?v=b.value:v=VRe(b)?void 0:b,{type:w,input:v,options:Xt(Xt({},p),{},{onChange:d,optional:(i=p.optional)!==null&&i!==void 0?i:!1,disabled:(o=p.disabled)!==null&&o!==void 0?o:!1})}}function jRe(n,e,t,r){const i=YZ(n,e),{type:o,input:s,options:a}=i;if(o)return o in _a?i:{type:o,input:_T(o,s,t,r),options:a};let l=D9(s);return l?{type:l,input:_T(l,s,t,r),options:a}:(l=D9({value:s}),l?{type:l,input:_T(l,{value:s},t,r),options:a}:!1)}function z9(n,e,t,r,i){const{value:o,type:s,settings:a}=n;n.value=KZ({type:s,value:o,settings:a},e,t,r),n.fromPanel=i}const GRe=function(e,t,r){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=r};function KZ({type:n,value:e,settings:t},r,i,o){const s=n!=="SELECT"&&typeof r=="function"?r(e):r;let a;try{a=ORe(n,s,t,e,i,o)}catch(l){throw new GRe(`The value \`${r}\` did not result in a correct value.`,e,l)}return Uy(a,e)?e:a}const ZZ=(n,e,t=!1)=>{let r=0;return function(){const i=arguments,o=t&&!r,s=()=>n.apply(this,i);window.clearTimeout(r),r=window.setTimeout(s,e),o&&s()}},JZ=n=>n.shiftKey?5:n.altKey?1/5:1;function qRe(n,e){const t=console.error;console.error=()=>{},oX.render(n,e),console.error=t}const XRe=["value"],YRe=["min","max"],KRe=n=>{if(typeof n=="number")return!0;if(typeof n=="string"){const e=parseFloat(n);return isNaN(e)?!1:n.substring((""+e).length).trim().length<4}return!1},QZ=(n,{min:e=-1/0,max:t=1/0,suffix:r})=>{const i=parseFloat(n);if(n===""||isNaN(i))throw Error("Invalid number");const o=$f(i,e,t);return r?o+r:o},ZRe=(n,{pad:e=0,suffix:t})=>{const r=parseFloat(n).toFixed(e);return t?r+t:r},eJ=n=>{let{value:e}=n,t=Qn(n,XRe);const{min:r=-1/0,max:i=1/0}=t,o=Qn(t,YRe);let s=parseFloat(e);const a=typeof e=="string"?e.substring((""+s).length):void 0;s=$f(s,r,i);let l=t.step;l||(Number.isFinite(r)?Number.isFinite(i)?l=+(Math.abs(i-r)/100).toPrecision(1):l=+(Math.abs(s-r)/100).toPrecision(1):Number.isFinite(i)&&(l=+(Math.abs(i-s)/100).toPrecision(1)));const u=l?R9(l)*10:R9(s);l=l||u/10;const c=Math.round($f(Math.log10(1/u),0,2));return{value:a?s+a:s,settings:Xt({initialValue:s,step:l,pad:c,min:r,max:i,suffix:a},o)}},tJ=(n,{step:e,initialValue:t})=>{const r=Math.round((n-t)/e);return t+r*e};var nJ=Object.freeze({__proto__:null,schema:KRe,sanitize:QZ,format:ZRe,normalize:eJ,sanitizeStep:tJ});function Ir(){return Ir=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ir.apply(this,arguments)}const rJ=z.createContext({});function Eo(){return z.useContext(rJ)}const dI=z.createContext(null),iJ=z.createContext(null),oJ=z.createContext(null);function nv(){return z.useContext(iJ)}function JRe(){return z.useContext(oJ)}const sJ=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function cw(n,e){const[t,r]=n.split(" "),i={};return t!=="none"&&(i.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),r&&(i.backgroundColor=r),i}const Zv={$inputStyle:()=>n=>cw(n,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>n=>cw(n,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>n=>cw(n,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>n=>cw(n,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:qt,css:_rt,createTheme:QRe,globalCss:eOe,keyframes:Ert}=zDe({prefix:"leva",theme:sJ(),utils:Xt(Xt({},Zv),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:n=>({"&:focus":Zv.$focusStyle()(n)}),$focusWithin:n=>({"&:focus-within":Zv.$focusStyle()(n)}),$hover:n=>({"&:hover":Zv.$hoverStyle()(n)}),$active:n=>({"&:active":Zv.$activeStyle()(n)})})}),tOe=eOe({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function nOe(n){const e=sJ();if(!n)return{theme:e,className:""};Object.keys(n).forEach(r=>{Object.assign(e[r],n[r])});const t=QRe(e);return{theme:e,className:t.className}}function Yu(n,e){const{theme:t}=z.useContext(dI);if(!(n in t)||!(e in t[n]))return Bu(Ar.THEME_ERROR,n,e),"";let r=e;for(;;){let i=t[n][r];if(typeof i=="string"&&i.charAt(0)==="$")r=i.substr(1);else return i}}const aJ=qt("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),lJ=qt("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${aJ}`]:{paddingLeft:0}}),rOe=qt(lJ,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),iOe=qt("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),oOe=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],sOe=["onUpdate"];function hI(n){let{innerLabel:e,value:t,onUpdate:r,onChange:i,onKeyDown:o,type:s,id:a,inputType:l="text",rows:u=0}=n,c=Qn(n,oOe);const{id:f,emitOnEditStart:d,emitOnEditEnd:h,disabled:m}=Eo(),g=a||f,y=z.useRef(null),p=u>0,w=p?"textarea":"input",b=z.useCallback(x=>M=>{const A=M.currentTarget.value;x(A)},[]);Te.useEffect(()=>{const x=y.current,M=b(A=>{r(A),h()});return x==null||x.addEventListener("blur",M),()=>x==null?void 0:x.removeEventListener("blur",M)},[b,r,h]);const v=z.useCallback(x=>{x.key==="Enter"&&b(r)(x)},[b,r]),S=Object.assign({as:w},p?{rows:u}:{},c);return Te.createElement(iOe,{textArea:p},e&&typeof e=="string"?Te.createElement(lJ,null,e):e,Te.createElement(aJ,Ir({levaType:s,ref:y,id:g,type:l,autoComplete:"off",spellCheck:"false",value:t,onChange:b(i),onFocus:()=>d(),onKeyPress:v,onKeyDown:o,disabled:m},S)))}function aOe(n){let{onUpdate:e}=n,t=Qn(n,sOe);const r=z.useCallback(o=>e(IRe(o)),[e]),i=z.useCallback(o=>{const s=o.key==="ArrowUp"?1:o.key==="ArrowDown"?-1:0;if(s){o.preventDefault();const a=o.altKey?.1:o.shiftKey?10:1;e(l=>parseFloat(l)+s*a)}},[e]);return Te.createElement(hI,Ir({},t,{onUpdate:r,onKeyDown:i,type:"number"}))}const BE=qt("div",{}),YN=qt("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),lOe=qt("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${YN}::after`]:{opacity:.6},[`${BE}:hover > & + ${YN}::after`]:{opacity:.6},[`${BE}:hover > & > svg`]:{opacity:1}}),uJ=qt("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${BE}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),cJ=qt("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${uJ} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),fJ=qt(cJ,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),uOe=qt("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),cOe=qt("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),KN=qt("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),fOe=qt("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${KN}`]:{pointerEvents:"auto"}}}}}),dJ=qt("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),dOe=qt("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),hOe=qt(CRe,{fill:"$toolTipBackground"});function pI({children:n}){const{className:e}=z.useContext(dI);return Te.createElement(aDe,{className:e},n)}const pOe=["align"];function mOe(){const{id:n,disable:e,disabled:t}=Eo();return Te.createElement(Te.Fragment,null,Te.createElement(cOe,{id:n+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),Te.createElement("label",{htmlFor:n+"__disable"}))}function gOe(n){const{id:e,optional:t,hint:r}=Eo(),i=n.htmlFor||(e?{htmlFor:e}:null),o=!r&&typeof n.children=="string"?{title:n.children}:null;return Te.createElement(Te.Fragment,null,t&&Te.createElement(mOe,null),r!==void 0?Te.createElement(_Re,null,Te.createElement(ERe,{asChild:!0},Te.createElement(KN,Ir({},i,n))),Te.createElement(MRe,{side:"top",sideOffset:2},Te.createElement(dOe,null,r,Te.createElement(hOe,null)))):Te.createElement(KN,Ir({},i,o,n)))}function dl(n){let{align:e}=n,t=Qn(n,pOe);const{value:r,label:i,key:o,disabled:s}=Eo(),{hideCopyButton:a}=JRe(),l=!a&&o!==void 0,[u,c]=z.useState(!1),f=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[o]:r??""})),c(!0)}catch{Bu(Ar.CLIPBOARD_ERROR,{[o]:r})}};return Te.createElement(uOe,{align:e,onPointerLeave:()=>c(!1)},Te.createElement(gOe,t),l&&!s&&Te.createElement("div",{title:`Click to copy ${typeof i=="string"?i:o} value`},u?Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Te.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),Te.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):Te.createElement("svg",{onClick:f,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Te.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),Te.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const vOe=["toggled"],yOe=qt("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function mI(n){let{toggled:e}=n,t=Qn(n,vOe);return Te.createElement(yOe,Ir({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},t),Te.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const xOe=["input"];function La(n){let{input:e}=n,t=Qn(n,xOe);return e?Te.createElement(fJ,t):Te.createElement(cJ,t)}function hJ({value:n,type:e,settings:t,setValue:r}){const[i,o]=z.useState(N9(e,n,t)),s=z.useRef(n),a=z.useRef(t);a.current=t;const l=z.useCallback(c=>o(N9(e,c,a.current)),[e]),u=z.useCallback(c=>{try{r(c)}catch(f){const{type:d,previousValue:h}=f;if(d!=="LEVA_ERROR")throw f;l(h)}},[l,r]);return z.useEffect(()=>{Uy(n,s.current)||l(n),s.current=n},[n,l]),{displayValue:i,onChange:o,onUpdate:u}}function Q1(n,e){const{emitOnEditStart:t,emitOnEditEnd:r}=Eo();return RNe(i=>{i.first&&(document.body.classList.add("leva__panel__dragged"),t==null||t());const o=n(i);return i.last&&(document.body.classList.remove("leva__panel__dragged"),r==null||r()),o},e)}function bOe(n){const e=z.useRef(null),t=z.useRef(null),r=z.useRef(!1);return z.useEffect(()=>{const i=ZZ(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,n(e.current,t.current)},250);return window.addEventListener("resize",i),r.current||(i(),r.current=!0),()=>window.removeEventListener("resize",i)},[n]),z.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function pJ(){const n=z.useRef(null),e=z.useRef({x:0,y:0}),t=z.useCallback(r=>{Object.assign(e.current,r),n.current&&(n.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[n,t]}const wOe=["__refCount"],ET=(n,e)=>{if(!n[e])return null;const t=n[e];return Qn(t,wOe)};function SOe(n){const e=nv(),[t,r]=z.useState(ET(e.getData(),n)),i=z.useCallback(u=>e.setValueAtPath(n,u,!0),[n,e]),o=z.useCallback(u=>e.setSettingsAtPath(n,u),[n,e]),s=z.useCallback(u=>e.disableInputAtPath(n,u),[n,e]),a=z.useCallback(()=>e.emitOnEditStart(n),[n,e]),l=z.useCallback(()=>e.emitOnEditEnd(n),[n,e]);return z.useEffect(()=>{r(ET(e.getData(),n));const u=e.useStore.subscribe(c=>ET(c.data,n),r,{equalityFn:h2});return()=>u()},[e,n]),[t,{set:i,setSettings:o,disable:s,storeId:e.storeId,emitOnEditStart:a,emitOnEditEnd:l}]}const _Oe=qt("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),mJ=qt("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),ZN=qt("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),gJ=qt("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),vJ=qt("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function EOe({value:n,min:e,max:t,onDrag:r,step:i,initialValue:o}){const s=z.useRef(null),a=z.useRef(null),l=z.useRef(0),u=Yu("sizes","scrubberWidth"),c=Q1(({event:d,first:h,xy:[m],movement:[g],memo:y})=>{if(h){const{width:w,left:b}=s.current.getBoundingClientRect();l.current=w-parseFloat(u),y=(d==null?void 0:d.target)===a.current?n:FE((m-b)/w,e,t)}const p=y+FE(g/l.current,0,t-e);return r(tJ(p,{step:i,initialValue:o})),y}),f=LE(n,e,t);return Te.createElement(gJ,Ir({ref:s},c()),Te.createElement(mJ,null,Te.createElement(vJ,{style:{left:0,right:`${(1-f)*100}%`}})),Te.createElement(ZN,{ref:a,style:{left:`calc(${f} * (100% - ${u}))`}}))}const MOe=Te.memo(({label:n,onUpdate:e,step:t,innerLabelTrim:r})=>{const[i,o]=z.useState(!1),s=Q1(({active:a,delta:[l],event:u,memo:c=0})=>(o(a),c+=l/2,Math.abs(c)>=1&&(e(f=>parseFloat(f)+Math.floor(c)*t*JZ(u)),c=0),c));return Te.createElement(rOe,Ir({dragging:i,title:n.length>1?n:""},s()),n.slice(0,r))});function yJ({label:n,id:e,displayValue:t,onUpdate:r,onChange:i,settings:o,innerLabelTrim:s=1}){const a=s>0&&Te.createElement(MOe,{label:n,step:o.step,onUpdate:r,innerLabelTrim:s});return Te.createElement(aOe,{id:e,value:String(t),onUpdate:r,onChange:i,innerLabel:a})}function COe(){const n=Eo(),{label:e,value:t,onUpdate:r,settings:i,id:o}=n,{min:s,max:a}=i,l=a!==1/0&&s!==-1/0;return Te.createElement(La,{input:!0},Te.createElement(dl,null,e),Te.createElement(_Oe,{hasRange:l},l&&Te.createElement(EOe,Ir({value:parseFloat(t),onDrag:r},i)),Te.createElement(yJ,Ir({},n,{id:o,label:"value",innerLabelTrim:l?0:1}))))}const{sanitizeStep:AOe}=nJ,TOe=Qn(nJ,["sanitizeStep"]);var DOe=Xt({component:COe},TOe);const NOe=(n,e)=>cs().schema({options:cs().passesAnyOf(cs().object(),cs().array())}).test(e),POe=(n,{values:e})=>{if(e.indexOf(n)<0)throw Error("Selected value doesn't match Select options");return n},ROe=(n,{values:e})=>e.indexOf(n),OOe=n=>{let{value:e,options:t}=n,r,i;return Array.isArray(t)?(i=t,r=t.map(o=>String(o))):(i=Object.values(t),r=Object.keys(t)),"value"in n?i.includes(e)||(r.unshift(String(e)),i.unshift(e)):e=i[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:r,values:i}}};var kOe=Object.freeze({__proto__:null,schema:NOe,sanitize:POe,format:ROe,normalize:OOe});const IOe=qt("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),JN=qt("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),LOe=qt("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${JN}:focus + &`]:{$focusStyle:""},[`${JN}:hover + &`]:{$hoverStyle:""}});function FOe({displayValue:n,value:e,onUpdate:t,id:r,settings:i,disabled:o}){const{keys:s,values:a}=i,l=z.useRef();return e===a[n]&&(l.current=s[n]),Te.createElement(IOe,null,Te.createElement(JN,{id:r,value:n,onChange:u=>t(a[Number(u.currentTarget.value)]),disabled:o},s.map((u,c)=>Te.createElement("option",{key:u,value:c},u))),Te.createElement(LOe,null,l.current),Te.createElement(mI,{toggled:!0}))}function BOe(){const{label:n,value:e,displayValue:t,onUpdate:r,id:i,disabled:o,settings:s}=Eo();return Te.createElement(La,{input:!0},Te.createElement(dl,null,n),Te.createElement(FOe,{id:i,value:e,displayValue:t,onUpdate:r,settings:s,disabled:o}))}var zOe=Xt({component:BOe},kOe);const UOe=n=>cs().string().test(n),VOe=n=>{if(typeof n!="string")throw Error("Invalid string");return n},$Oe=({value:n,editable:e=!0,rows:t=!1})=>({value:n,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}});var HOe=Object.freeze({__proto__:null,schema:UOe,sanitize:VOe,normalize:$Oe});const WOe=["displayValue","onUpdate","onChange","editable"],jOe=qt("div",{whiteSpace:"pre-wrap"});function GOe(n){let{displayValue:e,onUpdate:t,onChange:r,editable:i=!0}=n,o=Qn(n,WOe);return i?Te.createElement(hI,Ir({value:e,onUpdate:t,onChange:r},o)):Te.createElement(jOe,null,e)}function qOe(){const{label:n,settings:e,displayValue:t,onUpdate:r,onChange:i}=Eo();return Te.createElement(La,{input:!0},Te.createElement(dl,null,n),Te.createElement(GOe,Ir({displayValue:t,onUpdate:r,onChange:i},e)))}var XOe=Xt({component:qOe},HOe);const YOe=n=>cs().boolean().test(n),KOe=n=>{if(typeof n!="boolean")throw Error("Invalid boolean");return n};var ZOe=Object.freeze({__proto__:null,schema:YOe,sanitize:KOe});const JOe=qt("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function QOe({value:n,onUpdate:e,id:t,disabled:r}){return Te.createElement(JOe,null,Te.createElement("input",{id:t,type:"checkbox",checked:n,onChange:i=>e(i.currentTarget.checked),disabled:r}),Te.createElement("label",{htmlFor:t},Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Te.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function eke(){const{label:n,value:e,onUpdate:t,disabled:r,id:i}=Eo();return Te.createElement(La,{input:!0},Te.createElement(dl,null,n),Te.createElement(QOe,{value:e,onUpdate:t,id:i,disabled:r}))}var tke=Xt({component:eke},ZOe);const nke=["locked"];function rke({value:n,id:e,valueKey:t,settings:r,onUpdate:i,innerLabelTrim:o}){const s=z.useRef(n[t]);s.current=n[t];const a=z.useCallback(u=>i({[t]:KZ({type:"NUMBER",value:s.current,settings:r},u)}),[i,r,t]),l=hJ({type:"NUMBER",value:n[t],settings:r,setValue:a});return Te.createElement(yJ,{id:e,label:t,value:n[t],displayValue:l.displayValue,onUpdate:l.onUpdate,onChange:l.onChange,settings:r,innerLabelTrim:o})}const ike=qt("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function oke(n){let{locked:e}=n,t=Qn(n,nke);return Te.createElement("svg",Ir({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e?Te.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):Te.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function gI({value:n,onUpdate:e,settings:t,innerLabelTrim:r}){const{id:i,setSettings:o}=Eo(),{lock:s,locked:a}=t;return Te.createElement(ike,{withLock:s},s&&Te.createElement(oke,{locked:a,onClick:()=>o({locked:!a})}),Object.keys(n).map((l,u)=>Te.createElement(rke,{id:u===0?i:`${i}.${l}`,key:l,valueKey:l,value:n,settings:t[l],onUpdate:e,innerLabelTrim:r})))}const xJ=(n,e)=>{const t={};let r=0,i=1/0;Object.entries(n).forEach(([o,s])=>{t[o]=eJ(Xt({value:s},e[o])).settings,r=Math.max(r,t[o].step),i=Math.min(i,t[o].pad)});for(let o in t){const{step:s,min:a,max:l}=e[o]||{};!isFinite(s)&&(!isFinite(a)||!isFinite(l))&&(t[o].step=r,t[o].pad=i)}return t},ske=["lock"],ake=["value"];function lke(n){const e=cs().array().length(n).every.number(),t=r=>{if(!r||typeof r!="object")return!1;const i=Object.values(r);return i.length===n&&i.every(o=>isFinite(o))};return r=>e.test(r)||t(r)}function uke(n){return Array.isArray(n)?"array":"object"}function ey(n,e,t){return uke(n)===e?n:e==="array"?Object.values(n):URe(n,t)}const cke=(n,e,t)=>{const r=ey(n,"object",e.keys);for(let s in r)r[s]=QZ(r[s],e[s]);const i=Object.keys(r);let o={};if(i.length===e.keys.length)o=r;else{const s=ey(t,"object",e.keys);if(i.length===1&&e.locked){const a=i[0],l=r[a],u=s[a],c=u!==0?l/u:1;for(let f in s)f===a?o[a]=l:o[f]=s[f]*c}else o=Xt(Xt({},s),r)}return ey(o,e.format,e.keys)},fke=(n,e)=>ey(n,"object",e.keys),dke=n=>!!n&&("step"in n||"min"in n||"max"in n);function hke(n,e,t=[]){const{lock:r=!1}=e,i=Qn(e,ske),o=Array.isArray(n)?"array":"object",s=o==="object"?Object.keys(n):t,a=ey(n,"object",s),l=dke(i)?s.reduce((c,f)=>Object.assign(c,{[f]:i}),{}):i,u=xJ(a,l);return{value:o==="array"?n:a,settings:Xt(Xt({},u),{},{format:o,keys:s,lock:r,locked:!1})}}function bJ(n){return{schema:lke(n.length),normalize:e=>{let{value:t}=e,r=Qn(e,ake);return hke(t,r,n)},format:(e,t)=>fke(e,t),sanitize:(e,t,r)=>cke(e,t,r)}}var pke={grad:.9,turn:360,rad:360/(2*Math.PI)},Mu=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},Ni=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},ya=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},wJ=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},U9=function(n){return{r:ya(n.r,0,255),g:ya(n.g,0,255),b:ya(n.b,0,255),a:ya(n.a)}},MT=function(n){return{r:Ni(n.r),g:Ni(n.g),b:Ni(n.b),a:Ni(n.a,3)}},mke=/^#([0-9a-f]{3,8})$/i,fw=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},SJ=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,o=Math.max(e,t,r),s=o-Math.min(e,t,r),a=s?o===e?(t-r)/s:o===t?2+(r-e)/s:4+(e-t)/s:0;return{h:60*(a<0?a+6:a),s:o?s/o*100:0,v:o/255*100,a:i}},_J=function(n){var e=n.h,t=n.s,r=n.v,i=n.a;e=e/360*6,t/=100,r/=100;var o=Math.floor(e),s=r*(1-t),a=r*(1-(e-o)*t),l=r*(1-(1-e+o)*t),u=o%6;return{r:255*[r,a,s,s,l,r][u],g:255*[l,r,r,a,s,s][u],b:255*[s,s,l,r,r,a][u],a:i}},V9=function(n){return{h:wJ(n.h),s:ya(n.s,0,100),l:ya(n.l,0,100),a:ya(n.a)}},$9=function(n){return{h:Ni(n.h),s:Ni(n.s),l:Ni(n.l),a:Ni(n.a,3)}},H9=function(n){return _J((t=(e=n).s,{h:e.h,s:(t*=((r=e.l)<50?r:100-r)/100)>0?2*t/(r+t)*100:0,v:r+t,a:e.a}));var e,t,r},ty=function(n){return{h:(e=SJ(n)).h,s:(i=(200-(t=e.s))*(r=e.v)/100)>0&&i<200?t*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,t,r,i},gke=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,vke=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,yke=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,xke=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,QN={string:[[function(n){var e=mke.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?Ni(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?Ni(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=yke.exec(n)||xke.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:U9({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=gke.exec(n)||vke.exec(n);if(!e)return null;var t,r,i=V9({h:(t=e[1],r=e[2],r===void 0&&(r="deg"),Number(t)*(pke[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return H9(i)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,r=n.b,i=n.a,o=i===void 0?1:i;return Mu(e)&&Mu(t)&&Mu(r)?U9({r:Number(e),g:Number(t),b:Number(r),a:Number(o)}):null},"rgb"],[function(n){var e=n.h,t=n.s,r=n.l,i=n.a,o=i===void 0?1:i;if(!Mu(e)||!Mu(t)||!Mu(r))return null;var s=V9({h:Number(e),s:Number(t),l:Number(r),a:Number(o)});return H9(s)},"hsl"],[function(n){var e=n.h,t=n.s,r=n.v,i=n.a,o=i===void 0?1:i;if(!Mu(e)||!Mu(t)||!Mu(r))return null;var s=function(a){return{h:wJ(a.h),s:ya(a.s,0,100),v:ya(a.v,0,100),a:ya(a.a)}}({h:Number(e),s:Number(t),v:Number(r),a:Number(o)});return _J(s)},"hsv"]]},W9=function(n,e){for(var t=0;t<e.length;t++){var r=e[t][0](n);if(r)return[r,e[t][1]]}return[null,void 0]},EJ=function(n){return typeof n=="string"?W9(n.trim(),QN.string):typeof n=="object"&&n!==null?W9(n,QN.object):[null,void 0]},bke=function(n){return EJ(n)[1]},CT=function(n,e){var t=ty(n);return{h:t.h,s:ya(t.s+100*e,0,100),l:t.l,a:t.a}},AT=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},j9=function(n,e){var t=ty(n);return{h:t.h,s:t.s,l:ya(t.l+100*e,0,100),a:t.a}},eP=function(){function n(e){this.parsed=EJ(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return Ni(AT(this.rgba),2)},n.prototype.isDark=function(){return AT(this.rgba)<.5},n.prototype.isLight=function(){return AT(this.rgba)>=.5},n.prototype.toHex=function(){return e=MT(this.rgba),t=e.r,r=e.g,i=e.b,s=(o=e.a)<1?fw(Ni(255*o)):"","#"+fw(t)+fw(r)+fw(i)+s;var e,t,r,i,o,s},n.prototype.toRgb=function(){return MT(this.rgba)},n.prototype.toRgbString=function(){return e=MT(this.rgba),t=e.r,r=e.g,i=e.b,(o=e.a)<1?"rgba("+t+", "+r+", "+i+", "+o+")":"rgb("+t+", "+r+", "+i+")";var e,t,r,i,o},n.prototype.toHsl=function(){return $9(ty(this.rgba))},n.prototype.toHslString=function(){return e=$9(ty(this.rgba)),t=e.h,r=e.s,i=e.l,(o=e.a)<1?"hsla("+t+", "+r+"%, "+i+"%, "+o+")":"hsl("+t+", "+r+"%, "+i+"%)";var e,t,r,i,o},n.prototype.toHsv=function(){return e=SJ(this.rgba),{h:Ni(e.h),s:Ni(e.s),v:Ni(e.v),a:Ni(e.a,3)};var e},n.prototype.invert=function(){return Oo({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),Oo(CT(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),Oo(CT(this.rgba,-e))},n.prototype.grayscale=function(){return Oo(CT(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),Oo(j9(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),Oo(j9(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?Oo({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Ni(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=ty(this.rgba);return typeof e=="number"?Oo({h:e,s:t.s,l:t.l,a:t.a}):Ni(t.h)},n.prototype.isEqual=function(e){return this.toHex()===Oo(e).toHex()},n}(),Oo=function(n){return n instanceof eP?n:new eP(n)},G9=[],wke=function(n){n.forEach(function(e){G9.indexOf(e)<0&&(e(eP,QN),G9.push(e))})};function Ske(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in t)r[t[i]]=i;var o={};n.prototype.toName=function(s){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,u=r[this.toHex()];if(u)return u;if(s!=null&&s.closest){var c=this.toRgb(),f=1/0,d="black";if(!o.length)for(var h in t)o[h]=new n(t[h]).toRgb();for(var m in t){var g=(a=c,l=o[m],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));g<f&&(f=g,d=m)}return d}},e.string.push([function(s){var a=s.toLowerCase(),l=a==="transparent"?"#0000":t[a];return l?new n(l).toRgb():null},"name"])}function rv(){return(rv=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}function vI(n,e){if(n==null)return{};var t,r,i={},o=Object.keys(n);for(r=0;r<o.length;r++)e.indexOf(t=o[r])>=0||(i[t]=n[t]);return i}function tP(n){var e=z.useRef(n),t=z.useRef(function(r){e.current&&e.current(r)});return e.current=n,t.current}var Sg=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n<e?e:n},ny=function(n){return"touches"in n},nP=function(n){return n&&n.ownerDocument.defaultView||self},q9=function(n,e,t){var r=n.getBoundingClientRect(),i=ny(e)?function(o,s){for(var a=0;a<o.length;a++)if(o[a].identifier===s)return o[a];return o[0]}(e.touches,t):e;return{left:Sg((i.pageX-(r.left+nP(n).pageXOffset))/r.width),top:Sg((i.pageY-(r.top+nP(n).pageYOffset))/r.height)}},X9=function(n){!ny(n)&&n.preventDefault()},yI=Te.memo(function(n){var e=n.onMove,t=n.onKey,r=vI(n,["onMove","onKey"]),i=z.useRef(null),o=tP(e),s=tP(t),a=z.useRef(null),l=z.useRef(!1),u=z.useMemo(function(){var h=function(y){X9(y),(ny(y)?y.touches.length>0:y.buttons>0)&&i.current?o(q9(i.current,y,a.current)):g(!1)},m=function(){return g(!1)};function g(y){var p=l.current,w=nP(i.current),b=y?w.addEventListener:w.removeEventListener;b(p?"touchmove":"mousemove",h),b(p?"touchend":"mouseup",m)}return[function(y){var p=y.nativeEvent,w=i.current;if(w&&(X9(p),!function(v,S){return S&&!ny(v)}(p,l.current)&&w)){if(ny(p)){l.current=!0;var b=p.changedTouches||[];b.length&&(a.current=b[0].identifier)}w.focus(),o(q9(w,p,a.current)),g(!0)}},function(y){var p=y.which||y.keyCode;p<37||p>40||(y.preventDefault(),s({left:p===39?.05:p===37?-.05:0,top:p===40?.05:p===38?-.05:0}))},g]},[s,o]),c=u[0],f=u[1],d=u[2];return z.useEffect(function(){return d},[d]),Te.createElement("div",rv({},r,{onTouchStart:c,onMouseDown:c,className:"react-colorful__interactive",ref:i,onKeyDown:f,tabIndex:0,role:"slider"}))}),ex=function(n){return n.filter(Boolean).join(" ")},xI=function(n){var e=n.color,t=n.left,r=n.top,i=r===void 0?.5:r,o=ex(["react-colorful__pointer",n.className]);return Te.createElement("div",{className:o,style:{top:100*i+"%",left:100*t+"%"}},Te.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},Fo=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t},MJ=function(n){var e=n.s,t=n.v,r=n.a,i=(200-e)*t/100;return{h:Fo(n.h),s:Fo(i>0&&i<200?e*t/100/(i<=100?i:200-i)*100:0),l:Fo(i/2),a:Fo(r,2)}},rP=function(n){var e=MJ(n);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},TT=function(n){var e=MJ(n);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},CJ=function(n){var e=n.h,t=n.s,r=n.v,i=n.a;e=e/360*6,t/=100,r/=100;var o=Math.floor(e),s=r*(1-t),a=r*(1-(e-o)*t),l=r*(1-(1-e+o)*t),u=o%6;return{r:Fo(255*[r,a,s,s,l,r][u]),g:Fo(255*[l,r,r,a,s,s][u]),b:Fo(255*[s,s,l,r,r,a][u]),a:Fo(i,2)}},AJ=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,o=Math.max(e,t,r),s=o-Math.min(e,t,r),a=s?o===e?(t-r)/s:o===t?2+(r-e)/s:4+(e-t)/s:0;return{h:Fo(60*(a<0?a+6:a)),s:Fo(o?s/o*100:0),v:Fo(o/255*100),a:i}},TJ=Te.memo(function(n){var e=n.hue,t=n.onChange,r=ex(["react-colorful__hue",n.className]);return Te.createElement("div",{className:r},Te.createElement(yI,{onMove:function(i){t({h:360*i.left})},onKey:function(i){t({h:Sg(e+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":Fo(e),"aria-valuemax":"360","aria-valuemin":"0"},Te.createElement(xI,{className:"react-colorful__hue-pointer",left:e/360,color:rP({h:e,s:100,v:100,a:1})})))}),DJ=Te.memo(function(n){var e=n.hsva,t=n.onChange,r={backgroundColor:rP({h:e.h,s:100,v:100,a:1})};return Te.createElement("div",{className:"react-colorful__saturation",style:r},Te.createElement(yI,{onMove:function(i){t({s:100*i.left,v:100-100*i.top})},onKey:function(i){t({s:Sg(e.s+100*i.left,0,100),v:Sg(e.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+Fo(e.s)+"%, Brightness "+Fo(e.v)+"%"},Te.createElement(xI,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:rP(e)})))}),bI=function(n,e){if(n===e)return!0;for(var t in n)if(n[t]!==e[t])return!1;return!0};function NJ(n,e,t){var r=tP(t),i=z.useState(function(){return n.toHsva(e)}),o=i[0],s=i[1],a=z.useRef({color:e,hsva:o});z.useEffect(function(){if(!n.equal(e,a.current.color)){var u=n.toHsva(e);a.current={hsva:u,color:e},s(u)}},[e,n]),z.useEffect(function(){var u;bI(o,a.current.hsva)||n.equal(u=n.fromHsva(o),a.current.color)||(a.current={hsva:o,color:u},r(u))},[o,n,r]);var l=z.useCallback(function(u){s(function(c){return Object.assign({},c,u)})},[]);return[o,l]}var _ke=typeof window<"u"?z.useLayoutEffect:z.useEffect,Eke=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},Y9=new Map,PJ=function(n){_ke(function(){var e=n.current?n.current.ownerDocument:document;if(e!==void 0&&!Y9.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,Y9.set(e,t);var r=Eke();r&&t.setAttribute("nonce",r),e.head.appendChild(t)}},[])},Mke=function(n){var e=n.className,t=n.colorModel,r=n.color,i=r===void 0?t.defaultColor:r,o=n.onChange,s=vI(n,["className","colorModel","color","onChange"]),a=z.useRef(null);PJ(a);var l=NJ(t,i,o),u=l[0],c=l[1],f=ex(["react-colorful",e]);return Te.createElement("div",rv({},s,{ref:a,className:f}),Te.createElement(DJ,{hsva:u,onChange:c}),Te.createElement(TJ,{hue:u.h,onChange:c,className:"react-colorful__last-control"}))},Cke=function(n){var e=n.className,t=n.hsva,r=n.onChange,i={backgroundImage:"linear-gradient(90deg, "+TT(Object.assign({},t,{a:0}))+", "+TT(Object.assign({},t,{a:1}))+")"},o=ex(["react-colorful__alpha",e]),s=Fo(100*t.a);return Te.createElement("div",{className:o},Te.createElement("div",{className:"react-colorful__alpha-gradient",style:i}),Te.createElement(yI,{onMove:function(a){r({a:a.left})},onKey:function(a){r({a:Sg(t.a+a.left)})},"aria-label":"Alpha","aria-valuetext":s+"%","aria-valuenow":s,"aria-valuemin":"0","aria-valuemax":"100"},Te.createElement(xI,{className:"react-colorful__alpha-pointer",left:t.a,color:TT(t)})))},Ake=function(n){var e=n.className,t=n.colorModel,r=n.color,i=r===void 0?t.defaultColor:r,o=n.onChange,s=vI(n,["className","colorModel","color","onChange"]),a=z.useRef(null);PJ(a);var l=NJ(t,i,o),u=l[0],c=l[1],f=ex(["react-colorful",e]);return Te.createElement("div",rv({},s,{ref:a,className:f}),Te.createElement(DJ,{hsva:u,onChange:c}),Te.createElement(TJ,{hue:u.h,onChange:c}),Te.createElement(Cke,{hsva:u,onChange:c,className:"react-colorful__last-control"}))},Tke={defaultColor:{r:0,g:0,b:0,a:1},toHsva:AJ,fromHsva:CJ,equal:bI},Dke=function(n){return Te.createElement(Ake,rv({},n,{colorModel:Tke}))},Nke={defaultColor:{r:0,g:0,b:0},toHsva:function(n){return AJ({r:n.r,g:n.g,b:n.b,a:1})},fromHsva:function(n){return{r:(e=CJ(n)).r,g:e.g,b:e.b};var e},equal:bI},Pke=function(n){return Te.createElement(Mke,rv({},n,{colorModel:Nke}))},RJ={exports:{}},Rke="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Oke=Rke,kke=Oke;function OJ(){}function kJ(){}kJ.resetWarningCache=OJ;var Ike=function(){function n(r,i,o,s,a,l){if(l!==kke){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:kJ,resetWarningCache:OJ};return t.PropTypes=t,t};RJ.exports=Ike();var Lke=RJ.exports;const lr=ll(Lke);function iv(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(c){try{u(r.next(c))}catch(f){s(f)}}function l(c){try{u(r.throw(c))}catch(f){s(f)}}function u(c){c.done?o(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})}function ov(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Fke(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return o}function Bke(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(Fke(arguments[e]));return n}var zke=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function tx(n,e){var t=Uke(n);if(typeof t.path!="string"){var r=n.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof r=="string"&&r.length>0?r:n.name,writable:!1,configurable:!1,enumerable:!0})}return t}function Uke(n){var e=n.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!n.type){var r=e.split(".").pop().toLowerCase(),i=zke.get(r);i&&Object.defineProperty(n,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return n}var Vke=[".DS_Store","Thumbs.db"];function $ke(n){return iv(this,void 0,void 0,function(){return ov(this,function(e){return zE(n)&&Hke(n)?[2,qke(n.dataTransfer,n.type)]:Wke(n)?[2,jke(n)]:Array.isArray(n)&&n.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,Gke(n)]:[2,[]]})})}function Hke(n){return zE(n.dataTransfer)}function Wke(n){return zE(n)&&zE(n.target)}function zE(n){return typeof n=="object"&&n!==null}function jke(n){return iP(n.target.files).map(function(e){return tx(e)})}function Gke(n){return iv(this,void 0,void 0,function(){var e;return ov(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.map(function(r){return r.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(r){return tx(r)})]}})})}function qke(n,e){return iv(this,void 0,void 0,function(){var t,r;return ov(this,function(i){switch(i.label){case 0:return n===null?[2,[]]:n.items?(t=iP(n.items).filter(function(o){return o.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(Xke))]):[3,2];case 1:return r=i.sent(),[2,K9(IJ(r))];case 2:return[2,K9(iP(n.files).map(function(o){return tx(o)}))]}})})}function K9(n){return n.filter(function(e){return Vke.indexOf(e.name)===-1})}function iP(n){if(n===null)return[];for(var e=[],t=0;t<n.length;t++){var r=n[t];e.push(r)}return e}function Xke(n){if(typeof n.webkitGetAsEntry!="function")return Z9(n);var e=n.webkitGetAsEntry();return e&&e.isDirectory?LJ(e):Z9(n)}function IJ(n){return n.reduce(function(e,t){return Bke(e,Array.isArray(t)?IJ(t):[t])},[])}function Z9(n){var e=n.getAsFile();if(!e)return Promise.reject(n+" is not a File");var t=tx(e);return Promise.resolve(t)}function Yke(n){return iv(this,void 0,void 0,function(){return ov(this,function(e){return[2,n.isDirectory?LJ(n):Kke(n)]})})}function LJ(n){var e=n.createReader();return new Promise(function(t,r){var i=[];function o(){var s=this;e.readEntries(function(a){return iv(s,void 0,void 0,function(){var l,u,c;return ov(this,function(f){switch(f.label){case 0:if(a.length)return[3,5];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return l=f.sent(),t(l),[3,4];case 3:return u=f.sent(),r(u),[3,4];case 4:return[3,6];case 5:c=Promise.all(a.map(Yke)),i.push(c),o(),f.label=6;case 6:return[2]}})})},function(a){r(a)})}o()})}function Kke(n){return iv(this,void 0,void 0,function(){return ov(this,function(e){return[2,new Promise(function(t,r){n.file(function(i){var o=tx(i,n.fullPath);t(o)},function(i){r(i)})})]})})}var Zke=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(",");if(t.length===0)return!0;var r=n.name||"",i=(n.type||"").toLowerCase(),o=i.replace(/\/.*$/,"");return t.some(function(s){var a=s.trim().toLowerCase();return a.charAt(0)==="."?r.toLowerCase().endsWith(a):a.endsWith("/*")?o===a.replace(/\/.*$/,""):i===a})}return!0};function J9(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Q9(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?J9(Object(t),!0).forEach(function(r){FJ(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):J9(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function FJ(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function eV(n,e){return tIe(n)||eIe(n,e)||Qke(n,e)||Jke()}function Jke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qke(n,e){if(n){if(typeof n=="string")return tV(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return tV(n,e)}}function tV(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function eIe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,o=!1,s,a;try{for(t=t.call(n);!(i=(s=t.next()).done)&&(r.push(s.value),!(e&&r.length===e));i=!0);}catch(l){o=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(o)throw a}}return r}}function tIe(n){if(Array.isArray(n))return n}var nIe="file-invalid-type",rIe="file-too-large",iIe="file-too-small",oIe="too-many-files",sIe=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:nIe,message:"File type must be ".concat(t)}},nV=function(e){return{code:rIe,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},rV=function(e){return{code:iIe,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},aIe={code:oIe,message:"Too many files"};function BJ(n,e){var t=n.type==="application/x-moz-file"||Zke(n,e);return[t,t?null:sIe(e)]}function zJ(n,e,t){if(Jv(n.size))if(Jv(e)&&Jv(t)){if(n.size>t)return[!1,nV(t)];if(n.size<e)return[!1,rV(e)]}else{if(Jv(e)&&n.size<e)return[!1,rV(e)];if(Jv(t)&&n.size>t)return[!1,nV(t)]}return[!0,null]}function Jv(n){return n!=null}function lIe(n){var e=n.files,t=n.accept,r=n.minSize,i=n.maxSize,o=n.multiple,s=n.maxFiles;return!o&&e.length>1||o&&s>=1&&e.length>s?!1:e.every(function(a){var l=BJ(a,t),u=eV(l,1),c=u[0],f=zJ(a,r,i),d=eV(f,1),h=d[0];return c&&h})}function UE(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function dw(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function iV(n){n.preventDefault()}function uIe(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function cIe(n){return n.indexOf("Edge/")!==-1}function fIe(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return uIe(n)||cIe(n)}function Tl(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return e.some(function(a){return!UE(r)&&a&&a.apply(void 0,[r].concat(o)),UE(r)})}}function dIe(){return"showOpenFilePicker"in window}function hIe(n){return n=typeof n=="string"?n.split(","):n,[{description:"everything",accept:Array.isArray(n)?n.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return Q9(Q9({},e),{},FJ({},t,[]))},{}):{}}]}function pIe(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function mIe(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}var gIe=["children"],vIe=["open"],yIe=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],xIe=["refKey","onChange","onClick"];function bIe(n){return _Ie(n)||SIe(n)||UJ(n)||wIe()}function wIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SIe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function _Ie(n){if(Array.isArray(n))return oP(n)}function DT(n,e){return CIe(n)||MIe(n,e)||UJ(n,e)||EIe()}function EIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UJ(n,e){if(n){if(typeof n=="string")return oP(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return oP(n,e)}}function oP(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function MIe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,o=!1,s,a;try{for(t=t.call(n);!(i=(s=t.next()).done)&&(r.push(s.value),!(e&&r.length===e));i=!0);}catch(l){o=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(o)throw a}}return r}}function CIe(n){if(Array.isArray(n))return n}function oV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Cr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?oV(Object(t),!0).forEach(function(r){sP(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):oV(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function sP(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function VE(n,e){if(n==null)return{};var t=AIe(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function AIe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}var wI=z.forwardRef(function(n,e){var t=n.children,r=VE(n,gIe),i=$J(r),o=i.open,s=VE(i,vIe);return z.useImperativeHandle(e,function(){return{open:o}},[o]),Te.createElement(z.Fragment,null,t(Cr(Cr({},s),{},{open:o})))});wI.displayName="Dropzone";var VJ={disabled:!1,getFilesFromEvent:$ke,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};wI.defaultProps=VJ;wI.propTypes={children:lr.func,accept:lr.oneOfType([lr.string,lr.arrayOf(lr.string)]),multiple:lr.bool,preventDropOnDocument:lr.bool,noClick:lr.bool,noKeyboard:lr.bool,noDrag:lr.bool,noDragEventsBubbling:lr.bool,minSize:lr.number,maxSize:lr.number,maxFiles:lr.number,disabled:lr.bool,getFilesFromEvent:lr.func,onFileDialogCancel:lr.func,onFileDialogOpen:lr.func,useFsAccessApi:lr.bool,onDragEnter:lr.func,onDragLeave:lr.func,onDragOver:lr.func,onDrop:lr.func,onDropAccepted:lr.func,onDropRejected:lr.func,validator:lr.func};var aP={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function $J(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Cr(Cr({},VJ),n),t=e.accept,r=e.disabled,i=e.getFilesFromEvent,o=e.maxSize,s=e.minSize,a=e.multiple,l=e.maxFiles,u=e.onDragEnter,c=e.onDragLeave,f=e.onDragOver,d=e.onDrop,h=e.onDropAccepted,m=e.onDropRejected,g=e.onFileDialogCancel,y=e.onFileDialogOpen,p=e.useFsAccessApi,w=e.preventDropOnDocument,b=e.noClick,v=e.noKeyboard,S=e.noDrag,x=e.noDragEventsBubbling,M=e.validator,A=z.useMemo(function(){return typeof y=="function"?y:sV},[y]),T=z.useMemo(function(){return typeof g=="function"?g:sV},[g]),C=z.useRef(null),D=z.useRef(null),R=z.useReducer(TIe,aP),B=DT(R,2),F=B[0],U=B[1],N=F.isFocused,I=F.isFileDialogActive,V=F.draggedFiles,L=z.useRef(typeof window<"u"&&window.isSecureContext&&p&&dIe()),X=function(){!L.current&&I&&setTimeout(function(){if(D.current){var J=D.current.files;J.length||(U({type:"closeDialog"}),T())}},300)};z.useEffect(function(){return window.addEventListener("focus",X,!1),function(){window.removeEventListener("focus",X,!1)}},[D,I,T,L]);var Z=z.useRef([]),te=function(J){C.current&&C.current.contains(J.target)||(J.preventDefault(),Z.current=[])};z.useEffect(function(){return w&&(document.addEventListener("dragover",iV,!1),document.addEventListener("drop",te,!1)),function(){w&&(document.removeEventListener("dragover",iV),document.removeEventListener("drop",te))}},[C,w]);var Y=z.useCallback(function(q){q.preventDefault(),q.persist(),oe(q),Z.current=[].concat(bIe(Z.current),[q.target]),dw(q)&&Promise.resolve(i(q)).then(function(J){UE(q)&&!x||(U({draggedFiles:J,isDragActive:!0,type:"setDraggedFiles"}),u&&u(q))})},[i,u,x]),re=z.useCallback(function(q){q.preventDefault(),q.persist(),oe(q);var J=dw(q);if(J&&q.dataTransfer)try{q.dataTransfer.dropEffect="copy"}catch{}return J&&f&&f(q),!1},[f,x]),fe=z.useCallback(function(q){q.preventDefault(),q.persist(),oe(q);var J=Z.current.filter(function(we){return C.current&&C.current.contains(we)}),ye=J.indexOf(q.target);ye!==-1&&J.splice(ye,1),Z.current=J,!(J.length>0)&&(U({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),dw(q)&&c&&c(q))},[C,c,x]),ue=z.useCallback(function(q,J){var ye=[],we=[];q.forEach(function(ke){var Fe=BJ(ke,t),He=DT(Fe,2),Ie=He[0],Ze=He[1],qe=zJ(ke,s,o),lt=DT(qe,2),at=lt[0],Je=lt[1],Ee=M?M(ke):null;if(Ie&&at&&!Ee)ye.push(ke);else{var $=[Ze,Je];Ee&&($=$.concat(Ee)),we.push({file:ke,errors:$.filter(function(ce){return ce})})}}),(!a&&ye.length>1||a&&l>=1&&ye.length>l)&&(ye.forEach(function(ke){we.push({file:ke,errors:[aIe]})}),ye.splice(0)),U({acceptedFiles:ye,fileRejections:we,type:"setFiles"}),d&&d(ye,we,J),we.length>0&&m&&m(we,J),ye.length>0&&h&&h(ye,J)},[U,a,t,s,o,l,d,h,m,M]),ge=z.useCallback(function(q){q.preventDefault(),q.persist(),oe(q),Z.current=[],dw(q)&&Promise.resolve(i(q)).then(function(J){UE(q)&&!x||ue(J,q)}),U({type:"reset"})},[i,ue,x]),Se=z.useCallback(function(){if(L.current){U({type:"openDialog"}),A();var q={multiple:a,types:hIe(t)};window.showOpenFilePicker(q).then(function(J){return i(J)}).then(function(J){ue(J,null),U({type:"closeDialog"})}).catch(function(J){pIe(J)?(T(J),U({type:"closeDialog"})):mIe(J)&&(L.current=!1,D.current&&(D.current.value=null,D.current.click()))});return}D.current&&(U({type:"openDialog"}),A(),D.current.value=null,D.current.click())},[U,A,T,p,ue,t,a]),xe=z.useCallback(function(q){!C.current||!C.current.isEqualNode(q.target)||(q.key===" "||q.key==="Enter"||q.keyCode===32||q.keyCode===13)&&(q.preventDefault(),Se())},[C,Se]),De=z.useCallback(function(){U({type:"focus"})},[]),Ae=z.useCallback(function(){U({type:"blur"})},[]),ie=z.useCallback(function(){b||(fIe()?setTimeout(Se,0):Se())},[b,Se]),Re=function(J){return r?null:J},Pe=function(J){return v?null:Re(J)},ee=function(J){return S?null:Re(J)},oe=function(J){x&&J.stopPropagation()},Me=z.useMemo(function(){return function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},J=q.refKey,ye=J===void 0?"ref":J,we=q.role,ke=q.onKeyDown,Fe=q.onFocus,He=q.onBlur,Ie=q.onClick,Ze=q.onDragEnter,qe=q.onDragOver,lt=q.onDragLeave,at=q.onDrop,Je=VE(q,yIe);return Cr(Cr(sP({onKeyDown:Pe(Tl(ke,xe)),onFocus:Pe(Tl(Fe,De)),onBlur:Pe(Tl(He,Ae)),onClick:Re(Tl(Ie,ie)),onDragEnter:ee(Tl(Ze,Y)),onDragOver:ee(Tl(qe,re)),onDragLeave:ee(Tl(lt,fe)),onDrop:ee(Tl(at,ge)),role:typeof we=="string"&&we!==""?we:"button"},ye,C),!r&&!v?{tabIndex:0}:{}),Je)}},[C,xe,De,Ae,ie,Y,re,fe,ge,v,S,r]),se=z.useCallback(function(q){q.stopPropagation()},[]),G=z.useMemo(function(){return function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},J=q.refKey,ye=J===void 0?"ref":J,we=q.onChange,ke=q.onClick,Fe=VE(q,xIe),He=sP({accept:t,multiple:a,type:"file",style:{display:"none"},onChange:Re(Tl(we,ge)),onClick:Re(Tl(ke,se)),tabIndex:-1},ye,D);return Cr(Cr({},He),Fe)}},[D,t,a,ge,r]),j=V.length,he=j>0&&lIe({files:V,accept:t,minSize:s,maxSize:o,multiple:a,maxFiles:l}),Ce=j>0&&!he;return Cr(Cr({},F),{},{isDragAccept:he,isDragReject:Ce,isFocused:N&&!r,getRootProps:Me,getInputProps:G,rootRef:C,inputRef:D,open:Re(Se)})}function TIe(n,e){switch(e.type){case"focus":return Cr(Cr({},n),{},{isFocused:!0});case"blur":return Cr(Cr({},n),{},{isFocused:!1});case"openDialog":return Cr(Cr({},aP),{},{isFileDialogActive:!0});case"closeDialog":return Cr(Cr({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,r=e.draggedFiles;return Cr(Cr({},n),{},{draggedFiles:r,isDragActive:t});case"setFiles":return Cr(Cr({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return Cr({},aP);default:return n}}function sV(){}function DIe(n){let e;const t=new Set,r=(u,c)=>{const f=typeof u=="function"?u(e):u;if(f!==e){const d=e;e=c?f:Object.assign({},e,f),t.forEach(h=>h(e,d))}},i=()=>e,o=(u,c=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let d=c(e);function h(){const m=c(e);if(!f(d,m)){const g=d;u(d=m,g)}}return t.add(h),()=>t.delete(h)},l={setState:r,getState:i,subscribe:(u,c,f)=>c||f?o(u,c,f):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(r,i,l),l}const NIe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),aV=NIe?z.useEffect:z.useLayoutEffect;function PIe(n){const e=typeof n=="function"?DIe(n):n,t=(r=e.getState,i=Object.is)=>{const[,o]=z.useReducer(y=>y+1,0),s=e.getState(),a=z.useRef(s),l=z.useRef(r),u=z.useRef(i),c=z.useRef(!1),f=z.useRef();f.current===void 0&&(f.current=r(s));let d,h=!1;(a.current!==s||l.current!==r||u.current!==i||c.current)&&(d=r(s),h=!i(f.current,d)),aV(()=>{h&&(f.current=d),a.current=s,l.current=r,u.current=i,c.current=!1});const m=z.useRef(s);aV(()=>{const y=()=>{try{const w=e.getState(),b=l.current(w);u.current(f.current,b)||(a.current=w,f.current=b,o())}catch{c.current=!0,o()}},p=e.subscribe(y);return e.getState()!==m.current&&y(),p},[]);const g=h?d:f.current;return z.useDebugValue(g),g};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}const RIe=n=>(e,t,r)=>{const i=r.subscribe;return r.subscribe=(s,a,l)=>{let u=s;if(a){const c=(l==null?void 0:l.equalityFn)||Object.is;let f=s(r.getState());u=d=>{const h=s(d);if(!c(f,h)){const m=f;a(f=h,m)}},l!=null&&l.fireImmediately&&a(f,f)}return i(u)},n(e,t,r)};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var OIe=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var kIe=OIe;function lV(n){return kIe(n)===!0&&Object.prototype.toString.call(n)==="[object Object]"}var HJ=function(e){var t,r;return!(lV(e)===!1||(t=e.constructor,typeof t!="function")||(r=t.prototype,lV(r)===!1)||r.hasOwnProperty("isPrototypeOf")===!1)};/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var IIe=HJ,SI=function(e){return IIe(e)||typeof e=="function"||Array.isArray(e)};/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var LIe=function(e,t,r){for(var i in e)if(t.call(r,e[i],i,e)===!1)break},FIe=SI,BIe=LIe;function WJ(n,e){for(var t=arguments.length,r=0;++r<t;){var i=arguments[r];lP(i)&&BIe(i,zIe,n)}return n}function zIe(n,e){if(UIe(e)){var t=this[e];lP(n)&&lP(t)?WJ(t,n):this[e]=n}}function lP(n){return FIe(n)&&!Array.isArray(n)}function UIe(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"}var VIe=WJ;/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var $Ie=function(n,e,t,r,i){if(!HIe(n)||!e)return n;if(e=hw(e),t&&(e+="."+hw(t)),r&&(e+="."+hw(r)),i&&(e+="."+hw(i)),e in n)return n[e];for(var o=e.split("."),s=o.length,a=-1;n&&++a<s;){for(var l=o[a];l[l.length-1]==="\\";)l=l.slice(0,-1)+"."+o[++a];n=n[l]}return n};function HIe(n){return n!==null&&(typeof n=="object"||typeof n=="function")}function hw(n){return n?Array.isArray(n)?n.join("."):n:""}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var WIe=function(n,e){if(n===null||typeof n>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return n;for(var t=Object.prototype.propertyIsEnumerable,r=Object(n),i=arguments.length,o=0;++o<i;)for(var s=Object(arguments[o]),a=Object.getOwnPropertySymbols(s),l=0;l<a.length;l++){var u=a[l];t.call(s,u)&&(r[u]=s[u])}return r},jIe=SI,GIe=WIe,qIe=Object.assign||function(n){if(n===null||typeof n>"u")throw new TypeError("Cannot convert undefined or null to object");uV(n)||(n={});for(var e=1;e<arguments.length;e++){var t=arguments[e];YIe(t)&&(t=KIe(t)),uV(t)&&(XIe(n,t),GIe(n,t))}return n};function XIe(n,e){for(var t in e)ZIe(e,t)&&(n[t]=e[t])}function YIe(n){return n&&typeof n=="string"}function KIe(n){var e={};for(var t in n)e[t]=n[t];return e}function uV(n){return n&&typeof n=="object"||jIe(n)}function ZIe(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var JIe=qIe,QIe=function(n,e,t){if(typeof n!="string")throw new TypeError("expected a string");typeof e=="function"&&(t=e,e=null),typeof e=="string"&&(e={sep:e});var r=JIe({sep:"."},e),i=r.quotes||['"',"'","`"],o;r.brackets===!0?o={"<":">","(":")","[":"]","{":"}"}:r.brackets&&(o=r.brackets);var s=[],a=[],l=[""],u=r.sep,c=n.length,f=-1,d;function h(){if(o&&a.length)return o[a[a.length-1]]}for(;++f<c;){var m=n[f],g=n[f+1],y={val:m,idx:f,arr:l,str:n};if(s.push(y),m==="\\"){y.val=tLe(r,n,f)===!0?m+g:g,y.escaped=!0,typeof t=="function"&&t(y),l[l.length-1]+=y.val,f++;continue}if(o&&o[m]){a.push(m);var p=h(),w=f+1;if(n.indexOf(p,w+1)!==-1)for(;a.length&&w<c;){var b=n[++w];if(b==="\\"){b++;continue}if(i.indexOf(b)!==-1){w=uP(n,b,w+1);continue}if(p=h(),a.length&&n.indexOf(p,w+1)===-1)break;if(o[b]){a.push(b);continue}p===b&&a.pop()}if(d=w,d===-1){l[l.length-1]+=m;continue}m=n.slice(f,d+1),y.val=m,y.idx=f=d}if(i.indexOf(m)!==-1){if(d=uP(n,m,f+1),d===-1){l[l.length-1]+=m;continue}eLe(m,r)===!0?m=n.slice(f,d+1):m=n.slice(f+1,d),y.val=m,y.idx=f=d}if(typeof t=="function"&&(t(y,s),m=y.val,f=y.idx),y.val===u&&y.split!==!1){l.push("");continue}l[l.length-1]+=y.val}return l};function uP(n,e,t,r){var i=n.indexOf(e,t);return n.charAt(i-1)==="\\"?uP(n,e,i+1):i}function eLe(n,e){return e.keepDoubleQuotes===!0&&n==='"'||e.keepSingleQuotes===!0&&n==="'"?!0:e.keepQuotes}function tLe(n,e,t){return typeof n.keepEscaping=="function"?n.keepEscaping(e,t):n.keepEscaping===!0||e[t+1]==="\\"}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var nLe=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")},cV=nLe,rLe=function(e){cV(e)||(e={});for(var t=arguments.length,r=1;r<t;r++){var i=arguments[r];cV(i)&&iLe(e,i)}return e};function iLe(n,e){for(var t in e)oLe(e,t)&&(n[t]=e[t])}function oLe(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var sLe=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")};/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var aLe=QIe,lLe=rLe,fV=HJ,dV=sLe,uLe=function(n,e,t){if(!dV(n)||(Array.isArray(e)&&(e=[].concat.apply([],e).join(".")),typeof e!="string"))return n;for(var r=aLe(e,{sep:".",brackets:!0}).filter(cLe),i=r.length,o=-1,s=n;++o<i;){var a=r[o];if(o!==i-1){dV(s[a])||(s[a]={}),s=s[a];continue}fV(s[a])&&fV(t)?s[a]=lLe({},s[a],t):s[a]=t}return n};function cLe(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"}var NT=SI,hV=VIe,fLe=$Ie,pV=uLe,dLe=function(e,t,r){if(!NT(e))throw new TypeError("expected an object");if(typeof t!="string"||r==null)return hV.apply(null,arguments);if(typeof r=="string")return pV(e,t,r),e;var i=fLe(e,t);return NT(r)&&NT(i)&&(r=hV({},i,r)),pV(e,t,r),e};const hLe=ll(dLe),_I=(...n)=>n.filter(Boolean).join(".");function pLe(n){const e=n.split(".");return[e.pop(),e.join(".")||void 0]}function mLe(n,e){return Object.entries(BRe(n,e)).reduce((t,[,{value:r,disabled:i,key:o}])=>(t[o]=i?void 0:r,t),{})}function gLe(n,e){const t=z.useRef();return Uy(n,t.current)||(t.current=n),t.current}function jJ(n,e){return z.useMemo(n,gLe(e))}function vLe(n){const e=z.useRef(null),t=z.useRef(null),r=z.useRef(!0);return z.useLayoutEffect(()=>{n||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),z.useEffect(()=>{if(r.current){r.current=!1;return}let i;const o=e.current,s=()=>{n&&(o.style.removeProperty("height"),o.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};o.addEventListener("transitionend",s,{once:!0});const{height:a}=t.current.getBoundingClientRect();return o.style.height=a+"px",n||(o.style.overflow="hidden",i=window.setTimeout(()=>o.style.height="0px",50)),()=>{o.removeEventListener("transitionend",s),clearTimeout(i)}},[n]),{wrapperRef:e,contentRef:t}}const yLe=n=>{const[e,t]=z.useState(n.getVisiblePaths());return z.useEffect(()=>{t(n.getVisiblePaths());const r=n.useStore.subscribe(n.getVisiblePaths,t,{equalityFn:h2});return()=>r()},[n]),e};function xLe(n,e,t){return n.useStore(i=>{const o=Xt(Xt({},t),i.data);return mLe(o,e)},h2)}function GJ(n=3){const e=z.useRef(null),t=z.useRef(null),[r,i]=z.useState(!1),o=z.useCallback(()=>i(!0),[]),s=z.useCallback(()=>i(!1),[]);return z.useLayoutEffect(()=>{if(r){const{bottom:a,top:l,left:u}=e.current.getBoundingClientRect(),{height:c}=t.current.getBoundingClientRect(),f=a+c>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=u+"px",f==="down"?t.current.style.top=a+n+"px":t.current.style.bottom=window.innerHeight-l+n+"px"}},[n,r]),{popinRef:e,wrapperRef:t,shown:r,show:o,hide:s}}wke([Ske]);const bLe={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};cs.extend({color:()=>n=>Oo(n).isValid()});const wLe=n=>cs().color().test(n);function qJ(n,{format:e,hasAlpha:t,isString:r}){const i=bLe[e]+(r&&e!=="hex"?"String":""),o=n[i]();return typeof o=="object"&&!t?zRe(o,["a"]):o}const XJ=(n,e)=>{const t=Oo(n);if(!t.isValid())throw Error("Invalid color");return qJ(t,e)},SLe=(n,e)=>qJ(Oo(n),Xt(Xt({},e),{},{isString:!0,format:"hex"})),_Le=({value:n})=>{const e=bke(n),t=e==="name"?"hex":e,r=typeof n=="object"?"a"in n:e==="hex"&&n.length===8||/^(rgba)|(hsla)|(hsva)/.test(n),i={format:t,hasAlpha:r,isString:typeof n=="string"};return{value:XJ(n,i),settings:i}};var ELe=Object.freeze({__proto__:null,schema:wLe,sanitize:XJ,format:SLe,normalize:_Le});const MLe=qt("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),CLe=qt("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),ALe=qt("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function mV(n,e){return e!=="rgb"?Oo(n).toRgb():n}function TLe({value:n,displayValue:e,settings:t,onUpdate:r}){const{emitOnEditStart:i,emitOnEditEnd:o}=Eo(),{format:s,hasAlpha:a}=t,{popinRef:l,wrapperRef:u,shown:c,show:f,hide:d}=GJ(),h=z.useRef(0),[m,g]=z.useState(()=>mV(n,s)),y=a?Dke:Pke,p=()=>{g(mV(n,s)),f(),i()},w=()=>{d(),o(),window.clearTimeout(h.current)},b=()=>{h.current=window.setTimeout(w,500)};return z.useEffect(()=>()=>window.clearTimeout(h.current),[]),Te.createElement(Te.Fragment,null,Te.createElement(MLe,{ref:l,active:c,onClick:()=>p(),style:{color:e}}),c&&Te.createElement(pI,null,Te.createElement(dJ,{onPointerUp:w}),Te.createElement(ALe,{ref:u,onMouseEnter:()=>window.clearTimeout(h.current),onMouseLeave:v=>v.buttons===0&&b()},Te.createElement(y,{color:m,onChange:r}))))}function DLe(){const{value:n,displayValue:e,label:t,onChange:r,onUpdate:i,settings:o}=Eo();return Te.createElement(La,{input:!0},Te.createElement(dl,null,t),Te.createElement(CLe,null,Te.createElement(TLe,{value:n,displayValue:e,onChange:r,onUpdate:i,settings:o}),Te.createElement(hI,{value:e,onChange:r,onUpdate:i})))}var NLe=Xt({component:DLe},ELe);function PLe(){const{label:n,displayValue:e,onUpdate:t,settings:r}=Eo();return Te.createElement(La,{input:!0},Te.createElement(dl,null,n),Te.createElement(gI,{value:e,settings:r,onUpdate:t}))}var RLe=Xt({component:PLe},bJ(["x","y","z"]));const OLe=qt("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),kLe=qt("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function ILe({value:n,settings:e,onUpdate:t}){const r=z.useRef(),i=z.useRef(0),o=z.useRef(0),s=z.useRef(1),[a,l]=z.useState(!1),[u,c]=z.useState(!1),[f,d]=pJ(),h=z.useRef(null),m=z.useRef(null);z.useLayoutEffect(()=>{if(a){const{top:R,left:B,width:F,height:U}=h.current.getBoundingClientRect();m.current.style.left=B+F/2+"px",m.current.style.top=R+U/2+"px"}},[a]);const{keys:[g,y],joystick:p}=e,w=p==="invertY"?1:-1,{[g]:{step:b},[y]:{step:v}}=e,S=Yu("sizes","joystickWidth"),x=Yu("sizes","joystickHeight"),M=parseFloat(S)*.8/2,A=parseFloat(x)*.8/2,T=z.useCallback(()=>{r.current||(c(!0),i.current&&d({x:i.current*M}),o.current&&d({y:o.current*-A}),r.current=window.setInterval(()=>{t(R=>{const B=b*i.current*s.current,F=w*v*o.current*s.current;return Array.isArray(R)?{[g]:R[0]+B,[y]:R[1]+F}:{[g]:R[g]+B,[y]:R[y]+F}})},16))},[M,A,t,d,b,v,g,y,w]),C=z.useCallback(()=>{window.clearTimeout(r.current),r.current=void 0,c(!1)},[]);z.useEffect(()=>{function R(B){s.current=JZ(B)}return window.addEventListener("keydown",R),window.addEventListener("keyup",R),()=>{window.clearTimeout(r.current),window.removeEventListener("keydown",R),window.removeEventListener("keyup",R)}},[]);const D=Q1(({first:R,active:B,delta:[F,U],movement:[N,I]})=>{R&&l(!0);const V=$f(N,-M,M),L=$f(I,-A,A);i.current=Math.abs(N)>Math.abs(V)?Math.sign(N-V):0,o.current=Math.abs(I)>Math.abs(L)?Math.sign(L-I):0;let X=n[g],Z=n[y];B?(i.current||(X+=F*b*s.current,d({x:V})),o.current||(Z-=w*U*v*s.current,d({y:L})),i.current||o.current?T():C(),t({[g]:X,[y]:Z})):(l(!1),i.current=0,o.current=0,d({x:0,y:0}),C())});return Te.createElement(OLe,Ir({ref:h},D()),a&&Te.createElement(pI,null,Te.createElement(kLe,{ref:m,isOutOfBounds:u},Te.createElement("div",null),Te.createElement("span",{ref:f}))))}const LLe=qt("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function FLe(){const{label:n,displayValue:e,onUpdate:t,settings:r}=Eo();return Te.createElement(La,{input:!0},Te.createElement(dl,null,n),Te.createElement(LLe,{withJoystick:!!r.joystick},r.joystick&&Te.createElement(ILe,{value:e,settings:r,onUpdate:t}),Te.createElement(gI,{value:e,settings:r,onUpdate:t})))}const BLe=["joystick"],YJ=bJ(["x","y"]),zLe=n=>{let{joystick:e=!0}=n,t=Qn(n,BLe);const{value:r,settings:i}=YJ.normalize(t);return{value:r,settings:Xt(Xt({},i),{},{joystick:e})}};var ULe=Xt(Xt({component:FLe},YJ),{},{normalize:zLe});const VLe=n=>{if(n!==void 0){if(n instanceof File)try{return URL.createObjectURL(n)}catch{return}if(typeof n=="string"&&n.indexOf("blob:")===0)return n;throw Error("Invalid image format [undefined | blob |File].")}},$Le=(n,e)=>typeof e=="object"&&"image"in e,HLe=({image:n})=>({value:n});var WLe=Object.freeze({__proto__:null,sanitize:VLe,schema:$Le,normalize:HLe});const jLe=qt("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),GLe=qt("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),qLe=qt("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),XLe=qt("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),YLe=qt("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),KLe=qt("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function ZLe(){const{label:n,value:e,onUpdate:t,disabled:r}=Eo(),{popinRef:i,wrapperRef:o,shown:s,show:a,hide:l}=GJ(),u=z.useCallback(m=>{m.length&&t(m[0])},[t]),c=z.useCallback(m=>{m.stopPropagation(),t(void 0)},[t]),{getRootProps:f,getInputProps:d,isDragAccept:h}=$J({maxFiles:1,accept:"image/*",onDrop:u,disabled:r});return Te.createElement(La,{input:!0},Te.createElement(dl,null,n),Te.createElement(jLe,null,Te.createElement(qLe,{ref:i,hasImage:!!e,onPointerDown:()=>!!e&&a(),onPointerUp:l,style:{backgroundImage:e?`url(${e})`:"none"}}),s&&!!e&&Te.createElement(pI,null,Te.createElement(dJ,{onPointerUp:l,style:{cursor:"pointer"}}),Te.createElement(XLe,{ref:o,style:{backgroundImage:`url(${e})`}})),Te.createElement(GLe,f({isDragAccept:h}),Te.createElement("input",d()),Te.createElement(YLe,null,h?"drop image":"click or drop")),Te.createElement(KLe,{onClick:c,disabled:!e})))}var JLe=Xt({component:ZLe},WLe);const gV=cs().number(),QLe=(n,e)=>cs().array().length(2).every.number().test(n)&&cs().schema({min:gV,max:gV}).test(e),$E=n=>({min:n[0],max:n[1]}),KJ=(n,{bounds:[e,t]},r)=>{const i=Array.isArray(n)?$E(n):n,o={min:r[0],max:r[1]},{min:s,max:a}=Xt(Xt({},o),i);return[$f(Number(s),e,Math.max(e,a)),$f(Number(a),Math.min(t,s),t)]},eFe=({value:n,min:e,max:t})=>{const r={min:e,max:t},i=xJ($E(n),{min:r,max:r}),o=[e,t],s=Xt(Xt({},i),{},{bounds:o});return{value:KJ($E(n),s,n),settings:s}};var tFe=Object.freeze({__proto__:null,schema:QLe,format:$E,sanitize:KJ,normalize:eFe});const nFe=["value","bounds","onDrag"],rFe=["bounds"],iFe=qt("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function oFe(n){let{value:e,bounds:[t,r],onDrag:i}=n,o=Qn(n,nFe);const s=z.useRef(null),a=z.useRef(null),l=z.useRef(null),u=z.useRef(0),c=Yu("sizes","scrubberWidth"),f=Q1(({event:m,first:g,xy:[y],movement:[p],memo:w={}})=>{if(g){const{width:v,left:S}=s.current.getBoundingClientRect();u.current=v-parseFloat(c);const x=(m==null?void 0:m.target)===a.current||(m==null?void 0:m.target)===l.current;w.pos=FE((y-S)/v,t,r);const M=Math.abs(w.pos-e.min)-Math.abs(w.pos-e.max);w.key=M<0||M===0&&w.pos<=e.min?"min":"max",x&&(w.pos=e[w.key])}const b=w.pos+FE(p/u.current,0,r-t);return i({[w.key]:AOe(b,o[w.key])}),w}),d=`calc(${LE(e.min,t,r)} * (100% - ${c} - 8px) + 4px)`,h=`calc(${1-LE(e.max,t,r)} * (100% - ${c} - 8px) + 4px)`;return Te.createElement(gJ,Ir({ref:s},f()),Te.createElement(mJ,null,Te.createElement(vJ,{style:{left:d,right:h}})),Te.createElement(ZN,{position:"left",ref:a,style:{left:d}}),Te.createElement(ZN,{position:"right",ref:l,style:{right:h}}))}function sFe(){const{label:n,displayValue:e,onUpdate:t,settings:r}=Eo(),i=Qn(r,rFe);return Te.createElement(Te.Fragment,null,Te.createElement(La,{input:!0},Te.createElement(dl,null,n),Te.createElement(iFe,null,Te.createElement(oFe,Ir({value:e},r,{onDrag:t})),Te.createElement(gI,{value:e,settings:i,onUpdate:t,innerLabelTrim:0}))))}var aFe=Xt({component:sFe},tFe);const lFe=()=>{const n=new Map;return{on:(e,t)=>{let r=n.get(e);r===void 0&&(r=new Set,n.set(e,r)),r.add(t)},off:(e,t)=>{const r=n.get(e);r!==void 0&&(r.delete(t),r.size===0&&n.delete(e))},emit:(e,...t)=>{const r=n.get(e);if(r!==void 0)for(const i of r)i(...t)}}},uFe=["type","value"],cFe=["onChange","transient","onEditStart","onEditEnd"],ZJ=function(){const e=PIe(RIe(()=>({data:{}}))),t=lFe();this.storeId=FRe(),this.useStore=e;const r={},i=new Set;this.getVisiblePaths=()=>{const s=this.getData(),a=Object.keys(s),l=[];Object.entries(r).forEach(([c,f])=>{f.render&&a.some(d=>d.indexOf(c)===0)&&!f.render(this.get)&&l.push(c+".")});const u=[];return i.forEach(c=>{c in s&&s[c].__refCount>0&&l.every(f=>c.indexOf(f)===-1)&&(!s[c].render||s[c].render(this.get))&&u.push(c)}),u},this.setOrderedPaths=s=>{s.forEach(a=>i.add(a))},this.orderPaths=s=>(this.setOrderedPaths(s),s),this.disposePaths=s=>{e.setState(a=>{const l=a.data;return s.forEach(u=>{if(u in l){const c=l[u];c.__refCount--,c.__refCount===0&&c.type in _a&&delete l[u]}}),{data:l}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=s=>r[s]||{},this.getData=()=>e.getState().data,this.addData=(s,a)=>{e.setState(l=>{const u=l.data;return Object.entries(s).forEach(([c,f])=>{let d=u[c];if(d){const{type:h,value:m}=f,g=Qn(f,uFe);h!==d.type?Bu(Ar.INPUT_TYPE_OVERRIDE,h):((d.__refCount===0||a)&&Object.assign(d,g),d.__refCount++)}else u[c]=Xt(Xt({},f),{},{__refCount:1})}),{data:u}})},this.setValueAtPath=(s,a,l)=>{e.setState(u=>{const c=u.data;return z9(c[s],a,s,this,l),{data:c}})},this.setSettingsAtPath=(s,a)=>{e.setState(l=>{const u=l.data;return u[s].settings=Xt(Xt({},u[s].settings),a),{data:u}})},this.disableInputAtPath=(s,a)=>{e.setState(l=>{const u=l.data;return u[s].disabled=a,{data:u}})},this.set=(s,a)=>{e.setState(l=>{const u=l.data;return Object.entries(s).forEach(([c,f])=>{try{z9(u[c],f,void 0,void 0,a)}catch{}}),{data:u}})},this.getInput=s=>{try{return this.getData()[s]}catch{Bu(Ar.PATH_DOESNT_EXIST,s)}},this.get=s=>{var a;return(a=this.getInput(s))===null||a===void 0?void 0:a.value},this.emitOnEditStart=s=>{t.emit(`onEditStart:${s}`,this.get(s),s,Xt(Xt({},this.getInput(s)),{},{get:this.get}))},this.emitOnEditEnd=s=>{t.emit(`onEditEnd:${s}`,this.get(s),s,Xt(Xt({},this.getInput(s)),{},{get:this.get}))},this.subscribeToEditStart=(s,a)=>{const l=`onEditStart:${s}`;return t.on(l,a),()=>t.off(l,a)},this.subscribeToEditEnd=(s,a)=>{const l=`onEditEnd:${s}`;return t.on(l,a),()=>t.off(l,a)};const o=(s,a,l)=>{const u={};return Object.entries(s).forEach(([c,f])=>{if(c==="")return Bu(Ar.EMPTY_KEY);let d=_I(a,c);if(f.type===_a.FOLDER){const h=o(f.schema,d,l);Object.assign(u,h),d in r||(r[d]=f.settings)}else if(c in l)Bu(Ar.DUPLICATE_KEYS,c,d,l[c].path);else{const h=jRe(f,c,d,u);if(h){const{type:m,options:g,input:y}=h,{onChange:p,transient:w,onEditStart:b,onEditEnd:v}=g,S=Qn(g,cFe);u[d]=Xt(Xt(Xt({type:m},S),y),{},{fromPanel:!0}),l[c]={path:d,onChange:p,transient:w,onEditStart:b,onEditEnd:v}}else Bu(Ar.UNKNOWN_INPUT,d,f)}}),u};this.getDataFromSchema=s=>{const a={};return[o(s,"",a),a]}},JJ=new ZJ;function pw(){return z.useMemo(()=>new ZJ,[])}const fFe={collapsed:!1};function dFe(n,e){return{type:_a.FOLDER,schema:n,settings:Xt(Xt({},fFe),e)}}const hFe={disabled:!1};function nl(n,e){return{type:_a.BUTTON,onClick:n,settings:Xt(Xt({},hFe),e)}}const vV=n=>"__levaInput"in n,pFe=(n,e)=>{const t={},r=e?e.toLowerCase():null;return n.forEach(i=>{const[o,s]=pLe(i);(!r||o.toLowerCase().indexOf(r)>-1)&&hLe(t,s,{[o]:{__levaInput:!0,path:i}})}),t},mFe=["type","label","path","valueKey","value","settings","setValue","disabled"];function gFe(n){let{type:e,label:t,path:r,valueKey:i,value:o,settings:s,setValue:a,disabled:l}=n,u=Qn(n,mFe);const{displayValue:c,onChange:f,onUpdate:d}=hJ({type:e,value:o,settings:s,setValue:a}),h=Ih[e].component;return h?Te.createElement(rJ.Provider,{value:Xt({key:i,path:r,id:""+r,label:t,displayValue:c,value:o,onChange:f,onUpdate:d,settings:s,setValue:a,disabled:l},u)},Te.createElement(fOe,{disabled:l},Te.createElement(h,null))):(Bu(Ar.NO_COMPONENT_FOR_TYPE,e,r),null)}const vFe=qt("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function yFe({onClick:n,settings:e,label:t}){const r=nv();return Te.createElement(La,null,Te.createElement(vFe,{disabled:e.disabled,onClick:()=>n(r.get)},t))}const xFe=qt("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),bFe=qt("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),wFe=({label:n,opts:e})=>{let t=typeof n=="string"&&n.trim()===""?null:n,r=e;return typeof e.opts=="object"&&(r.label!==void 0&&(t=e.label),r=e.opts),{label:t,opts:r}};function SFe(n){const{label:e,opts:t}=wFe(n),r=nv();return Te.createElement(La,{input:!!e},e&&Te.createElement(dl,null,e),Te.createElement(xFe,null,Object.entries(t).map(([i,o])=>Te.createElement(bFe,{key:i,onClick:()=>o(r.get)},i))))}const _Fe=qt("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),QJ=100;function EFe(n,e){n.push(e),n.length>QJ&&n.shift()}const MFe=z.forwardRef(function({initialValue:n},e){const t=Yu("colors","highlight3"),r=Yu("colors","elevation2"),i=Yu("colors","highlight1"),[o,s]=z.useMemo(()=>[Oo(i).alpha(.4).toRgbString(),Oo(i).alpha(.1).toRgbString()],[i]),a=z.useRef([n]),l=z.useRef(n),u=z.useRef(n),c=z.useRef(),f=z.useCallback((m,g)=>{if(!m)return;const{width:y,height:p}=m,w=new Path2D,b=y/QJ,v=p*.05;for(let M=0;M<a.current.length;M++){const A=LE(a.current[M],l.current,u.current),T=b*M,C=p-A*(p-v*2)-v;w.lineTo(T,C)}g.clearRect(0,0,y,p);const S=new Path2D(w);S.lineTo(b*(a.current.length+1),p),S.lineTo(0,p),S.lineTo(0,0);const x=g.createLinearGradient(0,0,0,p);x.addColorStop(0,o),x.addColorStop(1,s),g.fillStyle=x,g.fill(S),g.strokeStyle=r,g.lineJoin="round",g.lineWidth=14,g.stroke(w),g.strokeStyle=t,g.lineWidth=2,g.stroke(w)},[t,r,o,s]),[d,h]=bOe(f);return z.useImperativeHandle(e,()=>({frame:m=>{(l.current===void 0||m<l.current)&&(l.current=m),(u.current===void 0||m>u.current)&&(u.current=m),EFe(a.current,m),c.current=requestAnimationFrame(()=>f(d.current,h.current))}}),[d,h,f]),z.useEffect(()=>()=>cancelAnimationFrame(c.current),[]),Te.createElement(_Fe,{ref:d})}),yV=n=>Number.isFinite(n)?n.toPrecision(2):n.toString(),CFe=z.forwardRef(function({initialValue:n},e){const[t,r]=z.useState(yV(n));return z.useImperativeHandle(e,()=>({frame:i=>r(yV(i))}),[]),Te.createElement("div",null,t)});function xV(n){return typeof n=="function"?n():n.current}function AFe({label:n,objectOrFn:e,settings:t}){const r=z.useRef(),i=z.useRef(xV(e));return z.useEffect(()=>{const o=window.setInterval(()=>{var s;document.hidden||(s=r.current)===null||s===void 0||s.frame(xV(e))},t.interval);return()=>window.clearInterval(o)},[e,t.interval]),Te.createElement(La,{input:!0},Te.createElement(dl,{align:"top"},n),t.graph?Te.createElement(MFe,{ref:r,initialValue:i.current}):Te.createElement(CFe,{ref:r,initialValue:i.current}))}const TFe=["type","label","key"],DFe={[_a.BUTTON]:yFe,[_a.BUTTON_GROUP]:SFe,[_a.MONITOR]:AFe},NFe=Te.memo(({path:n})=>{const[e,{set:t,setSettings:r,disable:i,storeId:o,emitOnEditStart:s,emitOnEditEnd:a}]=SOe(n);if(!e)return null;const{type:l,label:u,key:c}=e,f=Qn(e,TFe);if(l in _a){const d=DFe[l];return Te.createElement(d,Ir({label:u,path:n},f))}return l in Ih?Te.createElement(gFe,Ir({key:o+n,type:l,label:u,storeId:o,path:n,valueKey:c,setValue:t,setSettings:r,disable:i,emitOnEditStart:s,emitOnEditEnd:a},f)):(DRe(Ar.UNSUPPORTED_INPUT,l,n),null)});function PFe({toggle:n,toggled:e,name:t}){return Te.createElement(lOe,{onClick:()=>n()},Te.createElement(mI,{toggled:e}),Te.createElement("div",null,t))}const RFe=({name:n,path:e,tree:t})=>{const r=nv(),i=_I(e,n),{collapsed:o,color:s}=r.getFolderSettings(i),[a,l]=z.useState(!o),u=z.useRef(null),c=Yu("colors","folderWidgetColor"),f=Yu("colors","folderTextColor");return z.useLayoutEffect(()=>{u.current.style.setProperty("--leva-colors-folderWidgetColor",s||c),u.current.style.setProperty("--leva-colors-folderTextColor",s||f)},[s,c,f]),Te.createElement(BE,{ref:u},Te.createElement(PFe,{name:n,toggled:a,toggle:()=>l(d=>!d)}),Te.createElement(eQ,{parent:i,tree:t,toggled:a}))},eQ=Te.memo(({isRoot:n=!1,fill:e=!1,flat:t=!1,parent:r,tree:i,toggled:o})=>{const{wrapperRef:s,contentRef:a}=vLe(o),l=nv(),u=([f,d])=>{var h;return(vV(d)?(h=l.getInput(d.path))===null||h===void 0?void 0:h.order:l.getFolderSettings(_I(r,f)).order)||0},c=Object.entries(i).sort((f,d)=>u(f)-u(d));return Te.createElement(YN,{ref:s,isRoot:n,fill:e,flat:t},Te.createElement(uJ,{ref:a,isRoot:n,toggled:o},c.map(([f,d])=>vV(d)?Te.createElement(NFe,{key:d.path,valueKey:d.valueKey,path:d.path}):Te.createElement(RFe,{key:f,name:f,path:r,tree:d}))))}),OFe=qt("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${fJ}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),tQ=40,HE=qt("i",{$flexCenter:"",width:tQ,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),kFe=qt("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),IFe=qt("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${HE}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),LFe=qt("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),FFe=qt("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:tQ}}}}),BFe=Te.forwardRef(({setFilter:n,toggle:e},t)=>{const[r,i]=z.useState(""),o=z.useMemo(()=>ZZ(n,250),[n]),s=()=>{n(""),i("")},a=l=>{const u=l.currentTarget.value;e(!0),i(u)};return z.useEffect(()=>{o(r)},[r,o]),Te.createElement(Te.Fragment,null,Te.createElement(LFe,{ref:t,value:r,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:l=>l.stopPropagation(),onChange:a}),Te.createElement(HE,{onClick:()=>s(),style:{visibility:r?"visible":"hidden"}},Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},Te.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function zFe({setFilter:n,onDrag:e,onDragStart:t,onDragEnd:r,toggle:i,toggled:o,title:s,drag:a,filterEnabled:l,from:u}){const[c,f]=z.useState(!1),d=z.useRef(null);z.useEffect(()=>{var m,g;c?(m=d.current)===null||m===void 0||m.focus():(g=d.current)===null||g===void 0||g.blur()},[c]);const h=Q1(({offset:[m,g],first:y,last:p})=>{e({x:m,y:g}),y&&t({x:m,y:g}),p&&r({x:m,y:g})},{filterTaps:!0,from:({offset:[m,g]})=>[(u==null?void 0:u.x)||m,(u==null?void 0:u.y)||g]});return z.useEffect(()=>{const m=g=>{g.key==="L"&&g.shiftKey&&g.metaKey&&f(y=>!y)};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[]),Te.createElement(Te.Fragment,null,Te.createElement(kFe,{mode:a?"drag":void 0},Te.createElement(HE,{active:!o,onClick:()=>i()},Te.createElement(mI,{toggled:o,width:12,height:8})),Te.createElement(FFe,Ir({},a?h():{},{drag:a,filterEnabled:l}),s===void 0&&a?Te.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},Te.createElement("circle",{cx:"2",cy:"2",r:"2"}),Te.createElement("circle",{cx:"14",cy:"2",r:"2"}),Te.createElement("circle",{cx:"26",cy:"2",r:"2"}),Te.createElement("circle",{cx:"2",cy:"12",r:"2"}),Te.createElement("circle",{cx:"14",cy:"12",r:"2"}),Te.createElement("circle",{cx:"26",cy:"12",r:"2"})):s),l&&Te.createElement(HE,{active:c,onClick:()=>f(m=>!m)},Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},Te.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),Te.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),Te.createElement(IFe,{toggled:c},Te.createElement(BFe,{ref:d,setFilter:n,toggle:i})))}const UFe=["store","hidden","theme","collapsed"];function nQ(n){let{store:e,hidden:t=!1,theme:r,collapsed:i=!1}=n,o=Qn(n,UFe);const s=jJ(()=>nOe(r),[r]),[a,l]=z.useState(!i),u=typeof i=="object"?!i.collapsed:a,c=z.useMemo(()=>typeof i=="object"?f=>{typeof f=="function"?i.onChange(!f(!i.collapsed)):i.onChange(!f)}:l,[i]);return!e||t?null:Te.createElement(dI.Provider,{value:s},Te.createElement(VFe,Ir({store:e},o,{toggled:u,setToggle:c,rootClass:s.className})))}const VFe=Te.memo(({store:n,rootClass:e,fill:t=!1,flat:r=!1,neverHide:i=!1,oneLineLabels:o=!1,titleBar:s={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:a=!1,toggled:l,setToggle:u})=>{var c,f;const d=yLe(n),[h,m]=z.useState(""),g=z.useMemo(()=>pFe(d,h),[d,h]),[y,p]=pJ(),w=i||d.length>0,b=typeof s=="object"&&s.title||void 0,v=typeof s=="object"&&(c=s.drag)!==null&&c!==void 0?c:!0,S=typeof s=="object"&&(f=s.filter)!==null&&f!==void 0?f:!0,x=typeof s=="object"&&s.position||void 0,M=typeof s=="object"&&s.onDrag||void 0,A=typeof s=="object"&&s.onDragStart||void 0,T=typeof s=="object"&&s.onDragEnd||void 0;return Te.useEffect(()=>{p({x:x==null?void 0:x.x,y:x==null?void 0:x.y})},[x,p]),tOe(),Te.createElement(oJ.Provider,{value:{hideCopyButton:a}},Te.createElement(OFe,{ref:y,className:e,fill:t,flat:r,oneLineLabels:o,hideTitleBar:!s,style:{display:w?"block":"none"}},s&&Te.createElement(zFe,{onDrag:C=>{p(C),M==null||M(C)},onDragStart:C=>A==null?void 0:A(C),onDragEnd:C=>T==null?void 0:T(C),setFilter:m,toggle:C=>u(D=>C??!D),toggled:l,title:b,drag:v,filterEnabled:S,from:x}),w&&Te.createElement(iJ.Provider,{value:n},Te.createElement(eQ,{isRoot:!0,fill:t,flat:r,tree:g,toggled:l}))))}),$Fe=["isRoot"];let WE=!1,rh=null;function HFe(n){let{isRoot:e=!1}=n,t=Qn(n,$Fe);return z.useEffect(()=>(WE=!0,!e&&rh&&(rh.remove(),rh=null),()=>{e||(WE=!1)}),[e]),Te.createElement(nQ,Ir({store:JJ},t))}function WFe(n){z.useEffect(()=>{n&&!WE&&(rh||(rh=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(rh),qRe(Te.createElement(HFe,{isRoot:!0}),rh))),WE=!0)},[n])}const jFe=["store"];function mw(n){let{store:e}=n,t=Qn(n,jFe);const r=nv(),i=e===void 0?r:e;return Te.createElement(nQ,Ir({store:i},t))}function GFe(n,e,t,r,i){let o,s,a,l,u;return typeof n=="string"?(s=n,o=e,Array.isArray(t)?u=t:t&&("store"in t?(l=t,u=r):(a=t,Array.isArray(r)?u=r:(l=r,u=i)))):(o=n,Array.isArray(e)?u=e:(l=e,u=t)),{schema:o,folderName:s,folderSettings:a,hookSettings:l,deps:u||[]}}function gw(n,e,t,r,i){const{folderName:o,schema:s,folderSettings:a,hookSettings:l,deps:u}=GFe(n,e,t,r,i),c=typeof s=="function",f=z.useRef(!1),d=z.useRef(!0),h=jJ(()=>{f.current=!0;const D=typeof s=="function"?s():s;return o?{[o]:dFe(D,a)}:D},u),m=!(l!=null&&l.store);WFe(m);const[g]=z.useState(()=>(l==null?void 0:l.store)||JJ),[y,p]=z.useMemo(()=>g.getDataFromSchema(h),[g,h]),[w,b,v,S,x]=z.useMemo(()=>{const D=[],R=[],B={},F={},U={};return Object.values(p).forEach(({path:N,onChange:I,onEditStart:V,onEditEnd:L,transient:X})=>{D.push(N),I?(B[N]=I,X||R.push(N)):R.push(N),V&&(F[N]=V),L&&(U[N]=L)}),[D,R,B,F,U]},[p]),M=z.useMemo(()=>g.orderPaths(w),[w,g]),A=xLe(g,b,y),T=z.useCallback(D=>{const R=Object.entries(D).reduce((B,[F,U])=>Object.assign(B,{[p[F].path]:U}),{});g.set(R,!1)},[g,p]),C=z.useCallback(D=>g.get(p[D].path),[g,p]);return z.useEffect(()=>{const D=!d.current&&f.current;return g.addData(y,D),d.current=!1,f.current=!1,()=>g.disposePaths(M)},[g,M,y]),z.useEffect(()=>{const D=[];return Object.entries(v).forEach(([R,B])=>{B(g.get(R),R,Xt({initial:!0,get:g.get},g.getInput(R)));const F=g.useStore.subscribe(U=>{const N=U.data[R];return[N.disabled?void 0:N.value,N]},([U,N])=>B(U,R,Xt({initial:!1,get:g.get},N)),{equalityFn:h2});D.push(F)}),()=>D.forEach(R=>R())},[g,v]),z.useEffect(()=>{const D=[];return Object.entries(S).forEach(([R,B])=>D.push(g.subscribeToEditStart(R,B))),Object.entries(x).forEach(([R,B])=>D.push(g.subscribeToEditEnd(R,B))),()=>D.forEach(R=>R())},[S,x,g]),c?[A,T,C]:A}wc(Da.SELECT,zOe);wc(Da.IMAGE,JLe);wc(Da.NUMBER,DOe);wc(Da.COLOR,NLe);wc(Da.STRING,XOe);wc(Da.BOOLEAN,tke);wc(Da.INTERVAL,aFe);wc(Da.VECTOR3D,RLe);wc(Da.VECTOR2D,ULe);class qFe extends Hn{constructor(e){super(e),this.atomType="Cut Layout",this.type="cutLayout",this.name="Cut Layout",this.description="Extracts all parts tagged for cutting and lays them out on a sheet to cut.",this.placements=[],this.progress=0,this.cancelationHandle=void 0,this.addIO("input","geometry",this,"geometry",null),this.addIO("input","Material Thickness",this,"number",O.topLevelMolecule.unitsKey=="MM"?19:.75),this.addIO("input","Sheet Width",this,"number",O.topLevelMolecule.unitsKey=="MM"?2438:96),this.addIO("input","Sheet Height",this,"number",O.topLevelMolecule.unitsKey=="MM"?1219:48),this.addIO("input","Part Padding",this,"number",O.topLevelMolecule.unitsKey=="MM"?6:.25),this.addIO("output","geometry",this,"geometry",""),this.setValues(e)}draw(){super.draw();const e=O.widthToPixels(this.x),t=O.heightToPixels(this.y),r=O.widthToPixels(this.radius);O.c.beginPath(),O.c.fillStyle="#949294",O.c.moveTo(e-r/2,t+r/2),O.c.lineTo(e+r/2,t+r/2),O.c.lineTo(e+r/2,t),O.c.lineTo(e-r/2,t),O.c.lineTo(e-r/2,t+r/2),O.c.setLineDash([3,3]),O.c.stroke(),O.c.closePath(),O.c.beginPath(),O.c.lineTo(e+r/4,t-r/1.7),O.c.lineTo(e-r/4,t-r/2),O.c.lineTo(e-r/4,t),O.c.lineTo(e+r/2,t),O.c.lineTo(e+r/4,t-r/1.7),O.c.lineWidth=1,O.c.lineJoin="round",O.c.stroke(),O.c.setLineDash([]),O.c.closePath(),this.progress<1&&(O.c.beginPath(),O.c.fillStyle=this.centerColor,O.c.moveTo(O.widthToPixels(this.x),O.heightToPixels(this.y)),O.c.arc(O.widthToPixels(this.x),O.heightToPixels(this.y),O.widthToPixels(this.radius)/1.5,0,this.progress*Math.PI*2,!1),O.c.closePath(),O.c.fill())}updateValue(){if(super.updateValue(),this.inputs.every(l=>l.ready)){this.processing=!0;var e=this.findIOValue("geometry"),t=this.findIOValue("Material Thickness"),r=this.findIOValue("Sheet Width"),i=this.findIOValue("Sheet Height"),o=0,s=this.findIOValue("Part Padding"),a="cutLayout";if(!e){this.setAlert('"geometry" input is missing');return}O.cad.displayLayout(this.uniqueID,e,[this.placements],a,{thickness:t,width:r,height:i,sheetPadding:o,partPadding:s}).then(l=>{this.basicThreadValueProcessing(),l!=null&&this.setAlert(l),this.progress=1,this.cancelationHandle=void 0,this.processing=!1}).catch(this.alertingErrorHandler())}}updateValueButton(){if(super.updateValue(),this.inputs.every(l=>l.ready)){this.cancelationHandle&&this.cancelationHandle(),this.processing=!0;var e=this.findIOValue("geometry"),t=this.findIOValue("Material Thickness"),r=this.findIOValue("Sheet Width"),i=this.findIOValue("Sheet Height"),o=0,s=this.findIOValue("Part Padding"),a="cutLayout";if(!e){this.setAlert('"geometry" input is missing');return}O.cad.layout(this.uniqueID,e,a,wN((l,u)=>{this.progress=l,this.cancelationHandle=u}),wN(l=>{this.placements=l[0]}),{thickness:t,width:r,height:i,sheetPadding:o,partPadding:s}).then(l=>{this.basicThreadValueProcessing(),l!=null&&this.setAlert(l),this.progress=1,this.cancelationHandle=void 0,this.processing=!1}).catch(this.alertingErrorHandler())}}createLevaInputs(){let e=super.createLevaInputs();return e["Compute Layout"]=nl(()=>{this.updateValueButton()}),this.placements.forEach((t,r)=>{e[this.uniqueID+"position"+r]={value:{x:t.translate.x,y:t.translate.y,z:t.rotate},label:" "+r,onChange:(i,o)=>{const s=o.match(/position(\d+)/),a=s?parseInt(s[1],10):null;if(a!==null){const l=this.placements[a];(l.translate.x!==i.x||l.translate.y!==i.y||l.rotate!==i.z)&&(l.translate.x=i.x,l.translate.y=i.y,l.rotate=i.z,this.updateValue())}}}}),e}serialize(e){var t=super.serialize(e);return t.placements=this.placements,t}}class XFe extends Hn{constructor(e){super(e),this.addIO("output","geometry",this,"geometry",""),this.name="Shrink Wrap",this.atomType="Shrink Wrap",this.ioValues=[],this.description="Joins two or more drawings into a single sketch by filling in the space between them. Also called 'hull'",this.setValues(e),typeof this.ioValues<"u"&&this.ioValues.forEach(t=>{this.addIO("input",t.name,this,"geometry","")}),this.setValues([])}draw(){super.draw(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.arc(O.widthToPixels(this.x+this.radius/4),O.heightToPixels(this.y),O.widthToPixels(this.radius/2.5),0,Math.PI*2,!1),O.c.fill(),O.c.closePath(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.arc(O.widthToPixels(this.x-this.radius/4),O.heightToPixels(this.y),O.widthToPixels(this.radius/2.5),0,Math.PI*2,!1),O.c.fill(),O.c.closePath(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.rect(O.widthToPixels(this.x-this.radius/4),O.heightToPixels(this.y-this.radius),O.widthToPixels(this.radius/2),O.widthToPixels(this.radius/2)),O.c.fill(),O.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(t=>t.ready)){this.processing=!0;var e=[];this.inputs.forEach(t=>{t.connectors.length>0&&e.push(t.getValue())}),O.cad.shrinkWrapSketches(this.uniqueID,e).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler()),zy(this)}}serialize(e){var t=super.serialize(e),r=[];return this.inputs.forEach(i=>{if(i.type=="input"){var o={name:i.name,ioValue:i.getValue()};r.push(o)}}),r.forEach(i=>{t.ioValues.push(i)}),t}}class YFe extends Hn{constructor(e){super(e),this.addIO("input","x length",this,"number",10),this.addIO("input","y length",this,"number",10),this.addIO("output","geometry",this,"geometry",""),this.name="Rectangle",this.atomType="Rectangle",this.description="Creates a new rectangle.",this.setValues(e)}beginPropagation(){this.inputs.forEach(e=>{e.beginPropagation()})}draw(){super.draw(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.rect(O.widthToPixels(this.x-this.radius/2),O.heightToPixels(this.y-this.radius*2),O.widthToPixels(this.radius),O.widthToPixels(this.radius)),O.c.stroke(),O.c.closePath()}updateValue(){super.updateValue();var e=this.findIOValue("x length"),t=this.findIOValue("y length");O.cad.rectangle(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}class KFe extends Hn{constructor(e){super(e),this.addIO("output","geometry",this,"geometry",""),this.name="Loft",this.atomType="Loft",this.ioValues=[],this.description="Joins two or more shapes into a single solid by filling in the space between them. Also called 'hull'",this.closedSelection=0,this.addedIO=!1,this.setValues(e),typeof this.ioValues<"u"&&this.ioValues.forEach(t=>{this.addIO("input",t.name,this,"geometry","")}),this.setValues([])}draw(){super.draw(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.arc(O.widthToPixels(this.x+this.radius/4),O.heightToPixels(this.y),O.widthToPixels(this.radius/2.5),0,Math.PI*2,!1),O.c.fill(),O.c.closePath(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.arc(O.widthToPixels(this.x-this.radius/4),O.heightToPixels(this.y),O.widthToPixels(this.radius/2.5),0,Math.PI*2,!1),O.c.fill(),O.c.closePath(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.rect(O.widthToPixels(this.x-this.radius/4),O.heightToPixels(this.y-this.radius),O.widthToPixels(this.radius/2),O.widthToPixels(this.radius/2)),O.c.fill(),O.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(t=>t.ready)){this.processing=!0;var e=[];this.inputs.forEach(t=>{t.connectors.length>0&&e.push(t.getValue())}),O.cad.loftShapes(this.uniqueID,e).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler()),zy(this)}}serialize(e){var t=super.serialize(e),r=[];return this.inputs.forEach(i=>{if(i.type=="input"){var o={name:i.name,ioValue:i.getValue()};r.push(o)}}),r.forEach(i=>{t.ioValues.push(i)}),t.closedSelection=this.closedSelection,t}}class ZFe extends Hn{constructor(e){super(e),this.addIO("input","geometry",this,"geometry","",!1,!0),this.addIO("input","xDist",this,"number",0),this.addIO("input","yDist",this,"number",0),this.addIO("input","zDist",this,"number",0),this.addIO("output","geometry",this,"geometry",""),this.name="Move",this.atomType="Move",this.description="Moves a shape laterally in X, Y, Z.",this.setValues(e)}draw(){super.draw(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.arc(O.widthToPixels(this.x+this.radius/5),O.heightToPixels(this.y),O.widthToPixels(this.radius/2.5),0,Math.PI*2,!1),O.c.stroke(),O.c.closePath(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.arc(O.widthToPixels(this.x-this.radius/5),O.heightToPixels(this.y),O.widthToPixels(this.radius/2.5),0,Math.PI*2,!1),O.c.fill(),O.c.stroke(),O.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(o=>o.ready)){this.processing=!0;var e=this.findIOValue("geometry"),t=this.findIOValue("xDist"),r=this.findIOValue("yDist"),i=this.findIOValue("zDist");O.cad.move(this.uniqueID,e,t,r,i).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}}let JFe=class extends Hn{constructor(e){super(e),this.addIO("input","geometry",this,"geometry","",!1,!0),this.addIO("output","geometry",this,"geometry",""),this.name="Tag",this.atomType="Tag",this.height,this.description="Tags geometry so that it can be extracted later.",this.tags=[""],this.cutTag=!1,this.setValues(e)}draw(){super.draw("rect");let e=O.widthToPixels(this.radius);this.height=e,O.c.beginPath(),O.c.fillStyle="#484848",O.c.font=`${e*1.3}px Work Sans Bold`,O.c.fillText("@",O.widthToPixels(this.x-this.radius/1.5),O.heightToPixels(this.y)+this.height/1.5),O.c.fill(),O.c.closePath()}checkHasTag(){return this.cutTag}addTagsToAvailableTags(){let e=Array.from(new Set(O.topLevelMolecule.projectAvailableTags.concat(this.tags)));O.topLevelMolecule.projectAvailableTags=e}createLevaInputs(){let e={};return e[this.uniqueID+"cut_string"]={value:this.cutTag,label:"Cut List Tag",onChange:t=>{this.cutTag!==t&&(t===!0?(this.cutTag=!0,this.tags.push("cutLayout"),this.name=this.tags.toString(),this.updateValue()):(this.cutTag=!1,this.tags=this.tags.filter(r=>r!=="cutLayout"),this.name=this.tags.toString(),this.updateValue()))}},e[this.uniqueID+"custom_string"]={value:this.tags.filter(t=>t!=="cutLayout")[0],label:"Add Tag",disabled:!1,onChange:t=>{this.tags=this.cutTag?["cutLayout"]:[],this.tags.push(t),this.name=this.tags.toString(),this.updateValue()}},e}updateValue(){if(super.updateValue(),this.inputs.every(r=>r.ready)){this.processing=!0;var e=this.findIOValue("geometry"),t=this.tags;this.addTagsToAvailableTags(),O.cad.tag(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}sendToRender(){console.log("tag has nothing to render")}serialize(e={x:0,y:0}){var t=super.serialize(e);return t.tags=this.tags,t.cutTag=this.cutTag,t}};class QFe extends Hn{constructor(e){super(e),this.addIO("input","number of sides",this,"number",6),this.addIO("input","diameter",this,"number",10),this.addIO("output","geometry",this,"geometry",""),this.name="RegularPolygon",this.atomType="RegularPolygon",this.description="Creates a new regular polygon. Corners are on the diameter.",this.setValues(e)}draw(){super.draw();let e=O.widthToPixels(this.x),t=O.heightToPixels(this.y),r=O.widthToPixels(this.radius);O.c.beginPath(),O.c.fillStyle="#949294",O.c.moveTo(e-r/3,t+r/1.7),O.c.lineTo(e+r/3,t+r/1.7),O.c.lineTo(e+r/1.5,t),O.c.lineTo(e+r/2.5,t-r/1.7),O.c.lineTo(e-r/2.5,t-r/1.7),O.c.lineTo(e-r/1.5,t),O.c.lineTo(e-r/3,t+r/1.7),O.c.stroke(),O.c.closePath()}beginPropagation(e=!1){this.inputs.forEach(t=>{t.beginPropagation()})}updateValue(){super.updateValue();var e=this.findIOValue("number of sides"),t=this.findIOValue("diameter");O.cad.regularPolygon(this.uniqueID,t/2,e).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}class e4e extends Hn{constructor(e){super(e),this.name="Extrude",this.atomType="Extrude",this.description="Extrudes a 2D shape. Input can be negitive. ",this.addIO("input","geometry",this,"geometry","",!1,!0),this.addIO("input","height",this,"number",10),this.addIO("output","geometry",this,"geometry",""),this.setValues(e)}draw(){super.draw(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.rect(O.widthToPixels(this.x-this.radius/2),O.heightToPixels(this.y+this.radius),O.widthToPixels(this.radius),O.widthToPixels(this.radius/3)),O.c.fill(),O.c.stroke(),O.c.closePath(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.rect(O.widthToPixels(this.x-this.radius/2),O.heightToPixels(this.y-this.radius*2),O.widthToPixels(this.radius),O.widthToPixels(this.radius)),O.c.stroke(),O.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(r=>r.ready)){var e=this.findIOValue("geometry"),t=this.findIOValue("height");O.cad.extrude(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}}class t4e extends Hn{constructor(e){super(e),this.addIO("input","geometry1",this,"geometry",""),this.addIO("input","geometry2",this,"geometry",""),this.addIO("output","geometry",this,"geometry",""),this.name="Intersection",this.atomType="Intersection",this.description="The space shared by two shapes.",this.setValues(e)}draw(){super.draw();const e=O.widthToPixels(this.x),t=O.heightToPixels(this.y),r=O.widthToPixels(this.radius);O.c.beginPath(),O.c.fillStyle="#949294",O.c.moveTo(e-r/2,t+r/2),O.c.lineTo(e+r/2,t+r/2),O.c.lineTo(e+r/2,t),O.c.lineTo(e+r/4,t),O.c.lineTo(e+r/4,t-r/2),O.c.lineTo(e-r/4,t-r/2),O.c.lineTo(e-r/4,t),O.c.lineTo(e-r/2,t),O.c.lineTo(e-r/2,t+r/2),O.c.fill(),O.c.lineWidth=1,O.c.lineJoin="round",O.c.stroke(),O.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(e=>e.ready)){this.processing=!0;const e=this.findIOValue("geometry1"),t=this.findIOValue("geometry2");O.cad.intersect(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}}class n4e extends Hn{constructor(e){super(e),this.addIO("input","geometry2",this,"geometry",""),this.addIO("input","geometry1",this,"geometry",""),this.addIO("output","geometry",this,"geometry",""),this.name="Difference",this.atomType="Difference",this.description="Subtracts shape two from shape one.",this.setValues(e)}draw(){super.draw(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.arc(O.widthToPixels(this.x),O.heightToPixels(this.y),O.widthToPixels(this.radius/3),0,Math.PI*2,!1),O.c.fill(),O.c.stroke(),O.c.closePath(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.rect(O.widthToPixels(this.x-this.radius/2),O.heightToPixels(this.y-this.radius*2),O.widthToPixels(this.radius),O.widthToPixels(this.radius)),O.c.stroke(),O.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(e=>e.ready)){this.processing=!0;const e=this.findIOValue("geometry1"),t=this.findIOValue("geometry2");O.cad.difference(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}}class r4e extends Hn{constructor(e){super(e),this.type="constant",this.name="Constant",this.atomType="Constant",this.description="Defines a mathematical constant.",this.height=16,this.evolve=!1,this.min=0,this.max=20,this.value=10,this.setValues(e),this.addIO("output","number",this,"number",10),this.decreaseToProcessCountByOne()}draw(){super.draw("rect");let e=O.widthToPixels(this.x),t=O.heightToPixels(this.y),r=O.widthToPixels(this.radius);this.height=r,O.c.beginPath(),O.c.fillStyle="#484848",O.c.font=`${r}px Work Sans Bold`;const i="",o=r/1.5,s=O.c.measureText(i).width,a=e-s/2,l=t+this.height/2-o/2;O.c.fillText(i,a,l),O.c.fill(),O.c.closePath()}createLevaInputs(){let e={};return e["constant number"]={value:this.name,label:"Constant Name",disabled:!1,onChange:t=>{this.name=t}},e[this.uniqueID+this.name]={value:this.value,label:this.name,disabled:!1,onChange:t=>{this.value!==t&&(this.output.setValue(t),this.updateValue())}},e}updateValue(){this.value=this.output.getValue(),this.output.ready=!0,this.processing=!1}sendToRender(){O.writeToDisplay(this.uniqueID)}}class i4e extends Hn{constructor(e){super(e),this.addIO("output","result",this,"number",0),this.name="Equation",this.atomType="Equation",this.value=0,this.description="Defines a mathematical equation. Edit the output field to add or remove inputs.",this.height,this.currentEquation="x + y",this.setValues(e),this.addAndRemoveInputs(),this.setValues(e)}draw(){super.draw("rect");let e=O.widthToPixels(this.x),t=O.heightToPixels(this.y),r=O.widthToPixels(this.radius);this.height=r,O.c.beginPath(),O.c.fillStyle="#484848",O.c.font=`${r/1.3}px Work Sans Bold`;const i="(+)",o=r/1.5,s=O.c.measureText(i).width,a=e-s/2,l=t+this.height/2-o/2;O.c.fillText(i,a,l),O.c.fill(),O.c.closePath()}addAndRemoveInputs(){var e=/[a-zA-Z]/g;const t=this.currentEquation.match(e),r=()=>{this.inputs.forEach(o=>{t.includes(o.name)||(this.removeIO("input",o.name,this),r())})};r();for(var i in t)this.inputs.some(o=>o.Name===t[i])||this.addIO("input",t[i],this,"number",1)}evaluateEquation(){var e=this.currentEquation;this.name=this.currentEquation;var t=/[a-zA-Z]/g;const r=this.currentEquation.match(t);for(var i in r)for(var o=0;o<this.inputs.length;o++)this.inputs[o].name==r[i]&&(e=e.replace(this.inputs[o].name,this.findIOValue(this.inputs[o].name)));return O.limitedEvaluate(e)}createLevaInputs(e){let t={};if(this.inputs)return this.inputs.map(r=>{const i=()=>r.connectors.length>0;t.equation={value:this.currentEquation,label:"Current Equation",disabled:!1,onChange:o=>{this.currentEquation!==o&&(this.setEquation(o),e(this.currentEquation))},order:-3},t.result={value:this.output.value,label:"Result",disabled:!0},r.valueType!=="geometry"&&(t[r.name]={value:r.value,disabled:i(),onChange:o=>{r.setValue(o)},order:-2}),t["Save Equation"]=nl(o=>{this.setEquation(o("equation"))},{order:-1})}),t}updateValue(){try{this.addAndRemoveInputs(),this.inputs.every(e=>e.ready)&&(this.decreaseToProcessCountByOne(),this.value=this.evaluateEquation(),this.output.setValue(this.value),this.output.ready=!0)}catch(e){console.warn(e),this.setAlert(e)}}serialize(e={x:0,y:0}){var t=super.serialize(e);return t.currentEquation=this.currentEquation,t}setEquation(e){this.currentEquation=e.trim(),this.updateValue()}sendToRender(){console.log("equation")}}class o4e extends Hn{constructor(e){super(e),this.atomType="Extract Tag",this.type="extractTag",this.height,this.name="Extract Tag",this.description="Extracts geometry containing the specified tag.",this.addIO("input","geometry",this,"geometry",null,!1,!0),this.addIO("output","geometry",this,"geometry",null),this.tagIndex=0,this.tag,this.setValues(e)}draw(){super.draw("rect");let e=O.widthToPixels(this.x),t=O.heightToPixels(this.y),r=O.widthToPixels(this.radius);this.height=r,O.c.beginPath(),O.c.fillStyle="#484848",O.c.font=`${r}px Work Sans Bold`,O.c.fillText("@",e-r/1,t+this.height/2),O.c.fill(),O.c.closePath()}createLevaInputs(){let e={};const t=O.topLevelMolecule.projectAvailableTags;return e[this.uniqueID+"tag_ops"]={value:t[this.tagIndex],options:t,label:"Extract Tag",onChange:r=>{this.tagIndex=t.indexOf(r),this.tag!=t[this.tagIndex]&&(this.tag=t[this.tagIndex],this.updateValue())}},e}updateValue(){if(super.updateValue(),this.inputs.every(r=>r.ready)){this.processing=!0;var e=this.findIOValue("geometry"),t=this.tag;O.cad.extractTag(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}serialize(e={x:0,y:0}){var t=super.serialize(e);return t.tag=this.tag,t.tagIndex=this.tagIndex,t}}class rQ{constructor(){this.BOMitemName="name",this.numberNeeded=1,this.costUSD=0,this.source="www.example.com",this.height}}class nx extends Hn{constructor(e){super(e),this.nodesOnTheScreen=[],this.inputs=[],this.name="Molecule",this.description="Molecules provide an organizational structure to contain atoms. Double click on a molecule to enter it. Use the up arrow in the upper right hand corner of the screen to go up one level.",this.atomType="Molecule",this.centerColor="#949294",this.topLevel=!1,this.processing=!1,this.totalAtomCount=1,this.toProcess=0,this.awaitingPropagationFlag=!1,this.units={MM:"MM",Inches:"Inches"},this.unitsKey,this.BOMlist,this.compiledBom={},this.partToExport=null,this.projectAvailableTags=[],this.setValues(e),this.color}copyInputsFromParent(){this.parent&&this.parent.nodesOnTheScreen.forEach(e=>{e.atomType=="Input"&&this.placeAtom({parentMolecule:this,y:e.y,parent:this,name:e.name,atomType:"Input",uniqueID:O.generateUniqueID()},null,O.availableTypes,!0)})}draw(){const e=1-this.toProcess/this.totalAtomCount;this.toProcess>1?this.processing=!0:this.processing=!1,super.draw(),O.c.beginPath(),O.c.fillStyle=this.centerColor,O.c.moveTo(O.widthToPixels(this.x),O.heightToPixels(this.y)),O.c.arc(O.widthToPixels(this.x),O.heightToPixels(this.y),O.widthToPixels(this.radius)/2,0,e*Math.PI*2,!1),O.c.closePath(),O.c.fill()}createLevaInputs(){let e={};return e["molecule name"+this.uniqueID]={value:this.topLevel?O.currentRepoName:this.name,label:"Molecule Name",disabled:!!this.topLevel,onChange:t=>{this.name=t}},this.topLevel==!0&&(e["molecule name"+this.uniqueID+"units"]={value:this.unitsKey,label:"Project Units",options:Object.keys(this.units),disabled:!1,onChange:t=>{this.unitsKey=this.units[t]}}),this.inputs&&this.inputs.map(t=>{const r=()=>t.connectors.length>0;e[this.uniqueID+t.name]={value:t.value,label:t.name,disabled:r(),onChange:i=>{t.value!==i&&t.setValue(i)}},t.type&&t.valueType&&(e[this.uniqueID+t.name].type=Da[t.valueType.toUpperCase()]),t.valueType=="geometry"&&(e[this.uniqueID+t.name].disabled=!0)}),O.currentRepo.parentRepo!=null&&this.topLevel&&(e["Reload from Github"]=nl(()=>{this.reloadFork()})),e}createLevaExport(){let e={};const t=["STL","SVG","STEP"],r=this.nodesOnTheScreen.filter(i=>i.atomType==="Export");return e[this.uniqueID+"part_ops"]={value:this.partToExport?this.partToExport.fileName:"Pick a part to export",options:r.map(i=>i.inputs.filter(o=>o.name==="Part Name")[0].value),label:"Part",onChange:i=>{this.partToExport=r.find(o=>o.inputs.filter(s=>s.name==="Part Name")[0].value===i),this.updateValue()}},e[this.uniqueID+"file_ops"]={value:this.partToExport?this.partToExport.fileType:"Pick a file type",options:t,label:"File Type",onChange:i=>{this.partToExport&&(this.partToExport.type=i)}},e["Export As"]=nl(()=>{this.partToExport.exportFile()}),e}async reloadFork(){const e=new Of;let t=O.currentRepo.parentRepo.split("/"),r=t[0],i=t[1];e.request("GET /repos/{owner}/{repo}",{owner:r,repo:i}).then(o=>{e.rest.repos.getContent({owner:o.data.owner.login,repo:o.data.name,path:"project.abundance"}).then(s=>{O.topLevelMolecule.nodesOnTheScreen.forEach(l=>{l.deleteNode()});let a=JSON.parse(atob(s.data.content));a.filetypeVersion==1&&O.topLevelMolecule.deserialize(a),O.currentMolecule.selected=!0})})}async extractBomTags(){return await O.cad.extractBomList(this.output.value)}clickUp(e,t){super.clickUp(e,t),O.currentMolecule.nodesOnTheScreen.forEach(r=>{r.isMoving=!1})}selectBox(e,t,r,i){let o=Math.min(e,r),s=Math.max(e,r),a=Math.min(t,i),l=Math.max(t,i),u=O.widthToPixels(this.x),c=O.heightToPixels(this.y);u>=o&&u<=s&&c>=a&&c<=l&&(this.selected=!0)}doubleClick(e,t){e=O.pixelsToWidth(e),t=O.pixelsToHeight(t);var r=!1,i=O.distBetweenPoints(e,this.x,t,this.y);return i<this.radius*2&&(O.currentMolecule=this,this.selected=!1,r=!0),r}copy(){this.nodesOnTheScreen.forEach(e=>{e.selected&&O.atomsSelected.push(e.serialize({x:.05,y:.05}))})}undo(){if(O.recentMoleculeRepresentation.length>0){let e=JSON.parse(O.recentMoleculeRepresentation.pop());[...O.topLevelMolecule.nodesOnTheScreen].forEach((r,i)=>{r.deleteNode()}),e.fileTypeVersion==1&&O.topLevelMolecule.deserialize(e),O.currentMolecule.selected=!0}}deselect(){this.selected=!1}updateValue(e){this.nodesOnTheScreen.forEach(t=>{t.atomType=="Input"&&t.name==e&&t.updateValue()})}compileBom(){return this.extractBomTags().then(t=>{let r=[],i=[];if(t)return t.forEach(function(o){o.BOMitemName&&(r[o.BOMitemName]||(r[o.BOMitemName]=new rQ,r[o.BOMitemName].numberNeeded=0,r[o.BOMitemName].BOMitemName=o.BOMitemName,r[o.BOMitemName].source=o.source,i.push(r[o.BOMitemName])),r[o.BOMitemName].numberNeeded+=o.numberNeeded,r[o.BOMitemName].costUSD+=o.costUSD)}),i=i.sort((o,s)=>o.source>s.source?1:s.source>o.source?-1:0),i})}formatBom(){const e=function(a){return a.toLowerCase().includes("amazon")?"[Amazon]("+a+"?tag=maslowcnc01-20)":a};var t=`###### Note: Do not edit this file directly, it is automatically generated from the CAD model 
# Bill Of Materials 
 |Part|Number Needed|Price|Source| 
 |----|----------|-----|-----|`,r=O.topLevelMolecule.compiledBom,i=t,o=0,s=0;return r.length>0&&r.forEach(a=>{o+=a.numberNeeded,s+=a.costUSD,i=i+`
|`+a.BOMitemName+"|"+a.numberNeeded+"|$"+a.costUSD.toFixed(2)+"|"+e(a.source)+"|"}),i=i+`
|Total: |`+o+"|$"+s.toFixed(2)+"| |",i=i+`

 3xCOG MSRP: $`+(3*s).toFixed(2),i}createLevaBom(){let e={};if(this.compiledBom&&this.compiledBom.length>0)return this.compiledBom.map(t=>{e[t.BOMitemName]={value:t.numberNeeded,label:t.BOMitemName+" x",disabled:!0}}),e["Download List of Materials"]=nl(()=>{var t=O.currentRepoName+"-Bill-of-Materials.txt",r=this.formatBom(),i=new Blob([r],{type:"text/plain"});saveAs(i,t+".txt")}),e}recomputeMolecule(e){console.log("recompute molecule in molecule"+this.name);try{O.cad.molecule(this.uniqueID,e).then(()=>{this.basicThreadValueProcessing(),this.compileBom().then(t=>{this.compiledBom=t}),this.selected&&this.sendToRender()})}catch(t){this.setAlert(t)}}waitOnComingInformation(e){this.nodesOnTheScreen.forEach(t=>{t.name==e&&t.waitOnComingInformation()})}propagate(){try{this.updateValue()}catch(e){this.setAlert(e)}}beginPropagation(e=!1){this.nodesOnTheScreen.forEach(t=>{t.beginPropagation(e)}),this.inputs.forEach(t=>{t.beginPropagation()})}census(){return this.totalAtomCount=0,this.toProcess=0,this.nodesOnTheScreen.forEach(e=>{const t=e.census();this.totalAtomCount=this.totalAtomCount+t[0],this.toProcess=this.toProcess+t[1]}),[this.totalAtomCount,this.toProcess]}changeUnits(e){this.unitsIndex=e}goToParentMolecule(){O.currentMolecule.topLevel||(O.currentMolecule.nodesOnTheScreen.forEach(e=>{e.selected=!1}),O.currentMolecule.awaitingPropagationFlag==!0&&(O.currentMolecule.propagate(),O.currentMolecule.awaitingPropagationFlag=!1),O.currentMolecule=O.currentMolecule.parent)}async generateProjectThumbnail(){return O.cad.generateThumbnail(this.uniqueID)}async requestReadme(){var e=this.nodesOnTheScreen;e=e.filter(i=>i.atomType=="Molecule"||i.atomType=="Readme").sort(function(i,o){return O.distBetweenPoints(i.x,0,i.y,0)-O.distBetweenPoints(o.x,0,o.y,0)});const t=e.map(i=>i.requestReadme());let r=[];return await Promise.all(t).then(i=>{i.forEach(o=>{let s;o instanceof Array?o.forEach(a=>{s=a.readMeText,r.push({uniqueID:a.uniqueID,readMeText:s,svg:a.svg})}):(s=o.readMeText,o.svg&&(s=s.concat(` 

![readme](/readme`+o.uniqueID+`.svg)

`)),r.push({uniqueID:o.uniqueID,readMeText:s,svg:o.svg}))})}),r}serialize(e={x:0,y:0}){var t=[],r=[];this.nodesOnTheScreen.forEach(o=>{t.push(o.serialize()),o.output&&o.output.connectors.forEach(s=>{r.push(s.serialize())})});var i=super.serialize(e);return i.topLevel=this.topLevel,i.allAtoms=t,i.allConnectors=r,i.parentRepo=this.parentRepo,i.unitsKey=this.unitsKey,i.fileTypeVersion=1,i.compiledBom=this.compiledBom,i}deserialize(e,t={},r=!1){let i=[];return this.placeAtom({parentMolecule:this,x:.98,y:.5,parent:this,name:"Output",atomType:"Output",uniqueID:O.generateUniqueID()},!1),this.setValues(e),this.setValues(t),e.allAtoms&&e.allAtoms.forEach(o=>{const s=this.placeAtom(o,!1);i.push(s),this.setValues([])}),Promise.all(i).then(()=>{this.setValues([]),this.topLevel&&(O.totalAtomCount=O.numberOfAtomsToLoad,this.census(),this.beginPropagation(r)),e.allConnectors&&e.allConnectors.forEach(o=>{this.placeConnector(o)})})}async loadGithubMoleculeByName(e,t={},r={}){await new Of().request("GET /repos/{owner}/{repo}/contents/project.abundance",{owner:e.owner,repo:e.repoName}).then(o=>{let s=JSON.parse(atob(o.data.content)),a=this.remapIDs(s);a.atomType="GitHubMolecule";let l={},u=O.generateUniqueID();t.ioValues!=null?l={uniqueID:u,x:this.x,y:this.y,parentRepo:e,topLevel:!1,ioValues:t.ioValues}:l={uniqueID:u,parentRepo:e,x:O.pixelsToWidth(O.lastClick[0]),y:O.pixelsToHeight(O.lastClick[1]),topLevel:!1},O.currentMolecule.placeAtom(a,!0,l).then(()=>{r.forEach(c=>{c.ap1ID==t.uniqueID&&(c.ap1ID=u,this.parent.placeConnector(c)),c.ap2ID==t.uniqueID&&(c.ap2ID=u,this.parent.placeConnector(c))})})})}remapIDs(e){let t={};if(e.allAtoms)return e.allAtoms.forEach(r=>{let i=r.uniqueID,o=O.generateUniqueID();t[i]=o,r.uniqueID=o}),e.allConnectors.forEach(r=>{r.ap1ID&&t[r.ap1ID]&&(r.ap1ID=t[r.ap1ID]),r.ap2ID&&t[r.ap2ID]&&(r.ap2ID=t[r.ap2ID]),r.ap2ID&&t[r.ap2ID]&&(r.ap2ID=t[r.ap2ID])}),e}deleteNode(e=!0,t=!0,r=!1){[...this.nodesOnTheScreen].forEach(o=>{o.deleteNode(e,t,r)}),super.deleteNode(e,t,r)}async placeAtom(e,t,r){try{O.numberOfAtomsToLoad=O.numberOfAtomsToLoad+1;let s=null;for(var i in O.availableTypes)if(O.availableTypes[i].atomType==e.atomType){e.parent=this;var o=new O.availableTypes[i].creator(e);(o.atomType=="Molecule"||o.atomType=="GitHubMolecule")&&(s=o.deserialize(e,r,!0),t&&o.beginPropagation()),o.atomType=="Input"&&typeof e.name<"u"?(o.name=e.name,o.type=e.type,o.draw()):o.atomType=="Input"&&(o.name=O.incrementVariableName(o.name,this)),o.atomType=="Output"&&this.nodesOnTheScreen.forEach(a=>{a.atomType=="Output"&&a.deleteOutputAtom(!1)}),this.nodesOnTheScreen.push(o),t&&(o.atomType=="Molecule"&&(o.copyInputsFromParent(),s!=null?s.then(()=>{o.beginPropagation()}):o.beginPropagation()),o.updateValue())}return s}catch(s){return console.warn("Unable to place: "+e),console.warn(s),Promise.resolve()}}placeConnector(e){var t=!1,r=!1;this.nodesOnTheScreen.forEach(i=>{i.uniqueID==e.ap1ID&&(t=i.output),i.uniqueID==e.ap2ID&&i.inputs.forEach(o=>{o.name==e.ap2Name&&(r=o)})}),t&&r?new ZK({atomType:"Connector",attachmentPoint1:t,attachmentPoint2:r}):console.warn("Unable to place connector")}sendToRender(){O.writeToDisplay(this.uniqueID)}}class s4e extends Hn{constructor(e){super(e),this.name="Genetic Algorithm",this.atomType="Genetic Algorithm",this.description="Defines a new genetic algorithm which will simulate evolution to maximize the fitness function using the input population size and number of generations. Only constants which are upstream of this atom with evolve checked will be changed.",this.constantsToEvolve=[],this.population=[],this.individualIndex=0,this.generation=0,this.topFitness=0,this.evolutionInProcess=!1,this.addIO("input","fitness function",this,"number",0),this.addIO("input","population size",this,"number",50),this.addIO("input","number of generations",this,"number",10),this.setValues(e),this.updateValue()}draw(){super.draw();const e=O.widthToPixels(this.x),t=O.heightToPixels(this.y),r=O.widthToPixels(this.radius);O.c.beginPath(),O.c.arc(O.widthToPixels(this.x-this.radius/5),O.heightToPixels(this.y),O.widthToPixels(this.radius/2),Math.PI*3.4,Math.PI*2.7,!1),O.c.stroke(),O.c.closePath(),O.c.beginPath(),O.c.arc(O.widthToPixels(this.x+this.radius/5),O.heightToPixels(this.y),O.widthToPixels(this.radius/2),Math.PI*3.6,Math.PI*2.3,!0),O.c.stroke(),O.c.closePath(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.moveTo(e-r/3,t),O.c.lineTo(e+r/3,t),O.c.stroke(),O.c.closePath(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.moveTo(e-r/3,t-r/5),O.c.lineTo(e+r/3,t-r/5),O.c.stroke(),O.c.closePath(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.moveTo(e-r/3,t+r/5),O.c.lineTo(e+r/3,t+r/5),O.c.stroke(),O.c.closePath()}updateValue(){this.decreaseToProcessCountByOne(),this.evolutionInProcess&&(this.updateSidebar(),this.processing=!0,this.population[this.individualIndex].fitness=this.findIOValue("fitness function"),this.individualIndex=this.individualIndex+1,this.individualIndex<this.findIOValue("population size")?this.beginEvaluatingIndividual():(this.generation=this.generation+1,this.generation<this.findIOValue("number of generations")?(this.breedAndCullPopulation(),this.individualIndex=0,this.beginEvaluatingIndividual()):(this.evolutionInProcess=!1,this.processing=!1,this.population=this.population.sort((e,t)=>parseFloat(t.fitness)-parseFloat(e.fitness)),this.individualIndex=0,this.generation=0,this.beginEvaluatingIndividual(),this.updateSidebar())))}updateSidebar(){if(this.evolutionInProcess){let s=document.querySelector(".sideBar");for(;s.firstChild;)s.removeChild(s.firstChild);var e=document.createElement("ul");s.appendChild(e),e.setAttribute("class","sidebar-list");var t=document.createElement("LI");e.appendChild(t);var r=document.createElement("div");t.appendChild(r);var i=document.createTextNode("Evolving...   Individual: "+this.individualIndex+",    Generation: "+this.generation+",    Best Fitness Value: "+this.topFitness);r.appendChild(i),r.setAttribute("class","sidebar-subitem label-item")}else{var o=super.updateSidebar();this.createButton(o,this,"Evolve",()=>{this.evolutionInProcess=!0,this.updateConstantsList(),this.initializePopulation(),this.beginEvaluatingIndividual()})}}beginEvaluatingIndividual(){const e=this.population[this.individualIndex];e.genome.forEach(t=>{t.constantAtom.output.waitOnComingInformation()}),e.genome.forEach(t=>{t.constantAtom.output.value=t.newValue}),e.genome.forEach(t=>{t.constantAtom.updateValue()})}getRandomValue(e,t){return Math.random()*(t-e)+e}initializePopulation(){this.population=[],this.individualIndex=0,this.generation=0,this.topFitness=0;for(var e=0;e<this.findIOValue("population size");){var t=[];this.constantsToEvolve.forEach(i=>{var o={newValue:this.getRandomValue(i.min,i.max),constantAtom:i};t.push(o)});var r={genome:t,fitness:null};this.population.push(r),e++}}breedTwo(e,t){const r=e.genome.length;for(var i={fitness:null,genome:[]},o=0;o<r;){var s={newValue:null,constantAtom:e.genome[o].constantAtom};const l=e.genome[o].constantAtom.max,u=e.genome[o].constantAtom.min,c=.1*(l-u)*(Math.random()-.5);var a=null;Math.random()>.5?a=e.genome[o].newValue+c:a=t.genome[o].newValue+c,s.newValue=Math.min(Math.max(a,u),l),i.genome.push(s),o++}return i}breedAndCullPopulation(){this.population=this.population.sort((o,s)=>parseFloat(s.fitness)-parseFloat(o.fitness)),this.topFitness=this.population[0].fitness;const e=Math.round(this.population.length/5),t=this.population.slice(0,e);for(var r=[],i=0;i<this.population.length-e;){const o=Math.round(Math.random()*(t.length-1)),s=Math.round(Math.random()*(t.length-1)),a=this.breedTwo(t[o],t[s]);r.push(a),i=i+1}this.population=t.concat(r)}updateConstantsList(){this.constantsToEvolve=[],this.inputs.forEach(e=>{e.connectors.forEach(t=>{t.walkBackForConstants(r=>{this.addToConstantsList(r)})})})}addToConstantsList(e){this.constantsToEvolve.push(e)}}let a4e=class extends Hn{constructor(e){super(e),this.name,this.description="Adds an input to the parent molecule. If the parent molecule is the top level of the project then the input will be available when the project is shared or imported into another project. Name is editable",this.value=10,this.atomType="Input",this.height,this.type="number",this.oldName=this.name,this.radius=this.radius*1.3,this.addIO("output","number or geometry",this,this.type,this.value),typeof this.parent<"u"&&this.parent.addIO("input",this.name,this.parent,this.type,this.value),this.setValues(e)}fittingString(e,t,r){var i=e.measureText(t).width,o="",s=e.measureText(o).width;if(i<=r||i<=s)return t;for(var a=t.length;i>=r-s&&a-- >0;)t=t.substring(0,a),i=e.measureText(t).width;return t+o}draw(){this.x=.04;let e=O.widthToPixels(this.x),t=O.heightToPixels(this.y),r=O.widthToPixels(this.radius);this.height=r,this.name!=this.oldName&&this.updateParentName(),this.processing?O.c.fillStyle="blue":this.selected?(O.c.fillStyle=this.selectedColor,O.c.strokeStyle=this.defaultColor,this.color=this.selectedColor,this.strokeColor=this.defaultColor):(O.c.fillStyle=this.defaultColor,O.c.strokeStyle=this.selectedColor,this.color=this.defaultColor,this.strokeColor=this.selectedColor),this.inputs.forEach(i=>{i.draw()}),this.output&&this.output.draw(),O.c.beginPath(),O.c.moveTo(0,t+this.height/2),O.c.lineTo(55,t+this.height/2),O.c.lineTo(e+r,t),O.c.lineTo(55,t-this.height/2),O.c.lineTo(0,t-this.height/2),O.c.lineWidth=1,O.c.fill(),O.c.closePath(),O.c.stroke(),O.c.font="11px Work Sans",O.c.textAlign="start",O.c.fillStyle="black",O.c.width=20,O.c.textOverflow="ellipsis",O.c.fillText(this.fittingString(O.c,this.name,50),5,t+3)}deleteNode(e=!0,t=!0,r=!1){typeof this.parent<"u"&&this.parent.removeIO("input",this.name,this.parent,r),super.deleteNode(e,t,r)}updateParentName(){this.parent.inputs.forEach(e=>{e.name==this.oldName&&(e.name=this.name)}),this.oldName=this.name}updateValue(){this.parent.inputs.forEach(e=>{e.name==this.name&&(this.decreaseToProcessCountByOne(),this.value=e.getValue(),this.output.waitOnComingInformation(),this.output.setValue(this.value),this.parent.updateIO("input",this.name,this.parent,this.type,this.value))})}createLevaInputs(){let e={};return e[this.uniqueID]={value:this.name,label:"Input Name",disabled:!1,onChange:t=>{this.name!==t&&(this.name=t)}},e[this.uniqueID+"type"]={value:this.type,label:"Input Type",disabled:!1,options:["number","string","geometry","array"],onChange:t=>{this.type!==t&&(this.type=t,this.output.valueType=t,typeof this.parent<"u"&&this.parent.updateIO("input",this.name,this.parent,this.type,this.value))}},e}getOutput(){return this.output.getValue()}serialize(e={x:0,y:0}){var t=super.serialize(e);return t.type=this.type,t}};class l4e extends Hn{constructor(e){super(e),this.atomType="Readme",this.readmeText="Readme text here",this.type="readme",this.name="README",this.radius=1/100,this.description="A place to put project notes. These will appear in the GitHub readme and in the description of molecules up the chain. Markdown is supported. ",this.height=10,this.global=!0,this.addIO("input","geometry",this,"geometry",void 0),this.setValues(e)}draw(){super.draw("square");let e=O.widthToPixels(this.radius);this.height=e,O.c.beginPath(),O.c.fillStyle="#484848",O.c.font=`${e*2.5}px Work Sans Bold`,O.c.fillText("",O.widthToPixels(this.x-this.radius/1.5),O.heightToPixels(this.y)+this.height/1.5),O.c.fill(),O.c.closePath()}setValue(e){this.readmeText=e}createLevaInputs(){let e={};return e[this.name+this.uniqueID]={value:this.readmeText,label:this.name,rows:10,onChange:t=>{this.readmeText!==t&&this.setValue(t)}},e}async generateProjectThumbnail(){let e=this.findIOValue("geometry");return e!==void 0?O.cad.generateThumbnail(e):null}async requestReadme(){return this.global?this.generateProjectThumbnail().then(e=>e!==null?{readMeText:this.readmeText,svg:e,uniqueID:this.uniqueID}:{readMeText:this.readmeText,svg:null,uniqueID:this.uniqueID}).catch(e=>{console.log(e)}):[]}sendToRender(){console.log("nothing to render in readme")}deleteNode(){super.deleteNode()}serialize(e){var t=super.serialize(e);return t.readmeText=this.readmeText,t.global=this.global,t}}class u4e extends Hn{constructor(e){super(e),this.atomType="Add BOM Tag",this.type="addBOMTag",this.name="Add BOM Tag",this.description="Adds a Bill Of Materials tag which appears in molecules containing this atom and in the GitHub project bill of materials.",this.BOMitem=new rQ,this.radius=1/65,this.height,this.addIO("input","geometry",this,"geometry",null,!1,!0),this.addIO("output","geometry",this,"geometry",null),this.setValues(e)}updateValue(){if(super.updateValue(),this.inputs.every(r=>r.ready)){var e=this.findIOValue("geometry"),t=this.BOMitem;O.cad.bom(this.uniqueID,e,t).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}draw(){super.draw("rect");let e=O.widthToPixels(this.x),t=O.heightToPixels(this.y),r=O.widthToPixels(this.radius);this.height=r/1.3,O.c.beginPath(),O.c.fillStyle="#484848",O.c.font=`${r/1.5}px Work Sans Bold`,O.c.fillText("$$$",e-r/2,t+this.height/3),O.c.fill(),O.c.closePath()}createLevaInputs(){let e={};for(const t in this.BOMitem)e[t]={value:this.BOMitem[t],label:t,disabled:!1,onChange:r=>{this.BOMitem[t]=r,this.updateValue()}};return e}serialize(e){var t=super.serialize(e);return t.BOMitem=Object.assign({},this.BOMitem),t}}class c4e extends Hn{constructor(e){super(e),this.addIO("input","geometry",this,"geometry","",!1,!0),this.addIO("input","x-axis degrees",this,"number",0),this.addIO("input","y-axis degrees",this,"number",0),this.addIO("input","z-axis degrees",this,"number",0),this.addIO("output","geometry",this,"geometry",""),this.name="Rotate",this.atomType="Rotate",this.description="Rotates the input geometry around the X, Y, or Z axis. Inputs are degrees.",this.setValues(e)}draw(){super.draw(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.ellipse(O.widthToPixels(this.x),O.heightToPixels(this.y),O.widthToPixels(this.radius/1.5),O.widthToPixels(this.radius/2.3),Math.PI/4,0,Math.PI*2),O.c.stroke(),O.c.closePath()}createLevaInputs(){let e={};if(this.inputs)return this.inputs.map(t=>{const r=()=>t.connectors.length>0;t.valueType!=="geometry"&&(e[this.uniqueID+t.name]={value:t.value,label:t.name,step:.5,disabled:r(),onChange:i=>{t.value!==i&&(console.log(t.name,i),t.setValue(i))}})}),e}updateValue(){if(super.updateValue(),this.inputs.every(o=>o.ready)){this.processing=!0;var e=this.findIOValue("geometry"),t=this.findIOValue("x-axis degrees"),r=this.findIOValue("y-axis degrees"),i=this.findIOValue("z-axis degrees");O.cad.rotate(e,t,r,i,this.uniqueID).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}}class f4e extends nx{constructor(e){super(e),this.name="Github Molecule",this.atomType="GitHubMolecule",this.topLevel=!1,this.centerColor="black",this.description="Project imported from GitHub",this.gitHubUniqueID,this.setValues(e)}doubleClick(e,t){var r=!1,i=O.distBetweenPoints(e,this.x,t,this.y);return i<this.radius&&(r=!0),r}createLevaInputs(){let e={};if(this.inputs)return this.inputs.map(t=>{const r=()=>t.connectors.length>0;t.valueType!=="geometry"&&(e[this.uniqueID+t.name]={value:t.value,label:t.name,disabled:r(),onChange:i=>{t.value!==i&&t.setValue(i)}})}),e["Reload From Github"]=nl(()=>this.reloadMoleculeFromGithub()),e}reloadMoleculeFromGithub(){var e=this.serialize(),t=this.parent.serialize().allConnectors;this.deleteNode(!1,!1,!0);let i=this.parentRepo;this.loadGithubMoleculeByName(i,e,t)}}class d4e extends Hn{constructor(e){super(e),typeof this.parent<"u"&&this.parent.addIO("output","Geometry",this.parent,"geometry",this.parent.path),this.type="output",this.name="Output",this.value=null,this.atomType="Output",this.height=16,this.radius=1/75,this.path="",this.description="Connect geometry here to make it available in the next level up. ",this.setValues(e),this.addIO("input","number or geometry",this,"geometry",void 0)}updateValue(){if(super.updateValue(),this.inputs.every(t=>t.ready)){this.decreaseToProcessCountByOne();var e=this.findIOValue("number or geometry");O.cad.output(this.uniqueID,e).then(()=>{this.basicThreadValueProcessing(),this.parent.recomputeMolecule(this.uniqueID)}).catch(this.alertingErrorHandler()),this.parent.propagate()}}sendToRender(){try{O.writeToDisplay(this.uniqueID)}catch(e){this.setAlert(e)}}waitOnComingInformation(){this.parent.output.waitOnComingInformation()}deleteNode(){}deleteOutputAtom(e=!0){super.deleteNode(!1,e)}draw(){const e=O.widthToPixels(this.x),t=O.heightToPixels(this.y),r=O.widthToPixels(this.radius);this.height=r,this.processing?O.c.fillStyle="blue":this.selected?(O.c.fillStyle=this.selectedColor,O.c.strokeStyle=this.defaultColor,this.color=this.selectedColor,this.strokeColor=this.defaultColor):(O.c.fillStyle=this.defaultColor,O.c.strokeStyle=this.selectedColor,this.color=this.defaultColor,this.strokeColor=this.selectedColor),this.inputs.forEach(i=>{i.draw()}),O.c.beginPath(),O.c.font="10px Work Sans",O.c.textAlign="start",O.c.fillText(this.name,e-r,t-r*1.5),O.c.moveTo(e+r-r*2,t-this.height),O.c.lineTo(e+r-5,t),O.c.lineTo(e+r-r*2,t+this.height),O.c.lineTo(e+r-r*2,t-this.height),O.c.fillStyle=this.color,O.c.fill(),O.c.lineWidth=3,O.c.lineJoin="round",O.c.stroke(),O.c.closePath()}}class h4e extends Hn{constructor(e){super(e),this.name="Gcode",this.atomType="Gcode",this.height=16,this.description="Generates Maslow gcode from the input geometry.",this.gcodeString="",this.addIO("input","geometry",this,"geometry",null),this.addIO("input","tool size",this,"number",6.35),this.addIO("input","passes",this,"number",6),this.addIO("input","speed",this,"number",500),this.addIO("input","tabs",this,"string","true"),this.addIO("input","safe height",this,"number",6),this.addIO("output","gcode",this,"geometry",""),this.setValues(e)}draw(){super.draw(),O.c.beginPath(),O.c.fillStyle="#484848",O.c.font=`${O.widthToPixels(this.radius)}px Work Sans Bold`,O.c.fillText("G",O.widthToPixels(this.x-this.radius/3),O.heightToPixels(this.y)+this.height/3),O.c.fill(),O.c.closePath()}updateValue(){super.updateValue();try{var e=this.findIOValue("geometry"),t=this.findIOValue("tool size"),r=this.findIOValue("passes"),i=this.findIOValue("speed"),o=this.findIOValue("tabs"),s=this.findIOValue("safe height");const a={op:"gcode",readPath:e,toolSize:t,passes:r,speed:i,tabs:o,safeHeight:s,writePath:this.path};this.gcodeString=this.basicThreadValueProcessing(a)}catch(a){this.setAlert(a)}}updateSidebar(){const e=super.updateSidebar();this.createButton(e,this,"Download G-Code",()=>{this.downloadGCode()})}downloadGCode(){try{var e=this.findIOValue("geometry"),t=this.findIOValue("tool size"),r=this.findIOValue("passes"),i=this.findIOValue("speed"),o=this.findIOValue("tabs"),s=this.findIOValue("safe height");const a={op:"gcode",readPath:e,toolSize:t,passes:r,speed:i,tabs:o,safeHeight:s,writePath:this.path},{answer:l}=window.ask(a)}catch(a){this.setAlert(a)}}}class p4e extends Hn{constructor(e){super(e),this.name="Code",this.atomType="Code",this.description="Defines a Replicad code block.",this.code=`//Inputs:[input1, height];

let shape = drawRectangle(5,7)

const newPlane = new Plane().pivot(0, 'Y');

 return { geometry: [shape.sketchOnPlane(newPlane).extrude(7)], tags: [],
      color: '#A3CE5B',
      plane: newPlane}


    /**
    To Use the Code Atom, enter your inputs to the input list a.e Inputs:[shape, height]
    If your input is connected to another atom with a replicad geometry you can access its geometry by looking up its ID in your library. a.e library[Input1].geometry[0] 
    Use any replicad available methods to modify your geometry. Learn more about all of the available methods at 
    https://replicad.xyz/docs/introapp/UserGuide.html 
    Return a replicad object that includes geometry, color, tags and plane. 


    Example Code Atom:

      Inputs:[shape, x];

      let finalShape = library[shape].geometry[0].clone.translate[x,0,0]

      return {geometry: finalShape, color: library[shape].color, plane: library[shape].plane, tags: library[shape].tags }

      - See more examples at _______ 


    */
`,this.addIO("output","geometry",this,"geometry",""),this.setValues(e),this.parseInputs(!1)}draw(){super.draw(),O.c.beginPath(),O.c.fillStyle="#949294",O.c.font=`${O.widthToPixels(this.radius)}px Work Sans Bold`,O.c.fillText("</>",O.widthToPixels(this.x-this.radius/1.5),O.heightToPixels(this.y+this.radius*1.5))}beginPropagation(){this.inputs.length==0&&this.updateValue();var e=!1;this.inputs.forEach(t=>{t.connectors.length>0&&(e=!0)}),e||this.updateValue()}createLevaInputs(){let e={};if(this.inputs)return this.inputs.map(t=>{const r=()=>t.connectors.length>0;e[this.uniqueID+t.name]={value:t.value,label:t.name,disabled:r(),onChange:i=>{t.value!==i&&t.setValue(i)}}}),e["Edit Code"]=nl(()=>this.editCode()),e["Save Code"]=nl(()=>this.saveCode()),e["Close Editor"]=nl(()=>this.closeCode()),e}updateCode(e){this.code=e,this.updateValue(),this.sendToRender()}updateValue(e){if(super.updateValue(),this.parseInputs(),this.inputs.every(i=>i.ready)){var t=[];this.inputs.forEach(i=>{i.connectors.length>0&&i.type=="input"&&t.push(i.getValue())});var r={};this.inputs.forEach(i=>{r[i.name]=i.value}),O.cad.code(this.uniqueID,this.code,r).then(i=>{i===!0?this.basicThreadValueProcessing():this.customThreadValueProcessing(i)}).catch(this.alertingErrorHandler())}}customThreadValueProcessing(e){this.decreaseToProcessCountByOne(),this.clearAlert(),this.output&&(this.value=e,this.output.setValue(e),this.output.ready=!0),this.processing=!1}parseInputs(e=!0){var t=/Inputs:\[\s*([^)]+?)\s*\]/.exec(this.code);if(t){t[1]&&(t=t[1].split(/\s*,\s*/));let o=[];for(var r in t){t[r]=t[r].split(/\s*=\s*/);let s=t[r][0];o.push(s);let a=t[r][1]?t[r][1]:10;this.inputs.some(l=>l.Name===s)||this.addIO("input",s,this,"geometry",a,e)}for(var i in this.inputs)o.includes(this.inputs[i].name)||this.removeIO("input",this.inputs[i].name,this)}}doubleClick(e,t){let r=O.widthToPixels(this.x),i=O.heightToPixels(this.y);var o=!1,s=O.distBetweenPoints(e,r,t,i);return s<this.radius&&(this.editCode(),o=!0),o}editCode(){document.getElementById("code-window").classList.remove("code-off")}saveCode(){document.getElementById("save-code-button").click()}closeCode(){document.getElementById("close-code-button").click()}serialize(e){var t=super.serialize(e);return t.codeVersion=1,t.code=this.code,t}}let m4e=class extends Hn{constructor(e){super(e),this.addIO("output","geometry",this,"geometry",""),this.name="Group",this.atomType="Group",this.ioValues=[],this.removeCutawayGeometry=!0,this.description="Groups shapes together into one. Shapes are allowed to overlap.",this.setValues(e),typeof this.ioValues<"u"&&this.ioValues.forEach(t=>{this.addIO("input",t.name,this,"geometry","")}),this.setValues([])}beginPropagation(){zy(this),super.beginPropagation()}draw(){super.draw();const e=O.widthToPixels(this.x),t=O.heightToPixels(this.y),r=O.widthToPixels(this.radius);O.c.beginPath(),O.c.fillStyle="#949294",O.c.moveTo(e-r/2,t+r/2),O.c.lineTo(e+r/2,t+r/2),O.c.lineTo(e+r/2,t),O.c.lineTo(e-r/2,t),O.c.lineTo(e-r/2,t+r/2),O.c.stroke(),O.c.closePath(),O.c.beginPath(),O.c.lineTo(e+r/4,t-r/2),O.c.lineTo(e-r/4,t-r/2),O.c.lineTo(e-r/4,t),O.c.lineTo(e+r/2,t),O.c.lineTo(e+r/4,t-r/2),O.c.lineWidth=1,O.c.lineJoin="round",O.c.stroke(),O.c.closePath()}updateValue(){if(this.inputs.every(t=>t.ready)){try{var e=[];this.inputs.forEach(r=>{r.connectors.length>0&&r.type=="input"&&e.push(r.getValue())});const t={op:"group",paths:e,writePath:this.path};this.basicThreadValueProcessing(t,"group"),this.clearAlert()}catch(t){this.setAlert(t)}zy(this)}}serialize(e){var t=super.serialize(e),r=[];return this.inputs.forEach(i=>{if(i.connectors.length>0){var o={name:i.name,ioValue:i.getValue()};r.push(o)}}),t.ioValues=r,t}};class g4e extends Hn{constructor(t){super(t);i8(this,"getAFile",async function(){const t=new Of,r=this.fileName;return await t.rest.repos.getContent({owner:O.currentUser,repo:O.currentRepoName,path:r})});this.name="Import",this.atomType="Import",this.description="Import Atom, let's you choose a type of file to import and use in your design.",this.file=null,this.fileName=null,this.type=null,this.sha=null,this.SVGwidth=10,this.addIO("output","geometry",this,"geometry",""),this.setValues(t)}draw(){super.draw(),O.c.beginPath(),O.c.fillStyle="#484848",O.c.font=`${O.widthToPixels(this.radius)}px Work Sans Bold`,O.c.fillText("G",O.widthToPixels(this.x-this.radius/3),O.heightToPixels(this.y)+this.height/3),O.c.fill(),O.c.closePath()}updateValue(){super.updateValue(),this.processing=!0;try{this.fileName!=null&&this.getAFile().then(t=>{this.sha=t.data.sha,this.file=this.newBlobFromBase64(t);let r=this.file,i=this.type,o=i=="STL"?O.cad.importingSTL:i=="SVG"?O.cad.importingSVG:i=="STEP"?O.cad.importingSTEP:null;if(o==null)throw"Invalid file type";o(this.uniqueID,r,this.SVGwidth).then(s=>{this.basicThreadValueProcessing(),this.sendToRender()})})}catch{this.alertingErrorHandler()}}newBlobFromBase64(t){let r=t.data.content,i=atob(r);if(this.type=="SVG")return i;let o=[];for(let s=0;s<i.length;s++)o.push(i.charCodeAt(s));return new Blob([new Uint8Array(o)],{type:"application/octet-stream"})}beginPropagation(){this.fileName!=null&&this.updateValue()}createLevaInputs(){let t={};if(this.fileName==null){const r=["STL","SVG","STEP"];let i=0;t[this.uniqueID+"file_ops"]={options:r,label:"File Type",onChange:o=>{i=r.indexOf(o)}},t["Load File"]=nl(()=>this.loadFile(r[i]))}else this.type=="SVG"&&(t.Width={value:this.SVGwidth,label:"Width",onChange:r=>{this.SVGwidth=r,this.updateValue()}}),t["Loaded File"]={value:this.fileName,label:"Loaded File",disabled:!0};return t}loadFile(t){var r=document.getElementById("fileLoaderInput");r.accept="."+t.toLowerCase(),r.click(),this.type=t}deleteNode(){super.deleteNode();var t=document.getElementById("fileDeleteInput");t.value=this.fileName,t.click()}updateFile(t,r){this.fileName=t.name,this.sha=r,this.updateValue()}serialize(t={x:0,y:0}){var r=super.serialize(t);return r.fileName=this.fileName,r.name=this.name,r.type=this.type,r.SVGwidth=this.SVGwidth,r}}var iQ={exports:{}};(function(n,e){(function(t,r){r()})(ks,function(){function t(u,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function r(u,c,f){var d=new XMLHttpRequest;d.open("GET",u),d.responseType="blob",d.onload=function(){l(d.response,c,f)},d.onerror=function(){console.error("could not download file")},d.send()}function i(u){var c=new XMLHttpRequest;c.open("HEAD",u,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function o(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(c)}}var s=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof ks=="object"&&ks.global===ks?ks:void 0,a=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=s.saveAs||(typeof window!="object"||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(u,c,f){var d=s.URL||s.webkitURL,h=document.createElement("a");c=c||u.name||"download",h.download=c,h.rel="noopener",typeof u=="string"?(h.href=u,h.origin===location.origin?o(h):i(h.href)?r(u,c,f):o(h,h.target="_blank")):(h.href=d.createObjectURL(u),setTimeout(function(){d.revokeObjectURL(h.href)},4e4),setTimeout(function(){o(h)},0))}:"msSaveOrOpenBlob"in navigator?function(u,c,f){if(c=c||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(t(u,f),c);else if(i(u))r(u,c,f);else{var d=document.createElement("a");d.href=u,d.target="_blank",setTimeout(function(){o(d)})}}:function(u,c,f,d){if(d=d||open("","_blank"),d&&(d.document.title=d.document.body.innerText="downloading..."),typeof u=="string")return r(u,c,f);var h=u.type==="application/octet-stream",m=/constructor/i.test(s.HTMLElement)||s.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent);if((g||h&&m||a)&&typeof FileReader<"u"){var y=new FileReader;y.onloadend=function(){var b=y.result;b=g?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),d?d.location.href=b:location=b,d=null},y.readAsDataURL(u)}else{var p=s.URL||s.webkitURL,w=p.createObjectURL(u);d?d.location=w:location.href=w,d=null,setTimeout(function(){p.revokeObjectURL(w)},4e4)}});s.saveAs=l.saveAs=l,n.exports=l})})(iQ);var oQ=iQ.exports;class v4e extends Hn{constructor(e){super(e),this.name="Export",this.atomType="Export",this.description="Export Atom, let's you choose a type of file to Export.",this.value=null,this.type=null,this.resolution=72,this.addIO("input","geometry",this,"geometry",""),this.addIO("input","Resolution (dpi)",this,"number",72),this.addIO("input","Part Name",this,"string","Part Name"),this.addIO("input","File Type",this,"string","SVG"),this.setValues(e),this.fileName=null,this.importIndex=0}draw(){super.draw(),O.c.beginPath(),O.c.fillStyle="#484848",O.c.font=`${O.widthToPixels(this.radius)}px Work Sans Bold`,O.c.fillText("G",O.widthToPixels(this.x-this.radius/3),O.heightToPixels(this.y)+this.height/3),O.c.fill(),O.c.closePath()}updateValue(){if(super.updateValue(),this.inputs.every(e=>e.ready)){this.processing=!0;let e=this.findIOValue("geometry"),t=this.findIOValue("File Type");O.cad.visExport(this.uniqueID,e,t).then(r=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}}createLevaInputs(){let e={};const t=["STL","SVG","STEP"];return this.inputs&&this.inputs.map(r=>{const i=()=>r.connectors.length>0;r.name=="File Type"&&(e[this.uniqueID+"file_ops"]={value:r.value,options:t,disabled:i(),label:"File Type",onChange:o=>{r.value!==o&&r.setValue(o)}}),r.name=="Resolution (dpi)"&&(e[this.uniqueID+r.name]={value:r.value,label:r.name,disabled:this.findIOValue("File Type")!="SVG",onChange:o=>{r.value!==o&&r.setValue(o)}}),r.name=="Part Name"&&(e[this.uniqueID+r.name]={value:r.value,label:r.name,disabled:i(),onChange:o=>{r.value!==o&&r.setValue(o)}})}),e["Download File"]=nl(()=>this.exportFile()),e}exportFile(){let e=this.findIOValue("File Type"),t=this.findIOValue("Resolution (dpi)"),r=this.findIOValue("Part Name");console.log(this),O.cad.downExport(this.uniqueID,e,t,O.topLevelMolecule.unitsKey).then(i=>{oQ.saveAs(i,r+"."+e.toLowerCase())}).catch(this.alertingErrorHandler())}serialize(e={x:0,y:0}){var t=super.serialize(e);return t.type=this.type,t.resolution=this.resolution,t.importIndex=this.importIndex,t.fileName=this.fileName,t}}const y4e={ROBOTO:"https://fonts.gstatic.com/s/roboto/v15/W5F8_SL0XFawnjxHGsZjJA.ttf",NOTOSANS:"http://fonts.gstatic.com/s/notosansdisplay/v20/RLplK4fy6r6tOBEJg0IAKzqdFZVZxokvfn_BDLxR.ttf",ANONYMOUSPRO:"http://fonts.gstatic.com/s/anonymouspro/v14/rP2Bp2a15UIB7Un-bOeISG3pLlw89CH98Ko.ttf",MONSERRAT:"http://fonts.gstatic.com/s/montserrat/v15/JTURjIg1_i6t8kCHKm45_dJE3gnD-w.ttf"};let x4e=class extends Hn{constructor(e){super(e),this.name="Text",this.atomType="Text",this.description="Creates a new text sketch.",this.fontFamily="ROBOTO",this.addIO("input","Font Size",this,"number",10),this.addIO("input","Text",this,"string","Lorem Ipsum"),this.addIO("output","geometry",this,"geometry",""),this.setValues(e)}beginPropagation(e=!1){this.inputs.forEach(t=>{t.beginPropagation()})}draw(){super.draw(),O.c.beginPath(),O.c.fillStyle="#484848",O.c.font=`${O.widthToPixels(this.radius)}px Work Sans Bold`,O.c.fillText("T",O.widthToPixels(this.x-this.radius/3),O.heightToPixels(this.y)+this.height/3),O.c.fill(),O.c.closePath()}createLevaInputs(){let e={};this.inputs&&this.inputs.map(r=>{const i=()=>r.connectors.length>0;r.valueType!=="geometry"&&(e[this.uniqueID+r.name]={value:r.value,label:r.name,step:.25,disabled:i(),onChange:o=>{r.value!==o&&r.setValue(o)}})});const t=y4e;return e["Font Family"]={options:Object.keys(t),label:"Font Family",onChange:r=>{this.fontFamily=r,this.updateValue()}},e}updateValue(){super.updateValue();var e=this.findIOValue("Font Size"),t=this.findIOValue("Text");let r=this.fontFamily;O.cad.text(this.uniqueID,t,e,r).then(()=>{this.basicThreadValueProcessing()}).catch(this.alertingErrorHandler())}serialize(e={x:0,y:0}){var t=super.serialize(e),r=[];return this.inputs.forEach(i=>{if(i.connectors.length>0){var o={name:i.name,ioValue:i.getValue()};r.push(o)}}),t.ioValues=r,t.fontFamily=this.fontFamily,t}};class b4e extends Hn{constructor(e){super(e),this.type="box",this.name="Box",this.value=null,this.atomType="Box",this.height=16,this.radius=1/75,this.endX,this.endY,this.startX,this.startY,this.setValues(e)}draw(){const e=O.widthToPixels(this.x),t=O.heightToPixels(this.y);O.c.beginPath(),O.c.fillStyle="#80808080",O.c.rect(e,t,this.endX-e,this.endY-t),O.c.fill(),O.c.closePath()}mouseMove(e,t){this.endX=e,this.endY=t}clickUp(e,t){const r=O.widthToPixels(this.x),i=O.heightToPixels(this.y);this.startX=r,this.startY=i,this.deleteNode(!1,!1),this.parent.nodesOnTheScreen.forEach(o=>{o.selectBox(this.startX,this.startY,e,t)})}}class w4e{constructor(){this.canvas=null,this.c=null,this.availableTypes={box:{creator:b4e,atomType:"Box"},intersection:{creator:t4e,atomType:"Intersection",atomCategory:"Interactions"},difference:{creator:n4e,atomType:"Difference",atomCategory:"Interactions"},union:{creator:Z3e,atomType:"Join",atomCategory:"Interactions"},group:{creator:m4e,atomType:"Group",atomCategory:"None"},loft:{creator:KFe,atomType:"Loft",atomCategory:"Interactions"},shrinkWrap:{creator:XFe,atomType:"ShrinkWrap",atomCategory:"Interactions"},readme:{creator:l4e,atomType:"Readme",atomCategory:"Tags"},addBOMTag:{creator:u4e,atomType:"Add-BOM-Tag",atomCategory:"Tags"},color:{creator:Q3e,atomType:"Color",atomCategory:"Actions"},tag:{creator:JFe,atomType:"Tag",atomCategory:"Tags"},extracttag:{creator:o4e,atomType:"ExtractTag",atomCategory:"Tags"},cutLayout:{creator:qFe,atomType:"CutLayout",atomCategory:"Tags"},regularPolygon:{creator:QFe,atomType:"RegularPolygon",atomCategory:"Shapes"},costant:{creator:r4e,atomType:"Constant",atomCategory:"Inputs"},circle:{creator:J3e,atomType:"Circle",atomCategory:"Shapes"},text:{creator:x4e,atomType:"Text",atomCategory:"Shapes"},rectangle:{creator:YFe,atomType:"Rectangle",atomCategory:"Shapes"},molecule:{creator:nx,atomType:"Molecule",atomCategory:"Shapes"},input:{creator:a4e,atomType:"Input",atomCategory:"Inputs"},equation:{creator:i4e,atomType:"Equation",atomCategory:"Inputs"},code:{creator:p4e,atomType:"Code",atomCategory:"Inputs"},rotate:{creator:c4e,atomType:"Rotate",atomCategory:"Actions"},extrude:{creator:e4e,atomType:"Extrude",atomCategory:"Actions"},move:{creator:ZFe,atomType:"Move",atomCategory:"Actions"},GeneticAlgorithm:{creator:s4e,atomType:"GeneticAlgorithm",atomCategory:"Actions"},gcode:{creator:h4e,atomType:"Gcode",atomCategory:"ImportExport"},import:{creator:g4e,atomType:"Import",atomCategory:"ImportExport"},export:{creator:v4e,atomType:"Export",atomCategory:"ImportExport"},githubmolecule:{creator:f4e,atomType:"GitHubMolecule",atomCategory:"ImportExport"},output:{creator:d4e,atomType:"Output"}},this.currentMolecule,this.currentUser,this.currentRepoName,this.currentRepo,this.loadedRepo,this.topLevelMolecule,this.touchInterface=!1,this.cad=null,this.totalAtomCount=0,this.numberOfAtomsToLoad=0,this.fork=!1,this.ctrlDown=!1,this.atomsSelected=[],this.circleSegmentSize=2,this.displayProcessing=!1,this.cancelLastDisplayWorker=function(){},this.displayGrid=!0,this.displayAxis=!0,this.displayTriangles=!0,this.displayShortcuts=!1,this.displayEdges=!0,this.recentMoleculeRepresentation=[];const e=KK(W3e);this.limitedEvaluate=e.evaluate,this.lastClick,e.import({import:function(){throw new Error("Function import is disabled")},createUnit:function(){throw new Error("Function createUnit is disabled")},evaluate:function(){throw new Error("Function evaluate is disabled")},parse:function(){throw new Error("Function parse is disabled")},simplify:function(){throw new Error("Function simplify is disabled")},derivative:function(){throw new Error("Function derivative is disabled")}},{override:!0})}constrainToCanvasBorders(e,t){return[Math.max(0,Math.min(1,e)),Math.max(0,Math.min(1,t))]}constrainToCanvasBordersPixels(e,t){return[Math.max(0,Math.min(this.canvas.current.width,e)),Math.max(0,Math.min(this.canvas.current.height,t))]}widthToPixels(e){return this.canvas.current.width*e}pixelsToWidth(e){return 1/(this.canvas.current.width/e)}heightToPixels(e){return this.canvas.current.height*e}pixelsToHeight(e){return 1/(this.canvas.current.height/e)}toBinaryStr(e){const r=new TextEncoder().encode(e);return String.fromCharCode(...r)}writeToDisplay(e,t=!1){console.log("Write to display not set")}generateUniqueID(){const e=new Date().getTime(),t=Math.floor(Math.random()*1e3);return e+t}incrementVariableName(e,t){if(t.inputs.find(r=>r.name===e)){let r=e.match(/\d+(?=\D*$)/);const i=parseInt(r[0])+1,o=e.replace(new RegExp(r[0]+"(?=D*$)"),i);return this.incrementVariableName(o,t)}else return e}distBetweenPoints(e,t,r,i){var o=Math.pow(e-t,2),s=Math.pow(r-i,2),a=Math.sqrt(o+s);return a}}const O=new w4e,bV={CC0:`Creative Commons Legal Code

CC0 1.0 Universal

    CREATIVE COMMONS CORPORATION IS NOT A LAW FIRM AND DOES NOT PROVIDE
    LEGAL SERVICES. DISTRIBUTION OF THIS DOCUMENT DOES NOT CREATE AN
    ATTORNEY-CLIENT RELATIONSHIP. CREATIVE COMMONS PROVIDES THIS
    INFORMATION ON AN "AS-IS" BASIS. CREATIVE COMMONS MAKES NO WARRANTIES
    REGARDING THE USE OF THIS DOCUMENT OR THE INFORMATION OR WORKS
    PROVIDED HEREUNDER, AND DISCLAIMS LIABILITY FOR DAMAGES RESULTING FROM
    THE USE OF THIS DOCUMENT OR THE INFORMATION OR WORKS PROVIDED
    HEREUNDER.

Statement of Purpose

The laws of most jurisdictions throughout the world automatically confer
exclusive Copyright and Related Rights (defined below) upon the creator
and subsequent owner(s) (each and all, an "owner") of an original work of
authorship and/or a database (each, a "Work").

Certain owners wish to permanently relinquish those rights to a Work for
the purpose of contributing to a commons of creative, cultural and
scientific works ("Commons") that the public can reliably and without fear
of later claims of infringement build upon, modify, incorporate in other
works, reuse and redistribute as freely as possible in any form whatsoever
and for any purposes, including without limitation commercial purposes.
These owners may contribute to the Commons to promote the ideal of a free
culture and the further production of creative, cultural and scientific
works, or to gain reputation or greater distribution for their Work in
part through the use and efforts of others.

For these and/or other purposes and motivations, and without any
expectation of additional consideration or compensation, the person
associating CC0 with a Work (the "Affirmer"), to the extent that he or she
is an owner of Copyright and Related Rights in the Work, voluntarily
elects to apply CC0 to the Work and publicly distribute the Work under its
terms, with knowledge of his or her Copyright and Related Rights in the
Work and the meaning and intended legal effect of CC0 on those rights.

1. Copyright and Related Rights. A Work made available under CC0 may be
protected by copyright and related or neighboring rights ("Copyright and
Related Rights"). Copyright and Related Rights include, but are not
limited to, the following:

  i. the right to reproduce, adapt, distribute, perform, display,
     communicate, and translate a Work;
 ii. moral rights retained by the original author(s) and/or performer(s);
iii. publicity and privacy rights pertaining to a person's image or
     likeness depicted in a Work;
 iv. rights protecting against unfair competition in regards to a Work,
     subject to the limitations in paragraph 4(a), below;
  v. rights protecting the extraction, dissemination, use and reuse of data
     in a Work;
 vi. database rights (such as those arising under Directive 96/9/EC of the
     European Parliament and of the Council of 11 March 1996 on the legal
     protection of databases, and under any national implementation
     thereof, including any amended or successor version of such
     directive); and
vii. other similar, equivalent or corresponding rights throughout the
     world based on applicable law or treaty, and any national
     implementations thereof.

2. Waiver. To the greatest extent permitted by, but not in contravention
of, applicable law, Affirmer hereby overtly, fully, permanently,
irrevocably and unconditionally waives, abandons, and surrenders all of
Affirmer's Copyright and Related Rights and associated claims and causes
of action, whether now known or unknown (including existing as well as
future claims and causes of action), in the Work (i) in all territories
worldwide, (ii) for the maximum duration provided by applicable law or
treaty (including future time extensions), (iii) in any current or future
medium and for any number of copies, and (iv) for any purpose whatsoever,
including without limitation commercial, advertising or promotional
purposes (the "Waiver"). Affirmer makes the Waiver for the benefit of each
member of the public at large and to the detriment of Affirmer's heirs and
successors, fully intending that such Waiver shall not be subject to
revocation, rescission, cancellation, termination, or any other legal or
equitable action to disrupt the quiet enjoyment of the Work by the public
as contemplated by Affirmer's express Statement of Purpose.

3. Public License Fallback. Should any part of the Waiver for any reason
be judged legally invalid or ineffective under applicable law, then the
Waiver shall be preserved to the maximum extent permitted taking into
account Affirmer's express Statement of Purpose. In addition, to the
extent the Waiver is so judged Affirmer hereby grants to each affected
person a royalty-free, non transferable, non sublicensable, non exclusive,
irrevocable and unconditional license to exercise Affirmer's Copyright and
Related Rights in the Work (i) in all territories worldwide, (ii) for the
maximum duration provided by applicable law or treaty (including future
time extensions), (iii) in any current or future medium and for any number
of copies, and (iv) for any purpose whatsoever, including without
limitation commercial, advertising or promotional purposes (the
"License"). The License shall be deemed effective as of the date CC0 was
applied by Affirmer to the Work. Should any part of the License for any
reason be judged legally invalid or ineffective under applicable law, such
partial invalidity or ineffectiveness shall not invalidate the remainder
of the License, and in such case Affirmer hereby affirms that he or she
will not (i) exercise any of his or her remaining Copyright and Related
Rights in the Work or (ii) assert any associated claims and causes of
action with respect to the Work, in either case contrary to Affirmer's
express Statement of Purpose.

4. Limitations and Disclaimers.

 a. No trademark or patent rights held by Affirmer are waived, abandoned,
    surrendered, licensed or otherwise affected by this document.
 b. Affirmer offers the Work as-is and makes no representations or
    warranties of any kind concerning the Work, express, implied,
    statutory or otherwise, including without limitation warranties of
    title, merchantability, fitness for a particular purpose, non
    infringement, or the absence of latent or other defects, accuracy, or
    the present or absence of errors, whether or not discoverable, all to
    the greatest extent permissible under applicable law.
 c. Affirmer disclaims responsibility for clearing rights of other persons
    that may apply to the Work or any use thereof, including without
    limitation any person's Copyright and Related Rights in the Work.
    Further, Affirmer disclaims responsibility for obtaining any necessary
    consents, permissions or other rights required for any use of the
    Work.
 d. Affirmer understands and acknowledges that Creative Commons is not a
    party to this document and has no duty or obligation with respect to
    this CC0 or use of the Work.`,"CC-BY":`Attribution 4.0 International

=======================================================================

Creative Commons Corporation ("Creative Commons") is not a law firm and
does not provide legal services or legal advice. Distribution of
Creative Commons public licenses does not create a lawyer-client or
other relationship. Creative Commons makes its licenses and related
information available on an "as-is" basis. Creative Commons gives no
warranties regarding its licenses, any material licensed under their
terms and conditions, or any related information. Creative Commons
disclaims all liability for damages resulting from their use to the
fullest extent possible.

Using Creative Commons Public Licenses

Creative Commons public licenses provide a standard set of terms and
conditions that creators and other rights holders may use to share
original works of authorship and other material subject to copyright
and certain other rights specified in the public license below. The
following considerations are for informational purposes only, are not
exhaustive, and do not form part of our licenses.

     Considerations for licensors: Our public licenses are
     intended for use by those authorized to give the public
     permission to use material in ways otherwise restricted by
     copyright and certain other rights. Our licenses are
     irrevocable. Licensors should read and understand the terms
     and conditions of the license they choose before applying it.
     Licensors should also secure all rights necessary before
     applying our licenses so that the public can reuse the
     material as expected. Licensors should clearly mark any
     material not subject to the license. This includes other CC-
     licensed material, or material used under an exception or
     limitation to copyright. More considerations for licensors:
	wiki.creativecommons.org/Considerations_for_licensors

     Considerations for the public: By using one of our public
     licenses, a licensor grants the public permission to use the
     licensed material under specified terms and conditions. If
     the licensor's permission is not necessary for any reason--for
     example, because of any applicable exception or limitation to
     copyright--then that use is not regulated by the license. Our
     licenses grant only permissions under copyright and certain
     other rights that a licensor has authority to grant. Use of
     the licensed material may still be restricted for other
     reasons, including because others have copyright or other
     rights in the material. A licensor may make special requests,
     such as asking that all changes be marked or described.
     Although not required by our licenses, you are encouraged to
     respect those requests where reasonable. More_considerations
     for the public:
	wiki.creativecommons.org/Considerations_for_licensees

=======================================================================

Creative Commons Attribution 4.0 International Public License

By exercising the Licensed Rights (defined below), You accept and agree
to be bound by the terms and conditions of this Creative Commons
Attribution 4.0 International Public License ("Public License"). To the
extent this Public License may be interpreted as a contract, You are
granted the Licensed Rights in consideration of Your acceptance of
these terms and conditions, and the Licensor grants You such rights in
consideration of benefits the Licensor receives from making the
Licensed Material available under these terms and conditions.


Section 1 -- Definitions.

  a. Adapted Material means material subject to Copyright and Similar
     Rights that is derived from or based upon the Licensed Material
     and in which the Licensed Material is translated, altered,
     arranged, transformed, or otherwise modified in a manner requiring
     permission under the Copyright and Similar Rights held by the
     Licensor. For purposes of this Public License, where the Licensed
     Material is a musical work, performance, or sound recording,
     Adapted Material is always produced where the Licensed Material is
     synched in timed relation with a moving image.

  b. Adapter's License means the license You apply to Your Copyright
     and Similar Rights in Your contributions to Adapted Material in
     accordance with the terms and conditions of this Public License.

  c. Copyright and Similar Rights means copyright and/or similar rights
     closely related to copyright including, without limitation,
     performance, broadcast, sound recording, and Sui Generis Database
     Rights, without regard to how the rights are labeled or
     categorized. For purposes of this Public License, the rights
     specified in Section 2(b)(1)-(2) are not Copyright and Similar
     Rights.

  d. Effective Technological Measures means those measures that, in the
     absence of proper authority, may not be circumvented under laws
     fulfilling obligations under Article 11 of the WIPO Copyright
     Treaty adopted on December 20, 1996, and/or similar international
     agreements.

  e. Exceptions and Limitations means fair use, fair dealing, and/or
     any other exception or limitation to Copyright and Similar Rights
     that applies to Your use of the Licensed Material.

  f. Licensed Material means the artistic or literary work, database,
     or other material to which the Licensor applied this Public
     License.

  g. Licensed Rights means the rights granted to You subject to the
     terms and conditions of this Public License, which are limited to
     all Copyright and Similar Rights that apply to Your use of the
     Licensed Material and that the Licensor has authority to license.

  h. Licensor means the individual(s) or entity(ies) granting rights
     under this Public License.

  i. Share means to provide material to the public by any means or
     process that requires permission under the Licensed Rights, such
     as reproduction, public display, public performance, distribution,
     dissemination, communication, or importation, and to make material
     available to the public including in ways that members of the
     public may access the material from a place and at a time
     individually chosen by them.

  j. Sui Generis Database Rights means rights other than copyright
     resulting from Directive 96/9/EC of the European Parliament and of
     the Council of 11 March 1996 on the legal protection of databases,
     as amended and/or succeeded, as well as other essentially
     equivalent rights anywhere in the world.

  k. You means the individual or entity exercising the Licensed Rights
     under this Public License. Your has a corresponding meaning.


Section 2 -- Scope.

  a. License grant.

       1. Subject to the terms and conditions of this Public License,
          the Licensor hereby grants You a worldwide, royalty-free,
          non-sublicensable, non-exclusive, irrevocable license to
          exercise the Licensed Rights in the Licensed Material to:

            a. reproduce and Share the Licensed Material, in whole or
               in part; and

            b. produce, reproduce, and Share Adapted Material.

       2. Exceptions and Limitations. For the avoidance of doubt, where
          Exceptions and Limitations apply to Your use, this Public
          License does not apply, and You do not need to comply with
          its terms and conditions.

       3. Term. The term of this Public License is specified in Section
          6(a).

       4. Media and formats; technical modifications allowed. The
          Licensor authorizes You to exercise the Licensed Rights in
          all media and formats whether now known or hereafter created,
          and to make technical modifications necessary to do so. The
          Licensor waives and/or agrees not to assert any right or
          authority to forbid You from making technical modifications
          necessary to exercise the Licensed Rights, including
          technical modifications necessary to circumvent Effective
          Technological Measures. For purposes of this Public License,
          simply making modifications authorized by this Section 2(a)
          (4) never produces Adapted Material.

       5. Downstream recipients.

            a. Offer from the Licensor -- Licensed Material. Every
               recipient of the Licensed Material automatically
               receives an offer from the Licensor to exercise the
               Licensed Rights under the terms and conditions of this
               Public License.

            b. No downstream restrictions. You may not offer or impose
               any additional or different terms or conditions on, or
               apply any Effective Technological Measures to, the
               Licensed Material if doing so restricts exercise of the
               Licensed Rights by any recipient of the Licensed
               Material.

       6. No endorsement. Nothing in this Public License constitutes or
          may be construed as permission to assert or imply that You
          are, or that Your use of the Licensed Material is, connected
          with, or sponsored, endorsed, or granted official status by,
          the Licensor or others designated to receive attribution as
          provided in Section 3(a)(1)(A)(i).

  b. Other rights.

       1. Moral rights, such as the right of integrity, are not
          licensed under this Public License, nor are publicity,
          privacy, and/or other similar personality rights; however, to
          the extent possible, the Licensor waives and/or agrees not to
          assert any such rights held by the Licensor to the limited
          extent necessary to allow You to exercise the Licensed
          Rights, but not otherwise.

       2. Patent and trademark rights are not licensed under this
          Public License.

       3. To the extent possible, the Licensor waives any right to
          collect royalties from You for the exercise of the Licensed
          Rights, whether directly or through a collecting society
          under any voluntary or waivable statutory or compulsory
          licensing scheme. In all other cases the Licensor expressly
          reserves any right to collect such royalties.


Section 3 -- License Conditions.

Your exercise of the Licensed Rights is expressly made subject to the
following conditions.

  a. Attribution.

       1. If You Share the Licensed Material (including in modified
          form), You must:

            a. retain the following if it is supplied by the Licensor
               with the Licensed Material:

                 i. identification of the creator(s) of the Licensed
                    Material and any others designated to receive
                    attribution, in any reasonable manner requested by
                    the Licensor (including by pseudonym if
                    designated);

                ii. a copyright notice;

               iii. a notice that refers to this Public License;

                iv. a notice that refers to the disclaimer of
                    warranties;

                 v. a URI or hyperlink to the Licensed Material to the
                    extent reasonably practicable;

            b. indicate if You modified the Licensed Material and
               retain an indication of any previous modifications; and

            c. indicate the Licensed Material is licensed under this
               Public License, and include the text of, or the URI or
               hyperlink to, this Public License.

       2. You may satisfy the conditions in Section 3(a)(1) in any
          reasonable manner based on the medium, means, and context in
          which You Share the Licensed Material. For example, it may be
          reasonable to satisfy the conditions by providing a URI or
          hyperlink to a resource that includes the required
          information.

       3. If requested by the Licensor, You must remove any of the
          information required by Section 3(a)(1)(A) to the extent
          reasonably practicable.

       4. If You Share Adapted Material You produce, the Adapter's
          License You apply must not prevent recipients of the Adapted
          Material from complying with this Public License.


Section 4 -- Sui Generis Database Rights.

Where the Licensed Rights include Sui Generis Database Rights that
apply to Your use of the Licensed Material:

  a. for the avoidance of doubt, Section 2(a)(1) grants You the right
     to extract, reuse, reproduce, and Share all or a substantial
     portion of the contents of the database;

  b. if You include all or a substantial portion of the database
     contents in a database in which You have Sui Generis Database
     Rights, then the database in which You have Sui Generis Database
     Rights (but not its individual contents) is Adapted Material; and

  c. You must comply with the conditions in Section 3(a) if You Share
     all or a substantial portion of the contents of the database.

For the avoidance of doubt, this Section 4 supplements and does not
replace Your obligations under this Public License where the Licensed
Rights include other Copyright and Similar Rights.


Section 5 -- Disclaimer of Warranties and Limitation of Liability.

  a. UNLESS OTHERWISE SEPARATELY UNDERTAKEN BY THE LICENSOR, TO THE
     EXTENT POSSIBLE, THE LICENSOR OFFERS THE LICENSED MATERIAL AS-IS
     AND AS-AVAILABLE, AND MAKES NO REPRESENTATIONS OR WARRANTIES OF
     ANY KIND CONCERNING THE LICENSED MATERIAL, WHETHER EXPRESS,
     IMPLIED, STATUTORY, OR OTHER. THIS INCLUDES, WITHOUT LIMITATION,
     WARRANTIES OF TITLE, MERCHANTABILITY, FITNESS FOR A PARTICULAR
     PURPOSE, NON-INFRINGEMENT, ABSENCE OF LATENT OR OTHER DEFECTS,
     ACCURACY, OR THE PRESENCE OR ABSENCE OF ERRORS, WHETHER OR NOT
     KNOWN OR DISCOVERABLE. WHERE DISCLAIMERS OF WARRANTIES ARE NOT
     ALLOWED IN FULL OR IN PART, THIS DISCLAIMER MAY NOT APPLY TO YOU.

  b. TO THE EXTENT POSSIBLE, IN NO EVENT WILL THE LICENSOR BE LIABLE
     TO YOU ON ANY LEGAL THEORY (INCLUDING, WITHOUT LIMITATION,
     NEGLIGENCE) OR OTHERWISE FOR ANY DIRECT, SPECIAL, INDIRECT,
     INCIDENTAL, CONSEQUENTIAL, PUNITIVE, EXEMPLARY, OR OTHER LOSSES,
     COSTS, EXPENSES, OR DAMAGES ARISING OUT OF THIS PUBLIC LICENSE OR
     USE OF THE LICENSED MATERIAL, EVEN IF THE LICENSOR HAS BEEN
     ADVISED OF THE POSSIBILITY OF SUCH LOSSES, COSTS, EXPENSES, OR
     DAMAGES. WHERE A LIMITATION OF LIABILITY IS NOT ALLOWED IN FULL OR
     IN PART, THIS LIMITATION MAY NOT APPLY TO YOU.

  c. The disclaimer of warranties and limitation of liability provided
     above shall be interpreted in a manner that, to the extent
     possible, most closely approximates an absolute disclaimer and
     waiver of all liability.


Section 6 -- Term and Termination.

  a. This Public License applies for the term of the Copyright and
     Similar Rights licensed here. However, if You fail to comply with
     this Public License, then Your rights under this Public License
     terminate automatically.

  b. Where Your right to use the Licensed Material has terminated under
     Section 6(a), it reinstates:

       1. automatically as of the date the violation is cured, provided
          it is cured within 30 days of Your discovery of the
          violation; or

       2. upon express reinstatement by the Licensor.

     For the avoidance of doubt, this Section 6(b) does not affect any
     right the Licensor may have to seek remedies for Your violations
     of this Public License.

  c. For the avoidance of doubt, the Licensor may also offer the
     Licensed Material under separate terms or conditions or stop
     distributing the Licensed Material at any time; however, doing so
     will not terminate this Public License.

  d. Sections 1, 5, 6, 7, and 8 survive termination of this Public
     License.


Section 7 -- Other Terms and Conditions.

  a. The Licensor shall not be bound by any additional or different
     terms or conditions communicated by You unless expressly agreed.

  b. Any arrangements, understandings, or agreements regarding the
     Licensed Material not stated herein are separate from and
     independent of the terms and conditions of this Public License.


Section 8 -- Interpretation.

  a. For the avoidance of doubt, this Public License does not, and
     shall not be interpreted to, reduce, limit, restrict, or impose
     conditions on any use of the Licensed Material that could lawfully
     be made without permission under this Public License.

  b. To the extent possible, if any provision of this Public License is
     deemed unenforceable, it shall be automatically reformed to the
     minimum extent necessary to make it enforceable. If the provision
     cannot be reformed, it shall be severed from this Public License
     without affecting the enforceability of the remaining terms and
     conditions.

  c. No term or condition of this Public License will be waived and no
     failure to comply consented to unless expressly agreed to by the
     Licensor.

  d. Nothing in this Public License constitutes or may be interpreted
     as a limitation upon, or waiver of, any privileges and immunities
     that apply to the Licensor or You, including from the legal
     processes of any jurisdiction or authority.


=======================================================================

Creative Commons is not a party to its public
licenses. Notwithstanding, Creative Commons may elect to apply one of
its public licenses to material it publishes and in those instances
will be considered the Licensor. The text of the Creative Commons
public licenses is dedicated to the public domain under the CC0 Public
Domain Dedication. Except for the limited purpose of indicating that
material is shared under a Creative Commons public license or as
otherwise permitted by the Creative Commons policies published at
creativecommons.org/policies, Creative Commons does not authorize the
use of the trademark "Creative Commons" or any other trademark or logo
of Creative Commons without its prior written consent including,
without limitation, in connection with any unauthorized modifications
to any of its public licenses or any other arrangements,
understandings, or agreements concerning use of licensed material. For
the avoidance of doubt, this paragraph does not form part of the
public licenses.

Creative Commons may be contacted at creativecommons.org.`};function wV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function $t(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?wV(Object(t),!0).forEach(function(r){_r(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):wV(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function S4e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function SV(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,PK(r.key),r)}}function _4e(n,e,t){return e&&SV(n.prototype,e),t&&SV(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function cP(n,e){return cP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},cP(n,e)}function E4e(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&cP(n,e)}function jE(n){return jE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jE(n)}function sQ(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sQ=function(){return!!n})()}function M4e(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function C4e(n,e){if(e&&(Rh(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return M4e(n)}function A4e(n){var e=sQ();return function(){var t,r=jE(n);if(e){var i=jE(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return C4e(this,t)}}function fP(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function T4e(n){if(Array.isArray(n))return fP(n)}function D4e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function aQ(n,e){if(n){if(typeof n=="string")return fP(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?fP(n,e):void 0}}function N4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zm(n){return T4e(n)||D4e(n)||aQ(n)||N4e()}var P4e=!1;function R4e(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function O4e(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var k4e=function(){function n(t){var r=this;this._insertTag=function(i){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,o),r.tags.push(i)},this.isSpeedy=t.speedy===void 0?!P4e:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(O4e(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=R4e(i);try{o.insertRule(r,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},n}(),co="-ms-",GE="-moz-",zn="-webkit-",lQ="comm",EI="rule",MI="decl",I4e="@import",uQ="@keyframes",L4e="@layer",F4e=Math.abs,_2=String.fromCharCode,B4e=Object.assign;function z4e(n,e){return $i(n,0)^45?(((e<<2^$i(n,0))<<2^$i(n,1))<<2^$i(n,2))<<2^$i(n,3):0}function cQ(n){return n.trim()}function U4e(n,e){return(n=e.exec(n))?n[0]:n}function Un(n,e,t){return n.replace(e,t)}function dP(n,e){return n.indexOf(e)}function $i(n,e){return n.charCodeAt(e)|0}function Wy(n,e,t){return n.slice(e,t)}function kl(n){return n.length}function CI(n){return n.length}function vw(n,e){return e.push(n),n}function V4e(n,e){return n.map(e).join("")}var E2=1,_g=1,fQ=0,xs=0,ai=0,sv="";function M2(n,e,t,r,i,o,s){return{value:n,root:e,parent:t,type:r,props:i,children:o,line:E2,column:_g,length:s,return:""}}function Qv(n,e){return B4e(M2("",null,null,"",null,null,0),n,{length:-n.length},e)}function $4e(){return ai}function H4e(){return ai=xs>0?$i(sv,--xs):0,_g--,ai===10&&(_g=1,E2--),ai}function $s(){return ai=xs<fQ?$i(sv,xs++):0,_g++,ai===10&&(_g=1,E2++),ai}function Kl(){return $i(sv,xs)}function a_(){return xs}function rx(n,e){return Wy(sv,n,e)}function jy(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function dQ(n){return E2=_g=1,fQ=kl(sv=n),xs=0,[]}function hQ(n){return sv="",n}function l_(n){return cQ(rx(xs-1,hP(n===91?n+2:n===40?n+1:n)))}function W4e(n){for(;(ai=Kl())&&ai<33;)$s();return jy(n)>2||jy(ai)>3?"":" "}function j4e(n,e){for(;--e&&$s()&&!(ai<48||ai>102||ai>57&&ai<65||ai>70&&ai<97););return rx(n,a_()+(e<6&&Kl()==32&&$s()==32))}function hP(n){for(;$s();)switch(ai){case n:return xs;case 34:case 39:n!==34&&n!==39&&hP(ai);break;case 40:n===41&&hP(n);break;case 92:$s();break}return xs}function G4e(n,e){for(;$s()&&n+ai!==57;)if(n+ai===84&&Kl()===47)break;return"/*"+rx(e,xs-1)+"*"+_2(n===47?n:$s())}function q4e(n){for(;!jy(Kl());)$s();return rx(n,xs)}function X4e(n){return hQ(u_("",null,null,null,[""],n=dQ(n),0,[0],n))}function u_(n,e,t,r,i,o,s,a,l){for(var u=0,c=0,f=s,d=0,h=0,m=0,g=1,y=1,p=1,w=0,b="",v=i,S=o,x=r,M=b;y;)switch(m=w,w=$s()){case 40:if(m!=108&&$i(M,f-1)==58){dP(M+=Un(l_(w),"&","&\f"),"&\f")!=-1&&(p=-1);break}case 34:case 39:case 91:M+=l_(w);break;case 9:case 10:case 13:case 32:M+=W4e(m);break;case 92:M+=j4e(a_()-1,7);continue;case 47:switch(Kl()){case 42:case 47:vw(Y4e(G4e($s(),a_()),e,t),l);break;default:M+="/"}break;case 123*g:a[u++]=kl(M)*p;case 125*g:case 59:case 0:switch(w){case 0:case 125:y=0;case 59+c:p==-1&&(M=Un(M,/\f/g,"")),h>0&&kl(M)-f&&vw(h>32?EV(M+";",r,t,f-1):EV(Un(M," ","")+";",r,t,f-2),l);break;case 59:M+=";";default:if(vw(x=_V(M,e,t,u,c,i,a,b,v=[],S=[],f),o),w===123)if(c===0)u_(M,e,x,x,v,o,f,a,S);else switch(d===99&&$i(M,3)===110?100:d){case 100:case 108:case 109:case 115:u_(n,x,x,r&&vw(_V(n,x,x,0,0,i,a,b,i,v=[],f),S),i,S,f,a,r?v:S);break;default:u_(M,x,x,x,[""],S,0,a,S)}}u=c=h=0,g=p=1,b=M="",f=s;break;case 58:f=1+kl(M),h=m;default:if(g<1){if(w==123)--g;else if(w==125&&g++==0&&H4e()==125)continue}switch(M+=_2(w),w*g){case 38:p=c>0?1:(M+="\f",-1);break;case 44:a[u++]=(kl(M)-1)*p,p=1;break;case 64:Kl()===45&&(M+=l_($s())),d=Kl(),c=f=kl(b=M+=q4e(a_())),w++;break;case 45:m===45&&kl(M)==2&&(g=0)}}return o}function _V(n,e,t,r,i,o,s,a,l,u,c){for(var f=i-1,d=i===0?o:[""],h=CI(d),m=0,g=0,y=0;m<r;++m)for(var p=0,w=Wy(n,f+1,f=F4e(g=s[m])),b=n;p<h;++p)(b=cQ(g>0?d[p]+" "+w:Un(w,/&\f/g,d[p])))&&(l[y++]=b);return M2(n,e,t,i===0?EI:a,l,u,c)}function Y4e(n,e,t){return M2(n,e,t,lQ,_2($4e()),Wy(n,2,-2),0)}function EV(n,e,t,r){return M2(n,e,t,MI,Wy(n,0,r),Wy(n,r+1,-1),r)}function Jm(n,e){for(var t="",r=CI(n),i=0;i<r;i++)t+=e(n[i],i,n,e)||"";return t}function K4e(n,e,t,r){switch(n.type){case L4e:if(n.children.length)break;case I4e:case MI:return n.return=n.return||n.value;case lQ:return"";case uQ:return n.return=n.value+"{"+Jm(n.children,r)+"}";case EI:n.value=n.props.join(",")}return kl(t=Jm(n.children,r))?n.return=n.value+"{"+t+"}":""}function Z4e(n){var e=CI(n);return function(t,r,i,o){for(var s="",a=0;a<e;a++)s+=n[a](t,r,i,o)||"";return s}}function J4e(n){return function(e){e.root||(e=e.return)&&n(e)}}function Q4e(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var e8e=function(e,t,r){for(var i=0,o=0;i=o,o=Kl(),i===38&&o===12&&(t[r]=1),!jy(o);)$s();return rx(e,xs)},t8e=function(e,t){var r=-1,i=44;do switch(jy(i)){case 0:i===38&&Kl()===12&&(t[r]=1),e[r]+=e8e(xs-1,t,r);break;case 2:e[r]+=l_(i);break;case 4:if(i===44){e[++r]=Kl()===58?"&\f":"",t[r]=e[r].length;break}default:e[r]+=_2(i)}while(i=$s());return e},n8e=function(e,t){return hQ(t8e(dQ(e),t))},MV=new WeakMap,r8e=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!MV.get(r))&&!i){MV.set(e,!0);for(var o=[],s=n8e(t,o),a=r.props,l=0,u=0;l<s.length;l++)for(var c=0;c<a.length;c++,u++)e.props[u]=o[l]?s[l].replace(/&\f/g,a[c]):a[c]+" "+s[l]}}},i8e=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function pQ(n,e){switch(z4e(n,e)){case 5103:return zn+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return zn+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return zn+n+GE+n+co+n+n;case 6828:case 4268:return zn+n+co+n+n;case 6165:return zn+n+co+"flex-"+n+n;case 5187:return zn+n+Un(n,/(\w+).+(:[^]+)/,zn+"box-$1$2"+co+"flex-$1$2")+n;case 5443:return zn+n+co+"flex-item-"+Un(n,/flex-|-self/,"")+n;case 4675:return zn+n+co+"flex-line-pack"+Un(n,/align-content|flex-|-self/,"")+n;case 5548:return zn+n+co+Un(n,"shrink","negative")+n;case 5292:return zn+n+co+Un(n,"basis","preferred-size")+n;case 6060:return zn+"box-"+Un(n,"-grow","")+zn+n+co+Un(n,"grow","positive")+n;case 4554:return zn+Un(n,/([^-])(transform)/g,"$1"+zn+"$2")+n;case 6187:return Un(Un(Un(n,/(zoom-|grab)/,zn+"$1"),/(image-set)/,zn+"$1"),n,"")+n;case 5495:case 3959:return Un(n,/(image-set\([^]*)/,zn+"$1$`$1");case 4968:return Un(Un(n,/(.+:)(flex-)?(.*)/,zn+"box-pack:$3"+co+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+zn+n+n;case 4095:case 3583:case 4068:case 2532:return Un(n,/(.+)-inline(.+)/,zn+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(kl(n)-1-e>6)switch($i(n,e+1)){case 109:if($i(n,e+4)!==45)break;case 102:return Un(n,/(.+:)(.+)-([^]+)/,"$1"+zn+"$2-$3$1"+GE+($i(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~dP(n,"stretch")?pQ(Un(n,"stretch","fill-available"),e)+n:n}break;case 4949:if($i(n,e+1)!==115)break;case 6444:switch($i(n,kl(n)-3-(~dP(n,"!important")&&10))){case 107:return Un(n,":",":"+zn)+n;case 101:return Un(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+zn+($i(n,14)===45?"inline-":"")+"box$3$1"+zn+"$2$3$1"+co+"$2box$3")+n}break;case 5936:switch($i(n,e+11)){case 114:return zn+n+co+Un(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return zn+n+co+Un(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return zn+n+co+Un(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return zn+n+co+n+n}return n}var o8e=function(e,t,r,i){if(e.length>-1&&!e.return)switch(e.type){case MI:e.return=pQ(e.value,e.length);break;case uQ:return Jm([Qv(e,{value:Un(e.value,"@","@"+zn)})],i);case EI:if(e.length)return V4e(e.props,function(o){switch(U4e(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Jm([Qv(e,{props:[Un(o,/:(read-\w+)/,":"+GE+"$1")]})],i);case"::placeholder":return Jm([Qv(e,{props:[Un(o,/:(plac\w+)/,":"+zn+"input-$1")]}),Qv(e,{props:[Un(o,/:(plac\w+)/,":"+GE+"$1")]}),Qv(e,{props:[Un(o,/:(plac\w+)/,co+"input-$1")]})],i)}return""})}},s8e=[o8e],a8e=function(e){var t=e.key;if(t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(g){var y=g.getAttribute("data-emotion");y.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var i=e.stylisPlugins||s8e,o={},s,a=[];s=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(g){for(var y=g.getAttribute("data-emotion").split(" "),p=1;p<y.length;p++)o[y[p]]=!0;a.push(g)});var l,u=[r8e,i8e];{var c,f=[K4e,J4e(function(g){c.insert(g)})],d=Z4e(u.concat(i,f)),h=function(y){return Jm(X4e(y),d)};l=function(y,p,w,b){c=w,h(y?y+"{"+p.styles+"}":p.styles),b&&(m.inserted[p.name]=!0)}}var m={key:t,sheet:new k4e({key:t,container:s,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:l};return m.sheet.hydrate(a),m},mQ={exports:{}},er={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Li=typeof Symbol=="function"&&Symbol.for,AI=Li?Symbol.for("react.element"):60103,TI=Li?Symbol.for("react.portal"):60106,C2=Li?Symbol.for("react.fragment"):60107,A2=Li?Symbol.for("react.strict_mode"):60108,T2=Li?Symbol.for("react.profiler"):60114,D2=Li?Symbol.for("react.provider"):60109,N2=Li?Symbol.for("react.context"):60110,DI=Li?Symbol.for("react.async_mode"):60111,P2=Li?Symbol.for("react.concurrent_mode"):60111,R2=Li?Symbol.for("react.forward_ref"):60112,O2=Li?Symbol.for("react.suspense"):60113,l8e=Li?Symbol.for("react.suspense_list"):60120,k2=Li?Symbol.for("react.memo"):60115,I2=Li?Symbol.for("react.lazy"):60116,u8e=Li?Symbol.for("react.block"):60121,c8e=Li?Symbol.for("react.fundamental"):60117,f8e=Li?Symbol.for("react.responder"):60118,d8e=Li?Symbol.for("react.scope"):60119;function Ys(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case AI:switch(n=n.type,n){case DI:case P2:case C2:case T2:case A2:case O2:return n;default:switch(n=n&&n.$$typeof,n){case N2:case R2:case I2:case k2:case D2:return n;default:return e}}case TI:return e}}}function gQ(n){return Ys(n)===P2}er.AsyncMode=DI;er.ConcurrentMode=P2;er.ContextConsumer=N2;er.ContextProvider=D2;er.Element=AI;er.ForwardRef=R2;er.Fragment=C2;er.Lazy=I2;er.Memo=k2;er.Portal=TI;er.Profiler=T2;er.StrictMode=A2;er.Suspense=O2;er.isAsyncMode=function(n){return gQ(n)||Ys(n)===DI};er.isConcurrentMode=gQ;er.isContextConsumer=function(n){return Ys(n)===N2};er.isContextProvider=function(n){return Ys(n)===D2};er.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===AI};er.isForwardRef=function(n){return Ys(n)===R2};er.isFragment=function(n){return Ys(n)===C2};er.isLazy=function(n){return Ys(n)===I2};er.isMemo=function(n){return Ys(n)===k2};er.isPortal=function(n){return Ys(n)===TI};er.isProfiler=function(n){return Ys(n)===T2};er.isStrictMode=function(n){return Ys(n)===A2};er.isSuspense=function(n){return Ys(n)===O2};er.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===C2||n===P2||n===T2||n===A2||n===O2||n===l8e||typeof n=="object"&&n!==null&&(n.$$typeof===I2||n.$$typeof===k2||n.$$typeof===D2||n.$$typeof===N2||n.$$typeof===R2||n.$$typeof===c8e||n.$$typeof===f8e||n.$$typeof===d8e||n.$$typeof===u8e)};er.typeOf=Ys;mQ.exports=er;var h8e=mQ.exports,vQ=h8e,p8e={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},m8e={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},yQ={};yQ[vQ.ForwardRef]=p8e;yQ[vQ.Memo]=m8e;var g8e=!0;function v8e(n,e,t){var r="";return t.split(" ").forEach(function(i){n[i]!==void 0?e.push(n[i]+";"):i&&(r+=i+" ")}),r}var xQ=function(e,t,r){var i=e.key+"-"+t.name;(r===!1||g8e===!1)&&e.registered[i]===void 0&&(e.registered[i]=t.styles)},y8e=function(e,t,r){xQ(e,t,r);var i=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var o=t;do e.insert(t===o?"."+i:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function x8e(n){for(var e=0,t,r=0,i=n.length;i>=4;++r,i-=4)t=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(n.charCodeAt(r+2)&255)<<16;case 2:e^=(n.charCodeAt(r+1)&255)<<8;case 1:e^=n.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var b8e={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},w8e=!1,S8e=/[A-Z]|^ms/g,_8e=/_EMO_([^_]+?)_([^]*?)_EMO_/g,bQ=function(e){return e.charCodeAt(1)===45},CV=function(e){return e!=null&&typeof e!="boolean"},PT=Q4e(function(n){return bQ(n)?n:n.replace(S8e,"-$&").toLowerCase()}),AV=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(_8e,function(r,i,o){return Il={name:i,styles:o,next:Il},i})}return b8e[e]!==1&&!bQ(e)&&typeof t=="number"&&t!==0?t+"px":t},E8e="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Gy(n,e,t){if(t==null)return"";var r=t;if(r.__emotion_styles!==void 0)return r;switch(typeof t){case"boolean":return"";case"object":{var i=t;if(i.anim===1)return Il={name:i.name,styles:i.styles,next:Il},i.name;var o=t;if(o.styles!==void 0){var s=o.next;if(s!==void 0)for(;s!==void 0;)Il={name:s.name,styles:s.styles,next:Il},s=s.next;var a=o.styles+";";return a}return M8e(n,e,t)}case"function":{if(n!==void 0){var l=Il,u=t(n);return Il=l,Gy(n,e,u)}break}}var c=t;return c}function M8e(n,e,t){var r="";if(Array.isArray(t))for(var i=0;i<t.length;i++)r+=Gy(n,e,t[i])+";";else for(var o in t){var s=t[o];if(typeof s!="object"){var a=s;CV(a)&&(r+=PT(o)+":"+AV(o,a)+";")}else{if(o==="NO_COMPONENT_SELECTOR"&&w8e)throw new Error(E8e);if(Array.isArray(s)&&typeof s[0]=="string"&&e==null)for(var l=0;l<s.length;l++)CV(s[l])&&(r+=PT(o)+":"+AV(o,s[l])+";");else{var u=Gy(n,e,s);switch(o){case"animation":case"animationName":{r+=PT(o)+":"+u+";";break}default:r+=o+"{"+u+"}"}}}}return r}var TV=/label:\s*([^\s;{]+)\s*(;|$)/g,Il;function wQ(n,e,t){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var r=!0,i="";Il=void 0;var o=n[0];if(o==null||o.raw===void 0)r=!1,i+=Gy(t,e,o);else{var s=o;i+=s[0]}for(var a=1;a<n.length;a++)if(i+=Gy(t,e,n[a]),r){var l=o;i+=l[a]}TV.lastIndex=0;for(var u="",c;(c=TV.exec(i))!==null;)u+="-"+c[1];var f=x8e(i)+u;return{name:f,styles:i,next:Il}}var C8e=function(e){return e()},A8e=O_.useInsertionEffect?O_.useInsertionEffect:!1,T8e=A8e||C8e,D8e=!1,SQ=z.createContext(typeof HTMLElement<"u"?a8e({key:"css"}):null);SQ.Provider;var N8e=function(e){return z.forwardRef(function(t,r){var i=z.useContext(SQ);return e(t,i,r)})},P8e=z.createContext({}),NI={}.hasOwnProperty,pP="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",R8e=function(e,t){var r={};for(var i in t)NI.call(t,i)&&(r[i]=t[i]);return r[pP]=e,r},O8e=function(e){var t=e.cache,r=e.serialized,i=e.isStringTag;return xQ(t,r,i),T8e(function(){return y8e(t,r,i)}),null},k8e=N8e(function(n,e,t){var r=n.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var i=n[pP],o=[r],s="";typeof n.className=="string"?s=v8e(e.registered,o,n.className):n.className!=null&&(s=n.className+" ");var a=wQ(o,void 0,z.useContext(P8e));s+=e.key+"-"+a.name;var l={};for(var u in n)NI.call(n,u)&&u!=="css"&&u!==pP&&!D8e&&(l[u]=n[u]);return l.className=s,t&&(l.ref=t),z.createElement(z.Fragment,null,z.createElement(O8e,{cache:e,serialized:a,isStringTag:typeof i=="string"}),z.createElement(i,l))}),I8e=k8e,Wt=function(e,t){var r=arguments;if(t==null||!NI.call(t,"css"))return z.createElement.apply(void 0,r);var i=r.length,o=new Array(i);o[0]=I8e,o[1]=R8e(e,t);for(var s=2;s<i;s++)o[s]=r[s];return z.createElement.apply(null,o)};function PI(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return wQ(e)}var L8e=function(){var e=PI.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function F8e(n){if(Array.isArray(n))return n}function B8e(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,s,a=[],l=!0,u=!1;try{if(o=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=o.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function z8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ku(n,e){return F8e(n)||B8e(n,e)||aQ(n,e)||z8e()}function _Q(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.includes(r))continue;t[r]=n[r]}return t}function cu(n,e){if(n==null)return{};var t,r,i=_Q(n,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)t=o[r],e.includes(t)||{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function U8e(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}var mP=z.useLayoutEffect,V8e=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],qE=function(){};function $8e(n,e){return e?e[0]==="-"?n+e:n+"__"+e:n}function H8e(n,e){for(var t=arguments.length,r=new Array(t>2?t-2:0),i=2;i<t;i++)r[i-2]=arguments[i];var o=[].concat(r);if(e&&n)for(var s in e)e.hasOwnProperty(s)&&e[s]&&o.push("".concat($8e(n,s)));return o.filter(function(a){return a}).map(function(a){return String(a).trim()}).join(" ")}var XE=function(e){return J8e(e)?e.filter(Boolean):Rh(e)==="object"&&e!==null?[e]:[]},EQ=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var t=cu(e,V8e);return $t({},t)},Wr=function(e,t,r){var i=e.cx,o=e.getStyles,s=e.getClassNames,a=e.className;return{css:o(t,e),className:i(r??{},s(t,e),a)}};function L2(n){return[document.documentElement,document.body,window].indexOf(n)>-1}function W8e(n){return L2(n)?window.innerHeight:n.clientHeight}function MQ(n){return L2(n)?window.pageYOffset:n.scrollTop}function YE(n,e){if(L2(n)){window.scrollTo(0,e);return}n.scrollTop=e}function j8e(n){var e=getComputedStyle(n),t=e.position==="absolute",r=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var i=n;i=i.parentElement;)if(e=getComputedStyle(i),!(t&&e.position==="static")&&r.test(e.overflow+e.overflowY+e.overflowX))return i;return document.documentElement}function G8e(n,e,t,r){return t*((n=n/r-1)*n*n+1)+e}function yw(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:qE,i=MQ(n),o=e-i,s=10,a=0;function l(){a+=s;var u=G8e(a,i,o,t);YE(n,u),a<t?window.requestAnimationFrame(l):r(n)}l()}function DV(n,e){var t=n.getBoundingClientRect(),r=e.getBoundingClientRect(),i=e.offsetHeight/3;r.bottom+i>t.bottom?YE(n,Math.min(e.offsetTop+e.clientHeight-n.offsetHeight+i,n.scrollHeight)):r.top-i<t.top&&YE(n,Math.max(e.offsetTop-i,0))}function q8e(n){var e=n.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function NV(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function X8e(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var CQ=!1,Y8e={get passive(){return CQ=!0}},xw=typeof window<"u"?window:{};xw.addEventListener&&xw.removeEventListener&&(xw.addEventListener("p",qE,Y8e),xw.removeEventListener("p",qE,!1));var K8e=CQ;function Z8e(n){return n!=null}function J8e(n){return Array.isArray(n)}function I0(n,e,t){return n?e:t}var Q8e=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var o=Object.entries(e).filter(function(s){var a=Ku(s,1),l=a[0];return!r.includes(l)});return o.reduce(function(s,a){var l=Ku(a,2),u=l[0],c=l[1];return s[u]=c,s},{})},eBe=["children","innerProps"],tBe=["children","innerProps"];function nBe(n){var e=n.maxHeight,t=n.menuEl,r=n.minHeight,i=n.placement,o=n.shouldScroll,s=n.isFixedPosition,a=n.controlHeight,l=j8e(t),u={placement:"bottom",maxHeight:e};if(!t||!t.offsetParent)return u;var c=l.getBoundingClientRect(),f=c.height,d=t.getBoundingClientRect(),h=d.bottom,m=d.height,g=d.top,y=t.offsetParent.getBoundingClientRect(),p=y.top,w=s?window.innerHeight:W8e(l),b=MQ(l),v=parseInt(getComputedStyle(t).marginBottom,10),S=parseInt(getComputedStyle(t).marginTop,10),x=p-S,M=w-g,A=x+b,T=f-b-g,C=h-w+b+v,D=b+g-S,R=160;switch(i){case"auto":case"bottom":if(M>=m)return{placement:"bottom",maxHeight:e};if(T>=m&&!s)return o&&yw(l,C,R),{placement:"bottom",maxHeight:e};if(!s&&T>=r||s&&M>=r){o&&yw(l,C,R);var B=s?M-v:T-v;return{placement:"bottom",maxHeight:B}}if(i==="auto"||s){var F=e,U=s?x:A;return U>=r&&(F=Math.min(U-v-a,e)),{placement:"top",maxHeight:F}}if(i==="bottom")return o&&YE(l,C),{placement:"bottom",maxHeight:e};break;case"top":if(x>=m)return{placement:"top",maxHeight:e};if(A>=m&&!s)return o&&yw(l,D,R),{placement:"top",maxHeight:e};if(!s&&A>=r||s&&x>=r){var N=e;return(!s&&A>=r||s&&x>=r)&&(N=s?x-S:A-S),o&&yw(l,D,R),{placement:"top",maxHeight:N}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return u}function rBe(n){var e={bottom:"top",top:"bottom"};return n?e[n]:"bottom"}var AQ=function(e){return e==="auto"?"bottom":e},iBe=function(e,t){var r,i=e.placement,o=e.theme,s=o.borderRadius,a=o.spacing,l=o.colors;return $t((r={label:"menu"},_r(r,rBe(i),"100%"),_r(r,"position","absolute"),_r(r,"width","100%"),_r(r,"zIndex",1),r),t?{}:{backgroundColor:l.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:a.menuGutter,marginTop:a.menuGutter})},TQ=z.createContext(null),oBe=function(e){var t=e.children,r=e.minMenuHeight,i=e.maxMenuHeight,o=e.menuPlacement,s=e.menuPosition,a=e.menuShouldScrollIntoView,l=e.theme,u=z.useContext(TQ)||{},c=u.setPortalPlacement,f=z.useRef(null),d=z.useState(i),h=Ku(d,2),m=h[0],g=h[1],y=z.useState(null),p=Ku(y,2),w=p[0],b=p[1],v=l.spacing.controlHeight;return mP(function(){var S=f.current;if(S){var x=s==="fixed",M=a&&!x,A=nBe({maxHeight:i,menuEl:S,minHeight:r,placement:o,shouldScroll:M,isFixedPosition:x,controlHeight:v});g(A.maxHeight),b(A.placement),c==null||c(A.placement)}},[i,o,s,a,r,c,v]),t({ref:f,placerProps:$t($t({},e),{},{placement:w||AQ(o),maxHeight:m})})},sBe=function(e){var t=e.children,r=e.innerRef,i=e.innerProps;return Wt("div",pt({},Wr(e,"menu",{menu:!0}),{ref:r},i),t)},aBe=sBe,lBe=function(e,t){var r=e.maxHeight,i=e.theme.spacing.baseUnit;return $t({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:i,paddingTop:i})},uBe=function(e){var t=e.children,r=e.innerProps,i=e.innerRef,o=e.isMulti;return Wt("div",pt({},Wr(e,"menuList",{"menu-list":!0,"menu-list--is-multi":o}),{ref:i},r),t)},DQ=function(e,t){var r=e.theme,i=r.spacing.baseUnit,o=r.colors;return $t({textAlign:"center"},t?{}:{color:o.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},cBe=DQ,fBe=DQ,dBe=function(e){var t=e.children,r=t===void 0?"No options":t,i=e.innerProps,o=cu(e,eBe);return Wt("div",pt({},Wr($t($t({},o),{},{children:r,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),r)},hBe=function(e){var t=e.children,r=t===void 0?"Loading...":t,i=e.innerProps,o=cu(e,tBe);return Wt("div",pt({},Wr($t($t({},o),{},{children:r,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),r)},pBe=function(e){var t=e.rect,r=e.offset,i=e.position;return{left:t.left,position:i,top:r,width:t.width,zIndex:1}},mBe=function(e){var t=e.appendTo,r=e.children,i=e.controlElement,o=e.innerProps,s=e.menuPlacement,a=e.menuPosition,l=z.useRef(null),u=z.useRef(null),c=z.useState(AQ(s)),f=Ku(c,2),d=f[0],h=f[1],m=z.useMemo(function(){return{setPortalPlacement:h}},[]),g=z.useState(null),y=Ku(g,2),p=y[0],w=y[1],b=z.useCallback(function(){if(i){var M=q8e(i),A=a==="fixed"?0:window.pageYOffset,T=M[d]+A;(T!==(p==null?void 0:p.offset)||M.left!==(p==null?void 0:p.rect.left)||M.width!==(p==null?void 0:p.rect.width))&&w({offset:T,rect:M})}},[i,a,d,p==null?void 0:p.offset,p==null?void 0:p.rect.left,p==null?void 0:p.rect.width]);mP(function(){b()},[b]);var v=z.useCallback(function(){typeof u.current=="function"&&(u.current(),u.current=null),i&&l.current&&(u.current=MZ(i,l.current,b,{elementResize:"ResizeObserver"in window}))},[i,b]);mP(function(){v()},[v]);var S=z.useCallback(function(M){l.current=M,v()},[v]);if(!t&&a!=="fixed"||!p)return null;var x=Wt("div",pt({ref:S},Wr($t($t({},e),{},{offset:p.offset,position:a,rect:p.rect}),"menuPortal",{"menu-portal":!0}),o),r);return Wt(TQ.Provider,{value:m},t?$1.createPortal(x,t):x)},gBe=function(e){var t=e.isDisabled,r=e.isRtl;return{label:"container",direction:r?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},vBe=function(e){var t=e.children,r=e.innerProps,i=e.isDisabled,o=e.isRtl;return Wt("div",pt({},Wr(e,"container",{"--is-disabled":i,"--is-rtl":o}),r),t)},yBe=function(e,t){var r=e.theme.spacing,i=e.isMulti,o=e.hasValue,s=e.selectProps.controlShouldRenderValue;return $t({alignItems:"center",display:i&&o&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(r.baseUnit*2,"px")})},xBe=function(e){var t=e.children,r=e.innerProps,i=e.isMulti,o=e.hasValue;return Wt("div",pt({},Wr(e,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":o}),r),t)},bBe=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},wBe=function(e){var t=e.children,r=e.innerProps;return Wt("div",pt({},Wr(e,"indicatorsContainer",{indicators:!0}),r),t)},PV,SBe=["size"],_Be=["innerProps","isRtl","size"],EBe={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},NQ=function(e){var t=e.size,r=cu(e,SBe);return Wt("svg",pt({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:EBe},r))},RI=function(e){return Wt(NQ,pt({size:20},e),Wt("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},PQ=function(e){return Wt(NQ,pt({size:20},e),Wt("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},RQ=function(e,t){var r=e.isFocused,i=e.theme,o=i.spacing.baseUnit,s=i.colors;return $t({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?s.neutral60:s.neutral20,padding:o*2,":hover":{color:r?s.neutral80:s.neutral40}})},MBe=RQ,CBe=function(e){var t=e.children,r=e.innerProps;return Wt("div",pt({},Wr(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||Wt(PQ,null))},ABe=RQ,TBe=function(e){var t=e.children,r=e.innerProps;return Wt("div",pt({},Wr(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||Wt(RI,null))},DBe=function(e,t){var r=e.isDisabled,i=e.theme,o=i.spacing.baseUnit,s=i.colors;return $t({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?s.neutral10:s.neutral20,marginBottom:o*2,marginTop:o*2})},NBe=function(e){var t=e.innerProps;return Wt("span",pt({},t,Wr(e,"indicatorSeparator",{"indicator-separator":!0})))},PBe=L8e(PV||(PV=U8e([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),RBe=function(e,t){var r=e.isFocused,i=e.size,o=e.theme,s=o.colors,a=o.spacing.baseUnit;return $t({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?s.neutral60:s.neutral20,padding:a*2})},RT=function(e){var t=e.delay,r=e.offset;return Wt("span",{css:PI({animation:"".concat(PBe," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},OBe=function(e){var t=e.innerProps,r=e.isRtl,i=e.size,o=i===void 0?4:i,s=cu(e,_Be);return Wt("div",pt({},Wr($t($t({},s),{},{innerProps:t,isRtl:r,size:o}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),Wt(RT,{delay:0,offset:r}),Wt(RT,{delay:160,offset:!0}),Wt(RT,{delay:320,offset:!r}))},kBe=function(e,t){var r=e.isDisabled,i=e.isFocused,o=e.theme,s=o.colors,a=o.borderRadius,l=o.spacing;return $t({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:l.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?s.neutral5:s.neutral0,borderColor:r?s.neutral10:i?s.primary:s.neutral20,borderRadius:a,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:i?s.primary:s.neutral30}})},IBe=function(e){var t=e.children,r=e.isDisabled,i=e.isFocused,o=e.innerRef,s=e.innerProps,a=e.menuIsOpen;return Wt("div",pt({ref:o},Wr(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":i,"control--menu-is-open":a}),s,{"aria-disabled":r||void 0}),t)},LBe=IBe,FBe=["data"],BBe=function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:r.baseUnit*2,paddingTop:r.baseUnit*2}},zBe=function(e){var t=e.children,r=e.cx,i=e.getStyles,o=e.getClassNames,s=e.Heading,a=e.headingProps,l=e.innerProps,u=e.label,c=e.theme,f=e.selectProps;return Wt("div",pt({},Wr(e,"group",{group:!0}),l),Wt(s,pt({},a,{selectProps:f,theme:c,getStyles:i,getClassNames:o,cx:r}),u),Wt("div",null,t))},UBe=function(e,t){var r=e.theme,i=r.colors,o=r.spacing;return $t({label:"group",cursor:"default",display:"block"},t?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:o.baseUnit*3,paddingRight:o.baseUnit*3,textTransform:"uppercase"})},VBe=function(e){var t=EQ(e);t.data;var r=cu(t,FBe);return Wt("div",pt({},Wr(e,"groupHeading",{"group-heading":!0}),r))},$Be=zBe,HBe=["innerRef","isDisabled","isHidden","inputClassName"],WBe=function(e,t){var r=e.isDisabled,i=e.value,o=e.theme,s=o.spacing,a=o.colors;return $t($t({visibility:r?"hidden":"visible",transform:i?"translateZ(0)":""},jBe),t?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:a.neutral80})},OQ={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},jBe={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":$t({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},OQ)},GBe=function(e){return $t({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},OQ)},qBe=function(e){var t=e.cx,r=e.value,i=EQ(e),o=i.innerRef,s=i.isDisabled,a=i.isHidden,l=i.inputClassName,u=cu(i,HBe);return Wt("div",pt({},Wr(e,"input",{"input-container":!0}),{"data-value":r||""}),Wt("input",pt({className:t({input:!0},l),ref:o,style:GBe(a),disabled:s},u)))},XBe=qBe,YBe=function(e,t){var r=e.theme,i=r.spacing,o=r.borderRadius,s=r.colors;return $t({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:s.neutral10,borderRadius:o/2,margin:i.baseUnit/2})},KBe=function(e,t){var r=e.theme,i=r.borderRadius,o=r.colors,s=e.cropWithEllipsis;return $t({overflow:"hidden",textOverflow:s||s===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:i/2,color:o.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},ZBe=function(e,t){var r=e.theme,i=r.spacing,o=r.borderRadius,s=r.colors,a=e.isFocused;return $t({alignItems:"center",display:"flex"},t?{}:{borderRadius:o/2,backgroundColor:a?s.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},kQ=function(e){var t=e.children,r=e.innerProps;return Wt("div",r,t)},JBe=kQ,QBe=kQ;function e5e(n){var e=n.children,t=n.innerProps;return Wt("div",pt({role:"button"},t),e||Wt(RI,{size:14}))}var t5e=function(e){var t=e.children,r=e.components,i=e.data,o=e.innerProps,s=e.isDisabled,a=e.removeProps,l=e.selectProps,u=r.Container,c=r.Label,f=r.Remove;return Wt(u,{data:i,innerProps:$t($t({},Wr(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),o),selectProps:l},Wt(c,{data:i,innerProps:$t({},Wr(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},t),Wt(f,{data:i,innerProps:$t($t({},Wr(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},a),selectProps:l}))},n5e=t5e,r5e=function(e,t){var r=e.isDisabled,i=e.isFocused,o=e.isSelected,s=e.theme,a=s.spacing,l=s.colors;return $t({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:o?l.primary:i?l.primary25:"transparent",color:r?l.neutral20:o?l.neutral0:"inherit",padding:"".concat(a.baseUnit*2,"px ").concat(a.baseUnit*3,"px"),":active":{backgroundColor:r?void 0:o?l.primary:l.primary50}})},i5e=function(e){var t=e.children,r=e.isDisabled,i=e.isFocused,o=e.isSelected,s=e.innerRef,a=e.innerProps;return Wt("div",pt({},Wr(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":i,"option--is-selected":o}),{ref:s,"aria-disabled":r},a),t)},o5e=i5e,s5e=function(e,t){var r=e.theme,i=r.spacing,o=r.colors;return $t({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:o.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},a5e=function(e){var t=e.children,r=e.innerProps;return Wt("div",pt({},Wr(e,"placeholder",{placeholder:!0}),r),t)},l5e=a5e,u5e=function(e,t){var r=e.isDisabled,i=e.theme,o=i.spacing,s=i.colors;return $t({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?s.neutral40:s.neutral80,marginLeft:o.baseUnit/2,marginRight:o.baseUnit/2})},c5e=function(e){var t=e.children,r=e.isDisabled,i=e.innerProps;return Wt("div",pt({},Wr(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),i),t)},f5e=c5e,d5e={ClearIndicator:TBe,Control:LBe,DropdownIndicator:CBe,DownChevron:PQ,CrossIcon:RI,Group:$Be,GroupHeading:VBe,IndicatorsContainer:wBe,IndicatorSeparator:NBe,Input:XBe,LoadingIndicator:OBe,Menu:aBe,MenuList:uBe,MenuPortal:mBe,LoadingMessage:hBe,NoOptionsMessage:dBe,MultiValue:n5e,MultiValueContainer:JBe,MultiValueLabel:QBe,MultiValueRemove:e5e,Option:o5e,Placeholder:l5e,SelectContainer:vBe,SingleValue:f5e,ValueContainer:xBe},h5e=function(e){return $t($t({},d5e),e.components)},RV=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function p5e(n,e){return!!(n===e||RV(n)&&RV(e))}function m5e(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!p5e(n[t],e[t]))return!1;return!0}function g5e(n,e){e===void 0&&(e=m5e);var t=null;function r(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(t&&t.lastThis===this&&e(i,t.lastArgs))return t.lastResult;var s=n.apply(this,i);return t={lastResult:s,lastArgs:i,lastThis:this},s}return r.clear=function(){t=null},r}var v5e={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},y5e=function(e){return Wt("span",pt({css:v5e},e))},OV=y5e,x5e={guidance:function(e){var t=e.isSearchable,r=e.isMulti,i=e.tabSelectsValue,o=e.context,s=e.isInitialFocus;switch(o){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return s?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,i=r===void 0?"":r,o=e.labels,s=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(o.length>1?"s":""," ").concat(o.join(","),", selected.");case"select-option":return s?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,i=e.options,o=e.label,s=o===void 0?"":o,a=e.selectValue,l=e.isDisabled,u=e.isSelected,c=e.isAppleDevice,f=function(g,y){return g&&g.length?"".concat(g.indexOf(y)+1," of ").concat(g.length):""};if(t==="value"&&a)return"value ".concat(s," focused, ").concat(f(a,r),".");if(t==="menu"&&c){var d=l?" disabled":"",h="".concat(u?" selected":"").concat(d);return"".concat(s).concat(h,", ").concat(f(i,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},b5e=function(e){var t=e.ariaSelection,r=e.focusedOption,i=e.focusedValue,o=e.focusableOptions,s=e.isFocused,a=e.selectValue,l=e.selectProps,u=e.id,c=e.isAppleDevice,f=l.ariaLiveMessages,d=l.getOptionLabel,h=l.inputValue,m=l.isMulti,g=l.isOptionDisabled,y=l.isSearchable,p=l.menuIsOpen,w=l.options,b=l.screenReaderStatus,v=l.tabSelectsValue,S=l.isLoading,x=l["aria-label"],M=l["aria-live"],A=z.useMemo(function(){return $t($t({},x5e),f||{})},[f]),T=z.useMemo(function(){var U="";if(t&&A.onChange){var N=t.option,I=t.options,V=t.removedValue,L=t.removedValues,X=t.value,Z=function(Se){return Array.isArray(Se)?null:Se},te=V||N||Z(X),Y=te?d(te):"",re=I||L||void 0,fe=re?re.map(d):[],ue=$t({isDisabled:te&&g(te,a),label:Y,labels:fe},t);U=A.onChange(ue)}return U},[t,A,g,a,d]),C=z.useMemo(function(){var U="",N=r||i,I=!!(r&&a&&a.includes(r));if(N&&A.onFocus){var V={focused:N,label:d(N),isDisabled:g(N,a),isSelected:I,options:o,context:N===r?"menu":"value",selectValue:a,isAppleDevice:c};U=A.onFocus(V)}return U},[r,i,d,g,A,o,a,c]),D=z.useMemo(function(){var U="";if(p&&w.length&&!S&&A.onFilter){var N=b({count:o.length});U=A.onFilter({inputValue:h,resultsMessage:N})}return U},[o,h,p,A,w,b,S]),R=(t==null?void 0:t.action)==="initial-input-focus",B=z.useMemo(function(){var U="";if(A.guidance){var N=i?"value":p?"menu":"input";U=A.guidance({"aria-label":x,context:N,isDisabled:r&&g(r,a),isMulti:m,isSearchable:y,tabSelectsValue:v,isInitialFocus:R})}return U},[x,r,i,m,g,y,p,A,a,v,R]),F=Wt(z.Fragment,null,Wt("span",{id:"aria-selection"},T),Wt("span",{id:"aria-focused"},C),Wt("span",{id:"aria-results"},D),Wt("span",{id:"aria-guidance"},B));return Wt(z.Fragment,null,Wt(OV,{id:u},R&&F),Wt(OV,{"aria-live":M,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},s&&!R&&F))},w5e=b5e,gP=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],S5e=new RegExp("["+gP.map(function(n){return n.letters}).join("")+"]","g"),IQ={};for(var OT=0;OT<gP.length;OT++)for(var kT=gP[OT],IT=0;IT<kT.letters.length;IT++)IQ[kT.letters[IT]]=kT.base;var LQ=function(e){return e.replace(S5e,function(t){return IQ[t]})},_5e=g5e(LQ),kV=function(e){return e.replace(/^\s+|\s+$/g,"")},E5e=function(e){return"".concat(e.label," ").concat(e.value)},M5e=function(e){return function(t,r){if(t.data.__isNew__)return!0;var i=$t({ignoreCase:!0,ignoreAccents:!0,stringify:E5e,trim:!0,matchFrom:"any"},e),o=i.ignoreCase,s=i.ignoreAccents,a=i.stringify,l=i.trim,u=i.matchFrom,c=l?kV(r):r,f=l?kV(a(t)):a(t);return o&&(c=c.toLowerCase(),f=f.toLowerCase()),s&&(c=_5e(c),f=LQ(f)),u==="start"?f.substr(0,c.length)===c:f.indexOf(c)>-1}},C5e=["innerRef"];function A5e(n){var e=n.innerRef,t=cu(n,C5e),r=Q8e(t,"onExited","in","enter","exit","appear");return Wt("input",pt({ref:e},r,{css:PI({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var T5e=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function D5e(n){var e=n.isEnabled,t=n.onBottomArrive,r=n.onBottomLeave,i=n.onTopArrive,o=n.onTopLeave,s=z.useRef(!1),a=z.useRef(!1),l=z.useRef(0),u=z.useRef(null),c=z.useCallback(function(y,p){if(u.current!==null){var w=u.current,b=w.scrollTop,v=w.scrollHeight,S=w.clientHeight,x=u.current,M=p>0,A=v-S-b,T=!1;A>p&&s.current&&(r&&r(y),s.current=!1),M&&a.current&&(o&&o(y),a.current=!1),M&&p>A?(t&&!s.current&&t(y),x.scrollTop=v,T=!0,s.current=!0):!M&&-p>b&&(i&&!a.current&&i(y),x.scrollTop=0,T=!0,a.current=!0),T&&T5e(y)}},[t,r,i,o]),f=z.useCallback(function(y){c(y,y.deltaY)},[c]),d=z.useCallback(function(y){l.current=y.changedTouches[0].clientY},[]),h=z.useCallback(function(y){var p=l.current-y.changedTouches[0].clientY;c(y,p)},[c]),m=z.useCallback(function(y){if(y){var p=K8e?{passive:!1}:!1;y.addEventListener("wheel",f,p),y.addEventListener("touchstart",d,p),y.addEventListener("touchmove",h,p)}},[h,d,f]),g=z.useCallback(function(y){y&&(y.removeEventListener("wheel",f,!1),y.removeEventListener("touchstart",d,!1),y.removeEventListener("touchmove",h,!1))},[h,d,f]);return z.useEffect(function(){if(e){var y=u.current;return m(y),function(){g(y)}}},[e,m,g]),function(y){u.current=y}}var IV=["boxSizing","height","overflow","paddingRight","position"],LV={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function FV(n){n.cancelable&&n.preventDefault()}function BV(n){n.stopPropagation()}function zV(){var n=this.scrollTop,e=this.scrollHeight,t=n+this.offsetHeight;n===0?this.scrollTop=1:t===e&&(this.scrollTop=n-1)}function UV(){return"ontouchstart"in window||navigator.maxTouchPoints}var VV=!!(typeof window<"u"&&window.document&&window.document.createElement),e0=0,Op={capture:!1,passive:!1};function N5e(n){var e=n.isEnabled,t=n.accountForScrollbars,r=t===void 0?!0:t,i=z.useRef({}),o=z.useRef(null),s=z.useCallback(function(l){if(VV){var u=document.body,c=u&&u.style;if(r&&IV.forEach(function(m){var g=c&&c[m];i.current[m]=g}),r&&e0<1){var f=parseInt(i.current.paddingRight,10)||0,d=document.body?document.body.clientWidth:0,h=window.innerWidth-d+f||0;Object.keys(LV).forEach(function(m){var g=LV[m];c&&(c[m]=g)}),c&&(c.paddingRight="".concat(h,"px"))}u&&UV()&&(u.addEventListener("touchmove",FV,Op),l&&(l.addEventListener("touchstart",zV,Op),l.addEventListener("touchmove",BV,Op))),e0+=1}},[r]),a=z.useCallback(function(l){if(VV){var u=document.body,c=u&&u.style;e0=Math.max(e0-1,0),r&&e0<1&&IV.forEach(function(f){var d=i.current[f];c&&(c[f]=d)}),u&&UV()&&(u.removeEventListener("touchmove",FV,Op),l&&(l.removeEventListener("touchstart",zV,Op),l.removeEventListener("touchmove",BV,Op)))}},[r]);return z.useEffect(function(){if(e){var l=o.current;return s(l),function(){a(l)}}},[e,s,a]),function(l){o.current=l}}var P5e=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},R5e={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function O5e(n){var e=n.children,t=n.lockEnabled,r=n.captureEnabled,i=r===void 0?!0:r,o=n.onBottomArrive,s=n.onBottomLeave,a=n.onTopArrive,l=n.onTopLeave,u=D5e({isEnabled:i,onBottomArrive:o,onBottomLeave:s,onTopArrive:a,onTopLeave:l}),c=N5e({isEnabled:t}),f=function(h){u(h),c(h)};return Wt(z.Fragment,null,t&&Wt("div",{onClick:P5e,css:R5e}),e(f))}var k5e={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},I5e=function(e){var t=e.name,r=e.onFocus;return Wt("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:k5e,value:"",onChange:function(){}})},L5e=I5e;function OI(n){var e;return typeof window<"u"&&window.navigator!=null?n.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function F5e(){return OI(/^iPhone/i)}function FQ(){return OI(/^Mac/i)}function B5e(){return OI(/^iPad/i)||FQ()&&navigator.maxTouchPoints>1}function z5e(){return F5e()||B5e()}function U5e(){return FQ()||z5e()}var V5e=function(e){return e.label},BQ=function(e){return e.label},zQ=function(e){return e.value},$5e=function(e){return!!e.isDisabled},H5e={clearIndicator:ABe,container:gBe,control:kBe,dropdownIndicator:MBe,group:BBe,groupHeading:UBe,indicatorsContainer:bBe,indicatorSeparator:DBe,input:WBe,loadingIndicator:RBe,loadingMessage:fBe,menu:iBe,menuList:lBe,menuPortal:pBe,multiValue:YBe,multiValueLabel:KBe,multiValueRemove:ZBe,noOptionsMessage:cBe,option:r5e,placeholder:s5e,singleValue:u5e,valueContainer:yBe},W5e={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},j5e=4,UQ=4,G5e=38,q5e=UQ*2,X5e={baseUnit:UQ,controlHeight:G5e,menuGutter:q5e},LT={borderRadius:j5e,colors:W5e,spacing:X5e},Y5e={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:NV(),captureMenuScroll:!NV(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:M5e(),formatGroupLabel:V5e,getOptionLabel:BQ,getOptionValue:zQ,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:$5e,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!X8e(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function $V(n,e,t,r){var i=HQ(n,e,t),o=WQ(n,e,t),s=$Q(n,e),a=KE(n,e);return{type:"option",data:e,isDisabled:i,isSelected:o,label:s,value:a,index:r}}function c_(n,e){return n.options.map(function(t,r){if("options"in t){var i=t.options.map(function(s,a){return $V(n,s,e,a)}).filter(function(s){return WV(n,s)});return i.length>0?{type:"group",data:t,options:i,index:r}:void 0}var o=$V(n,t,e,r);return WV(n,o)?o:void 0}).filter(Z8e)}function VQ(n){return n.reduce(function(e,t){return t.type==="group"?e.push.apply(e,Zm(t.options.map(function(r){return r.data}))):e.push(t.data),e},[])}function HV(n,e){return n.reduce(function(t,r){return r.type==="group"?t.push.apply(t,Zm(r.options.map(function(i){return{data:i.data,id:"".concat(e,"-").concat(r.index,"-").concat(i.index)}}))):t.push({data:r.data,id:"".concat(e,"-").concat(r.index)}),t},[])}function K5e(n,e){return VQ(c_(n,e))}function WV(n,e){var t=n.inputValue,r=t===void 0?"":t,i=e.data,o=e.isSelected,s=e.label,a=e.value;return(!GQ(n)||!o)&&jQ(n,{label:s,value:a,data:i},r)}function Z5e(n,e){var t=n.focusedValue,r=n.selectValue,i=r.indexOf(t);if(i>-1){var o=e.indexOf(t);if(o>-1)return t;if(i<e.length)return e[i]}return null}function J5e(n,e){var t=n.focusedOption;return t&&e.indexOf(t)>-1?t:e[0]}var FT=function(e,t){var r,i=(r=e.find(function(o){return o.data===t}))===null||r===void 0?void 0:r.id;return i||null},$Q=function(e,t){return e.getOptionLabel(t)},KE=function(e,t){return e.getOptionValue(t)};function HQ(n,e,t){return typeof n.isOptionDisabled=="function"?n.isOptionDisabled(e,t):!1}function WQ(n,e,t){if(t.indexOf(e)>-1)return!0;if(typeof n.isOptionSelected=="function")return n.isOptionSelected(e,t);var r=KE(n,e);return t.some(function(i){return KE(n,i)===r})}function jQ(n,e,t){return n.filterOption?n.filterOption(e,t):!0}var GQ=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},Q5e=1,qQ=function(n){E4e(t,n);var e=A4e(t);function t(r){var i;if(S4e(this,t),i=e.call(this,r),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.isAppleDevice=U5e(),i.controlRef=null,i.getControlRef=function(l){i.controlRef=l},i.focusedOptionRef=null,i.getFocusedOptionRef=function(l){i.focusedOptionRef=l},i.menuListRef=null,i.getMenuListRef=function(l){i.menuListRef=l},i.inputRef=null,i.getInputRef=function(l){i.inputRef=l},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(l,u){var c=i.props,f=c.onChange,d=c.name;u.name=d,i.ariaOnChange(l,u),f(l,u)},i.setValue=function(l,u,c){var f=i.props,d=f.closeMenuOnSelect,h=f.isMulti,m=f.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:m}),d&&(i.setState({inputIsHiddenAfterUpdate:!h}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(l,{action:u,option:c})},i.selectOption=function(l){var u=i.props,c=u.blurInputOnSelect,f=u.isMulti,d=u.name,h=i.state.selectValue,m=f&&i.isOptionSelected(l,h),g=i.isOptionDisabled(l,h);if(m){var y=i.getOptionValue(l);i.setValue(h.filter(function(p){return i.getOptionValue(p)!==y}),"deselect-option",l)}else if(!g)f?i.setValue([].concat(Zm(h),[l]),"select-option",l):i.setValue(l,"select-option");else{i.ariaOnChange(l,{action:"select-option",option:l,name:d});return}c&&i.blurInput()},i.removeValue=function(l){var u=i.props.isMulti,c=i.state.selectValue,f=i.getOptionValue(l),d=c.filter(function(m){return i.getOptionValue(m)!==f}),h=I0(u,d,d[0]||null);i.onChange(h,{action:"remove-value",removedValue:l}),i.focusInput()},i.clearValue=function(){var l=i.state.selectValue;i.onChange(I0(i.props.isMulti,[],null),{action:"clear",removedValues:l})},i.popValue=function(){var l=i.props.isMulti,u=i.state.selectValue,c=u[u.length-1],f=u.slice(0,u.length-1),d=I0(l,f,f[0]||null);c&&i.onChange(d,{action:"pop-value",removedValue:c})},i.getFocusedOptionId=function(l){return FT(i.state.focusableOptionsWithIds,l)},i.getFocusableOptionsWithIds=function(){return HV(c_(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return H8e.apply(void 0,[i.props.classNamePrefix].concat(u))},i.getOptionLabel=function(l){return $Q(i.props,l)},i.getOptionValue=function(l){return KE(i.props,l)},i.getStyles=function(l,u){var c=i.props.unstyled,f=H5e[l](u,c);f.boxSizing="border-box";var d=i.props.styles[l];return d?d(f,u):f},i.getClassNames=function(l,u){var c,f;return(c=(f=i.props.classNames)[l])===null||c===void 0?void 0:c.call(f,u)},i.getElementId=function(l){return"".concat(i.state.instancePrefix,"-").concat(l)},i.getComponents=function(){return h5e(i.props)},i.buildCategorizedOptions=function(){return c_(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return VQ(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(l,u){i.setState({ariaSelection:$t({value:l},u)})},i.onMenuMouseDown=function(l){l.button===0&&(l.stopPropagation(),l.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(l){i.blockOptionHover=!1},i.onControlMouseDown=function(l){if(!l.defaultPrevented){var u=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&i.onMenuClose():u&&i.openMenu("first"):(u&&(i.openAfterFocus=!0),i.focusInput()),l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&l.preventDefault()}},i.onDropdownIndicatorMouseDown=function(l){if(!(l&&l.type==="mousedown"&&l.button!==0)&&!i.props.isDisabled){var u=i.props,c=u.isMulti,f=u.menuIsOpen;i.focusInput(),f?(i.setState({inputIsHiddenAfterUpdate:!c}),i.onMenuClose()):i.openMenu("first"),l.preventDefault()}},i.onClearIndicatorMouseDown=function(l){l&&l.type==="mousedown"&&l.button!==0||(i.clearValue(),l.preventDefault(),i.openAfterFocus=!1,l.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(l){typeof i.props.closeMenuOnScroll=="boolean"?l.target instanceof HTMLElement&&L2(l.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(l)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(l){var u=l.touches,c=u&&u.item(0);c&&(i.initialTouchX=c.clientX,i.initialTouchY=c.clientY,i.userIsDragging=!1)},i.onTouchMove=function(l){var u=l.touches,c=u&&u.item(0);if(c){var f=Math.abs(c.clientX-i.initialTouchX),d=Math.abs(c.clientY-i.initialTouchY),h=5;i.userIsDragging=f>h||d>h}},i.onTouchEnd=function(l){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(l.target)&&i.menuListRef&&!i.menuListRef.contains(l.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(l){i.userIsDragging||i.onControlMouseDown(l)},i.onClearIndicatorTouchEnd=function(l){i.userIsDragging||i.onClearIndicatorMouseDown(l)},i.onDropdownIndicatorTouchEnd=function(l){i.userIsDragging||i.onDropdownIndicatorMouseDown(l)},i.handleInputChange=function(l){var u=i.props.inputValue,c=l.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(c,{action:"input-change",prevInputValue:u}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(l){i.props.onFocus&&i.props.onFocus(l),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(l){var u=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(l),i.onInputChange("",{action:"input-blur",prevInputValue:u}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(l){if(!(i.blockOptionHover||i.state.focusedOption===l)){var u=i.getFocusableOptions(),c=u.indexOf(l);i.setState({focusedOption:l,focusedOptionId:c>-1?i.getFocusedOptionId(l):null})}},i.shouldHideSelectedOptions=function(){return GQ(i.props)},i.onValueInputFocus=function(l){l.preventDefault(),l.stopPropagation(),i.focus()},i.onKeyDown=function(l){var u=i.props,c=u.isMulti,f=u.backspaceRemovesValue,d=u.escapeClearsValue,h=u.inputValue,m=u.isClearable,g=u.isDisabled,y=u.menuIsOpen,p=u.onKeyDown,w=u.tabSelectsValue,b=u.openMenuOnFocus,v=i.state,S=v.focusedOption,x=v.focusedValue,M=v.selectValue;if(!g&&!(typeof p=="function"&&(p(l),l.defaultPrevented))){switch(i.blockOptionHover=!0,l.key){case"ArrowLeft":if(!c||h)return;i.focusValue("previous");break;case"ArrowRight":if(!c||h)return;i.focusValue("next");break;case"Delete":case"Backspace":if(h)return;if(x)i.removeValue(x);else{if(!f)return;c?i.popValue():m&&i.clearValue()}break;case"Tab":if(i.isComposing||l.shiftKey||!y||!w||!S||b&&i.isOptionSelected(S,M))return;i.selectOption(S);break;case"Enter":if(l.keyCode===229)break;if(y){if(!S||i.isComposing)return;i.selectOption(S);break}return;case"Escape":y?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:h}),i.onMenuClose()):m&&d&&i.clearValue();break;case" ":if(h)return;if(!y){i.openMenu("first");break}if(!S)return;i.selectOption(S);break;case"ArrowUp":y?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":y?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!y)return;i.focusOption("pageup");break;case"PageDown":if(!y)return;i.focusOption("pagedown");break;case"Home":if(!y)return;i.focusOption("first");break;case"End":if(!y)return;i.focusOption("last");break;default:return}l.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++Q5e),i.state.selectValue=XE(r.value),r.menuIsOpen&&i.state.selectValue.length){var o=i.getFocusableOptionsWithIds(),s=i.buildFocusableOptions(),a=s.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=o,i.state.focusedOption=s[a],i.state.focusedOptionId=FT(o,s[a])}return i}return _4e(t,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&DV(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(i){var o=this.props,s=o.isDisabled,a=o.menuIsOpen,l=this.state.isFocused;(l&&!s&&i.isDisabled||l&&a&&!i.menuIsOpen)&&this.focusInput(),l&&s&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!l&&!s&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(DV(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,o){this.props.onInputChange(i,o)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var o=this,s=this.state,a=s.selectValue,l=s.isFocused,u=this.buildFocusableOptions(),c=i==="first"?0:u.length-1;if(!this.props.isMulti){var f=u.indexOf(a[0]);f>-1&&(c=f)}this.scrollToFocusedOptionOnUpdate=!(l&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:u[c],focusedOptionId:this.getFocusedOptionId(u[c])},function(){return o.onMenuOpen()})}},{key:"focusValue",value:function(i){var o=this.state,s=o.selectValue,a=o.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var l=s.indexOf(a);a||(l=-1);var u=s.length-1,c=-1;if(s.length){switch(i){case"previous":l===0?c=0:l===-1?c=u:c=l-1;break;case"next":l>-1&&l<u&&(c=l+1);break}this.setState({inputIsHidden:c!==-1,focusedValue:s[c]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",o=this.props.pageSize,s=this.state.focusedOption,a=this.getFocusableOptions();if(a.length){var l=0,u=a.indexOf(s);s||(u=-1),i==="up"?l=u>0?u-1:a.length-1:i==="down"?l=(u+1)%a.length:i==="pageup"?(l=u-o,l<0&&(l=0)):i==="pagedown"?(l=u+o,l>a.length-1&&(l=a.length-1)):i==="last"&&(l=a.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:a[l],focusedValue:null,focusedOptionId:this.getFocusedOptionId(a[l])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(LT):$t($t({},LT),this.props.theme):LT}},{key:"getCommonProps",value:function(){var i=this.clearValue,o=this.cx,s=this.getStyles,a=this.getClassNames,l=this.getValue,u=this.selectOption,c=this.setValue,f=this.props,d=f.isMulti,h=f.isRtl,m=f.options,g=this.hasValue();return{clearValue:i,cx:o,getStyles:s,getClassNames:a,getValue:l,hasValue:g,isMulti:d,isRtl:h,options:m,selectOption:u,selectProps:f,setValue:c,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,o=i.isClearable,s=i.isMulti;return o===void 0?s:o}},{key:"isOptionDisabled",value:function(i,o){return HQ(this.props,i,o)}},{key:"isOptionSelected",value:function(i,o){return WQ(this.props,i,o)}},{key:"filterOption",value:function(i,o){return jQ(this.props,i,o)}},{key:"formatOptionLabel",value:function(i,o){if(typeof this.props.formatOptionLabel=="function"){var s=this.props.inputValue,a=this.state.selectValue;return this.props.formatOptionLabel(i,{context:o,inputValue:s,selectValue:a})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,o=i.isDisabled,s=i.isSearchable,a=i.inputId,l=i.inputValue,u=i.tabIndex,c=i.form,f=i.menuIsOpen,d=i.required,h=this.getComponents(),m=h.Input,g=this.state,y=g.inputIsHidden,p=g.ariaSelection,w=this.commonProps,b=a||this.getElementId("input"),v=$t($t($t({"aria-autocomplete":"list","aria-expanded":f,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":d,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},f&&{"aria-controls":this.getElementId("listbox")}),!s&&{"aria-readonly":!0}),this.hasValue()?(p==null?void 0:p.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return s?z.createElement(m,pt({},w,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:b,innerRef:this.getInputRef,isDisabled:o,isHidden:y,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:u,form:c,type:"text",value:l},v)):z.createElement(A5e,pt({id:b,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:qE,onFocus:this.onInputFocus,disabled:o,tabIndex:u,inputMode:"none",form:c,value:""},v))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,o=this.getComponents(),s=o.MultiValue,a=o.MultiValueContainer,l=o.MultiValueLabel,u=o.MultiValueRemove,c=o.SingleValue,f=o.Placeholder,d=this.commonProps,h=this.props,m=h.controlShouldRenderValue,g=h.isDisabled,y=h.isMulti,p=h.inputValue,w=h.placeholder,b=this.state,v=b.selectValue,S=b.focusedValue,x=b.isFocused;if(!this.hasValue()||!m)return p?null:z.createElement(f,pt({},d,{key:"placeholder",isDisabled:g,isFocused:x,innerProps:{id:this.getElementId("placeholder")}}),w);if(y)return v.map(function(A,T){var C=A===S,D="".concat(i.getOptionLabel(A),"-").concat(i.getOptionValue(A));return z.createElement(s,pt({},d,{components:{Container:a,Label:l,Remove:u},isFocused:C,isDisabled:g,key:D,index:T,removeProps:{onClick:function(){return i.removeValue(A)},onTouchEnd:function(){return i.removeValue(A)},onMouseDown:function(B){B.preventDefault()}},data:A}),i.formatOptionLabel(A,"value"))});if(p)return null;var M=v[0];return z.createElement(c,pt({},d,{data:M,isDisabled:g}),this.formatOptionLabel(M,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),o=i.ClearIndicator,s=this.commonProps,a=this.props,l=a.isDisabled,u=a.isLoading,c=this.state.isFocused;if(!this.isClearable()||!o||l||!this.hasValue()||u)return null;var f={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return z.createElement(o,pt({},s,{innerProps:f,isFocused:c}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),o=i.LoadingIndicator,s=this.commonProps,a=this.props,l=a.isDisabled,u=a.isLoading,c=this.state.isFocused;if(!o||!u)return null;var f={"aria-hidden":"true"};return z.createElement(o,pt({},s,{innerProps:f,isDisabled:l,isFocused:c}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),o=i.DropdownIndicator,s=i.IndicatorSeparator;if(!o||!s)return null;var a=this.commonProps,l=this.props.isDisabled,u=this.state.isFocused;return z.createElement(s,pt({},a,{isDisabled:l,isFocused:u}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),o=i.DropdownIndicator;if(!o)return null;var s=this.commonProps,a=this.props.isDisabled,l=this.state.isFocused,u={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return z.createElement(o,pt({},s,{innerProps:u,isDisabled:a,isFocused:l}))}},{key:"renderMenu",value:function(){var i=this,o=this.getComponents(),s=o.Group,a=o.GroupHeading,l=o.Menu,u=o.MenuList,c=o.MenuPortal,f=o.LoadingMessage,d=o.NoOptionsMessage,h=o.Option,m=this.commonProps,g=this.state.focusedOption,y=this.props,p=y.captureMenuScroll,w=y.inputValue,b=y.isLoading,v=y.loadingMessage,S=y.minMenuHeight,x=y.maxMenuHeight,M=y.menuIsOpen,A=y.menuPlacement,T=y.menuPosition,C=y.menuPortalTarget,D=y.menuShouldBlockScroll,R=y.menuShouldScrollIntoView,B=y.noOptionsMessage,F=y.onMenuScrollToTop,U=y.onMenuScrollToBottom;if(!M)return null;var N=function(Y,re){var fe=Y.type,ue=Y.data,ge=Y.isDisabled,Se=Y.isSelected,xe=Y.label,De=Y.value,Ae=g===ue,ie=ge?void 0:function(){return i.onOptionHover(ue)},Re=ge?void 0:function(){return i.selectOption(ue)},Pe="".concat(i.getElementId("option"),"-").concat(re),ee={id:Pe,onClick:Re,onMouseMove:ie,onMouseOver:ie,tabIndex:-1,role:"option","aria-selected":i.isAppleDevice?void 0:Se};return z.createElement(h,pt({},m,{innerProps:ee,data:ue,isDisabled:ge,isSelected:Se,key:Pe,label:xe,type:fe,value:De,isFocused:Ae,innerRef:Ae?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(Y.data,"menu"))},I;if(this.hasOptions())I=this.getCategorizedOptions().map(function(te){if(te.type==="group"){var Y=te.data,re=te.options,fe=te.index,ue="".concat(i.getElementId("group"),"-").concat(fe),ge="".concat(ue,"-heading");return z.createElement(s,pt({},m,{key:ue,data:Y,options:re,Heading:a,headingProps:{id:ge,data:te.data},label:i.formatGroupLabel(te.data)}),te.options.map(function(Se){return N(Se,"".concat(fe,"-").concat(Se.index))}))}else if(te.type==="option")return N(te,"".concat(te.index))});else if(b){var V=v({inputValue:w});if(V===null)return null;I=z.createElement(f,m,V)}else{var L=B({inputValue:w});if(L===null)return null;I=z.createElement(d,m,L)}var X={minMenuHeight:S,maxMenuHeight:x,menuPlacement:A,menuPosition:T,menuShouldScrollIntoView:R},Z=z.createElement(oBe,pt({},m,X),function(te){var Y=te.ref,re=te.placerProps,fe=re.placement,ue=re.maxHeight;return z.createElement(l,pt({},m,X,{innerRef:Y,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:b,placement:fe}),z.createElement(O5e,{captureEnabled:p,onTopArrive:F,onBottomArrive:U,lockEnabled:D},function(ge){return z.createElement(u,pt({},m,{innerRef:function(xe){i.getMenuListRef(xe),ge(xe)},innerProps:{role:"listbox","aria-multiselectable":m.isMulti,id:i.getElementId("listbox")},isLoading:b,maxHeight:ue,focusedOption:g}),I)}))});return C||T==="fixed"?z.createElement(c,pt({},m,{appendTo:C,controlElement:this.controlRef,menuPlacement:A,menuPosition:T}),Z):Z}},{key:"renderFormField",value:function(){var i=this,o=this.props,s=o.delimiter,a=o.isDisabled,l=o.isMulti,u=o.name,c=o.required,f=this.state.selectValue;if(c&&!this.hasValue()&&!a)return z.createElement(L5e,{name:u,onFocus:this.onValueInputFocus});if(!(!u||a))if(l)if(s){var d=f.map(function(g){return i.getOptionValue(g)}).join(s);return z.createElement("input",{name:u,type:"hidden",value:d})}else{var h=f.length>0?f.map(function(g,y){return z.createElement("input",{key:"i-".concat(y),name:u,type:"hidden",value:i.getOptionValue(g)})}):z.createElement("input",{name:u,type:"hidden",value:""});return z.createElement("div",null,h)}else{var m=f[0]?this.getOptionValue(f[0]):"";return z.createElement("input",{name:u,type:"hidden",value:m})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,o=this.state,s=o.ariaSelection,a=o.focusedOption,l=o.focusedValue,u=o.isFocused,c=o.selectValue,f=this.getFocusableOptions();return z.createElement(w5e,pt({},i,{id:this.getElementId("live-region"),ariaSelection:s,focusedOption:a,focusedValue:l,isFocused:u,selectValue:c,focusableOptions:f,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),o=i.Control,s=i.IndicatorsContainer,a=i.SelectContainer,l=i.ValueContainer,u=this.props,c=u.className,f=u.id,d=u.isDisabled,h=u.menuIsOpen,m=this.state.isFocused,g=this.commonProps=this.getCommonProps();return z.createElement(a,pt({},g,{className:c,innerProps:{id:f,onKeyDown:this.onKeyDown},isDisabled:d,isFocused:m}),this.renderLiveRegion(),z.createElement(o,pt({},g,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:d,isFocused:m,menuIsOpen:h}),z.createElement(l,pt({},g,{isDisabled:d}),this.renderPlaceholderOrValue(),this.renderInput()),z.createElement(s,pt({},g,{isDisabled:d}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,o){var s=o.prevProps,a=o.clearFocusValueOnUpdate,l=o.inputIsHiddenAfterUpdate,u=o.ariaSelection,c=o.isFocused,f=o.prevWasFocused,d=o.instancePrefix,h=i.options,m=i.value,g=i.menuIsOpen,y=i.inputValue,p=i.isMulti,w=XE(m),b={};if(s&&(m!==s.value||h!==s.options||g!==s.menuIsOpen||y!==s.inputValue)){var v=g?K5e(i,w):[],S=g?HV(c_(i,w),"".concat(d,"-option")):[],x=a?Z5e(o,w):null,M=J5e(o,v),A=FT(S,M);b={selectValue:w,focusedOption:M,focusedOptionId:A,focusableOptionsWithIds:S,focusedValue:x,clearFocusValueOnUpdate:!1}}var T=l!=null&&i!==s?{inputIsHidden:l,inputIsHiddenAfterUpdate:void 0}:{},C=u,D=c&&f;return c&&!D&&(C={value:I0(p,w,w[0]||null),options:w,action:"initial-input-focus"},D=!f),(u==null?void 0:u.action)==="initial-input-focus"&&(C=null),$t($t($t({},b),T),{},{prevProps:i,ariaSelection:C,prevWasFocused:D})}}]),t}(z.Component);qQ.defaultProps=Y5e;var eze=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function tze(n){var e=n.defaultInputValue,t=e===void 0?"":e,r=n.defaultMenuIsOpen,i=r===void 0?!1:r,o=n.defaultValue,s=o===void 0?null:o,a=n.inputValue,l=n.menuIsOpen,u=n.onChange,c=n.onInputChange,f=n.onMenuClose,d=n.onMenuOpen,h=n.value,m=cu(n,eze),g=z.useState(a!==void 0?a:t),y=Ku(g,2),p=y[0],w=y[1],b=z.useState(l!==void 0?l:i),v=Ku(b,2),S=v[0],x=v[1],M=z.useState(h!==void 0?h:s),A=Ku(M,2),T=A[0],C=A[1],D=z.useCallback(function(V,L){typeof u=="function"&&u(V,L),C(V)},[u]),R=z.useCallback(function(V,L){var X;typeof c=="function"&&(X=c(V,L)),w(X!==void 0?X:V)},[c]),B=z.useCallback(function(){typeof d=="function"&&d(),x(!0)},[d]),F=z.useCallback(function(){typeof f=="function"&&f(),x(!1)},[f]),U=a!==void 0?a:p,N=l!==void 0?l:S,I=h!==void 0?h:T;return $t($t({},m),{},{inputValue:U,menuIsOpen:N,onChange:D,onInputChange:R,onMenuClose:F,onMenuOpen:B,value:I})}var nze=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],jV=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=String(e).toLowerCase(),o=String(r.getOptionValue(t)).toLowerCase(),s=String(r.getOptionLabel(t)).toLowerCase();return o===i||s===i},BT={formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,t,r,i){return!(!e||t.some(function(o){return jV(e,o,i)})||r.some(function(o){return jV(e,o,i)}))},getNewOptionData:function(e,t){return{label:t,value:e,__isNew__:!0}}};function rze(n){var e=n.allowCreateWhileLoading,t=e===void 0?!1:e,r=n.createOptionPosition,i=r===void 0?"last":r,o=n.formatCreateLabel,s=o===void 0?BT.formatCreateLabel:o,a=n.isValidNewOption,l=a===void 0?BT.isValidNewOption:a,u=n.getNewOptionData,c=u===void 0?BT.getNewOptionData:u,f=n.onCreateOption,d=n.options,h=d===void 0?[]:d,m=n.onChange,g=cu(n,nze),y=g.getOptionValue,p=y===void 0?zQ:y,w=g.getOptionLabel,b=w===void 0?BQ:w,v=g.inputValue,S=g.isLoading,x=g.isMulti,M=g.value,A=g.name,T=z.useMemo(function(){return l(v,XE(M),h,{getOptionValue:p,getOptionLabel:b})?c(v,s(v)):void 0},[s,c,b,p,v,l,h,M]),C=z.useMemo(function(){return(t||!S)&&T?i==="first"?[T].concat(Zm(h)):[].concat(Zm(h),[T]):h},[t,i,S,T,h]),D=z.useCallback(function(R,B){if(B.action!=="select-option")return m(R,B);var F=Array.isArray(R)?R:[R];if(F[F.length-1]===T){if(f)f(v);else{var U=c(v,v),N={action:"create-option",name:A,option:U};m(I0(x,[].concat(Zm(XE(M)),[U]),U),N)}return}m(R,B)},[c,v,x,A,T,f,m,M]);return $t($t({},g),{},{options:C,onChange:D})}var ize=z.forwardRef(function(n,e){var t=tze(n),r=rze(t);return z.createElement(qQ,pt({ref:e},r))}),XQ=ize;const YQ=[{value:"abundance-tool",label:"Abundance tool"},{value:"examples",label:"Example"},{value:"furniture",label:"Furniture"},{value:"hardware",label:"Hardware"},{value:"project",label:"Project"}],KQ=({setExportPopUp:n,authorizedUserOcto:e,exporting:t})=>{var r=null,i=null,o=`###### Note: Do not edit this file directly, it is automatically generated from the CAD model 
# Bill Of Materials 
 |Part|Number Needed|Price|Source| 
 |----|----------|-----|-----|`,s="###### Note: Do not edit this file directly, it is automatically generated from the CAD model";const a=[];Object.keys(bV).forEach(v=>{a.push(v)});const l=rd(),u=z.useRef(),c=z.useRef(),f=z.useRef(),d=z.useRef(),h=z.useRef(),[m,g]=z.useState(!1),[y,p]=z.useState(0),w=async([v,S,x,M,A],T,C)=>{T!==void 0&&C?(O.topLevelMolecule=T,T.topLevel=!0):O.topLevelMolecule=new nx({x:0,y:0,topLevel:!0,name:v,atomType:"Molecule",uniqueID:O.generateUniqueID(),unitsKey:A}),O.currentMolecule=O.topLevelMolecule,await e.request("POST /user/repos",{name:v,description:x,headers:{"X-GitHub-Api-Version":"2022-11-28"}}).catch(D=>{window.alert("Error creating project. That name might be taken already. Please try again with a different name."),g(!1)}).then(D=>{p(10),i=D.data.name,r=O.currentUser;var R=O.topLevelMolecule.serialize();R.filetypeVersion=1;const B=window.btoa(JSON.stringify(R,null,4));let F=S.join(" "),U=(D.data.name+" "+D.data.owner.login+" "+x+" "+F).toLowerCase(),N={owner:D.data.owner.login,description:x,ranking:D.data.stargazers_count,searchField:U,repoName:D.data.name,forks:D.data.forks_count,topMoleculeID:O.topLevelMolecule.uniqueID,topics:S,html_url:D.data.html_url,parentRepo:null,readme:"https://raw.githubusercontent.com/"+D.data.full_name+"/master/README.md?sanitize=true",contentURL:"https://raw.githubusercontent.com/"+D.data.full_name+"/master/project.abundance?sanitize=true",githubMoleculesUsed:[],svgURL:"https://raw.githubusercontent.com/"+D.data.full_name+"/master/project.svg?sanitize=true",dateCreated:D.data.created_at};fetch("https://hg5gsgv9te.execute-api.us-east-2.amazonaws.com/abundance-stage//post-new-project",{method:"POST",body:JSON.stringify(N),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(V=>{O.currentRepo=N}),e.rest.repos.createOrUpdateFileContents({owner:r,repo:i,path:"project.abundance",message:"Initialize repo",content:B}).then(V=>{p(20);var L=window.btoa(o);e.rest.repos.createOrUpdateFileContents({owner:r,repo:i,path:"BillOfMaterials.md",message:"initialize BOM",content:L}).then(()=>{p(30),L=window.btoa(s),e.rest.repos.createOrUpdateFileContents({owner:r,repo:i,path:"README.md",message:"initialize README",content:L}).then(()=>{p(40),e.rest.repos.createOrUpdateFileContents({owner:r,repo:i,path:"project.svg",message:"SVG Picture",content:""}).then(()=>{p(50),e.rest.repos.createOrUpdateFileContents({owner:r,repo:i,path:".gitattributes",message:"Create gitattributes",content:window.btoa("data binary")}).then(()=>{p(60),e.rest.repos.createOrUpdateFileContents({owner:r,repo:i,path:"data.json",message:"Data file",content:""}).then(()=>{p(80),e.rest.repos.createOrUpdateFileContents({owner:r,repo:i,path:"LICENSE.txt",message:"Establish license",content:window.btoa(O.toBinaryStr(bV[M]))}).then(()=>{p(90),e.rest.repos.replaceAllTopics({owner:r,repo:i,names:S}).then(()=>{n(!1),l(`/${O.currentRepo.owner}/${O.currentRepo.repoName}`)})})})})})})})})})},b=async v=>{v.preventDefault(),g(!0);const S=u.current.value,x=c.current.getValue(),M=f.current.value,A=[],T=d.current.value,C=h.current.value;if(x.forEach(R=>{A.push(R.value)}),O.currentMolecule)var D=O.currentMolecule;w([S,A,M,T,C],D,t)};return Q.jsx(Q.Fragment,{children:Q.jsx("div",{className:"login-page export-div",children:Q.jsxs("div",{className:"form animate fadeInUp one",children:[Q.jsx("button",{style:{width:"3%",display:"block"},onClick:()=>{n(!1)},className:"closeButton",children:Q.jsx("img",{})}),Q.jsxs("form",{className:"new-project-form",onSubmit:v=>{b(v)},children:[Q.jsx("h2",{children:t?"Export this molecule to Github":"Create a New Project"}),Q.jsx("label",{htmlFor:"project-name",children:"Project Name"}),Q.jsx("input",{id:"project-name",name:"Project Name",placeholder:"Project Name",ref:u,required:!0}),Q.jsx("label",{htmlFor:"license-options",children:"License"}),Q.jsx("select",{id:"license-options",ref:d,children:a.map(v=>Q.jsx("option",{value:v,children:v},v))}),Q.jsx("label",{htmlFor:"measure-units",children:"Units"}),Q.jsxs("select",{id:"measure-units",ref:h,children:[Q.jsx("option",{value:"Inches",children:"Inches"},"inchesop"),Q.jsx("option",{value:"MM",children:"MM"},"millop")]}),Q.jsx("label",{htmlFor:"project-description",children:"Project Description"}),Q.jsx("input",{placeholder:"Project Description",ref:f}),Q.jsx("label",{htmlFor:"project-topics",children:"Project Tags"}),Q.jsx(XQ,{defaultValue:[],isMulti:!0,name:"Project Topics",options:YQ,className:"basic-multi-select",classNamePrefix:"select",ref:c}),Q.jsx("button",{className:"submit-button",disabled:m,type:"submit",children:m?y+"%":"Submit/Export to Github"})]})]})})})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var vP=function(n,e){return vP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},vP(n,e)};function oze(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");vP(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var oi=function(){return oi=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},oi.apply(this,arguments)};function kI(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function t0(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(c){try{u(r.next(c))}catch(f){s(f)}}function l(c){try{u(r.throw(c))}catch(f){s(f)}}function u(c){c.done?o(c.value):i(c.value).then(a,l)}u((r=r.apply(n,[])).next())})}function n0(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var yP=function(n,e){return yP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},yP(n,e)};function np(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=n}yP(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var gn=function(){return gn=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},gn.apply(this,arguments)};function ts(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}function Ln(n,e,t,r){return new(t||(t=Promise))(function(i,o){function s(u){try{l(r.next(u))}catch(c){o(c)}}function a(u){try{l(r.throw(u))}catch(c){o(c)}}function l(u){var c;u.done?i(u.value):(c=u.value,c instanceof t?c:new t(function(f){f(c)})).then(s,a)}l((r=r.apply(n,[])).next())})}function Fn(n,e){var t,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,r=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!((i=i.length>0&&i[i.length-1])||c[0]!==6&&c[0]!==2)){s=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){s.label=c[1];break}if(c[0]===6&&s.label<i[1]){s.label=i[1],i=c;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(c);break}i[2]&&s.ops.pop(),s.trys.pop();continue}c=e.call(n,s)}catch(f){c=[6,f],r=0}finally{t=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}function Eg(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r,i,o=t.call(n),s=[];try{for(;(e===void 0||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(i)throw i.error}}return s}function xP(n,e,t){if(arguments.length===2)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return n.concat(r||Array.prototype.slice.call(e))}var Vl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function II(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function av(n,e){return n(e={exports:{}},e.exports),e.exports}var Oc,f_,bw=function(n){return n&&n.Math==Math&&n},yn=bw(typeof globalThis=="object"&&globalThis)||bw(typeof window=="object"&&window)||bw(typeof self=="object"&&self)||bw(typeof Vl=="object"&&Vl)||function(){return this}()||Function("return this")(),xr=function(n){try{return!!n()}catch{return!0}},Yn=!xr(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),ix=!xr(function(){var n=(function(){}).bind();return typeof n!="function"||n.hasOwnProperty("prototype")}),ww=Function.prototype.call,vs=ix?ww.bind(ww):function(){return ww.apply(ww,arguments)},GV={}.propertyIsEnumerable,qV=Object.getOwnPropertyDescriptor,sze=qV&&!GV.call({1:2},1)?function(n){var e=qV(this,n);return!!e&&e.enumerable}:GV,LI={f:sze},Lh=function(n,e){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:e}},ZQ=Function,JQ=ZQ.prototype,aze=JQ.bind,bP=JQ.call,lze=ix&&aze.bind(bP,bP),Sn=function(n){return n instanceof ZQ?ix?lze(n):function(){return bP.apply(n,arguments)}:void 0},uze=Sn({}.toString),cze=Sn("".slice),Zu=function(n){return cze(uze(n),8,-1)},zT=Object,fze=Sn("".split),QQ=xr(function(){return!zT("z").propertyIsEnumerable(0)})?function(n){return Zu(n)=="String"?fze(n,""):zT(n)}:zT,lv=function(n){return n==null},dze=TypeError,ox=function(n){if(lv(n))throw dze("Can't call method on "+n);return n},fu=function(n){return QQ(ox(n))},UT=typeof document=="object"&&document.all,F2={all:UT,IS_HTMLDDA:UT===void 0&&UT!==void 0},hze=F2.all,br=F2.IS_HTMLDDA?function(n){return typeof n=="function"||n===hze}:function(n){return typeof n=="function"},pze=F2.all,Pr=F2.IS_HTMLDDA?function(n){return typeof n=="object"?n!==null:br(n)||n===pze}:function(n){return typeof n=="object"?n!==null:br(n)},mze=function(n){return br(n)?n:void 0},hl=function(n,e){return arguments.length<2?mze(yn[n]):yn[n]&&yn[n][e]},Fh=Sn({}.isPrototypeOf),VT=hl("navigator","userAgent")||"",XV=yn.process,YV=yn.Deno,KV=XV&&XV.versions||YV&&YV.version,ZV=KV&&KV.v8;ZV&&(f_=(Oc=ZV.split("."))[0]>0&&Oc[0]<4?1:+(Oc[0]+Oc[1])),!f_&&VT&&(!(Oc=VT.match(/Edge\/(\d+)/))||Oc[1]>=74)&&(Oc=VT.match(/Chrome\/(\d+)/))&&(f_=+Oc[1]);var ZE=f_,da=!!Object.getOwnPropertySymbols&&!xr(function(){var n=Symbol();return!String(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&ZE&&ZE<41}),FI=da&&!Symbol.sham&&typeof Symbol.iterator=="symbol",gze=Object,Mg=FI?function(n){return typeof n=="symbol"}:function(n){var e=hl("Symbol");return br(e)&&Fh(e.prototype,gze(n))},vze=String,uv=function(n){try{return vze(n)}catch{return"Object"}},yze=TypeError,BI=function(n){if(br(n))return n;throw yze(uv(n)+" is not a function")},JE=function(n,e){var t=n[e];return lv(t)?void 0:BI(t)},xze=TypeError,bze=Object.defineProperty,zI=function(n,e){try{bze(yn,n,{value:e,configurable:!0,writable:!0})}catch{yn[n]=e}return e},Mf=yn["__core-js_shared__"]||zI("__core-js_shared__",{}),ld=av(function(n){(n.exports=function(e,t){return Mf[e]||(Mf[e]=t!==void 0?t:{})})("versions",[]).push({version:"3.25.4",mode:"global",copyright:" 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.4/LICENSE",source:"https://github.com/zloirock/core-js"})}),wze=Object,cv=function(n){return wze(ox(n))},Sze=Sn({}.hasOwnProperty),Zt=Object.hasOwn||function(n,e){return Sze(cv(n),e)},_ze=0,Eze=Math.random(),Mze=Sn(1 .toString),Cg=function(n){return"Symbol("+(n===void 0?"":n)+")_"+Mze(++_ze+Eze,36)},r0=ld("wks"),gh=yn.Symbol,JV=gh&&gh.for,Cze=FI?gh:gh&&gh.withoutSetter||Cg,ti=function(n){if(!Zt(r0,n)||!da&&typeof r0[n]!="string"){var e="Symbol."+n;da&&Zt(gh,n)?r0[n]=gh[n]:r0[n]=FI&&JV?JV(e):Cze(e)}return r0[n]},Aze=TypeError,Tze=ti("toPrimitive"),Dze=function(n,e){if(!Pr(n)||Mg(n))return n;var t,r=JE(n,Tze);if(r){if(t=vs(r,n,e),!Pr(t)||Mg(t))return t;throw Aze("Can't convert object to primitive value")}return function(i,o){var s,a;if(br(s=i.toString)&&!Pr(a=vs(s,i))||br(s=i.valueOf)&&!Pr(a=vs(s,i)))return a;throw xze("Can't convert object to primitive value")}(n)},Bh=function(n){var e=Dze(n,"string");return Mg(e)?e:e+""},wP=yn.document,Nze=Pr(wP)&&Pr(wP.createElement),eee=function(n){return Nze?wP.createElement(n):{}},tee=!Yn&&!xr(function(){return Object.defineProperty(eee("div"),"a",{get:function(){return 7}}).a!=7}),QV=Object.getOwnPropertyDescriptor,sx={f:Yn?QV:function(n,e){if(n=fu(n),e=Bh(e),tee)try{return QV(n,e)}catch{}if(Zt(n,e))return Lh(!vs(LI.f,n,e),n[e])}},nee=Yn&&xr(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),Pze=String,Rze=TypeError,Ri=function(n){if(Pr(n))return n;throw Rze(Pze(n)+" is not an object")},Oze=TypeError,$T=Object.defineProperty,kze=Object.getOwnPropertyDescriptor,Mo={f:Yn?nee?function(n,e,t){if(Ri(n),e=Bh(e),Ri(t),typeof n=="function"&&e==="prototype"&&"value"in t&&"writable"in t&&!t.writable){var r=kze(n,e);r&&r.writable&&(n[e]=t.value,t={configurable:"configurable"in t?t.configurable:r.configurable,enumerable:"enumerable"in t?t.enumerable:r.enumerable,writable:!1})}return $T(n,e,t)}:$T:function(n,e,t){if(Ri(n),e=Bh(e),Ri(t),tee)try{return $T(n,e,t)}catch{}if("get"in t||"set"in t)throw Oze("Accessors not supported");return"value"in t&&(n[e]=t.value),n}},B2=Yn?function(n,e,t){return Mo.f(n,e,Lh(1,t))}:function(n,e,t){return n[e]=t,n},ree=Function.prototype,Ize=Yn&&Object.getOwnPropertyDescriptor,HT=Zt(ree,"name"),UI={EXISTS:HT,PROPER:HT&&(function(){}).name==="something",CONFIGURABLE:HT&&(!Yn||Yn&&Ize(ree,"name").configurable)},Lze=Sn(Function.toString);br(Mf.inspectSource)||(Mf.inspectSource=function(n){return Lze(n)});var QE,ry,eM,iee=Mf.inspectSource,e$=yn.WeakMap,Fze=br(e$)&&/native code/.test(String(e$)),t$=ld("keys"),z2=function(n){return t$[n]||(t$[n]=Cg(n))},fv={},SP=yn.TypeError,Bze=yn.WeakMap;if(Fze||Mf.state){var _d=Mf.state||(Mf.state=new Bze),zze=Sn(_d.get),n$=Sn(_d.has),Uze=Sn(_d.set);QE=function(n,e){if(n$(_d,n))throw SP("Object already initialized");return e.facade=n,Uze(_d,n,e),e},ry=function(n){return zze(_d,n)||{}},eM=function(n){return n$(_d,n)}}else{var kp=z2("state");fv[kp]=!0,QE=function(n,e){if(Zt(n,kp))throw SP("Object already initialized");return e.facade=n,B2(n,kp,e),e},ry=function(n){return Zt(n,kp)?n[kp]:{}},eM=function(n){return Zt(n,kp)}}var Na={set:QE,get:ry,has:eM,enforce:function(n){return eM(n)?ry(n):QE(n,{})},getterFor:function(n){return function(e){var t;if(!Pr(e)||(t=ry(e)).type!==n)throw SP("Incompatible receiver, "+n+" required");return t}}},Vze=av(function(n){var e=UI.CONFIGURABLE,t=Na.enforce,r=Na.get,i=Object.defineProperty,o=Yn&&!xr(function(){return i(function(){},"length",{value:8}).length!==8}),s=String(String).split("String"),a=n.exports=function(l,u,c){String(u).slice(0,7)==="Symbol("&&(u="["+String(u).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),c&&c.getter&&(u="get "+u),c&&c.setter&&(u="set "+u),(!Zt(l,"name")||e&&l.name!==u)&&(Yn?i(l,"name",{value:u,configurable:!0}):l.name=u),o&&c&&Zt(c,"arity")&&l.length!==c.arity&&i(l,"length",{value:c.arity});try{c&&Zt(c,"constructor")&&c.constructor?Yn&&i(l,"prototype",{writable:!1}):l.prototype&&(l.prototype=void 0)}catch{}var f=t(l);return Zt(f,"source")||(f.source=s.join(typeof u=="string"?u:"")),l};Function.prototype.toString=a(function(){return br(this)&&r(this).source||iee(this)},"toString")}),Uo=function(n,e,t,r){r||(r={});var i=r.enumerable,o=r.name!==void 0?r.name:e;if(br(t)&&Vze(t,o,r),r.global)i?n[e]=t:zI(e,t);else{try{r.unsafe?n[e]&&(i=!0):delete n[e]}catch{}i?n[e]=t:Mo.f(n,e,{value:t,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return n},$ze=Math.ceil,Hze=Math.floor,Wze=Math.trunc||function(n){var e=+n;return(e>0?Hze:$ze)(e)},VI=function(n){var e=+n;return e!=e||e===0?0:Wze(e)},jze=Math.max,Gze=Math.min,_P=function(n,e){var t=VI(n);return t<0?jze(t+e,0):Gze(t,e)},qze=Math.min,oee=function(n){return n>0?qze(VI(n),9007199254740991):0},dv=function(n){return oee(n.length)},r$=function(n){return function(e,t,r){var i,o=fu(e),s=dv(o),a=_P(r,s);if(n&&t!=t){for(;s>a;)if((i=o[a++])!=i)return!0}else for(;s>a;a++)if((n||a in o)&&o[a]===t)return n||a||0;return!n&&-1}},see={includes:r$(!0),indexOf:r$(!1)},Xze=see.indexOf,i$=Sn([].push),aee=function(n,e){var t,r=fu(n),i=0,o=[];for(t in r)!Zt(fv,t)&&Zt(r,t)&&i$(o,t);for(;e.length>i;)Zt(r,t=e[i++])&&(~Xze(o,t)||i$(o,t));return o},tM=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Yze=tM.concat("length","prototype"),qy={f:Object.getOwnPropertyNames||function(n){return aee(n,Yze)}},U2={f:Object.getOwnPropertySymbols},Kze=Sn([].concat),Zze=hl("Reflect","ownKeys")||function(n){var e=qy.f(Ri(n)),t=U2.f;return t?Kze(e,t(n)):e},lee=function(n,e,t){for(var r=Zze(e),i=Mo.f,o=sx.f,s=0;s<r.length;s++){var a=r[s];Zt(n,a)||t||i(n,a,o(e,a))}},Jze=/#|\.prototype\./,ax=function(n,e){var t=eUe[Qze(n)];return t==nUe||t!=tUe&&(br(e)?xr(e):!!e)},Qze=ax.normalize=function(n){return String(n).replace(Jze,".").toLowerCase()},eUe=ax.data={},tUe=ax.NATIVE="N",nUe=ax.POLYFILL="P",EP=ax,rUe=sx.f,Oi=function(n,e){var t,r,i,o,s,a=n.target,l=n.global,u=n.stat;if(t=l?yn:u?yn[a]||zI(a,{}):(yn[a]||{}).prototype)for(r in e){if(o=e[r],i=n.dontCallGetSet?(s=rUe(t,r))&&s.value:t[r],!EP(l?r:a+(u?".":"#")+r,n.forced)&&i!==void 0){if(typeof o==typeof i)continue;lee(o,i)}(n.sham||i&&i.sham)&&B2(o,"sham",!0),Uo(t,r,o,n)}},uee={};uee[ti("toStringTag")]="z";var WT,$I=String(uee)==="[object z]",iUe=ti("toStringTag"),oUe=Object,sUe=Zu(function(){return arguments}())=="Arguments",rp=$I?Zu:function(n){var e,t,r;return n===void 0?"Undefined":n===null?"Null":typeof(t=function(i,o){try{return i[o]}catch{}}(e=oUe(n),iUe))=="string"?t:sUe?Zu(e):(r=Zu(e))=="Object"&&br(e.callee)?"Arguments":r},aUe=String,cc=function(n){if(rp(n)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return aUe(n)},lUe=ti("match"),uUe=TypeError,cee=function(n){if(function(e){var t;return Pr(e)&&((t=e[lUe])!==void 0?!!t:Zu(e)=="RegExp")}(n))throw uUe("The method doesn't accept regular expressions");return n},cUe=ti("match"),fee=function(n){var e=/./;try{"/./"[n](e)}catch{try{return e[cUe]=!1,"/./"[n](e)}catch{}}return!1},fUe=sx.f,o$=Sn("".startsWith),dUe=Sn("".slice),hUe=Math.min,dee=fee("startsWith"),pUe=!(dee||(WT=fUe(String.prototype,"startsWith"),!WT||WT.writable));Oi({target:"String",proto:!0,forced:!pUe&&!dee},{startsWith:function(n){var e=cc(ox(this));cee(n);var t=oee(hUe(arguments.length>1?arguments[1]:void 0,e.length)),r=cc(n);return o$?o$(e,r,t):dUe(e,t,t+r.length)===r}});var HI=function(n,e){return Sn(yn[n].prototype[e])};HI("String","startsWith");var nM=Array.isArray||function(n){return Zu(n)=="Array"},mUe=TypeError,s$=function(n){if(n>9007199254740991)throw mUe("Maximum allowed index exceeded");return n},Xy=function(n,e,t){var r=Bh(e);r in n?Mo.f(n,r,Lh(0,t)):n[r]=t},hee=function(){},gUe=[],pee=hl("Reflect","construct"),WI=/^\s*(?:class|function)\b/,vUe=Sn(WI.exec),yUe=!WI.exec(hee),i0=function(n){if(!br(n))return!1;try{return pee(hee,gUe,n),!0}catch{return!1}},mee=function(n){if(!br(n))return!1;switch(rp(n)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return yUe||!!vUe(WI,iee(n))}catch{return!0}};mee.sham=!0;var a$,jI=!pee||xr(function(){var n;return i0(i0.call)||!i0(Object)||!i0(function(){n=!0})||n})?mee:i0,xUe=ti("species"),l$=Array,gee=function(n,e){return new(function(t){var r;return nM(t)&&(r=t.constructor,(jI(r)&&(r===l$||nM(r.prototype))||Pr(r)&&(r=r[xUe])===null)&&(r=void 0)),r===void 0?l$:r}(n))(e===0?0:e)},bUe=ti("species"),vee=ti("isConcatSpreadable"),wUe=ZE>=51||!xr(function(){var n=[];return n[vee]=!1,n.concat()[0]!==n}),SUe=(a$="concat",ZE>=51||!xr(function(){var n=[];return(n.constructor={})[bUe]=function(){return{foo:1}},n[a$](Boolean).foo!==1})),_Ue=function(n){if(!Pr(n))return!1;var e=n[vee];return e!==void 0?!!e:nM(n)};Oi({target:"Array",proto:!0,arity:1,forced:!wUe||!SUe},{concat:function(n){var e,t,r,i,o,s=cv(this),a=gee(s,0),l=0;for(e=-1,r=arguments.length;e<r;e++)if(_Ue(o=e===-1?s:arguments[e]))for(i=dv(o),s$(l+i),t=0;t<i;t++,l++)t in o&&Xy(a,l,o[t]);else s$(l+1),Xy(a,l++,o);return a.length=l,a}});var EUe=$I?{}.toString:function(){return"[object "+rp(this)+"]"};$I||Uo(Object.prototype,"toString",EUe,{unsafe:!0});var Sw,GI=Object.keys||function(n){return aee(n,tM)},MUe=Yn&&!nee?Object.defineProperties:function(n,e){Ri(n);for(var t,r=fu(e),i=GI(e),o=i.length,s=0;o>s;)Mo.f(n,t=i[s++],r[t]);return n},yee={f:MUe},CUe=hl("document","documentElement"),xee=z2("IE_PROTO"),jT=function(){},bee=function(n){return"<script>"+n+"<\/script>"},u$=function(n){n.write(bee("")),n.close();var e=n.parentWindow.Object;return n=null,e},d_=function(){try{Sw=new ActiveXObject("htmlfile")}catch{}var n,e;d_=typeof document<"u"?document.domain&&Sw?u$(Sw):((e=eee("iframe")).style.display="none",CUe.appendChild(e),e.src="javascript:",(n=e.contentWindow.document).open(),n.write(bee("document.F=Object")),n.close(),n.F):u$(Sw);for(var t=tM.length;t--;)delete d_.prototype[tM[t]];return d_()};fv[xee]=!0;var Hf=Object.create||function(n,e){var t;return n!==null?(jT.prototype=Ri(n),t=new jT,jT.prototype=null,t[xee]=n):t=d_(),e===void 0?t:yee.f(t,e)},AUe=Array,TUe=Math.max,wee=qy.f,See=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],DUe=function(n){try{return wee(n)}catch{return function(t,r,i){for(var o=dv(t),s=_P(r,o),a=_P(o,o),l=AUe(TUe(a-s,0)),u=0;s<a;s++,u++)Xy(l,u,t[s]);return l.length=u,l}(See)}},qI={f:function(n){return See&&Zu(n)=="Window"?DUe(n):wee(fu(n))}},_ee={f:ti},Yy=yn,NUe=Mo.f,ns=function(n){var e=Yy.Symbol||(Yy.Symbol={});Zt(e,n)||NUe(e,n,{value:_ee.f(n)})},Eee=function(){var n=hl("Symbol"),e=n&&n.prototype,t=e&&e.valueOf,r=ti("toPrimitive");e&&!e[r]&&Uo(e,r,function(i){return vs(t,this)},{arity:1})},PUe=Mo.f,c$=ti("toStringTag"),ff=function(n,e,t){n&&!t&&(n=n.prototype),n&&!Zt(n,c$)&&PUe(n,c$,{configurable:!0,value:e})},RUe=Sn(Sn.bind),V2=function(n,e){return BI(n),e===void 0?n:ix?RUe(n,e):function(){return n.apply(e,arguments)}},f$=Sn([].push),kc=function(n){var e=n==1,t=n==2,r=n==3,i=n==4,o=n==6,s=n==7,a=n==5||o;return function(l,u,c,f){for(var d,h,m=cv(l),g=QQ(m),y=V2(u,c),p=dv(g),w=0,b=f||gee,v=e?b(l,p):t||s?b(l,0):void 0;p>w;w++)if((a||w in g)&&(h=y(d=g[w],w,m),n))if(e)v[w]=h;else if(h)switch(n){case 3:return!0;case 5:return d;case 6:return w;case 2:f$(v,d)}else switch(n){case 4:return!1;case 7:f$(v,d)}return o?-1:r||i?i:v}},$2={forEach:kc(0),map:kc(1),filter:kc(2),some:kc(3),every:kc(4),find:kc(5),findIndex:kc(6),filterReject:kc(7)}.forEach,ss=z2("hidden"),OUe=Na.set,d$=Na.getterFor("Symbol"),xa=Object.prototype,Nm=yn.Symbol,L0=Nm&&Nm.prototype,kUe=yn.TypeError,GT=yn.QObject,Mee=sx.f,ef=Mo.f,Cee=qI.f,IUe=LI.f,Aee=Sn([].push),fc=ld("symbols"),lx=ld("op-symbols"),LUe=ld("wks"),qT=!GT||!GT.prototype||!GT.prototype.findChild,MP=Yn&&xr(function(){return Hf(ef({},"a",{get:function(){return ef(this,"a",{value:7}).a}})).a!=7})?function(n,e,t){var r=Mee(xa,e);r&&delete xa[e],ef(n,e,t),r&&n!==xa&&ef(xa,e,r)}:ef,XT=function(n,e){var t=fc[n]=Hf(L0);return OUe(t,{type:"Symbol",tag:n,description:e}),Yn||(t.description=e),t},rM=function(n,e,t){n===xa&&rM(lx,e,t),Ri(n);var r=Bh(e);return Ri(t),Zt(fc,r)?(t.enumerable?(Zt(n,ss)&&n[ss][r]&&(n[ss][r]=!1),t=Hf(t,{enumerable:Lh(0,!1)})):(Zt(n,ss)||ef(n,ss,Lh(1,{})),n[ss][r]=!0),MP(n,r,t)):ef(n,r,t)},YT=function(n,e){Ri(n);var t=fu(e),r=GI(t).concat(Tee(t));return $2(r,function(i){Yn&&!vs(CP,t,i)||rM(n,i,t[i])}),n},CP=function(n){var e=Bh(n),t=vs(IUe,this,e);return!(this===xa&&Zt(fc,e)&&!Zt(lx,e))&&(!(t||!Zt(this,e)||!Zt(fc,e)||Zt(this,ss)&&this[ss][e])||t)},h$=function(n,e){var t=fu(n),r=Bh(e);if(t!==xa||!Zt(fc,r)||Zt(lx,r)){var i=Mee(t,r);return!i||!Zt(fc,r)||Zt(t,ss)&&t[ss][r]||(i.enumerable=!0),i}},p$=function(n){var e=Cee(fu(n)),t=[];return $2(e,function(r){Zt(fc,r)||Zt(fv,r)||Aee(t,r)}),t},Tee=function(n){var e=n===xa,t=Cee(e?lx:fu(n)),r=[];return $2(t,function(i){!Zt(fc,i)||e&&!Zt(xa,i)||Aee(r,fc[i])}),r};da||(L0=(Nm=function(){if(Fh(L0,this))throw kUe("Symbol is not a constructor");var n=arguments.length&&arguments[0]!==void 0?cc(arguments[0]):void 0,e=Cg(n),t=function(r){this===xa&&vs(t,lx,r),Zt(this,ss)&&Zt(this[ss],e)&&(this[ss][e]=!1),MP(this,e,Lh(1,r))};return Yn&&qT&&MP(xa,e,{configurable:!0,set:t}),XT(e,n)}).prototype,Uo(L0,"toString",function(){return d$(this).tag}),Uo(Nm,"withoutSetter",function(n){return XT(Cg(n),n)}),LI.f=CP,Mo.f=rM,yee.f=YT,sx.f=h$,qy.f=qI.f=p$,U2.f=Tee,_ee.f=function(n){return XT(ti(n),n)},Yn&&(ef(L0,"description",{configurable:!0,get:function(){return d$(this).description}}),Uo(xa,"propertyIsEnumerable",CP,{unsafe:!0}))),Oi({global:!0,constructor:!0,wrap:!0,forced:!da,sham:!da},{Symbol:Nm}),$2(GI(LUe),function(n){ns(n)}),Oi({target:"Symbol",stat:!0,forced:!da},{useSetter:function(){qT=!0},useSimple:function(){qT=!1}}),Oi({target:"Object",stat:!0,forced:!da,sham:!Yn},{create:function(n,e){return e===void 0?Hf(n):YT(Hf(n),e)},defineProperty:rM,defineProperties:YT,getOwnPropertyDescriptor:h$}),Oi({target:"Object",stat:!0,forced:!da},{getOwnPropertyNames:p$}),Eee(),ff(Nm,"Symbol"),fv[ss]=!0;var Dee=da&&!!Symbol.for&&!!Symbol.keyFor,KT=ld("string-to-symbol-registry"),FUe=ld("symbol-to-string-registry");Oi({target:"Symbol",stat:!0,forced:!Dee},{for:function(n){var e=cc(n);if(Zt(KT,e))return KT[e];var t=hl("Symbol")(e);return KT[e]=t,FUe[t]=e,t}});var m$=ld("symbol-to-string-registry");Oi({target:"Symbol",stat:!0,forced:!Dee},{keyFor:function(n){if(!Mg(n))throw TypeError(uv(n)+" is not a symbol");if(Zt(m$,n))return m$[n]}});var Nee=Function.prototype,g$=Nee.apply,v$=Nee.call,Pee=typeof Reflect=="object"&&Reflect.apply||(ix?v$.bind(g$):function(){return v$.apply(g$,arguments)}),XI=Sn([].slice),Cf=hl("JSON","stringify"),_w=Sn(/./.exec),y$=Sn("".charAt),BUe=Sn("".charCodeAt),zUe=Sn("".replace),UUe=Sn(1 .toString),VUe=/[\uD800-\uDFFF]/g,x$=/^[\uD800-\uDBFF]$/,b$=/^[\uDC00-\uDFFF]$/,w$=!da||xr(function(){var n=hl("Symbol")();return Cf([n])!="[null]"||Cf({a:n})!="{}"||Cf(Object(n))!="{}"}),S$=xr(function(){return Cf("\uDF06\uD834")!=='"\\udf06\\ud834"'||Cf("\uDEAD")!=='"\\udead"'}),$Ue=function(n,e){var t=XI(arguments),r=e;if((Pr(e)||n!==void 0)&&!Mg(n))return nM(e)||(e=function(i,o){if(br(r)&&(o=vs(r,this,i,o)),!Mg(o))return o}),t[1]=e,Pee(Cf,null,t)},HUe=function(n,e,t){var r=y$(t,e-1),i=y$(t,e+1);return _w(x$,n)&&!_w(b$,i)||_w(b$,n)&&!_w(x$,r)?"\\u"+UUe(BUe(n,0),16):n};Cf&&Oi({target:"JSON",stat:!0,arity:3,forced:w$||S$},{stringify:function(n,e,t){var r=XI(arguments),i=Pee(w$?$Ue:Cf,null,r);return S$&&typeof i=="string"?zUe(i,VUe,HUe):i}});var WUe=!da||xr(function(){U2.f(1)});Oi({target:"Object",stat:!0,forced:WUe},{getOwnPropertySymbols:function(n){var e=U2.f;return e?e(cv(n)):[]}}),ns("asyncIterator");var jUe=Mo.f,Iu=yn.Symbol,Ed=Iu&&Iu.prototype;if(Yn&&br(Iu)&&(!("description"in Ed)||Iu().description!==void 0)){var _$={},Ew=function(){var n=arguments.length<1||arguments[0]===void 0?void 0:cc(arguments[0]),e=Fh(Ed,this)?new Iu(n):n===void 0?Iu():Iu(n);return n===""&&(_$[e]=!0),e};lee(Ew,Iu),Ew.prototype=Ed,Ed.constructor=Ew;var GUe=String(Iu("test"))=="Symbol(test)",qUe=Sn(Ed.valueOf),XUe=Sn(Ed.toString),YUe=/^Symbol\((.*)\)[^)]+$/,KUe=Sn("".replace),ZUe=Sn("".slice);jUe(Ed,"description",{configurable:!0,get:function(){var n=qUe(this);if(Zt(_$,n))return"";var e=XUe(n),t=GUe?ZUe(e,7,-1):KUe(e,YUe,"$1");return t===""?void 0:t}}),Oi({global:!0,constructor:!0,forced:!0},{Symbol:Ew})}ns("hasInstance"),ns("isConcatSpreadable"),ns("iterator"),ns("match"),ns("matchAll"),ns("replace"),ns("search"),ns("species"),ns("split"),ns("toPrimitive"),Eee(),ns("toStringTag"),ff(hl("Symbol"),"Symbol"),ns("unscopables"),ff(yn.JSON,"JSON",!0),ff(Math,"Math",!0),Oi({global:!0},{Reflect:{}}),ff(yn.Reflect,"Reflect",!0),Yy.Symbol;var vh,E$,M$,JUe=Sn("".charAt),C$=Sn("".charCodeAt),QUe=Sn("".slice),A$=function(n){return function(e,t){var r,i,o=cc(ox(e)),s=VI(t),a=o.length;return s<0||s>=a?n?"":void 0:(r=C$(o,s))<55296||r>56319||s+1===a||(i=C$(o,s+1))<56320||i>57343?n?JUe(o,s):r:n?QUe(o,s,s+2):i-56320+(r-55296<<10)+65536}},e6e={codeAt:A$(!1),charAt:A$(!0)},t6e=!xr(function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype}),T$=z2("IE_PROTO"),AP=Object,n6e=AP.prototype,Wf=t6e?AP.getPrototypeOf:function(n){var e=cv(n);if(Zt(e,T$))return e[T$];var t=e.constructor;return br(t)&&e instanceof t?t.prototype:e instanceof AP?n6e:null},TP=ti("iterator"),Ree=!1;[].keys&&("next"in(M$=[].keys())?(E$=Wf(Wf(M$)))!==Object.prototype&&(vh=E$):Ree=!0);var r6e=!Pr(vh)||xr(function(){var n={};return vh[TP].call(n)!==n});r6e&&(vh={}),br(vh[TP])||Uo(vh,TP,function(){return this});var YI={IteratorPrototype:vh,BUGGY_SAFARI_ITERATORS:Ree},Ag={},i6e=YI.IteratorPrototype,o6e=function(){return this},s6e=String,a6e=TypeError,ou=Object.setPrototypeOf||("__proto__"in{}?function(){var n,e=!1,t={};try{(n=Sn(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(t,[]),e=t instanceof Array}catch{}return function(r,i){return Ri(r),function(o){if(typeof o=="object"||br(o))return o;throw a6e("Can't set "+s6e(o)+" as a prototype")}(i),e?n(r,i):r.__proto__=i,r}}():void 0),l6e=UI.PROPER,u6e=UI.CONFIGURABLE,D$=YI.IteratorPrototype,Mw=YI.BUGGY_SAFARI_ITERATORS,o0=ti("iterator"),c6e=function(){return this},KI=function(n,e,t,r,i,o,s){(function(p,w,b,v){var S=w+" Iterator";p.prototype=Hf(i6e,{next:Lh(+!v,b)}),ff(p,S,!1),Ag[S]=o6e})(t,e,r);var a,l,u,c=function(p){if(p===i&&g)return g;if(!Mw&&p in h)return h[p];switch(p){case"keys":case"values":case"entries":return function(){return new t(this,p)}}return function(){return new t(this)}},f=e+" Iterator",d=!1,h=n.prototype,m=h[o0]||h["@@iterator"]||i&&h[i],g=!Mw&&m||c(i),y=e=="Array"&&h.entries||m;if(y&&(a=Wf(y.call(new n)))!==Object.prototype&&a.next&&(Wf(a)!==D$&&(ou?ou(a,D$):br(a[o0])||Uo(a,o0,c6e)),ff(a,f,!0)),l6e&&i=="values"&&m&&m.name!=="values"&&(u6e?B2(h,"name","values"):(d=!0,g=function(){return vs(m,this)})),i)if(l={values:c("values"),keys:o?g:c("keys"),entries:c("entries")},s)for(u in l)(Mw||d||!(u in h))&&Uo(h,u,l[u]);else Oi({target:e,proto:!0,forced:Mw||d},l);return h[o0]!==g&&Uo(h,o0,g,{name:i}),Ag[e]=g,l},Tg=function(n,e){return{value:n,done:e}},f6e=e6e.charAt,d6e=Na.set,h6e=Na.getterFor("String Iterator");KI(String,"String",function(n){d6e(this,{type:"String Iterator",string:cc(n),index:0})},function(){var n,e=h6e(this),t=e.string,r=e.index;return r>=t.length?Tg(void 0,!0):(n=f6e(t,r),e.index+=n.length,Tg(n,!1))});var DP=function(n,e,t){var r,i;Ri(n);try{if(!(r=JE(n,"return"))){if(e==="throw")throw t;return t}r=vs(r,n)}catch(o){i=!0,r=o}if(e==="throw")throw t;if(i)throw r;return Ri(r),t},p6e=function(n,e,t,r){try{return r?e(Ri(t)[0],t[1]):e(t)}catch(i){DP(n,"throw",i)}},m6e=ti("iterator"),g6e=Array.prototype,Oee=function(n){return n!==void 0&&(Ag.Array===n||g6e[m6e]===n)},v6e=ti("iterator"),ZI=function(n){if(!lv(n))return JE(n,v6e)||JE(n,"@@iterator")||Ag[rp(n)]},y6e=TypeError,kee=function(n,e){var t=arguments.length<2?ZI(n):e;if(BI(t))return Ri(vs(t,n));throw y6e(uv(n)+" is not iterable")},N$=Array,Iee=ti("iterator"),Lee=!1;try{var x6e=0,P$={next:function(){return{done:!!x6e++}},return:function(){Lee=!0}};P$[Iee]=function(){return this},Array.from(P$,function(){throw 2})}catch{}var Fee=function(n,e){if(!Lee)return!1;var t=!1;try{var r={};r[Iee]=function(){return{next:function(){return{done:t=!0}}}},n(r)}catch{}return t},b6e=!Fee(function(n){Array.from(n)});Oi({target:"Array",stat:!0,forced:b6e},{from:function(n){var e=cv(n),t=jI(this),r=arguments.length,i=r>1?arguments[1]:void 0,o=i!==void 0;o&&(i=V2(i,r>2?arguments[2]:void 0));var s,a,l,u,c,f,d=ZI(e),h=0;if(!d||this===N$&&Oee(d))for(s=dv(e),a=t?new this(s):N$(s);s>h;h++)f=o?i(e[h],h):e[h],Xy(a,h,f);else for(c=(u=kee(e,d)).next,a=t?new this:[];!(l=vs(c,u)).done;h++)f=o?p6e(u,i,[l.value,h],!0):l.value,Xy(a,h,f);return a.length=h,a}}),Yy.Array.from;var fs,Qm,iM,w6e=typeof ArrayBuffer<"u"&&typeof DataView<"u",S6e=Mo.f,Bee=Na.enforce,_6e=Na.get,oM=yn.Int8Array,NP=oM&&oM.prototype,R$=yn.Uint8ClampedArray,O$=R$&&R$.prototype,Bl=oM&&Wf(oM),Za=NP&&Wf(NP),E6e=Object.prototype,PP=yn.TypeError,k$=ti("toStringTag"),RP=Cg("TYPED_ARRAY_TAG"),Ju=w6e&&!!ou&&rp(yn.opera)!=="Opera",zee=!1,Wu={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},JI={BigInt64Array:8,BigUint64Array:8},Uee=function(n){var e=Wf(n);if(Pr(e)){var t=_6e(e);return t&&Zt(t,"TypedArrayConstructor")?t.TypedArrayConstructor:Uee(e)}},I$=function(n){if(!Pr(n))return!1;var e=rp(n);return Zt(Wu,e)||Zt(JI,e)};for(fs in Wu)(iM=(Qm=yn[fs])&&Qm.prototype)?Bee(iM).TypedArrayConstructor=Qm:Ju=!1;for(fs in JI)(iM=(Qm=yn[fs])&&Qm.prototype)&&(Bee(iM).TypedArrayConstructor=Qm);if((!Ju||!br(Bl)||Bl===Function.prototype)&&(Bl=function(){throw PP("Incorrect invocation")},Ju))for(fs in Wu)yn[fs]&&ou(yn[fs],Bl);if((!Ju||!Za||Za===E6e)&&(Za=Bl.prototype,Ju))for(fs in Wu)yn[fs]&&ou(yn[fs].prototype,Za);if(Ju&&Wf(O$)!==Za&&ou(O$,Za),Yn&&!Zt(Za,k$))for(fs in zee=!0,S6e(Za,k$,{get:function(){return Pr(this)?this[RP]:void 0}}),Wu)yn[fs]&&B2(yn[fs],RP,fs);var H2={NATIVE_ARRAY_BUFFER_VIEWS:Ju,TYPED_ARRAY_TAG:zee&&RP,aTypedArray:function(n){if(I$(n))return n;throw PP("Target is not a typed array")},aTypedArrayConstructor:function(n){if(br(n)&&(!ou||Fh(Bl,n)))return n;throw PP(uv(n)+" is not a typed array constructor")},exportTypedArrayMethod:function(n,e,t,r){if(Yn){if(t)for(var i in Wu){var o=yn[i];if(o&&Zt(o.prototype,n))try{delete o.prototype[n]}catch{try{o.prototype[n]=e}catch{}}}Za[n]&&!t||Uo(Za,n,t?e:Ju&&NP[n]||e,r)}},exportTypedArrayStaticMethod:function(n,e,t){var r,i;if(Yn){if(ou){if(t){for(r in Wu)if((i=yn[r])&&Zt(i,n))try{delete i[n]}catch{}}if(Bl[n]&&!t)return;try{return Uo(Bl,n,t?e:Ju&&Bl[n]||e)}catch{}}for(r in Wu)!(i=yn[r])||i[n]&&!t||Uo(i,n,e)}},getTypedArrayConstructor:Uee,isView:function(n){if(!Pr(n))return!1;var e=rp(n);return e==="DataView"||Zt(Wu,e)||Zt(JI,e)},isTypedArray:I$,TypedArray:Bl,TypedArrayPrototype:Za},M6e=TypeError,C6e=ti("species"),A6e=function(n,e){var t,r=Ri(n).constructor;return r===void 0||lv(t=Ri(r)[C6e])?e:function(i){if(jI(i))return i;throw M6e(uv(i)+" is not a constructor")}(t)},T6e=H2.aTypedArrayConstructor,D6e=H2.getTypedArrayConstructor,N6e=H2.aTypedArray;(0,H2.exportTypedArrayMethod)("slice",function(n,e){for(var t,r=XI(N6e(this),n,e),i=T6e(A6e(t=this,D6e(t))),o=0,s=r.length,a=new i(s);s>o;)a[o]=r[o++];return a},xr(function(){new Int8Array(1).slice()}));var P6e=Mo.f,OP=ti("unscopables"),kP=Array.prototype;kP[OP]==null&&P6e(kP,OP,{configurable:!0,value:Hf(null)});var h_=function(n){kP[OP][n]=!0},R6e=see.includes,O6e=xr(function(){return!Array(1).includes()});Oi({target:"Array",proto:!0,forced:O6e},{includes:function(n){return R6e(this,n,arguments.length>1?arguments[1]:void 0)}}),h_("includes"),HI("Array","includes");var k6e=Sn("".indexOf);Oi({target:"String",proto:!0,forced:!fee("includes")},{includes:function(n){return!!~k6e(cc(ox(this)),cc(cee(n)),arguments.length>1?arguments[1]:void 0)}}),HI("String","includes");var I6e=Mo.f,L6e=Na.set,F6e=Na.getterFor("Array Iterator");KI(Array,"Array",function(n,e){L6e(this,{type:"Array Iterator",target:fu(n),index:0,kind:e})},function(){var n=F6e(this),e=n.target,t=n.kind,r=n.index++;return!e||r>=e.length?(n.target=void 0,Tg(void 0,!0)):Tg(t=="keys"?r:t=="values"?e[r]:[r,e[r]],!1)},"values");var L$=Ag.Arguments=Ag.Array;if(h_("keys"),h_("values"),h_("entries"),Yn&&L$.name!=="values")try{I6e(L$,"name",{value:"values"})}catch{}var F$=xr(function(){if(typeof ArrayBuffer=="function"){var n=new ArrayBuffer(8);Object.isExtensible(n)&&Object.defineProperty(n,"a",{value:8})}}),Cw=Object.isExtensible,ZT=xr(function(){Cw(1)})||F$?function(n){return!!Pr(n)&&(!F$||Zu(n)!="ArrayBuffer")&&(!Cw||Cw(n))}:Cw,B6e=!xr(function(){return Object.isExtensible(Object.preventExtensions({}))}),Pm=av(function(n){var e=Mo.f,t=!1,r=Cg("meta"),i=0,o=function(a){e(a,r,{value:{objectID:"O"+i++,weakData:{}}})},s=n.exports={enable:function(){s.enable=function(){},t=!0;var a=qy.f,l=Sn([].splice),u={};u[r]=1,a(u).length&&(qy.f=function(c){for(var f=a(c),d=0,h=f.length;d<h;d++)if(f[d]===r){l(f,d,1);break}return f},Oi({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:qI.f}))},fastKey:function(a,l){if(!Pr(a))return typeof a=="symbol"?a:(typeof a=="string"?"S":"P")+a;if(!Zt(a,r)){if(!ZT(a))return"F";if(!l)return"E";o(a)}return a[r].objectID},getWeakData:function(a,l){if(!Zt(a,r)){if(!ZT(a))return!0;if(!l)return!1;o(a)}return a[r].weakData},onFreeze:function(a){return B6e&&t&&ZT(a)&&!Zt(a,r)&&o(a),a}};fv[r]=!0});Pm.enable,Pm.fastKey,Pm.getWeakData,Pm.onFreeze;var z6e=TypeError,p_=function(n,e){this.stopped=n,this.result=e},B$=p_.prototype,Vee=function(n,e,t){var r,i,o,s,a,l,u,c=t&&t.that,f=!(!t||!t.AS_ENTRIES),d=!(!t||!t.IS_RECORD),h=!(!t||!t.IS_ITERATOR),m=!(!t||!t.INTERRUPTED),g=V2(e,c),y=function(w){return r&&DP(r,"normal",w),new p_(!0,w)},p=function(w){return f?(Ri(w),m?g(w[0],w[1],y):g(w[0],w[1])):m?g(w,y):g(w)};if(d)r=n.iterator;else if(h)r=n;else{if(!(i=ZI(n)))throw z6e(uv(n)+" is not iterable");if(Oee(i)){for(o=0,s=dv(n);s>o;o++)if((a=p(n[o]))&&Fh(B$,a))return a;return new p_(!1)}r=kee(n,i)}for(l=d?n.next:r.next;!(u=vs(l,r)).done;){try{a=p(u.value)}catch(w){DP(r,"throw",w)}if(typeof a=="object"&&a&&Fh(B$,a))return a}return new p_(!1)},U6e=TypeError,$ee=function(n,e){if(Fh(e,n))return n;throw U6e("Incorrect invocation")},z$=function(n,e,t){for(var r in e)Uo(n,r,e[r],t);return n},U$=ti("species"),V6e=Mo.f,V$=Pm.fastKey,$$=Na.set,JT=Na.getterFor,$6e={getConstructor:function(n,e,t,r){var i=n(function(u,c){$ee(u,o),$$(u,{type:e,index:Hf(null),first:void 0,last:void 0,size:0}),Yn||(u.size=0),lv(c)||Vee(c,u[r],{that:u,AS_ENTRIES:t})}),o=i.prototype,s=JT(e),a=function(u,c,f){var d,h,m=s(u),g=l(u,c);return g?g.value=f:(m.last=g={index:h=V$(c,!0),key:c,value:f,previous:d=m.last,next:void 0,removed:!1},m.first||(m.first=g),d&&(d.next=g),Yn?m.size++:u.size++,h!=="F"&&(m.index[h]=g)),u},l=function(u,c){var f,d=s(u),h=V$(c);if(h!=="F")return d.index[h];for(f=d.first;f;f=f.next)if(f.key==c)return f};return z$(o,{clear:function(){for(var u=s(this),c=u.index,f=u.first;f;)f.removed=!0,f.previous&&(f.previous=f.previous.next=void 0),delete c[f.index],f=f.next;u.first=u.last=void 0,Yn?u.size=0:this.size=0},delete:function(u){var c=this,f=s(c),d=l(c,u);if(d){var h=d.next,m=d.previous;delete f.index[d.index],d.removed=!0,m&&(m.next=h),h&&(h.previous=m),f.first==d&&(f.first=h),f.last==d&&(f.last=m),Yn?f.size--:c.size--}return!!d},forEach:function(u){for(var c,f=s(this),d=V2(u,arguments.length>1?arguments[1]:void 0);c=c?c.next:f.first;)for(d(c.value,c.key,this);c&&c.removed;)c=c.previous},has:function(u){return!!l(this,u)}}),z$(o,t?{get:function(u){var c=l(this,u);return c&&c.value},set:function(u,c){return a(this,u===0?0:u,c)}}:{add:function(u){return a(this,u=u===0?0:u,u)}}),Yn&&V6e(o,"size",{get:function(){return s(this).size}}),i},setStrong:function(n,e,t){var r=e+" Iterator",i=JT(e),o=JT(r);KI(n,e,function(s,a){$$(this,{type:r,target:s,state:i(s),kind:a,last:void 0})},function(){for(var s=o(this),a=s.kind,l=s.last;l&&l.removed;)l=l.previous;return s.target&&(s.last=l=l?l.next:s.state.first)?Tg(a=="keys"?l.key:a=="values"?l.value:[l.key,l.value],!1):(s.target=void 0,Tg(void 0,!0))},t?"entries":"values",!t,!0),function(s){var a=hl(s),l=Mo.f;Yn&&a&&!a[U$]&&l(a,U$,{configurable:!0,get:function(){return this}})}(e)}};function Hee(n){var e=this.constructor;return this.then(function(t){return e.resolve(n()).then(function(){return t})},function(t){return e.resolve(n()).then(function(){return e.reject(t)})})}function Wee(n){return new this(function(e,t){if(!n||n.length===void 0)return t(new TypeError(typeof n+" "+n+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(n);if(r.length===0)return e([]);var i=r.length;function o(a,l){if(l&&(typeof l=="object"||typeof l=="function")){var u=l.then;if(typeof u=="function")return void u.call(l,function(c){o(a,c)},function(c){r[a]={status:"rejected",reason:c},--i==0&&e(r)})}r[a]={status:"fulfilled",value:l},--i==0&&e(r)}for(var s=0;s<r.length;s++)o(s,r[s])})}(function(n,e,t){var r=n.indexOf("Map")!==-1,i=n.indexOf("Weak")!==-1,o=r?"set":"add",s=yn[n],a=s&&s.prototype,l=s,u={},c=function(y){var p=Sn(a[y]);Uo(a,y,y=="add"?function(w){return p(this,w===0?0:w),this}:y=="delete"?function(w){return!(i&&!Pr(w))&&p(this,w===0?0:w)}:y=="get"?function(w){return i&&!Pr(w)?void 0:p(this,w===0?0:w)}:y=="has"?function(w){return!(i&&!Pr(w))&&p(this,w===0?0:w)}:function(w,b){return p(this,w===0?0:w,b),this})};if(EP(n,!br(s)||!(i||a.forEach&&!xr(function(){new s().entries().next()}))))l=t.getConstructor(e,n,r,o),Pm.enable();else if(EP(n,!0)){var f=new l,d=f[o](i?{}:-0,1)!=f,h=xr(function(){f.has(1)}),m=Fee(function(y){new s(y)}),g=!i&&xr(function(){for(var y=new s,p=5;p--;)y[o](p,p);return!y.has(-0)});m||((l=e(function(y,p){$ee(y,a);var w=function(b,v,S){var x,M;return ou&&br(x=v.constructor)&&x!==S&&Pr(M=x.prototype)&&M!==S.prototype&&ou(b,M),b}(new s,y,l);return lv(p)||Vee(p,w[o],{that:w,AS_ENTRIES:r}),w})).prototype=a,a.constructor=l),(h||g)&&(c("delete"),c("has"),r&&c("get")),(g||d)&&c(o),i&&a.clear&&delete a.clear}u[n]=l,Oi({global:!0,constructor:!0,forced:l!=s},u),ff(l,n),i||t.setStrong(l,n,r)})("Set",function(n){return function(){return n(this,arguments.length?arguments[0]:void 0)}},$6e),Yy.Set;var H6e=setTimeout;function H$(n){return!!(n&&n.length!==void 0)}function W6e(){}function Ur(n){if(!(this instanceof Ur))throw new TypeError("Promises must be constructed via new");if(typeof n!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],Gee(n,this)}function jee(n,e){for(;n._state===3;)n=n._value;n._state!==0?(n._handled=!0,Ur._immediateFn(function(){var t=n._state===1?e.onFulfilled:e.onRejected;if(t!==null){var r;try{r=t(n._value)}catch(i){return void Ky(e.promise,i)}IP(e.promise,r)}else(n._state===1?IP:Ky)(e.promise,n._value)})):n._deferreds.push(e)}function IP(n,e){try{if(e===n)throw new TypeError("A promise cannot be resolved with itself.");if(e&&(typeof e=="object"||typeof e=="function")){var t=e.then;if(e instanceof Ur)return n._state=3,n._value=e,void LP(n);if(typeof t=="function")return void Gee((r=t,i=e,function(){r.apply(i,arguments)}),n)}n._state=1,n._value=e,LP(n)}catch(o){Ky(n,o)}var r,i}function Ky(n,e){n._state=2,n._value=e,LP(n)}function LP(n){n._state===2&&n._deferreds.length===0&&Ur._immediateFn(function(){n._handled||Ur._unhandledRejectionFn(n._value)});for(var e=0,t=n._deferreds.length;e<t;e++)jee(n,n._deferreds[e]);n._deferreds=null}function j6e(n,e,t){this.onFulfilled=typeof n=="function"?n:null,this.onRejected=typeof e=="function"?e:null,this.promise=t}function Gee(n,e){var t=!1;try{n(function(r){t||(t=!0,IP(e,r))},function(r){t||(t=!0,Ky(e,r))})}catch(r){if(t)return;t=!0,Ky(e,r)}}Ur.prototype.catch=function(n){return this.then(null,n)},Ur.prototype.then=function(n,e){var t=new this.constructor(W6e);return jee(this,new j6e(n,e,t)),t},Ur.prototype.finally=Hee,Ur.all=function(n){return new Ur(function(e,t){if(!H$(n))return t(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(n);if(r.length===0)return e([]);var i=r.length;function o(a,l){try{if(l&&(typeof l=="object"||typeof l=="function")){var u=l.then;if(typeof u=="function")return void u.call(l,function(c){o(a,c)},t)}r[a]=l,--i==0&&e(r)}catch(c){t(c)}}for(var s=0;s<r.length;s++)o(s,r[s])})},Ur.allSettled=Wee,Ur.resolve=function(n){return n&&typeof n=="object"&&n.constructor===Ur?n:new Ur(function(e){e(n)})},Ur.reject=function(n){return new Ur(function(e,t){t(n)})},Ur.race=function(n){return new Ur(function(e,t){if(!H$(n))return t(new TypeError("Promise.race accepts an array"));for(var r=0,i=n.length;r<i;r++)Ur.resolve(n[r]).then(e,t)})},Ur._immediateFn=typeof setImmediate=="function"&&function(n){setImmediate(n)}||function(n){H6e(n,0)},Ur._unhandledRejectionFn=function(n){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",n)};var Ip=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}();typeof Ip.Promise!="function"?Ip.Promise=Ur:(Ip.Promise.prototype.finally||(Ip.Promise.prototype.finally=Hee),Ip.Promise.allSettled||(Ip.Promise.allSettled=Wee)),function(n){function e(h){for(var m=0,g=Math.min(65536,h.length+1),y=new Uint16Array(g),p=[],w=0;;){var b=m<h.length;if(!b||w>=g-1){var v=y.subarray(0,w);if(p.push(String.fromCharCode.apply(null,v)),!b)return p.join("");h=h.subarray(m),m=0,w=0}var S=h[m++];if(!(128&S))y[w++]=S;else if((224&S)==192){var x=63&h[m++];y[w++]=(31&S)<<6|x}else if((240&S)==224){x=63&h[m++];var M=63&h[m++];y[w++]=(31&S)<<12|x<<6|M}else if((248&S)==240){var A=(7&S)<<18|(x=63&h[m++])<<12|(M=63&h[m++])<<6|63&h[m++];A>65535&&(A-=65536,y[w++]=A>>>10&1023|55296,A=56320|1023&A),y[w++]=A}}}var t="Failed to ",r=function(h,m,g){if(h)throw new Error("".concat(t).concat(m,": the '").concat(g,"' option is unsupported."))},i=typeof Buffer=="function"&&Buffer.from,o=i?function(h){return Buffer.from(h)}:function(h){for(var m=0,g=h.length,y=0,p=Math.max(32,g+(g>>>1)+7),w=new Uint8Array(p>>>3<<3);m<g;){var b=h.charCodeAt(m++);if(b>=55296&&b<=56319){if(m<g){var v=h.charCodeAt(m);(64512&v)==56320&&(++m,b=((1023&b)<<10)+(1023&v)+65536)}if(b>=55296&&b<=56319)continue}if(y+4>w.length){p+=8,p=(p*=1+m/h.length*2)>>>3<<3;var S=new Uint8Array(p);S.set(w),w=S}if(4294967168&b){if(!(4294965248&b))w[y++]=b>>>6&31|192;else if(!(4294901760&b))w[y++]=b>>>12&15|224,w[y++]=b>>>6&63|128;else{if(4292870144&b)continue;w[y++]=b>>>18&7|240,w[y++]=b>>>12&63|128,w[y++]=b>>>6&63|128}w[y++]=63&b|128}else w[y++]=b}return w.slice?w.slice(0,y):w.subarray(0,y)};function s(){this.encoding="utf-8"}s.prototype.encode=function(h,m){return r(m&&m.stream,"encode","stream"),o(h)};var a=!i&&typeof Blob=="function"&&typeof URL=="function"&&typeof URL.createObjectURL=="function",l=["utf-8","utf8","unicode-1-1-utf-8"],u=e;i?u=function(h,m){return(h instanceof Buffer?h:Buffer.from(h.buffer,h.byteOffset,h.byteLength)).toString(m)}:a&&(u=function(h){try{return function(m){var g;try{var y=new Blob([m],{type:"text/plain;charset=UTF-8"});g=URL.createObjectURL(y);var p=new XMLHttpRequest;return p.open("GET",g,!1),p.send(),p.responseText}finally{g&&URL.revokeObjectURL(g)}}(h)}catch{return e(h)}});var c="construct 'TextDecoder'",f="".concat(t," ").concat(c,": the ");function d(h,m){if(r(m&&m.fatal,c,"fatal"),h=h||"utf-8",!(i?Buffer.isEncoding(h):l.indexOf(h.toLowerCase())!==-1))throw new RangeError("".concat(f," encoding label provided ('").concat(h,"') is invalid."));this.encoding=h,this.fatal=!1,this.ignoreBOM=!1}d.prototype.decode=function(h,m){var g;return r(m&&m.stream,"decode","stream"),g=h instanceof Uint8Array?h:h.buffer instanceof ArrayBuffer?new Uint8Array(h.buffer):new Uint8Array(h),u(g,this.encoding)},n.TextEncoder=n.TextEncoder||s,n.TextDecoder=n.TextDecoder||d}(typeof window<"u"?window:Vl),function(){function n(y,p){if(!(y instanceof p))throw new TypeError("Cannot call a class as a function")}function e(y,p){for(var w=0;w<p.length;w++){var b=p[w];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(y,b.key,b)}}function t(y,p,w){return p&&e(y.prototype,p),y}function r(y,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(p&&p.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),p&&o(y,p)}function i(y){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(p){return p.__proto__||Object.getPrototypeOf(p)},i(y)}function o(y,p){return o=Object.setPrototypeOf||function(w,b){return w.__proto__=b,w},o(y,p)}function s(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function a(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function l(y,p){return!p||typeof p!="object"&&typeof p!="function"?a(y):p}function u(y){var p=s();return function(){var w,b=i(y);if(p){var v=i(this).constructor;w=Reflect.construct(b,arguments,v)}else w=b.apply(this,arguments);return l(this,w)}}function c(y,p){for(;!Object.prototype.hasOwnProperty.call(y,p)&&(y=i(y))!==null;);return y}function f(y,p,w){return f=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(b,v,S){var x=c(b,v);if(x){var M=Object.getOwnPropertyDescriptor(x,v);return M.get?M.get.call(S):M.value}},f(y,p,w||y)}var d=function(){function y(){n(this,y),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return t(y,[{key:"addEventListener",value:function(p,w,b){p in this.listeners||(this.listeners[p]=[]),this.listeners[p].push({callback:w,options:b})}},{key:"removeEventListener",value:function(p,w){if(p in this.listeners){for(var b=this.listeners[p],v=0,S=b.length;v<S;v++)if(b[v].callback===w)return void b.splice(v,1)}}},{key:"dispatchEvent",value:function(p){if(p.type in this.listeners){for(var w=this.listeners[p.type].slice(),b=0,v=w.length;b<v;b++){var S=w[b];try{S.callback.call(this,p)}catch(x){Promise.resolve().then(function(){throw x})}S.options&&S.options.once&&this.removeEventListener(p.type,S.callback)}return!p.defaultPrevented}}}]),y}(),h=function(y){r(w,y);var p=u(w);function w(){var b;return n(this,w),(b=p.call(this)).listeners||d.call(a(b)),Object.defineProperty(a(b),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(a(b),"onabort",{value:null,writable:!0,configurable:!0}),b}return t(w,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(b){b.type==="abort"&&(this.aborted=!0,typeof this.onabort=="function"&&this.onabort.call(this,b)),f(i(w.prototype),"dispatchEvent",this).call(this,b)}}]),w}(d),m=function(){function y(){n(this,y),Object.defineProperty(this,"signal",{value:new h,writable:!0,configurable:!0})}return t(y,[{key:"abort",value:function(){var p;try{p=new Event("abort")}catch{typeof document<"u"?document.createEvent?(p=document.createEvent("Event")).initEvent("abort",!1,!1):(p=document.createEventObject()).type="abort":p={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(p)}},{key:"toString",value:function(){return"[object AbortController]"}}]),y}();function g(y){return y.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):typeof y.Request=="function"&&!y.Request.prototype.hasOwnProperty("signal")||!y.AbortController}typeof Symbol<"u"&&Symbol.toStringTag&&(m.prototype[Symbol.toStringTag]="AbortController",h.prototype[Symbol.toStringTag]="AbortSignal"),function(y){g(y)&&(y.AbortController=m,y.AbortSignal=h)}(typeof self<"u"?self:Vl)}();var Ud=av(function(n,e){Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function r(){var i=this;this.locked=new Map,this.addToLocked=function(o,s){var a=i.locked.get(o);a===void 0?s===void 0?i.locked.set(o,[]):i.locked.set(o,[s]):s!==void 0&&(a.unshift(s),i.locked.set(o,a))},this.isLocked=function(o){return i.locked.has(o)},this.lock=function(o){return new Promise(function(s,a){i.isLocked(o)?i.addToLocked(o,s):(i.addToLocked(o),s())})},this.unlock=function(o){var s=i.locked.get(o);if(s!==void 0&&s.length!==0){var a=s.pop();i.locked.set(o,s),a!==void 0&&setTimeout(a,0)}else i.locked.delete(o)}}return r.getInstance=function(){return r.instance===void 0&&(r.instance=new r),r.instance},r}();e.default=function(){return t.getInstance()}});II(Ud);var G6e=av(function(n,e){var t=Vl&&Vl.__awaiter||function(l,u,c,f){return new(c||(c=Promise))(function(d,h){function m(p){try{y(f.next(p))}catch(w){h(w)}}function g(p){try{y(f.throw(p))}catch(w){h(w)}}function y(p){p.done?d(p.value):new c(function(w){w(p.value)}).then(m,g)}y((f=f.apply(l,u||[])).next())})},r=Vl&&Vl.__generator||function(l,u){var c,f,d,h,m={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return h={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function g(y){return function(p){return function(w){if(c)throw new TypeError("Generator is already executing.");for(;m;)try{if(c=1,f&&(d=2&w[0]?f.return:w[0]?f.throw||((d=f.return)&&d.call(f),0):f.next)&&!(d=d.call(f,w[1])).done)return d;switch(f=0,d&&(w=[2&w[0],d.value]),w[0]){case 0:case 1:d=w;break;case 4:return m.label++,{value:w[1],done:!1};case 5:m.label++,f=w[1],w=[0];continue;case 7:w=m.ops.pop(),m.trys.pop();continue;default:if(d=m.trys,!((d=d.length>0&&d[d.length-1])||w[0]!==6&&w[0]!==2)){m=0;continue}if(w[0]===3&&(!d||w[1]>d[0]&&w[1]<d[3])){m.label=w[1];break}if(w[0]===6&&m.label<d[1]){m.label=d[1],d=w;break}if(d&&m.label<d[2]){m.label=d[2],m.ops.push(w);break}d[2]&&m.ops.pop(),m.trys.pop();continue}w=u.call(l,m)}catch(b){w=[6,b],f=0}finally{c=d=0}if(5&w[0])throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}([y,p])}}};Object.defineProperty(e,"__esModule",{value:!0});var i="browser-tabs-lock-key";function o(l){return new Promise(function(u){return setTimeout(u,l)})}function s(l){for(var u="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",c="",f=0;f<l;f++)c+=u[Math.floor(Math.random()*u.length)];return c}var a=function(){function l(){this.acquiredIatSet=new Set,this.id=Date.now().toString()+s(15),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),l.waiters===void 0&&(l.waiters=[])}return l.prototype.acquireLock=function(u,c){return c===void 0&&(c=5e3),t(this,void 0,void 0,function(){var f,d,h,m,g,y;return r(this,function(p){switch(p.label){case 0:f=Date.now()+s(4),d=Date.now()+c,h=i+"-"+u,m=window.localStorage,p.label=1;case 1:return Date.now()<d?[4,o(30)]:[3,8];case 2:return p.sent(),m.getItem(h)!==null?[3,5]:(g=this.id+"-"+u+"-"+f,[4,o(Math.floor(25*Math.random()))]);case 3:return p.sent(),m.setItem(h,JSON.stringify({id:this.id,iat:f,timeoutKey:g,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,o(30)];case 4:return p.sent(),(y=m.getItem(h))!==null&&(y=JSON.parse(y)).id===this.id&&y.iat===f?(this.acquiredIatSet.add(f),this.refreshLockWhileAcquired(h,f),[2,!0]):[3,7];case 5:return l.lockCorrector(),[4,this.waitForSomethingToChange(d)];case 6:p.sent(),p.label=7;case 7:return f=Date.now()+s(4),[3,1];case 8:return[2,!1]}})})},l.prototype.refreshLockWhileAcquired=function(u,c){return t(this,void 0,void 0,function(){var f=this;return r(this,function(d){return setTimeout(function(){return t(f,void 0,void 0,function(){var h,m;return r(this,function(g){switch(g.label){case 0:return[4,Ud.default().lock(c)];case 1:return g.sent(),this.acquiredIatSet.has(c)?(h=window.localStorage,(m=h.getItem(u))===null?(Ud.default().unlock(c),[2]):((m=JSON.parse(m)).timeRefreshed=Date.now(),h.setItem(u,JSON.stringify(m)),Ud.default().unlock(c),this.refreshLockWhileAcquired(u,c),[2])):(Ud.default().unlock(c),[2])}})})},1e3),[2]})})},l.prototype.waitForSomethingToChange=function(u){return t(this,void 0,void 0,function(){return r(this,function(c){switch(c.label){case 0:return[4,new Promise(function(f){var d=!1,h=Date.now(),m=!1;function g(){if(m||(window.removeEventListener("storage",g),l.removeFromWaiting(g),clearTimeout(y),m=!0),!d){d=!0;var p=50-(Date.now()-h);p>0?setTimeout(f,p):f()}}window.addEventListener("storage",g),l.addToWaiting(g);var y=setTimeout(g,Math.max(0,u-Date.now()))})];case 1:return c.sent(),[2]}})})},l.addToWaiting=function(u){this.removeFromWaiting(u),l.waiters!==void 0&&l.waiters.push(u)},l.removeFromWaiting=function(u){l.waiters!==void 0&&(l.waiters=l.waiters.filter(function(c){return c!==u}))},l.notifyWaiters=function(){l.waiters!==void 0&&l.waiters.slice().forEach(function(u){return u()})},l.prototype.releaseLock=function(u){return t(this,void 0,void 0,function(){return r(this,function(c){switch(c.label){case 0:return[4,this.releaseLock__private__(u)];case 1:return[2,c.sent()]}})})},l.prototype.releaseLock__private__=function(u){return t(this,void 0,void 0,function(){var c,f,d;return r(this,function(h){switch(h.label){case 0:return c=window.localStorage,f=i+"-"+u,(d=c.getItem(f))===null?[2]:(d=JSON.parse(d)).id!==this.id?[3,2]:[4,Ud.default().lock(d.iat)];case 1:h.sent(),this.acquiredIatSet.delete(d.iat),c.removeItem(f),Ud.default().unlock(d.iat),l.notifyWaiters(),h.label=2;case 2:return[2]}})})},l.lockCorrector=function(){for(var u=Date.now()-5e3,c=window.localStorage,f=Object.keys(c),d=!1,h=0;h<f.length;h++){var m=f[h];if(m.includes(i)){var g=c.getItem(m);g!==null&&((g=JSON.parse(g)).timeRefreshed===void 0&&g.timeAcquired<u||g.timeRefreshed!==void 0&&g.timeRefreshed<u)&&(c.removeItem(m),d=!0)}}d&&l.notifyWaiters()},l.waiters=void 0,l}();e.default=a}),q6e=II(G6e),X6e={timeoutInSeconds:60},Y6e=["login_required","consent_required","interaction_required","account_selection_required","access_denied"],qee={name:"auth0-spa-js",version:"1.22.6"},Xee=function(){return Date.now()},dc=function(n){function e(t,r){var i=n.call(this,r)||this;return i.error=t,i.error_description=r,Object.setPrototypeOf(i,e.prototype),i}return np(e,n),e.fromPayload=function(t){return new e(t.error,t.error_description)},e}(Error),K6e=function(n){function e(t,r,i,o){o===void 0&&(o=null);var s=n.call(this,t,r)||this;return s.state=i,s.appState=o,Object.setPrototypeOf(s,e.prototype),s}return np(e,n),e}(dc),FP=function(n){function e(){var t=n.call(this,"timeout","Timeout")||this;return Object.setPrototypeOf(t,e.prototype),t}return np(e,n),e}(dc),Z6e=function(n){function e(t){var r=n.call(this)||this;return r.popup=t,Object.setPrototypeOf(r,e.prototype),r}return np(e,n),e}(FP),J6e=function(n){function e(t){var r=n.call(this,"cancelled","Popup closed")||this;return r.popup=t,Object.setPrototypeOf(r,e.prototype),r}return np(e,n),e}(dc),Q6e=function(n){function e(t,r,i){var o=n.call(this,t,r)||this;return o.mfa_token=i,Object.setPrototypeOf(o,e.prototype),o}return np(e,n),e}(dc),e9e=function(n){function e(t,r){var i=n.call(this,"missing_refresh_token","Missing Refresh Token (audience: '".concat(j$(t,["default"]),"', scope: '").concat(j$(r),"')"))||this;return i.audience=t,i.scope=r,Object.setPrototypeOf(i,e.prototype),i}return np(e,n),e}(dc),t9e=function(n){return new Promise(function(e,t){var r,i=setInterval(function(){n.popup&&n.popup.closed&&(clearInterval(i),clearTimeout(o),window.removeEventListener("message",r,!1),t(new J6e(n.popup)))},1e3),o=setTimeout(function(){clearInterval(i),t(new Z6e(n.popup)),window.removeEventListener("message",r,!1)},1e3*(n.timeoutInSeconds||60));r=function(s){if(s.data&&s.data.type==="authorization_response"){if(clearTimeout(o),clearInterval(i),window.removeEventListener("message",r,!1),n.popup.close(),s.data.response.error)return t(dc.fromPayload(s.data.response));e(s.data.response)}},window.addEventListener("message",r)})},QI=function(){return window.crypto||window.msCrypto},Yee=function(){var n=QI();return n.subtle||n.webkitSubtle},Cu=function(){var n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~.",e="";return Array.from(QI().getRandomValues(new Uint8Array(43))).forEach(function(t){return e+=n[t%n.length]}),e},Lp=function(n){return btoa(n)},BP=function(n){return Object.keys(n).filter(function(e){return n[e]!==void 0}).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])}).join("&")},QT=function(n){return Ln(void 0,void 0,void 0,function(){var e;return Fn(this,function(t){switch(t.label){case 0:return e=Yee().digest({name:"SHA-256"},new TextEncoder().encode(n)),window.msCrypto?[2,new Promise(function(r,i){e.oncomplete=function(o){r(o.target.result)},e.onerror=function(o){i(o.error)},e.onabort=function(){i("The digest operation was aborted")}})]:[4,e];case 1:return[2,t.sent()]}})})},W$=function(n){return function(e){return decodeURIComponent(atob(e).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))}(n.replace(/_/g,"/").replace(/-/g,"+"))},e3=function(n){var e=new Uint8Array(n);return function(t){var r={"+":"-","/":"_","=":""};return t.replace(/[+/=]/g,function(i){return r[i]})}(window.btoa(String.fromCharCode.apply(String,xP([],Eg(Array.from(e)),!1))))};function j$(n,e){return e===void 0&&(e=[]),n&&!e.includes(n)?n:""}var n9e=function(n,e){return Ln(void 0,void 0,void 0,function(){var t,r;return Fn(this,function(i){switch(i.label){case 0:return[4,(o=n,s=e,s=s||{},new Promise(function(a,l){var u=new XMLHttpRequest,c=[],f=[],d={},h=function(){return{ok:(u.status/100|0)==2,statusText:u.statusText,status:u.status,url:u.responseURL,text:function(){return Promise.resolve(u.responseText)},json:function(){return Promise.resolve(u.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([u.response]))},clone:h,headers:{keys:function(){return c},entries:function(){return f},get:function(g){return d[g.toLowerCase()]},has:function(g){return g.toLowerCase()in d}}}};for(var m in u.open(s.method||"get",o,!0),u.onload=function(){u.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(g,y,p){c.push(y=y.toLowerCase()),f.push([y,p]),d[y]=d[y]?d[y]+","+p:p}),a(h())},u.onerror=l,u.withCredentials=s.credentials=="include",s.headers)u.setRequestHeader(m,s.headers[m]);u.send(s.body||null)}))];case 1:return t=i.sent(),r={ok:t.ok},[4,t.json()];case 2:return[2,(r.json=i.sent(),r)]}var o,s})})},r9e=function(n,e,t){return Ln(void 0,void 0,void 0,function(){var r,i;return Fn(this,function(o){return r=new AbortController,e.signal=r.signal,[2,Promise.race([n9e(n,e),new Promise(function(s,a){i=setTimeout(function(){r.abort(),a(new Error("Timeout when executing 'fetch'"))},t)})]).finally(function(){clearTimeout(i)})]})})},i9e=function(n,e,t,r,i,o,s){return Ln(void 0,void 0,void 0,function(){return Fn(this,function(a){return[2,(l={auth:{audience:e,scope:t},timeout:i,fetchUrl:n,fetchOptions:r,useFormData:s},u=o,new Promise(function(c,f){var d=new MessageChannel;d.port1.onmessage=function(h){h.data.error?f(new Error(h.data.error)):c(h.data),d.port1.close()},u.postMessage(l,[d.port2])}))];var l,u})})},o9e=function(n,e,t,r,i,o,s){return s===void 0&&(s=1e4),Ln(void 0,void 0,void 0,function(){return Fn(this,function(a){return i?[2,i9e(n,e,t,r,s,i,o)]:[2,r9e(n,r,s)]})})};function s9e(n,e,t,r,i,o,s){return Ln(this,void 0,void 0,function(){var a,l,u,c,f,d,h,m,g;return Fn(this,function(y){switch(y.label){case 0:a=null,u=0,y.label=1;case 1:if(!(u<3))return[3,6];y.label=2;case 2:return y.trys.push([2,4,,5]),[4,o9e(n,t,r,i,o,s,e)];case 3:return l=y.sent(),a=null,[3,6];case 4:return c=y.sent(),a=c,[3,5];case 5:return u++,[3,1];case 6:if(a)throw a.message=a.message||"Failed to fetch",a;if(f=l.json,d=f.error,h=f.error_description,m=ts(f,["error","error_description"]),!l.ok)throw g=h||"HTTP error. Unable to fetch ".concat(n),d==="mfa_required"?new Q6e(d,g,m.mfa_token):new dc(d||"request_error",g);return[2,m]}})})}function Aw(n,e){var t=n.baseUrl,r=n.timeout,i=n.audience,o=n.scope,s=n.auth0Client,a=n.useFormData,l=ts(n,["baseUrl","timeout","audience","scope","auth0Client","useFormData"]);return Ln(this,void 0,void 0,function(){var u;return Fn(this,function(c){switch(c.label){case 0:return u=a?BP(l):JSON.stringify(l),[4,s9e("".concat(t,"/oauth/token"),r,i||"default",o,{method:"POST",body:u,headers:{"Content-Type":a?"application/x-www-form-urlencoded":"application/json","Auth0-Client":btoa(JSON.stringify(s||qee))}},e,a)];case 1:return[2,c.sent()]}})})}var a9e=function(n){return Array.from(new Set(n))},Ic=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return a9e(n.join(" ").trim().split(/\s+/)).join(" ")},Gd=function(){function n(e,t){t===void 0&&(t="@@auth0spajs@@"),this.prefix=t,this.client_id=e.client_id,this.scope=e.scope,this.audience=e.audience}return n.prototype.toKey=function(){return"".concat(this.prefix,"::").concat(this.client_id,"::").concat(this.audience,"::").concat(this.scope)},n.fromKey=function(e){var t=Eg(e.split("::"),4),r=t[0],i=t[1],o=t[2];return new n({client_id:i,scope:t[3],audience:o},r)},n.fromCacheEntry=function(e){return new n({scope:e.scope,audience:e.audience,client_id:e.client_id})},n}(),l9e=function(){function n(){}return n.prototype.set=function(e,t){localStorage.setItem(e,JSON.stringify(t))},n.prototype.get=function(e){var t=window.localStorage.getItem(e);if(t)try{return JSON.parse(t)}catch{return}},n.prototype.remove=function(e){localStorage.removeItem(e)},n.prototype.allKeys=function(){return Object.keys(window.localStorage).filter(function(e){return e.startsWith("@@auth0spajs@@")})},n}(),u9e=function(){var n;this.enclosedCache=(n={},{set:function(e,t){n[e]=t},get:function(e){var t=n[e];if(t)return t},remove:function(e){delete n[e]},allKeys:function(){return Object.keys(n)}})},c9e=function(){function n(e,t,r){this.cache=e,this.keyManifest=t,this.nowProvider=r,this.nowProvider=this.nowProvider||Xee}return n.prototype.get=function(e,t){var r;return t===void 0&&(t=0),Ln(this,void 0,void 0,function(){var i,o,s,a,l;return Fn(this,function(u){switch(u.label){case 0:return[4,this.cache.get(e.toKey())];case 1:return(i=u.sent())?[3,4]:[4,this.getCacheKeys()];case 2:return(o=u.sent())?(s=this.matchExistingCacheKey(e,o))?[4,this.cache.get(s)]:[3,4]:[2];case 3:i=u.sent(),u.label=4;case 4:return i?[4,this.nowProvider()]:[2];case 5:return a=u.sent(),l=Math.floor(a/1e3),i.expiresAt-t<l?i.body.refresh_token?(i.body={refresh_token:i.body.refresh_token},[4,this.cache.set(e.toKey(),i)]):[3,7]:[3,10];case 6:return u.sent(),[2,i.body];case 7:return[4,this.cache.remove(e.toKey())];case 8:return u.sent(),[4,(r=this.keyManifest)===null||r===void 0?void 0:r.remove(e.toKey())];case 9:return u.sent(),[2];case 10:return[2,i.body]}})})},n.prototype.set=function(e){var t;return Ln(this,void 0,void 0,function(){var r,i;return Fn(this,function(o){switch(o.label){case 0:return r=new Gd({client_id:e.client_id,scope:e.scope,audience:e.audience}),[4,this.wrapCacheEntry(e)];case 1:return i=o.sent(),[4,this.cache.set(r.toKey(),i)];case 2:return o.sent(),[4,(t=this.keyManifest)===null||t===void 0?void 0:t.add(r.toKey())];case 3:return o.sent(),[2]}})})},n.prototype.clear=function(e){var t;return Ln(this,void 0,void 0,function(){var r,i=this;return Fn(this,function(o){switch(o.label){case 0:return[4,this.getCacheKeys()];case 1:return(r=o.sent())?[4,r.filter(function(s){return!e||s.includes(e)}).reduce(function(s,a){return Ln(i,void 0,void 0,function(){return Fn(this,function(l){switch(l.label){case 0:return[4,s];case 1:return l.sent(),[4,this.cache.remove(a)];case 2:return l.sent(),[2]}})})},Promise.resolve())]:[2];case 2:return o.sent(),[4,(t=this.keyManifest)===null||t===void 0?void 0:t.clear()];case 3:return o.sent(),[2]}})})},n.prototype.clearSync=function(e){var t=this,r=this.cache.allKeys();r&&r.filter(function(i){return!e||i.includes(e)}).forEach(function(i){t.cache.remove(i)})},n.prototype.wrapCacheEntry=function(e){return Ln(this,void 0,void 0,function(){var t,r,i;return Fn(this,function(o){switch(o.label){case 0:return[4,this.nowProvider()];case 1:return t=o.sent(),r=Math.floor(t/1e3)+e.expires_in,i=Math.min(r,e.decodedToken.claims.exp),[2,{body:e,expiresAt:i}]}})})},n.prototype.getCacheKeys=function(){var e;return Ln(this,void 0,void 0,function(){var t;return Fn(this,function(r){switch(r.label){case 0:return this.keyManifest?[4,this.keyManifest.get()]:[3,2];case 1:return t=(e=r.sent())===null||e===void 0?void 0:e.keys,[3,4];case 2:return[4,this.cache.allKeys()];case 3:t=r.sent(),r.label=4;case 4:return[2,t]}})})},n.prototype.matchExistingCacheKey=function(e,t){return t.filter(function(r){var i=Gd.fromKey(r),o=new Set(i.scope&&i.scope.split(" ")),s=e.scope.split(" "),a=i.scope&&s.reduce(function(l,u){return l&&o.has(u)},!0);return i.prefix==="@@auth0spajs@@"&&i.client_id===e.client_id&&i.audience===e.audience&&a})[0]},n}(),f9e=function(){function n(e,t){this.storage=e,this.clientId=t,this.storageKey="".concat("a0.spajs.txs",".").concat(this.clientId),this.transaction=this.storage.get(this.storageKey)}return n.prototype.create=function(e){this.transaction=e,this.storage.save(this.storageKey,e,{daysUntilExpire:1})},n.prototype.get=function(){return this.transaction},n.prototype.remove=function(){delete this.transaction,this.storage.remove(this.storageKey)},n}(),s0=function(n){return typeof n=="number"},d9e=["iss","aud","exp","nbf","iat","jti","azp","nonce","auth_time","at_hash","c_hash","acr","amr","sub_jwk","cnf","sip_from_tag","sip_date","sip_callid","sip_cseq_num","sip_via_branch","orig","dest","mky","events","toe","txn","rph","sid","vot","vtm"],h9e=function(n){if(!n.id_token)throw new Error("ID token is required but missing");var e=function(a){var l=a.split("."),u=Eg(l,3),c=u[0],f=u[1],d=u[2];if(l.length!==3||!c||!f||!d)throw new Error("ID token could not be decoded");var h=JSON.parse(W$(f)),m={__raw:a},g={};return Object.keys(h).forEach(function(y){m[y]=h[y],d9e.includes(y)||(g[y]=h[y])}),{encoded:{header:c,payload:f,signature:d},header:JSON.parse(W$(c)),claims:m,user:g}}(n.id_token);if(!e.claims.iss)throw new Error("Issuer (iss) claim must be a string present in the ID token");if(e.claims.iss!==n.iss)throw new Error('Issuer (iss) claim mismatch in the ID token; expected "'.concat(n.iss,'", found "').concat(e.claims.iss,'"'));if(!e.user.sub)throw new Error("Subject (sub) claim must be a string present in the ID token");if(e.header.alg!=="RS256")throw new Error('Signature algorithm of "'.concat(e.header.alg,'" is not supported. Expected the ID token to be signed with "RS256".'));if(!e.claims.aud||typeof e.claims.aud!="string"&&!Array.isArray(e.claims.aud))throw new Error("Audience (aud) claim must be a string or array of strings present in the ID token");if(Array.isArray(e.claims.aud)){if(!e.claims.aud.includes(n.aud))throw new Error('Audience (aud) claim mismatch in the ID token; expected "'.concat(n.aud,'" but was not one of "').concat(e.claims.aud.join(", "),'"'));if(e.claims.aud.length>1){if(!e.claims.azp)throw new Error("Authorized Party (azp) claim must be a string present in the ID token when Audience (aud) claim has multiple values");if(e.claims.azp!==n.aud)throw new Error('Authorized Party (azp) claim mismatch in the ID token; expected "'.concat(n.aud,'", found "').concat(e.claims.azp,'"'))}}else if(e.claims.aud!==n.aud)throw new Error('Audience (aud) claim mismatch in the ID token; expected "'.concat(n.aud,'" but found "').concat(e.claims.aud,'"'));if(n.nonce){if(!e.claims.nonce)throw new Error("Nonce (nonce) claim must be a string present in the ID token");if(e.claims.nonce!==n.nonce)throw new Error('Nonce (nonce) claim mismatch in the ID token; expected "'.concat(n.nonce,'", found "').concat(e.claims.nonce,'"'))}if(n.max_age&&!s0(e.claims.auth_time))throw new Error("Authentication Time (auth_time) claim must be a number present in the ID token when Max Age (max_age) is specified");if(!s0(e.claims.exp))throw new Error("Expiration Time (exp) claim must be a number present in the ID token");if(!s0(e.claims.iat))throw new Error("Issued At (iat) claim must be a number present in the ID token");var t=n.leeway||60,r=new Date(n.now||Date.now()),i=new Date(0),o=new Date(0),s=new Date(0);if(s.setUTCSeconds(parseInt(e.claims.auth_time)+n.max_age+t),i.setUTCSeconds(e.claims.exp+t),o.setUTCSeconds(e.claims.nbf-t),r>i)throw new Error("Expiration Time (exp) claim error in the ID token; current time (".concat(r,") is after expiration time (").concat(i,")"));if(s0(e.claims.nbf)&&r<o)throw new Error("Not Before time (nbf) claim in the ID token indicates that this token can't be used just yet. Currrent time (".concat(r,") is before ").concat(o));if(s0(e.claims.auth_time)&&r>s)throw new Error("Authentication Time (auth_time) claim in the ID token indicates that too much time has passed since the last end-user authentication. Currrent time (".concat(r,") is after last auth at ").concat(s));if(n.organizationId){if(!e.claims.org_id)throw new Error("Organization ID (org_id) claim must be a string present in the ID token");if(n.organizationId!==e.claims.org_id)throw new Error('Organization ID (org_id) claim mismatch in the ID token; expected "'.concat(n.organizationId,'", found "').concat(e.claims.org_id,'"'))}return e},ih=av(function(n,e){var t=Vl&&Vl.__assign||function(){return t=Object.assign||function(l){for(var u,c=1,f=arguments.length;c<f;c++)for(var d in u=arguments[c])Object.prototype.hasOwnProperty.call(u,d)&&(l[d]=u[d]);return l},t.apply(this,arguments)};function r(l,u){if(!u)return"";var c="; "+l;return u===!0?c:c+"="+u}function i(l,u,c){return encodeURIComponent(l).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")+"="+encodeURIComponent(u).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+function(f){if(typeof f.expires=="number"){var d=new Date;d.setMilliseconds(d.getMilliseconds()+864e5*f.expires),f.expires=d}return r("Expires",f.expires?f.expires.toUTCString():"")+r("Domain",f.domain)+r("Path",f.path)+r("Secure",f.secure)+r("SameSite",f.sameSite)}(c)}function o(l){for(var u={},c=l?l.split("; "):[],f=/(%[\dA-F]{2})+/gi,d=0;d<c.length;d++){var h=c[d].split("="),m=h.slice(1).join("=");m.charAt(0)==='"'&&(m=m.slice(1,-1));try{u[h[0].replace(f,decodeURIComponent)]=m.replace(f,decodeURIComponent)}catch{}}return u}function s(){return o(document.cookie)}function a(l,u,c){document.cookie=i(l,u,t({path:"/"},c))}e.__esModule=!0,e.encode=i,e.parse=o,e.getAll=s,e.get=function(l){return s()[l]},e.set=a,e.remove=function(l,u){a(l,"",t(t({},u),{expires:-1}))}});II(ih),ih.encode,ih.parse,ih.getAll;var p9e=ih.get,Kee=ih.set,Zee=ih.remove,cm={get:function(n){var e=p9e(n);if(e!==void 0)return JSON.parse(e)},save:function(n,e,t){var r={};window.location.protocol==="https:"&&(r={secure:!0,sameSite:"none"}),t!=null&&t.daysUntilExpire&&(r.expires=t.daysUntilExpire),t!=null&&t.cookieDomain&&(r.domain=t.cookieDomain),Kee(n,JSON.stringify(e),r)},remove:function(n,e){var t={};e!=null&&e.cookieDomain&&(t.domain=e.cookieDomain),Zee(n,t)}},m9e={get:function(n){var e=cm.get(n);return e||cm.get("".concat("_legacy_").concat(n))},save:function(n,e,t){var r={};window.location.protocol==="https:"&&(r={secure:!0}),t!=null&&t.daysUntilExpire&&(r.expires=t.daysUntilExpire),Kee("".concat("_legacy_").concat(n),JSON.stringify(e),r),cm.save(n,e,t)},remove:function(n,e){var t={};e!=null&&e.cookieDomain&&(t.domain=e.cookieDomain),Zee(n,t),cm.remove(n,e),cm.remove("".concat("_legacy_").concat(n),e)}},g9e={get:function(n){if(typeof sessionStorage<"u"){var e=sessionStorage.getItem(n);if(e!==void 0)return JSON.parse(e)}},save:function(n,e){sessionStorage.setItem(n,JSON.stringify(e))},remove:function(n){sessionStorage.removeItem(n)}};function v9e(n,e,t){var r=e===void 0?null:e,i=function(l,u){var c=atob(l);if(u){for(var f=new Uint8Array(c.length),d=0,h=c.length;d<h;++d)f[d]=c.charCodeAt(d);return String.fromCharCode.apply(null,new Uint16Array(f.buffer))}return c}(n,t!==void 0&&t),o=i.indexOf(`
`,10)+1,s=i.substring(o)+(r?"//# sourceMappingURL="+r:""),a=new Blob([s],{type:"application/javascript"});return URL.createObjectURL(a)}var G$,q$,X$,t3,y9e=(G$="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4gdD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSl9LHQoZSxyKX07ZnVuY3Rpb24gZShlLHIpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiByJiZudWxsIT09cil0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHIpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG4ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBuKX12YXIgcj1mdW5jdGlvbigpe3JldHVybiByPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxyPTEsbj1hcmd1bWVudHMubGVuZ3RoO3I8bjtyKyspZm9yKHZhciBvIGluIGU9YXJndW1lbnRzW3JdKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLG8pJiYodFtvXT1lW29dKTtyZXR1cm4gdH0sci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2Z1bmN0aW9uIG4odCxlLHIsbil7cmV0dXJuIG5ldyhyfHwocj1Qcm9taXNlKSkoKGZ1bmN0aW9uKG8sYyl7ZnVuY3Rpb24gaSh0KXt0cnl7cyhuLm5leHQodCkpfWNhdGNoKHQpe2ModCl9fWZ1bmN0aW9uIGEodCl7dHJ5e3Mobi50aHJvdyh0KSl9Y2F0Y2godCl7Yyh0KX19ZnVuY3Rpb24gcyh0KXt2YXIgZTt0LmRvbmU/byh0LnZhbHVlKTooZT10LnZhbHVlLGUgaW5zdGFuY2VvZiByP2U6bmV3IHIoKGZ1bmN0aW9uKHQpe3QoZSl9KSkpLnRoZW4oaSxhKX1zKChuPW4uYXBwbHkodCxlfHxbXSkpLm5leHQoKSl9KSl9ZnVuY3Rpb24gbyh0LGUpe3ZhciByLG4sbyxjLGk9e2xhYmVsOjAsc2VudDpmdW5jdGlvbigpe2lmKDEmb1swXSl0aHJvdyBvWzFdO3JldHVybiBvWzFdfSx0cnlzOltdLG9wczpbXX07cmV0dXJuIGM9e25leHQ6YSgwKSx0aHJvdzphKDEpLHJldHVybjphKDIpfSwiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYoY1tTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSxjO2Z1bmN0aW9uIGEoYyl7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihjKXtpZihyKXRocm93IG5ldyBUeXBlRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy4iKTtmb3IoO2k7KXRyeXtpZihyPTEsbiYmKG89MiZjWzBdP24ucmV0dXJuOmNbMF0/bi50aHJvd3x8KChvPW4ucmV0dXJuKSYmby5jYWxsKG4pLDApOm4ubmV4dCkmJiEobz1vLmNhbGwobixjWzFdKSkuZG9uZSlyZXR1cm4gbztzd2l0Y2gobj0wLG8mJihjPVsyJmNbMF0sby52YWx1ZV0pLGNbMF0pe2Nhc2UgMDpjYXNlIDE6bz1jO2JyZWFrO2Nhc2UgNDpyZXR1cm4gaS5sYWJlbCsrLHt2YWx1ZTpjWzFdLGRvbmU6ITF9O2Nhc2UgNTppLmxhYmVsKyssbj1jWzFdLGM9WzBdO2NvbnRpbnVlO2Nhc2UgNzpjPWkub3BzLnBvcCgpLGkudHJ5cy5wb3AoKTtjb250aW51ZTtkZWZhdWx0OmlmKCEobz1pLnRyeXMsKG89by5sZW5ndGg+MCYmb1tvLmxlbmd0aC0xXSl8fDYhPT1jWzBdJiYyIT09Y1swXSkpe2k9MDtjb250aW51ZX1pZigzPT09Y1swXSYmKCFvfHxjWzFdPm9bMF0mJmNbMV08b1szXSkpe2kubGFiZWw9Y1sxXTticmVha31pZig2PT09Y1swXSYmaS5sYWJlbDxvWzFdKXtpLmxhYmVsPW9bMV0sbz1jO2JyZWFrfWlmKG8mJmkubGFiZWw8b1syXSl7aS5sYWJlbD1vWzJdLGkub3BzLnB1c2goYyk7YnJlYWt9b1syXSYmaS5vcHMucG9wKCksaS50cnlzLnBvcCgpO2NvbnRpbnVlfWM9ZS5jYWxsKHQsaSl9Y2F0Y2godCl7Yz1bNix0XSxuPTB9ZmluYWxseXtyPW89MH1pZig1JmNbMF0pdGhyb3cgY1sxXTtyZXR1cm57dmFsdWU6Y1swXT9jWzFdOnZvaWQgMCxkb25lOiEwfX0oW2MsYV0pfX19ZnVuY3Rpb24gYyh0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT1bXSksdCYmIWUuaW5jbHVkZXModCk/dDoiIn12YXIgaT1mdW5jdGlvbih0KXtmdW5jdGlvbiByKGUsbil7dmFyIG89dC5jYWxsKHRoaXMsbil8fHRoaXM7cmV0dXJuIG8uZXJyb3I9ZSxvLmVycm9yX2Rlc2NyaXB0aW9uPW4sT2JqZWN0LnNldFByb3RvdHlwZU9mKG8sci5wcm90b3R5cGUpLG99cmV0dXJuIGUocix0KSxyLmZyb21QYXlsb2FkPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgcih0LmVycm9yLHQuZXJyb3JfZGVzY3JpcHRpb24pfSxyfShFcnJvcik7IWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIHIoZSxuLG8sYyl7dm9pZCAwPT09YyYmKGM9bnVsbCk7dmFyIGk9dC5jYWxsKHRoaXMsZSxuKXx8dGhpcztyZXR1cm4gaS5zdGF0ZT1vLGkuYXBwU3RhdGU9YyxPYmplY3Quc2V0UHJvdG90eXBlT2YoaSxyLnByb3RvdHlwZSksaX1lKHIsdCl9KGkpLGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIHIoZSl7dmFyIG49dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBuLnBvcHVwPWUsT2JqZWN0LnNldFByb3RvdHlwZU9mKG4sci5wcm90b3R5cGUpLG59ZShyLHQpfShmdW5jdGlvbih0KXtmdW5jdGlvbiByKCl7dmFyIGU9dC5jYWxsKHRoaXMsInRpbWVvdXQiLCJUaW1lb3V0Iil8fHRoaXM7cmV0dXJuIE9iamVjdC5zZXRQcm90b3R5cGVPZihlLHIucHJvdG90eXBlKSxlfXJldHVybiBlKHIsdCkscn0oaSkpLGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIHIoZSl7dmFyIG49dC5jYWxsKHRoaXMsImNhbmNlbGxlZCIsIlBvcHVwIGNsb3NlZCIpfHx0aGlzO3JldHVybiBuLnBvcHVwPWUsT2JqZWN0LnNldFByb3RvdHlwZU9mKG4sci5wcm90b3R5cGUpLG59ZShyLHQpfShpKSxmdW5jdGlvbih0KXtmdW5jdGlvbiByKGUsbixvKXt2YXIgYz10LmNhbGwodGhpcyxlLG4pfHx0aGlzO3JldHVybiBjLm1mYV90b2tlbj1vLE9iamVjdC5zZXRQcm90b3R5cGVPZihjLHIucHJvdG90eXBlKSxjfWUocix0KX0oaSk7dmFyIGE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gcihlLG4pe3ZhciBvPXQuY2FsbCh0aGlzLCJtaXNzaW5nX3JlZnJlc2hfdG9rZW4iLCJNaXNzaW5nIFJlZnJlc2ggVG9rZW4gKGF1ZGllbmNlOiAnIi5jb25jYXQoYyhlLFsiZGVmYXVsdCJdKSwiJywgc2NvcGU6ICciKS5jb25jYXQoYyhuKSwiJykiKSl8fHRoaXM7cmV0dXJuIG8uYXVkaWVuY2U9ZSxvLnNjb3BlPW4sT2JqZWN0LnNldFByb3RvdHlwZU9mKG8sci5wcm90b3R5cGUpLG99cmV0dXJuIGUocix0KSxyfShpKSxzPXt9LHU9ZnVuY3Rpb24odCxlKXtyZXR1cm4iIi5jb25jYXQodCwifCIpLmNvbmNhdChlKX07YWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsKGZ1bmN0aW9uKHQpe3ZhciBlPXQuZGF0YSxjPWUudGltZW91dCxpPWUuYXV0aCxmPWUuZmV0Y2hVcmwsbD1lLmZldGNoT3B0aW9ucyxwPWUudXNlRm9ybURhdGEsaD1mdW5jdGlvbih0LGUpe3ZhciByPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJnRbU3ltYm9sLml0ZXJhdG9yXTtpZighcilyZXR1cm4gdDt2YXIgbixvLGM9ci5jYWxsKHQpLGk9W107dHJ5e2Zvcig7KHZvaWQgMD09PWV8fGUtLSA+MCkmJiEobj1jLm5leHQoKSkuZG9uZTspaS5wdXNoKG4udmFsdWUpfWNhdGNoKHQpe289e2Vycm9yOnR9fWZpbmFsbHl7dHJ5e24mJiFuLmRvbmUmJihyPWMucmV0dXJuKSYmci5jYWxsKGMpfWZpbmFsbHl7aWYobyl0aHJvdyBvLmVycm9yfX1yZXR1cm4gaX0odC5wb3J0cywxKVswXTtyZXR1cm4gbih2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxlLG4seSx2LGIsZCx3LE8sXztyZXR1cm4gbyh0aGlzLChmdW5jdGlvbihvKXtzd2l0Y2goby5sYWJlbCl7Y2FzZSAwOm49KGU9aXx8e30pLmF1ZGllbmNlLHk9ZS5zY29wZSxvLmxhYmVsPTE7Y2FzZSAxOmlmKG8udHJ5cy5wdXNoKFsxLDcsLDhdKSwhKHY9cD8obT1sLmJvZHksaz1uZXcgVVJMU2VhcmNoUGFyYW1zKG0pLFA9e30say5mb3JFYWNoKChmdW5jdGlvbih0LGUpe1BbZV09dH0pKSxQKTpKU09OLnBhcnNlKGwuYm9keSkpLnJlZnJlc2hfdG9rZW4mJiJyZWZyZXNoX3Rva2VuIj09PXYuZ3JhbnRfdHlwZSl7aWYoYj1mdW5jdGlvbih0LGUpe3JldHVybiBzW3UodCxlKV19KG4seSksIWIpdGhyb3cgbmV3IGEobix5KTtsLmJvZHk9cD9uZXcgVVJMU2VhcmNoUGFyYW1zKHIocih7fSx2KSx7cmVmcmVzaF90b2tlbjpifSkpLnRvU3RyaW5nKCk6SlNPTi5zdHJpbmdpZnkocihyKHt9LHYpLHtyZWZyZXNoX3Rva2VuOmJ9KSl9ZD12b2lkIDAsImZ1bmN0aW9uIj09dHlwZW9mIEFib3J0Q29udHJvbGxlciYmKGQ9bmV3IEFib3J0Q29udHJvbGxlcixsLnNpZ25hbD1kLnNpZ25hbCksdz12b2lkIDAsby5sYWJlbD0yO2Nhc2UgMjpyZXR1cm4gby50cnlzLnB1c2goWzIsNCwsNV0pLFs0LFByb21pc2UucmFjZShbKGc9YyxuZXcgUHJvbWlzZSgoZnVuY3Rpb24odCl7cmV0dXJuIHNldFRpbWVvdXQodCxnKX0pKSksZmV0Y2goZixyKHt9LGwpKV0pXTtjYXNlIDM6cmV0dXJuIHc9by5zZW50KCksWzMsNV07Y2FzZSA0OnJldHVybiBPPW8uc2VudCgpLGgucG9zdE1lc3NhZ2Uoe2Vycm9yOk8ubWVzc2FnZX0pLFsyXTtjYXNlIDU6cmV0dXJuIHc/WzQsdy5qc29uKCldOihkJiZkLmFib3J0KCksaC5wb3N0TWVzc2FnZSh7ZXJyb3I6IlRpbWVvdXQgd2hlbiBleGVjdXRpbmcgJ2ZldGNoJyJ9KSxbMl0pO2Nhc2UgNjpyZXR1cm4odD1vLnNlbnQoKSkucmVmcmVzaF90b2tlbj8oZnVuY3Rpb24odCxlLHIpe3NbdShlLHIpXT10fSh0LnJlZnJlc2hfdG9rZW4sbix5KSxkZWxldGUgdC5yZWZyZXNoX3Rva2VuKTpmdW5jdGlvbih0LGUpe2RlbGV0ZSBzW3UodCxlKV19KG4seSksaC5wb3N0TWVzc2FnZSh7b2s6dy5vayxqc29uOnR9KSxbMyw4XTtjYXNlIDc6cmV0dXJuIF89by5zZW50KCksaC5wb3N0TWVzc2FnZSh7b2s6ITEsanNvbjp7ZXJyb3JfZGVzY3JpcHRpb246Xy5tZXNzYWdlfX0pLFszLDhdO2Nhc2UgODpyZXR1cm5bMl19dmFyIGcsbSxrLFB9KSl9KSl9KSl9KCk7Cgo=",q$=null,X$=!1,function(n){return t3=t3||v9e(G$,q$,X$),new Worker(t3,n)}),n3={},x9e=function(){function n(e,t){this.cache=e,this.clientId=t,this.manifestKey=this.createManifestKeyFrom(this.clientId)}return n.prototype.add=function(e){var t;return Ln(this,void 0,void 0,function(){var r,i;return Fn(this,function(o){switch(o.label){case 0:return i=Set.bind,[4,this.cache.get(this.manifestKey)];case 1:return(r=new(i.apply(Set,[void 0,((t=o.sent())===null||t===void 0?void 0:t.keys)||[]]))).add(e),[4,this.cache.set(this.manifestKey,{keys:xP([],Eg(r),!1)})];case 2:return o.sent(),[2]}})})},n.prototype.remove=function(e){return Ln(this,void 0,void 0,function(){var t,r;return Fn(this,function(i){switch(i.label){case 0:return[4,this.cache.get(this.manifestKey)];case 1:return(t=i.sent())?((r=new Set(t.keys)).delete(e),r.size>0?[4,this.cache.set(this.manifestKey,{keys:xP([],Eg(r),!1)})]:[3,3]):[3,5];case 2:case 4:return[2,i.sent()];case 3:return[4,this.cache.remove(this.manifestKey)];case 5:return[2]}})})},n.prototype.get=function(){return this.cache.get(this.manifestKey)},n.prototype.clear=function(){return this.cache.remove(this.manifestKey)},n.prototype.createManifestKeyFrom=function(e){return"".concat("@@auth0spajs@@","::").concat(e)},n}(),r3=new q6e,b9e={memory:function(){return new u9e().enclosedCache},localstorage:function(){return new l9e}},Y$=function(n){return b9e[n]},w9e=function(){return!/Trident.*rv:11\.0/.test(navigator.userAgent)},S9e=function(){function n(e){var t,r,i,o,s=this;if(this.options=e,this._releaseLockOnPageHide=function(){return Ln(s,void 0,void 0,function(){return Fn(this,function(u){switch(u.label){case 0:return[4,r3.releaseLock("auth0.lock.getTokenSilently")];case 1:return u.sent(),window.removeEventListener("pagehide",this._releaseLockOnPageHide),[2]}})})},typeof window<"u"&&function(){if(!QI())throw new Error("For security reasons, `window.crypto` is required to run `auth0-spa-js`.");if(Yee()===void 0)throw new Error(`
      auth0-spa-js must run on a secure origin. See https://github.com/auth0/auth0-spa-js/blob/master/FAQ.md#why-do-i-get-auth0-spa-js-must-run-on-a-secure-origin for more information.
    `)}(),e.cache&&e.cacheLocation&&console.warn("Both `cache` and `cacheLocation` options have been specified in the Auth0Client configuration; ignoring `cacheLocation` and using `cache`."),e.cache)i=e.cache;else{if(this.cacheLocation=e.cacheLocation||"memory",!Y$(this.cacheLocation))throw new Error('Invalid cache location "'.concat(this.cacheLocation,'"'));i=Y$(this.cacheLocation)()}this.httpTimeoutMs=e.httpTimeoutInSeconds?1e3*e.httpTimeoutInSeconds:1e4,this.cookieStorage=e.legacySameSiteCookie===!1?cm:m9e,this.orgHintCookieName=(o=this.options.client_id,"auth0.".concat(o,".organization_hint")),this.isAuthenticatedCookieName=function(u){return"auth0.".concat(u,".is.authenticated")}(this.options.client_id),this.sessionCheckExpiryDays=e.sessionCheckExpiryDays||1;var a,l=e.useCookiesForTransactions?this.cookieStorage:g9e;this.scope=this.options.scope,this.transactionManager=new f9e(l,this.options.client_id),this.nowProvider=this.options.nowProvider||Xee,this.cacheManager=new c9e(i,i.allKeys?null:new x9e(i,this.options.client_id),this.nowProvider),this.domainUrl=(a=this.options.domain,/^https?:\/\//.test(a)?a:"https://".concat(a)),this.tokenIssuer=function(u,c){return u?u.startsWith("https://")?u:"https://".concat(u,"/"):"".concat(c,"/")}(this.options.issuer,this.domainUrl),this.defaultScope=Ic("openid",((r=(t=this.options)===null||t===void 0?void 0:t.advancedOptions)===null||r===void 0?void 0:r.defaultScope)!==void 0?this.options.advancedOptions.defaultScope:"openid profile email"),this.options.useRefreshTokens&&(this.scope=Ic(this.scope,"offline_access")),typeof window<"u"&&window.Worker&&this.options.useRefreshTokens&&this.cacheLocation==="memory"&&w9e()&&(this.worker=new y9e),this.customOptions=function(u){return u.advancedOptions,u.audience,u.auth0Client,u.authorizeTimeoutInSeconds,u.cacheLocation,u.cache,u.client_id,u.domain,u.issuer,u.leeway,u.max_age,u.nowProvider,u.redirect_uri,u.scope,u.useRefreshTokens,u.useRefreshTokensFallback,u.useCookiesForTransactions,u.useFormData,ts(u,["advancedOptions","audience","auth0Client","authorizeTimeoutInSeconds","cacheLocation","cache","client_id","domain","issuer","leeway","max_age","nowProvider","redirect_uri","scope","useRefreshTokens","useRefreshTokensFallback","useCookiesForTransactions","useFormData"])}(e),this.useRefreshTokensFallback=this.options.useRefreshTokensFallback!==!1}return n.prototype._url=function(e){var t=encodeURIComponent(btoa(JSON.stringify(this.options.auth0Client||qee)));return"".concat(this.domainUrl).concat(e,"&auth0Client=").concat(t)},n.prototype._getParams=function(e,t,r,i,o){var s=this.options;s.useRefreshTokens,s.useCookiesForTransactions,s.useFormData,s.auth0Client,s.cacheLocation,s.advancedOptions,s.detailedResponse,s.nowProvider,s.authorizeTimeoutInSeconds,s.legacySameSiteCookie,s.sessionCheckExpiryDays,s.domain,s.leeway,s.httpTimeoutInSeconds;var a=ts(s,["useRefreshTokens","useCookiesForTransactions","useFormData","auth0Client","cacheLocation","advancedOptions","detailedResponse","nowProvider","authorizeTimeoutInSeconds","legacySameSiteCookie","sessionCheckExpiryDays","domain","leeway","httpTimeoutInSeconds"]);return gn(gn(gn({},a),e),{scope:Ic(this.defaultScope,this.scope,e.scope),response_type:"code",response_mode:"query",state:t,nonce:r,redirect_uri:o||this.options.redirect_uri,code_challenge:i,code_challenge_method:"S256"})},n.prototype._authorizeUrl=function(e){return this._url("/authorize?".concat(BP(e)))},n.prototype._verifyIdToken=function(e,t,r){return Ln(this,void 0,void 0,function(){var i;return Fn(this,function(o){switch(o.label){case 0:return[4,this.nowProvider()];case 1:return i=o.sent(),[2,h9e({iss:this.tokenIssuer,aud:this.options.client_id,id_token:e,nonce:t,organizationId:r,leeway:this.options.leeway,max_age:this._parseNumber(this.options.max_age),now:i})]}})})},n.prototype._parseNumber=function(e){return typeof e!="string"?e:parseInt(e,10)||void 0},n.prototype._processOrgIdHint=function(e){e?this.cookieStorage.save(this.orgHintCookieName,e,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}):this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain})},n.prototype.buildAuthorizeUrl=function(e){return e===void 0&&(e={}),Ln(this,void 0,void 0,function(){var t,r,i,o,s,a,l,u,c,f,d,h;return Fn(this,function(m){switch(m.label){case 0:return t=e.redirect_uri,r=e.appState,i=ts(e,["redirect_uri","appState"]),o=Lp(Cu()),s=Lp(Cu()),a=Cu(),[4,QT(a)];case 1:return l=m.sent(),u=e3(l),c=e.fragment?"#".concat(e.fragment):"",f=this._getParams(i,o,s,u,t),d=this._authorizeUrl(f),h=e.organization||this.options.organization,this.transactionManager.create(gn({nonce:s,code_verifier:a,appState:r,scope:f.scope,audience:f.audience||"default",redirect_uri:f.redirect_uri,state:o},h&&{organizationId:h})),[2,d+c]}})})},n.prototype.loginWithPopup=function(e,t){return Ln(this,void 0,void 0,function(){var r,i,o,s,a,l,u,c,f,d,h,m,g;return Fn(this,function(y){switch(y.label){case 0:if(e=e||{},!(t=t||{}).popup&&(t.popup=function(p){var w=window.screenX+(window.innerWidth-400)/2,b=window.screenY+(window.innerHeight-600)/2;return window.open(p,"auth0:authorize:popup","left=".concat(w,",top=").concat(b,",width=").concat(400,",height=").concat(600,",resizable,scrollbars=yes,status=1"))}(""),!t.popup))throw new Error("Unable to open a popup for loginWithPopup - window.open returned `null`");return r=ts(e,[]),i=Lp(Cu()),o=Lp(Cu()),s=Cu(),[4,QT(s)];case 1:return a=y.sent(),l=e3(a),u=this._getParams(r,i,o,l,this.options.redirect_uri||window.location.origin),c=this._authorizeUrl(gn(gn({},u),{response_mode:"web_message"})),t.popup.location.href=c,[4,t9e(gn(gn({},t),{timeoutInSeconds:t.timeoutInSeconds||this.options.authorizeTimeoutInSeconds||60}))];case 2:if(f=y.sent(),i!==f.state)throw new Error("Invalid state");return[4,Aw({audience:u.audience,scope:u.scope,baseUrl:this.domainUrl,client_id:this.options.client_id,code_verifier:s,code:f.code,grant_type:"authorization_code",redirect_uri:u.redirect_uri,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData,timeout:this.httpTimeoutMs},this.worker)];case 3:return d=y.sent(),h=e.organization||this.options.organization,[4,this._verifyIdToken(d.id_token,o,h)];case 4:return m=y.sent(),g=gn(gn({},d),{decodedToken:m,scope:u.scope,audience:u.audience||"default",client_id:this.options.client_id}),[4,this.cacheManager.set(g)];case 5:return y.sent(),this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this._processOrgIdHint(m.claims.org_id),[2]}})})},n.prototype.getUser=function(e){return e===void 0&&(e={}),Ln(this,void 0,void 0,function(){var t,r,i;return Fn(this,function(o){switch(o.label){case 0:return t=e.audience||this.options.audience||"default",r=Ic(this.defaultScope,this.scope,e.scope),[4,this.cacheManager.get(new Gd({client_id:this.options.client_id,audience:t,scope:r}))];case 1:return[2,(i=o.sent())&&i.decodedToken&&i.decodedToken.user]}})})},n.prototype.getIdTokenClaims=function(e){return e===void 0&&(e={}),Ln(this,void 0,void 0,function(){var t,r,i;return Fn(this,function(o){switch(o.label){case 0:return t=e.audience||this.options.audience||"default",r=Ic(this.defaultScope,this.scope,e.scope),[4,this.cacheManager.get(new Gd({client_id:this.options.client_id,audience:t,scope:r}))];case 1:return[2,(i=o.sent())&&i.decodedToken&&i.decodedToken.claims]}})})},n.prototype.loginWithRedirect=function(e){return e===void 0&&(e={}),Ln(this,void 0,void 0,function(){var t,r,i;return Fn(this,function(o){switch(o.label){case 0:return t=e.redirectMethod,r=ts(e,["redirectMethod"]),[4,this.buildAuthorizeUrl(r)];case 1:return i=o.sent(),window.location[t||"assign"](i),[2]}})})},n.prototype.handleRedirectCallback=function(e){return e===void 0&&(e=window.location.href),Ln(this,void 0,void 0,function(){var t,r,i,o,s,a,l,u,c,f;return Fn(this,function(d){switch(d.label){case 0:if((t=e.split("?").slice(1)).length===0)throw new Error("There are no query params available for parsing.");if(r=function(h){h.indexOf("#")>-1&&(h=h.substr(0,h.indexOf("#")));var m=h.split("&"),g={};return m.forEach(function(y){var p=Eg(y.split("="),2),w=p[0],b=p[1];g[w]=decodeURIComponent(b)}),g.expires_in&&(g.expires_in=parseInt(g.expires_in)),g}(t.join("")),i=r.state,o=r.code,s=r.error,a=r.error_description,!(l=this.transactionManager.get()))throw new Error("Invalid state");if(this.transactionManager.remove(),s)throw new K6e(s,a,i,l.appState);if(!l.code_verifier||l.state&&l.state!==i)throw new Error("Invalid state");return u={audience:l.audience,scope:l.scope,baseUrl:this.domainUrl,client_id:this.options.client_id,code_verifier:l.code_verifier,grant_type:"authorization_code",code:o,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData,timeout:this.httpTimeoutMs},l.redirect_uri!==void 0&&(u.redirect_uri=l.redirect_uri),[4,Aw(u,this.worker)];case 1:return c=d.sent(),[4,this._verifyIdToken(c.id_token,l.nonce,l.organizationId)];case 2:return f=d.sent(),[4,this.cacheManager.set(gn(gn(gn(gn({},c),{decodedToken:f,audience:l.audience,scope:l.scope}),c.scope?{oauthTokenScope:c.scope}:null),{client_id:this.options.client_id}))];case 3:return d.sent(),this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this._processOrgIdHint(f.claims.org_id),[2,{appState:l.appState}]}})})},n.prototype.checkSession=function(e){return Ln(this,void 0,void 0,function(){var t;return Fn(this,function(r){switch(r.label){case 0:if(!this.cookieStorage.get(this.isAuthenticatedCookieName)){if(!this.cookieStorage.get("auth0.is.authenticated"))return[2];this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove("auth0.is.authenticated")}r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.getTokenSilently(e)];case 2:return r.sent(),[3,4];case 3:if(t=r.sent(),!Y6e.includes(t.error))throw t;return[3,4];case 4:return[2]}})})},n.prototype.getTokenSilently=function(e){return e===void 0&&(e={}),Ln(this,void 0,void 0,function(){var t,r,i,o,s=this;return Fn(this,function(a){switch(a.label){case 0:return t=gn(gn({audience:this.options.audience,ignoreCache:!1},e),{scope:Ic(this.defaultScope,this.scope,e.scope)}),r=t.ignoreCache,i=ts(t,["ignoreCache"]),[4,(l=function(){return s._getTokenSilently(gn({ignoreCache:r},i))},u="".concat(this.options.client_id,"::").concat(i.audience,"::").concat(i.scope),c=n3[u],c||(c=l().finally(function(){delete n3[u],c=null}),n3[u]=c),c)];case 1:return o=a.sent(),[2,e.detailedResponse?o:o.access_token]}var l,u,c})})},n.prototype._getTokenSilently=function(e){return e===void 0&&(e={}),Ln(this,void 0,void 0,function(){var t,r,i,o,s,a,l,u,c;return Fn(this,function(f){switch(f.label){case 0:return t=e.ignoreCache,r=ts(e,["ignoreCache"]),t?[3,2]:[4,this._getEntryFromCache({scope:r.scope,audience:r.audience||"default",client_id:this.options.client_id})];case 1:if(i=f.sent())return[2,i];f.label=2;case 2:return[4,(d=function(){return r3.acquireLock("auth0.lock.getTokenSilently",5e3)},h=10,h===void 0&&(h=3),Ln(void 0,void 0,void 0,function(){var m;return Fn(this,function(g){switch(g.label){case 0:m=0,g.label=1;case 1:return m<h?[4,d()]:[3,4];case 2:if(g.sent())return[2,!0];g.label=3;case 3:return m++,[3,1];case 4:return[2,!1]}})}))];case 3:if(!f.sent())return[3,15];f.label=4;case 4:return f.trys.push([4,,12,14]),window.addEventListener("pagehide",this._releaseLockOnPageHide),t?[3,6]:[4,this._getEntryFromCache({scope:r.scope,audience:r.audience||"default",client_id:this.options.client_id})];case 5:if(i=f.sent())return[2,i];f.label=6;case 6:return this.options.useRefreshTokens?[4,this._getTokenUsingRefreshToken(r)]:[3,8];case 7:return s=f.sent(),[3,10];case 8:return[4,this._getTokenFromIFrame(r)];case 9:s=f.sent(),f.label=10;case 10:return o=s,[4,this.cacheManager.set(gn({client_id:this.options.client_id},o))];case 11:return f.sent(),this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),a=o.id_token,l=o.access_token,u=o.oauthTokenScope,c=o.expires_in,[2,gn(gn({id_token:a,access_token:l},u?{scope:u}:null),{expires_in:c})];case 12:return[4,r3.releaseLock("auth0.lock.getTokenSilently")];case 13:return f.sent(),window.removeEventListener("pagehide",this._releaseLockOnPageHide),[7];case 14:return[3,16];case 15:throw new FP;case 16:return[2]}var d,h})})},n.prototype.getTokenWithPopup=function(e,t){return e===void 0&&(e={}),t===void 0&&(t={}),Ln(this,void 0,void 0,function(){return Fn(this,function(r){switch(r.label){case 0:return e.audience=e.audience||this.options.audience,e.scope=Ic(this.defaultScope,this.scope,e.scope),t=gn(gn({},X6e),t),[4,this.loginWithPopup(e,t)];case 1:return r.sent(),[4,this.cacheManager.get(new Gd({scope:e.scope,audience:e.audience||"default",client_id:this.options.client_id}))];case 2:return[2,r.sent().access_token]}})})},n.prototype.isAuthenticated=function(){return Ln(this,void 0,void 0,function(){return Fn(this,function(e){switch(e.label){case 0:return[4,this.getUser()];case 1:return[2,!!e.sent()]}})})},n.prototype.buildLogoutUrl=function(e){e===void 0&&(e={}),e.client_id!==null?e.client_id=e.client_id||this.options.client_id:delete e.client_id;var t=e.federated,r=ts(e,["federated"]),i=t?"&federated":"";return this._url("/v2/logout?".concat(BP(r)))+i},n.prototype.logout=function(e){var t=this;e===void 0&&(e={});var r=e.localOnly,i=ts(e,["localOnly"]);if(r&&i.federated)throw new Error("It is invalid to set both the `federated` and `localOnly` options to `true`");var o=function(){if(t.cookieStorage.remove(t.orgHintCookieName,{cookieDomain:t.options.cookieDomain}),t.cookieStorage.remove(t.isAuthenticatedCookieName,{cookieDomain:t.options.cookieDomain}),!r){var s=t.buildLogoutUrl(i);window.location.assign(s)}};if(this.options.cache)return this.cacheManager.clear().then(function(){return o()});this.cacheManager.clearSync(),o()},n.prototype._getTokenFromIFrame=function(e){return Ln(this,void 0,void 0,function(){var t,r,i,o,s,a,l,u,c,f,d,h,m,g,y,p,w;return Fn(this,function(b){switch(b.label){case 0:return t=Lp(Cu()),r=Lp(Cu()),i=Cu(),[4,QT(i)];case 1:o=b.sent(),s=e3(o),a=ts(e,["detailedResponse"]),l=this._getParams(a,t,r,s,e.redirect_uri||this.options.redirect_uri||window.location.origin),(u=this.cookieStorage.get(this.orgHintCookieName))&&!l.organization&&(l.organization=u),c=this._authorizeUrl(gn(gn({},l),{prompt:"none",response_mode:"web_message"})),b.label=2;case 2:if(b.trys.push([2,6,,7]),window.crossOriginIsolated)throw new dc("login_required","The application is running in a Cross-Origin Isolated context, silently retrieving a token without refresh token is not possible.");return f=e.timeoutInSeconds||this.options.authorizeTimeoutInSeconds,[4,(v=c,S=this.domainUrl,x=f,x===void 0&&(x=60),new Promise(function(M,A){var T=window.document.createElement("iframe");T.setAttribute("width","0"),T.setAttribute("height","0"),T.style.display="none";var C,D=function(){window.document.body.contains(T)&&(window.document.body.removeChild(T),window.removeEventListener("message",C,!1))},R=setTimeout(function(){A(new FP),D()},1e3*x);C=function(B){if(B.origin==S&&B.data&&B.data.type==="authorization_response"){var F=B.source;F&&F.close(),B.data.response.error?A(dc.fromPayload(B.data.response)):M(B.data.response),clearTimeout(R),window.removeEventListener("message",C,!1),setTimeout(D,2e3)}},window.addEventListener("message",C,!1),window.document.body.appendChild(T),T.setAttribute("src",v)}))];case 3:if(d=b.sent(),t!==d.state)throw new Error("Invalid state");return h=e.scope,m=e.audience,g=ts(e,["scope","audience","redirect_uri","ignoreCache","timeoutInSeconds","detailedResponse"]),[4,Aw(gn(gn(gn({},this.customOptions),g),{scope:h,audience:m,baseUrl:this.domainUrl,client_id:this.options.client_id,code_verifier:i,code:d.code,grant_type:"authorization_code",redirect_uri:l.redirect_uri,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData,timeout:g.timeout||this.httpTimeoutMs}),this.worker)];case 4:return y=b.sent(),[4,this._verifyIdToken(y.id_token,r)];case 5:return p=b.sent(),this._processOrgIdHint(p.claims.org_id),[2,gn(gn({},y),{decodedToken:p,scope:l.scope,oauthTokenScope:y.scope,audience:l.audience||"default"})];case 6:throw(w=b.sent()).error==="login_required"&&this.logout({localOnly:!0}),w;case 7:return[2]}var v,S,x})})},n.prototype._getTokenUsingRefreshToken=function(e){return Ln(this,void 0,void 0,function(){var t,r,i,o,s,a,l,u,c;return Fn(this,function(f){switch(f.label){case 0:return e.scope=Ic(this.defaultScope,this.options.scope,e.scope),[4,this.cacheManager.get(new Gd({scope:e.scope,audience:e.audience||"default",client_id:this.options.client_id}))];case 1:return(t=f.sent())&&t.refresh_token||this.worker?[3,4]:this.useRefreshTokensFallback?[4,this._getTokenFromIFrame(e)]:[3,3];case 2:return[2,f.sent()];case 3:throw new e9e(e.audience||"default",e.scope);case 4:r=e.redirect_uri||this.options.redirect_uri||window.location.origin,o=e.scope,s=e.audience,a=ts(e,["scope","audience","ignoreCache","timeoutInSeconds","detailedResponse"]),l=typeof e.timeoutInSeconds=="number"?1e3*e.timeoutInSeconds:null,f.label=5;case 5:return f.trys.push([5,7,,10]),[4,Aw(gn(gn(gn(gn(gn({},this.customOptions),a),{audience:s,scope:o,baseUrl:this.domainUrl,client_id:this.options.client_id,grant_type:"refresh_token",refresh_token:t&&t.refresh_token,redirect_uri:r}),l&&{timeout:l}),{auth0Client:this.options.auth0Client,useFormData:this.options.useFormData,timeout:this.httpTimeoutMs}),this.worker)];case 6:return i=f.sent(),[3,10];case 7:return((u=f.sent()).message.indexOf("Missing Refresh Token")>-1||u.message&&u.message.indexOf("invalid refresh token")>-1)&&this.useRefreshTokensFallback?[4,this._getTokenFromIFrame(e)]:[3,9];case 8:return[2,f.sent()];case 9:throw u;case 10:return[4,this._verifyIdToken(i.id_token)];case 11:return c=f.sent(),[2,gn(gn({},i),{decodedToken:c,scope:e.scope,oauthTokenScope:i.scope,audience:e.audience||"default"})]}})})},n.prototype._getEntryFromCache=function(e){var t=e.scope,r=e.audience,i=e.client_id;return Ln(this,void 0,void 0,function(){var o,s,a,l,u;return Fn(this,function(c){switch(c.label){case 0:return[4,this.cacheManager.get(new Gd({scope:t,audience:r,client_id:i}),60)];case 1:return(o=c.sent())&&o.access_token?(s=o.id_token,a=o.access_token,l=o.oauthTokenScope,u=o.expires_in,[2,gn(gn({id_token:s,access_token:a},l?{scope:l}:null),{expires_in:u})]):[2]}})})},n}(),Jee={isAuthenticated:!1,isLoading:!0},Au=function(){throw new Error("You forgot to wrap your component in <Auth0Provider>.")},_9e=oi(oi({},Jee),{buildAuthorizeUrl:Au,buildLogoutUrl:Au,getAccessTokenSilently:Au,getAccessTokenWithPopup:Au,getIdTokenClaims:Au,loginWithRedirect:Au,loginWithPopup:Au,logout:Au,handleRedirectCallback:Au}),Qee=z.createContext(_9e),E9e=function(n){oze(e,n);function e(t,r){var i=n.call(this,r||t)||this;return i.error=t,i.error_description=r,Object.setPrototypeOf(i,e.prototype),i}return e}(Error),M9e=/[?&]code=[^&]+/,C9e=/[?&]state=[^&]+/,A9e=/[?&]error=[^&]+/,T9e=function(n){return n===void 0&&(n=window.location.search),(M9e.test(n)||A9e.test(n))&&C9e.test(n)},ete=function(n){return function(e){return"error"in e?new E9e(e.error,e.error_description):e instanceof Error?e:new Error(n)}},K$=ete("Login failed"),i3=ete("Get access token failed"),D9e=function(n,e){var t,r;switch(e.type){case"LOGIN_POPUP_STARTED":return oi(oi({},n),{isLoading:!0});case"LOGIN_POPUP_COMPLETE":case"INITIALISED":return oi(oi({},n),{isAuthenticated:!!e.user,user:e.user,isLoading:!1,error:void 0});case"HANDLE_REDIRECT_COMPLETE":case"GET_ACCESS_TOKEN_COMPLETE":return((t=n.user)===null||t===void 0?void 0:t.updated_at)===((r=e.user)===null||r===void 0?void 0:r.updated_at)?n:oi(oi({},n),{isAuthenticated:!!e.user,user:e.user});case"LOGOUT":return oi(oi({},n),{isAuthenticated:!1,user:void 0});case"ERROR":return oi(oi({},n),{isLoading:!1,error:e.error})}},N9e=function(n){var e=n.clientId,t=n.redirectUri,r=n.maxAge,i=kI(n,["clientId","redirectUri","maxAge"]);return oi(oi({},i),{client_id:e,redirect_uri:t,max_age:r,auth0Client:{name:"auth0-react",version:"1.12.1"}})},Z$=function(n){if(n){var e=n.redirectUri,t=kI(n,["redirectUri"]);return oi(oi({},t),{redirect_uri:e})}},P9e=function(n){window.history.replaceState({},document.title,(n==null?void 0:n.returnTo)||window.location.pathname)},R9e=function(n){var e=n.children,t=n.skipRedirectCallback,r=n.onRedirectCallback,i=r===void 0?P9e:r,o=n.context,s=o===void 0?Qee:o,a=kI(n,["children","skipRedirectCallback","onRedirectCallback","context"]),l=z.useState(function(){return new S9e(N9e(a))})[0],u=z.useReducer(D9e,Jee),c=u[0],f=u[1],d=z.useRef(!1);z.useEffect(function(){d.current||(d.current=!0,function(){return t0(void 0,void 0,void 0,function(){var M,A,T;return n0(this,function(C){switch(C.label){case 0:return C.trys.push([0,7,,8]),M=void 0,T9e()&&!t?[4,l.handleRedirectCallback()]:[3,3];case 1:return A=C.sent().appState,[4,l.getUser()];case 2:return M=C.sent(),i(A,M),[3,6];case 3:return[4,l.checkSession()];case 4:return C.sent(),[4,l.getUser()];case 5:M=C.sent(),C.label=6;case 6:return f({type:"INITIALISED",user:M}),[3,8];case 7:return T=C.sent(),f({type:"ERROR",error:K$(T)}),[3,8];case 8:return[2]}})})}())},[l,i,t]);var h=z.useCallback(function(M){return l.buildAuthorizeUrl(Z$(M))},[l]),m=z.useCallback(function(M){return l.buildLogoutUrl(M)},[l]),g=z.useCallback(function(M){return l.loginWithRedirect(Z$(M))},[l]),y=z.useCallback(function(M,A){return t0(void 0,void 0,void 0,function(){var T,C;return n0(this,function(D){switch(D.label){case 0:f({type:"LOGIN_POPUP_STARTED"}),D.label=1;case 1:return D.trys.push([1,3,,4]),[4,l.loginWithPopup(M,A)];case 2:return D.sent(),[3,4];case 3:return T=D.sent(),f({type:"ERROR",error:K$(T)}),[2];case 4:return[4,l.getUser()];case 5:return C=D.sent(),f({type:"LOGIN_POPUP_COMPLETE",user:C}),[2]}})})},[l]),p=z.useCallback(function(M){M===void 0&&(M={});var A=l.logout(M);if(M.localOnly){if(A&&typeof A.then=="function")return A.then(function(){return f({type:"LOGOUT"})});f({type:"LOGOUT"})}return A},[l]),w=z.useCallback(function(M){return t0(void 0,void 0,void 0,function(){var A,T,C,D;return n0(this,function(R){switch(R.label){case 0:return R.trys.push([0,2,3,5]),[4,l.getTokenSilently(M)];case 1:return A=R.sent(),[3,5];case 2:throw T=R.sent(),i3(T);case 3:return C=f,D={type:"GET_ACCESS_TOKEN_COMPLETE"},[4,l.getUser()];case 4:return C.apply(void 0,[(D.user=R.sent(),D)]),[7];case 5:return[2,A]}})})},[l]),b=z.useCallback(function(M,A){return t0(void 0,void 0,void 0,function(){var T,C,D,R;return n0(this,function(B){switch(B.label){case 0:return B.trys.push([0,2,3,5]),[4,l.getTokenWithPopup(M,A)];case 1:return T=B.sent(),[3,5];case 2:throw C=B.sent(),i3(C);case 3:return D=f,R={type:"GET_ACCESS_TOKEN_COMPLETE"},[4,l.getUser()];case 4:return D.apply(void 0,[(R.user=B.sent(),R)]),[7];case 5:return[2,T]}})})},[l]),v=z.useCallback(function(M){return l.getIdTokenClaims(M)},[l]),S=z.useCallback(function(M){return t0(void 0,void 0,void 0,function(){var A,T,C;return n0(this,function(D){switch(D.label){case 0:return D.trys.push([0,2,3,5]),[4,l.handleRedirectCallback(M)];case 1:return[2,D.sent()];case 2:throw A=D.sent(),i3(A);case 3:return T=f,C={type:"HANDLE_REDIRECT_COMPLETE"},[4,l.getUser()];case 4:return T.apply(void 0,[(C.user=D.sent(),C)]),[7];case 5:return[2]}})})},[l]),x=z.useMemo(function(){return oi(oi({},c),{buildAuthorizeUrl:h,buildLogoutUrl:m,getAccessTokenSilently:w,getAccessTokenWithPopup:b,getIdTokenClaims:v,loginWithRedirect:g,loginWithPopup:y,logout:p,handleRedirectCallback:S})},[c,h,m,w,b,v,g,y,p,S]);return Te.createElement(s.Provider,{value:x},e)},tte=function(n){return n===void 0&&(n=Qee),z.useContext(n)};const O9e=({})=>{const{loginWithRedirect:n}=tte();return Q.jsx("div",{className:"login-page",children:Q.jsxs("div",{className:"form animate fadeInUp one",children:[Q.jsxs("div",{id:"gitSide",className:"logindiv",children:[Q.jsx("img",{className:"logo",src:"/imgs/abundance_logo.png",alt:"logo"}),Q.jsx("div",{id:"welcome",children:Q.jsx("img",{src:"/imgs/abundance_lettering.png",alt:"logo",style:{width:"300px"}})}),Q.jsxs("p",{style:{padding:"0 20px"},children:["Abundance projects are stored through GitHub. You control your files."," "]}),Q.jsxs("form",{className:"login-form",children:[Q.jsx("button",{type:"button",id:"loginButton",style:{height:"40px"},className:"submit-btn",onClick:()=>n(),children:"Login With GitHub"}),Q.jsxs("p",{className:"message",children:["Don't have an account?"," ",Q.jsx("a",{href:"https://github.com/join",children:"Create a free account"})]})]})]}),Q.jsxs("div",{id:"nonGitSide",className:"logindiv curiousBrowse",children:[Q.jsx("p",{style:{justifyContent:"flex-start",display:"inline"},children:"Check out what others have designed in Abundance"}),Q.jsx("button",{type:"button",onClick:()=>{},className:"submit-btn",id:"browseNonGit",style:{padding:"0 30px"},children:"Browse all projects"})]})]})})},k9e=({setYearShow:n,nodes:e,authorizedUserOcto:t})=>{const[r,i]=z.useState("thumb"),[o,s]=z.useState("byDateCreated");return Q.jsxs(Q.Fragment,{children:[Q.jsxs("div",{style:{flexDirection:"row",height:"30px",widht:"50%",margin:"25px 0 10px 20px",display:"flex"},children:[Q.jsx("button",{className:"list_thumb_button",onClick:()=>i("list"),children:Q.jsx("img",{src:"/imgs/list.svg",alt:"list_search",style:{width:"20px",marginRight:"5px",opacity:"0.8"}})},"list-filter-button"),Q.jsx("button",{className:"list_thumb_button",onClick:()=>i("thumb"),children:Q.jsx("img",{src:"/imgs/thumbnail.svg",alt:"thumb_search",style:{width:"20px",marginRight:"5px",opacity:"0.8"}})},"thumb-filter-button"),Q.jsxs("label",{htmlFor:"order-by",children:[Q.jsx("img",{src:"/imgs/sort.svg",alt:"Sort by",style:{width:"15px"}}),Q.jsxs("select",{className:"order_dropdown",id:"order-by",defaultValue:o,onChange:a=>s(a.target.value),children:[Q.jsx("option",{value:"byName",children:"Name"},"name_order"),Q.jsx("option",{value:"byForks",children:"Forks"},"forks_order"),Q.jsx("option",{value:"byStars",children:"Stars"},"stars_order"),Q.jsx("option",{value:"byOwnerName",children:"Creator"},"owner_order"),Q.jsx("option",{value:"byDateCreated",children:"Date Created"},"date_order")]})]})]}),e.length>0?Q.jsx(I9e,{nodes:e,browseType:r,orderType:o,authorizedUserOcto:t}):Q.jsx("p",{children:"No projects match your search"})]})},I9e=({nodes:n,browseType:e,orderType:t})=>{const r=({node:a})=>Q.jsxs("div",{className:"project",style:a.owner!=O.currentUser?{backgroundColor:"rgb(233 221 242 / 58%)"}:null,id:a.repoName,onClick:()=>{O.currentRepo=a},children:[a.topics&&a.topics.includes("abundance-tool")?Q.jsxs("h2",{style:{float:"right",position:"relative",top:"-10px",padding:"0"},children:[" "," "," "]}):null,Q.jsx("p",{style:{fontSize:"1em",textOverflow:"ellipsis",display:"block",overflow:"hidden",width:"80%"},children:a.repoName}),Q.jsx("img",{className:"project_image",src:a.svgURL,onError:({currentTarget:l})=>{l.onerror=null,l.src="/imgs/defaultThumbnail.svg"},alt:a.repoName}),Q.jsxs("div",{style:{display:"inline"},children:[Q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",style:{transform:"scale(.7)"},width:"16",height:"16",children:Q.jsx("path",{d:"M8 .2l4.9 15.2L0 6h16L3.1 15.4z"})}),Q.jsx("p",{style:{fontSize:".7em",display:"inline"},children:a.ranking})]})]},a.topMoleculeID+a.owner),i=a=>{let l=new Date(a.node.dateCreated).toDateString();return l=="Invalid Date"&&(l="Date Created"),Q.jsxs("div",{className:"project_list",id:a.node.id,onClick:()=>{O.currentRepo=a.node},children:[Q.jsx("p",{style:{fontSize:"1em",textOverflow:"ellipsis",display:"block",overflow:"hidden",width:"80%"},children:a.node.repoName}),Q.jsx("p",{style:{fontSize:"1em",textOverflow:"ellipsis",display:"block",overflow:"hidden",width:"50%"},children:a.node.owner}),Q.jsxs("h2",{style:{width:"20%",display:"block"},children:[" ",a.node.topics&&a.node.topics.includes("abundance-tool")?" ":null]}),Q.jsx("p",{style:{fontSize:"1em",textOverflow:"ellipsis",display:"block",overflow:"hidden",width:"70%"},children:a.node.forks}),Q.jsx("p",{style:{fontSize:"1em",textOverflow:"ellipsis",display:"block",overflow:"hidden",width:"80%"},children:l}),Q.jsxs("div",{style:{width:"10%",display:"flex",flexDirection:"row"},children:[Q.jsx("p",{style:{fontSize:"1em"},children:a.node.ranking}),Q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",style:{transform:"scale(1)"},width:"16",height:"16",children:Q.jsx("path",{d:"M8 .2l4.9 15.2L0 6h16L3.1 15.4z"})})]})]},a.node.id)};var o={byName:function(a,l){return a.repoName<l.repoName?-1:a.repoName>l.repoName?1:0},byForks:function(a,l){return l.forks-a.forks},byStars:function(a,l){return l.ranking-a.ranking},byOwnerName:function(a,l){return a.owner<l.owner?-1:a.owner>l.owner?1:0},byDateCreated:function(a,l){return new Date(a.dateCreated)>new Date(l.dateCreated)?-1:new Date(a.dateCreated)<new Date(l.dateCreated)?1:0}};const s={forks:"Forks",ranking:"#",dateCreated:"Date Created",owner:"Creator",repoName:"Name"};return Q.jsx(Q.Fragment,{children:Q.jsxs("div",{className:"project-item-div",children:[e=="list"?Q.jsx(i,{node:s}):null,n.sort(o[t]).map(a=>Q.jsx(Oy,{to:a.owner==O.currentUser?`/${a.owner}/${a.repoName}`:`/run/${a.owner}/${a.repoName}`,children:e=="list"?Q.jsx(i,{node:a}):Q.jsx(r,{node:a})},a.owner+a.repoName))]})})},L9e=({projectToShow:n,setExportPopUp:e,setProjectsToShow:t,user:r,authorizedUserOcto:i,pageDict:o})=>{const s={loading:"Loading projects...",error:"Error",noProjects:"No projects found"},[a,l]=z.useState([]),[u,c]=z.useState(""),[f,d]=z.useState(0),[h,m]=z.useState(""),[g,y]=z.useState("2024"),[p,w]=z.useState(s.loading);z.useEffect(()=>{new Of;var x;const M=async function(T){console.log("forking dummy project")},A=async()=>{l([]),o[f]=u;let T=u?"&lastKey="+u.repoName+"~"+u.owner:"&lastKey",C;if(h!=""?C="&query="+h+"&yearShow="+g:C="&query&yearShow="+g,n=="all")x="attribute=searchField"+C+"&user"+T;else if(n=="owned")x="attribute=searchField"+C+"&user="+r+T;else{if(n=="featured")return(await fetch("https://hg5gsgv9te.execute-api.us-east-2.amazonaws.com/abundance-stage/queryFeaturedProjects")).json();if(n=="liked"){const B="https://hg5gsgv9te.execute-api.us-east-2.amazonaws.com/abundance-stage/USER-TABLE?user="+r;let U=await(await fetch(B)).json();x="",U[0].likedProjects.forEach(V=>{x+="likedProjects="+V+"&"});const N="https://hg5gsgv9te.execute-api.us-east-2.amazonaws.com/abundance-stage/queryLikedProjects?"+x;return(await fetch(N)).json()}else if(n=="recents"){x="attribute=searchField"+C+"&user="+r+T;const B="https://hg5gsgv9te.execute-api.us-east-2.amazonaws.com/abundance-stage/queryRecentProjects?"+x;return(await fetch(B)).json()}}const D="https://hg5gsgv9te.execute-api.us-east-2.amazonaws.com/abundance-stage/scan-search-abundance?"+x;return(await fetch(D)).json()};A().then(T=>{l([]),w(s.loading),T.repos.length==0&&n=="owned"?(w(s.noProjects),M().then(()=>{A().then(C=>{l(C.repos)})})):T.repos.length==0?w(s.noProjects):(l(T.repos),c(T.lastKey))}).catch(T=>{alert("Error loading projects from database. Please try again later. "+T)})},[h,f,n,g]);let b=[];if(a.length>0){var v=[];a.forEach(x=>{v.push(x)}),b=[...v]}const S=x=>{x.code=="Enter"&&(m(x.target.value),d(0))};return Q.jsx(Q.Fragment,{children:Q.jsxs("div",{className:"login-content-div",children:[Q.jsxs("div",{className:"left-login-div",children:[Q.jsx("div",{className:"login-nav-item",onClick:()=>{e(!0)},children:Q.jsx("p",{children:"New project"})}),Q.jsx("div",{className:"login-nav-item"+(n=="owned"?" login-nav-item-clicked":""),onClick:x=>{t("owned")},children:Q.jsx("p",{children:"My Projects"})}),Q.jsx("div",{className:"login-nav-item"+(n=="recents"?" login-nav-item-clicked":""),onClick:()=>{t("recents")},children:Q.jsx("p",{children:" Recent Projects"})}),Q.jsx("div",{className:"login-nav-item"+(n=="liked"?" login-nav-item-clicked":""),onClick:()=>{t("liked")},children:Q.jsx("p",{children:" Liked Projects"})}),Q.jsx("div",{className:"login-nav-item"+(n=="featured"?" login-nav-item-clicked":""),onClick:()=>{t("featured")},children:Q.jsx("p",{children:" Browse Featured Projects"})}),Q.jsx("div",{className:"login-nav-item"+(n=="all"?" login-nav-item-clicked":""),onClick:()=>{t("all")},children:Q.jsx("p",{children:" Browse All Other Projects"})})]}),Q.jsxs("div",{className:"right-login-div",children:[Q.jsxs("span",{style:{fontFamily:"Roboto"},children:["Welcome to Abundance ",O.currentUser]}),Q.jsx("div",{className:"home-section",children:n=="owned"?"My Projects":n=="liked"?"My Liked Projects":n=="all"?"Browsing Projects":n=="featured"?"Featured Projects":n=="recents"?"Recent Projects":null}),Q.jsx("hr",{width:"100%",color:"#D3D3D3"}),Q.jsxs("div",{className:"search-bar-div",children:[a.length>1?Q.jsxs("div",{style:{display:"flex",flexDirection:"row",margin:"0px 10px 0px 10px"},children:[Q.jsx("button",{onClick:()=>{f>0&&d(f-1)},className:"page_back_button",children:""}),Q.jsx("button",{className:"page_forward_button",onClick:()=>{u!=""&&d(f+1)},children:""})]}):null,Q.jsx("input",{type:"text",placeholder:h,onKeyDown:x=>{S(x)},className:"menu_search searchButton",id:"project_search"},"project-search-bar"),Q.jsxs("button",{className:"list_thumb_button",children:[Q.jsx("img",{src:"/imgs/search_icon.svg",alt:"search",style:{width:"20px",color:"white",marginRight:"5px",opacity:"0.5"}}),n=="all"?Q.jsxs("label",{htmlFor:"year-by",children:[Q.jsx("img",{src:"/imgs/sort.svg",alt:"year-show",style:{width:"15px"}}),Q.jsxs("select",{className:"order_dropdown",id:"year-by",defaultValue:2024,onChange:x=>y(x.target.value),children:[Q.jsx("option",{value:"2024",children:"2024"},"2024_projects"),Q.jsx("option",{value:"2023",children:"2023"},"2023_projects"),Q.jsx("option",{value:"2022",children:"2022"},"2022_projects")]})]}):null]})]}),a.length>0?Q.jsx(k9e,{setYearShow:y,nodes:b,authorizedUserOcto:i,user:r}):p]})]})})};function F9e({tryLogin:n,exportPopUp:e,setExportPopUp:t,setIsLoggedIn:r,authorizedUserOcto:i,setAuthorizedUserOcto:o}){const s={0:null},[a,l]=z.useState("recents"),{loginWithRedirect:u,logout:c,user:f,isAuthenticated:d,isLoading:h,getAccessTokenSilently:m}=tte();z.useEffect(()=>{if(d){const y="https://n3i60kesu6.execute-api.us-east-2.amazonaws.com/prox";(async()=>{try{const w=await m(),v=await(await fetch(`${y}/api/test`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${w}`}})).json(),x=await(await fetch(`${y}/api/greet`,{headers:{Authorization:`Bearer ${w}`}})).json(),M=new Of({auth:x.message}),{data:A}=await M.request("/user");O.currentUser=A.login,O.currentUser&&(r(!0),o(M))}catch(w){console.error(w)}})()}},[d,m]);let g;return e&&i?g=Q.jsx(KQ,{setExportPopUp:t,user:f,exporting:!1}):i?g=Q.jsx(L9e,{projectToShow:a,setExportPopUp:t,setProjectsToShow:l,user:O.currentUser,authorizedUserOcto:i,pageDict:s}):g=Q.jsx(O9e,{loginWithRedirect:u,tryLogin:n}),Q.jsxs("div",{className:"login-popup",id:"projects-popup",style:{padding:"0",border:"10px solid #3e3d3d"},children:[Q.jsxs("div",{children:[" ",O.currentRepo?Q.jsx(Oy,{to:`/${O.currentRepo.owner}/${O.currentRepo.repoName}`,children:Q.jsx("button",{className:"closeButton",onClick:()=>{t(!1)},children:Q.jsx("img",{})})}):Q.jsx("button",{className:"closeButton",onClick:()=>{c({returnTo:window.location.origin})},children:Q.jsx("img",{})})]}),Q.jsx("div",{className:"top-banner",style:{margin:"35px 0 0 30px"},children:Q.jsxs("div",{id:"welcome-logo",style:{display:"flex",margin:"10px 10px",alignItems:"center"},children:[Q.jsx("img",{src:"/imgs/abundance_logo.png",alt:"logo",style:{width:"40px",height:"40px",borderRadius:"50%"}}),Q.jsx("img",{src:"/imgs/abundance_lettering.png",alt:"logo",style:{height:"20px",padding:"10px"}})]})}),g]})}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const ux="161",Vd={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},$d={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},nte=0,zP=1,rte=2,B9e=3,ite=0,W2=1,iy=2,ja=3,hc=0,yo=1,ma=2,Qu=0,yh=1,UP=2,VP=3,$P=4,ote=5,tf=100,ste=101,ate=102,HP=103,WP=104,lte=200,ute=201,cte=202,fte=203,sM=204,aM=205,dte=206,hte=207,pte=208,mte=209,gte=210,vte=211,yte=212,xte=213,bte=214,wte=0,Ste=1,_te=2,Zy=3,Ete=4,Mte=5,Cte=6,Ate=7,cx=0,Tte=1,Dte=2,Zl=0,Nte=1,Pte=2,Rte=3,eL=4,Ote=5,kte=6,jP="attached",Ite="detached",j2=300,pc=301,jf=302,Jy=303,Qy=304,hv=306,e1=1e3,po=1001,t1=1002,Zr=1003,lM=1004,z9e=1004,qd=1005,U9e=1005,gr=1006,oy=1007,V9e=1007,$l=1008,$9e=1008,Jl=1009,Lte=1010,Fte=1011,G2=1012,tL=1013,ju=1014,Is=1015,zh=1016,nL=1017,rL=1018,Af=1020,Bte=1021,ko=1023,zte=1024,Ute=1025,Tf=1026,Uh=1027,Vte=1028,iL=1029,$te=1030,oL=1031,sL=1033,m_=33776,g_=33777,v_=33778,y_=33779,GP=35840,qP=35841,XP=35842,YP=35843,aL=36196,KP=37492,ZP=37496,JP=37808,QP=37809,eR=37810,tR=37811,nR=37812,rR=37813,iR=37814,oR=37815,sR=37816,aR=37817,lR=37818,uR=37819,cR=37820,fR=37821,x_=36492,dR=36494,hR=36495,Hte=36283,pR=36284,mR=36285,gR=36286,Wte=2200,jte=2201,Gte=2202,n1=2300,r1=2301,b_=2302,oh=2400,sh=2401,i1=2402,q2=2500,lL=2501,H9e=0,W9e=1,j9e=2,uL=3e3,Df=3001,qte=3200,Xte=3201,ud=0,Yte=1,Ls="",mi="srgb",su="srgb-linear",X2="display-p3",fx="display-p3-linear",o1="linear",ur="srgb",s1="rec709",a1="p3",G9e=0,Hd=7680,q9e=7681,X9e=7682,Y9e=7683,K9e=34055,Z9e=34056,J9e=5386,Q9e=512,eVe=513,tVe=514,nVe=515,rVe=516,iVe=517,oVe=518,vR=519,Kte=512,Zte=513,Jte=514,cL=515,Qte=516,ene=517,tne=518,nne=519,l1=35044,sVe=35048,aVe=35040,lVe=35045,uVe=35049,cVe=35041,fVe=35046,dVe=35050,hVe=35042,pVe="100",yR="300 es",uM=1035,Hl=2e3,u1=2001;class du{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const o=i.indexOf(t);o!==-1&&i.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let o=0,s=i.length;o<s;o++)i[o].call(this,e);e.target=null}}}const ao=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let J$=1234567;const xh=Math.PI/180,Dg=180/Math.PI;function Hs(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(ao[n&255]+ao[n>>8&255]+ao[n>>16&255]+ao[n>>24&255]+"-"+ao[e&255]+ao[e>>8&255]+"-"+ao[e>>16&15|64]+ao[e>>24&255]+"-"+ao[t&63|128]+ao[t>>8&255]+"-"+ao[t>>16&255]+ao[t>>24&255]+ao[r&255]+ao[r>>8&255]+ao[r>>16&255]+ao[r>>24&255]).toLowerCase()}function Hr(n,e,t){return Math.max(e,Math.min(t,n))}function fL(n,e){return(n%e+e)%e}function mVe(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function gVe(n,e,t){return n!==e?(t-n)/(e-n):0}function sy(n,e,t){return(1-t)*n+t*e}function vVe(n,e,t,r){return sy(n,e,1-Math.exp(-t*r))}function yVe(n,e=1){return e-Math.abs(fL(n,e*2)-e)}function xVe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function bVe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function wVe(n,e){return n+Math.floor(Math.random()*(e-n+1))}function SVe(n,e){return n+Math.random()*(e-n)}function _Ve(n){return n*(.5-Math.random())}function EVe(n){n!==void 0&&(J$=n);let e=J$+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function MVe(n){return n*xh}function CVe(n){return n*Dg}function xR(n){return(n&n-1)===0&&n!==0}function AVe(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function cM(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function TVe(n,e,t,r,i){const o=Math.cos,s=Math.sin,a=o(t/2),l=s(t/2),u=o((e+r)/2),c=s((e+r)/2),f=o((e-r)/2),d=s((e-r)/2),h=o((r-e)/2),m=s((r-e)/2);switch(i){case"XYX":n.set(a*c,l*f,l*d,a*u);break;case"YZY":n.set(l*d,a*c,l*f,a*u);break;case"ZXZ":n.set(l*f,l*d,a*c,a*u);break;case"XZX":n.set(a*c,l*m,l*h,a*u);break;case"YXY":n.set(l*h,a*c,l*m,a*u);break;case"ZYZ":n.set(l*m,l*h,a*c,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Io(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function cn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const rne={DEG2RAD:xh,RAD2DEG:Dg,generateUUID:Hs,clamp:Hr,euclideanModulo:fL,mapLinear:mVe,inverseLerp:gVe,lerp:sy,damp:vVe,pingpong:yVe,smoothstep:xVe,smootherstep:bVe,randInt:wVe,randFloat:SVe,randFloatSpread:_Ve,seededRandom:EVe,degToRad:MVe,radToDeg:CVe,isPowerOfTwo:xR,ceilPowerOfTwo:AVe,floorPowerOfTwo:cM,setQuaternionFromProperEuler:TVe,normalize:cn,denormalize:Io};class nt{constructor(e=0,t=0){nt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Hr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),o=this.x-e.x,s=this.y-e.y;return this.x=o*r-s*i+e.x,this.y=o*i+s*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class vn{constructor(e,t,r,i,o,s,a,l,u){vn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,o,s,a,l,u)}set(e,t,r,i,o,s,a,l,u){const c=this.elements;return c[0]=e,c[1]=i,c[2]=a,c[3]=t,c[4]=o,c[5]=l,c[6]=r,c[7]=s,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,o=this.elements,s=r[0],a=r[3],l=r[6],u=r[1],c=r[4],f=r[7],d=r[2],h=r[5],m=r[8],g=i[0],y=i[3],p=i[6],w=i[1],b=i[4],v=i[7],S=i[2],x=i[5],M=i[8];return o[0]=s*g+a*w+l*S,o[3]=s*y+a*b+l*x,o[6]=s*p+a*v+l*M,o[1]=u*g+c*w+f*S,o[4]=u*y+c*b+f*x,o[7]=u*p+c*v+f*M,o[2]=d*g+h*w+m*S,o[5]=d*y+h*b+m*x,o[8]=d*p+h*v+m*M,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],c=e[8];return t*s*c-t*a*u-r*o*c+r*a*l+i*o*u-i*s*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],c=e[8],f=c*s-a*u,d=a*l-c*o,h=u*o-s*l,m=t*f+r*d+i*h;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const g=1/m;return e[0]=f*g,e[1]=(i*u-c*r)*g,e[2]=(a*r-i*s)*g,e[3]=d*g,e[4]=(c*t-i*l)*g,e[5]=(i*o-a*t)*g,e[6]=h*g,e[7]=(r*l-u*t)*g,e[8]=(s*t-r*o)*g,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,o,s,a){const l=Math.cos(o),u=Math.sin(o);return this.set(r*l,r*u,-r*(l*s+u*a)+s+e,-i*u,i*l,-i*(-u*s+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(o3.makeScale(e,t)),this}rotate(e){return this.premultiply(o3.makeRotation(-e)),this}translate(e,t){return this.premultiply(o3.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const o3=new vn;function ine(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const DVe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Rm(n,e){return new DVe[n](e)}function c1(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function one(){const n=c1("canvas");return n.style.display="block",n}const Q$={};function bh(n){n in Q$||(Q$[n]=!0,console.warn(n))}const e7=new vn().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),t7=new vn().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Tw={[su]:{transfer:o1,primaries:s1,toReference:n=>n,fromReference:n=>n},[mi]:{transfer:ur,primaries:s1,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[fx]:{transfer:o1,primaries:a1,toReference:n=>n.applyMatrix3(t7),fromReference:n=>n.applyMatrix3(e7)},[X2]:{transfer:ur,primaries:a1,toReference:n=>n.convertSRGBToLinear().applyMatrix3(t7),fromReference:n=>n.applyMatrix3(e7).convertLinearToSRGB()}},NVe=new Set([su,fx]),Gn={enabled:!0,_workingColorSpace:su,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!NVe.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=Tw[e].toReference,i=Tw[t].fromReference;return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return Tw[n].primaries},getTransfer:function(n){return n===Ls?o1:Tw[n].transfer}};function eg(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function s3(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Fp;class dL{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Fp===void 0&&(Fp=c1("canvas")),Fp.width=e.width,Fp.height=e.height;const r=Fp.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Fp}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=c1("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),o=i.data;for(let s=0;s<o.length;s++)o[s]=eg(o[s]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(eg(t[r]/255)*255):t[r]=eg(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let PVe=0;class ah{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:PVe++}),this.uuid=Hs(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let o;if(Array.isArray(i)){o=[];for(let s=0,a=i.length;s<a;s++)i[s].isDataTexture?o.push(a3(i[s].image)):o.push(a3(i[s]))}else o=a3(i);r.url=o}return t||(e.images[this.uuid]=r),r}}function a3(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?dL.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let RVe=0;class Or extends du{constructor(e=Or.DEFAULT_IMAGE,t=Or.DEFAULT_MAPPING,r=po,i=po,o=gr,s=$l,a=ko,l=Jl,u=Or.DEFAULT_ANISOTROPY,c=Ls){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:RVe++}),this.uuid=Hs(),this.name="",this.source=new ah(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=o,this.minFilter=s,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new nt(0,0),this.repeat=new nt(1,1),this.center=new nt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new vn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof c=="string"?this.colorSpace=c:(bh("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=c===Df?mi:Ls),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==j2)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case e1:e.x=e.x-Math.floor(e.x);break;case po:e.x=e.x<0?0:1;break;case t1:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case e1:e.y=e.y-Math.floor(e.y);break;case po:e.y=e.y<0?0:1;break;case t1:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return bh("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===mi?Df:uL}set encoding(e){bh("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Df?mi:Ls}}Or.DEFAULT_IMAGE=null;Or.DEFAULT_MAPPING=j2;Or.DEFAULT_ANISOTROPY=1;class Kn{constructor(e=0,t=0,r=0,i=1){Kn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,o=this.w,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i+s[12]*o,this.y=s[1]*t+s[5]*r+s[9]*i+s[13]*o,this.z=s[2]*t+s[6]*r+s[10]*i+s[14]*o,this.w=s[3]*t+s[7]*r+s[11]*i+s[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,o;const l=e.elements,u=l[0],c=l[4],f=l[8],d=l[1],h=l[5],m=l[9],g=l[2],y=l[6],p=l[10];if(Math.abs(c-d)<.01&&Math.abs(f-g)<.01&&Math.abs(m-y)<.01){if(Math.abs(c+d)<.1&&Math.abs(f+g)<.1&&Math.abs(m+y)<.1&&Math.abs(u+h+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const b=(u+1)/2,v=(h+1)/2,S=(p+1)/2,x=(c+d)/4,M=(f+g)/4,A=(m+y)/4;return b>v&&b>S?b<.01?(r=0,i=.707106781,o=.707106781):(r=Math.sqrt(b),i=x/r,o=M/r):v>S?v<.01?(r=.707106781,i=0,o=.707106781):(i=Math.sqrt(v),r=x/i,o=A/i):S<.01?(r=.707106781,i=.707106781,o=0):(o=Math.sqrt(S),r=M/o,i=A/o),this.set(r,i,o,t),this}let w=Math.sqrt((y-m)*(y-m)+(f-g)*(f-g)+(d-c)*(d-c));return Math.abs(w)<.001&&(w=1),this.x=(y-m)/w,this.y=(f-g)/w,this.z=(d-c)/w,this.w=Math.acos((u+h+p-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class sne extends du{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Kn(0,0,e,t),this.scissorTest=!1,this.viewport=new Kn(0,0,e,t);const i={width:e,height:t,depth:1};r.encoding!==void 0&&(bh("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===Df?mi:Ls),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:gr,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},r),this.texture=new Or(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps,this.texture.internalFormat=r.internalFormat,this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new ah(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Pa extends sne{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class Y2 extends Or{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Zr,this.minFilter=Zr,this.wrapR=po,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class OVe extends Pa{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new Y2(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class hL extends Or{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Zr,this.minFilter=Zr,this.wrapR=po,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class kVe extends Pa{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new hL(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class IVe extends Pa{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const o=this.texture;this.texture=[];for(let s=0;s<r;s++)this.texture[s]=o.clone(),this.texture[s].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,o=this.texture.length;i<o;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class Ii{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,o,s,a){let l=r[i+0],u=r[i+1],c=r[i+2],f=r[i+3];const d=o[s+0],h=o[s+1],m=o[s+2],g=o[s+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=c,e[t+3]=f;return}if(a===1){e[t+0]=d,e[t+1]=h,e[t+2]=m,e[t+3]=g;return}if(f!==g||l!==d||u!==h||c!==m){let y=1-a;const p=l*d+u*h+c*m+f*g,w=p>=0?1:-1,b=1-p*p;if(b>Number.EPSILON){const S=Math.sqrt(b),x=Math.atan2(S,p*w);y=Math.sin(y*x)/S,a=Math.sin(a*x)/S}const v=a*w;if(l=l*y+d*v,u=u*y+h*v,c=c*y+m*v,f=f*y+g*v,y===1-a){const S=1/Math.sqrt(l*l+u*u+c*c+f*f);l*=S,u*=S,c*=S,f*=S}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=f}static multiplyQuaternionsFlat(e,t,r,i,o,s){const a=r[i],l=r[i+1],u=r[i+2],c=r[i+3],f=o[s],d=o[s+1],h=o[s+2],m=o[s+3];return e[t]=a*m+c*f+l*h-u*d,e[t+1]=l*m+c*d+u*f-a*h,e[t+2]=u*m+c*h+a*d-l*f,e[t+3]=c*m-a*f-l*d-u*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,o=e._z,s=e._order,a=Math.cos,l=Math.sin,u=a(r/2),c=a(i/2),f=a(o/2),d=l(r/2),h=l(i/2),m=l(o/2);switch(s){case"XYZ":this._x=d*c*f+u*h*m,this._y=u*h*f-d*c*m,this._z=u*c*m+d*h*f,this._w=u*c*f-d*h*m;break;case"YXZ":this._x=d*c*f+u*h*m,this._y=u*h*f-d*c*m,this._z=u*c*m-d*h*f,this._w=u*c*f+d*h*m;break;case"ZXY":this._x=d*c*f-u*h*m,this._y=u*h*f+d*c*m,this._z=u*c*m+d*h*f,this._w=u*c*f-d*h*m;break;case"ZYX":this._x=d*c*f-u*h*m,this._y=u*h*f+d*c*m,this._z=u*c*m-d*h*f,this._w=u*c*f+d*h*m;break;case"YZX":this._x=d*c*f+u*h*m,this._y=u*h*f+d*c*m,this._z=u*c*m-d*h*f,this._w=u*c*f-d*h*m;break;case"XZY":this._x=d*c*f-u*h*m,this._y=u*h*f-d*c*m,this._z=u*c*m+d*h*f,this._w=u*c*f+d*h*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],o=t[8],s=t[1],a=t[5],l=t[9],u=t[2],c=t[6],f=t[10],d=r+a+f;if(d>0){const h=.5/Math.sqrt(d+1);this._w=.25/h,this._x=(c-l)*h,this._y=(o-u)*h,this._z=(s-i)*h}else if(r>a&&r>f){const h=2*Math.sqrt(1+r-a-f);this._w=(c-l)/h,this._x=.25*h,this._y=(i+s)/h,this._z=(o+u)/h}else if(a>f){const h=2*Math.sqrt(1+a-r-f);this._w=(o-u)/h,this._x=(i+s)/h,this._y=.25*h,this._z=(l+c)/h}else{const h=2*Math.sqrt(1+f-r-a);this._w=(s-i)/h,this._x=(o+u)/h,this._y=(l+c)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Hr(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,o=e._z,s=e._w,a=t._x,l=t._y,u=t._z,c=t._w;return this._x=r*c+s*a+i*u-o*l,this._y=i*c+s*l+o*a-r*u,this._z=o*c+s*u+r*l-i*a,this._w=s*c-r*a-i*l-o*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,o=this._z,s=this._w;let a=s*e._w+r*e._x+i*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=r,this._y=i,this._z=o,this;const l=1-a*a;if(l<=Number.EPSILON){const h=1-t;return this._w=h*s+t*this._w,this._x=h*r+t*this._x,this._y=h*i+t*this._y,this._z=h*o+t*this._z,this.normalize(),this}const u=Math.sqrt(l),c=Math.atan2(u,a),f=Math.sin((1-t)*c)/u,d=Math.sin(t*c)/u;return this._w=s*f+this._w*d,this._x=r*f+this._x*d,this._y=i*f+this._y*d,this._z=o*f+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(o),r*Math.cos(o),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class me{constructor(e=0,t=0,r=0){me.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(n7.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(n7.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*t+o[3]*r+o[6]*i,this.y=o[1]*t+o[4]*r+o[7]*i,this.z=o[2]*t+o[5]*r+o[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,o=e.elements,s=1/(o[3]*t+o[7]*r+o[11]*i+o[15]);return this.x=(o[0]*t+o[4]*r+o[8]*i+o[12])*s,this.y=(o[1]*t+o[5]*r+o[9]*i+o[13])*s,this.z=(o[2]*t+o[6]*r+o[10]*i+o[14])*s,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,o=e.x,s=e.y,a=e.z,l=e.w,u=2*(s*i-a*r),c=2*(a*t-o*i),f=2*(o*r-s*t);return this.x=t+l*u+s*f-a*c,this.y=r+l*c+a*u-o*f,this.z=i+l*f+o*c-s*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i,this.y=o[1]*t+o[5]*r+o[9]*i,this.z=o[2]*t+o[6]*r+o[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,o=e.z,s=t.x,a=t.y,l=t.z;return this.x=i*l-o*a,this.y=o*s-r*l,this.z=r*a-i*s,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return l3.copy(this).projectOnVector(e),this.sub(l3)}reflect(e){return this.sub(l3.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Hr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const l3=new me,n7=new Ii;class Vo{constructor(e=new me(1/0,1/0,1/0),t=new me(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(Va.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(Va.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Va.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const o=r.getAttribute("position");if(t===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let s=0,a=o.count;s<a;s++)e.isMesh===!0?e.getVertexPosition(s,Va):Va.fromBufferAttribute(o,s),Va.applyMatrix4(e.matrixWorld),this.expandByPoint(Va);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Dw.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),Dw.copy(r.boundingBox)),Dw.applyMatrix4(e.matrixWorld),this.union(Dw)}const i=e.children;for(let o=0,s=i.length;o<s;o++)this.expandByObject(i[o],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Va),Va.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(a0),Nw.subVectors(this.max,a0),Bp.subVectors(e.a,a0),zp.subVectors(e.b,a0),Up.subVectors(e.c,a0),Lc.subVectors(zp,Bp),Fc.subVectors(Up,zp),Md.subVectors(Bp,Up);let t=[0,-Lc.z,Lc.y,0,-Fc.z,Fc.y,0,-Md.z,Md.y,Lc.z,0,-Lc.x,Fc.z,0,-Fc.x,Md.z,0,-Md.x,-Lc.y,Lc.x,0,-Fc.y,Fc.x,0,-Md.y,Md.x,0];return!u3(t,Bp,zp,Up,Nw)||(t=[1,0,0,0,1,0,0,0,1],!u3(t,Bp,zp,Up,Nw))?!1:(Pw.crossVectors(Lc,Fc),t=[Pw.x,Pw.y,Pw.z],u3(t,Bp,zp,Up,Nw))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Va).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Va).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Tu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Tu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Tu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Tu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Tu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Tu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Tu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Tu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Tu),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Tu=[new me,new me,new me,new me,new me,new me,new me,new me],Va=new me,Dw=new Vo,Bp=new me,zp=new me,Up=new me,Lc=new me,Fc=new me,Md=new me,a0=new me,Nw=new me,Pw=new me,Cd=new me;function u3(n,e,t,r,i){for(let o=0,s=n.length-3;o<=s;o+=3){Cd.fromArray(n,o);const a=i.x*Math.abs(Cd.x)+i.y*Math.abs(Cd.y)+i.z*Math.abs(Cd.z),l=e.dot(Cd),u=t.dot(Cd),c=r.dot(Cd);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>a)return!1}return!0}const LVe=new Vo,l0=new me,c3=new me;class xo{constructor(e=new me,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):LVe.setFromPoints(e).getCenter(r);let i=0;for(let o=0,s=e.length;o<s;o++)i=Math.max(i,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;l0.subVectors(e,this.center);const t=l0.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(l0,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(c3.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(l0.copy(e.center).add(c3)),this.expandByPoint(l0.copy(e.center).sub(c3))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Du=new me,f3=new me,Rw=new me,Bc=new me,d3=new me,Ow=new me,h3=new me;class ip{constructor(e=new me,t=new me(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Du)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Du.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Du.copy(this.origin).addScaledVector(this.direction,t),Du.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){f3.copy(e).add(t).multiplyScalar(.5),Rw.copy(t).sub(e).normalize(),Bc.copy(this.origin).sub(f3);const o=e.distanceTo(t)*.5,s=-this.direction.dot(Rw),a=Bc.dot(this.direction),l=-Bc.dot(Rw),u=Bc.lengthSq(),c=Math.abs(1-s*s);let f,d,h,m;if(c>0)if(f=s*l-a,d=s*a-l,m=o*c,f>=0)if(d>=-m)if(d<=m){const g=1/c;f*=g,d*=g,h=f*(f+s*d+2*a)+d*(s*f+d+2*l)+u}else d=o,f=Math.max(0,-(s*d+a)),h=-f*f+d*(d+2*l)+u;else d=-o,f=Math.max(0,-(s*d+a)),h=-f*f+d*(d+2*l)+u;else d<=-m?(f=Math.max(0,-(-s*o+a)),d=f>0?-o:Math.min(Math.max(-o,-l),o),h=-f*f+d*(d+2*l)+u):d<=m?(f=0,d=Math.min(Math.max(-o,-l),o),h=d*(d+2*l)+u):(f=Math.max(0,-(s*o+a)),d=f>0?o:Math.min(Math.max(-o,-l),o),h=-f*f+d*(d+2*l)+u);else d=s>0?-o:o,f=Math.max(0,-(s*d+a)),h=-f*f+d*(d+2*l)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,f),i&&i.copy(f3).addScaledVector(Rw,d),h}intersectSphere(e,t){Du.subVectors(e.center,this.origin);const r=Du.dot(this.direction),i=Du.dot(Du)-r*r,o=e.radius*e.radius;if(i>o)return null;const s=Math.sqrt(o-i),a=r-s,l=r+s;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,o,s,a,l;const u=1/this.direction.x,c=1/this.direction.y,f=1/this.direction.z,d=this.origin;return u>=0?(r=(e.min.x-d.x)*u,i=(e.max.x-d.x)*u):(r=(e.max.x-d.x)*u,i=(e.min.x-d.x)*u),c>=0?(o=(e.min.y-d.y)*c,s=(e.max.y-d.y)*c):(o=(e.max.y-d.y)*c,s=(e.min.y-d.y)*c),r>s||o>i||((o>r||isNaN(r))&&(r=o),(s<i||isNaN(i))&&(i=s),f>=0?(a=(e.min.z-d.z)*f,l=(e.max.z-d.z)*f):(a=(e.max.z-d.z)*f,l=(e.min.z-d.z)*f),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Du)!==null}intersectTriangle(e,t,r,i,o){d3.subVectors(t,e),Ow.subVectors(r,e),h3.crossVectors(d3,Ow);let s=this.direction.dot(h3),a;if(s>0){if(i)return null;a=1}else if(s<0)a=-1,s=-s;else return null;Bc.subVectors(this.origin,e);const l=a*this.direction.dot(Ow.crossVectors(Bc,Ow));if(l<0)return null;const u=a*this.direction.dot(d3.cross(Bc));if(u<0||l+u>s)return null;const c=-a*Bc.dot(h3);return c<0?null:this.at(c/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Qt{constructor(e,t,r,i,o,s,a,l,u,c,f,d,h,m,g,y){Qt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,o,s,a,l,u,c,f,d,h,m,g,y)}set(e,t,r,i,o,s,a,l,u,c,f,d,h,m,g,y){const p=this.elements;return p[0]=e,p[4]=t,p[8]=r,p[12]=i,p[1]=o,p[5]=s,p[9]=a,p[13]=l,p[2]=u,p[6]=c,p[10]=f,p[14]=d,p[3]=h,p[7]=m,p[11]=g,p[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Qt().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Vp.setFromMatrixColumn(e,0).length(),o=1/Vp.setFromMatrixColumn(e,1).length(),s=1/Vp.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*o,t[5]=r[5]*o,t[6]=r[6]*o,t[7]=0,t[8]=r[8]*s,t[9]=r[9]*s,t[10]=r[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,o=e.z,s=Math.cos(r),a=Math.sin(r),l=Math.cos(i),u=Math.sin(i),c=Math.cos(o),f=Math.sin(o);if(e.order==="XYZ"){const d=s*c,h=s*f,m=a*c,g=a*f;t[0]=l*c,t[4]=-l*f,t[8]=u,t[1]=h+m*u,t[5]=d-g*u,t[9]=-a*l,t[2]=g-d*u,t[6]=m+h*u,t[10]=s*l}else if(e.order==="YXZ"){const d=l*c,h=l*f,m=u*c,g=u*f;t[0]=d+g*a,t[4]=m*a-h,t[8]=s*u,t[1]=s*f,t[5]=s*c,t[9]=-a,t[2]=h*a-m,t[6]=g+d*a,t[10]=s*l}else if(e.order==="ZXY"){const d=l*c,h=l*f,m=u*c,g=u*f;t[0]=d-g*a,t[4]=-s*f,t[8]=m+h*a,t[1]=h+m*a,t[5]=s*c,t[9]=g-d*a,t[2]=-s*u,t[6]=a,t[10]=s*l}else if(e.order==="ZYX"){const d=s*c,h=s*f,m=a*c,g=a*f;t[0]=l*c,t[4]=m*u-h,t[8]=d*u+g,t[1]=l*f,t[5]=g*u+d,t[9]=h*u-m,t[2]=-u,t[6]=a*l,t[10]=s*l}else if(e.order==="YZX"){const d=s*l,h=s*u,m=a*l,g=a*u;t[0]=l*c,t[4]=g-d*f,t[8]=m*f+h,t[1]=f,t[5]=s*c,t[9]=-a*c,t[2]=-u*c,t[6]=h*f+m,t[10]=d-g*f}else if(e.order==="XZY"){const d=s*l,h=s*u,m=a*l,g=a*u;t[0]=l*c,t[4]=-f,t[8]=u*c,t[1]=d*f+g,t[5]=s*c,t[9]=h*f-m,t[2]=m*f-h,t[6]=a*c,t[10]=g*f+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(FVe,e,BVe)}lookAt(e,t,r){const i=this.elements;return Cs.subVectors(e,t),Cs.lengthSq()===0&&(Cs.z=1),Cs.normalize(),zc.crossVectors(r,Cs),zc.lengthSq()===0&&(Math.abs(r.z)===1?Cs.x+=1e-4:Cs.z+=1e-4,Cs.normalize(),zc.crossVectors(r,Cs)),zc.normalize(),kw.crossVectors(Cs,zc),i[0]=zc.x,i[4]=kw.x,i[8]=Cs.x,i[1]=zc.y,i[5]=kw.y,i[9]=Cs.y,i[2]=zc.z,i[6]=kw.z,i[10]=Cs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,o=this.elements,s=r[0],a=r[4],l=r[8],u=r[12],c=r[1],f=r[5],d=r[9],h=r[13],m=r[2],g=r[6],y=r[10],p=r[14],w=r[3],b=r[7],v=r[11],S=r[15],x=i[0],M=i[4],A=i[8],T=i[12],C=i[1],D=i[5],R=i[9],B=i[13],F=i[2],U=i[6],N=i[10],I=i[14],V=i[3],L=i[7],X=i[11],Z=i[15];return o[0]=s*x+a*C+l*F+u*V,o[4]=s*M+a*D+l*U+u*L,o[8]=s*A+a*R+l*N+u*X,o[12]=s*T+a*B+l*I+u*Z,o[1]=c*x+f*C+d*F+h*V,o[5]=c*M+f*D+d*U+h*L,o[9]=c*A+f*R+d*N+h*X,o[13]=c*T+f*B+d*I+h*Z,o[2]=m*x+g*C+y*F+p*V,o[6]=m*M+g*D+y*U+p*L,o[10]=m*A+g*R+y*N+p*X,o[14]=m*T+g*B+y*I+p*Z,o[3]=w*x+b*C+v*F+S*V,o[7]=w*M+b*D+v*U+S*L,o[11]=w*A+b*R+v*N+S*X,o[15]=w*T+b*B+v*I+S*Z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],o=e[12],s=e[1],a=e[5],l=e[9],u=e[13],c=e[2],f=e[6],d=e[10],h=e[14],m=e[3],g=e[7],y=e[11],p=e[15];return m*(+o*l*f-i*u*f-o*a*d+r*u*d+i*a*h-r*l*h)+g*(+t*l*h-t*u*d+o*s*d-i*s*h+i*u*c-o*l*c)+y*(+t*u*f-t*a*h-o*s*f+r*s*h+o*a*c-r*u*c)+p*(-i*a*c-t*l*f+t*a*d+i*s*f-r*s*d+r*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],c=e[8],f=e[9],d=e[10],h=e[11],m=e[12],g=e[13],y=e[14],p=e[15],w=f*y*u-g*d*u+g*l*h-a*y*h-f*l*p+a*d*p,b=m*d*u-c*y*u-m*l*h+s*y*h+c*l*p-s*d*p,v=c*g*u-m*f*u+m*a*h-s*g*h-c*a*p+s*f*p,S=m*f*l-c*g*l-m*a*d+s*g*d+c*a*y-s*f*y,x=t*w+r*b+i*v+o*S;if(x===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const M=1/x;return e[0]=w*M,e[1]=(g*d*o-f*y*o-g*i*h+r*y*h+f*i*p-r*d*p)*M,e[2]=(a*y*o-g*l*o+g*i*u-r*y*u-a*i*p+r*l*p)*M,e[3]=(f*l*o-a*d*o-f*i*u+r*d*u+a*i*h-r*l*h)*M,e[4]=b*M,e[5]=(c*y*o-m*d*o+m*i*h-t*y*h-c*i*p+t*d*p)*M,e[6]=(m*l*o-s*y*o-m*i*u+t*y*u+s*i*p-t*l*p)*M,e[7]=(s*d*o-c*l*o+c*i*u-t*d*u-s*i*h+t*l*h)*M,e[8]=v*M,e[9]=(m*f*o-c*g*o-m*r*h+t*g*h+c*r*p-t*f*p)*M,e[10]=(s*g*o-m*a*o+m*r*u-t*g*u-s*r*p+t*a*p)*M,e[11]=(c*a*o-s*f*o-c*r*u+t*f*u+s*r*h-t*a*h)*M,e[12]=S*M,e[13]=(c*g*i-m*f*i+m*r*d-t*g*d-c*r*y+t*f*y)*M,e[14]=(m*a*i-s*g*i-m*r*l+t*g*l+s*r*y-t*a*y)*M,e[15]=(s*f*i-c*a*i+c*r*l-t*f*l-s*r*d+t*a*d)*M,this}scale(e){const t=this.elements,r=e.x,i=e.y,o=e.z;return t[0]*=r,t[4]*=i,t[8]*=o,t[1]*=r,t[5]*=i,t[9]*=o,t[2]*=r,t[6]*=i,t[10]*=o,t[3]*=r,t[7]*=i,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),o=1-r,s=e.x,a=e.y,l=e.z,u=o*s,c=o*a;return this.set(u*s+r,u*a-i*l,u*l+i*a,0,u*a+i*l,c*a+r,c*l-i*s,0,u*l-i*a,c*l+i*s,o*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,o,s){return this.set(1,r,o,0,e,1,s,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,o=t._x,s=t._y,a=t._z,l=t._w,u=o+o,c=s+s,f=a+a,d=o*u,h=o*c,m=o*f,g=s*c,y=s*f,p=a*f,w=l*u,b=l*c,v=l*f,S=r.x,x=r.y,M=r.z;return i[0]=(1-(g+p))*S,i[1]=(h+v)*S,i[2]=(m-b)*S,i[3]=0,i[4]=(h-v)*x,i[5]=(1-(d+p))*x,i[6]=(y+w)*x,i[7]=0,i[8]=(m+b)*M,i[9]=(y-w)*M,i[10]=(1-(d+g))*M,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let o=Vp.set(i[0],i[1],i[2]).length();const s=Vp.set(i[4],i[5],i[6]).length(),a=Vp.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),e.x=i[12],e.y=i[13],e.z=i[14],$a.copy(this);const u=1/o,c=1/s,f=1/a;return $a.elements[0]*=u,$a.elements[1]*=u,$a.elements[2]*=u,$a.elements[4]*=c,$a.elements[5]*=c,$a.elements[6]*=c,$a.elements[8]*=f,$a.elements[9]*=f,$a.elements[10]*=f,t.setFromRotationMatrix($a),r.x=o,r.y=s,r.z=a,this}makePerspective(e,t,r,i,o,s,a=Hl){const l=this.elements,u=2*o/(t-e),c=2*o/(r-i),f=(t+e)/(t-e),d=(r+i)/(r-i);let h,m;if(a===Hl)h=-(s+o)/(s-o),m=-2*s*o/(s-o);else if(a===u1)h=-s/(s-o),m=-s*o/(s-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=c,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=h,l[14]=m,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,o,s,a=Hl){const l=this.elements,u=1/(t-e),c=1/(r-i),f=1/(s-o),d=(t+e)*u,h=(r+i)*c;let m,g;if(a===Hl)m=(s+o)*f,g=-2*f;else if(a===u1)m=o*f,g=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-d,l[1]=0,l[5]=2*c,l[9]=0,l[13]=-h,l[2]=0,l[6]=0,l[10]=g,l[14]=-m,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const Vp=new me,$a=new Qt,FVe=new me(0,0,0),BVe=new me(1,1,1),zc=new me,kw=new me,Cs=new me,r7=new Qt,i7=new Ii;class dx{constructor(e=0,t=0,r=0,i=dx.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,o=i[0],s=i[4],a=i[8],l=i[1],u=i[5],c=i[9],f=i[2],d=i[6],h=i[10];switch(t){case"XYZ":this._y=Math.asin(Hr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(d,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Hr(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,h),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-f,o),this._z=0);break;case"ZXY":this._x=Math.asin(Hr(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-f,h),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-Hr(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-s,u));break;case"YZX":this._z=Math.asin(Hr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-f,o)):(this._x=0,this._y=Math.atan2(a,h));break;case"XZY":this._z=Math.asin(-Hr(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(d,u),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return r7.makeRotationFromQuaternion(e),this.setFromRotationMatrix(r7,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return i7.setFromEuler(this),this.setFromQuaternion(i7,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}dx.DEFAULT_ORDER="XYZ";class wh{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let zVe=0;const o7=new me,$p=new Ii,Nu=new Qt,Iw=new me,u0=new me,UVe=new me,VVe=new Ii,s7=new me(1,0,0),a7=new me(0,1,0),l7=new me(0,0,1),$Ve={type:"added"},HVe={type:"removed"};class Dn extends du{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:zVe++}),this.uuid=Hs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Dn.DEFAULT_UP.clone();const e=new me,t=new dx,r=new Ii,i=new me(1,1,1);function o(){r.setFromEuler(t,!1)}function s(){t.setFromQuaternion(r,void 0,!1)}t._onChange(o),r._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Qt},normalMatrix:{value:new vn}}),this.matrix=new Qt,this.matrixWorld=new Qt,this.matrixAutoUpdate=Dn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Dn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new wh,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return $p.setFromAxisAngle(e,t),this.quaternion.multiply($p),this}rotateOnWorldAxis(e,t){return $p.setFromAxisAngle(e,t),this.quaternion.premultiply($p),this}rotateX(e){return this.rotateOnAxis(s7,e)}rotateY(e){return this.rotateOnAxis(a7,e)}rotateZ(e){return this.rotateOnAxis(l7,e)}translateOnAxis(e,t){return o7.copy(e).applyQuaternion(this.quaternion),this.position.add(o7.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(s7,e)}translateY(e){return this.translateOnAxis(a7,e)}translateZ(e){return this.translateOnAxis(l7,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Nu.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?Iw.copy(e):Iw.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),u0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Nu.lookAt(u0,Iw,this.up):Nu.lookAt(Iw,u0,this.up),this.quaternion.setFromRotationMatrix(Nu),i&&(Nu.extractRotation(i.matrixWorld),$p.setFromRotationMatrix(Nu),this.quaternion.premultiply($p.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent($Ve)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(HVe)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Nu.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Nu.multiply(e.parent.matrixWorld)),e.applyMatrix4(Nu),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const s=this.children[r].getObjectByProperty(e,t);if(s!==void 0)return s}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let o=0,s=i.length;o<s;o++)i[o].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(u0,e,UVe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(u0,VVe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const o=t[r];(o.matrixWorldAutoUpdate===!0||e===!0)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let o=0,s=i.length;o<s;o++){const a=i[o];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function o(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=o(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const f=l[u];o(e.shapes,f)}else o(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(o(e.materials,this.material[l]));i.material=a}else i.material=o(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(o(e.animations,l))}}if(t){const a=s(e.geometries),l=s(e.materials),u=s(e.textures),c=s(e.images),f=s(e.shapes),d=s(e.skeletons),h=s(e.animations),m=s(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),c.length>0&&(r.images=c),f.length>0&&(r.shapes=f),d.length>0&&(r.skeletons=d),h.length>0&&(r.animations=h),m.length>0&&(r.nodes=m)}return r.object=i,r;function s(a){const l=[];for(const u in a){const c=a[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Dn.DEFAULT_UP=new me(0,1,0);Dn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Dn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ha=new me,Pu=new me,p3=new me,Ru=new me,Hp=new me,Wp=new me,u7=new me,m3=new me,g3=new me,v3=new me;class Fs{constructor(e=new me,t=new me,r=new me){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Ha.subVectors(e,t),i.cross(Ha);const o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}static getBarycoord(e,t,r,i,o){Ha.subVectors(i,t),Pu.subVectors(r,t),p3.subVectors(e,t);const s=Ha.dot(Ha),a=Ha.dot(Pu),l=Ha.dot(p3),u=Pu.dot(Pu),c=Pu.dot(p3),f=s*u-a*a;if(f===0)return o.set(0,0,0),null;const d=1/f,h=(u*l-a*c)*d,m=(s*c-a*l)*d;return o.set(1-h-m,m,h)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Ru)===null?!1:Ru.x>=0&&Ru.y>=0&&Ru.x+Ru.y<=1}static getInterpolation(e,t,r,i,o,s,a,l){return this.getBarycoord(e,t,r,i,Ru)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(o,Ru.x),l.addScaledVector(s,Ru.y),l.addScaledVector(a,Ru.z),l)}static isFrontFacing(e,t,r,i){return Ha.subVectors(r,t),Pu.subVectors(e,t),Ha.cross(Pu).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ha.subVectors(this.c,this.b),Pu.subVectors(this.a,this.b),Ha.cross(Pu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Fs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Fs.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,i,o){return Fs.getInterpolation(e,this.a,this.b,this.c,t,r,i,o)}containsPoint(e){return Fs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Fs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,o=this.c;let s,a;Hp.subVectors(i,r),Wp.subVectors(o,r),m3.subVectors(e,r);const l=Hp.dot(m3),u=Wp.dot(m3);if(l<=0&&u<=0)return t.copy(r);g3.subVectors(e,i);const c=Hp.dot(g3),f=Wp.dot(g3);if(c>=0&&f<=c)return t.copy(i);const d=l*f-c*u;if(d<=0&&l>=0&&c<=0)return s=l/(l-c),t.copy(r).addScaledVector(Hp,s);v3.subVectors(e,o);const h=Hp.dot(v3),m=Wp.dot(v3);if(m>=0&&h<=m)return t.copy(o);const g=h*u-l*m;if(g<=0&&u>=0&&m<=0)return a=u/(u-m),t.copy(r).addScaledVector(Wp,a);const y=c*m-h*f;if(y<=0&&f-c>=0&&h-m>=0)return u7.subVectors(o,i),a=(f-c)/(f-c+(h-m)),t.copy(i).addScaledVector(u7,a);const p=1/(y+g+d);return s=g*p,a=d*p,t.copy(r).addScaledVector(Hp,s).addScaledVector(Wp,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const ane={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Uc={h:0,s:0,l:0},Lw={h:0,s:0,l:0};function y3(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class gt{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=mi){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Gn.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=Gn.workingColorSpace){return this.r=e,this.g=t,this.b=r,Gn.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=Gn.workingColorSpace){if(e=fL(e,1),t=Hr(t,0,1),r=Hr(r,0,1),t===0)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+t):r+t-r*t,s=2*r-o;this.r=y3(s,o,e+1/3),this.g=y3(s,o,e),this.b=y3(s,o,e-1/3)}return Gn.toWorkingColorSpace(this,i),this}setStyle(e,t=mi){function r(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const s=i[1],a=i[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,t);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,t);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=i[1],s=o.length;if(s===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,t);if(s===6)return this.setHex(parseInt(o,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=mi){const r=ane[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=eg(e.r),this.g=eg(e.g),this.b=eg(e.b),this}copyLinearToSRGB(e){return this.r=s3(e.r),this.g=s3(e.g),this.b=s3(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=mi){return Gn.fromWorkingColorSpace(lo.copy(this),e),Math.round(Hr(lo.r*255,0,255))*65536+Math.round(Hr(lo.g*255,0,255))*256+Math.round(Hr(lo.b*255,0,255))}getHexString(e=mi){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Gn.workingColorSpace){Gn.fromWorkingColorSpace(lo.copy(this),t);const r=lo.r,i=lo.g,o=lo.b,s=Math.max(r,i,o),a=Math.min(r,i,o);let l,u;const c=(a+s)/2;if(a===s)l=0,u=0;else{const f=s-a;switch(u=c<=.5?f/(s+a):f/(2-s-a),s){case r:l=(i-o)/f+(i<o?6:0);break;case i:l=(o-r)/f+2;break;case o:l=(r-i)/f+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,t=Gn.workingColorSpace){return Gn.fromWorkingColorSpace(lo.copy(this),t),e.r=lo.r,e.g=lo.g,e.b=lo.b,e}getStyle(e=mi){Gn.fromWorkingColorSpace(lo.copy(this),e);const t=lo.r,r=lo.g,i=lo.b;return e!==mi?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(Uc),this.setHSL(Uc.h+e,Uc.s+t,Uc.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Uc),e.getHSL(Lw);const r=sy(Uc.h,Lw.h,t),i=sy(Uc.s,Lw.s,t),o=sy(Uc.l,Lw.l,t);return this.setHSL(r,i,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,o=e.elements;return this.r=o[0]*t+o[3]*r+o[6]*i,this.g=o[1]*t+o[4]*r+o[7]*i,this.b=o[2]*t+o[5]*r+o[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const lo=new gt;gt.NAMES=ane;let WVe=0;class Ji extends du{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:WVe++}),this.uuid=Hs(),this.name="",this.type="Material",this.blending=yh,this.side=hc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=sM,this.blendDst=aM,this.blendEquation=tf,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new gt(0,0,0),this.blendAlpha=0,this.depthFunc=Zy,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=vR,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Hd,this.stencilZFail=Hd,this.stencilZPass=Hd,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==yh&&(r.blending=this.blending),this.side!==hc&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==sM&&(r.blendSrc=this.blendSrc),this.blendDst!==aM&&(r.blendDst=this.blendDst),this.blendEquation!==tf&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==Zy&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==vR&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Hd&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Hd&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Hd&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(o){const s=[];for(const a in o){const l=o[a];delete l.metadata,s.push(l)}return s}if(t){const o=i(e.textures),s=i(e.images);o.length>0&&(r.textures=o),s.length>0&&(r.images=s)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let o=0;o!==i;++o)r[o]=t[o].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class cd extends Ji{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new gt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=cx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const zu=jVe();function jVe(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(r[l]=1024>>-u-14,r[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(r[l]=u+15<<10,r[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const o=new Uint32Array(2048),s=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,c=0;for(;!(u&8388608);)u<<=1,c-=8388608;u&=-8388609,c+=947912704,o[l]=u|c}for(let l=1024;l<2048;++l)o[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:o,exponentTable:s,offsetTable:a}}function es(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Hr(n,-65504,65504),zu.floatView[0]=n;const e=zu.uint32View[0],t=e>>23&511;return zu.baseTable[t]+((e&8388607)>>zu.shiftTable[t])}function F0(n){const e=n>>10;return zu.uint32View[0]=zu.mantissaTable[zu.offsetTable[e]+(n&1023)]+zu.exponentTable[e],zu.floatView[0]}const GVe={toHalfFloat:es,fromHalfFloat:F0},ii=new me,Fw=new nt;class $n{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=l1,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Is,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return bh("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,o=this.itemSize;i<o;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)Fw.fromBufferAttribute(this,t),Fw.applyMatrix3(e),this.setXY(t,Fw.x,Fw.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)ii.fromBufferAttribute(this,t),ii.applyMatrix3(e),this.setXYZ(t,ii.x,ii.y,ii.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)ii.fromBufferAttribute(this,t),ii.applyMatrix4(e),this.setXYZ(t,ii.x,ii.y,ii.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)ii.fromBufferAttribute(this,t),ii.applyNormalMatrix(e),this.setXYZ(t,ii.x,ii.y,ii.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)ii.fromBufferAttribute(this,t),ii.transformDirection(e),this.setXYZ(t,ii.x,ii.y,ii.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=Io(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=cn(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Io(t,this.array)),t}setX(e,t){return this.normalized&&(t=cn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Io(t,this.array)),t}setY(e,t){return this.normalized&&(t=cn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Io(t,this.array)),t}setZ(e,t){return this.normalized&&(t=cn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Io(t,this.array)),t}setW(e,t){return this.normalized&&(t=cn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=cn(t,this.array),r=cn(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=cn(t,this.array),r=cn(r,this.array),i=cn(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,o){return e*=this.itemSize,this.normalized&&(t=cn(t,this.array),r=cn(r,this.array),i=cn(i,this.array),o=cn(o,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==l1&&(e.usage=this.usage),e}}class qVe extends $n{constructor(e,t,r){super(new Int8Array(e),t,r)}}class XVe extends $n{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class YVe extends $n{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class KVe extends $n{constructor(e,t,r){super(new Int16Array(e),t,r)}}class pL extends $n{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class ZVe extends $n{constructor(e,t,r){super(new Int32Array(e),t,r)}}class mL extends $n{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class JVe extends $n{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=F0(this.array[e*this.itemSize]);return this.normalized&&(t=Io(t,this.array)),t}setX(e,t){return this.normalized&&(t=cn(t,this.array)),this.array[e*this.itemSize]=es(t),this}getY(e){let t=F0(this.array[e*this.itemSize+1]);return this.normalized&&(t=Io(t,this.array)),t}setY(e,t){return this.normalized&&(t=cn(t,this.array)),this.array[e*this.itemSize+1]=es(t),this}getZ(e){let t=F0(this.array[e*this.itemSize+2]);return this.normalized&&(t=Io(t,this.array)),t}setZ(e,t){return this.normalized&&(t=cn(t,this.array)),this.array[e*this.itemSize+2]=es(t),this}getW(e){let t=F0(this.array[e*this.itemSize+3]);return this.normalized&&(t=Io(t,this.array)),t}setW(e,t){return this.normalized&&(t=cn(t,this.array)),this.array[e*this.itemSize+3]=es(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=cn(t,this.array),r=cn(r,this.array)),this.array[e+0]=es(t),this.array[e+1]=es(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=cn(t,this.array),r=cn(r,this.array),i=cn(i,this.array)),this.array[e+0]=es(t),this.array[e+1]=es(r),this.array[e+2]=es(i),this}setXYZW(e,t,r,i,o){return e*=this.itemSize,this.normalized&&(t=cn(t,this.array),r=cn(r,this.array),i=cn(i,this.array),o=cn(o,this.array)),this.array[e+0]=es(t),this.array[e+1]=es(r),this.array[e+2]=es(i),this.array[e+3]=es(o),this}}class Rt extends $n{constructor(e,t,r){super(new Float32Array(e),t,r)}}class QVe extends $n{constructor(e,t,r){super(new Float64Array(e),t,r)}}let e$e=0;const la=new Qt,x3=new Dn,jp=new me,As=new Vo,c0=new Vo,Ti=new me;class sn extends du{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:e$e++}),this.uuid=Hs(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(ine(e)?mL:pL)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const o=new vn().getNormalMatrix(e);r.applyNormalMatrix(o),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return la.makeRotationFromQuaternion(e),this.applyMatrix4(la),this}rotateX(e){return la.makeRotationX(e),this.applyMatrix4(la),this}rotateY(e){return la.makeRotationY(e),this.applyMatrix4(la),this}rotateZ(e){return la.makeRotationZ(e),this.applyMatrix4(la),this}translate(e,t,r){return la.makeTranslation(e,t,r),this.applyMatrix4(la),this}scale(e,t,r){return la.makeScale(e,t,r),this.applyMatrix4(la),this}lookAt(e){return x3.lookAt(e),x3.updateMatrix(),this.applyMatrix4(x3.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(jp).negate(),this.translate(jp.x,jp.y,jp.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const o=e[r];t.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new Rt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Vo);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new me(-1/0,-1/0,-1/0),new me(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const o=t[r];As.setFromBufferAttribute(o),this.morphTargetsRelative?(Ti.addVectors(this.boundingBox.min,As.min),this.boundingBox.expandByPoint(Ti),Ti.addVectors(this.boundingBox.max,As.max),this.boundingBox.expandByPoint(Ti)):(this.boundingBox.expandByPoint(As.min),this.boundingBox.expandByPoint(As.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new xo);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new me,1/0);return}if(e){const r=this.boundingSphere.center;if(As.setFromBufferAttribute(e),t)for(let o=0,s=t.length;o<s;o++){const a=t[o];c0.setFromBufferAttribute(a),this.morphTargetsRelative?(Ti.addVectors(As.min,c0.min),As.expandByPoint(Ti),Ti.addVectors(As.max,c0.max),As.expandByPoint(Ti)):(As.expandByPoint(c0.min),As.expandByPoint(c0.max))}As.getCenter(r);let i=0;for(let o=0,s=e.count;o<s;o++)Ti.fromBufferAttribute(e,o),i=Math.max(i,r.distanceToSquared(Ti));if(t)for(let o=0,s=t.length;o<s;o++){const a=t[o],l=this.morphTargetsRelative;for(let u=0,c=a.count;u<c;u++)Ti.fromBufferAttribute(a,u),l&&(jp.fromBufferAttribute(e,u),Ti.add(jp)),i=Math.max(i,r.distanceToSquared(Ti))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,o=t.normal.array,s=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new $n(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,u=[],c=[];for(let C=0;C<a;C++)u[C]=new me,c[C]=new me;const f=new me,d=new me,h=new me,m=new nt,g=new nt,y=new nt,p=new me,w=new me;function b(C,D,R){f.fromArray(i,C*3),d.fromArray(i,D*3),h.fromArray(i,R*3),m.fromArray(s,C*2),g.fromArray(s,D*2),y.fromArray(s,R*2),d.sub(f),h.sub(f),g.sub(m),y.sub(m);const B=1/(g.x*y.y-y.x*g.y);isFinite(B)&&(p.copy(d).multiplyScalar(y.y).addScaledVector(h,-g.y).multiplyScalar(B),w.copy(h).multiplyScalar(g.x).addScaledVector(d,-y.x).multiplyScalar(B),u[C].add(p),u[D].add(p),u[R].add(p),c[C].add(w),c[D].add(w),c[R].add(w))}let v=this.groups;v.length===0&&(v=[{start:0,count:r.length}]);for(let C=0,D=v.length;C<D;++C){const R=v[C],B=R.start,F=R.count;for(let U=B,N=B+F;U<N;U+=3)b(r[U+0],r[U+1],r[U+2])}const S=new me,x=new me,M=new me,A=new me;function T(C){M.fromArray(o,C*3),A.copy(M);const D=u[C];S.copy(D),S.sub(M.multiplyScalar(M.dot(D))).normalize(),x.crossVectors(A,D);const B=x.dot(c[C])<0?-1:1;l[C*4]=S.x,l[C*4+1]=S.y,l[C*4+2]=S.z,l[C*4+3]=B}for(let C=0,D=v.length;C<D;++C){const R=v[C],B=R.start,F=R.count;for(let U=B,N=B+F;U<N;U+=3)T(r[U+0]),T(r[U+1]),T(r[U+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new $n(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let d=0,h=r.count;d<h;d++)r.setXYZ(d,0,0,0);const i=new me,o=new me,s=new me,a=new me,l=new me,u=new me,c=new me,f=new me;if(e)for(let d=0,h=e.count;d<h;d+=3){const m=e.getX(d+0),g=e.getX(d+1),y=e.getX(d+2);i.fromBufferAttribute(t,m),o.fromBufferAttribute(t,g),s.fromBufferAttribute(t,y),c.subVectors(s,o),f.subVectors(i,o),c.cross(f),a.fromBufferAttribute(r,m),l.fromBufferAttribute(r,g),u.fromBufferAttribute(r,y),a.add(c),l.add(c),u.add(c),r.setXYZ(m,a.x,a.y,a.z),r.setXYZ(g,l.x,l.y,l.z),r.setXYZ(y,u.x,u.y,u.z)}else for(let d=0,h=t.count;d<h;d+=3)i.fromBufferAttribute(t,d+0),o.fromBufferAttribute(t,d+1),s.fromBufferAttribute(t,d+2),c.subVectors(s,o),f.subVectors(i,o),c.cross(f),r.setXYZ(d+0,c.x,c.y,c.z),r.setXYZ(d+1,c.x,c.y,c.z),r.setXYZ(d+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Ti.fromBufferAttribute(e,t),Ti.normalize(),e.setXYZ(t,Ti.x,Ti.y,Ti.z)}toNonIndexed(){function e(a,l){const u=a.array,c=a.itemSize,f=a.normalized,d=new u.constructor(l.length*c);let h=0,m=0;for(let g=0,y=l.length;g<y;g++){a.isInterleavedBufferAttribute?h=l[g]*a.data.stride+a.offset:h=l[g]*c;for(let p=0;p<c;p++)d[m++]=u[h++]}return new $n(d,c,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new sn,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],u=e(l,r);t.setAttribute(a,u)}const o=this.morphAttributes;for(const a in o){const l=[],u=o[a];for(let c=0,f=u.length;c<f;c++){const d=u[c],h=e(d,r);l.push(h)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,l=s.length;a<l;a++){const u=s[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let o=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let f=0,d=u.length;f<d;f++){const h=u[f];c.push(h.toJSON(e.data))}c.length>0&&(i[l]=c,o=!0)}o&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const u in i){const c=i[u];this.setAttribute(u,c.clone(t))}const o=e.morphAttributes;for(const u in o){const c=[],f=o[u];for(let d=0,h=f.length;d<h;d++)c.push(f[d].clone(t));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let u=0,c=s.length;u<c;u++){const f=s[u];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const c7=new Qt,Ad=new ip,Bw=new xo,f7=new me,Gp=new me,qp=new me,Xp=new me,b3=new me,zw=new me,Uw=new nt,Vw=new nt,$w=new nt,d7=new me,h7=new me,p7=new me,Hw=new me,Ww=new me;class ui extends Dn{constructor(e=new sn,t=new cd){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=i.length;o<s;o++){const a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,o=r.morphAttributes.position,s=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(o&&a){zw.set(0,0,0);for(let l=0,u=o.length;l<u;l++){const c=a[l],f=o[l];c!==0&&(b3.fromBufferAttribute(f,e),s?zw.addScaledVector(b3,c):zw.addScaledVector(b3.sub(t),c))}t.add(zw)}return t}raycast(e,t){const r=this.geometry,i=this.material,o=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),Bw.copy(r.boundingSphere),Bw.applyMatrix4(o),Ad.copy(e.ray).recast(e.near),!(Bw.containsPoint(Ad.origin)===!1&&(Ad.intersectSphere(Bw,f7)===null||Ad.origin.distanceToSquared(f7)>(e.far-e.near)**2))&&(c7.copy(o).invert(),Ad.copy(e.ray).applyMatrix4(c7),!(r.boundingBox!==null&&Ad.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,Ad)))}_computeIntersections(e,t,r){let i;const o=this.geometry,s=this.material,a=o.index,l=o.attributes.position,u=o.attributes.uv,c=o.attributes.uv1,f=o.attributes.normal,d=o.groups,h=o.drawRange;if(a!==null)if(Array.isArray(s))for(let m=0,g=d.length;m<g;m++){const y=d[m],p=s[y.materialIndex],w=Math.max(y.start,h.start),b=Math.min(a.count,Math.min(y.start+y.count,h.start+h.count));for(let v=w,S=b;v<S;v+=3){const x=a.getX(v),M=a.getX(v+1),A=a.getX(v+2);i=jw(this,p,e,r,u,c,f,x,M,A),i&&(i.faceIndex=Math.floor(v/3),i.face.materialIndex=y.materialIndex,t.push(i))}}else{const m=Math.max(0,h.start),g=Math.min(a.count,h.start+h.count);for(let y=m,p=g;y<p;y+=3){const w=a.getX(y),b=a.getX(y+1),v=a.getX(y+2);i=jw(this,s,e,r,u,c,f,w,b,v),i&&(i.faceIndex=Math.floor(y/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(s))for(let m=0,g=d.length;m<g;m++){const y=d[m],p=s[y.materialIndex],w=Math.max(y.start,h.start),b=Math.min(l.count,Math.min(y.start+y.count,h.start+h.count));for(let v=w,S=b;v<S;v+=3){const x=v,M=v+1,A=v+2;i=jw(this,p,e,r,u,c,f,x,M,A),i&&(i.faceIndex=Math.floor(v/3),i.face.materialIndex=y.materialIndex,t.push(i))}}else{const m=Math.max(0,h.start),g=Math.min(l.count,h.start+h.count);for(let y=m,p=g;y<p;y+=3){const w=y,b=y+1,v=y+2;i=jw(this,s,e,r,u,c,f,w,b,v),i&&(i.faceIndex=Math.floor(y/3),t.push(i))}}}}function t$e(n,e,t,r,i,o,s,a){let l;if(e.side===yo?l=r.intersectTriangle(s,o,i,!0,a):l=r.intersectTriangle(i,o,s,e.side===hc,a),l===null)return null;Ww.copy(a),Ww.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(Ww);return u<t.near||u>t.far?null:{distance:u,point:Ww.clone(),object:n}}function jw(n,e,t,r,i,o,s,a,l,u){n.getVertexPosition(a,Gp),n.getVertexPosition(l,qp),n.getVertexPosition(u,Xp);const c=t$e(n,e,t,r,Gp,qp,Xp,Hw);if(c){i&&(Uw.fromBufferAttribute(i,a),Vw.fromBufferAttribute(i,l),$w.fromBufferAttribute(i,u),c.uv=Fs.getInterpolation(Hw,Gp,qp,Xp,Uw,Vw,$w,new nt)),o&&(Uw.fromBufferAttribute(o,a),Vw.fromBufferAttribute(o,l),$w.fromBufferAttribute(o,u),c.uv1=Fs.getInterpolation(Hw,Gp,qp,Xp,Uw,Vw,$w,new nt),c.uv2=c.uv1),s&&(d7.fromBufferAttribute(s,a),h7.fromBufferAttribute(s,l),p7.fromBufferAttribute(s,u),c.normal=Fs.getInterpolation(Hw,Gp,qp,Xp,d7,h7,p7,new me),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));const f={a,b:l,c:u,normal:new me,materialIndex:0};Fs.getNormal(Gp,qp,Xp,f.normal),c.face=f}return c}class op extends sn{constructor(e=1,t=1,r=1,i=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:o,depthSegments:s};const a=this;i=Math.floor(i),o=Math.floor(o),s=Math.floor(s);const l=[],u=[],c=[],f=[];let d=0,h=0;m("z","y","x",-1,-1,r,t,e,s,o,0),m("z","y","x",1,-1,r,t,-e,s,o,1),m("x","z","y",1,1,e,r,t,i,s,2),m("x","z","y",1,-1,e,r,-t,i,s,3),m("x","y","z",1,-1,e,t,r,i,o,4),m("x","y","z",-1,-1,e,t,-r,i,o,5),this.setIndex(l),this.setAttribute("position",new Rt(u,3)),this.setAttribute("normal",new Rt(c,3)),this.setAttribute("uv",new Rt(f,2));function m(g,y,p,w,b,v,S,x,M,A,T){const C=v/M,D=S/A,R=v/2,B=S/2,F=x/2,U=M+1,N=A+1;let I=0,V=0;const L=new me;for(let X=0;X<N;X++){const Z=X*D-B;for(let te=0;te<U;te++){const Y=te*C-R;L[g]=Y*w,L[y]=Z*b,L[p]=F,u.push(L.x,L.y,L.z),L[g]=0,L[y]=0,L[p]=x>0?1:-1,c.push(L.x,L.y,L.z),f.push(te/M),f.push(1-X/A),I+=1}}for(let X=0;X<A;X++)for(let Z=0;Z<M;Z++){const te=d+Z+U*X,Y=d+Z+U*(X+1),re=d+(Z+1)+U*(X+1),fe=d+(Z+1)+U*X;l.push(te,Y,fe),l.push(Y,re,fe),V+=6}a.addGroup(h,V,T),h+=V,d+=I}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new op(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Ng(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function Po(n){const e={};for(let t=0;t<n.length;t++){const r=Ng(n[t]);for(const i in r)e[i]=r[i]}return e}function n$e(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function lne(n){return n.getRenderTarget()===null?n.outputColorSpace:Gn.workingColorSpace}const gL={clone:Ng,merge:Po};var r$e=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,i$e=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ra extends Ji{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=r$e,this.fragmentShader=i$e,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ng(e.uniforms),this.uniformsGroups=n$e(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;s&&s.isTexture?t.uniforms[i]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[i]={type:"m4",value:s.toArray()}:t.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class hx extends Dn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Qt,this.projectionMatrix=new Qt,this.projectionMatrixInverse=new Qt,this.coordinateSystem=Hl}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Vc=new me,m7=new nt,g7=new nt;class Qr extends hx{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Dg*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(xh*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Dg*2*Math.atan(Math.tan(xh*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){Vc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Vc.x,Vc.y).multiplyScalar(-e/Vc.z),Vc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Vc.x,Vc.y).multiplyScalar(-e/Vc.z)}getViewSize(e,t){return this.getViewBounds(e,m7,g7),t.subVectors(g7,m7)}setViewOffset(e,t,r,i,o,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(xh*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,o=-.5*i;const s=this.view;if(this.view!==null&&this.view.enabled){const l=s.fullWidth,u=s.fullHeight;o+=s.offsetX*i/l,t-=s.offsetY*r/u,i*=s.width/l,r*=s.height/u}const a=this.filmOffset;a!==0&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Yp=-90,Kp=1;class une extends Dn{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Qr(Yp,Kp,e,t);i.layers=this.layers,this.add(i);const o=new Qr(Yp,Kp,e,t);o.layers=this.layers,this.add(o);const s=new Qr(Yp,Kp,e,t);s.layers=this.layers,this.add(s);const a=new Qr(Yp,Kp,e,t);a.layers=this.layers,this.add(a);const l=new Qr(Yp,Kp,e,t);l.layers=this.layers,this.add(l);const u=new Qr(Yp,Kp,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,o,s,a,l]=t;for(const u of t)this.remove(u);if(e===Hl)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===u1)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,s,a,l,u,c]=this.children,f=e.getRenderTarget(),d=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),m=e.xr.enabled;e.xr.enabled=!1;const g=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,o),e.setRenderTarget(r,1,i),e.render(t,s),e.setRenderTarget(r,2,i),e.render(t,a),e.setRenderTarget(r,3,i),e.render(t,l),e.setRenderTarget(r,4,i),e.render(t,u),r.texture.generateMipmaps=g,e.setRenderTarget(r,5,i),e.render(t,c),e.setRenderTarget(f,d,h),e.xr.enabled=m,r.texture.needsPMREMUpdate=!0}}class px extends Or{constructor(e,t,r,i,o,s,a,l,u,c){e=e!==void 0?e:[],t=t!==void 0?t:pc,super(e,t,r,i,o,s,a,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class cne extends Pa{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];t.encoding!==void 0&&(bh("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Df?mi:Ls),this.texture=new px(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:gr}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new op(5,5,5),o=new Ra({name:"CubemapFromEquirect",uniforms:Ng(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:yo,blending:Qu});o.uniforms.tEquirect.value=t;const s=new ui(i,o),a=t.minFilter;return t.minFilter===$l&&(t.minFilter=gr),new une(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,r,i){const o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,r,i);e.setRenderTarget(o)}}const w3=new me,o$e=new me,s$e=new vn;class Ll{constructor(e=new me(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=w3.subVectors(r,t).cross(o$e.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(w3),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/i;return o<0||o>1?null:t.copy(e.start).addScaledVector(r,o)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||s$e.getNormalMatrix(e),i=this.coplanarPoint(w3).applyMatrix4(e),o=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Td=new xo,Gw=new me;class mx{constructor(e=new Ll,t=new Ll,r=new Ll,i=new Ll,o=new Ll,s=new Ll){this.planes=[e,t,r,i,o,s]}set(e,t,r,i,o,s){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(o),a[5].copy(s),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=Hl){const r=this.planes,i=e.elements,o=i[0],s=i[1],a=i[2],l=i[3],u=i[4],c=i[5],f=i[6],d=i[7],h=i[8],m=i[9],g=i[10],y=i[11],p=i[12],w=i[13],b=i[14],v=i[15];if(r[0].setComponents(l-o,d-u,y-h,v-p).normalize(),r[1].setComponents(l+o,d+u,y+h,v+p).normalize(),r[2].setComponents(l+s,d+c,y+m,v+w).normalize(),r[3].setComponents(l-s,d-c,y-m,v-w).normalize(),r[4].setComponents(l-a,d-f,y-g,v-b).normalize(),t===Hl)r[5].setComponents(l+a,d+f,y+g,v+b).normalize();else if(t===u1)r[5].setComponents(a,f,g,b).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Td.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Td.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Td)}intersectsSprite(e){return Td.center.set(0,0,0),Td.radius=.7071067811865476,Td.applyMatrix4(e.matrixWorld),this.intersectsSphere(Td)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(Gw.x=i.normal.x>0?e.max.x:e.min.x,Gw.y=i.normal.y>0?e.max.y:e.min.y,Gw.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Gw)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function fne(){let n=null,e=!1,t=null,r=null;function i(o,s){t(o,s),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){n=o}}}function a$e(n,e){const t=e.isWebGL2,r=new WeakMap;function i(u,c){const f=u.array,d=u.usage,h=f.byteLength,m=n.createBuffer();n.bindBuffer(c,m),n.bufferData(c,f,d),u.onUploadCallback();let g;if(f instanceof Float32Array)g=n.FLOAT;else if(f instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(t)g=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else g=n.UNSIGNED_SHORT;else if(f instanceof Int16Array)g=n.SHORT;else if(f instanceof Uint32Array)g=n.UNSIGNED_INT;else if(f instanceof Int32Array)g=n.INT;else if(f instanceof Int8Array)g=n.BYTE;else if(f instanceof Uint8Array)g=n.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)g=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:m,type:g,bytesPerElement:f.BYTES_PER_ELEMENT,version:u.version,size:h}}function o(u,c,f){const d=c.array,h=c._updateRange,m=c.updateRanges;if(n.bindBuffer(f,u),h.count===-1&&m.length===0&&n.bufferSubData(f,0,d),m.length!==0){for(let g=0,y=m.length;g<y;g++){const p=m[g];t?n.bufferSubData(f,p.start*d.BYTES_PER_ELEMENT,d,p.start,p.count):n.bufferSubData(f,p.start*d.BYTES_PER_ELEMENT,d.subarray(p.start,p.start+p.count))}c.clearUpdateRanges()}h.count!==-1&&(t?n.bufferSubData(f,h.offset*d.BYTES_PER_ELEMENT,d,h.offset,h.count):n.bufferSubData(f,h.offset*d.BYTES_PER_ELEMENT,d.subarray(h.offset,h.offset+h.count)),h.count=-1),c.onUploadCallback()}function s(u){return u.isInterleavedBufferAttribute&&(u=u.data),r.get(u)}function a(u){u.isInterleavedBufferAttribute&&(u=u.data);const c=r.get(u);c&&(n.deleteBuffer(c.buffer),r.delete(u))}function l(u,c){if(u.isGLBufferAttribute){const d=r.get(u);(!d||d.version<u.version)&&r.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const f=r.get(u);if(f===void 0)r.set(u,i(u,c));else if(f.version<u.version){if(f.size!==u.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");o(f.buffer,u,c),f.version=u.version}}return{get:s,remove:a,update:l}}class pv extends sn{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const o=e/2,s=t/2,a=Math.floor(r),l=Math.floor(i),u=a+1,c=l+1,f=e/a,d=t/l,h=[],m=[],g=[],y=[];for(let p=0;p<c;p++){const w=p*d-s;for(let b=0;b<u;b++){const v=b*f-o;m.push(v,-w,0),g.push(0,0,1),y.push(b/a),y.push(1-p/l)}}for(let p=0;p<l;p++)for(let w=0;w<a;w++){const b=w+u*p,v=w+u*(p+1),S=w+1+u*(p+1),x=w+1+u*p;h.push(b,v,x),h.push(v,S,x)}this.setIndex(h),this.setAttribute("position",new Rt(m,3)),this.setAttribute("normal",new Rt(g,3)),this.setAttribute("uv",new Rt(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pv(e.width,e.height,e.widthSegments,e.heightSegments)}}var l$e=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,u$e=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,c$e=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,f$e=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,d$e=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,h$e=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,p$e=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,m$e=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,g$e=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,v$e=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,y$e=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,x$e=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,b$e=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,w$e=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,S$e=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,_$e=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,E$e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,M$e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,C$e=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,A$e=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,T$e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,D$e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,N$e=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,P$e=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,R$e=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,O$e=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,k$e=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,I$e=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,L$e=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,F$e=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,B$e="gl_FragColor = linearToOutputTexel( gl_FragColor );",z$e=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,U$e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,V$e=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,$$e=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,H$e=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,W$e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,j$e=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,G$e=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,q$e=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,X$e=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Y$e=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,K$e=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Z$e=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,J$e=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Q$e=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,e7e=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,t7e=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,n7e=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,r7e=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,i7e=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,o7e=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,s7e=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,a7e=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,l7e=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,u7e=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,c7e=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,f7e=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,d7e=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,h7e=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,p7e=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,m7e=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,g7e=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,v7e=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,y7e=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,x7e=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,b7e=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,w7e=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,S7e=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,_7e=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,E7e=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,M7e=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,C7e=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,A7e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,T7e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,D7e=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,N7e=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,P7e=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,R7e=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,O7e=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,k7e=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,I7e=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,L7e=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,F7e=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,B7e=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,z7e=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,U7e=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,V7e=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,$7e=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,H7e=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,W7e=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,j7e=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,G7e=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,q7e=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,X7e=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Y7e=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,K7e=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Z7e=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,J7e=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Q7e=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,eHe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,tHe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,nHe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,rHe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,iHe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,oHe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,sHe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const aHe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,lHe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,uHe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,cHe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,fHe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,dHe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,hHe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,pHe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,mHe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,gHe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,vHe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,yHe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,xHe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,bHe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,wHe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,SHe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_He=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,EHe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,MHe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,CHe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,AHe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,THe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,DHe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,NHe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,PHe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,RHe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,OHe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,kHe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,IHe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,LHe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,FHe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,BHe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,zHe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,UHe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,pn={alphahash_fragment:l$e,alphahash_pars_fragment:u$e,alphamap_fragment:c$e,alphamap_pars_fragment:f$e,alphatest_fragment:d$e,alphatest_pars_fragment:h$e,aomap_fragment:p$e,aomap_pars_fragment:m$e,batching_pars_vertex:g$e,batching_vertex:v$e,begin_vertex:y$e,beginnormal_vertex:x$e,bsdfs:b$e,iridescence_fragment:w$e,bumpmap_pars_fragment:S$e,clipping_planes_fragment:_$e,clipping_planes_pars_fragment:E$e,clipping_planes_pars_vertex:M$e,clipping_planes_vertex:C$e,color_fragment:A$e,color_pars_fragment:T$e,color_pars_vertex:D$e,color_vertex:N$e,common:P$e,cube_uv_reflection_fragment:R$e,defaultnormal_vertex:O$e,displacementmap_pars_vertex:k$e,displacementmap_vertex:I$e,emissivemap_fragment:L$e,emissivemap_pars_fragment:F$e,colorspace_fragment:B$e,colorspace_pars_fragment:z$e,envmap_fragment:U$e,envmap_common_pars_fragment:V$e,envmap_pars_fragment:$$e,envmap_pars_vertex:H$e,envmap_physical_pars_fragment:t7e,envmap_vertex:W$e,fog_vertex:j$e,fog_pars_vertex:G$e,fog_fragment:q$e,fog_pars_fragment:X$e,gradientmap_pars_fragment:Y$e,lightmap_fragment:K$e,lightmap_pars_fragment:Z$e,lights_lambert_fragment:J$e,lights_lambert_pars_fragment:Q$e,lights_pars_begin:e7e,lights_toon_fragment:n7e,lights_toon_pars_fragment:r7e,lights_phong_fragment:i7e,lights_phong_pars_fragment:o7e,lights_physical_fragment:s7e,lights_physical_pars_fragment:a7e,lights_fragment_begin:l7e,lights_fragment_maps:u7e,lights_fragment_end:c7e,logdepthbuf_fragment:f7e,logdepthbuf_pars_fragment:d7e,logdepthbuf_pars_vertex:h7e,logdepthbuf_vertex:p7e,map_fragment:m7e,map_pars_fragment:g7e,map_particle_fragment:v7e,map_particle_pars_fragment:y7e,metalnessmap_fragment:x7e,metalnessmap_pars_fragment:b7e,morphcolor_vertex:w7e,morphnormal_vertex:S7e,morphtarget_pars_vertex:_7e,morphtarget_vertex:E7e,normal_fragment_begin:M7e,normal_fragment_maps:C7e,normal_pars_fragment:A7e,normal_pars_vertex:T7e,normal_vertex:D7e,normalmap_pars_fragment:N7e,clearcoat_normal_fragment_begin:P7e,clearcoat_normal_fragment_maps:R7e,clearcoat_pars_fragment:O7e,iridescence_pars_fragment:k7e,opaque_fragment:I7e,packing:L7e,premultiplied_alpha_fragment:F7e,project_vertex:B7e,dithering_fragment:z7e,dithering_pars_fragment:U7e,roughnessmap_fragment:V7e,roughnessmap_pars_fragment:$7e,shadowmap_pars_fragment:H7e,shadowmap_pars_vertex:W7e,shadowmap_vertex:j7e,shadowmask_pars_fragment:G7e,skinbase_vertex:q7e,skinning_pars_vertex:X7e,skinning_vertex:Y7e,skinnormal_vertex:K7e,specularmap_fragment:Z7e,specularmap_pars_fragment:J7e,tonemapping_fragment:Q7e,tonemapping_pars_fragment:eHe,transmission_fragment:tHe,transmission_pars_fragment:nHe,uv_pars_fragment:rHe,uv_pars_vertex:iHe,uv_vertex:oHe,worldpos_vertex:sHe,background_vert:aHe,background_frag:lHe,backgroundCube_vert:uHe,backgroundCube_frag:cHe,cube_vert:fHe,cube_frag:dHe,depth_vert:hHe,depth_frag:pHe,distanceRGBA_vert:mHe,distanceRGBA_frag:gHe,equirect_vert:vHe,equirect_frag:yHe,linedashed_vert:xHe,linedashed_frag:bHe,meshbasic_vert:wHe,meshbasic_frag:SHe,meshlambert_vert:_He,meshlambert_frag:EHe,meshmatcap_vert:MHe,meshmatcap_frag:CHe,meshnormal_vert:AHe,meshnormal_frag:THe,meshphong_vert:DHe,meshphong_frag:NHe,meshphysical_vert:PHe,meshphysical_frag:RHe,meshtoon_vert:OHe,meshtoon_frag:kHe,points_vert:IHe,points_frag:LHe,shadow_vert:FHe,shadow_frag:BHe,sprite_vert:zHe,sprite_frag:UHe},dt={common:{diffuse:{value:new gt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new vn},alphaMap:{value:null},alphaMapTransform:{value:new vn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new vn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new vn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new vn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new vn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new vn},normalScale:{value:new nt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new vn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new vn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new vn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new vn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new gt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new gt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new vn},alphaTest:{value:0},uvTransform:{value:new vn}},sprite:{diffuse:{value:new gt(16777215)},opacity:{value:1},center:{value:new nt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new vn},alphaMap:{value:null},alphaMapTransform:{value:new vn},alphaTest:{value:0}}},Ya={basic:{uniforms:Po([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.fog]),vertexShader:pn.meshbasic_vert,fragmentShader:pn.meshbasic_frag},lambert:{uniforms:Po([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,dt.lights,{emissive:{value:new gt(0)}}]),vertexShader:pn.meshlambert_vert,fragmentShader:pn.meshlambert_frag},phong:{uniforms:Po([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,dt.lights,{emissive:{value:new gt(0)},specular:{value:new gt(1118481)},shininess:{value:30}}]),vertexShader:pn.meshphong_vert,fragmentShader:pn.meshphong_frag},standard:{uniforms:Po([dt.common,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.roughnessmap,dt.metalnessmap,dt.fog,dt.lights,{emissive:{value:new gt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:pn.meshphysical_vert,fragmentShader:pn.meshphysical_frag},toon:{uniforms:Po([dt.common,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.gradientmap,dt.fog,dt.lights,{emissive:{value:new gt(0)}}]),vertexShader:pn.meshtoon_vert,fragmentShader:pn.meshtoon_frag},matcap:{uniforms:Po([dt.common,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,{matcap:{value:null}}]),vertexShader:pn.meshmatcap_vert,fragmentShader:pn.meshmatcap_frag},points:{uniforms:Po([dt.points,dt.fog]),vertexShader:pn.points_vert,fragmentShader:pn.points_frag},dashed:{uniforms:Po([dt.common,dt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:pn.linedashed_vert,fragmentShader:pn.linedashed_frag},depth:{uniforms:Po([dt.common,dt.displacementmap]),vertexShader:pn.depth_vert,fragmentShader:pn.depth_frag},normal:{uniforms:Po([dt.common,dt.bumpmap,dt.normalmap,dt.displacementmap,{opacity:{value:1}}]),vertexShader:pn.meshnormal_vert,fragmentShader:pn.meshnormal_frag},sprite:{uniforms:Po([dt.sprite,dt.fog]),vertexShader:pn.sprite_vert,fragmentShader:pn.sprite_frag},background:{uniforms:{uvTransform:{value:new vn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:pn.background_vert,fragmentShader:pn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:pn.backgroundCube_vert,fragmentShader:pn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:pn.cube_vert,fragmentShader:pn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:pn.equirect_vert,fragmentShader:pn.equirect_frag},distanceRGBA:{uniforms:Po([dt.common,dt.displacementmap,{referencePosition:{value:new me},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:pn.distanceRGBA_vert,fragmentShader:pn.distanceRGBA_frag},shadow:{uniforms:Po([dt.lights,dt.fog,{color:{value:new gt(0)},opacity:{value:1}}]),vertexShader:pn.shadow_vert,fragmentShader:pn.shadow_frag}};Ya.physical={uniforms:Po([Ya.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new vn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new vn},clearcoatNormalScale:{value:new nt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new vn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new vn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new vn},sheen:{value:0},sheenColor:{value:new gt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new vn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new vn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new vn},transmissionSamplerSize:{value:new nt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new vn},attenuationDistance:{value:0},attenuationColor:{value:new gt(0)},specularColor:{value:new gt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new vn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new vn},anisotropyVector:{value:new nt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new vn}}]),vertexShader:pn.meshphysical_vert,fragmentShader:pn.meshphysical_frag};const qw={r:0,b:0,g:0};function VHe(n,e,t,r,i,o,s){const a=new gt(0);let l=o===!0?0:1,u,c,f=null,d=0,h=null;function m(y,p){let w=!1,b=p.isScene===!0?p.background:null;b&&b.isTexture&&(b=(p.backgroundBlurriness>0?t:e).get(b)),b===null?g(a,l):b&&b.isColor&&(g(b,1),w=!0);const v=n.xr.getEnvironmentBlendMode();v==="additive"?r.buffers.color.setClear(0,0,0,1,s):v==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,s),(n.autoClear||w)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),b&&(b.isCubeTexture||b.mapping===hv)?(c===void 0&&(c=new ui(new op(1,1,1),new Ra({name:"BackgroundCubeMaterial",uniforms:Ng(Ya.backgroundCube.uniforms),vertexShader:Ya.backgroundCube.vertexShader,fragmentShader:Ya.backgroundCube.fragmentShader,side:yo,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(S,x,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=b,c.material.uniforms.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=p.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=p.backgroundIntensity,c.material.toneMapped=Gn.getTransfer(b.colorSpace)!==ur,(f!==b||d!==b.version||h!==n.toneMapping)&&(c.material.needsUpdate=!0,f=b,d=b.version,h=n.toneMapping),c.layers.enableAll(),y.unshift(c,c.geometry,c.material,0,0,null)):b&&b.isTexture&&(u===void 0&&(u=new ui(new pv(2,2),new Ra({name:"BackgroundMaterial",uniforms:Ng(Ya.background.uniforms),vertexShader:Ya.background.vertexShader,fragmentShader:Ya.background.fragmentShader,side:hc,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=b,u.material.uniforms.backgroundIntensity.value=p.backgroundIntensity,u.material.toneMapped=Gn.getTransfer(b.colorSpace)!==ur,b.matrixAutoUpdate===!0&&b.updateMatrix(),u.material.uniforms.uvTransform.value.copy(b.matrix),(f!==b||d!==b.version||h!==n.toneMapping)&&(u.material.needsUpdate=!0,f=b,d=b.version,h=n.toneMapping),u.layers.enableAll(),y.unshift(u,u.geometry,u.material,0,0,null))}function g(y,p){y.getRGB(qw,lne(n)),r.buffers.color.setClear(qw.r,qw.g,qw.b,p,s)}return{getClearColor:function(){return a},setClearColor:function(y,p=1){a.set(y),l=p,g(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(y){l=y,g(a,l)},render:m}}function $He(n,e,t,r){const i=n.getParameter(n.MAX_VERTEX_ATTRIBS),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),s=r.isWebGL2||o!==null,a={},l=y(null);let u=l,c=!1;function f(F,U,N,I,V){let L=!1;if(s){const X=g(I,N,U);u!==X&&(u=X,h(u.object)),L=p(F,I,N,V),L&&w(F,I,N,V)}else{const X=U.wireframe===!0;(u.geometry!==I.id||u.program!==N.id||u.wireframe!==X)&&(u.geometry=I.id,u.program=N.id,u.wireframe=X,L=!0)}V!==null&&t.update(V,n.ELEMENT_ARRAY_BUFFER),(L||c)&&(c=!1,A(F,U,N,I),V!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(V).buffer))}function d(){return r.isWebGL2?n.createVertexArray():o.createVertexArrayOES()}function h(F){return r.isWebGL2?n.bindVertexArray(F):o.bindVertexArrayOES(F)}function m(F){return r.isWebGL2?n.deleteVertexArray(F):o.deleteVertexArrayOES(F)}function g(F,U,N){const I=N.wireframe===!0;let V=a[F.id];V===void 0&&(V={},a[F.id]=V);let L=V[U.id];L===void 0&&(L={},V[U.id]=L);let X=L[I];return X===void 0&&(X=y(d()),L[I]=X),X}function y(F){const U=[],N=[],I=[];for(let V=0;V<i;V++)U[V]=0,N[V]=0,I[V]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:U,enabledAttributes:N,attributeDivisors:I,object:F,attributes:{},index:null}}function p(F,U,N,I){const V=u.attributes,L=U.attributes;let X=0;const Z=N.getAttributes();for(const te in Z)if(Z[te].location>=0){const re=V[te];let fe=L[te];if(fe===void 0&&(te==="instanceMatrix"&&F.instanceMatrix&&(fe=F.instanceMatrix),te==="instanceColor"&&F.instanceColor&&(fe=F.instanceColor)),re===void 0||re.attribute!==fe||fe&&re.data!==fe.data)return!0;X++}return u.attributesNum!==X||u.index!==I}function w(F,U,N,I){const V={},L=U.attributes;let X=0;const Z=N.getAttributes();for(const te in Z)if(Z[te].location>=0){let re=L[te];re===void 0&&(te==="instanceMatrix"&&F.instanceMatrix&&(re=F.instanceMatrix),te==="instanceColor"&&F.instanceColor&&(re=F.instanceColor));const fe={};fe.attribute=re,re&&re.data&&(fe.data=re.data),V[te]=fe,X++}u.attributes=V,u.attributesNum=X,u.index=I}function b(){const F=u.newAttributes;for(let U=0,N=F.length;U<N;U++)F[U]=0}function v(F){S(F,0)}function S(F,U){const N=u.newAttributes,I=u.enabledAttributes,V=u.attributeDivisors;N[F]=1,I[F]===0&&(n.enableVertexAttribArray(F),I[F]=1),V[F]!==U&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](F,U),V[F]=U)}function x(){const F=u.newAttributes,U=u.enabledAttributes;for(let N=0,I=U.length;N<I;N++)U[N]!==F[N]&&(n.disableVertexAttribArray(N),U[N]=0)}function M(F,U,N,I,V,L,X){X===!0?n.vertexAttribIPointer(F,U,N,V,L):n.vertexAttribPointer(F,U,N,I,V,L)}function A(F,U,N,I){if(r.isWebGL2===!1&&(F.isInstancedMesh||I.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;b();const V=I.attributes,L=N.getAttributes(),X=U.defaultAttributeValues;for(const Z in L){const te=L[Z];if(te.location>=0){let Y=V[Z];if(Y===void 0&&(Z==="instanceMatrix"&&F.instanceMatrix&&(Y=F.instanceMatrix),Z==="instanceColor"&&F.instanceColor&&(Y=F.instanceColor)),Y!==void 0){const re=Y.normalized,fe=Y.itemSize,ue=t.get(Y);if(ue===void 0)continue;const ge=ue.buffer,Se=ue.type,xe=ue.bytesPerElement,De=r.isWebGL2===!0&&(Se===n.INT||Se===n.UNSIGNED_INT||Y.gpuType===tL);if(Y.isInterleavedBufferAttribute){const Ae=Y.data,ie=Ae.stride,Re=Y.offset;if(Ae.isInstancedInterleavedBuffer){for(let Pe=0;Pe<te.locationSize;Pe++)S(te.location+Pe,Ae.meshPerAttribute);F.isInstancedMesh!==!0&&I._maxInstanceCount===void 0&&(I._maxInstanceCount=Ae.meshPerAttribute*Ae.count)}else for(let Pe=0;Pe<te.locationSize;Pe++)v(te.location+Pe);n.bindBuffer(n.ARRAY_BUFFER,ge);for(let Pe=0;Pe<te.locationSize;Pe++)M(te.location+Pe,fe/te.locationSize,Se,re,ie*xe,(Re+fe/te.locationSize*Pe)*xe,De)}else{if(Y.isInstancedBufferAttribute){for(let Ae=0;Ae<te.locationSize;Ae++)S(te.location+Ae,Y.meshPerAttribute);F.isInstancedMesh!==!0&&I._maxInstanceCount===void 0&&(I._maxInstanceCount=Y.meshPerAttribute*Y.count)}else for(let Ae=0;Ae<te.locationSize;Ae++)v(te.location+Ae);n.bindBuffer(n.ARRAY_BUFFER,ge);for(let Ae=0;Ae<te.locationSize;Ae++)M(te.location+Ae,fe/te.locationSize,Se,re,fe*xe,fe/te.locationSize*Ae*xe,De)}}else if(X!==void 0){const re=X[Z];if(re!==void 0)switch(re.length){case 2:n.vertexAttrib2fv(te.location,re);break;case 3:n.vertexAttrib3fv(te.location,re);break;case 4:n.vertexAttrib4fv(te.location,re);break;default:n.vertexAttrib1fv(te.location,re)}}}}x()}function T(){R();for(const F in a){const U=a[F];for(const N in U){const I=U[N];for(const V in I)m(I[V].object),delete I[V];delete U[N]}delete a[F]}}function C(F){if(a[F.id]===void 0)return;const U=a[F.id];for(const N in U){const I=U[N];for(const V in I)m(I[V].object),delete I[V];delete U[N]}delete a[F.id]}function D(F){for(const U in a){const N=a[U];if(N[F.id]===void 0)continue;const I=N[F.id];for(const V in I)m(I[V].object),delete I[V];delete N[F.id]}}function R(){B(),c=!0,u!==l&&(u=l,h(u.object))}function B(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:f,reset:R,resetDefaultState:B,dispose:T,releaseStatesOfGeometry:C,releaseStatesOfProgram:D,initAttributes:b,enableAttribute:v,disableUnusedAttributes:x}}function HHe(n,e,t,r){const i=r.isWebGL2;let o;function s(c){o=c}function a(c,f){n.drawArrays(o,c,f),t.update(f,o,1)}function l(c,f,d){if(d===0)return;let h,m;if(i)h=n,m="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[m](o,c,f,d),t.update(f,o,d)}function u(c,f,d){if(d===0)return;const h=e.get("WEBGL_multi_draw");if(h===null)for(let m=0;m<d;m++)this.render(c[m],f[m]);else{h.multiDrawArraysWEBGL(o,c,0,f,0,d);let m=0;for(let g=0;g<d;g++)m+=f[g];t.update(m,o,1)}}this.setMode=s,this.render=a,this.renderInstances=l,this.renderMultiDraw=u}function WHe(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const M=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(M.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(M){if(M==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";M="mediump"}return M==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const s=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=o(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const u=s||e.has("WEBGL_draw_buffers"),c=t.logarithmicDepthBuffer===!0,f=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),d=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=n.getParameter(n.MAX_TEXTURE_SIZE),m=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),g=n.getParameter(n.MAX_VERTEX_ATTRIBS),y=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),p=n.getParameter(n.MAX_VARYING_VECTORS),w=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),b=d>0,v=s||e.has("OES_texture_float"),S=b&&v,x=s?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:s,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:o,precision:a,logarithmicDepthBuffer:c,maxTextures:f,maxVertexTextures:d,maxTextureSize:h,maxCubemapSize:m,maxAttributes:g,maxVertexUniforms:y,maxVaryings:p,maxFragmentUniforms:w,vertexTextures:b,floatFragmentTextures:v,floatVertexTextures:S,maxSamples:x}}function jHe(n){const e=this;let t=null,r=0,i=!1,o=!1;const s=new Ll,a=new vn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,d){const h=f.length!==0||d||r!==0||i;return i=d,r=f.length,h},this.beginShadows=function(){o=!0,c(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(f,d){t=c(f,d,0)},this.setState=function(f,d,h){const m=f.clippingPlanes,g=f.clipIntersection,y=f.clipShadows,p=n.get(f);if(!i||m===null||m.length===0||o&&!y)o?c(null):u();else{const w=o?0:r,b=w*4;let v=p.clippingState||null;l.value=v,v=c(m,d,b,h);for(let S=0;S!==b;++S)v[S]=t[S];p.clippingState=v,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=w}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(f,d,h,m){const g=f!==null?f.length:0;let y=null;if(g!==0){if(y=l.value,m!==!0||y===null){const p=h+g*4,w=d.matrixWorldInverse;a.getNormalMatrix(w),(y===null||y.length<p)&&(y=new Float32Array(p));for(let b=0,v=h;b!==g;++b,v+=4)s.copy(f[b]).applyMatrix4(w,a),s.normal.toArray(y,v),y[v+3]=s.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=g,e.numIntersection=0,y}}function GHe(n){let e=new WeakMap;function t(s,a){return a===Jy?s.mapping=pc:a===Qy&&(s.mapping=jf),s}function r(s){if(s&&s.isTexture){const a=s.mapping;if(a===Jy||a===Qy)if(e.has(s)){const l=e.get(s).texture;return t(l,s.mapping)}else{const l=s.image;if(l&&l.height>0){const u=new cne(l.height);return u.fromEquirectangularTexture(n,s),e.set(s,u),s.addEventListener("dispose",i),t(u.texture,s.mapping)}else return null}}return s}function i(s){const a=s.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function o(){e=new WeakMap}return{get:r,dispose:o}}let Nf=class extends hx{constructor(e=-1,t=1,r=1,i=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let o=r-e,s=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=u*this.view.offsetX,s=o+u*this.view.width,a-=c*this.view.offsetY,l=a-c*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}};const Om=4,v7=[.125,.215,.35,.446,.526,.582],Xd=20,S3=new Nf,y7=new gt;let _3=null,E3=0,M3=0;const Wd=(1+Math.sqrt(5))/2,Zp=1/Wd,x7=[new me(1,1,1),new me(-1,1,1),new me(1,1,-1),new me(-1,1,-1),new me(0,Wd,Zp),new me(0,Wd,-Zp),new me(Zp,0,Wd),new me(-Zp,0,Wd),new me(Wd,Zp,0),new me(-Wd,Zp,0)];class bR{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){_3=this._renderer.getRenderTarget(),E3=this._renderer.getActiveCubeFace(),M3=this._renderer.getActiveMipmapLevel(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,r,i,o),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=S7(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=w7(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(_3,E3,M3),e.scissorTest=!1,Xw(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===pc||e.mapping===jf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),_3=this._renderer.getRenderTarget(),E3=this._renderer.getActiveCubeFace(),M3=this._renderer.getActiveMipmapLevel();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:gr,minFilter:gr,generateMipmaps:!1,type:zh,format:ko,colorSpace:su,depthBuffer:!1},i=b7(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=b7(e,t,r);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=qHe(o)),this._blurMaterial=XHe(o,e,t)}return i}_compileMaterial(e){const t=new ui(this._lodPlanes[0],e);this._renderer.compile(t,S3)}_sceneToCubeUV(e,t,r,i){const a=new Qr(90,1,t,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,f=c.autoClear,d=c.toneMapping;c.getClearColor(y7),c.toneMapping=Zl,c.autoClear=!1;const h=new cd({name:"PMREM.Background",side:yo,depthWrite:!1,depthTest:!1}),m=new ui(new op,h);let g=!1;const y=e.background;y?y.isColor&&(h.color.copy(y),e.background=null,g=!0):(h.color.copy(y7),g=!0);for(let p=0;p<6;p++){const w=p%3;w===0?(a.up.set(0,l[p],0),a.lookAt(u[p],0,0)):w===1?(a.up.set(0,0,l[p]),a.lookAt(0,u[p],0)):(a.up.set(0,l[p],0),a.lookAt(0,0,u[p]));const b=this._cubeSize;Xw(i,w*b,p>2?b:0,b,b),c.setRenderTarget(i),g&&c.render(m,a),c.render(e,a)}m.geometry.dispose(),m.material.dispose(),c.toneMapping=d,c.autoClear=f,e.background=y}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===pc||e.mapping===jf;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=S7()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=w7());const o=i?this._cubemapMaterial:this._equirectMaterial,s=new ui(this._lodPlanes[0],o),a=o.uniforms;a.envMap.value=e;const l=this._cubeSize;Xw(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(s,S3)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const o=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),s=x7[(i-1)%x7.length];this._blur(e,i-1,i,o,s)}t.autoClear=r}_blur(e,t,r,i,o){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,r,i,"latitudinal",o),this._halfBlur(s,e,r,r,i,"longitudinal",o)}_halfBlur(e,t,r,i,o,s,a){const l=this._renderer,u=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,f=new ui(this._lodPlanes[i],u),d=u.uniforms,h=this._sizeLods[r]-1,m=isFinite(o)?Math.PI/(2*h):2*Math.PI/(2*Xd-1),g=o/m,y=isFinite(o)?1+Math.floor(c*g):Xd;y>Xd&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${Xd}`);const p=[];let w=0;for(let M=0;M<Xd;++M){const A=M/g,T=Math.exp(-A*A/2);p.push(T),M===0?w+=T:M<y&&(w+=2*T)}for(let M=0;M<p.length;M++)p[M]=p[M]/w;d.envMap.value=e.texture,d.samples.value=y,d.weights.value=p,d.latitudinal.value=s==="latitudinal",a&&(d.poleAxis.value=a);const{_lodMax:b}=this;d.dTheta.value=m,d.mipInt.value=b-r;const v=this._sizeLods[i],S=3*v*(i>b-Om?i-b+Om:0),x=4*(this._cubeSize-v);Xw(t,S,x,3*v,2*v),l.setRenderTarget(t),l.render(f,S3)}}function qHe(n){const e=[],t=[],r=[];let i=n;const o=n-Om+1+v7.length;for(let s=0;s<o;s++){const a=Math.pow(2,i);t.push(a);let l=1/a;s>n-Om?l=v7[s-n+Om-1]:s===0&&(l=0),r.push(l);const u=1/(a-2),c=-u,f=1+u,d=[c,c,f,c,f,f,c,c,f,f,c,f],h=6,m=6,g=3,y=2,p=1,w=new Float32Array(g*m*h),b=new Float32Array(y*m*h),v=new Float32Array(p*m*h);for(let x=0;x<h;x++){const M=x%3*2/3-1,A=x>2?0:-1,T=[M,A,0,M+2/3,A,0,M+2/3,A+1,0,M,A,0,M+2/3,A+1,0,M,A+1,0];w.set(T,g*m*x),b.set(d,y*m*x);const C=[x,x,x,x,x,x];v.set(C,p*m*x)}const S=new sn;S.setAttribute("position",new $n(w,g)),S.setAttribute("uv",new $n(b,y)),S.setAttribute("faceIndex",new $n(v,p)),e.push(S),i>Om&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function b7(n,e,t){const r=new Pa(n,e,t);return r.texture.mapping=hv,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Xw(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function XHe(n,e,t){const r=new Float32Array(Xd),i=new me(0,1,0);return new Ra({name:"SphericalGaussianBlur",defines:{n:Xd,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:vL(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Qu,depthTest:!1,depthWrite:!1})}function w7(){return new Ra({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:vL(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Qu,depthTest:!1,depthWrite:!1})}function S7(){return new Ra({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:vL(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Qu,depthTest:!1,depthWrite:!1})}function vL(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function YHe(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,u=l===Jy||l===Qy,c=l===pc||l===jf;if(u||c)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let f=e.get(a);return t===null&&(t=new bR(n)),f=u?t.fromEquirectangular(a,f):t.fromCubemap(a,f),e.set(a,f),f.texture}else{if(e.has(a))return e.get(a).texture;{const f=a.image;if(u&&f&&f.height>0||c&&f&&i(f)){t===null&&(t=new bR(n));const d=u?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,d),a.addEventListener("dispose",o),d.texture}else return null}}}return a}function i(a){let l=0;const u=6;for(let c=0;c<u;c++)a[c]!==void 0&&l++;return l===u}function o(a){const l=a.target;l.removeEventListener("dispose",o);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:s}}function KHe(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function ZHe(n,e,t,r){const i={},o=new WeakMap;function s(f){const d=f.target;d.index!==null&&e.remove(d.index);for(const m in d.attributes)e.remove(d.attributes[m]);for(const m in d.morphAttributes){const g=d.morphAttributes[m];for(let y=0,p=g.length;y<p;y++)e.remove(g[y])}d.removeEventListener("dispose",s),delete i[d.id];const h=o.get(d);h&&(e.remove(h),o.delete(d)),r.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function a(f,d){return i[d.id]===!0||(d.addEventListener("dispose",s),i[d.id]=!0,t.memory.geometries++),d}function l(f){const d=f.attributes;for(const m in d)e.update(d[m],n.ARRAY_BUFFER);const h=f.morphAttributes;for(const m in h){const g=h[m];for(let y=0,p=g.length;y<p;y++)e.update(g[y],n.ARRAY_BUFFER)}}function u(f){const d=[],h=f.index,m=f.attributes.position;let g=0;if(h!==null){const w=h.array;g=h.version;for(let b=0,v=w.length;b<v;b+=3){const S=w[b+0],x=w[b+1],M=w[b+2];d.push(S,x,x,M,M,S)}}else if(m!==void 0){const w=m.array;g=m.version;for(let b=0,v=w.length/3-1;b<v;b+=3){const S=b+0,x=b+1,M=b+2;d.push(S,x,x,M,M,S)}}else return;const y=new(ine(d)?mL:pL)(d,1);y.version=g;const p=o.get(f);p&&e.remove(p),o.set(f,y)}function c(f){const d=o.get(f);if(d){const h=f.index;h!==null&&d.version<h.version&&u(f)}else u(f);return o.get(f)}return{get:a,update:l,getWireframeAttribute:c}}function JHe(n,e,t,r){const i=r.isWebGL2;let o;function s(h){o=h}let a,l;function u(h){a=h.type,l=h.bytesPerElement}function c(h,m){n.drawElements(o,m,a,h*l),t.update(m,o,1)}function f(h,m,g){if(g===0)return;let y,p;if(i)y=n,p="drawElementsInstanced";else if(y=e.get("ANGLE_instanced_arrays"),p="drawElementsInstancedANGLE",y===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[p](o,m,a,h*l,g),t.update(m,o,g)}function d(h,m,g){if(g===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let p=0;p<g;p++)this.render(h[p]/l,m[p]);else{y.multiDrawElementsWEBGL(o,m,0,a,h,0,g);let p=0;for(let w=0;w<g;w++)p+=m[w];t.update(p,o,1)}}this.setMode=s,this.setIndex=u,this.render=c,this.renderInstances=f,this.renderMultiDraw=d}function QHe(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(o,s,a){switch(t.calls++,s){case n.TRIANGLES:t.triangles+=a*(o/3);break;case n.LINES:t.lines+=a*(o/2);break;case n.LINE_STRIP:t.lines+=a*(o-1);break;case n.LINE_LOOP:t.lines+=a*o;break;case n.POINTS:t.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function eWe(n,e){return n[0]-e[0]}function tWe(n,e){return Math.abs(e[1])-Math.abs(n[1])}function nWe(n,e,t){const r={},i=new Float32Array(8),o=new WeakMap,s=new Kn,a=[];for(let u=0;u<8;u++)a[u]=[u,0];function l(u,c,f){const d=u.morphTargetInfluences;if(e.isWebGL2===!0){const h=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,m=h!==void 0?h.length:0;let g=o.get(c);if(g===void 0||g.count!==m){let F=function(){R.dispose(),o.delete(c),c.removeEventListener("dispose",F)};g!==void 0&&g.texture.dispose();const w=c.morphAttributes.position!==void 0,b=c.morphAttributes.normal!==void 0,v=c.morphAttributes.color!==void 0,S=c.morphAttributes.position||[],x=c.morphAttributes.normal||[],M=c.morphAttributes.color||[];let A=0;w===!0&&(A=1),b===!0&&(A=2),v===!0&&(A=3);let T=c.attributes.position.count*A,C=1;T>e.maxTextureSize&&(C=Math.ceil(T/e.maxTextureSize),T=e.maxTextureSize);const D=new Float32Array(T*C*4*m),R=new Y2(D,T,C,m);R.type=Is,R.needsUpdate=!0;const B=A*4;for(let U=0;U<m;U++){const N=S[U],I=x[U],V=M[U],L=T*C*4*U;for(let X=0;X<N.count;X++){const Z=X*B;w===!0&&(s.fromBufferAttribute(N,X),D[L+Z+0]=s.x,D[L+Z+1]=s.y,D[L+Z+2]=s.z,D[L+Z+3]=0),b===!0&&(s.fromBufferAttribute(I,X),D[L+Z+4]=s.x,D[L+Z+5]=s.y,D[L+Z+6]=s.z,D[L+Z+7]=0),v===!0&&(s.fromBufferAttribute(V,X),D[L+Z+8]=s.x,D[L+Z+9]=s.y,D[L+Z+10]=s.z,D[L+Z+11]=V.itemSize===4?s.w:1)}}g={count:m,texture:R,size:new nt(T,C)},o.set(c,g),c.addEventListener("dispose",F)}let y=0;for(let w=0;w<d.length;w++)y+=d[w];const p=c.morphTargetsRelative?1:1-y;f.getUniforms().setValue(n,"morphTargetBaseInfluence",p),f.getUniforms().setValue(n,"morphTargetInfluences",d),f.getUniforms().setValue(n,"morphTargetsTexture",g.texture,t),f.getUniforms().setValue(n,"morphTargetsTextureSize",g.size)}else{const h=d===void 0?0:d.length;let m=r[c.id];if(m===void 0||m.length!==h){m=[];for(let b=0;b<h;b++)m[b]=[b,0];r[c.id]=m}for(let b=0;b<h;b++){const v=m[b];v[0]=b,v[1]=d[b]}m.sort(tWe);for(let b=0;b<8;b++)b<h&&m[b][1]?(a[b][0]=m[b][0],a[b][1]=m[b][1]):(a[b][0]=Number.MAX_SAFE_INTEGER,a[b][1]=0);a.sort(eWe);const g=c.morphAttributes.position,y=c.morphAttributes.normal;let p=0;for(let b=0;b<8;b++){const v=a[b],S=v[0],x=v[1];S!==Number.MAX_SAFE_INTEGER&&x?(g&&c.getAttribute("morphTarget"+b)!==g[S]&&c.setAttribute("morphTarget"+b,g[S]),y&&c.getAttribute("morphNormal"+b)!==y[S]&&c.setAttribute("morphNormal"+b,y[S]),i[b]=x,p+=x):(g&&c.hasAttribute("morphTarget"+b)===!0&&c.deleteAttribute("morphTarget"+b),y&&c.hasAttribute("morphNormal"+b)===!0&&c.deleteAttribute("morphNormal"+b),i[b]=0)}const w=c.morphTargetsRelative?1:1-p;f.getUniforms().setValue(n,"morphTargetBaseInfluence",w),f.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function rWe(n,e,t,r){let i=new WeakMap;function o(l){const u=r.render.frame,c=l.geometry,f=e.get(l,c);if(i.get(f)!==u&&(e.update(f),i.set(f,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,u))),l.isSkinnedMesh){const d=l.skeleton;i.get(d)!==u&&(d.update(),i.set(d,u))}return f}function s(){i=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:o,dispose:s}}class K2 extends Or{constructor(e,t,r,i,o,s,a,l,u,c){if(c=c!==void 0?c:Tf,c!==Tf&&c!==Uh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&c===Tf&&(r=ju),r===void 0&&c===Uh&&(r=Af),super(null,i,o,s,a,l,c,r,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Zr,this.minFilter=l!==void 0?l:Zr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const dne=new Or,hne=new K2(1,1);hne.compareFunction=cL;const pne=new Y2,mne=new hL,gne=new px,_7=[],E7=[],M7=new Float32Array(16),C7=new Float32Array(9),A7=new Float32Array(4);function mv(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let o=_7[i];if(o===void 0&&(o=new Float32Array(i),_7[i]=o),e!==0){r.toArray(o,0);for(let s=1,a=0;s!==e;++s)a+=t,n[s].toArray(o,a)}return o}function bi(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function wi(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function Z2(n,e){let t=E7[e];t===void 0&&(t=new Int32Array(e),E7[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function iWe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function oWe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(bi(t,e))return;n.uniform2fv(this.addr,e),wi(t,e)}}function sWe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(bi(t,e))return;n.uniform3fv(this.addr,e),wi(t,e)}}function aWe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(bi(t,e))return;n.uniform4fv(this.addr,e),wi(t,e)}}function lWe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(bi(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),wi(t,e)}else{if(bi(t,r))return;A7.set(r),n.uniformMatrix2fv(this.addr,!1,A7),wi(t,r)}}function uWe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(bi(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),wi(t,e)}else{if(bi(t,r))return;C7.set(r),n.uniformMatrix3fv(this.addr,!1,C7),wi(t,r)}}function cWe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(bi(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),wi(t,e)}else{if(bi(t,r))return;M7.set(r),n.uniformMatrix4fv(this.addr,!1,M7),wi(t,r)}}function fWe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function dWe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(bi(t,e))return;n.uniform2iv(this.addr,e),wi(t,e)}}function hWe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(bi(t,e))return;n.uniform3iv(this.addr,e),wi(t,e)}}function pWe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(bi(t,e))return;n.uniform4iv(this.addr,e),wi(t,e)}}function mWe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function gWe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(bi(t,e))return;n.uniform2uiv(this.addr,e),wi(t,e)}}function vWe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(bi(t,e))return;n.uniform3uiv(this.addr,e),wi(t,e)}}function yWe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(bi(t,e))return;n.uniform4uiv(this.addr,e),wi(t,e)}}function xWe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);const o=this.type===n.SAMPLER_2D_SHADOW?hne:dne;t.setTexture2D(e||o,i)}function bWe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||mne,i)}function wWe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||gne,i)}function SWe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||pne,i)}function _We(n){switch(n){case 5126:return iWe;case 35664:return oWe;case 35665:return sWe;case 35666:return aWe;case 35674:return lWe;case 35675:return uWe;case 35676:return cWe;case 5124:case 35670:return fWe;case 35667:case 35671:return dWe;case 35668:case 35672:return hWe;case 35669:case 35673:return pWe;case 5125:return mWe;case 36294:return gWe;case 36295:return vWe;case 36296:return yWe;case 35678:case 36198:case 36298:case 36306:case 35682:return xWe;case 35679:case 36299:case 36307:return bWe;case 35680:case 36300:case 36308:case 36293:return wWe;case 36289:case 36303:case 36311:case 36292:return SWe}}function EWe(n,e){n.uniform1fv(this.addr,e)}function MWe(n,e){const t=mv(e,this.size,2);n.uniform2fv(this.addr,t)}function CWe(n,e){const t=mv(e,this.size,3);n.uniform3fv(this.addr,t)}function AWe(n,e){const t=mv(e,this.size,4);n.uniform4fv(this.addr,t)}function TWe(n,e){const t=mv(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function DWe(n,e){const t=mv(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function NWe(n,e){const t=mv(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function PWe(n,e){n.uniform1iv(this.addr,e)}function RWe(n,e){n.uniform2iv(this.addr,e)}function OWe(n,e){n.uniform3iv(this.addr,e)}function kWe(n,e){n.uniform4iv(this.addr,e)}function IWe(n,e){n.uniform1uiv(this.addr,e)}function LWe(n,e){n.uniform2uiv(this.addr,e)}function FWe(n,e){n.uniform3uiv(this.addr,e)}function BWe(n,e){n.uniform4uiv(this.addr,e)}function zWe(n,e,t){const r=this.cache,i=e.length,o=Z2(t,i);bi(r,o)||(n.uniform1iv(this.addr,o),wi(r,o));for(let s=0;s!==i;++s)t.setTexture2D(e[s]||dne,o[s])}function UWe(n,e,t){const r=this.cache,i=e.length,o=Z2(t,i);bi(r,o)||(n.uniform1iv(this.addr,o),wi(r,o));for(let s=0;s!==i;++s)t.setTexture3D(e[s]||mne,o[s])}function VWe(n,e,t){const r=this.cache,i=e.length,o=Z2(t,i);bi(r,o)||(n.uniform1iv(this.addr,o),wi(r,o));for(let s=0;s!==i;++s)t.setTextureCube(e[s]||gne,o[s])}function $We(n,e,t){const r=this.cache,i=e.length,o=Z2(t,i);bi(r,o)||(n.uniform1iv(this.addr,o),wi(r,o));for(let s=0;s!==i;++s)t.setTexture2DArray(e[s]||pne,o[s])}function HWe(n){switch(n){case 5126:return EWe;case 35664:return MWe;case 35665:return CWe;case 35666:return AWe;case 35674:return TWe;case 35675:return DWe;case 35676:return NWe;case 5124:case 35670:return PWe;case 35667:case 35671:return RWe;case 35668:case 35672:return OWe;case 35669:case 35673:return kWe;case 5125:return IWe;case 36294:return LWe;case 36295:return FWe;case 36296:return BWe;case 35678:case 36198:case 36298:case 36306:case 35682:return zWe;case 35679:case 36299:case 36307:return UWe;case 35680:case 36300:case 36308:case 36293:return VWe;case 36289:case 36303:case 36311:case 36292:return $We}}class WWe{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=_We(t.type)}}class jWe{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=HWe(t.type)}}class GWe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let o=0,s=i.length;o!==s;++o){const a=i[o];a.setValue(e,t[a.id],r)}}}const C3=/(\w+)(\])?(\[|\.)?/g;function T7(n,e){n.seq.push(e),n.map[e.id]=e}function qWe(n,e,t){const r=n.name,i=r.length;for(C3.lastIndex=0;;){const o=C3.exec(r),s=C3.lastIndex;let a=o[1];const l=o[2]==="]",u=o[3];if(l&&(a=a|0),u===void 0||u==="["&&s+2===i){T7(t,u===void 0?new WWe(a,n,e):new jWe(a,n,e));break}else{let f=t.map[a];f===void 0&&(f=new GWe(a),T7(t,f)),t=f}}}class w_{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const o=e.getActiveUniform(t,i),s=e.getUniformLocation(t,o.name);qWe(o,s,this)}}setValue(e,t,r,i){const o=this.map[t];o!==void 0&&o.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let o=0,s=t.length;o!==s;++o){const a=t[o],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,o=e.length;i!==o;++i){const s=e[i];s.id in t&&r.push(s)}return r}}function D7(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const XWe=37297;let YWe=0;function KWe(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let s=i;s<o;s++){const a=s+1;r.push(`${a===e?">":" "} ${a}: ${t[s]}`)}return r.join(`
`)}function ZWe(n){const e=Gn.getPrimaries(Gn.workingColorSpace),t=Gn.getPrimaries(n);let r;switch(e===t?r="":e===a1&&t===s1?r="LinearDisplayP3ToLinearSRGB":e===s1&&t===a1&&(r="LinearSRGBToLinearDisplayP3"),n){case su:case fx:return[r,"LinearTransferOETF"];case mi:case X2:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[r,"LinearTransferOETF"]}}function N7(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const s=parseInt(o[1]);return t.toUpperCase()+`

`+i+`

`+KWe(n.getShaderSource(e),s)}else return i}function JWe(n,e){const t=ZWe(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function QWe(n,e){let t;switch(e){case Nte:t="Linear";break;case Pte:t="Reinhard";break;case Rte:t="OptimizedCineon";break;case eL:t="ACESFilmic";break;case kte:t="AgX";break;case Ote:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function eje(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.alphaToCoverage||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(km).join(`
`)}function tje(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(km).join(`
`)}function nje(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function rje(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const o=n.getActiveAttrib(e,i),s=o.name;let a=1;o.type===n.FLOAT_MAT2&&(a=2),o.type===n.FLOAT_MAT3&&(a=3),o.type===n.FLOAT_MAT4&&(a=4),t[s]={type:o.type,location:n.getAttribLocation(e,s),locationSize:a}}return t}function km(n){return n!==""}function P7(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function R7(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const ije=/^[ \t]*#include +<([\w\d./]+)>/gm;function wR(n){return n.replace(ije,sje)}const oje=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function sje(n,e){let t=pn[e];if(t===void 0){const r=oje.get(e);if(r!==void 0)t=pn[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return wR(t)}const aje=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function O7(n){return n.replace(aje,lje)}function lje(n,e,t,r){let i="";for(let o=parseInt(e);o<parseInt(t);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function k7(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	`;return n.isWebGL2&&(e+=`precision ${n.precision} sampler3D;
		precision ${n.precision} sampler2DArray;
		precision ${n.precision} sampler2DShadow;
		precision ${n.precision} samplerCubeShadow;
		precision ${n.precision} sampler2DArrayShadow;
		precision ${n.precision} isampler2D;
		precision ${n.precision} isampler3D;
		precision ${n.precision} isamplerCube;
		precision ${n.precision} isampler2DArray;
		precision ${n.precision} usampler2D;
		precision ${n.precision} usampler3D;
		precision ${n.precision} usamplerCube;
		precision ${n.precision} usampler2DArray;
		`),n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function uje(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===W2?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===iy?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===ja&&(e="SHADOWMAP_TYPE_VSM"),e}function cje(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case pc:case jf:e="ENVMAP_TYPE_CUBE";break;case hv:e="ENVMAP_TYPE_CUBE_UV";break}return e}function fje(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case jf:e="ENVMAP_MODE_REFRACTION";break}return e}function dje(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case cx:e="ENVMAP_BLENDING_MULTIPLY";break;case Tte:e="ENVMAP_BLENDING_MIX";break;case Dte:e="ENVMAP_BLENDING_ADD";break}return e}function hje(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function pje(n,e,t,r){const i=n.getContext(),o=t.defines;let s=t.vertexShader,a=t.fragmentShader;const l=uje(t),u=cje(t),c=fje(t),f=dje(t),d=hje(t),h=t.isWebGL2?"":eje(t),m=tje(t),g=nje(o),y=i.createProgram();let p,w,b=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(p=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(km).join(`
`),p.length>0&&(p+=`
`),w=[h,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(km).join(`
`),w.length>0&&(w+=`
`)):(p=[k7(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(km).join(`
`),w=[h,k7(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+c:"",t.envMap?"#define "+f:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Zl?"#define TONE_MAPPING":"",t.toneMapping!==Zl?pn.tonemapping_pars_fragment:"",t.toneMapping!==Zl?QWe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",pn.colorspace_pars_fragment,JWe("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(km).join(`
`)),s=wR(s),s=P7(s,t),s=R7(s,t),a=wR(a),a=P7(a,t),a=R7(a,t),s=O7(s),a=O7(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(b=`#version 300 es
`,p=[m,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+p,w=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===yR?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===yR?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+w);const v=b+p+s,S=b+w+a,x=D7(i,i.VERTEX_SHADER,v),M=D7(i,i.FRAGMENT_SHADER,S);i.attachShader(y,x),i.attachShader(y,M),t.index0AttributeName!==void 0?i.bindAttribLocation(y,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y);function A(R){if(n.debug.checkShaderErrors){const B=i.getProgramInfoLog(y).trim(),F=i.getShaderInfoLog(x).trim(),U=i.getShaderInfoLog(M).trim();let N=!0,I=!0;if(i.getProgramParameter(y,i.LINK_STATUS)===!1)if(N=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,y,x,M);else{const V=N7(i,x,"vertex"),L=N7(i,M,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(y,i.VALIDATE_STATUS)+`

Material Name: `+R.name+`
Material Type: `+R.type+`

Program Info Log: `+B+`
`+V+`
`+L)}else B!==""?console.warn("THREE.WebGLProgram: Program Info Log:",B):(F===""||U==="")&&(I=!1);I&&(R.diagnostics={runnable:N,programLog:B,vertexShader:{log:F,prefix:p},fragmentShader:{log:U,prefix:w}})}i.deleteShader(x),i.deleteShader(M),T=new w_(i,y),C=rje(i,y)}let T;this.getUniforms=function(){return T===void 0&&A(this),T};let C;this.getAttributes=function(){return C===void 0&&A(this),C};let D=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return D===!1&&(D=i.getProgramParameter(y,XWe)),D},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=YWe++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=x,this.fragmentShader=M,this}let mje=0;class gje{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),o=this._getShaderStage(r),s=this._getShaderCacheForMaterial(e);return s.has(i)===!1&&(s.add(i),i.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new vje(e),t.set(e,r)),r}}class vje{constructor(e){this.id=mje++,this.code=e,this.usedTimes=0}}function yje(n,e,t,r,i,o,s){const a=new wh,l=new gje,u=new Set,c=[],f=i.isWebGL2,d=i.logarithmicDepthBuffer,h=i.vertexTextures;let m=i.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(C){return u.add(C),C===0?"uv":`uv${C}`}function p(C,D,R,B,F){const U=B.fog,N=F.geometry,I=C.isMeshStandardMaterial?B.environment:null,V=(C.isMeshStandardMaterial?t:e).get(C.envMap||I),L=V&&V.mapping===hv?V.image.height:null,X=g[C.type];C.precision!==null&&(m=i.getMaxPrecision(C.precision),m!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",m,"instead."));const Z=N.morphAttributes.position||N.morphAttributes.normal||N.morphAttributes.color,te=Z!==void 0?Z.length:0;let Y=0;N.morphAttributes.position!==void 0&&(Y=1),N.morphAttributes.normal!==void 0&&(Y=2),N.morphAttributes.color!==void 0&&(Y=3);let re,fe,ue,ge;if(X){const _e=Ya[X];re=_e.vertexShader,fe=_e.fragmentShader}else re=C.vertexShader,fe=C.fragmentShader,l.update(C),ue=l.getVertexShaderID(C),ge=l.getFragmentShaderID(C);const Se=n.getRenderTarget(),xe=F.isInstancedMesh===!0,De=F.isBatchedMesh===!0,Ae=!!C.map,ie=!!C.matcap,Re=!!V,Pe=!!C.aoMap,ee=!!C.lightMap,oe=!!C.bumpMap,Me=!!C.normalMap,se=!!C.displacementMap,G=!!C.emissiveMap,j=!!C.metalnessMap,he=!!C.roughnessMap,Ce=C.anisotropy>0,q=C.clearcoat>0,J=C.iridescence>0,ye=C.sheen>0,we=C.transmission>0,ke=Ce&&!!C.anisotropyMap,Fe=q&&!!C.clearcoatMap,He=q&&!!C.clearcoatNormalMap,Ie=q&&!!C.clearcoatRoughnessMap,Ze=J&&!!C.iridescenceMap,qe=J&&!!C.iridescenceThicknessMap,lt=ye&&!!C.sheenColorMap,at=ye&&!!C.sheenRoughnessMap,Je=!!C.specularMap,Ee=!!C.specularColorMap,$=!!C.specularIntensityMap,ce=we&&!!C.transmissionMap,Ne=we&&!!C.thicknessMap,Ge=!!C.gradientMap,de=!!C.alphaMap,Ye=C.alphaTest>0,W=!!C.alphaHash,ne=!!C.extensions;let le=Zl;C.toneMapped&&(Se===null||Se.isXRRenderTarget===!0)&&(le=n.toneMapping);const ve={isWebGL2:f,shaderID:X,shaderType:C.type,shaderName:C.name,vertexShader:re,fragmentShader:fe,defines:C.defines,customVertexShaderID:ue,customFragmentShaderID:ge,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:m,batching:De,instancing:xe,instancingColor:xe&&F.instanceColor!==null,supportsVertexTextures:h,outputColorSpace:Se===null?n.outputColorSpace:Se.isXRRenderTarget===!0?Se.texture.colorSpace:su,alphaToCoverage:!!C.alphaToCoverage,map:Ae,matcap:ie,envMap:Re,envMapMode:Re&&V.mapping,envMapCubeUVHeight:L,aoMap:Pe,lightMap:ee,bumpMap:oe,normalMap:Me,displacementMap:h&&se,emissiveMap:G,normalMapObjectSpace:Me&&C.normalMapType===Yte,normalMapTangentSpace:Me&&C.normalMapType===ud,metalnessMap:j,roughnessMap:he,anisotropy:Ce,anisotropyMap:ke,clearcoat:q,clearcoatMap:Fe,clearcoatNormalMap:He,clearcoatRoughnessMap:Ie,iridescence:J,iridescenceMap:Ze,iridescenceThicknessMap:qe,sheen:ye,sheenColorMap:lt,sheenRoughnessMap:at,specularMap:Je,specularColorMap:Ee,specularIntensityMap:$,transmission:we,transmissionMap:ce,thicknessMap:Ne,gradientMap:Ge,opaque:C.transparent===!1&&C.blending===yh&&C.alphaToCoverage===!1,alphaMap:de,alphaTest:Ye,alphaHash:W,combine:C.combine,mapUv:Ae&&y(C.map.channel),aoMapUv:Pe&&y(C.aoMap.channel),lightMapUv:ee&&y(C.lightMap.channel),bumpMapUv:oe&&y(C.bumpMap.channel),normalMapUv:Me&&y(C.normalMap.channel),displacementMapUv:se&&y(C.displacementMap.channel),emissiveMapUv:G&&y(C.emissiveMap.channel),metalnessMapUv:j&&y(C.metalnessMap.channel),roughnessMapUv:he&&y(C.roughnessMap.channel),anisotropyMapUv:ke&&y(C.anisotropyMap.channel),clearcoatMapUv:Fe&&y(C.clearcoatMap.channel),clearcoatNormalMapUv:He&&y(C.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ie&&y(C.clearcoatRoughnessMap.channel),iridescenceMapUv:Ze&&y(C.iridescenceMap.channel),iridescenceThicknessMapUv:qe&&y(C.iridescenceThicknessMap.channel),sheenColorMapUv:lt&&y(C.sheenColorMap.channel),sheenRoughnessMapUv:at&&y(C.sheenRoughnessMap.channel),specularMapUv:Je&&y(C.specularMap.channel),specularColorMapUv:Ee&&y(C.specularColorMap.channel),specularIntensityMapUv:$&&y(C.specularIntensityMap.channel),transmissionMapUv:ce&&y(C.transmissionMap.channel),thicknessMapUv:Ne&&y(C.thicknessMap.channel),alphaMapUv:de&&y(C.alphaMap.channel),vertexTangents:!!N.attributes.tangent&&(Me||Ce),vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!N.attributes.color&&N.attributes.color.itemSize===4,pointsUvs:F.isPoints===!0&&!!N.attributes.uv&&(Ae||de),fog:!!U,useFog:C.fog===!0,fogExp2:!!U&&U.isFogExp2,flatShading:C.flatShading===!0,sizeAttenuation:C.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:F.isSkinnedMesh===!0,morphTargets:N.morphAttributes.position!==void 0,morphNormals:N.morphAttributes.normal!==void 0,morphColors:N.morphAttributes.color!==void 0,morphTargetsCount:te,morphTextureStride:Y,numDirLights:D.directional.length,numPointLights:D.point.length,numSpotLights:D.spot.length,numSpotLightMaps:D.spotLightMap.length,numRectAreaLights:D.rectArea.length,numHemiLights:D.hemi.length,numDirLightShadows:D.directionalShadowMap.length,numPointLightShadows:D.pointShadowMap.length,numSpotLightShadows:D.spotShadowMap.length,numSpotLightShadowsWithMaps:D.numSpotLightShadowsWithMaps,numLightProbes:D.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:C.dithering,shadowMapEnabled:n.shadowMap.enabled&&R.length>0,shadowMapType:n.shadowMap.type,toneMapping:le,useLegacyLights:n._useLegacyLights,decodeVideoTexture:Ae&&C.map.isVideoTexture===!0&&Gn.getTransfer(C.map.colorSpace)===ur,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===ma,flipSided:C.side===yo,useDepthPacking:C.depthPacking>=0,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionDerivatives:ne&&C.extensions.derivatives===!0,extensionFragDepth:ne&&C.extensions.fragDepth===!0,extensionDrawBuffers:ne&&C.extensions.drawBuffers===!0,extensionShaderTextureLOD:ne&&C.extensions.shaderTextureLOD===!0,extensionClipCullDistance:ne&&C.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:ne&&C.extensions.multiDraw===!0&&r.has("WEBGL_multi_draw"),rendererExtensionFragDepth:f||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:f||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:f||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:C.customProgramCacheKey()};return ve.vertexUv1s=u.has(1),ve.vertexUv2s=u.has(2),ve.vertexUv3s=u.has(3),u.clear(),ve}function w(C){const D=[];if(C.shaderID?D.push(C.shaderID):(D.push(C.customVertexShaderID),D.push(C.customFragmentShaderID)),C.defines!==void 0)for(const R in C.defines)D.push(R),D.push(C.defines[R]);return C.isRawShaderMaterial===!1&&(b(D,C),v(D,C),D.push(n.outputColorSpace)),D.push(C.customProgramCacheKey),D.join()}function b(C,D){C.push(D.precision),C.push(D.outputColorSpace),C.push(D.envMapMode),C.push(D.envMapCubeUVHeight),C.push(D.mapUv),C.push(D.alphaMapUv),C.push(D.lightMapUv),C.push(D.aoMapUv),C.push(D.bumpMapUv),C.push(D.normalMapUv),C.push(D.displacementMapUv),C.push(D.emissiveMapUv),C.push(D.metalnessMapUv),C.push(D.roughnessMapUv),C.push(D.anisotropyMapUv),C.push(D.clearcoatMapUv),C.push(D.clearcoatNormalMapUv),C.push(D.clearcoatRoughnessMapUv),C.push(D.iridescenceMapUv),C.push(D.iridescenceThicknessMapUv),C.push(D.sheenColorMapUv),C.push(D.sheenRoughnessMapUv),C.push(D.specularMapUv),C.push(D.specularColorMapUv),C.push(D.specularIntensityMapUv),C.push(D.transmissionMapUv),C.push(D.thicknessMapUv),C.push(D.combine),C.push(D.fogExp2),C.push(D.sizeAttenuation),C.push(D.morphTargetsCount),C.push(D.morphAttributeCount),C.push(D.numDirLights),C.push(D.numPointLights),C.push(D.numSpotLights),C.push(D.numSpotLightMaps),C.push(D.numHemiLights),C.push(D.numRectAreaLights),C.push(D.numDirLightShadows),C.push(D.numPointLightShadows),C.push(D.numSpotLightShadows),C.push(D.numSpotLightShadowsWithMaps),C.push(D.numLightProbes),C.push(D.shadowMapType),C.push(D.toneMapping),C.push(D.numClippingPlanes),C.push(D.numClipIntersection),C.push(D.depthPacking)}function v(C,D){a.disableAll(),D.isWebGL2&&a.enable(0),D.supportsVertexTextures&&a.enable(1),D.instancing&&a.enable(2),D.instancingColor&&a.enable(3),D.matcap&&a.enable(4),D.envMap&&a.enable(5),D.normalMapObjectSpace&&a.enable(6),D.normalMapTangentSpace&&a.enable(7),D.clearcoat&&a.enable(8),D.iridescence&&a.enable(9),D.alphaTest&&a.enable(10),D.vertexColors&&a.enable(11),D.vertexAlphas&&a.enable(12),D.vertexUv1s&&a.enable(13),D.vertexUv2s&&a.enable(14),D.vertexUv3s&&a.enable(15),D.vertexTangents&&a.enable(16),D.anisotropy&&a.enable(17),D.alphaHash&&a.enable(18),D.batching&&a.enable(19),C.push(a.mask),a.disableAll(),D.fog&&a.enable(0),D.useFog&&a.enable(1),D.flatShading&&a.enable(2),D.logarithmicDepthBuffer&&a.enable(3),D.skinning&&a.enable(4),D.morphTargets&&a.enable(5),D.morphNormals&&a.enable(6),D.morphColors&&a.enable(7),D.premultipliedAlpha&&a.enable(8),D.shadowMapEnabled&&a.enable(9),D.useLegacyLights&&a.enable(10),D.doubleSided&&a.enable(11),D.flipSided&&a.enable(12),D.useDepthPacking&&a.enable(13),D.dithering&&a.enable(14),D.transmission&&a.enable(15),D.sheen&&a.enable(16),D.opaque&&a.enable(17),D.pointsUvs&&a.enable(18),D.decodeVideoTexture&&a.enable(19),D.alphaToCoverage&&a.enable(20),C.push(a.mask)}function S(C){const D=g[C.type];let R;if(D){const B=Ya[D];R=gL.clone(B.uniforms)}else R=C.uniforms;return R}function x(C,D){let R;for(let B=0,F=c.length;B<F;B++){const U=c[B];if(U.cacheKey===D){R=U,++R.usedTimes;break}}return R===void 0&&(R=new pje(n,D,C,o),c.push(R)),R}function M(C){if(--C.usedTimes===0){const D=c.indexOf(C);c[D]=c[c.length-1],c.pop(),C.destroy()}}function A(C){l.remove(C)}function T(){l.dispose()}return{getParameters:p,getProgramCacheKey:w,getUniforms:S,acquireProgram:x,releaseProgram:M,releaseShaderCache:A,programs:c,dispose:T}}function xje(){let n=new WeakMap;function e(o){let s=n.get(o);return s===void 0&&(s={},n.set(o,s)),s}function t(o){n.delete(o)}function r(o,s,a){n.get(o)[s]=a}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function bje(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function I7(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function L7(){const n=[];let e=0;const t=[],r=[],i=[];function o(){e=0,t.length=0,r.length=0,i.length=0}function s(f,d,h,m,g,y){let p=n[e];return p===void 0?(p={id:f.id,object:f,geometry:d,material:h,groupOrder:m,renderOrder:f.renderOrder,z:g,group:y},n[e]=p):(p.id=f.id,p.object=f,p.geometry=d,p.material=h,p.groupOrder=m,p.renderOrder=f.renderOrder,p.z=g,p.group=y),e++,p}function a(f,d,h,m,g,y){const p=s(f,d,h,m,g,y);h.transmission>0?r.push(p):h.transparent===!0?i.push(p):t.push(p)}function l(f,d,h,m,g,y){const p=s(f,d,h,m,g,y);h.transmission>0?r.unshift(p):h.transparent===!0?i.unshift(p):t.unshift(p)}function u(f,d){t.length>1&&t.sort(f||bje),r.length>1&&r.sort(d||I7),i.length>1&&i.sort(d||I7)}function c(){for(let f=e,d=n.length;f<d;f++){const h=n[f];if(h.id===null)break;h.id=null,h.object=null,h.geometry=null,h.material=null,h.group=null}}return{opaque:t,transmissive:r,transparent:i,init:o,push:a,unshift:l,finish:c,sort:u}}function wje(){let n=new WeakMap;function e(r,i){const o=n.get(r);let s;return o===void 0?(s=new L7,n.set(r,[s])):i>=o.length?(s=new L7,o.push(s)):s=o[i],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function Sje(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new me,color:new gt};break;case"SpotLight":t={position:new me,direction:new me,color:new gt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new me,color:new gt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new me,skyColor:new gt,groundColor:new gt};break;case"RectAreaLight":t={color:new gt,position:new me,halfWidth:new me,halfHeight:new me};break}return n[e.id]=t,t}}}function _je(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new nt};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new nt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new nt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let Eje=0;function Mje(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Cje(n,e){const t=new Sje,r=_je(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new me);const o=new me,s=new Qt,a=new Qt;function l(c,f){let d=0,h=0,m=0;for(let R=0;R<9;R++)i.probe[R].set(0,0,0);let g=0,y=0,p=0,w=0,b=0,v=0,S=0,x=0,M=0,A=0,T=0;c.sort(Mje);const C=f===!0?Math.PI:1;for(let R=0,B=c.length;R<B;R++){const F=c[R],U=F.color,N=F.intensity,I=F.distance,V=F.shadow&&F.shadow.map?F.shadow.map.texture:null;if(F.isAmbientLight)d+=U.r*N*C,h+=U.g*N*C,m+=U.b*N*C;else if(F.isLightProbe){for(let L=0;L<9;L++)i.probe[L].addScaledVector(F.sh.coefficients[L],N);T++}else if(F.isDirectionalLight){const L=t.get(F);if(L.color.copy(F.color).multiplyScalar(F.intensity*C),F.castShadow){const X=F.shadow,Z=r.get(F);Z.shadowBias=X.bias,Z.shadowNormalBias=X.normalBias,Z.shadowRadius=X.radius,Z.shadowMapSize=X.mapSize,i.directionalShadow[g]=Z,i.directionalShadowMap[g]=V,i.directionalShadowMatrix[g]=F.shadow.matrix,v++}i.directional[g]=L,g++}else if(F.isSpotLight){const L=t.get(F);L.position.setFromMatrixPosition(F.matrixWorld),L.color.copy(U).multiplyScalar(N*C),L.distance=I,L.coneCos=Math.cos(F.angle),L.penumbraCos=Math.cos(F.angle*(1-F.penumbra)),L.decay=F.decay,i.spot[p]=L;const X=F.shadow;if(F.map&&(i.spotLightMap[M]=F.map,M++,X.updateMatrices(F),F.castShadow&&A++),i.spotLightMatrix[p]=X.matrix,F.castShadow){const Z=r.get(F);Z.shadowBias=X.bias,Z.shadowNormalBias=X.normalBias,Z.shadowRadius=X.radius,Z.shadowMapSize=X.mapSize,i.spotShadow[p]=Z,i.spotShadowMap[p]=V,x++}p++}else if(F.isRectAreaLight){const L=t.get(F);L.color.copy(U).multiplyScalar(N),L.halfWidth.set(F.width*.5,0,0),L.halfHeight.set(0,F.height*.5,0),i.rectArea[w]=L,w++}else if(F.isPointLight){const L=t.get(F);if(L.color.copy(F.color).multiplyScalar(F.intensity*C),L.distance=F.distance,L.decay=F.decay,F.castShadow){const X=F.shadow,Z=r.get(F);Z.shadowBias=X.bias,Z.shadowNormalBias=X.normalBias,Z.shadowRadius=X.radius,Z.shadowMapSize=X.mapSize,Z.shadowCameraNear=X.camera.near,Z.shadowCameraFar=X.camera.far,i.pointShadow[y]=Z,i.pointShadowMap[y]=V,i.pointShadowMatrix[y]=F.shadow.matrix,S++}i.point[y]=L,y++}else if(F.isHemisphereLight){const L=t.get(F);L.skyColor.copy(F.color).multiplyScalar(N*C),L.groundColor.copy(F.groundColor).multiplyScalar(N*C),i.hemi[b]=L,b++}}w>0&&(e.isWebGL2?n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=dt.LTC_FLOAT_1,i.rectAreaLTC2=dt.LTC_FLOAT_2):(i.rectAreaLTC1=dt.LTC_HALF_1,i.rectAreaLTC2=dt.LTC_HALF_2):n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=dt.LTC_FLOAT_1,i.rectAreaLTC2=dt.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=dt.LTC_HALF_1,i.rectAreaLTC2=dt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=d,i.ambient[1]=h,i.ambient[2]=m;const D=i.hash;(D.directionalLength!==g||D.pointLength!==y||D.spotLength!==p||D.rectAreaLength!==w||D.hemiLength!==b||D.numDirectionalShadows!==v||D.numPointShadows!==S||D.numSpotShadows!==x||D.numSpotMaps!==M||D.numLightProbes!==T)&&(i.directional.length=g,i.spot.length=p,i.rectArea.length=w,i.point.length=y,i.hemi.length=b,i.directionalShadow.length=v,i.directionalShadowMap.length=v,i.pointShadow.length=S,i.pointShadowMap.length=S,i.spotShadow.length=x,i.spotShadowMap.length=x,i.directionalShadowMatrix.length=v,i.pointShadowMatrix.length=S,i.spotLightMatrix.length=x+M-A,i.spotLightMap.length=M,i.numSpotLightShadowsWithMaps=A,i.numLightProbes=T,D.directionalLength=g,D.pointLength=y,D.spotLength=p,D.rectAreaLength=w,D.hemiLength=b,D.numDirectionalShadows=v,D.numPointShadows=S,D.numSpotShadows=x,D.numSpotMaps=M,D.numLightProbes=T,i.version=Eje++)}function u(c,f){let d=0,h=0,m=0,g=0,y=0;const p=f.matrixWorldInverse;for(let w=0,b=c.length;w<b;w++){const v=c[w];if(v.isDirectionalLight){const S=i.directional[d];S.direction.setFromMatrixPosition(v.matrixWorld),o.setFromMatrixPosition(v.target.matrixWorld),S.direction.sub(o),S.direction.transformDirection(p),d++}else if(v.isSpotLight){const S=i.spot[m];S.position.setFromMatrixPosition(v.matrixWorld),S.position.applyMatrix4(p),S.direction.setFromMatrixPosition(v.matrixWorld),o.setFromMatrixPosition(v.target.matrixWorld),S.direction.sub(o),S.direction.transformDirection(p),m++}else if(v.isRectAreaLight){const S=i.rectArea[g];S.position.setFromMatrixPosition(v.matrixWorld),S.position.applyMatrix4(p),a.identity(),s.copy(v.matrixWorld),s.premultiply(p),a.extractRotation(s),S.halfWidth.set(v.width*.5,0,0),S.halfHeight.set(0,v.height*.5,0),S.halfWidth.applyMatrix4(a),S.halfHeight.applyMatrix4(a),g++}else if(v.isPointLight){const S=i.point[h];S.position.setFromMatrixPosition(v.matrixWorld),S.position.applyMatrix4(p),h++}else if(v.isHemisphereLight){const S=i.hemi[y];S.direction.setFromMatrixPosition(v.matrixWorld),S.direction.transformDirection(p),y++}}}return{setup:l,setupView:u,state:i}}function F7(n,e){const t=new Cje(n,e),r=[],i=[];function o(){r.length=0,i.length=0}function s(f){r.push(f)}function a(f){i.push(f)}function l(f){t.setup(r,f)}function u(f){t.setupView(r,f)}return{init:o,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:l,setupLightsView:u,pushLight:s,pushShadow:a}}function Aje(n,e){let t=new WeakMap;function r(o,s=0){const a=t.get(o);let l;return a===void 0?(l=new F7(n,e),t.set(o,[l])):s>=a.length?(l=new F7(n,e),a.push(l)):l=a[s],l}function i(){t=new WeakMap}return{get:r,dispose:i}}class yL extends Ji{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=qte,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class xL extends Ji{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Tje=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Dje=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Nje(n,e,t){let r=new mx;const i=new nt,o=new nt,s=new Kn,a=new yL({depthPacking:Xte}),l=new xL,u={},c=t.maxTextureSize,f={[hc]:yo,[yo]:hc,[ma]:ma},d=new Ra({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new nt},radius:{value:4}},vertexShader:Tje,fragmentShader:Dje}),h=d.clone();h.defines.HORIZONTAL_PASS=1;const m=new sn;m.setAttribute("position",new $n(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new ui(m,d),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=W2;let p=this.type;this.render=function(x,M,A){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||x.length===0)return;const T=n.getRenderTarget(),C=n.getActiveCubeFace(),D=n.getActiveMipmapLevel(),R=n.state;R.setBlending(Qu),R.buffers.color.setClear(1,1,1,1),R.buffers.depth.setTest(!0),R.setScissorTest(!1);const B=p!==ja&&this.type===ja,F=p===ja&&this.type!==ja;for(let U=0,N=x.length;U<N;U++){const I=x[U],V=I.shadow;if(V===void 0){console.warn("THREE.WebGLShadowMap:",I,"has no shadow.");continue}if(V.autoUpdate===!1&&V.needsUpdate===!1)continue;i.copy(V.mapSize);const L=V.getFrameExtents();if(i.multiply(L),o.copy(V.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(o.x=Math.floor(c/L.x),i.x=o.x*L.x,V.mapSize.x=o.x),i.y>c&&(o.y=Math.floor(c/L.y),i.y=o.y*L.y,V.mapSize.y=o.y)),V.map===null||B===!0||F===!0){const Z=this.type!==ja?{minFilter:Zr,magFilter:Zr}:{};V.map!==null&&V.map.dispose(),V.map=new Pa(i.x,i.y,Z),V.map.texture.name=I.name+".shadowMap",V.camera.updateProjectionMatrix()}n.setRenderTarget(V.map),n.clear();const X=V.getViewportCount();for(let Z=0;Z<X;Z++){const te=V.getViewport(Z);s.set(o.x*te.x,o.y*te.y,o.x*te.z,o.y*te.w),R.viewport(s),V.updateMatrices(I,Z),r=V.getFrustum(),v(M,A,V.camera,I,this.type)}V.isPointLightShadow!==!0&&this.type===ja&&w(V,A),V.needsUpdate=!1}p=this.type,y.needsUpdate=!1,n.setRenderTarget(T,C,D)};function w(x,M){const A=e.update(g);d.defines.VSM_SAMPLES!==x.blurSamples&&(d.defines.VSM_SAMPLES=x.blurSamples,h.defines.VSM_SAMPLES=x.blurSamples,d.needsUpdate=!0,h.needsUpdate=!0),x.mapPass===null&&(x.mapPass=new Pa(i.x,i.y)),d.uniforms.shadow_pass.value=x.map.texture,d.uniforms.resolution.value=x.mapSize,d.uniforms.radius.value=x.radius,n.setRenderTarget(x.mapPass),n.clear(),n.renderBufferDirect(M,null,A,d,g,null),h.uniforms.shadow_pass.value=x.mapPass.texture,h.uniforms.resolution.value=x.mapSize,h.uniforms.radius.value=x.radius,n.setRenderTarget(x.map),n.clear(),n.renderBufferDirect(M,null,A,h,g,null)}function b(x,M,A,T){let C=null;const D=A.isPointLight===!0?x.customDistanceMaterial:x.customDepthMaterial;if(D!==void 0)C=D;else if(C=A.isPointLight===!0?l:a,n.localClippingEnabled&&M.clipShadows===!0&&Array.isArray(M.clippingPlanes)&&M.clippingPlanes.length!==0||M.displacementMap&&M.displacementScale!==0||M.alphaMap&&M.alphaTest>0||M.map&&M.alphaTest>0){const R=C.uuid,B=M.uuid;let F=u[R];F===void 0&&(F={},u[R]=F);let U=F[B];U===void 0&&(U=C.clone(),F[B]=U,M.addEventListener("dispose",S)),C=U}if(C.visible=M.visible,C.wireframe=M.wireframe,T===ja?C.side=M.shadowSide!==null?M.shadowSide:M.side:C.side=M.shadowSide!==null?M.shadowSide:f[M.side],C.alphaMap=M.alphaMap,C.alphaTest=M.alphaTest,C.map=M.map,C.clipShadows=M.clipShadows,C.clippingPlanes=M.clippingPlanes,C.clipIntersection=M.clipIntersection,C.displacementMap=M.displacementMap,C.displacementScale=M.displacementScale,C.displacementBias=M.displacementBias,C.wireframeLinewidth=M.wireframeLinewidth,C.linewidth=M.linewidth,A.isPointLight===!0&&C.isMeshDistanceMaterial===!0){const R=n.properties.get(C);R.light=A}return C}function v(x,M,A,T,C){if(x.visible===!1)return;if(x.layers.test(M.layers)&&(x.isMesh||x.isLine||x.isPoints)&&(x.castShadow||x.receiveShadow&&C===ja)&&(!x.frustumCulled||r.intersectsObject(x))){x.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,x.matrixWorld);const B=e.update(x),F=x.material;if(Array.isArray(F)){const U=B.groups;for(let N=0,I=U.length;N<I;N++){const V=U[N],L=F[V.materialIndex];if(L&&L.visible){const X=b(x,L,T,C);x.onBeforeShadow(n,x,M,A,B,X,V),n.renderBufferDirect(A,null,B,X,x,V),x.onAfterShadow(n,x,M,A,B,X,V)}}}else if(F.visible){const U=b(x,F,T,C);x.onBeforeShadow(n,x,M,A,B,U,null),n.renderBufferDirect(A,null,B,U,x,null),x.onAfterShadow(n,x,M,A,B,U,null)}}const R=x.children;for(let B=0,F=R.length;B<F;B++)v(R[B],M,A,T,C)}function S(x){x.target.removeEventListener("dispose",S);for(const A in u){const T=u[A],C=x.target.uuid;C in T&&(T[C].dispose(),delete T[C])}}}function Pje(n,e,t){const r=t.isWebGL2;function i(){let de=!1;const Ye=new Kn;let W=null;const ne=new Kn(0,0,0,0);return{setMask:function(le){W!==le&&!de&&(n.colorMask(le,le,le,le),W=le)},setLocked:function(le){de=le},setClear:function(le,ve,_e,Oe,Ve){Ve===!0&&(le*=Oe,ve*=Oe,_e*=Oe),Ye.set(le,ve,_e,Oe),ne.equals(Ye)===!1&&(n.clearColor(le,ve,_e,Oe),ne.copy(Ye))},reset:function(){de=!1,W=null,ne.set(-1,0,0,0)}}}function o(){let de=!1,Ye=null,W=null,ne=null;return{setTest:function(le){le?xe(n.DEPTH_TEST):De(n.DEPTH_TEST)},setMask:function(le){Ye!==le&&!de&&(n.depthMask(le),Ye=le)},setFunc:function(le){if(W!==le){switch(le){case wte:n.depthFunc(n.NEVER);break;case Ste:n.depthFunc(n.ALWAYS);break;case _te:n.depthFunc(n.LESS);break;case Zy:n.depthFunc(n.LEQUAL);break;case Ete:n.depthFunc(n.EQUAL);break;case Mte:n.depthFunc(n.GEQUAL);break;case Cte:n.depthFunc(n.GREATER);break;case Ate:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}W=le}},setLocked:function(le){de=le},setClear:function(le){ne!==le&&(n.clearDepth(le),ne=le)},reset:function(){de=!1,Ye=null,W=null,ne=null}}}function s(){let de=!1,Ye=null,W=null,ne=null,le=null,ve=null,_e=null,Oe=null,Ve=null;return{setTest:function(Xe){de||(Xe?xe(n.STENCIL_TEST):De(n.STENCIL_TEST))},setMask:function(Xe){Ye!==Xe&&!de&&(n.stencilMask(Xe),Ye=Xe)},setFunc:function(Xe,rt,ht){(W!==Xe||ne!==rt||le!==ht)&&(n.stencilFunc(Xe,rt,ht),W=Xe,ne=rt,le=ht)},setOp:function(Xe,rt,ht){(ve!==Xe||_e!==rt||Oe!==ht)&&(n.stencilOp(Xe,rt,ht),ve=Xe,_e=rt,Oe=ht)},setLocked:function(Xe){de=Xe},setClear:function(Xe){Ve!==Xe&&(n.clearStencil(Xe),Ve=Xe)},reset:function(){de=!1,Ye=null,W=null,ne=null,le=null,ve=null,_e=null,Oe=null,Ve=null}}}const a=new i,l=new o,u=new s,c=new WeakMap,f=new WeakMap;let d={},h={},m=new WeakMap,g=[],y=null,p=!1,w=null,b=null,v=null,S=null,x=null,M=null,A=null,T=new gt(0,0,0),C=0,D=!1,R=null,B=null,F=null,U=null,N=null;const I=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let V=!1,L=0;const X=n.getParameter(n.VERSION);X.indexOf("WebGL")!==-1?(L=parseFloat(/^WebGL (\d)/.exec(X)[1]),V=L>=1):X.indexOf("OpenGL ES")!==-1&&(L=parseFloat(/^OpenGL ES (\d)/.exec(X)[1]),V=L>=2);let Z=null,te={};const Y=n.getParameter(n.SCISSOR_BOX),re=n.getParameter(n.VIEWPORT),fe=new Kn().fromArray(Y),ue=new Kn().fromArray(re);function ge(de,Ye,W,ne){const le=new Uint8Array(4),ve=n.createTexture();n.bindTexture(de,ve),n.texParameteri(de,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(de,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let _e=0;_e<W;_e++)r&&(de===n.TEXTURE_3D||de===n.TEXTURE_2D_ARRAY)?n.texImage3D(Ye,0,n.RGBA,1,1,ne,0,n.RGBA,n.UNSIGNED_BYTE,le):n.texImage2D(Ye+_e,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,le);return ve}const Se={};Se[n.TEXTURE_2D]=ge(n.TEXTURE_2D,n.TEXTURE_2D,1),Se[n.TEXTURE_CUBE_MAP]=ge(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(Se[n.TEXTURE_2D_ARRAY]=ge(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Se[n.TEXTURE_3D]=ge(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),u.setClear(0),xe(n.DEPTH_TEST),l.setFunc(Zy),se(!1),G(zP),xe(n.CULL_FACE),oe(Qu);function xe(de){d[de]!==!0&&(n.enable(de),d[de]=!0)}function De(de){d[de]!==!1&&(n.disable(de),d[de]=!1)}function Ae(de,Ye){return h[de]!==Ye?(n.bindFramebuffer(de,Ye),h[de]=Ye,r&&(de===n.DRAW_FRAMEBUFFER&&(h[n.FRAMEBUFFER]=Ye),de===n.FRAMEBUFFER&&(h[n.DRAW_FRAMEBUFFER]=Ye)),!0):!1}function ie(de,Ye){let W=g,ne=!1;if(de)if(W=m.get(Ye),W===void 0&&(W=[],m.set(Ye,W)),de.isWebGLMultipleRenderTargets){const le=de.texture;if(W.length!==le.length||W[0]!==n.COLOR_ATTACHMENT0){for(let ve=0,_e=le.length;ve<_e;ve++)W[ve]=n.COLOR_ATTACHMENT0+ve;W.length=le.length,ne=!0}}else W[0]!==n.COLOR_ATTACHMENT0&&(W[0]=n.COLOR_ATTACHMENT0,ne=!0);else W[0]!==n.BACK&&(W[0]=n.BACK,ne=!0);ne&&(t.isWebGL2?n.drawBuffers(W):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(W))}function Re(de){return y!==de?(n.useProgram(de),y=de,!0):!1}const Pe={[tf]:n.FUNC_ADD,[ste]:n.FUNC_SUBTRACT,[ate]:n.FUNC_REVERSE_SUBTRACT};if(r)Pe[HP]=n.MIN,Pe[WP]=n.MAX;else{const de=e.get("EXT_blend_minmax");de!==null&&(Pe[HP]=de.MIN_EXT,Pe[WP]=de.MAX_EXT)}const ee={[lte]:n.ZERO,[ute]:n.ONE,[cte]:n.SRC_COLOR,[sM]:n.SRC_ALPHA,[gte]:n.SRC_ALPHA_SATURATE,[pte]:n.DST_COLOR,[dte]:n.DST_ALPHA,[fte]:n.ONE_MINUS_SRC_COLOR,[aM]:n.ONE_MINUS_SRC_ALPHA,[mte]:n.ONE_MINUS_DST_COLOR,[hte]:n.ONE_MINUS_DST_ALPHA,[vte]:n.CONSTANT_COLOR,[yte]:n.ONE_MINUS_CONSTANT_COLOR,[xte]:n.CONSTANT_ALPHA,[bte]:n.ONE_MINUS_CONSTANT_ALPHA};function oe(de,Ye,W,ne,le,ve,_e,Oe,Ve,Xe){if(de===Qu){p===!0&&(De(n.BLEND),p=!1);return}if(p===!1&&(xe(n.BLEND),p=!0),de!==ote){if(de!==w||Xe!==D){if((b!==tf||x!==tf)&&(n.blendEquation(n.FUNC_ADD),b=tf,x=tf),Xe)switch(de){case yh:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case UP:n.blendFunc(n.ONE,n.ONE);break;case VP:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case $P:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",de);break}else switch(de){case yh:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case UP:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case VP:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case $P:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",de);break}v=null,S=null,M=null,A=null,T.set(0,0,0),C=0,w=de,D=Xe}return}le=le||Ye,ve=ve||W,_e=_e||ne,(Ye!==b||le!==x)&&(n.blendEquationSeparate(Pe[Ye],Pe[le]),b=Ye,x=le),(W!==v||ne!==S||ve!==M||_e!==A)&&(n.blendFuncSeparate(ee[W],ee[ne],ee[ve],ee[_e]),v=W,S=ne,M=ve,A=_e),(Oe.equals(T)===!1||Ve!==C)&&(n.blendColor(Oe.r,Oe.g,Oe.b,Ve),T.copy(Oe),C=Ve),w=de,D=!1}function Me(de,Ye){de.side===ma?De(n.CULL_FACE):xe(n.CULL_FACE);let W=de.side===yo;Ye&&(W=!W),se(W),de.blending===yh&&de.transparent===!1?oe(Qu):oe(de.blending,de.blendEquation,de.blendSrc,de.blendDst,de.blendEquationAlpha,de.blendSrcAlpha,de.blendDstAlpha,de.blendColor,de.blendAlpha,de.premultipliedAlpha),l.setFunc(de.depthFunc),l.setTest(de.depthTest),l.setMask(de.depthWrite),a.setMask(de.colorWrite);const ne=de.stencilWrite;u.setTest(ne),ne&&(u.setMask(de.stencilWriteMask),u.setFunc(de.stencilFunc,de.stencilRef,de.stencilFuncMask),u.setOp(de.stencilFail,de.stencilZFail,de.stencilZPass)),he(de.polygonOffset,de.polygonOffsetFactor,de.polygonOffsetUnits),de.alphaToCoverage===!0?xe(n.SAMPLE_ALPHA_TO_COVERAGE):De(n.SAMPLE_ALPHA_TO_COVERAGE)}function se(de){R!==de&&(de?n.frontFace(n.CW):n.frontFace(n.CCW),R=de)}function G(de){de!==nte?(xe(n.CULL_FACE),de!==B&&(de===zP?n.cullFace(n.BACK):de===rte?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):De(n.CULL_FACE),B=de}function j(de){de!==F&&(V&&n.lineWidth(de),F=de)}function he(de,Ye,W){de?(xe(n.POLYGON_OFFSET_FILL),(U!==Ye||N!==W)&&(n.polygonOffset(Ye,W),U=Ye,N=W)):De(n.POLYGON_OFFSET_FILL)}function Ce(de){de?xe(n.SCISSOR_TEST):De(n.SCISSOR_TEST)}function q(de){de===void 0&&(de=n.TEXTURE0+I-1),Z!==de&&(n.activeTexture(de),Z=de)}function J(de,Ye,W){W===void 0&&(Z===null?W=n.TEXTURE0+I-1:W=Z);let ne=te[W];ne===void 0&&(ne={type:void 0,texture:void 0},te[W]=ne),(ne.type!==de||ne.texture!==Ye)&&(Z!==W&&(n.activeTexture(W),Z=W),n.bindTexture(de,Ye||Se[de]),ne.type=de,ne.texture=Ye)}function ye(){const de=te[Z];de!==void 0&&de.type!==void 0&&(n.bindTexture(de.type,null),de.type=void 0,de.texture=void 0)}function we(){try{n.compressedTexImage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function ke(){try{n.compressedTexImage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Fe(){try{n.texSubImage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function He(){try{n.texSubImage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Ie(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Ze(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function qe(){try{n.texStorage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function lt(){try{n.texStorage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function at(){try{n.texImage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Je(){try{n.texImage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Ee(de){fe.equals(de)===!1&&(n.scissor(de.x,de.y,de.z,de.w),fe.copy(de))}function $(de){ue.equals(de)===!1&&(n.viewport(de.x,de.y,de.z,de.w),ue.copy(de))}function ce(de,Ye){let W=f.get(Ye);W===void 0&&(W=new WeakMap,f.set(Ye,W));let ne=W.get(de);ne===void 0&&(ne=n.getUniformBlockIndex(Ye,de.name),W.set(de,ne))}function Ne(de,Ye){const ne=f.get(Ye).get(de);c.get(Ye)!==ne&&(n.uniformBlockBinding(Ye,ne,de.__bindingPointIndex),c.set(Ye,ne))}function Ge(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),r===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),d={},Z=null,te={},h={},m=new WeakMap,g=[],y=null,p=!1,w=null,b=null,v=null,S=null,x=null,M=null,A=null,T=new gt(0,0,0),C=0,D=!1,R=null,B=null,F=null,U=null,N=null,fe.set(0,0,n.canvas.width,n.canvas.height),ue.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),u.reset()}return{buffers:{color:a,depth:l,stencil:u},enable:xe,disable:De,bindFramebuffer:Ae,drawBuffers:ie,useProgram:Re,setBlending:oe,setMaterial:Me,setFlipSided:se,setCullFace:G,setLineWidth:j,setPolygonOffset:he,setScissorTest:Ce,activeTexture:q,bindTexture:J,unbindTexture:ye,compressedTexImage2D:we,compressedTexImage3D:ke,texImage2D:at,texImage3D:Je,updateUBOMapping:ce,uniformBlockBinding:Ne,texStorage2D:qe,texStorage3D:lt,texSubImage2D:Fe,texSubImage3D:He,compressedTexSubImage2D:Ie,compressedTexSubImage3D:Ze,scissor:Ee,viewport:$,reset:Ge}}function Rje(n,e,t,r,i,o,s){const a=i.isWebGL2,l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new WeakMap;let f;const d=new WeakMap;let h=!1;try{h=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function m(G,j){return h?new OffscreenCanvas(G,j):c1("canvas")}function g(G,j,he,Ce){let q=1;if((G.width>Ce||G.height>Ce)&&(q=Ce/Math.max(G.width,G.height)),q<1||j===!0)if(typeof HTMLImageElement<"u"&&G instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&G instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&G instanceof ImageBitmap){const J=j?cM:Math.floor,ye=J(q*G.width),we=J(q*G.height);f===void 0&&(f=m(ye,we));const ke=he?m(ye,we):f;return ke.width=ye,ke.height=we,ke.getContext("2d").drawImage(G,0,0,ye,we),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+G.width+"x"+G.height+") to ("+ye+"x"+we+")."),ke}else return"data"in G&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+G.width+"x"+G.height+")."),G;return G}function y(G){return xR(G.width)&&xR(G.height)}function p(G){return a?!1:G.wrapS!==po||G.wrapT!==po||G.minFilter!==Zr&&G.minFilter!==gr}function w(G,j){return G.generateMipmaps&&j&&G.minFilter!==Zr&&G.minFilter!==gr}function b(G){n.generateMipmap(G)}function v(G,j,he,Ce,q=!1){if(a===!1)return j;if(G!==null){if(n[G]!==void 0)return n[G];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+G+"'")}let J=j;if(j===n.RED&&(he===n.FLOAT&&(J=n.R32F),he===n.HALF_FLOAT&&(J=n.R16F),he===n.UNSIGNED_BYTE&&(J=n.R8)),j===n.RED_INTEGER&&(he===n.UNSIGNED_BYTE&&(J=n.R8UI),he===n.UNSIGNED_SHORT&&(J=n.R16UI),he===n.UNSIGNED_INT&&(J=n.R32UI),he===n.BYTE&&(J=n.R8I),he===n.SHORT&&(J=n.R16I),he===n.INT&&(J=n.R32I)),j===n.RG&&(he===n.FLOAT&&(J=n.RG32F),he===n.HALF_FLOAT&&(J=n.RG16F),he===n.UNSIGNED_BYTE&&(J=n.RG8)),j===n.RGBA){const ye=q?o1:Gn.getTransfer(Ce);he===n.FLOAT&&(J=n.RGBA32F),he===n.HALF_FLOAT&&(J=n.RGBA16F),he===n.UNSIGNED_BYTE&&(J=ye===ur?n.SRGB8_ALPHA8:n.RGBA8),he===n.UNSIGNED_SHORT_4_4_4_4&&(J=n.RGBA4),he===n.UNSIGNED_SHORT_5_5_5_1&&(J=n.RGB5_A1)}return(J===n.R16F||J===n.R32F||J===n.RG16F||J===n.RG32F||J===n.RGBA16F||J===n.RGBA32F)&&e.get("EXT_color_buffer_float"),J}function S(G,j,he){return w(G,he)===!0||G.isFramebufferTexture&&G.minFilter!==Zr&&G.minFilter!==gr?Math.log2(Math.max(j.width,j.height))+1:G.mipmaps!==void 0&&G.mipmaps.length>0?G.mipmaps.length:G.isCompressedTexture&&Array.isArray(G.image)?j.mipmaps.length:1}function x(G){return G===Zr||G===lM||G===qd?n.NEAREST:n.LINEAR}function M(G){const j=G.target;j.removeEventListener("dispose",M),T(j),j.isVideoTexture&&c.delete(j)}function A(G){const j=G.target;j.removeEventListener("dispose",A),D(j)}function T(G){const j=r.get(G);if(j.__webglInit===void 0)return;const he=G.source,Ce=d.get(he);if(Ce){const q=Ce[j.__cacheKey];q.usedTimes--,q.usedTimes===0&&C(G),Object.keys(Ce).length===0&&d.delete(he)}r.remove(G)}function C(G){const j=r.get(G);n.deleteTexture(j.__webglTexture);const he=G.source,Ce=d.get(he);delete Ce[j.__cacheKey],s.memory.textures--}function D(G){const j=G.texture,he=r.get(G),Ce=r.get(j);if(Ce.__webglTexture!==void 0&&(n.deleteTexture(Ce.__webglTexture),s.memory.textures--),G.depthTexture&&G.depthTexture.dispose(),G.isWebGLCubeRenderTarget)for(let q=0;q<6;q++){if(Array.isArray(he.__webglFramebuffer[q]))for(let J=0;J<he.__webglFramebuffer[q].length;J++)n.deleteFramebuffer(he.__webglFramebuffer[q][J]);else n.deleteFramebuffer(he.__webglFramebuffer[q]);he.__webglDepthbuffer&&n.deleteRenderbuffer(he.__webglDepthbuffer[q])}else{if(Array.isArray(he.__webglFramebuffer))for(let q=0;q<he.__webglFramebuffer.length;q++)n.deleteFramebuffer(he.__webglFramebuffer[q]);else n.deleteFramebuffer(he.__webglFramebuffer);if(he.__webglDepthbuffer&&n.deleteRenderbuffer(he.__webglDepthbuffer),he.__webglMultisampledFramebuffer&&n.deleteFramebuffer(he.__webglMultisampledFramebuffer),he.__webglColorRenderbuffer)for(let q=0;q<he.__webglColorRenderbuffer.length;q++)he.__webglColorRenderbuffer[q]&&n.deleteRenderbuffer(he.__webglColorRenderbuffer[q]);he.__webglDepthRenderbuffer&&n.deleteRenderbuffer(he.__webglDepthRenderbuffer)}if(G.isWebGLMultipleRenderTargets)for(let q=0,J=j.length;q<J;q++){const ye=r.get(j[q]);ye.__webglTexture&&(n.deleteTexture(ye.__webglTexture),s.memory.textures--),r.remove(j[q])}r.remove(j),r.remove(G)}let R=0;function B(){R=0}function F(){const G=R;return G>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+G+" texture units while this GPU supports only "+i.maxTextures),R+=1,G}function U(G){const j=[];return j.push(G.wrapS),j.push(G.wrapT),j.push(G.wrapR||0),j.push(G.magFilter),j.push(G.minFilter),j.push(G.anisotropy),j.push(G.internalFormat),j.push(G.format),j.push(G.type),j.push(G.generateMipmaps),j.push(G.premultiplyAlpha),j.push(G.flipY),j.push(G.unpackAlignment),j.push(G.colorSpace),j.join()}function N(G,j){const he=r.get(G);if(G.isVideoTexture&&Me(G),G.isRenderTargetTexture===!1&&G.version>0&&he.__version!==G.version){const Ce=G.image;if(Ce===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ce.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{fe(he,G,j);return}}t.bindTexture(n.TEXTURE_2D,he.__webglTexture,n.TEXTURE0+j)}function I(G,j){const he=r.get(G);if(G.version>0&&he.__version!==G.version){fe(he,G,j);return}t.bindTexture(n.TEXTURE_2D_ARRAY,he.__webglTexture,n.TEXTURE0+j)}function V(G,j){const he=r.get(G);if(G.version>0&&he.__version!==G.version){fe(he,G,j);return}t.bindTexture(n.TEXTURE_3D,he.__webglTexture,n.TEXTURE0+j)}function L(G,j){const he=r.get(G);if(G.version>0&&he.__version!==G.version){ue(he,G,j);return}t.bindTexture(n.TEXTURE_CUBE_MAP,he.__webglTexture,n.TEXTURE0+j)}const X={[e1]:n.REPEAT,[po]:n.CLAMP_TO_EDGE,[t1]:n.MIRRORED_REPEAT},Z={[Zr]:n.NEAREST,[lM]:n.NEAREST_MIPMAP_NEAREST,[qd]:n.NEAREST_MIPMAP_LINEAR,[gr]:n.LINEAR,[oy]:n.LINEAR_MIPMAP_NEAREST,[$l]:n.LINEAR_MIPMAP_LINEAR},te={[Kte]:n.NEVER,[nne]:n.ALWAYS,[Zte]:n.LESS,[cL]:n.LEQUAL,[Jte]:n.EQUAL,[tne]:n.GEQUAL,[Qte]:n.GREATER,[ene]:n.NOTEQUAL};function Y(G,j,he){if(j.type===Is&&e.has("OES_texture_float_linear")===!1&&(j.magFilter===gr||j.magFilter===oy||j.magFilter===qd||j.magFilter===$l||j.minFilter===gr||j.minFilter===oy||j.minFilter===qd||j.minFilter===$l)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),he?(n.texParameteri(G,n.TEXTURE_WRAP_S,X[j.wrapS]),n.texParameteri(G,n.TEXTURE_WRAP_T,X[j.wrapT]),(G===n.TEXTURE_3D||G===n.TEXTURE_2D_ARRAY)&&n.texParameteri(G,n.TEXTURE_WRAP_R,X[j.wrapR]),n.texParameteri(G,n.TEXTURE_MAG_FILTER,Z[j.magFilter]),n.texParameteri(G,n.TEXTURE_MIN_FILTER,Z[j.minFilter])):(n.texParameteri(G,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(G,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(G===n.TEXTURE_3D||G===n.TEXTURE_2D_ARRAY)&&n.texParameteri(G,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(j.wrapS!==po||j.wrapT!==po)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(G,n.TEXTURE_MAG_FILTER,x(j.magFilter)),n.texParameteri(G,n.TEXTURE_MIN_FILTER,x(j.minFilter)),j.minFilter!==Zr&&j.minFilter!==gr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),j.compareFunction&&(n.texParameteri(G,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(G,n.TEXTURE_COMPARE_FUNC,te[j.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Ce=e.get("EXT_texture_filter_anisotropic");if(j.magFilter===Zr||j.minFilter!==qd&&j.minFilter!==$l||j.type===Is&&e.has("OES_texture_float_linear")===!1||a===!1&&j.type===zh&&e.has("OES_texture_half_float_linear")===!1)return;(j.anisotropy>1||r.get(j).__currentAnisotropy)&&(n.texParameterf(G,Ce.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(j.anisotropy,i.getMaxAnisotropy())),r.get(j).__currentAnisotropy=j.anisotropy)}}function re(G,j){let he=!1;G.__webglInit===void 0&&(G.__webglInit=!0,j.addEventListener("dispose",M));const Ce=j.source;let q=d.get(Ce);q===void 0&&(q={},d.set(Ce,q));const J=U(j);if(J!==G.__cacheKey){q[J]===void 0&&(q[J]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,he=!0),q[J].usedTimes++;const ye=q[G.__cacheKey];ye!==void 0&&(q[G.__cacheKey].usedTimes--,ye.usedTimes===0&&C(j)),G.__cacheKey=J,G.__webglTexture=q[J].texture}return he}function fe(G,j,he){let Ce=n.TEXTURE_2D;(j.isDataArrayTexture||j.isCompressedArrayTexture)&&(Ce=n.TEXTURE_2D_ARRAY),j.isData3DTexture&&(Ce=n.TEXTURE_3D);const q=re(G,j),J=j.source;t.bindTexture(Ce,G.__webglTexture,n.TEXTURE0+he);const ye=r.get(J);if(J.version!==ye.__version||q===!0){t.activeTexture(n.TEXTURE0+he);const we=Gn.getPrimaries(Gn.workingColorSpace),ke=j.colorSpace===Ls?null:Gn.getPrimaries(j.colorSpace),Fe=j.colorSpace===Ls||we===ke?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,j.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,j.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,j.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Fe);const He=p(j)&&y(j.image)===!1;let Ie=g(j.image,He,!1,i.maxTextureSize);Ie=se(j,Ie);const Ze=y(Ie)||a,qe=o.convert(j.format,j.colorSpace);let lt=o.convert(j.type),at=v(j.internalFormat,qe,lt,j.colorSpace,j.isVideoTexture);Y(Ce,j,Ze);let Je;const Ee=j.mipmaps,$=a&&j.isVideoTexture!==!0&&at!==aL,ce=ye.__version===void 0||q===!0,Ne=J.dataReady,Ge=S(j,Ie,Ze);if(j.isDepthTexture)at=n.DEPTH_COMPONENT,a?j.type===Is?at=n.DEPTH_COMPONENT32F:j.type===ju?at=n.DEPTH_COMPONENT24:j.type===Af?at=n.DEPTH24_STENCIL8:at=n.DEPTH_COMPONENT16:j.type===Is&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),j.format===Tf&&at===n.DEPTH_COMPONENT&&j.type!==G2&&j.type!==ju&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),j.type=ju,lt=o.convert(j.type)),j.format===Uh&&at===n.DEPTH_COMPONENT&&(at=n.DEPTH_STENCIL,j.type!==Af&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),j.type=Af,lt=o.convert(j.type))),ce&&($?t.texStorage2D(n.TEXTURE_2D,1,at,Ie.width,Ie.height):t.texImage2D(n.TEXTURE_2D,0,at,Ie.width,Ie.height,0,qe,lt,null));else if(j.isDataTexture)if(Ee.length>0&&Ze){$&&ce&&t.texStorage2D(n.TEXTURE_2D,Ge,at,Ee[0].width,Ee[0].height);for(let de=0,Ye=Ee.length;de<Ye;de++)Je=Ee[de],$?Ne&&t.texSubImage2D(n.TEXTURE_2D,de,0,0,Je.width,Je.height,qe,lt,Je.data):t.texImage2D(n.TEXTURE_2D,de,at,Je.width,Je.height,0,qe,lt,Je.data);j.generateMipmaps=!1}else $?(ce&&t.texStorage2D(n.TEXTURE_2D,Ge,at,Ie.width,Ie.height),Ne&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ie.width,Ie.height,qe,lt,Ie.data)):t.texImage2D(n.TEXTURE_2D,0,at,Ie.width,Ie.height,0,qe,lt,Ie.data);else if(j.isCompressedTexture)if(j.isCompressedArrayTexture){$&&ce&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ge,at,Ee[0].width,Ee[0].height,Ie.depth);for(let de=0,Ye=Ee.length;de<Ye;de++)Je=Ee[de],j.format!==ko?qe!==null?$?Ne&&t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,de,0,0,0,Je.width,Je.height,Ie.depth,qe,Je.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,de,at,Je.width,Je.height,Ie.depth,0,Je.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):$?Ne&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,de,0,0,0,Je.width,Je.height,Ie.depth,qe,lt,Je.data):t.texImage3D(n.TEXTURE_2D_ARRAY,de,at,Je.width,Je.height,Ie.depth,0,qe,lt,Je.data)}else{$&&ce&&t.texStorage2D(n.TEXTURE_2D,Ge,at,Ee[0].width,Ee[0].height);for(let de=0,Ye=Ee.length;de<Ye;de++)Je=Ee[de],j.format!==ko?qe!==null?$?Ne&&t.compressedTexSubImage2D(n.TEXTURE_2D,de,0,0,Je.width,Je.height,qe,Je.data):t.compressedTexImage2D(n.TEXTURE_2D,de,at,Je.width,Je.height,0,Je.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):$?Ne&&t.texSubImage2D(n.TEXTURE_2D,de,0,0,Je.width,Je.height,qe,lt,Je.data):t.texImage2D(n.TEXTURE_2D,de,at,Je.width,Je.height,0,qe,lt,Je.data)}else if(j.isDataArrayTexture)$?(ce&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ge,at,Ie.width,Ie.height,Ie.depth),Ne&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ie.width,Ie.height,Ie.depth,qe,lt,Ie.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,at,Ie.width,Ie.height,Ie.depth,0,qe,lt,Ie.data);else if(j.isData3DTexture)$?(ce&&t.texStorage3D(n.TEXTURE_3D,Ge,at,Ie.width,Ie.height,Ie.depth),Ne&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ie.width,Ie.height,Ie.depth,qe,lt,Ie.data)):t.texImage3D(n.TEXTURE_3D,0,at,Ie.width,Ie.height,Ie.depth,0,qe,lt,Ie.data);else if(j.isFramebufferTexture){if(ce)if($)t.texStorage2D(n.TEXTURE_2D,Ge,at,Ie.width,Ie.height);else{let de=Ie.width,Ye=Ie.height;for(let W=0;W<Ge;W++)t.texImage2D(n.TEXTURE_2D,W,at,de,Ye,0,qe,lt,null),de>>=1,Ye>>=1}}else if(Ee.length>0&&Ze){$&&ce&&t.texStorage2D(n.TEXTURE_2D,Ge,at,Ee[0].width,Ee[0].height);for(let de=0,Ye=Ee.length;de<Ye;de++)Je=Ee[de],$?Ne&&t.texSubImage2D(n.TEXTURE_2D,de,0,0,qe,lt,Je):t.texImage2D(n.TEXTURE_2D,de,at,qe,lt,Je);j.generateMipmaps=!1}else $?(ce&&t.texStorage2D(n.TEXTURE_2D,Ge,at,Ie.width,Ie.height),Ne&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,qe,lt,Ie)):t.texImage2D(n.TEXTURE_2D,0,at,qe,lt,Ie);w(j,Ze)&&b(Ce),ye.__version=J.version,j.onUpdate&&j.onUpdate(j)}G.__version=j.version}function ue(G,j,he){if(j.image.length!==6)return;const Ce=re(G,j),q=j.source;t.bindTexture(n.TEXTURE_CUBE_MAP,G.__webglTexture,n.TEXTURE0+he);const J=r.get(q);if(q.version!==J.__version||Ce===!0){t.activeTexture(n.TEXTURE0+he);const ye=Gn.getPrimaries(Gn.workingColorSpace),we=j.colorSpace===Ls?null:Gn.getPrimaries(j.colorSpace),ke=j.colorSpace===Ls||ye===we?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,j.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,j.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,j.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ke);const Fe=j.isCompressedTexture||j.image[0].isCompressedTexture,He=j.image[0]&&j.image[0].isDataTexture,Ie=[];for(let de=0;de<6;de++)!Fe&&!He?Ie[de]=g(j.image[de],!1,!0,i.maxCubemapSize):Ie[de]=He?j.image[de].image:j.image[de],Ie[de]=se(j,Ie[de]);const Ze=Ie[0],qe=y(Ze)||a,lt=o.convert(j.format,j.colorSpace),at=o.convert(j.type),Je=v(j.internalFormat,lt,at,j.colorSpace),Ee=a&&j.isVideoTexture!==!0,$=J.__version===void 0||Ce===!0,ce=q.dataReady;let Ne=S(j,Ze,qe);Y(n.TEXTURE_CUBE_MAP,j,qe);let Ge;if(Fe){Ee&&$&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Ne,Je,Ze.width,Ze.height);for(let de=0;de<6;de++){Ge=Ie[de].mipmaps;for(let Ye=0;Ye<Ge.length;Ye++){const W=Ge[Ye];j.format!==ko?lt!==null?Ee?ce&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,Ye,0,0,W.width,W.height,lt,W.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,Ye,Je,W.width,W.height,0,W.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ee?ce&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,Ye,0,0,W.width,W.height,lt,at,W.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,Ye,Je,W.width,W.height,0,lt,at,W.data)}}}else{Ge=j.mipmaps,Ee&&$&&(Ge.length>0&&Ne++,t.texStorage2D(n.TEXTURE_CUBE_MAP,Ne,Je,Ie[0].width,Ie[0].height));for(let de=0;de<6;de++)if(He){Ee?ce&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,0,0,0,Ie[de].width,Ie[de].height,lt,at,Ie[de].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,0,Je,Ie[de].width,Ie[de].height,0,lt,at,Ie[de].data);for(let Ye=0;Ye<Ge.length;Ye++){const ne=Ge[Ye].image[de].image;Ee?ce&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,Ye+1,0,0,ne.width,ne.height,lt,at,ne.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,Ye+1,Je,ne.width,ne.height,0,lt,at,ne.data)}}else{Ee?ce&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,0,0,0,lt,at,Ie[de]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,0,Je,lt,at,Ie[de]);for(let Ye=0;Ye<Ge.length;Ye++){const W=Ge[Ye];Ee?ce&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,Ye+1,0,0,lt,at,W.image[de]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,Ye+1,Je,lt,at,W.image[de])}}}w(j,qe)&&b(n.TEXTURE_CUBE_MAP),J.__version=q.version,j.onUpdate&&j.onUpdate(j)}G.__version=j.version}function ge(G,j,he,Ce,q,J){const ye=o.convert(he.format,he.colorSpace),we=o.convert(he.type),ke=v(he.internalFormat,ye,we,he.colorSpace);if(!r.get(j).__hasExternalTextures){const He=Math.max(1,j.width>>J),Ie=Math.max(1,j.height>>J);q===n.TEXTURE_3D||q===n.TEXTURE_2D_ARRAY?t.texImage3D(q,J,ke,He,Ie,j.depth,0,ye,we,null):t.texImage2D(q,J,ke,He,Ie,0,ye,we,null)}t.bindFramebuffer(n.FRAMEBUFFER,G),oe(j)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ce,q,r.get(he).__webglTexture,0,ee(j)):(q===n.TEXTURE_2D||q>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&q<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Ce,q,r.get(he).__webglTexture,J),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Se(G,j,he){if(n.bindRenderbuffer(n.RENDERBUFFER,G),j.depthBuffer&&!j.stencilBuffer){let Ce=a===!0?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if(he||oe(j)){const q=j.depthTexture;q&&q.isDepthTexture&&(q.type===Is?Ce=n.DEPTH_COMPONENT32F:q.type===ju&&(Ce=n.DEPTH_COMPONENT24));const J=ee(j);oe(j)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,J,Ce,j.width,j.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,J,Ce,j.width,j.height)}else n.renderbufferStorage(n.RENDERBUFFER,Ce,j.width,j.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,G)}else if(j.depthBuffer&&j.stencilBuffer){const Ce=ee(j);he&&oe(j)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ce,n.DEPTH24_STENCIL8,j.width,j.height):oe(j)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ce,n.DEPTH24_STENCIL8,j.width,j.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,j.width,j.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,G)}else{const Ce=j.isWebGLMultipleRenderTargets===!0?j.texture:[j.texture];for(let q=0;q<Ce.length;q++){const J=Ce[q],ye=o.convert(J.format,J.colorSpace),we=o.convert(J.type),ke=v(J.internalFormat,ye,we,J.colorSpace),Fe=ee(j);he&&oe(j)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Fe,ke,j.width,j.height):oe(j)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Fe,ke,j.width,j.height):n.renderbufferStorage(n.RENDERBUFFER,ke,j.width,j.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function xe(G,j){if(j&&j.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,G),!(j.depthTexture&&j.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(j.depthTexture).__webglTexture||j.depthTexture.image.width!==j.width||j.depthTexture.image.height!==j.height)&&(j.depthTexture.image.width=j.width,j.depthTexture.image.height=j.height,j.depthTexture.needsUpdate=!0),N(j.depthTexture,0);const Ce=r.get(j.depthTexture).__webglTexture,q=ee(j);if(j.depthTexture.format===Tf)oe(j)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ce,0,q):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ce,0);else if(j.depthTexture.format===Uh)oe(j)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ce,0,q):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ce,0);else throw new Error("Unknown depthTexture format")}function De(G){const j=r.get(G),he=G.isWebGLCubeRenderTarget===!0;if(G.depthTexture&&!j.__autoAllocateDepthBuffer){if(he)throw new Error("target.depthTexture not supported in Cube render targets");xe(j.__webglFramebuffer,G)}else if(he){j.__webglDepthbuffer=[];for(let Ce=0;Ce<6;Ce++)t.bindFramebuffer(n.FRAMEBUFFER,j.__webglFramebuffer[Ce]),j.__webglDepthbuffer[Ce]=n.createRenderbuffer(),Se(j.__webglDepthbuffer[Ce],G,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,j.__webglFramebuffer),j.__webglDepthbuffer=n.createRenderbuffer(),Se(j.__webglDepthbuffer,G,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ae(G,j,he){const Ce=r.get(G);j!==void 0&&ge(Ce.__webglFramebuffer,G,G.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),he!==void 0&&De(G)}function ie(G){const j=G.texture,he=r.get(G),Ce=r.get(j);G.addEventListener("dispose",A),G.isWebGLMultipleRenderTargets!==!0&&(Ce.__webglTexture===void 0&&(Ce.__webglTexture=n.createTexture()),Ce.__version=j.version,s.memory.textures++);const q=G.isWebGLCubeRenderTarget===!0,J=G.isWebGLMultipleRenderTargets===!0,ye=y(G)||a;if(q){he.__webglFramebuffer=[];for(let we=0;we<6;we++)if(a&&j.mipmaps&&j.mipmaps.length>0){he.__webglFramebuffer[we]=[];for(let ke=0;ke<j.mipmaps.length;ke++)he.__webglFramebuffer[we][ke]=n.createFramebuffer()}else he.__webglFramebuffer[we]=n.createFramebuffer()}else{if(a&&j.mipmaps&&j.mipmaps.length>0){he.__webglFramebuffer=[];for(let we=0;we<j.mipmaps.length;we++)he.__webglFramebuffer[we]=n.createFramebuffer()}else he.__webglFramebuffer=n.createFramebuffer();if(J)if(i.drawBuffers){const we=G.texture;for(let ke=0,Fe=we.length;ke<Fe;ke++){const He=r.get(we[ke]);He.__webglTexture===void 0&&(He.__webglTexture=n.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&G.samples>0&&oe(G)===!1){const we=J?j:[j];he.__webglMultisampledFramebuffer=n.createFramebuffer(),he.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,he.__webglMultisampledFramebuffer);for(let ke=0;ke<we.length;ke++){const Fe=we[ke];he.__webglColorRenderbuffer[ke]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,he.__webglColorRenderbuffer[ke]);const He=o.convert(Fe.format,Fe.colorSpace),Ie=o.convert(Fe.type),Ze=v(Fe.internalFormat,He,Ie,Fe.colorSpace,G.isXRRenderTarget===!0),qe=ee(G);n.renderbufferStorageMultisample(n.RENDERBUFFER,qe,Ze,G.width,G.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ke,n.RENDERBUFFER,he.__webglColorRenderbuffer[ke])}n.bindRenderbuffer(n.RENDERBUFFER,null),G.depthBuffer&&(he.__webglDepthRenderbuffer=n.createRenderbuffer(),Se(he.__webglDepthRenderbuffer,G,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(q){t.bindTexture(n.TEXTURE_CUBE_MAP,Ce.__webglTexture),Y(n.TEXTURE_CUBE_MAP,j,ye);for(let we=0;we<6;we++)if(a&&j.mipmaps&&j.mipmaps.length>0)for(let ke=0;ke<j.mipmaps.length;ke++)ge(he.__webglFramebuffer[we][ke],G,j,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+we,ke);else ge(he.__webglFramebuffer[we],G,j,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+we,0);w(j,ye)&&b(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(J){const we=G.texture;for(let ke=0,Fe=we.length;ke<Fe;ke++){const He=we[ke],Ie=r.get(He);t.bindTexture(n.TEXTURE_2D,Ie.__webglTexture),Y(n.TEXTURE_2D,He,ye),ge(he.__webglFramebuffer,G,He,n.COLOR_ATTACHMENT0+ke,n.TEXTURE_2D,0),w(He,ye)&&b(n.TEXTURE_2D)}t.unbindTexture()}else{let we=n.TEXTURE_2D;if((G.isWebGL3DRenderTarget||G.isWebGLArrayRenderTarget)&&(a?we=G.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(we,Ce.__webglTexture),Y(we,j,ye),a&&j.mipmaps&&j.mipmaps.length>0)for(let ke=0;ke<j.mipmaps.length;ke++)ge(he.__webglFramebuffer[ke],G,j,n.COLOR_ATTACHMENT0,we,ke);else ge(he.__webglFramebuffer,G,j,n.COLOR_ATTACHMENT0,we,0);w(j,ye)&&b(we),t.unbindTexture()}G.depthBuffer&&De(G)}function Re(G){const j=y(G)||a,he=G.isWebGLMultipleRenderTargets===!0?G.texture:[G.texture];for(let Ce=0,q=he.length;Ce<q;Ce++){const J=he[Ce];if(w(J,j)){const ye=G.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,we=r.get(J).__webglTexture;t.bindTexture(ye,we),b(ye),t.unbindTexture()}}}function Pe(G){if(a&&G.samples>0&&oe(G)===!1){const j=G.isWebGLMultipleRenderTargets?G.texture:[G.texture],he=G.width,Ce=G.height;let q=n.COLOR_BUFFER_BIT;const J=[],ye=G.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,we=r.get(G),ke=G.isWebGLMultipleRenderTargets===!0;if(ke)for(let Fe=0;Fe<j.length;Fe++)t.bindFramebuffer(n.FRAMEBUFFER,we.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Fe,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,we.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Fe,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,we.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,we.__webglFramebuffer);for(let Fe=0;Fe<j.length;Fe++){J.push(n.COLOR_ATTACHMENT0+Fe),G.depthBuffer&&J.push(ye);const He=we.__ignoreDepthValues!==void 0?we.__ignoreDepthValues:!1;if(He===!1&&(G.depthBuffer&&(q|=n.DEPTH_BUFFER_BIT),G.stencilBuffer&&(q|=n.STENCIL_BUFFER_BIT)),ke&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,we.__webglColorRenderbuffer[Fe]),He===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[ye]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[ye])),ke){const Ie=r.get(j[Fe]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Ie,0)}n.blitFramebuffer(0,0,he,Ce,0,0,he,Ce,q,n.NEAREST),u&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,J)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),ke)for(let Fe=0;Fe<j.length;Fe++){t.bindFramebuffer(n.FRAMEBUFFER,we.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Fe,n.RENDERBUFFER,we.__webglColorRenderbuffer[Fe]);const He=r.get(j[Fe]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,we.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Fe,n.TEXTURE_2D,He,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,we.__webglMultisampledFramebuffer)}}function ee(G){return Math.min(i.maxSamples,G.samples)}function oe(G){const j=r.get(G);return a&&G.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&j.__useRenderToTexture!==!1}function Me(G){const j=s.render.frame;c.get(G)!==j&&(c.set(G,j),G.update())}function se(G,j){const he=G.colorSpace,Ce=G.format,q=G.type;return G.isCompressedTexture===!0||G.isVideoTexture===!0||G.format===uM||he!==su&&he!==Ls&&(Gn.getTransfer(he)===ur?a===!1?e.has("EXT_sRGB")===!0&&Ce===ko?(G.format=uM,G.minFilter=gr,G.generateMipmaps=!1):j=dL.sRGBToLinear(j):(Ce!==ko||q!==Jl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",he)),j}this.allocateTextureUnit=F,this.resetTextureUnits=B,this.setTexture2D=N,this.setTexture2DArray=I,this.setTexture3D=V,this.setTextureCube=L,this.rebindTextures=Ae,this.setupRenderTarget=ie,this.updateRenderTargetMipmap=Re,this.updateMultisampleRenderTarget=Pe,this.setupDepthRenderbuffer=De,this.setupFrameBufferTexture=ge,this.useMultisampledRTT=oe}function vne(n,e,t){const r=t.isWebGL2;function i(o,s=Ls){let a;const l=Gn.getTransfer(s);if(o===Jl)return n.UNSIGNED_BYTE;if(o===nL)return n.UNSIGNED_SHORT_4_4_4_4;if(o===rL)return n.UNSIGNED_SHORT_5_5_5_1;if(o===Lte)return n.BYTE;if(o===Fte)return n.SHORT;if(o===G2)return n.UNSIGNED_SHORT;if(o===tL)return n.INT;if(o===ju)return n.UNSIGNED_INT;if(o===Is)return n.FLOAT;if(o===zh)return r?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(o===Bte)return n.ALPHA;if(o===ko)return n.RGBA;if(o===zte)return n.LUMINANCE;if(o===Ute)return n.LUMINANCE_ALPHA;if(o===Tf)return n.DEPTH_COMPONENT;if(o===Uh)return n.DEPTH_STENCIL;if(o===uM)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(o===Vte)return n.RED;if(o===iL)return n.RED_INTEGER;if(o===$te)return n.RG;if(o===oL)return n.RG_INTEGER;if(o===sL)return n.RGBA_INTEGER;if(o===m_||o===g_||o===v_||o===y_)if(l===ur)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(o===m_)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===g_)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===v_)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===y_)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(o===m_)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===g_)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===v_)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===y_)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===GP||o===qP||o===XP||o===YP)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(o===GP)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===qP)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===XP)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===YP)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===aL)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===KP||o===ZP)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(o===KP)return l===ur?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(o===ZP)return l===ur?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===JP||o===QP||o===eR||o===tR||o===nR||o===rR||o===iR||o===oR||o===sR||o===aR||o===lR||o===uR||o===cR||o===fR)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(o===JP)return l===ur?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===QP)return l===ur?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===eR)return l===ur?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===tR)return l===ur?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===nR)return l===ur?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===rR)return l===ur?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===iR)return l===ur?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===oR)return l===ur?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===sR)return l===ur?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===aR)return l===ur?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===lR)return l===ur?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===uR)return l===ur?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===cR)return l===ur?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===fR)return l===ur?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===x_||o===dR||o===hR)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(o===x_)return l===ur?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(o===dR)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(o===hR)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(o===Hte||o===pR||o===mR||o===gR)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(o===x_)return a.COMPRESSED_RED_RGTC1_EXT;if(o===pR)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(o===mR)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(o===gR)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return o===Af?r?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[o]!==void 0?n[o]:null}return{convert:i}}class yne extends Qr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Im extends Dn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Oje={type:"move"};class A3{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Im,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Im,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new me,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new me),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Im,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new me,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new me),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,o=null,s=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){s=!0;for(const g of e.hand.values()){const y=t.getJointPose(g,r),p=this._getHandJoint(u,g);y!==null&&(p.matrix.fromArray(y.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.matrixWorldNeedsUpdate=!0,p.jointRadius=y.radius),p.visible=y!==null}const c=u.joints["index-finger-tip"],f=u.joints["thumb-tip"],d=c.position.distanceTo(f.position),h=.02,m=.005;u.inputState.pinching&&d>h+m?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&d<=h-m&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(o=t.getPose(e.gripSpace,r),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&o!==null&&(i=o),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Oje)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=o!==null),u!==null&&(u.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new Im;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}const kje=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Ije=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Lje{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,r){if(this.texture===null){const i=new Or,o=e.properties.get(i);o.__webglTexture=t.texture,(t.depthNear!=r.depthNear||t.depthFar!=r.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}render(e,t){if(this.texture!==null){if(this.mesh===null){const r=t.cameras[0].viewport,i=new Ra({extensions:{fragDepth:!0},vertexShader:kje,fragmentShader:Ije,uniforms:{depthColor:{value:this.texture},depthWidth:{value:r.z},depthHeight:{value:r.w}}});this.mesh=new ui(new pv(20,20),i)}e.render(this.mesh,t)}}reset(){this.texture=null,this.mesh=null}}class Fje extends du{constructor(e,t){super();const r=this;let i=null,o=1,s=null,a="local-floor",l=1,u=null,c=null,f=null,d=null,h=null,m=null;const g=new Lje,y=t.getContextAttributes();let p=null,w=null;const b=[],v=[],S=new nt;let x=null;const M=new Qr;M.layers.enable(1),M.viewport=new Kn;const A=new Qr;A.layers.enable(2),A.viewport=new Kn;const T=[M,A],C=new yne;C.layers.enable(1),C.layers.enable(2);let D=null,R=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(re){let fe=b[re];return fe===void 0&&(fe=new A3,b[re]=fe),fe.getTargetRaySpace()},this.getControllerGrip=function(re){let fe=b[re];return fe===void 0&&(fe=new A3,b[re]=fe),fe.getGripSpace()},this.getHand=function(re){let fe=b[re];return fe===void 0&&(fe=new A3,b[re]=fe),fe.getHandSpace()};function B(re){const fe=v.indexOf(re.inputSource);if(fe===-1)return;const ue=b[fe];ue!==void 0&&(ue.update(re.inputSource,re.frame,u||s),ue.dispatchEvent({type:re.type,data:re.inputSource}))}function F(){i.removeEventListener("select",B),i.removeEventListener("selectstart",B),i.removeEventListener("selectend",B),i.removeEventListener("squeeze",B),i.removeEventListener("squeezestart",B),i.removeEventListener("squeezeend",B),i.removeEventListener("end",F),i.removeEventListener("inputsourceschange",U);for(let re=0;re<b.length;re++){const fe=v[re];fe!==null&&(v[re]=null,b[re].disconnect(fe))}D=null,R=null,g.reset(),e.setRenderTarget(p),h=null,d=null,f=null,i=null,w=null,Y.stop(),r.isPresenting=!1,e.setPixelRatio(x),e.setSize(S.width,S.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(re){o=re,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(re){a=re,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||s},this.setReferenceSpace=function(re){u=re},this.getBaseLayer=function(){return d!==null?d:h},this.getBinding=function(){return f},this.getFrame=function(){return m},this.getSession=function(){return i},this.setSession=async function(re){if(i=re,i!==null){if(p=e.getRenderTarget(),i.addEventListener("select",B),i.addEventListener("selectstart",B),i.addEventListener("selectend",B),i.addEventListener("squeeze",B),i.addEventListener("squeezestart",B),i.addEventListener("squeezeend",B),i.addEventListener("end",F),i.addEventListener("inputsourceschange",U),y.xrCompatible!==!0&&await t.makeXRCompatible(),x=e.getPixelRatio(),e.getSize(S),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const fe={antialias:i.renderState.layers===void 0?y.antialias:!0,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:o};h=new XRWebGLLayer(i,t,fe),i.updateRenderState({baseLayer:h}),e.setPixelRatio(1),e.setSize(h.framebufferWidth,h.framebufferHeight,!1),w=new Pa(h.framebufferWidth,h.framebufferHeight,{format:ko,type:Jl,colorSpace:e.outputColorSpace,stencilBuffer:y.stencil})}else{let fe=null,ue=null,ge=null;y.depth&&(ge=y.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,fe=y.stencil?Uh:Tf,ue=y.stencil?Af:ju);const Se={colorFormat:t.RGBA8,depthFormat:ge,scaleFactor:o};f=new XRWebGLBinding(i,t),d=f.createProjectionLayer(Se),i.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),w=new Pa(d.textureWidth,d.textureHeight,{format:ko,type:Jl,depthTexture:new K2(d.textureWidth,d.textureHeight,ue,void 0,void 0,void 0,void 0,void 0,void 0,fe),stencilBuffer:y.stencil,colorSpace:e.outputColorSpace,samples:y.antialias?4:0});const xe=e.properties.get(w);xe.__ignoreDepthValues=d.ignoreDepthValues}w.isXRRenderTarget=!0,this.setFoveation(l),u=null,s=await i.requestReferenceSpace(a),Y.setContext(i),Y.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function U(re){for(let fe=0;fe<re.removed.length;fe++){const ue=re.removed[fe],ge=v.indexOf(ue);ge>=0&&(v[ge]=null,b[ge].disconnect(ue))}for(let fe=0;fe<re.added.length;fe++){const ue=re.added[fe];let ge=v.indexOf(ue);if(ge===-1){for(let xe=0;xe<b.length;xe++)if(xe>=v.length){v.push(ue),ge=xe;break}else if(v[xe]===null){v[xe]=ue,ge=xe;break}if(ge===-1)break}const Se=b[ge];Se&&Se.connect(ue)}}const N=new me,I=new me;function V(re,fe,ue){N.setFromMatrixPosition(fe.matrixWorld),I.setFromMatrixPosition(ue.matrixWorld);const ge=N.distanceTo(I),Se=fe.projectionMatrix.elements,xe=ue.projectionMatrix.elements,De=Se[14]/(Se[10]-1),Ae=Se[14]/(Se[10]+1),ie=(Se[9]+1)/Se[5],Re=(Se[9]-1)/Se[5],Pe=(Se[8]-1)/Se[0],ee=(xe[8]+1)/xe[0],oe=De*Pe,Me=De*ee,se=ge/(-Pe+ee),G=se*-Pe;fe.matrixWorld.decompose(re.position,re.quaternion,re.scale),re.translateX(G),re.translateZ(se),re.matrixWorld.compose(re.position,re.quaternion,re.scale),re.matrixWorldInverse.copy(re.matrixWorld).invert();const j=De+se,he=Ae+se,Ce=oe-G,q=Me+(ge-G),J=ie*Ae/he*j,ye=Re*Ae/he*j;re.projectionMatrix.makePerspective(Ce,q,J,ye,j,he),re.projectionMatrixInverse.copy(re.projectionMatrix).invert()}function L(re,fe){fe===null?re.matrixWorld.copy(re.matrix):re.matrixWorld.multiplyMatrices(fe.matrixWorld,re.matrix),re.matrixWorldInverse.copy(re.matrixWorld).invert()}this.updateCamera=function(re){if(i===null)return;g.texture!==null&&(re.near=g.depthNear,re.far=g.depthFar),C.near=A.near=M.near=re.near,C.far=A.far=M.far=re.far,(D!==C.near||R!==C.far)&&(i.updateRenderState({depthNear:C.near,depthFar:C.far}),D=C.near,R=C.far,M.near=D,M.far=R,A.near=D,A.far=R,M.updateProjectionMatrix(),A.updateProjectionMatrix(),re.updateProjectionMatrix());const fe=re.parent,ue=C.cameras;L(C,fe);for(let ge=0;ge<ue.length;ge++)L(ue[ge],fe);ue.length===2?V(C,M,A):C.projectionMatrix.copy(M.projectionMatrix),X(re,C,fe)};function X(re,fe,ue){ue===null?re.matrix.copy(fe.matrixWorld):(re.matrix.copy(ue.matrixWorld),re.matrix.invert(),re.matrix.multiply(fe.matrixWorld)),re.matrix.decompose(re.position,re.quaternion,re.scale),re.updateMatrixWorld(!0),re.projectionMatrix.copy(fe.projectionMatrix),re.projectionMatrixInverse.copy(fe.projectionMatrixInverse),re.isPerspectiveCamera&&(re.fov=Dg*2*Math.atan(1/re.projectionMatrix.elements[5]),re.zoom=1)}this.getCamera=function(){return C},this.getFoveation=function(){if(!(d===null&&h===null))return l},this.setFoveation=function(re){l=re,d!==null&&(d.fixedFoveation=re),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=re)},this.hasDepthSensing=function(){return g.texture!==null};let Z=null;function te(re,fe){if(c=fe.getViewerPose(u||s),m=fe,c!==null){const ue=c.views;h!==null&&(e.setRenderTargetFramebuffer(w,h.framebuffer),e.setRenderTarget(w));let ge=!1;ue.length!==C.cameras.length&&(C.cameras.length=0,ge=!0);for(let xe=0;xe<ue.length;xe++){const De=ue[xe];let Ae=null;if(h!==null)Ae=h.getViewport(De);else{const Re=f.getViewSubImage(d,De);Ae=Re.viewport,xe===0&&(e.setRenderTargetTextures(w,Re.colorTexture,d.ignoreDepthValues?void 0:Re.depthStencilTexture),e.setRenderTarget(w))}let ie=T[xe];ie===void 0&&(ie=new Qr,ie.layers.enable(xe),ie.viewport=new Kn,T[xe]=ie),ie.matrix.fromArray(De.transform.matrix),ie.matrix.decompose(ie.position,ie.quaternion,ie.scale),ie.projectionMatrix.fromArray(De.projectionMatrix),ie.projectionMatrixInverse.copy(ie.projectionMatrix).invert(),ie.viewport.set(Ae.x,Ae.y,Ae.width,Ae.height),xe===0&&(C.matrix.copy(ie.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),ge===!0&&C.cameras.push(ie)}const Se=i.enabledFeatures;if(Se&&Se.includes("depth-sensing")){const xe=f.getDepthInformation(ue[0]);xe&&xe.isValid&&xe.texture&&g.init(e,xe,i.renderState)}}for(let ue=0;ue<b.length;ue++){const ge=v[ue],Se=b[ue];ge!==null&&Se!==void 0&&Se.update(ge,fe,u||s)}g.render(e,C),Z&&Z(re,fe),fe.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:fe}),m=null}const Y=new fne;Y.setAnimationLoop(te),this.setAnimationLoop=function(re){Z=re},this.dispose=function(){}}}function Bje(n,e){function t(y,p){y.matrixAutoUpdate===!0&&y.updateMatrix(),p.value.copy(y.matrix)}function r(y,p){p.color.getRGB(y.fogColor.value,lne(n)),p.isFog?(y.fogNear.value=p.near,y.fogFar.value=p.far):p.isFogExp2&&(y.fogDensity.value=p.density)}function i(y,p,w,b,v){p.isMeshBasicMaterial||p.isMeshLambertMaterial?o(y,p):p.isMeshToonMaterial?(o(y,p),f(y,p)):p.isMeshPhongMaterial?(o(y,p),c(y,p)):p.isMeshStandardMaterial?(o(y,p),d(y,p),p.isMeshPhysicalMaterial&&h(y,p,v)):p.isMeshMatcapMaterial?(o(y,p),m(y,p)):p.isMeshDepthMaterial?o(y,p):p.isMeshDistanceMaterial?(o(y,p),g(y,p)):p.isMeshNormalMaterial?o(y,p):p.isLineBasicMaterial?(s(y,p),p.isLineDashedMaterial&&a(y,p)):p.isPointsMaterial?l(y,p,w,b):p.isSpriteMaterial?u(y,p):p.isShadowMaterial?(y.color.value.copy(p.color),y.opacity.value=p.opacity):p.isShaderMaterial&&(p.uniformsNeedUpdate=!1)}function o(y,p){y.opacity.value=p.opacity,p.color&&y.diffuse.value.copy(p.color),p.emissive&&y.emissive.value.copy(p.emissive).multiplyScalar(p.emissiveIntensity),p.map&&(y.map.value=p.map,t(p.map,y.mapTransform)),p.alphaMap&&(y.alphaMap.value=p.alphaMap,t(p.alphaMap,y.alphaMapTransform)),p.bumpMap&&(y.bumpMap.value=p.bumpMap,t(p.bumpMap,y.bumpMapTransform),y.bumpScale.value=p.bumpScale,p.side===yo&&(y.bumpScale.value*=-1)),p.normalMap&&(y.normalMap.value=p.normalMap,t(p.normalMap,y.normalMapTransform),y.normalScale.value.copy(p.normalScale),p.side===yo&&y.normalScale.value.negate()),p.displacementMap&&(y.displacementMap.value=p.displacementMap,t(p.displacementMap,y.displacementMapTransform),y.displacementScale.value=p.displacementScale,y.displacementBias.value=p.displacementBias),p.emissiveMap&&(y.emissiveMap.value=p.emissiveMap,t(p.emissiveMap,y.emissiveMapTransform)),p.specularMap&&(y.specularMap.value=p.specularMap,t(p.specularMap,y.specularMapTransform)),p.alphaTest>0&&(y.alphaTest.value=p.alphaTest);const w=e.get(p).envMap;if(w&&(y.envMap.value=w,y.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=p.reflectivity,y.ior.value=p.ior,y.refractionRatio.value=p.refractionRatio),p.lightMap){y.lightMap.value=p.lightMap;const b=n._useLegacyLights===!0?Math.PI:1;y.lightMapIntensity.value=p.lightMapIntensity*b,t(p.lightMap,y.lightMapTransform)}p.aoMap&&(y.aoMap.value=p.aoMap,y.aoMapIntensity.value=p.aoMapIntensity,t(p.aoMap,y.aoMapTransform))}function s(y,p){y.diffuse.value.copy(p.color),y.opacity.value=p.opacity,p.map&&(y.map.value=p.map,t(p.map,y.mapTransform))}function a(y,p){y.dashSize.value=p.dashSize,y.totalSize.value=p.dashSize+p.gapSize,y.scale.value=p.scale}function l(y,p,w,b){y.diffuse.value.copy(p.color),y.opacity.value=p.opacity,y.size.value=p.size*w,y.scale.value=b*.5,p.map&&(y.map.value=p.map,t(p.map,y.uvTransform)),p.alphaMap&&(y.alphaMap.value=p.alphaMap,t(p.alphaMap,y.alphaMapTransform)),p.alphaTest>0&&(y.alphaTest.value=p.alphaTest)}function u(y,p){y.diffuse.value.copy(p.color),y.opacity.value=p.opacity,y.rotation.value=p.rotation,p.map&&(y.map.value=p.map,t(p.map,y.mapTransform)),p.alphaMap&&(y.alphaMap.value=p.alphaMap,t(p.alphaMap,y.alphaMapTransform)),p.alphaTest>0&&(y.alphaTest.value=p.alphaTest)}function c(y,p){y.specular.value.copy(p.specular),y.shininess.value=Math.max(p.shininess,1e-4)}function f(y,p){p.gradientMap&&(y.gradientMap.value=p.gradientMap)}function d(y,p){y.metalness.value=p.metalness,p.metalnessMap&&(y.metalnessMap.value=p.metalnessMap,t(p.metalnessMap,y.metalnessMapTransform)),y.roughness.value=p.roughness,p.roughnessMap&&(y.roughnessMap.value=p.roughnessMap,t(p.roughnessMap,y.roughnessMapTransform)),e.get(p).envMap&&(y.envMapIntensity.value=p.envMapIntensity)}function h(y,p,w){y.ior.value=p.ior,p.sheen>0&&(y.sheenColor.value.copy(p.sheenColor).multiplyScalar(p.sheen),y.sheenRoughness.value=p.sheenRoughness,p.sheenColorMap&&(y.sheenColorMap.value=p.sheenColorMap,t(p.sheenColorMap,y.sheenColorMapTransform)),p.sheenRoughnessMap&&(y.sheenRoughnessMap.value=p.sheenRoughnessMap,t(p.sheenRoughnessMap,y.sheenRoughnessMapTransform))),p.clearcoat>0&&(y.clearcoat.value=p.clearcoat,y.clearcoatRoughness.value=p.clearcoatRoughness,p.clearcoatMap&&(y.clearcoatMap.value=p.clearcoatMap,t(p.clearcoatMap,y.clearcoatMapTransform)),p.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=p.clearcoatRoughnessMap,t(p.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),p.clearcoatNormalMap&&(y.clearcoatNormalMap.value=p.clearcoatNormalMap,t(p.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(p.clearcoatNormalScale),p.side===yo&&y.clearcoatNormalScale.value.negate())),p.iridescence>0&&(y.iridescence.value=p.iridescence,y.iridescenceIOR.value=p.iridescenceIOR,y.iridescenceThicknessMinimum.value=p.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=p.iridescenceThicknessRange[1],p.iridescenceMap&&(y.iridescenceMap.value=p.iridescenceMap,t(p.iridescenceMap,y.iridescenceMapTransform)),p.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=p.iridescenceThicknessMap,t(p.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),p.transmission>0&&(y.transmission.value=p.transmission,y.transmissionSamplerMap.value=w.texture,y.transmissionSamplerSize.value.set(w.width,w.height),p.transmissionMap&&(y.transmissionMap.value=p.transmissionMap,t(p.transmissionMap,y.transmissionMapTransform)),y.thickness.value=p.thickness,p.thicknessMap&&(y.thicknessMap.value=p.thicknessMap,t(p.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=p.attenuationDistance,y.attenuationColor.value.copy(p.attenuationColor)),p.anisotropy>0&&(y.anisotropyVector.value.set(p.anisotropy*Math.cos(p.anisotropyRotation),p.anisotropy*Math.sin(p.anisotropyRotation)),p.anisotropyMap&&(y.anisotropyMap.value=p.anisotropyMap,t(p.anisotropyMap,y.anisotropyMapTransform))),y.specularIntensity.value=p.specularIntensity,y.specularColor.value.copy(p.specularColor),p.specularColorMap&&(y.specularColorMap.value=p.specularColorMap,t(p.specularColorMap,y.specularColorMapTransform)),p.specularIntensityMap&&(y.specularIntensityMap.value=p.specularIntensityMap,t(p.specularIntensityMap,y.specularIntensityMapTransform))}function m(y,p){p.matcap&&(y.matcap.value=p.matcap)}function g(y,p){const w=e.get(p).light;y.referencePosition.value.setFromMatrixPosition(w.matrixWorld),y.nearDistance.value=w.shadow.camera.near,y.farDistance.value=w.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function zje(n,e,t,r){let i={},o={},s=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(w,b){const v=b.program;r.uniformBlockBinding(w,v)}function u(w,b){let v=i[w.id];v===void 0&&(m(w),v=c(w),i[w.id]=v,w.addEventListener("dispose",y));const S=b.program;r.updateUBOMapping(w,S);const x=e.render.frame;o[w.id]!==x&&(d(w),o[w.id]=x)}function c(w){const b=f();w.__bindingPointIndex=b;const v=n.createBuffer(),S=w.__size,x=w.usage;return n.bindBuffer(n.UNIFORM_BUFFER,v),n.bufferData(n.UNIFORM_BUFFER,S,x),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,b,v),v}function f(){for(let w=0;w<a;w++)if(s.indexOf(w)===-1)return s.push(w),w;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(w){const b=i[w.id],v=w.uniforms,S=w.__cache;n.bindBuffer(n.UNIFORM_BUFFER,b);for(let x=0,M=v.length;x<M;x++){const A=Array.isArray(v[x])?v[x]:[v[x]];for(let T=0,C=A.length;T<C;T++){const D=A[T];if(h(D,x,T,S)===!0){const R=D.__offset,B=Array.isArray(D.value)?D.value:[D.value];let F=0;for(let U=0;U<B.length;U++){const N=B[U],I=g(N);typeof N=="number"||typeof N=="boolean"?(D.__data[0]=N,n.bufferSubData(n.UNIFORM_BUFFER,R+F,D.__data)):N.isMatrix3?(D.__data[0]=N.elements[0],D.__data[1]=N.elements[1],D.__data[2]=N.elements[2],D.__data[3]=0,D.__data[4]=N.elements[3],D.__data[5]=N.elements[4],D.__data[6]=N.elements[5],D.__data[7]=0,D.__data[8]=N.elements[6],D.__data[9]=N.elements[7],D.__data[10]=N.elements[8],D.__data[11]=0):(N.toArray(D.__data,F),F+=I.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,R,D.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function h(w,b,v,S){const x=w.value,M=b+"_"+v;if(S[M]===void 0)return typeof x=="number"||typeof x=="boolean"?S[M]=x:S[M]=x.clone(),!0;{const A=S[M];if(typeof x=="number"||typeof x=="boolean"){if(A!==x)return S[M]=x,!0}else if(A.equals(x)===!1)return A.copy(x),!0}return!1}function m(w){const b=w.uniforms;let v=0;const S=16;for(let M=0,A=b.length;M<A;M++){const T=Array.isArray(b[M])?b[M]:[b[M]];for(let C=0,D=T.length;C<D;C++){const R=T[C],B=Array.isArray(R.value)?R.value:[R.value];for(let F=0,U=B.length;F<U;F++){const N=B[F],I=g(N),V=v%S;V!==0&&S-V<I.boundary&&(v+=S-V),R.__data=new Float32Array(I.storage/Float32Array.BYTES_PER_ELEMENT),R.__offset=v,v+=I.storage}}}const x=v%S;return x>0&&(v+=S-x),w.__size=v,w.__cache={},this}function g(w){const b={boundary:0,storage:0};return typeof w=="number"||typeof w=="boolean"?(b.boundary=4,b.storage=4):w.isVector2?(b.boundary=8,b.storage=8):w.isVector3||w.isColor?(b.boundary=16,b.storage=12):w.isVector4?(b.boundary=16,b.storage=16):w.isMatrix3?(b.boundary=48,b.storage=48):w.isMatrix4?(b.boundary=64,b.storage=64):w.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",w),b}function y(w){const b=w.target;b.removeEventListener("dispose",y);const v=s.indexOf(b.__bindingPointIndex);s.splice(v,1),n.deleteBuffer(i[b.id]),delete i[b.id],delete o[b.id]}function p(){for(const w in i)n.deleteBuffer(i[w]);s=[],i={},o={}}return{bind:l,update:u,dispose:p}}class bL{constructor(e={}){const{canvas:t=one(),context:r=null,depth:i=!0,stencil:o=!0,alpha:s=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:f=!1}=e;this.isWebGLRenderer=!0;let d;r!==null?d=r.getContextAttributes().alpha:d=s;const h=new Uint32Array(4),m=new Int32Array(4);let g=null,y=null;const p=[],w=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=mi,this._useLegacyLights=!1,this.toneMapping=Zl,this.toneMappingExposure=1;const b=this;let v=!1,S=0,x=0,M=null,A=-1,T=null;const C=new Kn,D=new Kn;let R=null;const B=new gt(0);let F=0,U=t.width,N=t.height,I=1,V=null,L=null;const X=new Kn(0,0,U,N),Z=new Kn(0,0,U,N);let te=!1;const Y=new mx;let re=!1,fe=!1,ue=null;const ge=new Qt,Se=new nt,xe=new me,De={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ae(){return M===null?I:1}let ie=r;function Re(pe,Le){for(let Ue=0;Ue<pe.length;Ue++){const $e=pe[Ue],We=t.getContext($e,Le);if(We!==null)return We}return null}try{const pe={alpha:!0,depth:i,stencil:o,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${ux}`),t.addEventListener("webglcontextlost",Ge,!1),t.addEventListener("webglcontextrestored",de,!1),t.addEventListener("webglcontextcreationerror",Ye,!1),ie===null){const Le=["webgl2","webgl","experimental-webgl"];if(b.isWebGL1Renderer===!0&&Le.shift(),ie=Re(Le,pe),ie===null)throw Re(Le)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&ie instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),ie.getShaderPrecisionFormat===void 0&&(ie.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(pe){throw console.error("THREE.WebGLRenderer: "+pe.message),pe}let Pe,ee,oe,Me,se,G,j,he,Ce,q,J,ye,we,ke,Fe,He,Ie,Ze,qe,lt,at,Je,Ee,$;function ce(){Pe=new KHe(ie),ee=new WHe(ie,Pe,e),Pe.init(ee),Je=new vne(ie,Pe,ee),oe=new Pje(ie,Pe,ee),Me=new QHe(ie),se=new xje,G=new Rje(ie,Pe,oe,se,ee,Je,Me),j=new GHe(b),he=new YHe(b),Ce=new a$e(ie,ee),Ee=new $He(ie,Pe,Ce,ee),q=new ZHe(ie,Ce,Me,Ee),J=new rWe(ie,q,Ce,Me),qe=new nWe(ie,ee,G),He=new jHe(se),ye=new yje(b,j,he,Pe,ee,Ee,He),we=new Bje(b,se),ke=new wje,Fe=new Aje(Pe,ee),Ze=new VHe(b,j,he,oe,J,d,l),Ie=new Nje(b,J,ee),$=new zje(ie,Me,ee,oe),lt=new HHe(ie,Pe,Me,ee),at=new JHe(ie,Pe,Me,ee),Me.programs=ye.programs,b.capabilities=ee,b.extensions=Pe,b.properties=se,b.renderLists=ke,b.shadowMap=Ie,b.state=oe,b.info=Me}ce();const Ne=new Fje(b,ie);this.xr=Ne,this.getContext=function(){return ie},this.getContextAttributes=function(){return ie.getContextAttributes()},this.forceContextLoss=function(){const pe=Pe.get("WEBGL_lose_context");pe&&pe.loseContext()},this.forceContextRestore=function(){const pe=Pe.get("WEBGL_lose_context");pe&&pe.restoreContext()},this.getPixelRatio=function(){return I},this.setPixelRatio=function(pe){pe!==void 0&&(I=pe,this.setSize(U,N,!1))},this.getSize=function(pe){return pe.set(U,N)},this.setSize=function(pe,Le,Ue=!0){if(Ne.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}U=pe,N=Le,t.width=Math.floor(pe*I),t.height=Math.floor(Le*I),Ue===!0&&(t.style.width=pe+"px",t.style.height=Le+"px"),this.setViewport(0,0,pe,Le)},this.getDrawingBufferSize=function(pe){return pe.set(U*I,N*I).floor()},this.setDrawingBufferSize=function(pe,Le,Ue){U=pe,N=Le,I=Ue,t.width=Math.floor(pe*Ue),t.height=Math.floor(Le*Ue),this.setViewport(0,0,pe,Le)},this.getCurrentViewport=function(pe){return pe.copy(C)},this.getViewport=function(pe){return pe.copy(X)},this.setViewport=function(pe,Le,Ue,$e){pe.isVector4?X.set(pe.x,pe.y,pe.z,pe.w):X.set(pe,Le,Ue,$e),oe.viewport(C.copy(X).multiplyScalar(I).floor())},this.getScissor=function(pe){return pe.copy(Z)},this.setScissor=function(pe,Le,Ue,$e){pe.isVector4?Z.set(pe.x,pe.y,pe.z,pe.w):Z.set(pe,Le,Ue,$e),oe.scissor(D.copy(Z).multiplyScalar(I).floor())},this.getScissorTest=function(){return te},this.setScissorTest=function(pe){oe.setScissorTest(te=pe)},this.setOpaqueSort=function(pe){V=pe},this.setTransparentSort=function(pe){L=pe},this.getClearColor=function(pe){return pe.copy(Ze.getClearColor())},this.setClearColor=function(){Ze.setClearColor.apply(Ze,arguments)},this.getClearAlpha=function(){return Ze.getClearAlpha()},this.setClearAlpha=function(){Ze.setClearAlpha.apply(Ze,arguments)},this.clear=function(pe=!0,Le=!0,Ue=!0){let $e=0;if(pe){let We=!1;if(M!==null){const xt=M.texture.format;We=xt===sL||xt===oL||xt===iL}if(We){const xt=M.texture.type,_t=xt===Jl||xt===ju||xt===G2||xt===Af||xt===nL||xt===rL,It=Ze.getClearColor(),ft=Ze.getClearAlpha(),Et=It.r,zt=It.g,Ot=It.b;_t?(h[0]=Et,h[1]=zt,h[2]=Ot,h[3]=ft,ie.clearBufferuiv(ie.COLOR,0,h)):(m[0]=Et,m[1]=zt,m[2]=Ot,m[3]=ft,ie.clearBufferiv(ie.COLOR,0,m))}else $e|=ie.COLOR_BUFFER_BIT}Le&&($e|=ie.DEPTH_BUFFER_BIT),Ue&&($e|=ie.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ie.clear($e)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ge,!1),t.removeEventListener("webglcontextrestored",de,!1),t.removeEventListener("webglcontextcreationerror",Ye,!1),ke.dispose(),Fe.dispose(),se.dispose(),j.dispose(),he.dispose(),J.dispose(),Ee.dispose(),$.dispose(),ye.dispose(),Ne.dispose(),Ne.removeEventListener("sessionstart",Ve),Ne.removeEventListener("sessionend",Xe),ue&&(ue.dispose(),ue=null),rt.stop()};function Ge(pe){pe.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),v=!0}function de(){console.log("THREE.WebGLRenderer: Context Restored."),v=!1;const pe=Me.autoReset,Le=Ie.enabled,Ue=Ie.autoUpdate,$e=Ie.needsUpdate,We=Ie.type;ce(),Me.autoReset=pe,Ie.enabled=Le,Ie.autoUpdate=Ue,Ie.needsUpdate=$e,Ie.type=We}function Ye(pe){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",pe.statusMessage)}function W(pe){const Le=pe.target;Le.removeEventListener("dispose",W),ne(Le)}function ne(pe){le(pe),se.remove(pe)}function le(pe){const Le=se.get(pe).programs;Le!==void 0&&(Le.forEach(function(Ue){ye.releaseProgram(Ue)}),pe.isShaderMaterial&&ye.releaseShaderCache(pe))}this.renderBufferDirect=function(pe,Le,Ue,$e,We,xt){Le===null&&(Le=De);const _t=We.isMesh&&We.matrixWorld.determinant()<0,It=vl(pe,Le,Ue,$e,We);oe.setMaterial($e,_t);let ft=Ue.index,Et=1;if($e.wireframe===!0){if(ft=q.getWireframeAttribute(Ue),ft===void 0)return;Et=2}const zt=Ue.drawRange,Ot=Ue.attributes.position;let Wn=zt.start*Et,fi=(zt.start+zt.count)*Et;xt!==null&&(Wn=Math.max(Wn,xt.start*Et),fi=Math.min(fi,(xt.start+xt.count)*Et)),ft!==null?(Wn=Math.max(Wn,0),fi=Math.min(fi,ft.count)):Ot!=null&&(Wn=Math.max(Wn,0),fi=Math.min(fi,Ot.count));const dr=fi-Wn;if(dr<0||dr===1/0)return;Ee.setup(We,$e,It,Ue,ft);let _i,Jt=lt;if(ft!==null&&(_i=Ce.get(ft),Jt=at,Jt.setIndex(_i)),We.isMesh)$e.wireframe===!0?(oe.setLineWidth($e.wireframeLinewidth*Ae()),Jt.setMode(ie.LINES)):Jt.setMode(ie.TRIANGLES);else if(We.isLine){let Tt=$e.linewidth;Tt===void 0&&(Tt=1),oe.setLineWidth(Tt*Ae()),We.isLineSegments?Jt.setMode(ie.LINES):We.isLineLoop?Jt.setMode(ie.LINE_LOOP):Jt.setMode(ie.LINE_STRIP)}else We.isPoints?Jt.setMode(ie.POINTS):We.isSprite&&Jt.setMode(ie.TRIANGLES);if(We.isBatchedMesh)Jt.renderMultiDraw(We._multiDrawStarts,We._multiDrawCounts,We._multiDrawCount);else if(We.isInstancedMesh)Jt.renderInstances(Wn,dr,We.count);else if(Ue.isInstancedBufferGeometry){const Tt=Ue._maxInstanceCount!==void 0?Ue._maxInstanceCount:1/0,Ks=Math.min(Ue.instanceCount,Tt);Jt.renderInstances(Wn,dr,Ks)}else Jt.render(Wn,dr)};function ve(pe,Le,Ue){pe.transparent===!0&&pe.side===ma&&pe.forceSinglePass===!1?(pe.side=yo,pe.needsUpdate=!0,jr(pe,Le,Ue),pe.side=hc,pe.needsUpdate=!0,jr(pe,Le,Ue),pe.side=ma):jr(pe,Le,Ue)}this.compile=function(pe,Le,Ue=null){Ue===null&&(Ue=pe),y=Fe.get(Ue),y.init(),w.push(y),Ue.traverseVisible(function(We){We.isLight&&We.layers.test(Le.layers)&&(y.pushLight(We),We.castShadow&&y.pushShadow(We))}),pe!==Ue&&pe.traverseVisible(function(We){We.isLight&&We.layers.test(Le.layers)&&(y.pushLight(We),We.castShadow&&y.pushShadow(We))}),y.setupLights(b._useLegacyLights);const $e=new Set;return pe.traverse(function(We){const xt=We.material;if(xt)if(Array.isArray(xt))for(let _t=0;_t<xt.length;_t++){const It=xt[_t];ve(It,Ue,We),$e.add(It)}else ve(xt,Ue,We),$e.add(xt)}),w.pop(),y=null,$e},this.compileAsync=function(pe,Le,Ue=null){const $e=this.compile(pe,Le,Ue);return new Promise(We=>{function xt(){if($e.forEach(function(_t){se.get(_t).currentProgram.isReady()&&$e.delete(_t)}),$e.size===0){We(pe);return}setTimeout(xt,10)}Pe.get("KHR_parallel_shader_compile")!==null?xt():setTimeout(xt,10)})};let _e=null;function Oe(pe){_e&&_e(pe)}function Ve(){rt.stop()}function Xe(){rt.start()}const rt=new fne;rt.setAnimationLoop(Oe),typeof self<"u"&&rt.setContext(self),this.setAnimationLoop=function(pe){_e=pe,Ne.setAnimationLoop(pe),pe===null?rt.stop():rt.start()},Ne.addEventListener("sessionstart",Ve),Ne.addEventListener("sessionend",Xe),this.render=function(pe,Le){if(Le!==void 0&&Le.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(v===!0)return;pe.matrixWorldAutoUpdate===!0&&pe.updateMatrixWorld(),Le.parent===null&&Le.matrixWorldAutoUpdate===!0&&Le.updateMatrixWorld(),Ne.enabled===!0&&Ne.isPresenting===!0&&(Ne.cameraAutoUpdate===!0&&Ne.updateCamera(Le),Le=Ne.getCamera()),pe.isScene===!0&&pe.onBeforeRender(b,pe,Le,M),y=Fe.get(pe,w.length),y.init(),w.push(y),ge.multiplyMatrices(Le.projectionMatrix,Le.matrixWorldInverse),Y.setFromProjectionMatrix(ge),fe=this.localClippingEnabled,re=He.init(this.clippingPlanes,fe),g=ke.get(pe,p.length),g.init(),p.push(g),ht(pe,Le,0,b.sortObjects),g.finish(),b.sortObjects===!0&&g.sort(V,L),this.info.render.frame++,re===!0&&He.beginShadows();const Ue=y.state.shadowsArray;if(Ie.render(Ue,pe,Le),re===!0&&He.endShadows(),this.info.autoReset===!0&&this.info.reset(),(Ne.enabled===!1||Ne.isPresenting===!1||Ne.hasDepthSensing()===!1)&&Ze.render(g,pe),y.setupLights(b._useLegacyLights),Le.isArrayCamera){const $e=Le.cameras;for(let We=0,xt=$e.length;We<xt;We++){const _t=$e[We];Pt(g,pe,_t,_t.viewport)}}else Pt(g,pe,Le);M!==null&&(G.updateMultisampleRenderTarget(M),G.updateRenderTargetMipmap(M)),pe.isScene===!0&&pe.onAfterRender(b,pe,Le),Ee.resetDefaultState(),A=-1,T=null,w.pop(),w.length>0?y=w[w.length-1]:y=null,p.pop(),p.length>0?g=p[p.length-1]:g=null};function ht(pe,Le,Ue,$e){if(pe.visible===!1)return;if(pe.layers.test(Le.layers)){if(pe.isGroup)Ue=pe.renderOrder;else if(pe.isLOD)pe.autoUpdate===!0&&pe.update(Le);else if(pe.isLight)y.pushLight(pe),pe.castShadow&&y.pushShadow(pe);else if(pe.isSprite){if(!pe.frustumCulled||Y.intersectsSprite(pe)){$e&&xe.setFromMatrixPosition(pe.matrixWorld).applyMatrix4(ge);const _t=J.update(pe),It=pe.material;It.visible&&g.push(pe,_t,It,Ue,xe.z,null)}}else if((pe.isMesh||pe.isLine||pe.isPoints)&&(!pe.frustumCulled||Y.intersectsObject(pe))){const _t=J.update(pe),It=pe.material;if($e&&(pe.boundingSphere!==void 0?(pe.boundingSphere===null&&pe.computeBoundingSphere(),xe.copy(pe.boundingSphere.center)):(_t.boundingSphere===null&&_t.computeBoundingSphere(),xe.copy(_t.boundingSphere.center)),xe.applyMatrix4(pe.matrixWorld).applyMatrix4(ge)),Array.isArray(It)){const ft=_t.groups;for(let Et=0,zt=ft.length;Et<zt;Et++){const Ot=ft[Et],Wn=It[Ot.materialIndex];Wn&&Wn.visible&&g.push(pe,_t,Wn,Ue,xe.z,Ot)}}else It.visible&&g.push(pe,_t,It,Ue,xe.z,null)}}const xt=pe.children;for(let _t=0,It=xt.length;_t<It;_t++)ht(xt[_t],Le,Ue,$e)}function Pt(pe,Le,Ue,$e){const We=pe.opaque,xt=pe.transmissive,_t=pe.transparent;y.setupLightsView(Ue),re===!0&&He.setGlobalState(b.clippingPlanes,Ue),xt.length>0&&it(We,xt,Le,Ue),$e&&oe.viewport(C.copy($e)),We.length>0&&Ct(We,Le,Ue),xt.length>0&&Ct(xt,Le,Ue),_t.length>0&&Ct(_t,Le,Ue),oe.buffers.depth.setTest(!0),oe.buffers.depth.setMask(!0),oe.buffers.color.setMask(!0),oe.setPolygonOffset(!1)}function it(pe,Le,Ue,$e){if((Ue.isScene===!0?Ue.overrideMaterial:null)!==null)return;const xt=ee.isWebGL2;ue===null&&(ue=new Pa(1,1,{generateMipmaps:!0,type:Pe.has("EXT_color_buffer_half_float")?zh:Jl,minFilter:$l,samples:xt?4:0})),b.getDrawingBufferSize(Se),xt?ue.setSize(Se.x,Se.y):ue.setSize(cM(Se.x),cM(Se.y));const _t=b.getRenderTarget();b.setRenderTarget(ue),b.getClearColor(B),F=b.getClearAlpha(),F<1&&b.setClearColor(16777215,.5),b.clear();const It=b.toneMapping;b.toneMapping=Zl,Ct(pe,Ue,$e),G.updateMultisampleRenderTarget(ue),G.updateRenderTargetMipmap(ue);let ft=!1;for(let Et=0,zt=Le.length;Et<zt;Et++){const Ot=Le[Et],Wn=Ot.object,fi=Ot.geometry,dr=Ot.material,_i=Ot.group;if(dr.side===ma&&Wn.layers.test($e.layers)){const Jt=dr.side;dr.side=yo,dr.needsUpdate=!0,Ht(Wn,Ue,$e,fi,dr,_i),dr.side=Jt,dr.needsUpdate=!0,ft=!0}}ft===!0&&(G.updateMultisampleRenderTarget(ue),G.updateRenderTargetMipmap(ue)),b.setRenderTarget(_t),b.setClearColor(B,F),b.toneMapping=It}function Ct(pe,Le,Ue){const $e=Le.isScene===!0?Le.overrideMaterial:null;for(let We=0,xt=pe.length;We<xt;We++){const _t=pe[We],It=_t.object,ft=_t.geometry,Et=$e===null?_t.material:$e,zt=_t.group;It.layers.test(Ue.layers)&&Ht(It,Le,Ue,ft,Et,zt)}}function Ht(pe,Le,Ue,$e,We,xt){pe.onBeforeRender(b,Le,Ue,$e,We,xt),pe.modelViewMatrix.multiplyMatrices(Ue.matrixWorldInverse,pe.matrixWorld),pe.normalMatrix.getNormalMatrix(pe.modelViewMatrix),We.onBeforeRender(b,Le,Ue,$e,pe,xt),We.transparent===!0&&We.side===ma&&We.forceSinglePass===!1?(We.side=yo,We.needsUpdate=!0,b.renderBufferDirect(Ue,Le,$e,We,pe,xt),We.side=hc,We.needsUpdate=!0,b.renderBufferDirect(Ue,Le,$e,We,pe,xt),We.side=ma):b.renderBufferDirect(Ue,Le,$e,We,pe,xt),pe.onAfterRender(b,Le,Ue,$e,We,xt)}function jr(pe,Le,Ue){Le.isScene!==!0&&(Le=De);const $e=se.get(pe),We=y.state.lights,xt=y.state.shadowsArray,_t=We.state.version,It=ye.getParameters(pe,We.state,xt,Le,Ue),ft=ye.getProgramCacheKey(It);let Et=$e.programs;$e.environment=pe.isMeshStandardMaterial?Le.environment:null,$e.fog=Le.fog,$e.envMap=(pe.isMeshStandardMaterial?he:j).get(pe.envMap||$e.environment),Et===void 0&&(pe.addEventListener("dispose",W),Et=new Map,$e.programs=Et);let zt=Et.get(ft);if(zt!==void 0){if($e.currentProgram===zt&&$e.lightsStateVersion===_t)return ar(pe,It),zt}else It.uniforms=ye.getUniforms(pe),pe.onBuild(Ue,It,b),pe.onBeforeCompile(It,b),zt=ye.acquireProgram(It,ft),Et.set(ft,zt),$e.uniforms=It.uniforms;const Ot=$e.uniforms;return(!pe.isShaderMaterial&&!pe.isRawShaderMaterial||pe.clipping===!0)&&(Ot.clippingPlanes=He.uniform),ar(pe,It),$e.needsLights=Fi(pe),$e.lightsStateVersion=_t,$e.needsLights&&(Ot.ambientLightColor.value=We.state.ambient,Ot.lightProbe.value=We.state.probe,Ot.directionalLights.value=We.state.directional,Ot.directionalLightShadows.value=We.state.directionalShadow,Ot.spotLights.value=We.state.spot,Ot.spotLightShadows.value=We.state.spotShadow,Ot.rectAreaLights.value=We.state.rectArea,Ot.ltc_1.value=We.state.rectAreaLTC1,Ot.ltc_2.value=We.state.rectAreaLTC2,Ot.pointLights.value=We.state.point,Ot.pointLightShadows.value=We.state.pointShadow,Ot.hemisphereLights.value=We.state.hemi,Ot.directionalShadowMap.value=We.state.directionalShadowMap,Ot.directionalShadowMatrix.value=We.state.directionalShadowMatrix,Ot.spotShadowMap.value=We.state.spotShadowMap,Ot.spotLightMatrix.value=We.state.spotLightMatrix,Ot.spotLightMap.value=We.state.spotLightMap,Ot.pointShadowMap.value=We.state.pointShadowMap,Ot.pointShadowMatrix.value=We.state.pointShadowMatrix),$e.currentProgram=zt,$e.uniformsList=null,zt}function Lr(pe){if(pe.uniformsList===null){const Le=pe.currentProgram.getUniforms();pe.uniformsList=w_.seqWithValue(Le.seq,pe.uniforms)}return pe.uniformsList}function ar(pe,Le){const Ue=se.get(pe);Ue.outputColorSpace=Le.outputColorSpace,Ue.batching=Le.batching,Ue.instancing=Le.instancing,Ue.instancingColor=Le.instancingColor,Ue.skinning=Le.skinning,Ue.morphTargets=Le.morphTargets,Ue.morphNormals=Le.morphNormals,Ue.morphColors=Le.morphColors,Ue.morphTargetsCount=Le.morphTargetsCount,Ue.numClippingPlanes=Le.numClippingPlanes,Ue.numIntersection=Le.numClipIntersection,Ue.vertexAlphas=Le.vertexAlphas,Ue.vertexTangents=Le.vertexTangents,Ue.toneMapping=Le.toneMapping}function vl(pe,Le,Ue,$e,We){Le.isScene!==!0&&(Le=De),G.resetTextureUnits();const xt=Le.fog,_t=$e.isMeshStandardMaterial?Le.environment:null,It=M===null?b.outputColorSpace:M.isXRRenderTarget===!0?M.texture.colorSpace:su,ft=($e.isMeshStandardMaterial?he:j).get($e.envMap||_t),Et=$e.vertexColors===!0&&!!Ue.attributes.color&&Ue.attributes.color.itemSize===4,zt=!!Ue.attributes.tangent&&(!!$e.normalMap||$e.anisotropy>0),Ot=!!Ue.morphAttributes.position,Wn=!!Ue.morphAttributes.normal,fi=!!Ue.morphAttributes.color;let dr=Zl;$e.toneMapped&&(M===null||M.isXRRenderTarget===!0)&&(dr=b.toneMapping);const _i=Ue.morphAttributes.position||Ue.morphAttributes.normal||Ue.morphAttributes.color,Jt=_i!==void 0?_i.length:0,Tt=se.get($e),Ks=y.state.lights;if(re===!0&&(fe===!0||pe!==T)){const Bi=pe===T&&$e.id===A;He.setState($e,pe,Bi)}let xn=!1;$e.version===Tt.__version?(Tt.needsLights&&Tt.lightsStateVersion!==Ks.state.version||Tt.outputColorSpace!==It||We.isBatchedMesh&&Tt.batching===!1||!We.isBatchedMesh&&Tt.batching===!0||We.isInstancedMesh&&Tt.instancing===!1||!We.isInstancedMesh&&Tt.instancing===!0||We.isSkinnedMesh&&Tt.skinning===!1||!We.isSkinnedMesh&&Tt.skinning===!0||We.isInstancedMesh&&Tt.instancingColor===!0&&We.instanceColor===null||We.isInstancedMesh&&Tt.instancingColor===!1&&We.instanceColor!==null||Tt.envMap!==ft||$e.fog===!0&&Tt.fog!==xt||Tt.numClippingPlanes!==void 0&&(Tt.numClippingPlanes!==He.numPlanes||Tt.numIntersection!==He.numIntersection)||Tt.vertexAlphas!==Et||Tt.vertexTangents!==zt||Tt.morphTargets!==Ot||Tt.morphNormals!==Wn||Tt.morphColors!==fi||Tt.toneMapping!==dr||ee.isWebGL2===!0&&Tt.morphTargetsCount!==Jt)&&(xn=!0):(xn=!0,Tt.__version=$e.version);let Fr=Tt.currentProgram;xn===!0&&(Fr=jr($e,Le,We));let yl=!1,Zs=!1,Ei=!1;const Gr=Fr.getUniforms(),xl=Tt.uniforms;if(oe.useProgram(Fr.program)&&(yl=!0,Zs=!0,Ei=!0),$e.id!==A&&(A=$e.id,Zs=!0),yl||T!==pe){Gr.setValue(ie,"projectionMatrix",pe.projectionMatrix),Gr.setValue(ie,"viewMatrix",pe.matrixWorldInverse);const Bi=Gr.map.cameraPosition;Bi!==void 0&&Bi.setValue(ie,xe.setFromMatrixPosition(pe.matrixWorld)),ee.logarithmicDepthBuffer&&Gr.setValue(ie,"logDepthBufFC",2/(Math.log(pe.far+1)/Math.LN2)),($e.isMeshPhongMaterial||$e.isMeshToonMaterial||$e.isMeshLambertMaterial||$e.isMeshBasicMaterial||$e.isMeshStandardMaterial||$e.isShaderMaterial)&&Gr.setValue(ie,"isOrthographic",pe.isOrthographicCamera===!0),T!==pe&&(T=pe,Zs=!0,Ei=!0)}if(We.isSkinnedMesh){Gr.setOptional(ie,We,"bindMatrix"),Gr.setOptional(ie,We,"bindMatrixInverse");const Bi=We.skeleton;Bi&&(ee.floatVertexTextures?(Bi.boneTexture===null&&Bi.computeBoneTexture(),Gr.setValue(ie,"boneTexture",Bi.boneTexture,G)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}We.isBatchedMesh&&(Gr.setOptional(ie,We,"batchingTexture"),Gr.setValue(ie,"batchingTexture",We._matricesTexture,G));const cp=Ue.morphAttributes;if((cp.position!==void 0||cp.normal!==void 0||cp.color!==void 0&&ee.isWebGL2===!0)&&qe.update(We,Ue,Fr),(Zs||Tt.receiveShadow!==We.receiveShadow)&&(Tt.receiveShadow=We.receiveShadow,Gr.setValue(ie,"receiveShadow",We.receiveShadow)),$e.isMeshGouraudMaterial&&$e.envMap!==null&&(xl.envMap.value=ft,xl.flipEnvMap.value=ft.isCubeTexture&&ft.isRenderTargetTexture===!1?-1:1),Zs&&(Gr.setValue(ie,"toneMappingExposure",b.toneMappingExposure),Tt.needsLights&&_c(xl,Ei),xt&&$e.fog===!0&&we.refreshFogUniforms(xl,xt),we.refreshMaterialUniforms(xl,$e,I,N,ue),w_.upload(ie,Lr(Tt),xl,G)),$e.isShaderMaterial&&$e.uniformsNeedUpdate===!0&&(w_.upload(ie,Lr(Tt),xl,G),$e.uniformsNeedUpdate=!1),$e.isSpriteMaterial&&Gr.setValue(ie,"center",We.center),Gr.setValue(ie,"modelViewMatrix",We.modelViewMatrix),Gr.setValue(ie,"normalMatrix",We.normalMatrix),Gr.setValue(ie,"modelMatrix",We.matrixWorld),$e.isShaderMaterial||$e.isRawShaderMaterial){const Bi=$e.uniformsGroups;for(let fp=0,ws=Bi.length;fp<ws;fp++)if(ee.isWebGL2){const Px=Bi[fp];$.update(Px,Fr),$.bind(Px,Fr)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Fr}function _c(pe,Le){pe.ambientLightColor.needsUpdate=Le,pe.lightProbe.needsUpdate=Le,pe.directionalLights.needsUpdate=Le,pe.directionalLightShadows.needsUpdate=Le,pe.pointLights.needsUpdate=Le,pe.pointLightShadows.needsUpdate=Le,pe.spotLights.needsUpdate=Le,pe.spotLightShadows.needsUpdate=Le,pe.rectAreaLights.needsUpdate=Le,pe.hemisphereLights.needsUpdate=Le}function Fi(pe){return pe.isMeshLambertMaterial||pe.isMeshToonMaterial||pe.isMeshPhongMaterial||pe.isMeshStandardMaterial||pe.isShadowMaterial||pe.isShaderMaterial&&pe.lights===!0}this.getActiveCubeFace=function(){return S},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(pe,Le,Ue){se.get(pe.texture).__webglTexture=Le,se.get(pe.depthTexture).__webglTexture=Ue;const $e=se.get(pe);$e.__hasExternalTextures=!0,$e.__hasExternalTextures&&($e.__autoAllocateDepthBuffer=Ue===void 0,$e.__autoAllocateDepthBuffer||Pe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),$e.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(pe,Le){const Ue=se.get(pe);Ue.__webglFramebuffer=Le,Ue.__useDefaultFramebuffer=Le===void 0},this.setRenderTarget=function(pe,Le=0,Ue=0){M=pe,S=Le,x=Ue;let $e=!0,We=null,xt=!1,_t=!1;if(pe){const ft=se.get(pe);ft.__useDefaultFramebuffer!==void 0?(oe.bindFramebuffer(ie.FRAMEBUFFER,null),$e=!1):ft.__webglFramebuffer===void 0?G.setupRenderTarget(pe):ft.__hasExternalTextures&&G.rebindTextures(pe,se.get(pe.texture).__webglTexture,se.get(pe.depthTexture).__webglTexture);const Et=pe.texture;(Et.isData3DTexture||Et.isDataArrayTexture||Et.isCompressedArrayTexture)&&(_t=!0);const zt=se.get(pe).__webglFramebuffer;pe.isWebGLCubeRenderTarget?(Array.isArray(zt[Le])?We=zt[Le][Ue]:We=zt[Le],xt=!0):ee.isWebGL2&&pe.samples>0&&G.useMultisampledRTT(pe)===!1?We=se.get(pe).__webglMultisampledFramebuffer:Array.isArray(zt)?We=zt[Ue]:We=zt,C.copy(pe.viewport),D.copy(pe.scissor),R=pe.scissorTest}else C.copy(X).multiplyScalar(I).floor(),D.copy(Z).multiplyScalar(I).floor(),R=te;if(oe.bindFramebuffer(ie.FRAMEBUFFER,We)&&ee.drawBuffers&&$e&&oe.drawBuffers(pe,We),oe.viewport(C),oe.scissor(D),oe.setScissorTest(R),xt){const ft=se.get(pe.texture);ie.framebufferTexture2D(ie.FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ie.TEXTURE_CUBE_MAP_POSITIVE_X+Le,ft.__webglTexture,Ue)}else if(_t){const ft=se.get(pe.texture),Et=Le||0;ie.framebufferTextureLayer(ie.FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ft.__webglTexture,Ue||0,Et)}A=-1},this.readRenderTargetPixels=function(pe,Le,Ue,$e,We,xt,_t){if(!(pe&&pe.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let It=se.get(pe).__webglFramebuffer;if(pe.isWebGLCubeRenderTarget&&_t!==void 0&&(It=It[_t]),It){oe.bindFramebuffer(ie.FRAMEBUFFER,It);try{const ft=pe.texture,Et=ft.format,zt=ft.type;if(Et!==ko&&Je.convert(Et)!==ie.getParameter(ie.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Ot=zt===zh&&(Pe.has("EXT_color_buffer_half_float")||ee.isWebGL2&&Pe.has("EXT_color_buffer_float"));if(zt!==Jl&&Je.convert(zt)!==ie.getParameter(ie.IMPLEMENTATION_COLOR_READ_TYPE)&&!(zt===Is&&(ee.isWebGL2||Pe.has("OES_texture_float")||Pe.has("WEBGL_color_buffer_float")))&&!Ot){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Le>=0&&Le<=pe.width-$e&&Ue>=0&&Ue<=pe.height-We&&ie.readPixels(Le,Ue,$e,We,Je.convert(Et),Je.convert(zt),xt)}finally{const ft=M!==null?se.get(M).__webglFramebuffer:null;oe.bindFramebuffer(ie.FRAMEBUFFER,ft)}}},this.copyFramebufferToTexture=function(pe,Le,Ue=0){const $e=Math.pow(2,-Ue),We=Math.floor(Le.image.width*$e),xt=Math.floor(Le.image.height*$e);G.setTexture2D(Le,0),ie.copyTexSubImage2D(ie.TEXTURE_2D,Ue,0,0,pe.x,pe.y,We,xt),oe.unbindTexture()},this.copyTextureToTexture=function(pe,Le,Ue,$e=0){const We=Le.image.width,xt=Le.image.height,_t=Je.convert(Ue.format),It=Je.convert(Ue.type);G.setTexture2D(Ue,0),ie.pixelStorei(ie.UNPACK_FLIP_Y_WEBGL,Ue.flipY),ie.pixelStorei(ie.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ue.premultiplyAlpha),ie.pixelStorei(ie.UNPACK_ALIGNMENT,Ue.unpackAlignment),Le.isDataTexture?ie.texSubImage2D(ie.TEXTURE_2D,$e,pe.x,pe.y,We,xt,_t,It,Le.image.data):Le.isCompressedTexture?ie.compressedTexSubImage2D(ie.TEXTURE_2D,$e,pe.x,pe.y,Le.mipmaps[0].width,Le.mipmaps[0].height,_t,Le.mipmaps[0].data):ie.texSubImage2D(ie.TEXTURE_2D,$e,pe.x,pe.y,_t,It,Le.image),$e===0&&Ue.generateMipmaps&&ie.generateMipmap(ie.TEXTURE_2D),oe.unbindTexture()},this.copyTextureToTexture3D=function(pe,Le,Ue,$e,We=0){if(b.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const xt=pe.max.x-pe.min.x+1,_t=pe.max.y-pe.min.y+1,It=pe.max.z-pe.min.z+1,ft=Je.convert($e.format),Et=Je.convert($e.type);let zt;if($e.isData3DTexture)G.setTexture3D($e,0),zt=ie.TEXTURE_3D;else if($e.isDataArrayTexture||$e.isCompressedArrayTexture)G.setTexture2DArray($e,0),zt=ie.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ie.pixelStorei(ie.UNPACK_FLIP_Y_WEBGL,$e.flipY),ie.pixelStorei(ie.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$e.premultiplyAlpha),ie.pixelStorei(ie.UNPACK_ALIGNMENT,$e.unpackAlignment);const Ot=ie.getParameter(ie.UNPACK_ROW_LENGTH),Wn=ie.getParameter(ie.UNPACK_IMAGE_HEIGHT),fi=ie.getParameter(ie.UNPACK_SKIP_PIXELS),dr=ie.getParameter(ie.UNPACK_SKIP_ROWS),_i=ie.getParameter(ie.UNPACK_SKIP_IMAGES),Jt=Ue.isCompressedTexture?Ue.mipmaps[We]:Ue.image;ie.pixelStorei(ie.UNPACK_ROW_LENGTH,Jt.width),ie.pixelStorei(ie.UNPACK_IMAGE_HEIGHT,Jt.height),ie.pixelStorei(ie.UNPACK_SKIP_PIXELS,pe.min.x),ie.pixelStorei(ie.UNPACK_SKIP_ROWS,pe.min.y),ie.pixelStorei(ie.UNPACK_SKIP_IMAGES,pe.min.z),Ue.isDataTexture||Ue.isData3DTexture?ie.texSubImage3D(zt,We,Le.x,Le.y,Le.z,xt,_t,It,ft,Et,Jt.data):Ue.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ie.compressedTexSubImage3D(zt,We,Le.x,Le.y,Le.z,xt,_t,It,ft,Jt.data)):ie.texSubImage3D(zt,We,Le.x,Le.y,Le.z,xt,_t,It,ft,Et,Jt),ie.pixelStorei(ie.UNPACK_ROW_LENGTH,Ot),ie.pixelStorei(ie.UNPACK_IMAGE_HEIGHT,Wn),ie.pixelStorei(ie.UNPACK_SKIP_PIXELS,fi),ie.pixelStorei(ie.UNPACK_SKIP_ROWS,dr),ie.pixelStorei(ie.UNPACK_SKIP_IMAGES,_i),We===0&&$e.generateMipmaps&&ie.generateMipmap(zt),oe.unbindTexture()},this.initTexture=function(pe){pe.isCubeTexture?G.setTextureCube(pe,0):pe.isData3DTexture?G.setTexture3D(pe,0):pe.isDataArrayTexture||pe.isCompressedArrayTexture?G.setTexture2DArray(pe,0):G.setTexture2D(pe,0),oe.unbindTexture()},this.resetState=function(){S=0,x=0,M=null,oe.reset(),Ee.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Hl}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===X2?"display-p3":"srgb",t.unpackColorSpace=Gn.workingColorSpace===fx?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===mi?Df:uL}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Df?mi:su}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class xne extends bL{}xne.prototype.isWebGL1Renderer=!0;class J2{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new gt(e),this.density=t}clone(){return new J2(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Q2{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new gt(e),this.near=t,this.far=r}clone(){return new Q2(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class f1 extends Dn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class eC{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=l1,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Hs()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return bh("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,o=this.stride;i<o;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Hs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Hs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const No=new me;class Vh{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)No.fromBufferAttribute(this,t),No.applyMatrix4(e),this.setXYZ(t,No.x,No.y,No.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)No.fromBufferAttribute(this,t),No.applyNormalMatrix(e),this.setXYZ(t,No.x,No.y,No.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)No.fromBufferAttribute(this,t),No.transformDirection(e),this.setXYZ(t,No.x,No.y,No.z);return this}getComponent(e,t){let r=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(r=Io(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=cn(r,this.array)),this.data.array[e*this.data.stride+this.offset+t]=r,this}setX(e,t){return this.normalized&&(t=cn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=cn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=cn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=cn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Io(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Io(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Io(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Io(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=cn(t,this.array),r=cn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=cn(t,this.array),r=cn(r,this.array),i=cn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,o){return e=e*this.data.stride+this.offset,this.normalized&&(t=cn(t,this.array),r=cn(r,this.array),i=cn(i,this.array),o=cn(o,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[i+o])}return new $n(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Vh(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[i+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class wL extends Ji{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new gt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Jp;const f0=new me,Qp=new me,em=new me,tm=new nt,d0=new nt,bne=new Qt,Yw=new me,h0=new me,Kw=new me,B7=new nt,T3=new nt,z7=new nt;class wne extends Dn{constructor(e=new wL){if(super(),this.isSprite=!0,this.type="Sprite",Jp===void 0){Jp=new sn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new eC(t,5);Jp.setIndex([0,1,2,0,2,3]),Jp.setAttribute("position",new Vh(r,3,0,!1)),Jp.setAttribute("uv",new Vh(r,2,3,!1))}this.geometry=Jp,this.material=e,this.center=new nt(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Qp.setFromMatrixScale(this.matrixWorld),bne.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),em.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Qp.multiplyScalar(-em.z);const r=this.material.rotation;let i,o;r!==0&&(o=Math.cos(r),i=Math.sin(r));const s=this.center;Zw(Yw.set(-.5,-.5,0),em,s,Qp,i,o),Zw(h0.set(.5,-.5,0),em,s,Qp,i,o),Zw(Kw.set(.5,.5,0),em,s,Qp,i,o),B7.set(0,0),T3.set(1,0),z7.set(1,1);let a=e.ray.intersectTriangle(Yw,h0,Kw,!1,f0);if(a===null&&(Zw(h0.set(-.5,.5,0),em,s,Qp,i,o),T3.set(0,1),a=e.ray.intersectTriangle(Yw,Kw,h0,!1,f0),a===null))return;const l=e.ray.origin.distanceTo(f0);l<e.near||l>e.far||t.push({distance:l,point:f0.clone(),uv:Fs.getInterpolation(f0,Yw,h0,Kw,B7,T3,z7,new nt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Zw(n,e,t,r,i,o){tm.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(d0.x=o*tm.x-i*tm.y,d0.y=i*tm.x+o*tm.y):d0.copy(tm),n.copy(e),n.x+=d0.x,n.y+=d0.y,n.applyMatrix4(bne)}const Jw=new me,U7=new me;class Sne extends Dn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const o=t[r];this.addLevel(o.object.clone(),o.distance,o.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let o;for(o=0;o<i.length&&!(t<i[o].distance);o++);return i.splice(o,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),e<o)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){Jw.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Jw);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Jw.setFromMatrixPosition(e.matrixWorld),U7.setFromMatrixPosition(this.matrixWorld);const r=Jw.distanceTo(U7)/e.zoom;t[0].object.visible=!0;let i,o;for(i=1,o=t.length;i<o;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),r>=s)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<o;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,o=r.length;i<o;i++){const s=r[i];t.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return t}}const V7=new me,$7=new Kn,H7=new Kn,Uje=new me,W7=new Qt,Qw=new me,D3=new xo,j7=new Qt,N3=new ip;class _ne extends ui{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=jP,this.bindMatrix=new Qt,this.bindMatrixInverse=new Qt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Vo),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,Qw),this.boundingBox.expandByPoint(Qw)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new xo),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,Qw),this.boundingSphere.expandByPoint(Qw)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),D3.copy(this.boundingSphere),D3.applyMatrix4(i),e.ray.intersectsSphere(D3)!==!1&&(j7.copy(i).invert(),N3.copy(e.ray).applyMatrix4(j7),!(this.boundingBox!==null&&N3.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,N3)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Kn,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===jP?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Ite?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;$7.fromBufferAttribute(i.attributes.skinIndex,e),H7.fromBufferAttribute(i.attributes.skinWeight,e),V7.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){const s=H7.getComponent(o);if(s!==0){const a=$7.getComponent(o);W7.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(Uje.copy(V7).applyMatrix4(W7),s)}}return t.applyMatrix4(this.bindMatrixInverse)}}class SL extends Dn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Sh extends Or{constructor(e=null,t=1,r=1,i,o,s,a,l,u=Zr,c=Zr,f,d){super(null,s,a,l,u,c,i,o,f,d),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const G7=new Qt,Vje=new Qt;class tC{constructor(e=[],t=[]){this.uuid=Hs(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Qt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Qt;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let o=0,s=e.length;o<s;o++){const a=e[o]?e[o].matrixWorld:Vje;G7.multiplyMatrices(a,t[o]),G7.toArray(r,o*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new tC(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new Sh(t,e,e,ko,Is);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const o=e.bones[r];let s=t[o];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),s=new SL),this.bones.push(s),this.boneInverses.push(new Qt().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,o=t.length;i<o;i++){const s=t[i];e.bones.push(s.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class Pg extends $n{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const nm=new Qt,q7=new Qt,eS=[],X7=new Vo,$je=new Qt,p0=new ui,m0=new xo;class Ene extends ui{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Pg(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,$je)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Vo),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,nm),X7.copy(e.boundingBox).applyMatrix4(nm),this.boundingBox.union(X7)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new xo),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,nm),m0.copy(e.boundingSphere).applyMatrix4(nm),this.boundingSphere.union(m0)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(p0.geometry=this.geometry,p0.material=this.material,p0.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),m0.copy(this.boundingSphere),m0.applyMatrix4(r),e.ray.intersectsSphere(m0)!==!1))for(let o=0;o<i;o++){this.getMatrixAt(o,nm),q7.multiplyMatrices(r,nm),p0.matrixWorld=q7,p0.raycast(e,eS);for(let s=0,a=eS.length;s<a;s++){const l=eS[s];l.instanceId=o,l.object=this,t.push(l)}eS.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Pg(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function Hje(n,e){return n.z-e.z}function Wje(n,e){return e.z-n.z}class jje{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const r=this.pool,i=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1});const o=r[this.index];i.push(o),this.index++,o.start=e.start,o.count=e.count,o.z=t}reset(){this.list.length=0,this.index=0}}const rm="batchId",$c=new Qt,Y7=new Qt,Gje=new Qt,K7=new Qt,P3=new mx,tS=new Vo,Dd=new xo,g0=new me,R3=new jje,uo=new ui,nS=[];function qje(n,e,t=0){const r=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const i=n.count;for(let o=0;o<i;o++)for(let s=0;s<r;s++)e.setComponent(o+t,s,n.getComponent(o,s))}else e.array.set(n.array,t*r);e.needsUpdate=!0}class Mne extends ui{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,r=t*2,i){super(new sn,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=r,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),r=new Sh(t,e,e,ko,Is);this._matricesTexture=r}_initializeGeometry(e){const t=this.geometry,r=this._maxVertexCount,i=this._maxGeometryCount,o=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:u,itemSize:c,normalized:f}=l,d=new u.constructor(r*c),h=new l.constructor(d,c,f);h.setUsage(l.usage),t.setAttribute(a,h)}if(e.getIndex()!==null){const a=r>65536?new Uint32Array(o):new Uint16Array(o);t.setIndex(new $n(a,1))}const s=i>65536?new Uint32Array(r):new Uint16Array(r);t.setAttribute(rm,new $n(s,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(rm))throw new Error(`BatchedMesh: Geometry cannot use attribute "${rm}"`);const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in t.attributes){if(r===rm)continue;if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),o=t.getAttribute(r);if(i.itemSize!==o.itemSize||i.normalized!==o.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Vo);const e=this._geometryCount,t=this.boundingBox,r=this._active;t.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,$c),this.getBoundingBoxAt(i,tS).applyMatrix4($c),t.union(tS))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new xo);const e=this._geometryCount,t=this.boundingSphere,r=this._active;t.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,$c),this.getBoundingSphereAt(i,Dd).applyMatrix4($c),t.union(Dd))}addGeometry(e,t=-1,r=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let o=null;const s=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(o=s[s.length-1]),t===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=t,o===null?i.vertexStart=0:i.vertexStart=o.vertexStart+o.vertexCount;const u=e.getIndex(),c=u!==null;if(c&&(r===-1?i.indexCount=u.count:i.indexCount=r,o===null?i.indexStart=0:i.indexStart=o.indexStart+o.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const f=this._visibility,d=this._active,h=this._matricesTexture,m=this._matricesTexture.image.data;f.push(!0),d.push(!0);const g=this._geometryCount;this._geometryCount++,Gje.toArray(m,g*16),h.needsUpdate=!0,s.push(i),a.push({start:c?i.indexStart:i.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new Vo,sphereInitialized:!1,sphere:new xo});const y=this.geometry.getAttribute(rm);for(let p=0;p<i.vertexCount;p++)y.setX(i.vertexStart+p,g);return y.needsUpdate=!0,this.setGeometryAt(g,e),g}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const r=this.geometry,i=r.getIndex()!==null,o=r.getIndex(),s=t.getIndex(),a=this._reservedRanges[e];if(i&&s.count>a.indexCount||t.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,u=a.vertexCount;for(const h in r.attributes){if(h===rm)continue;const m=t.getAttribute(h),g=r.getAttribute(h);qje(m,g,l);const y=m.itemSize;for(let p=m.count,w=u;p<w;p++){const b=l+p;for(let v=0;v<y;v++)g.setComponent(b,v,0)}g.needsUpdate=!0}if(i){const h=a.indexStart;for(let m=0;m<s.count;m++)o.setX(h+m,l+s.getX(m));for(let m=s.count,g=a.indexCount;m<g;m++)o.setX(h+m,l);o.needsUpdate=!0}const c=this._bounds[e];t.boundingBox!==null?(c.box.copy(t.boundingBox),c.boxInitialized=!0):c.boxInitialized=!1,t.boundingSphere!==null?(c.sphere.copy(t.boundingSphere),c.sphereInitialized=!0):c.sphereInitialized=!1;const f=this._drawRanges[e],d=t.getAttribute("position");return f.count=i?s.count:d.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||t[e]===!1?this:(t[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,t){if(this._active[e]===!1)return null;const i=this._bounds[e],o=i.box,s=this.geometry;if(i.boxInitialized===!1){o.makeEmpty();const a=s.index,l=s.attributes.position,u=this._drawRanges[e];for(let c=u.start,f=u.start+u.count;c<f;c++){let d=c;a&&(d=a.getX(d)),o.expandByPoint(g0.fromBufferAttribute(l,d))}i.boxInitialized=!0}return t.copy(o),t}getBoundingSphereAt(e,t){if(this._active[e]===!1)return null;const i=this._bounds[e],o=i.sphere,s=this.geometry;if(i.sphereInitialized===!1){o.makeEmpty(),this.getBoundingBoxAt(e,tS),tS.getCenter(o.center);const a=s.index,l=s.attributes.position,u=this._drawRanges[e];let c=0;for(let f=u.start,d=u.start+u.count;f<d;f++){let h=f;a&&(h=a.getX(h)),g0.fromBufferAttribute(l,h),c=Math.max(c,o.center.distanceToSquared(g0))}o.radius=Math.sqrt(c),i.sphereInitialized=!0}return t.copy(o),t}setMatrixAt(e,t){const r=this._active,i=this._matricesTexture,o=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||r[e]===!1?this:(t.toArray(o,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,t){const r=this._active,i=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||r[e]===!1?null:t.fromArray(i,e*16)}setVisibleAt(e,t){const r=this._visibility,i=this._active,o=this._geometryCount;return e>=o||i[e]===!1||r[e]===t?this:(r[e]=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._visibility,r=this._active,i=this._geometryCount;return e>=i||r[e]===!1?!1:t[e]}raycast(e,t){const r=this._visibility,i=this._active,o=this._drawRanges,s=this._geometryCount,a=this.matrixWorld,l=this.geometry;uo.material=this.material,uo.geometry.index=l.index,uo.geometry.attributes=l.attributes,uo.geometry.boundingBox===null&&(uo.geometry.boundingBox=new Vo),uo.geometry.boundingSphere===null&&(uo.geometry.boundingSphere=new xo);for(let u=0;u<s;u++){if(!r[u]||!i[u])continue;const c=o[u];uo.geometry.setDrawRange(c.start,c.count),this.getMatrixAt(u,uo.matrixWorld).premultiply(a),this.getBoundingBoxAt(u,uo.geometry.boundingBox),this.getBoundingSphereAt(u,uo.geometry.boundingSphere),uo.raycast(e,nS);for(let f=0,d=nS.length;f<d;f++){const h=nS[f];h.object=this,h.batchId=u,t.push(h)}nS.length=0}uo.material=null,uo.geometry.index=null,uo.geometry.attributes={},uo.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,t,r,i,o){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const s=i.getIndex(),a=s===null?1:s.array.BYTES_PER_ELEMENT,l=this._active,u=this._visibility,c=this._multiDrawStarts,f=this._multiDrawCounts,d=this._drawRanges,h=this.perObjectFrustumCulled;h&&(K7.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),P3.setFromProjectionMatrix(K7,e.coordinateSystem));let m=0;if(this.sortObjects){Y7.copy(this.matrixWorld).invert(),g0.setFromMatrixPosition(r.matrixWorld).applyMatrix4(Y7);for(let p=0,w=u.length;p<w;p++)if(u[p]&&l[p]){this.getMatrixAt(p,$c),this.getBoundingSphereAt(p,Dd).applyMatrix4($c);let b=!1;if(h&&(b=!P3.intersectsSphere(Dd)),!b){const v=g0.distanceTo(Dd.center);R3.push(d[p],v)}}const g=R3.list,y=this.customSort;y===null?g.sort(o.transparent?Wje:Hje):y.call(this,g,r);for(let p=0,w=g.length;p<w;p++){const b=g[p];c[m]=b.start*a,f[m]=b.count,m++}R3.reset()}else for(let g=0,y=u.length;g<y;g++)if(u[g]&&l[g]){let p=!1;if(h&&(this.getMatrixAt(g,$c),this.getBoundingSphereAt(g,Dd).applyMatrix4($c),p=!P3.intersectsSphere(Dd)),!p){const w=d[g];c[m]=w.start*a,f[m]=w.count,m++}}this._multiDrawCount=m,this._visibilityChanged=!1}onBeforeShadow(e,t,r,i,o,s){this.onBeforeRender(e,null,i,o,s)}}class Ko extends Ji{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new gt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Z7=new me,J7=new me,Q7=new Qt,O3=new ip,rS=new xo;let Gf=class extends Dn{constructor(e=new sn,t=new Ko){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,o=t.count;i<o;i++)Z7.fromBufferAttribute(t,i-1),J7.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=Z7.distanceTo(J7);e.setAttribute("lineDistance",new Rt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,o=e.params.Line.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),rS.copy(r.boundingSphere),rS.applyMatrix4(i),rS.radius+=o,e.ray.intersectsSphere(rS)===!1)return;Q7.copy(i).invert(),O3.copy(e.ray).applyMatrix4(Q7);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=new me,c=new me,f=new me,d=new me,h=this.isLineSegments?2:1,m=r.index,y=r.attributes.position;if(m!==null){const p=Math.max(0,s.start),w=Math.min(m.count,s.start+s.count);for(let b=p,v=w-1;b<v;b+=h){const S=m.getX(b),x=m.getX(b+1);if(u.fromBufferAttribute(y,S),c.fromBufferAttribute(y,x),O3.distanceSqToSegment(u,c,d,f)>l)continue;d.applyMatrix4(this.matrixWorld);const A=e.ray.origin.distanceTo(d);A<e.near||A>e.far||t.push({distance:A,point:f.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else{const p=Math.max(0,s.start),w=Math.min(y.count,s.start+s.count);for(let b=p,v=w-1;b<v;b+=h){if(u.fromBufferAttribute(y,b),c.fromBufferAttribute(y,b+1),O3.distanceSqToSegment(u,c,d,f)>l)continue;d.applyMatrix4(this.matrixWorld);const x=e.ray.origin.distanceTo(d);x<e.near||x>e.far||t.push({distance:x,point:f.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=i.length;o<s;o++){const a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};const eH=new me,tH=new me;class hu extends Gf{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,o=t.count;i<o;i+=2)eH.fromBufferAttribute(t,i),tH.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+eH.distanceTo(tH);e.setAttribute("lineDistance",new Rt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Cne extends Gf{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class _L extends Ji{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new gt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const nH=new Qt,SR=new ip,iS=new xo,oS=new me;class Ane extends Dn{constructor(e=new sn,t=new _L){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,o=e.params.Points.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),iS.copy(r.boundingSphere),iS.applyMatrix4(i),iS.radius+=o,e.ray.intersectsSphere(iS)===!1)return;nH.copy(i).invert(),SR.copy(e.ray).applyMatrix4(nH);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=r.index,f=r.attributes.position;if(u!==null){const d=Math.max(0,s.start),h=Math.min(u.count,s.start+s.count);for(let m=d,g=h;m<g;m++){const y=u.getX(m);oS.fromBufferAttribute(f,y),rH(oS,y,l,i,e,t,this)}}else{const d=Math.max(0,s.start),h=Math.min(f.count,s.start+s.count);for(let m=d,g=h;m<g;m++)oS.fromBufferAttribute(f,m),rH(oS,m,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=i.length;o<s;o++){const a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}}function rH(n,e,t,r,i,o,s){const a=SR.distanceSqToPoint(n);if(a<t){const l=new me;SR.closestPointToPoint(n,l),l.applyMatrix4(r);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;o.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:s})}}class Xje extends Or{constructor(e,t,r,i,o,s,a,l,u){super(e,t,r,i,o,s,a,l,u),this.isVideoTexture=!0,this.minFilter=s!==void 0?s:gr,this.magFilter=o!==void 0?o:gr,this.generateMipmaps=!1;const c=this;function f(){c.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Yje extends Or{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Zr,this.minFilter=Zr,this.generateMipmaps=!1,this.needsUpdate=!0}}class nC extends Or{constructor(e,t,r,i,o,s,a,l,u,c,f,d){super(null,s,a,l,u,c,i,o,f,d),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Kje extends nC{constructor(e,t,r,i,o,s){super(e,t,r,o,s),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=po}}class Zje extends nC{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,pc),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Tne extends Or{constructor(e,t,r,i,o,s,a,l,u){super(e,t,r,i,o,s,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class pl{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),o=0;t.push(0);for(let s=1;s<=e;s++)r=this.getPoint(s/e),o+=r.distanceTo(i),t.push(o),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const o=r.length;let s;t?s=t:s=e*r[o-1];let a=0,l=o-1,u;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),u=r[i]-s,u<0)a=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,r[i]===s)return i/(o-1);const c=r[i],d=r[i+1]-c,h=(s-c)/d;return(i+h)/(o-1)}getTangent(e,t){let i=e-1e-4,o=e+1e-4;i<0&&(i=0),o>1&&(o=1);const s=this.getPoint(i),a=this.getPoint(o),l=t||(s.isVector2?new nt:new me);return l.copy(a).sub(s).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new me,i=[],o=[],s=[],a=new me,l=new Qt;for(let h=0;h<=e;h++){const m=h/e;i[h]=this.getTangentAt(m,new me)}o[0]=new me,s[0]=new me;let u=Number.MAX_VALUE;const c=Math.abs(i[0].x),f=Math.abs(i[0].y),d=Math.abs(i[0].z);c<=u&&(u=c,r.set(1,0,0)),f<=u&&(u=f,r.set(0,1,0)),d<=u&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),o[0].crossVectors(i[0],a),s[0].crossVectors(i[0],o[0]);for(let h=1;h<=e;h++){if(o[h]=o[h-1].clone(),s[h]=s[h-1].clone(),a.crossVectors(i[h-1],i[h]),a.length()>Number.EPSILON){a.normalize();const m=Math.acos(Hr(i[h-1].dot(i[h]),-1,1));o[h].applyMatrix4(l.makeRotationAxis(a,m))}s[h].crossVectors(i[h],o[h])}if(t===!0){let h=Math.acos(Hr(o[0].dot(o[e]),-1,1));h/=e,i[0].dot(a.crossVectors(o[0],o[e]))>0&&(h=-h);for(let m=1;m<=e;m++)o[m].applyMatrix4(l.makeRotationAxis(i[m],h*m)),s[m].crossVectors(i[m],o[m])}return{tangents:i,normals:o,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class rC extends pl{constructor(e=0,t=0,r=1,i=1,o=0,s=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=o,this.aEndAngle=s,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const r=t||new nt,i=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const s=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=i;for(;o>i;)o-=i;o<Number.EPSILON&&(s?o=0:o=i),this.aClockwise===!0&&!s&&(o===i?o=-i:o=o-i);const a=this.aStartAngle+e*o;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const c=Math.cos(this.aRotation),f=Math.sin(this.aRotation),d=l-this.aX,h=u-this.aY;l=d*c-h*f+this.aX,u=d*f+h*c+this.aY}return r.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Dne extends rC{constructor(e,t,r,i,o,s){super(e,t,r,r,i,o,s),this.isArcCurve=!0,this.type="ArcCurve"}}function EL(){let n=0,e=0,t=0,r=0;function i(o,s,a,l){n=o,e=a,t=-3*o+3*s-2*a-l,r=2*o-2*s+a+l}return{initCatmullRom:function(o,s,a,l,u){i(s,a,u*(a-o),u*(l-s))},initNonuniformCatmullRom:function(o,s,a,l,u,c,f){let d=(s-o)/u-(a-o)/(u+c)+(a-s)/c,h=(a-s)/c-(l-s)/(c+f)+(l-a)/f;d*=c,h*=c,i(s,a,d,h)},calc:function(o){const s=o*o,a=s*o;return n+e*o+t*s+r*a}}}const sS=new me,k3=new EL,I3=new EL,L3=new EL;class Nne extends pl{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new me){const r=t,i=this.points,o=i.length,s=(o-(this.closed?0:1))*e;let a=Math.floor(s),l=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/o)+1)*o:l===0&&a===o-1&&(a=o-2,l=1);let u,c;this.closed||a>0?u=i[(a-1)%o]:(sS.subVectors(i[0],i[1]).add(i[0]),u=sS);const f=i[a%o],d=i[(a+1)%o];if(this.closed||a+2<o?c=i[(a+2)%o]:(sS.subVectors(i[o-1],i[o-2]).add(i[o-1]),c=sS),this.curveType==="centripetal"||this.curveType==="chordal"){const h=this.curveType==="chordal"?.5:.25;let m=Math.pow(u.distanceToSquared(f),h),g=Math.pow(f.distanceToSquared(d),h),y=Math.pow(d.distanceToSquared(c),h);g<1e-4&&(g=1),m<1e-4&&(m=g),y<1e-4&&(y=g),k3.initNonuniformCatmullRom(u.x,f.x,d.x,c.x,m,g,y),I3.initNonuniformCatmullRom(u.y,f.y,d.y,c.y,m,g,y),L3.initNonuniformCatmullRom(u.z,f.z,d.z,c.z,m,g,y)}else this.curveType==="catmullrom"&&(k3.initCatmullRom(u.x,f.x,d.x,c.x,this.tension),I3.initCatmullRom(u.y,f.y,d.y,c.y,this.tension),L3.initCatmullRom(u.z,f.z,d.z,c.z,this.tension));return r.set(k3.calc(l),I3.calc(l),L3.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new me().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function iH(n,e,t,r,i){const o=(r-e)*.5,s=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+o+s)*l+(-3*t+3*r-2*o-s)*a+o*n+t}function Jje(n,e){const t=1-n;return t*t*e}function Qje(n,e){return 2*(1-n)*n*e}function eGe(n,e){return n*n*e}function ay(n,e,t,r){return Jje(n,e)+Qje(n,t)+eGe(n,r)}function tGe(n,e){const t=1-n;return t*t*t*e}function nGe(n,e){const t=1-n;return 3*t*t*n*e}function rGe(n,e){return 3*(1-n)*n*n*e}function iGe(n,e){return n*n*n*e}function ly(n,e,t,r,i){return tGe(n,e)+nGe(n,t)+rGe(n,r)+iGe(n,i)}class ML extends pl{constructor(e=new nt,t=new nt,r=new nt,i=new nt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new nt){const r=t,i=this.v0,o=this.v1,s=this.v2,a=this.v3;return r.set(ly(e,i.x,o.x,s.x,a.x),ly(e,i.y,o.y,s.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Pne extends pl{constructor(e=new me,t=new me,r=new me,i=new me){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new me){const r=t,i=this.v0,o=this.v1,s=this.v2,a=this.v3;return r.set(ly(e,i.x,o.x,s.x,a.x),ly(e,i.y,o.y,s.y,a.y),ly(e,i.z,o.z,s.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class CL extends pl{constructor(e=new nt,t=new nt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new nt){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new nt){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Rne extends pl{constructor(e=new me,t=new me){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new me){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new me){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class AL extends pl{constructor(e=new nt,t=new nt,r=new nt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new nt){const r=t,i=this.v0,o=this.v1,s=this.v2;return r.set(ay(e,i.x,o.x,s.x),ay(e,i.y,o.y,s.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class TL extends pl{constructor(e=new me,t=new me,r=new me){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new me){const r=t,i=this.v0,o=this.v1,s=this.v2;return r.set(ay(e,i.x,o.x,s.x),ay(e,i.y,o.y,s.y),ay(e,i.z,o.z,s.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class DL extends pl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new nt){const r=t,i=this.points,o=(i.length-1)*e,s=Math.floor(o),a=o-s,l=i[s===0?s:s-1],u=i[s],c=i[s>i.length-2?i.length-1:s+1],f=i[s>i.length-3?i.length-1:s+2];return r.set(iH(a,l.x,u.x,c.x,f.x),iH(a,l.y,u.y,c.y,f.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new nt().fromArray(i))}return this}}var fM=Object.freeze({__proto__:null,ArcCurve:Dne,CatmullRomCurve3:Nne,CubicBezierCurve:ML,CubicBezierCurve3:Pne,EllipseCurve:rC,LineCurve:CL,LineCurve3:Rne,QuadraticBezierCurve:AL,QuadraticBezierCurve3:TL,SplineCurve:DL});class One extends pl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new fM[r](t,e))}return this}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let o=0;for(;o<i.length;){if(i[o]>=r){const s=i[o]-r,a=this.curves[o],l=a.getLength(),u=l===0?0:1-s/l;return a.getPointAt(u,t)}o++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,o=this.curves;i<o.length;i++){const s=o[i],a=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,l=s.getPoints(a);for(let u=0;u<l.length;u++){const c=l[u];r&&r.equals(c)||(t.push(c),r=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new fM[i.type]().fromJSON(i))}return this}}class d1 extends One{constructor(e){super(),this.type="Path",this.currentPoint=new nt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new CL(this.currentPoint.clone(),new nt(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const o=new AL(this.currentPoint.clone(),new nt(e,t),new nt(r,i));return this.curves.push(o),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,o,s){const a=new ML(this.currentPoint.clone(),new nt(e,t),new nt(r,i),new nt(o,s));return this.curves.push(a),this.currentPoint.set(o,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new DL(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,o,s){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,r,i,o,s),this}absarc(e,t,r,i,o,s){return this.absellipse(e,t,r,r,i,o,s),this}ellipse(e,t,r,i,o,s,a,l){const u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,t+c,r,i,o,s,a,l),this}absellipse(e,t,r,i,o,s,a,l){const u=new rC(e,t,r,i,o,s,a,l);if(this.curves.length>0){const f=u.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(u);const c=u.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class gx extends sn{constructor(e=[new nt(0,-.5),new nt(.5,0),new nt(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=Hr(i,0,Math.PI*2);const o=[],s=[],a=[],l=[],u=[],c=1/t,f=new me,d=new nt,h=new me,m=new me,g=new me;let y=0,p=0;for(let w=0;w<=e.length-1;w++)switch(w){case 0:y=e[w+1].x-e[w].x,p=e[w+1].y-e[w].y,h.x=p*1,h.y=-y,h.z=p*0,g.copy(h),h.normalize(),l.push(h.x,h.y,h.z);break;case e.length-1:l.push(g.x,g.y,g.z);break;default:y=e[w+1].x-e[w].x,p=e[w+1].y-e[w].y,h.x=p*1,h.y=-y,h.z=p*0,m.copy(h),h.x+=g.x,h.y+=g.y,h.z+=g.z,h.normalize(),l.push(h.x,h.y,h.z),g.copy(m)}for(let w=0;w<=t;w++){const b=r+w*c*i,v=Math.sin(b),S=Math.cos(b);for(let x=0;x<=e.length-1;x++){f.x=e[x].x*v,f.y=e[x].y,f.z=e[x].x*S,s.push(f.x,f.y,f.z),d.x=w/t,d.y=x/(e.length-1),a.push(d.x,d.y);const M=l[3*x+0]*v,A=l[3*x+1],T=l[3*x+0]*S;u.push(M,A,T)}}for(let w=0;w<t;w++)for(let b=0;b<e.length-1;b++){const v=b+w*e.length,S=v,x=v+e.length,M=v+e.length+1,A=v+1;o.push(S,x,A),o.push(M,A,x)}this.setIndex(o),this.setAttribute("position",new Rt(s,3)),this.setAttribute("uv",new Rt(a,2)),this.setAttribute("normal",new Rt(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gx(e.points,e.segments,e.phiStart,e.phiLength)}}class iC extends gx{constructor(e=1,t=1,r=4,i=8){const o=new d1;o.absarc(0,-t/2,e,Math.PI*1.5,0),o.absarc(0,t/2,e,0,Math.PI*.5),super(o.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new iC(e.radius,e.length,e.capSegments,e.radialSegments)}}class oC extends sn{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const o=[],s=[],a=[],l=[],u=new me,c=new nt;s.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,d=3;f<=t;f++,d+=3){const h=r+f/t*i;u.x=e*Math.cos(h),u.y=e*Math.sin(h),s.push(u.x,u.y,u.z),a.push(0,0,1),c.x=(s[d]/e+1)/2,c.y=(s[d+1]/e+1)/2,l.push(c.x,c.y)}for(let f=1;f<=t;f++)o.push(f,f+1,0);this.setIndex(o),this.setAttribute("position",new Rt(s,3)),this.setAttribute("normal",new Rt(a,3)),this.setAttribute("uv",new Rt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new oC(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class gv extends sn{constructor(e=1,t=1,r=1,i=32,o=1,s=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:l};const u=this;i=Math.floor(i),o=Math.floor(o);const c=[],f=[],d=[],h=[];let m=0;const g=[],y=r/2;let p=0;w(),s===!1&&(e>0&&b(!0),t>0&&b(!1)),this.setIndex(c),this.setAttribute("position",new Rt(f,3)),this.setAttribute("normal",new Rt(d,3)),this.setAttribute("uv",new Rt(h,2));function w(){const v=new me,S=new me;let x=0;const M=(t-e)/r;for(let A=0;A<=o;A++){const T=[],C=A/o,D=C*(t-e)+e;for(let R=0;R<=i;R++){const B=R/i,F=B*l+a,U=Math.sin(F),N=Math.cos(F);S.x=D*U,S.y=-C*r+y,S.z=D*N,f.push(S.x,S.y,S.z),v.set(U,M,N).normalize(),d.push(v.x,v.y,v.z),h.push(B,1-C),T.push(m++)}g.push(T)}for(let A=0;A<i;A++)for(let T=0;T<o;T++){const C=g[T][A],D=g[T+1][A],R=g[T+1][A+1],B=g[T][A+1];c.push(C,D,B),c.push(D,R,B),x+=6}u.addGroup(p,x,0),p+=x}function b(v){const S=m,x=new nt,M=new me;let A=0;const T=v===!0?e:t,C=v===!0?1:-1;for(let R=1;R<=i;R++)f.push(0,y*C,0),d.push(0,C,0),h.push(.5,.5),m++;const D=m;for(let R=0;R<=i;R++){const F=R/i*l+a,U=Math.cos(F),N=Math.sin(F);M.x=T*N,M.y=y*C,M.z=T*U,f.push(M.x,M.y,M.z),d.push(0,C,0),x.x=U*.5+.5,x.y=N*.5*C+.5,h.push(x.x,x.y),m++}for(let R=0;R<i;R++){const B=S+R,F=D+R;v===!0?c.push(F,F+1,B):c.push(F+1,F,B),A+=3}u.addGroup(p,A,v===!0?1:2),p+=A}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gv(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class sC extends gv{constructor(e=1,t=1,r=32,i=1,o=!1,s=0,a=Math.PI*2){super(0,e,t,r,i,o,s,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:s,thetaLength:a}}static fromJSON(e){return new sC(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class fd extends sn{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const o=[],s=[];a(i),u(r),c(),this.setAttribute("position",new Rt(o,3)),this.setAttribute("normal",new Rt(o.slice(),3)),this.setAttribute("uv",new Rt(s,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(w){const b=new me,v=new me,S=new me;for(let x=0;x<t.length;x+=3)h(t[x+0],b),h(t[x+1],v),h(t[x+2],S),l(b,v,S,w)}function l(w,b,v,S){const x=S+1,M=[];for(let A=0;A<=x;A++){M[A]=[];const T=w.clone().lerp(v,A/x),C=b.clone().lerp(v,A/x),D=x-A;for(let R=0;R<=D;R++)R===0&&A===x?M[A][R]=T:M[A][R]=T.clone().lerp(C,R/D)}for(let A=0;A<x;A++)for(let T=0;T<2*(x-A)-1;T++){const C=Math.floor(T/2);T%2===0?(d(M[A][C+1]),d(M[A+1][C]),d(M[A][C])):(d(M[A][C+1]),d(M[A+1][C+1]),d(M[A+1][C]))}}function u(w){const b=new me;for(let v=0;v<o.length;v+=3)b.x=o[v+0],b.y=o[v+1],b.z=o[v+2],b.normalize().multiplyScalar(w),o[v+0]=b.x,o[v+1]=b.y,o[v+2]=b.z}function c(){const w=new me;for(let b=0;b<o.length;b+=3){w.x=o[b+0],w.y=o[b+1],w.z=o[b+2];const v=y(w)/2/Math.PI+.5,S=p(w)/Math.PI+.5;s.push(v,1-S)}m(),f()}function f(){for(let w=0;w<s.length;w+=6){const b=s[w+0],v=s[w+2],S=s[w+4],x=Math.max(b,v,S),M=Math.min(b,v,S);x>.9&&M<.1&&(b<.2&&(s[w+0]+=1),v<.2&&(s[w+2]+=1),S<.2&&(s[w+4]+=1))}}function d(w){o.push(w.x,w.y,w.z)}function h(w,b){const v=w*3;b.x=e[v+0],b.y=e[v+1],b.z=e[v+2]}function m(){const w=new me,b=new me,v=new me,S=new me,x=new nt,M=new nt,A=new nt;for(let T=0,C=0;T<o.length;T+=9,C+=6){w.set(o[T+0],o[T+1],o[T+2]),b.set(o[T+3],o[T+4],o[T+5]),v.set(o[T+6],o[T+7],o[T+8]),x.set(s[C+0],s[C+1]),M.set(s[C+2],s[C+3]),A.set(s[C+4],s[C+5]),S.copy(w).add(b).add(v).divideScalar(3);const D=y(S);g(x,C+0,w,D),g(M,C+2,b,D),g(A,C+4,v,D)}}function g(w,b,v,S){S<0&&w.x===1&&(s[b]=w.x-1),v.x===0&&v.z===0&&(s[b]=S/2/Math.PI+.5)}function y(w){return Math.atan2(w.z,-w.x)}function p(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fd(e.vertices,e.indices,e.radius,e.details)}}class aC extends fd{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,s,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new aC(e.radius,e.detail)}}const aS=new me,lS=new me,F3=new me,uS=new Fs;class NL extends sn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),o=Math.cos(xh*t),s=e.getIndex(),a=e.getAttribute("position"),l=s?s.count:a.count,u=[0,0,0],c=["a","b","c"],f=new Array(3),d={},h=[];for(let m=0;m<l;m+=3){s?(u[0]=s.getX(m),u[1]=s.getX(m+1),u[2]=s.getX(m+2)):(u[0]=m,u[1]=m+1,u[2]=m+2);const{a:g,b:y,c:p}=uS;if(g.fromBufferAttribute(a,u[0]),y.fromBufferAttribute(a,u[1]),p.fromBufferAttribute(a,u[2]),uS.getNormal(F3),f[0]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,f[1]=`${Math.round(y.x*i)},${Math.round(y.y*i)},${Math.round(y.z*i)}`,f[2]=`${Math.round(p.x*i)},${Math.round(p.y*i)},${Math.round(p.z*i)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let w=0;w<3;w++){const b=(w+1)%3,v=f[w],S=f[b],x=uS[c[w]],M=uS[c[b]],A=`${v}_${S}`,T=`${S}_${v}`;T in d&&d[T]?(F3.dot(d[T].normal)<=o&&(h.push(x.x,x.y,x.z),h.push(M.x,M.y,M.z)),d[T]=null):A in d||(d[A]={index0:u[w],index1:u[b],normal:F3.clone()})}}for(const m in d)if(d[m]){const{index0:g,index1:y}=d[m];aS.fromBufferAttribute(a,g),lS.fromBufferAttribute(a,y),h.push(aS.x,aS.y,aS.z),h.push(lS.x,lS.y,lS.z)}this.setAttribute("position",new Rt(h,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class _h extends d1{constructor(e){super(e),this.uuid=Hs(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new d1().fromJSON(i))}return this}}const oGe={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let o=kne(n,0,i,t,!0);const s=[];if(!o||o.next===o.prev)return s;let a,l,u,c,f,d,h;if(r&&(o=cGe(n,e,o,t)),n.length>80*t){a=u=n[0],l=c=n[1];for(let m=t;m<i;m+=t)f=n[m],d=n[m+1],f<a&&(a=f),d<l&&(l=d),f>u&&(u=f),d>c&&(c=d);h=Math.max(u-a,c-l),h=h!==0?32767/h:0}return h1(o,s,t,a,l,h,0),s}};function kne(n,e,t,r,i){let o,s;if(i===wGe(n,e,t,r)>0)for(o=e;o<t;o+=r)s=oH(o,n[o],n[o+1],s);else for(o=t-r;o>=e;o-=r)s=oH(o,n[o],n[o+1],s);return s&&lC(s,s.next)&&(m1(s),s=s.next),s}function $h(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(lC(t,t.next)||Dr(t.prev,t,t.next)===0)){if(m1(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function h1(n,e,t,r,i,o,s){if(!n)return;!s&&o&&mGe(n,r,i,o);let a=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,o?aGe(n,r,i,o):sGe(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(u.i/t|0),m1(n),n=u.next,a=u.next;continue}if(n=u,n===a){s?s===1?(n=lGe($h(n),e,t),h1(n,e,t,r,i,o,2)):s===2&&uGe(n,e,t,r,i,o):h1($h(n),e,t,r,i,o,1);break}}}function sGe(n){const e=n.prev,t=n,r=n.next;if(Dr(e,t,r)>=0)return!1;const i=e.x,o=t.x,s=r.x,a=e.y,l=t.y,u=r.y,c=i<o?i<s?i:s:o<s?o:s,f=a<l?a<u?a:u:l<u?l:u,d=i>o?i>s?i:s:o>s?o:s,h=a>l?a>u?a:u:l>u?l:u;let m=r.next;for(;m!==e;){if(m.x>=c&&m.x<=d&&m.y>=f&&m.y<=h&&Lm(i,a,o,l,s,u,m.x,m.y)&&Dr(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function aGe(n,e,t,r){const i=n.prev,o=n,s=n.next;if(Dr(i,o,s)>=0)return!1;const a=i.x,l=o.x,u=s.x,c=i.y,f=o.y,d=s.y,h=a<l?a<u?a:u:l<u?l:u,m=c<f?c<d?c:d:f<d?f:d,g=a>l?a>u?a:u:l>u?l:u,y=c>f?c>d?c:d:f>d?f:d,p=_R(h,m,e,t,r),w=_R(g,y,e,t,r);let b=n.prevZ,v=n.nextZ;for(;b&&b.z>=p&&v&&v.z<=w;){if(b.x>=h&&b.x<=g&&b.y>=m&&b.y<=y&&b!==i&&b!==s&&Lm(a,c,l,f,u,d,b.x,b.y)&&Dr(b.prev,b,b.next)>=0||(b=b.prevZ,v.x>=h&&v.x<=g&&v.y>=m&&v.y<=y&&v!==i&&v!==s&&Lm(a,c,l,f,u,d,v.x,v.y)&&Dr(v.prev,v,v.next)>=0))return!1;v=v.nextZ}for(;b&&b.z>=p;){if(b.x>=h&&b.x<=g&&b.y>=m&&b.y<=y&&b!==i&&b!==s&&Lm(a,c,l,f,u,d,b.x,b.y)&&Dr(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;v&&v.z<=w;){if(v.x>=h&&v.x<=g&&v.y>=m&&v.y<=y&&v!==i&&v!==s&&Lm(a,c,l,f,u,d,v.x,v.y)&&Dr(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function lGe(n,e,t){let r=n;do{const i=r.prev,o=r.next.next;!lC(i,o)&&Ine(i,r,r.next,o)&&p1(i,o)&&p1(o,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(o.i/t|0),m1(r),m1(r.next),r=n=o),r=r.next}while(r!==n);return $h(r)}function uGe(n,e,t,r,i,o){let s=n;do{let a=s.next.next;for(;a!==s.prev;){if(s.i!==a.i&&yGe(s,a)){let l=Lne(s,a);s=$h(s,s.next),l=$h(l,l.next),h1(s,e,t,r,i,o,0),h1(l,e,t,r,i,o,0);return}a=a.next}s=s.next}while(s!==n)}function cGe(n,e,t,r){const i=[];let o,s,a,l,u;for(o=0,s=e.length;o<s;o++)a=e[o]*r,l=o<s-1?e[o+1]*r:n.length,u=kne(n,a,l,r,!1),u===u.next&&(u.steiner=!0),i.push(vGe(u));for(i.sort(fGe),o=0;o<i.length;o++)t=dGe(i[o],t);return t}function fGe(n,e){return n.x-e.x}function dGe(n,e){const t=hGe(n,e);if(!t)return e;const r=Lne(t,n);return $h(r,r.next),$h(t,t.next)}function hGe(n,e){let t=e,r=-1/0,i;const o=n.x,s=n.y;do{if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){const d=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=o&&d>r&&(r=d,i=t.x<t.next.x?t:t.next,d===o))return i}t=t.next}while(t!==e);if(!i)return null;const a=i,l=i.x,u=i.y;let c=1/0,f;t=i;do o>=t.x&&t.x>=l&&o!==t.x&&Lm(s<u?o:r,s,l,u,s<u?r:o,s,t.x,t.y)&&(f=Math.abs(s-t.y)/(o-t.x),p1(t,n)&&(f<c||f===c&&(t.x>i.x||t.x===i.x&&pGe(i,t)))&&(i=t,c=f)),t=t.next;while(t!==a);return i}function pGe(n,e){return Dr(n.prev,n,e.prev)<0&&Dr(e.next,n,n.next)<0}function mGe(n,e,t,r){let i=n;do i.z===0&&(i.z=_R(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,gGe(i)}function gGe(n){let e,t,r,i,o,s,a,l,u=1;do{for(t=n,n=null,o=null,s=0;t;){for(s++,r=t,a=0,e=0;e<u&&(a++,r=r.nextZ,!!r);e++);for(l=u;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:n=i,i.prevZ=o,o=i;t=r}o.nextZ=null,u*=2}while(s>1);return n}function _R(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function vGe(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Lm(n,e,t,r,i,o,s,a){return(i-s)*(e-a)>=(n-s)*(o-a)&&(n-s)*(r-a)>=(t-s)*(e-a)&&(t-s)*(o-a)>=(i-s)*(r-a)}function yGe(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!xGe(n,e)&&(p1(n,e)&&p1(e,n)&&bGe(n,e)&&(Dr(n.prev,n,e.prev)||Dr(n,e.prev,e))||lC(n,e)&&Dr(n.prev,n,n.next)>0&&Dr(e.prev,e,e.next)>0)}function Dr(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function lC(n,e){return n.x===e.x&&n.y===e.y}function Ine(n,e,t,r){const i=fS(Dr(n,e,t)),o=fS(Dr(n,e,r)),s=fS(Dr(t,r,n)),a=fS(Dr(t,r,e));return!!(i!==o&&s!==a||i===0&&cS(n,t,e)||o===0&&cS(n,r,e)||s===0&&cS(t,n,r)||a===0&&cS(t,e,r))}function cS(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function fS(n){return n>0?1:n<0?-1:0}function xGe(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&Ine(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function p1(n,e){return Dr(n.prev,n,n.next)<0?Dr(n,e,n.next)>=0&&Dr(n,n.prev,e)>=0:Dr(n,e,n.prev)<0||Dr(n,n.next,e)<0}function bGe(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,o=(n.y+e.y)/2;do t.y>o!=t.next.y>o&&t.next.y!==t.y&&i<(t.next.x-t.x)*(o-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function Lne(n,e){const t=new ER(n.i,n.x,n.y),r=new ER(e.i,e.x,e.y),i=n.next,o=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,o.next=r,r.prev=o,r}function oH(n,e,t,r){const i=new ER(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function m1(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function ER(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function wGe(n,e,t,r){let i=0;for(let o=e,s=t-r;o<t;o+=r)i+=(n[s]-n[o])*(n[o+1]+n[s+1]),s=o;return i}class Ql{static area(e){const t=e.length;let r=0;for(let i=t-1,o=0;o<t;i=o++)r+=e[i].x*e[o].y-e[o].x*e[i].y;return r*.5}static isClockWise(e){return Ql.area(e)<0}static triangulateShape(e,t){const r=[],i=[],o=[];sH(e),aH(r,e);let s=e.length;t.forEach(sH);for(let l=0;l<t.length;l++)i.push(s),s+=t[l].length,aH(r,t[l]);const a=oGe.triangulate(r,i);for(let l=0;l<a.length;l+=3)o.push(a.slice(l,l+3));return o}}function sH(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function aH(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class uC extends sn{constructor(e=new _h([new nt(.5,.5),new nt(-.5,.5),new nt(-.5,-.5),new nt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],o=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];s(u)}this.setAttribute("position",new Rt(i,3)),this.setAttribute("uv",new Rt(o,2)),this.computeVertexNormals();function s(a){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,c=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let d=t.bevelEnabled!==void 0?t.bevelEnabled:!0,h=t.bevelThickness!==void 0?t.bevelThickness:.2,m=t.bevelSize!==void 0?t.bevelSize:h-.1,g=t.bevelOffset!==void 0?t.bevelOffset:0,y=t.bevelSegments!==void 0?t.bevelSegments:3;const p=t.extrudePath,w=t.UVGenerator!==void 0?t.UVGenerator:SGe;let b,v=!1,S,x,M,A;p&&(b=p.getSpacedPoints(c),v=!0,d=!1,S=p.computeFrenetFrames(c,!1),x=new me,M=new me,A=new me),d||(y=0,h=0,m=0,g=0);const T=a.extractPoints(u);let C=T.shape;const D=T.holes;if(!Ql.isClockWise(C)){C=C.reverse();for(let ie=0,Re=D.length;ie<Re;ie++){const Pe=D[ie];Ql.isClockWise(Pe)&&(D[ie]=Pe.reverse())}}const B=Ql.triangulateShape(C,D),F=C;for(let ie=0,Re=D.length;ie<Re;ie++){const Pe=D[ie];C=C.concat(Pe)}function U(ie,Re,Pe){return Re||console.error("THREE.ExtrudeGeometry: vec does not exist"),ie.clone().addScaledVector(Re,Pe)}const N=C.length,I=B.length;function V(ie,Re,Pe){let ee,oe,Me;const se=ie.x-Re.x,G=ie.y-Re.y,j=Pe.x-ie.x,he=Pe.y-ie.y,Ce=se*se+G*G,q=se*he-G*j;if(Math.abs(q)>Number.EPSILON){const J=Math.sqrt(Ce),ye=Math.sqrt(j*j+he*he),we=Re.x-G/J,ke=Re.y+se/J,Fe=Pe.x-he/ye,He=Pe.y+j/ye,Ie=((Fe-we)*he-(He-ke)*j)/(se*he-G*j);ee=we+se*Ie-ie.x,oe=ke+G*Ie-ie.y;const Ze=ee*ee+oe*oe;if(Ze<=2)return new nt(ee,oe);Me=Math.sqrt(Ze/2)}else{let J=!1;se>Number.EPSILON?j>Number.EPSILON&&(J=!0):se<-Number.EPSILON?j<-Number.EPSILON&&(J=!0):Math.sign(G)===Math.sign(he)&&(J=!0),J?(ee=-G,oe=se,Me=Math.sqrt(Ce)):(ee=se,oe=G,Me=Math.sqrt(Ce/2))}return new nt(ee/Me,oe/Me)}const L=[];for(let ie=0,Re=F.length,Pe=Re-1,ee=ie+1;ie<Re;ie++,Pe++,ee++)Pe===Re&&(Pe=0),ee===Re&&(ee=0),L[ie]=V(F[ie],F[Pe],F[ee]);const X=[];let Z,te=L.concat();for(let ie=0,Re=D.length;ie<Re;ie++){const Pe=D[ie];Z=[];for(let ee=0,oe=Pe.length,Me=oe-1,se=ee+1;ee<oe;ee++,Me++,se++)Me===oe&&(Me=0),se===oe&&(se=0),Z[ee]=V(Pe[ee],Pe[Me],Pe[se]);X.push(Z),te=te.concat(Z)}for(let ie=0;ie<y;ie++){const Re=ie/y,Pe=h*Math.cos(Re*Math.PI/2),ee=m*Math.sin(Re*Math.PI/2)+g;for(let oe=0,Me=F.length;oe<Me;oe++){const se=U(F[oe],L[oe],ee);ge(se.x,se.y,-Pe)}for(let oe=0,Me=D.length;oe<Me;oe++){const se=D[oe];Z=X[oe];for(let G=0,j=se.length;G<j;G++){const he=U(se[G],Z[G],ee);ge(he.x,he.y,-Pe)}}}const Y=m+g;for(let ie=0;ie<N;ie++){const Re=d?U(C[ie],te[ie],Y):C[ie];v?(M.copy(S.normals[0]).multiplyScalar(Re.x),x.copy(S.binormals[0]).multiplyScalar(Re.y),A.copy(b[0]).add(M).add(x),ge(A.x,A.y,A.z)):ge(Re.x,Re.y,0)}for(let ie=1;ie<=c;ie++)for(let Re=0;Re<N;Re++){const Pe=d?U(C[Re],te[Re],Y):C[Re];v?(M.copy(S.normals[ie]).multiplyScalar(Pe.x),x.copy(S.binormals[ie]).multiplyScalar(Pe.y),A.copy(b[ie]).add(M).add(x),ge(A.x,A.y,A.z)):ge(Pe.x,Pe.y,f/c*ie)}for(let ie=y-1;ie>=0;ie--){const Re=ie/y,Pe=h*Math.cos(Re*Math.PI/2),ee=m*Math.sin(Re*Math.PI/2)+g;for(let oe=0,Me=F.length;oe<Me;oe++){const se=U(F[oe],L[oe],ee);ge(se.x,se.y,f+Pe)}for(let oe=0,Me=D.length;oe<Me;oe++){const se=D[oe];Z=X[oe];for(let G=0,j=se.length;G<j;G++){const he=U(se[G],Z[G],ee);v?ge(he.x,he.y+b[c-1].y,b[c-1].x+Pe):ge(he.x,he.y,f+Pe)}}}re(),fe();function re(){const ie=i.length/3;if(d){let Re=0,Pe=N*Re;for(let ee=0;ee<I;ee++){const oe=B[ee];Se(oe[2]+Pe,oe[1]+Pe,oe[0]+Pe)}Re=c+y*2,Pe=N*Re;for(let ee=0;ee<I;ee++){const oe=B[ee];Se(oe[0]+Pe,oe[1]+Pe,oe[2]+Pe)}}else{for(let Re=0;Re<I;Re++){const Pe=B[Re];Se(Pe[2],Pe[1],Pe[0])}for(let Re=0;Re<I;Re++){const Pe=B[Re];Se(Pe[0]+N*c,Pe[1]+N*c,Pe[2]+N*c)}}r.addGroup(ie,i.length/3-ie,0)}function fe(){const ie=i.length/3;let Re=0;ue(F,Re),Re+=F.length;for(let Pe=0,ee=D.length;Pe<ee;Pe++){const oe=D[Pe];ue(oe,Re),Re+=oe.length}r.addGroup(ie,i.length/3-ie,1)}function ue(ie,Re){let Pe=ie.length;for(;--Pe>=0;){const ee=Pe;let oe=Pe-1;oe<0&&(oe=ie.length-1);for(let Me=0,se=c+y*2;Me<se;Me++){const G=N*Me,j=N*(Me+1),he=Re+ee+G,Ce=Re+oe+G,q=Re+oe+j,J=Re+ee+j;xe(he,Ce,q,J)}}}function ge(ie,Re,Pe){l.push(ie),l.push(Re),l.push(Pe)}function Se(ie,Re,Pe){De(ie),De(Re),De(Pe);const ee=i.length/3,oe=w.generateTopUV(r,i,ee-3,ee-2,ee-1);Ae(oe[0]),Ae(oe[1]),Ae(oe[2])}function xe(ie,Re,Pe,ee){De(ie),De(Re),De(ee),De(Re),De(Pe),De(ee);const oe=i.length/3,Me=w.generateSideWallUV(r,i,oe-6,oe-3,oe-2,oe-1);Ae(Me[0]),Ae(Me[1]),Ae(Me[3]),Ae(Me[1]),Ae(Me[2]),Ae(Me[3])}function De(ie){i.push(l[ie*3+0]),i.push(l[ie*3+1]),i.push(l[ie*3+2])}function Ae(ie){o.push(ie.x),o.push(ie.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return _Ge(t,r,e)}static fromJSON(e,t){const r=[];for(let o=0,s=e.shapes.length;o<s;o++){const a=t[e.shapes[o]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new fM[i.type]().fromJSON(i)),new uC(r,e.options)}}const SGe={generateTopUV:function(n,e,t,r,i){const o=e[t*3],s=e[t*3+1],a=e[r*3],l=e[r*3+1],u=e[i*3],c=e[i*3+1];return[new nt(o,s),new nt(a,l),new nt(u,c)]},generateSideWallUV:function(n,e,t,r,i,o){const s=e[t*3],a=e[t*3+1],l=e[t*3+2],u=e[r*3],c=e[r*3+1],f=e[r*3+2],d=e[i*3],h=e[i*3+1],m=e[i*3+2],g=e[o*3],y=e[o*3+1],p=e[o*3+2];return Math.abs(a-c)<Math.abs(s-u)?[new nt(s,1-l),new nt(u,1-f),new nt(d,1-m),new nt(g,1-p)]:[new nt(a,1-l),new nt(c,1-f),new nt(h,1-m),new nt(y,1-p)]}};function _Ge(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const o=n[r];t.shapes.push(o.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class cC extends fd{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,o,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new cC(e.radius,e.detail)}}class vx extends fd{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new vx(e.radius,e.detail)}}class fC extends sn{constructor(e=.5,t=1,r=32,i=1,o=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:o,thetaLength:s},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],u=[],c=[];let f=e;const d=(t-e)/i,h=new me,m=new nt;for(let g=0;g<=i;g++){for(let y=0;y<=r;y++){const p=o+y/r*s;h.x=f*Math.cos(p),h.y=f*Math.sin(p),l.push(h.x,h.y,h.z),u.push(0,0,1),m.x=(h.x/t+1)/2,m.y=(h.y/t+1)/2,c.push(m.x,m.y)}f+=d}for(let g=0;g<i;g++){const y=g*(r+1);for(let p=0;p<r;p++){const w=p+y,b=w,v=w+r+1,S=w+r+2,x=w+1;a.push(b,v,x),a.push(v,S,x)}}this.setIndex(a),this.setAttribute("position",new Rt(l,3)),this.setAttribute("normal",new Rt(u,3)),this.setAttribute("uv",new Rt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fC(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class dC extends sn{constructor(e=new _h([new nt(0,.5),new nt(-.5,-.5),new nt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],o=[],s=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let c=0;c<e.length;c++)u(e[c]),this.addGroup(a,l,c),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new Rt(i,3)),this.setAttribute("normal",new Rt(o,3)),this.setAttribute("uv",new Rt(s,2));function u(c){const f=i.length/3,d=c.extractPoints(t);let h=d.shape;const m=d.holes;Ql.isClockWise(h)===!1&&(h=h.reverse());for(let y=0,p=m.length;y<p;y++){const w=m[y];Ql.isClockWise(w)===!0&&(m[y]=w.reverse())}const g=Ql.triangulateShape(h,m);for(let y=0,p=m.length;y<p;y++){const w=m[y];h=h.concat(w)}for(let y=0,p=h.length;y<p;y++){const w=h[y];i.push(w.x,w.y,0),o.push(0,0,1),s.push(w.x,w.y)}for(let y=0,p=g.length;y<p;y++){const w=g[y],b=w[0]+f,v=w[1]+f,S=w[2]+f;r.push(b,v,S),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return EGe(t,e)}static fromJSON(e,t){const r=[];for(let i=0,o=e.shapes.length;i<o;i++){const s=t[e.shapes[i]];r.push(s)}return new dC(r,e.curveSegments)}}function EGe(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class yx extends sn{constructor(e=1,t=32,r=16,i=0,o=Math.PI*2,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:o,thetaStart:s,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(s+a,Math.PI);let u=0;const c=[],f=new me,d=new me,h=[],m=[],g=[],y=[];for(let p=0;p<=r;p++){const w=[],b=p/r;let v=0;p===0&&s===0?v=.5/t:p===r&&l===Math.PI&&(v=-.5/t);for(let S=0;S<=t;S++){const x=S/t;f.x=-e*Math.cos(i+x*o)*Math.sin(s+b*a),f.y=e*Math.cos(s+b*a),f.z=e*Math.sin(i+x*o)*Math.sin(s+b*a),m.push(f.x,f.y,f.z),d.copy(f).normalize(),g.push(d.x,d.y,d.z),y.push(x+v,1-b),w.push(u++)}c.push(w)}for(let p=0;p<r;p++)for(let w=0;w<t;w++){const b=c[p][w+1],v=c[p][w],S=c[p+1][w],x=c[p+1][w+1];(p!==0||s>0)&&h.push(b,v,x),(p!==r-1||l<Math.PI)&&h.push(v,S,x)}this.setIndex(h),this.setAttribute("position",new Rt(m,3)),this.setAttribute("normal",new Rt(g,3)),this.setAttribute("uv",new Rt(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yx(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class hC extends fd{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new hC(e.radius,e.detail)}}class pC extends sn{constructor(e=1,t=.4,r=12,i=48,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:o},r=Math.floor(r),i=Math.floor(i);const s=[],a=[],l=[],u=[],c=new me,f=new me,d=new me;for(let h=0;h<=r;h++)for(let m=0;m<=i;m++){const g=m/i*o,y=h/r*Math.PI*2;f.x=(e+t*Math.cos(y))*Math.cos(g),f.y=(e+t*Math.cos(y))*Math.sin(g),f.z=t*Math.sin(y),a.push(f.x,f.y,f.z),c.x=e*Math.cos(g),c.y=e*Math.sin(g),d.subVectors(f,c).normalize(),l.push(d.x,d.y,d.z),u.push(m/i),u.push(h/r)}for(let h=1;h<=r;h++)for(let m=1;m<=i;m++){const g=(i+1)*h+m-1,y=(i+1)*(h-1)+m-1,p=(i+1)*(h-1)+m,w=(i+1)*h+m;s.push(g,y,w),s.push(y,p,w)}this.setIndex(s),this.setAttribute("position",new Rt(a,3)),this.setAttribute("normal",new Rt(l,3)),this.setAttribute("uv",new Rt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pC(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class mC extends sn{constructor(e=1,t=.4,r=64,i=8,o=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:o,q:s},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],u=[],c=[],f=new me,d=new me,h=new me,m=new me,g=new me,y=new me,p=new me;for(let b=0;b<=r;++b){const v=b/r*o*Math.PI*2;w(v,o,s,e,h),w(v+.01,o,s,e,m),y.subVectors(m,h),p.addVectors(m,h),g.crossVectors(y,p),p.crossVectors(g,y),g.normalize(),p.normalize();for(let S=0;S<=i;++S){const x=S/i*Math.PI*2,M=-t*Math.cos(x),A=t*Math.sin(x);f.x=h.x+(M*p.x+A*g.x),f.y=h.y+(M*p.y+A*g.y),f.z=h.z+(M*p.z+A*g.z),l.push(f.x,f.y,f.z),d.subVectors(f,h).normalize(),u.push(d.x,d.y,d.z),c.push(b/r),c.push(S/i)}}for(let b=1;b<=r;b++)for(let v=1;v<=i;v++){const S=(i+1)*(b-1)+(v-1),x=(i+1)*b+(v-1),M=(i+1)*b+v,A=(i+1)*(b-1)+v;a.push(S,x,A),a.push(x,M,A)}this.setIndex(a),this.setAttribute("position",new Rt(l,3)),this.setAttribute("normal",new Rt(u,3)),this.setAttribute("uv",new Rt(c,2));function w(b,v,S,x,M){const A=Math.cos(b),T=Math.sin(b),C=S/v*b,D=Math.cos(C);M.x=x*(2+D)*.5*A,M.y=x*(2+D)*T*.5,M.z=x*Math.sin(C)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new mC(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class gC extends sn{constructor(e=new TL(new me(-1,-1,0),new me(-1,1,0),new me(1,1,0)),t=64,r=1,i=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:o};const s=e.computeFrenetFrames(t,o);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const a=new me,l=new me,u=new nt;let c=new me;const f=[],d=[],h=[],m=[];g(),this.setIndex(m),this.setAttribute("position",new Rt(f,3)),this.setAttribute("normal",new Rt(d,3)),this.setAttribute("uv",new Rt(h,2));function g(){for(let b=0;b<t;b++)y(b);y(o===!1?t:0),w(),p()}function y(b){c=e.getPointAt(b/t,c);const v=s.normals[b],S=s.binormals[b];for(let x=0;x<=i;x++){const M=x/i*Math.PI*2,A=Math.sin(M),T=-Math.cos(M);l.x=T*v.x+A*S.x,l.y=T*v.y+A*S.y,l.z=T*v.z+A*S.z,l.normalize(),d.push(l.x,l.y,l.z),a.x=c.x+r*l.x,a.y=c.y+r*l.y,a.z=c.z+r*l.z,f.push(a.x,a.y,a.z)}}function p(){for(let b=1;b<=t;b++)for(let v=1;v<=i;v++){const S=(i+1)*(b-1)+(v-1),x=(i+1)*b+(v-1),M=(i+1)*b+v,A=(i+1)*(b-1)+v;m.push(S,x,A),m.push(x,M,A)}}function w(){for(let b=0;b<=t;b++)for(let v=0;v<=i;v++)u.x=b/t,u.y=v/i,h.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new gC(new fM[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Fne extends sn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new me,o=new me;if(e.index!==null){const s=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,c=l.length;u<c;++u){const f=l[u],d=f.start,h=f.count;for(let m=d,g=d+h;m<g;m+=3)for(let y=0;y<3;y++){const p=a.getX(m+y),w=a.getX(m+(y+1)%3);i.fromBufferAttribute(s,p),o.fromBufferAttribute(s,w),lH(i,o,r)===!0&&(t.push(i.x,i.y,i.z),t.push(o.x,o.y,o.z))}}}else{const s=e.attributes.position;for(let a=0,l=s.count/3;a<l;a++)for(let u=0;u<3;u++){const c=3*a+u,f=3*a+(u+1)%3;i.fromBufferAttribute(s,c),o.fromBufferAttribute(s,f),lH(i,o,r)===!0&&(t.push(i.x,i.y,i.z),t.push(o.x,o.y,o.z))}}this.setAttribute("position",new Rt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function lH(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var uH=Object.freeze({__proto__:null,BoxGeometry:op,CapsuleGeometry:iC,CircleGeometry:oC,ConeGeometry:sC,CylinderGeometry:gv,DodecahedronGeometry:aC,EdgesGeometry:NL,ExtrudeGeometry:uC,IcosahedronGeometry:cC,LatheGeometry:gx,OctahedronGeometry:vx,PlaneGeometry:pv,PolyhedronGeometry:fd,RingGeometry:fC,ShapeGeometry:dC,SphereGeometry:yx,TetrahedronGeometry:hC,TorusGeometry:pC,TorusKnotGeometry:mC,TubeGeometry:gC,WireframeGeometry:Fne});class Bne extends Ji{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new gt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class zne extends Ra{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class PL extends Ji{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new gt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ud,this.normalScale=new nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Une extends PL{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new nt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Hr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new gt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new gt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new gt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Vne extends Ji{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new gt(16777215),this.specular=new gt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ud,this.normalScale=new nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=cx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class $ne extends Ji{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new gt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ud,this.normalScale=new nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Hne extends Ji{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ud,this.normalScale=new nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Wne extends Ji{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new gt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ud,this.normalScale=new nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=cx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class jne extends Ji{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new gt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ud,this.normalScale=new nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Gne extends Ko{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function lh(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function qne(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Xne(n){function e(i,o){return n[i]-n[o]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function MR(n,e,t){const r=n.length,i=new n.constructor(r);for(let o=0,s=0;s!==r;++o){const a=t[o]*e;for(let l=0;l!==e;++l)i[s++]=n[a+l]}return i}function RL(n,e,t,r){let i=1,o=n[0];for(;o!==void 0&&o[r]===void 0;)o=n[i++];if(o===void 0)return;let s=o[r];if(s!==void 0)if(Array.isArray(s))do s=o[r],s!==void 0&&(e.push(o.time),t.push.apply(t,s)),o=n[i++];while(o!==void 0);else if(s.toArray!==void 0)do s=o[r],s!==void 0&&(e.push(o.time),s.toArray(t,t.length)),o=n[i++];while(o!==void 0);else do s=o[r],s!==void 0&&(e.push(o.time),t.push(s)),o=n[i++];while(o!==void 0)}function MGe(n,e,t,r,i=30){const o=n.clone();o.name=e;const s=[];for(let l=0;l<o.tracks.length;++l){const u=o.tracks[l],c=u.getValueSize(),f=[],d=[];for(let h=0;h<u.times.length;++h){const m=u.times[h]*i;if(!(m<t||m>=r)){f.push(u.times[h]);for(let g=0;g<c;++g)d.push(u.values[h*c+g])}}f.length!==0&&(u.times=lh(f,u.times.constructor),u.values=lh(d,u.values.constructor),s.push(u))}o.tracks=s;let a=1/0;for(let l=0;l<o.tracks.length;++l)a>o.tracks[l].times[0]&&(a=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*a);return o.resetDuration(),o}function CGe(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,o=e/r;for(let s=0;s<i;++s){const a=t.tracks[s],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(p){return p.name===a.name&&p.ValueTypeName===l});if(u===void 0)continue;let c=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=f/3);let d=0;const h=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=h/3);const m=a.times.length-1;let g;if(o<=a.times[0]){const p=c,w=f-c;g=a.values.slice(p,w)}else if(o>=a.times[m]){const p=m*f+c,w=p+f-c;g=a.values.slice(p,w)}else{const p=a.createInterpolant(),w=c,b=f-c;p.evaluate(o),g=p.resultBuffer.slice(w,b)}l==="quaternion"&&new Ii().fromArray(g).normalize().conjugate().toArray(g);const y=u.times.length;for(let p=0;p<y;++p){const w=p*h+d;if(l==="quaternion")Ii.multiplyQuaternionsFlat(u.values,w,g,0,u.values,w);else{const b=h-d*2;for(let v=0;v<b;++v)u.values[w+v]-=g[v]}}}return n.blendMode=lL,n}const AGe={convertArray:lh,isTypedArray:qne,getKeyframeOrder:Xne,sortedArray:MR,flattenJSON:RL,subclip:MGe,makeClipAdditive:CGe};class xx{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],o=t[r-1];e:{t:{let s;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<o)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(o=i,i=t[++r],e<i)break t}s=t.length;break n}if(!(e>=o)){const a=t[1];e<a&&(r=2,o=a);for(let l=r-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=o,o=t[--r-1],e>=o)break t}s=r,r=0;break n}break e}for(;r<s;){const a=r+s>>>1;e<t[a]?s=a:r=a+1}if(i=t[r],o=t[r-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,o,i)}return this.interpolate_(r,o,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,o=e*i;for(let s=0;s!==i;++s)t[s]=r[o+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Yne extends xx{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:oh,endingEnd:oh}}intervalChanged_(e,t,r){const i=this.parameterPositions;let o=e-2,s=e+1,a=i[o],l=i[s];if(a===void 0)switch(this.getSettings_().endingStart){case sh:o=e,a=2*t-r;break;case i1:o=i.length-2,a=t+i[o]-i[o+1];break;default:o=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case sh:s=e,l=2*r-t;break;case i1:s=1,l=r+i[1]-i[0];break;default:s=e-1,l=t}const u=(r-t)*.5,c=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-r),this._offsetPrev=o*c,this._offsetNext=s*c}interpolate_(e,t,r,i){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=this._offsetPrev,f=this._offsetNext,d=this._weightPrev,h=this._weightNext,m=(r-t)/(i-t),g=m*m,y=g*m,p=-d*y+2*d*g-d*m,w=(1+d)*y+(-1.5-2*d)*g+(-.5+d)*m+1,b=(-1-h)*y+(1.5+h)*g+.5*m,v=h*y-h*g;for(let S=0;S!==a;++S)o[S]=p*s[c+S]+w*s[u+S]+b*s[l+S]+v*s[f+S];return o}}class OL extends xx{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=(r-t)/(i-t),f=1-c;for(let d=0;d!==a;++d)o[d]=s[u+d]*f+s[l+d]*c;return o}}class Kne extends xx{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class ml{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=lh(t,this.TimeBufferType),this.values=lh(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:lh(e.times,Array),values:lh(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new Kne(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new OL(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Yne(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case n1:t=this.InterpolantFactoryMethodDiscrete;break;case r1:t=this.InterpolantFactoryMethodLinear;break;case b_:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return n1;case this.InterpolantFactoryMethodLinear:return r1;case this.InterpolantFactoryMethodSmooth:return b_}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let o=0,s=i-1;for(;o!==i&&r[o]<e;)++o;for(;s!==-1&&r[s]>t;)--s;if(++s,o!==0||s!==i){o>=s&&(s=Math.max(s,1),o=s-1);const a=this.getValueSize();this.times=r.slice(o,s),this.values=this.values.slice(o*a,s*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,o=r.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==o;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(s!==null&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,s),e=!1;break}s=l}if(i!==void 0&&qne(i))for(let a=0,l=i.length;a!==l;++a){const u=i[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===b_,o=e.length-1;let s=1;for(let a=1;a<o;++a){let l=!1;const u=e[a],c=e[a+1];if(u!==c&&(a!==1||u!==e[0]))if(i)l=!0;else{const f=a*r,d=f-r,h=f+r;for(let m=0;m!==r;++m){const g=t[f+m];if(g!==t[d+m]||g!==t[h+m]){l=!0;break}}}if(l){if(a!==s){e[s]=e[a];const f=a*r,d=s*r;for(let h=0;h!==r;++h)t[d+h]=t[f+h]}++s}}if(o>0){e[s]=e[o];for(let a=o*r,l=s*r,u=0;u!==r;++u)t[l+u]=t[a+u];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}ml.prototype.TimeBufferType=Float32Array;ml.prototype.ValueBufferType=Float32Array;ml.prototype.DefaultInterpolation=r1;class sp extends ml{}sp.prototype.ValueTypeName="bool";sp.prototype.ValueBufferType=Array;sp.prototype.DefaultInterpolation=n1;sp.prototype.InterpolantFactoryMethodLinear=void 0;sp.prototype.InterpolantFactoryMethodSmooth=void 0;class kL extends ml{}kL.prototype.ValueTypeName="color";class g1 extends ml{}g1.prototype.ValueTypeName="number";class Zne extends xx{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let u=e*a;for(let c=u+a;u!==c;u+=4)Ii.slerpFlat(o,0,s,u-a,s,u,l);return o}}class vv extends ml{InterpolantFactoryMethodLinear(e){return new Zne(this.times,this.values,this.getValueSize(),e)}}vv.prototype.ValueTypeName="quaternion";vv.prototype.DefaultInterpolation=r1;vv.prototype.InterpolantFactoryMethodSmooth=void 0;class ap extends ml{}ap.prototype.ValueTypeName="string";ap.prototype.ValueBufferType=Array;ap.prototype.DefaultInterpolation=n1;ap.prototype.InterpolantFactoryMethodLinear=void 0;ap.prototype.InterpolantFactoryMethodSmooth=void 0;class v1 extends ml{}v1.prototype.ValueTypeName="vector";class y1{constructor(e,t=-1,r,i=q2){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Hs(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let s=0,a=r.length;s!==a;++s)t.push(DGe(r[s]).scale(i));const o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,s=r.length;o!==s;++o)t.push(ml.toJSON(r[o]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const o=t.length,s=[];for(let a=0;a<o;a++){let l=[],u=[];l.push((a+o-1)%o,a,(a+1)%o),u.push(0,1,0);const c=Xne(l);l=MR(l,1,c),u=MR(u,1,c),!i&&l[0]===0&&(l.push(o),u.push(u[0])),s.push(new g1(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/r))}return new this(e,-1,s)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},o=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],c=u.name.match(o);if(c&&c.length>1){const f=c[1];let d=i[f];d||(i[f]=d=[]),d.push(u)}}const s=[];for(const a in i)s.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(f,d,h,m,g){if(h.length!==0){const y=[],p=[];RL(h,y,p,m),y.length!==0&&g.push(new f(d,y,p))}},i=[],o=e.name||"default",s=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let f=0;f<u.length;f++){const d=u[f].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const h={};let m;for(m=0;m<d.length;m++)if(d[m].morphTargets)for(let g=0;g<d[m].morphTargets.length;g++)h[d[m].morphTargets[g]]=-1;for(const g in h){const y=[],p=[];for(let w=0;w!==d[m].morphTargets.length;++w){const b=d[m];y.push(b.time),p.push(b.morphTarget===g?1:0)}i.push(new g1(".morphTargetInfluence["+g+"]",y,p))}l=h.length*s}else{const h=".bones["+t[f].name+"]";r(v1,h+".position",d,"pos",i),r(vv,h+".quaternion",d,"rot",i),r(v1,h+".scale",d,"scl",i)}}return i.length===0?null:new this(o,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const o=this.tracks[r];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function TGe(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return g1;case"vector":case"vector2":case"vector3":case"vector4":return v1;case"color":return kL;case"quaternion":return vv;case"bool":case"boolean":return sp;case"string":return ap}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function DGe(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=TGe(n.type);if(n.times===void 0){const t=[],r=[];RL(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Gu={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class IL{constructor(e,t,r){const i=this;let o=!1,s=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(c){a++,o===!1&&i.onStart!==void 0&&i.onStart(c,s,a),o=!0},this.itemEnd=function(c){s++,i.onProgress!==void 0&&i.onProgress(c,s,a),s===a&&(o=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,f){return u.push(c,f),this},this.removeHandler=function(c){const f=u.indexOf(c);return f!==-1&&u.splice(f,2),this},this.getHandler=function(c){for(let f=0,d=u.length;f<d;f+=2){const h=u[f],m=u[f+1];if(h.global&&(h.lastIndex=0),h.test(c))return m}return null}}}const Jne=new IL;class bs{constructor(e){this.manager=e!==void 0?e:Jne,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,o){r.load(e,i,t,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}bs.DEFAULT_MATERIAL_NAME="__DEFAULT";const Ou={};class NGe extends Error{constructor(e,t){super(e),this.response=t}}class mc extends bs{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=Gu.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(Ou[e]!==void 0){Ou[e].push({onLoad:t,onProgress:r,onError:i});return}Ou[e]=[],Ou[e].push({onLoad:t,onProgress:r,onError:i});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(s).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const c=Ou[e],f=u.body.getReader(),d=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),h=d?parseInt(d):0,m=h!==0;let g=0;const y=new ReadableStream({start(p){w();function w(){f.read().then(({done:b,value:v})=>{if(b)p.close();else{g+=v.byteLength;const S=new ProgressEvent("progress",{lengthComputable:m,loaded:g,total:h});for(let x=0,M=c.length;x<M;x++){const A=c[x];A.onProgress&&A.onProgress(S)}p.enqueue(v),w()}})}}});return new Response(y)}else throw new NGe(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(c=>new DOMParser().parseFromString(c,a));case"json":return u.json();default:if(a===void 0)return u.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),d=f&&f[1]?f[1].toLowerCase():void 0,h=new TextDecoder(d);return u.arrayBuffer().then(m=>h.decode(m))}}}).then(u=>{Gu.add(e,u);const c=Ou[e];delete Ou[e];for(let f=0,d=c.length;f<d;f++){const h=c[f];h.onLoad&&h.onLoad(u)}}).catch(u=>{const c=Ou[e];if(c===void 0)throw this.manager.itemError(e),u;delete Ou[e];for(let f=0,d=c.length;f<d;f++){const h=c[f];h.onError&&h.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class PGe extends bs{constructor(e){super(e)}load(e,t,r,i){const o=this,s=new mc(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(a){try{t(o.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=y1.parse(e[r]);t.push(i)}return t}}class RGe extends bs{constructor(e){super(e)}load(e,t,r,i){const o=this,s=[],a=new nC,l=new mc(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(o.withCredentials);let u=0;function c(f){l.load(e[f],function(d){const h=o.parse(d,!0);s[f]={width:h.width,height:h.height,format:h.format,mipmaps:h.mipmaps},u+=1,u===6&&(h.mipmapCount===1&&(a.minFilter=gr),a.image=s,a.format=h.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let f=0,d=e.length;f<d;++f)c(f);else l.load(e,function(f){const d=o.parse(f,!0);if(d.isCubemap){const h=d.mipmaps.length/d.mipmapCount;for(let m=0;m<h;m++){s[m]={mipmaps:[]};for(let g=0;g<d.mipmapCount;g++)s[m].mipmaps.push(d.mipmaps[m*d.mipmapCount+g]),s[m].format=d.format,s[m].width=d.width,s[m].height=d.height}a.image=s}else a.image.width=d.width,a.image.height=d.height,a.mipmaps=d.mipmaps;d.mipmapCount===1&&(a.minFilter=gr),a.format=d.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}class x1 extends bs{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,s=Gu.get(e);if(s!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s;const a=c1("img");function l(){c(),Gu.add(e,this),t&&t(this),o.manager.itemEnd(e)}function u(f){c(),i&&i(f),o.manager.itemError(e),o.manager.itemEnd(e)}function c(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),o.manager.itemStart(e),a.src=e,a}}class OGe extends bs{constructor(e){super(e)}load(e,t,r,i){const o=new px;o.colorSpace=mi;const s=new x1(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let a=0;function l(u){s.load(e[u],function(c){o.images[u]=c,a++,a===6&&(o.needsUpdate=!0,t&&t(o))},void 0,i)}for(let u=0;u<e.length;++u)l(u);return o}}class kGe extends bs{constructor(e){super(e)}load(e,t,r,i){const o=this,s=new Sh,a=new mc(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(o.withCredentials),a.load(e,function(l){let u;try{u=o.parse(l)}catch(c){if(i!==void 0)i(c);else{console.error(c);return}}u.image!==void 0?s.image=u.image:u.data!==void 0&&(s.image.width=u.width,s.image.height=u.height,s.image.data=u.data),s.wrapS=u.wrapS!==void 0?u.wrapS:po,s.wrapT=u.wrapT!==void 0?u.wrapT:po,s.magFilter=u.magFilter!==void 0?u.magFilter:gr,s.minFilter=u.minFilter!==void 0?u.minFilter:gr,s.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0?s.colorSpace=u.colorSpace:u.encoding!==void 0&&(s.encoding=u.encoding),u.flipY!==void 0&&(s.flipY=u.flipY),u.format!==void 0&&(s.format=u.format),u.type!==void 0&&(s.type=u.type),u.mipmaps!==void 0&&(s.mipmaps=u.mipmaps,s.minFilter=$l),u.mipmapCount===1&&(s.minFilter=gr),u.generateMipmaps!==void 0&&(s.generateMipmaps=u.generateMipmaps),s.needsUpdate=!0,t&&t(s,u)},r,i),s}}class IGe extends bs{constructor(e){super(e)}load(e,t,r,i){const o=new Or,s=new x1(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(a){o.image=a,o.needsUpdate=!0,t!==void 0&&t(o)},r,i),o}}class dd extends Dn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new gt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class Qne extends dd{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Dn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new gt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const B3=new Qt,cH=new me,fH=new me;class LL{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new nt(512,512),this.map=null,this.mapPass=null,this.matrix=new Qt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new mx,this._frameExtents=new nt(1,1),this._viewportCount=1,this._viewports=[new Kn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;cH.setFromMatrixPosition(e.matrixWorld),t.position.copy(cH),fH.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(fH),t.updateMatrixWorld(),B3.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(B3),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(B3)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class LGe extends LL{constructor(){super(new Qr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=Dg*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(r!==t.fov||i!==t.aspect||o!==t.far)&&(t.fov=r,t.aspect=i,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class ere extends dd{constructor(e,t,r=0,i=Math.PI/3,o=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Dn.DEFAULT_UP),this.updateMatrix(),this.target=new Dn,this.distance=r,this.angle=i,this.penumbra=o,this.decay=s,this.map=null,this.shadow=new LGe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const dH=new Qt,v0=new me,z3=new me;class FGe extends LL{constructor(){super(new Qr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new nt(4,2),this._viewportCount=6,this._viewports=[new Kn(2,1,1,1),new Kn(0,1,1,1),new Kn(3,1,1,1),new Kn(1,1,1,1),new Kn(3,0,1,1),new Kn(1,0,1,1)],this._cubeDirections=[new me(1,0,0),new me(-1,0,0),new me(0,0,1),new me(0,0,-1),new me(0,1,0),new me(0,-1,0)],this._cubeUps=[new me(0,1,0),new me(0,1,0),new me(0,1,0),new me(0,1,0),new me(0,0,1),new me(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,o=e.distance||r.far;o!==r.far&&(r.far=o,r.updateProjectionMatrix()),v0.setFromMatrixPosition(e.matrixWorld),r.position.copy(v0),z3.copy(r.position),z3.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(z3),r.updateMatrixWorld(),i.makeTranslation(-v0.x,-v0.y,-v0.z),dH.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(dH)}}class tre extends dd{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new FGe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class BGe extends LL{constructor(){super(new Nf(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class nre extends dd{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Dn.DEFAULT_UP),this.updateMatrix(),this.target=new Dn,this.shadow=new BGe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class rre extends dd{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class ire extends dd{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class ore{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new me)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,o=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*i),t.addScaledVector(s[2],.488603*o),t.addScaledVector(s[3],.488603*r),t.addScaledVector(s[4],1.092548*(r*i)),t.addScaledVector(s[5],1.092548*(i*o)),t.addScaledVector(s[6],.315392*(3*o*o-1)),t.addScaledVector(s[7],1.092548*(r*o)),t.addScaledVector(s[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,o=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],2*.511664*i),t.addScaledVector(s[2],2*.511664*o),t.addScaledVector(s[3],2*.511664*r),t.addScaledVector(s[4],2*.429043*r*i),t.addScaledVector(s[5],2*.429043*i*o),t.addScaledVector(s[6],.743125*o*o-.247708),t.addScaledVector(s[7],2*.429043*r*o),t.addScaledVector(s[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,o=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*o,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*o,t[6]=.315392*(3*o*o-1),t[7]=1.092548*r*o,t[8]=.546274*(r*r-i*i)}}class sre extends dd{constructor(e=new ore,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class vC extends bs{constructor(e){super(e),this.textures={}}load(e,t,r,i){const o=this,s=new mc(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(e,function(a){try{t(o.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(o){return t[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),t[o]}const i=vC.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new gt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const o in e.uniforms){const s=e.uniforms[o];switch(i.uniforms[o]={},s.type){case"t":i.uniforms[o].value=r(s.value);break;case"c":i.uniforms[o].value=new gt().setHex(s.value);break;case"v2":i.uniforms[o].value=new nt().fromArray(s.value);break;case"v3":i.uniforms[o].value=new me().fromArray(s.value);break;case"v4":i.uniforms[o].value=new Kn().fromArray(s.value);break;case"m3":i.uniforms[o].value=new vn().fromArray(s.value);break;case"m4":i.uniforms[o].value=new Qt().fromArray(s.value);break;default:i.uniforms[o].value=s.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const o in e.extensions)i.extensions[o]=e.extensions[o];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let o=e.normalScale;Array.isArray(o)===!1&&(o=[o,o]),i.normalScale=new nt().fromArray(o)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new nt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:Bne,SpriteMaterial:wL,RawShaderMaterial:zne,ShaderMaterial:Ra,PointsMaterial:_L,MeshPhysicalMaterial:Une,MeshStandardMaterial:PL,MeshPhongMaterial:Vne,MeshToonMaterial:$ne,MeshNormalMaterial:Hne,MeshLambertMaterial:Wne,MeshDepthMaterial:yL,MeshDistanceMaterial:xL,MeshBasicMaterial:cd,MeshMatcapMaterial:jne,LineDashedMaterial:Gne,LineBasicMaterial:Ko,Material:Ji};return new t[e]}}class CR{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class are extends sn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class lre extends bs{constructor(e){super(e)}load(e,t,r,i){const o=this,s=new mc(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(e,function(a){try{t(o.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(h,m){if(t[m]!==void 0)return t[m];const y=h.interleavedBuffers[m],p=o(h,y.buffer),w=Rm(y.type,p),b=new eC(w,y.stride);return b.uuid=y.uuid,t[m]=b,b}function o(h,m){if(r[m]!==void 0)return r[m];const y=h.arrayBuffers[m],p=new Uint32Array(y).buffer;return r[m]=p,p}const s=e.isInstancedBufferGeometry?new are:new sn,a=e.data.index;if(a!==void 0){const h=Rm(a.type,a.array);s.setIndex(new $n(h,1))}const l=e.data.attributes;for(const h in l){const m=l[h];let g;if(m.isInterleavedBufferAttribute){const y=i(e.data,m.data);g=new Vh(y,m.itemSize,m.offset,m.normalized)}else{const y=Rm(m.type,m.array),p=m.isInstancedBufferAttribute?Pg:$n;g=new p(y,m.itemSize,m.normalized)}m.name!==void 0&&(g.name=m.name),m.usage!==void 0&&g.setUsage(m.usage),s.setAttribute(h,g)}const u=e.data.morphAttributes;if(u)for(const h in u){const m=u[h],g=[];for(let y=0,p=m.length;y<p;y++){const w=m[y];let b;if(w.isInterleavedBufferAttribute){const v=i(e.data,w.data);b=new Vh(v,w.itemSize,w.offset,w.normalized)}else{const v=Rm(w.type,w.array);b=new $n(v,w.itemSize,w.normalized)}w.name!==void 0&&(b.name=w.name),g.push(b)}s.morphAttributes[h]=g}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let h=0,m=f.length;h!==m;++h){const g=f[h];s.addGroup(g.start,g.count,g.materialIndex)}const d=e.data.boundingSphere;if(d!==void 0){const h=new me;d.center!==void 0&&h.fromArray(d.center),s.boundingSphere=new xo(h,d.radius)}return e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}class zGe extends bs{constructor(e){super(e)}load(e,t,r,i){const o=this,s=this.path===""?CR.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const a=new mc(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(f){i!==void 0&&i(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const c=u.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}o.parse(u,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?CR.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const o=new mc(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);const s=await o.loadAsync(e,t),a=JSON.parse(s),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,i),s=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,o,l,a,r),c=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,c),t!==void 0){let f=!1;for(const d in s)if(s[d].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),o=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,o),a=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,i,a,s,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const o=new _h().fromJSON(e[r]);t[o.uuid]=o}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(o){o.isBone&&(i[o.uuid]=o)}),e!==void 0)for(let o=0,s=e.length;o<s;o++){const a=new tC().fromJSON(e[o],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new lre;for(let o=0,s=e.length;o<s;o++){let a;const l=e[o];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in uH?a=uH[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const o=new vC;o.setTextures(t);for(let s=0,a=e.length;s<a;s++){const l=e[s];r[l.uuid]===void 0&&(r[l.uuid]=o.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],o=y1.parse(i);t[o.uuid]=o}return t}parseImages(e,t){const r=this,i={};let o;function s(l){return r.manager.itemStart(l),o.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return s(c)}else return l.data?{data:Rm(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new IL(t);o=new x1(l),o.setCrossOrigin(this.crossOrigin);for(let u=0,c=e.length;u<c;u++){const f=e[u],d=f.url;if(Array.isArray(d)){const h=[];for(let m=0,g=d.length;m<g;m++){const y=d[m],p=a(y);p!==null&&(p instanceof HTMLImageElement?h.push(p):h.push(new Sh(p.data,p.width,p.height)))}i[f.uuid]=new ah(h)}else{const h=a(f.url);i[f.uuid]=new ah(h)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function o(s){if(typeof s=="string"){const a=s,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return s.data?{data:Rm(s.type,s.data),width:s.width,height:s.height}:null}if(e!==void 0&&e.length>0){i=new x1(this.manager),i.setCrossOrigin(this.crossOrigin);for(let s=0,a=e.length;s<a;s++){const l=e[s],u=l.url;if(Array.isArray(u)){const c=[];for(let f=0,d=u.length;f<d;f++){const h=u[f],m=await o(h);m!==null&&(m instanceof HTMLImageElement?c.push(m):c.push(new Sh(m.data,m.width,m.height)))}r[l.uuid]=new ah(c)}else{const c=await o(l.url);r[l.uuid]=new ah(c)}}}return r}parseTextures(e,t){function r(o,s){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),s[o])}const i={};if(e!==void 0)for(let o=0,s=e.length;o<s;o++){const a=e[o];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],u=l.data;let c;Array.isArray(u)?(c=new px,u.length===6&&(c.needsUpdate=!0)):(u&&u.data?c=new Sh:c=new Or,u&&(c.needsUpdate=!0)),c.source=l,c.uuid=a.uuid,a.name!==void 0&&(c.name=a.name),a.mapping!==void 0&&(c.mapping=r(a.mapping,UGe)),a.channel!==void 0&&(c.channel=a.channel),a.offset!==void 0&&c.offset.fromArray(a.offset),a.repeat!==void 0&&c.repeat.fromArray(a.repeat),a.center!==void 0&&c.center.fromArray(a.center),a.rotation!==void 0&&(c.rotation=a.rotation),a.wrap!==void 0&&(c.wrapS=r(a.wrap[0],hH),c.wrapT=r(a.wrap[1],hH)),a.format!==void 0&&(c.format=a.format),a.internalFormat!==void 0&&(c.internalFormat=a.internalFormat),a.type!==void 0&&(c.type=a.type),a.colorSpace!==void 0&&(c.colorSpace=a.colorSpace),a.encoding!==void 0&&(c.encoding=a.encoding),a.minFilter!==void 0&&(c.minFilter=r(a.minFilter,pH)),a.magFilter!==void 0&&(c.magFilter=r(a.magFilter,pH)),a.anisotropy!==void 0&&(c.anisotropy=a.anisotropy),a.flipY!==void 0&&(c.flipY=a.flipY),a.generateMipmaps!==void 0&&(c.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(c.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(c.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(c.compareFunction=a.compareFunction),a.userData!==void 0&&(c.userData=a.userData),i[a.uuid]=c}return i}parseObject(e,t,r,i,o){let s;function a(d){return t[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",d),t[d]}function l(d){if(d!==void 0){if(Array.isArray(d)){const h=[];for(let m=0,g=d.length;m<g;m++){const y=d[m];r[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),h.push(r[y])}return h}return r[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),r[d]}}function u(d){return i[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",d),i[d]}let c,f;switch(e.type){case"Scene":s=new f1,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new gt(e.background):s.background=u(e.background)),e.environment!==void 0&&(s.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new Q2(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new J2(e.fog.color,e.fog.density)),e.fog.name!==""&&(s.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(s.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":s=new Qr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new Nf(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new rre(e.color,e.intensity);break;case"DirectionalLight":s=new nre(e.color,e.intensity);break;case"PointLight":s=new tre(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new ire(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new ere(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":s=new Qne(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=new sre().fromJSON(e);break;case"SkinnedMesh":c=a(e.geometry),f=l(e.material),s=new _ne(c,f),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":c=a(e.geometry),f=l(e.material),s=new ui(c,f);break;case"InstancedMesh":c=a(e.geometry),f=l(e.material);const d=e.count,h=e.instanceMatrix,m=e.instanceColor;s=new Ene(c,f,d),s.instanceMatrix=new Pg(new Float32Array(h.array),16),m!==void 0&&(s.instanceColor=new Pg(new Float32Array(m.array),m.itemSize));break;case"BatchedMesh":c=a(e.geometry),f=l(e.material),s=new Mne(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,f),s.geometry=c,s.perObjectFrustumCulled=e.perObjectFrustumCulled,s.sortObjects=e.sortObjects,s._drawRanges=e.drawRanges,s._reservedRanges=e.reservedRanges,s._visibility=e.visibility,s._active=e.active,s._bounds=e.bounds.map(g=>{const y=new Vo;y.min.fromArray(g.boxMin),y.max.fromArray(g.boxMax);const p=new xo;return p.radius=g.sphereRadius,p.center.fromArray(g.sphereCenter),{boxInitialized:g.boxInitialized,box:y,sphereInitialized:g.sphereInitialized,sphere:p}}),s._maxGeometryCount=e.maxGeometryCount,s._maxVertexCount=e.maxVertexCount,s._maxIndexCount=e.maxIndexCount,s._geometryInitialized=e.geometryInitialized,s._geometryCount=e.geometryCount,s._matricesTexture=u(e.matricesTexture.uuid);break;case"LOD":s=new Sne;break;case"Line":s=new Gf(a(e.geometry),l(e.material));break;case"LineLoop":s=new Cne(a(e.geometry),l(e.material));break;case"LineSegments":s=new hu(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":s=new Ane(a(e.geometry),l(e.material));break;case"Sprite":s=new wne(l(e.material));break;case"Group":s=new Im;break;case"Bone":s=new SL;break;default:s=new Dn}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.up!==void 0&&s.up.fromArray(e.up),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){const d=e.children;for(let h=0;h<d.length;h++)s.add(this.parseObject(d[h],t,r,i,o))}if(e.animations!==void 0){const d=e.animations;for(let h=0;h<d.length;h++){const m=d[h];s.animations.push(o[m])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);const d=e.levels;for(let h=0;h<d.length;h++){const m=d[h],g=s.getObjectByProperty("uuid",m.object);g!==void 0&&s.addLevel(g,m.distance,m.hysteresis)}}return s}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const UGe={UVMapping:j2,CubeReflectionMapping:pc,CubeRefractionMapping:jf,EquirectangularReflectionMapping:Jy,EquirectangularRefractionMapping:Qy,CubeUVReflectionMapping:hv},hH={RepeatWrapping:e1,ClampToEdgeWrapping:po,MirroredRepeatWrapping:t1},pH={NearestFilter:Zr,NearestMipmapNearestFilter:lM,NearestMipmapLinearFilter:qd,LinearFilter:gr,LinearMipmapNearestFilter:oy,LinearMipmapLinearFilter:$l};class VGe extends bs{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,s=Gu.get(e);if(s!==void 0){if(o.manager.itemStart(e),s.then){s.then(u=>{t&&t(u),o.manager.itemEnd(e)}).catch(u=>{i&&i(u)});return}return setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(u){return Gu.add(e,u),t&&t(u),o.manager.itemEnd(e),u}).catch(function(u){i&&i(u),Gu.remove(e),o.manager.itemError(e),o.manager.itemEnd(e)});Gu.add(e,l),o.manager.itemStart(e)}}let dS;class FL{static getContext(){return dS===void 0&&(dS=new(window.AudioContext||window.webkitAudioContext)),dS}static setContext(e){dS=e}}class $Ge extends bs{constructor(e){super(e)}load(e,t,r,i){const o=this,s=new mc(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){try{const u=l.slice(0);FL.getContext().decodeAudioData(u,function(f){t(f)}).catch(a)}catch(u){a(u)}},r,i);function a(l){i?i(l):console.error(l),o.manager.itemError(e)}}}const mH=new Qt,gH=new Qt,Nd=new Qt;class HGe{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Qr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Qr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Nd.copy(e.projectionMatrix);const i=t.eyeSep/2,o=i*t.near/t.focus,s=t.near*Math.tan(xh*t.fov*.5)/t.zoom;let a,l;gH.elements[12]=-i,mH.elements[12]=i,a=-s*t.aspect+o,l=s*t.aspect+o,Nd.elements[0]=2*t.near/(l-a),Nd.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Nd),a=-s*t.aspect-o,l=s*t.aspect-o,Nd.elements[0]=2*t.near/(l-a),Nd.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Nd)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(gH),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(mH)}}class BL{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=vH(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=vH();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function vH(){return(typeof performance>"u"?Date:performance).now()}const Pd=new me,yH=new Ii,WGe=new me,Rd=new me;class jGe extends Dn{constructor(){super(),this.type="AudioListener",this.context=FL.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new BL}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Pd,yH,WGe),Rd.set(0,0,-1).applyQuaternion(yH),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Pd.x,i),t.positionY.linearRampToValueAtTime(Pd.y,i),t.positionZ.linearRampToValueAtTime(Pd.z,i),t.forwardX.linearRampToValueAtTime(Rd.x,i),t.forwardY.linearRampToValueAtTime(Rd.y,i),t.forwardZ.linearRampToValueAtTime(Rd.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(Pd.x,Pd.y,Pd.z),t.setOrientation(Rd.x,Rd.y,Rd.z,r.x,r.y,r.z)}}class ure extends Dn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Od=new me,xH=new Ii,GGe=new me,kd=new me;class qGe extends ure{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Od,xH,GGe),kd.set(0,0,1).applyQuaternion(xH);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Od.x,r),t.positionY.linearRampToValueAtTime(Od.y,r),t.positionZ.linearRampToValueAtTime(Od.z,r),t.orientationX.linearRampToValueAtTime(kd.x,r),t.orientationY.linearRampToValueAtTime(kd.y,r),t.orientationZ.linearRampToValueAtTime(kd.z,r)}else t.setPosition(Od.x,Od.y,Od.z),t.setOrientation(kd.x,kd.y,kd.z)}}class XGe{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class cre{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,o,s;switch(t){case"quaternion":i=this._slerp,o=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,o=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,o=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=o,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,o=e*i+i;let s=this.cumulativeWeight;if(s===0){for(let a=0;a!==i;++a)r[o+a]=r[a];s=t}else{s+=t;const a=t/s;this._mixBufferRegion(r,o,0,a,i)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,o=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-o,t)}s>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let o=r,s=i;o!==s;++o)t[o]=t[i+o%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,o){if(i>=.5)for(let s=0;s!==o;++s)e[t+s]=e[r+s]}_slerp(e,t,r,i){Ii.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,o){const s=this._workIndex*o;Ii.multiplyQuaternionsFlat(e,s,e,t,e,r),Ii.slerpFlat(e,t,e,t,e,s,i)}_lerp(e,t,r,i,o){const s=1-i;for(let a=0;a!==o;++a){const l=t+a;e[l]=e[l]*s+e[r+a]*i}}_lerpAdditive(e,t,r,i,o){for(let s=0;s!==o;++s){const a=t+s;e[a]=e[a]+e[r+s]*i}}}const zL="\\[\\]\\.:\\/",YGe=new RegExp("["+zL+"]","g"),UL="[^"+zL+"]",KGe="[^"+zL.replace("\\.","")+"]",ZGe=/((?:WC+[\/:])*)/.source.replace("WC",UL),JGe=/(WCOD+)?/.source.replace("WCOD",KGe),QGe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",UL),eqe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",UL),tqe=new RegExp("^"+ZGe+JGe+QGe+eqe+"$"),nqe=["material","materials","bones","map"];class rqe{constructor(e,t,r){const i=r||Nn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,o=r.length;i!==o;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class Nn{constructor(e,t,r){this.path=t,this.parsedPath=r||Nn.parseTrackName(t),this.node=Nn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new Nn.Composite(e,t,r):new Nn(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(YGe,"")}static parseTrackName(e){const t=tqe.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const o=r.nodeName.substring(i+1);nqe.indexOf(o)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=o)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(o){for(let s=0;s<o.length;s++){const a=o[s];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let o=t.propertyIndex;if(e||(e=Nn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let u=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===u){u=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const s=e[i];if(s===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(o!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=o}else s.fromArray!==void 0&&s.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Nn.Composite=rqe;Nn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Nn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Nn.prototype.GetterByBindingType=[Nn.prototype._getValue_direct,Nn.prototype._getValue_array,Nn.prototype._getValue_arrayElement,Nn.prototype._getValue_toArray];Nn.prototype.SetterByBindingTypeAndVersioning=[[Nn.prototype._setValue_direct,Nn.prototype._setValue_direct_setNeedsUpdate,Nn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Nn.prototype._setValue_array,Nn.prototype._setValue_array_setNeedsUpdate,Nn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Nn.prototype._setValue_arrayElement,Nn.prototype._setValue_arrayElement_setNeedsUpdate,Nn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Nn.prototype._setValue_fromArray,Nn.prototype._setValue_fromArray_setNeedsUpdate,Nn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class iqe{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Hs(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,o=this._bindings,s=o.length;let a,l=e.length,u=this.nCachedObjects_;for(let c=0,f=arguments.length;c!==f;++c){const d=arguments[c],h=d.uuid;let m=t[h];if(m===void 0){m=l++,t[h]=m,e.push(d);for(let g=0,y=s;g!==y;++g)o[g].push(new Nn(d,r[g],i[g]))}else if(m<u){a=e[m];const g=--u,y=e[g];t[y.uuid]=m,e[m]=y,t[h]=g,e[g]=d;for(let p=0,w=s;p!==w;++p){const b=o[p],v=b[g];let S=b[m];b[m]=v,S===void 0&&(S=new Nn(d,r[p],i[p])),b[g]=S}}else e[m]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let o=this.nCachedObjects_;for(let s=0,a=arguments.length;s!==a;++s){const l=arguments[s],u=l.uuid,c=t[u];if(c!==void 0&&c>=o){const f=o++,d=e[f];t[d.uuid]=c,e[c]=d,t[u]=f,e[f]=l;for(let h=0,m=i;h!==m;++h){const g=r[h],y=g[f],p=g[c];g[c]=y,g[f]=p}}}this.nCachedObjects_=o}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let o=this.nCachedObjects_,s=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],c=u.uuid,f=t[c];if(f!==void 0)if(delete t[c],f<o){const d=--o,h=e[d],m=--s,g=e[m];t[h.uuid]=f,e[f]=h,t[g.uuid]=d,e[d]=g,e.pop();for(let y=0,p=i;y!==p;++y){const w=r[y],b=w[d],v=w[m];w[f]=b,w[d]=v,w.pop()}}else{const d=--s,h=e[d];d>0&&(t[h.uuid]=f),e[f]=h,e.pop();for(let m=0,g=i;m!==g;++m){const y=r[m];y[f]=y[d],y.pop()}}}this.nCachedObjects_=o}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const o=this._bindings;if(i!==void 0)return o[i];const s=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,c=this.nCachedObjects_,f=new Array(u);i=o.length,r[e]=i,s.push(e),a.push(t),o.push(f);for(let d=c,h=l.length;d!==h;++d){const m=l[d];f[d]=new Nn(m,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,o=this._parsedPaths,s=this._bindings,a=s.length-1,l=s[a],u=e[a];t[u]=r,s[r]=l,s.pop(),o[r]=o[a],o.pop(),i[r]=i[a],i.pop()}}}class fre{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const o=t.tracks,s=o.length,a=new Array(s),l={endingStart:oh,endingEnd:oh};for(let u=0;u!==s;++u){const c=o[u].createInterpolant(null);a[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=jte,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,o=e._clip.duration,s=o/i,a=i/o;e.warp(1,s,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,o=i.time,s=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=o,l[1]=o+r,u[0]=e/s,u[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const o=this._startTime;if(o!==null){const l=(e-o)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const s=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case lL:for(let c=0,f=l.length;c!==f;++c)l[c].evaluate(s),u[c].accumulateAdditive(a);break;case q2:default:for(let c=0,f=l.length;c!==f;++c)l[c].evaluate(s),u[c].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,o=this._loopCount;const s=r===Gte;if(e===0)return o===-1?i:s&&(o&1)===1?t-i:i;if(r===Wte){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,o+=Math.abs(a);const l=this.repetitions-o;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,s)}else this._setEndings(!1,!1,s);this._loopCount=o,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(s&&(o&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=sh,i.endingEnd=sh):(e?i.endingStart=this.zeroSlopeAtStart?sh:oh:i.endingStart=i1,t?i.endingEnd=this.zeroSlopeAtEnd?sh:oh:i.endingEnd=i1)}_scheduleFading(e,t,r){const i=this._mixer,o=i.time;let s=this._weightInterpolant;s===null&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);const a=s.parameterPositions,l=s.sampleValues;return a[0]=o,l[0]=t,a[1]=o+e,l[1]=r,this}}const oqe=new Float32Array(1);class sqe extends du{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,o=i.length,s=e._propertyBindings,a=e._interpolants,l=r.uuid,u=this._bindingsByRootAndName;let c=u[l];c===void 0&&(c={},u[l]=c);for(let f=0;f!==o;++f){const d=i[f],h=d.name;let m=c[h];if(m!==void 0)++m.referenceCount,s[f]=m;else{if(m=s[f],m!==void 0){m._cacheIndex===null&&(++m.referenceCount,this._addInactiveBinding(m,l,h));continue}const g=t&&t._propertyBindings[f].binding.parsedPath;m=new cre(Nn.create(r,h,g),d.ValueTypeName,d.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,l,h),s[f]=m}a[f].resultBuffer=m.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,o=this._actionsByClip[i];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const o=t[r];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const o=t[r];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,o=this._actionsByClip;let s=o[t];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[t]=s;else{const a=s.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),s.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const o=e._clip.uuid,s=this._actionsByClip,a=s[o],l=a.knownActions,u=l[l.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,l[c]=u,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,d=(e._localRoot||this._root).uuid;delete f[d],l.length===0&&delete s[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const o=t[r];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,o=t[i];e._cacheIndex=i,t[i]=e,o._cacheIndex=r,t[r]=o}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,o=t[i];e._cacheIndex=i,t[i]=e,o._cacheIndex=r,t[r]=o}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,o=this._bindings;let s=i[t];s===void 0&&(s={},i[t]=s),s[r]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,o=r.path,s=this._bindingsByRootAndName,a=s[i],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete a[o],Object.keys(a).length===0&&delete s[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,o=t[i];e._cacheIndex=i,t[i]=e,o._cacheIndex=r,t[r]=o}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,o=t[i];e._cacheIndex=i,t[i]=e,o._cacheIndex=r,t[r]=o}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new OL(new Float32Array(2),new Float32Array(2),1,oqe),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,o=t[i];e.__cacheIndex=i,t[i]=e,o.__cacheIndex=r,t[r]=o}clipAction(e,t,r){const i=t||this._root,o=i.uuid;let s=typeof e=="string"?y1.findByName(i,e):e;const a=s!==null?s.uuid:e,l=this._actionsByClip[a];let u=null;if(r===void 0&&(s!==null?r=s.blendMode:r=q2),l!==void 0){const f=l.actionByRoot[o];if(f!==void 0&&f.blendMode===r)return f;u=l.knownActions[0],s===null&&(s=u._clip)}if(s===null)return null;const c=new fre(this,s,t,r);return this._bindAction(c,u),this._addInactiveAction(c,a,o),c}existingAction(e,t){const r=t||this._root,i=r.uuid,o=typeof e=="string"?y1.findByName(r,e):e,s=o?o.uuid:e,a=this._actionsByClip[s];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,o=Math.sign(e),s=this._accuIndex^=1;for(let u=0;u!==r;++u)t[u]._update(i,e,o,s);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,o=i[r];if(o!==void 0){const s=o.knownActions;for(let a=0,l=s.length;a!==l;++a){const u=s[a];this._deactivateAction(u);const c=u._cacheIndex,f=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,f._cacheIndex=c,t[c]=f,t.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const s in r){const a=r[s].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,o=i[t];if(o!==void 0)for(const s in o){const a=o[s];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class VL{constructor(e){this.value=e}clone(){return new VL(this.value.clone===void 0?this.value:this.value.clone())}}let aqe=0;class lqe extends du{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:aqe++}),this.name="",this.usage=l1,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++){const o=Array.isArray(t[r])?t[r]:[t[r]];for(let s=0;s<o.length;s++)this.uniforms.push(o[s].clone())}return this}clone(){return new this.constructor().copy(this)}}class uqe extends eC{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class cqe{constructor(e,t,r,i,o){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class $L{constructor(e,t,r=0,i=1/0){this.ray=new ip(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new wh,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return AR(e,this,r,t),r.sort(bH),r}intersectObjects(e,t=!0,r=[]){for(let i=0,o=e.length;i<o;i++)AR(e[i],this,r,t);return r.sort(bH),r}}function bH(n,e){return n.distance-e.distance}function AR(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let o=0,s=i.length;o<s;o++)AR(i[o],e,t,!0)}}class TR{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Hr(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class fqe{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const wH=new nt;class dqe{constructor(e=new nt(1/0,1/0),t=new nt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=wH.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,wH).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const SH=new me,hS=new me;class hqe{constructor(e=new me,t=new me){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){SH.subVectors(e,this.start),hS.subVectors(this.end,this.start);const r=hS.dot(hS);let o=hS.dot(SH)/r;return t&&(o=Hr(o,0,1)),o}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const _H=new me;class pqe extends Dn{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new sn,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,a=1,l=32;s<l;s++,a++){const u=s/l*Math.PI*2,c=a/l*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(c),Math.sin(c),1)}r.setAttribute("position",new Rt(i,3));const o=new Ko({fog:!1,toneMapped:!1});this.cone=new hu(r,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),_H.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_H),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Hc=new me,pS=new Qt,U3=new Qt;class mqe extends hu{constructor(e){const t=dre(e),r=new sn,i=[],o=[],s=new gt(0,0,1),a=new gt(0,1,0);for(let u=0;u<t.length;u++){const c=t[u];c.parent&&c.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),o.push(s.r,s.g,s.b),o.push(a.r,a.g,a.b))}r.setAttribute("position",new Rt(i,3)),r.setAttribute("color",new Rt(o,3));const l=new Ko({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");U3.copy(this.root.matrixWorld).invert();for(let o=0,s=0;o<t.length;o++){const a=t[o];a.parent&&a.parent.isBone&&(pS.multiplyMatrices(U3,a.matrixWorld),Hc.setFromMatrixPosition(pS),i.setXYZ(s,Hc.x,Hc.y,Hc.z),pS.multiplyMatrices(U3,a.parent.matrixWorld),Hc.setFromMatrixPosition(pS),i.setXYZ(s+1,Hc.x,Hc.y,Hc.z),s+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function dre(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,dre(n.children[t]));return e}class gqe extends ui{constructor(e,t,r){const i=new yx(t,4,2),o=new cd({wireframe:!0,fog:!1,toneMapped:!1});super(i,o),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const vqe=new me,EH=new gt,MH=new gt;class yqe extends Dn{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new vx(t);i.rotateY(Math.PI*.5),this.material=new cd({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const o=i.getAttribute("position"),s=new Float32Array(o.count*3);i.setAttribute("color",new $n(s,3)),this.add(new ui(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");EH.copy(this.light.color),MH.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const o=r<i/2?EH:MH;t.setXYZ(r,o.r,o.g,o.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(vqe.setFromMatrixPosition(this.light.matrixWorld).negate())}}class xqe extends hu{constructor(e=10,t=10,r=4473924,i=8947848){r=new gt(r),i=new gt(i);const o=t/2,s=e/t,a=e/2,l=[],u=[];for(let d=0,h=0,m=-a;d<=t;d++,m+=s){l.push(-a,0,m,a,0,m),l.push(m,0,-a,m,0,a);const g=d===o?r:i;g.toArray(u,h),h+=3,g.toArray(u,h),h+=3,g.toArray(u,h),h+=3,g.toArray(u,h),h+=3}const c=new sn;c.setAttribute("position",new Rt(l,3)),c.setAttribute("color",new Rt(u,3));const f=new Ko({vertexColors:!0,toneMapped:!1});super(c,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class bqe extends hu{constructor(e=10,t=16,r=8,i=64,o=4473924,s=8947848){o=new gt(o),s=new gt(s);const a=[],l=[];if(t>1)for(let f=0;f<t;f++){const d=f/t*(Math.PI*2),h=Math.sin(d)*e,m=Math.cos(d)*e;a.push(0,0,0),a.push(h,0,m);const g=f&1?o:s;l.push(g.r,g.g,g.b),l.push(g.r,g.g,g.b)}for(let f=0;f<r;f++){const d=f&1?o:s,h=e-e/r*f;for(let m=0;m<i;m++){let g=m/i*(Math.PI*2),y=Math.sin(g)*h,p=Math.cos(g)*h;a.push(y,0,p),l.push(d.r,d.g,d.b),g=(m+1)/i*(Math.PI*2),y=Math.sin(g)*h,p=Math.cos(g)*h,a.push(y,0,p),l.push(d.r,d.g,d.b)}}const u=new sn;u.setAttribute("position",new Rt(a,3)),u.setAttribute("color",new Rt(l,3));const c=new Ko({vertexColors:!0,toneMapped:!1});super(u,c),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const CH=new me,mS=new me,AH=new me;class wqe extends Dn{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new sn;i.setAttribute("position",new Rt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const o=new Ko({fog:!1,toneMapped:!1});this.lightPlane=new Gf(i,o),this.add(this.lightPlane),i=new sn,i.setAttribute("position",new Rt([0,0,0,0,0,1],3)),this.targetLine=new Gf(i,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),CH.setFromMatrixPosition(this.light.matrixWorld),mS.setFromMatrixPosition(this.light.target.matrixWorld),AH.subVectors(mS,CH),this.lightPlane.lookAt(mS),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(mS),this.targetLine.scale.z=AH.length()}}const gS=new me,zr=new hx;class Sqe extends hu{constructor(e){const t=new sn,r=new Ko({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],o=[],s={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(m,g){l(m),l(g)}function l(m){i.push(0,0,0),o.push(0,0,0),s[m]===void 0&&(s[m]=[]),s[m].push(i.length/3-1)}t.setAttribute("position",new Rt(i,3)),t.setAttribute("color",new Rt(o,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const u=new gt(16755200),c=new gt(16711680),f=new gt(43775),d=new gt(16777215),h=new gt(3355443);this.setColors(u,c,f,d,h)}setColors(e,t,r,i,o){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,o.r,o.g,o.b),a.setXYZ(41,o.r,o.g,o.b),a.setXYZ(42,o.r,o.g,o.b),a.setXYZ(43,o.r,o.g,o.b),a.setXYZ(44,o.r,o.g,o.b),a.setXYZ(45,o.r,o.g,o.b),a.setXYZ(46,o.r,o.g,o.b),a.setXYZ(47,o.r,o.g,o.b),a.setXYZ(48,o.r,o.g,o.b),a.setXYZ(49,o.r,o.g,o.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;zr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Xr("c",t,e,zr,0,0,-1),Xr("t",t,e,zr,0,0,1),Xr("n1",t,e,zr,-r,-i,-1),Xr("n2",t,e,zr,r,-i,-1),Xr("n3",t,e,zr,-r,i,-1),Xr("n4",t,e,zr,r,i,-1),Xr("f1",t,e,zr,-r,-i,1),Xr("f2",t,e,zr,r,-i,1),Xr("f3",t,e,zr,-r,i,1),Xr("f4",t,e,zr,r,i,1),Xr("u1",t,e,zr,r*.7,i*1.1,-1),Xr("u2",t,e,zr,-r*.7,i*1.1,-1),Xr("u3",t,e,zr,0,i*2,-1),Xr("cf1",t,e,zr,-r,0,1),Xr("cf2",t,e,zr,r,0,1),Xr("cf3",t,e,zr,0,-i,1),Xr("cf4",t,e,zr,0,i,1),Xr("cn1",t,e,zr,-r,0,-1),Xr("cn2",t,e,zr,r,0,-1),Xr("cn3",t,e,zr,0,-i,-1),Xr("cn4",t,e,zr,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Xr(n,e,t,r,i,o,s){gS.set(i,o,s).unproject(r);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let u=0,c=a.length;u<c;u++)l.setXYZ(a[u],gS.x,gS.y,gS.z)}}const vS=new Vo;class _qe extends hu{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),o=new sn;o.setIndex(new $n(r,1)),o.setAttribute("position",new $n(i,3)),super(o,new Ko({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&vS.setFromObject(this.object),vS.isEmpty())return;const t=vS.min,r=vS.max,i=this.geometry.attributes.position,o=i.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=t.x,o[4]=r.y,o[5]=r.z,o[6]=t.x,o[7]=t.y,o[8]=r.z,o[9]=r.x,o[10]=t.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=t.z,o[15]=t.x,o[16]=r.y,o[17]=t.z,o[18]=t.x,o[19]=t.y,o[20]=t.z,o[21]=r.x,o[22]=t.y,o[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Eqe extends hu{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new sn;o.setIndex(new $n(r,1)),o.setAttribute("position",new Rt(i,3)),super(o,new Ko({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Mqe extends Gf{constructor(e,t=1,r=16776960){const i=r,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new sn;s.setAttribute("position",new Rt(o,3)),s.computeBoundingSphere(),super(s,new Ko({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new sn;l.setAttribute("position",new Rt(a,3)),l.computeBoundingSphere(),this.add(new ui(l,new cd({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const TH=new me;let yS,V3;class Cqe extends Dn{constructor(e=new me(0,0,1),t=new me(0,0,0),r=1,i=16776960,o=r*.2,s=o*.2){super(),this.type="ArrowHelper",yS===void 0&&(yS=new sn,yS.setAttribute("position",new Rt([0,0,0,0,1,0],3)),V3=new gv(0,.5,1,5,1),V3.translate(0,-.5,0)),this.position.copy(t),this.line=new Gf(yS,new Ko({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ui(V3,new cd({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,o,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{TH.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(TH,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Aqe extends hu{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new sn;i.setAttribute("position",new Rt(t,3)),i.setAttribute("color",new Rt(r,3));const o=new Ko({vertexColors:!0,toneMapped:!1});super(i,o),this.type="AxesHelper"}setColors(e,t,r){const i=new gt,o=this.geometry.attributes.color.array;return i.set(e),i.toArray(o,0),i.toArray(o,3),i.set(t),i.toArray(o,6),i.toArray(o,9),i.set(r),i.toArray(o,12),i.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Tqe{constructor(){this.type="ShapePath",this.color=new gt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new d1,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,o,s){return this.currentPath.bezierCurveTo(e,t,r,i,o,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(p){const w=[];for(let b=0,v=p.length;b<v;b++){const S=p[b],x=new _h;x.curves=S.curves,w.push(x)}return w}function r(p,w){const b=w.length;let v=!1;for(let S=b-1,x=0;x<b;S=x++){let M=w[S],A=w[x],T=A.x-M.x,C=A.y-M.y;if(Math.abs(C)>Number.EPSILON){if(C<0&&(M=w[x],T=-T,A=w[S],C=-C),p.y<M.y||p.y>A.y)continue;if(p.y===M.y){if(p.x===M.x)return!0}else{const D=C*(p.x-M.x)-T*(p.y-M.y);if(D===0)return!0;if(D<0)continue;v=!v}}else{if(p.y!==M.y)continue;if(A.x<=p.x&&p.x<=M.x||M.x<=p.x&&p.x<=A.x)return!0}}return v}const i=Ql.isClockWise,o=this.subPaths;if(o.length===0)return[];let s,a,l;const u=[];if(o.length===1)return a=o[0],l=new _h,l.curves=a.curves,u.push(l),u;let c=!i(o[0].getPoints());c=e?!c:c;const f=[],d=[];let h=[],m=0,g;d[m]=void 0,h[m]=[];for(let p=0,w=o.length;p<w;p++)a=o[p],g=a.getPoints(),s=i(g),s=e?!s:s,s?(!c&&d[m]&&m++,d[m]={s:new _h,p:g},d[m].s.curves=a.curves,c&&m++,h[m]=[]):h[m].push({h:a,p:g[0]});if(!d[0])return t(o);if(d.length>1){let p=!1,w=0;for(let b=0,v=d.length;b<v;b++)f[b]=[];for(let b=0,v=d.length;b<v;b++){const S=h[b];for(let x=0;x<S.length;x++){const M=S[x];let A=!0;for(let T=0;T<d.length;T++)r(M.p,d[T].p)&&(b!==T&&w++,A?(A=!1,f[T].push(M)):p=!0);A&&f[b].push(M)}}w>0&&p===!1&&(h=f)}let y;for(let p=0,w=d.length;p<w;p++){l=d[p].s,u.push(l),y=h[p];for(let b=0,v=y.length;b<v;b++)l.holes.push(y[b].h)}return u}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ux}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ux);const Dqe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:eL,AddEquation:tf,AddOperation:Dte,AdditiveAnimationBlendMode:lL,AdditiveBlending:UP,AgXToneMapping:kte,AlphaFormat:Bte,AlwaysCompare:nne,AlwaysDepth:Ste,AlwaysStencilFunc:vR,AmbientLight:rre,AnimationAction:fre,AnimationClip:y1,AnimationLoader:PGe,AnimationMixer:sqe,AnimationObjectGroup:iqe,AnimationUtils:AGe,ArcCurve:Dne,ArrayCamera:yne,ArrowHelper:Cqe,AttachedBindMode:jP,Audio:ure,AudioAnalyser:XGe,AudioContext:FL,AudioListener:jGe,AudioLoader:$Ge,AxesHelper:Aqe,BackSide:yo,BasicDepthPacking:qte,BasicShadowMap:ite,BatchedMesh:Mne,Bone:SL,BooleanKeyframeTrack:sp,Box2:dqe,Box3:Vo,Box3Helper:Eqe,BoxGeometry:op,BoxHelper:_qe,BufferAttribute:$n,BufferGeometry:sn,BufferGeometryLoader:lre,ByteType:Lte,Cache:Gu,Camera:hx,CameraHelper:Sqe,CanvasTexture:Tne,CapsuleGeometry:iC,CatmullRomCurve3:Nne,CineonToneMapping:Rte,CircleGeometry:oC,ClampToEdgeWrapping:po,Clock:BL,Color:gt,ColorKeyframeTrack:kL,ColorManagement:Gn,CompressedArrayTexture:Kje,CompressedCubeTexture:Zje,CompressedTexture:nC,CompressedTextureLoader:RGe,ConeGeometry:sC,ConstantAlphaFactor:xte,ConstantColorFactor:vte,CubeCamera:une,CubeReflectionMapping:pc,CubeRefractionMapping:jf,CubeTexture:px,CubeTextureLoader:OGe,CubeUVReflectionMapping:hv,CubicBezierCurve:ML,CubicBezierCurve3:Pne,CubicInterpolant:Yne,CullFaceBack:zP,CullFaceFront:rte,CullFaceFrontBack:B9e,CullFaceNone:nte,Curve:pl,CurvePath:One,CustomBlending:ote,CustomToneMapping:Ote,CylinderGeometry:gv,Cylindrical:fqe,Data3DTexture:hL,DataArrayTexture:Y2,DataTexture:Sh,DataTextureLoader:kGe,DataUtils:GVe,DecrementStencilOp:Y9e,DecrementWrapStencilOp:Z9e,DefaultLoadingManager:Jne,DepthFormat:Tf,DepthStencilFormat:Uh,DepthTexture:K2,DetachedBindMode:Ite,DirectionalLight:nre,DirectionalLightHelper:wqe,DiscreteInterpolant:Kne,DisplayP3ColorSpace:X2,DodecahedronGeometry:aC,DoubleSide:ma,DstAlphaFactor:dte,DstColorFactor:pte,DynamicCopyUsage:dVe,DynamicDrawUsage:sVe,DynamicReadUsage:uVe,EdgesGeometry:NL,EllipseCurve:rC,EqualCompare:Jte,EqualDepth:Ete,EqualStencilFunc:tVe,EquirectangularReflectionMapping:Jy,EquirectangularRefractionMapping:Qy,Euler:dx,EventDispatcher:du,ExtrudeGeometry:uC,FileLoader:mc,Float16BufferAttribute:JVe,Float32BufferAttribute:Rt,Float64BufferAttribute:QVe,FloatType:Is,Fog:Q2,FogExp2:J2,FramebufferTexture:Yje,FrontSide:hc,Frustum:mx,GLBufferAttribute:cqe,GLSL1:pVe,GLSL3:yR,GreaterCompare:Qte,GreaterDepth:Cte,GreaterEqualCompare:tne,GreaterEqualDepth:Mte,GreaterEqualStencilFunc:oVe,GreaterStencilFunc:rVe,GridHelper:xqe,Group:Im,HalfFloatType:zh,HemisphereLight:Qne,HemisphereLightHelper:yqe,IcosahedronGeometry:cC,ImageBitmapLoader:VGe,ImageLoader:x1,ImageUtils:dL,IncrementStencilOp:X9e,IncrementWrapStencilOp:K9e,InstancedBufferAttribute:Pg,InstancedBufferGeometry:are,InstancedInterleavedBuffer:uqe,InstancedMesh:Ene,Int16BufferAttribute:KVe,Int32BufferAttribute:ZVe,Int8BufferAttribute:qVe,IntType:tL,InterleavedBuffer:eC,InterleavedBufferAttribute:Vh,Interpolant:xx,InterpolateDiscrete:n1,InterpolateLinear:r1,InterpolateSmooth:b_,InvertStencilOp:J9e,KeepStencilOp:Hd,KeyframeTrack:ml,LOD:Sne,LatheGeometry:gx,Layers:wh,LessCompare:Zte,LessDepth:_te,LessEqualCompare:cL,LessEqualDepth:Zy,LessEqualStencilFunc:nVe,LessStencilFunc:eVe,Light:dd,LightProbe:sre,Line:Gf,Line3:hqe,LineBasicMaterial:Ko,LineCurve:CL,LineCurve3:Rne,LineDashedMaterial:Gne,LineLoop:Cne,LineSegments:hu,LinearDisplayP3ColorSpace:fx,LinearEncoding:uL,LinearFilter:gr,LinearInterpolant:OL,LinearMipMapLinearFilter:$9e,LinearMipMapNearestFilter:V9e,LinearMipmapLinearFilter:$l,LinearMipmapNearestFilter:oy,LinearSRGBColorSpace:su,LinearToneMapping:Nte,LinearTransfer:o1,Loader:bs,LoaderUtils:CR,LoadingManager:IL,LoopOnce:Wte,LoopPingPong:Gte,LoopRepeat:jte,LuminanceAlphaFormat:Ute,LuminanceFormat:zte,MOUSE:Vd,Material:Ji,MaterialLoader:vC,MathUtils:rne,Matrix3:vn,Matrix4:Qt,MaxEquation:WP,Mesh:ui,MeshBasicMaterial:cd,MeshDepthMaterial:yL,MeshDistanceMaterial:xL,MeshLambertMaterial:Wne,MeshMatcapMaterial:jne,MeshNormalMaterial:Hne,MeshPhongMaterial:Vne,MeshPhysicalMaterial:Une,MeshStandardMaterial:PL,MeshToonMaterial:$ne,MinEquation:HP,MirroredRepeatWrapping:t1,MixOperation:Tte,MultiplyBlending:$P,MultiplyOperation:cx,NearestFilter:Zr,NearestMipMapLinearFilter:U9e,NearestMipMapNearestFilter:z9e,NearestMipmapLinearFilter:qd,NearestMipmapNearestFilter:lM,NeverCompare:Kte,NeverDepth:wte,NeverStencilFunc:Q9e,NoBlending:Qu,NoColorSpace:Ls,NoToneMapping:Zl,NormalAnimationBlendMode:q2,NormalBlending:yh,NotEqualCompare:ene,NotEqualDepth:Ate,NotEqualStencilFunc:iVe,NumberKeyframeTrack:g1,Object3D:Dn,ObjectLoader:zGe,ObjectSpaceNormalMap:Yte,OctahedronGeometry:vx,OneFactor:ute,OneMinusConstantAlphaFactor:bte,OneMinusConstantColorFactor:yte,OneMinusDstAlphaFactor:hte,OneMinusDstColorFactor:mte,OneMinusSrcAlphaFactor:aM,OneMinusSrcColorFactor:fte,OrthographicCamera:Nf,P3Primaries:a1,PCFShadowMap:W2,PCFSoftShadowMap:iy,PMREMGenerator:bR,Path:d1,PerspectiveCamera:Qr,Plane:Ll,PlaneGeometry:pv,PlaneHelper:Mqe,PointLight:tre,PointLightHelper:gqe,Points:Ane,PointsMaterial:_L,PolarGridHelper:bqe,PolyhedronGeometry:fd,PositionalAudio:qGe,PropertyBinding:Nn,PropertyMixer:cre,QuadraticBezierCurve:AL,QuadraticBezierCurve3:TL,Quaternion:Ii,QuaternionKeyframeTrack:vv,QuaternionLinearInterpolant:Zne,RED_GREEN_RGTC2_Format:mR,RED_RGTC1_Format:Hte,REVISION:ux,RGBADepthPacking:Xte,RGBAFormat:ko,RGBAIntegerFormat:sL,RGBA_ASTC_10x10_Format:uR,RGBA_ASTC_10x5_Format:sR,RGBA_ASTC_10x6_Format:aR,RGBA_ASTC_10x8_Format:lR,RGBA_ASTC_12x10_Format:cR,RGBA_ASTC_12x12_Format:fR,RGBA_ASTC_4x4_Format:JP,RGBA_ASTC_5x4_Format:QP,RGBA_ASTC_5x5_Format:eR,RGBA_ASTC_6x5_Format:tR,RGBA_ASTC_6x6_Format:nR,RGBA_ASTC_8x5_Format:rR,RGBA_ASTC_8x6_Format:iR,RGBA_ASTC_8x8_Format:oR,RGBA_BPTC_Format:x_,RGBA_ETC2_EAC_Format:ZP,RGBA_PVRTC_2BPPV1_Format:YP,RGBA_PVRTC_4BPPV1_Format:XP,RGBA_S3TC_DXT1_Format:g_,RGBA_S3TC_DXT3_Format:v_,RGBA_S3TC_DXT5_Format:y_,RGB_BPTC_SIGNED_Format:dR,RGB_BPTC_UNSIGNED_Format:hR,RGB_ETC1_Format:aL,RGB_ETC2_Format:KP,RGB_PVRTC_2BPPV1_Format:qP,RGB_PVRTC_4BPPV1_Format:GP,RGB_S3TC_DXT1_Format:m_,RGFormat:$te,RGIntegerFormat:oL,RawShaderMaterial:zne,Ray:ip,Raycaster:$L,Rec709Primaries:s1,RectAreaLight:ire,RedFormat:Vte,RedIntegerFormat:iL,ReinhardToneMapping:Pte,RenderTarget:sne,RepeatWrapping:e1,ReplaceStencilOp:q9e,ReverseSubtractEquation:ate,RingGeometry:fC,SIGNED_RED_GREEN_RGTC2_Format:gR,SIGNED_RED_RGTC1_Format:pR,SRGBColorSpace:mi,SRGBTransfer:ur,Scene:f1,ShaderChunk:pn,ShaderLib:Ya,ShaderMaterial:Ra,ShadowMaterial:Bne,Shape:_h,ShapeGeometry:dC,ShapePath:Tqe,ShapeUtils:Ql,ShortType:Fte,Skeleton:tC,SkeletonHelper:mqe,SkinnedMesh:_ne,Source:ah,Sphere:xo,SphereGeometry:yx,Spherical:TR,SphericalHarmonics3:ore,SplineCurve:DL,SpotLight:ere,SpotLightHelper:pqe,Sprite:wne,SpriteMaterial:wL,SrcAlphaFactor:sM,SrcAlphaSaturateFactor:gte,SrcColorFactor:cte,StaticCopyUsage:fVe,StaticDrawUsage:l1,StaticReadUsage:lVe,StereoCamera:HGe,StreamCopyUsage:hVe,StreamDrawUsage:aVe,StreamReadUsage:cVe,StringKeyframeTrack:ap,SubtractEquation:ste,SubtractiveBlending:VP,TOUCH:$d,TangentSpaceNormalMap:ud,TetrahedronGeometry:hC,Texture:Or,TextureLoader:IGe,TorusGeometry:pC,TorusKnotGeometry:mC,Triangle:Fs,TriangleFanDrawMode:j9e,TriangleStripDrawMode:W9e,TrianglesDrawMode:H9e,TubeGeometry:gC,UVMapping:j2,Uint16BufferAttribute:pL,Uint32BufferAttribute:mL,Uint8BufferAttribute:XVe,Uint8ClampedBufferAttribute:YVe,Uniform:VL,UniformsGroup:lqe,UniformsLib:dt,UniformsUtils:gL,UnsignedByteType:Jl,UnsignedInt248Type:Af,UnsignedIntType:ju,UnsignedShort4444Type:nL,UnsignedShort5551Type:rL,UnsignedShortType:G2,VSMShadowMap:ja,Vector2:nt,Vector3:me,Vector4:Kn,VectorKeyframeTrack:v1,VideoTexture:Xje,WebGL1Renderer:xne,WebGL3DRenderTarget:kVe,WebGLArrayRenderTarget:OVe,WebGLCoordinateSystem:Hl,WebGLCubeRenderTarget:cne,WebGLMultipleRenderTargets:IVe,WebGLRenderTarget:Pa,WebGLRenderer:bL,WebGLUtils:vne,WebGPUCoordinateSystem:u1,WireframeGeometry:Fne,WrapAroundEnding:i1,ZeroCurvatureEnding:oh,ZeroFactor:lte,ZeroSlopeEnding:sh,ZeroStencilOp:G9e,_SRGBAFormat:uM,createCanvasElement:one,sRGBEncoding:Df},Symbol.toStringTag,{value:"Module"}));var hre={exports:{}},lp={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */lp.ConcurrentRoot=1;lp.ContinuousEventPriority=4;lp.DefaultEventPriority=16;lp.DiscreteEventPriority=1;lp.IdleEventPriority=536870912;lp.LegacyRoot=0;hre.exports=lp;var Fm=hre.exports;function Nqe(n){let e;const t=new Set,r=(u,c)=>{const f=typeof u=="function"?u(e):u;if(f!==e){const d=e;e=c?f:Object.assign({},e,f),t.forEach(h=>h(e,d))}},i=()=>e,o=(u,c=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let d=c(e);function h(){const m=c(e);if(!f(d,m)){const g=d;u(d=m,g)}}return t.add(h),()=>t.delete(h)},l={setState:r,getState:i,subscribe:(u,c,f)=>c||f?o(u,c,f):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(r,i,l),l}const Pqe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),DH=Pqe?z.useEffect:z.useLayoutEffect;function pre(n){const e=typeof n=="function"?Nqe(n):n,t=(r=e.getState,i=Object.is)=>{const[,o]=z.useReducer(y=>y+1,0),s=e.getState(),a=z.useRef(s),l=z.useRef(r),u=z.useRef(i),c=z.useRef(!1),f=z.useRef();f.current===void 0&&(f.current=r(s));let d,h=!1;(a.current!==s||l.current!==r||u.current!==i||c.current)&&(d=r(s),h=!i(f.current,d)),DH(()=>{h&&(f.current=d),a.current=s,l.current=r,u.current=i,c.current=!1});const m=z.useRef(s);DH(()=>{const y=()=>{try{const w=e.getState(),b=l.current(w);u.current(f.current,b)||(a.current=w,f.current=b,o())}catch{c.current=!0,o()}},p=e.subscribe(y);return e.getState()!==m.current&&y(),p},[]);const g=h?d:f.current;return z.useDebugValue(g),g};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}var mre={exports:{}},gre={exports:{}},vre={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(V,L){var X=V.length;V.push(L);e:for(;0<X;){var Z=X-1>>>1,te=V[Z];if(0<i(te,L))V[Z]=L,V[X]=te,X=Z;else break e}}function t(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var L=V[0],X=V.pop();if(X!==L){V[0]=X;e:for(var Z=0,te=V.length,Y=te>>>1;Z<Y;){var re=2*(Z+1)-1,fe=V[re],ue=re+1,ge=V[ue];if(0>i(fe,X))ue<te&&0>i(ge,fe)?(V[Z]=ge,V[ue]=X,Z=ue):(V[Z]=fe,V[re]=X,Z=re);else if(ue<te&&0>i(ge,X))V[Z]=ge,V[ue]=X,Z=ue;else break e}}return L}function i(V,L){var X=V.sortIndex-L.sortIndex;return X!==0?X:V.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();n.unstable_now=function(){return s.now()-a}}var l=[],u=[],c=1,f=null,d=3,h=!1,m=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(V){for(var L=t(u);L!==null;){if(L.callback===null)r(u);else if(L.startTime<=V)r(u),L.sortIndex=L.expirationTime,e(l,L);else break;L=t(u)}}function v(V){if(g=!1,b(V),!m)if(t(l)!==null)m=!0,N(S);else{var L=t(u);L!==null&&I(v,L.startTime-V)}}function S(V,L){m=!1,g&&(g=!1,p(A),A=-1),h=!0;var X=d;try{for(b(L),f=t(l);f!==null&&(!(f.expirationTime>L)||V&&!D());){var Z=f.callback;if(typeof Z=="function"){f.callback=null,d=f.priorityLevel;var te=Z(f.expirationTime<=L);L=n.unstable_now(),typeof te=="function"?f.callback=te:f===t(l)&&r(l),b(L)}else r(l);f=t(l)}if(f!==null)var Y=!0;else{var re=t(u);re!==null&&I(v,re.startTime-L),Y=!1}return Y}finally{f=null,d=X,h=!1}}var x=!1,M=null,A=-1,T=5,C=-1;function D(){return!(n.unstable_now()-C<T)}function R(){if(M!==null){var V=n.unstable_now();C=V;var L=!0;try{L=M(!0,V)}finally{L?B():(x=!1,M=null)}}else x=!1}var B;if(typeof w=="function")B=function(){w(R)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,U=F.port2;F.port1.onmessage=R,B=function(){U.postMessage(null)}}else B=function(){y(R,0)};function N(V){M=V,x||(x=!0,B())}function I(V,L){A=y(function(){V(n.unstable_now())},L)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_continueExecution=function(){m||h||(m=!0,N(S))},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(V){switch(d){case 1:case 2:case 3:var L=3;break;default:L=d}var X=d;d=L;try{return V()}finally{d=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(V,L){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var X=d;d=V;try{return L()}finally{d=X}},n.unstable_scheduleCallback=function(V,L,X){var Z=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Z+X:Z):X=Z,V){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=X+te,V={id:c++,callback:L,priorityLevel:V,startTime:X,expirationTime:te,sortIndex:-1},X>Z?(V.sortIndex=X,e(u,V),t(l)===null&&V===t(u)&&(g?(p(A),A=-1):g=!0,I(v,X-Z))):(V.sortIndex=te,e(l,V),m||h||(m=!0,N(S))),V},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(V){var L=d;return function(){var X=d;d=L;try{return V.apply(this,arguments)}finally{d=X}}}})(vre);gre.exports=vre;var DR=gre.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rqe=function(e){var t={},r=z,i=DR,o=Object.assign;function s(_){for(var E="https://reactjs.org/docs/error-decoder.html?invariant="+_,P=1;P<arguments.length;P++)E+="&args[]="+encodeURIComponent(arguments[P]);return"Minified React error #"+_+"; visit "+E+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),m=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),v=Symbol.for("react.offscreen"),S=Symbol.iterator;function x(_){return _===null||typeof _!="object"?null:(_=S&&_[S]||_["@@iterator"],typeof _=="function"?_:null)}function M(_){if(_==null)return null;if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _;switch(_){case c:return"Fragment";case u:return"Portal";case d:return"Profiler";case f:return"StrictMode";case y:return"Suspense";case p:return"SuspenseList"}if(typeof _=="object")switch(_.$$typeof){case m:return(_.displayName||"Context")+".Consumer";case h:return(_._context.displayName||"Context")+".Provider";case g:var E=_.render;return _=_.displayName,_||(_=E.displayName||E.name||"",_=_!==""?"ForwardRef("+_+")":"ForwardRef"),_;case w:return E=_.displayName||null,E!==null?E:M(_.type)||"Memo";case b:E=_._payload,_=_._init;try{return M(_(E))}catch{}}return null}function A(_){var E=_.type;switch(_.tag){case 24:return"Cache";case 9:return(E.displayName||"Context")+".Consumer";case 10:return(E._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return _=E.render,_=_.displayName||_.name||"",E.displayName||(_!==""?"ForwardRef("+_+")":"ForwardRef");case 7:return"Fragment";case 5:return E;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M(E);case 8:return E===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof E=="function")return E.displayName||E.name||null;if(typeof E=="string")return E}return null}function T(_){var E=_,P=_;if(_.alternate)for(;E.return;)E=E.return;else{_=E;do E=_,E.flags&4098&&(P=E.return),_=E.return;while(_)}return E.tag===3?P:null}function C(_){if(T(_)!==_)throw Error(s(188))}function D(_){var E=_.alternate;if(!E){if(E=T(_),E===null)throw Error(s(188));return E!==_?null:_}for(var P=_,k=E;;){var H=P.return;if(H===null)break;var K=H.alternate;if(K===null){if(k=H.return,k!==null){P=k;continue}break}if(H.child===K.child){for(K=H.child;K;){if(K===P)return C(H),_;if(K===k)return C(H),E;K=K.sibling}throw Error(s(188))}if(P.return!==k.return)P=H,k=K;else{for(var be=!1,Be=H.child;Be;){if(Be===P){be=!0,P=H,k=K;break}if(Be===k){be=!0,k=H,P=K;break}Be=Be.sibling}if(!be){for(Be=K.child;Be;){if(Be===P){be=!0,P=K,k=H;break}if(Be===k){be=!0,k=K,P=H;break}Be=Be.sibling}if(!be)throw Error(s(189))}}if(P.alternate!==k)throw Error(s(190))}if(P.tag!==3)throw Error(s(188));return P.stateNode.current===P?_:E}function R(_){return _=D(_),_!==null?B(_):null}function B(_){if(_.tag===5||_.tag===6)return _;for(_=_.child;_!==null;){var E=B(_);if(E!==null)return E;_=_.sibling}return null}function F(_){if(_.tag===5||_.tag===6)return _;for(_=_.child;_!==null;){if(_.tag!==4){var E=F(_);if(E!==null)return E}_=_.sibling}return null}var U=Array.isArray,N=e.getPublicInstance,I=e.getRootHostContext,V=e.getChildHostContext,L=e.prepareForCommit,X=e.resetAfterCommit,Z=e.createInstance,te=e.appendInitialChild,Y=e.finalizeInitialChildren,re=e.prepareUpdate,fe=e.shouldSetTextContent,ue=e.createTextInstance,ge=e.scheduleTimeout,Se=e.cancelTimeout,xe=e.noTimeout,De=e.isPrimaryRenderer,Ae=e.supportsMutation,ie=e.supportsPersistence,Re=e.supportsHydration,Pe=e.getInstanceFromNode,ee=e.preparePortalMount,oe=e.getCurrentEventPriority,Me=e.detachDeletedInstance,se=e.supportsMicrotasks,G=e.scheduleMicrotask,j=e.supportsTestSelectors,he=e.findFiberRoot,Ce=e.getBoundingRect,q=e.getTextContent,J=e.isHiddenSubtree,ye=e.matchAccessibilityRole,we=e.setFocusIfFocusable,ke=e.setupIntersectionObserver,Fe=e.appendChild,He=e.appendChildToContainer,Ie=e.commitTextUpdate,Ze=e.commitMount,qe=e.commitUpdate,lt=e.insertBefore,at=e.insertInContainerBefore,Je=e.removeChild,Ee=e.removeChildFromContainer,$=e.resetTextContent,ce=e.hideInstance,Ne=e.hideTextInstance,Ge=e.unhideInstance,de=e.unhideTextInstance,Ye=e.clearContainer,W=e.cloneInstance,ne=e.createContainerChildSet,le=e.appendChildToContainerChildSet,ve=e.finalizeContainerChildren,_e=e.replaceContainerChildren,Oe=e.cloneHiddenInstance,Ve=e.cloneHiddenTextInstance,Xe=e.canHydrateInstance,rt=e.canHydrateTextInstance,ht=e.canHydrateSuspenseInstance,Pt=e.isSuspenseInstancePending,it=e.isSuspenseInstanceFallback,Ct=e.registerSuspenseInstanceRetry,Ht=e.getNextHydratableSibling,jr=e.getFirstHydratableChild,Lr=e.getFirstHydratableChildWithinContainer,ar=e.getFirstHydratableChildWithinSuspenseInstance,vl=e.hydrateInstance,_c=e.hydrateTextInstance,Fi=e.hydrateSuspenseInstance,pe=e.getNextHydratableInstanceAfterSuspenseInstance,Le=e.commitHydratedContainer,Ue=e.commitHydratedSuspenseInstance,$e=e.clearSuspenseBoundary,We=e.clearSuspenseBoundaryFromContainer,xt=e.shouldDeleteUnhydratedTailInstances,_t=e.didNotMatchHydratedContainerTextInstance,It=e.didNotMatchHydratedTextInstance,ft;function Et(_){if(ft===void 0)try{throw Error()}catch(P){var E=P.stack.trim().match(/\n( *(at )?)/);ft=E&&E[1]||""}return`
`+ft+_}var zt=!1;function Ot(_,E){if(!_||zt)return"";zt=!0;var P=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(E)if(E=function(){throw Error()},Object.defineProperty(E.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(E,[])}catch(ct){var k=ct}Reflect.construct(_,[],E)}else{try{E.call()}catch(ct){k=ct}_.call(E.prototype)}else{try{throw Error()}catch(ct){k=ct}_()}}catch(ct){if(ct&&k&&typeof ct.stack=="string"){for(var H=ct.stack.split(`
`),K=k.stack.split(`
`),be=H.length-1,Be=K.length-1;1<=be&&0<=Be&&H[be]!==K[Be];)Be--;for(;1<=be&&0<=Be;be--,Be--)if(H[be]!==K[Be]){if(be!==1||Be!==1)do if(be--,Be--,0>Be||H[be]!==K[Be]){var Qe=`
`+H[be].replace(" at new "," at ");return _.displayName&&Qe.includes("<anonymous>")&&(Qe=Qe.replace("<anonymous>",_.displayName)),Qe}while(1<=be&&0<=Be);break}}}finally{zt=!1,Error.prepareStackTrace=P}return(_=_?_.displayName||_.name:"")?Et(_):""}var Wn=Object.prototype.hasOwnProperty,fi=[],dr=-1;function _i(_){return{current:_}}function Jt(_){0>dr||(_.current=fi[dr],fi[dr]=null,dr--)}function Tt(_,E){dr++,fi[dr]=_.current,_.current=E}var Ks={},xn=_i(Ks),Fr=_i(!1),yl=Ks;function Zs(_,E){var P=_.type.contextTypes;if(!P)return Ks;var k=_.stateNode;if(k&&k.__reactInternalMemoizedUnmaskedChildContext===E)return k.__reactInternalMemoizedMaskedChildContext;var H={},K;for(K in P)H[K]=E[K];return k&&(_=_.stateNode,_.__reactInternalMemoizedUnmaskedChildContext=E,_.__reactInternalMemoizedMaskedChildContext=H),H}function Ei(_){return _=_.childContextTypes,_!=null}function Gr(){Jt(Fr),Jt(xn)}function xl(_,E,P){if(xn.current!==Ks)throw Error(s(168));Tt(xn,E),Tt(Fr,P)}function cp(_,E,P){var k=_.stateNode;if(E=E.childContextTypes,typeof k.getChildContext!="function")return P;k=k.getChildContext();for(var H in k)if(!(H in E))throw Error(s(108,A(_)||"Unknown",H));return o({},P,k)}function Bi(_){return _=(_=_.stateNode)&&_.__reactInternalMemoizedMergedChildContext||Ks,yl=xn.current,Tt(xn,_),Tt(Fr,Fr.current),!0}function fp(_,E,P){var k=_.stateNode;if(!k)throw Error(s(169));P?(_=cp(_,E,yl),k.__reactInternalMemoizedMergedChildContext=_,Jt(Fr),Jt(xn),Tt(xn,_)):Jt(Fr),Tt(Fr,P)}var ws=Math.clz32?Math.clz32:Xse,Px=Math.log,qse=Math.LN2;function Xse(_){return _>>>=0,_===0?32:31-(Px(_)/qse|0)|0}var Rx=64,Ox=4194304;function wv(_){switch(_&-_){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return _&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return _}}function kx(_,E){var P=_.pendingLanes;if(P===0)return 0;var k=0,H=_.suspendedLanes,K=_.pingedLanes,be=P&268435455;if(be!==0){var Be=be&~H;Be!==0?k=wv(Be):(K&=be,K!==0&&(k=wv(K)))}else be=P&~H,be!==0?k=wv(be):K!==0&&(k=wv(K));if(k===0)return 0;if(E!==0&&E!==k&&!(E&H)&&(H=k&-k,K=E&-E,H>=K||H===16&&(K&4194240)!==0))return E;if(k&4&&(k|=P&16),E=_.entangledLanes,E!==0)for(_=_.entanglements,E&=k;0<E;)P=31-ws(E),H=1<<P,k|=_[P],E&=~H;return k}function Yse(_,E){switch(_){case 1:case 2:case 4:return E+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return E+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kse(_,E){for(var P=_.suspendedLanes,k=_.pingedLanes,H=_.expirationTimes,K=_.pendingLanes;0<K;){var be=31-ws(K),Be=1<<be,Qe=H[be];Qe===-1?(!(Be&P)||Be&k)&&(H[be]=Yse(Be,E)):Qe<=E&&(_.expiredLanes|=Be),K&=~Be}}function NC(_){return _=_.pendingLanes&-1073741825,_!==0?_:_&1073741824?1073741824:0}function PC(_){for(var E=[],P=0;31>P;P++)E.push(_);return E}function Sv(_,E,P){_.pendingLanes|=E,E!==536870912&&(_.suspendedLanes=0,_.pingedLanes=0),_=_.eventTimes,E=31-ws(E),_[E]=P}function Zse(_,E){var P=_.pendingLanes&~E;_.pendingLanes=E,_.suspendedLanes=0,_.pingedLanes=0,_.expiredLanes&=E,_.mutableReadLanes&=E,_.entangledLanes&=E,E=_.entanglements;var k=_.eventTimes;for(_=_.expirationTimes;0<P;){var H=31-ws(P),K=1<<H;E[H]=0,k[H]=-1,_[H]=-1,P&=~K}}function RC(_,E){var P=_.entangledLanes|=E;for(_=_.entanglements;P;){var k=31-ws(P),H=1<<k;H&E|_[k]&E&&(_[k]|=E),P&=~H}}var On=0;function AF(_){return _&=-_,1<_?4<_?_&268435455?16:536870912:4:1}var OC=i.unstable_scheduleCallback,TF=i.unstable_cancelCallback,Jse=i.unstable_shouldYield,Qse=i.unstable_requestPaint,Mi=i.unstable_now,kC=i.unstable_ImmediatePriority,eae=i.unstable_UserBlockingPriority,IC=i.unstable_NormalPriority,tae=i.unstable_IdlePriority,Ix=null,bl=null;function nae(_){if(bl&&typeof bl.onCommitFiberRoot=="function")try{bl.onCommitFiberRoot(Ix,_,void 0,(_.current.flags&128)===128)}catch{}}function rae(_,E){return _===E&&(_!==0||1/_===1/E)||_!==_&&E!==E}var wl=typeof Object.is=="function"?Object.is:rae,vu=null,Lx=!1,LC=!1;function DF(_){vu===null?vu=[_]:vu.push(_)}function iae(_){Lx=!0,DF(_)}function Sl(){if(!LC&&vu!==null){LC=!0;var _=0,E=On;try{var P=vu;for(On=1;_<P.length;_++){var k=P[_];do k=k(!0);while(k!==null)}vu=null,Lx=!1}catch(H){throw vu!==null&&(vu=vu.slice(_+1)),OC(kC,Sl),H}finally{On=E,LC=!1}}return null}var oae=a.ReactCurrentBatchConfig;function Fx(_,E){if(wl(_,E))return!0;if(typeof _!="object"||_===null||typeof E!="object"||E===null)return!1;var P=Object.keys(_),k=Object.keys(E);if(P.length!==k.length)return!1;for(k=0;k<P.length;k++){var H=P[k];if(!Wn.call(E,H)||!wl(_[H],E[H]))return!1}return!0}function sae(_){switch(_.tag){case 5:return Et(_.type);case 16:return Et("Lazy");case 13:return Et("Suspense");case 19:return Et("SuspenseList");case 0:case 2:case 15:return _=Ot(_.type,!1),_;case 11:return _=Ot(_.type.render,!1),_;case 1:return _=Ot(_.type,!0),_;default:return""}}function Ba(_,E){if(_&&_.defaultProps){E=o({},E),_=_.defaultProps;for(var P in _)E[P]===void 0&&(E[P]=_[P]);return E}return E}var Bx=_i(null),zx=null,dp=null,FC=null;function BC(){FC=dp=zx=null}function NF(_,E,P){De?(Tt(Bx,E._currentValue),E._currentValue=P):(Tt(Bx,E._currentValue2),E._currentValue2=P)}function zC(_){var E=Bx.current;Jt(Bx),De?_._currentValue=E:_._currentValue2=E}function UC(_,E,P){for(;_!==null;){var k=_.alternate;if((_.childLanes&E)!==E?(_.childLanes|=E,k!==null&&(k.childLanes|=E)):k!==null&&(k.childLanes&E)!==E&&(k.childLanes|=E),_===P)break;_=_.return}}function hp(_,E){zx=_,FC=dp=null,_=_.dependencies,_!==null&&_.firstContext!==null&&(_.lanes&E&&(Es=!0),_.firstContext=null)}function Js(_){var E=De?_._currentValue:_._currentValue2;if(FC!==_)if(_={context:_,memoizedValue:E,next:null},dp===null){if(zx===null)throw Error(s(308));dp=_,zx.dependencies={lanes:0,firstContext:_}}else dp=dp.next=_;return E}var _l=null,Ec=!1;function VC(_){_.updateQueue={baseState:_.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function PF(_,E){_=_.updateQueue,E.updateQueue===_&&(E.updateQueue={baseState:_.baseState,firstBaseUpdate:_.firstBaseUpdate,lastBaseUpdate:_.lastBaseUpdate,shared:_.shared,effects:_.effects})}function yu(_,E){return{eventTime:_,lane:E,tag:0,payload:null,callback:null,next:null}}function Mc(_,E){var P=_.updateQueue;P!==null&&(P=P.shared,ni!==null&&_.mode&1&&!(bn&2)?(_=P.interleaved,_===null?(E.next=E,_l===null?_l=[P]:_l.push(P)):(E.next=_.next,_.next=E),P.interleaved=E):(_=P.pending,_===null?E.next=E:(E.next=_.next,_.next=E),P.pending=E))}function Ux(_,E,P){if(E=E.updateQueue,E!==null&&(E=E.shared,(P&4194240)!==0)){var k=E.lanes;k&=_.pendingLanes,P|=k,E.lanes=P,RC(_,P)}}function RF(_,E){var P=_.updateQueue,k=_.alternate;if(k!==null&&(k=k.updateQueue,P===k)){var H=null,K=null;if(P=P.firstBaseUpdate,P!==null){do{var be={eventTime:P.eventTime,lane:P.lane,tag:P.tag,payload:P.payload,callback:P.callback,next:null};K===null?H=K=be:K=K.next=be,P=P.next}while(P!==null);K===null?H=K=E:K=K.next=E}else H=K=E;P={baseState:k.baseState,firstBaseUpdate:H,lastBaseUpdate:K,shared:k.shared,effects:k.effects},_.updateQueue=P;return}_=P.lastBaseUpdate,_===null?P.firstBaseUpdate=E:_.next=E,P.lastBaseUpdate=E}function Vx(_,E,P,k){var H=_.updateQueue;Ec=!1;var K=H.firstBaseUpdate,be=H.lastBaseUpdate,Be=H.shared.pending;if(Be!==null){H.shared.pending=null;var Qe=Be,ct=Qe.next;Qe.next=null,be===null?K=ct:be.next=ct,be=Qe;var Dt=_.alternate;Dt!==null&&(Dt=Dt.updateQueue,Be=Dt.lastBaseUpdate,Be!==be&&(Be===null?Dt.firstBaseUpdate=ct:Be.next=ct,Dt.lastBaseUpdate=Qe))}if(K!==null){var an=H.baseState;be=0,Dt=ct=Qe=null,Be=K;do{var jt=Be.lane,rr=Be.eventTime;if((k&jt)===jt){Dt!==null&&(Dt=Dt.next={eventTime:rr,lane:0,tag:Be.tag,payload:Be.payload,callback:Be.callback,next:null});e:{var Ft=_,ro=Be;switch(jt=E,rr=P,ro.tag){case 1:if(Ft=ro.payload,typeof Ft=="function"){an=Ft.call(rr,an,jt);break e}an=Ft;break e;case 3:Ft.flags=Ft.flags&-65537|128;case 0:if(Ft=ro.payload,jt=typeof Ft=="function"?Ft.call(rr,an,jt):Ft,jt==null)break e;an=o({},an,jt);break e;case 2:Ec=!0}}Be.callback!==null&&Be.lane!==0&&(_.flags|=64,jt=H.effects,jt===null?H.effects=[Be]:jt.push(Be))}else rr={eventTime:rr,lane:jt,tag:Be.tag,payload:Be.payload,callback:Be.callback,next:null},Dt===null?(ct=Dt=rr,Qe=an):Dt=Dt.next=rr,be|=jt;if(Be=Be.next,Be===null){if(Be=H.shared.pending,Be===null)break;jt=Be,Be=jt.next,jt.next=null,H.lastBaseUpdate=jt,H.shared.pending=null}}while(!0);if(Dt===null&&(Qe=an),H.baseState=Qe,H.firstBaseUpdate=ct,H.lastBaseUpdate=Dt,E=H.shared.interleaved,E!==null){H=E;do be|=H.lane,H=H.next;while(H!==E)}else K===null&&(H.shared.lanes=0);Sp|=be,_.lanes=be,_.memoizedState=an}}function OF(_,E,P){if(_=E.effects,E.effects=null,_!==null)for(E=0;E<_.length;E++){var k=_[E],H=k.callback;if(H!==null){if(k.callback=null,k=P,typeof H!="function")throw Error(s(191,H));H.call(k)}}}var kF=new r.Component().refs;function $C(_,E,P,k){E=_.memoizedState,P=P(k,E),P=P==null?E:o({},E,P),_.memoizedState=P,_.lanes===0&&(_.updateQueue.baseState=P)}var $x={isMounted:function(_){return(_=_._reactInternals)?T(_)===_:!1},enqueueSetState:function(_,E,P){_=_._reactInternals;var k=To(),H=Tc(_),K=yu(k,H);K.payload=E,P!=null&&(K.callback=P),Mc(_,K),E=ra(_,H,k),E!==null&&Ux(E,_,H)},enqueueReplaceState:function(_,E,P){_=_._reactInternals;var k=To(),H=Tc(_),K=yu(k,H);K.tag=1,K.payload=E,P!=null&&(K.callback=P),Mc(_,K),E=ra(_,H,k),E!==null&&Ux(E,_,H)},enqueueForceUpdate:function(_,E){_=_._reactInternals;var P=To(),k=Tc(_),H=yu(P,k);H.tag=2,E!=null&&(H.callback=E),Mc(_,H),E=ra(_,k,P),E!==null&&Ux(E,_,k)}};function IF(_,E,P,k,H,K,be){return _=_.stateNode,typeof _.shouldComponentUpdate=="function"?_.shouldComponentUpdate(k,K,be):E.prototype&&E.prototype.isPureReactComponent?!Fx(P,k)||!Fx(H,K):!0}function LF(_,E,P){var k=!1,H=Ks,K=E.contextType;return typeof K=="object"&&K!==null?K=Js(K):(H=Ei(E)?yl:xn.current,k=E.contextTypes,K=(k=k!=null)?Zs(_,H):Ks),E=new E(P,K),_.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=$x,_.stateNode=E,E._reactInternals=_,k&&(_=_.stateNode,_.__reactInternalMemoizedUnmaskedChildContext=H,_.__reactInternalMemoizedMaskedChildContext=K),E}function FF(_,E,P,k){_=E.state,typeof E.componentWillReceiveProps=="function"&&E.componentWillReceiveProps(P,k),typeof E.UNSAFE_componentWillReceiveProps=="function"&&E.UNSAFE_componentWillReceiveProps(P,k),E.state!==_&&$x.enqueueReplaceState(E,E.state,null)}function HC(_,E,P,k){var H=_.stateNode;H.props=P,H.state=_.memoizedState,H.refs=kF,VC(_);var K=E.contextType;typeof K=="object"&&K!==null?H.context=Js(K):(K=Ei(E)?yl:xn.current,H.context=Zs(_,K)),H.state=_.memoizedState,K=E.getDerivedStateFromProps,typeof K=="function"&&($C(_,E,K,P),H.state=_.memoizedState),typeof E.getDerivedStateFromProps=="function"||typeof H.getSnapshotBeforeUpdate=="function"||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(E=H.state,typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount(),E!==H.state&&$x.enqueueReplaceState(H,H.state,null),Vx(_,P,H,k),H.state=_.memoizedState),typeof H.componentDidMount=="function"&&(_.flags|=4194308)}var pp=[],mp=0,Hx=null,Wx=0,Qs=[],ea=0,pd=null,xu=1,bu="";function md(_,E){pp[mp++]=Wx,pp[mp++]=Hx,Hx=_,Wx=E}function BF(_,E,P){Qs[ea++]=xu,Qs[ea++]=bu,Qs[ea++]=pd,pd=_;var k=xu;_=bu;var H=32-ws(k)-1;k&=~(1<<H),P+=1;var K=32-ws(E)+H;if(30<K){var be=H-H%5;K=(k&(1<<be)-1).toString(32),k>>=be,H-=be,xu=1<<32-ws(E)+H|P<<H|k,bu=K+_}else xu=1<<K|P<<H|k,bu=_}function WC(_){_.return!==null&&(md(_,1),BF(_,1,0))}function jC(_){for(;_===Hx;)Hx=pp[--mp],pp[mp]=null,Wx=pp[--mp],pp[mp]=null;for(;_===pd;)pd=Qs[--ea],Qs[ea]=null,bu=Qs[--ea],Qs[ea]=null,xu=Qs[--ea],Qs[ea]=null}var Ss=null,_s=null,wr=!1,_v=!1,za=null;function zF(_,E){var P=ia(5,null,null,0);P.elementType="DELETED",P.stateNode=E,P.return=_,E=_.deletions,E===null?(_.deletions=[P],_.flags|=16):E.push(P)}function UF(_,E){switch(_.tag){case 5:return E=Xe(E,_.type,_.pendingProps),E!==null?(_.stateNode=E,Ss=_,_s=jr(E),!0):!1;case 6:return E=rt(E,_.pendingProps),E!==null?(_.stateNode=E,Ss=_,_s=null,!0):!1;case 13:if(E=ht(E),E!==null){var P=pd!==null?{id:xu,overflow:bu}:null;return _.memoizedState={dehydrated:E,treeContext:P,retryLane:1073741824},P=ia(18,null,null,0),P.stateNode=E,P.return=_,_.child=P,Ss=_,_s=null,!0}return!1;default:return!1}}function GC(_){return(_.mode&1)!==0&&(_.flags&128)===0}function qC(_){if(wr){var E=_s;if(E){var P=E;if(!UF(_,E)){if(GC(_))throw Error(s(418));E=Ht(P);var k=Ss;E&&UF(_,E)?zF(k,P):(_.flags=_.flags&-4097|2,wr=!1,Ss=_)}}else{if(GC(_))throw Error(s(418));_.flags=_.flags&-4097|2,wr=!1,Ss=_}}}function VF(_){for(_=_.return;_!==null&&_.tag!==5&&_.tag!==3&&_.tag!==13;)_=_.return;Ss=_}function Ev(_){if(!Re||_!==Ss)return!1;if(!wr)return VF(_),wr=!0,!1;if(_.tag!==3&&(_.tag!==5||xt(_.type)&&!fe(_.type,_.memoizedProps))){var E=_s;if(E){if(GC(_)){for(_=_s;_;)_=Ht(_);throw Error(s(418))}for(;E;)zF(_,E),E=Ht(E)}}if(VF(_),_.tag===13){if(!Re)throw Error(s(316));if(_=_.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(s(317));_s=pe(_)}else _s=Ss?Ht(_.stateNode):null;return!0}function gp(){Re&&(_s=Ss=null,_v=wr=!1)}function XC(_){za===null?za=[_]:za.push(_)}function Mv(_,E,P){if(_=P.ref,_!==null&&typeof _!="function"&&typeof _!="object"){if(P._owner){if(P=P._owner,P){if(P.tag!==1)throw Error(s(309));var k=P.stateNode}if(!k)throw Error(s(147,_));var H=k,K=""+_;return E!==null&&E.ref!==null&&typeof E.ref=="function"&&E.ref._stringRef===K?E.ref:(E=function(be){var Be=H.refs;Be===kF&&(Be=H.refs={}),be===null?delete Be[K]:Be[K]=be},E._stringRef=K,E)}if(typeof _!="string")throw Error(s(284));if(!P._owner)throw Error(s(290,_))}return _}function jx(_,E){throw _=Object.prototype.toString.call(E),Error(s(31,_==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":_))}function $F(_){var E=_._init;return E(_._payload)}function HF(_){function E(je,ze){if(_){var Ke=je.deletions;Ke===null?(je.deletions=[ze],je.flags|=16):Ke.push(ze)}}function P(je,ze){if(!_)return null;for(;ze!==null;)E(je,ze),ze=ze.sibling;return null}function k(je,ze){for(je=new Map;ze!==null;)ze.key!==null?je.set(ze.key,ze):je.set(ze.index,ze),ze=ze.sibling;return je}function H(je,ze){return je=Nc(je,ze),je.index=0,je.sibling=null,je}function K(je,ze,Ke){return je.index=Ke,_?(Ke=je.alternate,Ke!==null?(Ke=Ke.index,Ke<ze?(je.flags|=2,ze):Ke):(je.flags|=2,ze)):(je.flags|=1048576,ze)}function be(je){return _&&je.alternate===null&&(je.flags|=2),je}function Be(je,ze,Ke,wt){return ze===null||ze.tag!==6?(ze=PA(Ke,je.mode,wt),ze.return=je,ze):(ze=H(ze,Ke),ze.return=je,ze)}function Qe(je,ze,Ke,wt){var Lt=Ke.type;return Lt===c?Dt(je,ze,Ke.props.children,wt,Ke.key):ze!==null&&(ze.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===b&&$F(Lt)===ze.type)?(wt=H(ze,Ke.props),wt.ref=Mv(je,ze,Ke),wt.return=je,wt):(wt=Sb(Ke.type,Ke.key,Ke.props,null,je.mode,wt),wt.ref=Mv(je,ze,Ke),wt.return=je,wt)}function ct(je,ze,Ke,wt){return ze===null||ze.tag!==4||ze.stateNode.containerInfo!==Ke.containerInfo||ze.stateNode.implementation!==Ke.implementation?(ze=RA(Ke,je.mode,wt),ze.return=je,ze):(ze=H(ze,Ke.children||[]),ze.return=je,ze)}function Dt(je,ze,Ke,wt,Lt){return ze===null||ze.tag!==7?(ze=Sd(Ke,je.mode,wt,Lt),ze.return=je,ze):(ze=H(ze,Ke),ze.return=je,ze)}function an(je,ze,Ke){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return ze=PA(""+ze,je.mode,Ke),ze.return=je,ze;if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case l:return Ke=Sb(ze.type,ze.key,ze.props,null,je.mode,Ke),Ke.ref=Mv(je,null,ze),Ke.return=je,Ke;case u:return ze=RA(ze,je.mode,Ke),ze.return=je,ze;case b:var wt=ze._init;return an(je,wt(ze._payload),Ke)}if(U(ze)||x(ze))return ze=Sd(ze,je.mode,Ke,null),ze.return=je,ze;jx(je,ze)}return null}function jt(je,ze,Ke,wt){var Lt=ze!==null?ze.key:null;if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return Lt!==null?null:Be(je,ze,""+Ke,wt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case l:return Ke.key===Lt?Qe(je,ze,Ke,wt):null;case u:return Ke.key===Lt?ct(je,ze,Ke,wt):null;case b:return Lt=Ke._init,jt(je,ze,Lt(Ke._payload),wt)}if(U(Ke)||x(Ke))return Lt!==null?null:Dt(je,ze,Ke,wt,null);jx(je,Ke)}return null}function rr(je,ze,Ke,wt,Lt){if(typeof wt=="string"&&wt!==""||typeof wt=="number")return je=je.get(Ke)||null,Be(ze,je,""+wt,Lt);if(typeof wt=="object"&&wt!==null){switch(wt.$$typeof){case l:return je=je.get(wt.key===null?Ke:wt.key)||null,Qe(ze,je,wt,Lt);case u:return je=je.get(wt.key===null?Ke:wt.key)||null,ct(ze,je,wt,Lt);case b:var mn=wt._init;return rr(je,ze,Ke,mn(wt._payload),Lt)}if(U(wt)||x(wt))return je=je.get(Ke)||null,Dt(ze,je,wt,Lt,null);jx(ze,wt)}return null}function Ft(je,ze,Ke,wt){for(var Lt=null,mn=null,ln=ze,kn=ze=0,Ai=null;ln!==null&&kn<Ke.length;kn++){ln.index>kn?(Ai=ln,ln=null):Ai=ln.sibling;var In=jt(je,ln,Ke[kn],wt);if(In===null){ln===null&&(ln=Ai);break}_&&ln&&In.alternate===null&&E(je,ln),ze=K(In,ze,kn),mn===null?Lt=In:mn.sibling=In,mn=In,ln=Ai}if(kn===Ke.length)return P(je,ln),wr&&md(je,kn),Lt;if(ln===null){for(;kn<Ke.length;kn++)ln=an(je,Ke[kn],wt),ln!==null&&(ze=K(ln,ze,kn),mn===null?Lt=ln:mn.sibling=ln,mn=ln);return wr&&md(je,kn),Lt}for(ln=k(je,ln);kn<Ke.length;kn++)Ai=rr(ln,je,kn,Ke[kn],wt),Ai!==null&&(_&&Ai.alternate!==null&&ln.delete(Ai.key===null?kn:Ai.key),ze=K(Ai,ze,kn),mn===null?Lt=Ai:mn.sibling=Ai,mn=Ai);return _&&ln.forEach(function(Pc){return E(je,Pc)}),wr&&md(je,kn),Lt}function ro(je,ze,Ke,wt){var Lt=x(Ke);if(typeof Lt!="function")throw Error(s(150));if(Ke=Lt.call(Ke),Ke==null)throw Error(s(151));for(var mn=Lt=null,ln=ze,kn=ze=0,Ai=null,In=Ke.next();ln!==null&&!In.done;kn++,In=Ke.next()){ln.index>kn?(Ai=ln,ln=null):Ai=ln.sibling;var Pc=jt(je,ln,In.value,wt);if(Pc===null){ln===null&&(ln=Ai);break}_&&ln&&Pc.alternate===null&&E(je,ln),ze=K(Pc,ze,kn),mn===null?Lt=Pc:mn.sibling=Pc,mn=Pc,ln=Ai}if(In.done)return P(je,ln),wr&&md(je,kn),Lt;if(ln===null){for(;!In.done;kn++,In=Ke.next())In=an(je,In.value,wt),In!==null&&(ze=K(In,ze,kn),mn===null?Lt=In:mn.sibling=In,mn=In);return wr&&md(je,kn),Lt}for(ln=k(je,ln);!In.done;kn++,In=Ke.next())In=rr(ln,je,kn,In.value,wt),In!==null&&(_&&In.alternate!==null&&ln.delete(In.key===null?kn:In.key),ze=K(In,ze,kn),mn===null?Lt=In:mn.sibling=In,mn=In);return _&&ln.forEach(function(Lae){return E(je,Lae)}),wr&&md(je,kn),Lt}function oa(je,ze,Ke,wt){if(typeof Ke=="object"&&Ke!==null&&Ke.type===c&&Ke.key===null&&(Ke=Ke.props.children),typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case l:e:{for(var Lt=Ke.key,mn=ze;mn!==null;){if(mn.key===Lt){if(Lt=Ke.type,Lt===c){if(mn.tag===7){P(je,mn.sibling),ze=H(mn,Ke.props.children),ze.return=je,je=ze;break e}}else if(mn.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===b&&$F(Lt)===mn.type){P(je,mn.sibling),ze=H(mn,Ke.props),ze.ref=Mv(je,mn,Ke),ze.return=je,je=ze;break e}P(je,mn);break}else E(je,mn);mn=mn.sibling}Ke.type===c?(ze=Sd(Ke.props.children,je.mode,wt,Ke.key),ze.return=je,je=ze):(wt=Sb(Ke.type,Ke.key,Ke.props,null,je.mode,wt),wt.ref=Mv(je,ze,Ke),wt.return=je,je=wt)}return be(je);case u:e:{for(mn=Ke.key;ze!==null;){if(ze.key===mn)if(ze.tag===4&&ze.stateNode.containerInfo===Ke.containerInfo&&ze.stateNode.implementation===Ke.implementation){P(je,ze.sibling),ze=H(ze,Ke.children||[]),ze.return=je,je=ze;break e}else{P(je,ze);break}else E(je,ze);ze=ze.sibling}ze=RA(Ke,je.mode,wt),ze.return=je,je=ze}return be(je);case b:return mn=Ke._init,oa(je,ze,mn(Ke._payload),wt)}if(U(Ke))return Ft(je,ze,Ke,wt);if(x(Ke))return ro(je,ze,Ke,wt);jx(je,Ke)}return typeof Ke=="string"&&Ke!==""||typeof Ke=="number"?(Ke=""+Ke,ze!==null&&ze.tag===6?(P(je,ze.sibling),ze=H(ze,Ke),ze.return=je,je=ze):(P(je,ze),ze=PA(Ke,je.mode,wt),ze.return=je,je=ze),be(je)):P(je,ze)}return oa}var vp=HF(!0),WF=HF(!1),Cv={},ta=_i(Cv),Av=_i(Cv),yp=_i(Cv);function El(_){if(_===Cv)throw Error(s(174));return _}function YC(_,E){Tt(yp,E),Tt(Av,_),Tt(ta,Cv),_=I(E),Jt(ta),Tt(ta,_)}function xp(){Jt(ta),Jt(Av),Jt(yp)}function jF(_){var E=El(yp.current),P=El(ta.current);E=V(P,_.type,E),P!==E&&(Tt(Av,_),Tt(ta,E))}function KC(_){Av.current===_&&(Jt(ta),Jt(Av))}var Mr=_i(0);function Gx(_){for(var E=_;E!==null;){if(E.tag===13){var P=E.memoizedState;if(P!==null&&(P=P.dehydrated,P===null||Pt(P)||it(P)))return E}else if(E.tag===19&&E.memoizedProps.revealOrder!==void 0){if(E.flags&128)return E}else if(E.child!==null){E.child.return=E,E=E.child;continue}if(E===_)break;for(;E.sibling===null;){if(E.return===null||E.return===_)return null;E=E.return}E.sibling.return=E.return,E=E.sibling}return null}var ZC=[];function JC(){for(var _=0;_<ZC.length;_++){var E=ZC[_];De?E._workInProgressVersionPrimary=null:E._workInProgressVersionSecondary=null}ZC.length=0}var qx=a.ReactCurrentDispatcher,na=a.ReactCurrentBatchConfig,bp=0,Br=null,eo=null,Ci=null,Xx=!1,Tv=!1,Dv=0,aae=0;function to(){throw Error(s(321))}function QC(_,E){if(E===null)return!1;for(var P=0;P<E.length&&P<_.length;P++)if(!wl(_[P],E[P]))return!1;return!0}function eA(_,E,P,k,H,K){if(bp=K,Br=E,E.memoizedState=null,E.updateQueue=null,E.lanes=0,qx.current=_===null||_.memoizedState===null?fae:dae,_=P(k,H),Tv){K=0;do{if(Tv=!1,Dv=0,25<=K)throw Error(s(301));K+=1,Ci=eo=null,E.updateQueue=null,qx.current=hae,_=P(k,H)}while(Tv)}if(qx.current=Qx,E=eo!==null&&eo.next!==null,bp=0,Ci=eo=Br=null,Xx=!1,E)throw Error(s(300));return _}function tA(){var _=Dv!==0;return Dv=0,_}function wu(){var _={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ci===null?Br.memoizedState=Ci=_:Ci=Ci.next=_,Ci}function Ml(){if(eo===null){var _=Br.alternate;_=_!==null?_.memoizedState:null}else _=eo.next;var E=Ci===null?Br.memoizedState:Ci.next;if(E!==null)Ci=E,eo=_;else{if(_===null)throw Error(s(310));eo=_,_={memoizedState:eo.memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},Ci===null?Br.memoizedState=Ci=_:Ci=Ci.next=_}return Ci}function gd(_,E){return typeof E=="function"?E(_):E}function Yx(_){var E=Ml(),P=E.queue;if(P===null)throw Error(s(311));P.lastRenderedReducer=_;var k=eo,H=k.baseQueue,K=P.pending;if(K!==null){if(H!==null){var be=H.next;H.next=K.next,K.next=be}k.baseQueue=H=K,P.pending=null}if(H!==null){K=H.next,k=k.baseState;var Be=be=null,Qe=null,ct=K;do{var Dt=ct.lane;if((bp&Dt)===Dt)Qe!==null&&(Qe=Qe.next={lane:0,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null}),k=ct.hasEagerState?ct.eagerState:_(k,ct.action);else{var an={lane:Dt,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null};Qe===null?(Be=Qe=an,be=k):Qe=Qe.next=an,Br.lanes|=Dt,Sp|=Dt}ct=ct.next}while(ct!==null&&ct!==K);Qe===null?be=k:Qe.next=Be,wl(k,E.memoizedState)||(Es=!0),E.memoizedState=k,E.baseState=be,E.baseQueue=Qe,P.lastRenderedState=k}if(_=P.interleaved,_!==null){H=_;do K=H.lane,Br.lanes|=K,Sp|=K,H=H.next;while(H!==_)}else H===null&&(P.lanes=0);return[E.memoizedState,P.dispatch]}function Kx(_){var E=Ml(),P=E.queue;if(P===null)throw Error(s(311));P.lastRenderedReducer=_;var k=P.dispatch,H=P.pending,K=E.memoizedState;if(H!==null){P.pending=null;var be=H=H.next;do K=_(K,be.action),be=be.next;while(be!==H);wl(K,E.memoizedState)||(Es=!0),E.memoizedState=K,E.baseQueue===null&&(E.baseState=K),P.lastRenderedState=K}return[K,k]}function GF(){}function qF(_,E){var P=Br,k=Ml(),H=E(),K=!wl(k.memoizedState,H);if(K&&(k.memoizedState=H,Es=!0),k=k.queue,Pv(KF.bind(null,P,k,_),[_]),k.getSnapshot!==E||K||Ci!==null&&Ci.memoizedState.tag&1){if(P.flags|=2048,Nv(9,YF.bind(null,P,k,H,E),void 0,null),ni===null)throw Error(s(349));bp&30||XF(P,E,H)}return H}function XF(_,E,P){_.flags|=16384,_={getSnapshot:E,value:P},E=Br.updateQueue,E===null?(E={lastEffect:null,stores:null},Br.updateQueue=E,E.stores=[_]):(P=E.stores,P===null?E.stores=[_]:P.push(_))}function YF(_,E,P,k){E.value=P,E.getSnapshot=k,ZF(E)&&ra(_,1,-1)}function KF(_,E,P){return P(function(){ZF(E)&&ra(_,1,-1)})}function ZF(_){var E=_.getSnapshot;_=_.value;try{var P=E();return!wl(_,P)}catch{return!0}}function nA(_){var E=wu();return typeof _=="function"&&(_=_()),E.memoizedState=E.baseState=_,_={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gd,lastRenderedState:_},E.queue=_,_=_.dispatch=cae.bind(null,Br,_),[E.memoizedState,_]}function Nv(_,E,P,k){return _={tag:_,create:E,destroy:P,deps:k,next:null},E=Br.updateQueue,E===null?(E={lastEffect:null,stores:null},Br.updateQueue=E,E.lastEffect=_.next=_):(P=E.lastEffect,P===null?E.lastEffect=_.next=_:(k=P.next,P.next=_,_.next=k,E.lastEffect=_)),_}function JF(){return Ml().memoizedState}function Zx(_,E,P,k){var H=wu();Br.flags|=_,H.memoizedState=Nv(1|E,P,void 0,k===void 0?null:k)}function Jx(_,E,P,k){var H=Ml();k=k===void 0?null:k;var K=void 0;if(eo!==null){var be=eo.memoizedState;if(K=be.destroy,k!==null&&QC(k,be.deps)){H.memoizedState=Nv(E,P,K,k);return}}Br.flags|=_,H.memoizedState=Nv(1|E,P,K,k)}function rA(_,E){return Zx(8390656,8,_,E)}function Pv(_,E){return Jx(2048,8,_,E)}function QF(_,E){return Jx(4,2,_,E)}function e4(_,E){return Jx(4,4,_,E)}function t4(_,E){if(typeof E=="function")return _=_(),E(_),function(){E(null)};if(E!=null)return _=_(),E.current=_,function(){E.current=null}}function n4(_,E,P){return P=P!=null?P.concat([_]):null,Jx(4,4,t4.bind(null,E,_),P)}function iA(){}function r4(_,E){var P=Ml();E=E===void 0?null:E;var k=P.memoizedState;return k!==null&&E!==null&&QC(E,k[1])?k[0]:(P.memoizedState=[_,E],_)}function i4(_,E){var P=Ml();E=E===void 0?null:E;var k=P.memoizedState;return k!==null&&E!==null&&QC(E,k[1])?k[0]:(_=_(),P.memoizedState=[_,E],_)}function lae(_,E){var P=On;On=P!==0&&4>P?P:4,_(!0);var k=na.transition;na.transition={};try{_(!1),E()}finally{On=P,na.transition=k}}function o4(){return Ml().memoizedState}function uae(_,E,P){var k=Tc(_);P={lane:k,action:P,hasEagerState:!1,eagerState:null,next:null},s4(_)?a4(E,P):(l4(_,E,P),P=To(),_=ra(_,k,P),_!==null&&u4(_,E,k))}function cae(_,E,P){var k=Tc(_),H={lane:k,action:P,hasEagerState:!1,eagerState:null,next:null};if(s4(_))a4(E,H);else{l4(_,E,H);var K=_.alternate;if(_.lanes===0&&(K===null||K.lanes===0)&&(K=E.lastRenderedReducer,K!==null))try{var be=E.lastRenderedState,Be=K(be,P);if(H.hasEagerState=!0,H.eagerState=Be,wl(Be,be))return}catch{}finally{}P=To(),_=ra(_,k,P),_!==null&&u4(_,E,k)}}function s4(_){var E=_.alternate;return _===Br||E!==null&&E===Br}function a4(_,E){Tv=Xx=!0;var P=_.pending;P===null?E.next=E:(E.next=P.next,P.next=E),_.pending=E}function l4(_,E,P){ni!==null&&_.mode&1&&!(bn&2)?(_=E.interleaved,_===null?(P.next=P,_l===null?_l=[E]:_l.push(E)):(P.next=_.next,_.next=P),E.interleaved=P):(_=E.pending,_===null?P.next=P:(P.next=_.next,_.next=P),E.pending=P)}function u4(_,E,P){if(P&4194240){var k=E.lanes;k&=_.pendingLanes,P|=k,E.lanes=P,RC(_,P)}}var Qx={readContext:Js,useCallback:to,useContext:to,useEffect:to,useImperativeHandle:to,useInsertionEffect:to,useLayoutEffect:to,useMemo:to,useReducer:to,useRef:to,useState:to,useDebugValue:to,useDeferredValue:to,useTransition:to,useMutableSource:to,useSyncExternalStore:to,useId:to,unstable_isNewReconciler:!1},fae={readContext:Js,useCallback:function(_,E){return wu().memoizedState=[_,E===void 0?null:E],_},useContext:Js,useEffect:rA,useImperativeHandle:function(_,E,P){return P=P!=null?P.concat([_]):null,Zx(4194308,4,t4.bind(null,E,_),P)},useLayoutEffect:function(_,E){return Zx(4194308,4,_,E)},useInsertionEffect:function(_,E){return Zx(4,2,_,E)},useMemo:function(_,E){var P=wu();return E=E===void 0?null:E,_=_(),P.memoizedState=[_,E],_},useReducer:function(_,E,P){var k=wu();return E=P!==void 0?P(E):E,k.memoizedState=k.baseState=E,_={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_,lastRenderedState:E},k.queue=_,_=_.dispatch=uae.bind(null,Br,_),[k.memoizedState,_]},useRef:function(_){var E=wu();return _={current:_},E.memoizedState=_},useState:nA,useDebugValue:iA,useDeferredValue:function(_){var E=nA(_),P=E[0],k=E[1];return rA(function(){var H=na.transition;na.transition={};try{k(_)}finally{na.transition=H}},[_]),P},useTransition:function(){var _=nA(!1),E=_[0];return _=lae.bind(null,_[1]),wu().memoizedState=_,[E,_]},useMutableSource:function(){},useSyncExternalStore:function(_,E,P){var k=Br,H=wu();if(wr){if(P===void 0)throw Error(s(407));P=P()}else{if(P=E(),ni===null)throw Error(s(349));bp&30||XF(k,E,P)}H.memoizedState=P;var K={value:P,getSnapshot:E};return H.queue=K,rA(KF.bind(null,k,K,_),[_]),k.flags|=2048,Nv(9,YF.bind(null,k,K,P,E),void 0,null),P},useId:function(){var _=wu(),E=ni.identifierPrefix;if(wr){var P=bu,k=xu;P=(k&~(1<<32-ws(k)-1)).toString(32)+P,E=":"+E+"R"+P,P=Dv++,0<P&&(E+="H"+P.toString(32)),E+=":"}else P=aae++,E=":"+E+"r"+P.toString(32)+":";return _.memoizedState=E},unstable_isNewReconciler:!1},dae={readContext:Js,useCallback:r4,useContext:Js,useEffect:Pv,useImperativeHandle:n4,useInsertionEffect:QF,useLayoutEffect:e4,useMemo:i4,useReducer:Yx,useRef:JF,useState:function(){return Yx(gd)},useDebugValue:iA,useDeferredValue:function(_){var E=Yx(gd),P=E[0],k=E[1];return Pv(function(){var H=na.transition;na.transition={};try{k(_)}finally{na.transition=H}},[_]),P},useTransition:function(){var _=Yx(gd)[0],E=Ml().memoizedState;return[_,E]},useMutableSource:GF,useSyncExternalStore:qF,useId:o4,unstable_isNewReconciler:!1},hae={readContext:Js,useCallback:r4,useContext:Js,useEffect:Pv,useImperativeHandle:n4,useInsertionEffect:QF,useLayoutEffect:e4,useMemo:i4,useReducer:Kx,useRef:JF,useState:function(){return Kx(gd)},useDebugValue:iA,useDeferredValue:function(_){var E=Kx(gd),P=E[0],k=E[1];return Pv(function(){var H=na.transition;na.transition={};try{k(_)}finally{na.transition=H}},[_]),P},useTransition:function(){var _=Kx(gd)[0],E=Ml().memoizedState;return[_,E]},useMutableSource:GF,useSyncExternalStore:qF,useId:o4,unstable_isNewReconciler:!1};function oA(_,E){try{var P="",k=E;do P+=sae(k),k=k.return;while(k);var H=P}catch(K){H=`
Error generating stack: `+K.message+`
`+K.stack}return{value:_,source:E,stack:H}}function sA(_,E){try{console.error(E.value)}catch(P){setTimeout(function(){throw P})}}var pae=typeof WeakMap=="function"?WeakMap:Map;function c4(_,E,P){P=yu(-1,P),P.tag=3,P.payload={element:null};var k=E.value;return P.callback=function(){mb||(mb=!0,EA=k),sA(_,E)},P}function f4(_,E,P){P=yu(-1,P),P.tag=3;var k=_.type.getDerivedStateFromError;if(typeof k=="function"){var H=E.value;P.payload=function(){return k(H)},P.callback=function(){sA(_,E)}}var K=_.stateNode;return K!==null&&typeof K.componentDidCatch=="function"&&(P.callback=function(){sA(_,E),typeof k!="function"&&(Cc===null?Cc=new Set([this]):Cc.add(this));var be=E.stack;this.componentDidCatch(E.value,{componentStack:be!==null?be:""})}),P}function d4(_,E,P){var k=_.pingCache;if(k===null){k=_.pingCache=new pae;var H=new Set;k.set(E,H)}else H=k.get(E),H===void 0&&(H=new Set,k.set(E,H));H.has(P)||(H.add(P),_=Tae.bind(null,_,E,P),E.then(_,_))}function h4(_){do{var E;if((E=_.tag===13)&&(E=_.memoizedState,E=E!==null?E.dehydrated!==null:!0),E)return _;_=_.return}while(_!==null);return null}function p4(_,E,P,k,H){return _.mode&1?(_.flags|=65536,_.lanes=H,_):(_===E?_.flags|=65536:(_.flags|=128,P.flags|=131072,P.flags&=-52805,P.tag===1&&(P.alternate===null?P.tag=17:(E=yu(-1,1),E.tag=2,Mc(P,E))),P.lanes|=1),_)}function Cl(_){_.flags|=4}function m4(_,E){if(_!==null&&_.child===E.child)return!0;if(E.flags&16)return!1;for(_=E.child;_!==null;){if(_.flags&12854||_.subtreeFlags&12854)return!1;_=_.sibling}return!0}var Rv,Ov,eb,tb;if(Ae)Rv=function(_,E){for(var P=E.child;P!==null;){if(P.tag===5||P.tag===6)te(_,P.stateNode);else if(P.tag!==4&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===E)break;for(;P.sibling===null;){if(P.return===null||P.return===E)return;P=P.return}P.sibling.return=P.return,P=P.sibling}},Ov=function(){},eb=function(_,E,P,k,H){if(_=_.memoizedProps,_!==k){var K=E.stateNode,be=El(ta.current);P=re(K,P,_,k,H,be),(E.updateQueue=P)&&Cl(E)}},tb=function(_,E,P,k){P!==k&&Cl(E)};else if(ie){Rv=function(_,E,P,k){for(var H=E.child;H!==null;){if(H.tag===5){var K=H.stateNode;P&&k&&(K=Oe(K,H.type,H.memoizedProps,H)),te(_,K)}else if(H.tag===6)K=H.stateNode,P&&k&&(K=Ve(K,H.memoizedProps,H)),te(_,K);else if(H.tag!==4){if(H.tag===22&&H.memoizedState!==null)K=H.child,K!==null&&(K.return=H),Rv(_,H,!0,!0);else if(H.child!==null){H.child.return=H,H=H.child;continue}}if(H===E)break;for(;H.sibling===null;){if(H.return===null||H.return===E)return;H=H.return}H.sibling.return=H.return,H=H.sibling}};var g4=function(_,E,P,k){for(var H=E.child;H!==null;){if(H.tag===5){var K=H.stateNode;P&&k&&(K=Oe(K,H.type,H.memoizedProps,H)),le(_,K)}else if(H.tag===6)K=H.stateNode,P&&k&&(K=Ve(K,H.memoizedProps,H)),le(_,K);else if(H.tag!==4){if(H.tag===22&&H.memoizedState!==null)K=H.child,K!==null&&(K.return=H),g4(_,H,!0,!0);else if(H.child!==null){H.child.return=H,H=H.child;continue}}if(H===E)break;for(;H.sibling===null;){if(H.return===null||H.return===E)return;H=H.return}H.sibling.return=H.return,H=H.sibling}};Ov=function(_,E){var P=E.stateNode;if(!m4(_,E)){_=P.containerInfo;var k=ne(_);g4(k,E,!1,!1),P.pendingChildren=k,Cl(E),ve(_,k)}},eb=function(_,E,P,k,H){var K=_.stateNode,be=_.memoizedProps;if((_=m4(_,E))&&be===k)E.stateNode=K;else{var Be=E.stateNode,Qe=El(ta.current),ct=null;be!==k&&(ct=re(Be,P,be,k,H,Qe)),_&&ct===null?E.stateNode=K:(K=W(K,ct,P,be,k,E,_,Be),Y(K,P,k,H,Qe)&&Cl(E),E.stateNode=K,_?Cl(E):Rv(K,E,!1,!1))}},tb=function(_,E,P,k){P!==k?(_=El(yp.current),P=El(ta.current),E.stateNode=ue(k,_,P,E),Cl(E)):E.stateNode=_.stateNode}}else Ov=function(){},eb=function(){},tb=function(){};function kv(_,E){if(!wr)switch(_.tailMode){case"hidden":E=_.tail;for(var P=null;E!==null;)E.alternate!==null&&(P=E),E=E.sibling;P===null?_.tail=null:P.sibling=null;break;case"collapsed":P=_.tail;for(var k=null;P!==null;)P.alternate!==null&&(k=P),P=P.sibling;k===null?E||_.tail===null?_.tail=null:_.tail.sibling=null:k.sibling=null}}function no(_){var E=_.alternate!==null&&_.alternate.child===_.child,P=0,k=0;if(E)for(var H=_.child;H!==null;)P|=H.lanes|H.childLanes,k|=H.subtreeFlags&14680064,k|=H.flags&14680064,H.return=_,H=H.sibling;else for(H=_.child;H!==null;)P|=H.lanes|H.childLanes,k|=H.subtreeFlags,k|=H.flags,H.return=_,H=H.sibling;return _.subtreeFlags|=k,_.childLanes=P,E}function mae(_,E,P){var k=E.pendingProps;switch(jC(E),E.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return no(E),null;case 1:return Ei(E.type)&&Gr(),no(E),null;case 3:return k=E.stateNode,xp(),Jt(Fr),Jt(xn),JC(),k.pendingContext&&(k.context=k.pendingContext,k.pendingContext=null),(_===null||_.child===null)&&(Ev(E)?Cl(E):_===null||_.memoizedState.isDehydrated&&!(E.flags&256)||(E.flags|=1024,za!==null&&(AA(za),za=null))),Ov(_,E),no(E),null;case 5:KC(E),P=El(yp.current);var H=E.type;if(_!==null&&E.stateNode!=null)eb(_,E,H,k,P),_.ref!==E.ref&&(E.flags|=512,E.flags|=2097152);else{if(!k){if(E.stateNode===null)throw Error(s(166));return no(E),null}if(_=El(ta.current),Ev(E)){if(!Re)throw Error(s(175));_=vl(E.stateNode,E.type,E.memoizedProps,P,_,E,!_v),E.updateQueue=_,_!==null&&Cl(E)}else{var K=Z(H,k,P,_,E);Rv(K,E,!1,!1),E.stateNode=K,Y(K,H,k,P,_)&&Cl(E)}E.ref!==null&&(E.flags|=512,E.flags|=2097152)}return no(E),null;case 6:if(_&&E.stateNode!=null)tb(_,E,_.memoizedProps,k);else{if(typeof k!="string"&&E.stateNode===null)throw Error(s(166));if(_=El(yp.current),P=El(ta.current),Ev(E)){if(!Re)throw Error(s(176));if(_=E.stateNode,k=E.memoizedProps,(P=_c(_,k,E,!_v))&&(H=Ss,H!==null))switch(K=(H.mode&1)!==0,H.tag){case 3:_t(H.stateNode.containerInfo,_,k,K);break;case 5:It(H.type,H.memoizedProps,H.stateNode,_,k,K)}P&&Cl(E)}else E.stateNode=ue(k,_,P,E)}return no(E),null;case 13:if(Jt(Mr),k=E.memoizedState,wr&&_s!==null&&E.mode&1&&!(E.flags&128)){for(_=_s;_;)_=Ht(_);return gp(),E.flags|=98560,E}if(k!==null&&k.dehydrated!==null){if(k=Ev(E),_===null){if(!k)throw Error(s(318));if(!Re)throw Error(s(344));if(_=E.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(s(317));Fi(_,E)}else gp(),!(E.flags&128)&&(E.memoizedState=null),E.flags|=4;return no(E),null}return za!==null&&(AA(za),za=null),E.flags&128?(E.lanes=P,E):(k=k!==null,P=!1,_===null?Ev(E):P=_.memoizedState!==null,k&&!P&&(E.child.flags|=8192,E.mode&1&&(_===null||Mr.current&1?di===0&&(di=3):DA())),E.updateQueue!==null&&(E.flags|=4),no(E),null);case 4:return xp(),Ov(_,E),_===null&&ee(E.stateNode.containerInfo),no(E),null;case 10:return zC(E.type._context),no(E),null;case 17:return Ei(E.type)&&Gr(),no(E),null;case 19:if(Jt(Mr),H=E.memoizedState,H===null)return no(E),null;if(k=(E.flags&128)!==0,K=H.rendering,K===null)if(k)kv(H,!1);else{if(di!==0||_!==null&&_.flags&128)for(_=E.child;_!==null;){if(K=Gx(_),K!==null){for(E.flags|=128,kv(H,!1),_=K.updateQueue,_!==null&&(E.updateQueue=_,E.flags|=4),E.subtreeFlags=0,_=P,k=E.child;k!==null;)P=k,H=_,P.flags&=14680066,K=P.alternate,K===null?(P.childLanes=0,P.lanes=H,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=K.childLanes,P.lanes=K.lanes,P.child=K.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=K.memoizedProps,P.memoizedState=K.memoizedState,P.updateQueue=K.updateQueue,P.type=K.type,H=K.dependencies,P.dependencies=H===null?null:{lanes:H.lanes,firstContext:H.firstContext}),k=k.sibling;return Tt(Mr,Mr.current&1|2),E.child}_=_.sibling}H.tail!==null&&Mi()>_A&&(E.flags|=128,k=!0,kv(H,!1),E.lanes=4194304)}else{if(!k)if(_=Gx(K),_!==null){if(E.flags|=128,k=!0,_=_.updateQueue,_!==null&&(E.updateQueue=_,E.flags|=4),kv(H,!0),H.tail===null&&H.tailMode==="hidden"&&!K.alternate&&!wr)return no(E),null}else 2*Mi()-H.renderingStartTime>_A&&P!==1073741824&&(E.flags|=128,k=!0,kv(H,!1),E.lanes=4194304);H.isBackwards?(K.sibling=E.child,E.child=K):(_=H.last,_!==null?_.sibling=K:E.child=K,H.last=K)}return H.tail!==null?(E=H.tail,H.rendering=E,H.tail=E.sibling,H.renderingStartTime=Mi(),E.sibling=null,_=Mr.current,Tt(Mr,k?_&1|2:_&1),E):(no(E),null);case 22:case 23:return TA(),k=E.memoizedState!==null,_!==null&&_.memoizedState!==null!==k&&(E.flags|=8192),k&&E.mode&1?Ms&1073741824&&(no(E),Ae&&E.subtreeFlags&6&&(E.flags|=8192)):no(E),null;case 24:return null;case 25:return null}throw Error(s(156,E.tag))}var gae=a.ReactCurrentOwner,Es=!1;function Ao(_,E,P,k){E.child=_===null?WF(E,null,P,k):vp(E,_.child,P,k)}function v4(_,E,P,k,H){P=P.render;var K=E.ref;return hp(E,H),k=eA(_,E,P,k,K,H),P=tA(),_!==null&&!Es?(E.updateQueue=_.updateQueue,E.flags&=-2053,_.lanes&=~H,Su(_,E,H)):(wr&&P&&WC(E),E.flags|=1,Ao(_,E,k,H),E.child)}function y4(_,E,P,k,H){if(_===null){var K=P.type;return typeof K=="function"&&!NA(K)&&K.defaultProps===void 0&&P.compare===null&&P.defaultProps===void 0?(E.tag=15,E.type=K,x4(_,E,K,k,H)):(_=Sb(P.type,null,k,E,E.mode,H),_.ref=E.ref,_.return=E,E.child=_)}if(K=_.child,!(_.lanes&H)){var be=K.memoizedProps;if(P=P.compare,P=P!==null?P:Fx,P(be,k)&&_.ref===E.ref)return Su(_,E,H)}return E.flags|=1,_=Nc(K,k),_.ref=E.ref,_.return=E,E.child=_}function x4(_,E,P,k,H){if(_!==null&&Fx(_.memoizedProps,k)&&_.ref===E.ref)if(Es=!1,(_.lanes&H)!==0)_.flags&131072&&(Es=!0);else return E.lanes=_.lanes,Su(_,E,H);return aA(_,E,P,k,H)}function b4(_,E,P){var k=E.pendingProps,H=k.children,K=_!==null?_.memoizedState:null;if(k.mode==="hidden")if(!(E.mode&1))E.memoizedState={baseLanes:0,cachePool:null},Tt(wp,Ms),Ms|=P;else if(P&1073741824)E.memoizedState={baseLanes:0,cachePool:null},k=K!==null?K.baseLanes:P,Tt(wp,Ms),Ms|=k;else return _=K!==null?K.baseLanes|P:P,E.lanes=E.childLanes=1073741824,E.memoizedState={baseLanes:_,cachePool:null},E.updateQueue=null,Tt(wp,Ms),Ms|=_,null;else K!==null?(k=K.baseLanes|P,E.memoizedState=null):k=P,Tt(wp,Ms),Ms|=k;return Ao(_,E,H,P),E.child}function w4(_,E){var P=E.ref;(_===null&&P!==null||_!==null&&_.ref!==P)&&(E.flags|=512,E.flags|=2097152)}function aA(_,E,P,k,H){var K=Ei(P)?yl:xn.current;return K=Zs(E,K),hp(E,H),P=eA(_,E,P,k,K,H),k=tA(),_!==null&&!Es?(E.updateQueue=_.updateQueue,E.flags&=-2053,_.lanes&=~H,Su(_,E,H)):(wr&&k&&WC(E),E.flags|=1,Ao(_,E,P,H),E.child)}function S4(_,E,P,k,H){if(Ei(P)){var K=!0;Bi(E)}else K=!1;if(hp(E,H),E.stateNode===null)_!==null&&(_.alternate=null,E.alternate=null,E.flags|=2),LF(E,P,k),HC(E,P,k,H),k=!0;else if(_===null){var be=E.stateNode,Be=E.memoizedProps;be.props=Be;var Qe=be.context,ct=P.contextType;typeof ct=="object"&&ct!==null?ct=Js(ct):(ct=Ei(P)?yl:xn.current,ct=Zs(E,ct));var Dt=P.getDerivedStateFromProps,an=typeof Dt=="function"||typeof be.getSnapshotBeforeUpdate=="function";an||typeof be.UNSAFE_componentWillReceiveProps!="function"&&typeof be.componentWillReceiveProps!="function"||(Be!==k||Qe!==ct)&&FF(E,be,k,ct),Ec=!1;var jt=E.memoizedState;be.state=jt,Vx(E,k,be,H),Qe=E.memoizedState,Be!==k||jt!==Qe||Fr.current||Ec?(typeof Dt=="function"&&($C(E,P,Dt,k),Qe=E.memoizedState),(Be=Ec||IF(E,P,Be,k,jt,Qe,ct))?(an||typeof be.UNSAFE_componentWillMount!="function"&&typeof be.componentWillMount!="function"||(typeof be.componentWillMount=="function"&&be.componentWillMount(),typeof be.UNSAFE_componentWillMount=="function"&&be.UNSAFE_componentWillMount()),typeof be.componentDidMount=="function"&&(E.flags|=4194308)):(typeof be.componentDidMount=="function"&&(E.flags|=4194308),E.memoizedProps=k,E.memoizedState=Qe),be.props=k,be.state=Qe,be.context=ct,k=Be):(typeof be.componentDidMount=="function"&&(E.flags|=4194308),k=!1)}else{be=E.stateNode,PF(_,E),Be=E.memoizedProps,ct=E.type===E.elementType?Be:Ba(E.type,Be),be.props=ct,an=E.pendingProps,jt=be.context,Qe=P.contextType,typeof Qe=="object"&&Qe!==null?Qe=Js(Qe):(Qe=Ei(P)?yl:xn.current,Qe=Zs(E,Qe));var rr=P.getDerivedStateFromProps;(Dt=typeof rr=="function"||typeof be.getSnapshotBeforeUpdate=="function")||typeof be.UNSAFE_componentWillReceiveProps!="function"&&typeof be.componentWillReceiveProps!="function"||(Be!==an||jt!==Qe)&&FF(E,be,k,Qe),Ec=!1,jt=E.memoizedState,be.state=jt,Vx(E,k,be,H);var Ft=E.memoizedState;Be!==an||jt!==Ft||Fr.current||Ec?(typeof rr=="function"&&($C(E,P,rr,k),Ft=E.memoizedState),(ct=Ec||IF(E,P,ct,k,jt,Ft,Qe)||!1)?(Dt||typeof be.UNSAFE_componentWillUpdate!="function"&&typeof be.componentWillUpdate!="function"||(typeof be.componentWillUpdate=="function"&&be.componentWillUpdate(k,Ft,Qe),typeof be.UNSAFE_componentWillUpdate=="function"&&be.UNSAFE_componentWillUpdate(k,Ft,Qe)),typeof be.componentDidUpdate=="function"&&(E.flags|=4),typeof be.getSnapshotBeforeUpdate=="function"&&(E.flags|=1024)):(typeof be.componentDidUpdate!="function"||Be===_.memoizedProps&&jt===_.memoizedState||(E.flags|=4),typeof be.getSnapshotBeforeUpdate!="function"||Be===_.memoizedProps&&jt===_.memoizedState||(E.flags|=1024),E.memoizedProps=k,E.memoizedState=Ft),be.props=k,be.state=Ft,be.context=Qe,k=ct):(typeof be.componentDidUpdate!="function"||Be===_.memoizedProps&&jt===_.memoizedState||(E.flags|=4),typeof be.getSnapshotBeforeUpdate!="function"||Be===_.memoizedProps&&jt===_.memoizedState||(E.flags|=1024),k=!1)}return lA(_,E,P,k,K,H)}function lA(_,E,P,k,H,K){w4(_,E);var be=(E.flags&128)!==0;if(!k&&!be)return H&&fp(E,P,!1),Su(_,E,K);k=E.stateNode,gae.current=E;var Be=be&&typeof P.getDerivedStateFromError!="function"?null:k.render();return E.flags|=1,_!==null&&be?(E.child=vp(E,_.child,null,K),E.child=vp(E,null,Be,K)):Ao(_,E,Be,K),E.memoizedState=k.state,H&&fp(E,P,!0),E.child}function _4(_){var E=_.stateNode;E.pendingContext?xl(_,E.pendingContext,E.pendingContext!==E.context):E.context&&xl(_,E.context,!1),YC(_,E.containerInfo)}function E4(_,E,P,k,H){return gp(),XC(H),E.flags|=256,Ao(_,E,P,k),E.child}var nb={dehydrated:null,treeContext:null,retryLane:0};function rb(_){return{baseLanes:_,cachePool:null}}function M4(_,E,P){var k=E.pendingProps,H=Mr.current,K=!1,be=(E.flags&128)!==0,Be;if((Be=be)||(Be=_!==null&&_.memoizedState===null?!1:(H&2)!==0),Be?(K=!0,E.flags&=-129):(_===null||_.memoizedState!==null)&&(H|=1),Tt(Mr,H&1),_===null)return qC(E),_=E.memoizedState,_!==null&&(_=_.dehydrated,_!==null)?(E.mode&1?it(_)?E.lanes=8:E.lanes=1073741824:E.lanes=1,null):(H=k.children,_=k.fallback,K?(k=E.mode,K=E.child,H={mode:"hidden",children:H},!(k&1)&&K!==null?(K.childLanes=0,K.pendingProps=H):K=_b(H,k,0,null),_=Sd(_,k,P,null),K.return=E,_.return=E,K.sibling=_,E.child=K,E.child.memoizedState=rb(P),E.memoizedState=nb,_):uA(E,H));if(H=_.memoizedState,H!==null){if(Be=H.dehydrated,Be!==null){if(be)return E.flags&256?(E.flags&=-257,ib(_,E,P,Error(s(422)))):E.memoizedState!==null?(E.child=_.child,E.flags|=128,null):(K=k.fallback,H=E.mode,k=_b({mode:"visible",children:k.children},H,0,null),K=Sd(K,H,P,null),K.flags|=2,k.return=E,K.return=E,k.sibling=K,E.child=k,E.mode&1&&vp(E,_.child,null,P),E.child.memoizedState=rb(P),E.memoizedState=nb,K);if(!(E.mode&1))E=ib(_,E,P,null);else if(it(Be))E=ib(_,E,P,Error(s(419)));else if(k=(P&_.childLanes)!==0,Es||k){if(k=ni,k!==null){switch(P&-P){case 4:K=2;break;case 16:K=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:K=32;break;case 536870912:K=268435456;break;default:K=0}k=K&(k.suspendedLanes|P)?0:K,k!==0&&k!==H.retryLane&&(H.retryLane=k,ra(_,k,-1))}DA(),E=ib(_,E,P,Error(s(421)))}else Pt(Be)?(E.flags|=128,E.child=_.child,E=Dae.bind(null,_),Ct(Be,E),E=null):(P=H.treeContext,Re&&(_s=ar(Be),Ss=E,wr=!0,za=null,_v=!1,P!==null&&(Qs[ea++]=xu,Qs[ea++]=bu,Qs[ea++]=pd,xu=P.id,bu=P.overflow,pd=E)),E=uA(E,E.pendingProps.children),E.flags|=4096);return E}return K?(k=A4(_,E,k.children,k.fallback,P),K=E.child,H=_.child.memoizedState,K.memoizedState=H===null?rb(P):{baseLanes:H.baseLanes|P,cachePool:null},K.childLanes=_.childLanes&~P,E.memoizedState=nb,k):(P=C4(_,E,k.children,P),E.memoizedState=null,P)}return K?(k=A4(_,E,k.children,k.fallback,P),K=E.child,H=_.child.memoizedState,K.memoizedState=H===null?rb(P):{baseLanes:H.baseLanes|P,cachePool:null},K.childLanes=_.childLanes&~P,E.memoizedState=nb,k):(P=C4(_,E,k.children,P),E.memoizedState=null,P)}function uA(_,E){return E=_b({mode:"visible",children:E},_.mode,0,null),E.return=_,_.child=E}function C4(_,E,P,k){var H=_.child;return _=H.sibling,P=Nc(H,{mode:"visible",children:P}),!(E.mode&1)&&(P.lanes=k),P.return=E,P.sibling=null,_!==null&&(k=E.deletions,k===null?(E.deletions=[_],E.flags|=16):k.push(_)),E.child=P}function A4(_,E,P,k,H){var K=E.mode;_=_.child;var be=_.sibling,Be={mode:"hidden",children:P};return!(K&1)&&E.child!==_?(P=E.child,P.childLanes=0,P.pendingProps=Be,E.deletions=null):(P=Nc(_,Be),P.subtreeFlags=_.subtreeFlags&14680064),be!==null?k=Nc(be,k):(k=Sd(k,K,H,null),k.flags|=2),k.return=E,P.return=E,P.sibling=k,E.child=P,k}function ib(_,E,P,k){return k!==null&&XC(k),vp(E,_.child,null,P),_=uA(E,E.pendingProps.children),_.flags|=2,E.memoizedState=null,_}function T4(_,E,P){_.lanes|=E;var k=_.alternate;k!==null&&(k.lanes|=E),UC(_.return,E,P)}function cA(_,E,P,k,H){var K=_.memoizedState;K===null?_.memoizedState={isBackwards:E,rendering:null,renderingStartTime:0,last:k,tail:P,tailMode:H}:(K.isBackwards=E,K.rendering=null,K.renderingStartTime=0,K.last=k,K.tail=P,K.tailMode=H)}function D4(_,E,P){var k=E.pendingProps,H=k.revealOrder,K=k.tail;if(Ao(_,E,k.children,P),k=Mr.current,k&2)k=k&1|2,E.flags|=128;else{if(_!==null&&_.flags&128)e:for(_=E.child;_!==null;){if(_.tag===13)_.memoizedState!==null&&T4(_,P,E);else if(_.tag===19)T4(_,P,E);else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===E)break e;for(;_.sibling===null;){if(_.return===null||_.return===E)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}k&=1}if(Tt(Mr,k),!(E.mode&1))E.memoizedState=null;else switch(H){case"forwards":for(P=E.child,H=null;P!==null;)_=P.alternate,_!==null&&Gx(_)===null&&(H=P),P=P.sibling;P=H,P===null?(H=E.child,E.child=null):(H=P.sibling,P.sibling=null),cA(E,!1,H,P,K);break;case"backwards":for(P=null,H=E.child,E.child=null;H!==null;){if(_=H.alternate,_!==null&&Gx(_)===null){E.child=H;break}_=H.sibling,H.sibling=P,P=H,H=_}cA(E,!0,P,null,K);break;case"together":cA(E,!1,null,null,void 0);break;default:E.memoizedState=null}return E.child}function Su(_,E,P){if(_!==null&&(E.dependencies=_.dependencies),Sp|=E.lanes,!(P&E.childLanes))return null;if(_!==null&&E.child!==_.child)throw Error(s(153));if(E.child!==null){for(_=E.child,P=Nc(_,_.pendingProps),E.child=P,P.return=E;_.sibling!==null;)_=_.sibling,P=P.sibling=Nc(_,_.pendingProps),P.return=E;P.sibling=null}return E.child}function vae(_,E,P){switch(E.tag){case 3:_4(E),gp();break;case 5:jF(E);break;case 1:Ei(E.type)&&Bi(E);break;case 4:YC(E,E.stateNode.containerInfo);break;case 10:NF(E,E.type._context,E.memoizedProps.value);break;case 13:var k=E.memoizedState;if(k!==null)return k.dehydrated!==null?(Tt(Mr,Mr.current&1),E.flags|=128,null):P&E.child.childLanes?M4(_,E,P):(Tt(Mr,Mr.current&1),_=Su(_,E,P),_!==null?_.sibling:null);Tt(Mr,Mr.current&1);break;case 19:if(k=(P&E.childLanes)!==0,_.flags&128){if(k)return D4(_,E,P);E.flags|=128}var H=E.memoizedState;if(H!==null&&(H.rendering=null,H.tail=null,H.lastEffect=null),Tt(Mr,Mr.current),k)break;return null;case 22:case 23:return E.lanes=0,b4(_,E,P)}return Su(_,E,P)}function yae(_,E){switch(jC(E),E.tag){case 1:return Ei(E.type)&&Gr(),_=E.flags,_&65536?(E.flags=_&-65537|128,E):null;case 3:return xp(),Jt(Fr),Jt(xn),JC(),_=E.flags,_&65536&&!(_&128)?(E.flags=_&-65537|128,E):null;case 5:return KC(E),null;case 13:if(Jt(Mr),_=E.memoizedState,_!==null&&_.dehydrated!==null){if(E.alternate===null)throw Error(s(340));gp()}return _=E.flags,_&65536?(E.flags=_&-65537|128,E):null;case 19:return Jt(Mr),null;case 4:return xp(),null;case 10:return zC(E.type._context),null;case 22:case 23:return TA(),null;case 24:return null;default:return null}}var ob=!1,vd=!1,xae=typeof WeakSet=="function"?WeakSet:Set,yt=null;function sb(_,E){var P=_.ref;if(P!==null)if(typeof P=="function")try{P(null)}catch(k){Qo(_,E,k)}else P.current=null}function fA(_,E,P){try{P()}catch(k){Qo(_,E,k)}}var N4=!1;function bae(_,E){for(L(_.containerInfo),yt=E;yt!==null;)if(_=yt,E=_.child,(_.subtreeFlags&1028)!==0&&E!==null)E.return=_,yt=E;else for(;yt!==null;){_=yt;try{var P=_.alternate;if(_.flags&1024)switch(_.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var k=P.memoizedProps,H=P.memoizedState,K=_.stateNode,be=K.getSnapshotBeforeUpdate(_.elementType===_.type?k:Ba(_.type,k),H);K.__reactInternalSnapshotBeforeUpdate=be}break;case 3:Ae&&Ye(_.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(Be){Qo(_,_.return,Be)}if(E=_.sibling,E!==null){E.return=_.return,yt=E;break}yt=_.return}return P=N4,N4=!1,P}function yd(_,E,P){var k=E.updateQueue;if(k=k!==null?k.lastEffect:null,k!==null){var H=k=k.next;do{if((H.tag&_)===_){var K=H.destroy;H.destroy=void 0,K!==void 0&&fA(E,P,K)}H=H.next}while(H!==k)}}function Iv(_,E){if(E=E.updateQueue,E=E!==null?E.lastEffect:null,E!==null){var P=E=E.next;do{if((P.tag&_)===_){var k=P.create;P.destroy=k()}P=P.next}while(P!==E)}}function dA(_){var E=_.ref;if(E!==null){var P=_.stateNode;switch(_.tag){case 5:_=N(P);break;default:_=P}typeof E=="function"?E(_):E.current=_}}function P4(_,E,P){if(bl&&typeof bl.onCommitFiberUnmount=="function")try{bl.onCommitFiberUnmount(Ix,E)}catch{}switch(E.tag){case 0:case 11:case 14:case 15:if(_=E.updateQueue,_!==null&&(_=_.lastEffect,_!==null)){var k=_=_.next;do{var H=k,K=H.destroy;H=H.tag,K!==void 0&&(H&2||H&4)&&fA(E,P,K),k=k.next}while(k!==_)}break;case 1:if(sb(E,P),_=E.stateNode,typeof _.componentWillUnmount=="function")try{_.props=E.memoizedProps,_.state=E.memoizedState,_.componentWillUnmount()}catch(be){Qo(E,P,be)}break;case 5:sb(E,P);break;case 4:Ae?F4(_,E,P):ie&&ie&&(E=E.stateNode.containerInfo,P=ne(E),_e(E,P))}}function R4(_,E,P){for(var k=E;;)if(P4(_,k,P),k.child===null||Ae&&k.tag===4){if(k===E)break;for(;k.sibling===null;){if(k.return===null||k.return===E)return;k=k.return}k.sibling.return=k.return,k=k.sibling}else k.child.return=k,k=k.child}function O4(_){var E=_.alternate;E!==null&&(_.alternate=null,O4(E)),_.child=null,_.deletions=null,_.sibling=null,_.tag===5&&(E=_.stateNode,E!==null&&Me(E)),_.stateNode=null,_.return=null,_.dependencies=null,_.memoizedProps=null,_.memoizedState=null,_.pendingProps=null,_.stateNode=null,_.updateQueue=null}function k4(_){return _.tag===5||_.tag===3||_.tag===4}function I4(_){e:for(;;){for(;_.sibling===null;){if(_.return===null||k4(_.return))return null;_=_.return}for(_.sibling.return=_.return,_=_.sibling;_.tag!==5&&_.tag!==6&&_.tag!==18;){if(_.flags&2||_.child===null||_.tag===4)continue e;_.child.return=_,_=_.child}if(!(_.flags&2))return _.stateNode}}function L4(_){if(Ae){e:{for(var E=_.return;E!==null;){if(k4(E))break e;E=E.return}throw Error(s(160))}var P=E;switch(P.tag){case 5:E=P.stateNode,P.flags&32&&($(E),P.flags&=-33),P=I4(_),pA(_,P,E);break;case 3:case 4:E=P.stateNode.containerInfo,P=I4(_),hA(_,P,E);break;default:throw Error(s(161))}}}function hA(_,E,P){var k=_.tag;if(k===5||k===6)_=_.stateNode,E?at(P,_,E):He(P,_);else if(k!==4&&(_=_.child,_!==null))for(hA(_,E,P),_=_.sibling;_!==null;)hA(_,E,P),_=_.sibling}function pA(_,E,P){var k=_.tag;if(k===5||k===6)_=_.stateNode,E?lt(P,_,E):Fe(P,_);else if(k!==4&&(_=_.child,_!==null))for(pA(_,E,P),_=_.sibling;_!==null;)pA(_,E,P),_=_.sibling}function F4(_,E,P){for(var k=E,H=!1,K,be;;){if(!H){H=k.return;e:for(;;){if(H===null)throw Error(s(160));switch(K=H.stateNode,H.tag){case 5:be=!1;break e;case 3:K=K.containerInfo,be=!0;break e;case 4:K=K.containerInfo,be=!0;break e}H=H.return}H=!0}if(k.tag===5||k.tag===6)R4(_,k,P),be?Ee(K,k.stateNode):Je(K,k.stateNode);else if(k.tag===18)be?We(K,k.stateNode):$e(K,k.stateNode);else if(k.tag===4){if(k.child!==null){K=k.stateNode.containerInfo,be=!0,k.child.return=k,k=k.child;continue}}else if(P4(_,k,P),k.child!==null){k.child.return=k,k=k.child;continue}if(k===E)break;for(;k.sibling===null;){if(k.return===null||k.return===E)return;k=k.return,k.tag===4&&(H=!1)}k.sibling.return=k.return,k=k.sibling}}function mA(_,E){if(Ae){switch(E.tag){case 0:case 11:case 14:case 15:yd(3,E,E.return),Iv(3,E),yd(5,E,E.return);return;case 1:return;case 5:var P=E.stateNode;if(P!=null){var k=E.memoizedProps;_=_!==null?_.memoizedProps:k;var H=E.type,K=E.updateQueue;E.updateQueue=null,K!==null&&qe(P,K,H,_,k,E)}return;case 6:if(E.stateNode===null)throw Error(s(162));P=E.memoizedProps,Ie(E.stateNode,_!==null?_.memoizedProps:P,P);return;case 3:Re&&_!==null&&_.memoizedState.isDehydrated&&Le(E.stateNode.containerInfo);return;case 12:return;case 13:ab(E);return;case 19:ab(E);return;case 17:return}throw Error(s(163))}switch(E.tag){case 0:case 11:case 14:case 15:yd(3,E,E.return),Iv(3,E),yd(5,E,E.return);return;case 12:return;case 13:ab(E);return;case 19:ab(E);return;case 3:Re&&_!==null&&_.memoizedState.isDehydrated&&Le(E.stateNode.containerInfo);break;case 22:case 23:return}e:if(ie){switch(E.tag){case 1:case 5:case 6:break e;case 3:case 4:E=E.stateNode,_e(E.containerInfo,E.pendingChildren);break e}throw Error(s(163))}}function ab(_){var E=_.updateQueue;if(E!==null){_.updateQueue=null;var P=_.stateNode;P===null&&(P=_.stateNode=new xae),E.forEach(function(k){var H=Nae.bind(null,_,k);P.has(k)||(P.add(k),k.then(H,H))})}}function wae(_,E){for(yt=E;yt!==null;){E=yt;var P=E.deletions;if(P!==null)for(var k=0;k<P.length;k++){var H=P[k];try{var K=_;Ae?F4(K,H,E):R4(K,H,E);var be=H.alternate;be!==null&&(be.return=null),H.return=null}catch(Lt){Qo(H,E,Lt)}}if(P=E.child,E.subtreeFlags&12854&&P!==null)P.return=E,yt=P;else for(;yt!==null;){E=yt;try{var Be=E.flags;if(Be&32&&Ae&&$(E.stateNode),Be&512){var Qe=E.alternate;if(Qe!==null){var ct=Qe.ref;ct!==null&&(typeof ct=="function"?ct(null):ct.current=null)}}if(Be&8192)switch(E.tag){case 13:if(E.memoizedState!==null){var Dt=E.alternate;(Dt===null||Dt.memoizedState===null)&&(SA=Mi())}break;case 22:var an=E.memoizedState!==null,jt=E.alternate,rr=jt!==null&&jt.memoizedState!==null;if(P=E,Ae){e:if(k=P,H=an,K=null,Ae)for(var Ft=k;;){if(Ft.tag===5){if(K===null){K=Ft;var ro=Ft.stateNode;H?ce(ro):Ge(Ft.stateNode,Ft.memoizedProps)}}else if(Ft.tag===6){if(K===null){var oa=Ft.stateNode;H?Ne(oa):de(oa,Ft.memoizedProps)}}else if((Ft.tag!==22&&Ft.tag!==23||Ft.memoizedState===null||Ft===k)&&Ft.child!==null){Ft.child.return=Ft,Ft=Ft.child;continue}if(Ft===k)break;for(;Ft.sibling===null;){if(Ft.return===null||Ft.return===k)break e;K===Ft&&(K=null),Ft=Ft.return}K===Ft&&(K=null),Ft.sibling.return=Ft.return,Ft=Ft.sibling}}if(an&&!rr&&P.mode&1){yt=P;for(var je=P.child;je!==null;){for(P=yt=je;yt!==null;){k=yt;var ze=k.child;switch(k.tag){case 0:case 11:case 14:case 15:yd(4,k,k.return);break;case 1:sb(k,k.return);var Ke=k.stateNode;if(typeof Ke.componentWillUnmount=="function"){var wt=k.return;try{Ke.props=k.memoizedProps,Ke.state=k.memoizedState,Ke.componentWillUnmount()}catch(Lt){Qo(k,wt,Lt)}}break;case 5:sb(k,k.return);break;case 22:if(k.memoizedState!==null){U4(P);continue}}ze!==null?(ze.return=k,yt=ze):U4(P)}je=je.sibling}}}switch(Be&4102){case 2:L4(E),E.flags&=-3;break;case 6:L4(E),E.flags&=-3,mA(E.alternate,E);break;case 4096:E.flags&=-4097;break;case 4100:E.flags&=-4097,mA(E.alternate,E);break;case 4:mA(E.alternate,E)}}catch(Lt){Qo(E,E.return,Lt)}if(P=E.sibling,P!==null){P.return=E.return,yt=P;break}yt=E.return}}}function Sae(_,E,P){yt=_,B4(_)}function B4(_,E,P){for(var k=(_.mode&1)!==0;yt!==null;){var H=yt,K=H.child;if(H.tag===22&&k){var be=H.memoizedState!==null||ob;if(!be){var Be=H.alternate,Qe=Be!==null&&Be.memoizedState!==null||vd;Be=ob;var ct=vd;if(ob=be,(vd=Qe)&&!ct)for(yt=H;yt!==null;)be=yt,Qe=be.child,be.tag===22&&be.memoizedState!==null?V4(H):Qe!==null?(Qe.return=be,yt=Qe):V4(H);for(;K!==null;)yt=K,B4(K),K=K.sibling;yt=H,ob=Be,vd=ct}z4(_)}else H.subtreeFlags&8772&&K!==null?(K.return=H,yt=K):z4(_)}}function z4(_){for(;yt!==null;){var E=yt;if(E.flags&8772){var P=E.alternate;try{if(E.flags&8772)switch(E.tag){case 0:case 11:case 15:vd||Iv(5,E);break;case 1:var k=E.stateNode;if(E.flags&4&&!vd)if(P===null)k.componentDidMount();else{var H=E.elementType===E.type?P.memoizedProps:Ba(E.type,P.memoizedProps);k.componentDidUpdate(H,P.memoizedState,k.__reactInternalSnapshotBeforeUpdate)}var K=E.updateQueue;K!==null&&OF(E,K,k);break;case 3:var be=E.updateQueue;if(be!==null){if(P=null,E.child!==null)switch(E.child.tag){case 5:P=N(E.child.stateNode);break;case 1:P=E.child.stateNode}OF(E,be,P)}break;case 5:var Be=E.stateNode;P===null&&E.flags&4&&Ze(Be,E.type,E.memoizedProps,E);break;case 6:break;case 4:break;case 12:break;case 13:if(Re&&E.memoizedState===null){var Qe=E.alternate;if(Qe!==null){var ct=Qe.memoizedState;if(ct!==null){var Dt=ct.dehydrated;Dt!==null&&Ue(Dt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(s(163))}vd||E.flags&512&&dA(E)}catch(an){Qo(E,E.return,an)}}if(E===_){yt=null;break}if(P=E.sibling,P!==null){P.return=E.return,yt=P;break}yt=E.return}}function U4(_){for(;yt!==null;){var E=yt;if(E===_){yt=null;break}var P=E.sibling;if(P!==null){P.return=E.return,yt=P;break}yt=E.return}}function V4(_){for(;yt!==null;){var E=yt;try{switch(E.tag){case 0:case 11:case 15:var P=E.return;try{Iv(4,E)}catch(Qe){Qo(E,P,Qe)}break;case 1:var k=E.stateNode;if(typeof k.componentDidMount=="function"){var H=E.return;try{k.componentDidMount()}catch(Qe){Qo(E,H,Qe)}}var K=E.return;try{dA(E)}catch(Qe){Qo(E,K,Qe)}break;case 5:var be=E.return;try{dA(E)}catch(Qe){Qo(E,be,Qe)}}}catch(Qe){Qo(E,E.return,Qe)}if(E===_){yt=null;break}var Be=E.sibling;if(Be!==null){Be.return=E.return,yt=Be;break}yt=E.return}}var lb=0,ub=1,cb=2,fb=3,db=4;if(typeof Symbol=="function"&&Symbol.for){var Lv=Symbol.for;lb=Lv("selector.component"),ub=Lv("selector.has_pseudo_class"),cb=Lv("selector.role"),fb=Lv("selector.test_id"),db=Lv("selector.text")}function gA(_){var E=Pe(_);if(E!=null){if(typeof E.memoizedProps["data-testname"]!="string")throw Error(s(364));return E}if(_=he(_),_===null)throw Error(s(362));return _.stateNode.current}function vA(_,E){switch(E.$$typeof){case lb:if(_.type===E.value)return!0;break;case ub:e:{E=E.value,_=[_,0];for(var P=0;P<_.length;){var k=_[P++],H=_[P++],K=E[H];if(k.tag!==5||!J(k)){for(;K!=null&&vA(k,K);)H++,K=E[H];if(H===E.length){E=!0;break e}else for(k=k.child;k!==null;)_.push(k,H),k=k.sibling}}E=!1}return E;case cb:if(_.tag===5&&ye(_.stateNode,E.value))return!0;break;case db:if((_.tag===5||_.tag===6)&&(_=q(_),_!==null&&0<=_.indexOf(E.value)))return!0;break;case fb:if(_.tag===5&&(_=_.memoizedProps["data-testname"],typeof _=="string"&&_.toLowerCase()===E.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function yA(_){switch(_.$$typeof){case lb:return"<"+(M(_.value)||"Unknown")+">";case ub:return":has("+(yA(_)||"")+")";case cb:return'[role="'+_.value+'"]';case db:return'"'+_.value+'"';case fb:return'[data-testname="'+_.value+'"]';default:throw Error(s(365))}}function $4(_,E){var P=[];_=[_,0];for(var k=0;k<_.length;){var H=_[k++],K=_[k++],be=E[K];if(H.tag!==5||!J(H)){for(;be!=null&&vA(H,be);)K++,be=E[K];if(K===E.length)P.push(H);else for(H=H.child;H!==null;)_.push(H,K),H=H.sibling}}return P}function xA(_,E){if(!j)throw Error(s(363));_=gA(_),_=$4(_,E),E=[],_=Array.from(_);for(var P=0;P<_.length;){var k=_[P++];if(k.tag===5)J(k)||E.push(k.stateNode);else for(k=k.child;k!==null;)_.push(k),k=k.sibling}return E}var _ae=Math.ceil,hb=a.ReactCurrentDispatcher,bA=a.ReactCurrentOwner,qr=a.ReactCurrentBatchConfig,bn=0,ni=null,ri=null,zi=0,Ms=0,wp=_i(0),di=0,Fv=null,Sp=0,pb=0,wA=0,Bv=null,Zo=null,SA=0,_A=1/0;function _p(){_A=Mi()+500}var mb=!1,EA=null,Cc=null,gb=!1,Ac=null,vb=0,zv=0,MA=null,yb=-1,xb=0;function To(){return bn&6?Mi():yb!==-1?yb:yb=Mi()}function Tc(_){return _.mode&1?bn&2&&zi!==0?zi&-zi:oae.transition!==null?(xb===0&&(_=Rx,Rx<<=1,!(Rx&4194240)&&(Rx=64),xb=_),xb):(_=On,_!==0?_:oe()):1}function ra(_,E,P){if(50<zv)throw zv=0,MA=null,Error(s(185));var k=bb(_,E);return k===null?null:(Sv(k,E,P),(!(bn&2)||k!==ni)&&(k===ni&&(!(bn&2)&&(pb|=E),di===4&&Dc(k,zi)),Jo(k,P),E===1&&bn===0&&!(_.mode&1)&&(_p(),Lx&&Sl())),k)}function bb(_,E){_.lanes|=E;var P=_.alternate;for(P!==null&&(P.lanes|=E),P=_,_=_.return;_!==null;)_.childLanes|=E,P=_.alternate,P!==null&&(P.childLanes|=E),P=_,_=_.return;return P.tag===3?P.stateNode:null}function Jo(_,E){var P=_.callbackNode;Kse(_,E);var k=kx(_,_===ni?zi:0);if(k===0)P!==null&&TF(P),_.callbackNode=null,_.callbackPriority=0;else if(E=k&-k,_.callbackPriority!==E){if(P!=null&&TF(P),E===1)_.tag===0?iae(W4.bind(null,_)):DF(W4.bind(null,_)),se?G(function(){bn===0&&Sl()}):OC(kC,Sl),P=null;else{switch(AF(k)){case 1:P=kC;break;case 4:P=eae;break;case 16:P=IC;break;case 536870912:P=tae;break;default:P=IC}P=Q4(P,H4.bind(null,_))}_.callbackPriority=E,_.callbackNode=P}}function H4(_,E){if(yb=-1,xb=0,bn&6)throw Error(s(327));var P=_.callbackNode;if(wd()&&_.callbackNode!==P)return null;var k=kx(_,_===ni?zi:0);if(k===0)return null;if(k&30||k&_.expiredLanes||E)E=wb(_,k);else{E=k;var H=bn;bn|=2;var K=q4();(ni!==_||zi!==E)&&(_p(),xd(_,E));do try{Cae();break}catch(Be){G4(_,Be)}while(!0);BC(),hb.current=K,bn=H,ri!==null?E=0:(ni=null,zi=0,E=di)}if(E!==0){if(E===2&&(H=NC(_),H!==0&&(k=H,E=CA(_,H))),E===1)throw P=Fv,xd(_,0),Dc(_,k),Jo(_,Mi()),P;if(E===6)Dc(_,k);else{if(H=_.current.alternate,!(k&30)&&!Eae(H)&&(E=wb(_,k),E===2&&(K=NC(_),K!==0&&(k=K,E=CA(_,K))),E===1))throw P=Fv,xd(_,0),Dc(_,k),Jo(_,Mi()),P;switch(_.finishedWork=H,_.finishedLanes=k,E){case 0:case 1:throw Error(s(345));case 2:bd(_,Zo);break;case 3:if(Dc(_,k),(k&130023424)===k&&(E=SA+500-Mi(),10<E)){if(kx(_,0)!==0)break;if(H=_.suspendedLanes,(H&k)!==k){To(),_.pingedLanes|=_.suspendedLanes&H;break}_.timeoutHandle=ge(bd.bind(null,_,Zo),E);break}bd(_,Zo);break;case 4:if(Dc(_,k),(k&4194240)===k)break;for(E=_.eventTimes,H=-1;0<k;){var be=31-ws(k);K=1<<be,be=E[be],be>H&&(H=be),k&=~K}if(k=H,k=Mi()-k,k=(120>k?120:480>k?480:1080>k?1080:1920>k?1920:3e3>k?3e3:4320>k?4320:1960*_ae(k/1960))-k,10<k){_.timeoutHandle=ge(bd.bind(null,_,Zo),k);break}bd(_,Zo);break;case 5:bd(_,Zo);break;default:throw Error(s(329))}}}return Jo(_,Mi()),_.callbackNode===P?H4.bind(null,_):null}function CA(_,E){var P=Bv;return _.current.memoizedState.isDehydrated&&(xd(_,E).flags|=256),_=wb(_,E),_!==2&&(E=Zo,Zo=P,E!==null&&AA(E)),_}function AA(_){Zo===null?Zo=_:Zo.push.apply(Zo,_)}function Eae(_){for(var E=_;;){if(E.flags&16384){var P=E.updateQueue;if(P!==null&&(P=P.stores,P!==null))for(var k=0;k<P.length;k++){var H=P[k],K=H.getSnapshot;H=H.value;try{if(!wl(K(),H))return!1}catch{return!1}}}if(P=E.child,E.subtreeFlags&16384&&P!==null)P.return=E,E=P;else{if(E===_)break;for(;E.sibling===null;){if(E.return===null||E.return===_)return!0;E=E.return}E.sibling.return=E.return,E=E.sibling}}return!0}function Dc(_,E){for(E&=~wA,E&=~pb,_.suspendedLanes|=E,_.pingedLanes&=~E,_=_.expirationTimes;0<E;){var P=31-ws(E),k=1<<P;_[P]=-1,E&=~k}}function W4(_){if(bn&6)throw Error(s(327));wd();var E=kx(_,0);if(!(E&1))return Jo(_,Mi()),null;var P=wb(_,E);if(_.tag!==0&&P===2){var k=NC(_);k!==0&&(E=k,P=CA(_,k))}if(P===1)throw P=Fv,xd(_,0),Dc(_,E),Jo(_,Mi()),P;if(P===6)throw Error(s(345));return _.finishedWork=_.current.alternate,_.finishedLanes=E,bd(_,Zo),Jo(_,Mi()),null}function j4(_){Ac!==null&&Ac.tag===0&&!(bn&6)&&wd();var E=bn;bn|=1;var P=qr.transition,k=On;try{if(qr.transition=null,On=1,_)return _()}finally{On=k,qr.transition=P,bn=E,!(bn&6)&&Sl()}}function TA(){Ms=wp.current,Jt(wp)}function xd(_,E){_.finishedWork=null,_.finishedLanes=0;var P=_.timeoutHandle;if(P!==xe&&(_.timeoutHandle=xe,Se(P)),ri!==null)for(P=ri.return;P!==null;){var k=P;switch(jC(k),k.tag){case 1:k=k.type.childContextTypes,k!=null&&Gr();break;case 3:xp(),Jt(Fr),Jt(xn),JC();break;case 5:KC(k);break;case 4:xp();break;case 13:Jt(Mr);break;case 19:Jt(Mr);break;case 10:zC(k.type._context);break;case 22:case 23:TA()}P=P.return}if(ni=_,ri=_=Nc(_.current,null),zi=Ms=E,di=0,Fv=null,wA=pb=Sp=0,Zo=Bv=null,_l!==null){for(E=0;E<_l.length;E++)if(P=_l[E],k=P.interleaved,k!==null){P.interleaved=null;var H=k.next,K=P.pending;if(K!==null){var be=K.next;K.next=H,k.next=be}P.pending=k}_l=null}return _}function G4(_,E){do{var P=ri;try{if(BC(),qx.current=Qx,Xx){for(var k=Br.memoizedState;k!==null;){var H=k.queue;H!==null&&(H.pending=null),k=k.next}Xx=!1}if(bp=0,Ci=eo=Br=null,Tv=!1,Dv=0,bA.current=null,P===null||P.return===null){di=1,Fv=E,ri=null;break}e:{var K=_,be=P.return,Be=P,Qe=E;if(E=zi,Be.flags|=32768,Qe!==null&&typeof Qe=="object"&&typeof Qe.then=="function"){var ct=Qe,Dt=Be,an=Dt.tag;if(!(Dt.mode&1)&&(an===0||an===11||an===15)){var jt=Dt.alternate;jt?(Dt.updateQueue=jt.updateQueue,Dt.memoizedState=jt.memoizedState,Dt.lanes=jt.lanes):(Dt.updateQueue=null,Dt.memoizedState=null)}var rr=h4(be);if(rr!==null){rr.flags&=-257,p4(rr,be,Be,K,E),rr.mode&1&&d4(K,ct,E),E=rr,Qe=ct;var Ft=E.updateQueue;if(Ft===null){var ro=new Set;ro.add(Qe),E.updateQueue=ro}else Ft.add(Qe);break e}else{if(!(E&1)){d4(K,ct,E),DA();break e}Qe=Error(s(426))}}else if(wr&&Be.mode&1){var oa=h4(be);if(oa!==null){!(oa.flags&65536)&&(oa.flags|=256),p4(oa,be,Be,K,E),XC(Qe);break e}}K=Qe,di!==4&&(di=2),Bv===null?Bv=[K]:Bv.push(K),Qe=oA(Qe,Be),Be=be;do{switch(Be.tag){case 3:Be.flags|=65536,E&=-E,Be.lanes|=E;var je=c4(Be,Qe,E);RF(Be,je);break e;case 1:K=Qe;var ze=Be.type,Ke=Be.stateNode;if(!(Be.flags&128)&&(typeof ze.getDerivedStateFromError=="function"||Ke!==null&&typeof Ke.componentDidCatch=="function"&&(Cc===null||!Cc.has(Ke)))){Be.flags|=65536,E&=-E,Be.lanes|=E;var wt=f4(Be,K,E);RF(Be,wt);break e}}Be=Be.return}while(Be!==null)}Y4(P)}catch(Lt){E=Lt,ri===P&&P!==null&&(ri=P=P.return);continue}break}while(!0)}function q4(){var _=hb.current;return hb.current=Qx,_===null?Qx:_}function DA(){(di===0||di===3||di===2)&&(di=4),ni===null||!(Sp&268435455)&&!(pb&268435455)||Dc(ni,zi)}function wb(_,E){var P=bn;bn|=2;var k=q4();ni===_&&zi===E||xd(_,E);do try{Mae();break}catch(H){G4(_,H)}while(!0);if(BC(),bn=P,hb.current=k,ri!==null)throw Error(s(261));return ni=null,zi=0,di}function Mae(){for(;ri!==null;)X4(ri)}function Cae(){for(;ri!==null&&!Jse();)X4(ri)}function X4(_){var E=J4(_.alternate,_,Ms);_.memoizedProps=_.pendingProps,E===null?Y4(_):ri=E,bA.current=null}function Y4(_){var E=_;do{var P=E.alternate;if(_=E.return,E.flags&32768){if(P=yae(P,E),P!==null){P.flags&=32767,ri=P;return}if(_!==null)_.flags|=32768,_.subtreeFlags=0,_.deletions=null;else{di=6,ri=null;return}}else if(P=mae(P,E,Ms),P!==null){ri=P;return}if(E=E.sibling,E!==null){ri=E;return}ri=E=_}while(E!==null);di===0&&(di=5)}function bd(_,E){var P=On,k=qr.transition;try{qr.transition=null,On=1,Aae(_,E,P)}finally{qr.transition=k,On=P}return null}function Aae(_,E,P){do wd();while(Ac!==null);if(bn&6)throw Error(s(327));var k=_.finishedWork,H=_.finishedLanes;if(k===null)return null;if(_.finishedWork=null,_.finishedLanes=0,k===_.current)throw Error(s(177));_.callbackNode=null,_.callbackPriority=0;var K=k.lanes|k.childLanes;if(Zse(_,K),_===ni&&(ri=ni=null,zi=0),!(k.subtreeFlags&2064)&&!(k.flags&2064)||gb||(gb=!0,Q4(IC,function(){return wd(),null})),K=(k.flags&15990)!==0,k.subtreeFlags&15990||K){K=qr.transition,qr.transition=null;var be=On;On=1;var Be=bn;bn|=4,bA.current=null,bae(_,k),wae(_,k),X(_.containerInfo),_.current=k,Sae(k),Qse(),bn=Be,On=be,qr.transition=K}else _.current=k;if(gb&&(gb=!1,Ac=_,vb=H),K=_.pendingLanes,K===0&&(Cc=null),nae(k.stateNode),Jo(_,Mi()),E!==null)for(P=_.onRecoverableError,k=0;k<E.length;k++)P(E[k]);if(mb)throw mb=!1,_=EA,EA=null,_;return vb&1&&_.tag!==0&&wd(),K=_.pendingLanes,K&1?_===MA?zv++:(zv=0,MA=_):zv=0,Sl(),null}function wd(){if(Ac!==null){var _=AF(vb),E=qr.transition,P=On;try{if(qr.transition=null,On=16>_?16:_,Ac===null)var k=!1;else{if(_=Ac,Ac=null,vb=0,bn&6)throw Error(s(331));var H=bn;for(bn|=4,yt=_.current;yt!==null;){var K=yt,be=K.child;if(yt.flags&16){var Be=K.deletions;if(Be!==null){for(var Qe=0;Qe<Be.length;Qe++){var ct=Be[Qe];for(yt=ct;yt!==null;){var Dt=yt;switch(Dt.tag){case 0:case 11:case 15:yd(8,Dt,K)}var an=Dt.child;if(an!==null)an.return=Dt,yt=an;else for(;yt!==null;){Dt=yt;var jt=Dt.sibling,rr=Dt.return;if(O4(Dt),Dt===ct){yt=null;break}if(jt!==null){jt.return=rr,yt=jt;break}yt=rr}}}var Ft=K.alternate;if(Ft!==null){var ro=Ft.child;if(ro!==null){Ft.child=null;do{var oa=ro.sibling;ro.sibling=null,ro=oa}while(ro!==null)}}yt=K}}if(K.subtreeFlags&2064&&be!==null)be.return=K,yt=be;else e:for(;yt!==null;){if(K=yt,K.flags&2048)switch(K.tag){case 0:case 11:case 15:yd(9,K,K.return)}var je=K.sibling;if(je!==null){je.return=K.return,yt=je;break e}yt=K.return}}var ze=_.current;for(yt=ze;yt!==null;){be=yt;var Ke=be.child;if(be.subtreeFlags&2064&&Ke!==null)Ke.return=be,yt=Ke;else e:for(be=ze;yt!==null;){if(Be=yt,Be.flags&2048)try{switch(Be.tag){case 0:case 11:case 15:Iv(9,Be)}}catch(Lt){Qo(Be,Be.return,Lt)}if(Be===be){yt=null;break e}var wt=Be.sibling;if(wt!==null){wt.return=Be.return,yt=wt;break e}yt=Be.return}}if(bn=H,Sl(),bl&&typeof bl.onPostCommitFiberRoot=="function")try{bl.onPostCommitFiberRoot(Ix,_)}catch{}k=!0}return k}finally{On=P,qr.transition=E}}return!1}function K4(_,E,P){E=oA(P,E),E=c4(_,E,1),Mc(_,E),E=To(),_=bb(_,1),_!==null&&(Sv(_,1,E),Jo(_,E))}function Qo(_,E,P){if(_.tag===3)K4(_,_,P);else for(;E!==null;){if(E.tag===3){K4(E,_,P);break}else if(E.tag===1){var k=E.stateNode;if(typeof E.type.getDerivedStateFromError=="function"||typeof k.componentDidCatch=="function"&&(Cc===null||!Cc.has(k))){_=oA(P,_),_=f4(E,_,1),Mc(E,_),_=To(),E=bb(E,1),E!==null&&(Sv(E,1,_),Jo(E,_));break}}E=E.return}}function Tae(_,E,P){var k=_.pingCache;k!==null&&k.delete(E),E=To(),_.pingedLanes|=_.suspendedLanes&P,ni===_&&(zi&P)===P&&(di===4||di===3&&(zi&130023424)===zi&&500>Mi()-SA?xd(_,0):wA|=P),Jo(_,E)}function Z4(_,E){E===0&&(_.mode&1?(E=Ox,Ox<<=1,!(Ox&130023424)&&(Ox=4194304)):E=1);var P=To();_=bb(_,E),_!==null&&(Sv(_,E,P),Jo(_,P))}function Dae(_){var E=_.memoizedState,P=0;E!==null&&(P=E.retryLane),Z4(_,P)}function Nae(_,E){var P=0;switch(_.tag){case 13:var k=_.stateNode,H=_.memoizedState;H!==null&&(P=H.retryLane);break;case 19:k=_.stateNode;break;default:throw Error(s(314))}k!==null&&k.delete(E),Z4(_,P)}var J4;J4=function(_,E,P){if(_!==null)if(_.memoizedProps!==E.pendingProps||Fr.current)Es=!0;else{if(!(_.lanes&P)&&!(E.flags&128))return Es=!1,vae(_,E,P);Es=!!(_.flags&131072)}else Es=!1,wr&&E.flags&1048576&&BF(E,Wx,E.index);switch(E.lanes=0,E.tag){case 2:var k=E.type;_!==null&&(_.alternate=null,E.alternate=null,E.flags|=2),_=E.pendingProps;var H=Zs(E,xn.current);hp(E,P),H=eA(null,E,k,_,H,P);var K=tA();return E.flags|=1,typeof H=="object"&&H!==null&&typeof H.render=="function"&&H.$$typeof===void 0?(E.tag=1,E.memoizedState=null,E.updateQueue=null,Ei(k)?(K=!0,Bi(E)):K=!1,E.memoizedState=H.state!==null&&H.state!==void 0?H.state:null,VC(E),H.updater=$x,E.stateNode=H,H._reactInternals=E,HC(E,k,_,P),E=lA(null,E,k,!0,K,P)):(E.tag=0,wr&&K&&WC(E),Ao(null,E,H,P),E=E.child),E;case 16:k=E.elementType;e:{switch(_!==null&&(_.alternate=null,E.alternate=null,E.flags|=2),_=E.pendingProps,H=k._init,k=H(k._payload),E.type=k,H=E.tag=Rae(k),_=Ba(k,_),H){case 0:E=aA(null,E,k,_,P);break e;case 1:E=S4(null,E,k,_,P);break e;case 11:E=v4(null,E,k,_,P);break e;case 14:E=y4(null,E,k,Ba(k.type,_),P);break e}throw Error(s(306,k,""))}return E;case 0:return k=E.type,H=E.pendingProps,H=E.elementType===k?H:Ba(k,H),aA(_,E,k,H,P);case 1:return k=E.type,H=E.pendingProps,H=E.elementType===k?H:Ba(k,H),S4(_,E,k,H,P);case 3:e:{if(_4(E),_===null)throw Error(s(387));k=E.pendingProps,K=E.memoizedState,H=K.element,PF(_,E),Vx(E,k,null,P);var be=E.memoizedState;if(k=be.element,Re&&K.isDehydrated)if(K={element:k,isDehydrated:!1,cache:be.cache,transitions:be.transitions},E.updateQueue.baseState=K,E.memoizedState=K,E.flags&256){H=Error(s(423)),E=E4(_,E,k,P,H);break e}else if(k!==H){H=Error(s(424)),E=E4(_,E,k,P,H);break e}else for(Re&&(_s=Lr(E.stateNode.containerInfo),Ss=E,wr=!0,za=null,_v=!1),P=WF(E,null,k,P),E.child=P;P;)P.flags=P.flags&-3|4096,P=P.sibling;else{if(gp(),k===H){E=Su(_,E,P);break e}Ao(_,E,k,P)}E=E.child}return E;case 5:return jF(E),_===null&&qC(E),k=E.type,H=E.pendingProps,K=_!==null?_.memoizedProps:null,be=H.children,fe(k,H)?be=null:K!==null&&fe(k,K)&&(E.flags|=32),w4(_,E),Ao(_,E,be,P),E.child;case 6:return _===null&&qC(E),null;case 13:return M4(_,E,P);case 4:return YC(E,E.stateNode.containerInfo),k=E.pendingProps,_===null?E.child=vp(E,null,k,P):Ao(_,E,k,P),E.child;case 11:return k=E.type,H=E.pendingProps,H=E.elementType===k?H:Ba(k,H),v4(_,E,k,H,P);case 7:return Ao(_,E,E.pendingProps,P),E.child;case 8:return Ao(_,E,E.pendingProps.children,P),E.child;case 12:return Ao(_,E,E.pendingProps.children,P),E.child;case 10:e:{if(k=E.type._context,H=E.pendingProps,K=E.memoizedProps,be=H.value,NF(E,k,be),K!==null)if(wl(K.value,be)){if(K.children===H.children&&!Fr.current){E=Su(_,E,P);break e}}else for(K=E.child,K!==null&&(K.return=E);K!==null;){var Be=K.dependencies;if(Be!==null){be=K.child;for(var Qe=Be.firstContext;Qe!==null;){if(Qe.context===k){if(K.tag===1){Qe=yu(-1,P&-P),Qe.tag=2;var ct=K.updateQueue;if(ct!==null){ct=ct.shared;var Dt=ct.pending;Dt===null?Qe.next=Qe:(Qe.next=Dt.next,Dt.next=Qe),ct.pending=Qe}}K.lanes|=P,Qe=K.alternate,Qe!==null&&(Qe.lanes|=P),UC(K.return,P,E),Be.lanes|=P;break}Qe=Qe.next}}else if(K.tag===10)be=K.type===E.type?null:K.child;else if(K.tag===18){if(be=K.return,be===null)throw Error(s(341));be.lanes|=P,Be=be.alternate,Be!==null&&(Be.lanes|=P),UC(be,P,E),be=K.sibling}else be=K.child;if(be!==null)be.return=K;else for(be=K;be!==null;){if(be===E){be=null;break}if(K=be.sibling,K!==null){K.return=be.return,be=K;break}be=be.return}K=be}Ao(_,E,H.children,P),E=E.child}return E;case 9:return H=E.type,k=E.pendingProps.children,hp(E,P),H=Js(H),k=k(H),E.flags|=1,Ao(_,E,k,P),E.child;case 14:return k=E.type,H=Ba(k,E.pendingProps),H=Ba(k.type,H),y4(_,E,k,H,P);case 15:return x4(_,E,E.type,E.pendingProps,P);case 17:return k=E.type,H=E.pendingProps,H=E.elementType===k?H:Ba(k,H),_!==null&&(_.alternate=null,E.alternate=null,E.flags|=2),E.tag=1,Ei(k)?(_=!0,Bi(E)):_=!1,hp(E,P),LF(E,k,H),HC(E,k,H,P),lA(null,E,k,!0,_,P);case 19:return D4(_,E,P);case 22:return b4(_,E,P)}throw Error(s(156,E.tag))};function Q4(_,E){return OC(_,E)}function Pae(_,E,P,k){this.tag=_,this.key=P,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=E,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=k,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ia(_,E,P,k){return new Pae(_,E,P,k)}function NA(_){return _=_.prototype,!(!_||!_.isReactComponent)}function Rae(_){if(typeof _=="function")return NA(_)?1:0;if(_!=null){if(_=_.$$typeof,_===g)return 11;if(_===w)return 14}return 2}function Nc(_,E){var P=_.alternate;return P===null?(P=ia(_.tag,E,_.key,_.mode),P.elementType=_.elementType,P.type=_.type,P.stateNode=_.stateNode,P.alternate=_,_.alternate=P):(P.pendingProps=E,P.type=_.type,P.flags=0,P.subtreeFlags=0,P.deletions=null),P.flags=_.flags&14680064,P.childLanes=_.childLanes,P.lanes=_.lanes,P.child=_.child,P.memoizedProps=_.memoizedProps,P.memoizedState=_.memoizedState,P.updateQueue=_.updateQueue,E=_.dependencies,P.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext},P.sibling=_.sibling,P.index=_.index,P.ref=_.ref,P}function Sb(_,E,P,k,H,K){var be=2;if(k=_,typeof _=="function")NA(_)&&(be=1);else if(typeof _=="string")be=5;else e:switch(_){case c:return Sd(P.children,H,K,E);case f:be=8,H|=8;break;case d:return _=ia(12,P,E,H|2),_.elementType=d,_.lanes=K,_;case y:return _=ia(13,P,E,H),_.elementType=y,_.lanes=K,_;case p:return _=ia(19,P,E,H),_.elementType=p,_.lanes=K,_;case v:return _b(P,H,K,E);default:if(typeof _=="object"&&_!==null)switch(_.$$typeof){case h:be=10;break e;case m:be=9;break e;case g:be=11;break e;case w:be=14;break e;case b:be=16,k=null;break e}throw Error(s(130,_==null?_:typeof _,""))}return E=ia(be,P,E,H),E.elementType=_,E.type=k,E.lanes=K,E}function Sd(_,E,P,k){return _=ia(7,_,k,E),_.lanes=P,_}function _b(_,E,P,k){return _=ia(22,_,k,E),_.elementType=v,_.lanes=P,_.stateNode={},_}function PA(_,E,P){return _=ia(6,_,null,E),_.lanes=P,_}function RA(_,E,P){return E=ia(4,_.children!==null?_.children:[],_.key,E),E.lanes=P,E.stateNode={containerInfo:_.containerInfo,pendingChildren:null,implementation:_.implementation},E}function Oae(_,E,P,k,H){this.tag=E,this.containerInfo=_,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=xe,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=PC(0),this.expirationTimes=PC(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=PC(0),this.identifierPrefix=k,this.onRecoverableError=H,Re&&(this.mutableSourceEagerHydrationData=null)}function e8(_,E,P,k,H,K,be,Be,Qe){return _=new Oae(_,E,P,Be,Qe),E===1?(E=1,K===!0&&(E|=8)):E=0,K=ia(3,null,null,E),_.current=K,K.stateNode=_,K.memoizedState={element:k,isDehydrated:P,cache:null,transitions:null},VC(K),_}function t8(_){if(!_)return Ks;_=_._reactInternals;e:{if(T(_)!==_||_.tag!==1)throw Error(s(170));var E=_;do{switch(E.tag){case 3:E=E.stateNode.context;break e;case 1:if(Ei(E.type)){E=E.stateNode.__reactInternalMemoizedMergedChildContext;break e}}E=E.return}while(E!==null);throw Error(s(171))}if(_.tag===1){var P=_.type;if(Ei(P))return cp(_,P,E)}return E}function n8(_){var E=_._reactInternals;if(E===void 0)throw typeof _.render=="function"?Error(s(188)):(_=Object.keys(_).join(","),Error(s(268,_)));return _=R(E),_===null?null:_.stateNode}function r8(_,E){if(_=_.memoizedState,_!==null&&_.dehydrated!==null){var P=_.retryLane;_.retryLane=P!==0&&P<E?P:E}}function OA(_,E){r8(_,E),(_=_.alternate)&&r8(_,E)}function kae(_){return _=R(_),_===null?null:_.stateNode}function Iae(){return null}return t.attemptContinuousHydration=function(_){if(_.tag===13){var E=To();ra(_,134217728,E),OA(_,134217728)}},t.attemptHydrationAtCurrentPriority=function(_){if(_.tag===13){var E=To(),P=Tc(_);ra(_,P,E),OA(_,P)}},t.attemptSynchronousHydration=function(_){switch(_.tag){case 3:var E=_.stateNode;if(E.current.memoizedState.isDehydrated){var P=wv(E.pendingLanes);P!==0&&(RC(E,P|1),Jo(E,Mi()),!(bn&6)&&(_p(),Sl()))}break;case 13:var k=To();j4(function(){return ra(_,1,k)}),OA(_,1)}},t.batchedUpdates=function(_,E){var P=bn;bn|=1;try{return _(E)}finally{bn=P,bn===0&&(_p(),Lx&&Sl())}},t.createComponentSelector=function(_){return{$$typeof:lb,value:_}},t.createContainer=function(_,E,P,k,H,K,be){return e8(_,E,!1,null,P,k,H,K,be)},t.createHasPseudoClassSelector=function(_){return{$$typeof:ub,value:_}},t.createHydrationContainer=function(_,E,P,k,H,K,be,Be,Qe){return _=e8(P,k,!0,_,H,K,be,Be,Qe),_.context=t8(null),P=_.current,k=To(),H=Tc(P),K=yu(k,H),K.callback=E??null,Mc(P,K),_.current.lanes=H,Sv(_,H,k),Jo(_,k),_},t.createPortal=function(_,E,P){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:k==null?null:""+k,children:_,containerInfo:E,implementation:P}},t.createRoleSelector=function(_){return{$$typeof:cb,value:_}},t.createTestNameSelector=function(_){return{$$typeof:fb,value:_}},t.createTextSelector=function(_){return{$$typeof:db,value:_}},t.deferredUpdates=function(_){var E=On,P=qr.transition;try{return qr.transition=null,On=16,_()}finally{On=E,qr.transition=P}},t.discreteUpdates=function(_,E,P,k,H){var K=On,be=qr.transition;try{return qr.transition=null,On=1,_(E,P,k,H)}finally{On=K,qr.transition=be,bn===0&&_p()}},t.findAllNodes=xA,t.findBoundingRects=function(_,E){if(!j)throw Error(s(363));E=xA(_,E),_=[];for(var P=0;P<E.length;P++)_.push(Ce(E[P]));for(E=_.length-1;0<E;E--){P=_[E];for(var k=P.x,H=k+P.width,K=P.y,be=K+P.height,Be=E-1;0<=Be;Be--)if(E!==Be){var Qe=_[Be],ct=Qe.x,Dt=ct+Qe.width,an=Qe.y,jt=an+Qe.height;if(k>=ct&&K>=an&&H<=Dt&&be<=jt){_.splice(E,1);break}else if(k!==ct||P.width!==Qe.width||jt<K||an>be){if(!(K!==an||P.height!==Qe.height||Dt<k||ct>H)){ct>k&&(Qe.width+=ct-k,Qe.x=k),Dt<H&&(Qe.width=H-ct),_.splice(E,1);break}}else{an>K&&(Qe.height+=an-K,Qe.y=K),jt<be&&(Qe.height=be-an),_.splice(E,1);break}}}return _},t.findHostInstance=n8,t.findHostInstanceWithNoPortals=function(_){return _=D(_),_=_!==null?F(_):null,_===null?null:_.stateNode},t.findHostInstanceWithWarning=function(_){return n8(_)},t.flushControlled=function(_){var E=bn;bn|=1;var P=qr.transition,k=On;try{qr.transition=null,On=1,_()}finally{On=k,qr.transition=P,bn=E,bn===0&&(_p(),Sl())}},t.flushPassiveEffects=wd,t.flushSync=j4,t.focusWithin=function(_,E){if(!j)throw Error(s(363));for(_=gA(_),E=$4(_,E),E=Array.from(E),_=0;_<E.length;){var P=E[_++];if(!J(P)){if(P.tag===5&&we(P.stateNode))return!0;for(P=P.child;P!==null;)E.push(P),P=P.sibling}}return!1},t.getCurrentUpdatePriority=function(){return On},t.getFindAllNodesFailureDescription=function(_,E){if(!j)throw Error(s(363));var P=0,k=[];_=[gA(_),0];for(var H=0;H<_.length;){var K=_[H++],be=_[H++],Be=E[be];if((K.tag!==5||!J(K))&&(vA(K,Be)&&(k.push(yA(Be)),be++,be>P&&(P=be)),be<E.length))for(K=K.child;K!==null;)_.push(K,be),K=K.sibling}if(P<E.length){for(_=[];P<E.length;P++)_.push(yA(E[P]));return`findAllNodes was able to match part of the selector:
  `+(k.join(" > ")+`

No matching component was found for:
  `)+_.join(" > ")}return null},t.getPublicRootInstance=function(_){if(_=_.current,!_.child)return null;switch(_.child.tag){case 5:return N(_.child.stateNode);default:return _.child.stateNode}},t.injectIntoDevTools=function(_){if(_={bundleType:_.bundleType,version:_.version,rendererPackageName:_.rendererPackageName,rendererConfig:_.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:kae,findFiberByHostInstance:_.findFiberByHostInstance||Iae,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")_=!1;else{var E=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(E.isDisabled||!E.supportsFiber)_=!0;else{try{Ix=E.inject(_),bl=E}catch{}_=!!E.checkDCE}}return _},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(_,E,P,k){if(!j)throw Error(s(363));_=xA(_,E);var H=ke(_,P,k).disconnect;return{disconnect:function(){H()}}},t.registerMutableSourceForHydration=function(_,E){var P=E._getVersion;P=P(E._source),_.mutableSourceEagerHydrationData==null?_.mutableSourceEagerHydrationData=[E,P]:_.mutableSourceEagerHydrationData.push(E,P)},t.runWithPriority=function(_,E){var P=On;try{return On=_,E()}finally{On=P}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(_,E,P,k){var H=E.current,K=To(),be=Tc(H);return P=t8(P),E.context===null?E.context=P:E.pendingContext=P,E=yu(K,be),E.payload={element:_},k=k===void 0?null:k,k!==null&&(E.callback=k),Mc(H,E),_=ra(H,be,K),_!==null&&Ux(_,H,be),be},t};mre.exports=Rqe;var Oqe=mre.exports;const kqe=ll(Oqe),HL={},WL=n=>void Object.assign(HL,n);function Iqe(n,e){function t(c,{args:f=[],attach:d,...h},m){let g=`${c[0].toUpperCase()}${c.slice(1)}`,y;if(c==="primitive"){if(h.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const p=h.object;y=fm(p,{type:c,root:m,attach:d,primitive:!0})}else{const p=HL[g];if(!p)throw new Error(`R3F: ${g} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");y=fm(new p(...f),{type:c,root:m,attach:d,memoizedProps:{args:f}})}return y.__r3f.attach===void 0&&(y instanceof sn?y.__r3f.attach="geometry":y instanceof Ji&&(y.__r3f.attach="material")),g!=="inject"&&W3(y,h),y}function r(c,f){let d=!1;if(f){var h,m;(h=f.__r3f)!=null&&h.attach?H3(c,f,f.__r3f.attach):f.isObject3D&&c.isObject3D&&(c.add(f),d=!0),d||(m=c.__r3f)==null||m.objects.push(f),f.__r3f||fm(f,{}),f.__r3f.parent=c,PR(f),dm(f)}}function i(c,f,d){let h=!1;if(f){var m,g;if((m=f.__r3f)!=null&&m.attach)H3(c,f,f.__r3f.attach);else if(f.isObject3D&&c.isObject3D){f.parent=c,f.dispatchEvent({type:"added"}),c.dispatchEvent({type:"childadded",child:f});const y=c.children.filter(w=>w!==f),p=y.indexOf(d);c.children=[...y.slice(0,p),f,...y.slice(p)],h=!0}h||(g=c.__r3f)==null||g.objects.push(f),f.__r3f||fm(f,{}),f.__r3f.parent=c,PR(f),dm(f)}}function o(c,f,d=!1){c&&[...c].forEach(h=>s(f,h,d))}function s(c,f,d){if(f){var h,m,g;if(f.__r3f&&(f.__r3f.parent=null),(h=c.__r3f)!=null&&h.objects&&(c.__r3f.objects=c.__r3f.objects.filter(v=>v!==f)),(m=f.__r3f)!=null&&m.attach)kH(c,f,f.__r3f.attach);else if(f.isObject3D&&c.isObject3D){var y;c.remove(f),(y=f.__r3f)!=null&&y.root&&$qe(S_(f),f)}const w=(g=f.__r3f)==null?void 0:g.primitive,b=!w&&(d===void 0?f.dispose!==null:d);if(!w){var p;o((p=f.__r3f)==null?void 0:p.objects,f,b),o(f.children,f,b)}if(delete f.__r3f,b&&f.dispose&&f.type!=="Scene"){const v=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?DR.unstable_scheduleCallback(DR.unstable_IdlePriority,v):v()}dm(c)}}function a(c,f,d,h){var m;const g=(m=c.__r3f)==null?void 0:m.parent;if(!g)return;const y=t(f,d,c.__r3f.root);if(c.children){for(const p of c.children)p.__r3f&&r(y,p);c.children=c.children.filter(p=>!p.__r3f)}c.__r3f.objects.forEach(p=>r(y,p)),c.__r3f.objects=[],c.__r3f.autoRemovedBeforeAppend||s(g,c),y.parent&&(y.__r3f.autoRemovedBeforeAppend=!0),r(g,y),y.raycast&&y.__r3f.eventCount&&S_(y).getState().internal.interaction.push(y),[h,h.alternate].forEach(p=>{p!==null&&(p.stateNode=y,p.ref&&(typeof p.ref=="function"?p.ref(y):p.ref.current=y))})}const l=()=>{};return{reconciler:kqe({createInstance:t,removeChild:s,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(c,f)=>{if(!f)return;const d=c.getState().scene;d.__r3f&&(d.__r3f.root=c,r(d,f))},removeChildFromContainer:(c,f)=>{f&&s(c.getState().scene,f)},insertInContainerBefore:(c,f,d)=>{if(!f||!d)return;const h=c.getState().scene;h.__r3f&&i(h,f,d)},getRootHostContext:()=>null,getChildHostContext:c=>c,finalizeInitialChildren(c){var f;return!!((f=c==null?void 0:c.__r3f)!=null?f:{}).handlers},prepareUpdate(c,f,d,h){var m;if(((m=c==null?void 0:c.__r3f)!=null?m:{}).primitive&&h.object&&h.object!==c)return[!0];{const{args:y=[],children:p,...w}=h,{args:b=[],children:v,...S}=d;if(!Array.isArray(y))throw new Error("R3F: the args prop must be an array!");if(y.some((M,A)=>M!==b[A]))return[!0];const x=Ere(c,w,S,!0);return x.changes.length?[!1,x]:null}},commitUpdate(c,[f,d],h,m,g,y){f?a(c,h,g,y):W3(c,d)},commitMount(c,f,d,h){var m;const g=(m=c.__r3f)!=null?m:{};c.raycast&&g.handlers&&g.eventCount&&S_(c).getState().internal.interaction.push(c)},getPublicInstance:c=>c,prepareForCommit:()=>null,preparePortalMount:c=>fm(c.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(c){var f;const{attach:d,parent:h}=(f=c.__r3f)!=null?f:{};d&&h&&kH(h,c,d),c.isObject3D&&(c.visible=!1),dm(c)},unhideInstance(c,f){var d;const{attach:h,parent:m}=(d=c.__r3f)!=null?d:{};h&&m&&H3(m,c,h),(c.isObject3D&&f.visible==null||f.visible)&&(c.visible=!0),dm(c)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Fm.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&mr.fun(performance.now)?performance.now:mr.fun(Date.now)?Date.now:()=>0,scheduleTimeout:mr.fun(setTimeout)?setTimeout:void 0,cancelTimeout:mr.fun(clearTimeout)?clearTimeout:void 0}),applyProps:W3}}var NH,PH;const $3=n=>"colorSpace"in n||"outputColorSpace"in n,yre=()=>{var n;return(n=HL.ColorManagement)!=null?n:null},xre=n=>n&&n.isOrthographicCamera,Lqe=n=>n&&n.hasOwnProperty("current"),bx=typeof window<"u"&&((NH=window.document)!=null&&NH.createElement||((PH=window.navigator)==null?void 0:PH.product)==="ReactNative")?z.useLayoutEffect:z.useEffect;function bre(n){const e=z.useRef(n);return bx(()=>void(e.current=n),[n]),e}function Fqe({set:n}){return bx(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class wre extends z.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}wre.getDerivedStateFromError=()=>({error:!0});const Sre="__default",RH=new Map,Bqe=n=>n&&!!n.memoized&&!!n.changes;function _re(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const y0=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function S_(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const mr={obj:n=>n===Object(n)&&!mr.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(mr.str(n)||mr.num(n)||mr.boo(n))return n===e;const o=mr.obj(n);if(o&&r==="reference")return n===e;const s=mr.arr(n);if(s&&t==="reference")return n===e;if((s||o)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(o&&t==="shallow"&&r==="shallow"){for(a in i?e:n)if(!mr.equ(n[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:n)if(n[a]!==e[a])return!1;if(mr.und(a)){if(s&&n.length===0&&e.length===0||o&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function zqe(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function fm(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function NR(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((o,s)=>o[s],n),{target:t,key:i}}else return{target:t,key:e}}const OH=/-\d+$/;function H3(n,e,t){if(mr.str(t)){if(OH.test(t)){const o=t.replace(OH,""),{target:s,key:a}=NR(n,o);Array.isArray(s[a])||(s[a]=[])}const{target:r,key:i}=NR(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function kH(n,e,t){var r,i;if(mr.str(t)){const{target:o,key:s}=NR(n,t),a=e.__r3f.previousAttach;a===void 0?delete o[s]:o[s]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function Ere(n,{children:e,key:t,ref:r,...i},{children:o,key:s,ref:a,...l}={},u=!1){const c=n.__r3f,f=Object.entries(i),d=[];if(u){const m=Object.keys(l);for(let g=0;g<m.length;g++)i.hasOwnProperty(m[g])||f.unshift([m[g],Sre+"remove"])}f.forEach(([m,g])=>{var y;if((y=n.__r3f)!=null&&y.primitive&&m==="object"||mr.equ(g,l[m]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(m))return d.push([m,g,!0,[]]);let p=[];m.includes("-")&&(p=m.split("-")),d.push([m,g,!1,p]);for(const w in i){const b=i[w];w.startsWith(`${m}-`)&&d.push([w,b,!1,w.split("-")])}});const h={...i};return c!=null&&c.memoizedProps&&c!=null&&c.memoizedProps.args&&(h.args=c.memoizedProps.args),c!=null&&c.memoizedProps&&c!=null&&c.memoizedProps.attach&&(h.attach=c.memoizedProps.attach),{memoized:h,changes:d}}const Uqe=typeof process<"u"&&!1;function W3(n,e){var t;const r=n.__r3f,i=r==null?void 0:r.root,o=i==null||i.getState==null?void 0:i.getState(),{memoized:s,changes:a}=Bqe(e)?e:Ere(n,e),l=r==null?void 0:r.eventCount;n.__r3f&&(n.__r3f.memoizedProps=s);for(let c=0;c<a.length;c++){let[f,d,h,m]=a[c];if($3(n)){const w="srgb",b="srgb-linear";f==="encoding"?(f="colorSpace",d=d===3001?w:b):f==="outputEncoding"&&(f="outputColorSpace",d=d===3001?w:b)}let g=n,y=g[f];if(m.length&&(y=m.reduce((p,w)=>p[w],n),!(y&&y.set))){const[p,...w]=m.reverse();g=w.reverse().reduce((b,v)=>b[v],n),f=p}if(d===Sre+"remove")if(g.constructor){let p=RH.get(g.constructor);p||(p=new g.constructor,RH.set(g.constructor,p)),d=p[f]}else d=0;if(h&&r)d?r.handlers[f]=d:delete r.handlers[f],r.eventCount=Object.keys(r.handlers).length;else if(y&&y.set&&(y.copy||y instanceof wh)){if(Array.isArray(d))y.fromArray?y.fromArray(d):y.set(...d);else if(y.copy&&d&&d.constructor&&(Uqe?y.constructor.name===d.constructor.name:y.constructor===d.constructor))y.copy(d);else if(d!==void 0){const p=y instanceof gt;!p&&y.setScalar?y.setScalar(d):y instanceof wh&&d instanceof wh?y.mask=d.mask:y.set(d),!yre()&&o&&!o.linear&&p&&y.convertSRGBToLinear()}}else if(g[f]=d,g[f]instanceof Or&&g[f].format===ko&&g[f].type===Jl&&o){const p=g[f];$3(p)&&$3(o.gl)?p.colorSpace=o.gl.outputColorSpace:p.encoding=o.gl.outputEncoding}dm(n)}if(r&&r.parent&&n.raycast&&l!==r.eventCount){const c=S_(n).getState().internal,f=c.interaction.indexOf(n);f>-1&&c.interaction.splice(f,1),r.eventCount&&c.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&PR(n),n}function dm(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function PR(n){n.onUpdate==null||n.onUpdate(n)}function Mre(n,e){n.manual||(xre(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function xS(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function Vqe(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Fm.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Fm.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Fm.ContinuousEventPriority;default:return Fm.DefaultEventPriority}}function Cre(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function $qe(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{Cre(t.capturedMap,e,r,i)})}function Hqe(n){function e(l){const{internal:u}=n.getState(),c=l.offsetX-u.initialClick[0],f=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(c*c+f*f))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(c=>{var f;return(f=u.__r3f)==null?void 0:f.handlers["onPointer"+c]}))}function r(l,u){const c=n.getState(),f=new Set,d=[],h=u?u(c.internal.interaction):c.internal.interaction;for(let p=0;p<h.length;p++){const w=y0(h[p]);w&&(w.raycaster.camera=void 0)}c.previousRoot||c.events.compute==null||c.events.compute(l,c);function m(p){const w=y0(p);if(!w||!w.events.enabled||w.raycaster.camera===null)return[];if(w.raycaster.camera===void 0){var b;w.events.compute==null||w.events.compute(l,w,(b=w.previousRoot)==null?void 0:b.getState()),w.raycaster.camera===void 0&&(w.raycaster.camera=null)}return w.raycaster.camera?w.raycaster.intersectObject(p,!0):[]}let g=h.flatMap(m).sort((p,w)=>{const b=y0(p.object),v=y0(w.object);return!b||!v?p.distance-w.distance:v.events.priority-b.events.priority||p.distance-w.distance}).filter(p=>{const w=xS(p);return f.has(w)?!1:(f.add(w),!0)});c.events.filter&&(g=c.events.filter(g,c));for(const p of g){let w=p.object;for(;w;){var y;(y=w.__r3f)!=null&&y.eventCount&&d.push({...p,eventObject:w}),w=w.parent}}if("pointerId"in l&&c.internal.capturedMap.has(l.pointerId))for(let p of c.internal.capturedMap.get(l.pointerId).values())f.has(xS(p.intersection))||d.push(p.intersection);return d}function i(l,u,c,f){const d=n.getState();if(l.length){const h={stopped:!1};for(const m of l){const g=y0(m.object)||d,{raycaster:y,pointer:p,camera:w,internal:b}=g,v=new me(p.x,p.y,0).unproject(w),S=C=>{var D,R;return(D=(R=b.capturedMap.get(C))==null?void 0:R.has(m.eventObject))!=null?D:!1},x=C=>{const D={intersection:m,target:u.target};b.capturedMap.has(C)?b.capturedMap.get(C).set(m.eventObject,D):b.capturedMap.set(C,new Map([[m.eventObject,D]])),u.target.setPointerCapture(C)},M=C=>{const D=b.capturedMap.get(C);D&&Cre(b.capturedMap,m.eventObject,D,C)};let A={};for(let C in u){let D=u[C];typeof D!="function"&&(A[C]=D)}let T={...m,...A,pointer:p,intersections:l,stopped:h.stopped,delta:c,unprojectedPoint:v,ray:y.ray,camera:w,stopPropagation(){const C="pointerId"in u&&b.capturedMap.get(u.pointerId);if((!C||C.has(m.eventObject))&&(T.stopped=h.stopped=!0,b.hovered.size&&Array.from(b.hovered.values()).find(D=>D.eventObject===m.eventObject))){const D=l.slice(0,l.indexOf(m));o([...D,m])}},target:{hasPointerCapture:S,setPointerCapture:x,releasePointerCapture:M},currentTarget:{hasPointerCapture:S,setPointerCapture:x,releasePointerCapture:M},nativeEvent:u};if(f(T),h.stopped===!0)break}}return l}function o(l){const{internal:u}=n.getState();for(const c of u.hovered.values())if(!l.length||!l.find(f=>f.object===c.object&&f.index===c.index&&f.instanceId===c.instanceId)){const d=c.eventObject.__r3f,h=d==null?void 0:d.handlers;if(u.hovered.delete(xS(c)),d!=null&&d.eventCount){const m={...c,intersections:l};h.onPointerOut==null||h.onPointerOut(m),h.onPointerLeave==null||h.onPointerLeave(m)}}}function s(l,u){for(let c=0;c<u.length;c++){const f=u[c].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>o([]);case"onLostPointerCapture":return u=>{const{internal:c}=n.getState();"pointerId"in u&&c.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{c.capturedMap.has(u.pointerId)&&(c.capturedMap.delete(u.pointerId),o([]))})}}return function(c){const{onPointerMissed:f,internal:d}=n.getState();d.lastEvent.current=c;const h=l==="onPointerMove",m=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",y=r(c,h?t:void 0),p=m?e(c):0;l==="onPointerDown"&&(d.initialClick=[c.offsetX,c.offsetY],d.initialHits=y.map(b=>b.eventObject)),m&&!y.length&&p<=2&&(s(c,d.interaction),f&&f(c)),h&&o(y);function w(b){const v=b.eventObject,S=v.__r3f,x=S==null?void 0:S.handlers;if(S!=null&&S.eventCount)if(h){if(x.onPointerOver||x.onPointerEnter||x.onPointerOut||x.onPointerLeave){const M=xS(b),A=d.hovered.get(M);A?A.stopped&&b.stopPropagation():(d.hovered.set(M,b),x.onPointerOver==null||x.onPointerOver(b),x.onPointerEnter==null||x.onPointerEnter(b))}x.onPointerMove==null||x.onPointerMove(b)}else{const M=x[l];M?(!m||d.initialHits.includes(v))&&(s(c,d.interaction.filter(A=>!d.initialHits.includes(A))),M(b)):m&&d.initialHits.includes(v)&&s(c,d.interaction.filter(A=>!d.initialHits.includes(A)))}}i(y,c,p,w)}}return{handlePointer:a}}const Wqe=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],Are=n=>!!(n!=null&&n.render),jL=z.createContext(null),jqe=(n,e)=>{const t=pre((a,l)=>{const u=new me,c=new me,f=new me;function d(p=l().camera,w=c,b=l().size){const{width:v,height:S,top:x,left:M}=b,A=v/S;w instanceof me?f.copy(w):f.set(...w);const T=p.getWorldPosition(u).distanceTo(f);if(xre(p))return{width:v/p.zoom,height:S/p.zoom,top:x,left:M,factor:1,distance:T,aspect:A};{const C=p.fov*Math.PI/180,D=2*Math.tan(C/2)*T,R=D*(v/S);return{width:R,height:D,top:x,left:M,factor:v/R,distance:T,aspect:A}}}let h;const m=p=>a(w=>({performance:{...w.performance,current:p}})),g=new nt;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(p=1)=>n(l(),p),advance:(p,w)=>e(p,w,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new BL,pointer:g,mouse:g,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const p=l();h&&clearTimeout(h),p.performance.current!==p.performance.min&&m(p.performance.min),h=setTimeout(()=>m(l().performance.max),p.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:d},setEvents:p=>a(w=>({...w,events:{...w.events,...p}})),setSize:(p,w,b,v,S)=>{const x=l().camera,M={width:p,height:w,top:v||0,left:S||0,updateStyle:b};a(A=>({size:M,viewport:{...A.viewport,...d(x,c,M)}}))},setDpr:p=>a(w=>{const b=_re(p);return{viewport:{...w.viewport,dpr:b,initialDpr:w.viewport.initialDpr||b}}}),setFrameloop:(p="always")=>{const w=l().clock;w.stop(),w.elapsedTime=0,p!=="never"&&(w.start(),w.elapsedTime=0),a(()=>({frameloop:p}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:z.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(p,w,b)=>{const v=l().internal;return v.priority=v.priority+(w>0?1:0),v.subscribers.push({ref:p,priority:w,store:b}),v.subscribers=v.subscribers.sort((S,x)=>S.priority-x.priority),()=>{const S=l().internal;S!=null&&S.subscribers&&(S.priority=S.priority-(w>0?1:0),S.subscribers=S.subscribers.filter(x=>x.ref!==p))}}}}}),r=t.getState();let i=r.size,o=r.viewport.dpr,s=r.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:c,set:f}=t.getState();if(l.width!==i.width||l.height!==i.height||u.dpr!==o){var d;i=l,o=u.dpr,Mre(a,l),c.setPixelRatio(u.dpr);const h=(d=l.updateStyle)!=null?d:typeof HTMLCanvasElement<"u"&&c.domElement instanceof HTMLCanvasElement;c.setSize(l.width,l.height,h)}a!==s&&(s=a,f(h=>({viewport:{...h.viewport,...h.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let bS,Gqe=new Set,qqe=new Set,Xqe=new Set;function j3(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function x0(n,e){switch(n){case"before":return j3(Gqe,e);case"after":return j3(qqe,e);case"tail":return j3(Xqe,e)}}let G3,q3;function X3(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),G3=e.internal.subscribers,bS=0;bS<G3.length;bS++)q3=G3[bS],q3.ref.current(q3.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Yqe(n){let e=!1,t=!1,r,i,o;function s(u){i=requestAnimationFrame(s),e=!0,r=0,x0("before",u),t=!0;for(const f of n.values()){var c;o=f.store.getState(),o.internal.active&&(o.frameloop==="always"||o.internal.frames>0)&&!((c=o.gl.xr)!=null&&c.isPresenting)&&(r+=X3(u,o))}if(t=!1,x0("after",u),r===0)return x0("tail",u),e=!1,cancelAnimationFrame(i)}function a(u,c=1){var f;if(!u)return n.forEach(d=>a(d.store.getState(),c));(f=u.gl.xr)!=null&&f.isPresenting||!u.internal.active||u.frameloop==="never"||(c>1?u.internal.frames=Math.min(60,u.internal.frames+c):t?u.internal.frames=2:u.internal.frames=1,e||(e=!0,requestAnimationFrame(s)))}function l(u,c=!0,f,d){if(c&&x0("before",u),f)X3(u,f,d);else for(const h of n.values())X3(u,h.store.getState());c&&x0("after",u)}return{loop:s,invalidate:a,advance:l}}function GL(){const n=z.useContext(jL);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function $r(n=t=>t,e){return GL()(n,e)}function wx(n,e=0){const t=GL(),r=t.getState().internal.subscribe,i=bre(n);return bx(()=>r(i,e,t),[e,r,t]),null}const Rg=new Map,{invalidate:IH,advance:LH}=Yqe(Rg),{reconciler:b1,applyProps:im}=Iqe(Rg,Vqe),om={objects:"shallow",strict:!1},Kqe=(n,e)=>{const t=typeof n=="function"?n(e):n;return Are(t)?t:new bL({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function Zqe(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:o,left:s,updateStyle:a=t}=e;return{width:r,height:i,top:o,left:s,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:r,height:i,top:o,left:s}=n.parentElement.getBoundingClientRect();return{width:r,height:i,top:o,left:s,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function Jqe(n){const e=Rg.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,o=r||jqe(IH,LH),s=t||b1.createContainer(o,Fm.ConcurrentRoot,null,!1,null,"",i,null);e||Rg.set(n,{fiber:s,store:o});let a,l=!1,u;return{configure(c={}){let{gl:f,size:d,scene:h,events:m,onCreated:g,shadows:y=!1,linear:p=!1,flat:w=!1,legacy:b=!1,orthographic:v=!1,frameloop:S="always",dpr:x=[1,2],performance:M,raycaster:A,camera:T,onPointerMissed:C}=c,D=o.getState(),R=D.gl;D.gl||D.set({gl:R=Kqe(f,n)});let B=D.raycaster;B||D.set({raycaster:B=new $L});const{params:F,...U}=A||{};if(mr.equ(U,B,om)||im(B,{...U}),mr.equ(F,B.params,om)||im(B,{params:{...B.params,...F}}),!D.camera||D.camera===u&&!mr.equ(u,T,om)){u=T;const X=T instanceof hx,Z=X?T:v?new Nf(0,0,0,0,.1,1e3):new Qr(75,0,.1,1e3);X||(Z.position.z=5,T&&(im(Z,T),("aspect"in T||"left"in T||"right"in T||"bottom"in T||"top"in T)&&(Z.manual=!0,Z.updateProjectionMatrix())),!D.camera&&!(T!=null&&T.rotation)&&Z.lookAt(0,0,0)),D.set({camera:Z}),B.camera=Z}if(!D.scene){let X;h instanceof f1?X=h:(X=new f1,h&&im(X,h)),D.set({scene:fm(X)})}if(!D.xr){var N;const X=(Y,re)=>{const fe=o.getState();fe.frameloop!=="never"&&LH(Y,!0,fe,re)},Z=()=>{const Y=o.getState();Y.gl.xr.enabled=Y.gl.xr.isPresenting,Y.gl.xr.setAnimationLoop(Y.gl.xr.isPresenting?X:null),Y.gl.xr.isPresenting||IH(Y)},te={connect(){const Y=o.getState().gl;Y.xr.addEventListener("sessionstart",Z),Y.xr.addEventListener("sessionend",Z)},disconnect(){const Y=o.getState().gl;Y.xr.removeEventListener("sessionstart",Z),Y.xr.removeEventListener("sessionend",Z)}};typeof((N=R.xr)==null?void 0:N.addEventListener)=="function"&&te.connect(),D.set({xr:te})}if(R.shadowMap){const X=R.shadowMap.enabled,Z=R.shadowMap.type;if(R.shadowMap.enabled=!!y,mr.boo(y))R.shadowMap.type=iy;else if(mr.str(y)){var I;const te={basic:ite,percentage:W2,soft:iy,variance:ja};R.shadowMap.type=(I=te[y])!=null?I:iy}else mr.obj(y)&&Object.assign(R.shadowMap,y);(X!==R.shadowMap.enabled||Z!==R.shadowMap.type)&&(R.shadowMap.needsUpdate=!0)}const V=yre();V&&("enabled"in V?V.enabled=!b:"legacyMode"in V&&(V.legacyMode=b)),l||im(R,{outputEncoding:p?3e3:3001,toneMapping:w?Zl:eL}),D.legacy!==b&&D.set(()=>({legacy:b})),D.linear!==p&&D.set(()=>({linear:p})),D.flat!==w&&D.set(()=>({flat:w})),f&&!mr.fun(f)&&!Are(f)&&!mr.equ(f,R,om)&&im(R,f),m&&!D.events.handlers&&D.set({events:m(o)});const L=Zqe(n,d);return mr.equ(L,D.size,om)||D.setSize(L.width,L.height,L.updateStyle,L.top,L.left),x&&D.viewport.dpr!==_re(x)&&D.setDpr(x),D.frameloop!==S&&D.setFrameloop(S),D.onPointerMissed||D.set({onPointerMissed:C}),M&&!mr.equ(M,D.performance,om)&&D.set(X=>({performance:{...X.performance,...M}})),a=g,l=!0,this},render(c){return l||this.configure(),b1.updateContainer(Q.jsx(Qqe,{store:o,children:c,onCreated:a,rootElement:n}),s,null,()=>{}),o},unmount(){Tre(n)}}}function Qqe({store:n,children:e,onCreated:t,rootElement:r}){return bx(()=>{const i=n.getState();i.set(o=>({internal:{...o.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),Q.jsx(jL.Provider,{value:n,children:e})}function Tre(n,e){const t=Rg.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),b1.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var o,s,a,l;i.events.disconnect==null||i.events.disconnect(),(o=i.gl)==null||(s=o.renderLists)==null||s.dispose==null||s.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),zqe(i),Rg.delete(n)}catch{}},500)})}}function eXe(n,e,t){return Q.jsx(tXe,{children:n,container:e,state:t},e.uuid)}function tXe({state:n={},children:e,container:t}){const{events:r,size:i,...o}=n,s=GL(),[a]=z.useState(()=>new $L),[l]=z.useState(()=>new nt),u=z.useCallback((f,d)=>{const h={...f};Object.keys(f).forEach(g=>{(Wqe.includes(g)||f[g]!==d[g]&&d[g])&&delete h[g]});let m;if(d&&i){const g=d.camera;m=f.viewport.getCurrentViewport(g,new me,i),g!==f.camera&&Mre(g,i)}return{...h,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:s,events:{...f.events,...d==null?void 0:d.events,...r},size:{...f.size,...i},viewport:{...f.viewport,...m},...o}},[n]),[c]=z.useState(()=>{const f=s.getState();return pre((h,m)=>({...f,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:s,events:{...f.events,...r},size:{...f.size,...i},...o,set:h,get:m,setEvents:g=>h(y=>({...y,events:{...y.events,...g}}))}))});return z.useEffect(()=>{const f=s.subscribe(d=>c.setState(h=>u(d,h)));return()=>{f()}},[u]),z.useEffect(()=>{c.setState(f=>u(s.getState(),f))},[u]),z.useEffect(()=>()=>{c.destroy()},[]),Q.jsx(Q.Fragment,{children:b1.createPortal(Q.jsx(jL.Provider,{value:c,children:e}),c,null)})}b1.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:z.version});const Y3={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function nXe(n){const{handlePointer:e}=Hqe(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(Y3).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:o}=n.getState();o.disconnect==null||o.disconnect(),i(s=>({events:{...s.events,connected:t}})),Object.entries((r=o.handlers)!=null?r:[]).forEach(([s,a])=>{const[l,u]=Y3[s];t.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([o,s])=>{if(r&&r.connected instanceof HTMLElement){const[a]=Y3[o];r.connected.removeEventListener(a,s)}}),t(o=>({events:{...o.events,connected:void 0}}))}}}}function RR(n,e,t){var r,i,o,s,a;e==null&&(e=100);function l(){var c=Date.now()-s;c<e&&c>=0?r=setTimeout(l,e-c):(r=null,t||(a=n.apply(o,i),o=i=null))}var u=function(){o=this,i=arguments,s=Date.now();var c=t&&!r;return r||(r=setTimeout(l,e)),c&&(a=n.apply(o,i),o=i=null),a};return u.clear=function(){r&&(clearTimeout(r),r=null)},u.flush=function(){r&&(a=n.apply(o,i),o=i=null,clearTimeout(r),r=null)},u}RR.debounce=RR;var rXe=RR;const FH=ll(rXe);var iXe=Object.defineProperty,oXe=Object.defineProperties,sXe=Object.getOwnPropertyDescriptors,BH=Object.getOwnPropertySymbols,aXe=Object.prototype.hasOwnProperty,lXe=Object.prototype.propertyIsEnumerable,zH=(n,e,t)=>e in n?iXe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,UH=(n,e)=>{for(var t in e||(e={}))aXe.call(e,t)&&zH(n,t,e[t]);if(BH)for(var t of BH(e))lXe.call(e,t)&&zH(n,t,e[t]);return n},uXe=(n,e)=>oXe(n,sXe(e)),VH,$H;typeof window<"u"&&((VH=window.document)!=null&&VH.createElement||(($H=window.navigator)==null?void 0:$H.product)==="ReactNative")?z.useLayoutEffect:z.useEffect;function Dre(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=n.child;for(;r;){const i=Dre(r,e,t);if(i)return i;r=r.sibling}}function Nre(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const HH=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=HH;return}return HH.apply(this,arguments)};const qL=Nre(z.createContext(null));class Pre extends z.Component{render(){return z.createElement(qL.Provider,{value:this._reactInternals},this.props.children)}}function cXe(){const n=z.useContext(qL);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=z.useId();return z.useMemo(()=>{for(const r of[n,n==null?void 0:n.alternate]){if(!r)continue;const i=Dre(r,!1,o=>{let s=o.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(i)return i}},[n,e])}function fXe(){const n=cXe(),[e]=z.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==qL&&!e.has(i)&&e.set(i,z.useContext(Nre(i)))}t=t.return}return e}function dXe(){const n=fXe();return z.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>z.createElement(e,null,z.createElement(t.Provider,uXe(UH({},r),{value:n.get(t)}))),e=>z.createElement(Pre,UH({},e))),[n])}function hXe({debounce:n,scroll:e,polyfill:t,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||typeof window<"u"&&window.ResizeObserver,[o,s]=z.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0});if(!i)return o.width=1280,o.height=800,[()=>{},o,()=>{}];const a=z.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,u=n?typeof n=="number"?n:n.resize:null,c=z.useRef(!1);z.useEffect(()=>(c.current=!0,()=>void(c.current=!1)));const[f,d,h]=z.useMemo(()=>{const p=()=>{if(!a.current.element)return;const{left:w,top:b,width:v,height:S,bottom:x,right:M,x:A,y:T}=a.current.element.getBoundingClientRect(),C={left:w,top:b,width:v,height:S,bottom:x,right:M,x:A,y:T};a.current.element instanceof HTMLElement&&r&&(C.height=a.current.element.offsetHeight,C.width=a.current.element.offsetWidth),Object.freeze(C),c.current&&!vXe(a.current.lastBounds,C)&&s(a.current.lastBounds=C)};return[p,u?FH(p,u):p,l?FH(p,l):p]},[s,r,l,u]);function m(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(p=>p.removeEventListener("scroll",h,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function g(){var p;a.current.element&&(a.current.resizeObserver=new i(d),(p=a.current.resizeObserver)==null||p.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(w=>w.addEventListener("scroll",h,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{h()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const y=p=>{!p||p===a.current.element||(m(),a.current.element=p,a.current.scrollContainers=Rre(p),g())};return mXe(h,!!e),pXe(d),z.useEffect(()=>{m(),g()},[e,h,d]),z.useEffect(()=>m,[]),[y,o,f]}function pXe(n){z.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function mXe(n,e){z.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function Rre(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(o=>o==="auto"||o==="scroll")&&e.push(n),[...e,...Rre(n.parentElement)]}const gXe=["x","y","top","bottom","left","right","width","height"],vXe=(n,e)=>gXe.every(t=>n[t]===e[t]),yXe=z.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:o,events:s=nXe,eventSource:a,eventPrefix:l,shadows:u,linear:c,flat:f,legacy:d,orthographic:h,frameloop:m,dpr:g,performance:y,raycaster:p,camera:w,scene:b,onPointerMissed:v,onCreated:S,...x},M){z.useMemo(()=>WL(Dqe),[]);const A=dXe(),[T,C]=hXe({scroll:!0,debounce:{scroll:50,resize:0},...r}),D=z.useRef(null),R=z.useRef(null);z.useImperativeHandle(M,()=>D.current);const B=bre(v),[F,U]=z.useState(!1),[N,I]=z.useState(!1);if(F)throw F;if(N)throw N;const V=z.useRef(null);bx(()=>{const X=D.current;C.width>0&&C.height>0&&X&&(V.current||(V.current=Jqe(X)),V.current.configure({gl:o,events:s,shadows:u,linear:c,flat:f,legacy:d,orthographic:h,frameloop:m,dpr:g,performance:y,raycaster:p,camera:w,scene:b,size:C,onPointerMissed:(...Z)=>B.current==null?void 0:B.current(...Z),onCreated:Z=>{Z.events.connect==null||Z.events.connect(a?Lqe(a)?a.current:a:R.current),l&&Z.setEvents({compute:(te,Y)=>{const re=te[l+"X"],fe=te[l+"Y"];Y.pointer.set(re/Y.size.width*2-1,-(fe/Y.size.height)*2+1),Y.raycaster.setFromCamera(Y.pointer,Y.camera)}}),S==null||S(Z)}}),V.current.render(Q.jsx(A,{children:Q.jsx(wre,{set:I,children:Q.jsx(z.Suspense,{fallback:Q.jsx(Fqe,{set:U}),children:e})})})))}),z.useEffect(()=>{const X=D.current;if(X)return()=>Tre(X)},[]);const L=a?"none":"auto";return Q.jsx("div",{ref:R,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:L,...i},...x,children:Q.jsx("div",{ref:T,style:{width:"100%",height:"100%"},children:Q.jsx("canvas",{ref:D,style:{display:"block"},children:t})})})}),xXe=z.forwardRef(function(e,t){return Q.jsx(Pre,{children:Q.jsx(yXe,{...e,ref:t})})});var bXe=Object.defineProperty,wXe=(n,e,t)=>e in n?bXe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Gt=(n,e,t)=>(wXe(n,typeof e!="symbol"?e+"":e,t),t);const wS=new ip,WH=new Ll,SXe=Math.cos(70*(Math.PI/180)),jH=(n,e)=>(n%e+e)%e;let _Xe=class extends du{constructor(e,t){super(),Gt(this,"object"),Gt(this,"domElement"),Gt(this,"enabled",!0),Gt(this,"target",new me),Gt(this,"minDistance",0),Gt(this,"maxDistance",1/0),Gt(this,"minZoom",0),Gt(this,"maxZoom",1/0),Gt(this,"minPolarAngle",0),Gt(this,"maxPolarAngle",Math.PI),Gt(this,"minAzimuthAngle",-1/0),Gt(this,"maxAzimuthAngle",1/0),Gt(this,"enableDamping",!1),Gt(this,"dampingFactor",.05),Gt(this,"enableZoom",!0),Gt(this,"zoomSpeed",1),Gt(this,"enableRotate",!0),Gt(this,"rotateSpeed",1),Gt(this,"enablePan",!0),Gt(this,"panSpeed",1),Gt(this,"screenSpacePanning",!0),Gt(this,"keyPanSpeed",7),Gt(this,"zoomToCursor",!1),Gt(this,"autoRotate",!1),Gt(this,"autoRotateSpeed",2),Gt(this,"reverseOrbit",!1),Gt(this,"reverseHorizontalOrbit",!1),Gt(this,"reverseVerticalOrbit",!1),Gt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Gt(this,"mouseButtons",{LEFT:Vd.ROTATE,MIDDLE:Vd.DOLLY,RIGHT:Vd.PAN}),Gt(this,"touches",{ONE:$d.ROTATE,TWO:$d.DOLLY_PAN}),Gt(this,"target0"),Gt(this,"position0"),Gt(this,"zoom0"),Gt(this,"_domElementKeyEvents",null),Gt(this,"getPolarAngle"),Gt(this,"getAzimuthalAngle"),Gt(this,"setPolarAngle"),Gt(this,"setAzimuthalAngle"),Gt(this,"getDistance"),Gt(this,"getZoomScale"),Gt(this,"listenToKeyEvents"),Gt(this,"stopListenToKeyEvents"),Gt(this,"saveState"),Gt(this,"reset"),Gt(this,"update"),Gt(this,"connect"),Gt(this,"dispose"),Gt(this,"dollyIn"),Gt(this,"dollyOut"),Gt(this,"getScale"),Gt(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.setPolarAngle=Ee=>{let $=jH(Ee,2*Math.PI),ce=c.phi;ce<0&&(ce+=2*Math.PI),$<0&&($+=2*Math.PI);let Ne=Math.abs($-ce);2*Math.PI-Ne<Ne&&($<ce?$+=2*Math.PI:ce+=2*Math.PI),f.phi=$-ce,r.update()},this.setAzimuthalAngle=Ee=>{let $=jH(Ee,2*Math.PI),ce=c.theta;ce<0&&(ce+=2*Math.PI),$<0&&($+=2*Math.PI);let Ne=Math.abs($-ce);2*Math.PI-Ne<Ne&&($<ce?$+=2*Math.PI:ce+=2*Math.PI),f.theta=$-ce,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=Ee=>{Ee.addEventListener("keydown",Fe),this._domElementKeyEvents=Ee},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Fe),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const Ee=new me,$=new me(0,1,0),ce=new Ii().setFromUnitVectors(e.up,$),Ne=ce.clone().invert(),Ge=new me,de=new Ii,Ye=2*Math.PI;return function(){const ne=r.object.position;ce.setFromUnitVectors(e.up,$),Ne.copy(ce).invert(),Ee.copy(ne).sub(r.target),Ee.applyQuaternion(ce),c.setFromVector3(Ee),r.autoRotate&&l===a.NONE&&F(R()),r.enableDamping?(c.theta+=f.theta*r.dampingFactor,c.phi+=f.phi*r.dampingFactor):(c.theta+=f.theta,c.phi+=f.phi);let le=r.minAzimuthAngle,ve=r.maxAzimuthAngle;isFinite(le)&&isFinite(ve)&&(le<-Math.PI?le+=Ye:le>Math.PI&&(le-=Ye),ve<-Math.PI?ve+=Ye:ve>Math.PI&&(ve-=Ye),le<=ve?c.theta=Math.max(le,Math.min(ve,c.theta)):c.theta=c.theta>(le+ve)/2?Math.max(le,c.theta):Math.min(ve,c.theta)),c.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,c.phi)),c.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(h,r.dampingFactor):r.target.add(h),r.zoomToCursor&&T||r.object.isOrthographicCamera?c.radius=Y(c.radius):c.radius=Y(c.radius*d),Ee.setFromSpherical(c),Ee.applyQuaternion(Ne),ne.copy(r.target).add(Ee),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(f.theta*=1-r.dampingFactor,f.phi*=1-r.dampingFactor,h.multiplyScalar(1-r.dampingFactor)):(f.set(0,0,0),h.set(0,0,0));let _e=!1;if(r.zoomToCursor&&T){let Oe=null;if(r.object instanceof Qr&&r.object.isPerspectiveCamera){const Ve=Ee.length();Oe=Y(Ve*d);const Xe=Ve-Oe;r.object.position.addScaledVector(M,Xe),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const Ve=new me(A.x,A.y,0);Ve.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/d)),r.object.updateProjectionMatrix(),_e=!0;const Xe=new me(A.x,A.y,0);Xe.unproject(r.object),r.object.position.sub(Xe).add(Ve),r.object.updateMatrixWorld(),Oe=Ee.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;Oe!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(Oe).add(r.object.position):(wS.origin.copy(r.object.position),wS.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(wS.direction))<SXe?e.lookAt(r.target):(WH.setFromNormalAndCoplanarPoint(r.object.up,r.target),wS.intersectPlane(WH,r.target))))}else r.object instanceof Nf&&r.object.isOrthographicCamera&&(_e=d!==1,_e&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/d)),r.object.updateProjectionMatrix()));return d=1,T=!1,_e||Ge.distanceToSquared(r.object.position)>u||8*(1-de.dot(r.object.quaternion))>u?(r.dispatchEvent(i),Ge.copy(r.object.position),de.copy(r.object.quaternion),_e=!1,!0):!1}})(),this.connect=Ee=>{r.domElement=Ee,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",Ze),r.domElement.addEventListener("pointerdown",Ce),r.domElement.addEventListener("pointercancel",J),r.domElement.addEventListener("wheel",ke)},this.dispose=()=>{var Ee,$,ce,Ne,Ge,de;r.domElement&&(r.domElement.style.touchAction="auto"),(Ee=r.domElement)==null||Ee.removeEventListener("contextmenu",Ze),($=r.domElement)==null||$.removeEventListener("pointerdown",Ce),(ce=r.domElement)==null||ce.removeEventListener("pointercancel",J),(Ne=r.domElement)==null||Ne.removeEventListener("wheel",ke),(Ge=r.domElement)==null||Ge.ownerDocument.removeEventListener("pointermove",q),(de=r.domElement)==null||de.ownerDocument.removeEventListener("pointerup",J),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",Fe)};const r=this,i={type:"change"},o={type:"start"},s={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const u=1e-6,c=new TR,f=new TR;let d=1;const h=new me,m=new nt,g=new nt,y=new nt,p=new nt,w=new nt,b=new nt,v=new nt,S=new nt,x=new nt,M=new me,A=new nt;let T=!1;const C=[],D={};function R(){return 2*Math.PI/60/60*r.autoRotateSpeed}function B(){return Math.pow(.95,r.zoomSpeed)}function F(Ee){r.reverseOrbit||r.reverseHorizontalOrbit?f.theta+=Ee:f.theta-=Ee}function U(Ee){r.reverseOrbit||r.reverseVerticalOrbit?f.phi+=Ee:f.phi-=Ee}const N=(()=>{const Ee=new me;return function(ce,Ne){Ee.setFromMatrixColumn(Ne,0),Ee.multiplyScalar(-ce),h.add(Ee)}})(),I=(()=>{const Ee=new me;return function(ce,Ne){r.screenSpacePanning===!0?Ee.setFromMatrixColumn(Ne,1):(Ee.setFromMatrixColumn(Ne,0),Ee.crossVectors(r.object.up,Ee)),Ee.multiplyScalar(ce),h.add(Ee)}})(),V=(()=>{const Ee=new me;return function(ce,Ne){const Ge=r.domElement;if(Ge&&r.object instanceof Qr&&r.object.isPerspectiveCamera){const de=r.object.position;Ee.copy(de).sub(r.target);let Ye=Ee.length();Ye*=Math.tan(r.object.fov/2*Math.PI/180),N(2*ce*Ye/Ge.clientHeight,r.object.matrix),I(2*Ne*Ye/Ge.clientHeight,r.object.matrix)}else Ge&&r.object instanceof Nf&&r.object.isOrthographicCamera?(N(ce*(r.object.right-r.object.left)/r.object.zoom/Ge.clientWidth,r.object.matrix),I(Ne*(r.object.top-r.object.bottom)/r.object.zoom/Ge.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function L(Ee){r.object instanceof Qr&&r.object.isPerspectiveCamera||r.object instanceof Nf&&r.object.isOrthographicCamera?d=Ee:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function X(Ee){L(d/Ee)}function Z(Ee){L(d*Ee)}function te(Ee){if(!r.zoomToCursor||!r.domElement)return;T=!0;const $=r.domElement.getBoundingClientRect(),ce=Ee.clientX-$.left,Ne=Ee.clientY-$.top,Ge=$.width,de=$.height;A.x=ce/Ge*2-1,A.y=-(Ne/de)*2+1,M.set(A.x,A.y,1).unproject(r.object).sub(r.object.position).normalize()}function Y(Ee){return Math.max(r.minDistance,Math.min(r.maxDistance,Ee))}function re(Ee){m.set(Ee.clientX,Ee.clientY)}function fe(Ee){te(Ee),v.set(Ee.clientX,Ee.clientY)}function ue(Ee){p.set(Ee.clientX,Ee.clientY)}function ge(Ee){g.set(Ee.clientX,Ee.clientY),y.subVectors(g,m).multiplyScalar(r.rotateSpeed);const $=r.domElement;$&&(F(2*Math.PI*y.x/$.clientHeight),U(2*Math.PI*y.y/$.clientHeight)),m.copy(g),r.update()}function Se(Ee){S.set(Ee.clientX,Ee.clientY),x.subVectors(S,v),x.y>0?X(B()):x.y<0&&Z(B()),v.copy(S),r.update()}function xe(Ee){w.set(Ee.clientX,Ee.clientY),b.subVectors(w,p).multiplyScalar(r.panSpeed),V(b.x,b.y),p.copy(w),r.update()}function De(Ee){te(Ee),Ee.deltaY<0?Z(B()):Ee.deltaY>0&&X(B()),r.update()}function Ae(Ee){let $=!1;switch(Ee.code){case r.keys.UP:V(0,r.keyPanSpeed),$=!0;break;case r.keys.BOTTOM:V(0,-r.keyPanSpeed),$=!0;break;case r.keys.LEFT:V(r.keyPanSpeed,0),$=!0;break;case r.keys.RIGHT:V(-r.keyPanSpeed,0),$=!0;break}$&&(Ee.preventDefault(),r.update())}function ie(){if(C.length==1)m.set(C[0].pageX,C[0].pageY);else{const Ee=.5*(C[0].pageX+C[1].pageX),$=.5*(C[0].pageY+C[1].pageY);m.set(Ee,$)}}function Re(){if(C.length==1)p.set(C[0].pageX,C[0].pageY);else{const Ee=.5*(C[0].pageX+C[1].pageX),$=.5*(C[0].pageY+C[1].pageY);p.set(Ee,$)}}function Pe(){const Ee=C[0].pageX-C[1].pageX,$=C[0].pageY-C[1].pageY,ce=Math.sqrt(Ee*Ee+$*$);v.set(0,ce)}function ee(){r.enableZoom&&Pe(),r.enablePan&&Re()}function oe(){r.enableZoom&&Pe(),r.enableRotate&&ie()}function Me(Ee){if(C.length==1)g.set(Ee.pageX,Ee.pageY);else{const ce=Je(Ee),Ne=.5*(Ee.pageX+ce.x),Ge=.5*(Ee.pageY+ce.y);g.set(Ne,Ge)}y.subVectors(g,m).multiplyScalar(r.rotateSpeed);const $=r.domElement;$&&(F(2*Math.PI*y.x/$.clientHeight),U(2*Math.PI*y.y/$.clientHeight)),m.copy(g)}function se(Ee){if(C.length==1)w.set(Ee.pageX,Ee.pageY);else{const $=Je(Ee),ce=.5*(Ee.pageX+$.x),Ne=.5*(Ee.pageY+$.y);w.set(ce,Ne)}b.subVectors(w,p).multiplyScalar(r.panSpeed),V(b.x,b.y),p.copy(w)}function G(Ee){const $=Je(Ee),ce=Ee.pageX-$.x,Ne=Ee.pageY-$.y,Ge=Math.sqrt(ce*ce+Ne*Ne);S.set(0,Ge),x.set(0,Math.pow(S.y/v.y,r.zoomSpeed)),X(x.y),v.copy(S)}function j(Ee){r.enableZoom&&G(Ee),r.enablePan&&se(Ee)}function he(Ee){r.enableZoom&&G(Ee),r.enableRotate&&Me(Ee)}function Ce(Ee){var $,ce;r.enabled!==!1&&(C.length===0&&(($=r.domElement)==null||$.ownerDocument.addEventListener("pointermove",q),(ce=r.domElement)==null||ce.ownerDocument.addEventListener("pointerup",J)),qe(Ee),Ee.pointerType==="touch"?He(Ee):ye(Ee))}function q(Ee){r.enabled!==!1&&(Ee.pointerType==="touch"?Ie(Ee):we(Ee))}function J(Ee){var $,ce,Ne;lt(Ee),C.length===0&&(($=r.domElement)==null||$.releasePointerCapture(Ee.pointerId),(ce=r.domElement)==null||ce.ownerDocument.removeEventListener("pointermove",q),(Ne=r.domElement)==null||Ne.ownerDocument.removeEventListener("pointerup",J)),r.dispatchEvent(s),l=a.NONE}function ye(Ee){let $;switch(Ee.button){case 0:$=r.mouseButtons.LEFT;break;case 1:$=r.mouseButtons.MIDDLE;break;case 2:$=r.mouseButtons.RIGHT;break;default:$=-1}switch($){case Vd.DOLLY:if(r.enableZoom===!1)return;fe(Ee),l=a.DOLLY;break;case Vd.ROTATE:if(Ee.ctrlKey||Ee.metaKey||Ee.shiftKey){if(r.enablePan===!1)return;ue(Ee),l=a.PAN}else{if(r.enableRotate===!1)return;re(Ee),l=a.ROTATE}break;case Vd.PAN:if(Ee.ctrlKey||Ee.metaKey||Ee.shiftKey){if(r.enableRotate===!1)return;re(Ee),l=a.ROTATE}else{if(r.enablePan===!1)return;ue(Ee),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(o)}function we(Ee){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;ge(Ee);break;case a.DOLLY:if(r.enableZoom===!1)return;Se(Ee);break;case a.PAN:if(r.enablePan===!1)return;xe(Ee);break}}function ke(Ee){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(Ee.preventDefault(),r.dispatchEvent(o),De(Ee),r.dispatchEvent(s))}function Fe(Ee){r.enabled===!1||r.enablePan===!1||Ae(Ee)}function He(Ee){switch(at(Ee),C.length){case 1:switch(r.touches.ONE){case $d.ROTATE:if(r.enableRotate===!1)return;ie(),l=a.TOUCH_ROTATE;break;case $d.PAN:if(r.enablePan===!1)return;Re(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case $d.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ee(),l=a.TOUCH_DOLLY_PAN;break;case $d.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;oe(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(o)}function Ie(Ee){switch(at(Ee),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;Me(Ee),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;se(Ee),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;j(Ee),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;he(Ee),r.update();break;default:l=a.NONE}}function Ze(Ee){r.enabled!==!1&&Ee.preventDefault()}function qe(Ee){C.push(Ee)}function lt(Ee){delete D[Ee.pointerId];for(let $=0;$<C.length;$++)if(C[$].pointerId==Ee.pointerId){C.splice($,1);return}}function at(Ee){let $=D[Ee.pointerId];$===void 0&&($=new nt,D[Ee.pointerId]=$),$.set(Ee.pageX,Ee.pageY)}function Je(Ee){const $=Ee.pointerId===C[0].pointerId?C[1]:C[0];return D[$.pointerId]}this.dollyIn=(Ee=B())=>{Z(Ee),r.update()},this.dollyOut=(Ee=B())=>{X(Ee),r.update()},this.getScale=()=>d,this.setScale=Ee=>{L(Ee),r.update()},this.getZoomScale=()=>B(),t!==void 0&&this.connect(t),this.update()}};function Ore(n,e,t,r){const i=class extends Ra{constructor(s={}){const a=Object.entries(n);super({uniforms:a.reduce((l,[u,c])=>{const f=gL.clone({[u]:{value:c}});return{...l,...f}},{}),vertexShader:e,fragmentShader:t}),this.key="",a.forEach(([l])=>Object.defineProperty(this,l,{get:()=>this.uniforms[l].value,set:u=>this.uniforms[l].value=u})),Object.assign(this,s)}};return i.key=rne.generateUUID(),i}const EXe=()=>parseInt(ux.replace(/\D+/g,"")),MXe=EXe();function CXe(n,e,t){const r=$r(d=>d.size),i=$r(d=>d.viewport),o=typeof n=="number"?n:r.width*i.dpr,s=r.height*i.dpr,a=(typeof n=="number"?t:n)||{},{samples:l=0,depth:u,...c}=a,f=z.useMemo(()=>{const d=new Pa(o,s,{minFilter:gr,magFilter:gr,type:zh,...c});return u&&(d.depthTexture=new K2(o,s,Is)),d.samples=l,d},[]);return z.useLayoutEffect(()=>{f.setSize(o,s),l&&(f.samples=l)},[l,f,o,s]),z.useEffect(()=>()=>f.dispose(),[]),f}const AXe=n=>typeof n=="function",kre=z.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,children:r,makeDefault:i,...o},s)=>{const a=$r(({set:y})=>y),l=$r(({camera:y})=>y),u=$r(({size:y})=>y),c=z.useRef(null);z.useImperativeHandle(s,()=>c.current,[]);const f=z.useRef(null),d=CXe(e);z.useLayoutEffect(()=>{o.manual||c.current.updateProjectionMatrix()},[u,o]),z.useLayoutEffect(()=>{c.current.updateProjectionMatrix()}),z.useLayoutEffect(()=>{if(i){const y=l;return a(()=>({camera:c.current})),()=>a(()=>({camera:y}))}},[c,i,a]);let h=0,m=null;const g=AXe(r);return wx(y=>{g&&(t===1/0||h<t)&&(f.current.visible=!1,y.gl.setRenderTarget(d),m=y.scene.background,n&&(y.scene.background=n),y.gl.render(y.scene,c.current),y.scene.background=m,y.gl.setRenderTarget(null),f.current.visible=!0,h++)}),z.createElement(z.Fragment,null,z.createElement("orthographicCamera",pt({left:u.width/-2,right:u.width/2,top:u.height/2,bottom:u.height/-2,ref:c},o),!g&&r),z.createElement("group",{ref:f},g&&r(d.texture)))}),TXe=z.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:r,enableDamping:i=!0,keyEvents:o=!1,onChange:s,onStart:a,onEnd:l,...u},c)=>{const f=$r(x=>x.invalidate),d=$r(x=>x.camera),h=$r(x=>x.gl),m=$r(x=>x.events),g=$r(x=>x.setEvents),y=$r(x=>x.set),p=$r(x=>x.get),w=$r(x=>x.performance),b=e||d,v=r||m.connected||h.domElement,S=z.useMemo(()=>new _Xe(b),[b]);return wx(()=>{S.enabled&&S.update()},-1),z.useEffect(()=>(o&&S.connect(o===!0?v:o),S.connect(v),()=>void S.dispose()),[o,v,t,S,f]),z.useEffect(()=>{const x=T=>{f(),t&&w.regress(),s&&s(T)},M=T=>{a&&a(T)},A=T=>{l&&l(T)};return S.addEventListener("change",x),S.addEventListener("start",M),S.addEventListener("end",A),()=>{S.removeEventListener("start",M),S.removeEventListener("end",A),S.removeEventListener("change",x)}},[s,a,l,S,f,g]),z.useEffect(()=>{if(n){const x=p().controls;return y({controls:S}),()=>y({controls:x})}},[n,S]),z.createElement("primitive",pt({ref:c,object:S,enableDamping:i},u))});function DXe({defaultScene:n,defaultCamera:e,renderPriority:t=1}){const{gl:r,scene:i,camera:o}=$r();let s;return wx(()=>{s=r.autoClear,t===1&&(r.autoClear=!0,r.render(n,e)),r.autoClear=!1,r.clearDepth(),r.render(i,o),r.autoClear=s},t),z.createElement("group",{onPointerOver:()=>null})}function NXe({children:n,renderPriority:e=1}){const{scene:t,camera:r}=$r(),[i]=z.useState(()=>new f1);return z.createElement(z.Fragment,null,eXe(z.createElement(z.Fragment,null,n,z.createElement(DXe,{defaultScene:t,defaultCamera:r,renderPriority:e})),i,{events:{priority:e+1}}))}const Ire=z.createContext({}),PXe=()=>z.useContext(Ire),RXe=2*Math.PI,GH=new Dn,qH=new Qt,[sm,K3]=[new Ii,new Ii],XH=new me,YH=new me,OXe=n=>"minPolarAngle"in n,KH=n=>"getTarget"in n,kXe=({alignment:n="bottom-right",margin:e=[80,80],renderPriority:t=1,onUpdate:r,onTarget:i,children:o})=>{const s=$r(x=>x.size),a=$r(x=>x.camera),l=$r(x=>x.controls),u=$r(x=>x.invalidate),c=z.useRef(null),f=z.useRef(null),d=z.useRef(!1),h=z.useRef(0),m=z.useRef(new me(0,0,0)),g=z.useRef(new me(0,0,0));z.useEffect(()=>{g.current.copy(a.up)},[a]);const y=z.useCallback(x=>{d.current=!0,(l||i)&&(m.current=(i==null?void 0:i())||(KH(l)?l.getTarget(m.current):l==null?void 0:l.target)),h.current=a.position.distanceTo(XH),sm.copy(a.quaternion),YH.copy(x).multiplyScalar(h.current).add(XH),GH.lookAt(YH),K3.copy(GH.quaternion),u()},[l,a,i,u]);wx((x,M)=>{if(f.current&&c.current){var A;if(d.current)if(sm.angleTo(K3)<.01)d.current=!1,OXe(l)&&a.up.copy(g.current);else{const T=M*RXe;sm.rotateTowards(K3,T),a.position.set(0,0,1).applyQuaternion(sm).multiplyScalar(h.current).add(m.current),a.up.set(0,1,0).applyQuaternion(sm).normalize(),a.quaternion.copy(sm),KH(l)&&l.setPosition(a.position.x,a.position.y,a.position.z),r?r():l&&l.update(M),u()}qH.copy(a.matrix).invert(),(A=c.current)==null||A.quaternion.setFromRotationMatrix(qH)}});const p=z.useMemo(()=>({tweenCamera:y}),[y]),[w,b]=e,v=n.endsWith("-center")?0:n.endsWith("-left")?-s.width/2+w:s.width/2-w,S=n.startsWith("center-")?0:n.startsWith("top-")?s.height/2-b:-s.height/2+b;return z.createElement(NXe,{renderPriority:t},z.createElement(Ire.Provider,{value:p},z.createElement(kre,{makeDefault:!0,ref:f,position:[0,0,200]}),z.createElement("group",{ref:c,position:[v,S,0]},o)))};function Z3({scale:n=[.8,.05,.05],color:e,rotation:t}){return z.createElement("group",{rotation:t},z.createElement("mesh",{position:[.4,0,0]},z.createElement("boxGeometry",{args:n}),z.createElement("meshBasicMaterial",{color:e,toneMapped:!1})))}function am({onClick:n,font:e,disabled:t,arcStyle:r,label:i,labelColor:o,axisHeadScale:s=1,...a}){const l=$r(g=>g.gl),u=z.useMemo(()=>{const g=document.createElement("canvas");g.width=64,g.height=64;const y=g.getContext("2d");return y.beginPath(),y.arc(32,32,16,0,2*Math.PI),y.closePath(),y.fillStyle=r,y.fill(),i&&(y.font=e,y.textAlign="center",y.fillStyle=o,y.fillText(i,32,41)),new Tne(g)},[r,i,o,e]),[c,f]=z.useState(!1),d=(i?1:.75)*(c?1.2:1)*s,h=g=>{g.stopPropagation(),f(!0)},m=g=>{g.stopPropagation(),f(!1)};return z.createElement("sprite",pt({scale:d,onPointerOver:t?void 0:h,onPointerOut:t?void 0:n||m},a),z.createElement("spriteMaterial",{map:u,"map-anisotropy":l.capabilities.getMaxAnisotropy()||1,alphaTest:.3,opacity:i?1:.75,toneMapped:!1}))}const IXe=({hideNegativeAxes:n,hideAxisHeads:e,disabled:t,font:r="18px Inter var, Arial, sans-serif",axisColors:i=["#ff2060","#20df80","#2080ff"],axisHeadScale:o=1,axisScale:s,labels:a=["X","Y","Z"],labelColor:l="#000",onClick:u,...c})=>{const[f,d,h]=i,{tweenCamera:m}=PXe(),g={font:r,disabled:t,labelColor:l,onClick:u,axisHeadScale:o,onPointerDown:t?void 0:y=>{m(y.object.position),y.stopPropagation()}};return z.createElement("group",pt({scale:40},c),z.createElement(Z3,{color:f,rotation:[0,0,0],scale:s}),z.createElement(Z3,{color:d,rotation:[0,0,Math.PI/2],scale:s}),z.createElement(Z3,{color:h,rotation:[0,-Math.PI/2,0],scale:s}),!e&&z.createElement(z.Fragment,null,z.createElement(am,pt({arcStyle:f,position:[1,0,0],label:a[0]},g)),z.createElement(am,pt({arcStyle:d,position:[0,1,0],label:a[1]},g)),z.createElement(am,pt({arcStyle:h,position:[0,0,1],label:a[2]},g)),!n&&z.createElement(z.Fragment,null,z.createElement(am,pt({arcStyle:f,position:[-1,0,0]},g)),z.createElement(am,pt({arcStyle:d,position:[0,-1,0]},g)),z.createElement(am,pt({arcStyle:h,position:[0,0,-1]},g)))))},LXe=Ore({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,fadeFrom:1,cellThickness:.5,sectionThickness:1,cellColor:new gt,sectionColor:new gt,infiniteGrid:!1,followCamera:!1,worldCamProjPosition:new me,worldPlanePosition:new me},`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform vec3 worldPlanePosition;
    uniform float fadeDistance;
    uniform bool infiniteGrid;
    uniform bool followCamera;

    void main() {
      localPosition = position.xzy;
      if (infiniteGrid) localPosition *= 1.0 + fadeDistance;
      
      worldPosition = modelMatrix * vec4(localPosition, 1.0);
      if (followCamera) {
        worldPosition.xyz += (worldCamProjPosition - worldPlanePosition);
        localPosition = (inverse(modelMatrix) * worldPosition).xyz;
      }

      gl_Position = projectionMatrix * viewMatrix * worldPosition;
    }
  `,`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform float cellSize;
    uniform float sectionSize;
    uniform vec3 cellColor;
    uniform vec3 sectionColor;
    uniform float fadeDistance;
    uniform float fadeStrength;
    uniform float fadeFrom;
    uniform float cellThickness;
    uniform float sectionThickness;

    float getGrid(float size, float thickness) {
      vec2 r = localPosition.xz / size;
      vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
      float line = min(grid.x, grid.y) + 1.0 - thickness;
      return 1.0 - min(line, 1.0);
    }

    void main() {
      float g1 = getGrid(cellSize, cellThickness);
      float g2 = getGrid(sectionSize, sectionThickness);

      vec3 from = worldCamProjPosition*vec3(fadeFrom);
      float dist = distance(from, worldPosition.xyz);
      float d = 1.0 - min(dist / fadeDistance, 1.0);
      vec3 color = mix(cellColor, sectionColor, min(1.0, sectionThickness * g2));

      gl_FragColor = vec4(color, (g1 + g2) * pow(d, fadeStrength));
      gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
      if (gl_FragColor.a <= 0.0) discard;

      #include <tonemapping_fragment>
      #include <${MXe>=154?"colorspace_fragment":"encodings_fragment"}>
    }
  `),FXe=z.forwardRef(({args:n,cellColor:e="#000000",sectionColor:t="#2080ff",cellSize:r=.5,sectionSize:i=1,followCamera:o=!1,infiniteGrid:s=!1,fadeDistance:a=100,fadeStrength:l=1,fadeFrom:u=1,cellThickness:c=.5,sectionThickness:f=1,side:d=yo,...h},m)=>{WL({GridMaterial:LXe});const g=z.useRef(null);z.useImperativeHandle(m,()=>g.current,[]);const y=new Ll,p=new me(0,1,0),w=new me(0,0,0);wx(S=>{y.setFromNormalAndCoplanarPoint(p,w).applyMatrix4(g.current.matrixWorld);const x=g.current.material,M=x.uniforms.worldCamProjPosition,A=x.uniforms.worldPlanePosition;y.projectPoint(S.camera.position,M.value),A.value.set(0,0,0).applyMatrix4(g.current.matrixWorld)});const b={cellSize:r,sectionSize:i,cellColor:e,sectionColor:t,cellThickness:c,sectionThickness:f},v={fadeDistance:a,fadeStrength:l,fadeFrom:u,infiniteGrid:s,followCamera:o};return z.createElement("mesh",pt({ref:g,frustumCulled:!1},h),z.createElement("gridMaterial",pt({transparent:!0,"extensions-derivatives":!0,side:d},b,v)),z.createElement("planeGeometry",{args:n}))}),Pf={uniforms:{strokeOpacity:1,fillOpacity:.25,fillMix:0,thickness:.05,colorBackfaces:!1,dashInvert:!0,dash:!1,dashRepeats:4,dashLength:.5,squeeze:!1,squeezeMin:.2,squeezeMax:1,stroke:new gt("#ff0000"),backfaceStroke:new gt("#0000ff"),fill:new gt("#00ff00")},vertex:`
	  attribute vec3 barycentric;
	
		varying vec3 v_edges_Barycentric;
		varying vec3 v_edges_Position;

		void initWireframe() {
			v_edges_Barycentric = barycentric;
			v_edges_Position = position.xyz;
		}
	  `,fragment:`
		#ifndef PI
	  	#define PI 3.1415926535897932384626433832795
		#endif
  
	  varying vec3 v_edges_Barycentric;
	  varying vec3 v_edges_Position;
  
	  uniform float strokeOpacity;
	  uniform float fillOpacity;
	  uniform float fillMix;
	  uniform float thickness;
	  uniform bool colorBackfaces;
  
	  // Dash
	  uniform bool dashInvert;
	  uniform bool dash;
	  uniform bool dashOnly;
	  uniform float dashRepeats;
	  uniform float dashLength;
  
	  // Squeeze
	  uniform bool squeeze;
	  uniform float squeezeMin;
	  uniform float squeezeMax;
  
	  // Colors
	  uniform vec3 stroke;
	  uniform vec3 backfaceStroke;
	  uniform vec3 fill;
  
	  // This is like
	  float wireframe_aastep(float threshold, float dist) {
		  float afwidth = fwidth(dist) * 0.5;
		  return smoothstep(threshold - afwidth, threshold + afwidth, dist);
	  }
  
	  float wireframe_map(float value, float min1, float max1, float min2, float max2) {
		  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
	  }
  
	  float getWireframe() {
			vec3 barycentric = v_edges_Barycentric;
		
			// Distance from center of each triangle to its edges.
			float d = min(min(barycentric.x, barycentric.y), barycentric.z);

			// for dashed rendering, we can use this to get the 0 .. 1 value of the line length
			float positionAlong = max(barycentric.x, barycentric.y);
			if (barycentric.y < barycentric.x && barycentric.y < barycentric.z) {
				positionAlong = 1.0 - positionAlong;
			}

			// the thickness of the stroke
			float computedThickness = wireframe_map(thickness, 0.0, 1.0, 0.0, 0.34);

			// if we want to shrink the thickness toward the center of the line segment
			if (squeeze) {
				computedThickness *= mix(squeezeMin, squeezeMax, (1.0 - sin(positionAlong * PI)));
			}

			// Create dash pattern
			if (dash) {
				// here we offset the stroke position depending on whether it
				// should overlap or not
				float offset = 1.0 / dashRepeats * dashLength / 2.0;
				if (!dashInvert) {
					offset += 1.0 / dashRepeats / 2.0;
				}

				// if we should animate the dash or not
				// if (dashAnimate) {
				// 	offset += time * 0.22;
				// }

				// create the repeating dash pattern
				float pattern = fract((positionAlong + offset) * dashRepeats);
				computedThickness *= 1.0 - wireframe_aastep(dashLength, pattern);
			}

			// compute the anti-aliased stroke edge  
			float edge = 1.0 - wireframe_aastep(computedThickness, d);

			return edge;
	  }
	  `},BXe=Ore(Pf.uniforms,Pf.vertex+`
  	void main() {
		initWireframe();
		gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
	}
  `,Pf.fragment+`
  void main () {
		// Compute color

		float edge = getWireframe();
		vec4 colorStroke = vec4(stroke, edge);

		#ifdef FLIP_SIDED
			colorStroke.rgb = backfaceStroke;
		#endif
    
		vec4 colorFill = vec4(fill, fillOpacity);
		vec4 outColor = mix(colorFill, colorStroke, edge * strokeOpacity);

		gl_FragColor = outColor;
	}
  `);function zXe(n,e){n.onBeforeCompile=t=>{t.uniforms={...t.uniforms,...e},t.vertexShader=t.vertexShader.replace("void main() {",`
		  ${Pf.vertex}
		  void main() {
			initWireframe();
		`),t.fragmentShader=t.fragmentShader.replace("void main() {",`
		  ${Pf.fragment}
		  void main() {
		`),t.fragmentShader=t.fragmentShader.replace("#include <color_fragment>",`
		  #include <color_fragment>
			  float edge = getWireframe();
		  vec4 colorStroke = vec4(stroke, edge);
		  #ifdef FLIP_SIDED
			colorStroke.rgb = backfaceStroke;
		  #endif
		  vec4 colorFill = vec4(mix(diffuseColor.rgb, fill, fillMix), mix(diffuseColor.a, fillOpacity, fillMix));
		  vec4 outColor = mix(colorFill, colorStroke, edge * strokeOpacity);

		  diffuseColor.rgb = outColor.rgb;
		  diffuseColor.a *= outColor.a;
		`)},n.side=ma,n.transparent=!0}function UXe(n,e){z.useEffect(()=>{var t;return void(n.fillOpacity.value=(t=e.fillOpacity)!==null&&t!==void 0?t:n.fillOpacity.value)},[e.fillOpacity]),z.useEffect(()=>{var t;return void(n.fillMix.value=(t=e.fillMix)!==null&&t!==void 0?t:n.fillMix.value)},[e.fillMix]),z.useEffect(()=>{var t;return void(n.strokeOpacity.value=(t=e.strokeOpacity)!==null&&t!==void 0?t:n.strokeOpacity.value)},[e.strokeOpacity]),z.useEffect(()=>{var t;return void(n.thickness.value=(t=e.thickness)!==null&&t!==void 0?t:n.thickness.value)},[e.thickness]),z.useEffect(()=>void(n.colorBackfaces.value=!!e.colorBackfaces),[e.colorBackfaces]),z.useEffect(()=>void(n.dash.value=!!e.dash),[e.dash]),z.useEffect(()=>void(n.dashInvert.value=!!e.dashInvert),[e.dashInvert]),z.useEffect(()=>{var t;return void(n.dashRepeats.value=(t=e.dashRepeats)!==null&&t!==void 0?t:n.dashRepeats.value)},[e.dashRepeats]),z.useEffect(()=>{var t;return void(n.dashLength.value=(t=e.dashLength)!==null&&t!==void 0?t:n.dashLength.value)},[e.dashLength]),z.useEffect(()=>void(n.squeeze.value=!!e.squeeze),[e.squeeze]),z.useEffect(()=>{var t;return void(n.squeezeMin.value=(t=e.squeezeMin)!==null&&t!==void 0?t:n.squeezeMin.value)},[e.squeezeMin]),z.useEffect(()=>{var t;return void(n.squeezeMax.value=(t=e.squeezeMax)!==null&&t!==void 0?t:n.squeezeMax.value)},[e.squeezeMax]),z.useEffect(()=>void(n.stroke.value=e.stroke?new gt(e.stroke):n.stroke.value),[e.stroke]),z.useEffect(()=>void(n.fill.value=e.fill?new gt(e.fill):n.fill.value),[e.fill]),z.useEffect(()=>void(n.backfaceStroke.value=e.backfaceStroke?new gt(e.backfaceStroke):n.backfaceStroke.value),[e.backfaceStroke])}function VXe(n){return!!(n!=null&&n.geometry)}function $Xe(n){return!!(n!=null&&n.isBufferGeometry)}function HXe(n){return!!(n!=null&&n.current)}function ZH(n){return(n==null?void 0:n.current)!==void 0}function JH(n){return n.type==="WireframeGeometry"}function WXe(){const n={};for(const e in Pf.uniforms)n[e]={value:Pf.uniforms[e]};return n}function jXe(n,e){const r=n.getAttribute("position").count,i=[];for(let o=0;o<r;o++){const s=o%2===0,a=e?1:0;s?i.push(0,0,1,0,1,0,1,0,a):i.push(0,1,0,0,0,1,1,0,a)}return new $n(Float32Array.from(i),3)}function Lre(n){const e=HXe(n)?n.current:n;if($Xe(e))return e;{if(JH(e))throw new Error("Wireframe: WireframeGeometry is not supported.");const t=e.parent;if(VXe(t)){if(JH(t.geometry))throw new Error("Wireframe: WireframeGeometry is not supported.");return t.geometry}}}function Fre(n,e){if(n.index){console.warn("Wireframe: Requires non-indexed geometry, converting to non-indexed geometry.");const r=n.toNonIndexed();n.copy(r),n.setIndex(null)}const t=jXe(n,e);n.setAttribute("barycentric",t)}function GXe({geometry:n,simplify:e=!1,...t}){WL({MeshWireframeMaterial:BXe});const[r,i]=z.useState(null);z.useLayoutEffect(()=>{const s=Lre(n);if(!s)throw new Error("Wireframe: geometry prop must be a BufferGeometry or a ref to a BufferGeometry.");Fre(s,e),ZH(n)&&i(s)},[e,n]);const o=ZH(n)?r:n;return z.createElement(z.Fragment,null,o&&z.createElement("mesh",{geometry:o},z.createElement("meshWireframeMaterial",pt({attach:"material",transparent:!0,side:ma,polygonOffset:!0,polygonOffsetFactor:-4},t,{extensions:{derivatives:!0,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1}}))))}function qXe({simplify:n=!1,...e}){const t=z.useRef(null),r=z.useMemo(()=>WXe(),[Pf.uniforms]);return UXe(r,e),z.useLayoutEffect(()=>{const i=Lre(t);if(!i)throw new Error("Wireframe: Must be a child of a Mesh, Line or Points object or specify a geometry prop.");const o=i.clone();return Fre(i,n),()=>{i.copy(o),o.dispose()}},[n]),z.useLayoutEffect(()=>{const i=t.current.parent,o=i.material.clone();return zXe(i.material,r),()=>{i.material.dispose(),i.material=o}},[]),z.createElement("object3D",{ref:t})}function OR({geometry:n,...e}){return n?z.createElement(GXe,pt({geometry:n},e)):z.createElement(qXe,e)}const XXe=Te.memo(Te.forwardRef(function({axesParam:e,enableDamping:t},r){return Q.jsxs(Q.Fragment,{children:[Q.jsx(TXe,{ref:r,panSpeed:1.5,zoomSpeed:.5,enableDamping:t}),e&&Q.jsx(kXe,{alignment:"bottom-right",margin:[70,100],onTarget:()=>{var i;return(i=r==null?void 0:r.current)==null?void 0:i.target},onUpdate:()=>{var i;(i=r.current)==null||i.update()},children:Q.jsx(IXe,{font:"18px Inter var, HKGrotesk, sans-serif"})})]})}));Dn.DEFAULT_UP.set(0,0,1);function Bre({children:n,...e}){const t=Math.min(window.devicePixelRatio,2);let r=e.cameraZoom,i=e.outdatedMesh?"#ababab":"#f5f5f5";const o=z.useRef(),[s,a]=z.useState(10/r),[l,u]=z.useState(100),[c,f]=z.useState(.3);z.useEffect(()=>{s<10?u(1):s<100?u(10):s<1e3&&u(100),f(s/2)},[s,r]);let d=r;return window.addEventListener("wheel",h=>{o.current&&Math.abs(o.current.zoom-d)>3&&(d=o.current.zoom,a(50/o.current.zoom))}),Q.jsx(z.Suspense,{fallback:null,children:Q.jsxs(xXe,{id:"threeCanvas",style:{backgroundColor:i},dpr:t,frameloop:"always",shadows:!0,children:[Q.jsx(kre,{ref:o,makeDefault:!0,near:.1,pov:1e3,far:9e4,zoom:r,position:[3e3,3e3,5e3]}),e.gridParam?Q.jsx(FXe,{position:[0,0,0],cellSize:l,args:[1e4,1e4],cellColor:"#726482",fadeFrom:0,lineColor:"#BFA301",sectionColor:"#BFA301",fadeDistance:9e3,rotation:[Math.PI/2,0,0],sectionSize:l*10}):null,Q.jsx(XXe,{axesParam:e.axesParam,enableDamping:!1}),e.outdatedMesh?Q.jsx("ambientLight",{intensity:.4}):Q.jsx("ambientLight",{intensity:.9}),n]})})}function zre(n,e,t){if(n.clearGroups(),delete n.userData.faceGroups,n.setIndex(e.triangles),n.setAttribute("position",new Rt(e.vertices,3)),e.faceGroups){let r=new Set;n.userData.faceGroups=e.faceGroups,e.faceGroups.forEach(({start:i,count:o,faceId:s})=>{n.addGroup(i,o,r.has(s)?1:0)})}else n.addGroup(0,e.triangles.length,0);e.normals&&e.normals.length?n.setAttribute("normal",new Rt(e.normals,3)):n.computeVertexNormals(),n.computeBoundingBox()}function Ure(n,e,t){if(n.clearGroups(),delete n.userData.edgeGroups,n.setAttribute("position",new Rt(e.lines,3)),!!e)if(e.edgeGroups){let r=new Set;n.userData.edgeGroups=e.edgeGroups,e.edgeGroups.forEach(({start:i,count:o,edgeId:s})=>{n.addGroup(i,o,r.has(s)?1:0)})}else n.addGroup(0,e.lines.length/3,0)}function Vre(n,e){n.clearGroups(),delete n.userData.edgeGroups,n.copy(new NL(e,2))}const $re=Te.memo(function({mesh:e,isSolid:t,setOutdatedMesh:r}){const{invalidate:i}=$r(),[o,s]=z.useState([]);return z.useLayoutEffect(()=>{let a=[];e.map(l=>{const u=new sn,c=new sn;l.faces&&zre(u,l.faces),l.edges?Ure(c,l.edges):l.faces&&Vre(c,u);const f=u,d=c,h=l.color;h=="#D9544D"?a.push({body:f,lines:d,color:h,solid:!1}):a.push({body:f,lines:d,color:h,solid:t})}),s(a),i()},[e,i]),z.useEffect(()=>()=>{r(!1),i()},[i]),Q.jsx(Q.Fragment,{children:o.map((a,l)=>Q.jsxs("group",{children:[t?Q.jsx(OR,{geometry:a.body,stroke:a.color,squeeze:!0,dash:!1,simplify:!0,fill:a.color,fillOpacity:.2,strokeOpacity:.5}):Q.jsx("mesh",{geometry:a.body,children:a.color!="#D9544D"?Q.jsx("meshMatcapMaterial",{color:a.color,polygonOffset:!0,polygonOffsetFactor:2,polygonOffsetUnits:1},"material"+a.color):Q.jsx(OR,{geometry:a.body,stroke:a.color,squeeze:!0,dash:!1,simplify:!0,fill:a.color,fillOpacity:.2,strokeOpacity:.5})},"mesh"+a.color),Q.jsx("lineSegments",{geometry:a.lines},"lines"+a.color),Q.jsx("lineSegments",{geometry:a.lines,children:Q.jsx("lineBasicMaterial",{color:"#3c5a6e",opacity:"1",linewidth:8})},"linesmesh"+a.color)]},"group"+a.color+l))})}),Hre=Te.memo(function({mesh:e}){const{invalidate:t}=$r(),[r,i]=z.useState([]);return z.useLayoutEffect(()=>{let o=[];e.map(s=>{const a=new sn,l=new sn;s.faces&&zre(a,s.faces),s.edges?Ure(l,s.edges):s.faces&&Vre(l,a);const u=a,c=l,f=s.color;o.push({body:u,lines:c,color:f})}),i(o),t()},[e,t]),z.useEffect(()=>()=>{t()},[t]),Q.jsx(Q.Fragment,{children:r.map((o,s)=>Q.jsx("group",{children:Q.jsx(OR,{geometry:o.body,stroke:"#bebbbf",squeeze:!0,dash:!1,simplify:!0,fill:"#bebbbf",fillOpacity:.1,strokeOpacity:.2})},"groupwire"+o.color+s))})});function Wre({run:n,isItOwned:e}){const[t,r]=z.useState(n),i=()=>{r(!t)};if(O.currentRepo)return t?Q.jsx(Q.Fragment,{children:Q.jsx(Oy,{to:e?`/${O.currentRepo.owner}/${O.currentRepo.repoName}`:"/",onClick:i,children:Q.jsx("label",{title:"Create/Run Mode",className:"switch_run",children:Q.jsxs("button",{style:{width:"100px",backgroundColor:"#3F4243",borderRadius:"12px",display:"flex"},children:[Q.jsx("svg",{width:"12",height:"8",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",className:"leva-c-cHvNmv",style:{transform:"rotate(90deg)",alignSelf:"center",fill:"#c4a3d5"},children:Q.jsx("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"})}),Q.jsx("p",{style:{fontSize:"12px",padding:"0 5px 0 5px",color:"#c4a3d5",fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace"},children:e?"Create Mode":"Browse Projects"})]})})},O.currentRepo.id)}):Q.jsx(Q.Fragment,{children:Q.jsx(Oy,{to:O.currentRepo?`/run/${O.currentRepo.owner}/${O.currentRepo.repoName}`:"/run",onClick:i,style:{position:"absolute"},children:Q.jsx("label",{title:"Create/Run Mode",className:"switch",children:Q.jsxs("button",{style:{width:"100px",backgroundColor:"#3F4243",borderRadius:"12px",display:"flex"},children:[Q.jsx("p",{style:{fontSize:"12px",padding:"0 5px 0 5px",color:"#c4a3d5",fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace"},children:"Run Mode"}),Q.jsx("svg",{width:"12",height:"8",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",className:"leva-c-cHvNmv",style:{transform:"rotate(-90deg)",alignSelf:"center",fill:"#c4a3d5"},children:Q.jsx("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"})})]})})},O.currentRepo?O.currentRepo.id:null)})}const jre=function({activeAtom:e,run:t,setGrid:r,setAxes:i,setWire:o,setSolid:s,compiledBom:a}){let l={},u={};const c=pw(),f=pw(),d=pw(),h=pw(),[m,g]=z.useState(!0),[y,p]=z.useState("");z.useEffect(()=>{const x=setTimeout(()=>{g(!1)},0);return()=>clearTimeout(x)},[]),e!==null&&(l=e.createLevaInputs(p),t&&(u=e.createLevaExport())),e.atomType=="Molecule"&&(a=e.createLevaBom());const w=z.useMemo(()=>({...a}),[a]),b=z.useMemo(()=>({...u}),[u]),v=z.useMemo(()=>({...l}),[l]);gw(()=>b,{store:h},[e]),gw(()=>w,{store:d},[e]),gw(()=>v,{store:c},[e,y]),gw("Grid",{grid:{value:!0,label:"Grid",onChange:x=>{r(x)}},axes:{value:!0,label:"Axes",onChange:x=>{i(x)}},wire:{value:!0,label:"Output Wire",onChange:x=>{o(x)}},wireframe:{value:!1,label:"Wireframe",onChange:x=>{s(x)}}},{store:f}),z.useEffect(()=>()=>{c.dispose()},[e]);const S={colors:{elevation1:"#3F4243",elevation2:"var(--bg-color)",elevation3:"#C4A3D5",highlight1:"#C4A3D5",highlight2:"#ededed",highlight3:"#ededed",accent1:"#C4A3D5",accent2:"#88748F",accent3:"#88748F",vivid1:"red"}};return Q.jsxs(Q.Fragment,{children:[" ",Q.jsx("div",{className:t?"paramEditorDivRun":"paramEditorDiv",children:Q.jsx(mw,{store:c,neverHide:!0,collapsed:{collapsed:m,onChange:x=>{g(x)}},hideCopyButton:!0,fill:!0,titleBar:{title:e.name||O.currentRepo.repoName,drag:!1},theme:S})}),Q.jsx("div",{className:t?"gridEditorDivRun":"gridEditorDiv",children:Q.jsx(mw,{store:f,fill:!0,hidden:!1,collapsed:!0,hideCopyButton:!0,titleBar:{title:"Render Settings",drag:!1},theme:S})}),e.atomType=="Molecule"?Q.jsx("div",{className:t?"bomEditorDivRun":"bomEditorDiv",children:Q.jsx(mw,{store:d,fill:!0,hidden:!1,collapsed:!0,hideCopyButton:!0,titleBar:{title:"Bill of Materials",drag:!1},theme:S})}):null,t?Q.jsx("div",{className:"exportEditorDivRun",children:Q.jsx(mw,{store:h,fill:!0,hidden:!1,collapsed:!0,hideCopyButton:!0,titleBar:{title:"Export Parts",drag:!1},theme:S})}):null]})};function Gre({shareDialog:n,setShareDialog:e,dialogContent:t,activeAtom:r}){const i=o=>{O.cad.visExport(r.uniqueID,r.uniqueID,o).then(s=>{O.cad.downExport(r.uniqueID,o).then(a=>{oQ.saveAs(a,O.currentMolecule.name+"."+o.toLowerCase())}).catch("Error downloading export file")}).catch("Error creating export geometry")};return Q.jsx(Q.Fragment,{children:Q.jsxs("dialog",{open:n,style:{display:"flex"},className:"share-dialog",children:[t=="share"?Q.jsxs("div",{style:{display:"flex",margin:"10px"},children:[Q.jsx("p",{children:"Use this link to share this project:"}),Q.jsxs("a",{style:{margin:"16px"},href:"/run/"+O.currentRepo.owner+"/"+O.currentRepo.repoName,target:"_blank",children:["/run/",O.currentRepo.owner,"/",O.currentRepo.repoName]})]}):t=="export"?Q.jsxs("div",{style:{display:"flex",margin:"10px"},children:[Q.jsx("p",{children:"Export as:"}),Q.jsxs("button",{autoFocus:!0,onClick:()=>i("STL"),children:[" ","STL"]}),Q.jsxs("button",{autoFocus:!0,onClick:()=>i("STEP"),children:[" ","STEP"]}),Q.jsxs("button",{autoFocus:!0,onClick:()=>i("SVG"),children:[" ","SVG"]})]}):null,Q.jsx("a",{className:"closeButton",onClick:()=>e(!1)})]})})}let YXe=Q.jsx("svg",{fill:"#c4a3d5",height:"30px",width:"30px",version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 227.216 227.216",xmlSpace:"preserve",children:Q.jsx("path",{d:`M175.897,141.476c-13.249,0-25.11,6.044-32.98,15.518l-51.194-29.066c1.592-4.48,2.467-9.297,2.467-14.317
c0-5.019-0.875-9.836-2.467-14.316l51.19-29.073c7.869,9.477,19.732,15.523,32.982,15.523c23.634,0,42.862-19.235,42.862-42.879
C218.759,19.229,199.531,0,175.897,0C152.26,0,133.03,19.229,133.03,42.865c0,5.02,0.874,9.838,2.467,14.319L84.304,86.258
c-7.869-9.472-19.729-15.514-32.975-15.514c-23.64,0-42.873,19.229-42.873,42.866c0,23.636,19.233,42.865,42.873,42.865
c13.246,0,25.105-6.042,32.974-15.513l51.194,29.067c-1.593,4.481-2.468,9.3-2.468,14.321c0,23.636,19.23,42.865,42.867,42.865
c23.634,0,42.862-19.23,42.862-42.865C218.759,160.71,199.531,141.476,175.897,141.476z M175.897,15
c15.363,0,27.862,12.5,27.862,27.865c0,15.373-12.499,27.879-27.862,27.879c-15.366,0-27.867-12.506-27.867-27.879
C148.03,27.5,160.531,15,175.897,15z M51.33,141.476c-15.369,0-27.873-12.501-27.873-27.865c0-15.366,12.504-27.866,27.873-27.866
c15.363,0,27.861,12.5,27.861,27.866C79.191,128.975,66.692,141.476,51.33,141.476z M175.897,212.216
c-15.366,0-27.867-12.501-27.867-27.865c0-15.37,12.501-27.875,27.867-27.875c15.363,0,27.862,12.505,27.862,27.875
C203.759,199.715,191.26,212.216,175.897,212.216z`})}),KXe=Q.jsx("svg",{width:"35px",height:"35px",viewBox:"0 0 23 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Q.jsx("path",{d:"M11.245 4.174C11.4765 3.50808 11.5922 3.17513 11.7634 3.08285C11.9115 3.00298 12.0898 3.00298 12.238 3.08285C12.4091 3.17513 12.5248 3.50808 12.7563 4.174L14.2866 8.57639C14.3525 8.76592 14.3854 8.86068 14.4448 8.93125C14.4972 8.99359 14.5641 9.04218 14.6396 9.07278C14.725 9.10743 14.8253 9.10947 15.0259 9.11356L19.6857 9.20852C20.3906 9.22288 20.743 9.23007 20.8837 9.36432C21.0054 9.48051 21.0605 9.65014 21.0303 9.81569C20.9955 10.007 20.7146 10.2199 20.1528 10.6459L16.4387 13.4616C16.2788 13.5829 16.1989 13.6435 16.1501 13.7217C16.107 13.7909 16.0815 13.8695 16.0757 13.9507C16.0692 14.0427 16.0982 14.1387 16.1563 14.3308L17.506 18.7919C17.7101 19.4667 17.8122 19.8041 17.728 19.9793C17.6551 20.131 17.5108 20.2358 17.344 20.2583C17.1513 20.2842 16.862 20.0829 16.2833 19.6802L12.4576 17.0181C12.2929 16.9035 12.2106 16.8462 12.1211 16.8239C12.042 16.8043 11.9593 16.8043 11.8803 16.8239C11.7908 16.8462 11.7084 16.9035 11.5437 17.0181L7.71805 19.6802C7.13937 20.0829 6.85003 20.2842 6.65733 20.2583C6.49056 20.2358 6.34626 20.131 6.27337 19.9793C6.18915 19.8041 6.29123 19.4667 6.49538 18.7919L7.84503 14.3308C7.90313 14.1387 7.93218 14.0427 7.92564 13.9507C7.91986 13.8695 7.89432 13.7909 7.85123 13.7217C7.80246 13.6435 7.72251 13.5829 7.56262 13.4616L3.84858 10.6459C3.28678 10.2199 3.00588 10.007 2.97101 9.81569C2.94082 9.65014 2.99594 9.48051 3.11767 9.36432C3.25831 9.23007 3.61074 9.22289 4.31559 9.20852L8.9754 9.11356C9.176 9.10947 9.27631 9.10743 9.36177 9.07278C9.43726 9.04218 9.50414 8.99359 9.55657 8.93125C9.61593 8.86068 9.64887 8.76592 9.71475 8.57639L11.245 4.174Z",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),ZXe=Q.jsx("svg",{width:"45px",height:"45px",viewBox:"0 0 20 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Q.jsx("path",{d:"M7 5C7 3.89543 7.89543 3 9 3C10.1046 3 11 3.89543 11 5C11 5.74028 10.5978 6.38663 10 6.73244V14.0396H11.7915C12.8961 14.0396 13.7915 13.1441 13.7915 12.0396V10.7838C13.1823 10.4411 12.7708 9.78837 12.7708 9.03955C12.7708 7.93498 13.6662 7.03955 14.7708 7.03955C15.8753 7.03955 16.7708 7.93498 16.7708 9.03955C16.7708 9.77123 16.3778 10.4111 15.7915 10.7598V12.0396C15.7915 14.2487 14.0006 16.0396 11.7915 16.0396H10V17.2676C10.5978 17.6134 11 18.2597 11 19C11 20.1046 10.1046 21 9 21C7.89543 21 7 20.1046 7 19C7 18.2597 7.4022 17.6134 8 17.2676V6.73244C7.4022 6.38663 7 5.74028 7 5Z",fill:"#c4a3d5"})}),JXe=Q.jsxs("svg",{width:"30px",height:"30px",viewBox:"0 0 23 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Q.jsx("path",{d:"M10.5 11L17 11",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"}),Q.jsx("path",{d:"M7 11H7.5",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"}),Q.jsx("path",{d:"M7 7.5H7.5",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"}),Q.jsx("path",{d:"M7 14.5H7.5",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"}),Q.jsx("path",{d:"M17 14.5H16M10.5 14.5H13.5",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"}),Q.jsx("path",{d:"M17 7.5H14M10.5 7.5H11.5",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"}),Q.jsx("path",{d:"M21 7V6.37006C21 5.17705 21 4.58055 20.842 4.09946C20.5425 3.18719 19.8468 2.47096 18.9606 2.16261C18.4933 2 17.9139 2 16.755 2H7.24502C6.08614 2 5.50671 2 5.03939 2.16261C4.15322 2.47096 3.45748 3.18719 3.15795 4.09946C3 4.58055 3 5.17705 3 6.37006V15M21 11V20.3742C21 21.2324 20.015 21.6878 19.3919 21.1176C19.0258 20.7826 18.4742 20.7826 18.1081 21.1176L17.625 21.5597C16.9834 22.1468 16.0166 22.1468 15.375 21.5597C14.7334 20.9726 13.7666 20.9726 13.125 21.5597C12.4834 22.1468 11.5166 22.1468 10.875 21.5597C10.2334 20.9726 9.26659 20.9726 8.625 21.5597C7.98341 22.1468 7.01659 22.1468 6.375 21.5597L5.8919 21.1176C5.52583 20.7826 4.97417 20.7826 4.6081 21.1176C3.985 21.6878 3 21.2324 3 20.3742V19",stroke:"#c4a3d5",strokeWidth:"1.5",strokeLinecap:"round"})]}),QXe=Q.jsx("svg",{width:"30px",height:"30px",fill:"none",viewBox:"0 0 23 23",xmlns:"http://www.w3.org/2000/svg",children:Q.jsx("path",{fill:"#c4a3d5",d:"M8.71,7.71,11,5.41V15a1,1,0,0,0,2,0V5.41l2.29,2.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42l-4-4a1,1,0,0,0-.33-.21,1,1,0,0,0-.76,0,1,1,0,0,0-.33.21l-4,4A1,1,0,1,0,8.71,7.71ZM21,14a1,1,0,0,0-1,1v4a1,1,0,0,1-1,1H5a1,1,0,0,1-1-1V15a1,1,0,0,0-2,0v4a3,3,0,0,0,3,3H19a3,3,0,0,0,3-3V15A1,1,0,0,0,21,14Z"})});function eYe({authorizedUserOcto:n,tryLogin:e,activeAtom:t}){let[r,i]=z.useState(!1),o=!1,[s,a]=z.useState("");var l=rd();z.useEffect(()=>{if(n){var m=O.currentRepo.owner,g=O.currentRepo.repoName;(async()=>{const p="https://hg5gsgv9te.execute-api.us-east-2.amazonaws.com/abundance-stage/USER-TABLE?user="+O.currentUser;return await(await fetch(p)).json()})().then(p=>{p[0].likedProjects.some(b=>b==m+"/"+g)?(o=!0,document.getElementById("Star-button").style.backgroundColor="gray"):(console.log("not starred"),document.getElementById("Star-button").style.backgroundColor="white",o=!1)}),O.currentRepo.owner===O.currentUser&&(document.getElementById("Fork-button").style.display="none")}});const u=function(){var m=O.currentRepo.owner,g=O.currentRepo.repoName;o=!0,document.getElementById("Star-button").disabled=!0,document.getElementById("Star-button").style.backgroundColor="gray",fetch("https://hg5gsgv9te.execute-api.us-east-2.amazonaws.com/abundance-stage/update-item",{method:"POST",body:JSON.stringify({owner:m,repoName:g,attributeUpdates:{ranking:1}}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(p=>{fetch("https://hg5gsgv9te.execute-api.us-east-2.amazonaws.com/abundance-stage/USER-TABLE",{method:"POST",body:JSON.stringify({user:O.currentUser,attributeUpdates:{likedProjects:[`${m}/${g}`]},updateType:"SET"}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(b=>{console.log(b),console.log("added to liked projects"),document.getElementById("Star-button").disabled=!1})})},c=function(){var m=O.currentRepo.owner,g=O.currentRepo.repoName;o=!1,document.getElementById("Star-button").disabled=!0,document.getElementById("Star-button").style.backgroundColor="white",fetch("https://hg5gsgv9te.execute-api.us-east-2.amazonaws.com/abundance-stage/USER-TABLE",{method:"POST",body:JSON.stringify({user:O.currentUser,attributeUpdates:{likedProjects:[`${m}/${g}`]},updateType:"REMOVE"}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(p=>{console.log(p.json()),console.log("unliked"),document.getElementById("Star-button").disabled=!1})},f=async function(m){var g=O.currentRepo.owner,y=O.currentRepo.repoName;m.request("GET /repos/{owner}/{repo}",{owner:g,repo:y}).then(p=>{m.rest.repos.createFork({owner:g,repo:y}).then(()=>{const w="https://hg5gsgv9te.execute-api.us-east-2.amazonaws.com/abundance-stage//post-new-project";let b=(p.data.name+" "+O.currentUser).toLowerCase(),v={owner:O.currentUser,ranking:p.data.stargazers_count,description:p.data.description,searchField:b,repoName:p.data.name,forks:0,topMoleculeID:O.topLevelMolecule.uniqueID,topics:[],readme:"https://raw.githubusercontent.com/"+O.currentUser+"/"+p.data.name+"/master/README.md?sanitize=true",contentURL:"https://raw.githubusercontent.com/"+O.currentUser+"/"+p.data.name+"/master/project.abundance?sanitize=true",githubMoleculesUsed:[],parentRepo:g+"/"+y,svgURL:"https://raw.githubusercontent.com/"+O.currentUser+"/"+p.data.name+"/master/project.svg?sanitize=true",dateCreated:p.data.created_at,html_url:p.data.html_url};fetch(w,{method:"POST",body:JSON.stringify(v),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(S=>{console.log(S.json()),O.currentRepo=v,l(`/${O.currentRepo.owner}/${O.currentRepo.repoName}`)})})})},d=function(){e().then(m=>{u()})},h=function(){e().then(m=>{f(m)})};return Q.jsxs(Q.Fragment,{children:[r?Q.jsx(Gre,{shareDialog:r,setShareDialog:i,dialogContent:s,activeAtom:t}):null,Q.jsxs("div",{className:"run-navigation",children:[Q.jsx("button",{onClick:()=>{a("share"),i(!0)},className:" run-navigation-button",id:"Share-button",children:YXe}),Q.jsx("button",{className:" run-navigation-button",id:"Fork-button",onClick:()=>{n?f(n):h()},children:ZXe}),Q.jsx("button",{className:" run-navigation-button",id:"Star-button",onClick:()=>{n&&!o?u():n&&o?c():d()},children:KXe}),Q.jsx("button",{onClick:()=>{a("export"),i(!0)},className:" run-navigation-button",id:"Export-button",children:QXe}),Q.jsx("button",{className:" run-navigation-button",id:"Bill-button",onClick:()=>{console.log("open compiled bill of materials ")},children:JXe})]})]})}function tYe(){const[n,e]=z.useState({width:void 0,height:void 0});return z.useEffect(()=>{function t(){e({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",t),t(),()=>window.removeEventListener("resize",t)},[]),n}function nYe({setActiveAtom:n,activeAtom:e,authorizedUserOcto:t,tryLogin:r,loadProject:i,mesh:o,wireMesh:s,outdatedMesh:a,setOutdatedMesh:l}){const u=z.useRef(500),[c,f]=z.useState(!0),[d,h]=z.useState(!0),[m,g]=z.useState(!1),[y,p]=z.useState(!0),[w,b]=z.useState(!0),v=tYe();rd();const{owner:S,repoName:x}=pX(),[M,A]=z.useState(1);return z.useEffect(()=>{A(o[0]?o[0].cameraZoom:1)},[o]),z.useEffect(()=>{O.canvas=u,O.c=u.current.getContext("2d");var T=new Of;T.request("GET /repos/{owner}/{repo}",{owner:S,repo:x}).then(C=>{O.currentRepo=C.data,O.currentRepo.repoName=O.currentRepo.name,O.currentRepo.owner=O.currentRepo.owner.login,(!O.loadedRepo||O.currentRepo.repoName!==O.loadedRepo.repoName)&&(O.topLevelMolecule=new nx({x:0,y:0,topLevel:!0,atomType:"Molecule"}),O.currentMolecule=O.topLevelMolecule,i(O.currentRepo))}),O.currentRepo&&O.currentRepo.owner==O.currentUser&&g(!0)},[]),Q.jsxs(Q.Fragment,{children:[Q.jsx("canvas",{style:{display:"none"},ref:u,id:"flow-canvas",tabIndex:0}),Q.jsx(Wre,{run:!0,isItOwned:m}),e?Q.jsx(jre,{run:!0,activeAtom:e,setActiveAtom:n,setGrid:f,setAxes:h,setWire:p,setSolid:b}):null,Q.jsx(eYe,{authorizedUserOcto:t,tryLogin:r,activeAtom:e}),O.currentRepo?Q.jsxs("div",{className:"info_run_div",children:[Q.jsx("p",{children:"Project Name: "+O.currentRepo.repoName}),Q.jsx("p",{children:"Repo Owner: "+O.currentRepo.owner})]}):null,Q.jsx("div",{className:"runContainer",children:Q.jsx("div",{className:"jscad-container",style:{width:v.width,height:v.height},children:Q.jsx("section",{id:"threeDView",style:{height:v.height},children:s?Q.jsxs(Bre,{cameraZoom:M,gridParam:c,axesParam:d,outdatedMesh:a,children:[y?Q.jsx(Hre,{mesh:s}):null,Q.jsx($re,{mesh:o,isSolid:w,setOutdatedMesh:l})]}):Q.jsx("div",{style:{display:"flex",alignItems:"center",fontSize:"1em"},children:"Loading..."})})})})]})}const rYe=({setSettingsPopUp:n,setShortCuts:e})=>{let t=[];O.currentRepo.topics.length>0&&O.currentRepo.topics.forEach(c=>{t.push({value:c,label:c})});const r=z.useRef(t),i=z.useRef(O.currentRepo.description),o=z.useRef(O.topLevelMolecule.unitsKey),s=z.useRef(O.displayShortcuts),a=O.currentRepo.dateCreated,l=new Date(a),u=async c=>{c.preventDefault(),n(!1);const f=r.current.getValue(),d=[];f.forEach(h=>{d.push(h.value)}),O.topLevelMolecule.unitsKey=o.current.value,O.currentRepo.description=i.current.value,O.currentRepo.topics=d,O.displayShortcuts=s.current.checked,e(s.current.checked)};return Q.jsx("div",{className:"settingsDiv",children:Q.jsxs("div",{className:"form animate fadeInUp one",children:[Q.jsx("button",{style:{width:"3%",display:"block"},onClick:()=>{n(!1)},className:"closeButton",children:" "}),Q.jsx("h2",{style:{margin:"0 0 15px 0"},children:"Project Preferences"}),Q.jsxs("div",{id:"project-info",children:[Q.jsxs("div",{id:"project-info-name",children:[Q.jsx("label",{children:"Project Name"}),Q.jsx("p",{title:"To change the Project Name go to your Github repository",children:O.currentRepo.repoName})]}),Q.jsxs("div",{id:"project-info-date",children:[Q.jsx("label",{children:"Date Created"}),Q.jsx("p",{children:l.toDateString()})]})]}),Q.jsxs("form",{className:"settings-form project-info",onSubmit:c=>{u(c)},children:[Q.jsx("label",{htmlFor:"project-description",children:"Project Description"}),Q.jsx("input",{defaultValue:O.currentRepo.description,ref:i}),Q.jsx("label",{htmlFor:"project-topics",children:"Project Tags"}),Q.jsx(XQ,{defaultValue:t,isMulti:!0,name:"Project Topics",options:YQ,className:"basic-multi-select",classNamePrefix:"select",ref:r}),Q.jsx("label",{htmlFor:"measure-units",children:"Units"}),Q.jsxs("select",{id:"measure-units",defaultValue:O.topLevelMolecule.unitsKey,ref:o,children:[Q.jsx("option",{value:"Inches",children:"Inches"},"inchesop"),Q.jsx("option",{value:"MM",children:"MM"},"millop")]}),Q.jsxs("div",{children:[Q.jsx("label",{htmlFor:"shortcut-button",children:"Show/Hide Shortcuts"}),Q.jsx("input",{type:"checkbox",className:"checkbox shortcut-button",name:"shortcut-button",id:"shortcut-button",defaultChecked:O.displayShortcuts,ref:s})]}),Q.jsx("label",{htmlFor:"theme-toggle",children:"Display Theme (placeholder)"}),Q.jsx("input",{type:"checkbox",className:"checkbox ",name:"theme-toggle",id:"theme-toggle-light"}),Q.jsx("button",{className:"submit-button",type:"submit",children:"Save Changes"})]})]})})};function iYe({authorizedUserOcto:n,savePopUp:e,setSavePopUp:t,saveProject:r,setExportPopUp:i,saveState:o,setSaveState:s,currentMoleculeTop:a,activeAtom:l,setActiveAtom:u,setShortCuts:c}){let[f,d]=z.useState(!1),[h,m]=z.useState(""),[g,y]=z.useState(!1);const p=rd(),w=[{id:"Open",buttonFunc:()=>{p("/")}},{id:"GitHub",buttonFunc:()=>{window.open(O.currentRepo.html_url)}},{id:"Read Me",buttonFunc:()=>{var x=O.currentRepo.html_url+"/blob/master/README.md";window.open(x)}},{id:"Bill of Materials",buttonFunc:()=>{var x=O.currentRepo.html_url+"/blob/master/BillOfMaterials.md";window.open(x)}},{id:"Share",buttonFunc:()=>{m("share"),d(!0)}},{id:"Save Project",buttonFunc:()=>{t(!0),r(s)}},{id:"Settings",buttonFunc:()=>{y(!0)}},{id:"Pull Request",buttonFunc:()=>{window.open("https://github.com/"+O.currentRepo.full_name+"/compare/"+O.currentRepo.default_branch+"..."+O.currentRepo.owner.login+":"+O.currentRepo.default_branch)}},{id:"ExportGit",buttonFunc:()=>{i(!0)}},{id:"Delete Project",buttonFunc:()=>{var x=O.currentRepo.html_url+"/settings";window.open(x)}}],b=()=>Q.jsx(Q.Fragment,{children:Q.jsx("button",{className:"nav-bar go-up-button menu-nav-button",onClick:()=>{O.currentMolecule.goToParentMolecule(),u(O.currentMolecule)},children:Q.jsx("img",{className:"nav-img thumnail-logo",src:"/imgs/Go Up.svg",title:""},"")})}),v=({saveState:x,savePopUp:M,setSavePopUp:A})=>{if(x===100){var T=2e3;setTimeout(function(){A(!1)},T)}return Q.jsx(Q.Fragment,{children:Q.jsx("div",{className:"save-bar",children:Q.jsx("div",{className:"progress",children:Q.jsx("div",{className:"progress-done","data-done":"70",style:{width:x+"%",opacity:"1"},children:x!==100?x+"%":"Project Saved!"})})})})},S=({currentMoleculeTop:x})=>{const[M,A]=z.useState(!1),T=z.useRef();return z.useEffect(()=>{const C=D=>{M&&T.current&&!T.current.contains(D.target)&&A(!1)};return document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[M]),Q.jsx(Q.Fragment,{children:Q.jsxs("nav",{ref:T,className:"navbar",children:[Q.jsx("button",{className:"toggle menu-nav-button",onClick:()=>A(C=>!C),children:M?Q.jsx("img",{className:`thumnail-logo nav-img ${x?"":" rotati-right"}`,src:"/imgs/three-menu.svg"}):Q.jsx("img",{className:`thumnail-logo nav-img  ${x?"rotati":" rotati-plus "}`,src:"/imgs/three-menu.svg"})}),Q.jsx("ul",{className:`menu-nav${M?" show-menu":""}`,children:w.map((C,D)=>Q.jsx("button",{className:"menu-nav-button",children:Q.jsx("img",{className:" thumnail-logo",alt:C,src:"/imgs/"+C.id+".svg",title:C.id+"-button",onClick:C.buttonFunc},C.id)},C.id))})]})})};return Q.jsxs(Q.Fragment,{children:[e?Q.jsx(v,{saveState:o,savePopUp:e,setSavePopUp:t}):null,g?Q.jsx(rYe,{setSettingsPopUp:y,setShortCuts:c}):null,f?Q.jsx(Gre,{shareDialog:f,setShareDialog:d,dialogContent:h,activeAtom:l}):null,a?Q.jsx(b,{}):null,Q.jsx(S,{currentMoleculeTop:a})]})}const oYe=z.memo(iYe);function sYe(n){return this.startDeg+this.rotateUnit*n}function aYe(n){return-(this.rotateDeg(n)+this.unskewDeg)}function lYe(n){var e=-(n.totalAngle-180)/2,t={top:e,left:e-90,right:e+90,bottom:e+180};return n.start!==void 0?n.start:t[n.position]}const uYe=3;function cYe(n,e){var t=n*n*2;return Math.sqrt(t)*e+uYe}function fYe(n){var e=n*2,t=-e/2;return e+="px",t+="px",{width:e,height:e,marginLeft:t,marginTop:t}}function dYe(n){var e=n.diameter,t=-n.diameter/2;return e+="px",t+="px",{width:e,height:e,marginLeft:t,marginTop:t}}const hYe=10;function pYe(n){var e=n.diameter,t=-n.diameter/2;return e+="px",t+="px",{width:e,height:e,marginRight:t,marginBottom:t}}function mYe(n){var e=n.diameter/2+"px";return{width:e,height:e}}const gYe=.41;function vYe(n){return n*gYe-hYe+"px"}function kR(n){this._config=n;var e=this.config=n,t=e.menus.length,r=e.totalAngle===360?t:t-1;this.radius=n.diameter/2,this.coverRadius=cYe(this.radius,n.percent),this.clickZoneRadius=this.radius-this.coverRadius,this.listSize=mYe(n),this.clickZoneSize=pYe(n),this.menuSize=dYe(n),this.coverSize=fYe(this.coverRadius),this.startDeg=lYe(n),this.centralDeg=(e.totalAngle-e.spaceDeg*r)/t,this.rotateUnit=this.centralDeg+e.spaceDeg,this.skewDeg=90-this.centralDeg,this.unskewDeg=-(90-this.centralDeg/2),this.textTop=vYe(this.clickZoneRadius)}kR.prototype={constructor:kR,rotateDeg:sYe,horizontalDeg:aYe};function yYe(n){this._config.menus.forEach(function(e,t){this._createList(n,e,t)},this)}function xYe(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function bYe(n){this.style.removeProperty(n)}function wYe(n,e,t){this.style.setProperty(n,e,t)}function SYe(n,e,t){var r=e.apply(this,arguments);r==null?this.style.removeProperty(n):this.style.setProperty(n,r,t)}function qn(n,e,t,r){var i;return arguments.length>1?(t==null?bYe:typeof t=="function"?SYe:wYe).call(n,e,t,""):xYe(i=n).getComputedStyle(i,null).getPropertyValue(e)}function _Ye(n,e,t){var r=document.createElement("li");qn(r,"width",this._calc.listSize.width),qn(r,"height",this._calc.listSize.height),qn(r,"transform","rotate("+this._calc.rotateDeg(t)+"deg) skew("+this._calc.skewDeg+"deg)"),n.appendChild(r),this._createAnchor(r,e,t)}function qre(n){return n.trim().split(/^|\s+/)}function XL(n){return n.classList||new Xre(n)}function Xre(n){this._node=n,this._names=qre(n.getAttribute("class")||"")}Xre.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function Yre(n,e){for(var t=XL(n),r=-1,i=e.length;++r<i;)t.add(e[r])}function Kre(n,e){for(var t=XL(n),r=-1,i=e.length;++r<i;)t.remove(e[r])}function EYe(n){Yre(this,n)}function MYe(n){Kre(this,n)}function CYe(n,e){(e.apply(this,arguments)?Yre:Kre)(this,n)}function gc(n,e,t){var r=qre(e+"");if(arguments.length<2){for(var i=XL(this),o=-1,s=r.length;++o<s;)if(!i.contains(r[o]))return!1;return!0}(typeof t=="function"?CYe:t?EYe:MYe).call(n,r,t)}var AYe={_current:0,getNew:function(){return this._current++,this._current}};function Yd(n,e,t,r){var i=n,o="sheetStyles",s=document.head||document.getElementsByTagName("head")[0],a=document.getElementById(o)||document.createElement("style");a.id=o;var l="s-S"+AYe.getNew();return i.className+=" "+l,a.innerHTML+=" ."+l+(r?":"+r:"")+"{"+e+":"+t+"}",s.appendChild(a),this}function jc(n,e,t,r){n.addEventListener(e,function(i){t.call(this,i,r)})}function TYe(){var n=this._container;gc(n,"circular-menu",!0),qn(n,"width",this._calc.menuSize.width),qn(n,"height",this._calc.menuSize.height),qn(n,"margin-top",this._calc.menuSize.marginTop),qn(n,"margin-left",this._calc.menuSize.marginLeft);var e=this;jc(n,"click",function(r){r.toElement===n&&e._cMenu.hide()}),setTimeout(function(){qn(n,"display","block")},100),Yd(n,"width",this._calc.coverSize.width,"after"),Yd(n,"height",this._calc.coverSize.height,"after"),Yd(n,"margin-left",this._calc.coverSize.marginLeft,"after"),Yd(n,"margin-top",this._calc.coverSize.marginTop,"after"),Yd(n,"border","3px solid "+this._config.pageBackground,"after");var t=n.appendChild(document.createElement("ul"));this._createLists(t)}function DYe(n){return n instanceof Array&&n.length!==0}function QH(n){return n instanceof Function?n():!!n}function NYe(n,e){e&&(e instanceof Object?(n.href=e.url,n.target=e.blank?"_blank":""):n.href=e)}var eW=null;function PYe(n,e,t){var r=this,i=null,o=document.createElement("a");NYe(o,e.href),o.setDisabled=function(){gc(o,"disabled",QH(e.disabled))},this._anchors.push(o),qn(o,"width",this._calc.clickZoneSize.width),qn(o,"height",this._calc.clickZoneSize.height),qn(o,"right",this._calc.clickZoneSize.marginRight),qn(o,"bottom",this._calc.clickZoneSize.marginBottom),qn(o,"transform","skew("+-this._calc.skewDeg+"deg) rotate("+this._calc.unskewDeg+"deg) scale(1)"),gc(o,"disabled",QH(e.disabled));var s=this._config.percent*100+"%";Yd(o,"background","radial-gradient(transparent "+s+", "+this._config.background+" "+s+")"),Yd(o,"background","radial-gradient(transparent "+s+", "+this._config.backgroundHover+" "+s+")","hover");function a(u,c){c.click&&c.click.call(this,u,c),r._config.hideAfterClick&&(r._cMenu.hide(),r._cMenu._pMenu&&r._cMenu._pMenu.hide(),l&&l.hide())}if(jc(o,"mouseenter",function(){var u=document.createElement("div");u.textContent=e.icon,u.classList.add("tooltip"),u.id=e.icon+"text";const c=u.textContent.length*3;document.querySelector("body").appendChild(u),qn(u,"top",r._container.offsetTop+r._calc.radius-10+"px"),qn(u,"left",r._container.offsetLeft+r._calc.radius-c+"px")}),jc(o,"click",a,e),jc(o,"mouseleave",function(){document.getElementById(e.icon+"text").remove()}),n.appendChild(o),this._createHorizontal(o,e,t),DYe(e.menus)){var l=this._createSubMenu(r,e.menus,t);let u=!1;jc(o,"mouseenter",function(){u=!0,eW=setTimeout(function(){u&&l.styles({top:r._container.offsetTop+r._calc.radius+"px",left:r._container.offsetLeft+r._calc.radius+"px"}).show()},100)}),jc(o,"mouseleave",function(c){l._container.contains(c.toElement)||(u=!1,i=setTimeout(function(){l.hide()},100))}),jc(l._container,"mouseenter",function(){clearTimeout(eW),clearTimeout(i);var c=document.createElement("div");c.textContent=e.icon,c.classList.add("tooltip"),c.id=e.icon+"text2";const f=c.textContent.length*3;document.querySelector("body").appendChild(c),qn(c,"top","50px"),qn(c,"left",r._container.offsetLeft+r._calc.radius-f+100+"px"),qn(c,"color","#D7D5D560")}),jc(l._container,"mouseleave",function(c){u=!1,document.getElementById(e.icon+"text2").remove(),(!o.contains(c.toElement)||c.toElement.children[0]===o)&&l.hide()})}}const RYe=.65,OYe=.2,tW=13;function IR(n){return n===void 0?!1:typeof n=="string"?n!=="":n.length&&n[0]!==""}function kYe(n){return typeof n=="string"?n:n[0]}function IYe(n){return typeof n=="string"?null:n[1]}function LYe(n,e,t){if(IR(e.icon)){var r=document.createElement("span"),i=kYe(e.icon),o=IYe(e.icon);gc(r,i+" cm-icon",!0),qn(r,"color",o);var s=this._calc.clickZoneRadius*RYe-tW+"px",a=this._calc.clickZoneRadius*OYe-tW+"px";qn(r,"width",s),qn(r,"height",s),qn(r,"font-size",s),qn(r,"margin-top",a),n.appendChild(r)}}const FYe="3px",BYe="-3px";function zYe(n,e,t){var r=document.createElement("span");r.textContent=e.title,gc(r,"text",!0),qn(r,"margin-top",IR(e.icon)?FYe:this._calc.textTop),qn(r,"top",IR(e.icon)?BYe:0),n.appendChild(r)}function UYe(n,e,t){var r=document.createElement("div");gc(r,"horizontal",!0),this._config.horizontal&&qn(r,"transform","rotate("+this._calc.horizontalDeg(t)+"deg)"),n.appendChild(r),this._createIcon(r,e,t),this._createText(r,e,t)}function Zre(){var n={},e=!1,t=0,r=arguments.length;Object.prototype.toString.call(arguments[0])==="[object Boolean]"&&(e=arguments[0],t++);for(var i=function(s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e&&Object.prototype.toString.call(s[a])==="[object Object]"?n[a]=extend(!0,n[a],s[a]):n[a]=s[a])};t<r;t++){var o=arguments[t];i(o)}return n}const VYe=5/3,$Ye=.45,HYe=.618;function WYe(n,e,t){var r=document.createElement("div");gc(r,"circular-sub-menu",!0),this._container.parentNode.insertBefore(r,this._container);var i=this._calc.centralDeg*HYe*e.length,o=this._calc.rotateDeg(t)-i/2+this._calc.centralDeg/2,s=Zre(this._config,{totalAngle:i,percent:$Ye,diameter:this._config.diameter*VYe,start:o,animation:"into",menus:e});return new w1(r,n._cMenu).config(s)}function LR(n,e){this._cMenu=n,this._container=n._container,this._config=e,this._calc=new kR(e),this._anchors=[]}LR.prototype={constructor:LR,createMenu:TYe,_createLists:yYe,_createList:_Ye,_createAnchor:PYe,_createText:zYe,_createHorizontal:UYe,_createIcon:LYe,_createSubMenu:WYe};const jYe={totalAngle:360,spaceDeg:0,background:"#323232",backgroundHover:"#515151",pageBackground:"transparent",percent:.32,diameter:300,position:"top",horizontal:!0,animation:"into",hideAfterClick:!0};function GYe(n){return n=Zre(jYe,n),this._creator=new LR(this,n),this._creator.createMenu(),this}function qYe(n){!(n instanceof Array)||n.length!==2||(qn(this._container,"left",n[0]+"px"),qn(this._container,"top",n[1]+"px"))}function XYe(){this._creator._anchors.forEach(function(n){n.setDisabled()})}function YYe(n){return XYe.call(this),qYe.call(this,n),gc(this._container,"opened-nav",!0),this}function KYe(){return gc(this._container,"opened-nav",!1),this}function ZYe(n){if(!n instanceof Object)return this;for(var e in n)n.hasOwnProperty(e)&&qn(this._container,e,n[e]);return this}function w1(n,e){this._container=n,e&&(this._pMenu=e)}w1.prototype={constructor:w1,config:GYe,show:YYe,hide:KYe,styles:ZYe};function JYe(n){return typeof n=="string"?new w1(document.querySelector(n)):new w1(n)}var J3=null,Kd;const QYe=(n,e)=>{J3=n;const t=i=>{var o=[];for(var s in O.availableTypes){var a=O.availableTypes[s];if(a.atomCategory===i){var l=new Object;l.title=`${a.atomType}`,l.icon=`${a.atomType}`,l.name=a.atomType,l.click=function(c,f){if(f.icon==="GitHubMolecule"){const d=parseInt(Kd._container.style.left,10),h=parseInt(Kd._container.style.top,10);O.lastClick=[d,h],e(!0)}else e(!1),c.target.id=f.name,r(c)},o.push(l)}}return o};Kd=JYe(J3.current).config({hideAfterClick:!0,percent:.15,menus:[{title:"Actions",icon:"Actions",menus:t("Actions")},{title:"Inputs",icon:"Inputs",menus:t("Inputs")},{title:"Tags",icon:"Tags",menus:t("Tags")},{title:"Import/Export",icon:"Import-Export",menus:t("ImportExport")},{title:"Shapes",icon:"Shapes",menus:t("Shapes")},{title:"Interactions",icon:"Interaction",menus:t("Interactions")}]}),document.getElementById("flow-canvas").addEventListener("contextmenu",i=>{i.preventDefault()}),J3.current.addEventListener("contextmenu",i=>{i.preventDefault()});function r(i){let o=i.target.id;const s=parseInt(Kd._container.style.left,10),a=parseInt(Kd._container.style.top,10);O.currentMolecule.placeAtom({x:O.pixelsToWidth(s),y:O.pixelsToHeight(a),parent:O.currentMolecule,atomType:o,uniqueID:O.generateUniqueID()},!0)}};function eKe({searchingGitHub:n,setSearchingGitHub:e}){let t="";var[r,i]=z.useState([]),[o,s]=z.useState(!1);const[a,l]=z.useState(""),[u,c]=z.useState("2024");z.useRef(null);function f(x,M){O.currentMolecule.loadGithubMoleculeByName(M),e(!1),i([])}const d=function(){(async()=>{let M=a?"&lastKey="+a.repoName+"~"+a.owner:"&lastKey",A;t!=""?A="&query="+t+"&yearShow="+u:A="&query&yearShow="+u;const C="https://hg5gsgv9te.execute-api.us-east-2.amazonaws.com/abundance-stage/scan-search-abundance?"+("attribute=searchField"+A+"&user"+M);return(await fetch(C)).json()})().then(M=>{let A=[];M.repos.forEach(T=>{A.push(T)}),i(A),s(!1)})},h=function(x){x.key==="Enter"&&(s(!0),d())},m=function(x){t=x.target.value},[g,y]=z.useState(!1),[p,w]=z.useState({}),b=(x,M)=>{console.log(x),w(x),y(!0)},v=()=>{w({}),y(!1)},S=function(){return r.map((x,M)=>Q.jsx("li",{onClick:A=>f(A,x),onMouseEnter:()=>b(x),onMouseLeave:()=>v(),children:x.repoName},x.id))};return Q.jsx(Q.Fragment,{children:n?Q.jsxs("div",{className:"search-container",children:[Q.jsxs("div",{id:"git_search",style:{top:O.lastClick?O.lastClick[1]+"px":"25%",left:O.lastClick?O.lastClick[0]+"px":"50%"},children:[Q.jsx("input",{type:"text",id:"menuInput",onKeyDown:h,onChange:m,placeholder:"Search for atom..",className:"menu_search_canvas"}),Q.jsx(S,{})]}),g?Q.jsxs("div",{className:"GitProjectInfoPanel",style:{top:O.lastClick[1]-50+"px",left:O.lastClick[0]-375+"px"},children:[Q.jsxs("div",{className:"GitInfoLeft",children:[Q.jsx("img",{src:p.svgURL}),Q.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[Q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",style:{transform:"scale(.7)"},width:"16",height:"16",children:Q.jsx("path",{d:"M8 .2l4.9 15.2L0 6h16L3.1 15.4z"})}),Q.jsx("p",{style:{fontSize:"0.5em"},children:p.ranking})]})]}),Q.jsxs("div",{className:"GitInfo",children:[Q.jsxs("div",{children:[Q.jsx("strong",{children:"Project Name: "}),Q.jsx("span",{children:p.repoName})]}),Q.jsxs("div",{children:[Q.jsx("strong",{children:"Creator: "}),Q.jsx("span",{children:p.owner})]}),Q.jsxs("div",{children:[Q.jsx("strong",{children:"Description: "}),Q.jsx("span",{children:p.description||null})]}),Q.jsxs("div",{children:[Q.jsx("strong",{children:"Topics: "}),Q.jsx("span",{children:p.topics})]}),Q.jsxs("div",{children:[Q.jsx("strong",{children:"Created: "}),Q.jsx("span",{children:p.dateCreated})]})]})]}):null]}):null})}function Jre(){const n=document.getElementById("flow-canvas");n.width=window.innerWidth,n.height=window.innerHeight*.45}window.addEventListener("resize",()=>{Jre()},!1);const tKe=z.memo(function({loadProject:e,setActiveAtom:t,shortCuts:r}){const[i,o]=z.useState(!1),s=z.useRef(null),a=z.useRef(null),l=rd();z.useEffect(()=>{O.canvas=s,O.c=s.current.getContext("2d"),(!O.loadedRepo||O.currentRepo.repoName!==O.loadedRepo.repoName)&&(O.writeToDisplay(O.currentRepo.topMoleculeID,!0),O.topLevelMolecule=new nx({x:0,y:0,topLevel:!0,atomType:"Molecule"}),O.currentMolecule=O.topLevelMolecule,e(O.currentRepo).catch(p=>{l("/")})),O.currentMolecule.nodesOnTheScreen.forEach(p=>{p.update()})},[]);const u=()=>{O.c.clearRect(0,0,O.canvas.current.width,O.canvas.current.height),O.currentMolecule.nodesOnTheScreen.forEach(p=>{p.update()})},c=p=>{O.currentMolecule.nodesOnTheScreen.forEach(w=>{w.mouseMove(p.clientX,p.clientY)})},f=p=>{if(p.key=="Backspace"||p.key=="Delete"){const w=JSON.stringify(O.topLevelMolecule.serialize(),null,4);O.recentMoleculeRepresentation.push(w),O.recentMoleculeRepresentation.length>5&&O.recentMoleculeRepresentation.shift(),O.atomsSelected=[],O.currentMolecule.copy(),O.atomsSelected.forEach(b=>{O.currentMolecule.nodesOnTheScreen.forEach(v=>{v.uniqueID==b.uniqueID&&v.deleteNode()})})}(p.key=="Control"||p.key=="Meta")&&(O.ctrlDown=!0),O.ctrlDown&&r.hasOwnProperty([p.key])&&(p.preventDefault(),p.key=="z"&&O.currentMolecule.undo(),p.key=="c"&&(O.atomsSelected=[],O.currentMolecule.copy()),p.key=="v"&&O.atomsSelected.forEach(w=>{let b=O.generateUniqueID();w.uniqueID=b,(w.atomType=="Molecule"||w.atomType=="GitHubMolecule")&&(w=O.currentMolecule.remapIDs(w)),O.currentMolecule.placeAtom(w,!0)}),p.key=="g"?o(!0):O.currentMolecule.placeAtom({parentMolecule:O.currentMolecule,x:.5,y:.5,parent:O.currentMolecule,atomType:`${r[p.key]}`,uniqueID:O.generateUniqueID()},!0)),O.currentMolecule.nodesOnTheScreen.forEach(w=>{w.keyPress(p.key)})},d=p=>{(p.key=="Control"||p.key=="Meta")&&(O.ctrlDown=!1)},h=p=>{var w;if("which"in p?w=p.which==3:"button"in p&&(w=p.button==2),w){var b=!1;Kd.show([p.clientX,p.clientY],b);return}else{Kd.hide(),o(!1);var v=!1;O.currentMolecule.nodesOnTheScreen.forEach(S=>{let x;x=S.clickDown(p.clientX,p.clientY,v),x!==void 0&&(t(x),O.currentMolecule.selected=!1,v=!0)}),!v&&O.ctrlDown&&(console.log("click not HandledByMolecule trying to add box?"),O.currentMolecule.placeAtom({parentMolecule:O.currentMolecule,x:O.pixelsToWidth(p.clientX),y:O.pixelsToHeight(p.clientY),parent:O.currentMolecule,name:"Box",atomType:"Box"},null,O.availableTypes)),v||(t(O.currentMolecule),O.currentMolecule.selected=!0,O.currentMolecule.sendToRender())}},m=p=>{O.currentMolecule.nodesOnTheScreen.forEach(w=>{w.doubleClick(p.clientX,p.clientY)}),t(O.currentMolecule)},g=p=>{O.currentMolecule.nodesOnTheScreen.forEach(w=>{w.clickUp(p.clientX,p.clientY)}),O.currentMolecule.clickUp(p.clientX,p.clientY)};z.useEffect(()=>{s.current.getContext("2d");let w;const b=()=>{u(),w=window.requestAnimationFrame(b)};return b(),()=>{window.cancelAnimationFrame(w)}},[u]),z.useEffect(()=>{Jre()},[]),z.useEffect(()=>{QYe(a,o)},[]);let y=[];if(O.currentMolecule){y.unshift(O.currentMolecule.name);let p=O.currentMolecule.parent;for(;p;){let b=p.name;y.unshift(b),p=p.parent?p.parent:null}}return Q.jsxs(Q.Fragment,{children:[Q.jsx("canvas",{ref:s,id:"flow-canvas",tabIndex:0,onMouseMove:c,onMouseDown:h,onMouseUp:g,onDoubleClick:m,onKeyUp:d,onKeyDown:f}),Q.jsx("div",{style:{position:"absolute",display:"inline",zIndex:"5",top:"20px",left:"55px",color:"rgb(255 255 255 / 34%)"},children:y.map((p,w)=>Q.jsxs("a",{className:"repo-name-path",onClick:()=>{for(;O.currentMolecule&&O.currentMolecule.name!==p;)O.currentMolecule.goToParentMolecule(p),t(O.currentMolecule)},children:[" ",p," /"]},"repo-name-path"+w))}),Q.jsxs("div",{children:[Q.jsx("div",{id:"circle-menu1",className:"cn-menu1",ref:a}),Q.jsx(eKe,{searchingGitHub:i,setSearchingGitHub:o})]})]})});function nKe(){const[n,e]=z.useState({width:0,height:0});return z.useEffect(()=>{function t(){e({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",t),t(),()=>window.removeEventListener("resize",t)},[]),n}const rKe=z.memo(function({gridParam:e,axesParam:t,wireParam:r,solidParam:i,mesh:o,wireMesh:s,outdatedMesh:a,setOutdatedMesh:l}){const u=nKe(),[c,f]=z.useState(1);return z.useEffect(()=>{f(1)},[O.topLevelMolecule]),z.useEffect(()=>{c==1&&o[0]&&(f(o[0].cameraZoom),console.log("cameraZoom",c))},[o]),Q.jsxs(Q.Fragment,{children:[Q.jsxs("div",{className:"jscad-container",style:{width:u.width*1,height:u.height*.6},children:[Q.jsx("section",{id:"threeDView",style:{width:u.width*1,height:u.height*.6},children:s?Q.jsxs(Bre,{cameraZoom:c,gridParam:e,axesParam:t,outdatedMesh:a,children:[r?Q.jsx(Hre,{mesh:s}):null,Q.jsx($re,{mesh:o,isSolid:i,setOutdatedMesh:l})]}):Q.jsx("div",{style:{display:"flex",alignItems:"center",fontSize:"2em"},children:"Loading..."})}),Q.jsxs("div",{className:"container arrow-up",children:[Q.jsx("input",{type:"checkbox",className:"custom"}),Q.jsx("div",{className:"dots"})]}),Q.jsx("div",{id:"viewer_bar"})]}),Q.jsx("div",{id:"bottom_bar"})]})});class Bn{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){[e,t]=Og(this,e,t);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(t,this.length,i,1),zl.from(i,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=Og(this,e,t);let r=[];return this.decompose(e,t,r,0),zl.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new uy(this),o=new uy(e);for(let s=t,a=t;;){if(i.next(s),o.next(s),s=0,i.lineBreak!=o.lineBreak||i.done!=o.done||i.value!=o.value)return!1;if(a+=i.value.length,i.done||a>=r)return!0}}iter(e=1){return new uy(this,e)}iterRange(e,t=this.length){return new Qre(this,e,t)}iterLines(e,t){let r;if(e==null)r=this.iter();else{t==null&&(t=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new eie(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Bn.empty:e.length<=32?new Kr(e):zl.from(Kr.split(e,[]))}}class Kr extends Bn{constructor(e,t=iKe(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,i){for(let o=0;;o++){let s=this.text[o],a=i+s.length;if((t?r:a)>=e)return new oKe(i,a,r,s);i=a+1,r++}}decompose(e,t,r,i){let o=e<=0&&t>=this.length?this:new Kr(nW(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(i&1){let s=r.pop(),a=__(o.text,s.text.slice(),0,o.length);if(a.length<=32)r.push(new Kr(a,s.length+o.length));else{let l=a.length>>1;r.push(new Kr(a.slice(0,l)),new Kr(a.slice(l)))}}else r.push(o)}replace(e,t,r){if(!(r instanceof Kr))return super.replace(e,t,r);[e,t]=Og(this,e,t);let i=__(this.text,__(r.text,nW(this.text,0,e)),t),o=this.length+r.length-(t-e);return i.length<=32?new Kr(i,o):zl.from(Kr.split(i,[]),o)}sliceString(e,t=this.length,r=`
`){[e,t]=Og(this,e,t);let i="";for(let o=0,s=0;o<=t&&s<this.text.length;s++){let a=this.text[s],l=o+a.length;o>e&&s&&(i+=r),e<l&&t>o&&(i+=a.slice(Math.max(0,e-o),t-o)),o=l+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],i=-1;for(let o of e)r.push(o),i+=o.length+1,r.length==32&&(t.push(new Kr(r,i)),r=[],i=-1);return i>-1&&t.push(new Kr(r,i)),t}}class zl extends Bn{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,t,r,i){for(let o=0;;o++){let s=this.children[o],a=i+s.length,l=r+s.lines-1;if((t?l:a)>=e)return s.lineInner(e,t,r,i);i=a+1,r=l+1}}decompose(e,t,r,i){for(let o=0,s=0;s<=t&&o<this.children.length;o++){let a=this.children[o],l=s+a.length;if(e<=l&&t>=s){let u=i&((s<=e?1:0)|(l>=t?2:0));s>=e&&l<=t&&!u?r.push(a):a.decompose(e-s,t-s,r,u)}s=l+1}}replace(e,t,r){if([e,t]=Og(this,e,t),r.lines<this.lines)for(let i=0,o=0;i<this.children.length;i++){let s=this.children[i],a=o+s.length;if(e>=o&&t<=a){let l=s.replace(e-o,t-o,r),u=this.lines-s.lines+l.lines;if(l.lines<u>>4&&l.lines>u>>6){let c=this.children.slice();return c[i]=l,new zl(c,this.length-(t-e)+r.length)}return super.replace(o,a,l)}o=a+1}return super.replace(e,t,r)}sliceString(e,t=this.length,r=`
`){[e,t]=Og(this,e,t);let i="";for(let o=0,s=0;o<this.children.length&&s<=t;o++){let a=this.children[o],l=s+a.length;s>e&&o&&(i+=r),e<l&&t>s&&(i+=a.sliceString(e-s,t-s,r)),s=l+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof zl))return 0;let r=0,[i,o,s,a]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,o+=t){if(i==s||o==a)return r;let l=this.children[i],u=e.children[o];if(l!=u)return r+l.scanIdentical(u,t);r+=l.length+1}}static from(e,t=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let h of e)r+=h.lines;if(r<32){let h=[];for(let m of e)m.flatten(h);return new Kr(h,t)}let i=Math.max(32,r>>5),o=i<<1,s=i>>1,a=[],l=0,u=-1,c=[];function f(h){let m;if(h.lines>o&&h instanceof zl)for(let g of h.children)f(g);else h.lines>s&&(l>s||!l)?(d(),a.push(h)):h instanceof Kr&&l&&(m=c[c.length-1])instanceof Kr&&h.lines+m.lines<=32?(l+=h.lines,u+=h.length+1,c[c.length-1]=new Kr(m.text.concat(h.text),m.length+1+h.length)):(l+h.lines>i&&d(),l+=h.lines,u+=h.length+1,c.push(h))}function d(){l!=0&&(a.push(c.length==1?c[0]:zl.from(c,u)),u=-1,l=c.length=0)}for(let h of e)f(h);return d(),a.length==1?a[0]:new zl(a,t)}}Bn.empty=new Kr([""],0);function iKe(n){let e=-1;for(let t of n)e+=t.length+1;return e}function __(n,e,t=0,r=1e9){for(let i=0,o=0,s=!0;o<n.length&&i<=r;o++){let a=n[o],l=i+a.length;l>=t&&(l>r&&(a=a.slice(0,r-i)),i<t&&(a=a.slice(t-i)),s?(e[e.length-1]+=a,s=!1):e.push(a)),i=l+1}return e}function nW(n,e,t){return __(n,[""],e,t)}class uy{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Kr?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],o=this.offsets[r],s=o>>1,a=i instanceof Kr?i.text.length:i.children.length;if(s==(t>0?a:0)){if(r==0)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(t>0?0:1)){if(this.offsets[r]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Kr){let l=i.text[s+(t<0?-1:0)];if(this.offsets[r]+=t,l.length>Math.max(0,e))return this.value=e==0?l:t>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[s+(t<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(t>0?1:(l instanceof Kr?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Qre{constructor(e,t,r){this.value="",this.done=!1,this.cursor=new uy(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=r?i:t<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class eie{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:i}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Bn.prototype[Symbol.iterator]=function(){return this.iter()},uy.prototype[Symbol.iterator]=Qre.prototype[Symbol.iterator]=eie.prototype[Symbol.iterator]=function(){return this});class oKe{constructor(e,t,r,i){this.from=e,this.to=t,this.number=r,this.text=i}get length(){return this.to-this.from}}function Og(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}let tg="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=1;n<tg.length;n++)tg[n]+=tg[n-1];function sKe(n){for(let e=1;e<tg.length;e+=2)if(tg[e]>n)return tg[e-1]<=n;return!1}function rW(n){return n>=127462&&n<=127487}const iW=8205;function Xi(n,e,t=!0,r=!0){return(t?tie:aKe)(n,e,r)}function tie(n,e,t){if(e==n.length)return e;e&&nie(n.charCodeAt(e))&&rie(n.charCodeAt(e-1))&&e--;let r=Wi(n,e);for(e+=ga(r);e<n.length;){let i=Wi(n,e);if(r==iW||i==iW||t&&sKe(i))e+=ga(i),r=i;else if(rW(i)){let o=0,s=e-2;for(;s>=0&&rW(Wi(n,s));)o++,s-=2;if(o%2==0)break;e+=2}else break}return e}function aKe(n,e,t){for(;e>0;){let r=tie(n,e-2,t);if(r<e)return r;e--}return 0}function nie(n){return n>=56320&&n<57344}function rie(n){return n>=55296&&n<56320}function Wi(n,e){let t=n.charCodeAt(e);if(!rie(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return nie(r)?(t-55296<<10)+(r-56320)+65536:t}function YL(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function ga(n){return n<65536?1:2}const FR=/\r\n?|\n/;var Lo=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(Lo||(Lo={}));class eu{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,i=0;t<this.sections.length;){let o=this.sections[t++],s=this.sections[t++];s<0?(e(r,i,o),i+=o):i+=s,r+=o}}iterChangedRanges(e,t=!1){BR(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];i<0?e.push(r,i):e.push(i,r)}return new eu(e)}composeDesc(e){return this.empty?e:e.empty?this:iie(this,e)}mapDesc(e,t=!1){return e.empty?this:zR(this,e,t)}mapPos(e,t=-1,r=Lo.Simple){let i=0,o=0;for(let s=0;s<this.sections.length;){let a=this.sections[s++],l=this.sections[s++],u=i+a;if(l<0){if(u>e)return o+(e-i);o+=a}else{if(r!=Lo.Simple&&u>=e&&(r==Lo.TrackDel&&i<e&&u>e||r==Lo.TrackBefore&&i<e||r==Lo.TrackAfter&&u>e))return null;if(u>e||u==e&&t<0&&!a)return e==i||t<0?o:o+l;o+=l}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return o}touchesRange(e,t=e){for(let r=0,i=0;r<this.sections.length&&i<=t;){let o=this.sections[r++],s=this.sections[r++],a=i+o;if(s>=0&&i<=t&&a>=e)return i<e&&a>t?"cover":!0;i=a}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new eu(e)}static create(e){return new eu(e)}}class gi extends eu{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return BR(this,(t,r,i,o,s)=>e=e.replace(i,i+(r-t),s),!1),e}mapDesc(e,t=!1){return zR(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let i=0,o=0;i<t.length;i+=2){let s=t[i],a=t[i+1];if(a>=0){t[i]=a,t[i+1]=s;let l=i>>1;for(;r.length<l;)r.push(Bn.empty);r.push(s?e.slice(o,o+s):Bn.empty)}o+=s}return new gi(t,r)}compose(e){return this.empty?e:e.empty?this:iie(this,e,!0)}map(e,t=!1){return e.empty?this:zR(this,e,t,!0)}iterChanges(e,t=!1){BR(this,e,t)}get desc(){return eu.create(this.sections)}filter(e){let t=[],r=[],i=[],o=new S1(this);e:for(let s=0,a=0;;){let l=s==e.length?1e9:e[s++];for(;a<l||a==l&&o.len==0;){if(o.done)break e;let c=Math.min(o.len,l-a);fo(i,c,-1);let f=o.ins==-1?-1:o.off==0?o.ins:0;fo(t,c,f),f>0&&df(r,t,o.text),o.forward(c),a+=c}let u=e[s++];for(;a<u;){if(o.done)break e;let c=Math.min(o.len,u-a);fo(t,c,-1),fo(i,c,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(c),a+=c}}return{changes:new gi(t,r),filtered:eu.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],i=this.sections[t+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let i=[],o=[],s=0,a=null;function l(c=!1){if(!c&&!i.length)return;s<t&&fo(i,t-s,-1);let f=new gi(i,o);a=a?a.compose(f.map(a)):f,i=[],o=[],s=0}function u(c){if(Array.isArray(c))for(let f of c)u(f);else if(c instanceof gi){if(c.length!=t)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${t})`);l(),a=a?a.compose(c.map(a)):c}else{let{from:f,to:d=f,insert:h}=c;if(f>d||f<0||d>t)throw new RangeError(`Invalid change range ${f} to ${d} (in doc of length ${t})`);let m=h?typeof h=="string"?Bn.of(h.split(r||FR)):h:Bn.empty,g=m.length;if(f==d&&g==0)return;f<s&&l(),f>s&&fo(i,f-s,-1),fo(i,d-f,g),df(o,i,m),s=d}}return u(e),l(!a),a}static empty(e){return new gi(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let i=0;i<e.length;i++){let o=e[i];if(typeof o=="number")t.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((s,a)=>a&&typeof s!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)t.push(o[0],0);else{for(;r.length<i;)r.push(Bn.empty);r[i]=Bn.of(o.slice(1)),t.push(o[0],r[i].length)}}}return new gi(t,r)}static createSet(e,t){return new gi(e,t)}}function fo(n,e,t,r=!1){if(e==0&&t<=0)return;let i=n.length-2;i>=0&&t<=0&&t==n[i+1]?n[i]+=e:e==0&&n[i]==0?n[i+1]+=t:r?(n[i]+=e,n[i+1]+=t):n.push(e,t)}function df(n,e,t){if(t.length==0)return;let r=e.length-2>>1;if(r<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<r;)n.push(Bn.empty);n.push(t)}}function BR(n,e,t){let r=n.inserted;for(let i=0,o=0,s=0;s<n.sections.length;){let a=n.sections[s++],l=n.sections[s++];if(l<0)i+=a,o+=a;else{let u=i,c=o,f=Bn.empty;for(;u+=a,c+=l,l&&r&&(f=f.append(r[s-2>>1])),!(t||s==n.sections.length||n.sections[s+1]<0);)a=n.sections[s++],l=n.sections[s++];e(i,u,o,c,f),i=u,o=c}}}function zR(n,e,t,r=!1){let i=[],o=r?[]:null,s=new S1(n),a=new S1(e);for(let l=-1;;)if(s.ins==-1&&a.ins==-1){let u=Math.min(s.len,a.len);fo(i,u,-1),s.forward(u),a.forward(u)}else if(a.ins>=0&&(s.ins<0||l==s.i||s.off==0&&(a.len<s.len||a.len==s.len&&!t))){let u=a.len;for(fo(i,a.ins,-1);u;){let c=Math.min(s.len,u);s.ins>=0&&l<s.i&&s.len<=c&&(fo(i,0,s.ins),o&&df(o,i,s.text),l=s.i),s.forward(c),u-=c}a.next()}else if(s.ins>=0){let u=0,c=s.len;for(;c;)if(a.ins==-1){let f=Math.min(c,a.len);u+=f,c-=f,a.forward(f)}else if(a.ins==0&&a.len<c)c-=a.len,a.next();else break;fo(i,u,l<s.i?s.ins:0),o&&l<s.i&&df(o,i,s.text),l=s.i,s.forward(s.len-c)}else{if(s.done&&a.done)return o?gi.createSet(i,o):eu.create(i);throw new Error("Mismatched change set lengths")}}function iie(n,e,t=!1){let r=[],i=t?[]:null,o=new S1(n),s=new S1(e);for(let a=!1;;){if(o.done&&s.done)return i?gi.createSet(r,i):eu.create(r);if(o.ins==0)fo(r,o.len,0,a),o.next();else if(s.len==0&&!s.done)fo(r,0,s.ins,a),i&&df(i,r,s.text),s.next();else{if(o.done||s.done)throw new Error("Mismatched change set lengths");{let l=Math.min(o.len2,s.len),u=r.length;if(o.ins==-1){let c=s.ins==-1?-1:s.off?0:s.ins;fo(r,l,c,a),i&&c&&df(i,r,s.text)}else s.ins==-1?(fo(r,o.off?0:o.len,l,a),i&&df(i,r,o.textBit(l))):(fo(r,o.off?0:o.len,s.off?0:s.ins,a),i&&!s.off&&df(i,r,s.text));a=(o.ins>l||s.ins>=0&&s.len>l)&&(a||r.length>u),o.forward2(l),s.forward(l)}}}}class S1{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Bn.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?Bn.empty:t[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class uh{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,t):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new uh(r,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return ot.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return ot.range(this.anchor,r)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ot.range(e.anchor,e.head)}static create(e,t,r){return new uh(e,t,r)}}class ot{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:ot.create(this.ranges.map(r=>r.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ot([this.main],0)}addRange(e,t=!0){return ot.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,ot.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ot(e.ranges.map(t=>uh.fromJSON(t)),e.main)}static single(e,t=e){return new ot([ot.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let o=e[i];if(o.empty?o.from<=r:o.from<r)return ot.normalized(e.slice(),t);r=o.to}return new ot(e,t)}static cursor(e,t=0,r,i){return uh.create(e,e,(t==0?0:t<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,t,r,i){let o=(r??16777215)<<6|(i==null?7:Math.min(6,i));return t<e?uh.create(t,e,48|o):uh.create(e,t,(t>e?8:0)|o)}static normalized(e,t=0){let r=e[t];e.sort((i,o)=>i.from-o.from),t=e.indexOf(r);for(let i=1;i<e.length;i++){let o=e[i],s=e[i-1];if(o.empty?o.from<=s.to:o.from<s.to){let a=s.from,l=Math.max(o.to,s.to);i<=t&&t--,e.splice(--i,2,o.anchor>o.head?ot.range(l,a):ot.range(a,l))}}return new ot(e,t)}}function oie(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let KL=0;class St{constructor(e,t,r,i,o){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=i,this.id=KL++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}get reader(){return this}static define(e={}){return new St(e.combine||(t=>t),e.compareInput||((t,r)=>t===r),e.compare||(e.combine?(t,r)=>t===r:ZL),!!e.static,e.enables)}of(e){return new E_([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new E_(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new E_(e,this,2,t)}from(e,t){return t||(t=r=>r),this.compute([e],r=>t(r.field(e)))}}function ZL(n,e){return n==e||n.length==e.length&&n.every((t,r)=>t===e[r])}class E_{constructor(e,t,r,i){this.dependencies=e,this.facet=t,this.type=r,this.value=i,this.id=KL++}dynamicSlot(e){var t;let r=this.value,i=this.facet.compareInput,o=this.id,s=e[o]>>1,a=this.type==2,l=!1,u=!1,c=[];for(let f of this.dependencies)f=="doc"?l=!0:f=="selection"?u=!0:((t=e[f.id])!==null&&t!==void 0?t:1)&1||c.push(e[f.id]);return{create(f){return f.values[s]=r(f),1},update(f,d){if(l&&d.docChanged||u&&(d.docChanged||d.selection)||UR(f,c)){let h=r(f);if(a?!oW(h,f.values[s],i):!i(h,f.values[s]))return f.values[s]=h,1}return 0},reconfigure:(f,d)=>{let h,m=d.config.address[o];if(m!=null){let g=hM(d,m);if(this.dependencies.every(y=>y instanceof St?d.facet(y)===f.facet(y):y instanceof Qi?d.field(y,!1)==f.field(y,!1):!0)||(a?oW(h=r(f),g,i):i(h=r(f),g)))return f.values[s]=g,0}else h=r(f);return f.values[s]=h,1}}}}function oW(n,e,t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!1;return!0}function UR(n,e){let t=!1;for(let r of e)cy(n,r)&1&&(t=!0);return t}function lKe(n,e,t){let r=t.map(l=>n[l.id]),i=t.map(l=>l.type),o=r.filter(l=>!(l&1)),s=n[e.id]>>1;function a(l){let u=[];for(let c=0;c<r.length;c++){let f=hM(l,r[c]);if(i[c]==2)for(let d of f)u.push(d);else u.push(f)}return e.combine(u)}return{create(l){for(let u of r)cy(l,u);return l.values[s]=a(l),1},update(l,u){if(!UR(l,o))return 0;let c=a(l);return e.compare(c,l.values[s])?0:(l.values[s]=c,1)},reconfigure(l,u){let c=UR(l,r),f=u.config.facets[e.id],d=u.facet(e);if(f&&!c&&ZL(t,f))return l.values[s]=d,0;let h=a(l);return e.compare(h,d)?(l.values[s]=d,0):(l.values[s]=h,1)}}}const sW=St.define({static:!0});class Qi{constructor(e,t,r,i,o){this.id=e,this.createF=t,this.updateF=r,this.compareF=i,this.spec=o,this.provides=void 0}static define(e){let t=new Qi(KL++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(sW).find(r=>r.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:r=>(r.values[t]=this.create(r),1),update:(r,i)=>{let o=r.values[t],s=this.updateF(o,i);return this.compareF(o,s)?0:(r.values[t]=s,1)},reconfigure:(r,i)=>i.config.address[this.id]!=null?(r.values[t]=i.field(this),0):(r.values[t]=this.create(r),1)}}init(e){return[this,sW.of({field:this,create:e})]}get extension(){return this}}const Zd={lowest:4,low:3,default:2,high:1,highest:0};function b0(n){return e=>new sie(e,n)}const up={highest:b0(Zd.highest),high:b0(Zd.high),default:b0(Zd.default),low:b0(Zd.low),lowest:b0(Zd.lowest)};class sie{constructor(e,t){this.inner=e,this.prec=t}}class yC{of(e){return new VR(this,e)}reconfigure(e){return yC.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class VR{constructor(e,t){this.compartment=e,this.inner=t}}class dM{constructor(e,t,r,i,o,s){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=i,this.staticValues=o,this.facets=s,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,r){let i=[],o=Object.create(null),s=new Map;for(let d of uKe(e,t,s))d instanceof Qi?i.push(d):(o[d.facet.id]||(o[d.facet.id]=[])).push(d);let a=Object.create(null),l=[],u=[];for(let d of i)a[d.id]=u.length<<1,u.push(h=>d.slot(h));let c=r==null?void 0:r.config.facets;for(let d in o){let h=o[d],m=h[0].facet,g=c&&c[d]||[];if(h.every(y=>y.type==0))if(a[m.id]=l.length<<1|1,ZL(g,h))l.push(r.facet(m));else{let y=m.combine(h.map(p=>p.value));l.push(r&&m.compare(y,r.facet(m))?r.facet(m):y)}else{for(let y of h)y.type==0?(a[y.id]=l.length<<1|1,l.push(y.value)):(a[y.id]=u.length<<1,u.push(p=>y.dynamicSlot(p)));a[m.id]=u.length<<1,u.push(y=>lKe(y,m,h))}}let f=u.map(d=>d(a));return new dM(e,s,f,a,l,o)}}function uKe(n,e,t){let r=[[],[],[],[],[]],i=new Map;function o(s,a){let l=i.get(s);if(l!=null){if(l<=a)return;let u=r[l].indexOf(s);u>-1&&r[l].splice(u,1),s instanceof VR&&t.delete(s.compartment)}if(i.set(s,a),Array.isArray(s))for(let u of s)o(u,a);else if(s instanceof VR){if(t.has(s.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(s.compartment)||s.inner;t.set(s.compartment,u),o(u,a)}else if(s instanceof sie)o(s.inner,s.prec);else if(s instanceof Qi)r[a].push(s),s.provides&&o(s.provides,a);else if(s instanceof E_)r[a].push(s),s.facet.extensions&&o(s.facet.extensions,Zd.default);else{let u=s.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${s}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(u,a)}}return o(n,Zd.default),r.reduce((s,a)=>s.concat(a))}function cy(n,e){if(e&1)return 2;let t=e>>1,r=n.status[t];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;n.status[t]=4;let i=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|i}function hM(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const aie=St.define(),$R=St.define({combine:n=>n.some(e=>e),static:!0}),lie=St.define({combine:n=>n.length?n[0]:void 0,static:!0}),uie=St.define(),cie=St.define(),fie=St.define(),die=St.define({combine:n=>n.length?n[0]:!1});class pu{constructor(e,t){this.type=e,this.value=t}static define(){return new cKe}}class cKe{of(e){return new pu(this,e)}}class fKe{constructor(e){this.map=e}of(e){return new dn(this,e)}}class dn{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new dn(this.type,t)}is(e){return this.type==e}static define(e={}){return new fKe(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let r=[];for(let i of e){let o=i.map(t);o&&r.push(o)}return r}}dn.reconfigure=dn.define();dn.appendConfig=dn.define();class xi{constructor(e,t,r,i,o,s){this.startState=e,this.changes=t,this.selection=r,this.effects=i,this.annotations=o,this.scrollIntoView=s,this._doc=null,this._state=null,r&&oie(r,t.newLength),o.some(a=>a.type==xi.time)||(this.annotations=o.concat(xi.time.of(Date.now())))}static create(e,t,r,i,o,s){return new xi(e,t,r,i,o,s)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(xi.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}xi.time=pu.define();xi.userEvent=pu.define();xi.addToHistory=pu.define();xi.remote=pu.define();function dKe(n,e){let t=[];for(let r=0,i=0;;){let o,s;if(r<n.length&&(i==e.length||e[i]>=n[r]))o=n[r++],s=n[r++];else if(i<e.length)o=e[i++],s=e[i++];else return t;!t.length||t[t.length-1]<o?t.push(o,s):t[t.length-1]<s&&(t[t.length-1]=s)}}function hie(n,e,t){var r;let i,o,s;return t?(i=e.changes,o=gi.empty(e.changes.length),s=n.changes.compose(e.changes)):(i=e.changes.map(n.changes),o=n.changes.mapDesc(e.changes,!0),s=n.changes.compose(i)),{changes:s,selection:e.selection?e.selection.map(o):(r=n.selection)===null||r===void 0?void 0:r.map(i),effects:dn.mapEffects(n.effects,i).concat(dn.mapEffects(e.effects,o)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function HR(n,e,t){let r=e.selection,i=ng(e.annotations);return e.userEvent&&(i=i.concat(xi.userEvent.of(e.userEvent))),{changes:e.changes instanceof gi?e.changes:gi.of(e.changes||[],t,n.facet(lie)),selection:r&&(r instanceof ot?r:ot.single(r.anchor,r.head)),effects:ng(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function pie(n,e,t){let r=HR(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(t=!1);let s=!!e[o].sequential;r=hie(r,HR(n,e[o],s?r.changes.newLength:n.doc.length),s)}let i=xi.create(n,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return pKe(t?hKe(i):i)}function hKe(n){let e=n.startState,t=!0;for(let i of e.facet(uie)){let o=i(n);if(o===!1){t=!1;break}Array.isArray(o)&&(t=t===!0?o:dKe(t,o))}if(t!==!0){let i,o;if(t===!1)o=n.changes.invertedDesc,i=gi.empty(e.doc.length);else{let s=n.changes.filter(t);i=s.changes,o=s.filtered.mapDesc(s.changes).invertedDesc}n=xi.create(e,i,n.selection&&n.selection.map(o),dn.mapEffects(n.effects,o),n.annotations,n.scrollIntoView)}let r=e.facet(cie);for(let i=r.length-1;i>=0;i--){let o=r[i](n);o instanceof xi?n=o:Array.isArray(o)&&o.length==1&&o[0]instanceof xi?n=o[0]:n=pie(e,ng(o),!1)}return n}function pKe(n){let e=n.startState,t=e.facet(fie),r=n;for(let i=t.length-1;i>=0;i--){let o=t[i](n);o&&Object.keys(o).length&&(r=hie(r,HR(e,o,n.changes.newLength),!0))}return r==n?n:xi.create(e,n.changes,n.selection,r.effects,r.annotations,r.scrollIntoView)}const mKe=[];function ng(n){return n==null?mKe:Array.isArray(n)?n:[n]}var Er=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(Er||(Er={}));const gKe=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let WR;try{WR=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function vKe(n){if(WR)return WR.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||gKe.test(t)))return!0}return!1}function yKe(n){return e=>{if(!/\S/.test(e))return Er.Space;if(vKe(e))return Er.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return Er.Word;return Er.Other}}class Mn{constructor(e,t,r,i,o,s){this.config=e,this.doc=t,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=o,s&&(s._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)cy(this,a<<1);this.computeSlot=null}field(e,t=!0){let r=this.config.address[e.id];if(r==null){if(t)throw new RangeError("Field is not present in this state");return}return cy(this,r),hM(this,r)}update(...e){return pie(this,e,!0)}applyTransaction(e){let t=this.config,{base:r,compartments:i}=t;for(let a of e.effects)a.is(yC.reconfigure)?(t&&(i=new Map,t.compartments.forEach((l,u)=>i.set(u,l)),t=null),i.set(a.value.compartment,a.value.extension)):a.is(dn.reconfigure)?(t=null,r=a.value):a.is(dn.appendConfig)&&(t=null,r=ng(r).concat(a.value));let o;t?o=e.startState.values.slice():(t=dM.resolve(r,i,this),o=new Mn(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(l,u)=>u.reconfigure(l,this),null).values);let s=e.startState.facet($R)?e.newSelection:e.newSelection.asSingle();new Mn(t,e.newDoc,s,o,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:ot.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,r=e(t.ranges[0]),i=this.changes(r.changes),o=[r.range],s=ng(r.effects);for(let a=1;a<t.ranges.length;a++){let l=e(t.ranges[a]),u=this.changes(l.changes),c=u.map(i);for(let d=0;d<a;d++)o[d]=o[d].map(c);let f=i.mapDesc(u,!0);o.push(l.range.map(f)),i=i.compose(c),s=dn.mapEffects(s,c).concat(dn.mapEffects(ng(l.effects),f))}return{changes:i,selection:ot.create(o,t.mainIndex),effects:s}}changes(e=[]){return e instanceof gi?e:gi.of(e,this.doc.length,this.facet(Mn.lineSeparator))}toText(e){return Bn.of(e.split(this.facet(Mn.lineSeparator)||FR))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(cy(this,t),hM(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Qi&&this.config.address[i.id]!=null&&(t[r]=i.spec.toJSON(this.field(e[r]),this))}return t}static fromJSON(e,t={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let o in r)if(Object.prototype.hasOwnProperty.call(e,o)){let s=r[o],a=e[o];i.push(s.init(l=>s.spec.fromJSON(a,l)))}}return Mn.create({doc:e.doc,selection:ot.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(e={}){let t=dM.resolve(e.extensions||[],new Map),r=e.doc instanceof Bn?e.doc:Bn.of((e.doc||"").split(t.staticFacet(Mn.lineSeparator)||FR)),i=e.selection?e.selection instanceof ot?e.selection:ot.single(e.selection.anchor,e.selection.head):ot.single(0);return oie(i,r.length),t.staticFacet($R)||(i=i.asSingle()),new Mn(t,r,i,t.dynamicSlots.map(()=>null),(o,s)=>s.create(o),null)}get tabSize(){return this.facet(Mn.tabSize)}get lineBreak(){return this.facet(Mn.lineSeparator)||`
`}get readOnly(){return this.facet(die)}phrase(e,...t){for(let r of this.facet(Mn.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let o=+(i||1);return!o||o>t.length?r:t[o-1]})),e}languageDataAt(e,t,r=-1){let i=[];for(let o of this.facet(aie))for(let s of o(this,t,r))Object.prototype.hasOwnProperty.call(s,e)&&i.push(s[e]);return i}charCategorizer(e){return yKe(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:r,length:i}=this.doc.lineAt(e),o=this.charCategorizer(e),s=e-r,a=e-r;for(;s>0;){let l=Xi(t,s,!1);if(o(t.slice(l,s))!=Er.Word)break;s=l}for(;a<i;){let l=Xi(t,a);if(o(t.slice(a,l))!=Er.Word)break;a=l}return s==a?null:ot.range(s+r,a+r)}}Mn.allowMultipleSelections=$R;Mn.tabSize=St.define({combine:n=>n.length?n[0]:4});Mn.lineSeparator=lie;Mn.readOnly=die;Mn.phrases=St.define({compare(n,e){let t=Object.keys(n),r=Object.keys(e);return t.length==r.length&&t.every(i=>n[i]==e[i])}});Mn.languageData=aie;Mn.changeFilter=uie;Mn.transactionFilter=cie;Mn.transactionExtender=fie;yC.reconfigure=dn.define();function mu(n,e,t={}){let r={};for(let i of n)for(let o of Object.keys(i)){let s=i[o],a=r[o];if(a===void 0)r[o]=s;else if(!(a===s||s===void 0))if(Object.hasOwnProperty.call(t,o))r[o]=t[o](a,s);else throw new Error("Config merge conflict for field "+o)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class Hh{eq(e){return this==e}range(e,t=e){return jR.create(e,t,this)}}Hh.prototype.startSide=Hh.prototype.endSide=0;Hh.prototype.point=!1;Hh.prototype.mapMode=Lo.TrackDel;let jR=class mie{constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(e,t,r){return new mie(e,t,r)}};function GR(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class JL{constructor(e,t,r,i){this.from=e,this.to=t,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,i=0){let o=r?this.to:this.from;for(let s=i,a=o.length;;){if(s==a)return s;let l=s+a>>1,u=o[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-t;if(l==s)return u>=0?s:a;u>=0?a=l:s=l+1}}between(e,t,r,i){for(let o=this.findIndex(t,-1e9,!0),s=this.findIndex(r,1e9,!1,o);o<s;o++)if(i(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,t){let r=[],i=[],o=[],s=-1,a=-1;for(let l=0;l<this.value.length;l++){let u=this.value[l],c=this.from[l]+e,f=this.to[l]+e,d,h;if(c==f){let m=t.mapPos(c,u.startSide,u.mapMode);if(m==null||(d=h=m,u.startSide!=u.endSide&&(h=t.mapPos(c,u.endSide),h<d)))continue}else if(d=t.mapPos(c,u.startSide),h=t.mapPos(f,u.endSide),d>h||d==h&&u.startSide>0&&u.endSide<=0)continue;(h-d||u.endSide-u.startSide)<0||(s<0&&(s=d),u.point&&(a=Math.max(a,h-d)),r.push(u),i.push(d-s),o.push(h-s))}return{mapped:r.length?new JL(i,o,r,a):null,pos:s}}}class Pn{constructor(e,t,r,i){this.chunkPos=e,this.chunk=t,this.nextLayer=r,this.maxPoint=i}static create(e,t,r,i){return new Pn(e,t,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:r=!1,filterFrom:i=0,filterTo:o=this.length}=e,s=e.filter;if(t.length==0&&!s)return this;if(r&&(t=t.slice().sort(GR)),this.isEmpty)return t.length?Pn.of(t):this;let a=new gie(this,null,-1).goto(0),l=0,u=[],c=new qf;for(;a.value||l<t.length;)if(l<t.length&&(a.from-t[l].from||a.startSide-t[l].value.startSide)>=0){let f=t[l++];c.addInner(f.from,f.to,f.value)||u.push(f)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(a.chunkIndex)<t[l].from)&&(!s||i>this.chunkEnd(a.chunkIndex)||o<this.chunkPos[a.chunkIndex])&&c.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!s||i>a.to||o<a.from||s(a.from,a.to,a.value))&&(c.addInner(a.from,a.to,a.value)||u.push(jR.create(a.from,a.to,a.value))),a.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?Pn.empty:this.nextLayer.update({add:u,filter:s,filterFrom:i,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],r=[],i=-1;for(let s=0;s<this.chunk.length;s++){let a=this.chunkPos[s],l=this.chunk[s],u=e.touchesRange(a,a+l.length);if(u===!1)i=Math.max(i,l.maxPoint),t.push(l),r.push(e.mapPos(a));else if(u===!0){let{mapped:c,pos:f}=l.map(a,e);c&&(i=Math.max(i,c.maxPoint),t.push(c),r.push(f))}}let o=this.nextLayer.map(e);return t.length==0?o:new Pn(r,t,o||Pn.empty,i)}between(e,t,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let o=this.chunkPos[i],s=this.chunk[i];if(t>=o&&e<=o+s.length&&s.between(o,e-o,t-o,r)===!1)return}this.nextLayer.between(e,t,r)}}iter(e=0){return _1.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return _1.from(e).goto(t)}static compare(e,t,r,i,o=-1){let s=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=o),a=t.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=o),l=aW(s,a,r),u=new w0(s,l,o),c=new w0(a,l,o);r.iterGaps((f,d,h)=>lW(u,f,c,d,h,i)),r.empty&&r.length==0&&lW(u,0,c,0,0,i)}static eq(e,t,r=0,i){i==null&&(i=999999999);let o=e.filter(c=>!c.isEmpty&&t.indexOf(c)<0),s=t.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(o.length!=s.length)return!1;if(!o.length)return!0;let a=aW(o,s),l=new w0(o,a,0).goto(r),u=new w0(s,a,0).goto(r);for(;;){if(l.to!=u.to||!qR(l.active,u.active)||l.point&&(!u.point||!l.point.eq(u.point)))return!1;if(l.to>i)return!0;l.next(),u.next()}}static spans(e,t,r,i,o=-1){let s=new w0(e,null,o).goto(t),a=t,l=s.openStart;for(;;){let u=Math.min(s.to,r);if(s.point){let c=s.activeForPoint(s.to),f=s.pointFrom<t?c.length+1:s.point.startSide<0?c.length:Math.min(c.length,l);i.point(a,u,s.point,c,f,s.pointRank),l=Math.min(s.openEnd(u),c.length)}else u>a&&(i.span(a,u,s.active,l),l=s.openEnd(u));if(s.to>r)return l+(s.point&&s.to>r?1:0);a=s.to,s.next()}}static of(e,t=!1){let r=new qf;for(let i of e instanceof jR?[e]:t?xKe(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return Pn.empty;let t=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=Pn.empty;i=i.nextLayer)t=new Pn(i.chunkPos,i.chunk,t,Math.max(i.maxPoint,t.maxPoint));return t}}Pn.empty=new Pn([],[],null,-1);function xKe(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let r=n[t];if(GR(e,r)>0)return n.slice().sort(GR);e=r}return n}Pn.empty.nextLayer=Pn.empty;class qf{finishChunk(e){this.chunks.push(new JL(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new qf)).add(e,t,r)}addInner(e,t,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(Pn.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Pn.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function aW(n,e,t){let r=new Map;for(let o of n)for(let s=0;s<o.chunk.length;s++)o.chunk[s].maxPoint<=0&&r.set(o.chunk[s],o.chunkPos[s]);let i=new Set;for(let o of e)for(let s=0;s<o.chunk.length;s++){let a=r.get(o.chunk[s]);a!=null&&(t?t.mapPos(a):a)==o.chunkPos[s]&&!(t!=null&&t.touchesRange(a,a+o.chunk[s].length))&&i.add(o.chunk[s])}return i}class gie{constructor(e,t,r,i=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],r=e+t.from[this.rangeIndex];if(this.from=r,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class _1{constructor(e){this.heap=e}static from(e,t=null,r=-1){let i=[];for(let o=0;o<e.length;o++)for(let s=e[o];!s.isEmpty;s=s.nextLayer)s.maxPoint>=r&&i.push(new gie(s,t,r,o));return i.length==1?i[0]:new _1(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let r=this.heap.length>>1;r>=0;r--)Q3(this.heap,r);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let r=this.heap.length>>1;r>=0;r--)Q3(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Q3(this.heap,0)}}}function Q3(n,e){for(let t=n[e];;){let r=(e<<1)+1;if(r>=n.length)break;let i=n[r];if(r+1<n.length&&i.compare(n[r+1])>=0&&(i=n[r+1],r++),t.compare(i)<0)break;n[r]=t,n[e]=i,e=r}}class w0{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=_1.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){SS(this.active,e),SS(this.activeTo,e),SS(this.activeRank,e),this.minActive=uW(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:i,rank:o}=this.cursor;for(;t<this.activeRank.length&&(o-this.activeRank[t]||i-this.activeTo[t])>0;)t++;_S(this.active,t,r),_S(this.activeTo,t,i),_S(this.activeRank,t,o),e&&_S(e,t,this.cursor.from),this.minActive=uW(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&SS(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(r),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}}function lW(n,e,t,r,i,o){n.goto(e),t.goto(r);let s=r+i,a=r,l=r-e;for(;;){let u=n.to+l-t.to||n.endSide-t.endSide,c=u<0?n.to+l:t.to,f=Math.min(c,s);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&qR(n.activeForPoint(n.to),t.activeForPoint(t.to))||o.comparePoint(a,f,n.point,t.point):f>a&&!qR(n.active,t.active)&&o.compareRange(a,f,n.active,t.active),c>s)break;a=c,u<=0&&n.next(),u>=0&&t.next()}}function qR(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function SS(n,e){for(let t=e,r=n.length-1;t<r;t++)n[t]=n[t+1];n.pop()}function _S(n,e,t){for(let r=n.length-1;r>=e;r--)n[r+1]=n[r];n[e]=t}function uW(n,e){let t=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||n[i].endSide-n[t].endSide)<0&&(t=i,r=e[i]);return t}function yv(n,e,t=n.length){let r=0;for(let i=0;i<t;)n.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=Xi(n,i));return r}function XR(n,e,t,r){for(let i=0,o=0;;){if(o>=e)return i;if(i==n.length)break;o+=n.charCodeAt(i)==9?t-o%t:1,i=Xi(n,i)}return r===!0?-1:n.length}const YR="",cW=typeof Symbol>"u"?"__"+YR:Symbol.for(YR),KR=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),fW=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Xf{constructor(e,t){this.rules=[];let{finish:r}=t||{};function i(s){return/^@/.test(s)?[s]:s.split(/,\s*/)}function o(s,a,l,u){let c=[],f=/^@(\w+)\b/.exec(s[0]),d=f&&f[1]=="keyframes";if(f&&a==null)return l.push(s[0]+";");for(let h in a){let m=a[h];if(/&/.test(h))o(h.split(/,\s*/).map(g=>s.map(y=>g.replace(/&/,y))).reduce((g,y)=>g.concat(y)),m,l);else if(m&&typeof m=="object"){if(!f)throw new RangeError("The value of a property ("+h+") should be a primitive value.");o(i(h),m,c,d)}else m!=null&&c.push(h.replace(/_.*/,"").replace(/[A-Z]/g,g=>"-"+g.toLowerCase())+": "+m+";")}(c.length||d)&&l.push((r&&!f&&!u?s.map(r):s).join(", ")+" {"+c.join(" ")+"}")}for(let s in e)o(i(s),e[s],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=fW[cW]||1;return fW[cW]=e+1,YR+e.toString(36)}static mount(e,t,r){let i=e[KR],o=r&&r.nonce;i?o&&i.setNonce(o):i=new bKe(e,o),i.mount(Array.isArray(t)?t:[t],e)}}let dW=new Map;class bKe{constructor(e,t){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let o=dW.get(r);if(o)return e[KR]=o;this.sheet=new i.CSSStyleSheet,dW.set(r,this)}else this.styleTag=r.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[KR]=this}mount(e,t){let r=this.sheet,i=0,o=0;for(let s=0;s<e.length;s++){let a=e[s],l=this.modules.indexOf(a);if(l<o&&l>-1&&(this.modules.splice(l,1),o--,l=-1),l==-1){if(this.modules.splice(o++,0,a),r)for(let u=0;u<a.rules.length;u++)r.insertRule(a.rules[u],i++)}else{for(;o<l;)i+=this.modules[o++].rules.length;i+=a.rules.length,o++}}if(r)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let s="";for(let l=0;l<this.modules.length;l++)s+=this.modules[l].getRules()+`
`;this.styleTag.textContent=s;let a=t.head||t;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Yf={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},E1={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},wKe=typeof navigator<"u"&&/Mac/.test(navigator.platform),SKe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var ji=0;ji<10;ji++)Yf[48+ji]=Yf[96+ji]=String(ji);for(var ji=1;ji<=24;ji++)Yf[ji+111]="F"+ji;for(var ji=65;ji<=90;ji++)Yf[ji]=String.fromCharCode(ji+32),E1[ji]=String.fromCharCode(ji);for(var eD in Yf)E1.hasOwnProperty(eD)||(E1[eD]=Yf[eD]);function _Ke(n){var e=wKe&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||SKe&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?E1:Yf)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function M1(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function ZR(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function M_(n,e){if(!e.anchorNode)return!1;try{return ZR(n,e.anchorNode)}catch{return!1}}function kg(n){return n.nodeType==3?jh(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function fy(n,e,t,r){return t?hW(n,e,t,r,-1)||hW(n,e,t,r,1):!1}function Wh(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function pM(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function hW(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:au(n))){if(n.nodeName=="DIV")return!1;let o=n.parentNode;if(!o||o.nodeType!=1)return!1;e=Wh(n)+(i<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=i<0?au(n):0}else return!1}}function au(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Sx(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function EKe(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function vie(n,e){let t=e.width/n.offsetWidth,r=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-n.offsetHeight)<1)&&(r=1),{scaleX:t,scaleY:r}}function MKe(n,e,t,r,i,o,s,a){let l=n.ownerDocument,u=l.defaultView||window;for(let c=n,f=!1;c&&!f;)if(c.nodeType==1){let d,h=c==l.body,m=1,g=1;if(h)d=EKe(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(f=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let w=c.getBoundingClientRect();({scaleX:m,scaleY:g}=vie(c,w)),d={left:w.left,right:w.left+c.clientWidth*m,top:w.top,bottom:w.top+c.clientHeight*g}}let y=0,p=0;if(i=="nearest")e.top<d.top?(p=-(d.top-e.top+s),t>0&&e.bottom>d.bottom+p&&(p=e.bottom-d.bottom+p+s)):e.bottom>d.bottom&&(p=e.bottom-d.bottom+s,t<0&&e.top-p<d.top&&(p=-(d.top+p-e.top+s)));else{let w=e.bottom-e.top,b=d.bottom-d.top;p=(i=="center"&&w<=b?e.top+w/2-b/2:i=="start"||i=="center"&&t<0?e.top-s:e.bottom-b+s)-d.top}if(r=="nearest"?e.left<d.left?(y=-(d.left-e.left+o),t>0&&e.right>d.right+y&&(y=e.right-d.right+y+o)):e.right>d.right&&(y=e.right-d.right+o,t<0&&e.left<d.left+y&&(y=-(d.left+y-e.left+o))):y=(r=="center"?e.left+(e.right-e.left)/2-(d.right-d.left)/2:r=="start"==a?e.left-o:e.right-(d.right-d.left)+o)-d.left,y||p)if(h)u.scrollBy(y,p);else{let w=0,b=0;if(p){let v=c.scrollTop;c.scrollTop+=p/g,b=(c.scrollTop-v)*g}if(y){let v=c.scrollLeft;c.scrollLeft+=y/m,w=(c.scrollLeft-v)*m}e={left:e.left-w,top:e.top-b,right:e.right-w,bottom:e.bottom-b},w&&Math.abs(w-y)<1&&(r="nearest"),b&&Math.abs(b-p)<1&&(i="nearest")}if(h)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function CKe(n){let e=n.ownerDocument,t,r;for(let i=n.parentNode;i&&!(i==e.body||t&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!t&&i.scrollWidth>i.clientWidth&&(t=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:t,y:r}}class AKe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:r}=e;this.set(t,Math.min(e.anchorOffset,t?au(t):0),r,Math.min(e.focusOffset,r?au(r):0))}set(e,t,r,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=i}}let lm=null;function yie(n){if(n.setActive)return n.setActive();if(lm)return n.focus(lm);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(lm==null?{get preventScroll(){return lm={preventScroll:!0},!0}}:void 0),!lm){lm=!1;for(let t=0;t<e.length;){let r=e[t++],i=e[t++],o=e[t++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=o&&(r.scrollLeft=o)}}}let pW;function jh(n,e,t=e){let r=pW||(pW=document.createRange());return r.setEnd(n,t),r.setStart(n,e),r}function rg(n,e,t,r){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let o=new KeyboardEvent("keydown",i);o.synthetic=!0,n.dispatchEvent(o);let s=new KeyboardEvent("keyup",i);return s.synthetic=!0,n.dispatchEvent(s),o.defaultPrevented||s.defaultPrevented}function TKe(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function xie(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function DKe(n,e){let t=e.focusNode,r=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=r)return!1;for(r=Math.min(r,au(t));;)if(r){if(t.nodeType!=1)return!1;let i=t.childNodes[r-1];i.contentEditable=="false"?r--:(t=i,r=au(t))}else{if(t==n)return!0;r=Wh(t),t=t.parentNode}}function bie(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function wie(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r>0)return{node:t,offset:r};if(t.nodeType==1&&r>0){if(t.contentEditable=="false")return null;t=t.childNodes[r-1],r=au(t)}else if(t.parentNode&&!pM(t))r=Wh(t),t=t.parentNode;else return null}}function Sie(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r<t.nodeValue.length)return{node:t,offset:r};if(t.nodeType==1&&r<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[r],r=0}else if(t.parentNode&&!pM(t))r=Wh(t)+1,t=t.parentNode;else return null}}class mo{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new mo(e.parentNode,Wh(e),t)}static after(e,t){return new mo(e.parentNode,Wh(e)+1,t)}}const QL=[];class or{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let r of this.children){if(r==e)return t;t+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let r=this.dom,i=null,o;for(let s of this.children){if(s.flags&7){if(!s.dom&&(o=i?i.nextSibling:r.firstChild)){let a=or.get(o);(!a||!a.parent&&a.canReuseDOM(s))&&s.reuseDOM(o)}s.sync(e,t),s.flags&=-8}if(o=i?i.nextSibling:r.firstChild,t&&!t.written&&t.node==r&&o!=s.dom&&(t.written=!0),s.dom.parentNode==r)for(;o&&o!=s.dom;)o=mW(o);else r.insertBefore(s.dom,o);i=s.dom}for(o=i?i.nextSibling:r.firstChild,o&&t&&t.node==r&&(t.written=!0);o;)o=mW(o)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,t),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let r;if(e==this.dom)r=this.dom.childNodes[t];else{let i=au(e)==0?0:t==0?-1:1;for(;;){let o=e.parentNode;if(o==this.dom)break;i==0&&o.firstChild!=o.lastChild&&(e==o.firstChild?i=-1:i=1),e=o}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!or.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,o=0;;i++){let s=this.children[i];if(s.dom==r)return o;o+=s.length+s.breakAfter}}domBoundsAround(e,t,r=0){let i=-1,o=-1,s=-1,a=-1;for(let l=0,u=r,c=r;l<this.children.length;l++){let f=this.children[l],d=u+f.length;if(u<e&&d>t)return f.domBoundsAround(e,t,u);if(d>=e&&i==-1&&(i=l,o=u),u>t&&f.dom.parentNode==this.dom){s=l,a=c;break}c=d,u=d+f.breakAfter}return{from:o,to:a<0?r+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:s<this.children.length&&s>=0?this.children[s].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,r=QL){this.markDirty();for(let i=e;i<t;i++){let o=this.children[i];o.parent==this&&r.indexOf(o)<0&&o.destroy()}r.length<250?this.children.splice(e,t-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(t));for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new _ie(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,r,i,o,s){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}or.prototype.breakAfter=0;function mW(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class _ie{constructor(e,t,r){this.children=e,this.pos=t,this.i=r,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function Eie(n,e,t,r,i,o,s,a,l){let{children:u}=n,c=u.length?u[e]:null,f=o.length?o[o.length-1]:null,d=f?f.breakAfter:s;if(!(e==r&&c&&!s&&!d&&o.length<2&&c.merge(t,i,o.length?f:null,t==0,a,l))){if(r<u.length){let h=u[r];h&&(i<h.length||h.breakAfter&&(f!=null&&f.breakAfter))?(e==r&&(h=h.split(i),i=0),!d&&f&&h.merge(0,i,f,!0,0,l)?o[o.length-1]=h:((i||h.children.length&&!h.children[0].length)&&h.merge(0,i,null,!1,0,l),o.push(h))):h!=null&&h.breakAfter&&(f?f.breakAfter=1:s=1),r++}for(c&&(c.breakAfter=s,t>0&&(!s&&o.length&&c.merge(t,c.length,o[0],!1,a,0)?c.breakAfter=o.shift().breakAfter:(t<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(t,c.length,null,!1,a,0),e++));e<r&&o.length;)if(u[r-1].become(o[o.length-1]))r--,o.pop(),l=o.length?0:a;else if(u[e].become(o[0]))e++,o.shift(),a=o.length?0:l;else break;!o.length&&e&&r<u.length&&!u[e-1].breakAfter&&u[r].merge(0,0,u[e-1],!1,a,l)&&e--,(e<r||o.length)&&n.replaceChildren(e,r,o)}}function Mie(n,e,t,r,i,o){let s=n.childCursor(),{i:a,off:l}=s.findPos(t,1),{i:u,off:c}=s.findPos(e,-1),f=e-t;for(let d of r)f+=d.length;n.length+=f,Eie(n,u,c,a,l,r,0,i,o)}let as=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},JR=typeof document<"u"?document:{documentElement:{style:{}}};const QR=/Edge\/(\d+)/.exec(as.userAgent),Cie=/MSIE \d/.test(as.userAgent),eO=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(as.userAgent),xC=!!(Cie||eO||QR),gW=!xC&&/gecko\/(\d+)/i.test(as.userAgent),tD=!xC&&/Chrome\/(\d+)/.exec(as.userAgent),vW="webkitFontSmoothing"in JR.documentElement.style,Aie=!xC&&/Apple Computer/.test(as.vendor),yW=Aie&&(/Mobile\/\w+/.test(as.userAgent)||as.maxTouchPoints>2);var Mt={mac:yW||/Mac/.test(as.platform),windows:/Win/.test(as.platform),linux:/Linux|X11/.test(as.platform),ie:xC,ie_version:Cie?JR.documentMode||6:eO?+eO[1]:QR?+QR[1]:0,gecko:gW,gecko_version:gW?+(/Firefox\/(\d+)/.exec(as.userAgent)||[0,0])[1]:0,chrome:!!tD,chrome_version:tD?+tD[1]:0,ios:yW,android:/Android\b/.test(as.userAgent),webkit:vW,safari:Aie,webkit_version:vW?+(/\bAppleWebKit\/(\d+)/.exec(as.userAgent)||[0,0])[1]:0,tabSize:JR.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const NKe=256;class sl extends or{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,r){return this.flags&8||r&&(!(r instanceof sl)||this.length-(t-e)+r.length>NKe||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new sl(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new mo(this.dom,e)}domBoundsAround(e,t,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return PKe(this.dom,e,t)}}class vc extends or{constructor(e,t=[],r=0){super(),this.mark=e,this.children=t,this.length=r;for(let i of t)i.setParent(this)}setAttrs(e){if(xie(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,r,i,o,s){return r&&(!(r instanceof vc&&r.mark.eq(this.mark))||e&&o<=0||t<this.length&&s<=0)?!1:(Mie(this,e,t,r?r.children.slice():[],o-1,s-1),this.markDirty(),!0)}split(e){let t=[],r=0,i=-1,o=0;for(let a of this.children){let l=r+a.length;l>e&&t.push(r<e?a.split(e-r):a),i<0&&r>=e&&(i=o),r=l,o++}let s=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new vc(this.mark,t,s)}domAtPos(e){return Tie(this,e)}coordsAt(e,t){return Nie(this,e,t)}}function PKe(n,e,t){let r=n.nodeValue.length;e>r&&(e=r);let i=e,o=e,s=0;e==0&&t<0||e==r&&t>=0?Mt.chrome||Mt.gecko||(e?(i--,s=1):o<r&&(o++,s=-1)):t<0?i--:o<r&&o++;let a=jh(n,i,o).getClientRects();if(!a.length)return null;let l=a[(s?s<0:t>=0)?0:a.length-1];return Mt.safari&&!s&&l.width==0&&(l=Array.prototype.find.call(a,u=>u.width)||l),s?Sx(l,s<0):l||null}class hf extends or{static create(e,t,r){return new hf(e,t,r)}constructor(e,t,r){super(),this.widget=e,this.length=t,this.side=r,this.prevWidget=null}split(e){let t=hf.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,r,i,o,s){return r&&(!(r instanceof hf)||!this.widget.compare(r.widget)||e>0&&o<=0||t<this.length&&s<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}become(e){return e instanceof hf&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Bn.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,r=t&&t.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):Bn.empty}domAtPos(e){return(this.length?e==0:this.side>0)?mo.before(this.dom):mo.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);if(r)return r;let i=this.dom.getClientRects(),o=null;if(!i.length)return null;let s=this.side?this.side<0:e>0;for(let a=s?i.length-1:0;o=i[a],!(e>0?a==0:a==i.length-1||o.top<o.bottom);a+=s?-1:1);return Sx(o,!s)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Ig extends or{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Ig&&e.side==this.side}split(){return new Ig(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?mo.before(this.dom):mo.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Bn.empty}get isHidden(){return!0}}sl.prototype.children=hf.prototype.children=Ig.prototype.children=QL;function Tie(n,e){let t=n.dom,{children:r}=n,i=0;for(let o=0;i<r.length;i++){let s=r[i],a=o+s.length;if(!(a==o&&s.getSide()<=0)){if(e>o&&e<a&&s.dom.parentNode==t)return s.domAtPos(e-o);if(e<=o)break;o=a}}for(let o=i;o>0;o--){let s=r[o-1];if(s.dom.parentNode==t)return s.domAtPos(s.length)}for(let o=i;o<r.length;o++){let s=r[o];if(s.dom.parentNode==t)return s.domAtPos(0)}return new mo(t,0)}function Die(n,e,t){let r,{children:i}=n;t>0&&e instanceof vc&&i.length&&(r=i[i.length-1])instanceof vc&&r.mark.eq(e.mark)?Die(r,e.children[0],t-1):(i.push(e),e.setParent(n)),n.length+=e.length}function Nie(n,e,t){let r=null,i=-1,o=null,s=-1;function a(u,c){for(let f=0,d=0;f<u.children.length&&d<=c;f++){let h=u.children[f],m=d+h.length;m>=c&&(h.children.length?a(h,c-d):(!o||o.isHidden&&t>0)&&(m>c||d==m&&h.getSide()>0)?(o=h,s=c-d):(d<c||d==m&&h.getSide()<0&&!h.isHidden)&&(r=h,i=c-d)),d=m}}a(n,e);let l=(t<0?r:o)||r||o;return l?l.coordsAt(Math.max(0,l==r?i:s),t):RKe(n)}function RKe(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=kg(e);return t[t.length-1]||null}function tO(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const xW=Object.create(null);function mM(n,e,t){if(n==e)return!0;n||(n=xW),e||(e=xW);let r=Object.keys(n),i=Object.keys(e);if(r.length-(t&&r.indexOf(t)>-1?1:0)!=i.length-(t&&i.indexOf(t)>-1?1:0))return!1;for(let o of r)if(o!=t&&(i.indexOf(o)==-1||n[o]!==e[o]))return!1;return!0}function nO(n,e,t){let r=!1;if(e)for(let i in e)t&&i in t||(r=!0,i=="style"?n.style.cssText="":n.removeAttribute(i));if(t)for(let i in t)e&&e[i]==t[i]||(r=!0,i=="style"?n.style.cssText=t[i]:n.setAttribute(i,t[i]));return r}function OKe(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let r=n.attributes[t];e[r.name]=r.value}return e}class Sc{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var $o=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}($o||($o={}));class Ut extends Hh{constructor(e,t,r,i){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new _x(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return t+=r&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Kf(e,t,t,r,e.widget||null,!1)}static replace(e){let t=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:o,end:s}=Pie(e,t);r=(o?t?-3e8:-1:5e8)-1,i=(s?t?2e8:1:-6e8)+1}return new Kf(e,r,i,t,e.widget||null,!0)}static line(e){return new Ex(e)}static set(e,t=!1){return Pn.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Ut.none=Pn.empty;class _x extends Ut{constructor(e){let{start:t,end:r}=Pie(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,r;return this==e||e instanceof _x&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&mM(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}_x.prototype.point=!1;class Ex extends Ut{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Ex&&this.spec.class==e.spec.class&&mM(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Ex.prototype.mapMode=Lo.TrackBefore;Ex.prototype.point=!0;class Kf extends Ut{constructor(e,t,r,i,o,s){super(t,r,o,e),this.block=i,this.isReplace=s,this.mapMode=i?t<=0?Lo.TrackBefore:Lo.TrackAfter:Lo.TrackDel}get type(){return this.startSide!=this.endSide?$o.WidgetRange:this.startSide<=0?$o.WidgetBefore:$o.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Kf&&kKe(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Kf.prototype.point=!0;function Pie(n,e=!1){let{inclusiveStart:t,inclusiveEnd:r}=n;return t==null&&(t=n.inclusive),r==null&&(r=n.inclusive),{start:t??e,end:r??e}}function kKe(n,e){return n==e||!!(n&&e&&n.compare(e))}function rO(n,e,t,r=0){let i=t.length-1;i>=0&&t[i]+r>=n?t[i]=Math.max(t[i],e):t.push(n,e)}class si extends or{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,r,i,o,s){if(r){if(!(r instanceof si))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),Mie(this,e,t,r?r.children.slice():[],o,s),!0}split(e){let t=new si;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:r,off:i}=this.childPos(e);i&&(t.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let o=r;o<this.children.length;o++)t.append(this.children[o],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){mM(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){Die(this,e,t)}addLineDeco(e){let t=e.spec.attributes,r=e.spec.class;t&&(this.attrs=tO(t,this.attrs||{})),r&&(this.attrs=tO({class:r},this.attrs||{}))}domAtPos(e){return Tie(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var r;this.dom?this.flags&4&&(xie(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(nO(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let i=this.dom.lastChild;for(;i&&or.get(i)instanceof vc;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=or.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!Mt.ios||!this.children.some(o=>o instanceof sl))){let o=document.createElement("BR");o.cmIgnore=!0,this.dom.appendChild(o)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let r of this.children){if(!(r instanceof sl)||/[^ -~]/.test(r.text))return null;let i=kg(r.dom);if(i.length!=1)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let r=Nie(this,e,t);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,o=r.bottom-r.top;if(Math.abs(o-i.lineHeight)<2&&i.textHeight<o){let s=(o-i.textHeight)/2;return{top:r.top+s,bottom:r.bottom-s,left:r.left,right:r.left}}}return r}become(e){return e instanceof si&&this.children.length==0&&e.children.length==0&&mM(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let r=0,i=0;r<e.children.length;r++){let o=e.children[r],s=i+o.length;if(s>=t){if(o instanceof si)return o;if(s>t)break}i=s+o.breakAfter}return null}}class ec extends or{constructor(e,t,r){super(),this.widget=e,this.length=t,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,t,r,i,o,s){return r&&(!(r instanceof ec)||!this.widget.compare(r.widget)||e>0&&o<=0||t<this.length&&s<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?mo.before(this.dom):mo.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let r=new ec(this.widget,t,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return QL}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Bn.empty}domBoundsAround(){return null}become(e){return e instanceof ec&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);return r||(this.widget instanceof iO?null:Sx(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:r}=this.deco;return t==r?!1:e<0?t<0:r>0}}class iO extends Sc{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class dy{constructor(e,t,r,i){this.doc=e,this.pos=t,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof ec&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new si),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(ES(new Ig(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof ec)&&this.getLine()}buildText(e,t,r){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:s,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(s){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=o,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-r)),this.getLine().append(ES(new sl(this.text.slice(this.textOff,this.textOff+i)),t),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,t,r,i){this.buildText(t-e,r,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,r,i,o,s){if(this.disallowBlockEffectsFor[s]&&r instanceof Kf){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=t-e;if(r instanceof Kf)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new ec(r.widget||Lg.block,a,r));else{let l=hf.create(r.widget||Lg.inline,a,a?0:r.startSide),u=this.atCursorPos&&!l.isEditable&&o<=i.length&&(e<t||r.startSide>0),c=!l.isEditable&&(e<t||o>i.length||r.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!u&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(f.append(ES(new Ig(1),i),o),o=i.length+Math.max(0,o-i.length)),f.append(ES(l,i),o),this.atCursorPos=c,this.pendingBuffer=c?e<t||o>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=o)}static build(e,t,r,i,o){let s=new dy(e,t,r,o);return s.openEnd=Pn.spans(i,t,r,s),s.openStart<0&&(s.openStart=s.openEnd),s.finish(s.openEnd),s}}function ES(n,e){for(let t of e)n=new vc(t,[n],n.length);return n}class Lg extends Sc{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Lg.inline=new Lg("span");Lg.block=new Lg("div");var yr=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(yr||(yr={}));const Gh=yr.LTR,eF=yr.RTL;function Rie(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const IKe=Rie("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),LKe=Rie("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),oO=Object.create(null),Dl=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);oO[e]=t,oO[t]=-e}function Oie(n){return n<=247?IKe[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?LKe[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const FKe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class pf{get dir(){return this.level%2?eF:Gh}constructor(e,t,r){this.from=e,this.to=t,this.level=r}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,r,i){let o=-1;for(let s=0;s<e.length;s++){let a=e[s];if(a.from<=t&&a.to>=t){if(a.level==r)return s;(o<0||(i!=0?i<0?a.from<t:a.to>t:e[o].level>a.level))&&(o=s)}}if(o<0)throw new RangeError("Index out of range");return o}}function kie(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let r=n[t],i=e[t];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!kie(r.inner,i.inner))return!1}return!0}const ir=[];function BKe(n,e,t,r,i){for(let o=0;o<=r.length;o++){let s=o?r[o-1].to:e,a=o<r.length?r[o].from:t,l=o?256:i;for(let u=s,c=l,f=l;u<a;u++){let d=Oie(n.charCodeAt(u));d==512?d=c:d==8&&f==4&&(d=16),ir[u]=d==4?2:d,d&7&&(f=d),c=d}for(let u=s,c=l,f=l;u<a;u++){let d=ir[u];if(d==128)u<a-1&&c==ir[u+1]&&c&24?d=ir[u]=c:ir[u]=256;else if(d==64){let h=u+1;for(;h<a&&ir[h]==64;)h++;let m=u&&c==8||h<t&&ir[h]==8?f==1?1:8:256;for(let g=u;g<h;g++)ir[g]=m;u=h-1}else d==8&&f==1&&(ir[u]=1);c=d,d&7&&(f=d)}}}function zKe(n,e,t,r,i){let o=i==1?2:1;for(let s=0,a=0,l=0;s<=r.length;s++){let u=s?r[s-1].to:e,c=s<r.length?r[s].from:t;for(let f=u,d,h,m;f<c;f++)if(h=oO[d=n.charCodeAt(f)])if(h<0){for(let g=a-3;g>=0;g-=3)if(Dl[g+1]==-h){let y=Dl[g+2],p=y&2?i:y&4?y&1?o:i:0;p&&(ir[f]=ir[Dl[g]]=p),a=g;break}}else{if(Dl.length==189)break;Dl[a++]=f,Dl[a++]=d,Dl[a++]=l}else if((m=ir[f])==2||m==1){let g=m==i;l=g?0:1;for(let y=a-3;y>=0;y-=3){let p=Dl[y+2];if(p&2)break;if(g)Dl[y+2]|=2;else{if(p&4)break;Dl[y+2]|=4}}}}}function UKe(n,e,t,r){for(let i=0,o=r;i<=t.length;i++){let s=i?t[i-1].to:n,a=i<t.length?t[i].from:e;for(let l=s;l<a;){let u=ir[l];if(u==256){let c=l+1;for(;;)if(c==a){if(i==t.length)break;c=t[i++].to,a=i<t.length?t[i].from:e}else if(ir[c]==256)c++;else break;let f=o==1,d=(c<e?ir[c]:r)==1,h=f==d?f?1:2:r;for(let m=c,g=i,y=g?t[g-1].to:n;m>l;)m==y&&(m=t[--g].from,y=g?t[g-1].to:n),ir[--m]=h;l=c}else o=u,l++}}}function sO(n,e,t,r,i,o,s){let a=r%2?2:1;if(r%2==i%2)for(let l=e,u=0;l<t;){let c=!0,f=!1;if(u==o.length||l<o[u].from){let g=ir[l];g!=a&&(c=!1,f=g==16)}let d=!c&&a==1?[]:null,h=c?r:r+1,m=l;e:for(;;)if(u<o.length&&m==o[u].from){if(f)break e;let g=o[u];if(!c)for(let y=g.to,p=u+1;;){if(y==t)break e;if(p<o.length&&o[p].from==y)y=o[p++].to;else{if(ir[y]==a)break e;break}}if(u++,d)d.push(g);else{g.from>l&&s.push(new pf(l,g.from,h));let y=g.direction==Gh!=!(h%2);aO(n,y?r+1:r,i,g.inner,g.from,g.to,s),l=g.to}m=g.to}else{if(m==t||(c?ir[m]!=a:ir[m]==a))break;m++}d?sO(n,l,m,r+1,i,d,s):l<m&&s.push(new pf(l,m,h)),l=m}else for(let l=t,u=o.length;l>e;){let c=!0,f=!1;if(!u||l>o[u-1].to){let g=ir[l-1];g!=a&&(c=!1,f=g==16)}let d=!c&&a==1?[]:null,h=c?r:r+1,m=l;e:for(;;)if(u&&m==o[u-1].to){if(f)break e;let g=o[--u];if(!c)for(let y=g.from,p=u;;){if(y==e)break e;if(p&&o[p-1].to==y)y=o[--p].from;else{if(ir[y-1]==a)break e;break}}if(d)d.push(g);else{g.to<l&&s.push(new pf(g.to,l,h));let y=g.direction==Gh!=!(h%2);aO(n,y?r+1:r,i,g.inner,g.from,g.to,s),l=g.from}m=g.from}else{if(m==e||(c?ir[m-1]!=a:ir[m-1]==a))break;m--}d?sO(n,m,l,r+1,i,d,s):m<l&&s.push(new pf(m,l,h)),l=m}}function aO(n,e,t,r,i,o,s){let a=e%2?2:1;BKe(n,i,o,r,a),zKe(n,i,o,r,a),UKe(i,o,r,a),sO(n,i,o,e,t,r,s)}function VKe(n,e,t){if(!n)return[new pf(0,0,e==eF?1:0)];if(e==Gh&&!t.length&&!FKe.test(n))return Iie(n.length);if(t.length)for(;n.length>ir.length;)ir[ir.length]=256;let r=[],i=e==Gh?0:1;return aO(n,i,i,t,0,n.length,r),r}function Iie(n){return[new pf(0,n,0)]}let Lie="";function $Ke(n,e,t,r,i){var o;let s=r.head-n.from,a=pf.find(e,s,(o=r.bidiLevel)!==null&&o!==void 0?o:-1,r.assoc),l=e[a],u=l.side(i,t);if(s==u){let d=a+=i?1:-1;if(d<0||d>=e.length)return null;l=e[a=d],s=l.side(!i,t),u=l.side(i,t)}let c=Xi(n.text,s,l.forward(i,t));(c<l.from||c>l.to)&&(c=u),Lie=n.text.slice(Math.min(s,c),Math.max(s,c));let f=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return f&&c==u&&f.level+(i?0:1)<l.level?ot.cursor(f.side(!i,t)+n.from,f.forward(i,t)?1:-1,f.level):ot.cursor(c+n.from,l.forward(i,t)?-1:1,l.level)}function HKe(n,e,t){for(let r=e;r<t;r++){let i=Oie(n.charCodeAt(r));if(i==1)return Gh;if(i==2||i==4)return eF}return Gh}const Fie=St.define(),Bie=St.define(),zie=St.define(),Uie=St.define(),lO=St.define(),Vie=St.define(),$ie=St.define(),tF=St.define(),nF=St.define(),Hie=St.define({combine:n=>n.some(e=>e)}),Wie=St.define({combine:n=>n.some(e=>e)}),jie=St.define();class ig{constructor(e,t="nearest",r="nearest",i=5,o=5,s=!1){this.range=e,this.y=t,this.x=r,this.yMargin=i,this.xMargin=o,this.isSnapshot=s}map(e){return e.empty?this:new ig(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ig(ot.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const MS=dn.define({map:(n,e)=>n.map(e)}),Gie=dn.define();function ds(n,e,t){let r=n.facet(Uie);r.length?r[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const nf=St.define({combine:n=>n.length?n[0]:!0});let WKe=0;const B0=St.define();class ei{constructor(e,t,r,i,o){this.id=e,this.create=t,this.domEventHandlers=r,this.domEventObservers=i,this.extension=o(this)}static define(e,t){const{eventHandlers:r,eventObservers:i,provide:o,decorations:s}=t||{};return new ei(WKe++,e,r,i,a=>{let l=[B0.of(a)];return s&&l.push(C1.of(u=>{let c=u.plugin(a);return c?s(c):Ut.none})),o&&l.push(o(a)),l})}static fromClass(e,t){return ei.define(r=>new e(r),t)}}class nD{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(r){if(ds(t.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){ds(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(r){ds(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const qie=St.define(),rF=St.define(),C1=St.define(),Xie=St.define(),iF=St.define(),Yie=St.define();function bW(n,e){let t=n.state.facet(Yie);if(!t.length)return t;let r=t.map(o=>o instanceof Function?o(n):o),i=[];return Pn.spans(r,e.from,e.to,{point(){},span(o,s,a,l){let u=o-e.from,c=s-e.from,f=i;for(let d=a.length-1;d>=0;d--,l--){let h=a[d].spec.bidiIsolate,m;if(h==null&&(h=HKe(e.text,u,c)),l>0&&f.length&&(m=f[f.length-1]).to==u&&m.direction==h)m.to=c,f=m.inner;else{let g={from:u,to:c,direction:h,inner:[]};f.push(g),f=g.inner}}}}),i}const Kie=St.define();function oF(n){let e=0,t=0,r=0,i=0;for(let o of n.state.facet(Kie)){let s=o(n);s&&(s.left!=null&&(e=Math.max(e,s.left)),s.right!=null&&(t=Math.max(t,s.right)),s.top!=null&&(r=Math.max(r,s.top)),s.bottom!=null&&(i=Math.max(i,s.bottom)))}return{left:e,right:t,top:r,bottom:i}}const z0=St.define();class Ea{constructor(e,t,r,i){this.fromA=e,this.toA=t,this.fromB=r,this.toB=i}join(e){return new Ea(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(t.length==0)return e;let r=[];for(let i=0,o=0,s=0,a=0;;i++){let l=i==e.length?null:e[i],u=s-a,c=l?l.fromB:1e9;for(;o<t.length&&t[o]<c;){let f=t[o],d=t[o+1],h=Math.max(a,f),m=Math.min(c,d);if(h<=m&&new Ea(h+u,m+u,h,m).addToSet(r),d>c)break;o+=2}if(!l)return r;new Ea(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),s=l.toA,a=l.toB}}}class gM{constructor(e,t,r){this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=gi.empty(this.startState.doc.length);for(let o of r)this.changes=this.changes.compose(o.changes);let i=[];this.changes.iterChangedRanges((o,s,a,l)=>i.push(new Ea(o,s,a,l))),this.changedRanges=i}static create(e,t,r){return new gM(e,t,r)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class wW extends or{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Ut.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new si],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Ea(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?i=this.domChanged.newSel.head:!ZKe(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let o=i>-1?GKe(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:c}=this.hasComposition;r=new Ea(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(r.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(Mt.ie||Mt.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let s=this.decorations,a=this.updateDeco(),l=YKe(s,a,e.changes);return r=Ea.extendWithRanges(r,l),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,o),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=Mt.chrome||Mt.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,s),this.flags&=-8,s&&(s.written||i.selectionRange.focusNode!=s.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(s=>s.flags&=-9);let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof ec&&s.widget instanceof iO&&o.push(s.dom);i.updateGaps(o)}updateChildren(e,t,r){let i=r?r.range.addToSet(e.slice()):e,o=this.childCursor(t);for(let s=i.length-1;;s--){let a=s>=0?i[s]:null;if(!a)break;let{fromA:l,toA:u,fromB:c,toB:f}=a,d,h,m,g;if(r&&r.range.fromB<f&&r.range.toB>c){let v=dy.build(this.view.state.doc,c,r.range.fromB,this.decorations,this.dynamicDecorationMap),S=dy.build(this.view.state.doc,r.range.toB,f,this.decorations,this.dynamicDecorationMap);h=v.breakAtStart,m=v.openStart,g=S.openEnd;let x=this.compositionView(r);S.breakAtStart?x.breakAfter=1:S.content.length&&x.merge(x.length,x.length,S.content[0],!1,S.openStart,0)&&(x.breakAfter=S.content[0].breakAfter,S.content.shift()),v.content.length&&x.merge(0,0,v.content[v.content.length-1],!0,0,v.openEnd)&&v.content.pop(),d=v.content.concat(x).concat(S.content)}else({content:d,breakAtStart:h,openStart:m,openEnd:g}=dy.build(this.view.state.doc,c,f,this.decorations,this.dynamicDecorationMap));let{i:y,off:p}=o.findPos(u,1),{i:w,off:b}=o.findPos(l,-1);Eie(this,w,b,y,p,d,h,m,g)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let r of t.effects)r.is(Gie)&&(this.editContextFormatting=r.value)}compositionView(e){let t=new sl(e.text.nodeValue);t.flags|=8;for(let{deco:i}of e.marks)t=new vc(i,[t],t.length);let r=new si;return r.append(t,0),r}fixCompositionDOM(e){let t=(o,s)=>{s.flags|=8|(s.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(s);let a=or.get(o);a&&a!=s&&(a.dom=null),s.setDOM(o)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];t(e.line,i);for(let o=e.marks.length-1;o>=-1;o--)r=i.childPos(r.off,1),i=i.children[r.i],t(o>=0?e.marks[o].node:e.text,i)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,o=!i&&M_(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||t||o))return;let s=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),u=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(Mt.gecko&&a.empty&&!this.hasComposition&&jKe(l)){let f=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(f,l.node.childNodes[l.offset]||null)),l=u=new mo(f,0),s=!0}let c=this.view.observer.selectionRange;(s||!c.focusNode||(!fy(l.node,l.offset,c.anchorNode,c.anchorOffset)||!fy(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,a))&&(this.view.observer.ignore(()=>{Mt.android&&Mt.chrome&&this.dom.contains(c.focusNode)&&KKe(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=M1(this.view.root);if(f)if(a.empty){if(Mt.gecko){let d=qKe(l.node,l.offset);if(d&&d!=3){let h=(d==1?wie:Sie)(l.node,l.offset);h&&(l=new mo(h.node,h.offset))}}f.collapse(l.node,l.offset),a.bidiLevel!=null&&f.caretBidiLevel!==void 0&&(f.caretBidiLevel=a.bidiLevel)}else if(f.extend){f.collapse(l.node,l.offset);try{f.extend(u.node,u.offset)}catch{}}else{let d=document.createRange();a.anchor>a.head&&([l,u]=[u,l]),d.setEnd(u.node,u.offset),d.setStart(l.node,l.offset),f.removeAllRanges(),f.addRange(d)}o&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(l,u)),this.impreciseAnchor=l.precise?null:new mo(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new mo(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&fy(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,r=M1(e.root),{anchorNode:i,anchorOffset:o}=e.observer.selectionRange;if(!r||!t.empty||!t.assoc||!r.modify)return;let s=si.find(this,t.head);if(!s)return;let a=s.posAtStart;if(t.head==a||t.head==a+s.length)return;let l=this.coordsAt(t.head,-1),u=this.coordsAt(t.head,1);if(!l||!u||l.bottom>u.top)return;let c=this.domAtPos(t.head+t.assoc);r.collapse(c.node,c.offset),r.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=t.from&&r.collapse(i,o)}moveToLine(e){let t=this.dom,r;if(e.node!=t)return e;for(let i=e.offset;!r&&i<t.childNodes.length;i++){let o=or.get(t.childNodes[i]);o instanceof si&&(r=o.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let o=or.get(t.childNodes[i]);o instanceof si&&(r=o.domAtPos(o.length))}return r?new mo(r.node,r.offset,!0):e}nearest(e){for(let t=e;t;){let r=or.get(t);if(r&&r.rootView==this)return r;t=t.parentNode}return null}posFromDOM(e,t){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,t)+r.posAtStart}domAtPos(e){let{i:t,off:r}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let i=this.children[t];if(r<i.length||i instanceof si)break;t++,r=0}return this.children[t].domAtPos(r)}coordsAt(e,t){let r=null,i=0;for(let o=this.length,s=this.children.length-1;s>=0;s--){let a=this.children[s],l=o-a.breakAfter,u=l-a.length;if(l<e)break;if(u<=e&&(u<e||a.covers(-1))&&(l>e||a.covers(1))&&(!r||a instanceof si&&!(r instanceof si&&t>=0)))r=a,i=u;else if(r&&u==e&&l==e&&a instanceof ec&&Math.abs(t)<2){if(a.deco.startSide<0)break;s&&(r=null)}o=u}return r?r.coordsAt(e-i,t):null}coordsForChar(e){let{i:t,off:r}=this.childPos(e,1),i=this.children[t];if(!(i instanceof si))return null;for(;i.children.length;){let{i:a,off:l}=i.childPos(r,1);for(;;a++){if(a==i.children.length)return null;if((i=i.children[a]).length)break}r=l}if(!(i instanceof sl))return null;let o=Xi(i.text,r);if(o==r)return null;let s=jh(i.dom,r,o).getClientRects();for(let a=0;a<s.length;a++){let l=s[a];if(a==s.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let t=[],{from:r,to:i}=e,o=this.view.contentDOM.clientWidth,s=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==yr.LTR;for(let u=0,c=0;c<this.children.length;c++){let f=this.children[c],d=u+f.length;if(d>i)break;if(u>=r){let h=f.dom.getBoundingClientRect();if(t.push(h.height),s){let m=f.dom.lastChild,g=m?kg(m):[];if(g.length){let y=g[g.length-1],p=l?y.right-h.left:h.right-y.left;p>a&&(a=p,this.minWidth=o,this.minWidthFrom=u,this.minWidthTo=d)}}}u=d+f.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?yr.RTL:yr.LTR}measureTextSize(){for(let o of this.children)if(o instanceof si){let s=o.measureTextSize();if(s)return s}let e=document.createElement("div"),t,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let o=kg(e.firstChild)[0];t=e.getBoundingClientRect().height,r=o?o.width/27:7,i=o?o.height:t,e.remove()}),{lineHeight:t,charWidth:r,textHeight:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new _ie(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,i=0;;i++){let o=i==t.viewports.length?null:t.viewports[i],s=o?o.from-1:this.length;if(s>r){let a=(t.lineBlockAt(s).bottom-t.lineBlockAt(r).top)/this.view.scaleY;e.push(Ut.replace({widget:new iO(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,s))}if(!o)break;r=o.to+1}return Ut.set(e)}updateDeco(){let e=1,t=this.view.state.facet(C1).map(o=>(this.dynamicDecorationMap[e++]=typeof o=="function")?o(this.view):o),r=!1,i=this.view.state.facet(Xie).map((o,s)=>{let a=typeof o=="function";return a&&(r=!0),a?o(this.view):o});for(i.length&&(this.dynamicDecorationMap[e++]=r,t.push(Pn.join(i))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(jie))try{if(u(this.view,e.range,e))return!0}catch(c){ds(this.view.state,c,"scroll handler")}let{range:t}=e,r=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),i;if(!r)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let o=oF(this.view),s={left:r.left-o.left,top:r.top-o.top,right:r.right+o.right,bottom:r.bottom+o.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;MKe(this.view.scrollDOM,s,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==yr.LTR)}}function jKe(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function Zie(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let r=wie(t.focusNode,t.focusOffset),i=Sie(t.focusNode,t.focusOffset),o=r||i;if(i&&r&&i.node!=r.node){let a=or.get(i.node);if(!a||a instanceof sl&&a.text!=i.node.nodeValue)o=i;else if(n.docView.lastCompositionAfterCursor){let l=or.get(r.node);!l||l instanceof sl&&l.text!=r.node.nodeValue||(o=i)}}if(n.docView.lastCompositionAfterCursor=o!=r,!o)return null;let s=e-o.offset;return{from:s,to:s+o.node.nodeValue.length,node:o.node}}function GKe(n,e,t){let r=Zie(n,t);if(!r)return null;let{node:i,from:o,to:s}=r,a=i.nodeValue;if(/[\n\r]/.test(a)||n.state.doc.sliceString(r.from,r.to)!=a)return null;let l=e.invertedDesc,u=new Ea(l.mapPos(o),l.mapPos(s),o,s),c=[];for(let f=i.parentNode;;f=f.parentNode){let d=or.get(f);if(d instanceof vc)c.push({node:f,deco:d.mark});else{if(d instanceof si||f.nodeName=="DIV"&&f.parentNode==n.contentDOM)return{range:u,text:i,marks:c,line:f};if(f!=n.contentDOM)c.push({node:f,deco:new _x({inclusive:!0,attributes:OKe(f),tagName:f.tagName.toLowerCase()})});else return null}}}function qKe(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let XKe=class{constructor(){this.changes=[]}compareRange(e,t){rO(e,t,this.changes)}comparePoint(e,t){rO(e,t,this.changes)}};function YKe(n,e,t){let r=new XKe;return Pn.compare(n,e,t,r),r.changes}function KKe(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function ZKe(n,e){let t=!1;return e&&n.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(t=!0)}),t}function JKe(n,e,t=1){let r=n.charCategorizer(e),i=n.doc.lineAt(e),o=e-i.from;if(i.length==0)return ot.cursor(e);o==0?t=1:o==i.length&&(t=-1);let s=o,a=o;t<0?s=Xi(i.text,o,!1):a=Xi(i.text,o);let l=r(i.text.slice(s,a));for(;s>0;){let u=Xi(i.text,s,!1);if(r(i.text.slice(u,s))!=l)break;s=u}for(;a<i.length;){let u=Xi(i.text,a);if(r(i.text.slice(a,u))!=l)break;a=u}return ot.range(s+i.from,a+i.from)}function QKe(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function eZe(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function rD(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function SW(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function _W(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function uO(n,e,t){let r,i,o,s,a=!1,l,u,c,f;for(let m=n.firstChild;m;m=m.nextSibling){let g=kg(m);for(let y=0;y<g.length;y++){let p=g[y];i&&rD(i,p)&&(p=SW(_W(p,i.bottom),i.top));let w=QKe(e,p),b=eZe(t,p);if(w==0&&b==0)return m.nodeType==3?EW(m,e,t):uO(m,e,t);if(!r||s>b||s==b&&o>w){r=m,i=p,o=w,s=b;let v=b?t<p.top?-1:1:w?e<p.left?-1:1:0;a=!v||(v>0?y<g.length-1:y>0)}w==0?t>p.bottom&&(!c||c.bottom<p.bottom)?(l=m,c=p):t<p.top&&(!f||f.top>p.top)&&(u=m,f=p):c&&rD(c,p)?c=_W(c,p.bottom):f&&rD(f,p)&&(f=SW(f,p.top))}}if(c&&c.bottom>=t?(r=l,i=c):f&&f.top<=t&&(r=u,i=f),!r)return{node:n,offset:0};let d=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return EW(r,d,t);if(a&&r.contentEditable!="false")return uO(r,d,t);let h=Array.prototype.indexOf.call(n.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:n,offset:h}}function EW(n,e,t){let r=n.nodeValue.length,i=-1,o=1e9,s=0;for(let a=0;a<r;a++){let l=jh(n,a,a+1).getClientRects();for(let u=0;u<l.length;u++){let c=l[u];if(c.top==c.bottom)continue;s||(s=e-c.left);let f=(c.top>t?c.top-t:t-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&f<o){let d=e>=(c.left+c.right)/2,h=d;if((Mt.chrome||Mt.gecko)&&jh(n,a).getBoundingClientRect().left==c.right&&(h=!d),f<=0)return{node:n,offset:a+(h?1:0)};i=a+(h?1:0),o=f}}}return{node:n,offset:i>-1?i:s>0?n.nodeValue.length:0}}function Jie(n,e,t,r=-1){var i,o;let s=n.contentDOM.getBoundingClientRect(),a=s.top+n.viewState.paddingTop,l,{docHeight:u}=n.viewState,{x:c,y:f}=e,d=f-a;if(d<0)return 0;if(d>u)return n.state.doc.length;for(let v=n.viewState.heightOracle.textHeight/2,S=!1;l=n.elementAtHeight(d),l.type!=$o.Text;)for(;d=r>0?l.bottom+v:l.top-v,!(d>=0&&d<=u);){if(S)return t?null:0;S=!0,r=-r}f=a+d;let h=l.from;if(h<n.viewport.from)return n.viewport.from==0?0:t?null:MW(n,s,l,c,f);if(h>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:MW(n,s,l,c,f);let m=n.dom.ownerDocument,g=n.root.elementFromPoint?n.root:m,y=g.elementFromPoint(c,f);y&&!n.contentDOM.contains(y)&&(y=null),y||(c=Math.max(s.left+1,Math.min(s.right-1,c)),y=g.elementFromPoint(c,f),y&&!n.contentDOM.contains(y)&&(y=null));let p,w=-1;if(y&&((i=n.docView.nearest(y))===null||i===void 0?void 0:i.isEditable)!=!1){if(m.caretPositionFromPoint){let v=m.caretPositionFromPoint(c,f);v&&({offsetNode:p,offset:w}=v)}else if(m.caretRangeFromPoint){let v=m.caretRangeFromPoint(c,f);v&&({startContainer:p,startOffset:w}=v,(!n.contentDOM.contains(p)||Mt.safari&&tZe(p,w,c)||Mt.chrome&&nZe(p,w,c))&&(p=void 0))}p&&(w=Math.min(au(p),w))}if(!p||!n.docView.dom.contains(p)){let v=si.find(n.docView,h);if(!v)return d>l.top+l.height/2?l.to:l.from;({node:p,offset:w}=uO(v.dom,c,f))}let b=n.docView.nearest(p);if(!b)return null;if(b.isWidget&&((o=b.dom)===null||o===void 0?void 0:o.nodeType)==1){let v=b.dom.getBoundingClientRect();return e.y<v.top||e.y<=v.bottom&&e.x<=(v.left+v.right)/2?b.posAtStart:b.posAtEnd}else return b.localPosFromDOM(p,w)+b.posAtStart}function MW(n,e,t,r,i){let o=Math.round((r-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let a=n.viewState.heightOracle.textHeight,l=Math.floor((i-t.top-(n.defaultLineHeight-a)*.5)/a);o+=l*n.viewState.heightOracle.lineLength}let s=n.state.sliceDoc(t.from,t.to);return t.from+XR(s,o,n.state.tabSize)}function tZe(n,e,t){let r;if(n.nodeType!=3||e!=(r=n.nodeValue.length))return!1;for(let i=n.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return jh(n,r-1,r).getBoundingClientRect().left>t}function nZe(n,e,t){if(e!=0)return!1;for(let i=n;;){let o=i.parentNode;if(!o||o.nodeType!=1||o.firstChild!=i)return!1;if(o.classList.contains("cm-line"))break;i=o}let r=n.nodeType==1?n.getBoundingClientRect():jh(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-r.left>5}function cO(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type)){for(let r of t.type)if(r.to>e||r.to==e&&(r.to==t.to||r.type==$o.Text))return r}return t}function rZe(n,e,t,r){let i=cO(n,e.head),o=!r||i.type!=$o.Text||!(n.lineWrapping||i.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(o){let s=n.dom.getBoundingClientRect(),a=n.textDirectionAt(i.from),l=n.posAtCoords({x:t==(a==yr.LTR)?s.right-1:s.left+1,y:(o.top+o.bottom)/2});if(l!=null)return ot.cursor(l,t?-1:1)}return ot.cursor(t?i.to:i.from,t?-1:1)}function CW(n,e,t,r){let i=n.state.doc.lineAt(e.head),o=n.bidiSpans(i),s=n.textDirectionAt(i.from);for(let a=e,l=null;;){let u=$Ke(i,o,s,a,t),c=Lie;if(!u){if(i.number==(t?n.state.doc.lines:1))return a;c=`
`,i=n.state.doc.line(i.number+(t?1:-1)),o=n.bidiSpans(i),u=n.visualLineSide(i,!t)}if(l){if(!l(c))return a}else{if(!r)return u;l=r(c)}a=u}}function iZe(n,e,t){let r=n.state.charCategorizer(e),i=r(t);return o=>{let s=r(o);return i==Er.Space&&(i=s),i==s}}function oZe(n,e,t,r){let i=e.head,o=t?1:-1;if(i==(t?n.state.doc.length:0))return ot.cursor(i,e.assoc);let s=e.goalColumn,a,l=n.contentDOM.getBoundingClientRect(),u=n.coordsAtPos(i,e.assoc||-1),c=n.documentTop;if(u)s==null&&(s=u.left-l.left),a=o<0?u.top:u.bottom;else{let h=n.viewState.lineBlockAt(i);s==null&&(s=Math.min(l.right-l.left,n.defaultCharacterWidth*(i-h.from))),a=(o<0?h.top:h.bottom)+c}let f=l.left+s,d=r??n.viewState.heightOracle.textHeight>>1;for(let h=0;;h+=10){let m=a+(d+h)*o,g=Jie(n,{x:f,y:m},!1,o);if(m<l.top||m>l.bottom||(o<0?g<i:g>i)){let y=n.docView.coordsForChar(g),p=!y||m<y.top?-1:1;return ot.cursor(g,p,void 0,s)}}}function C_(n,e,t){for(;;){let r=0;for(let i of n)i.between(e-1,e+1,(o,s,a)=>{if(e>o&&e<s){let l=r||t||(e-o<s-e?-1:1);e=l<0?o:s,r=l}});if(!r)return e}}function iD(n,e,t){let r=C_(n.state.facet(iF).map(i=>i(n)),t.from,e.head>t.from?-1:1);return r==t.from?t:ot.cursor(r,r<t.from?1:-1)}const U0="";class sZe{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Mn.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=U0}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let o=this.text.length;this.readNode(i);let s=i.nextSibling;if(s==t)break;let a=or.get(i),l=or.get(s);(a&&l?a.breakAfter:(a?a.breakAfter:pM(i))||pM(s)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>o)&&this.lineBreak(),i=s}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,s=1,a;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,r),s=this.lineSeparator.length):(a=i.exec(t))&&(o=a.index,s=a[0].length),this.append(t.slice(r,o<0?t.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=s-1);r=o+s}}readNode(e){if(e.cmIgnore)return;let t=or.get(e),r=t&&t.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(aZe(e,r.node,r.offset)?t:0))}}function aZe(n,e,t){for(;;){if(!e||t<au(e))return!1;if(e==n)return!0;t=Wh(e)+1,e=e.parentNode}}class AW{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class lZe{constructor(e,t,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:o,impreciseAnchor:s}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,r,0))){let a=o||s?[]:fZe(e),l=new sZe(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=dZe(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=o&&o.node==a.focusNode&&o.offset==a.focusOffset||!ZR(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),u=s&&s.node==a.anchorNode&&s.offset==a.anchorOffset||!ZR(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),c=e.viewport;if((Mt.ios||Mt.chrome)&&e.state.selection.main.empty&&l!=u&&(c.from>0||c.to<e.state.doc.length)){let f=Math.min(l,u),d=Math.max(l,u),h=c.from-f,m=c.to-d;(h==0||h==1||f==0)&&(m==0||m==-1||d==e.state.doc.length)&&(l=0,u=e.state.doc.length)}this.newSel=ot.single(u,l)}}}function Qie(n,e){let t,{newSel:r}=e,i=n.state.selection.main,o=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:s,to:a}=e.bounds,l=i.from,u=null;(o===8||Mt.android&&e.text.length<a-s)&&(l=i.to,u="end");let c=cZe(n.state.doc.sliceString(s,a,U0),e.text,l-s,u);c&&(Mt.chrome&&o==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==U0+U0&&c.toB--,t={from:s+c.from,to:s+c.toA,insert:Bn.of(e.text.slice(c.from,c.toB).split(U0))})}else r&&(!n.hasFocus&&n.state.facet(nf)||r.main.eq(i))&&(r=null);if(!t&&!r)return!1;if(!t&&e.typeOver&&!i.empty&&r&&r.main.empty?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,i.to)}:t&&t.from>=i.from&&t.to<=i.to&&(t.from!=i.from||t.to!=i.to)&&i.to-i.from-(t.to-t.from)<=4?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,i.to))}:(Mt.mac||Mt.android)&&t&&t.from==t.to&&t.from==i.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(r&&t.insert.length==2&&(r=ot.single(r.main.anchor-1,r.main.head-1)),t={from:i.from,to:i.to,insert:Bn.of([" "])}):Mt.chrome&&t&&t.from==t.to&&t.from==i.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(r&&(r=ot.single(r.main.anchor-1,r.main.head-1)),t={from:i.from,to:i.to,insert:Bn.of([" "])}),t)return sF(n,t,r,o);if(r&&!r.main.eq(i)){let s=!1,a="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(s=!0),a=n.inputState.lastSelectionOrigin),n.dispatch({selection:r,scrollIntoView:s,userEvent:a}),!0}else return!1}function sF(n,e,t,r=-1){if(Mt.ios&&n.inputState.flushIOSKey(e))return!0;let i=n.state.selection.main;if(Mt.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&n.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&rg(n.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&rg(n.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&rg(n.contentDOM,"Delete",46)))return!0;let o=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let s,a=()=>s||(s=uZe(n,e,t));return n.state.facet(Vie).some(l=>l(n,e.from,e.to,o,a))||n.dispatch(a()),!0}function uZe(n,e,t){let r,i=n.state,o=i.selection.main;if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let a=o.from<e.from?i.sliceDoc(o.from,e.from):"",l=o.to>e.to?i.sliceDoc(e.to,o.to):"";r=i.replaceSelection(n.state.toText(a+e.insert.sliceString(0,void 0,n.state.lineBreak)+l))}else{let a=i.changes(e),l=t&&t.main.to<=a.newLength?t.main:void 0;if(i.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=o.to&&e.to>=o.to-10){let u=n.state.sliceDoc(e.from,e.to),c,f=t&&Zie(n,t.main.head);if(f){let m=e.insert.length-(e.to-e.from);c={from:f.from,to:f.to-m}}else c=n.state.doc.lineAt(o.head);let d=o.to-e.to,h=o.to-o.from;r=i.changeByRange(m=>{if(m.from==o.from&&m.to==o.to)return{changes:a,range:l||m.map(a)};let g=m.to-d,y=g-u.length;if(m.to-m.from!=h||n.state.sliceDoc(y,g)!=u||m.to>=c.from&&m.from<=c.to)return{range:m};let p=i.changes({from:y,to:g,insert:e.insert}),w=m.to-o.to;return{changes:p,range:l?ot.range(Math.max(0,l.anchor+w),Math.max(0,l.head+w)):m.map(p)}})}else r={changes:a,selection:l&&i.selection.replaceRange(l)}}let s="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,s+=".compose",n.inputState.compositionFirstChange&&(s+=".start",n.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:s,scrollIntoView:!0})}function cZe(n,e,t,r){let i=Math.min(n.length,e.length),o=0;for(;o<i&&n.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==i&&n.length==e.length)return null;let s=n.length,a=e.length;for(;s>0&&a>0&&n.charCodeAt(s-1)==e.charCodeAt(a-1);)s--,a--;if(r=="end"){let l=Math.max(0,o-Math.min(s,a));t-=s+l-o}if(s<o&&n.length<e.length){let l=t<=o&&t>=s?o-t:0;o-=l,a=o+(a-s),s=o}else if(a<o){let l=t<=o&&t>=a?o-t:0;o-=l,s=o+(s-a),a=o}return{from:o,toA:s,toB:a}}function fZe(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:o}=n.observer.selectionRange;return t&&(e.push(new AW(t,r)),(i!=t||o!=r)&&e.push(new AW(i,o))),e}function dZe(n,e){if(n.length==0)return null;let t=n[0].pos,r=n.length==2?n[1].pos:t;return t>-1&&r>-1?ot.single(t+e,r+e):null}class hZe{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Mt.safari&&e.contentDOM.addEventListener("input",()=>null),Mt.gecko&&DZe(e.contentDOM.ownerDocument)}handleEvent(e){!wZe(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,t){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,t);for(let i of r.handlers){if(t.defaultPrevented)break;if(i(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=pZe(e),r=this.handlers,i=this.view.contentDOM;for(let o in t)if(o!="scroll"){let s=!t[o].handlers.length,a=r[o];a&&s!=!a.handlers.length&&(i.removeEventListener(o,this.handleEvent),a=null),a||i.addEventListener(o,this.handleEvent,{passive:s})}for(let o in r)o!="scroll"&&!t[o]&&i.removeEventListener(o,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&toe.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Mt.android&&Mt.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return Mt.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=eoe.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||mZe.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,rg(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Mt.safari&&!Mt.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function TW(n,e){return(t,r)=>{try{return e.call(n,r,t)}catch(i){ds(t.state,i)}}}function pZe(n){let e=Object.create(null);function t(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of n){let i=r.spec;if(i&&i.domEventHandlers)for(let o in i.domEventHandlers){let s=i.domEventHandlers[o];s&&t(o).handlers.push(TW(r.value,s))}if(i&&i.domEventObservers)for(let o in i.domEventObservers){let s=i.domEventObservers[o];s&&t(o).observers.push(TW(r.value,s))}}for(let r in al)t(r).handlers.push(al[r]);for(let r in Oa)t(r).observers.push(Oa[r]);return e}const eoe=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],mZe="dthko",toe=[16,17,18,20,91,92,224,225],CS=6;function AS(n){return Math.max(0,n)*.7+8}function gZe(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class vZe{constructor(e,t,r,i){this.view=e,this.startEvent=t,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=CKe(e.contentDOM),this.atoms=e.state.facet(iF).map(s=>s(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Mn.allowMultipleSelections)&&yZe(e,t),this.dragging=bZe(e,t)&&ioe(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&gZe(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,r=0,i=0,o=0,s=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:s}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=oF(this.view);e.clientX-l.left<=i+CS?t=-AS(i-e.clientX):e.clientX+l.right>=s-CS&&(t=AS(e.clientX-s)),e.clientY-l.top<=o+CS?r=-AS(o-e.clientY):e.clientY+l.bottom>=a-CS&&(r=AS(e.clientY-a)),this.setScrollSpeed(t,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],o=null;if(i.empty){let s=C_(this.atoms,i.from,0);s!=i.from&&(o=ot.cursor(s,-1))}else{let s=C_(this.atoms,i.from,-1),a=C_(this.atoms,i.to,1);(s!=i.from||a!=i.to)&&(o=ot.range(i.from==i.anchor?s:a,i.from==i.head?s:a))}o&&(t||(t=e.ranges.slice()),t[r]=o)}return t?ot.create(t,e.mainIndex):e}select(e){let{view:t}=this,r=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function yZe(n,e){let t=n.state.facet(Fie);return t.length?t[0](e):Mt.mac?e.metaKey:e.ctrlKey}function xZe(n,e){let t=n.state.facet(Bie);return t.length?t[0](e):Mt.mac?!e.altKey:!e.ctrlKey}function bZe(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let r=M1(n.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let o=0;o<i.length;o++){let s=i[o];if(s.left<=e.clientX&&s.right>=e.clientX&&s.top<=e.clientY&&s.bottom>=e.clientY)return!0}return!1}function wZe(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,r;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(r=or.get(t))&&r.ignoreEvent(e))return!1;return!0}const al=Object.create(null),Oa=Object.create(null),noe=Mt.ie&&Mt.ie_version<15||Mt.ios&&Mt.webkit_version<604;function SZe(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),roe(n,t.value)},50)}function bC(n,e,t){for(let r of n.facet(e))t=r(t,n);return t}function roe(n,e){e=bC(n.state,tF,e);let{state:t}=n,r,i=1,o=t.toText(e),s=o.lines==t.selection.ranges.length;if(fO!=null&&t.selection.ranges.every(l=>l.empty)&&fO==o.toString()){let l=-1;r=t.changeByRange(u=>{let c=t.doc.lineAt(u.from);if(c.from==l)return{range:u};l=c.from;let f=t.toText((s?o.line(i++).text:e)+t.lineBreak);return{changes:{from:c.from,insert:f},range:ot.cursor(u.from+f.length)}})}else s?r=t.changeByRange(l=>{let u=o.line(i++);return{changes:{from:l.from,to:l.to,insert:u.text},range:ot.cursor(l.from+u.length)}}):r=t.replaceSelection(o);n.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Oa.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};al.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);Oa.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};Oa.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};al.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let r of n.state.facet(zie))if(t=r(n,e),t)break;if(!t&&e.button==0&&(t=MZe(n,e)),t){let r=!n.hasFocus;n.inputState.startMouseSelection(new vZe(n,e,t,r)),r&&n.observer.ignore(()=>{yie(n.contentDOM);let o=n.root.activeElement;o&&!o.contains(n.contentDOM)&&o.blur()});let i=n.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}return!1};function DW(n,e,t,r){if(r==1)return ot.cursor(e,t);if(r==2)return JKe(n.state,e,t);{let i=si.find(n.docView,e),o=n.state.doc.lineAt(i?i.posAtEnd:e),s=i?i.posAtStart:o.from,a=i?i.posAtEnd:o.to;return a<n.state.doc.length&&a==o.to&&a++,ot.range(s,a)}}let NW=(n,e,t)=>e>=t.top&&e<=t.bottom&&n>=t.left&&n<=t.right;function _Ze(n,e,t,r){let i=si.find(n.docView,e);if(!i)return 1;let o=e-i.posAtStart;if(o==0)return 1;if(o==i.length)return-1;let s=i.coordsAt(o,-1);if(s&&NW(t,r,s))return-1;let a=i.coordsAt(o,1);return a&&NW(t,r,a)?1:s&&s.bottom>=r?-1:1}function PW(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:_Ze(n,t,e.clientX,e.clientY)}}const EZe=Mt.ie&&Mt.ie_version<=11;let RW=null,OW=0,kW=0;function ioe(n){if(!EZe)return n.detail;let e=RW,t=kW;return RW=n,kW=Date.now(),OW=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(OW+1)%3:1}function MZe(n,e){let t=PW(n,e),r=ioe(e),i=n.state.selection;return{update(o){o.docChanged&&(t.pos=o.changes.mapPos(t.pos),i=i.map(o.changes))},get(o,s,a){let l=PW(n,o),u,c=DW(n,l.pos,l.bias,r);if(t.pos!=l.pos&&!s){let f=DW(n,t.pos,t.bias,r),d=Math.min(f.from,c.from),h=Math.max(f.to,c.to);c=d<c.from?ot.range(d,h):ot.range(h,d)}return s?i.replaceRange(i.main.extend(c.from,c.to)):a&&r==1&&i.ranges.length>1&&(u=CZe(i,l.pos))?u:a?i.addRange(c):ot.create([c])}}}function CZe(n,e){for(let t=0;t<n.ranges.length;t++){let{from:r,to:i}=n.ranges[t];if(r<=e&&i>=e)return ot.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}al.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let i=n.docView.nearest(e.target);if(i&&i.isWidget){let o=i.posAtStart,s=o+i.length;(o>=t.to||s<=t.from)&&(t=ot.range(o,s))}}let{inputState:r}=n;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",bC(n.state,nF,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};al.dragend=n=>(n.inputState.draggedContent=null,!1);function IW(n,e,t,r){if(t=bC(n.state,tF,t),!t)return;let i=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=n.inputState,s=r&&o&&xZe(n,e)?{from:o.from,to:o.to}:null,a={from:i,insert:t},l=n.state.changes(s?[s,a]:a);n.focus(),n.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:s?"move.drop":"input.drop"}),n.inputState.draggedContent=null}al.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let r=Array(t.length),i=0,o=()=>{++i==t.length&&IW(n,e,r.filter(s=>s!=null).join(n.state.lineBreak),!1)};for(let s=0;s<t.length;s++){let a=new FileReader;a.onerror=o,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[s]=a.result),o()},a.readAsText(t[s])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return IW(n,e,r,!0),!0}return!1};al.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=noe?null:e.clipboardData;return t?(roe(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(SZe(n),!1)};function AZe(n,e){let t=n.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),n.focus()},50)}function TZe(n){let e=[],t=[],r=!1;for(let i of n.selection.ranges)i.empty||(e.push(n.sliceDoc(i.from,i.to)),t.push(i));if(!e.length){let i=-1;for(let{from:o}of n.selection.ranges){let s=n.doc.lineAt(o);s.number>i&&(e.push(s.text),t.push({from:s.from,to:Math.min(n.doc.length,s.to+1)})),i=s.number}r=!0}return{text:bC(n,nF,e.join(n.lineBreak)),ranges:t,linewise:r}}let fO=null;al.copy=al.cut=(n,e)=>{let{text:t,ranges:r,linewise:i}=TZe(n.state);if(!t&&!i)return!1;fO=i?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let o=noe?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",t),!0):(AZe(n,t),!1)};const ooe=pu.define();function soe(n,e){let t=[];for(let r of n.facet($ie)){let i=r(n,e);i&&t.push(i)}return t?n.update({effects:t,annotations:ooe.of(!0)}):null}function aoe(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=soe(n.state,e);t?n.dispatch(t):n.update([])}},10)}Oa.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),aoe(n)};Oa.blur=n=>{n.observer.clearSelectionRange(),aoe(n)};Oa.compositionstart=Oa.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};Oa.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,Mt.chrome&&Mt.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};Oa.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};al.beforeinput=(n,e)=>{var t,r;if(e.inputType=="insertReplacementText"&&n.observer.editContext){let o=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),s=e.getTargetRanges();if(o&&s.length){let a=s[0],l=n.posAtDOM(a.startContainer,a.startOffset),u=n.posAtDOM(a.endContainer,a.endOffset);return sF(n,{from:l,to:u,insert:n.state.toText(o)},null),!0}}let i;if(Mt.chrome&&Mt.android&&(i=eoe.find(o=>o.inputType==e.inputType))&&(n.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let o=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>o+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return Mt.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),Mt.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>Oa.compositionend(n,e),20),!1};const LW=new Set;function DZe(n){LW.has(n)||(LW.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const FW=["pre-wrap","normal","pre-line","break-spaces"];let Fg=!1;function BW(){Fg=!1}class NZe{constructor(e){this.lineWrapping=e,this.doc=Bn.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return FW.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(t=!0,this.heightSamples[Math.floor(i*10)]=!0)}return t}refresh(e,t,r,i,o,s){let a=FW.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=t,this.charWidth=r,this.textHeight=i,this.lineLength=o,l){this.heightSamples={};for(let u=0;u<s.length;u++){let c=s[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class PZe{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Ul{constructor(e,t,r,i,o){this.from=e,this.length=t,this.top=r,this.height=i,this._content=o}get type(){return typeof this._content=="number"?$o.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Kf?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Ul(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var pr=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(pr||(pr={}));const A_=.001;class Ho{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>A_&&(Fg=!0),this.height=e)}replace(e,t,r){return Ho.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,i){let o=this,s=r.doc;for(let a=i.length-1;a>=0;a--){let{fromA:l,toA:u,fromB:c,toB:f}=i[a],d=o.lineAt(l,pr.ByPosNoHeight,r.setDoc(t),0,0),h=d.to>=u?d:o.lineAt(u,pr.ByPosNoHeight,r,0,0);for(f+=h.to-u,u=h.to;a>0&&d.from<=i[a-1].toA;)l=i[a-1].fromA,c=i[a-1].fromB,a--,l<d.from&&(d=o.lineAt(l,pr.ByPosNoHeight,r,0,0));c+=d.from-l,l=d.from;let m=aF.build(r.setDoc(s),e,c,f);o=vM(o,o.replace(l,u,m))}return o.updateHeight(r,0)}static empty(){return new Ps(0,0)}static of(e){if(e.length==1)return e[0];let t=0,r=e.length,i=0,o=0;for(;;)if(t==r)if(i>o*2){let a=e[t-1];a.break?e.splice(--t,1,a.left,null,a.right):e.splice(--t,1,a.left,a.right),r+=1+a.break,i-=a.size}else if(o>i*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,o-=a.size}else break;else if(i<o){let a=e[t++];a&&(i+=a.size)}else{let a=e[--r];a&&(o+=a.size)}let s=0;return e[t-1]==null?(s=1,t--):e[t]==null&&(s=1,r++),new RZe(Ho.of(e.slice(0,t)),s,Ho.of(e.slice(r)))}}function vM(n,e){return n==e?n:(n.constructor!=e.constructor&&(Fg=!0),e)}Ho.prototype.size=1;class loe extends Ho{constructor(e,t,r){super(e,t),this.deco=r}blockAt(e,t,r,i){return new Ul(i,this.length,r,this.height,this.deco||0)}lineAt(e,t,r,i,o){return this.blockAt(0,r,i,o)}forEachLine(e,t,r,i,o,s){e<=o+this.length&&t>=o&&s(this.blockAt(0,r,i,o))}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Ps extends loe{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,r,i){return new Ul(i,this.length,r,this.height,this.breaks)}replace(e,t,r){let i=r[0];return r.length==1&&(i instanceof Ps||i instanceof Vi&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Vi?i=new Ps(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Ho.of(r)}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Vi extends Ho{constructor(e){super(e,0)}heightMetrics(e,t){let r=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,o=i-r+1,s,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*o);s=l/o,this.length>o+1&&(a=(this.height-l)/(this.length-o-1))}else s=this.height/o;return{firstLine:r,lastLine:i,perLine:s,perChar:a}}blockAt(e,t,r,i){let{firstLine:o,lastLine:s,perLine:a,perChar:l}=this.heightMetrics(t,i);if(t.lineWrapping){let u=i+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),c=t.doc.lineAt(u),f=a+c.length*l,d=Math.max(r,e-f/2);return new Ul(c.from,c.length,d,f,0)}else{let u=Math.max(0,Math.min(s-o,Math.floor((e-r)/a))),{from:c,length:f}=t.doc.line(o+u);return new Ul(c,f,r+a*u,a,0)}}lineAt(e,t,r,i,o){if(t==pr.ByHeight)return this.blockAt(e,r,i,o);if(t==pr.ByPosNoHeight){let{from:h,to:m}=r.doc.lineAt(e);return new Ul(h,m-h,0,0,0)}let{firstLine:s,perLine:a,perChar:l}=this.heightMetrics(r,o),u=r.doc.lineAt(e),c=a+u.length*l,f=u.number-s,d=i+a*f+l*(u.from-o-f);return new Ul(u.from,u.length,Math.max(i,Math.min(d,i+this.height-c)),c,0)}forEachLine(e,t,r,i,o,s){e=Math.max(e,o),t=Math.min(t,o+this.length);let{firstLine:a,perLine:l,perChar:u}=this.heightMetrics(r,o);for(let c=e,f=i;c<=t;){let d=r.doc.lineAt(c);if(c==e){let m=d.number-a;f+=l*m+u*(e-o-m)}let h=l+u*d.length;s(new Ul(d.from,d.length,f,h,0)),f+=h,c=d.to+1}}replace(e,t,r){let i=this.length-t;if(i>0){let o=r[r.length-1];o instanceof Vi?r[r.length-1]=new Vi(o.length+i):r.push(null,new Vi(i-1))}if(e>0){let o=r[0];o instanceof Vi?r[0]=new Vi(e+o.length):r.unshift(new Vi(e-1),null)}return Ho.of(r)}decomposeLeft(e,t){t.push(new Vi(e-1),null)}decomposeRight(e,t){t.push(null,new Vi(this.length-e-1))}updateHeight(e,t=0,r=!1,i){let o=t+this.length;if(i&&i.from<=t+this.length&&i.more){let s=[],a=Math.max(t,i.from),l=-1;for(i.from>t&&s.push(new Vi(i.from-t-1).updateHeight(e,t));a<=o&&i.more;){let c=e.doc.lineAt(a).length;s.length&&s.push(null);let f=i.heights[i.index++];l==-1?l=f:Math.abs(f-l)>=A_&&(l=-2);let d=new Ps(c,f);d.outdated=!1,s.push(d),a+=c+1}a<=o&&s.push(null,new Vi(o-a).updateHeight(e,a));let u=Ho.of(s);return(l<0||Math.abs(u.height-this.height)>=A_||Math.abs(l-this.heightMetrics(e,t).perLine)>=A_)&&(Fg=!0),vM(this,u)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class RZe extends Ho{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,t,r,i){let o=r+this.left.height;return e<o?this.left.blockAt(e,t,r,i):this.right.blockAt(e,t,o,i+this.left.length+this.break)}lineAt(e,t,r,i,o){let s=i+this.left.height,a=o+this.left.length+this.break,l=t==pr.ByHeight?e<s:e<a,u=l?this.left.lineAt(e,t,r,i,o):this.right.lineAt(e,t,r,s,a);if(this.break||(l?u.to<a:u.from>a))return u;let c=t==pr.ByPosNoHeight?pr.ByPosNoHeight:pr.ByPos;return l?u.join(this.right.lineAt(a,c,r,s,a)):this.left.lineAt(a,c,r,i,o).join(u)}forEachLine(e,t,r,i,o,s){let a=i+this.left.height,l=o+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,r,i,o,s),t>=l&&this.right.forEachLine(e,t,r,a,l,s);else{let u=this.lineAt(l,pr.ByPos,r,i,o);e<u.from&&this.left.forEachLine(e,u.from-1,r,i,o,s),u.to>=e&&u.from<=t&&s(u),t>u.to&&this.right.forEachLine(u.to+1,t,r,a,l,s)}}replace(e,t,r){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,r));let o=[];e>0&&this.decomposeLeft(e,o);let s=o.length;for(let a of r)o.push(a);if(e>0&&zW(o,s-1),t<this.length){let a=o.length;this.decomposeRight(t,o),zW(o,a)}return Ho.of(o)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(r++,e>=r&&t.push(null)),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Ho.of(this.break?[e,null,t]:[e,t]):(this.left=vM(this.left,e),this.right=vM(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,i){let{left:o,right:s}=this,a=t+o.length+this.break,l=null;return i&&i.from<=t+o.length&&i.more?l=o=o.updateHeight(e,t,r,i):o.updateHeight(e,t,r),i&&i.from<=a+s.length&&i.more?l=s=s.updateHeight(e,a,r,i):s.updateHeight(e,a,r),l?this.balanced(o,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function zW(n,e){let t,r;n[e]==null&&(t=n[e-1])instanceof Vi&&(r=n[e+1])instanceof Vi&&n.splice(e-1,3,new Vi(t.length+1+r.length))}const OZe=5;class aF{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let r=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Ps?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new Ps(r-this.pos,-1)),this.writtenTo=r,t>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,o=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let s=t-e;r.block?this.addBlock(new loe(s,i,r)):(s||o||i>=OZe)&&this.addLineDeco(i,o,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Ps(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let r=new Vi(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Ps)return e;let t=new Ps(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=t,this.writtenTo=this.pos=this.pos+r}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Ps)&&!this.isCovered?this.nodes.push(new Ps(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof Ps&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,t,r,i){let o=new aF(r,e);return Pn.spans(t,r,i,o,0),o.finish(r)}}function kZe(n,e,t){let r=new IZe;return Pn.compare(n,e,t,r,0),r.changes}class IZe{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,i){(e<t||r&&r.heightRelevant||i&&i.heightRelevant)&&rO(e,t,this.changes,5)}}function LZe(n,e){let t=n.getBoundingClientRect(),r=n.ownerDocument,i=r.defaultView||window,o=Math.max(0,t.left),s=Math.min(i.innerWidth,t.right),a=Math.max(0,t.top),l=Math.min(i.innerHeight,t.bottom);for(let u=n.parentNode;u&&u!=r.body;)if(u.nodeType==1){let c=u,f=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&f.overflow!="visible"){let d=c.getBoundingClientRect();o=Math.max(o,d.left),s=Math.min(s,d.right),a=Math.max(a,d.top),l=Math.min(u==n.parentNode?i.innerHeight:l,d.bottom)}u=f.position=="absolute"||f.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:o-t.left,right:Math.max(o,s)-t.left,top:a-(t.top+e),bottom:Math.max(a,l)-(t.top+e)}}function FZe(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class oD{constructor(e,t,r,i){this.from=e,this.to=t,this.size=r,this.displaySize=i}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=t[r];if(i.from!=o.from||i.to!=o.to||i.size!=o.size)return!1}return!0}draw(e,t){return Ut.replace({widget:new BZe(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class BZe extends Sc{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class UW{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=VW,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=yr.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(rF).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new NZe(t),this.stateDeco=e.facet(C1).filter(r=>typeof r!="function"),this.heightMap=Ho.empty().applyChanges(this.stateDeco,Bn.empty,this.heightOracle.setDoc(e.doc),[new Ea(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ut.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let i=r?t.head:t.anchor;if(!e.some(({from:o,to:s})=>i>=o&&i<=s)){let{from:o,to:s}=this.lineBlockAt(i);e.push(new TS(o,s))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?VW:new lF(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(V0(e,this.scaler))})}update(e,t=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(C1).filter(c=>typeof c!="function");let i=e.changedRanges,o=Ea.extendWithRanges(i,kZe(r,this.stateDeco,e?e.changes:gi.empty(this.state.doc.length))),s=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);BW(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=s||Fg)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let u=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Wie)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,r=window.getComputedStyle(t),i=this.heightOracle,o=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?yr.RTL:yr.LTR;let s=this.heightOracle.mustRefreshForWrapping(o),a=t.getBoundingClientRect(),l=s||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let u=0,c=0;if(a.width&&a.height){let{scaleX:v,scaleY:S}=vie(t,a);(v>.005&&Math.abs(this.scaleX-v)>.005||S>.005&&Math.abs(this.scaleY-S)>.005)&&(this.scaleX=v,this.scaleY=S,u|=8,s=l=!0)}let f=(parseInt(r.paddingTop)||0)*this.scaleY,d=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=f||this.paddingBottom!=d)&&(this.paddingTop=f,this.paddingBottom=d,u|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=8);let h=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=h&&(this.scrollAnchorHeight=-1,this.scrollTop=h),this.scrolledToBottom=bie(e.scrollDOM);let m=(this.printing?FZe:LZe)(t,this.paddingTop),g=m.top-this.pixelViewport.top,y=m.bottom-this.pixelViewport.bottom;this.pixelViewport=m;let p=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(p!=this.inView&&(this.inView=p,p&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let w=a.width;if((this.contentDOMWidth!=w||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,u|=8),l){let v=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(v)&&(s=!0),s||i.lineWrapping&&Math.abs(w-this.contentDOMWidth)>i.charWidth){let{lineHeight:S,charWidth:x,textHeight:M}=e.docView.measureTextSize();s=S>0&&i.refresh(o,S,x,M,w/x,v),s&&(e.docView.minWidth=0,u|=8)}g>0&&y>0?c=Math.max(g,y):g<0&&y<0&&(c=Math.min(g,y)),BW();for(let S of this.viewports){let x=S.from==this.viewport.from?v:e.docView.measureVisibleLineHeights(S);this.heightMap=(s?Ho.empty().applyChanges(this.stateDeco,Bn.empty,this.heightOracle,[new Ea(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,s,new PZe(S.from,x))}Fg&&(u|=2)}let b=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return b&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),u|=this.updateForViewport()),(u&2||b)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,o=this.heightOracle,{visibleTop:s,visibleBottom:a}=this,l=new TS(i.lineAt(s-r*1e3,pr.ByHeight,o,0,0).from,i.lineAt(a+(1-r)*1e3,pr.ByHeight,o,0,0).to);if(t){let{head:u}=t.range;if(u<l.from||u>l.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=i.lineAt(u,pr.ByPos,o,0,0),d;t.y=="center"?d=(f.top+f.bottom)/2-c/2:t.y=="start"||t.y=="nearest"&&u<l.from?d=f.top:d=f.bottom-c,l=new TS(i.lineAt(d-1e3/2,pr.ByHeight,o,0,0).from,i.lineAt(d+c+1e3/2,pr.ByHeight,o,0,0).to)}}return l}mapViewport(e,t){let r=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new TS(this.heightMap.lineAt(r,pr.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,pr.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,pr.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(t,pr.ByPos,this.heightOracle,0,0),{visibleTop:s,visibleBottom:a}=this;return(e==0||i<=s-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||o>=a+Math.max(10,Math.min(r,250)))&&i>s-2*1e3&&o<a+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let i of e)t.touchesRange(i.from,i.to)||r.push(new oD(t.mapPos(i.from),t.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,t){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,o=i>>1,s=i<<1;if(this.defaultTextDirection!=yr.LTR&&!r)return[];let a=[],l=(c,f,d,h)=>{if(f-c<o)return;let m=this.state.selection.main,g=[m.from];m.empty||g.push(m.to);for(let p of g)if(p>c&&p<f){l(c,p-10,d,h),l(p+10,f,d,h);return}let y=UZe(e,p=>p.from>=d.from&&p.to<=d.to&&Math.abs(p.from-c)<o&&Math.abs(p.to-f)<o&&!g.some(w=>p.from<w&&p.to>w));if(!y){if(f<d.to&&t&&r&&t.visibleRanges.some(b=>b.from<=f&&b.to>=f)){let b=t.moveToLineBoundary(ot.cursor(f),!1,!0).head;b>c&&(f=b)}let p=this.gapSize(d,c,f,h),w=r||p<2e6?p:2e6;y=new oD(c,f,p,w)}a.push(y)},u=c=>{if(c.length<s||c.type!=$o.Text)return;let f=zZe(c.from,c.to,this.stateDeco);if(f.total<s)return;let d=this.scrollTarget?this.scrollTarget.range.head:null,h,m;if(r){let g=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,y,p;if(d!=null){let w=NS(f,d),b=((this.visibleBottom-this.visibleTop)/2+g)/c.height;y=w-b,p=w+b}else y=(this.visibleTop-c.top-g)/c.height,p=(this.visibleBottom-c.top+g)/c.height;h=DS(f,y),m=DS(f,p)}else{let g=f.total*this.heightOracle.charWidth,y=i*this.heightOracle.charWidth,p=0;if(g>2e6)for(let x of e)x.from>=c.from&&x.from<c.to&&x.size!=x.displaySize&&x.from*this.heightOracle.charWidth+p<this.pixelViewport.left&&(p=x.size-x.displaySize);let w=this.pixelViewport.left+p,b=this.pixelViewport.right+p,v,S;if(d!=null){let x=NS(f,d),M=((b-w)/2+y)/g;v=x-M,S=x+M}else v=(w-y)/g,S=(b+y)/g;h=DS(f,v),m=DS(f,S)}h>c.from&&l(c.from,h,c,f),m<c.to&&l(m,c.to,c,f)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(u):u(c);return a}gapSize(e,t,r,i){let o=NS(i,r)-NS(i,t);return this.heightOracle.lineWrapping?e.height*o:i.total*this.heightOracle.charWidth*o}updateLineGaps(e){oD.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Ut.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];Pn.spans(e,this.viewport.from,this.viewport.to,{span(i,o){t.push({from:i,to:o})},point(){}},20);let r=t.length!=this.visibleRanges.length||this.visibleRanges.some((i,o)=>i.from!=t[o].from||i.to!=t[o].to);return this.visibleRanges=t,r?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||V0(this.heightMap.lineAt(e,pr.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||V0(this.heightMap.lineAt(this.scaler.fromDOM(e),pr.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return V0(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class TS{constructor(e,t){this.from=e,this.to=t}}function zZe(n,e,t){let r=[],i=n,o=0;return Pn.spans(t,n,e,{span(){},point(s,a){s>i&&(r.push({from:i,to:s}),o+=s-i),i=a}},20),i<e&&(r.push({from:i,to:e}),o+=e-i),{total:o,ranges:r}}function DS({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let r=Math.floor(n*t);for(let i=0;;i++){let{from:o,to:s}=e[i],a=s-o;if(r<=a)return o+r;r-=a}}function NS(n,e){let t=0;for(let{from:r,to:i}of n.ranges){if(e<=i){t+=e-r;break}t+=i-r}return t/n.total}function UZe(n,e){for(let t of n)if(e(t))return t}const VW={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class lF{constructor(e,t,r){let i=0,o=0,s=0;this.viewports=r.map(({from:a,to:l})=>{let u=t.lineAt(a,pr.ByPos,e,0,0).top,c=t.lineAt(l,pr.ByPos,e,0,0).bottom;return i+=c-u,{from:a,to:l,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i);for(let a of this.viewports)a.domTop=s+(a.top-o)*this.scale,s=a.domBottom=a.domTop+(a.bottom-a.top),o=a.bottom}toDOM(e){for(let t=0,r=0,i=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.top)return i+(e-r)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);r=o.bottom,i=o.domBottom}}fromDOM(e){for(let t=0,r=0,i=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.domTop)return r+(e-i)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);r=o.bottom,i=o.domBottom}}eq(e){return e instanceof lF?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,r)=>t.from==e.viewports[r].from&&t.to==e.viewports[r].to):!1}}function V0(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),r=e.toDOM(n.bottom);return new Ul(n.from,n.length,t,r-t,Array.isArray(n._content)?n._content.map(i=>V0(i,e)):n._content)}const PS=St.define({combine:n=>n.join(" ")}),dO=St.define({combine:n=>n.indexOf(!0)>-1}),hO=Xf.newName(),uoe=Xf.newName(),coe=Xf.newName(),foe={"&light":"."+uoe,"&dark":"."+coe};function pO(n,e,t){return new Xf(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return n;if(!t||!t[i])throw new RangeError(`Unsupported selector: ${i}`);return t[i]}):n+" "+r}})}const VZe=pO("."+hO,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},foe),$Ze={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},sD=Mt.ie&&Mt.ie_version<=11;class HZe{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new AKe,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let r of t)this.queue.push(r);(Mt.ie&&Mt.ie_version<=11||Mt.ios&&e.composing)&&t.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(Mt.chrome&&Mt.chrome_version<126)&&(this.editContext=new jZe(e),e.state.facet(nf)&&(e.contentDOM.editContext=this.editContext.editContext)),sD&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,r)=>t!=e[r]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(nf)?r.root.activeElement!=this.dom:!M_(this.dom,i))return;let o=i.anchorNode&&r.docView.nearest(i.anchorNode);if(o&&o.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(Mt.ie&&Mt.ie_version<=11||Mt.android&&Mt.chrome)&&!r.state.selection.main.empty&&i.focusNode&&fy(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=M1(e.root);if(!t)return!1;let r=Mt.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&WZe(this.view,t)||t;if(!r||this.selectionRange.eq(r))return!1;let i=M_(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&DKe(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(r.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=t)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,$Ze),sD&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),sD&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var r;if(!this.delayedAndroidKey){let i=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&rg(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,r=-1,i=!1;for(let o of e){let s=this.readMutation(o);s&&(s.typeOver&&(i=!0),t==-1?{from:t,to:r}=s:(t=Math.min(s.from,t),r=Math.max(s.to,r)))}return{from:t,to:r,typeOver:i}}readChange(){let{from:e,to:t,typeOver:r}=this.processRecords(),i=this.selectionChanged&&M_(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new lZe(this.view,e,t,r);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let r=this.view.state,i=Qie(this.view,t);return this.view.state==r&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let r=$W(t,e.previousSibling||e.target.previousSibling,-1),i=$W(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(nf)!=e.state.facet(nf)&&(e.view.contentDOM.editContext=e.state.facet(nf)?this.editContext.editContext:null))}destroy(){var e,t,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function $W(n,e,t){for(;e;){let r=or.get(e);if(r&&r.parent==n)return r;let i=e.parentNode;e=i!=n.dom?i:t>0?e.nextSibling:e.previousSibling}return null}function HW(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,s=n.docView.domAtPos(n.state.selection.main.anchor);return fy(s.node,s.offset,i,o)&&([t,r,i,o]=[i,o,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:o}}function WZe(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return HW(n,i)}let t=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",r,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",r,!0),t?HW(n,t):null}class jZe{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let{anchor:i}=e.state.selection.main,o=this.toEditorPos(r.updateRangeStart),s=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:o,drifted:!1});let a={from:o,to:s,insert:Bn.of(r.text.split(`
`))};a.from==this.from&&i<this.from?a.from=i:a.to==this.to&&i>this.to&&(a.to=i),!(a.from==a.to&&!a.insert.length)&&(this.pendingContextChange=a,e.state.readOnly||sF(e,a,ot.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd))),this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)))},this.handlers.characterboundsupdate=r=>{let i=[],o=null;for(let s=this.toEditorPos(r.rangeStart),a=this.toEditorPos(r.rangeEnd);s<a;s++){let l=e.coordsForChar(s);o=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||o||new DOMRect,i.push(o)}t.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let o of r.getTextFormats()){let s=o.underlineStyle,a=o.underlineThickness;if(s!="None"&&a!="None"){let l=`text-decoration: underline ${s=="Dashed"?"dashed ":s=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;i.push(Ut.mark({attributes:{style:l}}).range(this.toEditorPos(o.rangeStart),this.toEditorPos(o.rangeEnd)))}}e.dispatch({effects:Gie.of(Ut.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)t.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=M1(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((o,s,a,l,u)=>{if(r)return;let c=u.length-(s-o);if(i&&s>=i.to)if(i.from==o&&i.to==s&&i.insert.eq(u)){i=this.pendingContextChange=null,t+=c,this.to+=c;return}else i=null,this.revertPending(e.state);if(o+=t,s+=t,s<=this.from)this.from+=c,this.to+=c;else if(o<this.to){if(o<this.from||s>this.to||this.to-this.from+u.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(o),this.toContextPos(s),u.toString()),this.to+=c}t+=c}),i&&!r&&this.revertPending(e.state),!r}update(e){let t=this.pendingContextChange;this.composing&&(this.composing.drifted||e.transactions.some(r=>!r.isUserEvent("input.type")&&r.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),i=this.toContextPos(t.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e){let t=this.composing;return t&&t.drifted?t.editorBase+(e-t.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class bt{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(o=>r(o,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||TKe(e.parent)||document,this.viewState=new UW(e.state||Mn.create(e)),e.scrollTo&&e.scrollTo.is(MS)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(B0).map(i=>new nD(i));for(let i of this.plugins)i.update(this);this.observer=new HZe(this),this.inputState=new hZe(this),this.inputState.ensureHandlers(this.plugins),this.docView=new wW(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof xi?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,r=!1,i,o=this.state;for(let d of e){if(d.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=d.state}if(this.destroyed){this.viewState.state=o;return}let s=this.hasFocus,a=0,l=null;e.some(d=>d.annotation(ooe))?(this.inputState.notifiedFocused=s,a=1):s!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=s,l=soe(o,s),l||(a=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(c=null)):this.observer.clear(),o.facet(Mn.phrases)!=this.state.facet(Mn.phrases))return this.setState(o);i=gM.create(this,o,e),i.flags|=a;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let d of e){if(f&&(f=f.map(d.changes)),d.scrollIntoView){let{main:h}=d.state.selection;f=new ig(h.empty?h:ot.cursor(h.head,h.head>h.anchor?-1:1))}for(let h of d.effects)h.is(MS)&&(f=h.value.clip(this.state))}this.viewState.update(i,f),this.bidiCache=yM.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet(z0)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(d=>d.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(PS)!=i.state.facet(PS)&&(this.viewState.mustMeasureContent=!0),(t||r||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!i.empty)for(let d of this.state.facet(lO))try{d(i)}catch(h){ds(this.state,h,"update listener")}(l||c)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),c&&!Qie(this,c)&&u.force&&rg(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new UW(e),this.plugins=e.facet(B0).map(r=>new nD(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new wW(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(B0),r=e.state.facet(B0);if(t!=r){let i=[];for(let o of r){let s=t.indexOf(o);if(s<0)i.push(new nD(o));else{let a=this.plugins[s];a.mustUpdate=e,i.push(a)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);t!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(r){ds(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:s}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(s=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(s<0)if(bie(r))o=-1,s=this.viewState.heightMap.height;else{let h=this.viewState.scrollAnchorAt(i);o=h.from,s=h.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];l&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(h=>{try{return h.read(this)}catch(m){return ds(this.state,m),WW}}),f=gM.create(this,this.state,[]),d=!1;f.flags|=l,t?t.flags|=l:t=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),d=this.docView.update(f),d&&this.docViewUpdate());for(let h=0;h<u.length;h++)if(c[h]!=WW)try{let m=u[h];m.write&&m.write(c[h],this)}catch(m){ds(this.state,m)}if(d&&this.docView.updateSelection(!0),!f.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,s=-1;continue}else{let m=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-s;if(m>1||m<-1){i=i+m,r.scrollTop=i/this.scaleY,s=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let a of this.state.facet(lO))a(t)}get themeClasses(){return hO+" "+(this.state.facet(dO)?coe:uoe)+" "+this.state.facet(PS)}updateAttrs(){let e=jW(this,qie,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(nf)?"true":"false",class:"cm-content",style:`${Mt.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),jW(this,rF,t);let r=this.observer.ignore(()=>{let i=nO(this.contentDOM,this.contentAttrs,t),o=nO(this.dom,this.editorAttrs,e);return i||o});return this.editorAttrs=e,this.contentAttrs=t,r}showAnnouncements(e){let t=!0;for(let r of e)for(let i of r.effects)if(i.is(bt.announce)){t&&(this.announceDOM.textContent=""),t=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(z0);let e=this.state.facet(bt.cspNonce);Xf.mount(this.root,this.styleModules.concat(VZe).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(r=>r.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,r){return iD(this,e,CW(this,e,t,r))}moveByGroup(e,t){return iD(this,e,CW(this,e,t,r=>iZe(this,e.head,r)))}visualLineSide(e,t){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),o=r[t?r.length-1:0];return ot.cursor(o.side(t,i)+e.from,o.forward(!t,i)?1:-1)}moveToLineBoundary(e,t,r=!0){return rZe(this,e,t,r)}moveVertically(e,t,r){return iD(this,e,oZe(this,e,t,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),Jie(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let r=this.docView.coordsAt(e,t);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),o=this.bidiSpans(i),s=o[pf.find(o,e-i.from,-1,t)];return Sx(r,s.dir==yr.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Hie)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>GZe)return Iie(e.length);let t=this.textDirectionAt(e.from),r;for(let o of this.bidiCache)if(o.from==e.from&&o.dir==t&&(o.fresh||kie(o.isolates,r=bW(this,e))))return o.order;r||(r=bW(this,e));let i=VKe(e.text,t,r);return this.bidiCache.push(new yM(e.from,e.to,t,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Mt.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{yie(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return MS.of(new ig(typeof e=="number"?ot.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return MS.of(new ig(ot.cursor(r.from),"start","start",r.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return ei.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return ei.define(()=>({}),{eventObservers:e})}static theme(e,t){let r=Xf.newName(),i=[PS.of(r),z0.of(pO(`.${r}`,e))];return t&&t.dark&&i.push(dO.of(!0)),i}static baseTheme(e){return up.lowest(z0.of(pO("."+hO,e,foe)))}static findFromDOM(e){var t;let r=e.querySelector(".cm-content"),i=r&&or.get(r)||or.get(e);return((t=i==null?void 0:i.rootView)===null||t===void 0?void 0:t.view)||null}}bt.styleModule=z0;bt.inputHandler=Vie;bt.clipboardInputFilter=tF;bt.clipboardOutputFilter=nF;bt.scrollHandler=jie;bt.focusChangeEffect=$ie;bt.perLineTextDirection=Hie;bt.exceptionSink=Uie;bt.updateListener=lO;bt.editable=nf;bt.mouseSelectionStyle=zie;bt.dragMovesSelection=Bie;bt.clickAddsSelectionRange=Fie;bt.decorations=C1;bt.outerDecorations=Xie;bt.atomicRanges=iF;bt.bidiIsolatedRanges=Yie;bt.scrollMargins=Kie;bt.darkTheme=dO;bt.cspNonce=St.define({combine:n=>n.length?n[0]:""});bt.contentAttributes=rF;bt.editorAttributes=qie;bt.lineWrapping=bt.contentAttributes.of({class:"cm-lineWrapping"});bt.announce=dn.define();const GZe=4096,WW={};class yM{constructor(e,t,r,i,o,s){this.from=e,this.to=t,this.dir=r,this.isolates=i,this.fresh=o,this.order=s}static update(e,t){if(t.empty&&!e.some(o=>o.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:yr.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let s=e[o];s.dir==i&&!t.touchesRange(s.from,s.to)&&r.push(new yM(t.mapPos(s.from,1),t.mapPos(s.to,-1),s.dir,s.isolates,!1,s.order))}return r}}function jW(n,e,t){for(let r=n.state.facet(e),i=r.length-1;i>=0;i--){let o=r[i],s=typeof o=="function"?o(n):o;s&&tO(s,t)}return t}const qZe=Mt.mac?"mac":Mt.windows?"win":Mt.linux?"linux":"key";function XZe(n,e){const t=n.split(/-(?!$)/);let r=t[t.length-1];r=="Space"&&(r=" ");let i,o,s,a;for(let l=0;l<t.length-1;++l){const u=t[l];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))o=!0;else if(/^s(hift)?$/i.test(u))s=!0;else if(/^mod$/i.test(u))e=="mac"?a=!0:o=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(r="Alt-"+r),o&&(r="Ctrl-"+r),a&&(r="Meta-"+r),s&&(r="Shift-"+r),r}function RS(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const YZe=up.default(bt.domEventHandlers({keydown(n,e){return hoe(doe(e.state),n,e,"editor")}})),Mx=St.define({enables:YZe}),GW=new WeakMap;function doe(n){let e=n.facet(Mx),t=GW.get(e);return t||GW.set(e,t=JZe(e.reduce((r,i)=>r.concat(i),[]))),t}function KZe(n,e,t){return hoe(doe(n.state),e,n,t)}let rf=null;const ZZe=4e3;function JZe(n,e=qZe){let t=Object.create(null),r=Object.create(null),i=(s,a)=>{let l=r[s];if(l==null)r[s]=a;else if(l!=a)throw new Error("Key binding "+s+" is used both as a regular binding and as a multi-stroke prefix")},o=(s,a,l,u,c)=>{var f,d;let h=t[s]||(t[s]=Object.create(null)),m=a.split(/ (?!$)/).map(p=>XZe(p,e));for(let p=1;p<m.length;p++){let w=m.slice(0,p).join(" ");i(w,!0),h[w]||(h[w]={preventDefault:!0,stopPropagation:!1,run:[b=>{let v=rf={view:b,prefix:w,scope:s};return setTimeout(()=>{rf==v&&(rf=null)},ZZe),!0}]})}let g=m.join(" ");i(g,!1);let y=h[g]||(h[g]={preventDefault:!1,stopPropagation:!1,run:((d=(f=h._any)===null||f===void 0?void 0:f.run)===null||d===void 0?void 0:d.slice())||[]});l&&y.run.push(l),u&&(y.preventDefault=!0),c&&(y.stopPropagation=!0)};for(let s of n){let a=s.scope?s.scope.split(" "):["editor"];if(s.any)for(let u of a){let c=t[u]||(t[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:f}=s;for(let d in c)c[d].run.push(h=>f(h,mO))}let l=s[e]||s.key;if(l)for(let u of a)o(u,l,s.run,s.preventDefault,s.stopPropagation),s.shift&&o(u,"Shift-"+l,s.shift,s.preventDefault,s.stopPropagation)}return t}let mO=null;function hoe(n,e,t,r){mO=e;let i=_Ke(e),o=Wi(i,0),s=ga(o)==i.length&&i!=" ",a="",l=!1,u=!1,c=!1;rf&&rf.view==t&&rf.scope==r&&(a=rf.prefix+" ",toe.indexOf(e.keyCode)<0&&(u=!0,rf=null));let f=new Set,d=y=>{if(y){for(let p of y.run)if(!f.has(p)&&(f.add(p),p(t)))return y.stopPropagation&&(c=!0),!0;y.preventDefault&&(y.stopPropagation&&(c=!0),u=!0)}return!1},h=n[r],m,g;return h&&(d(h[a+RS(i,e,!s)])?l=!0:s&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Mt.windows&&e.ctrlKey&&e.altKey)&&(m=Yf[e.keyCode])&&m!=i?(d(h[a+RS(m,e,!0)])||e.shiftKey&&(g=E1[e.keyCode])!=i&&g!=m&&d(h[a+RS(g,e,!1)]))&&(l=!0):s&&e.shiftKey&&d(h[a+RS(i,e,!0)])&&(l=!0),!l&&d(h._any)&&(l=!0)),u&&(l=!0),l&&c&&e.stopPropagation(),mO=null,l}class Cx{constructor(e,t,r,i,o){this.className=e,this.left=t,this.top=r,this.width=i,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let o=poe(e);return[new Cx(t,i.left-o.left,i.top-o.top,null,i.bottom-i.top)]}else return QZe(e,t,r)}}function poe(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==yr.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function qW(n,e,t,r){let i=n.coordsAtPos(e,t*2);if(!i)return r;let o=n.dom.getBoundingClientRect(),s=(i.top+i.bottom)/2,a=n.posAtCoords({x:o.left+1,y:s}),l=n.posAtCoords({x:o.right-1,y:s});return a==null||l==null?r:{from:Math.max(r.from,Math.min(a,l)),to:Math.min(r.to,Math.max(a,l))}}function QZe(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let r=Math.max(t.from,n.viewport.from),i=Math.min(t.to,n.viewport.to),o=n.textDirection==yr.LTR,s=n.contentDOM,a=s.getBoundingClientRect(),l=poe(n),u=s.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),f=a.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),d=a.right-(c?parseInt(c.paddingRight):0),h=cO(n,r),m=cO(n,i),g=h.type==$o.Text?h:null,y=m.type==$o.Text?m:null;if(g&&(n.lineWrapping||h.widgetLineBreaks)&&(g=qW(n,r,1,g)),y&&(n.lineWrapping||m.widgetLineBreaks)&&(y=qW(n,i,-1,y)),g&&y&&g.from==y.from&&g.to==y.to)return w(b(t.from,t.to,g));{let S=g?b(t.from,null,g):v(h,!1),x=y?b(null,t.to,y):v(m,!0),M=[];return(g||h).to<(y||m).from-(g&&y?1:0)||h.widgetLineBreaks>1&&S.bottom+n.defaultLineHeight/2<x.top?M.push(p(f,S.bottom,d,x.top)):S.bottom<x.top&&n.elementAtHeight((S.bottom+x.top)/2).type==$o.Text&&(S.bottom=x.top=(S.bottom+x.top)/2),w(S).concat(M).concat(w(x))}function p(S,x,M,A){return new Cx(e,S-l.left,x-l.top-.01,M-S,A-x+.01)}function w({top:S,bottom:x,horizontal:M}){let A=[];for(let T=0;T<M.length;T+=2)A.push(p(M[T],S,M[T+1],x));return A}function b(S,x,M){let A=1e9,T=-1e9,C=[];function D(F,U,N,I,V){let L=n.coordsAtPos(F,F==M.to?-2:2),X=n.coordsAtPos(N,N==M.from?2:-2);!L||!X||(A=Math.min(L.top,X.top,A),T=Math.max(L.bottom,X.bottom,T),V==yr.LTR?C.push(o&&U?f:L.left,o&&I?d:X.right):C.push(!o&&I?f:X.left,!o&&U?d:L.right))}let R=S??M.from,B=x??M.to;for(let F of n.visibleRanges)if(F.to>R&&F.from<B)for(let U=Math.max(F.from,R),N=Math.min(F.to,B);;){let I=n.state.doc.lineAt(U);for(let V of n.bidiSpans(I)){let L=V.from+I.from,X=V.to+I.from;if(L>=N)break;X>U&&D(Math.max(L,U),S==null&&L<=R,Math.min(X,N),x==null&&X>=B,V.dir)}if(U=I.to+1,U>=N)break}return C.length==0&&D(R,S==null,B,x==null,n.textDirection),{top:A,bottom:T,horizontal:C}}function v(S,x){let M=a.top+(x?S.top:S.bottom);return{top:M,bottom:M,horizontal:[]}}}function eJe(n,e){return n.constructor==e.constructor&&n.eq(e)}class tJe{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(T_)!=e.state.facet(T_)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,r=e.facet(T_);for(;t<r.length&&r[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,r)=>!eJe(t,this.drawn[r]))){let t=this.dom.firstChild,r=0;for(let i of e)i.update&&t&&i.constructor&&this.drawn[r].constructor&&i.update(t,this.drawn[r])?(t=t.nextSibling,r++):this.dom.insertBefore(i.draw(),t);for(;t;){let i=t.nextSibling;t.remove(),t=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const T_=St.define();function moe(n){return[ei.define(e=>new tJe(e,n)),T_.of(n)]}const goe=!Mt.ios,A1=St.define({combine(n){return mu(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function nJe(n={}){return[A1.of(n),rJe,iJe,oJe,Wie.of(!0)]}function voe(n){return n.startState.facet(A1)!=n.state.facet(A1)}const rJe=moe({above:!0,markers(n){let{state:e}=n,t=e.facet(A1),r=[];for(let i of e.selection.ranges){let o=i==e.selection.main;if(i.empty?!o||goe:t.drawRangeCursor){let s=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=i.empty?i:ot.cursor(i.head,i.head>i.anchor?-1:1);for(let l of Cx.forRange(n,s,a))r.push(l)}}return r},update(n,e){n.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=voe(n);return t&&XW(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){XW(e.state,n)},class:"cm-cursorLayer"});function XW(n,e){e.style.animationDuration=n.facet(A1).cursorBlinkRate+"ms"}const iJe=moe({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:Cx.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||voe(n)},class:"cm-selectionLayer"}),gO={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};goe&&(gO[".cm-line"].caretColor=gO[".cm-content"].caretColor="transparent !important");const oJe=up.highest(bt.theme(gO)),yoe=dn.define({map(n,e){return n==null?null:e.mapPos(n)}}),$0=Qi.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,r)=>r.is(yoe)?r.value:t,n)}}),sJe=ei.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field($0);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field($0)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,e=n.state.field($0),t=e!=null&&n.coordsAtPos(e);if(!t)return null;let r=n.scrollDOM.getBoundingClientRect();return{left:t.left-r.left+n.scrollDOM.scrollLeft*n.scaleX,top:t.top-r.top+n.scrollDOM.scrollTop*n.scaleY,height:t.bottom-t.top}}drawCursor(n){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;n?(this.cursor.style.left=n.left/e+"px",this.cursor.style.top=n.top/t+"px",this.cursor.style.height=n.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field($0)!=n&&this.view.dispatch({effects:yoe.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function aJe(){return[$0,sJe]}function YW(n,e,t,r,i){e.lastIndex=0;for(let o=n.iterRange(t,r),s=t,a;!o.next().done;s+=o.value.length)if(!o.lineBreak)for(;a=e.exec(o.value);)i(s+a.index,a)}function lJe(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let r=[];for(let{from:i,to:o}of t)i=Math.max(n.state.doc.lineAt(i).from,i-e),o=Math.min(n.state.doc.lineAt(o).to,o+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=o:r.push({from:i,to:o});return r}class uJe{constructor(e){const{regexp:t,decoration:r,decorate:i,boundary:o,maxLength:s=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,i)this.addMatch=(a,l,u,c)=>i(c,u,u+a[0].length,a,l);else if(typeof r=="function")this.addMatch=(a,l,u,c)=>{let f=r(a,l,u);f&&c(u,u+a[0].length,f)};else if(r)this.addMatch=(a,l,u,c)=>c(u,u+a[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=s}createDeco(e){let t=new qf,r=t.add.bind(t);for(let{from:i,to:o}of lJe(e,this.maxLength))YW(e.state.doc,this.regexp,i,o,(s,a)=>this.addMatch(a,e,s,r));return t.finish()}updateDeco(e,t){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((o,s,a,l)=>{l>e.view.viewport.from&&a<e.view.viewport.to&&(r=Math.min(a,r),i=Math.max(l,i))}),e.viewportChanged||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),r,i):t}updateRange(e,t,r,i){for(let o of e.visibleRanges){let s=Math.max(o.from,r),a=Math.min(o.to,i);if(a>s){let l=e.state.doc.lineAt(s),u=l.to<a?e.state.doc.lineAt(a):l,c=Math.max(o.from,l.from),f=Math.min(o.to,u.to);if(this.boundary){for(;s>l.from;s--)if(this.boundary.test(l.text[s-1-l.from])){c=s;break}for(;a<u.to;a++)if(this.boundary.test(u.text[a-u.from])){f=a;break}}let d=[],h,m=(g,y,p)=>d.push(p.range(g,y));if(l==u)for(this.regexp.lastIndex=c-l.from;(h=this.regexp.exec(l.text))&&h.index<f-l.from;)this.addMatch(h,e,h.index+l.from,m);else YW(e.state.doc,this.regexp,c,f,(g,y)=>this.addMatch(y,e,g,m));t=t.update({filterFrom:c,filterTo:f,filter:(g,y)=>g<c||y>f,add:d})}}return t}}const vO=/x/.unicode!=null?"gu":"g",cJe=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,vO),fJe={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let aD=null;function dJe(){var n;if(aD==null&&typeof document<"u"&&document.body){let e=document.body.style;aD=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return aD||!1}const D_=St.define({combine(n){let e=mu(n,{render:null,specialChars:cJe,addSpecialChars:null});return(e.replaceTabs=!dJe())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,vO)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,vO)),e}});function hJe(n={}){return[D_.of(n),pJe()]}let KW=null;function pJe(){return KW||(KW=ei.fromClass(class{constructor(n){this.view=n,this.decorations=Ut.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(D_)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new uJe({regexp:n.specialChars,decoration:(e,t,r)=>{let{doc:i}=t.state,o=Wi(e[0],0);if(o==9){let s=i.lineAt(r),a=t.state.tabSize,l=yv(s.text,a,r-s.from);return Ut.replace({widget:new yJe((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=Ut.replace({widget:new vJe(n,o)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(D_);n.startState.facet(D_)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const mJe="";function gJe(n){return n>=32?mJe:n==10?"":String.fromCharCode(9216+n)}class vJe extends Sc{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=gJe(this.code),r=e.state.phrase("Control character")+" "+(fJe[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,t);if(i)return i;let o=document.createElement("span");return o.textContent=t,o.title=r,o.setAttribute("aria-label",r),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class yJe extends Sc{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function xJe(){return wJe}const bJe=Ut.line({class:"cm-activeLine"}),wJe=ei.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let r of n.state.selection.ranges){let i=n.lineBlockAt(r.head);i.from>e&&(t.push(bJe.range(i.from)),e=i.from)}return Ut.set(t)}},{decorations:n=>n.decorations});class SJe extends Sc{constructor(e){super(),this.content=e}toDOM(e){let t=document.createElement("span");return t.className="cm-placeholder",t.style.pointerEvents="none",t.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(e):this.content.cloneNode(!0)),typeof this.content=="string"?t.setAttribute("aria-label","placeholder "+this.content):t.setAttribute("aria-hidden","true"),t}coordsAt(e){let t=e.firstChild?kg(e.firstChild):[];if(!t.length)return null;let r=window.getComputedStyle(e.parentNode),i=Sx(t[0],r.direction!="rtl"),o=parseInt(r.lineHeight);return i.bottom-i.top>o*1.5?{left:i.left,right:i.right,top:i.top,bottom:i.top+o}:i}ignoreEvent(){return!1}}function _Je(n){return ei.fromClass(class{constructor(e){this.view=e,this.placeholder=n?Ut.set([Ut.widget({widget:new SJe(n),side:1}).range(0)]):Ut.none}get decorations(){return this.view.state.doc.length?Ut.none:this.placeholder}},{decorations:e=>e.decorations})}const yO=2e3;function EJe(n,e,t){let r=Math.min(e.line,t.line),i=Math.max(e.line,t.line),o=[];if(e.off>yO||t.off>yO||e.col<0||t.col<0){let s=Math.min(e.off,t.off),a=Math.max(e.off,t.off);for(let l=r;l<=i;l++){let u=n.doc.line(l);u.length<=a&&o.push(ot.range(u.from+s,u.to+a))}}else{let s=Math.min(e.col,t.col),a=Math.max(e.col,t.col);for(let l=r;l<=i;l++){let u=n.doc.line(l),c=XR(u.text,s,n.tabSize,!0);if(c<0)o.push(ot.cursor(u.to));else{let f=XR(u.text,a,n.tabSize);o.push(ot.range(u.from+c,u.from+f))}}}return o}function MJe(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function ZW(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),r=n.state.doc.lineAt(t),i=t-r.from,o=i>yO?-1:i==r.length?MJe(n,e.clientX):yv(r.text,n.state.tabSize,t-r.from);return{line:r.number,col:o,off:i}}function CJe(n,e){let t=ZW(n,e),r=n.state.selection;return t?{update(i){if(i.docChanged){let o=i.changes.mapPos(i.startState.doc.line(t.line).from),s=i.state.doc.lineAt(o);t={line:s.number,col:t.col,off:Math.min(t.off,s.length)},r=r.map(i.changes)}},get(i,o,s){let a=ZW(n,i);if(!a)return r;let l=EJe(n.state,t,a);return l.length?s?ot.create(l.concat(r.ranges)):ot.create(l):r}}:null}function AJe(n){let e=t=>t.altKey&&t.button==0;return bt.mouseSelectionStyle.of((t,r)=>e(r)?CJe(t,r):null)}const TJe={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},DJe={style:"cursor: crosshair"};function NJe(n={}){let[e,t]=TJe[n.key||"Alt"],r=ei.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||t(i))},keyup(i){(i.keyCode==e||!t(i))&&this.set(!1)},mousemove(i){this.set(t(i))}}});return[r,bt.contentAttributes.of(i=>{var o;return!((o=i.plugin(r))===null||o===void 0)&&o.isDown?DJe:null})]}const S0="-10000px";class xoe{constructor(e,t,r,i){this.facet=t,this.createTooltipView=r,this.removeTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(s=>s);let o=null;this.tooltipViews=this.tooltips.map(s=>o=r(s,o))}update(e,t){var r;let i=e.state.facet(this.facet),o=i.filter(l=>l);if(i===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let s=[],a=t?[]:null;for(let l=0;l<o.length;l++){let u=o[l],c=-1;if(u){for(let f=0;f<this.tooltips.length;f++){let d=this.tooltips[f];d&&d.create==u.create&&(c=f)}if(c<0)s[l]=this.createTooltipView(u,l?s[l-1]:null),a&&(a[l]=!!u.above);else{let f=s[l]=this.tooltipViews[c];a&&(a[l]=t[c]),f.update&&f.update(e)}}}for(let l of this.tooltipViews)s.indexOf(l)<0&&(this.removeTooltipView(l),(r=l.destroy)===null||r===void 0||r.call(l));return t&&(a.forEach((l,u)=>t[u]=l),t.length=a.length),this.input=i,this.tooltips=o,this.tooltipViews=s,!0}}function PJe(n){let{win:e}=n;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const lD=St.define({combine:n=>{var e,t,r;return{position:Mt.ios?"absolute":((e=n.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(i=>i.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((r=n.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||PJe}}}),JW=new WeakMap,uF=ei.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(lD);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new xoe(n,cF,(t,r)=>this.createTooltip(t,r),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,r=n.state.facet(lD);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;t=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n,e){let t=n.create(this.view),r=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),n.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",t.dom.appendChild(i)}return t.dom.style.position=this.position,t.dom.style.top=S0,t.dom.style.left="0px",this.container.insertBefore(t.dom,r),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var n,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(n=r.destroy)===null||n===void 0||n.call(r);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:o}=this.manager.tooltipViews[0];if(Mt.gecko)t=o.offsetParent!=this.container.ownerDocument.body;else if(o.style.top==S0&&o.style.left=="0px"){let s=o.getBoundingClientRect();t=Math.abs(s.top+1e4)>1||Math.abs(s.left)>1}}if(t||this.position=="absolute")if(this.parent){let o=this.parent.getBoundingClientRect();o.width&&o.height&&(n=o.width/this.parent.offsetWidth,e=o.height/this.parent.offsetHeight)}else({scaleX:n,scaleY:e}=this.view.viewState);let r=this.view.scrollDOM.getBoundingClientRect(),i=oF(this.view);return{visible:{left:r.left+i.left,top:r.top+i.top,right:r.right-i.right,bottom:r.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((o,s)=>{let a=this.manager.tooltipViews[s];return a.getCoords?a.getCoords(o.pos):this.view.coordsAtPos(o.pos)}),size:this.manager.tooltipViews.map(({dom:o})=>o.getBoundingClientRect()),space:this.view.state.facet(lD).tooltipSpace(this.view),scaleX:n,scaleY:e,makeAbsolute:t}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:t,space:r,scaleX:i,scaleY:o}=n,s=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],u=this.manager.tooltipViews[a],{dom:c}=u,f=n.pos[a],d=n.size[a];if(!f||f.bottom<=Math.max(t.top,r.top)||f.top>=Math.min(t.bottom,r.bottom)||f.right<Math.max(t.left,r.left)-.1||f.left>Math.min(t.right,r.right)+.1){c.style.top=S0;continue}let h=l.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,m=h?7:0,g=d.right-d.left,y=(e=JW.get(u))!==null&&e!==void 0?e:d.bottom-d.top,p=u.offset||OJe,w=this.view.textDirection==yr.LTR,b=d.width>r.right-r.left?w?r.left:r.right-d.width:w?Math.max(r.left,Math.min(f.left-(h?14:0)+p.x,r.right-g)):Math.min(Math.max(r.left,f.left-g+(h?14:0)-p.x),r.right-g),v=this.above[a];!l.strictSide&&(v?f.top-y-m-p.y<r.top:f.bottom+y+m+p.y>r.bottom)&&v==r.bottom-f.bottom>f.top-r.top&&(v=this.above[a]=!v);let S=(v?f.top-r.top:r.bottom-f.bottom)-m;if(S<y&&u.resize!==!1){if(S<this.view.defaultLineHeight){c.style.top=S0;continue}JW.set(u,y),c.style.height=(y=S)/o+"px"}else c.style.height&&(c.style.height="");let x=v?f.top-y-m-p.y:f.bottom+m+p.y,M=b+g;if(u.overlap!==!0)for(let A of s)A.left<M&&A.right>b&&A.top<x+y&&A.bottom>x&&(x=v?A.top-y-2-m:A.bottom+m+2);if(this.position=="absolute"?(c.style.top=(x-n.parent.top)/o+"px",c.style.left=(b-n.parent.left)/i+"px"):(c.style.top=x/o+"px",c.style.left=b/i+"px"),h){let A=f.left+(w?p.x:-p.x)-(b+14-7);h.style.left=A/i+"px"}u.overlap!==!0&&s.push({left:b,top:x,right:M,bottom:x+y}),c.classList.toggle("cm-tooltip-above",v),c.classList.toggle("cm-tooltip-below",!v),u.positioned&&u.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=S0}},{eventObservers:{scroll(){this.maybeMeasure()}}}),RJe=bt.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),OJe={x:0,y:0},cF=St.define({enables:[uF,RJe]}),xM=St.define({combine:n=>n.reduce((e,t)=>e.concat(t),[])});class wC{static create(e){return new wC(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new xoe(e,xM,(t,r)=>this.createHostedView(t,r),t=>t.dom.remove())}createHostedView(e,t){let r=e.create(this.view);return r.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(r.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&r.mount&&r.mount(this.view),r}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let r of this.manager.tooltipViews){let i=r[e];if(i!==void 0){if(t===void 0)t=i;else if(t!==i)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const kJe=cF.compute([xM],n=>{let e=n.facet(xM);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var r;return(r=t.end)!==null&&r!==void 0?r:t.pos})),create:wC.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class IJe{constructor(e,t,r,i,o){this.view=e,this.source=t,this.field=r,this.setHover=i,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,r=e.docView.nearest(t.target);if(!r)return;let i,o=1;if(r instanceof hf)i=r.posAtStart;else{if(i=e.posAtCoords(t),i==null)return;let a=e.coordsAtPos(i);if(!a||t.y<a.top||t.y>a.bottom||t.x<a.left-e.defaultCharacterWidth||t.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(i)).find(c=>c.from<=i&&c.to>=i),u=l&&l.dir==yr.RTL?-1:1;o=t.x<a.left?-u:u}let s=this.source(e,i,o);if(s!=null&&s.then){let a=this.pending={pos:i};s.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>ds(e.state,l,"hover tooltip"))}else s&&!(Array.isArray(s)&&!s.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(s)?s:[s])})}get tooltip(){let e=this.view.plugin(uF),t=e?e.manager.tooltips.findIndex(r=>r.create==wC.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,r;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:o}=this;if(i.length&&o&&!LJe(o.dom,e)||this.pending){let{pos:s}=i[0]||this.pending,a=(r=(t=i[0])===null||t===void 0?void 0:t.end)!==null&&r!==void 0?r:s;(s==a?this.view.posAtCoords(this.lastMove)!=s:!FJe(this.view,s,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:r}=this;r&&r.dom.contains(e.relatedTarget)?this.watchTooltipLeave(r.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=r=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(r.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const OS=4;function LJe(n,e){let{left:t,right:r,top:i,bottom:o}=n.getBoundingClientRect(),s;if(s=n.querySelector(".cm-tooltip-arrow")){let a=s.getBoundingClientRect();i=Math.min(a.top,i),o=Math.max(a.bottom,o)}return e.clientX>=t-OS&&e.clientX<=r+OS&&e.clientY>=i-OS&&e.clientY<=o+OS}function FJe(n,e,t,r,i,o){let s=n.scrollDOM.getBoundingClientRect(),a=n.documentTop+n.documentPadding.top+n.contentHeight;if(s.left>r||s.right<r||s.top>i||Math.min(s.bottom,a)<i)return!1;let l=n.posAtCoords({x:r,y:i},!1);return l>=e&&l<=t}function BJe(n,e={}){let t=dn.define(),r=Qi.define({create(){return[]},update(i,o){if(i.length&&(e.hideOnChange&&(o.docChanged||o.selection)?i=[]:e.hideOn&&(i=i.filter(s=>!e.hideOn(o,s))),o.docChanged)){let s=[];for(let a of i){let l=o.changes.mapPos(a.pos,-1,Lo.TrackDel);if(l!=null){let u=Object.assign(Object.create(null),a);u.pos=l,u.end!=null&&(u.end=o.changes.mapPos(u.end)),s.push(u)}}i=s}for(let s of o.effects)s.is(t)&&(i=s.value),s.is(zJe)&&(i=[]);return i},provide:i=>xM.from(i)});return{active:r,extension:[r,ei.define(i=>new IJe(i,n,r,t,e.hoverTime||300)),kJe]}}function boe(n,e){let t=n.plugin(uF);if(!t)return null;let r=t.manager.tooltips.indexOf(e);return r<0?null:t.manager.tooltipViews[r]}const zJe=dn.define(),QW=St.define({combine(n){let e,t;for(let r of n)e=e||r.topContainer,t=t||r.bottomContainer;return{topContainer:e,bottomContainer:t}}});function T1(n,e){let t=n.plugin(woe),r=t?t.specs.indexOf(e):-1;return r>-1?t.panels[r]:null}const woe=ei.fromClass(class{constructor(n){this.input=n.state.facet(D1),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(QW);this.top=new kS(n,!0,e.topContainer),this.bottom=new kS(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(QW);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new kS(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new kS(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(D1);if(t!=this.input){let r=t.filter(l=>l),i=[],o=[],s=[],a=[];for(let l of r){let u=this.specs.indexOf(l),c;u<0?(c=l(n.view),a.push(c)):(c=this.panels[u],c.update&&c.update(n)),i.push(c),(c.top?o:s).push(c)}this.specs=r,this.panels=i,this.top.sync(o),this.bottom.sync(s);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>bt.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class kS{constructor(e,t,r){this.view=e,this.top=t,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=ej(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=ej(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function ej(n){let e=n.nextSibling;return n.remove(),e}const D1=St.define({enables:woe});class yc extends Hh{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}yc.prototype.elementClass="";yc.prototype.toDOM=void 0;yc.prototype.mapMode=Lo.TrackBefore;yc.prototype.startSide=yc.prototype.endSide=-1;yc.prototype.point=!0;const N_=St.define(),UJe=St.define(),VJe={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Pn.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},hy=St.define();function $Je(n){return[Soe(),hy.of(Object.assign(Object.assign({},VJe),n))]}const tj=St.define({combine:n=>n.some(e=>e)});function Soe(n){return[HJe]}const HJe=ei.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(hy).map(e=>new rj(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(tj),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,r=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(r<(t.to-t.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(tj)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=Pn.iter(this.view.state.facet(N_),this.view.viewport.from),r=[],i=this.gutters.map(o=>new WJe(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(o.type)){let s=!0;for(let a of o.type)if(a.type==$o.Text&&s){xO(t,r,a.from);for(let l of i)l.line(this.view,a,r);s=!1}else if(a.widget)for(let l of i)l.widget(this.view,a)}else if(o.type==$o.Text){xO(t,r,o.from);for(let s of i)s.line(this.view,o,r)}else if(o.widget)for(let s of i)s.widget(this.view,o);for(let o of i)o.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(hy),t=n.state.facet(hy),r=n.docChanged||n.heightChanged||n.viewportChanged||!Pn.eq(n.startState.facet(N_),n.state.facet(N_),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let i of this.gutters)i.update(n)&&(r=!0);else{r=!0;let i=[];for(let o of t){let s=e.indexOf(o);s<0?i.push(new rj(this.view,o)):(this.gutters[s].update(n),i.push(this.gutters[s]))}for(let o of this.gutters)o.dom.remove(),i.indexOf(o)<0&&o.destroy();for(let o of i)this.dom.appendChild(o.dom);this.gutters=i}return r}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>bt.scrollMargins.of(e=>{let t=e.plugin(n);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==yr.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function nj(n){return Array.isArray(n)?n:[n]}function xO(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class WJe{constructor(e,t,r){this.gutter=e,this.height=r,this.i=0,this.cursor=Pn.iter(e.markers,t.from)}addElement(e,t,r){let{gutter:i}=this,o=(t.top-this.height)/e.scaleY,s=t.height/e.scaleY;if(this.i==i.elements.length){let a=new _oe(e,s,o,r);i.elements.push(a),i.dom.appendChild(a.dom)}else i.elements[this.i].update(e,s,o,r);this.height=t.bottom,this.i++}line(e,t,r){let i=[];xO(this.cursor,i,t.from),r.length&&(i=i.concat(r));let o=this.gutter.config.lineMarker(e,t,i);o&&i.unshift(o);let s=this.gutter;i.length==0&&!s.config.renderEmptyElements||this.addElement(e,t,i)}widget(e,t){let r=this.gutter.config.widgetMarker(e,t.widget,t),i=r?[r]:null;for(let o of e.state.facet(UJe)){let s=o(e,t.widget,t);s&&(i||(i=[])).push(s)}i&&this.addElement(e,t,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class rj{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in t.domEventHandlers)this.dom.addEventListener(r,i=>{let o=i.target,s;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let l=o.getBoundingClientRect();s=(l.top+l.bottom)/2}else s=i.clientY;let a=e.lineBlockAtHeight(s-e.documentTop);t.domEventHandlers[r](e,a,i)&&i.preventDefault()});this.markers=nj(t.markers(e)),t.initialSpacer&&(this.spacer=new _oe(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=nj(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!Pn.eq(this.markers,t,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class _oe{constructor(e,t,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,r,i)}update(e,t,r,i){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),jJe(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let r="cm-gutterElement",i=this.dom.firstChild;for(let o=0,s=0;;){let a=s,l=o<t.length?t[o++]:null,u=!1;if(l){let c=l.elementClass;c&&(r+=" "+c);for(let f=s;f<this.markers.length;f++)if(this.markers[f].compare(l)){a=f,u=!0;break}}else a=this.markers.length;for(;s<a;){let c=this.markers[s++];if(c.toDOM){c.destroy(i);let f=i.nextSibling;i.remove(),i=f}}if(!l)break;l.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),u&&s++}this.dom.className=r,this.markers=t}destroy(){this.setMarkers(null,[])}}function jJe(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const GJe=St.define(),qJe=St.define(),Bm=St.define({combine(n){return mu(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let r=Object.assign({},e);for(let i in t){let o=r[i],s=t[i];r[i]=o?(a,l,u)=>o(a,l,u)||s(a,l,u):s}return r}})}});class uD extends yc{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function cD(n,e){return n.state.facet(Bm).formatNumber(e,n.state)}const XJe=hy.compute([Bm],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(GJe)},lineMarker(e,t,r){return r.some(i=>i.toDOM)?null:new uD(cD(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,r)=>{for(let i of e.state.facet(qJe)){let o=i(e,t,r);if(o)return o}return null},lineMarkerChange:e=>e.startState.facet(Bm)!=e.state.facet(Bm),initialSpacer(e){return new uD(cD(e,ij(e.state.doc.lines)))},updateSpacer(e,t){let r=cD(t.view,ij(t.view.state.doc.lines));return r==e.number?e:new uD(r)},domEventHandlers:n.facet(Bm).domEventHandlers}));function YJe(n={}){return[Bm.of(n),Soe(),XJe]}function ij(n){let e=9;for(;e<n;)e=e*10+9;return e}const KJe=new class extends yc{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},ZJe=N_.compute(["selection"],n=>{let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.head).from;i>t&&(t=i,e.push(KJe.range(i)))}return Pn.of(e)});function JJe(){return ZJe}const QJe=1024;let eQe=0;class fD{constructor(e,t){this.from=e,this.to=t}}class An{constructor(e={}){this.id=eQe++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=ka.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}}An.closedBy=new An({deserialize:n=>n.split(" ")});An.openedBy=new An({deserialize:n=>n.split(" ")});An.group=new An({deserialize:n=>n.split(" ")});An.isolate=new An({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});An.contextHash=new An({perNode:!0});An.lookAhead=new An({perNode:!0});An.mounted=new An({perNode:!0});class bM{constructor(e,t,r){this.tree=e,this.overlay=t,this.parser=r}static get(e){return e&&e.props&&e.props[An.mounted.id]}}const tQe=Object.create(null);class ka{constructor(e,t,r,i=0){this.name=e,this.props=t,this.id=r,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):tQe,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new ka(e.name||"",t,e.id,r);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(i)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[o[0].id]=o[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(An.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let i of r.split(" "))t[i]=e[r];return r=>{for(let i=r.prop(An.group),o=-1;o<(i?i.length:0);o++){let s=t[o<0?r.name:i[o]];if(s)return s}}}}ka.none=new ka("",Object.create(null),0,8);const IS=new WeakMap,oj=new WeakMap;var Gi;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(Gi||(Gi={}));class vo{constructor(e,t,r,i,o){if(this.type=e,this.children=t,this.positions=r,this.length=i,this.props=null,o&&o.length){this.props=Object.create(null);for(let[s,a]of o)this.props[typeof s=="number"?s:s.id]=a}}toString(){let e=bM.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let i=r.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new wO(this.topNode,e)}cursorAt(e,t=0,r=0){let i=IS.get(this)||this.topNode,o=new wO(i);return o.moveTo(e,t),IS.set(this,o._tree),o}get topNode(){return new Ma(this,0,0,null)}resolve(e,t=0){let r=N1(IS.get(this)||this.topNode,e,t,!1);return IS.set(this,r),r}resolveInner(e,t=0){let r=N1(oj.get(this)||this.topNode,e,t,!0);return oj.set(this,r),r}resolveStack(e,t=0){return iQe(this,e,t)}iterate(e){let{enter:t,leave:r,from:i=0,to:o=this.length}=e,s=e.mode||0,a=(s&Gi.IncludeAnonymous)>0;for(let l=this.cursor(s|Gi.IncludeAnonymous);;){let u=!1;if(l.from<=o&&l.to>=i&&(!a&&l.type.isAnonymous||t(l)!==!1)){if(l.firstChild())continue;u=!0}for(;u&&r&&(a||!l.type.isAnonymous)&&r(l),!l.nextSibling();){if(!l.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:hF(ka.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,i)=>new vo(this.type,t,r,i,this.propValues),e.makeTree||((t,r,i)=>new vo(ka.none,t,r,i)))}static build(e){return oQe(e)}}vo.empty=new vo(ka.none,[],[],0);class fF{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new fF(this.buffer,this.index)}}class Zf{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return ka.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],i=this.set.types[t],o=i.name;if(/\W/.test(o)&&!i.isError&&(o=JSON.stringify(o)),e+=4,r==e)return o;let s=[];for(;e<r;)s.push(this.childString(e)),e=this.buffer[e+3];return o+"("+s.join(",")+")"}findChild(e,t,r,i,o){let{buffer:s}=this,a=-1;for(let l=e;l!=t&&!(Eoe(o,i,s[l+1],s[l+2])&&(a=l,r>0));l=s[l+3]);return a}slice(e,t,r){let i=this.buffer,o=new Uint16Array(t-e),s=0;for(let a=e,l=0;a<t;){o[l++]=i[a++],o[l++]=i[a++]-r;let u=o[l++]=i[a++]-r;o[l++]=i[a++]-e,s=Math.max(s,u)}return new Zf(o,s,this.set)}}function Eoe(n,e,t,r){switch(n){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function N1(n,e,t,r){for(var i;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let s=!r&&n instanceof Ma&&n.index<0?null:n.parent;if(!s)return n;n=s}let o=r?0:Gi.IgnoreOverlays;if(r)for(let s=n,a=s.parent;a;s=a,a=s.parent)s instanceof Ma&&s.index<0&&((i=a.enter(e,t,o))===null||i===void 0?void 0:i.from)!=s.from&&(n=a);for(;;){let s=n.enter(e,t,o);if(!s)return n;n=s}}class Moe{cursor(e=0){return new wO(this,e)}getChild(e,t=null,r=null){let i=sj(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return sj(this,e,t,r)}resolve(e,t=0){return N1(this,e,t,!1)}resolveInner(e,t=0){return N1(this,e,t,!0)}matchContext(e){return bO(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),r=this;for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}get node(){return this}get next(){return this.parent}}class Ma extends Moe{constructor(e,t,r,i){super(),this._tree=e,this.from=t,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,i,o=0){for(let s=this;;){for(let{children:a,positions:l}=s._tree,u=t>0?a.length:-1;e!=u;e+=t){let c=a[e],f=l[e]+s.from;if(Eoe(i,r,f,f+c.length)){if(c instanceof Zf){if(o&Gi.ExcludeBuffers)continue;let d=c.findChild(0,c.buffer.length,t,r-f,i);if(d>-1)return new mf(new nQe(s,c,e,f),null,d)}else if(o&Gi.IncludeAnonymous||!c.type.isAnonymous||dF(c)){let d;if(!(o&Gi.IgnoreMounts)&&(d=bM.get(c))&&!d.overlay)return new Ma(d.tree,f,e,s);let h=new Ma(c,f,e,s);return o&Gi.IncludeAnonymous||!h.type.isAnonymous?h:h.nextChild(t<0?c.children.length-1:0,t,r,i)}}}if(o&Gi.IncludeAnonymous||!s.type.isAnonymous||(s.index>=0?e=s.index+t:e=t<0?-1:s._parent._tree.children.length,s=s._parent,!s))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let i;if(!(r&Gi.IgnoreOverlays)&&(i=bM.get(this._tree))&&i.overlay){let o=e-this.from;for(let{from:s,to:a}of i.overlay)if((t>0?s<=o:s<o)&&(t<0?a>=o:a>o))return new Ma(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function sj(n,e,t,r){let i=n.cursor(),o=[];if(!i.firstChild())return o;if(t!=null){for(let s=!1;!s;)if(s=i.type.is(t),!i.nextSibling())return o}for(;;){if(r!=null&&i.type.is(r))return o;if(i.type.is(e)&&o.push(i.node),!i.nextSibling())return r==null?o:[]}}function bO(n,e,t=e.length-1){for(let r=n;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}class nQe{constructor(e,t,r,i){this.parent=e,this.buffer=t,this.index=r,this.start=i}}class mf extends Moe{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){super(),this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,r);return o<0?null:new mf(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&Gi.ExcludeBuffers)return null;let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new mf(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new mf(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new mf(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,i=this.index+4,o=r.buffer[this.index+3];if(o>i){let s=r.buffer[this.index+1];e.push(r.slice(i,o,s)),t.push(0)}return new vo(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Coe(n){if(!n.length)return null;let e=0,t=n[0];for(let o=1;o<n.length;o++){let s=n[o];(s.from>t.from||s.to<t.to)&&(t=s,e=o)}let r=t instanceof Ma&&t.index<0?null:t.parent,i=n.slice();return r?i[e]=r:i.splice(e,1),new rQe(i,t)}class rQe{constructor(e,t){this.heads=e,this.node=t}get next(){return Coe(this.heads)}}function iQe(n,e,t){let r=n.resolveInner(e,t),i=null;for(let o=r instanceof Ma?r:r.context.parent;o;o=o.parent)if(o.index<0){let s=o.parent;(i||(i=[r])).push(s.resolve(e,t)),o=s}else{let s=bM.get(o.tree);if(s&&s.overlay&&s.overlay[0].from<=e&&s.overlay[s.overlay.length-1].to>=e){let a=new Ma(s.tree,s.overlay[0].from+o.from,-1,o);(i||(i=[r])).push(N1(a,e,t,!1))}}return i?Coe(i):r}class wO{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Ma)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Ma?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:i}=this.buffer,o=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,r);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&Gi.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Gi.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Gi.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(i.buffer.buffer[o+3]<this.index)return!1;({index:t,parent:r}=i)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let o=t+e,s=e<0?-1:r._tree.children.length;o!=s;o+=e){let a=r._tree.children[o];if(this.mode&Gi.IncludeAnonymous||a instanceof Zf||!a.type.isAnonymous||dF(a))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,o=this.stack.length;o>=0;){for(let s=e;s;s=s._parent)if(s.index==i){if(i==this.index)return s;t=s,r=o+1;break e}i=this.stack[--o]}for(let i=r;i<this.stack.length;i++)t=new mf(this.buffer,t,this.stack[i]);return this.bufferNode=new mf(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&t&&t(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return bO(this.node.parent,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let i=e.length-1,o=this.stack.length-1;i>=0;o--){if(o<0)return bO(this._tree,e,i);let s=r[t.buffer[this.stack[o]]];if(!s.isAnonymous){if(e[i]&&e[i]!=s.name)return!1;i--}}return!0}}function dF(n){return n.children.some(e=>e instanceof Zf||!e.type.isAnonymous||dF(e))}function oQe(n){var e;let{buffer:t,nodeSet:r,maxBufferLength:i=QJe,reused:o=[],minRepeatType:s=r.types.length}=n,a=Array.isArray(t)?new fF(t,t.length):t,l=r.types,u=0,c=0;function f(S,x,M,A,T,C){let{id:D,start:R,end:B,size:F}=a,U=c,N=u;for(;F<0;)if(a.next(),F==-1){let Z=o[D];M.push(Z),A.push(R-S);return}else if(F==-3){u=D;return}else if(F==-4){c=D;return}else throw new RangeError(`Unrecognized record size: ${F}`);let I=l[D],V,L,X=R-S;if(B-R<=i&&(L=y(a.pos-x,T))){let Z=new Uint16Array(L.size-L.skip),te=a.pos-L.size,Y=Z.length;for(;a.pos>te;)Y=p(L.start,Z,Y);V=new Zf(Z,B-L.start,r),X=L.start-S}else{let Z=a.pos-F;a.next();let te=[],Y=[],re=D>=s?D:-1,fe=0,ue=B;for(;a.pos>Z;)re>=0&&a.id==re&&a.size>=0?(a.end<=ue-i&&(m(te,Y,R,fe,a.end,ue,re,U,N),fe=te.length,ue=a.end),a.next()):C>2500?d(R,Z,te,Y):f(R,Z,te,Y,re,C+1);if(re>=0&&fe>0&&fe<te.length&&m(te,Y,R,fe,R,ue,re,U,N),te.reverse(),Y.reverse(),re>-1&&fe>0){let ge=h(I,N);V=hF(I,te,Y,0,te.length,0,B-R,ge,ge)}else V=g(I,te,Y,B-R,U-B,N)}M.push(V),A.push(X)}function d(S,x,M,A){let T=[],C=0,D=-1;for(;a.pos>x;){let{id:R,start:B,end:F,size:U}=a;if(U>4)a.next();else{if(D>-1&&B<D)break;D<0&&(D=F-i),T.push(R,B,F),C++,a.next()}}if(C){let R=new Uint16Array(C*4),B=T[T.length-2];for(let F=T.length-3,U=0;F>=0;F-=3)R[U++]=T[F],R[U++]=T[F+1]-B,R[U++]=T[F+2]-B,R[U++]=U;M.push(new Zf(R,T[2]-B,r)),A.push(B-S)}}function h(S,x){return(M,A,T)=>{let C=0,D=M.length-1,R,B;if(D>=0&&(R=M[D])instanceof vo){if(!D&&R.type==S&&R.length==T)return R;(B=R.prop(An.lookAhead))&&(C=A[D]+R.length+B)}return g(S,M,A,T,C,x)}}function m(S,x,M,A,T,C,D,R,B){let F=[],U=[];for(;S.length>A;)F.push(S.pop()),U.push(x.pop()+M-T);S.push(g(r.types[D],F,U,C-T,R-C,B)),x.push(T-M)}function g(S,x,M,A,T,C,D){if(C){let R=[An.contextHash,C];D=D?[R].concat(D):[R]}if(T>25){let R=[An.lookAhead,T];D=D?[R].concat(D):[R]}return new vo(S,x,M,A,D)}function y(S,x){let M=a.fork(),A=0,T=0,C=0,D=M.end-i,R={size:0,start:0,skip:0};e:for(let B=M.pos-S;M.pos>B;){let F=M.size;if(M.id==x&&F>=0){R.size=A,R.start=T,R.skip=C,C+=4,A+=4,M.next();continue}let U=M.pos-F;if(F<0||U<B||M.start<D)break;let N=M.id>=s?4:0,I=M.start;for(M.next();M.pos>U;){if(M.size<0)if(M.size==-3)N+=4;else break e;else M.id>=s&&(N+=4);M.next()}T=I,A+=F,C+=N}return(x<0||A==S)&&(R.size=A,R.start=T,R.skip=C),R.size>4?R:void 0}function p(S,x,M){let{id:A,start:T,end:C,size:D}=a;if(a.next(),D>=0&&A<s){let R=M;if(D>4){let B=a.pos-(D-4);for(;a.pos>B;)M=p(S,x,M)}x[--M]=R,x[--M]=C-S,x[--M]=T-S,x[--M]=A}else D==-3?u=A:D==-4&&(c=A);return M}let w=[],b=[];for(;a.pos>0;)f(n.start||0,n.bufferStart||0,w,b,-1,0);let v=(e=n.length)!==null&&e!==void 0?e:w.length?b[0]+w[0].length:0;return new vo(l[n.topID],w.reverse(),b.reverse(),v)}const aj=new WeakMap;function P_(n,e){if(!n.isAnonymous||e instanceof Zf||e.type!=n)return 1;let t=aj.get(e);if(t==null){t=1;for(let r of e.children){if(r.type!=n||!(r instanceof vo)){t=1;break}t+=P_(n,r)}aj.set(e,t)}return t}function hF(n,e,t,r,i,o,s,a,l){let u=0;for(let m=r;m<i;m++)u+=P_(n,e[m]);let c=Math.ceil(u*1.5/8),f=[],d=[];function h(m,g,y,p,w){for(let b=y;b<p;){let v=b,S=g[b],x=P_(n,m[b]);for(b++;b<p;b++){let M=P_(n,m[b]);if(x+M>=c)break;x+=M}if(b==v+1){if(x>c){let M=m[v];h(M.children,M.positions,0,M.children.length,g[v]+w);continue}f.push(m[v])}else{let M=g[b-1]+m[b-1].length-S;f.push(hF(n,m,g,v,b,S,M,null,l))}d.push(S+w-o)}}return h(e,t,r,i,0),(a||l)(f,d,s)}class Eh{constructor(e,t,r,i,o=!1,s=!1){this.from=e,this.to=t,this.tree=r,this.offset=i,this.open=(o?1:0)|(s?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],r=!1){let i=[new Eh(0,e.length,e,0,!1,r)];for(let o of t)o.to>e.length&&i.push(o);return i}static applyChanges(e,t,r=128){if(!t.length)return e;let i=[],o=1,s=e.length?e[0]:null;for(let a=0,l=0,u=0;;a++){let c=a<t.length?t[a]:null,f=c?c.fromA:1e9;if(f-l>=r)for(;s&&s.from<f;){let d=s;if(l>=d.from||f<=d.to||u){let h=Math.max(d.from,l)-u,m=Math.min(d.to,f)-u;d=h>=m?null:new Eh(h,m,d.tree,d.offset+u,a>0,!!c)}if(d&&i.push(d),s.to>f)break;s=o<e.length?e[o++]:null}if(!c)break;l=c.toA,u=c.toA-c.toB}return i}}class sQe{startParse(e,t,r){return typeof e=="string"&&(e=new aQe(e)),r=r?r.length?r.map(i=>new fD(i.from,i.to)):[new fD(0,0)]:[new fD(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let i=this.startParse(e,t,r);for(;;){let o=i.advance();if(o)return o}}}class aQe{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new An({perNode:!0});let lQe=0;class ha{constructor(e,t,r,i){this.name=e,this.set=t,this.base=r,this.modified=i,this.id=lQe++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let r=typeof e=="string"?e:"?";if(e instanceof ha&&(t=e),t!=null&&t.base)throw new Error("Can not derive from a modified tag");let i=new ha(r,[],null,[]);if(i.set.push(i),t)for(let o of t.set)i.set.push(o);return i}static defineModifier(e){let t=new wM(e);return r=>r.modified.indexOf(t)>-1?r:wM.get(r.base||r,r.modified.concat(t).sort((i,o)=>i.id-o.id))}}let uQe=0;class wM{constructor(e){this.name=e,this.instances=[],this.id=uQe++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(a=>a.base==e&&cQe(t,a.modified));if(r)return r;let i=[],o=new ha(e.name,i,e,t);for(let a of t)a.instances.push(o);let s=fQe(t);for(let a of e.set)if(!a.modified.length)for(let l of s)i.push(wM.get(a,l));return o}}function cQe(n,e){return n.length==e.length&&n.every((t,r)=>t==e[r])}function fQe(n){let e=[[]];for(let t=0;t<n.length;t++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(n[t]));return e.sort((t,r)=>r.length-t.length)}function dQe(n){let e=Object.create(null);for(let t in n){let r=n[t];Array.isArray(r)||(r=[r]);for(let i of t.split(" "))if(i){let o=[],s=2,a=i;for(let f=0;;){if(a=="..."&&f>0&&f+3==i.length){s=1;break}let d=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!d)throw new RangeError("Invalid path: "+i);if(o.push(d[0]=="*"?"":d[0][0]=='"'?JSON.parse(d[0]):d[0]),f+=d[0].length,f==i.length)break;let h=i[f++];if(f==i.length&&h=="!"){s=0;break}if(h!="/")throw new RangeError("Invalid path: "+i);a=i.slice(f)}let l=o.length-1,u=o[l];if(!u)throw new RangeError("Invalid path: "+i);let c=new SM(r,s,l>0?o.slice(0,l):null);e[u]=c.sort(e[u])}}return Aoe.add(e)}const Aoe=new An;class SM{constructor(e,t,r,i){this.tags=e,this.mode=t,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}SM.empty=new SM([],2,null);function Toe(n,e){let t=Object.create(null);for(let o of n)if(!Array.isArray(o.tag))t[o.tag.id]=o.class;else for(let s of o.tag)t[s.id]=o.class;let{scope:r,all:i=null}=e||{};return{style:o=>{let s=i;for(let a of o)for(let l of a.set){let u=t[l.id];if(u){s=s?s+" "+u:u;break}}return s},scope:r}}function hQe(n,e){let t=null;for(let r of n){let i=r.style(e);i&&(t=t?t+" "+i:i)}return t}function pQe(n,e,t,r=0,i=n.length){let o=new mQe(r,Array.isArray(e)?e:[e],t);o.highlightRange(n.cursor(),r,i,"",o.highlighters),o.flush(i)}class mQe{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,i,o){let{type:s,from:a,to:l}=e;if(a>=r||l<=t)return;s.isTop&&(o=this.highlighters.filter(h=>!h.scope||h.scope(s)));let u=i,c=gQe(e)||SM.empty,f=hQe(o,c.tags);if(f&&(u&&(u+=" "),u+=f,c.mode==1&&(i+=(i?" ":"")+f)),this.startSpan(Math.max(t,a),u),c.opaque)return;let d=e.tree&&e.tree.prop(An.mounted);if(d&&d.overlay){let h=e.node.enter(d.overlay[0].from+a,1),m=this.highlighters.filter(y=>!y.scope||y.scope(d.tree.type)),g=e.firstChild();for(let y=0,p=a;;y++){let w=y<d.overlay.length?d.overlay[y]:null,b=w?w.from+a:l,v=Math.max(t,p),S=Math.min(r,b);if(v<S&&g)for(;e.from<S&&(this.highlightRange(e,v,S,i,o),this.startSpan(Math.min(S,e.to),u),!(e.to>=b||!e.nextSibling())););if(!w||b>r)break;p=w.to+a,p>t&&(this.highlightRange(h.cursor(),Math.max(t,w.from+a),Math.min(r,p),"",m),this.startSpan(Math.min(r,p),u))}g&&e.parent()}else if(e.firstChild()){d&&(i="");do if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,i,o),this.startSpan(Math.min(r,e.to),u)}while(e.nextSibling());e.parent()}}}function gQe(n){let e=n.type.prop(Aoe);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const mt=ha.define,LS=mt(),Kc=mt(),lj=mt(Kc),uj=mt(Kc),Zc=mt(),FS=mt(Zc),dD=mt(Zc),Rl=mt(),Id=mt(Rl),Nl=mt(),Pl=mt(),SO=mt(),_0=mt(SO),BS=mt(),tt={comment:LS,lineComment:mt(LS),blockComment:mt(LS),docComment:mt(LS),name:Kc,variableName:mt(Kc),typeName:lj,tagName:mt(lj),propertyName:uj,attributeName:mt(uj),className:mt(Kc),labelName:mt(Kc),namespace:mt(Kc),macroName:mt(Kc),literal:Zc,string:FS,docString:mt(FS),character:mt(FS),attributeValue:mt(FS),number:dD,integer:mt(dD),float:mt(dD),bool:mt(Zc),regexp:mt(Zc),escape:mt(Zc),color:mt(Zc),url:mt(Zc),keyword:Nl,self:mt(Nl),null:mt(Nl),atom:mt(Nl),unit:mt(Nl),modifier:mt(Nl),operatorKeyword:mt(Nl),controlKeyword:mt(Nl),definitionKeyword:mt(Nl),moduleKeyword:mt(Nl),operator:Pl,derefOperator:mt(Pl),arithmeticOperator:mt(Pl),logicOperator:mt(Pl),bitwiseOperator:mt(Pl),compareOperator:mt(Pl),updateOperator:mt(Pl),definitionOperator:mt(Pl),typeOperator:mt(Pl),controlOperator:mt(Pl),punctuation:SO,separator:mt(SO),bracket:_0,angleBracket:mt(_0),squareBracket:mt(_0),paren:mt(_0),brace:mt(_0),content:Rl,heading:Id,heading1:mt(Id),heading2:mt(Id),heading3:mt(Id),heading4:mt(Id),heading5:mt(Id),heading6:mt(Id),contentSeparator:mt(Rl),list:mt(Rl),quote:mt(Rl),emphasis:mt(Rl),strong:mt(Rl),link:mt(Rl),monospace:mt(Rl),strikethrough:mt(Rl),inserted:mt(),deleted:mt(),changed:mt(),invalid:mt(),meta:BS,documentMeta:mt(BS),annotation:mt(BS),processingInstruction:mt(BS),definition:ha.defineModifier("definition"),constant:ha.defineModifier("constant"),function:ha.defineModifier("function"),standard:ha.defineModifier("standard"),local:ha.defineModifier("local"),special:ha.defineModifier("special")};for(let n in tt){let e=tt[n];e instanceof ha&&(e.name=n)}Toe([{tag:tt.link,class:"tok-link"},{tag:tt.heading,class:"tok-heading"},{tag:tt.emphasis,class:"tok-emphasis"},{tag:tt.strong,class:"tok-strong"},{tag:tt.keyword,class:"tok-keyword"},{tag:tt.atom,class:"tok-atom"},{tag:tt.bool,class:"tok-bool"},{tag:tt.url,class:"tok-url"},{tag:tt.labelName,class:"tok-labelName"},{tag:tt.inserted,class:"tok-inserted"},{tag:tt.deleted,class:"tok-deleted"},{tag:tt.literal,class:"tok-literal"},{tag:tt.string,class:"tok-string"},{tag:tt.number,class:"tok-number"},{tag:[tt.regexp,tt.escape,tt.special(tt.string)],class:"tok-string2"},{tag:tt.variableName,class:"tok-variableName"},{tag:tt.local(tt.variableName),class:"tok-variableName tok-local"},{tag:tt.definition(tt.variableName),class:"tok-variableName tok-definition"},{tag:tt.special(tt.variableName),class:"tok-variableName2"},{tag:tt.definition(tt.propertyName),class:"tok-propertyName tok-definition"},{tag:tt.typeName,class:"tok-typeName"},{tag:tt.namespace,class:"tok-namespace"},{tag:tt.className,class:"tok-className"},{tag:tt.macroName,class:"tok-macroName"},{tag:tt.propertyName,class:"tok-propertyName"},{tag:tt.operator,class:"tok-operator"},{tag:tt.comment,class:"tok-comment"},{tag:tt.meta,class:"tok-meta"},{tag:tt.invalid,class:"tok-invalid"},{tag:tt.punctuation,class:"tok-punctuation"}]);var hD;const H0=new An,vQe=new An;class Wl{constructor(e,t,r=[],i=""){this.data=e,this.name=i,Mn.prototype.hasOwnProperty("tree")||Object.defineProperty(Mn.prototype,"tree",{get(){return So(this)}}),this.parser=t,this.extension=[Jf.of(this),Mn.languageData.of((o,s,a)=>{let l=cj(o,s,a),u=l.type.prop(H0);if(!u)return[];let c=o.facet(u),f=l.type.prop(vQe);if(f){let d=l.resolve(s-l.from,a);for(let h of f)if(h.test(d,o)){let m=o.facet(h.facet);return h.type=="replace"?m:m.concat(c)}}return c})].concat(r)}isActiveAt(e,t,r=-1){return cj(e,t,r).type.prop(H0)==this.data}findRegions(e){let t=e.facet(Jf);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],i=(o,s)=>{if(o.prop(H0)==this.data){r.push({from:s,to:s+o.length});return}let a=o.prop(An.mounted);if(a){if(a.tree.prop(H0)==this.data){if(a.overlay)for(let l of a.overlay)r.push({from:l.from+s,to:l.to+s});else r.push({from:s,to:s+o.length});return}else if(a.overlay){let l=r.length;if(i(a.tree,a.overlay[0].from+s),r.length>l)return}}for(let l=0;l<o.children.length;l++){let u=o.children[l];u instanceof vo&&i(u,o.positions[l]+s)}};return i(So(e),0),r}get allowsNesting(){return!0}}Wl.setState=dn.define();function cj(n,e,t){let r=n.facet(Jf),i=So(n).topNode;if(!r||r.allowsNesting)for(let o=i;o;o=o.enter(e,t,Gi.ExcludeBuffers))o.type.isTop&&(i=o);return i}function So(n){let e=n.field(Wl.state,!1);return e?e.tree:vo.empty}class yQe{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}}let E0=null;class _M{constructor(e,t,r=[],i,o,s,a,l){this.parser=e,this.state=t,this.fragments=r,this.tree=i,this.treeLen=o,this.viewport=s,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new _M(e,t,[],vo.empty,0,r,[],null)}startParse(){return this.parser.startParse(new yQe(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=vo.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Eh.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Eh.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=E0;E0=this;try{return e()}finally{E0=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=fj(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:i,treeLen:o,viewport:s,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((u,c,f,d)=>l.push({fromA:u,toA:c,fromB:f,toB:d})),r=Eh.applyChanges(r,l),i=vo.empty,o=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){a=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),f=e.mapPos(u.to,-1);c<f&&a.push({from:c,to:f})}}}return new _M(this.parser,t,r,i,o,s,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:o}=this.skipped[r];i<e.to&&o>e.from&&(this.fragments=fj(this.fragments,i,o),this.skipped.splice(r--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends sQe{createParse(t,r,i){let o=i[0].from,s=i[i.length-1].to;return{parsedPos:o,advance(){let l=E0;if(l){for(let u of i)l.tempSkipped.push(u);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=s,new vo(ka.none,[],[],s-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return E0}}function fj(n,e,t){return Eh.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class Bg{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new Bg(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=_M.create(e.facet(Jf).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new Bg(r)}}Wl.state=Qi.define({create:Bg.init,update(n,e){for(let t of e.effects)if(t.is(Wl.setState))return t.value;return e.startState.facet(Jf)!=e.state.facet(Jf)?Bg.init(e.state):n.apply(e)}});let Doe=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Doe=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const pD=typeof navigator<"u"&&(!((hD=navigator.scheduling)===null||hD===void 0)&&hD.isInputPending)?()=>navigator.scheduling.isInputPending():null,xQe=ei.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Wl.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Wl.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=Doe(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,o=r.field(Wl.state);if(o.tree==o.context.tree&&o.context.isDone(i+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!pD?Math.max(25,e.timeRemaining()-5):1e9),a=o.context.treeLen<i&&r.doc.length>i+1e3,l=o.context.work(()=>pD&&pD()||Date.now()>s,i+(a?0:1e5));this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:Wl.setState.of(new Bg(o.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>ds(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Jf=St.define({combine(n){return n.length?n[0]:null},enables:n=>[Wl.state,xQe,bt.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]}),bQe=St.define(),SC=St.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function EM(n){let e=n.facet(SC);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function P1(n,e){let t="",r=n.tabSize,i=n.facet(SC)[0];if(i=="	"){for(;e>=r;)t+="	",e-=r;i=" "}for(let o=0;o<e;o++)t+=i;return t}function pF(n,e){n instanceof Mn&&(n=new _C(n));for(let r of n.state.facet(bQe)){let i=r(n,e);if(i!==void 0)return i}let t=So(n.state);return t.length>=e?SQe(n,t,e):null}class _C{constructor(e,t={}){this.state=e,this.options=t,this.unit=EM(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:o}=this.options;return i!=null&&i>=r.from&&i<=r.to?o&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,t);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,t=1){let{text:r,from:i}=this.lineAt(e,t),o=this.countColumn(r,e-i),s=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return s>-1&&(o+=s-this.countColumn(r,r.search(/\S|$/))),o}countColumn(e,t=e.length){return yv(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:i}=this.lineAt(e,t),o=this.options.overrideIndentation;if(o){let s=o(i);if(s>-1)return s}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const wQe=new An;function SQe(n,e,t){let r=e.resolveStack(t),i=r.node.enterUnfinishedNodesBefore(t);if(i!=r.node){let o=[];for(let s=i;s!=r.node;s=s.parent)o.push(s);for(let s=o.length-1;s>=0;s--)r={node:o[s],next:r}}return Noe(r,n,t)}function Noe(n,e,t){for(let r=n;r;r=r.next){let i=EQe(r.node);if(i)return i(mF.create(e,t,r))}return 0}function _Qe(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function EQe(n){let e=n.type.prop(wQe);if(e)return e;let t=n.firstChild,r;if(t&&(r=t.type.prop(An.closedBy))){let i=n.lastChild,o=i&&r.indexOf(i.name)>-1;return s=>TQe(s,!0,1,void 0,o&&!_Qe(s)?i.from:void 0)}return n.parent==null?MQe:null}function MQe(){return 0}class mF extends _C{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.context=r}get node(){return this.context.node}static create(e,t,r){return new mF(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(t.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(CQe(r,e))break;t=this.state.doc.lineAt(r.from)}return this.lineIndent(t.from)}continue(){return Noe(this.context.next,this.base,this.pos)}}function CQe(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function AQe(n){let e=n.node,t=e.childAfter(e.from),r=e.lastChild;if(!t)return null;let i=n.options.simulateBreak,o=n.state.doc.lineAt(t.from),s=i==null||i<=o.from?o.to:Math.min(o.to,i);for(let a=t.to;;){let l=e.childAfter(a);if(!l||l==r)return null;if(!l.type.isSkipped){if(l.from>=s)return null;let u=/^ */.exec(o.text.slice(t.to-o.from))[0].length;return{from:t.from,to:t.to+u}}a=l.to}}function TQe(n,e,t,r,i){let o=n.textAfter,s=o.match(/^\s*/)[0].length,a=r&&o.slice(s,s+r.length)==r||i==n.pos+s,l=AQe(n);return l?a?n.column(l.from):n.column(l.to):n.baseIndent+(a?0:n.unit*t)}const DQe=200;function NQe(){return Mn.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:r}=n.newSelection.main,i=t.lineAt(r);if(r>i.from+DQe)return n;let o=t.sliceString(i.from,r);if(!e.some(u=>u.test(o)))return n;let{state:s}=n,a=-1,l=[];for(let{head:u}of s.selection.ranges){let c=s.doc.lineAt(u);if(c.from==a)continue;a=c.from;let f=pF(s,c.from);if(f==null)continue;let d=/^\s*/.exec(c.text)[0],h=P1(s,f);d!=h&&l.push({from:c.from,to:c.from+d.length,insert:h})}return l.length?[n,{changes:l,sequential:!0}]:n})}const PQe=St.define(),RQe=new An;function OQe(n,e,t){let r=So(n);if(r.length<t)return null;let i=r.resolveStack(t,1),o=null;for(let s=i;s;s=s.next){let a=s.node;if(a.to<=t||a.from>t)continue;if(o&&a.from<e)break;let l=a.type.prop(RQe);if(l&&(a.to<r.length-50||r.length==n.doc.length||!kQe(a))){let u=l(a,n);u&&u.from<=t&&u.from>=e&&u.to>t&&(o=u)}}return o}function kQe(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function MM(n,e,t){for(let r of n.facet(PQe)){let i=r(n,e,t);if(i)return i}return OQe(n,e,t)}function Poe(n,e){let t=e.mapPos(n.from,1),r=e.mapPos(n.to,-1);return t>=r?void 0:{from:t,to:r}}const EC=dn.define({map:Poe}),Ax=dn.define({map:Poe});function Roe(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(r=>r.from<=t&&r.to>=t)||e.push(n.lineBlockAt(t));return e}const qh=Qi.define({create(){return Ut.none},update(n,e){n=n.map(e.changes);for(let t of e.effects)if(t.is(EC)&&!IQe(n,t.value.from,t.value.to)){let{preparePlaceholder:r}=e.state.facet(Ioe),i=r?Ut.replace({widget:new $Qe(r(e.state,t.value))}):dj;n=n.update({add:[i.range(t.value.from,t.value.to)]})}else t.is(Ax)&&(n=n.update({filter:(r,i)=>t.value.from!=r||t.value.to!=i,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:r}=e.selection.main;n.between(r,r,(i,o)=>{i<r&&o>r&&(t=!0)}),t&&(n=n.update({filterFrom:r,filterTo:r,filter:(i,o)=>o<=r||i>=r}))}return n},provide:n=>bt.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(r,i)=>{t.push(r,i)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let r=n[t++],i=n[t++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(dj.range(r,i))}return Ut.set(e,!0)}});function CM(n,e,t){var r;let i=null;return(r=n.field(qh,!1))===null||r===void 0||r.between(e,t,(o,s)=>{(!i||i.from>o)&&(i={from:o,to:s})}),i}function IQe(n,e,t){let r=!1;return n.between(e,e,(i,o)=>{i==e&&o==t&&(r=!0)}),r}function Ooe(n,e){return n.field(qh,!1)?e:e.concat(dn.appendConfig.of(Loe()))}const LQe=n=>{for(let e of Roe(n)){let t=MM(n.state,e.from,e.to);if(t)return n.dispatch({effects:Ooe(n.state,[EC.of(t),koe(n,t)])}),!0}return!1},FQe=n=>{if(!n.state.field(qh,!1))return!1;let e=[];for(let t of Roe(n)){let r=CM(n.state,t.from,t.to);r&&e.push(Ax.of(r),koe(n,r,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function koe(n,e,t=!0){let r=n.state.doc.lineAt(e.from).number,i=n.state.doc.lineAt(e.to).number;return bt.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${r} ${n.state.phrase("to")} ${i}.`)}const BQe=n=>{let{state:e}=n,t=[];for(let r=0;r<e.doc.length;){let i=n.lineBlockAt(r),o=MM(e,i.from,i.to);o&&t.push(EC.of(o)),r=(o?n.lineBlockAt(o.to):i).to+1}return t.length&&n.dispatch({effects:Ooe(n.state,t)}),!!t.length},zQe=n=>{let e=n.state.field(qh,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(r,i)=>{t.push(Ax.of({from:r,to:i}))}),n.dispatch({effects:t}),!0},UQe=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:LQe},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:FQe},{key:"Ctrl-Alt-[",run:BQe},{key:"Ctrl-Alt-]",run:zQe}],VQe={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},Ioe=St.define({combine(n){return mu(n,VQe)}});function Loe(n){return[qh,jQe]}function Foe(n,e){let{state:t}=n,r=t.facet(Ioe),i=s=>{let a=n.lineBlockAt(n.posAtDOM(s.target)),l=CM(n.state,a.from,a.to);l&&n.dispatch({effects:Ax.of(l)}),s.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(n,i,e);let o=document.createElement("span");return o.textContent=r.placeholderText,o.setAttribute("aria-label",t.phrase("folded code")),o.title=t.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=i,o}const dj=Ut.replace({widget:new class extends Sc{toDOM(n){return Foe(n,null)}}});class $Qe extends Sc{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Foe(e,this.value)}}const HQe={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class mD extends yc{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function WQe(n={}){let e=Object.assign(Object.assign({},HQe),n),t=new mD(e,!0),r=new mD(e,!1),i=ei.fromClass(class{constructor(s){this.from=s.viewport.from,this.markers=this.buildMarkers(s)}update(s){(s.docChanged||s.viewportChanged||s.startState.facet(Jf)!=s.state.facet(Jf)||s.startState.field(qh,!1)!=s.state.field(qh,!1)||So(s.startState)!=So(s.state)||e.foldingChanged(s))&&(this.markers=this.buildMarkers(s.view))}buildMarkers(s){let a=new qf;for(let l of s.viewportLineBlocks){let u=CM(s.state,l.from,l.to)?r:MM(s.state,l.from,l.to)?t:null;u&&a.add(l.from,l.from,u)}return a.finish()}}),{domEventHandlers:o}=e;return[i,$Je({class:"cm-foldGutter",markers(s){var a;return((a=s.plugin(i))===null||a===void 0?void 0:a.markers)||Pn.empty},initialSpacer(){return new mD(e,!1)},domEventHandlers:Object.assign(Object.assign({},o),{click:(s,a,l)=>{if(o.click&&o.click(s,a,l))return!0;let u=CM(s.state,a.from,a.to);if(u)return s.dispatch({effects:Ax.of(u)}),!0;let c=MM(s.state,a.from,a.to);return c?(s.dispatch({effects:EC.of(c)}),!0):!1}})}),Loe()]}const jQe=bt.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Tx{constructor(e,t){this.specs=e;let r;function i(a){let l=Xf.newName();return(r||(r=Object.create(null)))["."+l]=a,l}const o=typeof t.all=="string"?t.all:t.all?i(t.all):void 0,s=t.scope;this.scope=s instanceof Wl?a=>a.prop(H0)==s.data:s?a=>a==s:void 0,this.style=Toe(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:o}).style,this.module=r?new Xf(r):null,this.themeType=t.themeType}static define(e,t){return new Tx(e,t||{})}}const _O=St.define(),Boe=St.define({combine(n){return n.length?[n[0]]:null}});function gD(n){let e=n.facet(_O);return e.length?e:n.facet(Boe)}function zoe(n,e){let t=[qQe],r;return n instanceof Tx&&(n.module&&t.push(bt.styleModule.of(n.module)),r=n.themeType),e!=null&&e.fallback?t.push(Boe.of(n)):r?t.push(_O.computeN([bt.darkTheme],i=>i.facet(bt.darkTheme)==(r=="dark")?[n]:[])):t.push(_O.of(n)),t}class GQe{constructor(e){this.markCache=Object.create(null),this.tree=So(e.state),this.decorations=this.buildDeco(e,gD(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=So(e.state),r=gD(e.state),i=r!=gD(e.startState),{viewport:o}=e.view,s=e.changes.mapPos(this.decoratedTo,1);t.length<o.to&&!i&&t.type==this.tree.type&&s>=o.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=s):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=o.to)}buildDeco(e,t){if(!t||!this.tree.length)return Ut.none;let r=new qf;for(let{from:i,to:o}of e.visibleRanges)pQe(this.tree,t,(s,a,l)=>{r.add(s,a,this.markCache[l]||(this.markCache[l]=Ut.mark({class:l})))},i,o);return r.finish()}}const qQe=up.high(ei.fromClass(GQe,{decorations:n=>n.decorations})),XQe=Tx.define([{tag:tt.meta,color:"#404740"},{tag:tt.link,textDecoration:"underline"},{tag:tt.heading,textDecoration:"underline",fontWeight:"bold"},{tag:tt.emphasis,fontStyle:"italic"},{tag:tt.strong,fontWeight:"bold"},{tag:tt.strikethrough,textDecoration:"line-through"},{tag:tt.keyword,color:"#708"},{tag:[tt.atom,tt.bool,tt.url,tt.contentSeparator,tt.labelName],color:"#219"},{tag:[tt.literal,tt.inserted],color:"#164"},{tag:[tt.string,tt.deleted],color:"#a11"},{tag:[tt.regexp,tt.escape,tt.special(tt.string)],color:"#e40"},{tag:tt.definition(tt.variableName),color:"#00f"},{tag:tt.local(tt.variableName),color:"#30a"},{tag:[tt.typeName,tt.namespace],color:"#085"},{tag:tt.className,color:"#167"},{tag:[tt.special(tt.variableName),tt.macroName],color:"#256"},{tag:tt.definition(tt.propertyName),color:"#00c"},{tag:tt.comment,color:"#940"},{tag:tt.invalid,color:"#f00"}]),YQe=bt.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Uoe=1e4,Voe="()[]{}",$oe=St.define({combine(n){return mu(n,{afterCursor:!0,brackets:Voe,maxScanDistance:Uoe,renderMatch:JQe})}}),KQe=Ut.mark({class:"cm-matchingBracket"}),ZQe=Ut.mark({class:"cm-nonmatchingBracket"});function JQe(n){let e=[],t=n.matched?KQe:ZQe;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const QQe=Qi.define({create(){return Ut.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],r=e.state.facet($oe);for(let i of e.state.selection.ranges){if(!i.empty)continue;let o=jl(e.state,i.head,-1,r)||i.head>0&&jl(e.state,i.head-1,1,r)||r.afterCursor&&(jl(e.state,i.head,1,r)||i.head<e.state.doc.length&&jl(e.state,i.head+1,-1,r));o&&(t=t.concat(r.renderMatch(o,e.state)))}return Ut.set(t,!0)},provide:n=>bt.decorations.from(n)}),eet=[QQe,YQe];function tet(n={}){return[$oe.of(n),eet]}const net=new An;function EO(n,e,t){let r=n.prop(e<0?An.openedBy:An.closedBy);if(r)return r;if(n.name.length==1){let i=t.indexOf(n.name);if(i>-1&&i%2==(e<0?1:0))return[t[i+e]]}return null}function MO(n){let e=n.type.prop(net);return e?e(n.node):n}function jl(n,e,t,r={}){let i=r.maxScanDistance||Uoe,o=r.brackets||Voe,s=So(n),a=s.resolveInner(e,t);for(let l=a;l;l=l.parent){let u=EO(l.type,t,o);if(u&&l.from<l.to){let c=MO(l);if(c&&(t>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return ret(n,e,t,l,c,u,o)}}return iet(n,e,t,s,a.type,i,o)}function ret(n,e,t,r,i,o,s){let a=r.parent,l={from:i.from,to:i.to},u=0,c=a==null?void 0:a.cursor();if(c&&(t<0?c.childBefore(r.from):c.childAfter(r.to)))do if(t<0?c.to<=r.from:c.from>=r.to){if(u==0&&o.indexOf(c.type.name)>-1&&c.from<c.to){let f=MO(c);return{start:l,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(EO(c.type,t,s))u++;else if(EO(c.type,-t,s)){if(u==0){let f=MO(c);return{start:l,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}u--}}while(t<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function iet(n,e,t,r,i,o,s){let a=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),l=s.indexOf(a);if(l<0||l%2==0!=t>0)return null;let u={from:t<0?e-1:e,to:t>0?e+1:e},c=n.doc.iterRange(e,t>0?n.doc.length:0),f=0;for(let d=0;!c.next().done&&d<=o;){let h=c.value;t<0&&(d+=h.length);let m=e+d*t;for(let g=t>0?0:h.length-1,y=t>0?h.length:-1;g!=y;g+=t){let p=s.indexOf(h[g]);if(!(p<0||r.resolveInner(m+g,1).type!=i))if(p%2==0==t>0)f++;else{if(f==1)return{start:u,end:{from:m+g,to:m+g+1},matched:p>>1==l>>1};f--}}t>0&&(d+=h.length)}return c.done?{start:u,matched:!1}:null}const oet=Object.create(null),hj=[ka.none],pj=[],mj=Object.create(null),set=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])set[n]=aet(oet,e);function vD(n,e){pj.indexOf(n)>-1||(pj.push(n),console.warn(e))}function aet(n,e){let t=[];for(let a of e.split(" ")){let l=[];for(let u of a.split(".")){let c=n[u]||tt[u];c?typeof c=="function"?l.length?l=l.map(c):vD(u,`Modifier ${u} used at start of tag`):l.length?vD(u,`Tag ${u} used as modifier`):l=Array.isArray(c)?c:[c]:vD(u,`Unknown highlighting tag ${u}`)}for(let u of l)t.push(u)}if(!t.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+t.map(a=>a.id),o=mj[i];if(o)return o.id;let s=mj[i]=ka.define({id:hj.length,name:r,props:[dQe({[r]:t})]});return hj.push(s),s.id}yr.RTL,yr.LTR;const uet=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),r=vF(n.state,t.from);return r.line?cet(n):r.block?det(n):!1};function gF(n,e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let i=n(e,t);return i?(r(t.update(i)),!0):!1}}const cet=gF(met,0),fet=gF(Hoe,0),det=gF((n,e)=>Hoe(n,e,pet(e)),0);function vF(n,e){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const M0=50;function het(n,{open:e,close:t},r,i){let o=n.sliceDoc(r-M0,r),s=n.sliceDoc(i,i+M0),a=/\s*$/.exec(o)[0].length,l=/^\s*/.exec(s)[0].length,u=o.length-a;if(o.slice(u-e.length,u)==e&&s.slice(l,l+t.length)==t)return{open:{pos:r-a,margin:a&&1},close:{pos:i+l,margin:l&&1}};let c,f;i-r<=2*M0?c=f=n.sliceDoc(r,i):(c=n.sliceDoc(r,r+M0),f=n.sliceDoc(i-M0,i));let d=/^\s*/.exec(c)[0].length,h=/\s*$/.exec(f)[0].length,m=f.length-h-t.length;return c.slice(d,d+e.length)==e&&f.slice(m,m+t.length)==t?{open:{pos:r+d+e.length,margin:/\s/.test(c.charAt(d+e.length))?1:0},close:{pos:i-h-t.length,margin:/\s/.test(f.charAt(m-1))?1:0}}:null}function pet(n){let e=[];for(let t of n.selection.ranges){let r=n.doc.lineAt(t.from),i=t.to<=r.to?r:n.doc.lineAt(t.to);i.from>r.from&&i.from==t.to&&(i=t.to==r.to+1?r:n.doc.lineAt(t.to-1));let o=e.length-1;o>=0&&e[o].to>r.from?e[o].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function Hoe(n,e,t=e.selection.ranges){let r=t.map(o=>vF(e,o.from).block);if(!r.every(o=>o))return null;let i=t.map((o,s)=>het(e,r[s],o.from,o.to));if(n!=2&&!i.every(o=>o))return{changes:e.changes(t.map((o,s)=>i[s]?[]:[{from:o.from,insert:r[s].open+" "},{from:o.to,insert:" "+r[s].close}]))};if(n!=1&&i.some(o=>o)){let o=[];for(let s=0,a;s<i.length;s++)if(a=i[s]){let l=r[s],{open:u,close:c}=a;o.push({from:u.pos-l.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+l.close.length})}return{changes:o}}return null}function met(n,e,t=e.selection.ranges){let r=[],i=-1;for(let{from:o,to:s}of t){let a=r.length,l=1e9,u=vF(e,o).line;if(u){for(let c=o;c<=s;){let f=e.doc.lineAt(c);if(f.from>i&&(o==s||s>f.from)){i=f.from;let d=/^\s*/.exec(f.text)[0].length,h=d==f.length,m=f.text.slice(d,d+u.length)==u?d:-1;d<f.text.length&&d<l&&(l=d),r.push({line:f,comment:m,token:u,indent:d,empty:h,single:!1})}c=f.to+1}if(l<1e9)for(let c=a;c<r.length;c++)r[c].indent<r[c].line.text.length&&(r[c].indent=l);r.length==a+1&&(r[a].single=!0)}}if(n!=2&&r.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:a,token:l,indent:u,empty:c,single:f}of r)(f||!c)&&o.push({from:a.from+u,insert:l+" "});let s=e.changes(o);return{changes:s,selection:e.selection.map(s,1)}}else if(n!=1&&r.some(o=>o.comment>=0)){let o=[];for(let{line:s,comment:a,token:l}of r)if(a>=0){let u=s.from+a,c=u+l.length;s.text[c-s.from]==" "&&c++,o.push({from:u,to:c})}return{changes:o}}return null}const CO=pu.define(),get=pu.define(),vet=St.define(),Woe=St.define({combine(n){return mu(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(r,i)=>e(r,i)||t(r,i)})}}),joe=Qi.define({create(){return Gl.empty},update(n,e){let t=e.state.facet(Woe),r=e.annotation(CO);if(r){let l=hs.fromTransaction(e,r.selection),u=r.side,c=u==0?n.undone:n.done;return l?c=AM(c,c.length,t.minDepth,l):c=Xoe(c,e.startState.selection),new Gl(u==0?r.rest:c,u==0?c:r.rest)}let i=e.annotation(get);if((i=="full"||i=="before")&&(n=n.isolate()),e.annotation(xi.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let o=hs.fromTransaction(e),s=e.annotation(xi.time),a=e.annotation(xi.userEvent);return o?n=n.addChanges(o,s,a,t,e):e.selection&&(n=n.addSelection(e.startState.selection,s,a,t.newGroupDelay)),(i=="full"||i=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new Gl(n.done.map(hs.fromJSON),n.undone.map(hs.fromJSON))}});function yet(n={}){return[joe,Woe.of(n),bt.domEventHandlers({beforeinput(e,t){let r=e.inputType=="historyUndo"?Goe:e.inputType=="historyRedo"?AO:null;return r?(e.preventDefault(),r(t)):!1}})]}function MC(n,e){return function({state:t,dispatch:r}){if(!e&&t.readOnly)return!1;let i=t.field(joe,!1);if(!i)return!1;let o=i.pop(n,t,e);return o?(r(o),!0):!1}}const Goe=MC(0,!1),AO=MC(1,!1),xet=MC(0,!0),bet=MC(1,!0);class hs{constructor(e,t,r,i,o){this.changes=e,this.effects=t,this.mapped=r,this.startSelection=i,this.selectionsAfter=o}setSelAfter(e){return new hs(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new hs(e.changes&&gi.fromJSON(e.changes),[],e.mapped&&eu.fromJSON(e.mapped),e.startSelection&&ot.fromJSON(e.startSelection),e.selectionsAfter.map(ot.fromJSON))}static fromTransaction(e,t){let r=ba;for(let i of e.startState.facet(vet)){let o=i(e);o.length&&(r=r.concat(o))}return!r.length&&e.changes.empty?null:new hs(e.changes.invert(e.startState.doc),r,void 0,t||e.startState.selection,ba)}static selection(e){return new hs(void 0,ba,void 0,void 0,e)}}function AM(n,e,t,r){let i=e+1>t+20?e-t-1:0,o=n.slice(i,e);return o.push(r),o}function wet(n,e){let t=[],r=!1;return n.iterChangedRanges((i,o)=>t.push(i,o)),e.iterChangedRanges((i,o,s,a)=>{for(let l=0;l<t.length;){let u=t[l++],c=t[l++];a>=u&&s<=c&&(r=!0)}}),r}function _et(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,r)=>t.empty!=e.ranges[r].empty).length===0}function qoe(n,e){return n.length?e.length?n.concat(e):n:e}const ba=[],Eet=200;function Xoe(n,e){if(n.length){let t=n[n.length-1],r=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-Eet));return r.length&&r[r.length-1].eq(e)?n:(r.push(e),AM(n,n.length-1,1e9,t.setSelAfter(r)))}else return[hs.selection([e])]}function Met(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function yD(n,e){if(!n.length)return n;let t=n.length,r=ba;for(;t;){let i=Cet(n[t-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let o=n.slice(0,t);return o[t-1]=i,o}else e=i.mapped,t--,r=i.selectionsAfter}return r.length?[hs.selection(r)]:ba}function Cet(n,e,t){let r=qoe(n.selectionsAfter.length?n.selectionsAfter.map(a=>a.map(e)):ba,t);if(!n.changes)return hs.selection(r);let i=n.changes.map(e),o=e.mapDesc(n.changes,!0),s=n.mapped?n.mapped.composeDesc(o):o;return new hs(i,dn.mapEffects(n.effects,e),s,n.startSelection.map(o),r)}const Aet=/^(input\.type|delete)($|\.)/;class Gl{constructor(e,t,r=0,i=void 0){this.done=e,this.undone=t,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new Gl(this.done,this.undone):this}addChanges(e,t,r,i,o){let s=this.done,a=s[s.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!r||Aet.test(r))&&(!a.selectionsAfter.length&&t-this.prevTime<i.newGroupDelay&&i.joinToEvent(o,wet(a.changes,e.changes))||r=="input.type.compose")?s=AM(s,s.length-1,i.minDepth,new hs(e.changes.compose(a.changes),qoe(dn.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,ba)):s=AM(s,s.length,i.minDepth,e),new Gl(s,ba,t,r)}addSelection(e,t,r,i){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:ba;return o.length>0&&t-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&_et(o[o.length-1],e)?this:new Gl(Xoe(this.done,e),this.undone,t,r)}addMapping(e){return new Gl(yD(this.done,e),yD(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let o=i[i.length-1],s=o.selectionsAfter[0]||t.selection;if(r&&o.selectionsAfter.length)return t.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:CO.of({side:e,rest:Met(i),selection:s}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let a=i.length==1?ba:i.slice(0,i.length-1);return o.mapped&&(a=yD(a,o.mapped)),t.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:CO.of({side:e,rest:a,selection:s}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Gl.empty=new Gl(ba,ba);const Tet=[{key:"Mod-z",run:Goe,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:AO,preventDefault:!0},{linux:"Ctrl-Shift-z",run:AO,preventDefault:!0},{key:"Mod-u",run:xet,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:bet,preventDefault:!0}];function xv(n,e){return ot.create(n.ranges.map(e),n.mainIndex)}function gu(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function gl({state:n,dispatch:e},t){let r=xv(n.selection,t);return r.eq(n.selection,!0)?!1:(e(gu(n,r)),!0)}function CC(n,e){return ot.cursor(e?n.to:n.from)}function Yoe(n,e){return gl(n,t=>t.empty?n.moveByChar(t,e):CC(t,e))}function Co(n){return n.textDirectionAt(n.state.selection.main.head)==yr.LTR}const Koe=n=>Yoe(n,!Co(n)),Zoe=n=>Yoe(n,Co(n));function Joe(n,e){return gl(n,t=>t.empty?n.moveByGroup(t,e):CC(t,e))}const Det=n=>Joe(n,!Co(n)),Net=n=>Joe(n,Co(n));function Pet(n,e,t){if(e.type.prop(t))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function AC(n,e,t){let r=So(n).resolveInner(e.head),i=t?An.closedBy:An.openedBy;for(let l=e.head;;){let u=t?r.childAfter(l):r.childBefore(l);if(!u)break;Pet(n,u,i)?r=u:l=t?u.to:u.from}let o=r.type.prop(i),s,a;return o&&(s=t?jl(n,r.from,1):jl(n,r.to,-1))&&s.matched?a=t?s.end.to:s.end.from:a=t?r.to:r.from,ot.cursor(a,t?-1:1)}const Ret=n=>gl(n,e=>AC(n.state,e,!Co(n))),Oet=n=>gl(n,e=>AC(n.state,e,Co(n)));function Qoe(n,e){return gl(n,t=>{if(!t.empty)return CC(t,e);let r=n.moveVertically(t,e);return r.head!=t.head?r:n.moveToLineBoundary(t,e)})}const ese=n=>Qoe(n,!1),tse=n=>Qoe(n,!0);function nse(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,r=0,i;if(e){for(let o of n.state.facet(bt.scrollMargins)){let s=o(n);s!=null&&s.top&&(t=Math.max(s==null?void 0:s.top,t)),s!=null&&s.bottom&&(r=Math.max(s==null?void 0:s.bottom,r))}i=n.scrollDOM.clientHeight-t-r}else i=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:r,selfScroll:e,height:Math.max(n.defaultLineHeight,i-5)}}function rse(n,e){let t=nse(n),{state:r}=n,i=xv(r.selection,s=>s.empty?n.moveVertically(s,e,t.height):CC(s,e));if(i.eq(r.selection))return!1;let o;if(t.selfScroll){let s=n.coordsAtPos(r.selection.main.head),a=n.scrollDOM.getBoundingClientRect(),l=a.top+t.marginTop,u=a.bottom-t.marginBottom;s&&s.top>l&&s.bottom<u&&(o=bt.scrollIntoView(i.main.head,{y:"start",yMargin:s.top-l}))}return n.dispatch(gu(r,i),{effects:o}),!0}const gj=n=>rse(n,!1),TO=n=>rse(n,!0);function hd(n,e,t){let r=n.lineBlockAt(e.head),i=n.moveToLineBoundary(e,t);if(i.head==e.head&&i.head!=(t?r.to:r.from)&&(i=n.moveToLineBoundary(e,t,!1)),!t&&i.head==r.from&&r.length){let o=/^\s*/.exec(n.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;o&&e.head!=r.from+o&&(i=ot.cursor(r.from+o))}return i}const ket=n=>gl(n,e=>hd(n,e,!0)),Iet=n=>gl(n,e=>hd(n,e,!1)),Let=n=>gl(n,e=>hd(n,e,!Co(n))),Fet=n=>gl(n,e=>hd(n,e,Co(n))),Bet=n=>gl(n,e=>ot.cursor(n.lineBlockAt(e.head).from,1)),zet=n=>gl(n,e=>ot.cursor(n.lineBlockAt(e.head).to,-1));function Uet(n,e,t){let r=!1,i=xv(n.selection,o=>{let s=jl(n,o.head,-1)||jl(n,o.head,1)||o.head>0&&jl(n,o.head-1,1)||o.head<n.doc.length&&jl(n,o.head+1,-1);if(!s||!s.end)return o;r=!0;let a=s.start.from==o.head?s.end.to:s.end.from;return ot.cursor(a)});return r?(e(gu(n,i)),!0):!1}const Vet=({state:n,dispatch:e})=>Uet(n,e);function Fa(n,e){let t=xv(n.state.selection,r=>{let i=e(r);return ot.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(gu(n.state,t)),!0)}function ise(n,e){return Fa(n,t=>n.moveByChar(t,e))}const ose=n=>ise(n,!Co(n)),sse=n=>ise(n,Co(n));function ase(n,e){return Fa(n,t=>n.moveByGroup(t,e))}const $et=n=>ase(n,!Co(n)),Het=n=>ase(n,Co(n)),Wet=n=>Fa(n,e=>AC(n.state,e,!Co(n))),jet=n=>Fa(n,e=>AC(n.state,e,Co(n)));function lse(n,e){return Fa(n,t=>n.moveVertically(t,e))}const use=n=>lse(n,!1),cse=n=>lse(n,!0);function fse(n,e){return Fa(n,t=>n.moveVertically(t,e,nse(n).height))}const vj=n=>fse(n,!1),yj=n=>fse(n,!0),Get=n=>Fa(n,e=>hd(n,e,!0)),qet=n=>Fa(n,e=>hd(n,e,!1)),Xet=n=>Fa(n,e=>hd(n,e,!Co(n))),Yet=n=>Fa(n,e=>hd(n,e,Co(n))),Ket=n=>Fa(n,e=>ot.cursor(n.lineBlockAt(e.head).from)),Zet=n=>Fa(n,e=>ot.cursor(n.lineBlockAt(e.head).to)),xj=({state:n,dispatch:e})=>(e(gu(n,{anchor:0})),!0),bj=({state:n,dispatch:e})=>(e(gu(n,{anchor:n.doc.length})),!0),wj=({state:n,dispatch:e})=>(e(gu(n,{anchor:n.selection.main.anchor,head:0})),!0),Sj=({state:n,dispatch:e})=>(e(gu(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),Jet=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),Qet=({state:n,dispatch:e})=>{let t=TC(n).map(({from:r,to:i})=>ot.range(r,Math.min(i+1,n.doc.length)));return e(n.update({selection:ot.create(t),userEvent:"select"})),!0},ett=({state:n,dispatch:e})=>{let t=xv(n.selection,r=>{let i=So(n),o=i.resolveStack(r.from,1);if(r.empty){let s=i.resolveStack(r.from,-1);s.node.from>=o.node.from&&s.node.to<=o.node.to&&(o=s)}for(let s=o;s;s=s.next){let{node:a}=s;if((a.from<r.from&&a.to>=r.to||a.to>r.to&&a.from<=r.from)&&s.next)return ot.range(a.to,a.from)}return r});return t.eq(n.selection)?!1:(e(gu(n,t)),!0)},ttt=({state:n,dispatch:e})=>{let t=n.selection,r=null;return t.ranges.length>1?r=ot.create([t.main]):t.main.empty||(r=ot.create([ot.cursor(t.main.head)])),r?(e(gu(n,r)),!0):!1};function Dx(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:r}=n,i=r.changeByRange(o=>{let{from:s,to:a}=o;if(s==a){let l=e(o);l<s?(t="delete.backward",l=zS(n,l,!1)):l>s&&(t="delete.forward",l=zS(n,l,!0)),s=Math.min(s,l),a=Math.max(a,l)}else s=zS(n,s,!1),a=zS(n,a,!0);return s==a?{range:o}:{changes:{from:s,to:a},range:ot.cursor(s,s<o.head?-1:1)}});return i.changes.empty?!1:(n.dispatch(r.update(i,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?bt.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function zS(n,e,t){if(n instanceof bt)for(let r of n.state.facet(bt.atomicRanges).map(i=>i(n)))r.between(e,e,(i,o)=>{i<e&&o>e&&(e=t?o:i)});return e}const dse=(n,e,t)=>Dx(n,r=>{let i=r.from,{state:o}=n,s=o.doc.lineAt(i),a,l;if(t&&!e&&i>s.from&&i<s.from+200&&!/[^ \t]/.test(a=s.text.slice(0,i-s.from))){if(a[a.length-1]=="	")return i-1;let u=yv(a,o.tabSize),c=u%EM(o)||EM(o);for(let f=0;f<c&&a[a.length-1-f]==" ";f++)i--;l=i}else l=Xi(s.text,i-s.from,e,e)+s.from,l==i&&s.number!=(e?o.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(s.text.slice(l-s.from,i-s.from))&&(l=Xi(s.text,l-s.from,!1,!1)+s.from);return l}),DO=n=>dse(n,!1,!0),hse=n=>dse(n,!0,!1),pse=(n,e)=>Dx(n,t=>{let r=t.head,{state:i}=n,o=i.doc.lineAt(r),s=i.charCategorizer(r);for(let a=null;;){if(r==(e?o.to:o.from)){r==t.head&&o.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let l=Xi(o.text,r-o.from,e)+o.from,u=o.text.slice(Math.min(r,l)-o.from,Math.max(r,l)-o.from),c=s(u);if(a!=null&&c!=a)break;(u!=" "||r!=t.head)&&(a=c),r=l}return r}),mse=n=>pse(n,!1),ntt=n=>pse(n,!0),rtt=n=>Dx(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),itt=n=>Dx(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),ott=n=>Dx(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),stt=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Bn.of(["",""])},range:ot.cursor(r.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},att=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>{if(!r.empty||r.from==0||r.from==n.doc.length)return{range:r};let i=r.from,o=n.doc.lineAt(i),s=i==o.from?i-1:Xi(o.text,i-o.from,!1)+o.from,a=i==o.to?i+1:Xi(o.text,i-o.from,!0)+o.from;return{changes:{from:s,to:a,insert:n.doc.slice(i,a).append(n.doc.slice(s,i))},range:ot.cursor(a)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function TC(n){let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.from),o=n.doc.lineAt(r.to);if(!r.empty&&r.to==o.from&&(o=n.doc.lineAt(r.to-1)),t>=i.number){let s=e[e.length-1];s.to=o.to,s.ranges.push(r)}else e.push({from:i.from,to:o.to,ranges:[r]});t=o.number+1}return e}function gse(n,e,t){if(n.readOnly)return!1;let r=[],i=[];for(let o of TC(n)){if(t?o.to==n.doc.length:o.from==0)continue;let s=n.doc.lineAt(t?o.to+1:o.from-1),a=s.length+1;if(t){r.push({from:o.to,to:s.to},{from:o.from,insert:s.text+n.lineBreak});for(let l of o.ranges)i.push(ot.range(Math.min(n.doc.length,l.anchor+a),Math.min(n.doc.length,l.head+a)))}else{r.push({from:s.from,to:o.from},{from:o.to,insert:n.lineBreak+s.text});for(let l of o.ranges)i.push(ot.range(l.anchor-a,l.head-a))}}return r.length?(e(n.update({changes:r,scrollIntoView:!0,selection:ot.create(i,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const ltt=({state:n,dispatch:e})=>gse(n,e,!1),utt=({state:n,dispatch:e})=>gse(n,e,!0);function vse(n,e,t){if(n.readOnly)return!1;let r=[];for(let i of TC(n))t?r.push({from:i.from,insert:n.doc.slice(i.from,i.to)+n.lineBreak}):r.push({from:i.to,insert:n.lineBreak+n.doc.slice(i.from,i.to)});return e(n.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const ctt=({state:n,dispatch:e})=>vse(n,e,!1),ftt=({state:n,dispatch:e})=>vse(n,e,!0),dtt=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(TC(e).map(({from:i,to:o})=>(i>0?i--:o<e.doc.length&&o++,{from:i,to:o}))),r=xv(e.selection,i=>{let o;if(n.lineWrapping){let s=n.lineBlockAt(i.head),a=n.coordsAtPos(i.head,i.assoc||1);a&&(o=s.bottom+n.documentTop-a.bottom+n.defaultLineHeight/2)}return n.moveVertically(i,!0,o)}).map(t);return n.dispatch({changes:t,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function htt(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=So(n).resolveInner(e),r=t.childBefore(e),i=t.childAfter(e),o;return r&&i&&r.to<=e&&i.from>=e&&(o=r.type.prop(An.closedBy))&&o.indexOf(i.name)>-1&&n.doc.lineAt(r.to).from==n.doc.lineAt(i.from).from&&!/\S/.test(n.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const _j=yse(!1),ptt=yse(!0);function yse(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:o,to:s}=i,a=e.doc.lineAt(o),l=!n&&o==s&&htt(e,o);n&&(o=s=(s<=a.to?a:e.doc.lineAt(s)).to);let u=new _C(e,{simulateBreak:o,simulateDoubleBreak:!!l}),c=pF(u,o);for(c==null&&(c=yv(/^\s*/.exec(e.doc.lineAt(o).text)[0],e.tabSize));s<a.to&&/\s/.test(a.text[s-a.from]);)s++;l?{from:o,to:s}=l:o>a.from&&o<a.from+100&&!/\S/.test(a.text.slice(0,o))&&(o=a.from);let f=["",P1(e,c)];return l&&f.push(P1(e,u.lineIndent(a.from,-1))),{changes:{from:o,to:s,insert:Bn.of(f)},range:ot.cursor(o+1+f[1].length)}});return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function yF(n,e){let t=-1;return n.changeByRange(r=>{let i=[];for(let s=r.from;s<=r.to;){let a=n.doc.lineAt(s);a.number>t&&(r.empty||r.to>a.from)&&(e(a,i,r),t=a.number),s=a.to+1}let o=n.changes(i);return{changes:i,range:ot.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}})}const mtt=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),r=new _C(n,{overrideIndentation:o=>{let s=t[o];return s??-1}}),i=yF(n,(o,s,a)=>{let l=pF(r,o.from);if(l==null)return;/\S/.test(o.text)||(l=0);let u=/^\s*/.exec(o.text)[0],c=P1(n,l);(u!=c||a.from<o.from+u.length)&&(t[o.from]=l,s.push({from:o.from,to:o.from+u.length,insert:c}))});return i.changes.empty||e(n.update(i,{userEvent:"indent"})),!0},xse=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(yF(n,(t,r)=>{r.push({from:t.from,insert:n.facet(SC)})}),{userEvent:"input.indent"})),!0),bse=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(yF(n,(t,r)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let o=yv(i,n.tabSize),s=0,a=P1(n,Math.max(0,o-EM(n)));for(;s<i.length&&s<a.length&&i.charCodeAt(s)==a.charCodeAt(s);)s++;r.push({from:t.from+s,to:t.from+i.length,insert:a.slice(s)})}),{userEvent:"delete.dedent"})),!0),gtt=n=>(n.setTabFocusMode(),!0),vtt=[{key:"Ctrl-b",run:Koe,shift:ose,preventDefault:!0},{key:"Ctrl-f",run:Zoe,shift:sse},{key:"Ctrl-p",run:ese,shift:use},{key:"Ctrl-n",run:tse,shift:cse},{key:"Ctrl-a",run:Bet,shift:Ket},{key:"Ctrl-e",run:zet,shift:Zet},{key:"Ctrl-d",run:hse},{key:"Ctrl-h",run:DO},{key:"Ctrl-k",run:rtt},{key:"Ctrl-Alt-h",run:mse},{key:"Ctrl-o",run:stt},{key:"Ctrl-t",run:att},{key:"Ctrl-v",run:TO}],ytt=[{key:"ArrowLeft",run:Koe,shift:ose,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Det,shift:$et,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Let,shift:Xet,preventDefault:!0},{key:"ArrowRight",run:Zoe,shift:sse,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Net,shift:Het,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Fet,shift:Yet,preventDefault:!0},{key:"ArrowUp",run:ese,shift:use,preventDefault:!0},{mac:"Cmd-ArrowUp",run:xj,shift:wj},{mac:"Ctrl-ArrowUp",run:gj,shift:vj},{key:"ArrowDown",run:tse,shift:cse,preventDefault:!0},{mac:"Cmd-ArrowDown",run:bj,shift:Sj},{mac:"Ctrl-ArrowDown",run:TO,shift:yj},{key:"PageUp",run:gj,shift:vj},{key:"PageDown",run:TO,shift:yj},{key:"Home",run:Iet,shift:qet,preventDefault:!0},{key:"Mod-Home",run:xj,shift:wj},{key:"End",run:ket,shift:Get,preventDefault:!0},{key:"Mod-End",run:bj,shift:Sj},{key:"Enter",run:_j,shift:_j},{key:"Mod-a",run:Jet},{key:"Backspace",run:DO,shift:DO},{key:"Delete",run:hse},{key:"Mod-Backspace",mac:"Alt-Backspace",run:mse},{key:"Mod-Delete",mac:"Alt-Delete",run:ntt},{mac:"Mod-Backspace",run:itt},{mac:"Mod-Delete",run:ott}].concat(vtt.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),wse=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Ret,shift:Wet},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Oet,shift:jet},{key:"Alt-ArrowUp",run:ltt},{key:"Shift-Alt-ArrowUp",run:ctt},{key:"Alt-ArrowDown",run:utt},{key:"Shift-Alt-ArrowDown",run:ftt},{key:"Escape",run:ttt},{key:"Mod-Enter",run:ptt},{key:"Alt-l",mac:"Ctrl-l",run:Qet},{key:"Mod-i",run:ett,preventDefault:!0},{key:"Mod-[",run:bse},{key:"Mod-]",run:xse},{key:"Mod-Alt-\\",run:mtt},{key:"Shift-Mod-k",run:dtt},{key:"Shift-Mod-\\",run:Vet},{key:"Mod-/",run:uet},{key:"Alt-A",run:fet},{key:"Ctrl-m",mac:"Shift-Alt-m",run:gtt}].concat(ytt),xtt={key:"Tab",run:xse,shift:bse};function cr(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=t[r];typeof i=="string"?n.setAttribute(r,i):i!=null&&(n[r]=i)}e++}for(;e<arguments.length;e++)Sse(n,arguments[e]);return n}function Sse(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)Sse(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}const Ej=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class zg{constructor(e,t,r=0,i=e.length,o,s){this.test=s,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=o?a=>o(Ej(a)):Ej,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Wi(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=YL(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=ga(e);let i=this.normalize(t);if(i.length)for(let o=0,s=r;;o++){let a=i.charCodeAt(o),l=this.match(a,s,this.bufferPos+this.bufferStart);if(o==i.length-1){if(l)return this.value=l,this;break}s==r&&o<t.length&&t.charCodeAt(o)==a&&s++}}}match(e,t,r){let i=null;for(let o=0;o<this.matches.length;o+=2){let s=this.matches[o],a=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?i={from:this.matches[o+1],to:r}:(this.matches[o]++,a=!0)),a||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:t,to:r}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(zg.prototype[Symbol.iterator]=function(){return this});const _se={from:-1,to:-1,match:/.*/.exec("")},xF="gm"+(/x/.unicode==null?"":"u");class Ese{constructor(e,t,r,i=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=_se,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new Mse(e,t,r,i,o);this.re=new RegExp(t,xF+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let s=e.lineAt(i);this.curLineStart=s.from,this.matchPos=TM(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let r=this.curLineStart+t.index,i=r+t[0].length;if(this.matchPos=TM(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,t)))return this.value={from:r,to:i,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const xD=new WeakMap;class og{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,r){let i=xD.get(e);if(!i||i.from>=r||i.to<=t){let a=new og(t,e.sliceString(t,r));return xD.set(e,a),a}if(i.from==t&&i.to==r)return i;let{text:o,from:s}=i;return s>t&&(o=e.sliceString(t,s)+o,s=t),i.to<r&&(o+=e.sliceString(i.to,r)),xD.set(e,new og(s,o)),new og(t,o.slice(t-s,r-s))}}class Mse{constructor(e,t,r,i,o){this.text=e,this.to=o,this.done=!1,this.value=_se,this.matchPos=TM(e,i),this.re=new RegExp(t,xF+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=og.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let r=this.flat.from+t.index,i=r+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,t)))return this.value={from:r,to:i,match:t},this.matchPos=TM(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=og.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Ese.prototype[Symbol.iterator]=Mse.prototype[Symbol.iterator]=function(){return this});function btt(n){try{return new RegExp(n,xF),!0}catch{return!1}}function TM(n,e){if(e>=n.length)return e;let t=n.lineAt(e),r;for(;e<t.to&&(r=t.text.charCodeAt(e-t.from))>=56320&&r<57344;)e++;return e}function NO(n){let e=String(n.state.doc.lineAt(n.state.selection.main.head).number),t=cr("input",{class:"cm-textfield",name:"line",value:e}),r=cr("form",{class:"cm-gotoLine",onkeydown:o=>{o.keyCode==27?(o.preventDefault(),n.dispatch({effects:DM.of(!1)}),n.focus()):o.keyCode==13&&(o.preventDefault(),i())},onsubmit:o=>{o.preventDefault(),i()}},cr("label",n.state.phrase("Go to line"),": ",t)," ",cr("button",{class:"cm-button",type:"submit"},n.state.phrase("go")));function i(){let o=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!o)return;let{state:s}=n,a=s.doc.lineAt(s.selection.main.head),[,l,u,c,f]=o,d=c?+c.slice(1):0,h=u?+u:a.number;if(u&&f){let y=h/100;l&&(y=y*(l=="-"?-1:1)+a.number/s.doc.lines),h=Math.round(s.doc.lines*y)}else u&&l&&(h=h*(l=="-"?-1:1)+a.number);let m=s.doc.line(Math.max(1,Math.min(s.doc.lines,h))),g=ot.cursor(m.from+Math.max(0,Math.min(d,m.length)));n.dispatch({effects:[DM.of(!1),bt.scrollIntoView(g.from,{y:"center"})],selection:g}),n.focus()}return{dom:r}}const DM=dn.define(),Mj=Qi.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(DM)&&(n=t.value);return n},provide:n=>D1.from(n,e=>e?NO:null)}),wtt=n=>{let e=T1(n,NO);if(!e){let t=[DM.of(!0)];n.state.field(Mj,!1)==null&&t.push(dn.appendConfig.of([Mj,Stt])),n.dispatch({effects:t}),e=T1(n,NO)}return e&&e.dom.querySelector("input").select(),!0},Stt=bt.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),_tt={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Ett=St.define({combine(n){return mu(n,_tt,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function Mtt(n){return[Ntt,Dtt]}const Ctt=Ut.mark({class:"cm-selectionMatch"}),Att=Ut.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Cj(n,e,t,r){return(t==0||n(e.sliceDoc(t-1,t))!=Er.Word)&&(r==e.doc.length||n(e.sliceDoc(r,r+1))!=Er.Word)}function Ttt(n,e,t,r){return n(e.sliceDoc(t,t+1))==Er.Word&&n(e.sliceDoc(r-1,r))==Er.Word}const Dtt=ei.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(Ett),{state:t}=n,r=t.selection;if(r.ranges.length>1)return Ut.none;let i=r.main,o,s=null;if(i.empty){if(!e.highlightWordAroundCursor)return Ut.none;let l=t.wordAt(i.head);if(!l)return Ut.none;s=t.charCategorizer(i.head),o=t.sliceDoc(l.from,l.to)}else{let l=i.to-i.from;if(l<e.minSelectionLength||l>200)return Ut.none;if(e.wholeWords){if(o=t.sliceDoc(i.from,i.to),s=t.charCategorizer(i.head),!(Cj(s,t,i.from,i.to)&&Ttt(s,t,i.from,i.to)))return Ut.none}else if(o=t.sliceDoc(i.from,i.to),!o)return Ut.none}let a=[];for(let l of n.visibleRanges){let u=new zg(t.doc,o,l.from,l.to);for(;!u.next().done;){let{from:c,to:f}=u.value;if((!s||Cj(s,t,c,f))&&(i.empty&&c<=i.from&&f>=i.to?a.push(Att.range(c,f)):(c>=i.to||f<=i.from)&&a.push(Ctt.range(c,f)),a.length>e.maxMatches))return Ut.none}}return Ut.set(a)}},{decorations:n=>n.decorations}),Ntt=bt.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),Ptt=({state:n,dispatch:e})=>{let{selection:t}=n,r=ot.create(t.ranges.map(i=>n.wordAt(i.head)||ot.cursor(i.head)),t.mainIndex);return r.eq(t)?!1:(e(n.update({selection:r})),!0)};function Rtt(n,e){let{main:t,ranges:r}=n.selection,i=n.wordAt(t.head),o=i&&i.from==t.from&&i.to==t.to;for(let s=!1,a=new zg(n.doc,e,r[r.length-1].to);;)if(a.next(),a.done){if(s)return null;a=new zg(n.doc,e,0,Math.max(0,r[r.length-1].from-1)),s=!0}else{if(s&&r.some(l=>l.from==a.value.from))continue;if(o){let l=n.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const Ott=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(o=>o.from===o.to))return Ptt({state:n,dispatch:e});let r=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(o=>n.sliceDoc(o.from,o.to)!=r))return!1;let i=Rtt(n,r);return i?(e(n.update({selection:n.selection.addRange(ot.range(i.from,i.to),!1),effects:bt.scrollIntoView(i.to)})),!0):!1},bv=St.define({combine(n){return mu(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new jtt(e),scrollToMatch:e=>bt.scrollIntoView(e)})}});class Cse{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||btt(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Ftt(this):new Itt(this)}getCursor(e,t=0,r){let i=e.doc?e:Mn.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?pm(this,i,t,r):hm(this,i,t,r)}}class Ase{constructor(e){this.spec=e}}function hm(n,e,t,r){return new zg(e.doc,n.unquoted,t,r,n.caseSensitive?void 0:i=>i.toLowerCase(),n.wholeWord?ktt(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function ktt(n,e){return(t,r,i,o)=>((o>t||o+i.length<r)&&(o=Math.max(0,t-2),i=n.sliceString(o,Math.min(n.length,r+2))),(e(NM(i,t-o))!=Er.Word||e(PM(i,t-o))!=Er.Word)&&(e(PM(i,r-o))!=Er.Word||e(NM(i,r-o))!=Er.Word))}class Itt extends Ase{constructor(e){super(e)}nextMatch(e,t,r){let i=hm(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let o=Math.min(e.doc.length,t+this.spec.unquoted.length);i=hm(this.spec,e,0,o).nextOverlapping()}return i.done||i.value.from==t&&i.value.to==r?null:i.value}prevMatchInRange(e,t,r){for(let i=r;;){let o=Math.max(t,i-1e4-this.spec.unquoted.length),s=hm(this.spec,e,o,i),a=null;for(;!s.nextOverlapping().done;)a=s.value;if(a)return a;if(o==t)return null;i-=1e4}}prevMatch(e,t,r){let i=this.prevMatchInRange(e,0,t);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=t||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let r=hm(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let o=hm(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)i(o.value.from,o.value.to)}}function pm(n,e,t,r){return new Ese(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?Ltt(e.charCategorizer(e.selection.main.head)):void 0},t,r)}function NM(n,e){return n.slice(Xi(n,e,!1),e)}function PM(n,e){return n.slice(e,Xi(n,e))}function Ltt(n){return(e,t,r)=>!r[0].length||(n(NM(r.input,r.index))!=Er.Word||n(PM(r.input,r.index))!=Er.Word)&&(n(PM(r.input,r.index+r[0].length))!=Er.Word||n(NM(r.input,r.index+r[0].length))!=Er.Word)}class Ftt extends Ase{nextMatch(e,t,r){let i=pm(this.spec,e,r,e.doc.length).next();return i.done&&(i=pm(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,r){for(let i=1;;i++){let o=Math.max(t,r-i*1e4),s=pm(this.spec,e,o,r),a=null;for(;!s.next().done;)a=s.value;if(a&&(o==t||a.from>o+10))return a;if(o==t)return null}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(t,r)=>r=="$"?"$":r=="&"?e.match[0]:r!="0"&&+r<e.match.length?e.match[r]:t)}matchAll(e,t){let r=pm(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let o=pm(this.spec,e,Math.max(0,t-250),Math.min(r+250,e.doc.length));for(;!o.next().done;)i(o.value.from,o.value.to)}}const R1=dn.define(),bF=dn.define(),Rf=Qi.define({create(n){return new bD(PO(n).create(),null)},update(n,e){for(let t of e.effects)t.is(R1)?n=new bD(t.value.create(),n.panel):t.is(bF)&&(n=new bD(n.query,t.value?wF:null));return n},provide:n=>D1.from(n,e=>e.panel)});class bD{constructor(e,t){this.query=e,this.panel=t}}const Btt=Ut.mark({class:"cm-searchMatch"}),ztt=Ut.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Utt=ei.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(Rf))}update(n){let e=n.state.field(Rf);(e!=n.startState.field(Rf)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return Ut.none;let{view:t}=this,r=new qf;for(let i=0,o=t.visibleRanges,s=o.length;i<s;i++){let{from:a,to:l}=o[i];for(;i<s-1&&l>o[i+1].from-2*250;)l=o[++i].to;n.highlight(t.state,a,l,(u,c)=>{let f=t.state.selection.ranges.some(d=>d.from==u&&d.to==c);r.add(u,c,f?ztt:Btt)})}return r.finish()}},{decorations:n=>n.decorations});function Nx(n){return e=>{let t=e.state.field(Rf,!1);return t&&t.query.spec.valid?n(e,t):Nse(e)}}const RM=Nx((n,{query:e})=>{let{to:t}=n.state.selection.main,r=e.nextMatch(n.state,t,t);if(!r)return!1;let i=ot.single(r.from,r.to),o=n.state.facet(bv);return n.dispatch({selection:i,effects:[SF(n,r),o.scrollToMatch(i.main,n)],userEvent:"select.search"}),Dse(n),!0}),OM=Nx((n,{query:e})=>{let{state:t}=n,{from:r}=t.selection.main,i=e.prevMatch(t,r,r);if(!i)return!1;let o=ot.single(i.from,i.to),s=n.state.facet(bv);return n.dispatch({selection:o,effects:[SF(n,i),s.scrollToMatch(o.main,n)],userEvent:"select.search"}),Dse(n),!0}),Vtt=Nx((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:ot.create(t.map(r=>ot.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),$tt=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:r,to:i}=t.main,o=[],s=0;for(let a=new zg(n.doc,n.sliceDoc(r,i));!a.next().done;){if(o.length>1e3)return!1;a.value.from==r&&(s=o.length),o.push(ot.range(a.value.from,a.value.to))}return e(n.update({selection:ot.create(o,s),userEvent:"select.search.matches"})),!0},Aj=Nx((n,{query:e})=>{let{state:t}=n,{from:r,to:i}=t.selection.main;if(t.readOnly)return!1;let o=e.nextMatch(t,r,r);if(!o)return!1;let s=[],a,l,u=[];if(o.from==r&&o.to==i&&(l=t.toText(e.getReplacement(o)),s.push({from:o.from,to:o.to,insert:l}),o=e.nextMatch(t,o.from,o.to),u.push(bt.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(r).number)+"."))),o){let c=s.length==0||s[0].from>=o.to?0:o.to-o.from-l.length;a=ot.single(o.from-c,o.to-c),u.push(SF(n,o)),u.push(t.facet(bv).scrollToMatch(a.main,n))}return n.dispatch({changes:s,selection:a,effects:u,userEvent:"input.replace"}),!0}),Htt=Nx((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(i=>{let{from:o,to:s}=i;return{from:o,to:s,insert:e.getReplacement(i)}});if(!t.length)return!1;let r=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:bt.announce.of(r),userEvent:"input.replace.all"}),!0});function wF(n){return n.state.facet(bv).createPanel(n)}function PO(n,e){var t,r,i,o,s;let a=n.selection.main,l=a.empty||a.to>a.from+100?"":n.sliceDoc(a.from,a.to);if(e&&!l)return e;let u=n.facet(bv);return new Cse({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:u.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:u.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:u.literal,regexp:(o=e==null?void 0:e.regexp)!==null&&o!==void 0?o:u.regexp,wholeWord:(s=e==null?void 0:e.wholeWord)!==null&&s!==void 0?s:u.wholeWord})}function Tse(n){let e=T1(n,wF);return e&&e.dom.querySelector("[main-field]")}function Dse(n){let e=Tse(n);e&&e==n.root.activeElement&&e.select()}const Nse=n=>{let e=n.state.field(Rf,!1);if(e&&e.panel){let t=Tse(n);if(t&&t!=n.root.activeElement){let r=PO(n.state,e.query.spec);r.valid&&n.dispatch({effects:R1.of(r)}),t.focus(),t.select()}}else n.dispatch({effects:[bF.of(!0),e?R1.of(PO(n.state,e.query.spec)):dn.appendConfig.of(qtt)]});return!0},Pse=n=>{let e=n.state.field(Rf,!1);if(!e||!e.panel)return!1;let t=T1(n,wF);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:bF.of(!1)}),!0},Wtt=[{key:"Mod-f",run:Nse,scope:"editor search-panel"},{key:"F3",run:RM,shift:OM,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:RM,shift:OM,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Pse,scope:"editor search-panel"},{key:"Mod-Shift-l",run:$tt},{key:"Mod-Alt-g",run:wtt},{key:"Mod-d",run:Ott,preventDefault:!0}];class jtt{constructor(e){this.view=e;let t=this.query=e.state.field(Rf).query.spec;this.commit=this.commit.bind(this),this.searchField=cr("input",{value:t.search,placeholder:Ts(e,"Find"),"aria-label":Ts(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=cr("input",{value:t.replace,placeholder:Ts(e,"Replace"),"aria-label":Ts(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=cr("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=cr("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=cr("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function r(i,o,s){return cr("button",{class:"cm-button",name:i,onclick:o,type:"button"},s)}this.dom=cr("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>RM(e),[Ts(e,"next")]),r("prev",()=>OM(e),[Ts(e,"previous")]),r("select",()=>Vtt(e),[Ts(e,"all")]),cr("label",null,[this.caseField,Ts(e,"match case")]),cr("label",null,[this.reField,Ts(e,"regexp")]),cr("label",null,[this.wordField,Ts(e,"by word")]),...e.state.readOnly?[]:[cr("br"),this.replaceField,r("replace",()=>Aj(e),[Ts(e,"replace")]),r("replaceAll",()=>Htt(e),[Ts(e,"replace all")])],cr("button",{name:"close",onclick:()=>Pse(e),"aria-label":Ts(e,"close"),type:"button"},[""])])}commit(){let e=new Cse({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:R1.of(e)}))}keydown(e){KZe(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?OM:RM)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Aj(this.view))}update(e){for(let t of e.transactions)for(let r of t.effects)r.is(R1)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(bv).top}}function Ts(n,e){return n.state.phrase(e)}const US=30,VS=/[\s\.,:;?!]/;function SF(n,{from:e,to:t}){let r=n.state.doc.lineAt(e),i=n.state.doc.lineAt(t).to,o=Math.max(r.from,e-US),s=Math.min(i,t+US),a=n.state.sliceDoc(o,s);if(o!=r.from){for(let l=0;l<US;l++)if(!VS.test(a[l+1])&&VS.test(a[l])){a=a.slice(l);break}}if(s!=i){for(let l=a.length-1;l>a.length-US;l--)if(!VS.test(a[l-1])&&VS.test(a[l])){a=a.slice(0,l);break}}return bt.announce.of(`${n.state.phrase("current match")}. ${a} ${n.state.phrase("on line")} ${r.number}.`)}const Gtt=bt.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),qtt=[Rf,up.low(Utt),Gtt];class Rse{constructor(e,t,r,i){this.state=e,this.pos=t,this.explicit=r,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=So(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),r=Math.max(t.from,this.pos-250),i=t.text.slice(r-t.from,this.pos-t.from),o=i.search(Ose(e,!1));return o<0?null:{from:r+o,to:this.pos,text:i.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,r){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),r&&r.onDocChange&&(this.abortOnDocChange=!0))}}function Tj(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function Xtt(n){let e=Object.create(null),t=Object.create(null);for(let{label:i}of n){e[i[0]]=!0;for(let o=1;o<i.length;o++)t[i[o]]=!0}let r=Tj(e)+Tj(t)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function Ytt(n){let e=n.map(i=>typeof i=="string"?{label:i}:i),[t,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:Xtt(e);return i=>{let o=i.matchBefore(r);return o||i.explicit?{from:o?o.from:i.pos,options:e,validFor:t}:null}}class Dj{constructor(e,t,r,i){this.completion=e,this.source=t,this.match=r,this.score=i}}function Mh(n){return n.selection.main.from}function Ose(n,e){var t;let{source:r}=n,i=e&&r[0]!="^",o=r[r.length-1]!="$";return!i&&!o?n:new RegExp(`${i?"^":""}(?:${r})${o?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const kse=pu.define();function Ktt(n,e,t,r){let{main:i}=n.selection,o=t-i.from,s=r-i.from;return Object.assign(Object.assign({},n.changeByRange(a=>{if(a!=i&&t!=r&&n.sliceDoc(a.from+o,a.from+s)!=n.sliceDoc(t,r))return{range:a};let l=n.toText(e);return{changes:{from:a.from+o,to:r==i.from?a.to:a.from+s,insert:l},range:ot.cursor(a.from+o+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const Nj=new WeakMap;function Ztt(n){if(!Array.isArray(n))return n;let e=Nj.get(n);return e||Nj.set(n,e=Ytt(n)),e}const kM=dn.define(),O1=dn.define();class Jtt{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let r=Wi(e,t),i=ga(r);this.chars.push(r);let o=e.slice(t,t+i),s=o.toUpperCase();this.folded.push(Wi(s==o?o.toLowerCase():s,0)),t+=i}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:r,any:i,precise:o,byWord:s}=this;if(t.length==1){let w=Wi(e,0),b=ga(w),v=b==e.length?0:-100;if(w!=t[0])if(w==r[0])v+=-200;else return null;return this.ret(v,[0,b])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=t.length,u=0;if(a<0){for(let w=0,b=Math.min(e.length,200);w<b&&u<l;){let v=Wi(e,w);(v==t[u]||v==r[u])&&(i[u++]=w),w+=ga(v)}if(u<l)return null}let c=0,f=0,d=!1,h=0,m=-1,g=-1,y=/[a-z]/.test(e),p=!0;for(let w=0,b=Math.min(e.length,200),v=0;w<b&&f<l;){let S=Wi(e,w);a<0&&(c<l&&S==t[c]&&(o[c++]=w),h<l&&(S==t[h]||S==r[h]?(h==0&&(m=w),g=w+1,h++):h=0));let x,M=S<255?S>=48&&S<=57||S>=97&&S<=122?2:S>=65&&S<=90?1:0:(x=YL(S))!=x.toLowerCase()?1:x!=x.toUpperCase()?2:0;(!w||M==1&&y||v==0&&M!=0)&&(t[f]==S||r[f]==S&&(d=!0)?s[f++]=w:s.length&&(p=!1)),v=M,w+=ga(S)}return f==l&&s[0]==0&&p?this.result(-100+(d?-200:0),s,e):h==l&&m==0?this.ret(-200-e.length+(g==e.length?0:-100),[0,g]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):h==l?this.ret(-900-e.length,[m,g]):f==l?this.result(-100+(d?-200:0)+-700+(p?0:-1100),s,e):t.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,t,r){let i=[],o=0;for(let s of t){let a=s+(this.astral?ga(Wi(r,s)):1);o&&i[o-1]==s?i[o-1]=a:(i[o++]=s,i[o++]=a)}return this.ret(e-r.length,i)}}class Qtt{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),r=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,t.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}}const Pi=St.define({combine(n){return mu(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:ent,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>r=>Pj(e(r),t(r)),optionClass:(e,t)=>r=>Pj(e(r),t(r)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function Pj(n,e){return n?e?n+" "+e:n:e}function ent(n,e,t,r,i,o){let s=n.textDirection==yr.RTL,a=s,l=!1,u="top",c,f,d=e.left-i.left,h=i.right-e.right,m=r.right-r.left,g=r.bottom-r.top;if(a&&d<Math.min(m,h)?a=!1:!a&&h<Math.min(m,d)&&(a=!0),m<=(a?d:h))c=Math.max(i.top,Math.min(t.top,i.bottom-g))-e.top,f=Math.min(400,a?d:h);else{l=!0,f=Math.min(400,(s?e.right:i.right-e.left)-30);let w=i.bottom-e.bottom;w>=g||w>e.top?c=t.bottom-e.top:(u="bottom",c=e.bottom-t.top)}let y=(e.bottom-e.top)/o.offsetHeight,p=(e.right-e.left)/o.offsetWidth;return{style:`${u}: ${c/y}px; max-width: ${f/p}px`,class:"cm-completionInfo-"+(l?s?"left-narrow":"right-narrow":a?"left":"right")}}function tnt(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),t.type&&r.classList.add(...t.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(t,r,i,o){let s=document.createElement("span");s.className="cm-completionLabel";let a=t.displayLabel||t.label,l=0;for(let u=0;u<o.length;){let c=o[u++],f=o[u++];c>l&&s.appendChild(document.createTextNode(a.slice(l,c)));let d=s.appendChild(document.createElement("span"));d.appendChild(document.createTextNode(a.slice(c,f))),d.className="cm-completionMatchedText",l=f}return l<a.length&&s.appendChild(document.createTextNode(a.slice(l))),s},position:50},{render(t){if(!t.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=t.detail,r},position:80}),e.sort((t,r)=>t.position-r.position).map(t=>t.render)}function wD(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let i=Math.floor(e/t);return{from:i*t,to:(i+1)*t}}let r=Math.floor((n-e)/t);return{from:n-(r+1)*t,to:n-r*t}}class nnt{constructor(e,t,r){this.view=e,this.stateField=t,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(t),{options:o,selected:s}=i.open,a=e.state.facet(Pi);this.optionContent=tnt(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=wD(o.length,s,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:u}=e.state.field(t).open;for(let c=l.target,f;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(f=/-(\d+)$/.exec(c.id))&&+f[1]<u.length){this.applyCompletion(e,u[+f[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(Pi).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:O1.of(null)})}),this.showOptions(o,i.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=i){let{options:o,selected:s,disabled:a}=r.open;(!i.open||i.open.options!=o)&&(this.range=wD(o.length,s,e.state.facet(Pi).maxRenderedOptions),this.showOptions(o,r.id)),this.updateSel(),a!=((t=i.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of t.split(" "))r&&this.dom.classList.add(r);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=wD(t.options.length,t.selected,this.view.state.facet(Pi).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:r}=t.options[t.selected],{info:i}=r;if(!i)return;let o=typeof i=="string"?document.createTextNode(i):i(r);if(!o)return;"then"in o?o.then(s=>{s&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(s,r)}).catch(s=>ds(this.view.state,s,"completion info")):this.addInfoPane(o,r)}}addInfoPane(e,t){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:o}=e;r.appendChild(i),this.infoDestroy=o||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),t=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return t&&int(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),o=this.space;if(!o){let s=this.dom.ownerDocument.defaultView||window;o={left:0,top:0,right:s.innerWidth,bottom:s.innerHeight}}return i.top>Math.min(o.bottom,t.bottom)-10||i.bottom<Math.max(o.top,t.top)+10?null:this.view.state.facet(Pi).positionInfo(this.view,t,i,r,o,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,r){const i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));let o=null;for(let s=r.from;s<r.to;s++){let{completion:a,match:l}=e[s],{section:u}=a;if(u){let d=typeof u=="string"?u:u.name;if(d!=o&&(s>r.from||r.from==0))if(o=d,typeof u!="string"&&u.header)i.appendChild(u.header(u));else{let h=i.appendChild(document.createElement("completion-section"));h.textContent=d}}const c=i.appendChild(document.createElement("li"));c.id=t+"-"+s,c.setAttribute("role","option");let f=this.optionClass(a);f&&(c.className=f);for(let d of this.optionContent){let h=d(a,this.view.state,this.view,l);h&&c.appendChild(h)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function rnt(n,e){return t=>new nnt(t,n,e)}function int(n,e){let t=n.getBoundingClientRect(),r=e.getBoundingClientRect(),i=t.height/n.offsetHeight;r.top<t.top?n.scrollTop-=(t.top-r.top)/i:r.bottom>t.bottom&&(n.scrollTop+=(r.bottom-t.bottom)/i)}function Rj(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function ont(n,e){let t=[],r=null,i=u=>{t.push(u);let{section:c}=u.completion;if(c){r||(r=[]);let f=typeof c=="string"?c:c.name;r.some(d=>d.name==f)||r.push(typeof c=="string"?{name:f}:c)}},o=e.facet(Pi);for(let u of n)if(u.hasResult()){let c=u.result.getMatch;if(u.result.filter===!1)for(let f of u.result.options)i(new Dj(f,u.source,c?c(f):[],1e9-t.length));else{let f=e.sliceDoc(u.from,u.to),d,h=o.filterStrict?new Qtt(f):new Jtt(f);for(let m of u.result.options)if(d=h.match(m.label)){let g=m.displayLabel?c?c(m,d.matched):[]:d.matched;i(new Dj(m,u.source,g,d.score+(m.boost||0)))}}}if(r){let u=Object.create(null),c=0,f=(d,h)=>{var m,g;return((m=d.rank)!==null&&m!==void 0?m:1e9)-((g=h.rank)!==null&&g!==void 0?g:1e9)||(d.name<h.name?-1:1)};for(let d of r.sort(f))c-=1e5,u[d.name]=c;for(let d of t){let{section:h}=d.completion;h&&(d.score+=u[typeof h=="string"?h:h.name])}}let s=[],a=null,l=o.compareCompletions;for(let u of t.sort((c,f)=>f.score-c.score||l(c.completion,f.completion))){let c=u.completion;!a||a.label!=c.label||a.detail!=c.detail||a.type!=null&&c.type!=null&&a.type!=c.type||a.apply!=c.apply||a.boost!=c.boost?s.push(u):Rj(u.completion)>Rj(a)&&(s[s.length-1]=u),a=u.completion}return s}class zm{constructor(e,t,r,i,o,s){this.options=e,this.attrs=t,this.tooltip=r,this.timestamp=i,this.selected=o,this.disabled=s}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new zm(this.options,Oj(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,r,i,o,s){if(i&&!s&&e.some(u=>u.isPending))return i.setDisabled();let a=ont(e,t);if(!a.length)return i&&e.some(u=>u.isPending)?i.setDisabled():null;let l=t.facet(Pi).selectOnOpen?0:-1;if(i&&i.selected!=l&&i.selected!=-1){let u=i.options[i.selected].completion;for(let c=0;c<a.length;c++)if(a[c].completion==u){l=c;break}}return new zm(a,Oj(r,l),{pos:e.reduce((u,c)=>c.hasResult()?Math.min(u,c.from):u,1e8),create:fnt,above:o.aboveCursor},i?i.timestamp:Date.now(),l,!1)}map(e){return new zm(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new zm(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class IM{constructor(e,t,r){this.active=e,this.id=t,this.open=r}static start(){return new IM(unt,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,r=t.facet(Pi),o=(r.override||t.languageDataAt("autocomplete",Mh(t)).map(Ztt)).map(l=>(this.active.find(c=>c.source==l)||new wa(l,this.active.some(c=>c.state!=0)?1:0)).update(e,r));o.length==this.active.length&&o.every((l,u)=>l==this.active[u])&&(o=this.active);let s=this.open,a=e.effects.some(l=>l.is(_F));s&&e.docChanged&&(s=s.map(e.changes)),e.selection||o.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!snt(o,this.active)||a?s=zm.build(o,t,this.id,s,r,a):s&&s.disabled&&!o.some(l=>l.isPending)&&(s=null),!s&&o.every(l=>!l.isPending)&&o.some(l=>l.hasResult())&&(o=o.map(l=>l.hasResult()?new wa(l.source,0):l));for(let l of e.effects)l.is(Lse)&&(s=s&&s.setSelected(l.value,this.id));return o==this.active&&s==this.open?this:new IM(o,this.id,s)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?ant:lnt}}function snt(n,e){if(n==e)return!0;for(let t=0,r=0;;){for(;t<n.length&&!n[t].hasResult();)t++;for(;r<e.length&&!e[r].hasResult();)r++;let i=t==n.length,o=r==e.length;if(i||o)return i==o;if(n[t++].result!=e[r++].result)return!1}}const ant={"aria-autocomplete":"list"},lnt={};function Oj(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const unt=[];function Ise(n,e){if(n.isUserEvent("input.complete")){let r=n.annotation(kse);if(r&&e.activateOnCompletion(r))return 12}let t=n.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:n.isUserEvent("delete.backward")?2:n.selection?8:n.docChanged?16:0}class wa{constructor(e,t,r=!1){this.source=e,this.state=t,this.explicit=r}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let r=Ise(e,t),i=this;(r&8||r&16&&this.touches(e))&&(i=new wa(i.source,0)),r&4&&i.state==0&&(i=new wa(this.source,1)),i=i.updateFor(e,r);for(let o of e.effects)if(o.is(kM))i=new wa(i.source,1,o.value);else if(o.is(O1))i=new wa(i.source,0);else if(o.is(_F))for(let s of o.value)s.source==i.source&&(i=s);return i}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Mh(e.state))}}class sg extends wa{constructor(e,t,r,i,o,s){super(e,3,t),this.limit=r,this.result=i,this.from=o,this.to=s}hasResult(){return!0}updateFor(e,t){var r;if(!(t&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let o=e.changes.mapPos(this.from),s=e.changes.mapPos(this.to,1),a=Mh(e.state);if(a>s||!i||t&2&&(Mh(e.startState)==this.from||a<this.limit))return new wa(this.source,t&4?1:0);let l=e.changes.mapPos(this.limit);return cnt(i.validFor,e.state,o,s)?new sg(this.source,this.explicit,l,i,o,s):i.update&&(i=i.update(i,o,s,new Rse(e.state,a,!1)))?new sg(this.source,this.explicit,l,i,i.from,(r=i.to)!==null&&r!==void 0?r:Mh(e.state)):new wa(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new sg(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new wa(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function cnt(n,e,t,r){if(!n)return!1;let i=e.sliceDoc(t,r);return typeof n=="function"?n(i,t,r,e):Ose(n,!0).test(i)}const _F=dn.define({map(n,e){return n.map(t=>t.map(e))}}),Lse=dn.define(),ls=Qi.define({create(){return IM.start()},update(n,e){return n.update(e)},provide:n=>[cF.from(n,e=>e.tooltip),bt.contentAttributes.from(n,e=>e.attrs)]});function EF(n,e){const t=e.completion.apply||e.completion.label;let r=n.state.field(ls).active.find(i=>i.source==e.source);return r instanceof sg?(typeof t=="string"?n.dispatch(Object.assign(Object.assign({},Ktt(n.state,t,r.from,r.to)),{annotations:kse.of(e.completion)})):t(n,e.completion,r.from,r.to),!0):!1}const fnt=rnt(ls,EF);function $S(n,e="option"){return t=>{let r=t.state.field(ls,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<t.state.facet(Pi).interactionDelay)return!1;let i=1,o;e=="page"&&(o=boe(t,r.open.tooltip))&&(i=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:s}=r.open.options,a=r.open.selected>-1?r.open.selected+i*(n?1:-1):n?0:s-1;return a<0?a=e=="page"?0:s-1:a>=s&&(a=e=="page"?s-1:0),t.dispatch({effects:Lse.of(a)}),!0}}const dnt=n=>{let e=n.state.field(ls,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(Pi).interactionDelay?!1:EF(n,e.open.options[e.open.selected])},kj=n=>n.state.field(ls,!1)?(n.dispatch({effects:kM.of(!0)}),!0):!1,hnt=n=>{let e=n.state.field(ls,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:O1.of(null)}),!0)};class pnt{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const mnt=50,gnt=1e3,vnt=ei.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field(ls).active)e.isPending&&this.startQuery(e)}update(n){let e=n.state.field(ls),t=n.state.facet(Pi);if(!n.selectionSet&&!n.docChanged&&n.startState.field(ls)==e)return;let r=n.transactions.some(o=>{let s=Ise(o,t);return s&8||(o.selection||o.docChanged)&&!(s&3)});for(let o=0;o<this.running.length;o++){let s=this.running[o];if(r||s.context.abortOnDocChange&&n.docChanged||s.updates.length+n.transactions.length>mnt&&Date.now()-s.time>gnt){for(let a of s.context.abortListeners)try{a()}catch(l){ds(this.view.state,l)}s.context.abortListeners=null,this.running.splice(o--,1)}else s.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(o=>o.effects.some(s=>s.is(kM)))&&(this.pendingStart=!0);let i=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(o=>o.isPending&&!this.running.some(s=>s.active.source==o.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let o of n.transactions)o.isUserEvent("input.type")?this.composing=2:this.composing==2&&o.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field(ls);for(let t of e.active)t.isPending&&!this.running.some(r=>r.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Pi).updateSyncTime))}startQuery(n){let{state:e}=this.view,t=Mh(e),r=new Rse(e,t,n.explicit,this.view),i=new pnt(n,r);this.running.push(i),Promise.resolve(n.source(r)).then(o=>{i.context.aborted||(i.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:O1.of(null)}),ds(this.view.state,o)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Pi).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Pi),r=this.view.state.field(ls);for(let i=0;i<this.running.length;i++){let o=this.running[i];if(o.done===void 0)continue;if(this.running.splice(i--,1),o.done){let a=Mh(o.updates.length?o.updates[0].startState:this.view.state),l=Math.min(a,o.done.from+(o.active.explicit?0:1)),u=new sg(o.active.source,o.active.explicit,l,o.done,o.done.from,(n=o.done.to)!==null&&n!==void 0?n:a);for(let c of o.updates)u=u.update(c,t);if(u.hasResult()){e.push(u);continue}}let s=r.active.find(a=>a.source==o.active.source);if(s&&s.isPending)if(o.done==null){let a=new wa(o.active.source,0);for(let l of o.updates)a=a.update(l,t);a.isPending||e.push(a)}else this.startQuery(s)}(e.length||r.open&&r.open.disabled)&&this.view.dispatch({effects:_F.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(ls,!1);if(e&&e.tooltip&&this.view.state.facet(Pi).closeOnBlur){let t=e.open&&boe(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:O1.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:kM.of(!1)}),20),this.composing=0}}}),ynt=typeof navigator=="object"&&/Win/.test(navigator.platform),xnt=up.highest(bt.domEventHandlers({keydown(n,e){let t=e.state.field(ls,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||n.key.length>1||n.ctrlKey&&!(ynt&&n.altKey)||n.metaKey)return!1;let r=t.open.options[t.open.selected],i=t.active.find(s=>s.source==r.source),o=r.completion.commitCharacters||i.result.commitCharacters;return o&&o.indexOf(n.key)>-1&&EF(e,r),!1}})),bnt=bt.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),k1={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},ch=dn.define({map(n,e){let t=e.mapPos(n,-1,Lo.TrackAfter);return t??void 0}}),MF=new class extends Hh{};MF.startSide=1;MF.endSide=-1;const Fse=Qi.define({create(){return Pn.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:r=>r>=t.from&&r<=t.to})}for(let t of e.effects)t.is(ch)&&(n=n.update({add:[MF.range(t.value,t.value+1)]}));return n}});function wnt(){return[_nt,Fse]}const SD="()[]{}<>";function Bse(n){for(let e=0;e<SD.length;e+=2)if(SD.charCodeAt(e)==n)return SD.charAt(e+1);return YL(n<128?n:n+1)}function zse(n,e){return n.languageDataAt("closeBrackets",e)[0]||k1}const Snt=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),_nt=bt.inputHandler.of((n,e,t,r)=>{if((Snt?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let i=n.state.selection.main;if(r.length>2||r.length==2&&ga(Wi(r,0))==1||e!=i.from||t!=i.to)return!1;let o=Cnt(n.state,r);return o?(n.dispatch(o),!0):!1}),Ent=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let r=zse(n,n.selection.main.head).brackets||k1.brackets,i=null,o=n.changeByRange(s=>{if(s.empty){let a=Ant(n.doc,s.head);for(let l of r)if(l==a&&DC(n.doc,s.head)==Bse(Wi(l,0)))return{changes:{from:s.head-l.length,to:s.head+l.length},range:ot.cursor(s.head-l.length)}}return{range:i=s}});return i||e(n.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},Mnt=[{key:"Backspace",run:Ent}];function Cnt(n,e){let t=zse(n,n.selection.main.head),r=t.brackets||k1.brackets;for(let i of r){let o=Bse(Wi(i,0));if(e==i)return o==i?Nnt(n,i,r.indexOf(i+i+i)>-1,t):Tnt(n,i,o,t.before||k1.before);if(e==o&&Use(n,n.selection.main.from))return Dnt(n,i,o)}return null}function Use(n,e){let t=!1;return n.field(Fse).between(0,n.doc.length,r=>{r==e&&(t=!0)}),t}function DC(n,e){let t=n.sliceString(e,e+2);return t.slice(0,ga(Wi(t,0)))}function Ant(n,e){let t=n.sliceString(e-2,e);return ga(Wi(t,0))==t.length?t:t.slice(1)}function Tnt(n,e,t,r){let i=null,o=n.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:t,from:s.to}],effects:ch.of(s.to+e.length),range:ot.range(s.anchor+e.length,s.head+e.length)};let a=DC(n.doc,s.head);return!a||/\s/.test(a)||r.indexOf(a)>-1?{changes:{insert:e+t,from:s.head},effects:ch.of(s.head+e.length),range:ot.cursor(s.head+e.length)}:{range:i=s}});return i?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Dnt(n,e,t){let r=null,i=n.changeByRange(o=>o.empty&&DC(n.doc,o.head)==t?{changes:{from:o.head,to:o.head+t.length,insert:t},range:ot.cursor(o.head+t.length)}:r={range:o});return r?null:n.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function Nnt(n,e,t,r){let i=r.stringPrefixes||k1.stringPrefixes,o=null,s=n.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:ch.of(a.to+e.length),range:ot.range(a.anchor+e.length,a.head+e.length)};let l=a.head,u=DC(n.doc,l),c;if(u==e){if(Ij(n,l))return{changes:{insert:e+e,from:l},effects:ch.of(l+e.length),range:ot.cursor(l+e.length)};if(Use(n,l)){let d=t&&n.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+d.length,insert:d},range:ot.cursor(l+d.length)}}}else{if(t&&n.sliceDoc(l-2*e.length,l)==e+e&&(c=Lj(n,l-2*e.length,i))>-1&&Ij(n,c))return{changes:{insert:e+e+e+e,from:l},effects:ch.of(l+e.length),range:ot.cursor(l+e.length)};if(n.charCategorizer(l)(u)!=Er.Word&&Lj(n,l,i)>-1&&!Pnt(n,l,e,i))return{changes:{insert:e+e,from:l},effects:ch.of(l+e.length),range:ot.cursor(l+e.length)}}return{range:o=a}});return o?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function Ij(n,e){let t=So(n).resolveInner(e+1);return t.parent&&t.from==e}function Pnt(n,e,t,r){let i=So(n).resolveInner(e,-1),o=r.reduce((s,a)=>Math.max(s,a.length),0);for(let s=0;s<5;s++){let a=n.sliceDoc(i.from,Math.min(i.to,i.from+t.length+o)),l=a.indexOf(t);if(!l||l>-1&&r.indexOf(a.slice(0,l))>-1){let c=i.firstChild;for(;c&&c.from==i.from&&c.to-c.from>t.length+l;){if(n.sliceDoc(c.to-t.length,c.to)==t)return!1;c=c.firstChild}return!0}let u=i.to==e&&i.parent;if(!u)break;i=u}return!1}function Lj(n,e,t){let r=n.charCategorizer(e);if(r(n.sliceDoc(e-1,e))!=Er.Word)return e;for(let i of t){let o=e-i.length;if(n.sliceDoc(o,e)==i&&r(n.sliceDoc(o-1,o))!=Er.Word)return o}return-1}function Rnt(n={}){return[xnt,ls,Pi.of(n),vnt,Ont,bnt]}const Vse=[{key:"Ctrl-Space",run:kj},{mac:"Alt-`",run:kj},{key:"Escape",run:hnt},{key:"ArrowDown",run:$S(!0)},{key:"ArrowUp",run:$S(!1)},{key:"PageDown",run:$S(!0,"page")},{key:"PageUp",run:$S(!1,"page")},{key:"Enter",run:dnt}],Ont=up.highest(Mx.computeN([Pi],n=>n.facet(Pi).defaultKeymap?[Vse]:[]));class knt{constructor(e,t,r){this.from=e,this.to=t,this.diagnostic=r}}class Jd{constructor(e,t,r){this.diagnostics=e,this.panel=t,this.selected=r}static init(e,t,r){let i=e,o=r.facet(I1).markerFilter;o&&(i=o(i,r));let s=Ut.set(i.map(a=>a.from==a.to||a.from==a.to-1&&r.doc.lineAt(a.from).to==a.from?Ut.widget({widget:new Hnt(a),diagnostic:a}).range(a.from):Ut.mark({attributes:{class:"cm-lintRange cm-lintRange-"+a.severity+(a.markClass?" "+a.markClass:"")},diagnostic:a}).range(a.from,a.to)),!0);return new Jd(s,t,Ug(s))}}function Ug(n,e=null,t=0){let r=null;return n.between(t,1e9,(i,o,{spec:s})=>{if(!(e&&s.diagnostic!=e))return r=new knt(i,o,s.diagnostic),!1}),r}function Int(n,e){let t=e.pos,r=e.end||t,i=n.state.facet(I1).hideOn(n,t,r);if(i!=null)return i;let o=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(s=>s.is($se))||n.changes.touchesRange(o.from,Math.max(o.to,r)))}function Lnt(n,e){return n.field(zs,!1)?e:e.concat(dn.appendConfig.of(Gnt))}const $se=dn.define(),CF=dn.define(),Hse=dn.define(),zs=Qi.define({create(){return new Jd(Ut.none,null,null)},update(n,e){if(e.docChanged&&n.diagnostics.size){let t=n.diagnostics.map(e.changes),r=null,i=n.panel;if(n.selected){let o=e.changes.mapPos(n.selected.from,1);r=Ug(t,n.selected.diagnostic,o)||Ug(t,null,o)}!t.size&&i&&e.state.facet(I1).autoPanel&&(i=null),n=new Jd(t,i,r)}for(let t of e.effects)if(t.is($se)){let r=e.state.facet(I1).autoPanel?t.value.length?L1.open:null:n.panel;n=Jd.init(t.value,r,e.state)}else t.is(CF)?n=new Jd(n.diagnostics,t.value?L1.open:null,n.selected):t.is(Hse)&&(n=new Jd(n.diagnostics,n.panel,t.value));return n},provide:n=>[D1.from(n,e=>e.panel),bt.decorations.from(n,e=>e.diagnostics)]}),Fnt=Ut.mark({class:"cm-lintRange cm-lintRange-active"});function Bnt(n,e,t){let{diagnostics:r}=n.state.field(zs),i=[],o=2e8,s=0;r.between(e-(t<0?1:0),e+(t>0?1:0),(l,u,{spec:c})=>{e>=l&&e<=u&&(l==u||(e>l||t>0)&&(e<u||t<0))&&(i.push(c.diagnostic),o=Math.min(l,o),s=Math.max(u,s))});let a=n.state.facet(I1).tooltipFilter;return a&&(i=a(i,n.state)),i.length?{pos:o,end:s,above:n.state.doc.lineAt(o).to<s,create(){return{dom:znt(n,i)}}}:null}function znt(n,e){return cr("ul",{class:"cm-tooltip-lint"},e.map(t=>jse(n,t,!1)))}const Unt=n=>{let e=n.state.field(zs,!1);(!e||!e.panel)&&n.dispatch({effects:Lnt(n.state,[CF.of(!0)])});let t=T1(n,L1.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},Fj=n=>{let e=n.state.field(zs,!1);return!e||!e.panel?!1:(n.dispatch({effects:CF.of(!1)}),!0)},Vnt=n=>{let e=n.state.field(zs,!1);if(!e)return!1;let t=n.state.selection.main,r=e.diagnostics.iter(t.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==t.from&&r.to==t.to)?!1:(n.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},$nt=[{key:"Mod-Shift-m",run:Unt,preventDefault:!0},{key:"F8",run:Vnt}],I1=St.define({combine(n){return Object.assign({sources:n.map(e=>e.source).filter(e=>e!=null)},mu(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?r=>e(r)||t(r):e:t}))}});function Wse(n){let e=[];if(n)e:for(let{name:t}of n){for(let r=0;r<t.length;r++){let i=t[r];if(/[a-zA-Z]/.test(i)&&!e.some(o=>o.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function jse(n,e,t){var r;let i=t?Wse(e.actions):[];return cr("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},cr("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(n):e.message),(r=e.actions)===null||r===void 0?void 0:r.map((o,s)=>{let a=!1,l=d=>{if(d.preventDefault(),a)return;a=!0;let h=Ug(n.state.field(zs).diagnostics,e);h&&o.apply(n,h.from,h.to)},{name:u}=o,c=i[s]?u.indexOf(i[s]):-1,f=c<0?u:[u.slice(0,c),cr("u",u.slice(c,c+1)),u.slice(c+1)];return cr("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${u}${c<0?"":` (access key "${i[s]})"`}.`},f)}),e.source&&cr("div",{class:"cm-diagnosticSource"},e.source))}class Hnt extends Sc{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return cr("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class Bj{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=jse(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class L1{constructor(e){this.view=e,this.items=[];let t=i=>{if(i.keyCode==27)Fj(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],s=Wse(o.actions);for(let a=0;a<s.length;a++)if(s[a].toUpperCase().charCodeAt(0)==i.keyCode){let l=Ug(this.view.state.field(zs).diagnostics,o);l&&o.actions[a].apply(e,l.from,l.to)}}else return;i.preventDefault()},r=i=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(i.target)&&this.moveSelection(o)};this.list=cr("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:r}),this.dom=cr("div",{class:"cm-panel-lint"},this.list,cr("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Fj(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(zs).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(zs),r=0,i=!1,o=null;for(e.between(0,this.view.state.doc.length,(s,a,{spec:l})=>{let u=-1,c;for(let f=r;f<this.items.length;f++)if(this.items[f].diagnostic==l.diagnostic){u=f;break}u<0?(c=new Bj(this.view,l.diagnostic),this.items.splice(r,0,c),i=!0):(c=this.items[u],u>r&&(this.items.splice(r,u-r),i=!0)),t&&c.diagnostic==t.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),o=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),r++});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new Bj(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:s,panel:a})=>{let l=a.height/this.list.offsetHeight;s.top<a.top?this.list.scrollTop-=(a.top-s.top)/l:s.bottom>a.bottom&&(this.list.scrollTop+=(s.bottom-a.bottom)/l)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function t(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)t();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(zs),r=Ug(t.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:Hse.of(r)})}static open(e){return new L1(e)}}function Wnt(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function HS(n){return Wnt(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const jnt=bt.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:HS("#d11")},".cm-lintRange-warning":{backgroundImage:HS("orange")},".cm-lintRange-info":{backgroundImage:HS("#999")},".cm-lintRange-hint":{backgroundImage:HS("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),Gnt=[zs,bt.decorations.compute([zs],n=>{let{selected:e,panel:t}=n.field(zs);return!e||!t||e.from==e.to?Ut.none:Ut.set([Fnt.range(e.from,e.to)])}),BJe(Bnt,{hideOn:Int}),jnt];var zj=function(e){e===void 0&&(e={});var{crosshairCursor:t=!1}=e,r=[];e.closeBracketsKeymap!==!1&&(r=r.concat(Mnt)),e.defaultKeymap!==!1&&(r=r.concat(wse)),e.searchKeymap!==!1&&(r=r.concat(Wtt)),e.historyKeymap!==!1&&(r=r.concat(Tet)),e.foldKeymap!==!1&&(r=r.concat(UQe)),e.completionKeymap!==!1&&(r=r.concat(Vse)),e.lintKeymap!==!1&&(r=r.concat($nt));var i=[];return e.lineNumbers!==!1&&i.push(YJe()),e.highlightActiveLineGutter!==!1&&i.push(JJe()),e.highlightSpecialChars!==!1&&i.push(hJe()),e.history!==!1&&i.push(yet()),e.foldGutter!==!1&&i.push(WQe()),e.drawSelection!==!1&&i.push(nJe()),e.dropCursor!==!1&&i.push(aJe()),e.allowMultipleSelections!==!1&&i.push(Mn.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&i.push(NQe()),e.syntaxHighlighting!==!1&&i.push(zoe(XQe,{fallback:!0})),e.bracketMatching!==!1&&i.push(tet()),e.closeBrackets!==!1&&i.push(wnt()),e.autocompletion!==!1&&i.push(Rnt()),e.rectangularSelection!==!1&&i.push(AJe()),t!==!1&&i.push(NJe()),e.highlightActiveLine!==!1&&i.push(xJe()),e.highlightSelectionMatches!==!1&&i.push(Mtt()),e.tabSize&&typeof e.tabSize=="number"&&i.push(SC.of(" ".repeat(e.tabSize))),i.concat([Mx.of(r.flat())]).filter(Boolean)};const qnt="#e5c07b",Uj="#e06c75",Xnt="#56b6c2",Ynt="#ffffff",R_="#abb2bf",RO="#7d8799",Knt="#61afef",Znt="#98c379",Vj="#d19a66",Jnt="#c678dd",Qnt="#21252b",$j="#2c313a",Hj="#282c34",_D="#353a42",ert="#3E4451",Wj="#528bff",trt=bt.theme({"&":{color:R_,backgroundColor:Hj},".cm-content":{caretColor:Wj},".cm-cursor, .cm-dropCursor":{borderLeftColor:Wj},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:ert},".cm-panels":{backgroundColor:Qnt,color:R_},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Hj,color:RO,border:"none"},".cm-activeLineGutter":{backgroundColor:$j},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:_D},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:_D,borderBottomColor:_D},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:$j,color:R_}}},{dark:!0}),nrt=Tx.define([{tag:tt.keyword,color:Jnt},{tag:[tt.name,tt.deleted,tt.character,tt.propertyName,tt.macroName],color:Uj},{tag:[tt.function(tt.variableName),tt.labelName],color:Knt},{tag:[tt.color,tt.constant(tt.name),tt.standard(tt.name)],color:Vj},{tag:[tt.definition(tt.name),tt.separator],color:R_},{tag:[tt.typeName,tt.className,tt.number,tt.changed,tt.annotation,tt.modifier,tt.self,tt.namespace],color:qnt},{tag:[tt.operator,tt.operatorKeyword,tt.url,tt.escape,tt.regexp,tt.link,tt.special(tt.string)],color:Xnt},{tag:[tt.meta,tt.comment],color:RO},{tag:tt.strong,fontWeight:"bold"},{tag:tt.emphasis,fontStyle:"italic"},{tag:tt.strikethrough,textDecoration:"line-through"},{tag:tt.link,color:RO,textDecoration:"underline"},{tag:tt.heading,fontWeight:"bold",color:Uj},{tag:[tt.atom,tt.bool,tt.special(tt.variableName)],color:Vj},{tag:[tt.processingInstruction,tt.string,tt.inserted],color:Znt},{tag:tt.invalid,color:Ynt}]),rrt=[trt,zoe(nrt)];var irt=bt.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),ort=function(e){e===void 0&&(e={});var{indentWithTab:t=!0,editable:r=!0,readOnly:i=!1,theme:o="light",placeholder:s="",basicSetup:a=!0}=e,l=[];switch(t&&l.unshift(Mx.of([xtt])),a&&(typeof a=="boolean"?l.unshift(zj()):l.unshift(zj(a))),s&&l.unshift(_Je(s)),o){case"light":l.push(irt);break;case"dark":l.push(rrt);break;case"none":break;default:l.push(o);break}return r===!1&&l.push(bt.editable.of(!1)),i&&l.push(Mn.readOnly.of(!0)),[...l]},srt=n=>({line:n.state.doc.lineAt(n.state.selection.main.from),lineCount:n.state.doc.lines,lineBreak:n.state.lineBreak,length:n.state.doc.length,readOnly:n.state.readOnly,tabSize:n.state.tabSize,selection:n.state.selection,selectionAsSingle:n.state.selection.asSingle().main,ranges:n.state.selection.ranges,selectionCode:n.state.sliceDoc(n.state.selection.main.from,n.state.selection.main.to),selections:n.state.selection.ranges.map(e=>n.state.sliceDoc(e.from,e.to)),selectedText:n.state.selection.ranges.some(e=>!e.empty)}),jj=pu.define(),art=[];function lrt(n){var{value:e,selection:t,onChange:r,onStatistics:i,onCreateEditor:o,onUpdate:s,extensions:a=art,autoFocus:l,theme:u="light",height:c=null,minHeight:f=null,maxHeight:d=null,width:h=null,minWidth:m=null,maxWidth:g=null,placeholder:y="",editable:p=!0,readOnly:w=!1,indentWithTab:b=!0,basicSetup:v=!0,root:S,initialState:x}=n,[M,A]=z.useState(),[T,C]=z.useState(),[D,R]=z.useState(),B=bt.theme({"&":{height:c,minHeight:f,maxHeight:d,width:h,minWidth:m,maxWidth:g},"& .cm-scroller":{height:"100% !important"}}),F=bt.updateListener.of(I=>{if(I.docChanged&&typeof r=="function"&&!I.transactions.some(X=>X.annotation(jj))){var V=I.state.doc,L=V.toString();r(L,I)}i&&i(srt(I))}),U=ort({theme:u,editable:p,readOnly:w,placeholder:y,indentWithTab:b,basicSetup:v}),N=[F,B,...U];return s&&typeof s=="function"&&N.push(bt.updateListener.of(s)),N=N.concat(a),z.useEffect(()=>{if(M&&!D){var I={doc:e,selection:t,extensions:N},V=x?Mn.fromJSON(x.json,I,x.fields):Mn.create(I);if(R(V),!T){var L=new bt({state:V,parent:M,root:S});C(L),o&&o(L,V)}}return()=>{T&&(R(void 0),C(void 0))}},[M,D]),z.useEffect(()=>A(n.container),[n.container]),z.useEffect(()=>()=>{T&&(T.destroy(),C(void 0))},[T]),z.useEffect(()=>{l&&T&&T.focus()},[l,T]),z.useEffect(()=>{T&&T.dispatch({effects:dn.reconfigure.of(N)})},[u,a,c,f,d,h,m,g,y,p,w,b,v,r,s]),z.useEffect(()=>{if(e!==void 0){var I=T?T.state.doc.toString():"";T&&e!==I&&T.dispatch({changes:{from:0,to:I.length,insert:e||""},annotations:[jj.of(!0)]})}},[e,T]),{state:D,setState:R,view:T,setView:C,container:M,setContainer:A}}var urt=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],Gse=z.forwardRef((n,e)=>{var{className:t,value:r="",selection:i,extensions:o=[],onChange:s,onStatistics:a,onCreateEditor:l,onUpdate:u,autoFocus:c,theme:f="light",height:d,minHeight:h,maxHeight:m,width:g,minWidth:y,maxWidth:p,basicSetup:w,placeholder:b,indentWithTab:v,editable:S,readOnly:x,root:M,initialState:A}=n,T=_Q(n,urt),C=z.useRef(null),{state:D,view:R,container:B}=lrt({container:C.current,root:M,value:r,autoFocus:c,theme:f,height:d,minHeight:h,maxHeight:m,width:g,minWidth:y,maxWidth:p,basicSetup:w,placeholder:b,indentWithTab:v,editable:S,readOnly:x,selection:i,onChange:s,onStatistics:a,onCreateEditor:l,onUpdate:u,extensions:o,initialState:A});if(z.useImperativeHandle(e,()=>({editor:C.current,state:D,view:R}),[C,B,D,R]),typeof r!="string")throw new Error("value must be typeof string but got "+typeof r);var F=typeof f=="string"?"cm-theme-"+f:"cm-theme";return Q.jsx("div",pt({ref:C,className:""+F+(t?" "+t:"")},T))});Gse.displayName="CodeMirror";function crt(n){const[e,t]=z.useState(""),r=[Mx.of(wse)];z.useEffect(()=>{n.activeAtom!=null&&t(n.activeAtom.code)},[n.activeAtom]);function i(){document.getElementById("code-window").classList.add("code-off")}return Q.jsxs("div",{id:"code-window",className:" code-off login-page code-window-div",children:[Q.jsx(Gse,{width:"100%",extensions:r,value:e,onChange:o=>{t(o)},theme:"dark"}),Q.jsx("button",{type:"button",onClick:()=>n.activeAtom.updateCode(e),style:{display:"none"},id:"save-code-button",children:"Save Code"}),Q.jsx("button",{type:"button",style:{display:"none"},id:"close-code-button",onClick:()=>i(),children:"Close Editor"})]})}function frt({activeAtom:n,setActiveAtom:e,authorizedUserOcto:t,tryLogin:r,loadProject:i,exportPopUp:o,setExportPopUp:s,shortCutsOn:a,setShortCuts:l,mesh:u,setMesh:c,size:f,cad:d,wireMesh:h,setWireMesh:m,outdatedMesh:g,setOutdatedMesh:y}){const p=rd(),[w,b]=z.useState(!0),[v,S]=z.useState(!0),[x,M]=z.useState(!0),[A,T]=z.useState(!0),[C,D]=z.useState(0),[R,B]=z.useState(!1);z.useState(0);const[F,U]=z.useState(!1);var N={a:"Assembly",b:"Loft",c:"Copy",d:"Difference",e:"Extrude",g:"GitHub",i:"Input",j:"Translate",r:"Rotate",u:"Rectangle",l:"Circle",m:"Molecule",s:"Save",v:"Paste",x:"Equation",y:"Code",z:"Undo"};z.useEffect(()=>{n&&n.atomType=="Molecule"&&U(!n.topLevel)},[n]),z.useEffect(()=>(window.addEventListener("keydown",I),()=>{window.removeEventListener("keydown",I)})),z.useEffect(()=>{const Y=setInterval(()=>{B(!0),Z(D)},3e5);return()=>clearInterval(Y)},[]);const I=Y=>{Y.metaKey&&Y.key=="s"&&(Y.preventDefault(),B(!0),Z(D))},V=async function(Y,{owner:re,repo:fe,base:ue,changes:ge},Se){console.log("creating commit"),console.log(Y),Se(35),ue||Y.request("GET /repos/{owner}/{repo}",{owner:re,repo:fe}).then(xe=>{let De=xe.data.html_url;Se(40),ue=xe.data.default_branch,Y.rest.repos.listCommits({owner:re,repo:fe,sha:ue,per_page:1}).then(Ae=>{Se(50);let ie=Ae.data[0].sha;const Re=Ae.data[0].commit.tree.sha;Y.rest.git.createTree({owner:re,repo:fe,base_tree:Re,tree:Object.keys(ge.files).map(Pe=>ge.files[Pe]!=null?{path:Pe,mode:"100644",content:ge.files[Pe]}:{path:Pe,mode:"100644",sha:null})}).then(Pe=>{Se(60);const ee=Pe.data.sha;Y.rest.git.createCommit({owner:re,repo:fe,message:ge.commit,tree:ee,parents:[ie]}).then(oe=>{Se(70),ie=oe.data.sha,Y.rest.git.updateRef({owner:re,repo:fe,sha:ie,ref:"heads/"+ue,force:!0}).then(Me=>{Se(80);const se="https://hg5gsgv9te.execute-api.us-east-2.amazonaws.com/abundance-stage/update-item";let G=O.currentRepo.topics.join(" "),j=(fe+" "+re+" "+O.currentRepo.description+" "+G).toLowerCase();fetch(se,{method:"POST",body:JSON.stringify({owner:re,repoName:fe,attributeUpdates:{ranking:0,html_url:De,searchField:j,description:O.currentRepo.description,topics:O.currentRepo.topics}}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(he=>{console.log(he),console.warn("Project saved on git and aws updated"),Se(100)})})})})})})},L=async function(Y){var re=new FileReader;re.onload=function(fe){let ue=fe.target.result.split(",")[1];t.rest.repos.createOrUpdateFileContents({owner:O.currentUser,repo:O.currentRepoName,path:Y.name,message:"Import File",content:ue}).then(ge=>{n.updateFile(Y,ge.data.content.sha),Z(D)})},re.readAsDataURL(Y)},X=async function(Y,re){console.log("deleting file"),t.rest.repos.deleteFile({owner:O.currentUser,repo:O.currentRepoName,path:Y,message:"Deleted node",sha:re})},Z=async Y=>{Y(5);let re;re=await O.topLevelMolecule.generateProjectThumbnail().catch(ee=>{console.error("Error generating final project thumbnail: ",ee)}),Y(10);var fe=O.topLevelMolecule.serialize();fe.filetypeVersion=1;const ue=JSON.stringify(fe,null,4);let ge=O.topLevelMolecule.formatBom();var Se="###### Note: Do not edit this file directly, it is automatically generated from the CAD model",xe=Se+`

# `+O.currentRepoName+`

![](/project.svg)

`;Y(20);let De=await O.topLevelMolecule.requestReadme(),Ae=" ";De.forEach(ee=>{Ae=Ae.concat(ee.readMeText)+`

`}),xe=xe+`

`+Ae+`

`;let ie={"BillOfMaterials.md":ge,"README.md":xe,"project.abundance":ue};const Re=De;let Pe;Re&&Re.forEach(ee=>{ee.svg!=null&&(ie["readme"+ee.uniqueID+".svg"]=ee.svg,Pe=ee.svg)}),ie["project.svg"]=re||Pe||"",Y(30),V(t,{owner:O.currentUser,repo:O.currentRepo.repoName,changes:{files:ie,commit:"Autosave"}},Y)};if(t){if(O.currentRepo.owner.login==O.currentRepo.owner.login)return Q.jsxs(Q.Fragment,{children:[Q.jsx("div",{id:"headerBar",children:Q.jsx("img",{className:"thumnail-logo",src:"/imgs/abundance_logo.png",alt:"logo"})}),o?Q.jsxs("div",{className:"login-popup",id:"exporting-popup-back",style:{padding:"0",border:"10px solid #3e3d3d"},children:[Q.jsxs("div",{children:[" ",O.currentRepo?Q.jsx(Oy,{to:`/${O.currentRepo.owner}/${O.currentRepo.repoName}`,children:Q.jsx("button",{className:"closeButton",children:Q.jsx("img",{})})}):null]}),Q.jsx(KQ,{setExportPopUp:s,exporting:!0,authorizedUserOcto:t})]}):null,Q.jsx(Wre,{run:!1}),a?Q.jsxs("div",{id:"shortcutDiv",children:[Q.jsx("li",{style:{fontSize:"14px"},children:"(Cmmd +)"}),Object.entries(N).map(([Y,re])=>Q.jsxs("li",{className:"shortcut",children:[Y," : ",re]},Y))]}):null,Q.jsx(oYe,{authorizedUserOcto:t,savePopUp:R,setSavePopUp:B,saveProject:Z,setExportPopUp:s,saveState:C,setSaveState:D,currentMoleculeTop:F,activeAtom:n,setActiveAtom:e,setShortCuts:l}),Q.jsx(crt,{activeAtom:n}),Q.jsx("input",{type:"file",id:"fileLoaderInput",style:{display:"none"},onChange:Y=>{let re=Y.target.files[0];L(re)}}),Q.jsx("input",{type:"button",id:"fileDeleteInput",style:{display:"none"},onClick:()=>{X(n.fileName,n.sha)}}),Q.jsx(tKe,{activeAtom:n,loadProject:i,setActiveAtom:e,setSavePopUp:B,setSaveState:D,setTop:U,shortCuts:N,setMesh:c,cad:d,setWireMesh:m}),Q.jsxs("div",{className:"parent flex-parent",id:"lowerHalf",children:[n?Q.jsx(jre,{activeAtom:n,setActiveAtom:e,setGrid:b,setAxes:S,setWire:M,setSolid:T}):null,Q.jsx(rKe,{gridParam:w,axesParam:v,wireParam:x,solidParam:A,setSaveState:D,mesh:u,wireMesh:h,outdatedMesh:g,setOutdatedMesh:y})]})]});p(`/run/${O.currentRepo.owner}/${O.currentRepo.repoName}`)}else{console.warn("You are not logged in");const{owner:Y,repoName:re}=pX();var te=new Of;te.request("GET /repos/{owner}/{repo}",{owner:Y,repo:re}).then(fe=>{O.currentRepoName=fe.data.name,O.currentRepo=fe.data})}}function drt(n){return new Worker("/abundance-mo-fork/assets/worker-BV9uEXZo.js",{name:n==null?void 0:n.name})}const Ld=_X(new drt);function hrt(){const[n,e]=z.useState(5),[t,r]=z.useState({}),[i,o]=z.useState(null),[s,a]=z.useState(!1);z.useEffect(()=>{Ld.createMesh(n).then(v=>r(v)),Ld.createMesh(n).then(v=>o(v))},[n]);const[l,u]=z.useState(!1),[c,f]=z.useState(null),[d,h]=z.useState(!1),[m,g]=z.useState(null),[y,p]=z.useState(O.displayShortcuts);z.useEffect(()=>{console.log("useEffect  in top levelrunning"),O.writeToDisplay=(v,S=!1)=>{console.log("write to display running "+v),a(!0),S?Ld.resetView().then(x=>{r(x),o(x),a(!1)}).catch(x=>{console.error("reset view not working"+x)}):(Ld.generateDisplayMesh(v).then(x=>{r(x),a(!1)}).catch(x=>{console.error("Can't display Mesh "+x)}),Ld.generateDisplayMesh(O.currentMolecule.output.value).then(x=>o(x)).catch(x=>{console.error("Can't comput Wireframe/No output "+x)}))},O.cad=Ld},[c]);const w=function(){},b=function(v){console.log(v),O.recentMoleculeRepresentation=[],O.loadedRepo=v,O.currentRepoName=v.repoName,O.currentRepo=v,O.totalAtomCount=0,O.numberOfAtomsToLoad=0,O.startTime=new Date().getTime();var S=new Of;return S.request("GET /repos/{owner}/{repo}/contents/project.abundance",{owner:v.owner,repo:v.repoName}).then(x=>{console.log(x);let M=JSON.parse(atob(x.data.content));M.filetypeVersion==1?O.topLevelMolecule.deserialize(M):O.topLevelMolecule.deserialize(convertFromOldFormat(M)),f(O.currentMolecule),O.currentMolecule.selected=!0}).catch(x=>{throw alert("Can't load/find project "+x),new Error("Can't load/find project "+x)})};return Q.jsx("main",{children:Q.jsxs(tfe,{children:[Q.jsx(N0,{exact:!0,path:"",element:Q.jsx(F9e,{tryLogin:w,setIsLoggedIn:u,isloggedIn:l,authorizedUserOcto:m,setAuthorizedUserOcto:g,exportPopUp:d,setExportPopUp:h})}),Q.jsx(N0,{exact:!0,path:"/callback",element:Q.jsx("p",{children:"callback"})}),Q.jsx(N0,{path:"/:owner/:repoName",element:Q.jsx(frt,{activeAtom:c,setActiveAtom:f,authorizedUserOcto:m,tryLogin:w,loadProject:b,exportPopUp:d,setExportPopUp:h,shortCutsOn:y,setShortCuts:p,mesh:t,setMesh:r,size:n,cad:Ld,wireMesh:i,setWireMesh:o,outdatedMesh:s,setOutdatedMesh:a})}),Q.jsx(N0,{path:"/run/:owner/:repoName",element:Q.jsx(nYe,{isloggedIn:l,setActiveAtom:f,activeAtom:O.currentMolecule,authorizedUserOcto:m,tryLogin:w,loadProject:b,mesh:t,wireMesh:i,setWireMesh:o,outdatedMesh:s,setOutdatedMesh:a})})]})})}const prt=({children:n})=>{const e="dev-ln37eaqfk7dp2480.us.auth0.com",t="zNpgG4wQuLXBdwjkqKEbGImYnYeqPXc3",r="https://api.github.com/",i=rd(),o=s=>{console.log("onRedirectCallback"),console.log(s),i((s==null?void 0:s.returnTo)||window.location.pathname)};return Q.jsx(R9e,{domain:e,clientId:t,onRedirectCallback:o,authorizationParams:{redirect_uri:window.location.origin,audience:r},children:n})},mrt=ED.createRoot(document.getElementById("root"));mrt.render(Q.jsx(lfe,{basename:"/abundance-mo-fork/",children:Q.jsx(prt,{children:Q.jsx(hrt,{})})}));
